import{r as n,f as Z,I as y,c as ee,g as x,o as a,w as te,b as t,i as _,a as d,m as le,q as M,v as P,F as oe,l as se,t as C,J as ne,y as j,M as S,L as ae,H as ie}from"./app-cfLvAf14.js";import{_ as re}from"./AuthenticatedLayout-D4OdG3cb.js";import ue from"./PresentationForm-CjDW9Rfa.js";import de from"./CreationChoiceModal-DAAc4Zj_.js";import ce from"./TemplateBrowser-CpVCYFgA.js";import ve from"./SlideSummaryModal-hRZZon7w.js";import{a as D}from"./presentationsApi-BCql753M.js";import"./PrimaryButton-CXpmVcsZ.js";import"./Modal-BffzNclU.js";import"./InputLabel-D-91TLny.js";import"./InputError-BghqWSy7.js";import"./SecondaryButton-DUH3s1jv.js";import"./index-NwqWWDUC.js";import"./BaseFormModal-DogbTrgb.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./TextInput-DKI04P3v.js";import"./SelectDropdown-BFDCWom8.js";/* empty css                                                                       */import"./debounce-C-hnF4Z3.js";import"./Checkbox-Dzdx_a-a.js";import"./ApplicationLogo-DwLG9F7x.js";import"./DangerButton-C5yTX3aO.js";import"./moment-BLMuvzoS.js";import"./NoticeboardModal-Cmn6IyAM.js";import"./Modal-g_TCxDoG.js";const me={class:"bg-slate-50 min-h-screen"},fe={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12"},pe={class:"flex flex-col md:flex-row items-start md:items-center justify-between pb-8 border-b border-slate-200 mb-8"},be={class:"mb-6"},xe={class:"relative"},we={key:0,class:"text-center py-16"},he={key:1,class:"text-center py-16 border-2 border-dashed border-slate-200 rounded-xl"},ge={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},ye={class:"p-5 flex-grow"},_e={class:"flex items-start justify-between"},Ce={class:"inline-block px-2.5 py-1 text-xs font-semibold rounded-full mb-3 bg-blue-100 text-blue-600"},ke=["onMouseenter","onMouseleave"],$e=["onMouseenter","onMouseleave"],Me=["onClick"],Se=["onClick"],De=["onClick"],Te=["onClick"],Be={key:0,class:"mt-1 flex items-center gap-2"},ze=["aria-label","onKeyup","disabled"],Le=["onClick","disabled"],Ie={key:1},Pe=["title"],je={class:"text-sm text-slate-500 mt-1"},Ae={class:"px-5 py-4 border-t border-slate-100 flex items-center justify-between"},Ne={class:"text-xs text-slate-400"},Re=["onClick"],ct={__name:"PresentationList",setup(Ve){const i=n([]),k=n(!1),c=n(!1),m=n(!1),w=n(!1),f=n(!1),T=n(null),p=n(null),b=n([]),$=n(""),u=n(null),h=n(null),v=n(""),g=n(!1);Z(A);async function A(){k.value=!0;try{const e=await D.list();i.value=Array.isArray(e)?e:(e==null?void 0:e.data)??[]}catch{y("Failed to load presentations")}finally{k.value=!1}}const B=ee(()=>{const e=$.value.toLowerCase();return(Array.isArray(i.value)?i.value:[]).filter(l=>{var r;return(l.title||"").toLowerCase().includes(e)||(l.presentable_name||((r=l.presentable)==null?void 0:r.name)||"").toLowerCase().includes(e)})});function N(e){if(!e)return"-";try{return new Date(e).toLocaleDateString()}catch{return e}}function R(e){ie.visit(`/presentations/${e}/edit`)}function V(){m.value=!0}function F(){m.value=!1,p.value=null,b.value=[],c.value=!0}function H(){m.value=!1,w.value=!0}function E(e){w.value=!1,p.value=(e==null?void 0:e.id)||null,b.value=[],c.value=!0}function K(e){T.value=e,f.value=!0}function q(e){u.value=e}function U(e){u.value=e}function G(e){setTimeout(()=>{!u.value===e&&(u.value=null)},500)}function J(e){u.value=null}async function O(e){const o=`${window.location.origin}/view/${e.share_token||""}`;await navigator.clipboard.writeText(o),S("Share link copied to clipboard")}async function Q(e){if(await ae("Delete this presentation?",{confirmText:"Delete",cancelText:"Cancel",type:"warning"}))try{await D.destroy(e),i.value=i.value.filter(l=>l.id!==e),S("Presentation deleted")}catch{y("Failed to delete presentation")}}function W(e){h.value=e.id,v.value=e.title||"",u.value=null}function z(){h.value=null,v.value=""}async function L(e){if(!(e!=null&&e.id))return;const o=(v.value||"").trim();if(!o){y("Title cannot be empty");return}g.value=!0;try{const l=await D.update(e.id,{title:o}),r=i.value.findIndex(s=>s.id===e.id);r!==-1&&(i.value[r].title=(l==null?void 0:l.title)??o),S("Presentation renamed"),h.value=null,v.value=""}catch{y("Failed to rename presentation")}finally{g.value=!1}}function I(e){c.value=!1,p.value=null,b.value=[],e&&i.value.unshift(e)}function X(e){f.value=!1,e&&e._fromSelection?(p.value=null,b.value=e.source_slide_ids||[],c.value=!0):e&&e.id&&i.value.unshift(e)}function Y(){f.value=!1}return(e,o)=>(a(),x(re,null,{default:te(()=>[t("div",me,[t("main",fe,[t("div",pe,[o[8]||(o[8]=t("div",null,[t("h1",{class:"text-3xl font-bold text-slate-800"},"Presentations"),t("p",{class:"mt-1 text-slate-500"},"Create, manage, and share your client presentations.")],-1)),t("button",{onClick:o[0]||(o[0]=l=>V()),class:"mt-4 md:mt-0 inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-semibold shadow hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-600","aria-label":"Create new presentation"},o[7]||(o[7]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",class:"w-5 h-5"},[t("path",{d:"M10.75 4.75a.75.75 0 00-1.5 0v4.5h-4.5a.75.75 0 000 1.5h4.5v4.5a.75.75 0 001.5 0v-4.5h4.5a.75.75 0 000-1.5h-4.5v-4.5z"})],-1),le(" New Presentation ",-1)]))]),t("div",be,[t("div",xe,[o[9]||(o[9]=t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",class:"w-5 h-5 absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 pointer-events-none"},[t("path",{"fill-rule":"evenodd",d:"M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z","clip-rule":"evenodd"})],-1)),M(t("input",{"onUpdate:modelValue":o[1]||(o[1]=l=>$.value=l),placeholder:"Search by title or client/lead...",class:"w-full border border-slate-300 rounded-lg py-2 pl-10 pr-4 focus:ring-2 focus:ring-blue-600 focus:border-blue-600 transition-shadow","aria-label":"Search presentations"},null,512),[[P,$.value]])])]),k.value?(a(),d("div",we,o[10]||(o[10]=[t("div",{class:"flex items-center justify-center gap-3 text-slate-500"},[t("span",{class:"inline-block h-6 w-6 border-2 border-slate-300 border-t-blue-600 rounded-full animate-spin","aria-hidden":"true"}),t("span",null,"Loading Presentations...")],-1)]))):B.value.length?(a(),d("div",ge,[(a(!0),d(oe,null,se(B.value,l=>{var r;return a(),d("div",{key:l.id,class:"bg-white rounded-xl shadow-sm border border-slate-200 flex flex-col transition-all hover:shadow-md hover:-translate-y-1"},[t("div",ye,[t("div",_e,[t("span",Ce,C(l.type),1),t("div",{class:"relative group",onMouseenter:s=>q(l.id),onMouseleave:s=>G(l.id)},[o[13]||(o[13]=t("button",{class:"h-8 w-8 rounded-full flex items-center justify-center text-slate-400 hover:bg-slate-100 hover:text-slate-600"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",class:"w-5 h-5"},[t("path",{d:"M10 3a1.5 1.5 0 110 3 1.5 1.5 0 010-3zM10 8.5a1.5 1.5 0 110 3 1.5 1.5 0 010-3zM11.5 15.5a1.5 1.5 0 10-3 0 1.5 1.5 0 003 0z"})])],-1)),M(t("div",{class:"absolute right-0 mt-1 w-48 bg-white rounded-md shadow-lg border border-slate-200 py-1 z-10 transition-opacity duration-200",onMouseenter:s=>U(l.id),onMouseleave:s=>J(l.id)},[t("a",{onClick:s=>K(l.id),class:"block w-full text-left px-4 py-2 text-sm text-slate-700 hover:bg-slate-100 cursor-pointer"},"Duplicate...",8,Me),t("a",{onClick:s=>O(l),class:"block w-full text-left px-4 py-2 text-sm text-slate-700 hover:bg-slate-100 cursor-pointer"},"Share",8,Se),t("a",{onClick:s=>W(l),class:"block w-full text-left px-4 py-2 text-sm text-slate-700 hover:bg-slate-100 cursor-pointer"},"Rename",8,De),o[12]||(o[12]=t("div",{class:"my-1 h-px bg-slate-100"},null,-1)),t("a",{onClick:s=>Q(l.id),class:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 cursor-pointer"},"Delete",8,Te)],40,$e),[[ne,u.value===l.id]])],40,ke)]),h.value===l.id?(a(),d("div",Be,[M(t("input",{"onUpdate:modelValue":o[2]||(o[2]=s=>v.value=s),placeholder:"New title",class:"flex-1 border border-slate-300 rounded-lg p-1.5 text-sm focus:ring-2 focus:ring-blue-600 focus:border-blue-600","aria-label":`Rename ${l.title}`,onKeyup:[j(s=>L(l),["enter"]),j(z,["esc"])],disabled:g.value},null,40,ze),[[P,v.value]]),t("button",{onClick:s=>L(l),class:"px-2 py-1 bg-blue-600 text-white rounded-md text-xs font-semibold hover:bg-blue-700 disabled:opacity-50",disabled:g.value,"aria-label":"Save new title"},"Save",8,Le),t("button",{onClick:z,class:"px-2 py-1 bg-slate-100 text-slate-700 rounded-md text-xs font-semibold hover:bg-slate-200","aria-label":"Cancel rename"},"Cancel")])):(a(),d("div",Ie,[t("h2",{class:"text-lg font-bold text-slate-800 truncate",title:l.title},C(l.title),9,Pe),t("p",je,C(l.presentable_name||((r=l.presentable)==null?void 0:r.name)||"-"),1)]))]),t("div",Ae,[t("span",Ne,"Created: "+C(N(l.created_at)),1),t("button",{onClick:s=>R(l.id),class:"px-3 py-1.5 bg-slate-100 text-slate-700 rounded-md text-xs font-semibold hover:bg-slate-200 focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-blue-600"},"Edit",8,Re)])])}),128))])):(a(),d("div",he,o[11]||(o[11]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"mx-auto h-12 w-12 text-slate-400"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})],-1),t("h3",{class:"mt-2 text-sm font-semibold text-slate-800"},"No presentations found",-1),t("p",{class:"mt-1 text-sm text-slate-500"},"Get started by creating a new presentation.",-1)])))]),m.value?(a(),x(de,{key:0,onClose:o[3]||(o[3]=l=>m.value=!1),onScratch:F,onChooseTemplate:H,onCreated:I})):_("",!0),w.value?(a(),x(ce,{key:1,onClose:o[4]||(o[4]=l=>w.value=!1),onSelected:E})):_("",!0),c.value?(a(),x(ue,{key:2,"template-id":p.value,"source-slide-ids":b.value,onClose:o[5]||(o[5]=l=>c.value=!1),onCreated:I},null,8,["template-id","source-slide-ids"])):_("",!0),f.value?(a(),x(ve,{key:3,"presentation-id":T.value,onClose:o[6]||(o[6]=l=>f.value=!1),onCreated:X,onCopied:Y},null,8,["presentation-id"])):_("",!0)])]),_:1}))}};export{ct as default};
