import{r as I,c as B,K as Te,m as me,L as je,f as n,g as h,o as s,F as K,i as Y,d as t,t as j,e as D,M as Ke,N as vt,O as Je,P as Ye,a as P,n as N,T as Ze,l as G,w,q as Ee,s as Z,y as pt,p as T,b as p,x as le,j as H,Q as Ae,H as ft,J as ye,C as re,R as ae,S as Q,U as Pe,B as De,E as gt,V as Ge,W as Fe,X as ce,z as de,Y as Qe,Z as Ue,u as Be,_ as ve,$ as te,a0 as ue,a1 as Ne,a2 as yt,a3 as ht,a4 as We,A as bt}from"./app-CwLjNXT3.js";import{P as X}from"./PrimaryButton-Bn1p3q-j.js";import{_ as Le}from"./Modal-uBVvV53I.js";import{_ as L}from"./InputLabel-BSEjZJ95.js";import{_ as q}from"./InputError-BZ-n7H_N.js";import{_ as Ie}from"./SecondaryButton-C1H9a7MO.js";import{_ as be}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as ne}from"./TextInput-C-mFm0N_.js";import{S as se}from"./SelectDropdown-DGCykHln.js";import{_ as kt}from"./Checkbox-C0IliKwo.js";import{A as xt}from"./ApplicationLogo-B9jAedvC.js";import{D as Re}from"./DangerButton-CBIP4jF7.js";import{h as wt}from"./moment-BLMuvzoS.js";const _t={key:0,class:"fixed bottom-4 right-4 z-50 flex flex-col items-end space-y-2"},$t={key:0,class:"notification-list w-full max-w-xs space-y-2"},Ct={class:"flex-1 min-w-0"},St={class:"flex items-start justify-between gap-2 mb-1"},Tt={class:"flex-1 min-w-0"},It={key:0,class:"text-base font-semibold text-gray-800 truncate"},jt={key:1,class:"text-xs text-gray-500"},At={key:0,class:"text-xs text-gray-600 mb-2"},Dt={class:"flex items-center justify-between mt-2"},Mt={key:0,class:"text-xs text-gray-500 font-medium"},Pt=["onClick"],Et={key:1,class:"flex justify-end w-full max-w-xs"},Vt={key:0},Nt={key:1},ge="notification_minimized_state",Ut=3,Bt={__name:"PushNotificationContainer",props:{sidebarIsOpen:{type:Boolean,default:!1}},setup(a){const l=I(!1),r=I(null),d=I(0),e=I(null),g=B(()=>Te.value.notifications.filter(c=>c.isNewPush).slice(0,Ut)),u=B(()=>{const c=Math.floor(d.value/60),b=d.value%60;return`${String(c).padStart(2,"0")}:${String(b).padStart(2,"0")}`}),v=c=>{if(!c)return null;const b=c.match(/\/task\/(\d+)/);return b?parseInt(b[1]):null},f=c=>{if(!c)return null;const b=c.match(/\/project\/(\d+)\//);return b?parseInt(b[1]):null},i=()=>{if(l.value=!l.value,clearTimeout(r.value),clearInterval(e.value),l.value){const c=Date.now()+3e5;localStorage.setItem(ge,JSON.stringify({isMinimized:!0,expiryTime:c})),r.value=setTimeout(()=>{l.value=!1,clearInterval(e.value),localStorage.removeItem(ge)},3e5),d.value=300,e.value=setInterval(()=>{d.value>0?d.value--:clearInterval(e.value)},1e3)}else localStorage.removeItem(ge)},_=async c=>{vt(c.id),await Je(c.view_id);const b=c.task_id||v(c.url),S=c.project_id||f(c.url);b&&S?Ye(b,S):(console.warn("Could not open task sidebar. Falling back to redirecting."),c.url&&(window.location.href=c.url))};return me(()=>{const c=localStorage.getItem(ge);if(c)try{const{isMinimized:b,expiryTime:S}=JSON.parse(c),$=Date.now(),y=S-$;y>0?(l.value=b,d.value=Math.floor(y/1e3),r.value=setTimeout(()=>{l.value=!1,clearInterval(e.value),localStorage.removeItem(ge)},y),e.value=setInterval(()=>{d.value>0?d.value--:clearInterval(e.value)},1e3)):localStorage.removeItem(ge)}catch(b){console.error("Error restoring notification minimized state:",b),localStorage.removeItem(ge)}}),je(()=>{clearTimeout(r.value),clearInterval(e.value)}),(c,b)=>a.sidebarIsOpen?h("",!0):(s(),n("div",_t,[!l.value&&g.value.length>0?(s(),n("div",$t,[(s(!0),n(K,null,Y(g.value,S=>(s(),n("div",{key:S.id,class:"bg-white rounded-lg shadow-lg p-3 flex items-start space-x-3 border border-gray-200 transition-opacity duration-300 opacity-60 hover:opacity-100"},[t("div",Ct,[t("div",St,[t("div",Tt,[S.title?(s(),n("h3",It,j(S.title),1)):h("",!0),S.project_name?(s(),n("p",jt,j(S.project_name),1)):h("",!0)])]),S.message?(s(),n("p",At,j(S.message),1)):h("",!0),t("div",Dt,[S.due_date?(s(),n("div",Mt," Due: "+j(D(Ke)(S.due_date)),1)):h("",!0),t("button",{onClick:$=>_(S),class:"px-2.5 py-1 bg-blue-600 text-white text-xs font-medium rounded-md hover:bg-blue-700 transition-colors duration-200 shadow"},j(S.button_label||"View"),9,Pt)])])]))),128))])):h("",!0),g.value.length>0?(s(),n("div",Et,[t("button",{onClick:i,class:"bg-white/80 backdrop-blur-sm text-gray-600 hover:text-gray-900 text-xs font-bold py-1 px-3 rounded-full shadow-md transition-all duration-300"},[l.value?(s(),n("span",Vt,"Show ("+j(u.value)+")",1)):(s(),n("span",Nt,"Minimize"))])])):h("",!0)]))}},Lt={class:"fixed top-4 right-4 z-[9999] flex flex-col items-end space-y-3"},Rt={class:"p-4"},zt={class:"text-sm font-medium text-white"},Ft={key:0,class:"mt-3 flex gap-2"},Wt=["onClick"],qt=["onClick"],Ot={key:1,class:"fixed top-4 right-4 z-[9999] flex flex-col items-end space-y-3"},Ht={class:"p-4"},Kt={class:"text-sm font-medium text-white"},Jt={key:0,class:"mt-3 flex gap-2"},Yt=["onClick"],Zt=["onClick"],Gt={__name:"StandardNotificationContainer",setup(a,{expose:l}){const r=I([]),d=I("");let e=null;const g=()=>{const c=document.getElementById("modal-notification-portal");d.value=c?"#modal-notification-portal":""};me(()=>{g(),e=new MutationObserver(g),e.observe(document.body,{childList:!0,subtree:!0})}),je(()=>{e&&e.disconnect()});const u=(c,b="info",S=5e3)=>{let $;typeof c=="object"&&c!==null?$={...c}:$={message:c,type:b,duration:S};const y=$.id||crypto.randomUUID(),M={id:y,message:$.message||"",type:$.type||"info",duration:typeof $.duration=="number"?$.duration:5e3,sticky:!!$.sticky,confirm:$.confirm||null};return r.value.unshift(M),!M.sticky&&!M.confirm&&setTimeout(()=>{v(y)},M.duration),y},v=c=>{const b=r.value.findIndex(S=>S.id===c);b>-1&&r.value.splice(b,1)},f=c=>{const b=r.value.find(S=>S.id===c);if(b&&b.confirm&&typeof b.confirm.onConfirm=="function")try{b.confirm.onConfirm()}catch{}v(c)},i=c=>{const b=r.value.find(S=>S.id===c);if(b&&b.confirm&&typeof b.confirm.onCancel=="function")try{b.confirm.onCancel()}catch{}v(c)},_=c=>{switch(c){case"success":return"bg-green-500";case"error":return"bg-red-500";case"warning":return"bg-yellow-500";case"info":default:return"bg-blue-500"}};return l({addNotification:u}),(c,b)=>d.value?(s(),P(Ze,{key:0,to:d.value},[t("div",Lt,[(s(!0),n(K,null,Y(r.value,S=>(s(),n("div",{key:S.id,class:N(["w-full max-w-sm rounded-md shadow-lg pointer-events-auto overflow-hidden",_(S.type)])},[t("div",Rt,[t("p",zt,j(S.message),1),S.confirm?(s(),n("div",Ft,[t("button",{class:"px-3 py-1 text-sm font-semibold rounded bg-white/90 text-slate-800 hover:bg-white",onClick:$=>f(S.id)},j(S.confirm.confirmText||"Confirm"),9,Wt),t("button",{class:"px-3 py-1 text-sm font-semibold rounded bg-transparent border border-white/70 text-white hover:bg-white/10",onClick:$=>i(S.id)},j(S.confirm.cancelText||"Cancel"),9,qt)])):h("",!0)])],2))),128))])],8,["to"])):(s(),n("div",Ot,[(s(!0),n(K,null,Y(r.value,S=>(s(),n("div",{key:S.id,class:N(["w-full max-w-sm rounded-md shadow-lg pointer-events-auto overflow-hidden",_(S.type)])},[t("div",Ht,[t("p",Kt,j(S.message),1),S.confirm?(s(),n("div",Jt,[t("button",{class:"px-3 py-1 text-sm font-semibold rounded bg-white/90 text-slate-800 hover:bg-white",onClick:$=>f(S.id)},j(S.confirm.confirmText||"Confirm"),9,Yt),t("button",{class:"px-3 py-1 text-sm font-semibold rounded bg-transparent border border-white/70 text-white hover:bg-white/10",onClick:$=>i(S.id)},j(S.confirm.cancelText||"Cancel"),9,Zt)])):h("",!0)])],2))),128))]))}},Qt={class:"p-6"},Xt={class:"mt-6"},es={key:0,class:"mb-4 p-4 bg-green-100 border border-green-400 text-green-700 rounded"},ts={key:1,class:"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded"},ss={class:"flex items-center mb-3"},as=["id","onUpdate:modelValue"],os=["for"],ls={key:0,class:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800"},ns={key:0},rs={class:"mb-4"},is={class:"flex items-center"},ds=["id","checked","onChange"],us=["for"],cs={key:0,class:"mb-4"},ms=["id","onUpdate:modelValue"],vs={key:1,class:"mb-4"},ps={class:"flex-1"},fs=["id","onUpdate:modelValue"],gs={class:"flex-1"},ys=["id","onUpdate:modelValue"],hs={key:0,class:"flex items-end pb-1"},bs=["onClick"],ks=["onClick"],xs={class:"mt-6 flex justify-end space-x-3"},ws={key:0,class:"flex items-center"},_s={key:1},$s={__name:"AvailabilityModal",props:{show:Boolean,date:{type:String,default:()=>{const a=new Date;return a.setDate(a.getDate()+1),a.toISOString().split("T")[0]}},nextWeekDates:{type:Array,default:()=>[]},userId:{type:Number,default:null}},emits:["close","availability-saved"],setup(a,{emit:l}){const r=()=>{const M=localStorage.getItem("authToken");M&&!H.defaults.headers.common.Authorization&&(H.defaults.headers.common.Authorization=`Bearer ${M}`,console.log("Auth headers set in AvailabilityModal"))},d=a,e=l,g=I({}),u=I({}),v=I(!1),f=I(""),i=()=>{const M=[],k=new Date,o=new Date(k);o.setDate(k.getDate()+1);for(let m=0;m<7;m++){const x=new Date(o);x.setDate(o.getDate()+m);const A=x.toISOString().split("T")[0];M.push({value:A,label:x.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})}),g.value[A]={isSelected:!1,isAvailable:!0,reason:"",timeSlots:[{start_time:"",end_time:""}]}}return M},_=I([]);me(()=>{r(),d.nextWeekDates.length>0?(_.value=d.nextWeekDates,d.nextWeekDates.forEach(M=>{g.value[M.value]={isSelected:!1,isAvailable:!0,reason:"",timeSlots:[{start_time:"",end_time:""}]}})):_.value=i()});const c=async()=>{try{if(r(),_.value.length===0)return;const M=_.value[0].value,k=_.value[_.value.length-1].value,o=await H.get("/api/availabilities",{params:{start_date:M,end_date:k,user_id:d.userId}});if(o.data&&o.data.availabilities){const m=o.data.availabilities;_.value.forEach(x=>{g.value[x.value]={isSelected:!1,isAvailable:!0,reason:"",timeSlots:[{start_time:"",end_time:""}]}}),m.forEach(x=>{const A=x.date.split("T")[0];g.value[A]&&(g.value[A].isSelected=!0,g.value[A].isAvailable=x.is_available,x.is_available?g.value[A].timeSlots=x.time_slots&&x.time_slots.length>0?[...x.time_slots]:[{start_time:"",end_time:""}]:g.value[A].reason=x.reason||"")})}}catch(M){console.error("Error fetching existing availabilities:",M),_.value.forEach(k=>{g.value[k.value]={isSelected:!1,isAvailable:!0,reason:"",timeSlots:[{start_time:"",end_time:""}]}})}};G(()=>d.show,async M=>{M&&(u.value={},f.value="",await c())},{immediate:!0});const b=M=>{g.value[M].timeSlots.push({start_time:"",end_time:""})},S=(M,k)=>{g.value[M].timeSlots.length>1&&g.value[M].timeSlots.splice(k,1)},$=(M,k)=>{g.value[M].isAvailable=k,k?g.value[M].reason="":g.value[M].timeSlots=[{start_time:"",end_time:""}]},y=async()=>{v.value=!0,u.value={},f.value="";const M=[];let k=!1;for(const o of _.value){const m=o.value,x=g.value[m];if(x.isSelected){let A={};if(x.isAvailable)if(x.timeSlots.some(V=>!V.start_time||!V.end_time))A.timeSlots="Please fill in all time slots.",k=!0;else for(const V of x.timeSlots){const O=V.start_time.split(":").map(Number),ie=V.end_time.split(":").map(Number);if(O.length!==2||ie.length!==2||isNaN(O[0])||isNaN(O[1])||isNaN(ie[0])||isNaN(ie[1])){A.timeSlots="Invalid time format. Please use HH:MM format.",k=!0;break}const W=O[0]*60+O[1],U=ie[0]*60+ie[1];if(W>=U){A.timeSlots="End time must be after start time.",k=!0;break}}else x.reason.trim()||(A.reason="Please provide a reason for unavailability.",k=!0);Object.keys(A).length>0&&(u.value[m]=A),Object.keys(A).length===0&&M.push({date:m,is_available:x.isAvailable,reason:x.isAvailable?null:x.reason,time_slots:x.isAvailable?x.timeSlots:null})}}if(k){v.value=!1,u.value.general="Please correct the errors in the highlighted dates.";return}if(M.length===0){u.value.general="Please select at least one day to set availability for.",v.value=!1;return}try{r();const o=await H.post("/api/availabilities/batch",{availabilities:M});f.value="Availability saved successfully!";try{const m=await H.get("/api/availability-prompt");localStorage.setItem("shouldBlockUser",m.data.should_block_user),localStorage.setItem("allWeekdaysCovered",m.data.all_weekdays_covered);const x=new CustomEvent("availability-status-updated",{detail:{shouldBlockUser:m.data.should_block_user,allWeekdaysCovered:m.data.all_weekdays_covered}});window.dispatchEvent(x),console.log("Availability status updated from modal:",{shouldBlockUser:m.data.should_block_user,allWeekdaysCovered:m.data.all_weekdays_covered})}catch(m){console.error("Error updating availability status:",m)}e("availability-saved",o.data.availabilities),setTimeout(()=>{e("close")},1500)}catch(o){console.error("Error saving availability:",o),o.response&&o.response.data&&o.response.data.errors?u.value.general=o.response.data.message||"An error occurred while saving your availability.":o.response&&o.response.status===409?(f.value=o.response.data.message,setTimeout(()=>{e("close")},1500)):u.value.general="An unexpected error occurred while saving your availability."}finally{v.value=!1}};return(M,k)=>(s(),P(Le,{show:a.show,onClose:k[1]||(k[1]=o=>M.$emit("close")),"max-width":"xl"},{default:w(()=>[t("div",Qt,[k[6]||(k[6]=t("h2",{class:"text-lg font-medium text-gray-900"}," Submit Your Weekly Availability ",-1)),k[7]||(k[7]=t("p",{class:"mt-1 text-sm text-gray-600"}," Please select the dates you wish to set availability for and provide your details for each. ",-1)),t("div",Xt,[t("form",{onSubmit:Ee(y,["prevent"])},[f.value?(s(),n("div",es,j(f.value),1)):h("",!0),u.value.general?(s(),n("div",ts,j(u.value.general),1)):h("",!0),(s(!0),n(K,null,Y(_.value,o=>{var m,x;return s(),n("div",{key:o.value,class:N(["mb-6 p-4 border rounded-lg shadow-sm",[g.value[o.value].isSelected?"border-indigo-300 bg-indigo-50":"border-gray-200",g.value[o.value].isSelected&&!u.value[o.value]?"border-l-4 border-l-indigo-500":""]])},[t("div",ss,[Z(t("input",{type:"checkbox",id:`select_date_${o.value}`,"onUpdate:modelValue":A=>g.value[o.value].isSelected=A,class:"rounded border-gray-300 text-indigo-600 shadow-sm focus:ring-indigo-500"},null,8,as),[[pt,g.value[o.value].isSelected]]),t("label",{for:`select_date_${o.value}`,class:"ml-2 block text-base font-medium text-gray-800"},[T(j(o.label)+" ",1),g.value[o.value].isSelected?(s(),n("span",ls," Saved ")):h("",!0)],8,os)]),g.value[o.value].isSelected?(s(),n("div",ns,[t("div",rs,[t("div",is,[t("input",{type:"checkbox",id:`isAvailableToggle_${o.value}`,checked:g.value[o.value].isAvailable,onChange:A=>$(o.value,A.target.checked),class:"rounded border-gray-300 text-indigo-600 shadow-sm focus:ring-indigo-500"},null,40,ds),t("label",{for:`isAvailableToggle_${o.value}`,class:"ml-2 block text-sm text-gray-700"}," I am available on this day ",8,us)])]),g.value[o.value].isAvailable?h("",!0):(s(),n("div",cs,[p(L,{for:`reason_${o.value}`,value:"Reason for Not Available"},null,8,["for"]),Z(t("textarea",{id:`reason_${o.value}`,"onUpdate:modelValue":A=>g.value[o.value].reason=A,rows:"2",class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",placeholder:"e.g., Out of office, Holiday, Meeting all day"},null,8,ms),[[le,g.value[o.value].reason]]),p(q,{message:(m=u.value[o.value])==null?void 0:m.reason,class:"mt-2"},null,8,["message"])])),g.value[o.value].isAvailable?(s(),n("div",vs,[p(L,{value:"Available Time Slots"}),p(q,{message:(x=u.value[o.value])==null?void 0:x.timeSlots,class:"mt-2"},null,8,["message"]),(s(!0),n(K,null,Y(g.value[o.value].timeSlots,(A,V)=>(s(),n("div",{key:V,class:"flex items-center space-x-2 mt-2"},[t("div",ps,[p(L,{for:`start_time_${o.value}_${V}`,value:"Start Time",class:"text-xs"},null,8,["for"]),Z(t("input",{id:`start_time_${o.value}_${V}`,type:"time","onUpdate:modelValue":O=>A.start_time=O,class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm"},null,8,fs),[[le,A.start_time]])]),t("div",gs,[p(L,{for:`end_time_${o.value}_${V}`,value:"End Time",class:"text-xs"},null,8,["for"]),Z(t("input",{id:`end_time_${o.value}_${V}`,type:"time","onUpdate:modelValue":O=>A.end_time=O,class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm"},null,8,ys),[[le,A.end_time]])]),g.value[o.value].timeSlots.length>1?(s(),n("div",hs,[t("button",{type:"button",onClick:O=>S(o.value,V),class:"p-2 text-red-600 hover:text-red-800"},k[2]||(k[2]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm6 0a1 1 0 012 0v6a1 1 0 11-2 0V8z","clip-rule":"evenodd"})],-1)]),8,bs)])):h("",!0)]))),128)),t("button",{type:"button",onClick:A=>b(o.value),class:"mt-3 w-full flex items-center justify-center px-4 py-2 border border-dashed border-indigo-300 rounded-lg text-indigo-600 hover:bg-indigo-50 transition duration-150 ease-in-out"},k[3]||(k[3]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z","clip-rule":"evenodd"})],-1),T(" Add Another Time Slot ",-1)]),8,ks)])):h("",!0)])):h("",!0)],2)}),128)),t("div",xs,[p(Ie,{onClick:k[0]||(k[0]=o=>M.$emit("close"))},{default:w(()=>k[4]||(k[4]=[T(" Cancel ",-1)])),_:1,__:[4]}),p(X,{disabled:v.value,class:N({"opacity-50":v.value})},{default:w(()=>[v.value?(s(),n("span",ws,k[5]||(k[5]=[t("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),T(" Saving... ",-1)]))):(s(),n("span",_s,"Save Availability"))]),_:1},8,["disabled","class"])])],32)])])]),_:1},8,["show"]))}},Cs={key:0,class:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center"},Ss={class:"bg-white rounded-lg shadow-xl p-6 max-w-lg w-full mx-4"},Ts={class:"flex justify-center"},Is={__name:"AvailabilityBlocker",setup(a){const l=I(!1),r=I(!0),d=I(!1),e=I([]),g=B(()=>{var y;return((y=Ae().props.auth.user)==null?void 0:y.id)||null}),u=()=>{const y=localStorage.getItem("authToken");y&&!H.defaults.headers.common.Authorization&&(H.defaults.headers.common.Authorization=`Bearer ${y}`)},v=async()=>{r.value=!0;const y=localStorage.getItem("shouldBlockUser"),M=localStorage.getItem("allWeekdaysCovered");if(y==="true"&&M==="false")l.value=!0,await f();else try{u();const k=await H.get("/api/availability-prompt");l.value=k.data.should_block_user&&!k.data.all_weekdays_covered,l.value&&await f()}catch(k){console.error("Error checking if user should be blocked:",k),l.value=!1}r.value=!1},f=async()=>{try{u();const y=await H.get("/api/availability-prompt");i(y.data.next_week_start,y.data.next_week_end)}catch(y){console.error("Error fetching next week dates:",y)}},i=(y,M)=>{const k=[],o=new Date(y),m=new Date(M),x=new Date(o);for(;x<=m;)k.push({value:x.toISOString().split("T")[0],label:x.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})}),x.setDate(x.getDate()+1);e.value=k},_=()=>{d.value=!0},c=()=>{v()},b=y=>{l.value=y.detail.shouldBlockUser&&!y.detail.allWeekdaysCovered},S=()=>{document.visibilityState==="visible"&&ye(()=>{v()})},$=y=>{(y.key==="shouldBlockUser"||y.key==="allWeekdaysCovered")&&ye(()=>{v()})};return me(()=>{v(),window.addEventListener("availability-status-updated",b),document.addEventListener("visibilitychange",S),window.addEventListener("storage",$)}),je(()=>{window.removeEventListener("availability-status-updated",b),document.removeEventListener("visibilitychange",S),window.removeEventListener("storage",$)}),(y,M)=>l.value&&!r.value?(s(),n("div",Cs,[t("div",Ss,[M[2]||(M[2]=ft('<div class="flex items-center mb-4"><div class="flex-shrink-0 mr-3"><svg class="h-8 w-8 text-red-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg></div><h2 class="text-xl font-bold text-gray-900">Action Required</h2></div><p class="mb-6 text-gray-700"> You must submit your availability for all weekdays of next week before you can continue using the application. This is required for planning meetings and work schedules. </p>',2)),t("div",Ts,[p(X,{onClick:_,class:"bg-red-600 hover:bg-red-700"},{default:w(()=>M[1]||(M[1]=[T(" Submit Availability Now ",-1)])),_:1,__:[1]})]),p($s,{show:d.value,"next-week-dates":e.value,date:e.value.length>0?e.value[0].value:"",userId:g.value,onClose:M[0]||(M[0]=k=>d.value=!1),onAvailabilitySaved:c},null,8,["show","next-week-dates","date","userId"])])])):h("",!0)}},js={class:"p-6"},As={class:"flex justify-between items-center mb-4"},Ds={class:"text-lg font-medium text-gray-900"},Ms={key:0,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert"},Ps={class:"block sm:inline"},Es={key:0,class:"mt-6 flex justify-end space-x-3"},Vs={__name:"BaseFormModal",props:{show:{type:Boolean,default:!1},title:{type:String,default:"Modal Title"},apiEndpoint:{type:String,required:!1},httpMethod:{type:String,default:"post",validator:a=>["post","put","patch","delete"].includes(a.toLowerCase())},formData:{type:Object,required:!0},submitButtonText:{type:String,default:"Save"},successMessage:{type:String,default:"Operation successful!"},formatDataForApi:{type:Function,default:a=>a},beforeSubmit:{type:Function,default:()=>!0},showFooter:{type:Boolean,default:!0}},emits:["close","submitted","error"],setup(a,{emit:l}){const r=a,d=l,e=I(!1),g=I({}),u=I("");G(()=>r.show,i=>{i&&(g.value={},u.value="",e.value=!1)});const v=async()=>{e.value=!0,g.value={},u.value="";try{if(await r.beforeSubmit()===!1){e.value=!1;return}const _=r.formatDataForApi(r.formData);let c;const b=r.httpMethod.toLowerCase();if(b==="post")c=await window.axios.post(r.apiEndpoint,_);else if(b==="put")c=await window.axios.put(r.apiEndpoint,_);else if(b==="patch")c=await window.axios.patch(r.apiEndpoint,_);else if(b==="delete")c=await window.axios.delete(r.apiEndpoint,{data:_});else throw new Error(`Unsupported HTTP method: ${r.httpMethod}`);ae(r.successMessage),d("submitted",c.data),d("close")}catch(i){console.error("API submission error:",i),i.response?i.response.status===422?(g.value=i.response.data.errors,u.value="Please correct the errors in the form."):u.value=i.response.data.message||"An unexpected error occurred.":u.value="A network error occurred or the server is unreachable.",Q(u.value),d("error",i)}finally{e.value=!1}},f=()=>{d("close")};return(i,_)=>(s(),P(Le,{show:a.show,onClose:f},{default:w(()=>[t("div",js,[t("div",As,[t("h2",Ds,j(a.title),1),t("button",{onClick:f,class:"text-gray-400 hover:text-gray-500"},_[0]||(_[0]=[t("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),u.value?(s(),n("div",Ms,[t("span",Ps,j(u.value),1)])):h("",!0),t("form",{onSubmit:Ee(v,["prevent"])},[re(i.$slots,"default",{errors:g.value},void 0,!0),a.showFooter?(s(),n("div",Es,[p(Ie,{onClick:f,type:"button",disabled:e.value},{default:w(()=>_[1]||(_[1]=[T(" Cancel ",-1)])),_:1,__:[1]},8,["disabled"]),p(X,{type:"submit",disabled:e.value,class:N({"opacity-75 cursor-not-allowed":e.value})},{default:w(()=>[T(j(e.value?"Submitting...":a.submitButtonText),1)]),_:1},8,["disabled","class"])])):h("",!0)],32)])]),_:3},8,["show"]))}},Me=be(Vs,[["__scopeId","data-v-d94f2bb9"]]),Ns=(a,l)=>{let r;return(...d)=>{clearTimeout(r),r=setTimeout(()=>a(...d),l)}},Us={class:"relative"},Bs={class:"flex flex-wrap items-center gap-2 mb-2 p-2 border border-gray-300 rounded-lg bg-white min-h-[44px] focus-within:border-indigo-500 focus-within:ring-1 focus-within:ring-indigo-500 transition-all duration-150"},Ls=["onClick"],Rs={key:0,class:"absolute z-20 w-full bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto mt-1 transform-gpu"},zs=["onClick"],Fs={key:1,class:"px-4 py-2 text-sm text-gray-500"},Ws={key:2,class:"px-4 py-2 text-sm text-gray-500"},qs={__name:"TagInput",props:{modelValue:{type:Array,default:()=>[]},label:{type:String,default:"Tags"},placeholder:{type:String,default:"Add tags..."},error:{type:String,default:""},initialTags:{type:Array,default:()=>[]},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(a,{emit:l}){const r=a,d=l,e=I(""),g=I([]),u=I([]),v=I(!1),f=I(null);function i(){d("update:modelValue",u.value.map(k=>k.id))}G(()=>r.initialTags,k=>{if(u.value=[],k&&k.length>0){const A=[],V=new Set;k.forEach(O=>{V.has(O.id)||(A.push(O),V.add(O.id))}),u.value.push(...A)}const o=k.map(A=>A.id),m=Array.isArray(r.modelValue)?r.modelValue:[];(o.length!==m.length||o.some(A=>!m.includes(A))||m.some(A=>!o.includes(A)))&&i()},{immediate:!0});const _=Ns(async k=>{if(k.length<2){g.value=[],v.value=!1;return}try{const o=await H.get(`/api/tags/search?query=${k}`);g.value=o.data,v.value=!0}catch(o){console.error("Error fetching tags:",o),g.value=[],v.value=!1}},300);G(e,k=>{r.disabled||_(k)});const c=k=>{u.value.some(o=>o.id===k.id)||(u.value.push(k),e.value="",g.value=[],v.value=!1,i()),ye(()=>f.value.focus())},b=()=>{if(r.disabled)return;const k=e.value.trim();if(!k)return;const o=g.value.find(x=>x.name.toLowerCase()===k.toLowerCase()),m=u.value.some(x=>x.name.toLowerCase()===k.toLowerCase());if(o)c(o);else if(m)e.value="",g.value=[],v.value=!1;else{const x={id:`new_${k.replace(/\s+/g,"-").toLowerCase()}_${Date.now()}`,name:k};u.value.push(x),e.value="",g.value=[],v.value=!1,i()}ye(()=>f.value.focus())},S=k=>{r.disabled||(u.value=u.value.filter(o=>o.id!==k.id),i(),ye(()=>f.value.focus()))},$=()=>{r.disabled||e.value===""&&u.value.length>0&&S(u.value[u.value.length-1])},y=B(()=>g.value.filter(k=>!u.value.some(o=>o.id===k.id))),M=k=>{f.value&&!f.value.$el.contains(k.target)&&(v.value=!1,e.value="")};return me(()=>{document.addEventListener("click",M)}),je(()=>{document.removeEventListener("click",M)}),(k,o)=>(s(),n("div",Us,[p(L,{value:a.label,class:"mb-1"},null,8,["value"]),t("div",Bs,[(s(!0),n(K,null,Y(u.value,m=>(s(),n("span",{key:m.id,class:"inline-flex items-center px-3 py-1 text-sm font-medium bg-indigo-100 text-indigo-800 rounded-full shadow-sm"},[T(j(m.name)+" ",1),a.disabled?h("",!0):(s(),n("button",{key:0,type:"button",onClick:x=>S(m),class:"ml-2 -mr-1 text-indigo-500 hover:text-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 rounded-full p-0.5"},o[3]||(o[3]=[t("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,Ls))]))),128)),p(ne,{ref_key:"inputRef",ref:f,type:"text",placeholder:u.value.length===0?a.placeholder:"",modelValue:e.value,"onUpdate:modelValue":o[0]||(o[0]=m=>e.value=m),onFocus:o[1]||(o[1]=m=>v.value=!0),onKeydown:[Pe(Ee(b,["prevent"]),["enter"]),o[2]||(o[2]=Pe(m=>v.value=!1,["tab"])),Pe($,["delete"])],class:"flex-grow min-w-[100px] border-none focus:ring-0 shadow-none p-0 bg-transparent text-gray-900",disabled:a.disabled},null,8,["placeholder","modelValue","onKeydown","disabled"])]),v.value&&(y.value.length>0||e.value.length>=2||y.value.length===0&&e.value.length<2)&&!a.disabled?(s(),n("div",Rs,[(s(!0),n(K,null,Y(y.value,m=>(s(),n("div",{key:m.id,onClick:x=>c(m),class:"px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 cursor-pointer transition-colors duration-100"},j(m.name),9,zs))),128)),!g.value.some(m=>m.name.toLowerCase()===e.value.toLowerCase())&&e.value.length>=2?(s(),n("div",{key:0,onClick:b,class:"px-4 py-2 text-sm text-indigo-700 bg-indigo-50 hover:bg-indigo-100 cursor-pointer border-t border-indigo-200 font-semibold transition-colors duration-100"},' Add new tag: "'+j(e.value)+'" ',1)):h("",!0),y.value.length===0&&e.value.length<2?(s(),n("div",Fs," Type at least 2 characters to search for tags. ")):h("",!0),y.value.length===0&&e.value.length>=2&&!g.value.some(m=>m.name.toLowerCase()===e.value.toLowerCase())?(s(),n("div",Ws,[o[4]||(o[4]=T(" No matching tags found. Press ",-1)),o[5]||(o[5]=t("span",{class:"font-semibold text-indigo-600"},"Enter",-1)),T(' to add "'+j(e.value)+'" as a new tag. ',1)])):h("",!0)])):h("",!0),p(q,{message:a.error,class:"mt-2"},null,8,["message"])]))}},Xe=be(qs,[["__scopeId","data-v-4d528a4c"]]),Os={class:"space-y-4"},Hs="Add New Milestone",Ks="/api/milestones",Js="post",Ys="Create Milestone",Zs="Milestone created successfully!",Gs={__name:"MilestoneFormModal",props:{show:Boolean,projectId:Number},emits:["close","saved"],setup(a,{emit:l}){const r=a,d=l,e=De({name:"",description:"",completion_date:null,status:"Not Started",project_id:r.projectId}),g=["Not Started","In Progress","Completed","Overdue"];G(()=>r.show,f=>{f&&Object.assign(e,{name:"",description:"",completion_date:null,status:"Not Started",project_id:r.projectId})},{immediate:!0});const u=f=>{d("saved",f),d("close")},v=()=>{d("close")};return(f,i)=>(s(),P(Me,{show:a.show,title:Hs,"api-endpoint":Ks,"http-method":Js,"form-data":e,"submit-button-text":Ys,"success-message":Zs,onClose:v,onSubmitted:u},{default:w(({errors:_})=>[t("div",Os,[t("div",null,[p(L,{for:"milestone-name",value:"Milestone Name"}),p(ne,{id:"milestone-name",modelValue:e.name,"onUpdate:modelValue":i[0]||(i[0]=c=>e.name=c),type:"text",class:"mt-1 block w-full",placeholder:"Enter milestone name",required:""},null,8,["modelValue"]),p(q,{message:_.name?_.name[0]:"",class:"mt-2"},null,8,["message"])]),t("div",null,[p(L,{for:"milestone-description",value:"Description"}),Z(t("textarea",{id:"milestone-description","onUpdate:modelValue":i[1]||(i[1]=c=>e.description=c),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",rows:"3",placeholder:"Enter milestone description"},null,512),[[le,e.description]]),p(q,{message:_.description?_.description[0]:"",class:"mt-2"},null,8,["message"])]),t("div",null,[p(L,{for:"milestone-completion-date",value:"Completion Date"}),p(ne,{id:"milestone-completion-date",modelValue:e.completion_date,"onUpdate:modelValue":i[2]||(i[2]=c=>e.completion_date=c),type:"date",class:"mt-1 block w-full"},null,8,["modelValue"]),p(q,{message:_.completion_date?_.completion_date[0]:"",class:"mt-2"},null,8,["message"])]),t("div",null,[p(L,{for:"milestone-status",value:"Status"}),p(se,{id:"milestone-status",modelValue:e.status,"onUpdate:modelValue":i[3]||(i[3]=c=>e.status=c),options:g.map(c=>({value:c,label:c})),"value-key":"value","label-key":"label",placeholder:"Select status",class:"mt-1"},null,8,["modelValue","options"]),p(q,{message:_.status?_.status[0]:"",class:"mt-2"},null,8,["message"])])])]),_:1},8,["show","form-data"]))}},Qs={class:"space-y-4"},Xs={key:0},ea={key:0,class:"text-sm text-gray-500"},ta={key:0,class:"text-sm text-gray-500"},sa={key:0,class:"text-sm text-gray-500"},aa={class:"flex items-center gap-2 mt-1"},oa={key:0,class:"text-sm text-gray-500"},la=["disabled"],na="Create New Task",ra="/api/tasks",ia="post",da="Create Task",ua="Task created successfully!",ca={__name:"CreateTaskModal",props:{show:Boolean,projectId:{type:Number,default:null}},emits:["close","saved"],setup(a,{emit:l}){const r=a,d=l,e=De({name:"",description:"",assigned_to_user_id:null,due_date:null,status:"To Do",task_type_id:null,milestone_id:null,project_id:r.projectId,priority:"medium",tags:[],tags_data:[]}),g=["To Do","In Progress","Done","Blocked","Archived"],u=[{value:"low",label:"Low"},{value:"medium",label:"Medium"},{value:"high",label:"High"}],v=I([]),f=I([]),i=I([]),_=I([]),c=I(!0),b=I(!1),S=I(!1),$=I(!1),y=I(!1);G(()=>r.show,async W=>{W&&(Object.assign(e,{name:"",description:"",assigned_to_user_id:null,due_date:null,status:"To Do",task_type_id:null,milestone_id:null,project_id:r.projectId,priority:"medium",tags:[],tags_data:[]}),r.projectId?await k(r.projectId):await M())},{immediate:!0}),G(()=>e.project_id,async W=>{W?await k(W):(f.value=[],i.value=[],_.value=[])});const M=async()=>{c.value=!0;try{const W=await window.axios.get("/api/projects-simplified");v.value=W.data.map(U=>({value:U.id,label:U.name}))}catch(W){console.error("Error fetching projects:",W),v.value=[]}finally{c.value=!1}},k=async W=>{if(W){b.value=!0,S.value=!0,$.value=!0;try{const[U,z,F]=await Promise.all([window.axios.get(`/api/projects/${W}/users`),window.axios.get("/api/task-types"),window.axios.get(`/api/projects/${W}/milestones`)]);f.value=U.data.map(oe=>({value:oe.id,label:oe.name})),i.value=z.data.map(oe=>({value:oe.id,label:oe.name})),_.value=F.data.map(oe=>({value:oe.id,label:oe.name}))}catch(U){console.error("Error fetching associated task data:",U),f.value=[],i.value=[],_.value=[]}finally{b.value=!1,S.value=!1,$.value=!1}}},o=W=>{d("saved",W),d("close")},m=()=>{d("close")},x=()=>{e.project_id?y.value=!0:alert("Please select a project before adding a milestone.")},A=W=>{if(y.value=!1,W&&W.id&&W.name){const U={value:W.id,label:W.name};_.value.some(z=>z.value===U.value)||_.value.push(U),e.milestone_id=U.value}},V=B(()=>f.value),O=B(()=>i.value),ie=B(()=>_.value);return(W,U)=>(s(),n(K,null,[p(Me,{show:a.show,title:na,"api-endpoint":ra,"http-method":ia,"form-data":e,"submit-button-text":da,"success-message":ua,onClose:m,onSubmitted:o},{default:w(({errors:z})=>[t("div",Qs,[a.projectId?h("",!0):(s(),n("div",Xs,[p(L,{for:"task-project",value:"Project"}),c.value?(s(),n("div",ea,"Loading projects...")):(s(),P(se,{key:1,id:"task-project",modelValue:e.project_id,"onUpdate:modelValue":U[0]||(U[0]=F=>e.project_id=F),options:v.value,"value-key":"value","label-key":"label",placeholder:"Select a project",class:"mt-1",required:!0},null,8,["modelValue","options"])),p(q,{message:z.project_id?z.project_id[0]:"",class:"mt-2"},null,8,["message"])])),t("div",null,[p(L,{for:"task-name",value:"Task Name"}),p(ne,{id:"task-name",modelValue:e.name,"onUpdate:modelValue":U[1]||(U[1]=F=>e.name=F),type:"text",class:"mt-1 block w-full",placeholder:"Enter task name",required:""},null,8,["modelValue"]),p(q,{message:z.name?z.name[0]:"",class:"mt-2"},null,8,["message"])]),t("div",null,[p(L,{for:"task-description",value:"Description"}),Z(t("textarea",{id:"task-description","onUpdate:modelValue":U[2]||(U[2]=F=>e.description=F),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",rows:"3",placeholder:"Enter task description"},null,512),[[le,e.description]]),p(q,{message:z.description?z.description[0]:"",class:"mt-2"},null,8,["message"])]),t("div",null,[p(L,{for:"task-status",value:"Status"}),p(se,{id:"task-status",modelValue:e.status,"onUpdate:modelValue":U[3]||(U[3]=F=>e.status=F),options:g.map(F=>({value:F,label:F})),"value-key":"value","label-key":"label",placeholder:"Select status",class:"mt-1"},null,8,["modelValue","options"]),p(q,{message:z.status?z.status[0]:"",class:"mt-2"},null,8,["message"])]),t("div",null,[p(L,{for:"task-priority",value:"Priority"}),p(se,{id:"task-priority",modelValue:e.priority,"onUpdate:modelValue":U[4]||(U[4]=F=>e.priority=F),options:u,"value-key":"value","label-key":"label",placeholder:"Select priority",class:"mt-1"},null,8,["modelValue"]),p(q,{message:z.priority?z.priority[0]:"",class:"mt-2"},null,8,["message"])]),t("div",null,[p(L,{for:"task-due-date",value:"Due Date"}),p(ne,{id:"task-due-date",modelValue:e.due_date,"onUpdate:modelValue":U[5]||(U[5]=F=>e.due_date=F),type:"date",class:"mt-1 block w-full"},null,8,["modelValue"]),p(q,{message:z.due_date?z.due_date[0]:"",class:"mt-2"},null,8,["message"])]),t("div",null,[p(L,{for:"task-assigned-to",value:"Assigned To"}),b.value?(s(),n("div",ta,"Loading users...")):(s(),P(se,{key:1,id:"task-assigned-to",modelValue:e.assigned_to_user_id,"onUpdate:modelValue":U[6]||(U[6]=F=>e.assigned_to_user_id=F),options:V.value,"value-key":"value","label-key":"label",placeholder:"Unassigned",class:"mt-1","allow-empty":!0},null,8,["modelValue","options"])),p(q,{message:z.assigned_to_user_id?z.assigned_to_user_id[0]:"",class:"mt-2"},null,8,["message"])]),t("div",null,[p(L,{for:"task-type",value:"Task Type"}),S.value?(s(),n("div",sa,"Loading task types...")):(s(),P(se,{key:1,id:"task-type",modelValue:e.task_type_id,"onUpdate:modelValue":U[7]||(U[7]=F=>e.task_type_id=F),options:O.value,"value-key":"value","label-key":"label",placeholder:"Select a task type",class:"mt-1","allow-empty":!0},null,8,["modelValue","options"])),p(q,{message:z.task_type_id?z.task_type_id[0]:"",class:"mt-2"},null,8,["message"])]),t("div",null,[p(L,{for:"task-milestone",value:"Milestone"}),t("div",aa,[$.value?(s(),n("div",oa,"Loading milestones...")):(s(),P(se,{key:1,id:"task-milestone",modelValue:e.milestone_id,"onUpdate:modelValue":U[8]||(U[8]=F=>e.milestone_id=F),options:ie.value,"value-key":"value","label-key":"label",placeholder:"No milestone",class:"flex-grow","allow-empty":!0,disabled:!e.project_id},null,8,["modelValue","options","disabled"])),t("button",{type:"button",onClick:x,disabled:!e.project_id||$.value,class:"px-3 py-2 text-sm font-medium text-blue-600 bg-blue-50 rounded-md hover:bg-blue-100 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",title:"Add New Milestone"},U[11]||(U[11]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4v16m8-8H4"})],-1)]),8,la)]),p(q,{message:z.milestone_id?z.milestone_id[0]:"",class:"mt-2"},null,8,["message"])]),t("div",null,[p(Xe,{modelValue:e.tags,"onUpdate:modelValue":U[9]||(U[9]=F=>e.tags=F),initialTags:e.tags_data,label:"Tags",placeholder:"Search or add tags",error:z.tags?z.tags[0]:"",disabled:!e.project_id},null,8,["modelValue","initialTags","error","disabled"])])])]),_:1},8,["show","form-data"]),p(Gs,{show:y.value,"project-id":e.project_id,onClose:U[10]||(U[10]=z=>y.value=!1),onSaved:A},null,8,["show","project-id"])],64))}},ma={class:"space-y-4"},va={class:"flex items-center mt-4"},pa={__name:"CreateForm",props:{show:{type:Boolean,default:!1},apiEndpoint:{type:String,required:!0}},emits:["close","resourceCreated"],setup(a,{emit:l}){const r=a,d=l,e=De({title:"",description:"",url:"",type:"website",thumbnail_url:"",visible_to_client:!0,tags:[]}),g=B(()=>[{value:"website",label:"Website"},{value:"youtube",label:"YouTube Video"},{value:"document",label:"Document"},{value:"image",label:"Image"},{value:"other",label:"Other"}]),u=i=>i,v=i=>{d("resourceCreated",i),f()},f=()=>{e.title="",e.description="",e.url="",e.type="website",e.thumbnail_url="",e.visible_to_client=!0,e.tags=[],d("close")};return(i,_)=>(s(),P(Me,{show:r.show,title:"Add New Shareable Resource",apiEndpoint:r.apiEndpoint,httpMethod:"post",formData:e,submitButtonText:"Create Resource",successMessage:"Shareable resource created successfully!",formatDataForApi:u,onSubmitted:v,onClose:f},{default:w(({errors:c})=>[t("div",ma,[t("div",null,[p(L,{for:"title",value:"Title",class:"mb-1"}),p(ne,{id:"title",type:"text",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:e.title,"onUpdate:modelValue":_[0]||(_[0]=b=>e.title=b),required:""},null,8,["modelValue"]),p(q,{message:c.title?c.title[0]:"",class:"mt-2"},null,8,["message"])]),t("div",null,[p(L,{for:"url",value:"Resource URL",class:"mb-1"}),p(ne,{id:"url",type:"url",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:e.url,"onUpdate:modelValue":_[1]||(_[1]=b=>e.url=b),required:""},null,8,["modelValue"]),p(q,{message:c.url?c.url[0]:"",class:"mt-2"},null,8,["message"])]),t("div",null,[p(L,{for:"type",value:"Resource Type",class:"mb-1"}),p(se,{id:"type",modelValue:e.type,"onUpdate:modelValue":_[2]||(_[2]=b=>e.type=b),options:g.value,valueKey:"value",labelKey:"label",placeholder:"Select Resource Type",required:"",class:"mt-1 block w-full"},null,8,["modelValue","options"]),p(q,{message:c.type?c.type[0]:"",class:"mt-2"},null,8,["message"])]),t("div",null,[p(L,{for:"thumbnail_url",value:"Thumbnail URL (Optional)",class:"mb-1"}),p(ne,{id:"thumbnail_url",type:"url",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:e.thumbnail_url,"onUpdate:modelValue":_[3]||(_[3]=b=>e.thumbnail_url=b)},null,8,["modelValue"]),p(q,{message:c.thumbnail_url?c.thumbnail_url[0]:"",class:"mt-2"},null,8,["message"])]),t("div",null,[p(L,{for:"description",value:"Description (Optional)",class:"mb-1"}),Z(t("textarea",{id:"description",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-lg shadow-sm mt-1 block w-full","onUpdate:modelValue":_[4]||(_[4]=b=>e.description=b),rows:"3"},null,512),[[le,e.description]]),p(q,{message:c.description?c.description[0]:"",class:"mt-2"},null,8,["message"])]),t("div",null,[p(Xe,{modelValue:e.tags,"onUpdate:modelValue":_[5]||(_[5]=b=>e.tags=b),label:"Associated Tags",placeholder:"Search or add tags",error:c.tags?c.tags[0]:""},null,8,["modelValue","error"])]),t("div",va,[p(kt,{id:"visible_to_client",checked:e.visible_to_client,"onUpdate:checked":_[6]||(_[6]=b=>e.visible_to_client=b)},null,8,["checked"]),p(L,{for:"visible_to_client",value:"Visible to Client",class:"ml-2"}),p(q,{message:c.visible_to_client?c.visible_to_client[0]:"",class:"mt-2"},null,8,["message"])])])]),_:1},8,["show","apiEndpoint","formData"]))}},fa=be(pa,[["__scopeId","data-v-3e3a6a9f"]]),ga={key:0,class:"sidebar-wrapper"},ya={class:"fixed inset-0 z-[100] flex pointer-events-none"},ha={class:"flex items-center justify-between p-4 border-b border-gray-200 bg-white rounded-tl-xl sticky top-0 z-20"},ba={class:"text-xl font-semibold text-gray-900"},ka={class:"flex-1 overflow-y-auto p-6 scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-gray-300 scrollbar-track-gray-100"},xa={key:1,class:"p-4 border-t border-gray-200 bg-white sticky bottom-0 z-20"},wa={__name:"RightSidebar",props:{show:{type:Boolean,default:!1},title:{type:String,default:"Details"},initialWidth:{type:Number,default:50},minWidth:{type:Number,default:30},maxWidth:{type:Number,default:90}},emits:["close","update:show"],setup(a,{emit:l}){const r=a,d=l,e=I(r.initialWidth),g=I(!1),u=c=>{g.value=!0,document.addEventListener("pointermove",v),document.addEventListener("pointerup",f)},v=c=>{if(!g.value)return;const b=window.innerWidth,$=(b-c.clientX)/b*100,y=Math.max(r.minWidth,Math.min(r.maxWidth,$));e.value=y},f=()=>{g.value=!1,document.removeEventListener("pointermove",v),document.removeEventListener("pointerup",f)};G(()=>r.show,c=>{c?document.body.style.overflow="hidden":document.body.style.overflow=""},{immediate:!0});const i=()=>{d("update:show",!1),d("close")},_=B(()=>window.innerWidth<768);return G(_,c=>{c&&r.show?e.value=100:!c&&r.show&&(e.value=r.initialWidth)},{immediate:!0}),G(()=>r.show,c=>{c&&(_.value?e.value=100:e.value=r.initialWidth)}),(c,b)=>(s(),P(Ze,{to:"body"},[p(Ge,{"enter-active-class":"transition ease-out duration-300 transform","enter-from-class":"translate-x-full","enter-to-class":"translate-x-0","leave-active-class":"transition ease-in duration-200 transform","leave-from-class":"translate-x-0","leave-to-class":"translate-x-full"},{default:w(()=>[a.show?(s(),n("div",ga,[t("div",{class:"fixed inset-0 bg-gray-900 bg-opacity-50 transition-opacity z-[99]",onClick:i}),t("div",ya,[t("div",{class:"relative ml-auto h-full bg-white shadow-xl flex flex-col rounded-l-xl pointer-events-auto",style:gt({width:_.value?"100%":`${e.value}vw`})},[_.value?h("",!0):(s(),n("div",{key:0,class:"absolute left-0 top-0 h-full w-2 cursor-col-resize -ml-1 z-10",onPointerdown:u,title:"Drag to resize"},null,32)),t("div",ha,[t("h3",ba,j(a.title),1),t("button",{onClick:i,class:"text-gray-400 hover:text-gray-600 transition-colors"},b[0]||(b[0]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),t("div",ka,[re(c.$slots,"content",{},void 0,!0)]),c.$slots.footer?(s(),n("div",xa,[re(c.$slots,"footer",{},void 0,!0)])):h("",!0)],4)])])):h("",!0)]),_:3})]))}},et=be(wa,[["__scopeId","data-v-2d864577"]]),_a={class:"flex border-b border-gray-200"},$a={key:0,class:"ml-2 px-2 py-1 text-xs font-bold bg-red-600 text-white rounded-full"},Ca={class:"p-4 space-y-2 overflow-y-auto"},Sa={key:0,class:"p-6 text-center text-gray-500"},Ta={key:0},Ia={key:1},ja=["onClick"],Aa={class:"flex-1 min-w-0"},Da={class:"flex items-start justify-between gap-2 mb-1"},Ma={class:"flex-1 min-w-0"},Pa={key:0,class:"text-base font-semibold text-gray-900 truncate"},Ea={key:1,class:"text-xs text-gray-500"},Va={key:0,class:"text-sm text-gray-600 mt-1 mb-2"},Na={class:"flex items-center text-xs text-gray-500 font-medium"},Ua={key:0},Ba={key:1,class:"mx-2"},La={key:2},Ra={__name:"NotificationsSidebar",setup(a){const l=B(()=>Te.value.notifications),r=I("New"),d=B(()=>r.value==="New"?l.value.filter(v=>!v.isRead):l.value),e=async v=>{await Je(v.view_id);const f=v.task_id||g(v.url),i=v.project_id||u(v.url);f&&i?(Ye(f,i),Fe()):(console.warn("Could not open task sidebar. Falling back to opening URL in new tab."),v.url&&window.open(v.url,"_blank"))},g=v=>{const f=v.match(/\/task\/(\d+)/);return f?parseInt(f[1]):null},u=v=>{const f=v.match(/\/project\/(\d+)\//);return f?parseInt(f[1]):null};return(v,f)=>(s(),P(et,{show:D(Te).show,"onUpdate:show":D(Fe),title:"Notifications","initial-width":35,class:"z-[100]"},{content:w(()=>[t("div",_a,[t("button",{onClick:f[0]||(f[0]=i=>r.value="New"),class:N([{"border-blue-600 text-blue-600 font-semibold":r.value==="New","border-transparent text-gray-500 hover:text-gray-700":r.value!=="New"},"flex-1 py-4 px-1 text-center text-sm border-b-2 transition-colors duration-200"])},[f[2]||(f[2]=T(" New ",-1)),l.value.filter(i=>!i.isRead).length>0?(s(),n("span",$a,j(l.value.filter(i=>!i.isRead).length),1)):h("",!0)],2),t("button",{onClick:f[1]||(f[1]=i=>r.value="All"),class:N([{"border-blue-600 text-blue-600 font-semibold":r.value==="All","border-transparent text-gray-500 hover:text-gray-700":r.value!=="All"},"flex-1 py-4 px-1 text-center text-sm border-b-2 transition-colors duration-200"])}," All ",2)]),t("div",Ca,[d.value.length===0?(s(),n("div",Sa,[r.value==="New"?(s(),n("span",Ta,"You have no new notifications.")):(s(),n("span",Ia,"You have no notifications."))])):h("",!0),(s(!0),n(K,null,Y(d.value,i=>(s(),n("div",{key:i.id,class:N(["bg-white rounded-xl shadow-sm p-4 flex items-start space-x-4 border border-gray-200 transition-all duration-200 hover:shadow-md cursor-pointer",{"bg-gray-50":i.isRead}]),onClick:_=>e(i)},[t("div",Aa,[t("div",Da,[t("div",Ma,[i.title?(s(),n("h3",Pa,j(i.title),1)):h("",!0),i.project_name?(s(),n("p",Ea,j(i.project_name),1)):h("",!0)])]),i.message?(s(),n("p",Va,j(i.message),1)):h("",!0),t("div",Na,[i.due_date?(s(),n("span",Ua,"Due: "+j(D(Ke)(i.due_date)),1)):h("",!0),i.due_date&&i.priority?(s(),n("span",Ba,"•")):h("",!0),i.priority?(s(),n("span",La,"Priority: "+j(i.priority),1)):h("",!0)])])],10,ja))),128))])]),_:1},8,["show","onUpdate:show"]))}},za={class:"space-y-4"},Fa={key:0,class:"text-red-600 text-xs mt-1"},Wa={key:0,class:"text-red-600 text-xs mt-1"},qa={key:0,class:"text-red-600 text-xs mt-1"},Oa={__name:"KudoModal",props:{show:{type:Boolean,default:!1}},emits:["close","submitted"],setup(a,{emit:l}){const r=l,d=I([]),e=I([]),g=De({recipient_id:"",project_id:"",comment:""}),u=I({}),v=async()=>{try{const{data:c}=await window.axios.get("/api/projects-simplified");d.value=(c||[]).map(b=>({value:b.id,label:b.name}))}catch{d.value=[]}},f=async c=>{if(e.value=[],!!c)try{const{data:b}=await window.axios.get(`/api/projects/${c}/users`);e.value=(b||[]).map(S=>({value:S.id,label:`${S.name} (${S.email})`}))}catch{e.value=[]}};G(()=>g.project_id,c=>{c&&f(c)}),me(()=>{v()});const i=()=>{g.recipient_id="",g.project_id="",g.comment="",u.value={}},_=c=>{i(),r("submitted",c)};return(c,b)=>(s(),P(Me,{show:a.show,title:"Give a Kudo ✨","api-endpoint":"/api/kudos","http-method":"post","form-data":g,"submit-button-text":"Submit Kudo","success-message":"Kudo submitted! Pending approval.",onClose:b[3]||(b[3]=S=>c.$emit("close")),onSubmitted:_},{default:w(({errors:S})=>[t("div",za,[t("div",null,[b[4]||(b[4]=t("label",{class:"block text-sm font-medium text-gray-700"},"Project",-1)),p(se,{options:d.value,modelValue:g.project_id,"onUpdate:modelValue":b[0]||(b[0]=$=>g.project_id=$),placeholder:"Select a project..."},null,8,["options","modelValue"]),S.project_id?(s(),n("p",Fa,j(S.project_id[0]),1)):h("",!0)]),t("div",null,[b[5]||(b[5]=t("label",{class:"block text-sm font-medium text-gray-700"},"Recipient",-1)),p(se,{options:e.value,modelValue:g.recipient_id,"onUpdate:modelValue":b[1]||(b[1]=$=>g.recipient_id=$),placeholder:"Select a teammate..."},null,8,["options","modelValue"]),S.recipient_id?(s(),n("p",Wa,j(S.recipient_id[0]),1)):h("",!0)]),t("div",null,[b[6]||(b[6]=t("label",{class:"block text-sm font-medium text-gray-700"},"Comment",-1)),Z(t("textarea",{"onUpdate:modelValue":b[2]||(b[2]=$=>g.comment=$),rows:"4",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",placeholder:"e.g., Thank you for helping with the last-minute changes!"},null,512),[[le,g.comment]]),S.comment?(s(),n("p",qa,j(S.comment[0]),1)):h("",!0)])])]),_:1},8,["show","form-data"]))}},Ha={class:"flex items-center p-4 h-16 border-b border-gray-700"},Ka={key:0,class:"text-xl font-semibold flex-1 truncate"},Ja=["title"],Ya={key:0,class:"p-4 border-b border-gray-700"},Za={class:"relative"},Ga={key:1,class:"flex-1 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-500 scrollbar-track-gray-700 p-4"},Qa={key:0,class:"mb-4"},Xa={class:"ml-2 mt-2 space-y-1"},eo=["onClick"],to={class:"text-sm font-medium text-gray-300 truncate"},so={class:"ml-4 mt-1 space-y-1"},ao={class:"truncate"},oo={key:1,class:"mb-4"},lo={class:"ml-2 mt-2 space-y-1"},no=["onClick"],ro={class:"text-sm font-medium text-gray-300 truncate"},io={class:"ml-4 mt-1 space-y-1"},uo={class:"truncate"},co={key:2,class:"mb-4"},mo={class:"ml-2 mt-2 space-y-1"},vo={class:"truncate"},po={key:3,class:"mb-4"},fo={class:"ml-2 mt-2 space-y-1"},go={class:"truncate"},yo={key:4,class:"text-gray-400 text-sm text-center py-4"},ho={key:5,class:"text-gray-400 text-sm text-center py-4"},bo={key:2,class:"flex flex-col items-center pt-4 space-y-4"},ko={key:0,class:"text-gray-400 text-xs text-center px-2"},xo={__name:"LeftSidebar",props:{allProjects:{type:Array,default:()=>[]},activeProjectId:{type:Number,default:null}},emits:["project-selected"],setup(a,{emit:l}){const r=a,d=l,e=I(localStorage.getItem("leftSidebarCollapsed")!=="false"),g=I(""),u=I({}),v=B(()=>{const o=new Set;return r.allProjects.forEach(m=>{m.project_type&&o.add(m.project_type)}),Array.from(o).sort()}),f=B(()=>{const o=new Set;return r.allProjects.forEach(m=>{Array.isArray(m.tags)&&m.tags.forEach(x=>o.add(x))}),Array.from(o).sort()}),i=B(()=>{if(!g.value)return r.allProjects;const o=g.value.toLowerCase();return r.allProjects.filter(m=>{var x,A,V;return m.name.toLowerCase().includes(o)||((x=m.description)==null?void 0:x.toLowerCase().includes(o))||((A=m.project_type)==null?void 0:A.toLowerCase().includes(o))||Array.isArray(m.tags)&&m.tags.some(O=>O.toLowerCase().includes(o))||((V=m.status)==null?void 0:V.toLowerCase().includes(o))})}),_=B(()=>{const o={};i.value.forEach(m=>{m.project_type&&m.status==="active"&&(o[m.project_type]||(o[m.project_type]=[]),o[m.project_type].push(m))});for(const m in o)o[m].sort((x,A)=>x.name.localeCompare(A.name));return o}),c=B(()=>{const o={};i.value.forEach(m=>{Array.isArray(m.tags)&&m.tags.length>0&&m.tags.forEach(x=>{o[x]||(o[x]=[]),o[x].push(m)})});for(const m in o)o[m]=[...new Set(o[m])].sort((x,A)=>x.name.localeCompare(A.name));return o}),b=B(()=>i.value.filter(o=>o.status!=="active").sort((o,m)=>o.name.localeCompare(m.name))),S=B(()=>i.value.filter(o=>!o.project_type&&(!Array.isArray(o.tags)||o.tags.length===0)).sort((o,m)=>o.name.localeCompare(m.name)));G(()=>r.allProjects,()=>{v.value.forEach(o=>{const m=`type-${o}`;u.value[m]===void 0&&(u.value[m]=!0)}),f.value.forEach(o=>{const m=`tag-${o}`;u.value[m]===void 0&&(u.value[m]=!0)}),u.value["main-types"]===void 0&&(u.value["main-types"]=!1),u.value["main-tags"]===void 0&&(u.value["main-tags"]=!1),u.value["inactive-projects"]===void 0&&(u.value["inactive-projects"]=!1),u.value.uncategorized===void 0&&(u.value.uncategorized=!1)},{immediate:!0}),G(e,o=>{localStorage.setItem("leftSidebarCollapsed",o)});const $=()=>{e.value=!e.value},y=o=>{u.value[o]=!u.value[o]},M=o=>{d("project-selected",o)},k=()=>{g.value=""};return(o,m)=>(s(),n("div",{class:N({"w-64":!e.value,"w-16":e.value,"min-w-16":!0,"bg-gray-800 text-white flex flex-col transition-all duration-300 ease-in-out shrink-0 h-screen overflow-hidden":!0})},[t("div",Ha,[e.value?h("",!0):(s(),n("h2",Ka,"Projects")),t("button",{onClick:$,class:"p-2 rounded-full hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500",title:e.value?"Expand Sidebar":"Collapse Sidebar"},[(s(),n("svg",{class:N(["w-6 h-6 text-gray-400 transform transition-transform duration-300",{"rotate-180":e.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},m[5]||(m[5]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"},null,-1)]),2))],8,Ja)]),e.value?h("",!0):(s(),n("div",Ya,[t("div",Za,[Z(t("input",{type:"text","onUpdate:modelValue":m[0]||(m[0]=x=>g.value=x),placeholder:"Search all projects...",class:"w-full p-2 rounded-md bg-gray-700 border border-gray-600 text-white placeholder-gray-400 focus:ring-indigo-500 focus:border-indigo-500 text-sm"},null,512),[[le,g.value]]),g.value?(s(),n("button",{key:0,onClick:k,class:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-200",title:"Clear search"},m[6]||(m[6]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))):h("",!0)])])),e.value?(s(),n("div",bo,[(s(!0),n(K,null,Y(r.allProjects,x=>(s(),P(D(de),{key:x.id,href:o.route("projects.show",x.id),onClick:A=>M(x.id),class:N({"w-10 h-10 rounded-full flex items-center justify-center text-xs font-bold transition-all duration-200":!0,"bg-indigo-600 text-white":x.id===a.activeProjectId,"bg-gray-700 text-gray-300 hover:bg-gray-600":x.id!==a.activeProjectId}),title:x.name},{default:w(()=>[T(j(x.name.charAt(0).toUpperCase()),1)]),_:2},1032,["href","onClick","class","title"]))),128)),a.allProjects.length===0?(s(),n("div",ko," No Projects ")):h("",!0)])):(s(),n("div",Ga,[Object.keys(_.value).length>0?(s(),n("div",Qa,[t("div",{class:"flex items-center justify-between cursor-pointer py-2 hover:bg-gray-700 rounded-md px-2",onClick:m[1]||(m[1]=x=>y("main-types"))},[m[8]||(m[8]=t("h3",{class:"text-sm font-semibold text-gray-400"},"Active Projects by Type",-1)),(s(),n("svg",{class:N(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!u.value["main-types"]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},m[7]||(m[7]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))]),Z(t("div",Xa,[(s(!0),n(K,null,Y(_.value,(x,A)=>(s(),n("div",{key:A},[t("div",{class:"flex items-center justify-between cursor-pointer py-1 hover:bg-gray-700 rounded-md px-2",onClick:V=>y(`type-${A}`)},[t("h4",to,j(A),1),(s(),n("svg",{class:N(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!u.value[`type-${A}`]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},m[9]||(m[9]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))],8,eo),Z(t("ul",so,[(s(!0),n(K,null,Y(x,V=>(s(),n("li",{key:V.id},[p(D(de),{href:o.route("projects.show",V.id),onClick:O=>M(V.id),class:N({"block w-full text-left px-3 py-2 rounded-md transition-colors":!0,"bg-indigo-600 text-white":V.id===a.activeProjectId,"hover:bg-gray-700 text-gray-200":V.id!==a.activeProjectId,"font-bold":V.id===a.activeProjectId})},{default:w(()=>[t("span",ao,j(V.name),1)]),_:2},1032,["href","onClick","class"])]))),128))],512),[[ce,!u.value[`type-${A}`]]])]))),128))],512),[[ce,!u.value["main-types"]]])])):h("",!0),Object.keys(c.value).length>0?(s(),n("div",oo,[t("div",{class:"flex items-center justify-between cursor-pointer py-2 hover:bg-gray-700 rounded-md px-2",onClick:m[2]||(m[2]=x=>y("main-tags"))},[m[11]||(m[11]=t("h3",{class:"text-sm font-semibold text-gray-400"},"Projects by Tag",-1)),(s(),n("svg",{class:N(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!u.value["main-tags"]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},m[10]||(m[10]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))]),Z(t("div",lo,[(s(!0),n(K,null,Y(c.value,(x,A)=>(s(),n("div",{key:A},[t("div",{class:"flex items-center justify-between cursor-pointer py-1 hover:bg-gray-700 rounded-md px-2",onClick:V=>y(`tag-${A}`)},[t("h4",ro,j(A),1),(s(),n("svg",{class:N(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!u.value[`tag-${A}`]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},m[12]||(m[12]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))],8,no),Z(t("ul",io,[(s(!0),n(K,null,Y(x,V=>(s(),n("li",{key:V.id},[p(D(de),{href:o.route("projects.show",V.id),onClick:O=>M(V.id),class:N({"block w-full text-left px-3 py-2 rounded-md transition-colors":!0,"bg-indigo-600 text-white":V.id===a.activeProjectId,"hover:bg-gray-700 text-gray-200":V.id!==a.activeProjectId,"font-bold":V.id===a.activeProjectId})},{default:w(()=>[t("span",uo,j(V.name),1)]),_:2},1032,["href","onClick","class"])]))),128))],512),[[ce,!u.value[`tag-${A}`]]])]))),128))],512),[[ce,!u.value["main-tags"]]])])):h("",!0),b.value.length>0?(s(),n("div",co,[t("div",{class:"flex items-center justify-between cursor-pointer py-2 hover:bg-gray-700 rounded-md px-2",onClick:m[3]||(m[3]=x=>y("inactive-projects"))},[m[14]||(m[14]=t("h3",{class:"text-sm font-semibold text-gray-400"},"Inactive Projects",-1)),(s(),n("svg",{class:N(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!u.value["inactive-projects"]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},m[13]||(m[13]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))]),Z(t("ul",mo,[(s(!0),n(K,null,Y(b.value,x=>(s(),n("li",{key:x.id},[p(D(de),{href:o.route("projects.show",x.id),onClick:A=>M(x.id),class:N({"block w-full text-left px-3 py-2 rounded-md transition-colors":!0,"bg-indigo-600 text-white":x.id===a.activeProjectId,"hover:bg-gray-700 text-gray-200":x.id!==a.activeProjectId,"font-bold":x.id===a.activeProjectId})},{default:w(()=>[t("span",vo,j(x.name)+" ("+j(x.status.replace("_"," "))+")",1)]),_:2},1032,["href","onClick","class"])]))),128))],512),[[ce,!u.value["inactive-projects"]]])])):h("",!0),S.value.length>0?(s(),n("div",po,[t("div",{class:"flex items-center justify-between cursor-pointer py-2 hover:bg-gray-700 rounded-md px-2",onClick:m[4]||(m[4]=x=>y("uncategorized"))},[m[16]||(m[16]=t("h3",{class:"text-sm font-semibold text-gray-400"},"Uncategorized",-1)),(s(),n("svg",{class:N(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!u.value.uncategorized}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},m[15]||(m[15]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))]),Z(t("ul",fo,[(s(!0),n(K,null,Y(S.value,x=>(s(),n("li",{key:x.id},[p(D(de),{href:o.route("projects.show",x.id),onClick:A=>M(x.id),class:N({"block w-full text-left px-3 py-2 rounded-md transition-colors":!0,"bg-indigo-600 text-white":x.id===a.activeProjectId,"hover:bg-gray-700 text-gray-200":x.id!==a.activeProjectId,"font-bold":x.id===a.activeProjectId})},{default:w(()=>[t("span",go,j(x.name),1)]),_:2},1032,["href","onClick","class"])]))),128))],512),[[ce,!u.value.uncategorized]])])):h("",!0),i.value.length===0?(s(),n("div",yo," No projects found matching your search. ")):a.allProjects.length===0&&!g.value?(s(),n("div",ho," No projects available. ")):h("",!0)]))],2))}},wo=be(xo,[["__scopeId","data-v-417d431f"]]),_o={class:"relative"},tt={__name:"Dropdown",props:{align:{type:String,default:"right"},width:{type:String,default:"48"},contentClasses:{type:String,default:"py-1 bg-white"}},setup(a){const l=a,r=v=>{u.value&&v.key==="Escape"&&(u.value=!1)};me(()=>document.addEventListener("keydown",r)),je(()=>document.removeEventListener("keydown",r));const d=B(()=>{const v={48:"w-48",64:"w-64",72:"w-72",80:"w-80",96:"w-96",full:"w-full",screen:"w-screen",auto:""},f=l.width.toString();return v[f]??v[48]}),e=B(()=>l.width.toString()==="screen"),g=B(()=>l.align==="left"?"ltr:origin-top-left rtl:origin-top-right start-0":l.align==="right"?"ltr:origin-top-right rtl:origin-top-left end-0":"origin-top"),u=I(!1);return(v,f)=>(s(),n("div",_o,[t("div",{onClick:f[0]||(f[0]=i=>u.value=!u.value)},[re(v.$slots,"trigger")]),Z(t("div",{class:"fixed inset-0 z-40",onClick:f[1]||(f[1]=i=>u.value=!1)},null,512),[[ce,u.value]]),p(Ge,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:w(()=>[Z(t("div",{class:N(["z-50 mt-2 rounded-md shadow-lg",e.value?"fixed left-0 right-0":"absolute",g.value,d.value]),style:{display:"none"},onClick:f[2]||(f[2]=i=>u.value=!1)},[t("div",{class:N(["rounded-md ring-1 ring-black ring-opacity-5",a.contentClasses])},[re(v.$slots,"content")],2)],2),[[ce,u.value]])]),_:3})]))}},ee={__name:"DropdownLink",props:{href:{type:String,required:!0},method:{type:String,default:"get"},as:{type:String,default:"a"}},setup(a){return(l,r)=>(s(),P(D(de),Qe({href:a.href,method:a.method,as:a.as},l.$attrs,{class:"block w-full px-4 py-2 text-start text-sm leading-5 text-gray-700 transition duration-150 ease-in-out hover:bg-gray-100 focus:bg-gray-100 focus:outline-none"}),{default:w(()=>[re(l.$slots,"default")]),_:3},16,["href","method","as"]))}},Ce={__name:"NavLink",props:{href:{type:String,required:!0},active:{type:Boolean}},setup(a){const l=a,r=B(()=>l.active?"inline-flex items-center px-1 pt-1 border-b-2 border-indigo-400 text-sm font-medium leading-5 text-gray-900 focus:outline-none focus:border-indigo-700 transition duration-150 ease-in-out":"inline-flex items-center px-1 pt-1 border-b-2 border-transparent text-sm font-medium leading-5 text-gray-500 hover:text-gray-700 hover:border-gray-300 focus:outline-none focus:text-gray-700 focus:border-gray-300 transition duration-150 ease-in-out");return(d,e)=>(s(),P(D(de),{href:a.href,class:N(r.value)},{default:w(()=>[re(d.$slots,"default")]),_:3},8,["href","class"]))}};/**
 * @license lucide-vue-next v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=a=>a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),$o=a=>a.replace(/^([A-Z])|[\s-_]+(\w)/g,(l,r,d)=>d?d.toUpperCase():r.toLowerCase()),Co=a=>{const l=$o(a);return l.charAt(0).toUpperCase()+l.slice(1)},So=(...a)=>a.filter((l,r,d)=>!!l&&l.trim()!==""&&d.indexOf(l)===r).join(" ").trim(),Oe=a=>a==="";/**
 * @license lucide-vue-next v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Se={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};/**
 * @license lucide-vue-next v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const To=({name:a,iconNode:l,absoluteStrokeWidth:r,"absolute-stroke-width":d,strokeWidth:e,"stroke-width":g,size:u=Se.width,color:v=Se.stroke,...f},{slots:i})=>Ue("svg",{...Se,...f,width:u,height:u,stroke:v,"stroke-width":Oe(r)||Oe(d)||r===!0||d===!0?Number(e||g||Se["stroke-width"])*24/Number(u):e||g||Se["stroke-width"],class:So("lucide",f.class,...a?[`lucide-${qe(Co(a))}-icon`,`lucide-${qe(a)}`]:["lucide-icon"])},[...l.map(_=>Ue(..._)),...i.default?[i.default()]:[]]);/**
 * @license lucide-vue-next v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=(a,l)=>(r,{slots:d,attrs:e})=>Ue(To,{...e,...r,iconNode:l,name:a},d);/**
 * @license lucide-vue-next v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Io=st("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);/**
 * @license lucide-vue-next v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jo=st("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),Ao={class:"hidden sm:flex sm:items-center"},Do={class:"mx-auto w-full max-w-6xl"},Mo={class:"grid grid-cols-2 md:grid-cols-4 gap-8"},Po={class:"space-y-1"},Eo={class:"space-y-1"},Vo={class:"space-y-1"},No={class:"space-y-1"},Uo={__name:"AdminDropdown",setup(a){const{canDo:l}=Be(),r=l("manage_projects"),d=l("create_users"),e=l("manage_roles"),g=l("manage_task_types"),u=l("create_clients"),v=l("manage_project_tiers")||l("view_project_tiers");return(f,i)=>(s(),n("div",Ao,[p(tt,{align:"left",width:"screen","content-classes":"py-6 bg-white p-6 w-full shadow-lg"},{trigger:w(()=>i[0]||(i[0]=[t("span",{class:"inline-flex rounded-md"},[t("button",{type:"button",class:"inline-flex items-center rounded-md border border-transparent bg-white px-3 py-2 text-sm font-medium leading-4 text-gray-700 hover:text-gray-900 focus:outline-none"},[T(" Admin "),t("svg",{class:"ms-2 -me-0.5 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])])],-1)])),content:w(()=>[t("div",Do,[t("div",Mo,[t("div",null,[i[4]||(i[4]=t("h4",{class:"text-xs font-semibold uppercase tracking-wider text-gray-500 mb-3"},"Management",-1)),t("div",Po,[D(r)?(s(),P(ee,{key:0,href:f.route("projects.index"),active:f.route().current("projects.index"),class:"!px-2 !py-1.5"},{default:w(()=>i[1]||(i[1]=[T("Projects",-1)])),_:1,__:[1]},8,["href","active"])):h("",!0),D(u)?(s(),P(ee,{key:1,href:f.route("clients.index"),active:f.route().current("clients.index"),class:"!px-2 !py-1.5"},{default:w(()=>i[2]||(i[2]=[T("Clients",-1)])),_:1,__:[2]},8,["href","active"])):h("",!0),D(d)?(s(),P(ee,{key:2,href:f.route("users.index"),active:f.route().current("users.index"),class:"!px-2 !py-1.5"},{default:w(()=>i[3]||(i[3]=[T("Users",-1)])),_:1,__:[3]},8,["href","active"])):h("",!0)])]),t("div",null,[i[6]||(i[6]=t("h4",{class:"text-xs font-semibold uppercase tracking-wider text-gray-500 mb-3"},"Planning",-1)),t("div",Eo,[D(d)?(s(),P(ee,{key:0,href:f.route("availability.index"),active:f.route().current("availability.index"),class:"!px-2 !py-1.5"},{default:w(()=>i[5]||(i[5]=[T("Weekly Availability",-1)])),_:1,__:[5]},8,["href","active"])):h("",!0)])]),t("div",null,[i[11]||(i[11]=t("h4",{class:"text-xs font-semibold uppercase tracking-wider text-gray-500 mb-3"},"Configuration",-1)),t("div",Vo,[D(g)?(s(),P(ee,{key:0,href:f.route("task-types.index"),active:f.route().current("task-types.index"),class:"!px-2 !py-1.5"},{default:w(()=>i[7]||(i[7]=[T("Task Types",-1)])),_:1,__:[7]},8,["href","active"])):h("",!0),D(v)||D(l)("create_project_tiers")||D(l)("edit_project_tiers")?(s(),P(ee,{key:1,href:"/admin/project-tiers",class:"!px-2 !py-1.5"},{default:w(()=>i[8]||(i[8]=[T("Project Tiers",-1)])),_:1,__:[8]})):h("",!0),D(l)("manage_email_templates")?(s(),P(ee,{key:2,href:f.route("email-templates.index"),active:f.route().current("email-templates.index"),class:"!px-2 !py-1.5"},{default:w(()=>i[9]||(i[9]=[T("Email Templates",-1)])),_:1,__:[9]},8,["href","active"])):h("",!0),D(l)("manage_placeholder_definitions")?(s(),P(ee,{key:3,href:f.route("placeholder-definitions.index"),active:f.route().current("placeholder-definitions.index"),class:"!px-2 !py-1.5"},{default:w(()=>i[10]||(i[10]=[T("Placeholder Definitions",-1)])),_:1,__:[10]},8,["href","active"])):h("",!0)])]),t("div",null,[i[16]||(i[16]=t("h4",{class:"text-xs font-semibold uppercase tracking-wider text-gray-500 mb-3"},"Access & Finance",-1)),t("div",No,[D(e)?(s(),P(ee,{key:0,href:f.route("admin.roles.index"),class:"!px-2 !py-1.5"},{default:w(()=>i[12]||(i[12]=[T("Manage Roles",-1)])),_:1,__:[12]},8,["href"])):h("",!0),D(l)("manage_permissions")?(s(),P(ee,{key:1,href:f.route("admin.permissions.index"),class:"!px-2 !py-1.5"},{default:w(()=>i[13]||(i[13]=[T("Manage Permissions",-1)])),_:1,__:[13]},8,["href"])):h("",!0),D(l)("manage_monthly_budgets")?(s(),P(ee,{key:2,href:"/admin/monthly-budgets",class:"!px-2 !py-1.5"},{default:w(()=>i[14]||(i[14]=[T("Monthly Budgets",-1)])),_:1,__:[14]})):h("",!0),D(l)("view_monthly_budgets")?(s(),P(ee,{key:3,href:"/admin/bonus-calculator",class:"!px-2 !py-1.5"},{default:w(()=>i[15]||(i[15]=[T("Bonus Calculator",-1)])),_:1,__:[15]})):h("",!0)])])])])]),_:1})]))}},Bo={class:"relative ms-3"},Lo={class:"inline-flex rounded-md"},Ro={type:"button",class:"inline-flex items-center rounded-md border border-transparent bg-white px-3 py-2 text-sm font-medium leading-4 text-gray-500 transition duration-150 ease-in-out hover:text-gray-700 focus:outline-none"},zo={__name:"UserDropdown",emits:["logoutSuccess","logoutError"],setup(a,{emit:l}){const r=B(()=>Ae().props.auth.user),d=l,e=()=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization,d("logoutSuccess")},g=u=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization,window.location.href="/login",d("logoutError",u)};return(u,v)=>(s(),n("div",Bo,[p(tt,{align:"right",width:"48"},{trigger:w(()=>{var f;return[t("span",Lo,[t("button",Ro,[T(j(r.value.name)+" ("+j((f=r.value.role_data)==null?void 0:f.name)+") ",1),v[0]||(v[0]=t("svg",{class:"ms-2 -me-0.5 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1))])])]}),content:w(()=>[p(ee,{href:u.route("profile.edit")},{default:w(()=>v[1]||(v[1]=[T(" Profile ",-1)])),_:1,__:[1]},8,["href"]),p(ee,{href:u.route("logout"),method:"post",as:"button",onSuccess:e,onError:g},{default:w(()=>v[2]||(v[2]=[T(" Log Out ",-1)])),_:1,__:[2]},8,["href"])]),_:1})]))}},Fo={class:"border-b border-gray-100 bg-white z-10 relative w-full"},Wo={class:"w-full px-4 sm:px-6 lg:px-8"},qo={class:"flex h-16 justify-between"},Oo={class:"flex flex-1 min-w-0"},Ho={class:"flex shrink-0 items-center"},Ko={class:"hidden sm:-my-px sm:ms-10 sm:flex sm:flex-wrap sm:gap-4 overflow-x-auto no-scrollbar"},Jo={class:"hidden sm:ms-6 sm:flex sm:items-center"},Yo={key:0,class:"absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-red-100 transform translate-x-1/2 -translate-y-1/2 bg-red-600 rounded-full"},Zo={class:"-me-2 flex items-center sm:hidden"},Go={class:"h-6 w-6",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24"},Qo={__name:"TopNavigation",props:{unreadNotificationCount:{type:Number,default:0}},emits:["openCreateTaskModal","openAddResource","openNotificationsSidebar","open-kudo-modal"],setup(a,{emit:l}){const r=l,d=I(!1);B(()=>Ae().props.auth.user);const{canDo:e}=Be(),g=e("manage_roles");return(u,v)=>(s(),n("nav",Fo,[t("div",Wo,[t("div",qo,[t("div",Oo,[t("div",Ho,[p(D(de),{href:u.route("dashboard")},{default:w(()=>[p(xt,{class:"block h-16 w-auto fill-current text-gray-800"})]),_:1},8,["href"])]),t("div",Ko,[p(Ce,{href:u.route("dashboard"),active:u.route().current("dashboard")},{default:w(()=>v[5]||(v[5]=[T(" Dashboard ",-1)])),_:1,__:[5]},8,["href","active"]),D(e)("view_emails")?(s(),P(Ce,{key:0,href:u.route("inbox"),active:u.route().current("inbox")},{default:w(()=>v[6]||(v[6]=[T(" Inbox ",-1)])),_:1,__:[6]},8,["href","active"])):h("",!0),D(e)("view_own_points")?(s(),P(Ce,{key:1,href:u.route("bonus-system.index"),active:u.route().current("bonus-system.index")},{default:w(()=>v[7]||(v[7]=[T(" Bonus System ",-1)])),_:1,__:[7]},8,["href","active"])):h("",!0),D(e)("view_own_points")?(s(),P(Ce,{key:2,href:u.route("leaderboard.index"),active:u.route().current("leaderboard.index")},{default:w(()=>v[8]||(v[8]=[T(" Leaderboard ",-1)])),_:1,__:[8]},8,["href","active"])):h("",!0),D(e)("view_kudos")?(s(),P(Ce,{key:3,href:u.route("kudos.index"),active:u.route().current("kudos.index")},{default:w(()=>v[9]||(v[9]=[T(" Kudos ",-1)])),_:1,__:[9]},8,["href","active"])):h("",!0),D(g)?(s(),P(Uo,{key:4})):h("",!0)])]),t("div",Jo,[p(X,{type:"button",onClick:v[0]||(v[0]=f=>r("openCreateTaskModal")),class:"mr-2 px-4 py-2 text-sm"},{default:w(()=>v[10]||(v[10]=[T(" Add Task ",-1)])),_:1,__:[10]}),p(X,{type:"button",onClick:v[1]||(v[1]=f=>r("openAddResource")),class:"mr-2 px-4 py-2 text-sm"},{default:w(()=>v[11]||(v[11]=[T(" Add Resource ",-1)])),_:1,__:[11]}),D(e)("create_kudos")?(s(),P(X,{key:0,type:"button",onClick:v[2]||(v[2]=f=>u.$emit("open-kudo-modal")),class:"mr-2 px-4 py-2 text-sm bg-orange-500 hover:bg-orange-600"},{default:w(()=>v[12]||(v[12]=[T(" ✨ Give Kudo ",-1)])),_:1,__:[12]})):h("",!0),t("button",{onClick:v[3]||(v[3]=f=>r("openNotificationsSidebar")),class:"relative flex-shrink-0 text-gray-400 hover:text-gray-600 p-1 rounded-full transition-colors duration-200 mr-4","aria-label":"View all notifications"},[p(D(Io),{class:"h-6 w-6"}),a.unreadNotificationCount>0?(s(),n("span",Yo,j(a.unreadNotificationCount),1)):h("",!0)]),p(zo)]),t("div",Zo,[t("button",{onClick:v[4]||(v[4]=f=>d.value=!d.value),class:"inline-flex items-center justify-center rounded-md p-2 text-gray-400 transition duration-150 ease-in-out hover:bg-gray-100 hover:text-gray-500 focus:bg-gray-100 focus:text-gray-500 focus:outline-none"},[(s(),n("svg",Go,[t("path",{class:N({hidden:d.value,"inline-flex":!d.value}),"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},null,2),t("path",{class:N({hidden:!d.value,"inline-flex":d.value}),"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,2)]))])])])])]))}},J={__name:"ResponsiveNavLink",props:{href:{type:String,required:!0},active:{type:Boolean},method:{type:String,default:"get"},as:{type:String,default:"a"}},setup(a){const l=a,r=B(()=>l.active?"block w-full ps-3 pe-4 py-2 border-l-4 border-indigo-400 text-start text-base font-medium text-indigo-700 bg-indigo-50 focus:outline-none focus:text-indigo-800 focus:bg-indigo-100 focus:border-indigo-700 transition duration-150 ease-in-out":"block w-full ps-3 pe-4 py-2 border-l-4 border-transparent text-start text-base font-medium text-gray-600 hover:text-gray-800 hover:bg-gray-50 hover:border-gray-300 focus:outline-none focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300 transition duration-150 ease-in-out");return(d,e)=>(s(),P(D(de),Qe({href:a.href,method:a.method,as:a.as},d.$attrs,{class:r.value}),{default:w(()=>[re(d.$slots,"default")]),_:3},16,["href","method","as","class"]))}},Xo={class:"space-y-1 pb-3 pt-2"},el={key:0,class:"mt-3 space-y-1"},tl={class:"border-t border-gray-200 pb-1 pt-4"},sl={class:"px-4"},al={class:"text-base font-medium text-gray-800"},ol={class:"text-sm font-medium text-gray-500"},ll={class:"text-sm font-medium text-gray-500 capitalize"},nl={class:"mt-3 space-y-1"},rl={__name:"MobileNavigation",props:{showingNavigationDropdown:{type:Boolean,required:!0},unreadNotificationCount:{type:Number,default:0}},emits:["openCreateTaskModal","openAddResource","openNotificationsSidebar","logoutSuccess","logoutError"],setup(a,{emit:l}){const r=l,d=B(()=>Ae().props.auth.user),{canDo:e}=Be(),g=e("manage_projects"),u=e("compose_emails"),v=e("approve_emails"),f=e("create_users"),i=e("manage_roles"),_=e("manage_task_types"),c=e("create_clients"),b=()=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization,r("logoutSuccess")},S=$=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization,window.location.href="/login",r("logoutError",$)};return($,y)=>{var M;return s(),n("div",{class:N([{block:a.showingNavigationDropdown,hidden:!a.showingNavigationDropdown},"sm:hidden"])},[t("div",Xo,[D(i)?(s(),n("div",el,[y[18]||(y[18]=t("div",{class:"px-4 font-medium text-base text-gray-800"},"Admin",-1)),p(J,{href:$.route("dashboard"),active:$.route().current("dashboard")},{default:w(()=>y[3]||(y[3]=[T(" Dashboard ",-1)])),_:1,__:[3]},8,["href","active"]),D(e)("view_emails")?(s(),P(J,{key:0,href:$.route("inbox"),active:$.route().current("inbox")},{default:w(()=>y[4]||(y[4]=[T(" Inbox ",-1)])),_:1,__:[4]},8,["href","active"])):h("",!0),D(c)?(s(),P(J,{key:1,href:$.route("clients.index"),active:$.route().current("clients.index")},{default:w(()=>y[5]||(y[5]=[T(" Clients ",-1)])),_:1,__:[5]},8,["href","active"])):h("",!0),D(g)?(s(),P(J,{key:2,href:$.route("projects.index"),active:$.route().current("projects.index")},{default:w(()=>y[6]||(y[6]=[T(" Projects ",-1)])),_:1,__:[6]},8,["href","active"])):h("",!0),D(f)?(s(),P(J,{key:3,href:$.route("users.index"),active:$.route().current("users.index")},{default:w(()=>y[7]||(y[7]=[T(" Users ",-1)])),_:1,__:[7]},8,["href","active"])):h("",!0),D(u)?(s(),P(J,{key:4,href:$.route("emails.compose"),active:$.route().current("emails.compose")},{default:w(()=>y[8]||(y[8]=[T(" Compose Email ",-1)])),_:1,__:[8]},8,["href","active"])):h("",!0),D(v)?(s(),P(J,{key:5,href:$.route("emails.pending"),active:$.route().current("emails.pending")},{default:w(()=>y[9]||(y[9]=[T(" Approve Emails ",-1)])),_:1,__:[9]},8,["href","active"])):h("",!0),D(u)?(s(),P(J,{key:6,href:$.route("emails.rejected"),active:$.route().current("emails.rejected")},{default:w(()=>y[10]||(y[10]=[T(" Rejected Emails ",-1)])),_:1,__:[10]},8,["href","active"])):h("",!0),D(f)?(s(),P(J,{key:7,href:$.route("availability.index"),active:$.route().current("availability.index")},{default:w(()=>y[11]||(y[11]=[T(" Weekly Availability ",-1)])),_:1,__:[11]},8,["href","active"])):h("",!0),D(e)("manage_roles")?(s(),P(J,{key:8,href:$.route("admin.roles.index"),active:$.route().current("admin.roles.index")},{default:w(()=>y[12]||(y[12]=[T(" Manage Roles ",-1)])),_:1,__:[12]},8,["href","active"])):h("",!0),D(e)("manage_permissions")?(s(),P(J,{key:9,href:$.route("admin.permissions.index"),active:$.route().current("admin.permissions.index")},{default:w(()=>y[13]||(y[13]=[T(" Manage Permissions ",-1)])),_:1,__:[13]},8,["href","active"])):h("",!0),D(e)("manage_bonus_configuration")?(s(),P(J,{key:10,href:$.route("bonus-configuration.index"),active:$.route().current("bonus-configuration.index")},{default:w(()=>y[14]||(y[14]=[T(" Bonus Configuration ",-1)])),_:1,__:[14]},8,["href","active"])):h("",!0),D(_)?(s(),P(J,{key:11,href:$.route("task-types.index"),active:$.route().current("task-types.index")},{default:w(()=>y[15]||(y[15]=[T(" Task Types ",-1)])),_:1,__:[15]},8,["href","active"])):h("",!0),D(e)("manage_email_templates")?(s(),P(J,{key:12,href:$.route("email-templates.index"),active:$.route().current("email-templates.index")},{default:w(()=>y[16]||(y[16]=[T(" Email Templates ",-1)])),_:1,__:[16]},8,["href","active"])):h("",!0),D(e)("manage_placeholder_definitions")?(s(),P(J,{key:13,href:$.route("placeholder-definitions.index"),active:$.route().current("placeholder-definitions.index")},{default:w(()=>y[17]||(y[17]=[T(" Placeholder Definitions ",-1)])),_:1,__:[17]},8,["href","active"])):h("",!0)])):h("",!0)]),t("div",tl,[t("div",sl,[t("div",al,j(d.value.name),1),t("div",ol,j(d.value.email),1),t("div",ll,j((M=d.value.role_data)==null?void 0:M.name),1)]),t("div",nl,[p(J,{as:"button",onClick:y[0]||(y[0]=k=>r("openCreateTaskModal"))},{default:w(()=>y[19]||(y[19]=[T(" Add Task ",-1)])),_:1,__:[19]}),p(J,{as:"button",onClick:y[1]||(y[1]=k=>r("openAddResource"))},{default:w(()=>y[20]||(y[20]=[T(" Add Resource ",-1)])),_:1,__:[20]}),p(J,{as:"button",onClick:y[2]||(y[2]=k=>r("openNotificationsSidebar"))},{default:w(()=>[T(" Notifications ("+j(a.unreadNotificationCount)+") ",1)]),_:1}),p(J,{href:$.route("profile.edit")},{default:w(()=>y[21]||(y[21]=[T(" Profile ",-1)])),_:1,__:[21]},8,["href"]),p(J,{href:$.route("logout"),method:"post",as:"button",onSuccess:b,onError:S},{default:w(()=>y[22]||(y[22]=[T(" Log Out ",-1)])),_:1,__:[22]},8,["href"])])])],2)}}},il={class:"space-y-4"},dl={key:0,class:"mb-4 p-3 bg-gray-100 rounded-md"},ul={class:"text-sm font-medium text-gray-900"},cl={class:"text-xs text-gray-500 mt-1"},ml={class:"mb-4"},vl="post",pl="Add Note",fl="Note added successfully!",gl={__name:"TaskNoteModal",props:{show:Boolean,taskForNote:Object},emits:["close","note-added"],setup(a,{emit:l}){const r=a,d=l,e=De({note:""}),g=B(()=>{var i;return`Add Note to Task: "${(i=r.taskForNote)==null?void 0:i.name}"`}),u=B(()=>{var i;return`/api/tasks/${(i=r.taskForNote)==null?void 0:i.id}/notes`});G(()=>r.show,i=>{i&&Object.assign(e,{note:""})},{immediate:!0});const v=i=>{d("note-added",i),d("close")},f=()=>{d("close")};return(i,_)=>(s(),P(Me,{show:a.show,title:g.value,"api-endpoint":u.value,"http-method":vl,"form-data":e,"submit-button-text":pl,"success-message":fl,onClose:f,onSubmitted:v},{default:w(({errors:c})=>[t("div",il,[a.taskForNote?(s(),n("div",dl,[t("p",ul,j(a.taskForNote.name),1),t("p",cl,"Status: "+j(a.taskForNote.status),1)])):h("",!0),t("div",ml,[p(L,{for:"task-note-content",value:"Note Content"}),Z(t("textarea",{id:"task-note-content","onUpdate:modelValue":_[0]||(_[0]=b=>e.note=b),class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full h-32",placeholder:"Enter your note...",required:""},null,512),[[le,e.note]]),p(q,{message:c.note?c.note[0]:"",class:"mt-2"},null,8,["message"])])])]),_:1},8,["show","title","api-endpoint","form-data"]))}},yl={class:"task-history-list"},hl={key:0,class:"text-center py-4"},bl={key:1,class:"text-gray-500 text-sm py-2"},kl={key:2,class:"space-y-3"},xl={class:"flex items-start"},wl={class:"text-xl mr-2"},_l={class:"text-sm text-gray-700"},$l={class:"text-xs text-gray-500 mt-1"},Cl={__name:"TaskHistoryList",props:{activities:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},setup(a){const l=d=>d?new Date(d).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",r=d=>(console.log(d),d.includes("created")?"🆕":d.includes("started")?"🚀":d.includes("paused")?"⏸️":d.includes("resumed")?"▶️":d.includes("unblocked")?"🔓":d.includes("blocked")?"⛔":d.includes("completed")?"✅":d.includes("revised")?"🔄":d.includes("deleted")?"🗑️":d.includes("assigned")?"👤":d.includes("updated")?"📝":d.includes("added note")?"🗒️":d.includes("commented")?"💬":"📋");return(d,e)=>(s(),n("div",yl,[a.loading?(s(),n("div",hl,e[0]||(e[0]=[t("div",{class:"inline-block animate-spin rounded-full h-6 w-6 border-t-2 border-b-2 border-indigo-500"},null,-1),t("p",{class:"mt-2 text-gray-500"},"Loading activity history...",-1)]))):a.activities.length===0?(s(),n("div",bl," No activity history available for this task. ")):(s(),n("div",kl,[(s(!0),n(K,null,Y(a.activities,g=>{var u;return s(),n("div",{key:g.id,class:"p-3 bg-gray-50 rounded-md"},[t("div",xl,[t("span",wl,j(r(g.description)),1),t("div",null,[t("p",_l,j(g.description),1),t("p",$l," By "+j(((u=g.causer)==null?void 0:u.name)||"System")+" on "+j(l(g.created_at)),1)])])])}),128))]))]))}},Sl=be(Cl,[["__scopeId","data-v-423d54af"]]),rr=async()=>{try{return(await H.get("/api/assigned-tasks")).data}catch(a){throw console.error("Error fetching assigned tasks:",a),Q("Failed to load assigned tasks"),a}},ir=async a=>{try{return(await H.get(`/api/projects/${a}/tasks`)).data}catch(l){throw console.error("Error fetching project tasks:",l),Q("Failed to load project tasks"),l}},dr=async a=>{try{return(await H.get(`/api/projects/${a}/due-and-overdue-tasks`)).data}catch(l){throw console.error("Error fetching due and overdue tasks:",l),Q("Failed to load due and overdue tasks"),l}},Tl=async a=>{if(!a||a.status==="In Progress")return a;try{ve("Starting task...");const l=await H.post(`/api/tasks/${a.id}/start`);return ae("Task started successfully"),l.data}catch(l){throw console.error("Error starting task:",l),Q("Failed to start task. Please try again."),l}},Il=async a=>{if(!a||a.status!=="In Progress")return te('Task can only be paused from "In Progress" status.'),a;try{ve("Pausing task...");const l=await H.post(`/api/tasks/${a.id}/pause`);return ae("Task paused successfully"),l.data}catch(l){throw console.error("Error pausing task:",l),Q("Failed to pause task. Please try again."),l}},jl=async a=>{if(!a||a.status!=="Paused")return te('Task can only be resumed from "Paused" status.'),a;try{ve("Resuming task...");const l=await H.post(`/api/tasks/${a.id}/resume`);return ae("Task resumed successfully"),l.data}catch(l){throw console.error("Error resuming task:",l),Q("Failed to resume task. Please try again."),l}},Al=async a=>{if(!a||a.status==="Done")return a;if(a.status!=="In Progress")throw te("Task must be started before it can be completed"),new Error("Task must be started before it can be completed");try{ve("Completing task...");const l=await H.patch(`/api/tasks/${a.id}/complete`);return ae("Task completed successfully"),l.data}catch(l){throw console.error("Error completing task:",l),l.response&&l.response.status===422?te(l.response.data.message||"Task must be started before it can be completed"):Q("Failed to complete task. Please try again."),l}},Dl=async(a,l)=>{if(!a||a.status==="Blocked")return te("Task is already blocked."),a;if(a.status==="Done")return te("Completed tasks cannot be blocked."),a;if(!l)throw te("Please provide a reason for blocking the task"),new Error("Blocking reason is required");try{ve("Blocking task...");const r=await H.post(`/api/tasks/${a.id}/block`,{reason:l});return ae("Task blocked successfully"),r.data}catch(r){throw console.error("Error blocking task:",r),Q("Failed to block task. Please try again."),r}},Ml=async a=>{if(!a||a.status!=="Blocked")return te("Task is not in a blocked state."),a;try{ve("Unblocking task...");const l=await H.post(`/api/tasks/${a.id}/unblock`);return ae("Task unblocked successfully"),l.data}catch(l){throw console.error("Error unblocking task:",l),Q("Failed to unblock task. Please try again."),l}},Pl=async a=>{if(!a||a.status!=="Done")return te("Only completed tasks can be revised."),a;try{ve("Revising task...");const l=await H.post(`/api/tasks/${a.id}/revise`);return ae("Task revised successfully"),l.data}catch(l){throw console.error("Error revising task:",l),l.response&&l.response.status===422?te(l.response.data.message||"Only completed tasks can be revised"):Q("Failed to revise task. Please try again."),l}},El=async a=>{if(!a)return!1;if(a.status!=="To Do")throw te("Only tasks in To Do status can be deleted"),new Error("Only tasks in To Do status can be deleted");if(!confirm("Are you sure you want to delete this task? This action cannot be undone."))return!1;try{return ve("Deleting task..."),await H.delete(`/api/tasks/${a.id}`),ae("Task deleted successfully"),!0}catch(l){throw console.error("Error deleting task:",l),Q("Failed to delete task. Please try again."),l}},Vl=a=>{switch(a){case"To Do":return"bg-yellow-100 text-yellow-800";case"In Progress":return"bg-blue-100 text-blue-800";case"Paused":return"bg-orange-100 text-orange-800";case"Blocked":return"bg-red-100 text-red-800";case"Done":return"bg-green-100 text-green-800";case"Archived":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},ur=a=>{switch(a){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},cr=a=>a?a.charAt(0).toUpperCase()+a.slice(1):"Medium",Nl=["checked","onChange"],Ul={__name:"ChecklistComponent",props:{items:{type:Array,required:!0},apiEndpoint:{type:String,required:!0},title:{type:String,default:"Checklist"},containerClass:{type:String,default:"mt-4 p-3 bg-gray-100 rounded-lg text-sm text-gray-700 border border-gray-200"},titleClass:{type:String,default:"font-semibold text-gray-900 mb-2"},itemsContainerClass:{type:String,default:"space-y-1"},itemClass:{type:String,default:"flex items-center space-x-2"},checkboxClass:{type:String,default:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"},completedItemClass:{type:String,default:"line-through text-gray-500"},successMessage:{type:String,default:"Checklist item updated!"},errorMessage:{type:String,default:"Failed to update checklist item"},payloadTransformer:{type:Function,default:null},checkListStyle:{type:String,default:"checklist"}},emits:["update:items","item-toggled"],setup(a,{emit:l}){const r=a,d=l,e=I(JSON.parse(JSON.stringify(r.items)));G(()=>r.items,u=>{e.value=JSON.parse(JSON.stringify(u))},{deep:!0});async function g(u){const v=e.value[u],f=!v.completed;v.completed=f;try{let i;r.payloadTransformer?i=r.payloadTransformer(e.value,u):i={items:e.value},await H.put(r.apiEndpoint,i),d("update:items",e.value),d("item-toggled",{index:u,item:v,completed:f}),ae(r.successMessage)}catch(i){console.error("Error updating checklist item:",i),v.completed=!f,Q(r.errorMessage)}}return(u,v)=>e.value&&e.value.length>0?(s(),n("div",{key:0,class:N(a.containerClass)},[t("p",{class:N(a.titleClass)},j(a.title),3),t("ul",{class:N(a.itemsContainerClass)},[(s(!0),n(K,null,Y(e.value,(f,i)=>(s(),n("li",{key:i,class:N(a.itemClass)},[a.checkListStyle==="checklist"?(s(),n("input",{key:0,type:"checkbox",checked:f.completed,onChange:_=>g(i),class:N(a.checkboxClass)},null,42,Nl)):h("",!0),t("span",{class:N({[a.completedItemClass]:f.completed})},j(f.name),3)],2))),128))],2)],2)):h("",!0)}};function He(a,l){return s(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"fill-rule":"evenodd",d:"M8.75 1A2.75 2.75 0 0 0 6 3.75v.443c-.795.077-1.584.176-2.365.298a.75.75 0 1 0 .23 1.482l.149-.022.841 10.518A2.75 2.75 0 0 0 7.596 19h4.807a2.75 2.75 0 0 0 2.742-2.53l.841-10.52.149.023a.75.75 0 0 0 .23-1.482A41.03 41.03 0 0 0 14 4.193V3.75A2.75 2.75 0 0 0 11.25 1h-2.5ZM10 4c.84 0 1.673.025 2.5.075V3.75c0-.69-.56-1.25-1.25-1.25h-2.5c-.69 0-1.25.56-1.25 1.25v.325C8.327 4.025 9.16 4 10 4ZM8.58 7.72a.75.75 0 0 0-1.5.06l.3 7.5a.75.75 0 1 0 1.5-.06l-.3-7.5Zm4.34.06a.75.75 0 1 0-1.5-.06l-.3 7.5a.75.75 0 1 0 1.5.06l.3-7.5Z","clip-rule":"evenodd"})])}const Bl={class:"mt-4"},Ll={__name:"ChecklistCreator",props:{modelValue:{type:Array,required:!0},placeholder:{type:String,default:"e.g., Task 1, Task 2, Task 3"},label:{type:String,default:"Checklist Items"},density:{type:String,default:"spacious",validator:a=>["spacious","tight","notes"].includes(a)}},emits:["update:modelValue"],setup(a,{emit:l}){const r=a,d=l,e=I([]),g=I([]),u=I(!1);G(()=>r.modelValue,c=>{u.value=!0,e.value=JSON.parse(JSON.stringify(c)),(e.value.length===0||e.value[e.value.length-1].name.trim()!=="")&&e.value.push({name:"",completed:!1}),ye(()=>{u.value=!1})},{immediate:!0,deep:!0}),G(()=>e.value,c=>{u.value||d("update:modelValue",c)},{deep:!0});function v(c){e.value.splice(c,1),e.value.length===0&&e.value.push({name:"",completed:!1})}function f(c){c===e.value.length-1&&e.value[c].name.trim()!==""&&e.value.push({name:"",completed:!1})}function i(c){c<e.value.length-1&&ye(()=>{var b;(b=g.value[c+1])==null||b.focus()})}const _=B(()=>r.density==="tight"?{listClass:"space-y-1",itemClass:"flex items-center space-x-1",inputClass:"px-1 py-1 text-sm"}:r.density==="notes"?{listClass:"space-y-0.5",itemClass:"flex items-center space-x-1",inputClass:"px-1 py-0.5 text-sm border-transparent focus:border-transparent focus:ring-0 bg-transparent"}:{listClass:"space-y-2",itemClass:"flex items-center space-x-2",inputClass:""});return(c,b)=>(s(),n("div",Bl,[a.label?(s(),P(L,{key:0,value:a.label},null,8,["value"])):h("",!0),t("ul",{class:N(_.value.listClass)},[(s(!0),n(K,null,Y(e.value,(S,$)=>(s(),n("li",{key:$,class:N(_.value.itemClass)},[a.density==="notes"?(s(),P(D(He),{key:0,class:"h4 w-4",onClick:y=>v($)},null,8,["onClick"])):h("",!0),p(ne,{modelValue:S.name,"onUpdate:modelValue":y=>S.name=y,type:"text",class:N(["flex-1",_.value.inputClass]),placeholder:$===e.value.length-1?a.placeholder:"",onInput:y=>f($),onKeyup:Pe(Ee(y=>i($),["prevent"]),["enter"]),ref_for:!0,ref:y=>{y&&(g.value[$]=y)}},null,8,["modelValue","onUpdate:modelValue","class","placeholder","onInput","onKeyup"]),e.value.length>1&&a.density!=="notes"?(s(),P(Re,{key:1,type:"button",onClick:y=>v($)},{default:w(()=>[p(D(He),{class:"h-4 w-4"})]),_:2},1032,["onClick"])):h("",!0)],2))),128))],2)]))}},Rl={key:0,class:"text-center py-8 text-gray-500"},zl={key:1,class:"text-center py-8 text-red-600"},Fl={key:2,class:"space-y-6"},Wl={class:"bg-gray-50 p-4 rounded-lg shadow-sm"},ql={class:"text-xl font-bold text-gray-900 mb-2"},Ol={class:"flex items-center space-x-2 text-sm text-gray-600 mb-4"},Hl={key:0,class:"text-indigo-600 font-medium"},Kl={key:1,class:"text-purple-600 font-medium"},Jl={class:"text-gray-700 leading-relaxed"},Yl={class:"mt-4 flex flex-wrap gap-2"},Zl={key:0,class:"text-xs text-gray-500 mt-1"},Gl={key:0,class:"bg-yellow-50 border-l-4 border-red-400 p-4 rounded-lg shadow-sm"},Ql={class:"flex items-center"},Xl={class:"ml-3"},en={class:"mt-2 text-sm text-yellow-700"},tn={class:"space-y-4 p-4 bg-white rounded-lg shadow-sm mb-4"},sn={class:"flex justify-between items-center border-b pb-2 mb-4"},an={key:0},on={key:1},ln={key:0,class:"mb-4"},nn={class:"flex justify-end mt-4"},rn={key:2,class:"text-gray-500 text-sm py-2"},dn={class:"space-y-4 p-4 bg-white rounded-lg shadow-sm"},un={class:"flex items-center justify-between py-2 border-b border-gray-100"},cn={class:"flex-1 text-right"},mn={key:0,class:"text-xs text-gray-400 ml-1"},vn={key:1,class:"flex items-center space-x-2"},pn={class:"flex items-center justify-between py-2 border-b border-gray-100"},fn={class:"flex-1 text-right"},gn={key:1,class:"flex items-center space-x-2"},yn={class:"flex items-center justify-between py-2 border-b border-gray-100"},hn={class:"flex-1 text-right"},bn={key:0,class:"text-xs text-gray-400 ml-1"},kn={key:1,class:"flex items-center space-x-2"},xn={class:"flex items-center justify-between py-2 border-b border-gray-100"},wn={class:"text-gray-700"},_n={class:"flex items-start py-2 border-b border-gray-100"},$n={class:"flex-1 flex flex-wrap gap-2"},Cn={key:0,class:"text-gray-500 text-sm"},Sn={class:"bg-white p-4 rounded-lg shadow-sm"},Tn={class:"flex justify-between items-center mb-4 border-b pb-2"},In={key:0,class:"space-y-3"},jn={class:"text-sm text-gray-700"},An={class:"text-xs text-gray-500 mt-1"},Dn={key:1,class:"text-gray-500 text-sm py-2"},Mn={class:"bg-white p-4 rounded-lg shadow-sm"},Pn={key:3,class:"text-center py-8 text-gray-500"},En={key:4,class:"mt-4 flex flex-col items-center"},Vn={key:0,class:"text-xs text-red-500 mt-1"},Nn={class:"p-6"},Un={class:"mb-4"},Bn={class:"flex justify-end space-x-3"},Ln={__name:"TaskDetailSidebar",props:{taskId:{type:Number,required:!0},projectId:{type:Number,required:!0},projectUsers:{type:Array,default:()=>[]}},emits:["close","task-updated","task-deleted"],setup(a,{emit:l}){const r=a,d=l,e=I(null),g=I(!0),u=I(""),v=I(!1),f=I(!1),i=I(!1),_=I(null),c=I(null),b=I(null),S=I([]),$=I(!1),y=[{value:"low",label:"Low"},{value:"medium",label:"Medium"},{value:"high",label:"High"}],M=I(!1),k=I(!1),o=I([{name:"",completed:!1}]),m=I(!1),x=async()=>{g.value=!0,u.value="";try{const E=await window.axios.get(`/api/tasks/${r.taskId}`);e.value=E.data,_.value=e.value.assigned_to_id||null,c.value=e.value.due_date||null,b.value=e.value.priority||"medium",A()}catch(E){u.value="Failed to load task details.",console.error("Error fetching task details:",E)}finally{g.value=!1}},A=async()=>{$.value=!0;try{const E=await window.axios.get("/api/activities",{params:{subject_type:"App\\Models\\Task",subject_id:r.taskId}});S.value=E.data}catch(E){console.error("Error fetching task activities:",E)}finally{$.value=!1}};G(()=>r.taskId,E=>{E?x():e.value=null},{immediate:!0});const V=B(()=>r.projectUsers.map(E=>({value:E.id,label:E.name}))),O=async()=>{if(!e.value||_.value===e.value.assigned_to_id){v.value=!1;return}try{const E=await window.axios.patch(`/api/tasks/${e.value.id}`,{assigned_to_user_id:_.value});e.value=E.data,d("task-updated",e.value)}catch(E){console.error("Error updating assigned user:",E),_.value=e.value.assigned_to_id,Q("Failed to update assigned user. Please try again.")}finally{v.value=!1}},ie=async()=>{if(!e.value||c.value===e.value.due_date){f.value=!1;return}try{const E=await window.axios.patch(`/api/tasks/${e.value.id}`,{due_date:c.value});e.value=E.data,d("task-updated",e.value)}catch(E){console.error("Error updating due date:",E),c.value=e.value.due_date,Q("Failed to update due date. Please try again.")}finally{f.value=!1}},W=async()=>{if(!e.value||b.value===e.value.priority){i.value=!1;return}try{const E=await window.axios.patch(`/api/tasks/${e.value.id}`,{priority:b.value});e.value=E.data,d("task-updated",e.value)}catch(E){console.error("Error updating priority:",E),b.value=e.value.priority,Q("Failed to update priority. Please try again.")}finally{i.value=!1}},U=()=>{M.value=!0},z=()=>{x(),M.value=!1},F=async()=>{try{await El(e.value),d("task-deleted",e.value.id),d("close")}catch(E){console.error("Error deleting task:",E)}},oe=async()=>{try{e.value=await Tl(e.value),d("task-updated",e.value),A()}catch(E){console.error("Error starting task:",E)}},at=async()=>{try{e.value=await Il(e.value),d("task-updated",e.value),A()}catch(E){console.error("Error pausing task:",E)}},ot=async()=>{try{e.value=await jl(e.value),d("task-updated",e.value),A()}catch(E){console.error("Error resuming task:",E)}},lt=async()=>{try{e.value=await Al(e.value),d("task-updated",e.value),A()}catch(E){console.error("Error completing task:",E)}},nt=async()=>{try{e.value=await Pl(e.value),d("task-updated",e.value),A()}catch(E){console.error("Error revising task:",E)}},rt=()=>{var E;k.value=!k.value,k.value&&((E=e.value.details)!=null&&E.checklist&&e.value.details.checklist.length>0?(o.value=JSON.parse(JSON.stringify(e.value.details.checklist)),o.value[o.value.length-1].name!==""&&o.value.push({name:"",completed:!1})):o.value=[{name:"",completed:!1}])},it=async()=>{if(!m.value){m.value=!0;try{const E=o.value.filter(fe=>fe.name.trim()!==""),C={details:{...e.value.details,checklist:E}},pe=await window.axios.patch(`/api/tasks/${e.value.id}`,C);e.value=pe.data,k.value=!1,ae("Checklist saved successfully"),d("task-updated",e.value)}catch(E){console.error("Error saving checklist:",E),Q("Failed to save checklist")}finally{m.value=!1}}},ke=I(!1),he=I(""),dt=()=>{he.value="",ke.value=!0},ut=async()=>{if(!he.value.trim()){te("Please provide a reason for blocking the task");return}try{e.value=await Dl(e.value,he.value),ae("Task blocked successfully"),d("task-updated",e.value),A(),ke.value=!1}catch(E){console.error("Error blocking task:",E)}},ct=async()=>{try{e.value=await Ml(e.value),d("task-updated",e.value),A()}catch(E){console.error("Error unblocking task:",E)}},mt=B(()=>e.value?Vl(e.value.status):""),Ve=B(()=>{var C,pe,fe,xe;if(!S.value||((C=e.value)==null?void 0:C.status)!=="Blocked")return null;const E=S.value.find(we=>{var _e,$e;return we.event==="updated"&&(($e=(_e=we.properties)==null?void 0:_e.attributes)==null?void 0:$e.status)==="Blocked"});return E?(console.log(E.properties),{causer:((pe=E.causer)==null?void 0:pe.name)||"Unknown",reason:((xe=(fe=E.properties)==null?void 0:fe.attributes)==null?void 0:xe.block_reason)||"No reason provided."}):null});return(E,C)=>{var pe,fe,xe,we,_e,$e,ze;return s(),n("div",null,[g.value?(s(),n("div",Rl," Loading task details... ")):u.value?(s(),n("div",zl,j(u.value),1)):e.value?(s(),n("div",Fl,[t("div",Wl,[t("h4",ql,j(e.value.name),1),t("div",Ol,[t("span",{class:N(["px-2 py-1 rounded-full text-xs font-medium",mt.value])},j(e.value.status),3),e.value.task_type?(s(),n("span",Hl," | "+j((pe=e.value.task_type)==null?void 0:pe.name)+" | ",1)):h("",!0),C[14]||(C[14]=t("br",null,null,-1)),(fe=e.value.milestone)!=null&&fe.name?(s(),n("span",Kl,j((xe=e.value.milestone)==null?void 0:xe.name),1)):h("",!0)]),t("p",Jl,j(e.value.description||"No description provided."),1),t("div",Yl,[e.value.status==="To Do"?(s(),P(X,{key:0,onClick:oe,class:"bg-blue-600 hover:bg-blue-700"},{default:w(()=>C[15]||(C[15]=[T(" Start Task ",-1)])),_:1,__:[15]})):e.value.status==="In Progress"?(s(),P(X,{key:1,onClick:at,class:"bg-orange-600 hover:bg-orange-700"},{default:w(()=>C[16]||(C[16]=[T(" Pause Task ",-1)])),_:1,__:[16]})):e.value.status==="Paused"?(s(),P(X,{key:2,onClick:ot,class:"bg-blue-600 hover:bg-blue-700"},{default:w(()=>C[17]||(C[17]=[T(" Resume Task ",-1)])),_:1,__:[17]})):e.value.status==="Blocked"?(s(),P(X,{key:3,onClick:ct,class:"bg-green-600 hover:bg-green-700"},{default:w(()=>C[18]||(C[18]=[T(" Unblock Task ",-1)])),_:1,__:[18]})):h("",!0),e.value.status==="To Do"||e.value.status==="In Progress"||e.value.status==="Paused"?(s(),P(X,{key:4,onClick:dt,class:"bg-red-600 hover:bg-red-700"},{default:w(()=>C[19]||(C[19]=[T(" Block Task ",-1)])),_:1,__:[19]})):h("",!0),e.value.status==="In Progress"?(s(),P(X,{key:5,onClick:lt,class:"bg-green-600 hover:bg-green-700"},{default:w(()=>C[20]||(C[20]=[T(" Complete Task ",-1)])),_:1,__:[20]})):h("",!0),e.value.status==="Done"?(s(),P(X,{key:6,onClick:nt,class:"bg-yellow-600 hover:bg-yellow-700"},{default:w(()=>C[21]||(C[21]=[T(" Revise Task ",-1)])),_:1,__:[21]})):h("",!0)]),e.value.status==="Done"?(s(),n("div",Zl,' Revising will change the task status back to "To Do" ')):h("",!0)]),e.value.status==="Blocked"&&Ve.value?(s(),n("div",Gl,[t("div",Ql,[C[23]||(C[23]=t("div",{class:"flex-shrink-0"},[t("svg",{class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[t("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.487 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11.75 13a.75.75 0 01-1.5 0v-2.25a.75.75 0 011.5 0V13zm-1.5-7.5a.75.75 0 011.5 0v1.5a.75.75 0 01-1.5 0V5.5z","clip-rule":"evenodd"})])],-1)),t("div",Xl,[C[22]||(C[22]=t("h3",{class:"text-sm font-medium text-yellow-800"},"Task Blocked",-1)),t("div",en,[t("p",null,"This task was blocked by **"+j(Ve.value.causer)+"** with the following reason:",1),t("p",null,j(Ve.value.reason),1)])])])])):h("",!0),t("div",tn,[t("div",sn,[C[24]||(C[24]=t("h5",{class:"text-lg font-semibold text-gray-800"},"Task Checklist",-1)),t("button",{onClick:rt,class:"text-indigo-600 hover:text-indigo-800 text-sm font-medium flex items-center"},[k.value?(s(),n("span",on,"Cancel")):(s(),n("span",an,j((we=e.value.details)!=null&&we.checklist&&e.value.details.checklist.length>0?"Edit Checklist":"Add Checklist"),1))])]),k.value?(s(),n("div",ln,[p(Ll,{modelValue:o.value,"onUpdate:modelValue":C[0]||(C[0]=R=>o.value=R),placeholder:"e.g., Review design, Update documentation",label:"Checklist Items",density:"notes"},null,8,["modelValue"]),t("div",nn,[p(X,{onClick:it,disabled:m.value,class:"flex items-center space-x-1"},{default:w(()=>[p(D(jo),{class:"h-4 w-4"}),C[25]||(C[25]=t("span",null,"Save Checklist",-1))]),_:1,__:[25]},8,["disabled"])])])):h("",!0),(_e=e.value.details)!=null&&_e.checklist&&e.value.details.checklist.length>0&&!k.value?(s(),P(Ul,{key:1,items:e.value.details.checklist,"api-endpoint":`/api/tasks/${e.value.id}`,title:"Items to complete:","payload-transformer":R=>({details:{...e.value.details,checklist:R}})},null,8,["items","api-endpoint","payload-transformer"])):h("",!0),(!(($e=e.value.details)!=null&&$e.checklist)||e.value.details.checklist.length===0)&&!k.value?(s(),n("div",rn,' No checklist items for this task yet. Click "Add Checklist" to create one. ')):h("",!0)]),t("div",dn,[C[32]||(C[32]=t("h5",{class:"text-lg font-semibold text-gray-800 border-b pb-2 mb-4"},"Task Attributes",-1)),t("div",un,[p(L,{class:"min-w-[100px] text-gray-600"},{default:w(()=>C[26]||(C[26]=[T("Assigned To:",-1)])),_:1,__:[26]}),t("div",cn,[v.value?(s(),n("div",vn,[p(se,{id:"edit-assigned-to",modelValue:_.value,"onUpdate:modelValue":C[2]||(C[2]=R=>_.value=R),options:V.value,"value-key":"value","label-key":"label",placeholder:"Unassigned",class:"mt-1 flex-1","allow-empty":!0},null,8,["modelValue","options"]),t("button",{onClick:O,class:"text-green-600 hover:text-green-800 text-sm font-medium"},"Save"),t("button",{onClick:C[3]||(C[3]=R=>v.value=!1),class:"text-gray-600 hover:text-gray-800 text-sm font-medium"},"Cancel")])):(s(),n("div",{key:0,onClick:C[1]||(C[1]=R=>e.value.status!=="Done"?v.value=!0:te("Cannot change assignment for a completed task. Use the Revise button to change the task status first.")),class:N(["cursor-pointer",{"text-indigo-600 hover:text-indigo-800":e.value.status!=="Done","text-gray-500":e.value.status==="Done"}])},[T(j(((ze=e.value.assigned_to)==null?void 0:ze.name)||"Unassigned")+" ",1),e.value.status!=="Done"?(s(),n("span",mn,"(Click to edit)")):h("",!0)],2))])]),t("div",pn,[p(L,{class:"min-w-[100px] text-gray-600"},{default:w(()=>C[27]||(C[27]=[T("Due Date:",-1)])),_:1,__:[27]}),t("div",fn,[f.value?(s(),n("div",gn,[p(ne,{id:"edit-due-date",modelValue:c.value,"onUpdate:modelValue":C[5]||(C[5]=R=>c.value=R),type:"date",class:"mt-1 flex-1"},null,8,["modelValue"]),t("button",{onClick:ie,class:"text-green-600 hover:text-green-800 text-sm font-medium"},"Save"),t("button",{onClick:C[6]||(C[6]=R=>f.value=!1),class:"text-gray-600 hover:text-gray-800 text-sm font-medium"},"Cancel")])):(s(),n("div",{key:0,onClick:C[4]||(C[4]=R=>f.value=!0),class:"cursor-pointer text-indigo-600 hover:text-indigo-800"},[T(j(e.value.due_date?D(wt)(e.value.due_date).format("MMM D, YYYY"):"No Due Date")+" ",1),C[28]||(C[28]=t("span",{class:"text-xs text-gray-400 ml-1"},"(Click to edit)",-1))]))])]),t("div",yn,[p(L,{class:"min-w-[100px] text-gray-600"},{default:w(()=>C[29]||(C[29]=[T("Priority:",-1)])),_:1,__:[29]}),t("div",hn,[i.value?(s(),n("div",kn,[p(se,{id:"edit-priority",modelValue:b.value,"onUpdate:modelValue":C[8]||(C[8]=R=>b.value=R),options:y,"value-key":"value","label-key":"label",placeholder:"Select priority",class:"mt-1 flex-1"},null,8,["modelValue"]),t("button",{onClick:W,class:"text-green-600 hover:text-green-800 text-sm font-medium"},"Save"),t("button",{onClick:C[9]||(C[9]=R=>i.value=!1),class:"text-gray-600 hover:text-gray-800 text-sm font-medium"},"Cancel")])):(s(),n("div",{key:0,onClick:C[7]||(C[7]=R=>e.value.status!=="Done"?i.value=!0:te("Cannot change priority for a completed task. Use the Revise button to change the task status first.")),class:N(["cursor-pointer",{"text-indigo-600 hover:text-indigo-800":e.value.status!=="Done","text-gray-500":e.value.status==="Done"}])},[t("span",{class:N({"text-red-600 font-medium":e.value.priority==="high","text-yellow-600 font-medium":e.value.priority==="medium","text-green-600 font-medium":e.value.priority==="low"})},j(e.value.priority?e.value.priority.charAt(0).toUpperCase()+e.value.priority.slice(1):"Medium"),3),e.value.status!=="Done"?(s(),n("span",bn,"(Click to edit)")):h("",!0)],2))])]),t("div",xn,[p(L,{class:"min-w-[100px] text-gray-600"},{default:w(()=>C[30]||(C[30]=[T("Created:",-1)])),_:1,__:[30]}),t("span",wn,j(e.value.created_at?new Date(e.value.created_at).toLocaleDateString():"N/A"),1)]),t("div",_n,[p(L,{class:"min-w-[100px] text-gray-600 mt-1"},{default:w(()=>C[31]||(C[31]=[T("Tags:",-1)])),_:1,__:[31]}),t("div",$n,[(s(!0),n(K,null,Y(e.value.tags,R=>(s(),n("span",{key:R.id,class:"inline-flex items-center px-3 py-1 text-sm font-medium bg-indigo-100 text-indigo-800 rounded-full shadow-sm"},j(R.name),1))),128)),!e.value.tags||e.value.tags.length===0?(s(),n("span",Cn,"No tags")):h("",!0)])])]),t("div",Sn,[t("div",Tn,[C[34]||(C[34]=t("h5",{class:"text-lg font-semibold text-gray-800"},"Notes",-1)),p(X,{onClick:U,class:"bg-indigo-600 hover:bg-indigo-700 transition-colors"},{default:w(()=>C[33]||(C[33]=[T(" Add Note ",-1)])),_:1,__:[33]})]),e.value.notes&&e.value.notes.length>0?(s(),n("div",In,[(s(!0),n(K,null,Y(e.value.notes,R=>(s(),n("div",{key:R.id,class:"p-3 bg-gray-50 rounded-md"},[t("p",jn,j(R.content),1),t("p",An," By "+j(R.creator_name||"Unknown")+" on "+j(new Date(R.created_at).toLocaleDateString()),1)]))),128))])):(s(),n("div",Dn,"No notes for this task yet."))]),t("div",Mn,[C[35]||(C[35]=t("h5",{class:"text-lg font-semibold text-gray-800 border-b pb-2 mb-4"},"History",-1)),p(Sl,{activities:S.value,loading:$.value},null,8,["activities","loading"])])])):(s(),n("div",Pn," Select a task to view details. ")),e.value&&e.value.status!=="Done"?(s(),n("div",En,[p(Re,{onClick:F,disabled:e.value.status!=="To Do"},{default:w(()=>C[36]||(C[36]=[T(" Delete Task ",-1)])),_:1,__:[36]},8,["disabled"]),e.value.status!=="To Do"?(s(),n("p",Vn,"Task can only be deleted in 'To Do' status.")):h("",!0)])):h("",!0),p(gl,{show:M.value,"task-for-note":e.value,onClose:C[10]||(C[10]=R=>M.value=!1),onNoteAdded:z},null,8,["show","task-for-note"]),p(Le,{show:ke.value,onClose:C[13]||(C[13]=R=>ke.value=!1)},{default:w(()=>[t("div",Nn,[C[40]||(C[40]=t("h2",{class:"text-lg font-medium text-gray-900 mb-4"}," Block Task ",-1)),t("div",Un,[C[37]||(C[37]=t("p",{class:"text-sm text-gray-600 mb-2"}," Please provide a reason for blocking this task: ",-1)),Z(t("textarea",{"onUpdate:modelValue":C[11]||(C[11]=R=>he.value=R),class:"w-full rounded-md shadow-sm border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",rows:"3",placeholder:"Enter reason for blocking..."},null,512),[[le,he.value]])]),t("div",Bn,[p(Ie,{onClick:C[12]||(C[12]=R=>ke.value=!1)},{default:w(()=>C[38]||(C[38]=[T(" Cancel ",-1)])),_:1,__:[38]}),p(X,{onClick:ut,disabled:!he.value.trim(),class:"bg-red-600 hover:bg-red-700"},{default:w(()=>C[39]||(C[39]=[T(" Block Task ",-1)])),_:1,__:[39]},8,["disabled"])])])]),_:1},8,["show"])])}}},Rn={key:1,class:"p-4 text-gray-500"},zn={key:0,class:"flex justify-end space-x-3"},Fn={__name:"TaskSidebar",emits:["taskUpdated","taskDeleted"],setup(a){const l=I(null);return(r,d)=>(s(),P(et,{show:D(ue).show,"onUpdate:show":D(Ne),title:D(ue).taskId?"Task Details":"Details",initialWidth:50},{content:w(()=>[D(ue).taskId?(s(),P(Ln,{key:0,"task-id":D(ue).taskId,"project-id":D(ue).projectId,"project-users":D(ue).projectUsers,ref_key:"taskDetailSidebarRef",ref:l,onClose:D(Ne),onTaskUpdated:d[0]||(d[0]=e=>{r.$emit("taskUpdated",e)}),onTaskDeleted:d[1]||(d[1]=e=>{r.$emit("taskDeleted",e),D(Ne)()})},null,8,["task-id","project-id","project-users","onClose"])):D(ue).show?(s(),n("div",Rn," No task selected or task ID is missing. ")):h("",!0)]),footer:w(()=>[D(ue).taskId?(s(),n("div",zn,[l.value&&l.value.task&&l.value.task.status!=="In Progress"&&l.value.task.status!=="Done"?(s(),P(Ie,{key:0,onClick:l.value.startTask,class:"bg-blue-50 text-blue-700 hover:bg-blue-100"},{default:w(()=>d[2]||(d[2]=[T(" Start Task ",-1)])),_:1,__:[2]},8,["onClick"])):h("",!0),l.value&&l.value.task&&l.value.task.status==="In Progress"?(s(),P(Ie,{key:1,onClick:l.value.completeTask,class:"bg-green-50 text-green-700 hover:bg-green-100"},{default:w(()=>d[3]||(d[3]=[T(" Complete Task ",-1)])),_:1,__:[3]},8,["onClick"])):h("",!0),l.value&&l.value.task?(s(),P(Re,{key:2,onClick:l.value.deleteTask,class:"bg-red-50 text-red-700 hover:bg-red-100"},{default:w(()=>d[4]||(d[4]=[T(" Delete Task ",-1)])),_:1,__:[4]},8,["onClick"])):h("",!0)])):h("",!0)]),_:1},8,["show","onUpdate:show","title"]))}},Wn={class:"flex h-screen overflow-hidden"},qn={class:"flex-1 flex flex-col overflow-hidden"},On={key:0,class:"bg-white shadow"},Hn={class:"mx-auto max-w-7xl px-4 py-6 sm:px-6 lg:px-8"},Kn={class:"flex-1 overflow-y-auto"},mr={__name:"AuthenticatedLayout",setup(a){const l=I(!1),r=I(!1),d=I(!1),e=I(!1),g=I([]),u=I(!0),v=B(()=>Ae().props.id||null),f=I(null),i=async()=>{const k=localStorage.getItem("authToken");if(k){window.axios.defaults.headers.common.Authorization=`Bearer ${k}`;try{await window.axios.get("/api/user")}catch(o){o.response&&o.response.status===401&&(console.log("Session expired, redirecting to login"),localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization,window.location.href="/login")}}else delete window.axios.defaults.headers.common.Authorization},_=()=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization},c=k=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization,window.location.href="/login"},b=async()=>{u.value=!0;try{const k=await window.axios.get("/api/projects-simplified");g.value=k.data}catch(k){console.error("Error fetching all projects for sidebar:",k),g.value=[]}finally{u.value=!1}},S=k=>{bt.visit(route("projects.show",k))},$=B(()=>Te.value.notifications.filter(k=>!k.isRead).length),y=k=>{console.log("Task updated globally.",k)},M=k=>{console.log("Task deleted globally.",k)};return me(()=>{i(),f.value&&yt(f.value),b(),ht()}),(k,o)=>(s(),n("div",Wn,[p(Gt,{ref_key:"standardNotificationContainerRef",ref:f},null,512),p(Bt,{"sidebar-is-open":D(Te).show},null,8,["sidebar-is-open"]),p(Is),p(wo,{"all-projects":g.value,"active-project-id":v.value,onProjectSelected:S},null,8,["all-projects","active-project-id"]),t("div",qn,[p(Qo,{"unread-notification-count":$.value,onOpenCreateTaskModal:o[0]||(o[0]=m=>r.value=!0),onOpenAddResource:o[1]||(o[1]=m=>d.value=!0),onOpenNotificationsSidebar:D(We),onOpenKudoModal:o[2]||(o[2]=m=>e.value=!0)},null,8,["unread-notification-count","onOpenNotificationsSidebar"]),p(rl,{"showing-navigation-dropdown":l.value,"unread-notification-count":$.value,onOpenCreateTaskModal:o[3]||(o[3]=m=>r.value=!0),onOpenAddResource:o[4]||(o[4]=m=>d.value=!0),onOpenNotificationsSidebar:D(We),onLogoutSuccess:_,onLogoutError:c},null,8,["showing-navigation-dropdown","unread-notification-count","onOpenNotificationsSidebar"]),k.$slots.header?(s(),n("header",On,[t("div",Hn,[re(k.$slots,"header")])])):h("",!0),t("main",Kn,[re(k.$slots,"default")]),p(ca,{show:r.value,onClose:o[5]||(o[5]=m=>r.value=!1),onSaved:o[6]||(o[6]=m=>r.value=!1)},null,8,["show"]),p(fa,{"api-endpoint":"/api/shareable-resources",show:d.value,onClose:o[7]||(o[7]=m=>d.value=!1)},null,8,["show"]),p(Oa,{show:e.value,onClose:o[8]||(o[8]=m=>e.value=!1),onSubmitted:o[9]||(o[9]=m=>e.value=!1)},null,8,["show"])]),p(Fn,{onTaskUpdated:y,onTaskDeleted:M}),p(Ra)]))}};export{Me as B,fa as C,Xe as T,mr as _,$s as a,cr as b,ur as c,Al as d,El as e,rr as f,Vl as g,Pl as h,Dl as i,Ul as j,Ll as k,He as l,Gs as m,gl as n,ir as o,Il as p,ca as q,jl as r,Tl as s,dr as t,Ml as u};
