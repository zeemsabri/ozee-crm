import{c as x,Q as ie,u as ue,r as g,B as me,o as ve,b as n,d,e as a,f as Y,h as pe,w as f,g as s,t as u,i as k,j as w,q as j,F as U,k as M,v as $,p as G}from"./app-U1HYzxwv.js";import{_ as ce}from"./AuthenticatedLayout-Cty4jfmy.js";import{P as R}from"./PrimaryButton-D_bsf8_I.js";import{D as ge}from"./DangerButton-xqS5zZ0W.js";import{_ as F}from"./Modal-BlfLRqGm.js";import{_}from"./InputLabel-DWiWZ5MK.js";import{_ as h}from"./TextInput-B-lyUlZ8.js";import{_ as b}from"./InputError-Bd6E7bNX.js";import{_ as L}from"./SecondaryButton-l6dahQhg.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./SelectDropdown-bdiuKYah.js";import"./Checkbox-B50ovmzG.js";import"./ApplicationLogo-zdUJEYJM.js";import"./moment-BLMuvzoS.js";const fe={class:"py-6 sm:py-12"},_e={class:"px-4 sm:px-6 lg:px-8"},we={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},ye={class:"bg-white rounded-lg shadow p-6 flex items-center justify-between"},xe={class:"text-3xl font-bold text-gray-900 mt-1"},be={class:"bg-white rounded-lg shadow p-6 flex items-center justify-between"},he={class:"text-3xl font-bold text-gray-900 mt-1"},ke={class:"bg-white rounded-lg shadow p-6 flex items-center justify-between"},Ce={class:"text-3xl font-bold text-gray-900 mt-1"},Ue={class:"bg-white rounded-lg shadow p-6 flex items-center justify-between"},Ve={class:"text-3xl font-bold text-gray-900 mt-1"},je={class:"bg-white rounded-lg shadow overflow-hidden"},Me={class:"p-6"},$e={class:"flex flex-col sm:flex-row justify-between items-center mb-6"},He={key:0,class:"mt-4 sm:mt-0"},Pe={class:"mb-6 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"},Se={class:"col-span-1 lg:col-span-2"},ze=["value"],Be=["value"],Ee={key:0,class:"text-center p-8"},Ae={key:1,class:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded",role:"alert"},Ne={key:2,class:"text-center p-8"},qe={key:3},De={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"},Re={class:"flex items-center space-x-4 mb-4"},Fe={class:"flex-shrink-0"},Le={class:"h-10 w-10 bg-indigo-500 rounded-full flex items-center justify-center text-white font-bold"},Oe={class:"text-lg font-semibold text-gray-900"},Qe={class:"text-sm text-gray-500"},Ye={class:"text-sm mb-4 flex space-x-4"},Ge={class:"capitalize"},Je={class:"capitalize"},Ke={class:"text-sm text-gray-600"},We={class:"font-medium text-gray-800 inline"},Xe={class:"font-normal"},Ze={class:"group relative inline-block ml-1"},Te={key:0,class:"absolute z-10 bottom-full left-0 mb-2 w-full p-2 bg-gray-800 text-white text-xs rounded-md shadow-lg opacity-0 group-hover:opacity-100 transition-opacity"},Ie={class:"list-none p-0 m-0"},es={class:"absolute top-4 right-4 flex space-x-2"},ss=["onClick"],ls=["onClick"],os={class:"p-6"},ts={key:0,class:"text-red-600 text-sm mb-4"},as={class:"mb-4"},rs={class:"mb-4"},ns={class:"mb-4"},ds={class:"mb-4"},is={class:"mb-4"},us=["value","disabled"],ms={class:"mb-4"},vs={class:"mt-6 flex justify-end"},ps={class:"p-6"},cs={key:0,class:"text-red-600 text-sm mb-4"},gs={class:"mb-4"},fs={class:"mb-4"},_s={class:"mb-4"},ws={class:"mb-4"},ys={class:"mb-4"},xs=["disabled"],bs=["value","disabled"],hs={class:"mb-4"},ks={class:"mt-6 flex justify-end"},Cs={class:"p-6"},Us={key:0,class:"mt-4 text-gray-800"},Vs={key:1,class:"text-red-600 text-sm mb-4"},js={class:"mt-6 flex justify-end"},Os={__name:"Index",setup(Ms){const v=x(()=>ie().props.auth.user),{canDo:J}=ue(),c=g([]),q=g(!0),r=g({}),i=g(""),z=g(""),B=g(""),E=g(""),H=g(!1),P=g(!1),S=g(!1),t=me({id:null,name:"",email:"",password:"",password_confirmation:"",role:"contractor",role_id:4,user_type:"contractor"}),y=g(null),p=g([]),K=x(()=>{const o=c.value.flatMap(l=>l.projects||[]);return[...new Set(o.map(l=>l.id))].map(l=>{const m=o.find(C=>C.id===l);return{value:m.id,label:m.name}})}),W=x(()=>c.value.length),X=x(()=>c.value.filter(o=>{var e;return((e=o.role_data)==null?void 0:e.slug)==="manager"||o.role==="manager"||o.role==="manager-role"||o.role==="manager_role"}).length),Z=x(()=>c.value.filter(o=>{var e;return((e=o.role_data)==null?void 0:e.slug)==="employee"||o.role==="employee"}).length),T=x(()=>c.value.filter(o=>{var e;return((e=o.role_data)==null?void 0:e.slug)==="contractor"||o.role==="contractor"}).length),O=x(()=>{let o=c.value;if(B.value&&(o=o.filter(e=>{var m,C;return(((m=e.role_data)==null?void 0:m.id)||((C=p.value.find(A=>A.slug===e.role))==null?void 0:C.value))===B.value})),E.value&&(o=o.filter(e=>e.projects&&e.projects.some(l=>l.id===E.value))),z.value){const e=z.value.toLowerCase();o=o.filter(l=>l.name.toLowerCase().includes(e)||l.email.toLowerCase().includes(e))}return o}),I=async()=>{try{const o=await window.axios.get("/api/roles?type=application");p.value=o.data.map(e=>({value:e.id,slug:e.slug.replace(/-/g,"_"),label:e.name}))}catch(o){console.error("Error fetching roles:",o),p.value=[{value:1,slug:"super_admin",label:"Super Admin"},{value:2,slug:"manager",label:"Manager"},{value:3,slug:"employee",label:"Employee"},{value:4,slug:"contractor",label:"Contractor"}]}},V=x(()=>{var o;return v.value?((o=v.value.role_data)==null?void 0:o.slug)==="super-admin"||v.value.role==="super_admin"||v.value.role==="super-admin":!1}),ee=x(()=>{var o;return v.value?((o=v.value.role_data)==null?void 0:o.slug)==="manager"||v.value.role==="manager"||v.value.role==="manager-role"||v.value.role==="manager_role":!1});x(()=>V.value);const se=J("create_users"),D=async()=>{q.value=!0,i.value="";try{const o=await window.axios.get("/api/users");c.value=o.data}catch(o){i.value="Failed to fetch users.",console.error("Error fetching users:",o),o.response&&o.response.status===403?i.value="You do not have permission to view users.":o.response&&o.response.status===401&&(i.value="Session expired. Please log in again.",localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),window.location.href="/login")}finally{q.value=!1}},le=()=>{t.id=null,t.name="",t.email="",t.password="",t.password_confirmation="";const o=p.value.find(e=>e.slug==="contractor");t.role_id=(o==null?void 0:o.value)||(p.value.length>0?p.value[0].value:4),t.role=(o==null?void 0:o.slug)||"contractor",t.user_type="contractor",r.value={},i.value="",H.value=!0},oe=async()=>{r.value={},i.value="";try{const o=await window.axios.post("/api/users",t);c.value.push(o.data),H.value=!1,console.log("User created successfully!"),D()}catch(o){o.response&&o.response.status===422?r.value=o.response.data.errors:o.response&&o.response.data.message?i.value=o.response.data.message:(i.value="Failed to create user.",console.error("Error creating user:",o))}},te=o=>{if(t.id=o.id,t.name=o.name,t.email=o.email,o.role_data&&o.role_data.id)t.role_id=o.role_data.id,t.role=o.role_data.slug.replace(/-/g,"_");else{const e=typeof o.role=="string"?o.role.replace(/-/g,"_"):"employee",l=p.value.find(m=>m.slug===e);t.role_id=(l==null?void 0:l.value)||(p.value.length>0?p.value[0].value:null),t.role=e}t.user_type=o.user_type||"employee",t.password="",t.password_confirmation="",r.value={},i.value="",P.value=!0},ae=async()=>{r.value={},i.value="";try{const o={...t};o.password||(delete o.password,delete o.password_confirmation);const e=await window.axios.put(`/api/users/${t.id}`,o),l=c.value.findIndex(m=>m.id===t.id);l!==-1&&(c.value[l]=e.data),P.value=!1,console.log("User updated successfully!"),D()}catch(o){o.response&&o.response.status===422?r.value=o.response.data.errors:o.response&&o.response.data.message?i.value=o.response.data.message:(i.value="Failed to update user.",console.error("Error updating user:",o))}},re=o=>{y.value=o,S.value=!0},ne=async()=>{i.value="";try{await window.axios.delete(`/api/users/${y.value.id}`),c.value=c.value.filter(o=>o.id!==y.value.id),S.value=!1,y.value=null,console.log("User deleted successfully!")}catch(o){i.value="Failed to delete user.",o.response&&o.response.data.message&&(i.value=o.response.data.message),console.error("Error deleting user:",o)}},Q=()=>{const o=p.value.find(e=>e.value===t.role_id);o&&(t.role=o.slug)},de=o=>{if(!o||o.length===0)return"None";const e=o.map(m=>m.name);if(e.length<=2)return e.join(", ");const l=e.length-2;return`${e[0]}, ${e[1]} and ${l} more`};return ve(()=>{D(),I()}),(o,e)=>(d(),n(U,null,[a(Y(pe),{title:"Users"}),a(ce,null,{header:f(()=>e[21]||(e[21]=[s("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Users",-1)])),default:f(()=>[s("div",fe,[s("div",_e,[s("div",we,[s("div",ye,[s("div",null,[e[22]||(e[22]=s("h4",{class:"text-gray-500 font-medium"},"Total Users",-1)),s("p",xe,u(W.value),1)]),e[23]||(e[23]=s("svg",{class:"h-10 w-10 text-indigo-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M12 4.354a4 4 0 100 5.292m7 12.247A8.998 8.998 0 0112 21c-2.404 0-4.639-.906-6.364-2.482M12 21a8.998 8.998 0 006.364-2.482M12 21a8.998 8.998 0 01-6.364-2.482m-4.062-8.083A8.998 8.998 0 0112 12a8.998 8.998 0 018.126 4.917m-16.252 0C3.766 12.391 7.29 9 12 9s8.234 3.391 8.126 8.917"})],-1))]),s("div",be,[s("div",null,[e[24]||(e[24]=s("h4",{class:"text-gray-500 font-medium"},"Managers",-1)),s("p",he,u(X.value),1)]),e[25]||(e[25]=s("svg",{class:"h-10 w-10 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h-6a1 1 0 01-1-1v-4a1 1 0 011-1h6a1 1 0 011 1v4a1 1 0 01-1 1zm0 0l2 2m-2-2l-2 2"}),s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 9a2 2 0 11-4 0 2 2 0 014 0zm0 0a2 2 0 10-4 0m8 0a2 2 0 11-4 0 2 2 0 014 0zm0 0a2 2 0 10-4 0m-4 12v-1a4 4 0 014-4h4a4 4 0 014 4v1"})],-1))]),s("div",ke,[s("div",null,[e[26]||(e[26]=s("h4",{class:"text-gray-500 font-medium"},"Employees",-1)),s("p",Ce,u(Z.value),1)]),e[27]||(e[27]=s("svg",{class:"h-10 w-10 text-yellow-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 13.5a2.25 2.25 0 00-2.25-2.25H15m0-1.5v3.75m0-3.75a3.75 3.75 0 00-3.75-3.75H8.25m0 0a3.75 3.75 0 013.75 3.75M8.25 9.75v3.75m-4.5 0a3.75 3.75 0 013.75-3.75H12a3.75 3.75 0 013.75 3.75m-4.5 0h4.5m-4.5 0a3.75 3.75 0 01-3.75-3.75H8.25m-3.75 3.75H4.5M12 18a2.25 2.25 0 002.25-2.25V15m0 0h3.75m-3.75 0v3.75m0-3.75a2.25 2.25 0 00-2.25-2.25H9.75m-3.75 2.25H6m0 0a2.25 2.25 0 00-2.25-2.25h-1.5m3.75 2.25v3.75m0 0h-1.5M6 21a2.25 2.25 0 00-2.25-2.25H3.75a2.25 2.25 0 00-2.25 2.25v1.5m1.5-1.5h1.5M6 21v1.5"})],-1))]),s("div",Ue,[s("div",null,[e[28]||(e[28]=s("h4",{class:"text-gray-500 font-medium"},"Contractors",-1)),s("p",Ve,u(T.value),1)]),e[29]||(e[29]=s("svg",{class:"h-10 w-10 text-pink-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14 0a2 2 0 012 2v2a2 2 0 01-2 2m-4-2H8m4 0h.01M17 11v-4a2 2 0 00-2-2m2 5v2m-4-2h-.01M3 20.25a2.25 2.25 0 01-2.25-2.25V8.25a2.25 2.25 0 012.25-2.25H18.75A2.25 2.25 0 0121 8.25v9.75a2.25 2.25 0 01-2.25 2.25H3.75z"})],-1))])]),s("div",je,[s("div",Me,[s("div",$e,[e[31]||(e[31]=s("h3",{class:"text-2xl font-bold text-gray-900"},"Manage Users",-1)),Y(se)?(d(),n("div",He,[a(R,{onClick:le},{default:f(()=>e[30]||(e[30]=[w(" Create New User ",-1)])),_:1,__:[30]})])):k("",!0)]),s("div",Pe,[s("div",Se,[a(h,{id:"search",type:"text",class:"w-full",placeholder:"Search by name or email...",modelValue:z.value,"onUpdate:modelValue":e[0]||(e[0]=l=>z.value=l)},null,8,["modelValue"])]),j(s("select",{"onUpdate:modelValue":e[1]||(e[1]=l=>B.value=l),class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm w-full"},[e[32]||(e[32]=s("option",{value:""},"All Roles",-1)),(d(!0),n(U,null,M(p.value,l=>(d(),n("option",{key:l.value,value:l.value},u(l.label),9,ze))),128))],512),[[$,B.value]]),j(s("select",{"onUpdate:modelValue":e[2]||(e[2]=l=>E.value=l),class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm w-full"},[e[33]||(e[33]=s("option",{value:""},"All Projects",-1)),(d(!0),n(U,null,M(K.value,l=>(d(),n("option",{key:l.value,value:l.value},u(l.label),9,Be))),128))],512),[[$,E.value]])]),q.value?(d(),n("div",Ee,e[34]||(e[34]=[s("p",{class:"text-gray-600"},"Loading users...",-1)]))):i.value?(d(),n("div",Ae,[s("p",null,u(i.value),1)])):O.value.length===0?(d(),n("div",Ne,e[35]||(e[35]=[s("p",{class:"text-gray-600"},"No users found matching your criteria.",-1)]))):(d(),n("div",qe,[s("div",De,[(d(!0),n(U,null,M(O.value,l=>{var m,C,A;return d(),n("div",{key:l.id,class:"bg-gray-50 rounded-lg shadow-sm p-6 flex flex-col justify-between relative overflow-hidden"},[s("div",null,[s("div",Re,[s("div",Fe,[s("div",Le,u(l.name.charAt(0)),1)]),s("div",null,[s("p",Oe,u(l.name),1),s("p",Qe,u(l.email),1)])]),s("div",Ye,[s("p",null,[e[36]||(e[36]=s("span",{class:"font-medium text-gray-800"},"Role:",-1)),e[37]||(e[37]=w()),s("span",Ge,u(((m=l.role_data)==null?void 0:m.name)||(typeof l.role=="string"?l.role.replace(/_|-/g," "):"Employee")),1)]),s("p",null,[e[38]||(e[38]=s("span",{class:"font-medium text-gray-800"},"Type:",-1)),e[39]||(e[39]=w()),s("span",Je,u(l.user_type||"Employee"),1)])]),s("div",Ke,[s("p",We,[e[40]||(e[40]=w("Projects: ",-1)),s("span",Xe,u(de(l.projects)),1)]),s("div",Ze,[l.projects&&l.projects.length>2?(d(),n("div",Te,[s("ul",Ie,[(d(!0),n(U,null,M(l.projects,N=>(d(),n("li",{key:N.id,class:"whitespace-nowrap"},u(N.name),1))),128))]),e[41]||(e[41]=s("div",{class:"absolute w-3 h-3 bg-gray-800 transform rotate-45 -bottom-1 left-4"},null,-1))])):k("",!0)])])]),s("div",es,[V.value||ee.value&&(((C=l.role_data)==null?void 0:C.slug)==="employee"||((A=l.role_data)==null?void 0:A.slug)==="contractor"||typeof l.role=="string"&&(l.role.replace(/-/g,"_")==="employee"||l.role.replace(/-/g,"_")==="contractor"))||v.value.id===l.id?(d(),n("button",{key:0,onClick:N=>te(l),class:"p-1 rounded-full text-gray-400 hover:text-indigo-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",title:"Edit User"},e[42]||(e[42]=[s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[s("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.794.793-2.828-2.828.794-.793zm-5.646 12.016v.538h.538l8.53-8.529-1.39-1.389-8.53 8.529z"})],-1)]),8,ss)):k("",!0),V.value&&l.id!==v.value.id?(d(),n("button",{key:1,onClick:N=>re(l),class:"p-1 rounded-full text-gray-400 hover:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2",title:"Delete User"},e[43]||(e[43]=[s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[s("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)]),8,ls)):k("",!0)])])}),128))])]))])])])]),a(F,{show:H.value,onClose:e[10]||(e[10]=l=>H.value=!1)},{default:f(()=>[s("div",os,[e[47]||(e[47]=s("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Create New User",-1)),i.value?(d(),n("div",ts,u(i.value),1)):k("",!0),s("form",{onSubmit:G(oe,["prevent"])},[s("div",as,[a(_,{for:"create_name",value:"Name"}),a(h,{id:"create_name",type:"text",class:"mt-1 block w-full",modelValue:t.name,"onUpdate:modelValue":e[3]||(e[3]=l=>t.name=l),required:"",autofocus:""},null,8,["modelValue"]),a(b,{message:r.value.name?r.value.name[0]:"",class:"mt-2"},null,8,["message"])]),s("div",rs,[a(_,{for:"create_email",value:"Email"}),a(h,{id:"create_email",type:"email",class:"mt-1 block w-full",modelValue:t.email,"onUpdate:modelValue":e[4]||(e[4]=l=>t.email=l),required:""},null,8,["modelValue"]),a(b,{message:r.value.email?r.value.email[0]:"",class:"mt-2"},null,8,["message"])]),s("div",ns,[a(_,{for:"create_password",value:"Password"}),a(h,{id:"create_password",type:"password",class:"mt-1 block w-full",modelValue:t.password,"onUpdate:modelValue":e[5]||(e[5]=l=>t.password=l),required:"",autocomplete:"new-password"},null,8,["modelValue"]),a(b,{message:r.value.password?r.value.password[0]:"",class:"mt-2"},null,8,["message"])]),s("div",ds,[a(_,{for:"create_password_confirmation",value:"Confirm Password"}),a(h,{id:"create_password_confirmation",type:"password",class:"mt-1 block w-full",modelValue:t.password_confirmation,"onUpdate:modelValue":e[6]||(e[6]=l=>t.password_confirmation=l),required:"",autocomplete:"new-password"},null,8,["modelValue"])]),s("div",is,[a(_,{for:"create_role",value:"Role"}),j(s("select",{id:"create_role",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full","onUpdate:modelValue":e[7]||(e[7]=l=>t.role_id=l),onChange:Q},[(d(!0),n(U,null,M(p.value,l=>(d(),n("option",{key:l.value,value:l.value,disabled:!V.value&&(l.slug==="super_admin"||l.slug==="manager")},u(l.label),9,us))),128))],544),[[$,t.role_id]]),a(b,{message:r.value.role_id?r.value.role_id[0]:r.value.role?r.value.role[0]:"",class:"mt-2"},null,8,["message"])]),s("div",ms,[a(_,{for:"create_user_type",value:"User Type"}),j(s("select",{id:"create_user_type",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full","onUpdate:modelValue":e[8]||(e[8]=l=>t.user_type=l)},e[44]||(e[44]=[s("option",{value:"employee"},"Employee",-1),s("option",{value:"contractor"},"Contractor",-1)]),512),[[$,t.user_type]]),a(b,{message:r.value.user_type?r.value.user_type[0]:"",class:"mt-2"},null,8,["message"])]),s("div",vs,[a(L,{onClick:e[9]||(e[9]=l=>H.value=!1)},{default:f(()=>e[45]||(e[45]=[w("Cancel",-1)])),_:1,__:[45]}),a(R,{class:"ms-3",type:"submit"},{default:f(()=>e[46]||(e[46]=[w("Create User",-1)])),_:1,__:[46]})])],32)])]),_:1},8,["show"]),a(F,{show:P.value,onClose:e[18]||(e[18]=l=>P.value=!1)},{default:f(()=>[s("div",ps,[e[51]||(e[51]=s("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Edit User",-1)),i.value?(d(),n("div",cs,u(i.value),1)):k("",!0),s("form",{onSubmit:G(ae,["prevent"])},[s("div",gs,[a(_,{for:"edit_name",value:"Name"}),a(h,{id:"edit_name",type:"text",class:"mt-1 block w-full",modelValue:t.name,"onUpdate:modelValue":e[11]||(e[11]=l=>t.name=l),required:"",autofocus:""},null,8,["modelValue"]),a(b,{message:r.value.name?r.value.name[0]:"",class:"mt-2"},null,8,["message"])]),s("div",fs,[a(_,{for:"edit_email",value:"Email"}),a(h,{id:"edit_email",type:"email",class:"mt-1 block w-full",modelValue:t.email,"onUpdate:modelValue":e[12]||(e[12]=l=>t.email=l),required:""},null,8,["modelValue"]),a(b,{message:r.value.email?r.value.email[0]:"",class:"mt-2"},null,8,["message"])]),s("div",_s,[a(_,{for:"edit_password",value:"Password (leave blank to keep current)"}),a(h,{id:"edit_password",type:"password",class:"mt-1 block w-full",modelValue:t.password,"onUpdate:modelValue":e[13]||(e[13]=l=>t.password=l),autocomplete:"new-password"},null,8,["modelValue"]),a(b,{message:r.value.password?r.value.password[0]:"",class:"mt-2"},null,8,["message"])]),s("div",ws,[a(_,{for:"edit_password_confirmation",value:"Confirm Password"}),a(h,{id:"edit_password_confirmation",type:"password",class:"mt-1 block w-full",modelValue:t.password_confirmation,"onUpdate:modelValue":e[14]||(e[14]=l=>t.password_confirmation=l),autocomplete:"new-password"},null,8,["modelValue"])]),s("div",ys,[a(_,{for:"edit_role",value:"Role"}),j(s("select",{id:"edit_role",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full","onUpdate:modelValue":e[15]||(e[15]=l=>t.role_id=l),onChange:Q,disabled:!V.value&&t.id===v.value.id},[(d(!0),n(U,null,M(p.value,l=>(d(),n("option",{key:l.value,value:l.value,disabled:!V.value&&(l.slug==="super_admin"||l.slug==="manager")&&t.id!==v.value.id},u(l.label),9,bs))),128))],40,xs),[[$,t.role_id]]),a(b,{message:r.value.role_id?r.value.role_id[0]:r.value.role?r.value.role[0]:"",class:"mt-2"},null,8,["message"])]),s("div",hs,[a(_,{for:"edit_user_type",value:"User Type"}),j(s("select",{id:"edit_user_type",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full","onUpdate:modelValue":e[16]||(e[16]=l=>t.user_type=l)},e[48]||(e[48]=[s("option",{value:"employee"},"Employee",-1),s("option",{value:"contractor"},"Contractor",-1)]),512),[[$,t.user_type]]),a(b,{message:r.value.user_type?r.value.user_type[0]:"",class:"mt-2"},null,8,["message"])]),s("div",ks,[a(L,{onClick:e[17]||(e[17]=l=>P.value=!1)},{default:f(()=>e[49]||(e[49]=[w("Cancel",-1)])),_:1,__:[49]}),a(R,{class:"ms-3",type:"submit"},{default:f(()=>e[50]||(e[50]=[w("Update User",-1)])),_:1,__:[50]})])],32)])]),_:1},8,["show"]),a(F,{show:S.value,onClose:e[20]||(e[20]=l=>S.value=!1)},{default:f(()=>{var l;return[s("div",Cs,[e[55]||(e[55]=s("h2",{class:"text-lg font-medium text-gray-900"}," Are you sure you want to delete this user? ",-1)),e[56]||(e[56]=s("p",{class:"mt-1 text-sm text-gray-600"}," This action cannot be undone. All data associated with this user will be removed. ",-1)),y.value?(d(),n("div",Us,[e[52]||(e[52]=s("strong",null,"User:",-1)),w(" "+u(y.value.name)+" ("+u(y.value.email)+") - Role: "+u(((l=y.value.role_data)==null?void 0:l.name)||(typeof y.value.role=="string"?y.value.role:"Employee")),1)])):k("",!0),i.value?(d(),n("div",Vs,u(i.value),1)):k("",!0),s("div",js,[a(L,{onClick:e[19]||(e[19]=m=>S.value=!1)},{default:f(()=>e[53]||(e[53]=[w("Cancel",-1)])),_:1,__:[53]}),a(ge,{class:"ms-3",onClick:ne},{default:f(()=>e[54]||(e[54]=[w("Delete User",-1)])),_:1,__:[54]})])])]}),_:1},8,["show"])]),_:1})],64))}};export{Os as default};
