import{r as M,l as K,Q as Ke,b as be,d as et,c as i,k as x,o as a,F as Z,i as oe,a as e,t as S,u as N,R as Gt,S as ia,U as jt,V as Pt,n as q,s as fe,m as ne,q as D,w as h,g as _,e as r,f as U,v as ie,G as We,W as Ze,p as Ge,z as Oe,y as Et,D as Te,H as qe,A as ct,N as De,M as ke,X as He,Y as At,L as Ae,B as we,Z as je,_ as na,$ as Vt,a0 as mt,E as tt,a1 as ra,a2 as ua,a3 as it,P as da,a4 as _e,a5 as nt,I as It,a6 as ca,a7 as ma,a8 as Tt,a9 as Mt,J as va}from"./app-DBy4gMm0.js";import{_ as ce}from"./PrimaryButton-BJ7HNQHV.js";import{_ as Pe}from"./Modal-BxM6YtRz.js";import{_ as O}from"./InputLabel-lP2I98ov.js";import{_ as X}from"./InputError-BYDmaKb3.js";import{_ as Ne}from"./SecondaryButton-CYN5Cc4x.js";import{r as pa}from"./index-4hqJnwuo.js";import{B as Ee}from"./BaseFormModal-Crw7w_Lx.js";import{_ as pe}from"./TextInput-B7DxLwZZ.js";import{S as ge}from"./SelectDropdown-BcA2DM2i.js";import{d as fa}from"./debounce-C-hnF4Z3.js";import{_ as at}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{R as Bt}from"./RightSidebar-DgbTjABD.js";import{A as ga}from"./ApplicationLogo-Bv9M7Niq.js";import{_ as Xe}from"./MultiSelectDropdown-BPAZ5prq.js";import{c as Je}from"./createLucideIcon-CTr2rqL2.js";import{P as rt}from"./plus-5uR-idN0.js";import{D as vt}from"./DangerButton-KjqYGeOm.js";import{h as ba}from"./moment-BLMuvzoS.js";import{g as ya,s as ha,p as xa,r as ka,u as wa,c as _a,a as Aa,d as Ta,b as Ma}from"./taskState-B9UIegvb.js";import{_ as $a,c as Ca}from"./NoticeboardModal-DVPy34cb.js";const Sa={key:0,class:"fixed bottom-4 right-4 z-50 flex flex-col items-end space-y-2"},Ga={key:0,class:"notification-list w-full max-w-xs space-y-2"},ja={class:"flex-1 min-w-0"},Pa={class:"flex items-start justify-between gap-2 mb-1"},Ea={class:"flex-1 min-w-0"},Va={key:0,class:"text-base font-semibold text-gray-800 truncate"},Ia={key:1,class:"text-xs text-gray-500"},Ba={key:0,class:"text-xs text-gray-600 mb-2"},Da={class:"flex items-center justify-between mt-2"},Na={key:0,class:"text-xs text-gray-500 font-medium"},Ua=["onClick"],La={key:1,class:"flex justify-end w-full max-w-xs"},za={key:0},Fa={key:1},Se="notification_minimized_state",Ra=3,Oa={__name:"PushNotificationContainer",props:{sidebarIsOpen:{type:Boolean,default:!1}},setup(b){const A=M(!1),m=M(null),s=M(0),t=M(null),p=K(()=>Ke.value.notifications.filter(l=>l.isNewPush).slice(0,Ra)),c=K(()=>{const l=Math.floor(s.value/60),u=s.value%60;return`${String(l).padStart(2,"0")}:${String(u).padStart(2,"0")}`}),y=l=>{if(!l)return null;const u=l.match(/\/task\/(\d+)/);return u?parseInt(u[1]):null},d=l=>{if(!l)return null;const u=l.match(/\/project\/(\d+)\//);return u?parseInt(u[1]):null},n=()=>{if(A.value=!A.value,clearTimeout(m.value),clearInterval(t.value),A.value){const l=Date.now()+3e5;localStorage.setItem(Se,JSON.stringify({isMinimized:!0,expiryTime:l})),m.value=setTimeout(()=>{A.value=!1,clearInterval(t.value),localStorage.removeItem(Se)},3e5),s.value=300,t.value=setInterval(()=>{s.value>0?s.value--:clearInterval(t.value)},1e3)}else localStorage.removeItem(Se)},o=async l=>{ia(l.id),await jt(l.view_id);const u=l.task_id||y(l.url),v=l.project_id||d(l.url);u&&v?Pt(u,v):(console.warn("Could not open task sidebar. Falling back to redirecting."),l.url&&(window.location.href=l.url))};return be(()=>{const l=localStorage.getItem(Se);if(l)try{const{isMinimized:u,expiryTime:v}=JSON.parse(l),$=Date.now(),g=v-$;g>0?(A.value=u,s.value=Math.floor(g/1e3),m.value=setTimeout(()=>{A.value=!1,clearInterval(t.value),localStorage.removeItem(Se)},g),t.value=setInterval(()=>{s.value>0?s.value--:clearInterval(t.value)},1e3)):localStorage.removeItem(Se)}catch(u){console.error("Error restoring notification minimized state:",u),localStorage.removeItem(Se)}}),et(()=>{clearTimeout(m.value),clearInterval(t.value)}),(l,u)=>b.sidebarIsOpen?x("",!0):(a(),i("div",Sa,[!A.value&&p.value.length>0?(a(),i("div",Ga,[(a(!0),i(Z,null,oe(p.value,v=>(a(),i("div",{key:v.id,class:"bg-white rounded-lg shadow-lg p-3 flex items-start space-x-3 border border-gray-200 transition-opacity duration-300 opacity-60 hover:opacity-100"},[e("div",ja,[e("div",Pa,[e("div",Ea,[v.title?(a(),i("h3",Va,S(v.title),1)):x("",!0),v.project_name?(a(),i("p",Ia,S(v.project_name),1)):x("",!0)])]),v.message?(a(),i("p",Ba,S(v.message),1)):x("",!0),e("div",Da,[v.due_date?(a(),i("div",Na," Due: "+S(N(Gt)(v.due_date)),1)):x("",!0),e("button",{onClick:$=>o(v),class:"px-2.5 py-1 bg-blue-600 text-white text-xs font-medium rounded-md hover:bg-blue-700 transition-colors duration-200 shadow"},S(v.button_label||"View"),9,Ua)])])]))),128))])):x("",!0),p.value.length>0?(a(),i("div",La,[e("button",{onClick:n,class:"bg-white/80 backdrop-blur-sm text-gray-600 hover:text-gray-900 text-xs font-bold py-1 px-3 rounded-full shadow-md transition-all duration-300"},[A.value?(a(),i("span",za,"Show ("+S(c.value)+")",1)):(a(),i("span",Fa,"Minimize"))])])):x("",!0)]))}},qa={class:"fixed top-4 right-4 z-[9999] flex flex-col items-end space-y-3"},Ha={class:"p-4"},Ka={class:"text-sm font-medium text-white"},Wa={key:0,class:"mt-3 flex gap-2"},Ja=["onClick"],Ya=["onClick"],Qa={__name:"StandardNotificationContainer",setup(b,{expose:A}){const m=M([]),s=(d,n="info",o=5e3)=>{let l;typeof d=="object"&&d!==null?l={...d}:l={message:d,type:n,duration:o};const u=l.id||crypto.randomUUID(),v={id:u,message:l.message||"",type:l.type||"info",duration:typeof l.duration=="number"?l.duration:5e3,sticky:!!l.sticky,confirm:l.confirm||null};return m.value.unshift(v),!v.sticky&&!v.confirm&&setTimeout(()=>{t(u)},v.duration),u},t=d=>{const n=m.value.findIndex(o=>o.id===d);n>-1&&m.value.splice(n,1)},p=d=>{const n=m.value.find(o=>o.id===d);if(n&&n.confirm&&typeof n.confirm.onConfirm=="function")try{n.confirm.onConfirm()}catch{}t(d)},c=d=>{const n=m.value.find(o=>o.id===d);if(n&&n.confirm&&typeof n.confirm.onCancel=="function")try{n.confirm.onCancel()}catch{}t(d)},y=d=>{switch(d){case"success":return"bg-green-500";case"error":return"bg-red-500";case"warning":return"bg-yellow-500";case"info":default:return"bg-blue-500"}};return A({addNotification:s}),(d,n)=>(a(),i("div",qa,[(a(!0),i(Z,null,oe(m.value,o=>(a(),i("div",{key:o.id,class:q(["w-full max-w-sm rounded-md shadow-lg pointer-events-auto overflow-hidden",y(o.type)])},[e("div",Ha,[e("p",Ka,S(o.message),1),o.confirm?(a(),i("div",Wa,[e("button",{class:"px-3 py-1 text-sm font-semibold rounded bg-white/90 text-slate-800 hover:bg-white",onClick:l=>p(o.id)},S(o.confirm.confirmText||"Confirm"),9,Ja),e("button",{class:"px-3 py-1 text-sm font-semibold rounded bg-transparent border border-white/70 text-white hover:bg-white/10",onClick:l=>c(o.id)},S(o.confirm.cancelText||"Cancel"),9,Ya)])):x("",!0)])],2))),128))]))}};var Qe={exports:{}},Za=Qe.exports,$t;function Xa(){return $t||($t=1,function(b,A){(function(s,t){b.exports=t(pa())})(Za,m=>(()=>{var s={113:(P,I)=>{Object.defineProperty(I,"__esModule",{value:!0}),I.default=(W,B)=>{const C=W.__vccOpts||W;for(const[Q,re]of B)C[Q]=re;return C}},594:P=>{P.exports=m}},t={};function p(P){var I=t[P];if(I!==void 0)return I.exports;var W=t[P]={exports:{}};return s[P](W,W.exports,p),W.exports}p.d=(P,I)=>{for(var W in I)p.o(I,W)&&!p.o(P,W)&&Object.defineProperty(P,W,{enumerable:!0,get:I[W]})},p.o=(P,I)=>Object.prototype.hasOwnProperty.call(P,I),p.r=P=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(P,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(P,"__esModule",{value:!0})};var c={};p.r(c),p.d(c,{ToastComponent:()=>j,ToastPlugin:()=>F,ToastPositions:()=>v,default:()=>H,useToast:()=>z});var y=p(594);const d=["innerHTML"];function n(P,I,W,B,C,Q){return(0,y.openBlock)(),(0,y.createBlock)(y.Transition,{"enter-active-class":P.transition.enter,"leave-active-class":P.transition.leave},{default:(0,y.withCtx)(()=>[(0,y.withDirectives)((0,y.createElementVNode)("div",{ref:"root",role:"alert",class:(0,y.normalizeClass)(["v-toast__item",[`v-toast__item--${P.type}`,`v-toast__item--${P.position}`]]),onMouseover:I[0]||(I[0]=re=>P.toggleTimer(!0)),onMouseleave:I[1]||(I[1]=re=>P.toggleTimer(!1)),onClick:I[2]||(I[2]=function(){return P.whenClicked&&P.whenClicked(...arguments)})},[I[3]||(I[3]=(0,y.createElementVNode)("div",{class:"v-toast__icon"},null,-1)),(0,y.createElementVNode)("p",{class:"v-toast__text",innerHTML:P.message},null,8,d)],34),[[y.vShow,P.isActive]])]),_:1},8,["enter-active-class","leave-active-class"])}function o(P){var I;typeof P.remove<"u"?P.remove():(I=P.parentNode)==null||I.removeChild(P)}function l(P,I,W){let B=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const C=(0,y.h)(P,I,B),Q=document.createElement("div");return Q.classList.add("v-toast--pending"),W.appendChild(Q),(0,y.render)(C,Q),C.component}class u{constructor(I,W){this.startedAt=Date.now(),this.callback=I,this.delay=W,this.timer=setTimeout(I,W)}pause(){this.stop(),this.delay-=Date.now()-this.startedAt}resume(){this.stop(),this.startedAt=Date.now(),this.timer=setTimeout(this.callback,this.delay)}stop(){clearTimeout(this.timer)}}const v=Object.freeze({TOP_RIGHT:"top-right",TOP:"top",TOP_LEFT:"top-left",BOTTOM_RIGHT:"bottom-right",BOTTOM:"bottom",BOTTOM_LEFT:"bottom-left"});function $(P){return{all:P=P||new Map,on:function(I,W){var B=P.get(I);B?B.push(W):P.set(I,[W])},off:function(I,W){var B=P.get(I);B&&(W?B.splice(B.indexOf(W)>>>0,1):P.set(I,[]))},emit:function(I,W){var B=P.get(I);B&&B.slice().map(function(C){C(W)}),(B=P.get("*"))&&B.slice().map(function(C){C(I,W)})}}}const V=$(),E=(0,y.defineComponent)({name:"Toast",props:{message:{type:String,required:!0},type:{type:String,default:"success"},position:{type:String,default:v.BOTTOM_RIGHT,validator(P){return Object.values(v).includes(P)}},duration:{type:Number,default:3e3},dismissible:{type:Boolean,default:!0},onDismiss:{type:Function,default:()=>{}},onClick:{type:Function,default:()=>{}},queue:Boolean,pauseOnHover:{type:Boolean,default:!0}},data(){return{isActive:!1,parentTop:null,parentBottom:null,isHovered:!1}},beforeMount(){this.setupContainer()},mounted(){this.showNotice(),V.on("toast-clear",this.dismiss)},methods:{setupContainer(){if(this.parentTop=document.querySelector(".v-toast.v-toast--top"),this.parentBottom=document.querySelector(".v-toast.v-toast--bottom"),this.parentTop&&this.parentBottom)return;this.parentTop||(this.parentTop=document.createElement("div"),this.parentTop.className="v-toast v-toast--top"),this.parentBottom||(this.parentBottom=document.createElement("div"),this.parentBottom.className="v-toast v-toast--bottom");const P=document.body;P.appendChild(this.parentTop),P.appendChild(this.parentBottom)},shouldQueue(){return this.queue?this.parentTop.childElementCount>0||this.parentBottom.childElementCount>0:!1},dismiss(){this.timer&&this.timer.stop(),clearTimeout(this.queueTimer),this.isActive=!1,setTimeout(()=>{this.onDismiss.apply(null,arguments);const P=this.$refs.root;(0,y.render)(null,P),o(P)},150)},showNotice(){if(this.shouldQueue()){this.queueTimer=setTimeout(this.showNotice,250);return}const P=this.$refs.root.parentElement;this.correctParent.insertAdjacentElement("afterbegin",this.$refs.root),o(P),this.isActive=!0,this.duration&&(this.timer=new u(this.dismiss,this.duration))},whenClicked(){this.dismissible&&(this.onClick.apply(null,arguments),this.dismiss())},toggleTimer(P){!this.pauseOnHover||!this.timer||(P?this.timer.pause():this.timer.resume())}},computed:{correctParent(){switch(this.position){case v.TOP:case v.TOP_RIGHT:case v.TOP_LEFT:return this.parentTop;case v.BOTTOM:case v.BOTTOM_RIGHT:case v.BOTTOM_LEFT:return this.parentBottom}},transition(){switch(this.position){case v.TOP:case v.TOP_RIGHT:case v.TOP_LEFT:return{enter:"v-toast--fade-in-down",leave:"v-toast--fade-out"};case v.BOTTOM:case v.BOTTOM_RIGHT:case v.BOTTOM_LEFT:return{enter:"v-toast--fade-in-up",leave:"v-toast--fade-out"}}}},beforeUnmount(){V.off("toast-clear",this.dismiss)}});var T=p(113);const j=(0,T.default)(E,[["render",n]]),z=function(){let P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{open(I){let W=null;typeof I=="string"&&(W=I);const C=Object.assign({},{message:W},P,I);return{dismiss:l(j,C,document.body).ctx.dismiss}},clear(){V.emit("toast-clear")},success(I){let W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.open(Object.assign({},{message:I,type:"success"},W))},error(I){let W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.open(Object.assign({},{message:I,type:"error"},W))},info(I){let W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.open(Object.assign({},{message:I,type:"info"},W))},warning(I){let W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.open(Object.assign({},{message:I,type:"warning"},W))},default(I){let W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.open(Object.assign({},{message:I,type:"default"},W))}}},F={install:function(P){let I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},W=z(I);P.config.globalProperties.$toast=W,P.provide("$toast",W)}},H=F;return c})())}(Qe)),Qe.exports}var el=Xa();const tl={class:"p-8"},al={class:"mt-2 text-sm text-gray-600"},ll={key:0,class:"mt-6 p-4 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 rounded-lg"},sl={class:"mt-4"},ol={class:"mt-6 grid grid-cols-1 lg:grid-cols-3 gap-6"},il={class:"lg:col-span-1 space-y-3"},nl=["onClick"],rl={class:"flex items-center justify-between"},ul={class:"flex items-center"},dl={class:"ml-2 text-sm text-gray-500"},cl={key:0},ml={key:1},vl={key:1,class:"text-xs text-gray-400"},pl={key:0,class:"lg:col-span-2 p-6 bg-gray-50 rounded-xl shadow-inner"},fl={class:"text-xl font-semibold text-gray-800 mb-4"},gl={class:"mb-4 text-sm text-right"},bl=["disabled"],yl={class:"flex items-center justify-between mb-6 p-4 rounded-lg bg-white shadow-sm border border-gray-200"},hl={class:"relative inline-flex items-center cursor-pointer"},xl=["checked"],kl={key:0},wl={class:"flex-1"},_l=["onUpdate:modelValue"],Al={class:"flex-1"},Tl=["onUpdate:modelValue"],Ml=["onClick"],$l={key:1},Cl={key:1,class:"lg:col-span-2 p-6 bg-gray-50 rounded-xl shadow-inner flex items-center justify-center"},Sl={class:"px-6 py-4 bg-gray-50 border-t flex justify-end gap-3"},Gl={key:0,class:"flex items-center"},jl={key:1},Pl={__name:"AvailabilityModal",props:{show:Boolean,userId:{type:Number,default:null}},emits:["close","availability-saved"],setup(b,{emit:A}){const m=()=>{const B=localStorage.getItem("authToken");B&&!fe.defaults.headers.common.Authorization&&(fe.defaults.headers.common.Authorization=`Bearer ${B}`)},s=b,t=A,p=el.useToast(),c=M({}),y=M({}),d=M(!1),n=M(null),o=M(""),l=M(!1),u=M([]),v=()=>{const B=[],C=new Date,Q=C.getDay(),re=Q===0?1:8-Q,ee=new Date(C);ee.setDate(C.getDate()+re);for(let le=0;le<7;le++){const J=new Date(ee);J.setDate(ee.getDate()+le);const se=J.toISOString().split("T")[0];B.push({value:se,label:J.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"}),day:J.toLocaleDateString("en-US",{weekday:"short"})})}return B},$=()=>{const B=[],C=new Date,Q=C.getDay(),re=new Date(C);re.setDate(C.getDate()-(Q===0?6:Q-1));for(let ee=0;ee<7;ee++){const le=new Date(re);le.setDate(re.getDate()+ee);const J=le.toISOString().split("T")[0];B.push({value:J,label:le.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"}),day:le.toLocaleDateString("en-US",{weekday:"short"})})}return B},g=()=>{l.value=!0,o.value="",u.value=$(),n.value=null,E()},V=()=>{l.value=!1,o.value="",u.value=v(),n.value=null,E()};be(()=>{m(),u.value=v(),E()});const E=async()=>{try{if(m(),u.value.length===0)return;const B=u.value[0].value,C=u.value[u.value.length-1].value,Q=await fe.get("/api/availabilities",{params:{start_date:B,end_date:C,user_id:s.userId}});if(Q.data&&Q.data.availabilities){const re={};u.value.forEach(ee=>{re[ee.value]={isSelected:!1,isAvailable:!0,reason:"",timeSlots:[{start_time:"",end_time:""}]}}),c.value=re,Q.data.availabilities.forEach(ee=>{const le=ee.date.split("T")[0];c.value[le]&&(c.value[le].isAvailable=ee.is_available,ee.is_available?c.value[le].timeSlots=ee.time_slots&&ee.time_slots.length>0?[...ee.time_slots]:[{start_time:"",end_time:""}]:c.value[le].reason=ee.reason||"")})}}catch(B){console.error("Error fetching existing availabilities:",B)}};ne(()=>s.show,async B=>{if(B){y.value={},o.value="";try{m();const{data:C}=await fe.get("/api/availability-prompt");!(C.all_current_weekdays_covered??!0)?(l.value=!0,u.value=$()):(l.value=!1,u.value=v())}catch{l.value=!1,u.value=v()}await E(),n.value=null}else n.value=null},{immediate:!0});const T=K(()=>c.value[n.value]||{isSelected:!1,isAvailable:!0,reason:"",timeSlots:[{start_time:"",end_time:""}]}),k=K(()=>Object.values(c.value).some(B=>B.isSelected)),j=K(()=>{const B=c.value[n.value];return B?B.isAvailable?B.timeSlots.some(C=>C.start_time&&C.end_time):B.reason.trim().split(/\s+/).filter(Boolean).length>=2:!1}),z=B=>{n.value=B},F=()=>{var C;const B=(C=c.value[n.value])==null?void 0:C.timeSlots;B&&(B.push({start_time:"",end_time:""}),c.value[n.value].isSelected=!0)},H=B=>{var Q;const C=(Q=c.value[n.value])==null?void 0:Q.timeSlots;C&&C.length>1&&(C.splice(B,1),c.value[n.value].isSelected=!0)},P=B=>{c.value[n.value]&&(c.value[n.value].isAvailable=B,c.value[n.value].isSelected=!0,B?c.value[n.value].reason="":c.value[n.value].timeSlots=[{start_time:"",end_time:""}])},I=()=>{const B=c.value[n.value];if(B){if(!j.value){B.isAvailable?y.value[n.value]={timeSlots:"Please fill in at least one time slot before applying to all days."}:y.value[n.value]={reason:"Reason must be at least 2 words to apply to all days."};return}delete y.value[n.value];for(const C of u.value){const Q=C.value;c.value[Q]=JSON.parse(JSON.stringify(B)),c.value[Q].isSelected=!0}p.success("Availability applied to all days!")}},W=async()=>{if(d.value=!0,y.value={},l.value&&!o.value.trim()){y.value.lateReason="Please provide a reason for this late submission.",d.value=!1;return}const B=[];let C=!1;for(const Q of u.value){const re=Q.value,ee=c.value[re];let le={};if(ee.isSelected){if(ee.isAvailable)if(ee.timeSlots.some(J=>!J.start_time||!J.end_time))le.timeSlots="Please fill in all time slots.",C=!0;else for(const J of ee.timeSlots){const se=J.start_time.split(":").map(Number),de=J.end_time.split(":").map(Number);if(se[0]*60+se[1]>=de[0]*60+de[1]){le.timeSlots="End time must be after start time.",C=!0;break}}else ee.reason.trim()||(le.reason="Please provide a reason for unavailability.",C=!0);Object.keys(le).length>0&&(y.value[re]=le),Object.keys(le).length===0&&B.push({date:re,is_available:ee.isAvailable,reason:ee.isAvailable?null:ee.reason,time_slots:ee.isAvailable?ee.timeSlots:null})}}if(B.length===0&&!C){y.value.general="Please select and set availability for at least one day.",d.value=!1;return}if(C){d.value=!1;return}try{m();const Q={availabilities:B,reason_for_late_submission:l.value?o.value:null};await fe.post("/api/availabilities/batch",Q),p.success("Availability saved successfully!"),t("availability-saved"),t("close")}catch(Q){console.error("Error saving availability:",Q),p.error("An error occurred while saving your availability.")}finally{d.value=!1}};return(B,C)=>(a(),D(Pe,{show:b.show,onClose:C[7]||(C[7]=Q=>B.$emit("close")),"max-width":"4xl",closeable:""},{default:h(()=>{var Q,re,ee,le;return[e("div",tl,[C[18]||(C[18]=e("h2",{class:"text-2xl font-bold text-gray-900"}," Set Your Weekly Availability ",-1)),e("p",al,[C[8]||(C[8]=_(" Select a day to quickly set your schedule for the upcoming week. ",-1)),l.value?(a(),i("span",{key:1,class:"text-indigo-600 hover:text-indigo-800 transition duration-150 ease-in-out cursor-pointer",onClick:V}," Go back to next week. ")):(a(),i("span",{key:0,class:"text-indigo-600 hover:text-indigo-800 transition duration-150 ease-in-out cursor-pointer",onClick:g}," Missed the deadline? Submit for this week. "))]),l.value?(a(),i("div",ll,[C[9]||(C[9]=e("div",{class:"flex items-center"},[e("svg",{class:"h-5 w-5 text-yellow-500 mr-2",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.344a1.5 1.5 0 012.486 0l5.446 9.176A1.5 1.5 0 0114.246 15H5.754a1.5 1.5 0 01-1.238-2.48zM9 11a1 1 0 102 0V7a1 1 0 10-2 0v4zm1-3a1 1 0 100 2h.01a1 1 0 100-2H10z","clip-rule":"evenodd"})]),e("p",{class:"font-semibold"},"Late Submission for Current Week")],-1)),C[10]||(C[10]=e("p",{class:"mt-2 text-sm"}," Please provide a reason for submitting late. We acknowledge that availability submissions are due by Thursday evening. ",-1)),e("div",sl,[r(O,{value:"Reason for late submission"}),U(e("textarea",{"onUpdate:modelValue":C[0]||(C[0]=J=>o.value=J),rows:"2",class:"mt-1 block w-full rounded-md border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 shadow-sm",placeholder:"e.g., I was out sick, I forgot, I had no access to the system"},null,512),[[ie,o.value]]),r(X,{message:y.value.lateReason,class:"mt-2"},null,8,["message"])])])):x("",!0),e("div",ol,[e("div",il,[(a(!0),i(Z,null,oe(u.value,J=>{var se,de,Me,$e,Ve;return a(),i("div",{key:J.value,class:q(["p-4 rounded-xl border cursor-pointer transition-all duration-200 ease-in-out",{"bg-indigo-50 border-indigo-500 shadow-lg":n.value===J.value,"bg-white border-gray-200 hover:border-indigo-400 hover:shadow-md":n.value!==J.value,"border-red-400 bg-red-50":y.value[J.value],"opacity-70":J.isPast}]),onClick:ye=>z(J.value)},[e("div",rl,[e("div",ul,[e("div",{class:q(["text-lg font-bold",{"text-indigo-600":n.value===J.value,"text-gray-800":n.value!==J.value}])},S(J.day),3),e("div",dl,S(J.label.split(", ")[1]),1)]),(de=(se=c.value[J.value])==null?void 0:se.timeSlots[0])!=null&&de.start_time&&(($e=(Me=c.value[J.value])==null?void 0:Me.timeSlots[0])!=null&&$e.end_time)||(Ve=c.value[J.value])!=null&&Ve.reason?(a(),i("span",{key:0,class:q(["inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium",{"bg-emerald-100 text-emerald-800":c.value[J.value].isAvailable,"bg-amber-100 text-amber-800":!c.value[J.value].isAvailable}])},[c.value[J.value].isAvailable?(a(),i("span",cl,"Available")):(a(),i("span",ml,"Unavailable"))],2)):(a(),i("span",vl," Not Set "))])],10,nl)}),128))]),n.value?(a(),i("div",pl,[e("h3",fl," Availability for "+S((Q=u.value.find(J=>J.value===n.value))==null?void 0:Q.label),1),e("div",gl,[e("button",{type:"button",onClick:I,disabled:!j.value,class:q([{"opacity-50 cursor-not-allowed":!j.value},"text-indigo-600 hover:text-indigo-800 transition duration-150 ease-in-out"])},C[11]||(C[11]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 inline mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{d:"M7 9a2 2 0 012-2h6a2 2 0 012 2v6a2 2 0 01-2 2H9a2 2 0 01-2-2V9z"}),e("path",{d:"M5 3a2 2 0 00-2 2v6a2 2 0 002 2V5h8a2 2 0 00-2-2H5z"})],-1),_(" Apply to all days ",-1)]),10,bl)]),e("div",yl,[C[13]||(C[13]=e("span",{class:"text-sm font-medium text-gray-700"},"I am available on this day",-1)),e("label",hl,[e("input",{type:"checkbox",checked:T.value.isAvailable,onChange:C[1]||(C[1]=J=>P(J.target.checked)),class:"sr-only peer"},null,40,xl),C[12]||(C[12]=e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"},null,-1))])]),r(X,{message:(re=y.value[n.value])==null?void 0:re.general,class:"mt-2"},null,8,["message"]),T.value.isAvailable?(a(),i("div",kl,[r(O,{value:"Available Time Slots",class:"text-gray-800 mb-2"}),r(X,{message:(ee=y.value[n.value])==null?void 0:ee.timeSlots,class:"mt-2 mb-4"},null,8,["message"]),(a(!0),i(Z,null,oe(T.value.timeSlots,(J,se)=>(a(),i("div",{key:se,class:"flex items-center space-x-2 mb-4"},[e("div",wl,[U(e("input",{type:"time","onUpdate:modelValue":de=>c.value[n.value].timeSlots[se].start_time=de,onChange:C[2]||(C[2]=de=>c.value[n.value].isSelected=!0),class:"block w-full rounded-md border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 shadow-sm"},null,40,_l),[[ie,c.value[n.value].timeSlots[se].start_time]])]),C[15]||(C[15]=e("span",{class:"text-gray-500"},"-",-1)),e("div",Al,[U(e("input",{type:"time","onUpdate:modelValue":de=>c.value[n.value].timeSlots[se].end_time=de,onChange:C[3]||(C[3]=de=>c.value[n.value].isSelected=!0),class:"block w-full rounded-md border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 shadow-sm"},null,40,Tl),[[ie,c.value[n.value].timeSlots[se].end_time]])]),c.value[n.value].timeSlots.length>1?(a(),i("button",{key:0,type:"button",onClick:de=>H(se),class:"p-2 text-red-600 hover:text-red-800 transition duration-150 ease-in-out"},C[14]||(C[14]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm6 0a1 1 0 012 0v6a1 1 0 11-2 0V8z","clip-rule":"evenodd"})],-1)]),8,Ml)):x("",!0)]))),128)),e("button",{type:"button",onClick:F,class:"mt-2 w-full flex items-center justify-center px-4 py-2 border border-dashed border-indigo-300 rounded-lg text-indigo-600 hover:bg-indigo-50 transition duration-150 ease-in-out"},C[16]||(C[16]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z","clip-rule":"evenodd"})],-1),_(" Add Another Time Slot ",-1)]))])):(a(),i("div",$l,[r(O,{value:"Reason for Not Available",class:"text-gray-800 mb-2"}),U(e("textarea",{"onUpdate:modelValue":C[4]||(C[4]=J=>c.value[n.value].reason=J),onInput:C[5]||(C[5]=J=>c.value[n.value].isSelected=!0),rows:"3",class:"block w-full rounded-md border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 shadow-sm",placeholder:"e.g., Out of office, Holiday, Meeting all day"},null,544),[[ie,c.value[n.value].reason]]),r(X,{message:(le=y.value[n.value])==null?void 0:le.reason,class:"mt-2"},null,8,["message"])]))])):(a(),i("div",Cl,C[17]||(C[17]=[e("p",{class:"text-gray-500 text-lg font-medium"}," Please select a day from the left to set your availability. ",-1)])))])]),e("div",Sl,[r(Ne,{onClick:C[6]||(C[6]=J=>B.$emit("close"))},{default:h(()=>C[19]||(C[19]=[_(" Cancel ",-1)])),_:1,__:[19]}),r(ce,{onClick:W,disabled:d.value||!k.value,class:q({"opacity-50 cursor-not-allowed":d.value||!k.value})},{default:h(()=>[d.value?(a(),i("span",Gl,C[20]||(C[20]=[e("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),_(" Saving... ",-1)]))):(a(),i("span",jl,"Save Availability"))]),_:1},8,["disabled","class"])])]}),_:1},8,["show"]))}},El={key:0,class:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center"},Vl={class:"bg-white rounded-lg shadow-xl p-6 max-w-lg w-full mx-4"},Il={class:"mb-4 text-gray-700"},Bl={class:"flex justify-center"},Dl={__name:"AvailabilityBlocker",setup(b){const A=M(!1),m=M(!0),s=M(!1),t=M(!0),p=M(!0),c=M(!1),y=K(()=>{var g;return((g=We().props.auth.user)==null?void 0:g.id)||null}),d=()=>{const g=localStorage.getItem("authToken");g&&!fe.defaults.headers.common.Authorization&&(fe.defaults.headers.common.Authorization=`Bearer ${g}`)},n=async()=>{m.value=!0;try{d();const{data:g}=await fe.get("/api/availability-prompt");A.value=!!g.should_block_user,t.value=!!g.all_current_weekdays_covered,p.value=!!(g.all_next_weekdays_covered??g.all_weekdays_covered),c.value=!!g.is_friday_onwards,localStorage.setItem("shouldBlockUser",String(A.value)),localStorage.setItem("allCurrentWeekdaysCovered",String(t.value)),localStorage.setItem("allNextWeekdaysCovered",String(p.value)),localStorage.setItem("allWeekdaysCovered",String(p.value));const V=new CustomEvent("availability-status-updated",{detail:{shouldBlockUser:A.value,allCurrentWeekdaysCovered:t.value,allNextWeekdaysCovered:p.value}});window.dispatchEvent(V)}catch(g){console.error("Error checking if user should be blocked:",g),A.value=!1}finally{m.value=!1}},o=()=>{s.value=!0},l=()=>{n()},u=g=>{A.value=!!g.detail.shouldBlockUser,"allCurrentWeekdaysCovered"in g.detail&&(t.value=!!g.detail.allCurrentWeekdaysCovered),"allNextWeekdaysCovered"in g.detail&&(p.value=!!g.detail.allNextWeekdaysCovered)},v=()=>{document.visibilityState==="visible"&&Ge(()=>{n()})},$=g=>{["shouldBlockUser","allWeekdaysCovered","allCurrentWeekdaysCovered","allNextWeekdaysCovered"].includes(g.key)&&Ge(()=>{n()})};return be(()=>{n(),window.addEventListener("availability-status-updated",u),document.addEventListener("visibilitychange",v),window.addEventListener("storage",$)}),et(()=>{window.removeEventListener("availability-status-updated",u),document.removeEventListener("visibilitychange",v),window.removeEventListener("storage",$)}),(g,V)=>A.value&&!m.value?(a(),i("div",El,[e("div",Vl,[V[2]||(V[2]=Ze('<div class="flex items-center mb-4"><div class="flex-shrink-0 mr-3"><svg class="h-8 w-8 text-red-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg></div><h2 class="text-xl font-bold text-gray-900">Action Required</h2></div>',1)),e("p",Il,[!t.value&&!p.value?(a(),i(Z,{key:0},[_(" You need to submit your availability for the current week (up to today) and for all weekdays of next week. ")],64)):t.value?(a(),i(Z,{key:2},[_(" You must submit your availability for all weekdays of next week before you can continue using the application. ")],64)):(a(),i(Z,{key:1},[_(" You need to submit your availability for the current week (up to today). ")],64))]),V[3]||(V[3]=e("p",{class:"mb-6 text-gray-600"}," This information is required for planning meetings and work schedules. ",-1)),e("div",Bl,[r(ce,{onClick:o,class:"bg-red-600 hover:bg-red-700"},{default:h(()=>V[1]||(V[1]=[_(" Submit Availability Now ",-1)])),_:1,__:[1]})]),r(Pl,{show:s.value,userId:y.value,onClose:V[0]||(V[0]=E=>s.value=!1),onAvailabilitySaved:l},null,8,["show","userId"])])])):x("",!0)}},Nl={class:"relative"},Ul={class:"flex flex-wrap items-center gap-2 mb-2 p-2 border border-gray-300 rounded-lg bg-white min-h-[44px] focus-within:border-indigo-500 focus-within:ring-1 focus-within:ring-indigo-500 transition-all duration-150"},Ll=["onClick"],zl={key:0,class:"absolute z-20 w-full bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto mt-1 transform-gpu"},Fl=["onClick"],Rl={key:1,class:"px-4 py-2 text-sm text-gray-500"},Ol={key:2,class:"px-4 py-2 text-sm text-gray-500"},ql={__name:"TagInput",props:{modelValue:{type:Array,default:()=>[]},label:{type:String,default:"Tags"},placeholder:{type:String,default:"Add tags..."},error:{type:String,default:""},initialTags:{type:Array,default:()=>[]},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(b,{emit:A}){const m=b,s=A,t=M(""),p=M([]),c=M([]),y=M(!1),d=M(null);function n(){s("update:modelValue",c.value.map(E=>E.id))}ne(()=>m.initialTags,E=>{if(c.value=[],E&&E.length>0){const z=[],F=new Set;E.forEach(H=>{F.has(H.id)||(z.push(H),F.add(H.id))}),c.value.push(...z)}const T=E.map(z=>z.id),k=Array.isArray(m.modelValue)?m.modelValue:[];(T.length!==k.length||T.some(z=>!k.includes(z))||k.some(z=>!T.includes(z)))&&n()},{immediate:!0});const o=fa(async E=>{if(E.length<2){p.value=[],y.value=!1;return}try{const T=await fe.get(`/api/tags/search?query=${E}`);p.value=T.data,y.value=!0}catch(T){console.error("Error fetching tags:",T),p.value=[],y.value=!1}},300);ne(t,E=>{m.disabled||o(E)});const l=E=>{c.value.some(T=>T.id===E.id)||(c.value.push(E),t.value="",p.value=[],y.value=!1,n()),Ge(()=>d.value.focus())},u=()=>{if(m.disabled)return;const E=t.value.trim();if(!E)return;const T=p.value.find(j=>j.name.toLowerCase()===E.toLowerCase()),k=c.value.some(j=>j.name.toLowerCase()===E.toLowerCase());if(T)l(T);else if(k)t.value="",p.value=[],y.value=!1;else{const j={id:`new_${E.replace(/\s+/g,"-").toLowerCase()}_${Date.now()}`,name:E};c.value.push(j),t.value="",p.value=[],y.value=!1,n()}Ge(()=>d.value.focus())},v=E=>{m.disabled||(c.value=c.value.filter(T=>T.id!==E.id),n(),Ge(()=>d.value.focus()))},$=()=>{m.disabled||t.value===""&&c.value.length>0&&v(c.value[c.value.length-1])},g=K(()=>p.value.filter(E=>!c.value.some(T=>T.id===E.id))),V=E=>{d.value&&!d.value.$el.contains(E.target)&&(y.value=!1,t.value="")};return be(()=>{document.addEventListener("click",V)}),et(()=>{document.removeEventListener("click",V)}),(E,T)=>(a(),i("div",Nl,[r(O,{value:b.label,class:"mb-1"},null,8,["value"]),e("div",Ul,[(a(!0),i(Z,null,oe(c.value,k=>(a(),i("span",{key:k.id,class:"inline-flex items-center px-3 py-1 text-sm font-medium bg-indigo-100 text-indigo-800 rounded-full shadow-sm"},[_(S(k.name)+" ",1),b.disabled?x("",!0):(a(),i("button",{key:0,type:"button",onClick:j=>v(k),class:"ml-2 -mr-1 text-indigo-500 hover:text-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 rounded-full p-0.5"},T[3]||(T[3]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,Ll))]))),128)),r(pe,{ref_key:"inputRef",ref:d,type:"text",placeholder:c.value.length===0?b.placeholder:"",modelValue:t.value,"onUpdate:modelValue":T[0]||(T[0]=k=>t.value=k),onFocus:T[1]||(T[1]=k=>y.value=!0),onKeydown:[Oe(Et(u,["prevent"]),["enter"]),T[2]||(T[2]=Oe(k=>y.value=!1,["tab"])),Oe($,["delete"])],class:"flex-grow min-w-[100px] border-none focus:ring-0 shadow-none p-0 bg-transparent text-gray-900",disabled:b.disabled},null,8,["placeholder","modelValue","onKeydown","disabled"])]),y.value&&(g.value.length>0||t.value.length>=2||g.value.length===0&&t.value.length<2)&&!b.disabled?(a(),i("div",zl,[(a(!0),i(Z,null,oe(g.value,k=>(a(),i("div",{key:k.id,onClick:j=>l(k),class:"px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 cursor-pointer transition-colors duration-100"},S(k.name),9,Fl))),128)),!p.value.some(k=>k.name.toLowerCase()===t.value.toLowerCase())&&t.value.length>=2?(a(),i("div",{key:0,onClick:u,class:"px-4 py-2 text-sm text-indigo-700 bg-indigo-50 hover:bg-indigo-100 cursor-pointer border-t border-indigo-200 font-semibold transition-colors duration-100"},' Add new tag: "'+S(t.value)+'" ',1)):x("",!0),g.value.length===0&&t.value.length<2?(a(),i("div",Rl," Type at least 2 characters to search for tags. ")):x("",!0),g.value.length===0&&t.value.length>=2&&!p.value.some(k=>k.name.toLowerCase()===t.value.toLowerCase())?(a(),i("div",Ol,[T[4]||(T[4]=_(" No matching tags found. Press ",-1)),T[5]||(T[5]=e("span",{class:"font-semibold text-indigo-600"},"Enter",-1)),_(' to add "'+S(t.value)+'" as a new tag. ',1)])):x("",!0)])):x("",!0),r(X,{message:b.error,class:"mt-2"},null,8,["message"])]))}},Dt=at(ql,[["__scopeId","data-v-4d528a4c"]]),Hl={class:"space-y-4"},Kl="Add New Milestone",Wl="/api/milestones",Jl="post",Yl="Create Milestone",Ql="Milestone created successfully!",Zl={__name:"MilestoneFormModal",props:{show:Boolean,projectId:Number},emits:["close","saved"],setup(b,{emit:A}){const m=b,s=A,t=Te({name:"",description:"",completion_date:null,status:"Not Started",project_id:m.projectId}),p=Te({completion_date:null}),c=["Not Started","In Progress","Completed","Overdue"];ne(()=>m.show,o=>{o&&(Object.assign(t,{name:"",description:"",completion_date:null,status:"Not Started",project_id:m.projectId}),p.completion_date=null)},{immediate:!0});const y=()=>(p.completion_date=null,t.completion_date?!0:(p.completion_date=["Completion date is required."],!1)),d=o=>{s("saved",o),s("close")},n=()=>{s("close")};return(o,l)=>(a(),D(Ee,{show:b.show,title:Kl,"api-endpoint":Wl,"http-method":Jl,"form-data":t,"submit-button-text":Yl,"success-message":Ql,"before-submit":y,onClose:n,onSubmitted:d},{default:h(({errors:u})=>[e("div",Hl,[e("div",null,[r(O,{for:"milestone-name",value:"Milestone Name"}),r(pe,{id:"milestone-name",modelValue:t.name,"onUpdate:modelValue":l[0]||(l[0]=v=>t.name=v),type:"text",class:"mt-1 block w-full",placeholder:"Enter milestone name",required:""},null,8,["modelValue"]),r(X,{message:u.name?u.name[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[r(O,{for:"milestone-description",value:"Description"}),U(e("textarea",{id:"milestone-description","onUpdate:modelValue":l[1]||(l[1]=v=>t.description=v),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",rows:"3",placeholder:"Enter milestone description"},null,512),[[ie,t.description]]),r(X,{message:u.description?u.description[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[r(O,{for:"milestone-completion-date",value:"Completion Date"}),r(pe,{id:"milestone-completion-date",modelValue:t.completion_date,"onUpdate:modelValue":l[2]||(l[2]=v=>t.completion_date=v),type:"date",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),r(X,{message:u.completion_date?u.completion_date[0]:p.completion_date?p.completion_date[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[r(O,{for:"milestone-status",value:"Status"}),r(ge,{id:"milestone-status",modelValue:t.status,"onUpdate:modelValue":l[3]||(l[3]=v=>t.status=v),options:c.map(v=>({value:v,label:v})),"value-key":"value","label-key":"label",placeholder:"Select status",class:"mt-1"},null,8,["modelValue","options"]),r(X,{message:u.status?u.status[0]:"",class:"mt-2"},null,8,["message"])])])]),_:1},8,["show","form-data"]))}};function Nt(b,A){return a(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z"})])}const Xl={class:"space-y-6 text-sm text-gray-700"},es={class:"flex justify-center bg-gray-100 p-1 rounded-lg mb-4"},ts={class:"border-t pt-4"},as={class:"space-y-4"},ls={class:"flex gap-2"},ss={class:"bg-gray-900 text-white p-4 rounded-lg text-center mt-4"},os={class:"text-4xl font-bold text-indigo-400"},is={class:"border-t pt-4"},ns={class:"space-y-4"},rs=["value"],us={class:"bg-gray-900 text-white p-4 rounded-lg text-center mt-4"},ds={class:"text-4xl font-bold text-blue-400"},Ut={__name:"EffortEstimationGuide",setup(b){const A=M("developer"),m=M(1),s=M(1),t=K(()=>{if(A.value==="admin"){const n=p.value;return n===1?1:n===2?2:n===3?3:5}const y=m.value*s.value;return[1,2,3,5,8,13].reduce((n,o)=>Math.abs(o-y)<Math.abs(n-y)?o:n)}),p=M(1),c=[{value:1,label:"Quick Task / Reply (< 1 hr)"},{value:2,label:"Routine / Notes (1-2 hrs)"},{value:3,label:"Half Day / Focus (3-4 hrs)"},{value:4,label:"Full Day / Complex (5+ hrs)"}];return(y,d)=>(a(),i("div",Xl,[e("div",es,[e("button",{onClick:d[0]||(d[0]=n=>A.value="developer"),class:q(["flex-1 py-1 text-xs font-semibold rounded-md transition-colors",A.value==="developer"?"bg-white text-indigo-600 shadow-sm":"text-gray-500 hover:text-gray-700"])}," Developer ",2),e("button",{onClick:d[1]||(d[1]=n=>A.value="admin"),class:q(["flex-1 py-1 text-xs font-semibold rounded-md transition-colors",A.value==="admin"?"bg-white text-indigo-600 shadow-sm":"text-gray-500 hover:text-gray-700"])}," Admin / Staff ",2)]),A.value==="developer"?(a(),i(Z,{key:0},[d[12]||(d[12]=Ze('<section><h4 class="font-bold text-gray-900 text-lg mb-2">What are Story Points?</h4><p class="mb-2">Story points estimate the <span class="font-semibold">effort</span> required to implement a task. They consider:</p><ul class="list-disc pl-5 space-y-1"><li><span class="font-semibold">Complexity:</span> How difficult is the logic?</li><li><span class="font-semibold">Risk:</span> How much uncertainty is there?</li><li><span class="font-semibold">Repetition:</span> How tedious is the work?</li></ul></section><section class="bg-indigo-50 p-4 rounded-lg border border-indigo-100"><h4 class="font-bold text-indigo-900 text-md mb-3">Quick Reference</h4><div class="grid grid-cols-1 gap-3"><div class="flex gap-3 items-start border-b border-indigo-200 pb-2"><span class="bg-indigo-600 text-white font-bold w-8 h-8 flex items-center justify-center rounded-full shrink-0">1</span><div><span class="font-bold block text-indigo-900">Tiny / Trivial</span><span class="text-xs">Typo fix, color change, simple config. &lt; 1 hour.</span></div></div><div class="flex gap-3 items-start border-b border-indigo-200 pb-2"><span class="bg-indigo-600 text-white font-bold w-8 h-8 flex items-center justify-center rounded-full shrink-0">2</span><div><span class="font-bold block text-indigo-900">Small / Routine</span><span class="text-xs">Add field, update text, standard bug fix. 1-4 hours.</span></div></div><div class="flex gap-3 items-start border-b border-indigo-200 pb-2"><span class="bg-indigo-600 text-white font-bold w-8 h-8 flex items-center justify-center rounded-full shrink-0">3</span><div><span class="font-bold block text-indigo-900">Medium</span><span class="text-xs">New simple feature, standard page dev, component logic. 4-8 hours (1 day).</span></div></div><div class="flex gap-3 items-start border-b border-indigo-200 pb-2"><span class="bg-indigo-600 text-white font-bold w-8 h-8 flex items-center justify-center rounded-full shrink-0">5</span><div><span class="font-bold block text-indigo-900">Large</span><span class="text-xs">Complex feature, integration, heavy logic. 2-3 days.</span></div></div><div class="flex gap-3 items-start"><span class="bg-yellow-600 text-white font-bold w-8 h-8 flex items-center justify-center rounded-full shrink-0">8+</span><div><span class="font-bold block text-yellow-900">Ex-Large (Break Down!)</span><span class="text-xs">Full module, major refactor. Consider splitting into smaller subtasks. 3-5+ days.</span></div></div></div></section>',2)),e("section",ts,[d[11]||(d[11]=e("h4",{class:"font-bold text-gray-900 text-md mb-3"},"Estimation Calculator",-1)),e("div",as,[e("div",null,[d[7]||(d[7]=e("label",{class:"block text-xs font-semibold text-gray-600 mb-1"},"Difficulty (1-5)",-1)),U(e("input",{type:"range",min:"1",max:"5","onUpdate:modelValue":d[2]||(d[2]=n=>m.value=n),class:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"},null,512),[[ie,m.value,void 0,{number:!0}]]),d[8]||(d[8]=e("div",{class:"flex justify-between text-xs text-gray-500 mt-1"},[e("span",null,"Easy"),e("span",null,"Expert")],-1))]),e("div",null,[d[9]||(d[9]=e("label",{class:"block text-xs font-semibold text-gray-600 mb-1"},"Scope/Uncertainty (1-3)",-1)),e("div",ls,[e("button",{onClick:d[3]||(d[3]=n=>s.value=1),class:q([s.value===1?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700","flex-1 py-1 rounded text-xs"])},"Clear",2),e("button",{onClick:d[4]||(d[4]=n=>s.value=2),class:q([s.value===2?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700","flex-1 py-1 rounded text-xs"])},"Vague",2),e("button",{onClick:d[5]||(d[5]=n=>s.value=3),class:q([s.value===3?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700","flex-1 py-1 rounded text-xs"])},"Unknown",2)])]),e("div",ss,[d[10]||(d[10]=e("div",{class:"text-xs uppercase tracking-wide text-gray-400"},"Suggested Points",-1)),e("div",os,S(t.value),1)])])])],64)):(a(),i(Z,{key:1},[d[16]||(d[16]=Ze('<section><h4 class="font-bold text-gray-900 text-lg mb-2">Admin / Staff Points</h4><p class="mb-2">For non-technical tasks, use <span class="font-semibold">Time &amp; Volume</span> to estimate points.</p></section><section class="bg-blue-50 p-4 rounded-lg border border-blue-100"><h4 class="font-bold text-blue-900 text-md mb-3">Reference Table</h4><div class="grid grid-cols-1 gap-3"><div class="flex gap-3 items-start border-b border-blue-200 pb-2"><span class="bg-blue-600 text-white font-bold w-12 h-6 flex items-center justify-center rounded px-2 text-xs shrink-0">1 pt</span><div><span class="font-bold block text-blue-900">Quick Task</span><span class="text-xs">Replies, emails, simple checks. &lt; 1 hour.</span></div></div><div class="flex gap-3 items-start border-b border-blue-200 pb-2"><span class="bg-blue-600 text-white font-bold w-12 h-6 flex items-center justify-center rounded px-2 text-xs shrink-0">2 pts</span><div><span class="font-bold block text-blue-900">Routine Task</span><span class="text-xs">Meeting minutes, detailed responses. 1-2 hours.</span></div></div><div class="flex gap-3 items-start border-b border-blue-200 pb-2"><span class="bg-blue-600 text-white font-bold w-12 h-6 flex items-center justify-center rounded px-2 text-xs shrink-0">3 pts</span><div><span class="font-bold block text-blue-900">Half Day</span><span class="text-xs">Deep focus admin work, organization. 3-4 hours.</span></div></div><div class="flex gap-3 items-start"><span class="bg-blue-600 text-white font-bold w-12 h-6 flex items-center justify-center rounded px-2 text-xs shrink-0">5 pts</span><div><span class="font-bold block text-blue-900">Full Day</span><span class="text-xs">Complex analysis, long meetings/planning. 5+ hours.</span></div></div></div></section>',2)),e("section",is,[d[15]||(d[15]=e("h4",{class:"font-bold text-gray-900 text-md mb-3"},"Calculator",-1)),e("div",ns,[e("div",null,[d[13]||(d[13]=e("label",{class:"block text-xs font-semibold text-gray-600 mb-1"},"Task Type / Volume",-1)),U(e("select",{"onUpdate:modelValue":d[6]||(d[6]=n=>p.value=n),class:"w-full rounded-md border-gray-300 text-sm focus:border-indigo-500 focus:ring-indigo-500"},[(a(),i(Z,null,oe(c,n=>e("option",{key:n.value,value:n.value},S(n.label),9,rs)),64))],512),[[qe,p.value,void 0,{number:!0}]])]),e("div",us,[d[14]||(d[14]=e("div",{class:"text-xs uppercase tracking-wide text-gray-400"},"Suggested Points",-1)),e("div",ds,S(t.value),1)])])])],64))]))}},cs={class:"p-4 sm:p-6"},ms={class:"flex items-center justify-between mb-4"},vs={class:"text-lg font-medium text-gray-900"},ps={class:"space-y-6"},fs={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},gs={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},bs={key:0},ys=["min"],hs={key:1},xs=["min"],ks={key:2,class:"md:col-span-2"},ws={class:"mt-2 flex flex-wrap gap-2"},_s=["value"],As={class:"ml-2 text-sm"},Ts={class:"flex gap-2"},Ms=["value"],$s=["value"],Cs={key:5,class:"md:col-span-2"},Ss={class:"p-3 rounded-md bg-gray-50 border border-gray-200 text-sm text-gray-800"},Gs={class:"flex items-center justify-end gap-3"},js={__name:"SchedulePickerModal",props:{show:{type:Boolean,default:!1},title:{type:String,default:"Schedule"},initial:{type:Object,default:()=>({})}},emits:["close","save"],setup(b,{emit:A}){function m(l=new Date){const u=T=>String(T).padStart(2,"0"),v=l.getFullYear(),$=u(l.getMonth()+1),g=u(l.getDate()),V=u(l.getHours()),E=u(l.getMinutes());return`${v}-${$}-${g}T${V}:${E}`}const s=b,t=A,p=M({name:"",description:"",start_at:m(new Date),end_at:"",mode:"once",time:new Date().toTimeString().slice(0,5),days_of_week:[],day_of_month:null,nth:1,dow_for_monthly:1,month:1,cron:""});ne(()=>s.show,l=>{l&&(p.value={name:s.initial.name||"",description:s.initial.description||"",start_at:s.initial.start_at||m(new Date),end_at:s.initial.end_at||"",mode:s.initial.mode||"once",time:s.initial.time||new Date().toTimeString().slice(0,5),days_of_week:s.initial.days_of_week||[],day_of_month:s.initial.day_of_month||null,nth:s.initial.nth||1,dow_for_monthly:s.initial.dow_for_monthly||1,month:s.initial.month||1,cron:s.initial.cron||""})});const c=[{value:"once",label:"Once"},{value:"daily",label:"Daily"},{value:"weekly",label:"Weekly"},{value:"monthly",label:"Monthly"},{value:"yearly",label:"Yearly"},{value:"cron",label:"Custom cron"}],y=K(()=>m(new Date)),d=K(()=>p.value.start_at||y.value),n=K(()=>{var v,$;const l=p.value,u=l.time||"00:00";switch(l.mode){case"once":return`One-time at ${(v=l.start_at)==null?void 0:v.replace("T"," ")} (deactivates after run)`;case"daily":return`Daily at ${u}`;case"weekly":if(!(($=l.days_of_week)!=null&&$.length))return`Weekly at ${u}`;const g=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return`Weekly on ${l.days_of_week.map(T=>g[T]).join(", ")} at ${u}`;case"monthly":return l.day_of_month?`Monthly on day ${l.day_of_month} at ${u}`:`Monthly on the ${["First","Second","Third","Fourth","Fifth"][l.nth-1]} ${["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][l.dow_for_monthly]} at ${u}`;case"yearly":return`Yearly on ${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][(l.month||1)-1]} ${l.day_of_month||1} at ${u}`;case"cron":return`Custom cron: ${l.cron||"* * * * *"}`}});function o(){t("save",{...p.value})}return(l,u)=>(a(),D(Pe,{show:b.show,onClose:u[15]||(u[15]=()=>t("close"))},{default:h(()=>[e("div",cs,[e("div",ms,[e("h3",vs,S(b.title),1),e("button",{onClick:u[0]||(u[0]=()=>t("close")),class:"text-gray-500 hover:text-gray-700"},"âœ•")]),e("div",ps,[e("section",null,[e("div",fs,[e("div",null,[r(O,{value:"Schedule Name"}),U(e("input",{"onUpdate:modelValue":u[1]||(u[1]=v=>p.value.name=v),type:"text",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",placeholder:"e.g., Weekly reminder"},null,512),[[ie,p.value.name]])]),e("div",null,[r(O,{value:"Description (optional)"}),U(e("input",{"onUpdate:modelValue":u[2]||(u[2]=v=>p.value.description=v),type:"text",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[ie,p.value.description]])])])]),e("section",null,[e("div",gs,[e("div",null,[r(O,{value:"Run"}),r(ge,{modelValue:p.value.mode,"onUpdate:modelValue":u[3]||(u[3]=v=>p.value.mode=v),options:c,placeholder:"Select frequency..."},null,8,["modelValue"])]),p.value.mode!=="cron"&&p.value.mode!=="once"?(a(),i("div",bs,[r(O,{value:"Time"}),U(e("input",{"onUpdate:modelValue":u[4]||(u[4]=v=>p.value.time=v),type:"time",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[ie,p.value.time]])])):x("",!0),e("div",null,[r(O,{value:"Start at"}),U(e("input",{"onUpdate:modelValue":u[5]||(u[5]=v=>p.value.start_at=v),type:"datetime-local",min:y.value,class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,8,ys),[[ie,p.value.start_at]])]),p.value.mode!=="once"?(a(),i("div",hs,[r(O,{value:"End at (optional)"}),U(e("input",{"onUpdate:modelValue":u[6]||(u[6]=v=>p.value.end_at=v),type:"datetime-local",min:d.value,class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,8,xs),[[ie,p.value.end_at]])])):x("",!0),p.value.mode==="weekly"?(a(),i("div",ks,[r(O,{value:"Days of the week"}),e("div",ws,[(a(),i(Z,null,oe(7,v=>e("label",{key:v-1,class:"inline-flex items-center"},[U(e("input",{class:"rounded border-gray-300 text-indigo-600 shadow-sm focus:ring-indigo-500",type:"checkbox",value:v-1,"onUpdate:modelValue":u[7]||(u[7]=$=>p.value.days_of_week=$)},null,8,_s),[[ct,p.value.days_of_week]]),e("span",As,S(["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][v-1]),1)])),64))])])):x("",!0),p.value.mode==="monthly"?(a(),i(Z,{key:3},[e("div",null,[r(O,{value:"Day of month"}),U(e("input",{"onUpdate:modelValue":u[8]||(u[8]=v=>p.value.day_of_month=v),type:"number",min:"1",max:"31",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",placeholder:"e.g., 15"},null,512),[[ie,p.value.day_of_month,void 0,{number:!0}]])]),e("div",null,[r(O,{value:"Or: Nth weekday"}),e("div",Ts,[U(e("select",{"onUpdate:modelValue":u[9]||(u[9]=v=>p.value.nth=v),class:"mt-1 block w-1/2 rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},u[16]||(u[16]=[e("option",{value:1},"First",-1),e("option",{value:2},"Second",-1),e("option",{value:3},"Third",-1),e("option",{value:4},"Fourth",-1),e("option",{value:5},"Fifth",-1)]),512),[[qe,p.value.nth,void 0,{number:!0}]]),U(e("select",{"onUpdate:modelValue":u[10]||(u[10]=v=>p.value.dow_for_monthly=v),class:"mt-1 block w-1/2 rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[(a(),i(Z,null,oe(7,v=>e("option",{key:v-1,value:v-1},S(["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][v-1]),9,Ms)),64))],512),[[qe,p.value.dow_for_monthly,void 0,{number:!0}]])])])],64)):x("",!0),p.value.mode==="yearly"?(a(),i(Z,{key:4},[e("div",null,[r(O,{value:"Month"}),U(e("select",{"onUpdate:modelValue":u[11]||(u[11]=v=>p.value.month=v),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[(a(),i(Z,null,oe(12,v=>e("option",{key:v,value:v},S(["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][v-1]),9,$s)),64))],512),[[qe,p.value.month,void 0,{number:!0}]])]),e("div",null,[r(O,{value:"Day of month"}),U(e("input",{"onUpdate:modelValue":u[12]||(u[12]=v=>p.value.day_of_month=v),type:"number",min:"1",max:"31",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[ie,p.value.day_of_month,void 0,{number:!0}]])])],64)):x("",!0),p.value.mode==="cron"?(a(),i("div",Cs,[r(O,{value:"Cron expression"}),U(e("input",{"onUpdate:modelValue":u[13]||(u[13]=v=>p.value.cron=v),type:"text",placeholder:"* * * * *",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[ie,p.value.cron]])])):x("",!0)])]),e("section",null,[e("div",Ss,S(n.value),1),u[17]||(u[17]=e("p",{class:"text-[11px] text-gray-500 mt-1"},"Times are entered in your local timezone; they will be stored in the app timezone.",-1))]),e("div",Gs,[e("button",{onClick:u[14]||(u[14]=()=>t("close")),class:"px-4 py-2 rounded-md border border-gray-300 text-gray-700 bg-white hover:bg-gray-50"},"Cancel"),e("button",{onClick:o,class:"inline-flex items-center rounded-md bg-indigo-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500"},"Save")])])])]),_:1},8,["show"]))}};function Ps(){const b=M(!1),A=M(null);function m(){b.value=!0}function s(){b.value=!1}function t(c){A.value={...c},b.value=!1}async function p(c,y){var d,n;if(!A.value)return null;try{const o={...A.value,scheduled_item_type:c,scheduled_item_id:y},{data:l}=await window.axios.post("/api/schedules",o);return De("Schedule created"),A.value=null,l}catch(o){return console.error("Failed to create schedule",o),ke(((n=(d=o==null?void 0:o.response)==null?void 0:d.data)==null?void 0:n.message)||"Failed to create schedule"),null}}return{showScheduleModal:b,scheduleDraft:A,open:m,close:s,onSaveDraft:t,attachAfterCreate:p}}const Es={key:0,class:"mb-4"},Vs={key:1,class:"flex flex-col md:flex-row md:gap-8"},Is={class:"flex-grow flex flex-col space-y-4"},Bs={key:0,class:"flex-grow flex flex-col"},Ds={key:0,class:"text-xs text-gray-500 mt-1"},Ns={class:"w-full md:w-72 flex-shrink-0 mt-6 md:mt-0 space-y-5"},Us={key:0},Ls={class:"space-y-5"},zs={class:"flex items-center gap-3"},Fs={class:"flex-grow flex items-center gap-2"},Rs=["disabled"],Os={class:"flex items-center gap-3"},qs={key:0,class:"mt-5 flex items-center gap-3"},Hs={key:1,class:"mt-5 flex items-center gap-3"},Ks={key:2,class:"mt-5 flex items-center gap-3"},Ws={key:3,class:"mt-5 space-y-2"},Js={class:"flex items-center justify-between rounded-md bg-gray-100 p-1"},Ys={key:4,class:"mt-5 space-y-2"},Qs={class:"flex items-center justify-between"},Zs={key:2,class:"mt-6 border-t pt-4"},Xs={class:"space-y-4 mb-4"},eo={key:0},to={key:1},ao={key:2,class:"flex items-center"},lo={key:3,class:"flex items-center"},so={key:4,class:"flex items-center justify-between"},oo={key:0,class:"text-sm text-gray-700"},io={key:1,class:"text-sm text-gray-500"},no={class:"flex items-center gap-2"},ro={class:"flex items-center gap-2 flex-wrap"},uo={class:"p-6"},co={class:"flex items-center justify-between mb-4"},mo={class:"mt-6 flex justify-end"},vo="Create New Task",po="/api/tasks",fo="post",go="Create Task",bo="Task created successfully!",yo={__name:"CreateTaskModal",props:{show:Boolean,projectId:{type:Number,default:null}},emits:["close","saved"],setup(b,{emit:A}){const m=b,s=A,t=Te({name:"",description:"",assigned_to_user_id:null,due_date:null,status:"To Do",task_type_id:null,milestone_id:null,project_id:m.projectId,priority:"medium",needs_approval:!1,requires_qa:!1,effort:null,tags:[],tags_data:[]}),p=M(!1),c=["To Do","In Progress","Done","Blocked","Archived"],y=M([]),d=M([]),n=M([]),o=M([]),l=M(!0),u=M(!1),v=M(!1),$=M(!1),g=M(!1),V=M(!1),E=M(!1),T=M(!1),k=M(!1),j=M(!1),{showScheduleModal:z,scheduleDraft:F,open:H,close:P,onSaveDraft:I,attachAfterCreate:W}=Ps(),B=K(()=>{const L=F.value;if(!L)return null;const w=L.time||"00:00";switch(L.mode){case"once":return`One-time at ${String(L.start_at||"").replace("T"," ")}`;case"daily":return`Daily at ${w}`;case"weekly":{const te=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return`Weekly on ${(L.days_of_week||[]).map(me=>te[me]).join(", ")||"â€”"} at ${w}`}case"monthly":return L.day_of_month?`Monthly on day ${L.day_of_month} at ${w}`:`Monthly on the ${["First","Second","Third","Fourth","Fifth"][(L.nth||1)-1]} ${["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][L.dow_for_monthly||1]} at ${w}`;case"yearly":return`Yearly on ${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][(L.month||1)-1]} ${L.day_of_month||1} at ${w}`;case"cron":return`Custom cron: ${L.cron||"* * * * *"}`}return null}),C=async()=>(F.value?t.schedule={...F.value}:t.schedule&&delete t.schedule,!0);ne(()=>m.show,async L=>{L&&(Object.assign(t,{name:"",description:"",assigned_to_user_id:null,due_date:null,status:"To Do",task_type_id:null,milestone_id:null,project_id:m.projectId,priority:"medium",needs_approval:!1,requires_qa:!1,effort:null,tags:[],tags_data:[]}),V.value=!1,E.value=!1,T.value=!1,k.value=!1,j.value=!1,m.projectId?await re(m.projectId):await Q())},{immediate:!0}),ne(()=>t.description,L=>{L.length<10&&(t.milestone_id=null)}),ne(()=>t.milestone_id,()=>{t.due_date=null}),ne(()=>t.due_date,()=>{t.assigned_to_user_id=null}),ne(()=>t.assigned_to_user_id,()=>{t.task_type_id=null}),ne(()=>t.task_type_id,()=>{t.priority="medium"}),ne(()=>t.project_id,async L=>{L?await re(L):(d.value=[],n.value=[],o.value=[])});const Q=async()=>{l.value=!0;try{const L=await window.axios.get("/api/projects-simplified");y.value=L.data.map(w=>({value:w.id,label:w.name}))}catch(L){console.error("Error fetching projects:",L),y.value=[]}finally{l.value=!1}},re=async L=>{if(L){u.value=!0,v.value=!0,$.value=!0;try{const[w,te,R]=await Promise.all([window.axios.get(`/api/projects/${L}/users`),window.axios.get("/api/task-types"),window.axios.get(`/api/projects/${L}/milestones`)]);d.value=w.data.map(me=>({value:me.id,label:me.name})),n.value=te.data.map(me=>({value:me.id,label:me.name})),o.value=R.data}catch(w){console.error("Error fetching associated task data:",w),d.value=[],n.value=[],o.value=[]}finally{u.value=!1,v.value=!1,$.value=!1}}},ee=K(()=>new Date().toISOString().split("T")[0]),le=K(()=>{if(!t.milestone_id)return"";const L=o.value.find(w=>w.id===t.milestone_id);return!L||!L.completion_date?"":L.completion_date.split("T")[0]}),J=M([]),se=L=>{J.value=Array.from(L.target.files||[])},de=async L=>{if(!J.value.length)return;const w=new FormData;J.value.forEach((te,R)=>w.append(`files[${R}]`,te)),w.append("model_type","Task"),w.append("model_id",L);try{await window.axios.post("/api/files",w,{headers:{"Content-Type":"multipart/form-data"}}),De("Files uploaded to Google Drive.")}catch(te){console.error("Failed to upload task files",te),ke("Failed to upload files.")}},Me=async L=>{var w,te,R;try{const me=(L==null?void 0:L.id)||((w=L==null?void 0:L.task)==null?void 0:w.id)||((te=L==null?void 0:L.data)==null?void 0:te.id);me&&(await de(me),!(L!=null&&L.attached_schedule_id||(R=L==null?void 0:L.data)!=null&&R.attached_schedule_id)&&F.value&&await W("task",me))}finally{F.value=null,s("saved",L),s("close"),J.value=[]}},$e=()=>{s("close")},Ve=()=>{t.project_id?g.value=!0:alert("Please select a project before adding a milestone.")},ye=L=>{g.value=!1,L&&L.id&&L.name&&(o.value.push(L),t.milestone_id=L.id)},lt=K(()=>d.value),Ie=K(()=>n.value),xe=K(()=>o.value);return(L,w)=>(a(),i(Z,null,[r(Ee,{show:b.show,title:vo,"api-endpoint":po,"http-method":fo,"form-data":t,"submit-button-text":go,"success-message":bo,"before-submit":C,onClose:$e,onSubmitted:Me,"max-width":"4xl"},{default:h(({errors:te})=>[e("div",null,[b.projectId?x("",!0):(a(),i("div",Es,[r(ge,{id:"task-project",modelValue:t.project_id,"onUpdate:modelValue":w[0]||(w[0]=R=>t.project_id=R),options:y.value,"value-key":"value","label-key":"label",placeholder:"Select a project",required:!0},null,8,["modelValue","options"]),r(X,{message:te.project_id?te.project_id[0]:"",class:"mt-2"},null,8,["message"])])),t.project_id?(a(),i("div",Vs,[e("div",Is,[r(pe,{id:"task-name",modelValue:t.name,"onUpdate:modelValue":w[1]||(w[1]=R=>t.name=R),type:"text",class:"block w-full text-xl font-semibold border-gray-200",placeholder:"Task Title",required:""},null,8,["modelValue"]),r(X,{message:te.name?te.name[0]:"",class:"mt-2"},null,8,["message"]),t.name?(a(),i("div",Bs,[U(e("textarea",{id:"task-description","onUpdate:modelValue":w[2]||(w[2]=R=>t.description=R),class:"flex-grow w-full rounded-md border-gray-200 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",placeholder:"Add a description..."},null,512),[[ie,t.description]]),r(X,{message:te.description?te.description[0]:"",class:"mt-2"},null,8,["message"]),t.name&&t.description.length<10?(a(),i("p",Ds," Enter at least 10 characters to continue. ")):x("",!0)])):x("",!0)]),e("div",Ns,[t.description.length>=10?(a(),i("div",Us,[e("div",Ls,[e("div",zs,[w[28]||(w[28]=e("svg",{class:"h-5 w-5 text-gray-500 flex-shrink-0",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 20.25h12m-7.5-3.75v3.75m.75-12.75l3 3m0 0l3-3m-3 3v11.25m-4.5 0L7.5 21m0 0H6"})],-1)),e("div",Fs,[r(ge,{id:"task-milestone",modelValue:t.milestone_id,"onUpdate:modelValue":w[3]||(w[3]=R=>t.milestone_id=R),options:xe.value,"value-key":"id","label-key":"name",placeholder:"Select Milestone",class:"flex-grow",required:""},null,8,["modelValue","options"]),e("button",{type:"button",onClick:Ve,disabled:!t.project_id||$.value,class:"p-2 text-sm font-medium text-blue-600 bg-blue-50 rounded-md hover:bg-blue-100 disabled:opacity-50",title:"Add New Milestone"},w[27]||(w[27]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4v16m8-8H4"})],-1)]),8,Rs)])]),r(X,{message:te.milestone_id?te.milestone_id[0]:"",class:"mt-2"},null,8,["message"]),e("div",Os,[w[29]||(w[29]=e("svg",{class:"h-5 w-5 text-gray-500 flex-shrink-0",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 9.563C9 9.252 9.252 9 9.563 9h4.874c.311 0 .563.252.563.563v4.874c0 .311-.252.563-.563.563H9.564A.562.562 0 019 14.437V9.564z"})],-1)),r(ge,{id:"task-status",modelValue:t.status,"onUpdate:modelValue":w[4]||(w[4]=R=>t.status=R),options:c.map(R=>({value:R,label:R})),"value-key":"value","label-key":"label",class:"flex-grow"},null,8,["modelValue","options"])])]),t.milestone_id?(a(),i("div",qs,[w[30]||(w[30]=e("svg",{class:"h-5 w-5 text-gray-500 flex-shrink-0",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5"})],-1)),r(pe,{id:"task-due-date",modelValue:t.due_date,"onUpdate:modelValue":w[5]||(w[5]=R=>t.due_date=R),type:"date",class:"flex-grow",min:ee.value,max:le.value},null,8,["modelValue","min","max"])])):x("",!0),t.due_date?(a(),i("div",Hs,[w[31]||(w[31]=e("svg",{class:"h-5 w-5 text-gray-500 flex-shrink-0",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"})],-1)),r(ge,{id:"task-assigned-to",modelValue:t.assigned_to_user_id,"onUpdate:modelValue":w[6]||(w[6]=R=>t.assigned_to_user_id=R),options:lt.value,"value-key":"value","label-key":"label",placeholder:"Unassigned",class:"flex-grow","allow-empty":!0},null,8,["modelValue","options"])])):x("",!0),t.assigned_to_user_id?(a(),i("div",Ks,[w[32]||(w[32]=e("svg",{class:"h-5 w-5 text-gray-500 flex-shrink-0",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.568 3H5.25A2.25 2.25 0 003 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 005.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 009.568 3z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 6h.008v.008H6V6z"})],-1)),r(ge,{id:"task-type",modelValue:t.task_type_id,"onUpdate:modelValue":w[7]||(w[7]=R=>t.task_type_id=R),options:Ie.value,"value-key":"value","label-key":"label",placeholder:"Select Type",class:"flex-grow",required:""},null,8,["modelValue","options"])])):x("",!0),t.task_type_id?(a(),i("div",Ws,[r(O,{value:"Priority"}),e("div",Js,[e("button",{type:"button",onClick:w[8]||(w[8]=R=>t.priority="low"),class:q(["px-3 py-1 text-sm rounded-md w-full flex items-center justify-center gap-2",t.priority==="low"?"bg-white shadow":"text-gray-600 hover:bg-gray-200"])},w[33]||(w[33]=[e("svg",{class:"h-4 w-4 text-green-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 13.5L12 21m0 0l-7.5-7.5M12 21V3"})],-1),_(" Low ",-1)]),2),e("button",{type:"button",onClick:w[9]||(w[9]=R=>t.priority="medium"),class:q(["px-3 py-1 text-sm rounded-md w-full flex items-center justify-center gap-2",t.priority==="medium"?"bg-white shadow":"text-gray-600 hover:bg-gray-200"])},w[34]||(w[34]=[e("svg",{class:"h-4 w-4 text-yellow-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 9h16.5m-16.5 6.75h16.5"})],-1),_(" Medium ",-1)]),2),e("button",{type:"button",onClick:w[10]||(w[10]=R=>t.priority="high"),class:q(["px-3 py-1 text-sm rounded-md w-full flex items-center justify-center gap-2",t.priority==="high"?"bg-white shadow":"text-gray-600 hover:bg-gray-200"])},w[35]||(w[35]=[e("svg",{class:"h-4 w-4 text-red-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.5 10.5L12 3m0 0l7.5 7.5M12 3v18"})],-1),_(" High ",-1)]),2)])])):x("",!0),t.task_type_id?(a(),i("div",Ys,[e("div",Qs,[r(O,{value:"Effort (Story Points)"}),e("button",{type:"button",onClick:w[11]||(w[11]=R=>p.value=!0),class:"text-xs text-indigo-600 hover:text-indigo-800 flex items-center gap-1"},[r(N(Nt),{class:"h-4 w-4"}),w[36]||(w[36]=_(" Guide ",-1))])]),r(pe,{id:"task-effort",modelValue:t.effort,"onUpdate:modelValue":w[12]||(w[12]=R=>t.effort=R),type:"number",min:"0",class:"block w-full",placeholder:"e.g. 1, 2, 3, 5, 8"},null,8,["modelValue"]),r(X,{message:te.effort?te.effort[0]:"",class:"mt-2"},null,8,["message"])])):x("",!0)])):x("",!0)])])):x("",!0),t.description.length>=10?(a(),i("div",Zs,[e("div",Xs,[V.value?(a(),i("div",eo,[r(Dt,{modelValue:t.tags,"onUpdate:modelValue":w[13]||(w[13]=R=>t.tags=R),initialTags:t.tags_data,label:"Tags",placeholder:"Add tags...",error:te.tags?te.tags[0]:"",disabled:!t.project_id},null,8,["modelValue","initialTags","error","disabled"])])):x("",!0),E.value?(a(),i("div",to,[r(O,{for:"task-files",value:"Attachments"}),e("input",{id:"task-files",type:"file",class:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-violet-50 file:text-violet-700 hover:file:bg-violet-100",multiple:"",onChange:se},null,32)])):x("",!0),k.value?(a(),i("div",ao,[U(e("input",{id:"needs-approval",type:"checkbox","onUpdate:modelValue":w[14]||(w[14]=R=>t.needs_approval=R),class:"h-4 w-4 text-indigo-600 border-gray-300 rounded"},null,512),[[ct,t.needs_approval]]),w[37]||(w[37]=e("label",{for:"needs-approval",class:"ml-2 block text-sm text-gray-700"},"This task needs approval",-1))])):x("",!0),j.value?(a(),i("div",lo,[U(e("input",{id:"requires-qa",type:"checkbox","onUpdate:modelValue":w[15]||(w[15]=R=>t.requires_qa=R),class:"h-4 w-4 text-indigo-600 border-gray-300 rounded"},null,512),[[ct,t.requires_qa]]),w[38]||(w[38]=e("label",{for:"requires-qa",class:"ml-2 block text-sm text-gray-700"},"Required QA Task",-1))])):x("",!0),T.value?(a(),i("div",so,[e("div",null,[r(O,{value:"Schedule"}),B.value?(a(),i("div",oo,"Planned: "+S(B.value),1)):(a(),i("div",io,"No schedule attached"))]),e("div",no,[e("button",{type:"button",onClick:w[16]||(w[16]=(...R)=>N(H)&&N(H)(...R)),class:"px-3 py-2 text-sm font-medium text-indigo-600 bg-indigo-50 rounded-md hover:bg-indigo-100"},S(B.value?"Edit Schedule":"Add Schedule"),1),N(F)?(a(),i("button",{key:0,type:"button",onClick:w[17]||(w[17]=R=>F.value=null),class:"px-3 py-2 text-sm font-medium text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200"},"Clear")):x("",!0)])])):x("",!0)]),e("div",ro,[e("button",{type:"button",onClick:w[18]||(w[18]=R=>V.value=!V.value),class:q(["flex items-center gap-1 text-sm text-gray-600 hover:text-black bg-gray-100 hover:bg-gray-200 px-2 py-1 rounded-md transition-colors",{"bg-gray-300":V.value}])},w[39]||(w[39]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 7h.01M7 3h5a2 2 0 012 2v5a2 2 0 01-2 2H7a2 2 0 01-2-2V5a2 2 0 012-2zm0 0v11a2 2 0 002 2h5a2 2 0 002-2v-5a2 2 0 00-2-2H7z"})],-1),_("Tag",-1)]),2),e("button",{type:"button",onClick:w[19]||(w[19]=R=>E.value=!E.value),class:q(["flex items-center gap-1 text-sm text-gray-600 hover:text-black bg-gray-100 hover:bg-gray-200 px-2 py-1 rounded-md transition-colors",{"bg-gray-300":E.value}])},w[40]||(w[40]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})],-1),_("Attachment",-1)]),2),e("button",{type:"button",onClick:w[20]||(w[20]=R=>k.value=!k.value),class:q(["flex items-center gap-1 text-sm text-gray-600 hover:text-black bg-gray-100 hover:bg-gray-200 px-2 py-1 rounded-md transition-colors",{"bg-gray-300":k.value}])},w[41]||(w[41]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),_("Approval",-1)]),2),e("button",{type:"button",onClick:w[21]||(w[21]=R=>j.value=!j.value),class:q(["flex items-center gap-1 text-sm text-gray-600 hover:text-black bg-gray-100 hover:bg-gray-200 px-2 py-1 rounded-md transition-colors",{"bg-gray-300":j.value}])},w[42]||(w[42]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6l7 3v4c0 4.418-2.239 8-7 9-4.761-1-7-4.582-7-9V9l7-3z"})],-1),_("QA",-1)]),2),e("button",{type:"button",onClick:w[22]||(w[22]=R=>T.value=!T.value),class:q(["flex items-center gap-1 text-sm text-gray-600 hover:text-black bg-gray-100 hover:bg-gray-200 px-2 py-1 rounded-md transition-colors",{"bg-gray-300":T.value}])},w[43]||(w[43]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),_("Schedule",-1)]),2)])])):x("",!0)])]),_:1},8,["show","form-data"]),r(js,{show:N(z),title:"Add Schedule",onClose:N(P),onSave:N(I)},null,8,["show","onClose","onSave"]),r(Zl,{show:g.value,"project-id":t.project_id,onClose:w[23]||(w[23]=te=>g.value=!1),onSaved:ye},null,8,["show","project-id"]),r(Pe,{show:p.value,onClose:w[26]||(w[26]=te=>p.value=!1),"max-width":"lg"},{default:h(()=>[e("div",uo,[e("div",co,[w[45]||(w[45]=e("h3",{class:"text-lg font-medium text-gray-900"},"Effort Estimation Guide",-1)),e("button",{onClick:w[24]||(w[24]=te=>p.value=!1),class:"text-gray-400 hover:text-gray-500"},w[44]||(w[44]=[e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),r(Ut),e("div",mo,[r(Ne,{onClick:w[25]||(w[25]=te=>p.value=!1)},{default:h(()=>w[46]||(w[46]=[_("Close",-1)])),_:1,__:[46]})])])]),_:1},8,["show"])],64))}},ho={class:"space-y-4"},xo={class:"mt-4"},ko={class:"flex items-center space-x-6"},wo={class:"inline-flex items-center"},_o={class:"inline-flex items-center"},Ao={class:"inline-flex items-center"},To={__name:"CreateForm",props:{show:{type:Boolean,default:!1},apiEndpoint:{type:String,required:!0}},emits:["close","resourceCreated"],setup(b,{emit:A}){const m=b,s=A,t=Te({title:"",description:"",url:"",type:"website",thumbnail_url:"",visible_to_client:!0,visibility:"client",tags:[]}),p=[{value:"website",label:"Website"},{value:"youtube",label:"YouTube Video"},{value:"document",label:"Document"},{value:"image",label:"Image"},{value:"other",label:"Other"}],c=M(p);be(async()=>{try{const{data:o}=await fe.get("/api/options/shareable_resource_types");Array.isArray(o)&&o.length&&(c.value=o)}catch{c.value=p}});const y=o=>{const l={title:o.title,description:o.description,url:o.url,type:o.type,thumbnail_url:o.thumbnail_url,visibility:o.visibility,tags:o.tags};if(Array.isArray(o.tags)&&o.tags.length){const u=o.tags.map(v=>typeof v=="object"&&v!==null?v.id:v).filter(Boolean);l.tag_ids=u}return l},d=o=>{s("resourceCreated",o),n()},n=()=>{t.title="",t.description="",t.url="",t.type="website",t.thumbnail_url="",t.visible_to_client=!0,t.tags=[],s("close")};return(o,l)=>(a(),D(Ee,{show:m.show,title:"Add New Shareable Resource",apiEndpoint:m.apiEndpoint,httpMethod:"post",formData:t,formatDataForApi:y,submitButtonText:"Create Resource",successMessage:"Shareable resource created successfully!",onSubmitted:d,onClose:n},{default:h(({errors:u})=>[e("div",ho,[e("div",null,[r(O,{for:"title",value:"Title",class:"mb-1"}),r(pe,{id:"title",type:"text",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:t.title,"onUpdate:modelValue":l[0]||(l[0]=v=>t.title=v),required:""},null,8,["modelValue"]),r(X,{message:u.title?u.title[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[r(O,{for:"url",value:"Resource URL",class:"mb-1"}),r(pe,{id:"url",type:"url",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:t.url,"onUpdate:modelValue":l[1]||(l[1]=v=>t.url=v),required:""},null,8,["modelValue"]),r(X,{message:u.url?u.url[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[r(O,{for:"type",value:"Resource Type",class:"mb-1"}),r(ge,{id:"type",modelValue:t.type,"onUpdate:modelValue":l[2]||(l[2]=v=>t.type=v),options:c.value,valueKey:"value",labelKey:"label",placeholder:"Select Resource Type",required:"",class:"mt-1 block w-full"},null,8,["modelValue","options"]),r(X,{message:u.type?u.type[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[r(O,{for:"thumbnail_url",value:"Thumbnail URL (Optional)",class:"mb-1"}),r(pe,{id:"thumbnail_url",type:"url",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:t.thumbnail_url,"onUpdate:modelValue":l[3]||(l[3]=v=>t.thumbnail_url=v)},null,8,["modelValue"]),r(X,{message:u.thumbnail_url?u.thumbnail_url[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[r(O,{for:"description",value:"Description (Optional)",class:"mb-1"}),U(e("textarea",{id:"description",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-lg shadow-sm mt-1 block w-full","onUpdate:modelValue":l[4]||(l[4]=v=>t.description=v),rows:"3"},null,512),[[ie,t.description]]),r(X,{message:u.description?u.description[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[r(Dt,{modelValue:t.tags,"onUpdate:modelValue":l[5]||(l[5]=v=>t.tags=v),label:"Associated Tags",placeholder:"Search or add tags",error:u.tags?u.tags[0]:""},null,8,["modelValue","error"])]),e("div",xo,[r(O,{value:"Visibility",class:"mb-2"}),e("div",ko,[e("label",wo,[U(e("input",{type:"radio",class:"form-radio",value:"client","onUpdate:modelValue":l[6]||(l[6]=v=>t.visibility=v)},null,512),[[He,t.visibility]]),l[9]||(l[9]=e("span",{class:"ml-2"},"Visible to Client",-1))]),e("label",_o,[U(e("input",{type:"radio",class:"form-radio",value:"team","onUpdate:modelValue":l[7]||(l[7]=v=>t.visibility=v)},null,512),[[He,t.visibility]]),l[10]||(l[10]=e("span",{class:"ml-2"},"Visible to Team",-1))]),e("label",Ao,[U(e("input",{type:"radio",class:"form-radio",value:"private","onUpdate:modelValue":l[8]||(l[8]=v=>t.visibility=v)},null,512),[[He,t.visibility]]),l[11]||(l[11]=e("span",{class:"ml-2"},"Private",-1))])]),r(X,{message:u.visibility?u.visibility[0]:"",class:"mt-2"},null,8,["message"])])])]),_:1},8,["show","apiEndpoint","formData"]))}},Mo=at(To,[["__scopeId","data-v-9f619b0e"]]),$o={class:"flex border-b border-gray-200"},Co={key:0,class:"ml-2 px-2 py-1 text-xs font-bold bg-red-600 text-white rounded-full"},So={class:"p-4 space-y-2 overflow-y-auto"},Go={key:0,class:"p-6 text-center text-gray-500"},jo={key:0},Po={key:1},Eo=["onClick"],Vo={class:"flex-1 min-w-0"},Io={class:"flex items-start justify-between gap-2 mb-1"},Bo={class:"flex-1 min-w-0"},Do={key:0,class:"text-base font-semibold text-gray-900 truncate"},No={key:1,class:"text-xs text-gray-500"},Uo={key:0,class:"text-sm text-gray-600 mt-1 mb-2"},Lo={class:"flex items-center text-xs text-gray-500 font-medium"},zo={key:0},Fo={key:1,class:"mx-2"},Ro={key:2},Oo={__name:"NotificationsSidebar",setup(b){const A=K(()=>Ke.value.notifications),m=M("New"),s=K(()=>m.value==="New"?A.value.filter(y=>!y.isRead):A.value),t=async y=>{await jt(y.view_id);const d=y.task_id||p(y.url),n=y.project_id||c(y.url);d&&n?(Pt(d,n),At()):(console.warn("Could not open task sidebar. Falling back to opening URL in new tab."),y.url&&window.open(y.url,"_blank"))},p=y=>{const d=y.match(/\/task\/(\d+)/);return d?parseInt(d[1]):null},c=y=>{const d=y.match(/\/project\/(\d+)\//);return d?parseInt(d[1]):null};return(y,d)=>(a(),D(Bt,{show:N(Ke).show,"onUpdate:show":N(At),title:"Notifications","initial-width":35,class:"z-[100]"},{content:h(()=>[e("div",$o,[e("button",{onClick:d[0]||(d[0]=n=>m.value="New"),class:q([{"border-blue-600 text-blue-600 font-semibold":m.value==="New","border-transparent text-gray-500 hover:text-gray-700":m.value!=="New"},"flex-1 py-4 px-1 text-center text-sm border-b-2 transition-colors duration-200"])},[d[2]||(d[2]=_(" New ",-1)),A.value.filter(n=>!n.isRead).length>0?(a(),i("span",Co,S(A.value.filter(n=>!n.isRead).length),1)):x("",!0)],2),e("button",{onClick:d[1]||(d[1]=n=>m.value="All"),class:q([{"border-blue-600 text-blue-600 font-semibold":m.value==="All","border-transparent text-gray-500 hover:text-gray-700":m.value!=="All"},"flex-1 py-4 px-1 text-center text-sm border-b-2 transition-colors duration-200"])}," All ",2)]),e("div",So,[s.value.length===0?(a(),i("div",Go,[m.value==="New"?(a(),i("span",jo,"You have no new notifications.")):(a(),i("span",Po,"You have no notifications."))])):x("",!0),(a(!0),i(Z,null,oe(s.value,n=>(a(),i("div",{key:n.id,class:q(["bg-white rounded-xl shadow-sm p-4 flex items-start space-x-4 border border-gray-200 transition-all duration-200 hover:shadow-md cursor-pointer",{"bg-gray-50":n.isRead}]),onClick:o=>t(n)},[e("div",Vo,[e("div",Io,[e("div",Bo,[n.title?(a(),i("h3",Do,S(n.title),1)):x("",!0),n.project_name?(a(),i("p",No,S(n.project_name),1)):x("",!0)])]),n.message?(a(),i("p",Uo,S(n.message),1)):x("",!0),e("div",Lo,[n.due_date?(a(),i("span",zo,"Due: "+S(N(Gt)(n.due_date)),1)):x("",!0),n.due_date&&n.priority?(a(),i("span",Fo,"â€¢")):x("",!0),n.priority?(a(),i("span",Ro,"Priority: "+S(n.priority),1)):x("",!0)])])],10,Eo))),128))])]),_:1},8,["show","onUpdate:show"]))}},qo={class:"space-y-4"},Ho={key:0,class:"text-red-600 text-xs mt-1"},Ko={key:0,class:"text-red-600 text-xs mt-1"},Wo={key:0,class:"text-red-600 text-xs mt-1"},Jo={__name:"KudoModal",props:{show:{type:Boolean,default:!1}},emits:["close","submitted"],setup(b,{emit:A}){const m=A,s=M([]),t=M([]),p=Te({recipient_id:"",project_id:"",comment:""}),c=M({}),y=async()=>{try{const{data:l}=await window.axios.get("/api/projects-simplified");s.value=(l||[]).map(u=>({value:u.id,label:u.name}))}catch{s.value=[]}},d=async l=>{if(t.value=[],!!l)try{const{data:u}=await window.axios.get(`/api/projects/${l}/users`);t.value=(u||[]).map(v=>({value:v.id,label:`${v.name} (${v.email})`}))}catch{t.value=[]}};ne(()=>p.project_id,l=>{l&&d(l)}),be(()=>{y()});const n=()=>{p.recipient_id="",p.project_id="",p.comment="",c.value={}},o=l=>{n(),m("submitted",l)};return(l,u)=>(a(),D(Ee,{show:b.show,title:"Give a Kudo âœ¨","api-endpoint":"/api/kudos","http-method":"post","form-data":p,"submit-button-text":"Submit Kudo","success-message":"Kudo submitted! Pending approval.",onClose:u[3]||(u[3]=v=>l.$emit("close")),onSubmitted:o},{default:h(({errors:v})=>[e("div",qo,[e("div",null,[u[4]||(u[4]=e("label",{class:"block text-sm font-medium text-gray-700"},"Project",-1)),r(ge,{options:s.value,modelValue:p.project_id,"onUpdate:modelValue":u[0]||(u[0]=$=>p.project_id=$),placeholder:"Select a project..."},null,8,["options","modelValue"]),v.project_id?(a(),i("p",Ho,S(v.project_id[0]),1)):x("",!0)]),e("div",null,[u[5]||(u[5]=e("label",{class:"block text-sm font-medium text-gray-700"},"Recipient",-1)),r(ge,{options:t.value,modelValue:p.recipient_id,"onUpdate:modelValue":u[1]||(u[1]=$=>p.recipient_id=$),placeholder:"Select a teammate..."},null,8,["options","modelValue"]),v.recipient_id?(a(),i("p",Ko,S(v.recipient_id[0]),1)):x("",!0)]),e("div",null,[u[6]||(u[6]=e("label",{class:"block text-sm font-medium text-gray-700"},"Comment",-1)),U(e("textarea",{"onUpdate:modelValue":u[2]||(u[2]=$=>p.comment=$),rows:"4",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",placeholder:"e.g., Thank you for helping with the last-minute changes!"},null,512),[[ie,p.comment]]),v.comment?(a(),i("p",Wo,S(v.comment[0]),1)):x("",!0)])])]),_:1},8,["show","form-data"]))}},Yo={class:"flex items-center p-4 h-16 border-b border-gray-700"},Qo={key:0,class:"text-xl font-semibold flex-1 truncate"},Zo=["title"],Xo={key:0,class:"p-4 border-b border-gray-700"},ei={class:"relative"},ti={key:1,class:"flex-1 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-500 scrollbar-track-gray-700 p-4"},ai={key:0,class:"mb-4"},li={class:"ml-2 mt-2 space-y-1"},si=["onClick"],oi={class:"text-sm font-medium text-gray-300 truncate"},ii={class:"ml-4 mt-1 space-y-1"},ni={class:"truncate"},ri={key:1,class:"mb-4"},ui={class:"ml-2 mt-2 space-y-1"},di=["onClick"],ci={class:"text-sm font-medium text-gray-300 truncate"},mi={class:"ml-4 mt-1 space-y-1"},vi={class:"truncate"},pi={key:2,class:"mb-4"},fi={class:"ml-2 mt-2 space-y-1"},gi={class:"truncate"},bi={key:3,class:"mb-4"},yi={class:"ml-2 mt-2 space-y-1"},hi={class:"truncate"},xi={key:4,class:"text-gray-400 text-sm text-center py-4"},ki={key:5,class:"text-gray-400 text-sm text-center py-4"},wi={key:2,class:"flex flex-col items-center pt-4 space-y-4"},_i={key:0,class:"text-gray-400 text-xs text-center px-2"},Ai={__name:"LeftSidebar",props:{allProjects:{type:Array,default:()=>[]},activeProjectId:{type:Number,default:null}},emits:["project-selected"],setup(b,{emit:A}){const m=b,s=A,t=M(localStorage.getItem("leftSidebarCollapsed")!=="false"),p=M(""),c=M({}),y=K(()=>{const T=new Set;return m.allProjects.forEach(k=>{k.project_type&&T.add(k.project_type)}),Array.from(T).sort()}),d=K(()=>{const T=new Set;return m.allProjects.forEach(k=>{Array.isArray(k.tags)&&k.tags.forEach(j=>T.add(j))}),Array.from(T).sort()}),n=K(()=>{if(!p.value)return m.allProjects;const T=p.value.toLowerCase();return m.allProjects.filter(k=>{var j,z,F;return k.name.toLowerCase().includes(T)||((j=k.description)==null?void 0:j.toLowerCase().includes(T))||((z=k.project_type)==null?void 0:z.toLowerCase().includes(T))||Array.isArray(k.tags)&&k.tags.some(H=>H.toLowerCase().includes(T))||((F=k.status)==null?void 0:F.toLowerCase().includes(T))})}),o=K(()=>{const T={};n.value.forEach(k=>{k.project_type&&k.status==="active"&&(T[k.project_type]||(T[k.project_type]=[]),T[k.project_type].push(k))});for(const k in T)T[k].sort((j,z)=>j.name.localeCompare(z.name));return T}),l=K(()=>{const T={};n.value.forEach(k=>{Array.isArray(k.tags)&&k.tags.length>0&&k.tags.forEach(j=>{T[j]||(T[j]=[]),T[j].push(k)})});for(const k in T)T[k]=[...new Set(T[k])].sort((j,z)=>j.name.localeCompare(z.name));return T}),u=K(()=>n.value.filter(T=>T.status!=="active").sort((T,k)=>T.name.localeCompare(k.name))),v=K(()=>n.value.filter(T=>!T.project_type&&(!Array.isArray(T.tags)||T.tags.length===0)).sort((T,k)=>T.name.localeCompare(k.name)));ne(()=>m.allProjects,()=>{y.value.forEach(T=>{const k=`type-${T}`;c.value[k]===void 0&&(c.value[k]=!0)}),d.value.forEach(T=>{const k=`tag-${T}`;c.value[k]===void 0&&(c.value[k]=!0)}),c.value["main-types"]===void 0&&(c.value["main-types"]=!1),c.value["main-tags"]===void 0&&(c.value["main-tags"]=!1),c.value["inactive-projects"]===void 0&&(c.value["inactive-projects"]=!1),c.value.uncategorized===void 0&&(c.value.uncategorized=!1)},{immediate:!0}),ne(t,T=>{localStorage.setItem("leftSidebarCollapsed",T)});const $=()=>{t.value=!t.value},g=T=>{c.value[T]=!c.value[T]},V=T=>{s("project-selected",T)},E=()=>{p.value=""};return(T,k)=>(a(),i("div",{class:q({"w-64":!t.value,"w-16":t.value,"min-w-16":!0,"bg-gray-800 text-white flex flex-col transition-all duration-300 ease-in-out shrink-0 h-screen overflow-hidden":!0})},[e("div",Yo,[t.value?x("",!0):(a(),i("h2",Qo,"Projects")),e("button",{onClick:$,class:"p-2 rounded-full hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500",title:t.value?"Expand Sidebar":"Collapse Sidebar"},[(a(),i("svg",{class:q(["w-6 h-6 text-gray-400 transform transition-transform duration-300",{"rotate-180":t.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},k[5]||(k[5]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"},null,-1)]),2))],8,Zo)]),t.value?x("",!0):(a(),i("div",Xo,[e("div",ei,[U(e("input",{type:"text","onUpdate:modelValue":k[0]||(k[0]=j=>p.value=j),placeholder:"Search all projects...",class:"w-full p-2 rounded-md bg-gray-700 border border-gray-600 text-white placeholder-gray-400 focus:ring-indigo-500 focus:border-indigo-500 text-sm"},null,512),[[ie,p.value]]),p.value?(a(),i("button",{key:0,onClick:E,class:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-200",title:"Clear search"},k[6]||(k[6]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))):x("",!0)])])),t.value?(a(),i("div",wi,[(a(!0),i(Z,null,oe(m.allProjects,j=>(a(),D(N(we),{key:j.id,href:T.route("projects.show",j.id),onClick:z=>V(j.id),class:q({"w-10 h-10 rounded-full flex items-center justify-center text-xs font-bold transition-all duration-200":!0,"bg-indigo-600 text-white":j.id===b.activeProjectId,"bg-gray-700 text-gray-300 hover:bg-gray-600":j.id!==b.activeProjectId}),title:j.name},{default:h(()=>[_(S(j.name.charAt(0).toUpperCase()),1)]),_:2},1032,["href","onClick","class","title"]))),128)),b.allProjects.length===0?(a(),i("div",_i," No Projects ")):x("",!0)])):(a(),i("div",ti,[Object.keys(o.value).length>0?(a(),i("div",ai,[e("div",{class:"flex items-center justify-between cursor-pointer py-2 hover:bg-gray-700 rounded-md px-2",onClick:k[1]||(k[1]=j=>g("main-types"))},[k[8]||(k[8]=e("h3",{class:"text-sm font-semibold text-gray-400"},"Active Projects by Type",-1)),(a(),i("svg",{class:q(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!c.value["main-types"]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},k[7]||(k[7]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))]),U(e("div",li,[(a(!0),i(Z,null,oe(o.value,(j,z)=>(a(),i("div",{key:z},[e("div",{class:"flex items-center justify-between cursor-pointer py-1 hover:bg-gray-700 rounded-md px-2",onClick:F=>g(`type-${z}`)},[e("h4",oi,S(z),1),(a(),i("svg",{class:q(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!c.value[`type-${z}`]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},k[9]||(k[9]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))],8,si),U(e("ul",ii,[(a(!0),i(Z,null,oe(j,F=>(a(),i("li",{key:F.id},[r(N(we),{href:T.route("projects.show",F.id),onClick:H=>V(F.id),class:q({"block w-full text-left px-3 py-2 rounded-md transition-colors":!0,"bg-indigo-600 text-white":F.id===b.activeProjectId,"hover:bg-gray-700 text-gray-200":F.id!==b.activeProjectId,"font-bold":F.id===b.activeProjectId})},{default:h(()=>[e("span",ni,S(F.name),1)]),_:2},1032,["href","onClick","class"])]))),128))],512),[[Ae,!c.value[`type-${z}`]]])]))),128))],512),[[Ae,!c.value["main-types"]]])])):x("",!0),Object.keys(l.value).length>0?(a(),i("div",ri,[e("div",{class:"flex items-center justify-between cursor-pointer py-2 hover:bg-gray-700 rounded-md px-2",onClick:k[2]||(k[2]=j=>g("main-tags"))},[k[11]||(k[11]=e("h3",{class:"text-sm font-semibold text-gray-400"},"Projects by Tag",-1)),(a(),i("svg",{class:q(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!c.value["main-tags"]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},k[10]||(k[10]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))]),U(e("div",ui,[(a(!0),i(Z,null,oe(l.value,(j,z)=>(a(),i("div",{key:z},[e("div",{class:"flex items-center justify-between cursor-pointer py-1 hover:bg-gray-700 rounded-md px-2",onClick:F=>g(`tag-${z}`)},[e("h4",ci,S(z),1),(a(),i("svg",{class:q(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!c.value[`tag-${z}`]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},k[12]||(k[12]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))],8,di),U(e("ul",mi,[(a(!0),i(Z,null,oe(j,F=>(a(),i("li",{key:F.id},[r(N(we),{href:T.route("projects.show",F.id),onClick:H=>V(F.id),class:q({"block w-full text-left px-3 py-2 rounded-md transition-colors":!0,"bg-indigo-600 text-white":F.id===b.activeProjectId,"hover:bg-gray-700 text-gray-200":F.id!==b.activeProjectId,"font-bold":F.id===b.activeProjectId})},{default:h(()=>[e("span",vi,S(F.name),1)]),_:2},1032,["href","onClick","class"])]))),128))],512),[[Ae,!c.value[`tag-${z}`]]])]))),128))],512),[[Ae,!c.value["main-tags"]]])])):x("",!0),u.value.length>0?(a(),i("div",pi,[e("div",{class:"flex items-center justify-between cursor-pointer py-2 hover:bg-gray-700 rounded-md px-2",onClick:k[3]||(k[3]=j=>g("inactive-projects"))},[k[14]||(k[14]=e("h3",{class:"text-sm font-semibold text-gray-400"},"Inactive Projects",-1)),(a(),i("svg",{class:q(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!c.value["inactive-projects"]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},k[13]||(k[13]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))]),U(e("ul",fi,[(a(!0),i(Z,null,oe(u.value,j=>(a(),i("li",{key:j.id},[r(N(we),{href:T.route("projects.show",j.id),onClick:z=>V(j.id),class:q({"block w-full text-left px-3 py-2 rounded-md transition-colors":!0,"bg-indigo-600 text-white":j.id===b.activeProjectId,"hover:bg-gray-700 text-gray-200":j.id!==b.activeProjectId,"font-bold":j.id===b.activeProjectId})},{default:h(()=>[e("span",gi,S(j.name)+" ("+S(j.status.replace("_"," "))+")",1)]),_:2},1032,["href","onClick","class"])]))),128))],512),[[Ae,!c.value["inactive-projects"]]])])):x("",!0),v.value.length>0?(a(),i("div",bi,[e("div",{class:"flex items-center justify-between cursor-pointer py-2 hover:bg-gray-700 rounded-md px-2",onClick:k[4]||(k[4]=j=>g("uncategorized"))},[k[16]||(k[16]=e("h3",{class:"text-sm font-semibold text-gray-400"},"Uncategorized",-1)),(a(),i("svg",{class:q(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!c.value.uncategorized}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},k[15]||(k[15]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))]),U(e("ul",yi,[(a(!0),i(Z,null,oe(v.value,j=>(a(),i("li",{key:j.id},[r(N(we),{href:T.route("projects.show",j.id),onClick:z=>V(j.id),class:q({"block w-full text-left px-3 py-2 rounded-md transition-colors":!0,"bg-indigo-600 text-white":j.id===b.activeProjectId,"hover:bg-gray-700 text-gray-200":j.id!==b.activeProjectId,"font-bold":j.id===b.activeProjectId})},{default:h(()=>[e("span",hi,S(j.name),1)]),_:2},1032,["href","onClick","class"])]))),128))],512),[[Ae,!c.value.uncategorized]])])):x("",!0),n.value.length===0?(a(),i("div",xi," No projects found matching your search. ")):b.allProjects.length===0&&!p.value?(a(),i("div",ki," No projects available. ")):x("",!0)]))],2))}},Ti=at(Ai,[["__scopeId","data-v-417d431f"]]),Mi={class:"relative"},pt={__name:"Dropdown",props:{align:{type:String,default:"right"},width:{type:String,default:"48"},contentClasses:{type:String,default:"py-1 bg-white"}},setup(b){const A=b,m=y=>{c.value&&y.key==="Escape"&&(c.value=!1)};be(()=>document.addEventListener("keydown",m)),et(()=>document.removeEventListener("keydown",m));const s=K(()=>{const y={48:"w-48",64:"w-64",72:"w-72",80:"w-80",96:"w-96",full:"w-full",screen:"w-screen",auto:""},d=A.width.toString();return y[d]??y[48]}),t=K(()=>A.width.toString()==="screen"),p=K(()=>A.align==="left"?"ltr:origin-top-left rtl:origin-top-right start-0":A.align==="right"?"ltr:origin-top-right rtl:origin-top-left end-0":"origin-top"),c=M(!1);return(y,d)=>(a(),i("div",Mi,[e("div",{onClick:d[0]||(d[0]=n=>c.value=!c.value)},[je(y.$slots,"trigger")]),U(e("div",{class:"fixed inset-0 z-40",onClick:d[1]||(d[1]=n=>c.value=!1)},null,512),[[Ae,c.value]]),r(na,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:h(()=>[U(e("div",{class:q(["z-50 mt-2 rounded-md shadow-lg",t.value?"fixed left-0 right-0":"absolute",p.value,s.value]),style:{display:"none"},onClick:d[2]||(d[2]=n=>c.value=!1)},[e("div",{class:q(["rounded-md ring-1 ring-black ring-opacity-5",b.contentClasses])},[je(y.$slots,"content")],2)],2),[[Ae,c.value]])]),_:3})]))}},ae={__name:"DropdownLink",props:{href:{type:String,required:!0},method:{type:String,default:"get"},as:{type:String,default:"a"}},setup(b){return(A,m)=>(a(),D(N(we),Vt({href:b.href,method:b.method,as:b.as},A.$attrs,{class:"block w-full px-4 py-2 text-start text-sm leading-5 text-gray-700 transition duration-150 ease-in-out hover:bg-gray-100 focus:bg-gray-100 focus:outline-none"}),{default:h(()=>[je(A.$slots,"default")]),_:3},16,["href","method","as"]))}},he={__name:"NavLink",props:{href:{type:String,required:!0},active:{type:Boolean}},setup(b){const A=b,m=K(()=>A.active?"inline-flex items-center px-1 pt-1 border-b-2 border-indigo-400 text-sm font-medium leading-5 text-gray-900 focus:outline-none focus:border-indigo-700 transition duration-150 ease-in-out":"inline-flex items-center px-1 pt-1 border-b-2 border-transparent text-sm font-medium leading-5 text-gray-500 hover:text-gray-700 hover:border-gray-300 focus:outline-none focus:text-gray-700 focus:border-gray-300 transition duration-150 ease-in-out");return(s,t)=>(a(),D(N(we),{href:b.href,class:q(m.value)},{default:h(()=>[je(s.$slots,"default")]),_:3},8,["href","class"]))}};/**
 * @license lucide-vue-next v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $i=Je("award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-vue-next v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ci=Je("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);/**
 * @license lucide-vue-next v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Si=Je("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-vue-next v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gi=Je("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-vue-next v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=Je("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function St(b,A){return a(),i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M8.75 1A2.75 2.75 0 0 0 6 3.75v.443c-.795.077-1.584.176-2.365.298a.75.75 0 1 0 .23 1.482l.149-.022.841 10.518A2.75 2.75 0 0 0 7.596 19h4.807a2.75 2.75 0 0 0 2.742-2.53l.841-10.52.149.023a.75.75 0 0 0 .23-1.482A41.03 41.03 0 0 0 14 4.193V3.75A2.75 2.75 0 0 0 11.25 1h-2.5ZM10 4c.84 0 1.673.025 2.5.075V3.75c0-.69-.56-1.25-1.25-1.25h-2.5c-.69 0-1.25.56-1.25 1.25v.325C8.327 4.025 9.16 4 10 4ZM8.58 7.72a.75.75 0 0 0-1.5.06l.3 7.5a.75.75 0 1 0 1.5-.06l-.3-7.5Zm4.34.06a.75.75 0 1 0-1.5-.06l-.3 7.5a.75.75 0 1 0 1.5.06l.3-7.5Z","clip-rule":"evenodd"})])}const ji={class:"hidden sm:flex sm:items-center"},Pi={class:"mx-auto w-full max-w-6xl"},Ei={class:"grid grid-cols-2 md:grid-cols-4 gap-8"},Vi={class:"space-y-1"},Ii={class:"space-y-1"},Bi={class:"space-y-1"},Di={class:"space-y-1"},Ni={class:"p-4"},Ui={class:"flex justify-between items-center mb-4"},Li={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},zi={class:"border rounded-lg p-4"},Fi={class:"space-y-3"},Ri={class:"flex justify-end"},Oi={class:"border rounded-lg p-4"},qi={class:"space-y-3"},Hi={class:"flex items-center gap-3 mt-2"},Ki={class:"flex items-center gap-2 text-sm"},Wi={class:"flex items-center gap-2 text-sm"},Ji={key:0},Yi={key:1},Qi={class:"mt-3"},Zi={class:"flex justify-end"},Xi={__name:"AdminDropdown",setup(b){const A=M(!1),m=M(!1),s=Te({sets:[],models:[],categoryName:"",setMode:"existing",selectedSetId:null,newSetName:"",newSetModels:[],setName:"",setModels:[],errors:{}}),t=async()=>{A.value=!0,await Promise.all([p(),c()])},p=async()=>{try{const{data:o}=await window.axios.get("/api/category-sets");s.sets=o.map(l=>({value:l.id,label:l.name,raw:l}))}catch(o){console.error("Failed to load sets",o)}},c=async()=>{try{const{data:o}=await window.axios.get("/api/models/available");s.models=o}catch(o){console.error("Failed to load models",o)}},y=()=>{s.errors={}},d=async()=>{var o;y(),m.value=!0;try{const l={name:s.setName,allowed_models:s.setModels},{data:u}=await window.axios.post("/api/category-sets",l);await p(),s.setName="",s.setModels=[]}catch(l){((o=l.response)==null?void 0:o.status)===422&&(s.errors=l.response.data.errors||{})}finally{m.value=!1}},n=async()=>{var o;y(),m.value=!0;try{const l={name:s.categoryName};s.setMode==="existing"?l.category_set_id=s.selectedSetId:(l.new_set_name=s.newSetName,l.allowed_models=s.newSetModels);const{data:u}=await window.axios.post("/api/categories",l);await p(),s.categoryName="",s.selectedSetId=null,s.newSetName="",s.newSetModels=[],s.setMode="existing"}catch(l){((o=l.response)==null?void 0:o.status)===422&&(s.errors=l.response.data.errors||{})}finally{m.value=!1}};return(o,l)=>{const u=mt("permission");return a(),i(Z,null,[e("div",ji,[r(pt,{align:"left",width:"screen","content-classes":"py-6 bg-white p-6 w-full shadow-lg"},{trigger:h(()=>l[10]||(l[10]=[e("span",{class:"inline-flex rounded-md"},[e("button",{type:"button",class:"inline-flex items-center rounded-md border border-transparent bg-white px-3 py-2 text-sm font-medium leading-4 text-gray-700 hover:text-gray-900 focus:outline-none"},[_(" Admin "),e("svg",{class:"ms-2 -me-0.5 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])])],-1)])),content:h(()=>[e("div",Pi,[e("div",Ei,[e("div",null,[l[18]||(l[18]=e("h4",{class:"text-xs font-semibold uppercase tracking-wider text-gray-500 mb-3"},"Management",-1)),e("div",Vi,[U((a(),D(ae,{href:o.route("projects.index"),active:o.route().current("projects.index"),class:"!px-2 !py-1.5"},{default:h(()=>l[11]||(l[11]=[_("Projects",-1)])),_:1,__:[11]},8,["href","active"])),[[u,"manage_projects"]]),U((a(),D(ae,{href:o.route("clients.page"),active:o.route().current("clients.page"),class:"!px-2 !py-1.5"},{default:h(()=>l[12]||(l[12]=[_("Clients",-1)])),_:1,__:[12]},8,["href","active"])),[[u,"create_clients"]]),U((a(),D(ae,{href:o.route("users.page"),active:o.route().current("users.page"),class:"!px-2 !py-1.5"},{default:h(()=>l[13]||(l[13]=[_("Users",-1)])),_:1,__:[13]},8,["href","active"])),[[u,"create_users"]]),U((a(),D(ae,{href:o.route("leads.page"),active:o.route().current("leads.page"),class:"!px-2 !py-1.5"},{default:h(()=>l[14]||(l[14]=[_("Leads",-1)])),_:1,__:[14]},8,["href","active"])),[[u,"manage_projects"]]),U((a(),D(ae,{href:"/campaigns",active:o.$page.url&&o.$page.url.startsWith("/campaigns"),class:"!px-2 !py-1.5"},{default:h(()=>l[15]||(l[15]=[_("Campaigns",-1)])),_:1,__:[15]},8,["active"])),[[u,"manage_projects"]]),U((a(),D(ae,{href:"/admin/productivity",active:o.$page.url&&o.$page.url.startsWith("/productivity"),class:"!px-2 !py-1.5"},{default:h(()=>l[16]||(l[16]=[_("Productivity Report",-1)])),_:1,__:[16]},8,["active"])),[[u,"manage_projects"]]),U((a(),D(ae,{href:o.route("admin.activity-report.index"),active:o.route().current("admin.activity-report.index"),class:"!px-2 !py-1.5"},{default:h(()=>l[17]||(l[17]=[_("Activity Report",-1)])),_:1,__:[17]},8,["href","active"])),[[u,"manage_projects"]])])]),e("div",null,[l[22]||(l[22]=e("h4",{class:"text-xs font-semibold uppercase tracking-wider text-gray-500 mb-3"},"Planning / Sharing",-1)),e("div",Ii,[U((a(),D(ae,{href:o.route("availability.index"),active:o.route().current("availability.index"),class:"!px-2 !py-1.5"},{default:h(()=>l[19]||(l[19]=[_("Weekly Availability",-1)])),_:1,__:[19]},8,["href","active"])),[[u,"create_users"]]),U((a(),D(ae,{href:o.route("admin.notice-board.index"),class:"!px-2 !py-1.5"},{default:h(()=>l[20]||(l[20]=[_("Notice Board",-1)])),_:1,__:[20]},8,["href"])),[[u,"manage_notices"]]),U((a(),D(ae,{href:o.route("shareable-resources.page"),class:"!px-2 !py-1.5"},{default:h(()=>l[21]||(l[21]=[_("Shareable Resources",-1)])),_:1,__:[21]},8,["href"])),[[u,"view_shareable_resources"]])])]),e("div",null,[l[31]||(l[31]=e("h4",{class:"text-xs font-semibold uppercase tracking-wider text-gray-500 mb-3"},"Configuration",-1)),e("div",Bi,[U((a(),D(ae,{href:o.route("task-types.page"),active:o.route().current("task-types.page"),class:"!px-2 !py-1.5"},{default:h(()=>l[23]||(l[23]=[_("Task Types",-1)])),_:1,__:[23]},8,["href","active"])),[[u,"manage_projects"]]),U((a(),D(ae,{href:"/admin/project-tiers",class:"!px-2 !py-1.5"},{default:h(()=>l[24]||(l[24]=[_("Project Tiers",-1)])),_:1,__:[24]})),[[u,"view_project_tiers"]]),U((a(),D(ae,{href:o.route("email-templates.page"),active:o.route().current("email-templates.page"),class:"!px-2 !py-1.5"},{default:h(()=>l[25]||(l[25]=[_("Email Templates",-1)])),_:1,__:[25]},8,["href","active"])),[[u,"manage_email_templates"]]),U((a(),D(ae,{href:o.route("placeholder-definitions.page"),active:o.route().current("placeholder-definitions.page"),class:"!px-2 !py-1.5"},{default:h(()=>l[26]||(l[26]=[_("Placeholder Definitions",-1)])),_:1,__:[26]},8,["href","active"])),[[u,"manage_placeholder_definitions"]]),U((a(),D(ae,{href:o.route("automation.page"),active:o.route().current("automation.page"),class:"!px-2 !py-1.5"},{default:h(()=>l[27]||(l[27]=[_("Automation",-1)])),_:1,__:[27]},8,["href","active"])),[[u,"create_automations"]]),U((a(),D(ae,{href:o.route("prompts.page"),active:o.route().current("prompts.page"),class:"!px-2 !py-1.5"},{default:h(()=>l[28]||(l[28]=[_("Prompts",-1)])),_:1,__:[28]},8,["href","active"])),[[u,"create_automations"]]),U((a(),D(ae,{href:o.route("schedules.index"),active:o.$page.url&&o.$page.url.startsWith("/schedules"),class:"!px-2 !py-1.5"},{default:h(()=>l[29]||(l[29]=[_("Schedules",-1)])),_:1,__:[29]},8,["href","active"])),[[u,"create_schedules"]]),r(ae,{href:o.route("admin.categories.index"),class:"!px-2 !py-1.5"},{default:h(()=>l[30]||(l[30]=[_("Categories",-1)])),_:1,__:[30]},8,["href"]),e("button",{type:"button",class:"!px-2 !py-1.5 text-left text-sm text-gray-700 hover:text-gray-900",onClick:t},"Quick Add")])]),e("div",null,[l[36]||(l[36]=e("h4",{class:"text-xs font-semibold uppercase tracking-wider text-gray-500 mb-3"},"Access & Finance",-1)),e("div",Di,[U((a(),D(ae,{href:o.route("admin.roles.index"),class:"!px-2 !py-1.5"},{default:h(()=>l[32]||(l[32]=[_("Manage Roles",-1)])),_:1,__:[32]},8,["href"])),[[u,"manage_roles"]]),U((a(),D(ae,{href:o.route("admin.permissions.index"),class:"!px-2 !py-1.5"},{default:h(()=>l[33]||(l[33]=[_("Manage Permissions",-1)])),_:1,__:[33]},8,["href"])),[[u,"assign_permissions"]]),U((a(),D(ae,{href:"/admin/monthly-budgets",class:"!px-2 !py-1.5"},{default:h(()=>l[34]||(l[34]=[_("Monthly Budgets",-1)])),_:1,__:[34]})),[[u,"manage_monthly_budgets"]]),U((a(),D(ae,{href:"/admin/bonus-calculator",class:"!px-2 !py-1.5"},{default:h(()=>l[35]||(l[35]=[_("Bonus Calculator",-1)])),_:1,__:[35]})),[[u,"view_monthly_budgets"]])])])])])]),_:1})]),r(Pe,{show:A.value,onClose:l[9]||(l[9]=v=>A.value=!1),maxWidth:"3xl"},{default:h(()=>{var v,$,g,V,E,T,k,j;return[e("div",Ni,[e("div",Ui,[l[37]||(l[37]=e("h2",{class:"text-lg font-semibold"},"Manage Categories",-1)),e("button",{onClick:l[0]||(l[0]=z=>A.value=!1),class:"text-gray-400 hover:text-gray-600"},"âœ•")]),e("div",Li,[e("div",zi,[l[39]||(l[39]=e("h3",{class:"text-sm font-semibold mb-3"},"Create Category Set",-1)),e("div",Fi,[e("div",null,[r(O,{value:"Set Name"}),r(pe,{modelValue:s.setName,"onUpdate:modelValue":l[1]||(l[1]=z=>s.setName=z),class:"w-full mt-1"},null,8,["modelValue"]),r(X,{message:($=(v=s.errors)==null?void 0:v.name)==null?void 0:$[0]},null,8,["message"])]),e("div",null,[r(O,{value:"Allowed Models (optional)"}),r(Xe,{options:s.models,modelValue:s.setModels,"onUpdate:modelValue":l[2]||(l[2]=z=>s.setModels=z),isMulti:!0,placeholder:"Select models"},null,8,["options","modelValue"])]),e("div",Ri,[r(ce,{type:"button",onClick:d,disabled:m.value},{default:h(()=>l[38]||(l[38]=[_("Create Set",-1)])),_:1,__:[38]},8,["disabled"])])])]),e("div",Oi,[l[43]||(l[43]=e("h3",{class:"text-sm font-semibold mb-3"},"Create Category",-1)),e("div",qi,[e("div",null,[r(O,{value:"Category Name"}),r(pe,{modelValue:s.categoryName,"onUpdate:modelValue":l[3]||(l[3]=z=>s.categoryName=z),class:"w-full mt-1"},null,8,["modelValue"]),r(X,{message:(V=(g=s.errors)==null?void 0:g.name)==null?void 0:V[0]},null,8,["message"])]),e("div",Hi,[e("label",Ki,[U(e("input",{type:"radio",value:"existing","onUpdate:modelValue":l[4]||(l[4]=z=>s.setMode=z)},null,512),[[He,s.setMode]]),l[40]||(l[40]=_(" Use Existing Set ",-1))]),e("label",Wi,[U(e("input",{type:"radio",value:"new","onUpdate:modelValue":l[5]||(l[5]=z=>s.setMode=z)},null,512),[[He,s.setMode]]),l[41]||(l[41]=_(" Create New Set ",-1))])]),s.setMode==="existing"?(a(),i("div",Ji,[r(O,{value:"Select Set"}),r(ge,{options:s.sets,modelValue:s.selectedSetId,"onUpdate:modelValue":l[6]||(l[6]=z=>s.selectedSetId=z),placeholder:"Choose a set"},null,8,["options","modelValue"]),r(X,{message:(T=(E=s.errors)==null?void 0:E.category_set_id)==null?void 0:T[0]},null,8,["message"])])):(a(),i("div",Yi,[r(O,{value:"New Set Name"}),r(pe,{modelValue:s.newSetName,"onUpdate:modelValue":l[7]||(l[7]=z=>s.newSetName=z),class:"w-full mt-1"},null,8,["modelValue"]),r(X,{message:(j=(k=s.errors)==null?void 0:k.new_set_name)==null?void 0:j[0]},null,8,["message"]),e("div",Qi,[r(O,{value:"Allowed Models (optional)"}),r(Xe,{options:s.models,modelValue:s.newSetModels,"onUpdate:modelValue":l[8]||(l[8]=z=>s.newSetModels=z),isMulti:!0,placeholder:"Select models"},null,8,["options","modelValue"])])])),e("div",Zi,[r(ce,{type:"button",onClick:n,disabled:m.value},{default:h(()=>l[42]||(l[42]=[_("Create Category",-1)])),_:1,__:[42]},8,["disabled"])])])])])])]}),_:1},8,["show"])],64)}}},en={class:"relative ms-3"},tn={class:"inline-flex rounded-md"},an={type:"button",class:"inline-flex items-center rounded-md border border-transparent bg-white px-3 py-2 text-sm font-medium leading-4 text-gray-500 transition duration-150 ease-in-out hover:text-gray-700 focus:outline-none"},ln={__name:"UserDropdown",emits:["logoutSuccess","logoutError"],setup(b,{emit:A}){const m=K(()=>We().props.auth.user),s=A,t=()=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization,s("logoutSuccess")},p=c=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization,window.location.href="/login",s("logoutError",c)};return(c,y)=>(a(),i("div",en,[r(pt,{align:"right",width:"48"},{trigger:h(()=>{var d;return[e("span",tn,[e("button",an,[_(S(m.value.name)+" ("+S((d=m.value.role_data)==null?void 0:d.name)+") ",1),y[0]||(y[0]=e("svg",{class:"ms-2 -me-0.5 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1))])])]}),content:h(()=>[r(ae,{href:c.route("profile.edit")},{default:h(()=>y[1]||(y[1]=[_(" Profile ",-1)])),_:1,__:[1]},8,["href"]),r(ae,{href:c.route("logout"),method:"post",as:"button",onSuccess:t,onError:p},{default:h(()=>y[2]||(y[2]=[_(" Log Out ",-1)])),_:1,__:[2]},8,["href"])]),_:1})]))}},sn={class:"hidden sm:flex sm:items-center"},on={class:"mx-auto w-full max-w-6xl"},nn={class:"grid grid-cols-2 md:grid-cols-3 gap-8"},rn={class:"space-y-1"},un={class:"space-y-1"},dn={key:0},cn={class:"space-y-1"},mn={__name:"BonusDropdown",setup(b){const{canDo:A}=tt();return(m,s)=>{const t=mt("permission");return a(),i("div",sn,[r(pt,{align:"left",width:"screen","content-classes":"py-6 bg-white p-6 w-full shadow-lg"},{trigger:h(()=>s[0]||(s[0]=[e("span",{class:"inline-flex rounded-md"},[e("button",{type:"button",class:"inline-flex items-center rounded-md border border-transparent bg-white px-3 py-2 text-sm font-medium leading-4 text-gray-700 hover:text-gray-900 focus:outline-none"},[_(" Team Resources "),e("svg",{class:"ms-2 -me-0.5 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])])],-1)])),content:h(()=>[e("div",on,[e("div",nn,[e("div",null,[s[4]||(s[4]=e("h4",{class:"text-xs font-semibold uppercase tracking-wider text-gray-500 mb-3"},"Program",-1)),e("div",rn,[r(ae,{href:m.route("bonus-system.index"),active:m.route().current("bonus-system.index"),class:"!px-2 !py-1.5"},{default:h(()=>s[1]||(s[1]=[_("Bonus System",-1)])),_:1,__:[1]},8,["href","active"]),r(ae,{href:m.route("leaderboard.index"),active:m.route().current("leaderboard.index"),class:"!px-2 !py-1.5"},{default:h(()=>s[2]||(s[2]=[_("Leaderboard",-1)])),_:1,__:[2]},8,["href","active"]),r(ae,{href:m.route("kudos.index"),active:m.route().current("kudos.index"),class:"!px-2 !py-1.5"},{default:h(()=>s[3]||(s[3]=[_("Kudos",-1)])),_:1,__:[3]},8,["href","active"])])]),e("div",null,[s[7]||(s[7]=e("h4",{class:"text-xs font-semibold uppercase tracking-wider text-gray-500 mb-3"},"Valuable",-1)),e("div",un,[r(ae,{href:m.route("team-resources.page"),active:m.route().current("team-resources.page"),class:"!px-2 !py-1.5"},{default:h(()=>s[5]||(s[5]=[_("Resources",-1)])),_:1,__:[5]},8,["href","active"]),r(ae,{href:m.route("presentations.index"),active:m.route().current("presentations.index"),class:"!px-2 !py-1.5"},{default:h(()=>s[6]||(s[6]=[_("Presentation",-1)])),_:1,__:[6]},8,["href","active"])])]),N(A)("add_expendables").value?(a(),i("div",dn,[s[9]||(s[9]=e("h4",{class:"text-xs font-semibold uppercase tracking-wider text-gray-500 mb-3"},"Management",-1)),e("div",cn,[U((a(),D(ae,{href:m.route("project-expendables.index"),class:"!px-2 !py-1.5"},{default:h(()=>s[8]||(s[8]=[_("Project Expendables",-1)])),_:1,__:[8]},8,["href"])),[[t,"add_expendables"]])])])):x("",!0)])])]),_:1})])}}},vn={class:"bg-white z-[49] relative w-full shadow-sm border-b border-gray-100"},pn={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},fn={class:"flex h-16 justify-between items-center"},gn={class:"flex-shrink-0 flex items-center"},bn={class:"hidden sm:flex items-center space-x-6"},yn={key:0,class:"group relative inline-flex items-center px-3 py-1 rounded-full bg-gradient-to-r from-green-400 to-emerald-500 text-white text-sm font-semibold shadow-lg ring-2 ring-emerald-300/60 transition-all duration-300 ease-in-out"},hn={class:"font-bold"},xn={key:1,class:"inline-flex items-center px-3 py-1 rounded-full bg-gray-100 text-gray-500 text-sm font-medium"},kn={key:0,class:"absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-red-100 transform translate-x-1/2 -translate-y-1/2 bg-red-600 rounded-full"},wn={class:"-mr-2 flex items-center sm:hidden"},_n={class:"h-6 w-6",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24"},An={class:"bg-gray-50 border-t border-gray-100 py-2 hidden sm:block"},Tn={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Mn={class:"flex items-center justify-between"},$n={class:"flex items-center space-x-2 overflow-x-auto no-scrollbar"},Cn={class:"flex items-center space-x-2 flex-shrink-0"},Sn={class:"space-y-1 pt-2 pb-3"},Gn={__name:"TopNavigation",props:{unreadNotificationCount:{type:Number,default:0}},emits:["openCreateTaskModal","openAddResource","openNotificationsSidebar","open-kudo-modal","open-meeting-minutes-modal"],setup(b,{emit:A}){const m=A,s=M(!1);K(()=>We().props.auth.user);const{canDo:t}=tt();t("manage_projects"),t("create_users"),t("manage_roles"),t("manage_task_types"),t("create_clients"),K(()=>t("manage_project_tiers").value||t("view_project_tiers").value||t("create_project_tiers").value||t("edit_project_tiers").value),t("manage_notices"),t("manage_email_templates"),t("manage_placeholder_definitions"),t("manage_permissions"),t("manage_monthly_budgets"),t("view_monthly_budgets"),t("view_admin_menu");const p=t("view_admin_dropdown"),c=M(null),y=M(!0),d=M(null);return be(async()=>{try{const{data:n}=await window.axios.get("/api/leaderboard/stats");c.value=(n==null?void 0:n.userMonthlyPoints)??0}catch(n){console.error("Failed to load monthly points",n),d.value="Failed to load points",c.value=0}finally{y.value=!1}}),(n,o)=>{const l=mt("permission");return a(),i("nav",vn,[e("div",pn,[e("div",fn,[e("div",gn,[r(N(we),{href:n.route("dashboard")},{default:h(()=>[r(ga,{class:"block h-14 w-auto fill-current text-gray-800"})]),_:1},8,["href"])]),e("div",bn,[r(N(we),{href:n.route("leaderboard.index"),class:"mr-3 cursor-pointer"},{default:h(()=>[y.value?(a(),i("div",xn," Loading... ")):(a(),i("div",yn,[o[6]||(o[6]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1.5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})],-1)),e("span",hn,S(c.value??0),1),o[7]||(o[7]=e("span",{class:"ml-1 text-white/80"},"pts",-1))]))]),_:1},8,["href"]),e("button",{onClick:o[0]||(o[0]=u=>m("openNotificationsSidebar")),class:"relative flex-shrink-0 text-gray-400 hover:text-indigo-600 p-2 rounded-full transition-colors duration-200","aria-label":"View all notifications"},[r(N(Ci),{class:"h-6 w-6"}),b.unreadNotificationCount>0?(a(),i("span",kn,S(b.unreadNotificationCount),1)):x("",!0)]),r(ln)]),e("div",wn,[e("button",{onClick:o[1]||(o[1]=u=>s.value=!s.value),class:"inline-flex items-center justify-center rounded-md p-2 text-gray-400 transition duration-150 ease-in-out hover:bg-gray-100 hover:text-gray-500 focus:bg-gray-100 focus:text-gray-500 focus:outline-none"},[(a(),i("svg",_n,[e("path",{class:q({hidden:s.value,"inline-flex":!s.value}),"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},null,2),e("path",{class:q({hidden:!s.value,"inline-flex":s.value}),"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,2)]))])])])]),e("div",An,[e("div",Tn,[e("div",Mn,[e("div",$n,[r(he,{href:n.route("dashboard"),active:n.route().current("dashboard")},{default:h(()=>o[8]||(o[8]=[_(" Dashboard ",-1)])),_:1,__:[8]},8,["href","active"]),r(he,{href:n.route("inbox"),active:n.route().current("inbox")},{default:h(()=>o[9]||(o[9]=[_(" Inbox ",-1)])),_:1,__:[9]},8,["href","active"]),r(he,{href:n.route("workspace.index"),active:n.route().current("workspace.index")},{default:h(()=>o[10]||(o[10]=[_(" My Workspace ",-1)])),_:1,__:[10]},8,["href","active"]),r(mn),N(p)?(a(),D(Xi,{key:0})):x("",!0)]),e("div",Cn,[r(ce,{type:"button",onClick:o[2]||(o[2]=u=>m("openCreateTaskModal")),class:"px-3 py-1.5 text-sm"},{default:h(()=>[r(N(rt),{class:"h-4 w-4 mr-1.5"}),o[11]||(o[11]=e("span",null,"Add Task",-1))]),_:1,__:[11]}),r(ce,{type:"button",onClick:o[3]||(o[3]=u=>m("openAddResource")),class:"px-3 py-1.5 text-sm"},{default:h(()=>[r(N(rt),{class:"h-4 w-4 mr-1.5"}),o[12]||(o[12]=e("span",null,"Add Resource",-1))]),_:1,__:[12]}),r(ce,{type:"button",onClick:o[4]||(o[4]=u=>m("open-meeting-minutes-modal")),class:"px-3 py-1.5 text-sm"},{default:h(()=>[r(N(rt),{class:"h-4 w-4 mr-1.5"}),o[13]||(o[13]=e("span",null,"Add Meeting Minutes",-1))]),_:1,__:[13]}),N(t)("create_kudos")?(a(),i("button",{key:0,type:"button",onClick:o[5]||(o[5]=u=>n.$emit("open-kudo-modal")),class:"inline-flex items-center justify-center px-3 py-1.5 text-sm font-semibold rounded-lg bg-orange-500 text-white hover:bg-orange-600 transition-colors duration-200"},[r(N($i),{class:"h-4 w-4 mr-1.5"}),o[14]||(o[14]=e("span",null,"Give Kudo",-1))])):x("",!0)])])])]),e("div",{class:q([{block:s.value,hidden:!s.value},"sm:hidden"])},[e("div",Sn,[r(he,{href:n.route("dashboard"),active:n.route().current("dashboard")},{default:h(()=>o[15]||(o[15]=[_(" Dashboard ",-1)])),_:1,__:[15]},8,["href","active"]),r(he,{href:n.route("inbox"),active:n.route().current("inbox")},{default:h(()=>o[16]||(o[16]=[_(" Inbox ",-1)])),_:1,__:[16]},8,["href","active"]),r(he,{href:n.route("workspace.index"),active:n.route().current("workspace.index")},{default:h(()=>o[17]||(o[17]=[_(" My Workspace ",-1)])),_:1,__:[17]},8,["href","active"]),r(he,{href:n.route("presentations.index"),active:n.route().current("presentations.index")},{default:h(()=>o[18]||(o[18]=[_(" Presentation ",-1)])),_:1,__:[18]},8,["href","active"]),r(he,{href:n.route("bonus-system.index"),active:n.route().current("bonus-system.index")},{default:h(()=>o[19]||(o[19]=[_(" Bonus System ",-1)])),_:1,__:[19]},8,["href","active"]),r(he,{href:n.route("leaderboard.index"),active:n.route().current("leaderboard.index")},{default:h(()=>o[20]||(o[20]=[_(" Leaderboard ",-1)])),_:1,__:[20]},8,["href","active"]),r(he,{href:n.route("kudos.index"),active:n.route().current("kudos.index")},{default:h(()=>o[21]||(o[21]=[_(" Kudos ",-1)])),_:1,__:[21]},8,["href","active"]),U((a(),D(he,{href:n.route("project-expendables.index")},{default:h(()=>o[22]||(o[22]=[_(" Project Expendables ",-1)])),_:1,__:[22]},8,["href"])),[[l,"add_expendables"]])])],2)])}}},ue={__name:"ResponsiveNavLink",props:{href:{type:String,required:!0},active:{type:Boolean},method:{type:String,default:"get"},as:{type:String,default:"a"}},setup(b){const A=b,m=K(()=>A.active?"block w-full ps-3 pe-4 py-2 border-l-4 border-indigo-400 text-start text-base font-medium text-indigo-700 bg-indigo-50 focus:outline-none focus:text-indigo-800 focus:bg-indigo-100 focus:border-indigo-700 transition duration-150 ease-in-out":"block w-full ps-3 pe-4 py-2 border-l-4 border-transparent text-start text-base font-medium text-gray-600 hover:text-gray-800 hover:bg-gray-50 hover:border-gray-300 focus:outline-none focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300 transition duration-150 ease-in-out");return(s,t)=>(a(),D(N(we),Vt({href:b.href,method:b.method,as:b.as},s.$attrs,{class:m.value}),{default:h(()=>[je(s.$slots,"default")]),_:3},16,["href","method","as","class"]))}},jn={class:"space-y-1 pb-3 pt-2"},Pn={key:0,class:"mt-3 space-y-1"},En={class:"border-t border-gray-200 pb-1 pt-4"},Vn={class:"px-4"},In={class:"text-base font-medium text-gray-800"},Bn={class:"text-sm font-medium text-gray-500"},Dn={class:"text-sm font-medium text-gray-500 capitalize"},Nn={class:"mt-3 space-y-1"},Un={__name:"MobileNavigation",props:{showingNavigationDropdown:{type:Boolean,required:!0},unreadNotificationCount:{type:Number,default:0}},emits:["openCreateTaskModal","openAddResource","openNotificationsSidebar","logoutSuccess","logoutError"],setup(b,{emit:A}){const m=A,s=K(()=>We().props.auth.user),{canDo:t}=tt(),p=t("manage_projects"),c=t("compose_emails"),y=t("approve_emails"),d=t("create_users"),n=t("manage_roles"),o=t("manage_task_types"),l=t("create_clients"),u=()=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization,m("logoutSuccess")},v=$=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization,window.location.href="/login",m("logoutError",$)};return($,g)=>{var V;return a(),i("div",{class:q([{block:b.showingNavigationDropdown,hidden:!b.showingNavigationDropdown},"sm:hidden"])},[e("div",jn,[N(n)?(a(),i("div",Pn,[g[19]||(g[19]=e("div",{class:"px-4 font-medium text-base text-gray-800"},"Admin",-1)),r(ue,{href:$.route("dashboard"),active:$.route().current("dashboard")},{default:h(()=>g[3]||(g[3]=[_(" Dashboard ",-1)])),_:1,__:[3]},8,["href","active"]),N(t)("view_emails")?(a(),D(ue,{key:0,href:$.route("inbox"),active:$.route().current("inbox")},{default:h(()=>g[4]||(g[4]=[_(" Inbox ",-1)])),_:1,__:[4]},8,["href","active"])):x("",!0),N(l)?(a(),D(ue,{key:1,href:$.route("clients.page"),active:$.route().current("clients.page")},{default:h(()=>g[5]||(g[5]=[_(" Clients ",-1)])),_:1,__:[5]},8,["href","active"])):x("",!0),N(p)?(a(),D(ue,{key:2,href:$.route("projects.index"),active:$.route().current("projects.index")},{default:h(()=>g[6]||(g[6]=[_(" Projects ",-1)])),_:1,__:[6]},8,["href","active"])):x("",!0),N(d)?(a(),D(ue,{key:3,href:$.route("users.page"),active:$.route().current("users.page")},{default:h(()=>g[7]||(g[7]=[_(" Users ",-1)])),_:1,__:[7]},8,["href","active"])):x("",!0),N(c)?(a(),D(ue,{key:4,href:$.route("emails.compose"),active:$.route().current("emails.compose")},{default:h(()=>g[8]||(g[8]=[_(" Compose Email ",-1)])),_:1,__:[8]},8,["href","active"])):x("",!0),N(y)?(a(),D(ue,{key:5,href:$.route("emails.pending"),active:$.route().current("emails.pending")},{default:h(()=>g[9]||(g[9]=[_(" Approve Emails ",-1)])),_:1,__:[9]},8,["href","active"])):x("",!0),N(c)?(a(),D(ue,{key:6,href:$.route("emails.rejected"),active:$.route().current("emails.rejected")},{default:h(()=>g[10]||(g[10]=[_(" Rejected Emails ",-1)])),_:1,__:[10]},8,["href","active"])):x("",!0),N(d)?(a(),D(ue,{key:7,href:$.route("availability.index"),active:$.route().current("availability.index")},{default:h(()=>g[11]||(g[11]=[_(" Weekly Availability ",-1)])),_:1,__:[11]},8,["href","active"])):x("",!0),N(t)("manage_roles")?(a(),D(ue,{key:8,href:$.route("admin.roles.index"),active:$.route().current("admin.roles.index")},{default:h(()=>g[12]||(g[12]=[_(" Manage Roles ",-1)])),_:1,__:[12]},8,["href","active"])):x("",!0),N(t)("manage_permissions")?(a(),D(ue,{key:9,href:$.route("admin.permissions.index"),active:$.route().current("admin.permissions.index")},{default:h(()=>g[13]||(g[13]=[_(" Manage Permissions ",-1)])),_:1,__:[13]},8,["href","active"])):x("",!0),N(o)?(a(),D(ue,{key:10,href:$.route("task-types.page"),active:$.route().current("task-types.page")},{default:h(()=>g[14]||(g[14]=[_(" Task Types ",-1)])),_:1,__:[14]},8,["href","active"])):x("",!0),N(t)("manage_email_templates")?(a(),D(ue,{key:11,href:$.route("email-templates.page"),active:$.route().current("email-templates.page")},{default:h(()=>g[15]||(g[15]=[_(" Email Templates ",-1)])),_:1,__:[15]},8,["href","active"])):x("",!0),N(t)("manage_placeholder_definitions")?(a(),D(ue,{key:12,href:$.route("placeholder-definitions.page"),active:$.route().current("placeholder-definitions.page")},{default:h(()=>g[16]||(g[16]=[_(" Placeholder Definitions ",-1)])),_:1,__:[16]},8,["href","active"])):x("",!0),N(t)("view_shareable_resources")?(a(),D(ue,{key:13,href:$.route("shareable-resources.page"),active:$.route().current("shareable-resources.page")},{default:h(()=>g[17]||(g[17]=[_(" Shareable Resources ",-1)])),_:1,__:[17]},8,["href","active"])):x("",!0),N(t)("view_shareable_resources")?(a(),D(ue,{key:14,href:$.route("team-resources.page"),active:$.route().current("team-resources.page")},{default:h(()=>g[18]||(g[18]=[_(" Team Resources ",-1)])),_:1,__:[18]},8,["href","active"])):x("",!0)])):x("",!0)]),e("div",En,[e("div",Vn,[e("div",In,S(s.value.name),1),e("div",Bn,S(s.value.email),1),e("div",Dn,S((V=s.value.role_data)==null?void 0:V.name),1)]),e("div",Nn,[r(ue,{as:"button",onClick:g[0]||(g[0]=E=>m("openCreateTaskModal"))},{default:h(()=>g[20]||(g[20]=[_(" Add Task ",-1)])),_:1,__:[20]}),r(ue,{as:"button",onClick:g[1]||(g[1]=E=>m("openAddResource"))},{default:h(()=>g[21]||(g[21]=[_(" Add Resource ",-1)])),_:1,__:[21]}),r(ue,{as:"button",onClick:g[2]||(g[2]=E=>m("openNotificationsSidebar"))},{default:h(()=>[_(" Notifications ("+S(b.unreadNotificationCount)+") ",1)]),_:1}),r(ue,{href:$.route("profile.edit")},{default:h(()=>g[22]||(g[22]=[_(" Profile ",-1)])),_:1,__:[22]},8,["href"]),r(ue,{href:$.route("logout"),method:"post",as:"button",onSuccess:u,onError:v},{default:h(()=>g[23]||(g[23]=[_(" Log Out ",-1)])),_:1,__:[23]},8,["href"])])])],2)}}},Ln={class:"space-y-4"},zn={key:0,class:"mb-4 p-3 bg-gray-100 rounded-md"},Fn={class:"text-sm font-medium text-gray-900"},Rn={class:"text-xs text-gray-500 mt-1"},On={class:"mb-4"},qn="post",Hn="Add Note",Kn="Note added successfully!",Wn={__name:"TaskNoteModal",props:{show:Boolean,taskForNote:Object},emits:["close","note-added"],setup(b,{emit:A}){const m=b,s=A,t=Te({note:""}),p=K(()=>{var n;return`Add Note to Task: "${(n=m.taskForNote)==null?void 0:n.name}"`}),c=K(()=>{var n;return`/api/tasks/${(n=m.taskForNote)==null?void 0:n.id}/notes`});ne(()=>m.show,n=>{n&&Object.assign(t,{note:""})},{immediate:!0});const y=n=>{s("note-added",n),s("close")},d=()=>{s("close")};return(n,o)=>(a(),D(Ee,{show:b.show,title:p.value,"api-endpoint":c.value,"http-method":qn,"form-data":t,"submit-button-text":Hn,"success-message":Kn,onClose:d,onSubmitted:y},{default:h(({errors:l})=>[e("div",Ln,[b.taskForNote?(a(),i("div",zn,[e("p",Fn,S(b.taskForNote.name),1),e("p",Rn,"Status: "+S(b.taskForNote.status),1)])):x("",!0),e("div",On,[r(O,{for:"task-note-content",value:"Note Content"}),U(e("textarea",{id:"task-note-content","onUpdate:modelValue":o[0]||(o[0]=u=>t.note=u),class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full h-32",placeholder:"Enter your note...",required:""},null,512),[[ie,t.note]]),r(X,{message:l.note?l.note[0]:"",class:"mt-2"},null,8,["message"])])])]),_:1},8,["show","title","api-endpoint","form-data"]))}},Jn={class:"task-history-list"},Yn={key:0,class:"text-center py-4"},Qn={key:1,class:"text-gray-500 text-sm py-2"},Zn={key:2,class:"space-y-3"},Xn={class:"flex items-start"},er={class:"text-xl mr-2"},tr={class:"text-sm text-gray-700"},ar={class:"text-xs text-gray-500 mt-1"},lr={__name:"TaskHistoryList",props:{activities:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},setup(b){const A=s=>s?new Date(s).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",m=s=>(console.log(s),s.includes("created")?"ðŸ†•":s.includes("started")?"ðŸš€":s.includes("paused")?"â¸ï¸":s.includes("resumed")?"â–¶ï¸":s.includes("unblocked")?"ðŸ”“":s.includes("blocked")?"â›”":s.includes("completed")?"âœ…":s.includes("revised")?"ðŸ”„":s.includes("deleted")?"ðŸ—‘ï¸":s.includes("assigned")?"ðŸ‘¤":s.includes("updated")?"ðŸ“":s.includes("added note")?"ðŸ—’ï¸":s.includes("commented")?"ðŸ’¬":"ðŸ“‹");return(s,t)=>(a(),i("div",Jn,[b.loading?(a(),i("div",Yn,t[0]||(t[0]=[e("div",{class:"inline-block animate-spin rounded-full h-6 w-6 border-t-2 border-b-2 border-indigo-500"},null,-1),e("p",{class:"mt-2 text-gray-500"},"Loading activity history...",-1)]))):b.activities.length===0?(a(),i("div",Qn," No activity history available for this task. ")):(a(),i("div",Zn,[(a(!0),i(Z,null,oe(b.activities,p=>{var c;return a(),i("div",{key:p.id,class:"p-3 bg-gray-50 rounded-md"},[e("div",Xn,[e("span",er,S(m(p.description)),1),e("div",null,[e("p",tr,S(p.description),1),e("p",ar," By "+S(((c=p.causer)==null?void 0:c.name)||"System")+" on "+S(A(p.created_at)),1)])])])}),128))]))]))}},sr=at(lr,[["__scopeId","data-v-423d54af"]]),or={class:"mt-4"},ir={__name:"ChecklistCreator",props:{modelValue:{type:Array,required:!0},placeholder:{type:String,default:"e.g., Task 1, Task 2, Task 3"},label:{type:String,default:"Checklist Items"},density:{type:String,default:"spacious",validator:b=>["spacious","tight","notes"].includes(b)}},emits:["update:modelValue"],setup(b,{emit:A}){const m=b,s=A,t=M([]),p=M([]),c=M(!1);ne(()=>m.modelValue,l=>{c.value=!0,t.value=JSON.parse(JSON.stringify(l)),(t.value.length===0||t.value[t.value.length-1].name.trim()!=="")&&t.value.push({name:"",completed:!1}),Ge(()=>{c.value=!1})},{immediate:!0,deep:!0}),ne(()=>t.value,l=>{c.value||s("update:modelValue",l)},{deep:!0});function y(l){t.value.splice(l,1),t.value.length===0&&t.value.push({name:"",completed:!1})}function d(l){l===t.value.length-1&&t.value[l].name.trim()!==""&&t.value.push({name:"",completed:!1})}function n(l){l<t.value.length-1&&Ge(()=>{var u;(u=p.value[l+1])==null||u.focus()})}const o=K(()=>m.density==="tight"?{listClass:"space-y-1",itemClass:"flex items-center space-x-1",inputClass:"px-1 py-1 text-sm"}:m.density==="notes"?{listClass:"space-y-0.5",itemClass:"flex items-center space-x-1",inputClass:"px-1 py-0.5 text-sm border-transparent focus:border-transparent focus:ring-0 bg-transparent"}:{listClass:"space-y-2",itemClass:"flex items-center space-x-2",inputClass:""});return(l,u)=>(a(),i("div",or,[b.label?(a(),D(O,{key:0,value:b.label},null,8,["value"])):x("",!0),e("ul",{class:q(o.value.listClass)},[(a(!0),i(Z,null,oe(t.value,(v,$)=>(a(),i("li",{key:$,class:q(o.value.itemClass)},[b.density==="notes"?(a(),D(N(St),{key:0,class:"h4 w-4",onClick:g=>y($)},null,8,["onClick"])):x("",!0),r(pe,{modelValue:v.name,"onUpdate:modelValue":g=>v.name=g,type:"text",class:q(["flex-1",o.value.inputClass]),placeholder:$===t.value.length-1?b.placeholder:"",onInput:g=>d($),onKeyup:Oe(Et(g=>n($),["prevent"]),["enter"]),ref_for:!0,ref:g=>{g&&(p.value[$]=g)}},null,8,["modelValue","onUpdate:modelValue","class","placeholder","onInput","onKeyup"]),t.value.length>1&&b.density!=="notes"?(a(),D(vt,{key:1,type:"button",onClick:g=>y($)},{default:h(()=>[r(N(St),{class:"h-4 w-4"})]),_:2},1032,["onClick"])):x("",!0)],2))),128))],2)]))}},nr={class:"p-6"},rr={class:"text-lg font-medium text-gray-900 mb-4"},ur={class:"mb-4"},dr=["placeholder"],cr={class:"flex justify-end space-x-3"},mr={__name:"BlockReasonModal",props:{show:{type:Boolean,default:!1},title:{type:String,default:"Block Task"},confirmText:{type:String,default:"Block Task"},placeholder:{type:String,default:"Enter reason for blocking..."},initialReason:{type:String,default:""},disabled:{type:Boolean,default:!1}},emits:["close","confirm"],setup(b,{emit:A}){const m=b,s=A,t=M("");ne(()=>m.show,y=>{y&&(t.value=m.initialReason||"")},{immediate:!0});const p=()=>s("close"),c=()=>{const y=(t.value||"").trim();y&&s("confirm",y)};return(y,d)=>(a(),D(Pe,{show:b.show,onClose:p},{default:h(()=>[e("div",nr,[e("h2",rr,S(b.title),1),e("div",ur,[d[1]||(d[1]=e("p",{class:"text-sm text-gray-600 mb-2"},"Please provide a reason:",-1)),U(e("textarea",{"onUpdate:modelValue":d[0]||(d[0]=n=>t.value=n),class:"w-full rounded-md shadow-sm border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",rows:"3",placeholder:b.placeholder},null,8,dr),[[ie,t.value]])]),e("div",cr,[r(Ne,{onClick:p},{default:h(()=>d[2]||(d[2]=[_("Cancel",-1)])),_:1,__:[2]}),r(ce,{onClick:c,disabled:b.disabled||!t.value.trim(),class:"bg-red-600 hover:bg-red-700"},{default:h(()=>[_(S(b.confirmText),1)]),_:1},8,["disabled"])])])]),_:1},8,["show"]))}},vr={key:0,class:"text-center py-8 text-gray-500"},pr={key:1,class:"text-center py-8 text-red-600"},fr={key:2,class:"space-y-6"},gr={class:"bg-gray-50 p-4 rounded-lg shadow-sm"},br={class:"text-xl font-bold text-gray-900 mb-2"},yr={class:"flex flex-wrap items-center gap-y-1 gap-x-2 text-sm text-gray-600 mb-4"},hr={key:0,class:"text-indigo-600 font-medium"},xr={class:"w-full flex items-center gap-1 mt-1"},kr={key:0,class:"text-blue-700 font-bold uppercase tracking-wider text-[10px] bg-blue-50 px-1.5 py-0.5 rounded border border-blue-100"},wr={key:1,class:"text-gray-400 mx-0.5"},_r={key:2,class:"text-purple-600 font-medium"},Ar={class:"text-gray-700 leading-relaxed"},Tr={class:"mt-4 flex flex-wrap gap-2"},Mr={key:0,class:"text-xs text-gray-500 mt-1"},$r={key:0,class:"bg-yellow-50 border-l-4 border-red-400 p-4 rounded-lg shadow-sm"},Cr={class:"flex items-center"},Sr={class:"ml-3"},Gr={class:"mt-2 text-sm text-yellow-700"},jr={key:1,class:"bg-amber-50 border-l-4 border-amber-400 p-4 rounded-lg shadow-sm"},Pr={class:"flex items-start"},Er={class:"ml-3"},Vr={class:"mt-1 text-sm text-amber-700"},Ir={key:0},Br={class:"font-medium"},Dr={class:"text-red-500"},Nr={key:2,class:"bg-blue-50 border-l-4 border-blue-400 p-3 rounded-lg shadow-sm"},Ur={class:"space-y-4 p-4 bg-white rounded-lg shadow-sm mb-4"},Lr={class:"flex justify-between items-center border-b pb-2 mb-4"},zr={key:0},Fr={key:1},Rr={key:0,class:"mb-4"},Or={class:"flex justify-end mt-4"},qr={key:2,class:"text-gray-500 text-sm py-2"},Hr={class:"space-y-4 p-4 bg-white rounded-lg shadow-sm"},Kr={class:"flex items-center justify-between py-2 border-b border-gray-100"},Wr={class:"flex-1 text-right"},Jr={key:0,class:"text-xs text-gray-400 ml-1"},Yr={key:1,class:"flex items-center space-x-2"},Qr={class:"flex items-center justify-between py-2 border-b border-gray-100"},Zr={class:"flex-1 text-right"},Xr={key:0,class:"text-xs text-gray-400 ml-1"},eu={key:1,class:"flex items-center space-x-2"},tu={class:"flex items-center justify-between py-2 border-b border-gray-100"},au={class:"flex-1 text-right"},lu={key:0,class:"text-xs text-gray-400 ml-1"},su={key:1,class:"flex items-center space-x-2"},ou={class:"flex items-center justify-between py-2 border-b border-gray-100"},iu={class:"flex items-center gap-1 min-w-[100px]"},nu={class:"flex-1 text-right"},ru={key:0,class:"text-xs text-gray-400 ml-1"},uu={key:1,class:"flex items-center justify-end space-x-2"},du={class:"flex items-center justify-between py-2 border-b border-gray-100"},cu={class:"text-gray-700"},mu={class:"flex items-start py-2 border-b border-gray-100"},vu={class:"flex-1 flex flex-wrap gap-2"},pu={key:0,class:"text-gray-500 text-sm"},fu={key:3,class:"p-4 bg-white rounded-lg shadow-sm"},gu={class:"space-y-3 text-sm"},bu={class:"flex items-center justify-between border-b border-gray-100 pb-2"},yu={class:"text-gray-800 text-right flex-1 break-words"},hu={key:0,class:"flex items-center justify-between border-b border-gray-100 pb-2"},xu={class:"text-gray-800 text-right flex-1 break-words"},ku={key:1,class:"flex items-center justify-between border-b border-gray-100 pb-2"},wu={class:"flex-1 text-right overflow-hidden overflow-ellipsis whitespace-nowrap ml-2"},_u=["href","title"],Au={key:2,class:"flex items-center justify-between border-b border-gray-100 pb-2"},Tu={class:"flex-1 text-right"},Mu=["href"],$u={key:3,class:"pt-2"},Cu=["href"],Su=["src"],Gu={class:"bg-white p-4 rounded-lg shadow-sm"},ju={class:"mb-4 border-b pb-3 flex flex-col gap-3"},Pu={class:"flex items-center justify-between"},Eu={class:"flex items-center gap-2"},Vu=["disabled"],Iu={key:0,class:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Bu={class:"flex items-center gap-3"},Du={class:"relative inline-flex items-center px-4 py-2 rounded-md border border-dashed border-indigo-300 text-indigo-700 bg-indigo-50 hover:bg-indigo-100 cursor-pointer transition"},Nu=["disabled"],Uu={key:0,class:"flex flex-wrap gap-2"},Lu=["title"],zu=["onClick"],Fu={key:0,class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3"},Ru={key:1,class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3"},Ou={class:"aspect-video bg-gray-50 flex items-center justify-center overflow-hidden"},qu=["src","alt","onClick"],Hu=["onClick"],Ku={class:"p-2 flex items-center justify-between"},Wu=["title","onClick"],Ju=["onClick"],Yu={key:2,class:"text-sm text-gray-500"},Qu={class:"bg-white p-4 rounded-lg shadow-sm"},Zu={class:"flex justify-between items-center mb-4 border-b pb-2"},Xu={key:0,class:"space-y-3"},ed={class:"text-sm text-gray-700"},td={class:"text-xs text-gray-500 mt-1"},ad={key:1,class:"text-gray-500 text-sm py-2"},ld={class:"bg-white p-4 rounded-lg shadow-sm"},sd={key:3,class:"text-center py-8 text-gray-500"},od={key:4,class:"mt-4 flex flex-col items-center"},id={key:0,class:"text-xs text-red-500 mt-1"},nd={class:"p-6"},rd={class:"flex items-center justify-between mb-4"},ud={class:"mt-6 flex justify-end"},dd={class:"p-4 sm:p-6 w-full max-w-4xl"},cd={class:"flex justify-between items-center mb-3"},md=["title"],vd={class:"bg-black/5 rounded-lg overflow-hidden",style:{"min-height":"320px"}},pd=["src"],fd=["src"],gd={key:2,class:"p-6 text-center text-gray-700"},bd=["href"],yd={key:3,class:"p-6 text-center text-gray-500"},hd={__name:"TaskDetailSidebar",props:{taskId:{type:Number,required:!0},projectId:{type:Number,required:!0},projectUsers:{type:Array,default:()=>[]}},emits:["close","task-updated","task-deleted"],setup(b,{emit:A}){const m=b,s=A,t=M(null),p=M(!0),c=M(""),y=K(()=>{var G,f;return((f=(G=t.value)==null?void 0:G.milestone)==null?void 0:f.project_id)||null});ra(y);const d=K(()=>{const G=y.value;return G?{id:G}:null}),n=ua(d),{canDo:o,canManage:l}=tt(y),u=l("projects",n),v=K(()=>o("change_due_date",n).value===!0||u.value===!0),$=M(!1),g=M(!1),V=M(!1),E=M(!1),T=M(null),k=M(null),j=M(null),z=M(null),F=M(!1),H=M([]),P=M(!1),I=M([]),W=M(!1),B=M(!1),C=M([]),Q=async()=>{if(m.taskId){W.value=!0;try{const G=await window.axios.get("/api/files",{params:{model_type:"Task",model_id:m.taskId}});I.value=G.data||[]}catch(G){console.error("Error fetching task files",G)}finally{W.value=!1}}},re=G=>{C.value=Array.from(G.target.files||[])},ee=async()=>{if(!C.value.length)return;B.value=!0;const G=new FormData;C.value.forEach((f,ve)=>G.append(`files[${ve}]`,f)),G.append("model_type","Task"),G.append("model_id",m.taskId);try{await window.axios.post("/api/files",G,{headers:{"Content-Type":"multipart/form-data"}}),De("Files uploaded"),C.value=[],await Q()}catch(f){console.error("Upload failed",f),ke("Failed to upload files")}finally{B.value=!1}},le=async G=>{if(await da(`Delete file "${G.filename}"?`,{confirmText:"Delete",cancelText:"Cancel",type:"warning"}))try{await window.axios.delete(`/api/files/${G.id}`),De("File deleted"),await Q()}catch(ve){console.error("Delete failed",ve),ke("Failed to delete file")}},J=M(!1),se=M(null),de=G=>{se.value=G,J.value=!0},Me=()=>{J.value=!1,se.value=null},$e=G=>G?G.thumbnail_url?G.thumbnail_url:G.mime_type&&G.mime_type.includes("image")&&G.path_url?G.path_url:null:null,Ve=G=>{if(!G)return{type:"none"};const f=G.path_url||null,ve=(G.mime_type||"").toLowerCase();return f?ve.includes("image")?{type:"image",src:f}:ve.includes("pdf")||ve.includes("text")||ve.includes("html")?{type:"iframe",src:f}:{type:"external_link",url:f}:{type:"none"}},ye=K(()=>Ve(se.value)),lt=[{value:"low",label:"Low"},{value:"medium",label:"Medium"},{value:"high",label:"High"}],Ie=M(!1),xe=M(!1),L=M([{name:"",completed:!1}]),w=M(!1),te=async()=>{p.value=!0,c.value="";try{const G=await window.axios.get(`/api/tasks/${m.taskId}`);t.value=G.data,T.value=t.value.assigned_to_id||null,k.value=t.value.due_date||null,j.value=t.value.priority||"medium",z.value=t.value.effort||null,R()}catch(G){c.value="Failed to load task details.",console.error("Error fetching task details:",G)}finally{p.value=!1}},R=async()=>{P.value=!0;try{const G=await window.axios.get("/api/activities",{params:{subject_type:"App\\Models\\Task",subject_id:m.taskId}});H.value=G.data}catch(G){console.error("Error fetching task activities:",G)}finally{P.value=!1}};ne(()=>m.taskId,G=>{G?(te(),Q()):(t.value=null,I.value=[])},{immediate:!0});const me=M([]),st=M(!1),Lt=K(()=>((me.value&&me.value.length?me.value:m.projectUsers)||[]).map(f=>({value:f.id,label:f.name}))),zt=async()=>{const G=y.value;if(G){st.value=!0;try{const f=await window.axios.get(`/api/projects/${G}/users`);me.value=f.data||[]}catch(f){console.error("Failed to fetch project users",f),ke("Could not load project users")}finally{st.value=!1}}},Ft=async()=>{if(!t.value||T.value===t.value.assigned_to_id){$.value=!1;return}try{const G=await window.axios.patch(`/api/tasks/${t.value.id}`,{assigned_to_user_id:T.value});t.value=G.data,s("task-updated",t.value),R()}catch(G){console.error("Error updating assigned user:",G),T.value=t.value.assigned_to_id,ke("Failed to update assigned user. Please try again.")}finally{$.value=!1}},Rt=async()=>{if(!t.value||k.value===t.value.due_date){g.value=!1;return}try{const G=await window.axios.patch(`/api/tasks/${t.value.id}`,{due_date:k.value});t.value=G.data,s("task-updated",t.value),R()}catch(G){console.error("Error updating due date:",G),k.value=t.value.due_date,ke("Failed to update due date. Please try again.")}finally{g.value=!1}},Ot=async()=>{if(!t.value||j.value===t.value.priority){V.value=!1;return}try{const G=await window.axios.patch(`/api/tasks/${t.value.id}`,{priority:j.value});t.value=G.data,s("task-updated",t.value)}catch(G){console.error("Error updating priority:",G),j.value=t.value.priority,ke("Failed to update priority. Please try again.")}finally{V.value=!1}},ft=async()=>{const G=z.value===""?null:parseInt(z.value);if(!t.value||G===t.value.effort){E.value=!1;return}try{const f=await window.axios.patch(`/api/tasks/${t.value.id}`,{effort:G});t.value=f.data,s("task-updated",t.value)}catch(f){console.error("Error updating effort:",f),z.value=t.value.effort,ke("Failed to update effort. Please try again.")}finally{E.value=!1}},qt=()=>{Ie.value=!0},Ht=()=>{te(),Ie.value=!1},Kt=async()=>{try{await Ta(t.value),s("task-deleted",t.value.id),s("close")}catch(G){console.error("Error deleting task:",G)}},Wt=async()=>{try{t.value=await ha(t.value),s("task-updated",t.value),R()}catch(G){console.error("Error starting task:",G)}},Jt=async()=>{try{t.value=await xa(t.value),s("task-updated",t.value),R()}catch(G){console.error("Error pausing task:",G)}},Yt=async()=>{try{t.value=await ka(t.value),s("task-updated",t.value),R()}catch(G){console.error("Error resuming task:",G)}},Qt=async()=>{try{t.value=await _a(t.value),s("task-updated",t.value),R()}catch(G){console.error("Error completing task:",G)}},Zt=async()=>{try{t.value=await Aa(t.value),s("task-updated",t.value),R()}catch(G){console.error("Error revising task:",G)}},Xt=()=>{var G;xe.value=!xe.value,xe.value&&((G=t.value.details)!=null&&G.checklist&&t.value.details.checklist.length>0?(L.value=JSON.parse(JSON.stringify(t.value.details.checklist)),L.value[L.value.length-1].name!==""&&L.value.push({name:"",completed:!1})):L.value=[{name:"",completed:!1}])},ea=async()=>{if(!w.value){w.value=!0;try{const G=L.value.filter(Ce=>Ce.name.trim()!==""),f={details:{...t.value.details,checklist:G}},ve=await window.axios.patch(`/api/tasks/${t.value.id}`,f);t.value=ve.data,xe.value=!1,De("Checklist saved successfully"),s("task-updated",t.value)}catch(G){console.error("Error saving checklist:",G),ke("Failed to save checklist")}finally{w.value=!1}}},Ye=M(!1),ta=()=>{Ye.value=!0},aa=async G=>{try{t.value=await Ma(t.value,G),De("Task blocked successfully"),s("task-updated",t.value),R(),Ye.value=!1}catch(f){console.error("Error blocking task:",f)}},la=async()=>{try{t.value=await wa(t.value),s("task-updated",t.value),R()}catch(G){console.error("Error unblocking task:",G)}},sa=K(()=>t.value?ya(t.value.status):""),ot=K(()=>{var f,ve,Ce,Ue;if(!H.value||((f=t.value)==null?void 0:f.status)!=="Blocked")return null;const G=H.value.find(Le=>{var ze,Fe;return Le.event==="updated"&&((Fe=(ze=Le.properties)==null?void 0:ze.attributes)==null?void 0:Fe.status)==="Blocked"});return G?(console.log(G.properties),{causer:((ve=G.causer)==null?void 0:ve.name)||"Unknown",reason:((Ue=(Ce=G.properties)==null?void 0:Ce.attributes)==null?void 0:Ue.block_reason)||"No reason provided."}):null});return(G,f)=>{var ve,Ce,Ue,Le,ze,Fe,gt,bt,yt,ht,xt,kt,wt,_t;return a(),i("div",null,[p.value?(a(),i("div",vr," Loading task details... ")):c.value?(a(),i("div",pr,S(c.value),1)):t.value?(a(),i("div",fr,[e("div",gr,[e("h4",br,S(t.value.name),1),e("div",yr,[e("span",{class:q(["px-2 py-1 rounded-full text-xs font-medium",sa.value])},S(t.value.status),3),t.value.task_type?(a(),i("span",hr," | "+S((ve=t.value.task_type)==null?void 0:ve.name)+" | ",1)):x("",!0),e("div",xr,[(Ce=t.value.milestone)!=null&&Ce.project?(a(),i("span",kr,S((Le=(Ue=t.value.milestone)==null?void 0:Ue.project)==null?void 0:Le.name),1)):x("",!0),(ze=t.value.milestone)!=null&&ze.project&&((Fe=t.value.milestone)!=null&&Fe.name)?(a(),i("span",wr,"/")):x("",!0),(gt=t.value.milestone)!=null&&gt.name?(a(),i("span",_r,S((bt=t.value.milestone)==null?void 0:bt.name),1)):x("",!0)])]),e("p",Ar,S(t.value.description||"No description provided."),1),e("div",Tr,[t.value.status==="To Do"?(a(),D(ce,{key:0,onClick:Wt,class:"bg-blue-600 hover:bg-blue-700"},{default:h(()=>f[19]||(f[19]=[_(" Start Task ",-1)])),_:1,__:[19]})):t.value.status==="In Progress"?(a(),D(ce,{key:1,onClick:Jt,class:"bg-orange-600 hover:bg-orange-700"},{default:h(()=>f[20]||(f[20]=[_(" Pause Task ",-1)])),_:1,__:[20]})):t.value.status==="Paused"?(a(),D(ce,{key:2,onClick:Yt,class:"bg-blue-600 hover:bg-blue-700"},{default:h(()=>f[21]||(f[21]=[_(" Resume Task ",-1)])),_:1,__:[21]})):t.value.status==="Blocked"?(a(),D(ce,{key:3,onClick:la,class:"bg-green-600 hover:bg-green-700"},{default:h(()=>f[22]||(f[22]=[_(" Unblock Task ",-1)])),_:1,__:[22]})):x("",!0),t.value.status==="To Do"||t.value.status==="In Progress"||t.value.status==="Paused"?(a(),D(ce,{key:4,onClick:ta,class:"bg-red-600 hover:bg-red-700"},{default:h(()=>f[23]||(f[23]=[_(" Block Task ",-1)])),_:1,__:[23]})):x("",!0),t.value.status==="In Progress"?(a(),D(ce,{key:5,onClick:Qt,class:"bg-green-600 hover:bg-green-700"},{default:h(()=>f[24]||(f[24]=[_(" Complete Task ",-1)])),_:1,__:[24]})):x("",!0),t.value.status==="Done"?(a(),D(ce,{key:6,onClick:Zt,class:"bg-yellow-600 hover:bg-yellow-700"},{default:h(()=>f[25]||(f[25]=[_(" Revise Task ",-1)])),_:1,__:[25]})):x("",!0)]),t.value.status==="Done"?(a(),i("div",Mr,' Revising will change the task status back to "To Do" ')):x("",!0)]),t.value.status==="Blocked"&&ot.value?(a(),i("div",$r,[e("div",Cr,[f[27]||(f[27]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.487 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11.75 13a.75.75 0 01-1.5 0v-2.25a.75.75 0 011.5 0V13zm-1.5-7.5a.75.75 0 011.5 0v1.5a.75.75 0 01-1.5 0V5.5z","clip-rule":"evenodd"})])],-1)),e("div",Sr,[f[26]||(f[26]=e("h3",{class:"text-sm font-medium text-yellow-800"},"Task Blocked",-1)),e("div",Gr,[e("p",null,"This task was blocked by **"+S(ot.value.causer)+"** with the following reason:",1),e("p",null,S(ot.value.reason),1)])])])])):x("",!0),t.value.needs_approval?(a(),i("div",jr,[e("div",Pr,[f[32]||(f[32]=e("svg",{class:"h-5 w-5 text-amber-500 mt-0.5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.487 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0V9a1 1 0 112 0v4zm-1 4a1.25 1.25 0 100-2.5A1.25 1.25 0 0010 17z","clip-rule":"evenodd"})],-1)),e("div",Er,[f[31]||(f[31]=e("h3",{class:"text-sm font-semibold text-amber-800"},"Approval required",-1)),e("p",Vr,[f[29]||(f[29]=_(" This task needs approval",-1)),t.value.creator_name?(a(),i("span",Ir,[f[28]||(f[28]=_(" from ",-1)),e("span",Br,S(t.value.creator_name),1)])):x("",!0),f[30]||(f[30]=_(". ",-1))]),e("p",Dr,"Do Not, complete the task and make sure you report it to "+S(t.value.creator_name)+" or Project Manager",1)])])])):x("",!0),t.value.requires_qa?(a(),i("div",Nr,f[33]||(f[33]=[Ze('<div class="flex items-start gap-2"><svg class="h-5 w-5 text-blue-500 mt-0.5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6.375c-1.148 0-2.285-.22-3.351-.651l-2.262-.906a1.125 1.125 0 00-1.537 1.04V11.25c0 5.157 3.33 9.8 8.25 11.25 4.92-1.45 8.25-6.093 8.25-11.25V5.858a1.125 1.125 0 00-1.537-1.04l-2.262.906A9.568 9.568 0 0112 6.375z"></path><path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75l2.25 2.25L15 11.25"></path></svg><div class="text-sm text-blue-800"> This task requires QA verification once completed. </div></div>',1)]))):x("",!0),e("div",Ur,[e("div",Lr,[f[34]||(f[34]=e("h5",{class:"text-lg font-semibold text-gray-800"},"Task Checklist",-1)),e("button",{onClick:Xt,class:"text-indigo-600 hover:text-indigo-800 text-sm font-medium flex items-center"},[xe.value?(a(),i("span",Fr,"Cancel")):(a(),i("span",zr,S((yt=t.value.details)!=null&&yt.checklist&&t.value.details.checklist.length>0?"Edit Checklist":"Add Checklist"),1))])]),xe.value?(a(),i("div",Rr,[r(ir,{modelValue:L.value,"onUpdate:modelValue":f[0]||(f[0]=Y=>L.value=Y),placeholder:"e.g., Review design, Update documentation",label:"Checklist Items",density:"notes"},null,8,["modelValue"]),e("div",Or,[r(ce,{onClick:ea,disabled:w.value,class:"flex items-center space-x-1"},{default:h(()=>[r(N(Gi),{class:"h-4 w-4"}),f[35]||(f[35]=e("span",null,"Save Checklist",-1))]),_:1,__:[35]},8,["disabled"])])])):x("",!0),(ht=t.value.details)!=null&&ht.checklist&&t.value.details.checklist.length>0&&!xe.value?(a(),D($a,{key:1,items:t.value.details.checklist,"api-endpoint":`/api/tasks/${t.value.id}`,title:"Items to complete:","payload-transformer":Y=>({details:{...t.value.details,checklist:Y}})},null,8,["items","api-endpoint","payload-transformer"])):x("",!0),(!((xt=t.value.details)!=null&&xt.checklist)||t.value.details.checklist.length===0)&&!xe.value?(a(),i("div",qr,' No checklist items for this task yet. Click "Add Checklist" to create one. ')):x("",!0)]),e("div",Hr,[f[42]||(f[42]=e("h5",{class:"text-lg font-semibold text-gray-800 border-b pb-2 mb-4"},"Task Attributes",-1)),e("div",Kr,[r(O,{class:"min-w-[100px] text-gray-600"},{default:h(()=>f[36]||(f[36]=[_("Assigned To:",-1)])),_:1,__:[36]}),e("div",Wr,[$.value?(a(),i("div",Yr,[r(ge,{id:"edit-assigned-to",modelValue:T.value,"onUpdate:modelValue":f[2]||(f[2]=Y=>T.value=Y),options:Lt.value,"value-key":"value","label-key":"label",placeholder:"Unassigned",class:"mt-1 flex-1","allow-empty":!0},null,8,["modelValue","options"]),e("button",{onClick:Ft,class:"text-green-600 hover:text-green-800 text-sm font-medium"},"Save"),e("button",{onClick:f[3]||(f[3]=Y=>$.value=!1),class:"text-gray-600 hover:text-gray-800 text-sm font-medium"},"Cancel")])):(a(),i("div",{key:0,onClick:f[1]||(f[1]=Y=>t.value.status!=="Done"?(zt(),$.value=!0):it("Cannot change assignment for a completed task. Use the Revise button to change the task status first.")),class:q(["cursor-pointer",{"text-indigo-600 hover:text-indigo-800":t.value.status!=="Done","text-gray-500":t.value.status==="Done"}])},[_(S(((kt=t.value.assigned_to)==null?void 0:kt.name)||"Unassigned")+" ",1),t.value.status!=="Done"?(a(),i("span",Jr,"(Click to edit)")):x("",!0)],2))])]),e("div",Qr,[r(O,{class:"min-w-[100px] text-gray-600"},{default:h(()=>f[37]||(f[37]=[_("Due Date:",-1)])),_:1,__:[37]}),e("div",Zr,[g.value?(a(),i("div",eu,[r(pe,{id:"edit-due-date",modelValue:k.value,"onUpdate:modelValue":f[5]||(f[5]=Y=>k.value=Y),type:"date",class:"mt-1 flex-1"},null,8,["modelValue"]),e("button",{onClick:Rt,class:"text-green-600 hover:text-green-800 text-sm font-medium"},"Save"),e("button",{onClick:f[6]||(f[6]=Y=>g.value=!1),class:"text-gray-600 hover:text-gray-800 text-sm font-medium"},"Cancel")])):(a(),i("div",{key:0,onClick:f[4]||(f[4]=Y=>v.value?g.value=!0:null),class:q(["cursor-pointer",v.value?"text-indigo-600 hover:text-indigo-800":"text-gray-700 cursor-default"])},[_(S(t.value.due_date?N(ba)(t.value.due_date).format("MMM D, YYYY"):"No Due Date")+" ",1),v.value?(a(),i("span",Xr,"(Click to edit)")):x("",!0)],2))])]),e("div",tu,[r(O,{class:"min-w-[100px] text-gray-600"},{default:h(()=>f[38]||(f[38]=[_("Priority:",-1)])),_:1,__:[38]}),e("div",au,[V.value?(a(),i("div",su,[r(ge,{id:"edit-priority",modelValue:j.value,"onUpdate:modelValue":f[8]||(f[8]=Y=>j.value=Y),options:lt,"value-key":"value","label-key":"label",placeholder:"Select priority",class:"mt-1 flex-1"},null,8,["modelValue"]),e("button",{onClick:Ot,class:"text-green-600 hover:text-green-800 text-sm font-medium"},"Save"),e("button",{onClick:f[9]||(f[9]=Y=>V.value=!1),class:"text-gray-600 hover:text-gray-800 text-sm font-medium"},"Cancel")])):(a(),i("div",{key:0,onClick:f[7]||(f[7]=Y=>t.value.status!=="Done"?V.value=!0:it("Cannot change priority for a completed task. Use the Revise button to change the task status first.")),class:q(["cursor-pointer",{"text-indigo-600 hover:text-indigo-800":t.value.status!=="Done","text-gray-500":t.value.status==="Done"}])},[e("span",{class:q({"text-red-600 font-medium":t.value.priority==="high","text-yellow-600 font-medium":t.value.priority==="medium","text-green-600 font-medium":t.value.priority==="low"})},S(t.value.priority?t.value.priority.charAt(0).toUpperCase()+t.value.priority.slice(1):"Medium"),3),t.value.status!=="Done"?(a(),i("span",lu,"(Click to edit)")):x("",!0)],2))])]),e("div",ou,[e("div",iu,[r(O,{class:"text-gray-600"},{default:h(()=>f[39]||(f[39]=[_("Effort:",-1)])),_:1,__:[39]}),e("button",{onClick:f[10]||(f[10]=Y=>F.value=!0),class:"text-gray-400 hover:text-indigo-600 transition-colors",title:"View Estimation Guide"},[r(N(Nt),{class:"h-4 w-4"})])]),e("div",nu,[E.value?(a(),i("div",uu,[r(pe,{id:"edit-effort",modelValue:z.value,"onUpdate:modelValue":f[12]||(f[12]=Y=>z.value=Y),type:"number",min:"0",class:"mt-1 w-20 text-right",placeholder:"Pts",onKeypress:Oe(ft,["enter"])},null,8,["modelValue"]),e("button",{onClick:ft,class:"text-green-600 hover:text-green-800 p-1"},[r(N(Si),{class:"h-5 w-5"})]),e("button",{onClick:f[13]||(f[13]=Y=>E.value=!1),class:"text-red-600 hover:text-red-800 p-1"},[r(N(Ct),{class:"h-5 w-5"})])])):(a(),i("div",{key:0,onClick:f[11]||(f[11]=Y=>t.value.status!=="Done"?E.value=!0:it("Cannot change effort for a completed task.")),class:q(["cursor-pointer",{"text-indigo-600 hover:text-indigo-800":t.value.status!=="Done","text-gray-500":t.value.status==="Done"}])},[e("span",{class:q({"font-bold":t.value.effort})},S(t.value.effort?t.value.effort+" pts":"Not set"),3),t.value.status!=="Done"?(a(),i("span",ru,"(Click to edit)")):x("",!0)],2))])]),e("div",du,[r(O,{class:"min-w-[100px] text-gray-600"},{default:h(()=>f[40]||(f[40]=[_("Created:",-1)])),_:1,__:[40]}),e("span",cu,S(t.value.created_at?new Date(t.value.created_at).toLocaleDateString():"N/A"),1)]),e("div",mu,[r(O,{class:"min-w-[100px] text-gray-600 mt-1"},{default:h(()=>f[41]||(f[41]=[_("Tags:",-1)])),_:1,__:[41]}),e("div",vu,[(a(!0),i(Z,null,oe(t.value.tags,Y=>(a(),i("span",{key:Y.id,class:"inline-flex items-center px-3 py-1 text-sm font-medium bg-indigo-100 text-indigo-800 rounded-full shadow-sm"},S(Y.name),1))),128)),!t.value.tags||t.value.tags.length===0?(a(),i("span",pu,"No tags")):x("",!0)])])]),(wt=t.value.additional_info)!=null&&wt.bugherd_info?(a(),i("div",fu,[f[49]||(f[49]=e("h5",{class:"text-lg font-semibold text-gray-800 border-b pb-2 mb-4"},"BugHerd Details",-1)),e("div",gu,[e("div",bu,[f[43]||(f[43]=e("span",{class:"text-gray-600 font-medium w-1/3"},"Requester:",-1)),e("span",yu,S(((_t=t.value.additional_info.bugherd_info.requester)==null?void 0:_t.display_name)||t.value.additional_info.bugherd_info.requester_email||"Unknown"),1)]),t.value.additional_info.bugherd_info.requester_os||t.value.additional_info.bugherd_info.requester_browser?(a(),i("div",hu,[f[44]||(f[44]=e("span",{class:"text-gray-600 font-medium w-1/3"},"Environment:",-1)),e("span",xu,S(t.value.additional_info.bugherd_info.requester_os)+" / "+S(t.value.additional_info.bugherd_info.requester_browser),1)])):x("",!0),t.value.additional_info.bugherd_info.url?(a(),i("div",ku,[f[45]||(f[45]=e("span",{class:"text-gray-600 font-medium w-24"},"Page URL:",-1)),e("div",wu,[e("a",{href:t.value.additional_info.bugherd_info.url,target:"_blank",class:"text-indigo-600 hover:text-indigo-800",title:t.value.additional_info.bugherd_info.url},S(t.value.additional_info.bugherd_info.url),9,_u)])])):x("",!0),t.value.additional_info.bugherd_info.secret_link?(a(),i("div",Au,[f[47]||(f[47]=e("span",{class:"text-gray-600 font-medium w-1/3"},"Bug Link:",-1)),e("div",Tu,[e("a",{href:t.value.additional_info.bugherd_info.secret_link,target:"_blank",class:"text-indigo-600 hover:text-indigo-800 inline-flex items-center gap-1"},f[46]||(f[46]=[_(" View Original ",-1),e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{d:"M11 3a1 1 0 100 2h2.586l-6.293 6.293a1 1 0 101.414 1.414L15 6.414V9a1 1 0 102 0V4a1 1 0 00-1-1h-5z"}),e("path",{d:"M5 5a2 2 0 00-2 2v8a2 2 0 002 2h8a2 2 0 002-2v-3a1 1 0 10-2 0v3H5V7h3a1 1 0 000-2H5z"})],-1)]),8,Mu)])])):x("",!0),t.value.additional_info.bugherd_info.screenshot_url?(a(),i("div",$u,[f[48]||(f[48]=e("span",{class:"text-gray-600 font-medium block mb-2"},"Screenshot:",-1)),e("a",{href:t.value.additional_info.bugherd_info.screenshot_url,target:"_blank",class:"block border border-gray-200 rounded-lg overflow-hidden hover:opacity-90 transition-opacity max-w-sm mx-auto shadow-sm"},[e("img",{src:t.value.additional_info.bugherd_info.screenshot_url,alt:"BugHerd Screenshot",class:"w-full h-auto object-cover"},null,8,Su)],8,Cu)])):x("",!0)])])):x("",!0),e("div",Gu,[e("div",ju,[e("div",Pu,[f[51]||(f[51]=e("h5",{class:"text-lg font-semibold text-gray-800"},"Files",-1)),e("div",Eu,[e("button",{type:"button",class:"inline-flex items-center px-4 py-2 rounded-md bg-indigo-600 text-white hover:bg-indigo-700 transition disabled:opacity-60 disabled:cursor-not-allowed",disabled:B.value||C.value.length===0,onClick:ee},[B.value?(a(),i("svg",Iu,f[50]||(f[50]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"},null,-1)]))):x("",!0),e("span",null,S(B.value?"Uploading...":"Upload"),1)],8,Vu)])]),e("div",Bu,[e("label",Du,[f[52]||(f[52]=e("svg",{class:"h-5 w-5 mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1M4 12l1.5-1.5M20 12l-1.5-1.5M12 4v12"})],-1)),f[53]||(f[53]=e("span",{class:"font-medium"},"Choose Files",-1)),e("input",{class:"absolute inset-0 opacity-0 cursor-pointer",type:"file",multiple:"",onChange:re,disabled:B.value},null,40,Nu)]),f[54]||(f[54]=e("p",{class:"text-xs text-gray-500"},"You can select multiple files. Images, PDFs, Docs are supported.",-1))]),C.value.length?(a(),i("div",Uu,[(a(!0),i(Z,null,oe(C.value,(Y,Be)=>(a(),i("span",{key:Be,class:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-gray-100 text-gray-800 text-xs"},[f[55]||(f[55]=e("svg",{class:"h-4 w-4 text-indigo-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})],-1)),e("span",{class:"max-w-[160px] truncate",title:Y.name},S(Y.name),9,Lu),e("button",{type:"button",class:"text-gray-500 hover:text-red-600",onClick:Fd=>C.value=C.value.filter((Rd,oa)=>oa!==Be)},"Ã—",8,zu)]))),128))])):x("",!0)]),e("div",null,[W.value?(a(),i("div",Fu,[(a(),i(Z,null,oe(6,Y=>e("div",{key:Y,class:"h-28 bg-gray-100 rounded animate-pulse"})),64))])):I.value.length>0?(a(),i("div",Ru,[(a(!0),i(Z,null,oe(I.value,Y=>(a(),i("div",{key:Y.id,class:"group relative rounded-lg border border-gray-200 overflow-hidden bg-white shadow-sm hover:shadow-md transition"},[e("div",Ou,[$e(Y)?(a(),i("img",{key:0,src:$e(Y),alt:Y.filename,class:"object-cover w-full h-full",onClick:Be=>de(Y)},null,8,qu)):(a(),i("div",{key:1,class:"text-gray-400",onClick:Be=>de(Y)},f[56]||(f[56]=[e("svg",{class:"h-10 w-10",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})],-1)]),8,Hu))]),e("div",Ku,[e("button",{class:"text-xs text-blue-600 hover:underline truncate max-w-[70%] text-left",title:Y.filename,onClick:Be=>de(Y)},S(Y.filename),9,Wu),e("button",{class:"text-red-600 hover:text-red-800 text-xs",onClick:Be=>le(Y)},"Delete",8,Ju)])]))),128))])):(a(),i("div",Yu,"No files attached."))])]),e("div",Qu,[e("div",Zu,[f[58]||(f[58]=e("h5",{class:"text-lg font-semibold text-gray-800"},"Notes",-1)),r(ce,{onClick:qt,class:"bg-indigo-600 hover:bg-indigo-700 transition-colors"},{default:h(()=>f[57]||(f[57]=[_(" Add Note ",-1)])),_:1,__:[57]})]),t.value.notes&&t.value.notes.length>0?(a(),i("div",Xu,[(a(!0),i(Z,null,oe(t.value.notes,Y=>(a(),i("div",{key:Y.id,class:"p-3 bg-gray-50 rounded-md"},[e("p",ed,S(Y.content),1),e("p",td," By "+S(Y.creator_name||"Unknown")+" on "+S(new Date(Y.created_at).toLocaleDateString()),1)]))),128))])):(a(),i("div",ad,"No notes for this task yet."))]),e("div",ld,[f[59]||(f[59]=e("h5",{class:"text-lg font-semibold text-gray-800 border-b pb-2 mb-4"},"History",-1)),r(sr,{activities:H.value,loading:P.value},null,8,["activities","loading"])])])):(a(),i("div",sd," Select a task to view details. ")),t.value&&t.value.status!=="Done"?(a(),i("div",od,[r(vt,{onClick:Kt,disabled:t.value.status!=="To Do"},{default:h(()=>f[60]||(f[60]=[_(" Delete Task ",-1)])),_:1,__:[60]},8,["disabled"]),t.value.status!=="To Do"?(a(),i("p",id,"Task can only be deleted in 'To Do' status.")):x("",!0)])):x("",!0),r(Pe,{show:F.value,onClose:f[16]||(f[16]=Y=>F.value=!1),"max-width":"lg"},{default:h(()=>[e("div",nd,[e("div",rd,[f[61]||(f[61]=e("h3",{class:"text-lg font-medium text-gray-900"},"Effort Estimation Guide",-1)),e("button",{onClick:f[14]||(f[14]=Y=>F.value=!1),class:"text-gray-400 hover:text-gray-500"},[r(N(Ct),{class:"h-6 w-6"})])]),r(Ut),e("div",ud,[r(Ne,{onClick:f[15]||(f[15]=Y=>F.value=!1)},{default:h(()=>f[62]||(f[62]=[_("Close",-1)])),_:1,__:[62]})])])]),_:1},8,["show"]),r(Wn,{show:Ie.value,"task-for-note":t.value,onClose:f[17]||(f[17]=Y=>Ie.value=!1),onNoteAdded:Ht},null,8,["show","task-for-note"]),r(mr,{show:Ye.value,title:"Block Task","confirm-text":"Block Task",placeholder:"Enter reason for blocking...",onClose:f[18]||(f[18]=Y=>Ye.value=!1),onConfirm:aa},null,8,["show"]),r(Pe,{show:J.value,onClose:Me},{default:h(()=>[e("div",dd,[e("div",cd,[e("h3",{class:"text-lg font-semibold text-gray-800 truncate",title:se.value&&se.value.filename?se.value.filename:""},S(se.value&&se.value.filename?se.value.filename:"Preview"),9,md),e("button",{class:"text-gray-500 hover:text-gray-700",onClick:Me},"âœ•")]),e("div",vd,[_(S(ye.value.type)+" ",1),ye.value.type==="iframe"?(a(),i("iframe",{key:0,src:ye.value.src,class:"w-full h-[70vh]",frameborder:"0",allow:"autoplay; encrypted-media",allowfullscreen:""},null,8,pd)):ye.value.type==="image"?(a(),i("img",{key:1,src:ye.value.src,alt:"Preview",class:"w-full h-auto"},null,8,fd)):ye.value.type==="external_link"?(a(),i("div",gd,[f[63]||(f[63]=e("p",null,"This file can't be embedded. You can open it using the link below:",-1)),e("a",{href:ye.value.url,target:"_blank",class:"text-indigo-600 hover:underline break-all"},S(ye.value.url),9,bd)])):(a(),i("div",yd,"No preview available."))])])]),_:1},8,["show"])])}}},xd={key:1,class:"p-4 text-gray-500"},kd={key:0,class:"flex justify-end space-x-3"},wd={__name:"TaskSidebar",emits:["taskUpdated","taskDeleted"],setup(b){const A=M(null);return(m,s)=>(a(),D(Bt,{show:N(_e).show,"onUpdate:show":N(nt),title:N(_e).taskId?"Task Details":"Details",initialWidth:50},{content:h(()=>[N(_e).taskId?(a(),D(hd,{key:0,"task-id":N(_e).taskId,"project-id":N(_e).projectId,"project-users":N(_e).projectUsers,ref_key:"taskDetailSidebarRef",ref:A,onClose:N(nt),onTaskUpdated:s[0]||(s[0]=t=>{m.$emit("taskUpdated",t)}),onTaskDeleted:s[1]||(s[1]=t=>{m.$emit("taskDeleted",t),N(nt)()})},null,8,["task-id","project-id","project-users","onClose"])):N(_e).show?(a(),i("div",xd," No task selected or task ID is missing. ")):x("",!0)]),footer:h(()=>[N(_e).taskId?(a(),i("div",kd,[A.value&&A.value.task&&A.value.task.status!=="In Progress"&&A.value.task.status!=="Done"?(a(),D(Ne,{key:0,onClick:A.value.startTask,class:"bg-blue-50 text-blue-700 hover:bg-blue-100"},{default:h(()=>s[2]||(s[2]=[_(" Start Task ",-1)])),_:1,__:[2]},8,["onClick"])):x("",!0),A.value&&A.value.task&&A.value.task.status==="In Progress"?(a(),D(Ne,{key:1,onClick:A.value.completeTask,class:"bg-green-50 text-green-700 hover:bg-green-100"},{default:h(()=>s[3]||(s[3]=[_(" Complete Task ",-1)])),_:1,__:[3]},8,["onClick"])):x("",!0),A.value&&A.value.task?(a(),D(vt,{key:2,onClick:A.value.deleteTask,class:"bg-red-50 text-red-700 hover:bg-red-100"},{default:h(()=>s[4]||(s[4]=[_(" Delete Task ",-1)])),_:1,__:[4]},8,["onClick"])):x("",!0)])):x("",!0)]),_:1},8,["show","onUpdate:show","title"]))}},ut=M(!1),Re=M([]),dt=M(!1);function _d(){const b=async()=>{var s;try{const t=await fe.get("/api/notices/unread");Re.value=((s=t.data)==null?void 0:s.data)||[],ut.value=Re.value.length>0}catch(t){console.error("Failed to fetch unread notices",t)}},A=async()=>{if(dt.value)try{const s=Re.value.map(t=>t.id);if(s.length===0)return;await fe.post("/api/notices/acknowledge",{notice_ids:s}),m()}catch(s){console.error("Failed to acknowledge notices",s)}},m=()=>{ut.value=!1,Re.value=[],dt.value=!1};return be(()=>{b()}),It(()=>{}),{showNoticeModal:ut,unreadNotices:Re,acknowledgeChecked:dt,fetchUnreadNotices:b,acknowledgeNotices:A,closeModal:m}}const Ad={class:"mb-4"},Td={__name:"TimezoneSelect",props:{modelValue:{type:String,default:null},label:{type:String,default:"Timezone"},placeholder:{type:String,default:"Select a timezone"},disabled:{type:Boolean,default:!1},required:{type:Boolean,default:!1},error:{type:String,default:""}},emits:["update:modelValue","change"],setup(b,{emit:A}){const m=b,s=A,t=K(()=>[{value:"Africa/Abidjan",label:"Africa/Abidjan (GMT+00:00)"},{value:"Africa/Accra",label:"Africa/Accra (GMT+00:00)"},{value:"Africa/Addis_Ababa",label:"Africa/Addis_Ababa (GMT+03:00)"},{value:"Africa/Algiers",label:"Africa/Algiers (GMT+01:00)"},{value:"Africa/Asmara",label:"Africa/Asmara (GMT+03:00)"},{value:"Africa/Bamako",label:"Africa/Bamako (GMT+00:00)"},{value:"Africa/Bangui",label:"Africa/Bangui (GMT+01:00)"},{value:"Africa/Banjul",label:"Africa/Banjul (GMT+00:00)"},{value:"Africa/Bissau",label:"Africa/Bissau (GMT+00:00)"},{value:"Africa/Blantyre",label:"Africa/Blantyre (GMT+02:00)"},{value:"Africa/Brazzaville",label:"Africa/Brazzaville (GMT+01:00)"},{value:"Africa/Bujumbura",label:"Africa/Bujumbura (GMT+02:00)"},{value:"Africa/Cairo",label:"Africa/Cairo (GMT+02:00)"},{value:"Africa/Casablanca",label:"Africa/Casablanca (GMT+01:00)"},{value:"Africa/Ceuta",label:"Africa/Ceuta (GMT+01:00)"},{value:"Africa/Conakry",label:"Africa/Conakry (GMT+00:00)"},{value:"Africa/Dakar",label:"Africa/Dakar (GMT+00:00)"},{value:"Africa/Dar_es_Salaam",label:"Africa/Dar_es_Salaam (GMT+03:00)"},{value:"Africa/Djibouti",label:"Africa/Djibouti (GMT+03:00)"},{value:"Africa/Douala",label:"Africa/Douala (GMT+01:00)"},{value:"Africa/El_Aaiun",label:"Africa/El_Aaiun (GMT+01:00)"},{value:"Africa/Freetown",label:"Africa/Freetown (GMT+00:00)"},{value:"Africa/Gaborone",label:"Africa/Gaborone (GMT+02:00)"},{value:"Africa/Harare",label:"Africa/Harare (GMT+02:00)"},{value:"Africa/Johannesburg",label:"Africa/Johannesburg (GMT+02:00)"},{value:"Africa/Juba",label:"Africa/Juba (GMT+03:00)"},{value:"Africa/Kampala",label:"Africa/Kampala (GMT+03:00)"},{value:"Africa/Khartoum",label:"Africa/Khartoum (GMT+02:00)"},{value:"Africa/Kigali",label:"Africa/Kigali (GMT+02:00)"},{value:"Africa/Kinshasa",label:"Africa/Kinshasa (GMT+01:00)"},{value:"Africa/Lagos",label:"Africa/Lagos (GMT+01:00)"},{value:"Africa/Libreville",label:"Africa/Libreville (GMT+01:00)"},{value:"Africa/Lome",label:"Africa/Lome (GMT+00:00)"},{value:"Africa/Luanda",label:"Africa/Luanda (GMT+01:00)"},{value:"Africa/Lubumbashi",label:"Africa/Lubumbashi (GMT+02:00)"},{value:"Africa/Lusaka",label:"Africa/Lusaka (GMT+02:00)"},{value:"Africa/Malabo",label:"Africa/Malabo (GMT+01:00)"},{value:"Africa/Maputo",label:"Africa/Maputo (GMT+02:00)"},{value:"Africa/Maseru",label:"Africa/Maseru (GMT+02:00)"},{value:"Africa/Mbabane",label:"Africa/Mbabane (GMT+02:00)"},{value:"Africa/Mogadishu",label:"Africa/Mogadishu (GMT+03:00)"},{value:"Africa/Monrovia",label:"Africa/Monrovia (GMT+00:00)"},{value:"Africa/Nairobi",label:"Africa/Nairobi (GMT+03:00)"},{value:"Africa/Ndjamena",label:"Africa/Ndjamena (GMT+01:00)"},{value:"Africa/Niamey",label:"Africa/Niamey (GMT+01:00)"},{value:"Africa/Nouakchott",label:"Africa/Nouakchott (GMT+00:00)"},{value:"Africa/Ouagadougou",label:"Africa/Ouagadougou (GMT+00:00)"},{value:"Africa/Porto-Novo",label:"Africa/Porto-Novo (GMT+01:00)"},{value:"Africa/Sao_Tome",label:"Africa/Sao_Tome (GMT+00:00)"},{value:"Africa/Tripoli",label:"Africa/Tripoli (GMT+02:00)"},{value:"Africa/Tunis",label:"Africa/Tunis (GMT+01:00)"},{value:"Africa/Windhoek",label:"Africa/Windhoek (GMT+02:00)"},{value:"America/Adak",label:"America/Adak (GMT-10:00)"},{value:"America/Anchorage",label:"America/Anchorage (GMT-09:00)"},{value:"America/Anguilla",label:"America/Anguilla (GMT-04:00)"},{value:"America/Antigua",label:"America/Antigua (GMT-04:00)"},{value:"America/Araguaina",label:"America/Araguaina (GMT-03:00)"},{value:"America/Argentina/Buenos_Aires",label:"America/Argentina/Buenos_Aires (GMT-03:00)"},{value:"America/Argentina/Catamarca",label:"America/Argentina/Catamarca (GMT-03:00)"},{value:"America/Argentina/Cordoba",label:"America/Argentina/Cordoba (GMT-03:00)"},{value:"America/Argentina/Jujuy",label:"America/Argentina/Jujuy (GMT-03:00)"},{value:"America/Argentina/La_Rioja",label:"America/Argentina/La_Rioja (GMT-03:00)"},{value:"America/Argentina/Mendoza",label:"America/Argentina/Mendoza (GMT-03:00)"},{value:"America/Argentina/Rio_Gallegos",label:"America/Argentina/Rio_Gallegos (GMT-03:00)"},{value:"America/Argentina/Salta",label:"America/Argentina/Salta (GMT-03:00)"},{value:"America/Argentina/San_Juan",label:"America/Argentina/San_Juan (GMT-03:00)"},{value:"America/Argentina/San_Luis",label:"America/Argentina/San_Luis (GMT-03:00)"},{value:"America/Argentina/Tucuman",label:"America/Argentina/Tucuman (GMT-03:00)"},{value:"America/Argentina/Ushuaia",label:"America/Argentina/Ushuaia (GMT-03:00)"},{value:"America/Aruba",label:"America/Aruba (GMT-04:00)"},{value:"America/Asuncion",label:"America/Asuncion (GMT-04:00)"},{value:"America/Atikokan",label:"America/Atikokan (GMT-05:00)"},{value:"America/Bahia",label:"America/Bahia (GMT-03:00)"},{value:"America/Bahia_Banderas",label:"America/Bahia_Banderas (GMT-06:00)"},{value:"America/Barbados",label:"America/Barbados (GMT-04:00)"},{value:"America/Belem",label:"America/Belem (GMT-03:00)"},{value:"America/Belize",label:"America/Belize (GMT-06:00)"},{value:"America/Blanc-Sablon",label:"America/Blanc-Sablon (GMT-04:00)"},{value:"America/Boa_Vista",label:"America/Boa_Vista (GMT-04:00)"},{value:"America/Bogota",label:"America/Bogota (GMT-05:00)"},{value:"America/Boise",label:"America/Boise (GMT-06:00)"},{value:"America/Cambridge_Bay",label:"America/Cambridge_Bay (GMT-06:00)"},{value:"America/Campo_Grande",label:"America/Campo_Grande (GMT-04:00)"},{value:"America/Cancun",label:"America/Cancun (GMT-05:00)"},{value:"America/Caracas",label:"America/Caracas (GMT-04:00)"},{value:"America/Cayenne",label:"America/Cayenne (GMT-03:00)"},{value:"America/Cayman",label:"America/Cayman (GMT-05:00)"},{value:"America/Chicago",label:"America/Chicago (GMT-05:00)"},{value:"America/Chihuahua",label:"America/Chihuahua (GMT-06:00)"},{value:"America/Ciudad_Juarez",label:"America/Ciudad_Juarez (GMT-06:00)"},{value:"America/Costa_Rica",label:"America/Costa_Rica (GMT-06:00)"},{value:"America/Creston",label:"America/Creston (GMT-07:00)"},{value:"America/Cuiaba",label:"America/Cuiaba (GMT-04:00)"},{value:"America/Curacao",label:"America/Curacao (GMT-04:00)"},{value:"America/Danmarkshavn",label:"America/Danmarkshavn (GMT+00:00)"},{value:"America/Dawson",label:"America/Dawson (GMT-07:00)"},{value:"America/Dawson_Creek",label:"America/Dawson_Creek (GMT-07:00)"},{value:"America/Denver",label:"America/Denver (GMT-06:00)"},{value:"America/Detroit",label:"America/Detroit (GMT-04:00)"},{value:"America/Dominica",label:"America/Dominica (GMT-04:00)"},{value:"America/Edmonton",label:"America/Edmonton (GMT-06:00)"},{value:"America/Eirunepe",label:"America/Eirunepe (GMT-05:00)"},{value:"America/El_Salvador",label:"America/El_Salvador (GMT-06:00)"},{value:"America/Fort_Nelson",label:"America/Fort_Nelson (GMT-07:00)"},{value:"America/Fortaleza",label:"America/Fortaleza (GMT-03:00)"},{value:"America/Glace_Bay",label:"America/Glace_Bay (GMT-03:00)"},{value:"America/Goose_Bay",label:"America/Goose_Bay (GMT-03:00)"},{value:"America/Grand_Turk",label:"America/Grand_Turk (GMT-04:00)"},{value:"America/Grenada",label:"America/Grenada (GMT-04:00)"},{value:"America/Guadeloupe",label:"America/Guadeloupe (GMT-04:00)"},{value:"America/Guatemala",label:"America/Guatemala (GMT-06:00)"},{value:"America/Guayaquil",label:"America/Guayaquil (GMT-05:00)"},{value:"America/Guyana",label:"America/Guyana (GMT-04:00)"},{value:"America/Halifax",label:"America/Halifax (GMT-03:00)"},{value:"America/Havana",label:"America/Havana (GMT-04:00)"},{value:"America/Hermosillo",label:"America/Hermosillo (GMT-07:00)"},{value:"America/Indiana/Indianapolis",label:"America/Indiana/Indianapolis (GMT-04:00)"},{value:"America/Indiana/Knox",label:"America/Indiana/Knox (GMT-05:00)"},{value:"America/Indiana/Marengo",label:"America/Indiana/Marengo (GMT-04:00)"},{value:"America/Indiana/Petersburg",label:"America/Indiana/Petersburg (GMT-04:00)"},{value:"America/Indiana/Vevay",label:"America/Indiana/Vevay (GMT-04:00)"},{value:"America/Indiana/Vincennes",label:"America/Indiana/Vincennes (GMT-04:00)"},{value:"America/Indiana/Winamac",label:"America/Indiana/Winamac (GMT-04:00)"},{value:"America/Inuvik",label:"America/Inuvik (GMT-06:00)"},{value:"America/Iqaluit",label:"America/Iqaluit (GMT-04:00)"},{value:"America/Jamaica",label:"America/Jamaica (GMT-05:00)"},{value:"America/Juneau",label:"America/Juneau (GMT-08:00)"},{value:"America/Kentucky/Louisville",label:"America/Kentucky/Louisville (GMT-04:00)"},{value:"America/Kentucky/Monticello",label:"America/Kentucky/Monticello (GMT-04:00)"},{value:"America/La_Paz",label:"America/La_Paz (GMT-04:00)"},{value:"America/Lima",label:"America/Lima (GMT-05:00)"},{value:"America/Los_Angeles",label:"America/Los_Angeles (GMT-07:00)"},{value:"America/Lower_Princes",label:"America/Lower_Princes (GMT-04:00)"},{value:"America/Maceio",label:"America/Maceio (GMT-03:00)"},{value:"America/Managua",label:"America/Managua (GMT-06:00)"},{value:"America/Manaus",label:"America/Manaus (GMT-04:00)"},{value:"America/Marigot",label:"America/Marigot (GMT-04:00)"},{value:"America/Martinique",label:"America/Martinique (GMT-04:00)"},{value:"America/Matamoros",label:"America/Matamoros (GMT-05:00)"},{value:"America/Mazatlan",label:"America/Mazatlan (GMT-06:00)"},{value:"America/Menominee",label:"America/Menominee (GMT-05:00)"},{value:"America/Merida",label:"America/Merida (GMT-05:00)"},{value:"America/Metlakatla",label:"America/Metlakatla (GMT-08:00)"},{value:"America/Mexico_City",label:"America/Mexico_City (GMT-05:00)"},{value:"America/Miquelon",label:"America/Miquelon (GMT-02:00)"},{value:"America/Moncton",label:"America/Moncton (GMT-03:00)"},{value:"America/Monterrey",label:"America/Monterrey (GMT-05:00)"},{value:"America/Montevideo",label:"America/Montevideo (GMT-03:00)"},{value:"America/Montserrat",label:"America/Montserrat (GMT-04:00)"},{value:"America/Nassau",label:"America/Nassau (GMT-04:00)"},{value:"America/New_York",label:"America/New_York (GMT-04:00)"},{value:"America/Nome",label:"America/Nome (GMT-08:00)"},{value:"America/Noronha",label:"America/Noronha (GMT-02:00)"},{value:"America/North_Dakota/Beulah",label:"America/North_Dakota/Beulah (GMT-05:00)"},{value:"America/North_Dakota/Center",label:"America/North_Dakota/Center (GMT-05:00)"},{value:"America/North_Dakota/New_Salem",label:"America/North_Dakota/New_Salem (GMT-05:00)"},{value:"America/Nuuk",label:"America/Nuuk (GMT-02:00)"},{value:"America/Ojinaga",label:"America/Ojinaga (GMT-06:00)"},{value:"America/Panama",label:"America/Panama (GMT-05:00)"},{value:"America/Paramaribo",label:"America/Paramaribo (GMT-03:00)"},{value:"America/Phoenix",label:"America/Phoenix (GMT-07:00)"},{value:"America/Port-au-Prince",label:"America/Port-au-Prince (GMT-04:00)"},{value:"America/Port_of_Spain",label:"America/Port_of_Spain (GMT-04:00)"},{value:"America/Puerto_Rico",label:"America/Puerto_Rico (GMT-04:00)"},{value:"America/Punta_Arenas",label:"America/Punta_Arenas (GMT-03:00)"},{value:"America/Rankin_Inlet",label:"America/Rankin_Inlet (GMT-05:00)"},{value:"America/Recife",label:"America/Recife (GMT-03:00)"},{value:"America/Regina",label:"America/Regina (GMT-06:00)"},{value:"America/Resolute",label:"America/Resolute (GMT-05:00)"},{value:"America/Rio_Branco",label:"America/Rio_Branco (GMT-05:00)"},{value:"America/Santarem",label:"America/Santarem (GMT-03:00)"},{value:"America/Santiago",label:"America/Santiago (GMT-04:00)"},{value:"America/Santo_Domingo",label:"America/Santo_Domingo (GMT-04:00)"},{value:"America/Sao_Paulo",label:"America/Sao_Paulo (GMT-03:00)"},{value:"America/Scoresbysund",label:"America/Scoresbysund (GMT+00:00)"},{value:"America/Sitka",label:"America/Sitka (GMT-08:00)"},{value:"America/St_Barthelemy",label:"America/St_Barthelemy (GMT-04:00)"},{value:"America/St_Johns",label:"America/St_Johns (GMT-02:30)"},{value:"America/St_Kitts",label:"America/St_Kitts (GMT-04:00)"},{value:"America/St_Lucia",label:"America/St_Lucia (GMT-04:00)"},{value:"America/St_Thomas",label:"America/St_Thomas (GMT-04:00)"},{value:"America/St_Vincent",label:"America/St_Vincent (GMT-04:00)"},{value:"America/Swift_Current",label:"America/Swift_Current (GMT-06:00)"},{value:"America/Tegucigalpa",label:"America/Tegucigalpa (GMT-06:00)"},{value:"America/Thule",label:"America/Thule (GMT-03:00)"},{value:"America/Tijuana",label:"America/Tijuana (GMT-07:00)"},{value:"America/Toronto",label:"America/Toronto (GMT-04:00)"},{value:"America/Tortola",label:"America/Tortola (GMT-04:00)"},{value:"America/Vancouver",label:"America/Vancouver (GMT-07:00)"},{value:"America/Whitehorse",label:"America/Whitehorse (GMT-07:00)"},{value:"America/Winnipeg",label:"America/Winnipeg (GMT-05:00)"},{value:"America/Yakutat",label:"America/Yakutat (GMT-08:00)"},{value:"America/Yellowknife",label:"America/Yellowknife (GMT-06:00)"},{value:"Antarctica/Casey",label:"Antarctica/Casey (GMT+11:00)"},{value:"Antarctica/Davis",label:"Antarctica/Davis (GMT+07:00)"},{value:"Antarctica/DumontDUrville",label:"Antarctica/DumontDUrville (GMT+10:00)"},{value:"Antarctica/Macquarie",label:"Antarctica/Macquarie (GMT+11:00)"},{value:"Antarctica/Mawson",label:"Antarctica/Mawson (GMT+05:00)"},{value:"Antarctica/Palmer",label:"Antarctica/Palmer (GMT-03:00)"},{value:"Antarctica/Rothera",label:"Antarctica/Rothera (GMT-03:00)"},{value:"Antarctica/Syowa",label:"Antarctica/Syowa (GMT+03:00)"},{value:"Antarctica/Troll",label:"Antarctica/Troll (GMT+00:00)"},{value:"Antarctica/Vostok",label:"Antarctica/Vostok (GMT+06:00)"},{value:"Asia/Almaty",label:"Asia/Almaty (GMT+05:00)"},{value:"Asia/Amman",label:"Asia/Amman (GMT+03:00)"},{value:"Asia/Anadyr",label:"Asia/Anadyr (GMT+12:00)"},{value:"Asia/Aqtau",label:"Asia/Aqtau (GMT+05:00)"},{value:"Asia/Aqtobe",label:"Asia/Aqtobe (GMT+05:00)"},{value:"Asia/Ashgabat",label:"Asia/Ashgabat (GMT+05:00)"},{value:"Asia/Atyrau",label:"Asia/Atyrau (GMT+05:00)"},{value:"Asia/Baghdad",label:"Asia/Baghdad (GMT+03:00)"},{value:"Asia/Baku",label:"Asia/Baku (GMT+04:00)"},{value:"Asia/Bangkok",label:"Asia/Bangkok (GMT+07:00)"},{value:"Asia/Barnaul",label:"Asia/Barnaul (GMT+07:00)"},{value:"Asia/Beirut",label:"Asia/Beirut (GMT+03:00)"},{value:"Asia/Bishkek",label:"Asia/Bishkek (GMT+06:00)"},{value:"Asia/Brunei",label:"Asia/Brunei (GMT+08:00)"},{value:"Asia/Chita",label:"Asia/Chita (GMT+09:00)"},{value:"Asia/Choibalsan",label:"Asia/Choibalsan (GMT+08:00)"},{value:"Asia/Colombo",label:"Asia/Colombo (GMT+05:30)"},{value:"Asia/Damascus",label:"Asia/Damascus (GMT+03:00)"},{value:"Asia/Dhaka",label:"Asia/Dhaka (GMT+06:00)"},{value:"Asia/Dili",label:"Asia/Dili (GMT+09:00)"},{value:"Asia/Dubai",label:"Asia/Dubai (GMT+04:00)"},{value:"Asia/Dushanbe",label:"Asia/Dushanbe (GMT+05:00)"},{value:"Asia/Famagusta",label:"Asia/Famagusta (GMT+03:00)"},{value:"Asia/Gaza",label:"Asia/Gaza (GMT+03:00)"},{value:"Asia/Hebron",label:"Asia/Hebron (GMT+03:00)"},{value:"Asia/Ho_Chi_Minh",label:"Asia/Ho_Chi_Minh (GMT+07:00)"},{value:"Asia/Hong_Kong",label:"Asia/Hong_Kong (GMT+08:00)"},{value:"Asia/Hovd",label:"Asia/Hovd (GMT+07:00)"},{value:"Asia/Irkutsk",label:"Asia/Irkutsk (GMT+08:00)"},{value:"Asia/Jakarta",label:"Asia/Jakarta (GMT+07:00)"},{value:"Asia/Jayapura",label:"Asia/Jayapura (GMT+09:00)"},{value:"Asia/Jerusalem",label:"Asia/Jerusalem (GMT+03:00)"},{value:"Asia/Kabul",label:"Asia/Kabul (GMT+04:30)"},{value:"Asia/Kamchatka",label:"Asia/Kamchatka (GMT+12:00)"},{value:"Asia/Karachi",label:"Asia/Karachi (GMT+05:00)"},{value:"Asia/Kathmandu",label:"Asia/Kathmandu (GMT+05:45)"},{value:"Asia/Khandyga",label:"Asia/Khandyga (GMT+09:00)"},{value:"Asia/Kolkata",label:"Asia/Kolkata (GMT+05:30)"},{value:"Asia/Krasnoyarsk",label:"Asia/Krasnoyarsk (GMT+07:00)"},{value:"Asia/Kuala_Lumpur",label:"Asia/Kuala_Lumpur (GMT+08:00)"},{value:"Asia/Kuching",label:"Asia/Kuching (GMT+08:00)"},{value:"Asia/Kuwait",label:"Asia/Kuwait (GMT+03:00)"},{value:"Asia/Macau",label:"Asia/Macau (GMT+08:00)"},{value:"Asia/Magadan",label:"Asia/Magadan (GMT+11:00)"},{value:"Asia/Makassar",label:"Asia/Makassar (GMT+08:00)"},{value:"Asia/Manila",label:"Asia/Manila (GMT+08:00)"},{value:"Asia/Muscat",label:"Asia/Muscat (GMT+04:00)"},{value:"Asia/Nicosia",label:"Asia/Nicosia (GMT+03:00)"},{value:"Asia/Novokuznetsk",label:"Asia/Novokuznetsk (GMT+07:00)"},{value:"Asia/Novosibirsk",label:"Asia/Novosibirsk (GMT+07:00)"},{value:"Asia/Omsk",label:"Asia/Omsk (GMT+06:00)"},{value:"Asia/Oral",label:"Asia/Oral (GMT+05:00)"},{value:"Asia/Phnom_Penh",label:"Asia/Phnom_Penh (GMT+07:00)"},{value:"Asia/Pontianak",label:"Asia/Pontianak (GMT+07:00)"},{value:"Asia/Pyongyang",label:"Asia/Pyongyang (GMT+09:00)"},{value:"Asia/Qatar",label:"Asia/Qatar (GMT+03:00)"},{value:"Asia/Qostanay",label:"Asia/Qostanay (GMT+05:00)"},{value:"Asia/Qyzylorda",label:"Asia/Qyzylorda (GMT+05:00)"},{value:"Asia/Riyadh",label:"Asia/Riyadh (GMT+03:00)"},{value:"Asia/Sakhalin",label:"Asia/Sakhalin (GMT+11:00)"},{value:"Asia/Samarkand",label:"Asia/Samarkand (GMT+05:00)"},{value:"Asia/Seoul",label:"Asia/Seoul (GMT+09:00)"},{value:"Asia/Shanghai",label:"Asia/Shanghai (GMT+08:00)"},{value:"Asia/Singapore",label:"Asia/Singapore (GMT+08:00)"},{value:"Asia/Srednekolymsk",label:"Asia/Srednekolymsk (GMT+11:00)"},{value:"Asia/Taipei",label:"Asia/Taipei (GMT+08:00)"},{value:"Asia/Tashkent",label:"Asia/Tashkent (GMT+05:00)"},{value:"Asia/Tbilisi",label:"Asia/Tbilisi (GMT+04:00)"},{value:"Asia/Tehran",label:"Asia/Tehran (GMT+03:30)"},{value:"Asia/Thimphu",label:"Asia/Thimphu (GMT+06:00)"},{value:"Asia/Tokyo",label:"Asia/Tokyo (GMT+09:00)"},{value:"Asia/Tomsk",label:"Asia/Tomsk (GMT+07:00)"},{value:"Asia/Ulaanbaatar",label:"Asia/Ulaanbaatar (GMT+08:00)"},{value:"Asia/Urumqi",label:"Asia/Urumqi (GMT+06:00)"},{value:"Asia/Ust-Nera",label:"Asia/Ust-Nera (GMT+10:00)"},{value:"Asia/Vladivostok",label:"Asia/Vladivostok (GMT+10:00)"},{value:"Asia/Yakutsk",label:"Asia/Yakutsk (GMT+09:00)"},{value:"Asia/Yangon",label:"Asia/Yangon (GMT+06:30)"},{value:"Asia/Yekaterinburg",label:"Asia/Yekaterinburg (GMT+05:00)"},{value:"Asia/Yerevan",label:"Asia/Yerevan (GMT+04:00)"},{value:"Atlantic/Azores",label:"Atlantic/Azores (GMT-01:00)"},{value:"Atlantic/Bermuda",label:"Atlantic/Bermuda (GMT-03:00)"},{value:"Atlantic/Canary",label:"Atlantic/Canary (GMT+00:00)"},{value:"Atlantic/Cape_Verde",label:"Atlantic/Cape_Verde (GMT-01:00)"},{value:"Atlantic/Faroe",label:"Atlantic/Faroe (GMT+00:00)"},{value:"Atlantic/Madeira",label:"Atlantic/Madeira (GMT+00:00)"},{value:"Atlantic/Reykjavik",label:"Atlantic/Reykjavik (GMT+00:00)"},{value:"Atlantic/South_Georgia",label:"Atlantic/South_Georgia (GMT-02:00)"},{value:"Atlantic/St_Helena",label:"Atlantic/St_Helena (GMT+00:00)"},{value:"Atlantic/Stanley",label:"Atlantic/Stanley (GMT-03:00)"},{value:"Australia/Adelaide",label:"Australia/Adelaide (GMT+09:30)"},{value:"Australia/Brisbane",label:"Australia/Brisbane (GMT+10:00)"},{value:"Australia/Broken_Hill",label:"Australia/Broken_Hill (GMT+09:30)"},{value:"Australia/Darwin",label:"Australia/Darwin (GMT+09:30)"},{value:"Australia/Eucla",label:"Australia/Eucla (GMT+08:45)"},{value:"Australia/Hobart",label:"Australia/Hobart (GMT+10:00)"},{value:"Australia/Lindeman",label:"Australia/Lindeman (GMT+10:00)"},{value:"Australia/Lord_Howe",label:"Australia/Lord_Howe (GMT+10:30)"},{value:"Australia/Melbourne",label:"Australia/Melbourne (GMT+10:00)"},{value:"Australia/Perth",label:"Australia/Perth (GMT+08:00)"},{value:"Australia/Sydney",label:"Australia/Sydney (GMT+10:00)"},{value:"Europe/Amsterdam",label:"Europe/Amsterdam (GMT+02:00)"},{value:"Europe/Andorra",label:"Europe/Andorra (GMT+02:00)"},{value:"Europe/Astrakhan",label:"Europe/Astrakhan (GMT+04:00)"},{value:"Europe/Athens",label:"Europe/Athens (GMT+03:00)"},{value:"Europe/Belgrade",label:"Europe/Belgrade (GMT+02:00)"},{value:"Europe/Berlin",label:"Europe/Berlin (GMT+02:00)"},{value:"Europe/Brussels",label:"Europe/Brussels (GMT+02:00)"},{value:"Europe/Bucharest",label:"Europe/Bucharest (GMT+03:00)"},{value:"Europe/Budapest",label:"Europe/Budapest (GMT+02:00)"},{value:"Europe/Chisinau",label:"Europe/Chisinau (GMT+03:00)"},{value:"Europe/Copenhagen",label:"Europe/Copenhagen (GMT+02:00)"},{value:"Europe/Dublin",label:"Europe/Dublin (GMT+01:00)"},{value:"Europe/Gibraltar",label:"Europe/Gibraltar (GMT+02:00)"},{value:"Europe/Helsinki",label:"Europe/Helsinki (GMT+03:00)"},{value:"Europe/Istanbul",label:"Europe/Istanbul (GMT+03:00)"},{value:"Europe/Kaliningrad",label:"Europe/Kaliningrad (GMT+02:00)"},{value:"Europe/Kirov",label:"Europe/Kirov (GMT+03:00)"},{value:"Europe/Kyiv",label:"Europe/Kyiv (GMT+03:00)"},{value:"Europe/Lisbon",label:"Europe/Lisbon (GMT+01:00)"},{value:"Europe/London",label:"Europe/London (GMT+01:00)"},{value:"Europe/Luxembourg",label:"Europe/Luxembourg (GMT+02:00)"},{value:"Europe/Madrid",label:"Europe/Madrid (GMT+02:00)"},{value:"Europe/Malta",label:"Europe/Malta (GMT+02:00)"},{value:"Europe/Minsk",label:"Europe/Minsk (GMT+03:00)"},{value:"Europe/Monaco",label:"Europe/Monaco (GMT+02:00)"},{value:"Europe/Moscow",label:"Europe/Moscow (GMT+03:00)"},{value:"Europe/Oslo",label:"Europe/Oslo (GMT+02:00)"},{value:"Europe/Paris",label:"Europe/Paris (GMT+02:00)"},{value:"Europe/Prague",label:"Europe/Prague (GMT+02:00)"},{value:"Europe/Riga",label:"Europe/Riga (GMT+03:00)"},{value:"Europe/Rome",label:"Europe/Rome (GMT+02:00)"},{value:"Europe/Samara",label:"Europe/Samara (GMT+04:00)"},{value:"Europe/San_Marino",label:"Europe/San_Marino (GMT+02:00)"},{value:"Europe/Sarajevo",label:"Europe/Sarajevo (GMT+02:00)"},{value:"Europe/Saratov",label:"Europe/Saratov (GMT+04:00)"},{value:"Europe/Simferopol",label:"Europe/Simferopol (GMT+03:00)"},{value:"Europe/Skopje",label:"Europe/Skopje (GMT+02:00)"},{value:"Europe/Sofia",label:"Europe/Sofia (GMT+03:00)"},{value:"Europe/Stockholm",label:"Europe/Stockholm (GMT+02:00)"},{value:"Europe/Tallinn",label:"Europe/Tallinn (GMT+03:00)"},{value:"Europe/Tirane",label:"Europe/Tirane (GMT+02:00)"},{value:"Europe/Ulyanovsk",label:"Europe/Ulyanovsk (GMT+04:00)"},{value:"Europe/Uzhgorod",label:"Europe/Uzhgorod (GMT+03:00)"},{value:"Europe/Vaduz",label:"Europe/Vaduz (GMT+02:00)"},{value:"Europe/Vatican",label:"Europe/Vatican (GMT+02:00)"},{value:"Europe/Vienna",label:"Europe/Vienna (GMT+02:00)"},{value:"Europe/Vilnius",label:"Europe/Vilnius (GMT+03:00)"},{value:"Europe/Volgograd",label:"Europe/Volgograd (GMT+03:00)"},{value:"Europe/Warsaw",label:"Europe/Warsaw (GMT+02:00)"},{value:"Europe/Zagreb",label:"Europe/Zagreb (GMT+02:00)"},{value:"Europe/Zaporozhye",label:"Europe/Zaporozhye (GMT+03:00)"},{value:"Europe/Zurich",label:"Europe/Zurich (GMT+02:00)"},{value:"Indian/Antananarivo",label:"Indian/Antananarivo (GMT+03:00)"},{value:"Indian/Chagos",label:"Indian/Chagos (GMT+06:00)"},{value:"Indian/Christmas",label:"Indian/Christmas (GMT+07:00)"},{value:"Indian/Cocos",label:"Indian/Cocos (GMT+06:30)"},{value:"Indian/Comoro",label:"Indian/Comoro (GMT+03:00)"},{value:"Indian/Kerguelen",label:"Indian/Kerguelen (GMT+05:00)"},{value:"Indian/Mahe",label:"Indian/Mahe (GMT+04:00)"},{value:"Indian/Maldives",label:"Indian/Maldives (GMT+05:00)"},{value:"Indian/Mauritius",label:"Indian/Mauritius (GMT+04:00)"},{value:"Indian/Mayotte",label:"Indian/Mayotte (GMT+03:00)"},{value:"Indian/Reunion",label:"Indian/Reunion (GMT+04:00)"},{value:"Pacific/Apia",label:"Pacific/Apia (GMT+13:00)"},{value:"Pacific/Auckland",label:"Pacific/Auckland (GMT+12:00)"},{value:"Pacific/Bougainville",label:"Pacific/Bougainville (GMT+11:00)"},{value:"Pacific/Chatham",label:"Pacific/Chatham (GMT+12:45)"},{value:"Pacific/Chuuk",label:"Pacific/Chuuk (GMT+10:00)"},{value:"Pacific/Easter",label:"Pacific/Easter (GMT-06:00)"},{value:"Pacific/Efate",label:"Pacific/Efate (GMT+11:00)"},{value:"Pacific/Fakaofo",label:"Pacific/Fakaofo (GMT+13:00)"},{value:"Pacific/Fiji",label:"Pacific/Fiji (GMT+12:00)"},{value:"Pacific/Funafuti",label:"Pacific/Funafuti (GMT+12:00)"},{value:"Pacific/Galapagos",label:"Pacific/Galapagos (GMT-06:00)"},{value:"Pacific/Gambier",label:"Pacific/Gambier (GMT-09:00)"},{value:"Pacific/Guadalcanal",label:"Pacific/Guadalcanal (GMT+11:00)"},{value:"Pacific/Guam",label:"Pacific/Guam (GMT+10:00)"},{value:"Pacific/Honolulu",label:"Pacific/Honolulu (GMT-10:00)"},{value:"Pacific/Kanton",label:"Pacific/Kanton (GMT+13:00)"},{value:"Pacific/Kiritimati",label:"Pacific/Kiritimati (GMT+14:00)"},{value:"Pacific/Kosrae",label:"Pacific/Kosrae (GMT+11:00)"},{value:"Pacific/Kwajalein",label:"Pacific/Kwajalein (GMT+12:00)"},{value:"Pacific/Majuro",label:"Pacific/Majuro (GMT+12:00)"},{value:"Pacific/Marquesas",label:"Pacific/Marquesas (GMT-09:30)"},{value:"Pacific/Midway",label:"Pacific/Midway (GMT-11:00)"},{value:"Pacific/Nauru",label:"Pacific/Nauru (GMT+12:00)"},{value:"Pacific/Niue",label:"Pacific/Niue (GMT-11:00)"},{value:"Pacific/Norfolk",label:"Pacific/Norfolk (GMT+11:00)"},{value:"Pacific/Noumea",label:"Pacific/Noumea (GMT+11:00)"},{value:"Pacific/Pago_Pago",label:"Pacific/Pago_Pago (GMT-11:00)"},{value:"Pacific/Palau",label:"Pacific/Palau (GMT+09:00)"},{value:"Pacific/Pitcairn",label:"Pacific/Pitcairn (GMT-08:00)"},{value:"Pacific/Pohnpei",label:"Pacific/Pohnpei (GMT+11:00)"},{value:"Pacific/Port_Moresby",label:"Pacific/Port_Moresby (GMT+10:00)"},{value:"Pacific/Rarotonga",label:"Pacific/Rarotonga (GMT-10:00)"},{value:"Pacific/Saipan",label:"Pacific/Saipan (GMT+10:00)"},{value:"Pacific/Tahiti",label:"Pacific/Tahiti (GMT-10:00)"},{value:"Pacific/Tarawa",label:"Pacific/Tarawa (GMT+12:00)"},{value:"Pacific/Tongatapu",label:"Pacific/Tongatapu (GMT+13:00)"},{value:"Pacific/Wake",label:"Pacific/Wake (GMT+12:00)"},{value:"Pacific/Wallis",label:"Pacific/Wallis (GMT+12:00)"}]),p=K({get:()=>m.modelValue,set:c=>{s("update:modelValue",c),s("change",c)}});return be(()=>{if((m.modelValue===null||m.modelValue===void 0)&&!m.disabled)try{const c=Intl.DateTimeFormat().resolvedOptions().timeZone;t.value.find(d=>d.value===c)?p.value=c:console.warn(`Detected timezone "${c}" is not in the predefined list.`)}catch(c){console.error("Error auto-detecting timezone:",c)}}),(c,y)=>(a(),i("div",Ad,[r(O,{for:b.label.toLowerCase().replace(/\s/g,"-"),value:b.label},null,8,["for","value"]),r(ge,{id:b.label.toLowerCase().replace(/\s/g,"-"),modelValue:p.value,"onUpdate:modelValue":y[0]||(y[0]=d=>p.value=d),options:t.value,valueKey:"value",labelKey:"label",placeholder:b.placeholder,disabled:b.disabled,required:b.required,class:"mt-1 block w-full"},null,8,["id","modelValue","options","placeholder","disabled","required"]),r(X,{message:b.error,class:"mt-2"},null,8,["message"])]))}},Md={key:0,class:"text-sm text-gray-600 mb-3"},$d=["value"],Cd={__name:"UserDataPromptModal",props:{show:{type:Boolean,default:!1},configItem:{type:Object,required:!0}},emits:["close","submitted","error"],setup(b,{emit:A}){const m=b,s=M({value:""});ne(()=>m.show,d=>{d&&(s.value={value:""})});const t=K(()=>{var d,n;return((n=(d=m.configItem)==null?void 0:d.api)==null?void 0:n.endpoint)||"/api/user/update-profile-field"}),p=K(()=>{var d,n;return((n=(d=m.configItem)==null?void 0:d.api)==null?void 0:n.method)||"post"}),c=d=>{var l,u,v,$,g;if((l=m.configItem)!=null&&l.toPayload)return m.configItem.toPayload(d.value);const n=((v=(u=m.configItem)==null?void 0:u.api)==null?void 0:v.fieldParam)||"field",o=((g=($=m.configItem)==null?void 0:$.api)==null?void 0:g.valueParam)||"value";return{[n]:m.configItem.column,[o]:d.value}},y=K(()=>{var d;return((d=m.configItem)==null?void 0:d.title)||"Additional Information Required"});return(d,n)=>(a(),D(Ee,{show:b.show,title:y.value,"api-endpoint":t.value,"http-method":p.value,"form-data":s.value,"submit-button-text":"Save","success-message":"Saved successfully","format-data-for-api":c,onClose:n[3]||(n[3]=o=>d.$emit("close")),onSubmitted:n[4]||(n[4]=o=>d.$emit("submitted",o)),onError:n[5]||(n[5]=o=>d.$emit("error",o))},{default:h(({errors:o})=>{var l,u,v,$,g,V,E,T,k,j,z,F,H,P;return[(l=b.configItem)!=null&&l.description?(a(),i("p",Md,S(b.configItem.description),1)):x("",!0),e("div",null,[((v=(u=b.configItem)==null?void 0:u.input)==null?void 0:v.type)==="component"&&((g=($=b.configItem)==null?void 0:$.input)==null?void 0:g.component)==="TimezoneSelect"?(a(),i(Z,{key:0},[r(Td,{modelValue:s.value.value,"onUpdate:modelValue":n[0]||(n[0]=I=>s.value.value=I),required:!0},null,8,["modelValue"]),r(X,{message:(V=o==null?void 0:o.value)==null?void 0:V[0],class:"mt-2"},null,8,["message"])],64)):((T=(E=b.configItem)==null?void 0:E.input)==null?void 0:T.type)==="select"?(a(),i(Z,{key:1},[r(O,{value:((k=b.configItem)==null?void 0:k.label)||"Select an option"},null,8,["value"]),U(e("select",{"onUpdate:modelValue":n[1]||(n[1]=I=>s.value.value=I),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[n[6]||(n[6]=e("option",{disabled:"",value:""},"Please select",-1)),(a(!0),i(Z,null,oe(((z=(j=b.configItem)==null?void 0:j.input)==null?void 0:z.options)||[],I=>(a(),i("option",{key:I.value||I,value:I.value||I},S(I.label||I),9,$d))),128))],512),[[qe,s.value.value]]),r(X,{message:(F=o==null?void 0:o.value)==null?void 0:F[0],class:"mt-2"},null,8,["message"])],64)):(a(),i(Z,{key:2},[r(O,{value:((H=b.configItem)==null?void 0:H.label)||"Value"},null,8,["value"]),r(pe,{modelValue:s.value.value,"onUpdate:modelValue":n[2]||(n[2]=I=>s.value.value=I),class:"mt-1 block w-full"},null,8,["modelValue"]),r(X,{message:(P=o==null?void 0:o.value)==null?void 0:P[0],class:"mt-2"},null,8,["message"])],64))])]}),_:1},8,["show","title","api-endpoint","http-method","form-data"]))}},Sd=[{id:"users.timezone",model:"users",column:"timezone",title:"Set your timezone",description:"We could not detect your timezone during login. Please select your timezone to get correct schedule times.",input:{type:"component",component:"TimezoneSelect",props:{}},api:{endpoint:"/api/user/update-profile-field",method:"post",fieldParam:"field",valueParam:"value"},isMissing:b=>!(b!=null&&b.timezone),toPayload:b=>({field:"timezone",value:b})}],Gd={__name:"PromptOrchestrator",setup(b){const A=M(!1),m=M(null),s=M([]),t=()=>{const o=localStorage.getItem("authToken");o&&!fe.defaults.headers.common.Authorization&&(fe.defaults.headers.common.Authorization=`Bearer ${o}`)},p=async()=>{t();const{data:o}=await fe.get("/api/user");return o},c=o=>{const l=[];for(const u of Sd)try{(typeof u.isMissing=="function"?u.isMissing(o):!(o!=null&&o[u.column]))&&l.push(u)}catch(v){console.error("Error evaluating prompt config",u,v)}return l},y=()=>{if(s.value.length===0){m.value=null,A.value=!1;return}m.value=s.value.shift(),A.value=!0},d=async()=>{try{const o=await p();s.value=c(o),y()}catch(o){console.error("PromptOrchestrator initialization failed",o)}},n=async()=>{try{const o=await p();s.value=c(o)}catch{}y()};return be(()=>{d()}),(o,l)=>m.value?(a(),D(Cd,{key:0,show:A.value,"config-item":m.value,onClose:y,onSubmitted:n},null,8,["show","config-item"])):x("",!0)}},jd={key:0,class:"mb-4"},Pd={key:1,class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},Ed={class:"mb-6 flex space-x-4 border-b border-gray-100"},Vd={key:2,class:"space-y-4"},Id={key:3},Bd={__name:"MeetingMinutesModal",props:{show:Boolean,projectId:Number,projects:{type:Array,default:()=>[]}},emits:["close","minutesAdded"],setup(b,{emit:A}){const m=b,s=A,t=M("separate"),p=M(!1),c=M([]),y=M([]),d=Te({project_id:null,discussion:"",more_info:"",blockers:"",actions:"",full_minutes:"",attended_users:[],attended_clients:[]});ne(()=>m.projectId,$=>{$&&(d.project_id=$)},{immediate:!0}),ne(()=>m.show,$=>{$&&(d.project_id=m.projectId||null,d.discussion="",d.more_info="",d.blockers="",d.actions="",d.full_minutes="",d.attended_users=[],d.attended_clients=[],t.value="separate")});const n=async $=>{if($){p.value=!0;try{const g=await window.axios.get(`/api/projects/${$}/sections/meeting-attendees`);c.value=(g.data.users||[]).map(V=>({value:V.id,label:V.name})),y.value=(g.data.clients||[]).map(V=>({value:V.id,label:V.name}))}catch(g){console.error("Error fetching attendees:",g)}finally{p.value=!1}}},o=$=>{s("minutesAdded")},l=$=>{console.error("Error in MeetingMinutesModal submission:",$)},u=M("");ne(()=>d.project_id,$=>{$?(u.value=`/api/projects/${$}/meeting-minutes`,n($)):(u.value="",c.value=[],y.value=[])},{immediate:!0});const v=M([]);return ne(()=>m.projects,$=>{v.value=$.map(g=>({value:g.id,label:g.name}))},{immediate:!0}),($,g)=>(a(),D(Ee,{show:b.show,title:"Add Meeting Minutes","api-endpoint":u.value,"http-method":"post","form-data":d,"submit-button-text":"Submit Minutes","success-message":"Meeting minutes submitted successfully!",onClose:g[10]||(g[10]=V=>$.$emit("close")),onSubmitted:o,onError:l},{default:h(({errors:V})=>[b.projectId?x("",!0):(a(),i("div",jd,[r(O,{for:"project_id",value:"Select Project"}),r(ge,{modelValue:d.project_id,"onUpdate:modelValue":g[0]||(g[0]=E=>d.project_id=E),options:v.value,placeholder:"Select a project...",class:"mt-1 block w-full"},null,8,["modelValue","options"]),r(X,{message:V.project_id?V.project_id[0]:"",class:"mt-2"},null,8,["message"])])),d.project_id?(a(),i("div",Pd,[e("div",null,[r(O,{for:"attended_users",value:"Who attended (Internal)"}),r(Xe,{modelValue:d.attended_users,"onUpdate:modelValue":g[1]||(g[1]=E=>d.attended_users=E),options:c.value,"is-multi":!0,placeholder:"Select team members...",class:"mt-1",disabled:p.value},null,8,["modelValue","options","disabled"]),r(X,{message:V.attended_users?V.attended_users[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[r(O,{for:"attended_clients",value:"Client Attended (Optional)"}),r(Xe,{modelValue:d.attended_clients,"onUpdate:modelValue":g[2]||(g[2]=E=>d.attended_clients=E),options:y.value,"is-multi":!0,placeholder:"Select clients...",class:"mt-1",disabled:p.value},null,8,["modelValue","options","disabled"]),r(X,{message:V.attended_clients?V.attended_clients[0]:"",class:"mt-2"},null,8,["message"])])])):x("",!0),e("div",Ed,[e("button",{type:"button",onClick:g[3]||(g[3]=E=>t.value="separate"),class:q(["pb-2 px-1 text-sm font-medium transition-colors duration-200 border-b-2",t.value==="separate"?"text-indigo-600 border-indigo-600":"text-gray-500 border-transparent hover:text-gray-700"])}," Structured ",2),e("button",{type:"button",onClick:g[4]||(g[4]=E=>t.value="full"),class:q(["pb-2 px-1 text-sm font-medium transition-colors duration-200 border-b-2",t.value==="full"?"text-indigo-600 border-indigo-600":"text-gray-500 border-transparent hover:text-gray-700"])}," Paste Text ",2)]),t.value==="separate"?(a(),i("div",Vd,[e("div",null,[r(O,{for:"discussion",value:"Discussion"}),U(e("textarea",{id:"discussion",rows:"3",class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm","onUpdate:modelValue":g[5]||(g[5]=E=>d.discussion=E),placeholder:"What was discussed?"},null,512),[[ie,d.discussion]]),r(X,{message:V.discussion?V.discussion[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[r(O,{for:"more_info",value:"Require More Information"}),U(e("textarea",{id:"more_info",rows:"2",class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm","onUpdate:modelValue":g[6]||(g[6]=E=>d.more_info=E),placeholder:"Any information needed?"},null,512),[[ie,d.more_info]]),r(X,{message:V.more_info?V.more_info[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[r(O,{for:"blockers",value:"Blockers"}),U(e("textarea",{id:"blockers",rows:"2",class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm","onUpdate:modelValue":g[7]||(g[7]=E=>d.blockers=E),placeholder:"Any blockers?"},null,512),[[ie,d.blockers]]),r(X,{message:V.blockers?V.blockers[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[r(O,{for:"actions",value:"Actions"}),U(e("textarea",{id:"actions",rows:"3",class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm","onUpdate:modelValue":g[8]||(g[8]=E=>d.actions=E),placeholder:"Action items..."},null,512),[[ie,d.actions]]),r(X,{message:V.actions?V.actions[0]:"",class:"mt-2"},null,8,["message"])])])):(a(),i("div",Id,[r(O,{for:"full_minutes",value:"Past All Meeting Minutes"}),U(e("textarea",{id:"full_minutes",rows:"12",class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm font-mono text-sm","onUpdate:modelValue":g[9]||(g[9]=E=>d.full_minutes=E),placeholder:"Paste all minutes here..."},null,512),[[ie,d.full_minutes]]),r(X,{message:V.full_minutes?V.full_minutes[0]:"",class:"mt-2"},null,8,["message"])]))]),_:1},8,["show","api-endpoint","form-data"]))}},Dd={class:"flex h-screen overflow-hidden"},Nd={class:"flex-1 flex flex-col overflow-hidden"},Ud={key:0,class:"bg-white shadow"},Ld={class:"mx-auto max-w-7xl px-4 py-6 sm:px-6 lg:px-8"},zd={class:"flex-1 overflow-y-auto"},cc={__name:"AuthenticatedLayout",setup(b){const A=M(!1),m=M(!1),s=M(!1),t=M(!1),p=M(!1),c=M([]),y=M(!0),d=K(()=>We().props.id||null),{showNoticeModal:n,unreadNotices:o,fetchUnreadNotices:l,closeModal:u}=_d(),v=M(null),$=async()=>{const F=localStorage.getItem("authToken");if(F){window.axios.defaults.headers.common.Authorization=`Bearer ${F}`;try{await window.axios.get("/api/user")}catch(H){H.response&&H.response.status===401&&(console.log("Session expired, redirecting to login"),localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization,window.location.href="/login")}}else delete window.axios.defaults.headers.common.Authorization},g=()=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization},V=F=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization,window.location.href="/login"},E=async()=>{y.value=!0;try{const F=await window.axios.get("/api/projects-simplified");c.value=F.data}catch(F){console.error("Error fetching all projects for sidebar:",F),c.value=[]}finally{y.value=!1}},T=F=>{va.visit(route("projects.show",F))},k=K(()=>Ke.value.notifications.filter(F=>!F.isRead).length),j=F=>{console.log("Task updated globally.",F)},z=F=>{console.log("Task deleted globally.",F)};return be(()=>{$(),v.value&&ca(v.value),E(),ma(),Tt(l),l()}),It(()=>{Tt(null)}),(F,H)=>(a(),i("div",Dd,[r(Qa,{ref_key:"standardNotificationContainerRef",ref:v},null,512),r(Oa,{"sidebar-is-open":N(Ke).show},null,8,["sidebar-is-open"]),r(Dl),r(Ti,{"all-projects":c.value,"active-project-id":d.value,onProjectSelected:T},null,8,["all-projects","active-project-id"]),e("div",Nd,[r(Gn,{"unread-notification-count":k.value,onOpenCreateTaskModal:H[0]||(H[0]=P=>m.value=!0),onOpenAddResource:H[1]||(H[1]=P=>s.value=!0),onOpenNotificationsSidebar:N(Mt),onOpenKudoModal:H[2]||(H[2]=P=>t.value=!0),onOpenMeetingMinutesModal:H[3]||(H[3]=P=>p.value=!0)},null,8,["unread-notification-count","onOpenNotificationsSidebar"]),r(Un,{"showing-navigation-dropdown":A.value,"unread-notification-count":k.value,onOpenCreateTaskModal:H[4]||(H[4]=P=>m.value=!0),onOpenAddResource:H[5]||(H[5]=P=>s.value=!0),onOpenNotificationsSidebar:N(Mt),onLogoutSuccess:g,onLogoutError:V},null,8,["showing-navigation-dropdown","unread-notification-count","onOpenNotificationsSidebar"]),F.$slots.header?(a(),i("header",Ud,[e("div",Ld,[je(F.$slots,"header")])])):x("",!0),e("main",zd,[je(F.$slots,"default")]),r(yo,{show:m.value,onClose:H[6]||(H[6]=P=>m.value=!1),onSaved:H[7]||(H[7]=P=>m.value=!1)},null,8,["show"]),r(Mo,{"api-endpoint":"/api/shareable-resources",show:s.value,onClose:H[8]||(H[8]=P=>s.value=!1)},null,8,["show"]),r(Jo,{show:t.value,onClose:H[9]||(H[9]=P=>t.value=!1),onSubmitted:H[10]||(H[10]=P=>t.value=!1)},null,8,["show"]),r(Bd,{show:p.value,projects:c.value,onClose:H[11]||(H[11]=P=>p.value=!1),onMinutesAdded:H[12]||(H[12]=P=>p.value=!1)},null,8,["show","projects"])]),r(wd,{onTaskUpdated:j,onTaskDeleted:z}),r(Oo),r(Ca,{show:N(n),unreadNotices:N(o),onClose:N(u)},null,8,["show","unreadNotices","onClose"]),r(Gd)]))}};export{Mo as C,Dt as T,cc as _,Ut as a,hd as b,Zl as c,Pl as d,Td as e,ir as f,St as g,Wn as h,yo as i,mr as j,Nt as r};
