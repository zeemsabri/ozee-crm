import{a,o as r,b as t,r as d,f as K,e as mt,c as gt,d as p,u as m,h as ft,w as T,g as A,i as g,v as y,x as E,t as l,F as x,l as C,s as q,J as O,m as h,j as I,K as xt,G as vt}from"./app-DE4Dhl4H.js";import{r as yt,R as z,a as ht,b as bt,_ as _t}from"./AuthenticatedLayout-DXL23zJG.js";import{_ as wt}from"./MultiSelectDropdown-C6YFV7CQ.js";import"./auto-BIBwKD9g.js";import{C as kt}from"./chart-DUfl3Dpl.js";import{_ as Ct}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as jt}from"./ClockIcon-DzVnAcqe.js";import{r as $t}from"./PlusIcon-Dm194obY.js";import{r as W}from"./ChevronDownIcon-CXS756Mf.js";import{r as Dt}from"./CheckCircleIcon-CCJKIJMS.js";import{r as Z,a as Mt}from"./NoticeboardModal-BFPPoH5F.js";import"./PrimaryButton-qIXtogA4.js";import"./Modal-DCUSfDjq.js";import"./InputLabel-ucmNgSea.js";import"./InputError-D-5E9KvD.js";import"./SecondaryButton-W7BtdvWk.js";import"./index-CLIBhGt7.js";import"./BaseFormModal-ASxTHy3F.js";import"./TextInput-BJmXw4Vn.js";import"./SelectDropdown-DbIzP5cU.js";/* empty css                                                                       */import"./debounce-C-hnF4Z3.js";import"./ApplicationLogo-AtqpwRJn.js";import"./createLucideIcon-ehctAcSr.js";import"./plus-B5Y2SFbK.js";import"./DangerButton-BT7BrH_v.js";import"./moment-BLMuvzoS.js";function Vt(b,u){return r(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"})])}function R(b,u){return r(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m4.5 15.75 7.5-7.5 7.5 7.5"})])}function At(b,u){return r(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.72 13.829c-.24.03-.48.062-.72.096m.72-.096a42.415 42.415 0 0 1 10.56 0m-10.56 0L6.34 18m10.94-4.171c.24.03.48.062.72.096m-.72-.096L17.66 18m0 0 .229 2.523a1.125 1.125 0 0 1-1.12 1.227H7.231c-.662 0-1.18-.568-1.12-1.227L6.34 18m11.318 0h1.091A2.25 2.25 0 0 0 21 15.75V9.456c0-1.081-.768-2.015-1.837-2.175a48.055 48.055 0 0 0-1.913-.247M6.34 18H5.25A2.25 2.25 0 0 1 3 15.75V9.456c0-1.081.768-2.015 1.837-2.175a48.041 48.041 0 0 1 1.913-.247m10.5 0a48.536 48.536 0 0 0-10.5 0m10.5 0V3.375c0-.621-.504-1.125-1.125-1.125h-8.25c-.621 0-1.125.504-1.125 1.125v3.659M18 10.5h.008v.008H18V10.5Zm-3 0h.008v.008H15V10.5Z"})])}const Et={class:"h-64 w-full"},St=["id"],J={__name:"ChartComponent",props:{data:{type:Object,required:!0},title:{type:String,default:"Productivity Chart"},chartId:{type:String,default:"productivity-chart"},type:{type:String,default:"bar"}},setup(b){const u=b,f=d(null);let _=null;const j=()=>{_&&_.destroy(),f.value&&(_=new kt(f.value,{type:u.type,data:u.data,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"},title:{display:!!u.title,text:u.title}},scales:u.type==="pie"||u.type==="doughnut"?{}:{y:{beginAtZero:!0,title:{display:!0,text:"Hours"}}}}}))};return K(()=>{j()}),mt(()=>u.data,()=>{j()},{deep:!0}),(v,S)=>(r(),a("div",Et,[t("canvas",{ref_key:"chartRef",ref:f,id:b.chartId},null,8,St)]))}},Ut={class:"flex justify-between items-center print:hidden"},Pt={class:"flex space-x-2"},Tt={class:"py-12 print:py-0 print:m-0"},It={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 space-y-6 print:w-full print:max-w-none print:px-0"},Ft={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-6 print:hidden"},Lt={class:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end"},Nt={class:"col-span-1 md:col-span-2"},Ht={class:"mt-4 flex justify-end"},Bt=["disabled"],Gt={key:0},qt={key:1},Ot={class:"hidden print:block text-center mb-6"},zt={class:"text-gray-600"},Wt={key:0,class:"grid grid-cols-1 md:grid-cols-3 gap-6 print:break-inside-avoid"},Zt={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-6 col-span-2 print:border print:shadow-none"},Rt={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-6 print:border print:shadow-none"},Jt={key:1,class:"text-center py-10 text-gray-500"},Kt={key:2,class:"text-center py-10 print:hidden"},Yt={key:3,class:"space-y-4"},Qt=["onClick"],Xt={class:"flex items-center space-x-4"},te=["src"],ee={class:"text-lg font-medium text-gray-900"},se={class:"text-sm text-gray-500"},oe={class:"flex items-center space-x-4"},ne=["onClick"],re={class:"text-right"},ae={class:"text-2xl font-bold text-indigo-600 print:text-black"},ie={class:"border-t border-gray-200 bg-gray-50 p-6 space-y-4 print:bg-white print:block"},le={key:0,class:"text-sm text-gray-500 italic"},de={key:1,class:"overflow-x-auto"},ue={class:"min-w-full text-sm text-left text-gray-500"},ce={class:"text-gray-700 uppercase bg-gray-100 print:bg-gray-50"},pe={class:"px-3 py-3 text-right"},me={class:"flex items-center justify-end gap-1"},ge={class:"divide-y divide-gray-200"},fe={class:"bg-white hover:bg-gray-50"},xe=["onClick"],ve={class:"px-3 py-3 align-top"},ye=["onClick"],he={class:"text-xs text-gray-500 mt-1"},be={key:0,class:"text-xs text-gray-400 mt-1 line-clamp-2 print:line-clamp-none"},_e={class:"px-3 py-3 align-top space-y-1"},we={class:"flex flex-col gap-1"},ke={class:"text-xs border border-gray-200 rounded px-2 py-1 inline-block bg-gray-50"},Ce={class:"text-[10px] font-semibold uppercase tracking-wider text-gray-500"},je={class:"text-xs"},$e={key:0,class:"text-[10px] font-bold uppercase bg-red-100 px-1 rounded"},De={class:"px-3 py-3 text-center align-top"},Me={class:"inline-flex flex-col items-center group relative"},Ve=["title"],Ae={key:0,class:"absolute top-full mt-2 left-1/2 transform -translate-x-1/2 w-48 bg-gray-800 text-white text-xs rounded p-2 z-50 hidden group-hover:block shadow-lg"},Ee={class:"text-[10px]"},Se={key:1,class:"mt-2 text-left w-full text-xs text-gray-500 print:block hidden"},Ue={class:"px-3 py-3 text-right align-top"},Pe=["value","onChange"],Te={class:"hidden print:block font-mono"},Ie={class:"px-3 py-3 text-right font-mono align-top"},Fe={key:0,class:"text-orange-500 flex justify-end mt-1",title:"Contains auto-capped sessions"},Le={class:"px-3 py-3 text-right align-top"},Ne=["value","onChange"],He={class:"hidden print:block font-mono"},Be={class:"px-3 py-3 text-right font-bold text-gray-900 align-top"},Ge={key:0,class:"bg-gray-50 print:bg-white"},qe={colspan:"8",class:"px-4 py-3 border-t border-gray-100"},Oe={class:"w-full text-xs text-left text-gray-500 inner-table"},ze={class:"py-1 font-mono"},We={class:"py-1 font-mono"},Ze={class:"py-1 font-medium"},Re={class:"py-1"},Je={key:0,class:"text-orange-600 flex items-center gap-1"},Ke={key:1,class:"text-green-600 font-bold"},Ye={key:2},Qe={key:2,class:"fixed inset-0 z-[100] overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},Xe={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},ts={class:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6"},es={class:"hidden sm:block absolute top-0 right-0 pt-4 pr-4"},ss={class:"sm:flex sm:items-start"},os={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},ns={class:"mt-2 text-sm text-gray-500 mb-4"},rs={class:"font-bold"},as=["value"],is={class:"grid grid-cols-2 gap-4"},ls={__name:"Index",setup(b){const u=d([]),f=d({}),_=d([]),j=d([]);d({user_ids:[],date_start:"",date_end:""});const v=d(!1),S=d([]),w=d(""),k=d(""),U=d(!1),c=d({user_id:null,user_name:"",name:"",project_id:"",hours:"",date:""}),$=d(!1),F=d(null),G=d(null),Y=d([]),Q=o=>{!o||!o.task_id||(F.value=o.task_id,G.value=o.project_id||0,$.value=!0)},X=o=>{c.value={user_id:o.user_id,user_name:o.user_name,name:"",project_id:"",hours:"",date:new Date().toISOString().split("T")[0]},U.value=!0},L=()=>{U.value=!1},tt=async()=>{if(!(!c.value.name||!c.value.hours))try{await window.axios.post("/api/tasks/manual-effort",{name:c.value.name,assigned_to_user_id:c.value.user_id,project_id:c.value.project_id||null,manual_effort_override:parseFloat(c.value.hours),date:c.value.date}),U.value=!1,H()}catch(o){console.error("Failed to create manual entry",o),alert("Failed to save entry. Please check fields.")}},N=o=>{if(o==null)return"-";const e=Math.abs(o),s=Math.floor(e/3600),n=Math.floor(e%3600/60);return`${s}h ${n}m`},D=d({}),et=o=>{D.value[o]=!D.value[o]},st=d("developer"),ot=d(1),nt=d(1),rt=d(1);gt(()=>{if(st.value==="admin"){const s=rt.value;return s===1?1:s===2?2:s===3?3:5}const o=ot.value*nt.value;return[1,2,3,5,8,13].reduce((s,n)=>Math.abs(n-o)<Math.abs(s-o)?n:s)});const P=d(!1),M=d({}),at=o=>{M.value[o]=!M.value[o]},H=async()=>{v.value=!0;try{const o=await window.axios.get("/api/productivity/report",{params:{user_ids:S.value.join(","),date_start:w.value,date_end:k.value}});u.value=o.data.reportData.details,f.value=o.data.reportData.charts,_.value=o.data.users,j.value=o.data.projects||[],!w.value&&o.data.filters.date_start&&(w.value=o.data.filters.date_start),!k.value&&o.data.filters.date_end&&(k.value=o.data.filters.date_end),u.value.length===1&&(D.value[u.value[0].user_id]=!0)}catch(o){console.error("Error fetching productivity report:",o)}finally{v.value=!1}},it=async(o,e,s)=>{const n=s.target.value,i=n===""?null:parseFloat(n);o.manual_effort_override=i,i!==null&&!isNaN(i)?o.used_seconds=i*3600:o.used_seconds=o.total_seconds;let V=0;e.tasks.forEach(B=>{V+=B.used_seconds}),e.total_seconds=V,e.total_hours=(V/3600).toFixed(2);try{await window.axios.post(`/api/tasks/${o.task_id}/productivity-meta`,{manual_effort_override:i})}catch(B){console.error("Failed to update manual effort",B)}},lt=async(o,e)=>{const s=e.target.value,n=s===""?null:parseInt(s);o.effort=n;try{await window.axios.post(`/api/tasks/${o.task_id}/productivity-meta`,{effort:n})}catch(i){console.error("Failed to update effort",i)}},dt=o=>{for(let e of u.value){const s=e.tasks.findIndex(n=>n.task_id===o.id);if(s!==-1){e.tasks[s].task_name=o.name,e.tasks[s].description=o.description,e.tasks[s].effort=o.effort,e.tasks[s].priority=o.priority,e.tasks[s].due_date=o.due_date?moment(o.due_date).format("Y-m-d"):null,e.tasks[s].status=o.status;break}}};K(()=>{H()});const ut=()=>{H()},ct=o=>!o.subtasks||!Array.isArray(o.subtasks)||o.subtasks.length===0?"No items":o.subtasks.map(e=>`${e.status==="done"?"✅":"⬜"} ${e.name}`).join(`
`),pt=()=>{window.print()};return(o,e)=>(r(),a(x,null,[p(m(ft),{title:"Productivity Report"}),p(_t,null,{header:T(()=>[t("div",Ut,[e[12]||(e[12]=t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Productivity Report",-1)),t("div",Pt,[t("button",{onClick:pt,class:"inline-flex items-center px-4 py-2 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 focus:bg-gray-700 active:bg-gray-900 focus:outline-none transition ease-in-out duration-150"},[p(m(At),{class:"h-4 w-4 mr-2"}),e[11]||(e[11]=h(" Print / PDF ",-1))])])])]),default:T(()=>[t("div",Tt,[t("div",It,[t("div",Ft,[t("div",Lt,[t("div",Nt,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Users",-1)),p(wt,{modelValue:S.value,"onUpdate:modelValue":e[0]||(e[0]=s=>S.value=s),options:_.value,"is-multi":!0,placeholder:"Select Users...",class:"w-full"},null,8,["modelValue","options"])]),t("div",null,[e[14]||(e[14]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Start Date",-1)),y(t("input",{type:"date","onUpdate:modelValue":e[1]||(e[1]=s=>w.value=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,512),[[E,w.value]])]),t("div",null,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"End Date",-1)),y(t("input",{type:"date","onUpdate:modelValue":e[2]||(e[2]=s=>k.value=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,512),[[E,k.value]])])]),t("div",Ht,[t("button",{onClick:ut,disabled:v.value,class:"inline-flex items-center px-4 py-2 bg-indigo-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-700 focus:bg-indigo-700 active:bg-indigo-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition ease-in-out duration-150"},[v.value?(r(),a("span",Gt,"Loading...")):(r(),a("span",qt,"Generate Report"))],8,Bt)])]),t("div",Ot,[e[16]||(e[16]=t("h1",{class:"text-3xl font-bold text-gray-900"},"Productivity Report",-1)),t("p",zt,l(w.value)+" - "+l(k.value),1)]),u.value.length>0&&f.value.daily_trend?(r(),a("div",Wt,[t("div",Zt,[e[17]||(e[17]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Productivity Trend (Daily)",-1)),p(J,{data:f.value.daily_trend,type:"line",chartId:"dailyTrendChart"},null,8,["data"])]),t("div",Rt,[e[18]||(e[18]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Time by Project",-1)),p(J,{data:f.value.project_dist,type:"pie",chartId:"projectDistChart"},null,8,["data"])])])):g("",!0),u.value.length===0&&!v.value?(r(),a("div",Jt,[p(m(jt),{class:"h-12 w-12 mx-auto text-gray-300 mb-2"}),e[19]||(e[19]=t("p",null,"No data found.",-1))])):g("",!0),v.value?(r(),a("div",Kt,e[20]||(e[20]=[t("p",{class:"text-gray-500"},"Loading Report...",-1)]))):(r(),a("div",Yt,[(r(!0),a(x,null,C(u.value,s=>(r(),a("div",{key:s.user_id,class:"bg-white overflow-hidden shadow-sm sm:rounded-lg print:shadow-none print:border-b-2 print:rounded-none"},[t("div",{onClick:n=>et(s.user_id),class:"p-6 flex items-center justify-between cursor-pointer hover:bg-gray-50 transition-colors print:cursor-default print:hover:bg-white"},[t("div",Xt,[t("img",{src:s.avatar,alt:"",class:"h-10 w-10 rounded-full bg-gray-200 print:hidden"},null,8,te),t("div",null,[t("h3",ee,l(s.user_name),1),t("p",se,l(s.tasks.length)+" tasks worked on",1)])]),t("div",oe,[t("button",{onClick:q(n=>X(s),["stop"]),class:"p-1 rounded-full hover:bg-gray-200 text-gray-400 hover:text-indigo-600 transition-colors print:hidden",title:"Add Manual Activity"},[p(m($t),{class:"h-5 w-5"})],8,ne),t("div",re,[t("div",ae,l(s.total_hours)+" hrs",1),e[21]||(e[21]=t("div",{class:"text-xs text-gray-500"},"Total Charged Hours",-1))]),(r(),A(O(D.value[s.user_id]?m(R):m(W)),{class:"h-5 w-5 text-gray-400 print:hidden"}))])],8,Qt),y(t("div",ie,[s.tasks.length===0?(r(),a("div",le,"No tasks recorded in this period.")):(r(),a("div",de,[t("table",ue,[t("thead",ce,[t("tr",null,[e[23]||(e[23]=t("th",{class:"px-3 py-3 w-5"},null,-1)),e[24]||(e[24]=t("th",{class:"px-3 py-3 w-1/4"},"Task / Project",-1)),e[25]||(e[25]=t("th",{class:"px-3 py-3 w-1/6"},"Info",-1)),e[26]||(e[26]=t("th",{class:"px-3 py-3 text-center"},"Checklist",-1)),t("th",pe,[t("div",me,[e[22]||(e[22]=h(" Est. Effort ",-1)),p(m(yt),{class:"h-4 w-4 text-gray-400 cursor-pointer hover:text-indigo-600",onClick:e[3]||(e[3]=n=>P.value=!0)})])]),e[27]||(e[27]=t("th",{class:"px-3 py-3 text-right"},"Logged Time",-1)),e[28]||(e[28]=t("th",{class:"px-3 py-3 text-right w-24"},"Manual (Hrs)",-1)),e[29]||(e[29]=t("th",{class:"px-3 py-3 text-right"},"Used Total",-1))])]),t("tbody",ge,[(r(!0),a(x,null,C(s.tasks,n=>(r(),a(x,{key:n.task_id},[t("tr",fe,[t("td",{class:"px-3 py-3 align-top cursor-pointer text-gray-400 hover:text-gray-600",onClick:i=>at(n.task_id)},[(r(),A(O(M.value[n.task_id]?m(R):m(W)),{class:"h-4 w-4"}))],8,xe),t("td",ve,[t("div",{onClick:i=>Q(n),class:"font-medium text-indigo-600 hover:text-indigo-800 cursor-pointer hover:underline print:text-black print:no-underline"},l(n.task_name),9,ye),t("div",he,l(n.project_name),1),n.description?(r(),a("div",be,l(n.description),1)):g("",!0)]),t("td",_e,[t("div",we,[t("div",ke," Prio: "+l(n.priority||"Medium"),1),t("div",Ce,l(n.status),1)]),t("div",{class:I(["flex items-center gap-1",{"text-red-600":n.is_late,"text-gray-500":!n.is_late}])},[p(m(Vt),{class:"h-3 w-3"}),t("span",je,l(n.due_date||"No Due Date"),1),n.is_late?(r(),a("span",$e,"Late")):g("",!0)],2)]),t("td",De,[t("div",Me,[t("span",{class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800 cursor-help",title:ct(n)},[p(m(Dt),{class:"h-3 w-3 mr-1"}),h(" "+l(n.checklist),1)],8,Ve),n.subtasks&&Array.isArray(n.subtasks)&&n.subtasks.length>0?(r(),a("div",Ae,[e[30]||(e[30]=t("div",{class:"mb-1 font-semibold text-gray-300 border-b border-gray-600 pb-1"},"Checklist",-1)),(r(!0),a(x,null,C(n.subtasks,i=>(r(),a("div",{key:i.id,class:"flex items-start gap-1 py-0.5 truncate"},[t("span",Ee,l(i.status==="done"?"✅":"⬜"),1),t("span",{class:I({"opacity-50 line-through":i.status==="done"})},l(i.name),3)]))),128))])):g("",!0),n.subtasks&&Array.isArray(n.subtasks)&&n.subtasks.length>0&&M.value[n.task_id]?(r(),a("div",Se,[(r(!0),a(x,null,C(n.subtasks,i=>(r(),a("div",{key:i.id,class:"flex items-center gap-1"},[t("span",{class:I(["w-2 h-2 rounded-full",i.status==="done"?"bg-green-400":"bg-gray-300"])},null,2),t("span",{class:I({"line-through":i.status==="done"})},l(i.name),3)]))),128))])):g("",!0)])]),t("td",Ue,[t("input",{type:"number",step:"1",value:n.effort,onChange:i=>lt(n,i),placeholder:"Pts",class:"w-16 text-xs text-right border-gray-300 rounded shadow-sm focus:border-indigo-500 focus:ring-indigo-500 p-1 print:hidden"},null,40,Pe),t("span",Te,l(n.effort||"-"),1)]),t("td",Ie,[h(l(N(n.total_seconds))+" ",1),n.sessions.some(i=>i.type.includes("capped"))?(r(),a("div",Fe,[p(m(Z),{class:"h-4 w-4"})])):g("",!0)]),t("td",Le,[t("input",{type:"number",step:"0.1",value:n.manual_effort_override,onChange:i=>it(n,s,i),placeholder:"-",class:"w-20 text-xs text-right border-gray-300 rounded shadow-sm focus:border-indigo-500 focus:ring-indigo-500 p-1 print:hidden"},null,40,Ne),t("span",He,l(n.manual_effort_override||"-"),1)]),t("td",Be,l(N(n.used_seconds)),1)]),M.value[n.task_id]?(r(),a("tr",Ge,[t("td",qe,[e[33]||(e[33]=t("div",{class:"text-xs font-semibold text-gray-500 uppercase mb-2"},"Wait List / Activity Log",-1)),t("table",Oe,[e[32]||(e[32]=t("thead",null,[t("tr",{class:"border-b border-gray-200"},[t("th",{class:"py-1"},"Start"),t("th",{class:"py-1"},"End"),t("th",{class:"py-1"},"Duration"),t("th",{class:"py-1"},"Type")])],-1)),t("tbody",null,[(r(!0),a(x,null,C(n.sessions,(i,V)=>(r(),a("tr",{key:V,class:"border-b border-gray-100 last:border-0"},[t("td",ze,l(i.start),1),t("td",We,l(i.end),1),t("td",Ze,l(N(i.duration_seconds)),1),t("td",Re,[i.type.includes("capped")?(r(),a("span",Je,[p(m(Z),{class:"h-3 w-3"}),e[31]||(e[31]=h(" Auto-Capped ",-1))])):i.type==="ongoing"?(r(),a("span",Ke,"Running")):(r(),a("span",Ye,"Recorded"))])]))),128))])])])])):g("",!0)],64))),128))])])]))],512),[[xt,D.value[s.user_id]||!0]])]))),128))]))])]),P.value?(r(),A(z,{key:0,show:P.value,"onUpdate:show":e[4]||(e[4]=s=>P.value=s),title:"Effort Estimation Guide",initialWidth:30},{content:T(()=>[p(ht)]),_:1},8,["show"])):g("",!0),$.value?(r(),A(z,{key:1,show:$.value,"onUpdate:show":e[6]||(e[6]=s=>$.value=s),title:"Task Details",initialWidth:45},{content:T(()=>[F.value?(r(),A(bt,{key:0,"task-id":F.value,"project-id":G.value,"project-users":Y.value,onClose:e[5]||(e[5]=s=>$.value=!1),onTaskUpdated:dt},null,8,["task-id","project-id","project-users"])):g("",!0)]),_:1},8,["show"])):g("",!0),U.value?(r(),a("div",Qe,[t("div",Xe,[t("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:L}),e[44]||(e[44]=t("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1)),t("div",ts,[t("div",es,[t("button",{type:"button",class:"bg-white rounded-md text-gray-400 hover:text-gray-500 focus:outline-none",onClick:L},[e[34]||(e[34]=t("span",{class:"sr-only"},"Close",-1)),p(m(Mt),{class:"h-6 w-6"})])]),t("div",ss,[t("div",os,[e[43]||(e[43]=t("h3",{class:"text-lg leading-6 font-medium text-gray-900",id:"modal-title"}," Add Manual Activity ",-1)),t("div",ns,[e[35]||(e[35]=h(" Log work for ",-1)),t("span",rs,l(c.value.user_name),1),e[36]||(e[36]=h(". This will create a new entry. ",-1))]),t("form",{onSubmit:q(tt,["prevent"]),class:"space-y-4"},[t("div",null,[e[37]||(e[37]=t("label",{class:"block text-sm font-medium text-gray-700"},"Description / Task Name *",-1)),y(t("input",{type:"text","onUpdate:modelValue":e[7]||(e[7]=s=>c.value.name=s),required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",placeholder:"e.g. Client Emails, RnD"},null,512),[[E,c.value.name]])]),t("div",null,[e[39]||(e[39]=t("label",{class:"block text-sm font-medium text-gray-700"},"Project (Optional)",-1)),y(t("select",{"onUpdate:modelValue":e[8]||(e[8]=s=>c.value.project_id=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},[e[38]||(e[38]=t("option",{value:""},"- General / Internal -",-1)),(r(!0),a(x,null,C(j.value,s=>(r(),a("option",{key:s.value,value:s.value},l(s.label),9,as))),128))],512),[[vt,c.value.project_id]])]),t("div",is,[t("div",null,[e[40]||(e[40]=t("label",{class:"block text-sm font-medium text-gray-700"},"Date *",-1)),y(t("input",{type:"date","onUpdate:modelValue":e[9]||(e[9]=s=>c.value.date=s),required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,512),[[E,c.value.date]])]),t("div",null,[e[41]||(e[41]=t("label",{class:"block text-sm font-medium text-gray-700"},"Hours *",-1)),y(t("input",{type:"number",step:"0.1","onUpdate:modelValue":e[10]||(e[10]=s=>c.value.hours=s),required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",placeholder:"0.0"},null,512),[[E,c.value.hours]])])]),t("div",{class:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse"},[e[42]||(e[42]=t("button",{type:"submit",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none sm:ml-3 sm:w-auto sm:text-sm"}," Save Entry ",-1)),t("button",{type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:text-gray-500 focus:outline-none sm:mt-0 sm:w-auto sm:text-sm",onClick:L}," Cancel ")])],32)])])])])])):g("",!0)]),_:1})],64))}},Is=Ct(ls,[["__scopeId","data-v-b02adf18"]]);export{Is as default};
