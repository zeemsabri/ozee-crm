import{r as O,s as H,K as Dt,J as Gt,i as f,g as b,o as u,F as ue,j as ce,b as i,t as P,h as I,L as oa,M as dr,N as na,O as ia,p as G,B as Pt,w as ge,c as E,a as x,d as bs,f as de,l as cr,m as T,e as v,k as Le,x as ne,P as Ot,G as fr,I as xt,A as Ye,Q as Oe,R as me,S as ls,z as qt,D as mr,T as la,U as hr,V as qs,W as Ze,n as Ue,X as ua,Y as hs,Z as xs,_ as Xe,$ as ye,a0 as qe,a1 as us,a2 as vr,a3 as gr,a4 as Zs,q as yr}from"./app-Cg2ioQ1y.js";import{P as ve}from"./PrimaryButton-G-CyPdGF.js";import{_ as Ss}from"./Modal-CmgP9wOx.js";import{_ as q}from"./InputLabel-Bvg1BvLh.js";import{_ as ae}from"./InputError-gGmY0vzX.js";import{_ as Mt}from"./SecondaryButton-DSIN8ooV.js";import{_ as ct}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as Fe}from"./TextInput-DdJ68vsL.js";import{S as $e}from"./SelectDropdown-BqJgOaPG.js";import{_ as pr}from"./Checkbox-Dv2XbNIH.js";import{A as _r}from"./ApplicationLogo-CRVQOxm8.js";import{D as da}from"./DangerButton-B-1rZueS.js";const kr={key:0,class:"fixed bottom-4 right-4 z-50 flex flex-col items-end space-y-2"},wr={key:0,class:"notification-list w-full max-w-xs space-y-2"},br={class:"flex-1 min-w-0"},xr={class:"flex items-start justify-between gap-2 mb-1"},Sr={class:"flex-1 min-w-0"},Dr={key:0,class:"text-base font-semibold text-gray-800 truncate"},Mr={key:1,class:"text-xs text-gray-500"},Tr={key:0,class:"text-xs text-gray-600 mb-2"},$r={class:"flex items-center justify-between mt-2"},Cr={key:0,class:"text-xs text-gray-500 font-medium"},Yr=["onClick"],Pr={key:1,class:"flex justify-end w-full max-w-xs"},Or={key:0},Nr={key:1},Ir=3,Ar={__name:"PushNotificationContainer",props:{sidebarIsOpen:{type:Boolean,default:!1}},setup(e){const t=O(!1),s=O(null),a=O(0),r=O(null),o=H(()=>Dt.value.notifications.filter(g=>g.isNewPush).slice(0,Ir)),n=H(()=>{const g=Math.floor(a.value/60),$=a.value%60;return`${String(g).padStart(2,"0")}:${String($).padStart(2,"0")}`}),l=g=>{if(!g)return null;const $=g.match(/\/task\/(\d+)/);return $?parseInt($[1]):null},m=g=>{if(!g)return null;const $=g.match(/\/project\/(\d+)\//);return $?parseInt($[1]):null},c=()=>{t.value=!t.value,clearTimeout(s.value),clearInterval(r.value),t.value&&(s.value=setTimeout(()=>{t.value=!1,clearInterval(r.value)},3e5),a.value=300,r.value=setInterval(()=>{a.value>0?a.value--:clearInterval(r.value)},1e3))},p=async g=>{dr(g.id),await na(g.view_id);const $=g.task_id||l(g.url),j=g.project_id||m(g.url);$&&j?ia($,j):(console.warn("Could not open task sidebar. Falling back to redirecting."),g.url&&(window.location.href=g.url))};return Gt(()=>{clearTimeout(s.value),clearInterval(r.value)}),(g,$)=>e.sidebarIsOpen?b("",!0):(u(),f("div",kr,[!t.value&&o.value.length>0?(u(),f("div",wr,[(u(!0),f(ue,null,ce(o.value,j=>(u(),f("div",{key:j.id,class:"bg-white rounded-lg shadow-lg p-3 flex items-start space-x-3 border border-gray-200 transition-opacity duration-300 opacity-60 hover:opacity-100"},[i("div",br,[i("div",xr,[i("div",Sr,[j.title?(u(),f("h3",Dr,P(j.title),1)):b("",!0),j.project_name?(u(),f("p",Mr,P(j.project_name),1)):b("",!0)])]),j.message?(u(),f("p",Tr,P(j.message),1)):b("",!0),i("div",$r,[j.due_date?(u(),f("div",Cr," Due: "+P(I(oa)(j.due_date)),1)):b("",!0),i("button",{onClick:N=>p(j),class:"px-2.5 py-1 bg-blue-600 text-white text-xs font-medium rounded-md hover:bg-blue-700 transition-colors duration-200 shadow"},P(j.button_label||"View"),9,Yr)])])]))),128))])):b("",!0),o.value.length>0?(u(),f("div",Pr,[i("button",{onClick:c,class:"bg-white/80 backdrop-blur-sm text-gray-600 hover:text-gray-900 text-xs font-bold py-1 px-3 rounded-full shadow-md transition-all duration-300"},[t.value?(u(),f("span",Or,"Show ("+P(n.value)+")",1)):(u(),f("span",Nr,"Minimize"))])])):b("",!0)]))}},Er={class:"fixed top-4 right-4 z-[100] flex flex-col items-end space-y-3"},Rr={class:"p-4"},Ur={class:"text-sm font-medium text-white"},jr={__name:"StandardNotificationContainer",setup(e,{expose:t}){const s=O([]),a=(n,l="info",m=5e3)=>{const c=crypto.randomUUID();s.value.unshift({id:c,message:n,type:l}),setTimeout(()=>{r(c)},m)},r=n=>{const l=s.value.findIndex(m=>m.id===n);l>-1&&s.value.splice(l,1)},o=n=>{switch(n){case"success":return"bg-green-500";case"error":return"bg-red-500";case"warning":return"bg-yellow-500";case"info":default:return"bg-blue-500"}};return t({addNotification:a}),(n,l)=>(u(),f("div",Er,[(u(!0),f(ue,null,ce(s.value,m=>(u(),f("div",{key:m.id,class:G(["w-full max-w-sm rounded-md shadow-lg pointer-events-auto",o(m.type)])},[i("div",Rr,[i("p",Ur,P(m.message),1)])],2))),128))]))}},Wr={class:"p-6"},Lr={class:"mt-6"},Fr={key:0,class:"mb-4 p-4 bg-green-100 border border-green-400 text-green-700 rounded"},Vr={key:1,class:"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded"},Hr={class:"flex items-center mb-3"},Br=["id","onUpdate:modelValue"],zr=["for"],Gr={key:0,class:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800"},qr={key:0},Zr={class:"mb-4"},Jr={class:"flex items-center"},Qr=["id","checked","onChange"],Kr=["for"],Xr={key:0,class:"mb-4"},eo=["id","onUpdate:modelValue"],to={key:1,class:"mb-4"},so={class:"flex-1"},ao=["id","onUpdate:modelValue"],ro={class:"flex-1"},oo=["id","onUpdate:modelValue"],no={key:0,class:"flex items-end pb-1"},io=["onClick"],lo=["onClick"],uo={class:"mt-6 flex justify-end space-x-3"},co={key:0,class:"flex items-center"},fo={key:1},mo={__name:"AvailabilityModal",props:{show:Boolean,date:{type:String,default:()=>{const e=new Date;return e.setDate(e.getDate()+1),e.toISOString().split("T")[0]}},nextWeekDates:{type:Array,default:()=>[]},userId:{type:Number,default:null}},emits:["close","availability-saved"],setup(e,{emit:t}){const s=()=>{const S=localStorage.getItem("authToken");S&&!ne.defaults.headers.common.Authorization&&(ne.defaults.headers.common.Authorization=`Bearer ${S}`,console.log("Auth headers set in AvailabilityModal"))},a=e,r=t,o=O({}),n=O({}),l=O(!1),m=O(""),c=()=>{const S=[],y=new Date,d=new Date(y);d.setDate(y.getDate()+1);for(let h=0;h<7;h++){const _=new Date(d);_.setDate(d.getDate()+h);const Y=_.toISOString().split("T")[0];S.push({value:Y,label:_.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})}),o.value[Y]={isSelected:!1,isAvailable:!0,reason:"",timeSlots:[{start_time:"",end_time:""}]}}return S},p=O([]);Pt(()=>{s(),a.nextWeekDates.length>0?(p.value=a.nextWeekDates,a.nextWeekDates.forEach(S=>{o.value[S.value]={isSelected:!1,isAvailable:!0,reason:"",timeSlots:[{start_time:"",end_time:""}]}})):p.value=c()});const g=async()=>{try{if(s(),p.value.length===0)return;const S=p.value[0].value,y=p.value[p.value.length-1].value,d=await ne.get("/api/availabilities",{params:{start_date:S,end_date:y,user_id:a.userId}});if(d.data&&d.data.availabilities){const h=d.data.availabilities;p.value.forEach(_=>{o.value[_.value]={isSelected:!1,isAvailable:!0,reason:"",timeSlots:[{start_time:"",end_time:""}]}}),h.forEach(_=>{const Y=_.date.split("T")[0];o.value[Y]&&(o.value[Y].isSelected=!0,o.value[Y].isAvailable=_.is_available,_.is_available?o.value[Y].timeSlots=_.time_slots&&_.time_slots.length>0?[..._.time_slots]:[{start_time:"",end_time:""}]:o.value[Y].reason=_.reason||"")})}}catch(S){console.error("Error fetching existing availabilities:",S),p.value.forEach(y=>{o.value[y.value]={isSelected:!1,isAvailable:!0,reason:"",timeSlots:[{start_time:"",end_time:""}]}})}};ge(()=>a.show,async S=>{S&&(n.value={},m.value="",await g())},{immediate:!0});const $=S=>{o.value[S].timeSlots.push({start_time:"",end_time:""})},j=(S,y)=>{o.value[S].timeSlots.length>1&&o.value[S].timeSlots.splice(y,1)},N=(S,y)=>{o.value[S].isAvailable=y,y?o.value[S].reason="":o.value[S].timeSlots=[{start_time:"",end_time:""}]},k=async()=>{l.value=!0,n.value={},m.value="";const S=[];let y=!1;for(const d of p.value){const h=d.value,_=o.value[h];if(_.isSelected){let Y={};if(_.isAvailable)if(_.timeSlots.some(W=>!W.start_time||!W.end_time))Y.timeSlots="Please fill in all time slots.",y=!0;else for(const W of _.timeSlots){const re=W.start_time.split(":").map(Number),Ae=W.end_time.split(":").map(Number);if(re.length!==2||Ae.length!==2||isNaN(re[0])||isNaN(re[1])||isNaN(Ae[0])||isNaN(Ae[1])){Y.timeSlots="Invalid time format. Please use HH:MM format.",y=!0;break}const X=re[0]*60+re[1],L=Ae[0]*60+Ae[1];if(X>=L){Y.timeSlots="End time must be after start time.",y=!0;break}}else _.reason.trim()||(Y.reason="Please provide a reason for unavailability.",y=!0);Object.keys(Y).length>0&&(n.value[h]=Y),Object.keys(Y).length===0&&S.push({date:h,is_available:_.isAvailable,reason:_.isAvailable?null:_.reason,time_slots:_.isAvailable?_.timeSlots:null})}}if(y){l.value=!1,n.value.general="Please correct the errors in the highlighted dates.";return}if(S.length===0){n.value.general="Please select at least one day to set availability for.",l.value=!1;return}try{s();const d=await ne.post("/api/availabilities/batch",{availabilities:S});m.value="Availability saved successfully!";try{const h=await ne.get("/api/availability-prompt");localStorage.setItem("shouldBlockUser",h.data.should_block_user),localStorage.setItem("allWeekdaysCovered",h.data.all_weekdays_covered);const _=new CustomEvent("availability-status-updated",{detail:{shouldBlockUser:h.data.should_block_user,allWeekdaysCovered:h.data.all_weekdays_covered}});window.dispatchEvent(_),console.log("Availability status updated from modal:",{shouldBlockUser:h.data.should_block_user,allWeekdaysCovered:h.data.all_weekdays_covered})}catch(h){console.error("Error updating availability status:",h)}r("availability-saved",d.data.availabilities),setTimeout(()=>{r("close")},1500)}catch(d){console.error("Error saving availability:",d),d.response&&d.response.data&&d.response.data.errors?n.value.general=d.response.data.message||"An error occurred while saving your availability.":d.response&&d.response.status===409?(m.value=d.response.data.message,setTimeout(()=>{r("close")},1500)):n.value.general="An unexpected error occurred while saving your availability."}finally{l.value=!1}};return(S,y)=>(u(),E(Ss,{show:e.show,onClose:y[1]||(y[1]=d=>S.$emit("close")),"max-width":"xl"},{default:x(()=>[i("div",Wr,[y[6]||(y[6]=i("h2",{class:"text-lg font-medium text-gray-900"}," Submit Your Weekly Availability ",-1)),y[7]||(y[7]=i("p",{class:"mt-1 text-sm text-gray-600"}," Please select the dates you wish to set availability for and provide your details for each. ",-1)),i("div",Lr,[i("form",{onSubmit:bs(k,["prevent"])},[m.value?(u(),f("div",Fr,P(m.value),1)):b("",!0),n.value.general?(u(),f("div",Vr,P(n.value.general),1)):b("",!0),(u(!0),f(ue,null,ce(p.value,d=>{var h,_;return u(),f("div",{key:d.value,class:G(["mb-6 p-4 border rounded-lg shadow-sm",[o.value[d.value].isSelected?"border-indigo-300 bg-indigo-50":"border-gray-200",o.value[d.value].isSelected&&!n.value[d.value]?"border-l-4 border-l-indigo-500":""]])},[i("div",Hr,[de(i("input",{type:"checkbox",id:`select_date_${d.value}`,"onUpdate:modelValue":Y=>o.value[d.value].isSelected=Y,class:"rounded border-gray-300 text-indigo-600 shadow-sm focus:ring-indigo-500"},null,8,Br),[[cr,o.value[d.value].isSelected]]),i("label",{for:`select_date_${d.value}`,class:"ml-2 block text-base font-medium text-gray-800"},[T(P(d.label)+" ",1),o.value[d.value].isSelected?(u(),f("span",Gr," Saved ")):b("",!0)],8,zr)]),o.value[d.value].isSelected?(u(),f("div",qr,[i("div",Zr,[i("div",Jr,[i("input",{type:"checkbox",id:`isAvailableToggle_${d.value}`,checked:o.value[d.value].isAvailable,onChange:Y=>N(d.value,Y.target.checked),class:"rounded border-gray-300 text-indigo-600 shadow-sm focus:ring-indigo-500"},null,40,Qr),i("label",{for:`isAvailableToggle_${d.value}`,class:"ml-2 block text-sm text-gray-700"}," I am available on this day ",8,Kr)])]),o.value[d.value].isAvailable?b("",!0):(u(),f("div",Xr,[v(q,{for:`reason_${d.value}`,value:"Reason for Not Available"},null,8,["for"]),de(i("textarea",{id:`reason_${d.value}`,"onUpdate:modelValue":Y=>o.value[d.value].reason=Y,rows:"2",class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",placeholder:"e.g., Out of office, Holiday, Meeting all day"},null,8,eo),[[Le,o.value[d.value].reason]]),v(ae,{message:(h=n.value[d.value])==null?void 0:h.reason,class:"mt-2"},null,8,["message"])])),o.value[d.value].isAvailable?(u(),f("div",to,[v(q,{value:"Available Time Slots"}),v(ae,{message:(_=n.value[d.value])==null?void 0:_.timeSlots,class:"mt-2"},null,8,["message"]),(u(!0),f(ue,null,ce(o.value[d.value].timeSlots,(Y,W)=>(u(),f("div",{key:W,class:"flex items-center space-x-2 mt-2"},[i("div",so,[v(q,{for:`start_time_${d.value}_${W}`,value:"Start Time",class:"text-xs"},null,8,["for"]),de(i("input",{id:`start_time_${d.value}_${W}`,type:"time","onUpdate:modelValue":re=>Y.start_time=re,class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm"},null,8,ao),[[Le,Y.start_time]])]),i("div",ro,[v(q,{for:`end_time_${d.value}_${W}`,value:"End Time",class:"text-xs"},null,8,["for"]),de(i("input",{id:`end_time_${d.value}_${W}`,type:"time","onUpdate:modelValue":re=>Y.end_time=re,class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm"},null,8,oo),[[Le,Y.end_time]])]),o.value[d.value].timeSlots.length>1?(u(),f("div",no,[i("button",{type:"button",onClick:re=>j(d.value,W),class:"p-2 text-red-600 hover:text-red-800"},y[2]||(y[2]=[i("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[i("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm6 0a1 1 0 012 0v6a1 1 0 11-2 0V8z","clip-rule":"evenodd"})],-1)]),8,io)])):b("",!0)]))),128)),i("button",{type:"button",onClick:Y=>$(d.value),class:"mt-3 w-full flex items-center justify-center px-4 py-2 border border-dashed border-indigo-300 rounded-lg text-indigo-600 hover:bg-indigo-50 transition duration-150 ease-in-out"},y[3]||(y[3]=[i("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[i("path",{"fill-rule":"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z","clip-rule":"evenodd"})],-1),T(" Add Another Time Slot ",-1)]),8,lo)])):b("",!0)])):b("",!0)],2)}),128)),i("div",uo,[v(Mt,{onClick:y[0]||(y[0]=d=>S.$emit("close"))},{default:x(()=>y[4]||(y[4]=[T(" Cancel ",-1)])),_:1,__:[4]}),v(ve,{disabled:l.value,class:G({"opacity-50":l.value})},{default:x(()=>[l.value?(u(),f("span",co,y[5]||(y[5]=[i("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[i("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),i("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),T(" Saving... ",-1)]))):(u(),f("span",fo,"Save Availability"))]),_:1},8,["disabled","class"])])],32)])])]),_:1},8,["show"]))}},ho={key:0,class:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center"},vo={class:"bg-white rounded-lg shadow-xl p-6 max-w-lg w-full mx-4"},go={class:"flex justify-center"},yo={__name:"AvailabilityBlocker",setup(e){const t=O(!1),s=O(!0),a=O(!1),r=O([]),o=H(()=>{var k;return((k=Ot().props.auth.user)==null?void 0:k.id)||null}),n=()=>{const k=localStorage.getItem("authToken");k&&!ne.defaults.headers.common.Authorization&&(ne.defaults.headers.common.Authorization=`Bearer ${k}`)},l=async()=>{s.value=!0;const k=localStorage.getItem("shouldBlockUser"),S=localStorage.getItem("allWeekdaysCovered");if(k==="true"&&S==="false")t.value=!0,await m();else try{n();const y=await ne.get("/api/availability-prompt");t.value=y.data.should_block_user&&!y.data.all_weekdays_covered,t.value&&await m()}catch(y){console.error("Error checking if user should be blocked:",y),t.value=!1}s.value=!1},m=async()=>{try{n();const k=await ne.get("/api/availability-prompt");c(k.data.next_week_start,k.data.next_week_end)}catch(k){console.error("Error fetching next week dates:",k)}},c=(k,S)=>{const y=[],d=new Date(k),h=new Date(S),_=new Date(d);for(;_<=h;)y.push({value:_.toISOString().split("T")[0],label:_.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})}),_.setDate(_.getDate()+1);r.value=y},p=()=>{a.value=!0},g=()=>{l()},$=k=>{t.value=k.detail.shouldBlockUser&&!k.detail.allWeekdaysCovered},j=()=>{document.visibilityState==="visible"&&xt(()=>{l()})},N=k=>{(k.key==="shouldBlockUser"||k.key==="allWeekdaysCovered")&&xt(()=>{l()})};return Pt(()=>{l(),window.addEventListener("availability-status-updated",$),document.addEventListener("visibilitychange",j),window.addEventListener("storage",N)}),Gt(()=>{window.removeEventListener("availability-status-updated",$),document.removeEventListener("visibilitychange",j),window.removeEventListener("storage",N)}),(k,S)=>t.value&&!s.value?(u(),f("div",ho,[i("div",vo,[S[2]||(S[2]=fr('<div class="flex items-center mb-4"><div class="flex-shrink-0 mr-3"><svg class="h-8 w-8 text-red-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg></div><h2 class="text-xl font-bold text-gray-900">Action Required</h2></div><p class="mb-6 text-gray-700"> You must submit your availability for all weekdays of next week before you can continue using the application. This is required for planning meetings and work schedules. </p>',2)),i("div",go,[v(ve,{onClick:p,class:"bg-red-600 hover:bg-red-700"},{default:x(()=>S[1]||(S[1]=[T(" Submit Availability Now ",-1)])),_:1,__:[1]})]),v(mo,{show:a.value,"next-week-dates":r.value,date:r.value.length>0?r.value[0].value:"",userId:o.value,onClose:S[0]||(S[0]=y=>a.value=!1),onAvailabilitySaved:g},null,8,["show","next-week-dates","date","userId"])])])):b("",!0)}},po={class:"p-6"},_o={class:"flex justify-between items-center mb-4"},ko={class:"text-lg font-medium text-gray-900"},wo={key:0,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert"},bo={class:"block sm:inline"},xo={key:0,class:"mt-6 flex justify-end space-x-3"},So={__name:"BaseFormModal",props:{show:{type:Boolean,default:!1},title:{type:String,default:"Modal Title"},apiEndpoint:{type:String,required:!1},httpMethod:{type:String,default:"post",validator:e=>["post","put","patch","delete"].includes(e.toLowerCase())},formData:{type:Object,required:!0},submitButtonText:{type:String,default:"Save"},successMessage:{type:String,default:"Operation successful!"},formatDataForApi:{type:Function,default:e=>e},showFooter:{type:Boolean,default:!0}},emits:["close","submitted","error"],setup(e,{emit:t}){const s=e,a=t,r=O(!1),o=O({}),n=O("");ge(()=>s.show,c=>{c&&(o.value={},n.value="",r.value=!1)});const l=async()=>{r.value=!0,o.value={},n.value="";try{const c=s.formatDataForApi(s.formData);let p;const g=s.httpMethod.toLowerCase();if(g==="post")p=await window.axios.post(s.apiEndpoint,c);else if(g==="put")p=await window.axios.put(s.apiEndpoint,c);else if(g==="patch")p=await window.axios.patch(s.apiEndpoint,c);else if(g==="delete")p=await window.axios.delete(s.apiEndpoint,{data:c});else throw new Error(`Unsupported HTTP method: ${s.httpMethod}`);Oe(s.successMessage),a("submitted",p.data),a("close")}catch(c){console.error("API submission error:",c),c.response?c.response.status===422?(o.value=c.response.data.errors,n.value="Please correct the errors in the form."):n.value=c.response.data.message||"An unexpected error occurred.":n.value="A network error occurred or the server is unreachable.",me(n.value),a("error",c)}finally{r.value=!1}},m=()=>{a("close")};return(c,p)=>(u(),E(Ss,{show:e.show,onClose:m},{default:x(()=>[i("div",po,[i("div",_o,[i("h2",ko,P(e.title),1),i("button",{onClick:m,class:"text-gray-400 hover:text-gray-500"},p[0]||(p[0]=[i("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),n.value?(u(),f("div",wo,[i("span",bo,P(n.value),1)])):b("",!0),i("form",{onSubmit:bs(l,["prevent"])},[Ye(c.$slots,"default",{errors:o.value},void 0,!0),e.showFooter?(u(),f("div",xo,[v(Mt,{onClick:m,type:"button",disabled:r.value},{default:x(()=>p[1]||(p[1]=[T(" Cancel ",-1)])),_:1,__:[1]},8,["disabled"]),v(ve,{type:"submit",disabled:r.value,class:G({"opacity-75 cursor-not-allowed":r.value})},{default:x(()=>[T(P(r.value?"Submitting...":e.submitButtonText),1)]),_:1},8,["disabled","class"])])):b("",!0)],32)])]),_:3},8,["show"]))}},Zt=ct(So,[["__scopeId","data-v-380ca613"]]),Do=(e,t)=>{let s;return(...a)=>{clearTimeout(s),s=setTimeout(()=>e(...a),t)}},Mo={class:"relative"},To={class:"flex flex-wrap items-center gap-2 mb-2 p-2 border border-gray-300 rounded-lg bg-white min-h-[44px] focus-within:border-indigo-500 focus-within:ring-1 focus-within:ring-indigo-500 transition-all duration-150"},$o=["onClick"],Co={key:0,class:"absolute z-20 w-full bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto mt-1 transform-gpu"},Yo=["onClick"],Po={key:1,class:"px-4 py-2 text-sm text-gray-500"},Oo={key:2,class:"px-4 py-2 text-sm text-gray-500"},No={__name:"TagInput",props:{modelValue:{type:Array,default:()=>[]},label:{type:String,default:"Tags"},placeholder:{type:String,default:"Add tags..."},error:{type:String,default:""},initialTags:{type:Array,default:()=>[]},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:t}){const s=e,a=t,r=O(""),o=O([]),n=O([]),l=O(!1),m=O(null);function c(){a("update:modelValue",n.value.map(y=>y.id))}ge(()=>s.initialTags,y=>{if(n.value=[],y&&y.length>0){const Y=[],W=new Set;y.forEach(re=>{W.has(re.id)||(Y.push(re),W.add(re.id))}),n.value.push(...Y)}const d=y.map(Y=>Y.id),h=Array.isArray(s.modelValue)?s.modelValue:[];(d.length!==h.length||d.some(Y=>!h.includes(Y))||h.some(Y=>!d.includes(Y)))&&c()},{immediate:!0});const p=Do(async y=>{if(y.length<2){o.value=[],l.value=!1;return}try{const d=await ne.get(`/api/tags/search?query=${y}`);o.value=d.data,l.value=!0}catch(d){console.error("Error fetching tags:",d),o.value=[],l.value=!1}},300);ge(r,y=>{s.disabled||p(y)});const g=y=>{n.value.some(d=>d.id===y.id)||(n.value.push(y),r.value="",o.value=[],l.value=!1,c()),xt(()=>m.value.focus())},$=()=>{if(s.disabled)return;const y=r.value.trim();if(!y)return;const d=o.value.find(_=>_.name.toLowerCase()===y.toLowerCase()),h=n.value.some(_=>_.name.toLowerCase()===y.toLowerCase());if(d)g(d);else if(h)r.value="",o.value=[],l.value=!1;else{const _={id:`new_${y.replace(/\s+/g,"-").toLowerCase()}_${Date.now()}`,name:y};n.value.push(_),r.value="",o.value=[],l.value=!1,c()}xt(()=>m.value.focus())},j=y=>{s.disabled||(n.value=n.value.filter(d=>d.id!==y.id),c(),xt(()=>m.value.focus()))},N=()=>{s.disabled||r.value===""&&n.value.length>0&&j(n.value[n.value.length-1])},k=H(()=>o.value.filter(y=>!n.value.some(d=>d.id===y.id))),S=y=>{m.value&&!m.value.$el.contains(y.target)&&(l.value=!1,r.value="")};return Pt(()=>{document.addEventListener("click",S)}),Gt(()=>{document.removeEventListener("click",S)}),(y,d)=>(u(),f("div",Mo,[v(q,{value:e.label,class:"mb-1"},null,8,["value"]),i("div",To,[(u(!0),f(ue,null,ce(n.value,h=>(u(),f("span",{key:h.id,class:"inline-flex items-center px-3 py-1 text-sm font-medium bg-indigo-100 text-indigo-800 rounded-full shadow-sm"},[T(P(h.name)+" ",1),e.disabled?b("",!0):(u(),f("button",{key:0,type:"button",onClick:_=>j(h),class:"ml-2 -mr-1 text-indigo-500 hover:text-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 rounded-full p-0.5"},d[3]||(d[3]=[i("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,$o))]))),128)),v(Fe,{ref_key:"inputRef",ref:m,type:"text",placeholder:n.value.length===0?e.placeholder:"",modelValue:r.value,"onUpdate:modelValue":d[0]||(d[0]=h=>r.value=h),onFocus:d[1]||(d[1]=h=>l.value=!0),onKeydown:[ls(bs($,["prevent"]),["enter"]),d[2]||(d[2]=ls(h=>l.value=!1,["tab"])),ls(N,["delete"])],class:"flex-grow min-w-[100px] border-none focus:ring-0 shadow-none p-0 bg-transparent text-gray-900",disabled:e.disabled},null,8,["placeholder","modelValue","onKeydown","disabled"])]),l.value&&(k.value.length>0||r.value.length>=2||k.value.length===0&&r.value.length<2)&&!e.disabled?(u(),f("div",Co,[(u(!0),f(ue,null,ce(k.value,h=>(u(),f("div",{key:h.id,onClick:_=>g(h),class:"px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 cursor-pointer transition-colors duration-100"},P(h.name),9,Yo))),128)),!o.value.some(h=>h.name.toLowerCase()===r.value.toLowerCase())&&r.value.length>=2?(u(),f("div",{key:0,onClick:$,class:"px-4 py-2 text-sm text-indigo-700 bg-indigo-50 hover:bg-indigo-100 cursor-pointer border-t border-indigo-200 font-semibold transition-colors duration-100"},' Add new tag: "'+P(r.value)+'" ',1)):b("",!0),k.value.length===0&&r.value.length<2?(u(),f("div",Po," Type at least 2 characters to search for tags. ")):b("",!0),k.value.length===0&&r.value.length>=2&&!o.value.some(h=>h.name.toLowerCase()===r.value.toLowerCase())?(u(),f("div",Oo,[d[4]||(d[4]=T(" No matching tags found. Press ",-1)),d[5]||(d[5]=i("span",{class:"font-semibold text-indigo-600"},"Enter",-1)),T(' to add "'+P(r.value)+'" as a new tag. ',1)])):b("",!0)])):b("",!0),v(ae,{message:e.error,class:"mt-2"},null,8,["message"])]))}},ca=ct(No,[["__scopeId","data-v-4d528a4c"]]),Io={class:"space-y-4"},Ao="Add New Milestone",Eo="/api/milestones",Ro="post",Uo="Create Milestone",jo="Milestone created successfully!",Wo={__name:"MilestoneFormModal",props:{show:Boolean,projectId:Number},emits:["close","saved"],setup(e,{emit:t}){const s=e,a=t,r=qt({name:"",description:"",completion_date:null,status:"Not Started",project_id:s.projectId}),o=["Not Started","In Progress","Completed","Overdue"];ge(()=>s.show,m=>{m&&Object.assign(r,{name:"",description:"",completion_date:null,status:"Not Started",project_id:s.projectId})},{immediate:!0});const n=m=>{a("saved",m),a("close")},l=()=>{a("close")};return(m,c)=>(u(),E(Zt,{show:e.show,title:Ao,"api-endpoint":Eo,"http-method":Ro,"form-data":r,"submit-button-text":Uo,"success-message":jo,onClose:l,onSubmitted:n},{default:x(({errors:p})=>[i("div",Io,[i("div",null,[v(q,{for:"milestone-name",value:"Milestone Name"}),v(Fe,{id:"milestone-name",modelValue:r.name,"onUpdate:modelValue":c[0]||(c[0]=g=>r.name=g),type:"text",class:"mt-1 block w-full",placeholder:"Enter milestone name",required:""},null,8,["modelValue"]),v(ae,{message:p.name?p.name[0]:"",class:"mt-2"},null,8,["message"])]),i("div",null,[v(q,{for:"milestone-description",value:"Description"}),de(i("textarea",{id:"milestone-description","onUpdate:modelValue":c[1]||(c[1]=g=>r.description=g),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",rows:"3",placeholder:"Enter milestone description"},null,512),[[Le,r.description]]),v(ae,{message:p.description?p.description[0]:"",class:"mt-2"},null,8,["message"])]),i("div",null,[v(q,{for:"milestone-completion-date",value:"Completion Date"}),v(Fe,{id:"milestone-completion-date",modelValue:r.completion_date,"onUpdate:modelValue":c[2]||(c[2]=g=>r.completion_date=g),type:"date",class:"mt-1 block w-full"},null,8,["modelValue"]),v(ae,{message:p.completion_date?p.completion_date[0]:"",class:"mt-2"},null,8,["message"])]),i("div",null,[v(q,{for:"milestone-status",value:"Status"}),v($e,{id:"milestone-status",modelValue:r.status,"onUpdate:modelValue":c[3]||(c[3]=g=>r.status=g),options:o.map(g=>({value:g,label:g})),"value-key":"value","label-key":"label",placeholder:"Select status",class:"mt-1"},null,8,["modelValue","options"]),v(ae,{message:p.status?p.status[0]:"",class:"mt-2"},null,8,["message"])])])]),_:1},8,["show","form-data"]))}},Lo={class:"space-y-4"},Fo={key:0},Vo={key:0,class:"text-sm text-gray-500"},Ho={key:0,class:"text-sm text-gray-500"},Bo={key:0,class:"text-sm text-gray-500"},zo={class:"flex items-center gap-2 mt-1"},Go={key:0,class:"text-sm text-gray-500"},qo=["disabled"],Zo="Create New Task",Jo="/api/tasks",Qo="post",Ko="Create Task",Xo="Task created successfully!",en={__name:"CreateTaskModal",props:{show:Boolean,projectId:{type:Number,default:null}},emits:["close","saved"],setup(e,{emit:t}){const s=e,a=t,r=qt({name:"",description:"",assigned_to_user_id:null,due_date:null,status:"To Do",task_type_id:null,milestone_id:null,project_id:s.projectId,priority:"medium",tags:[],tags_data:[]}),o=["To Do","In Progress","Done","Blocked","Archived"],n=[{value:"low",label:"Low"},{value:"medium",label:"Medium"},{value:"high",label:"High"}],l=O([]),m=O([]),c=O([]),p=O([]),g=O(!0),$=O(!1),j=O(!1),N=O(!1),k=O(!1);ge(()=>s.show,async X=>{X&&(Object.assign(r,{name:"",description:"",assigned_to_user_id:null,due_date:null,status:"To Do",task_type_id:null,milestone_id:null,project_id:s.projectId,priority:"medium",tags:[],tags_data:[]}),s.projectId?await y(s.projectId):await S())},{immediate:!0}),ge(()=>r.project_id,async X=>{X?await y(X):(m.value=[],c.value=[],p.value=[])});const S=async()=>{g.value=!0;try{const X=await window.axios.get("/api/projects-simplified");l.value=X.data.map(L=>({value:L.id,label:L.name}))}catch(X){console.error("Error fetching projects:",X),l.value=[]}finally{g.value=!1}},y=async X=>{if(X){$.value=!0,j.value=!0,N.value=!0;try{const[L,J,K]=await Promise.all([window.axios.get(`/api/projects/${X}/users`),window.axios.get("/api/task-types"),window.axios.get(`/api/projects/${X}/milestones`)]);m.value=L.data.map(Te=>({value:Te.id,label:Te.name})),c.value=J.data.map(Te=>({value:Te.id,label:Te.name})),p.value=K.data.map(Te=>({value:Te.id,label:Te.name}))}catch(L){console.error("Error fetching associated task data:",L),m.value=[],c.value=[],p.value=[]}finally{$.value=!1,j.value=!1,N.value=!1}}},d=X=>{a("saved",X),a("close")},h=()=>{a("close")},_=()=>{r.project_id?k.value=!0:alert("Please select a project before adding a milestone.")},Y=X=>{if(k.value=!1,X&&X.id&&X.name){const L={value:X.id,label:X.name};p.value.some(J=>J.value===L.value)||p.value.push(L),r.milestone_id=L.value}},W=H(()=>m.value),re=H(()=>c.value),Ae=H(()=>p.value);return(X,L)=>(u(),f(ue,null,[v(Zt,{show:e.show,title:Zo,"api-endpoint":Jo,"http-method":Qo,"form-data":r,"submit-button-text":Ko,"success-message":Xo,onClose:h,onSubmitted:d},{default:x(({errors:J})=>[i("div",Lo,[e.projectId?b("",!0):(u(),f("div",Fo,[v(q,{for:"task-project",value:"Project"}),g.value?(u(),f("div",Vo,"Loading projects...")):(u(),E($e,{key:1,id:"task-project",modelValue:r.project_id,"onUpdate:modelValue":L[0]||(L[0]=K=>r.project_id=K),options:l.value,"value-key":"value","label-key":"label",placeholder:"Select a project",class:"mt-1",required:!0},null,8,["modelValue","options"])),v(ae,{message:J.project_id?J.project_id[0]:"",class:"mt-2"},null,8,["message"])])),i("div",null,[v(q,{for:"task-name",value:"Task Name"}),v(Fe,{id:"task-name",modelValue:r.name,"onUpdate:modelValue":L[1]||(L[1]=K=>r.name=K),type:"text",class:"mt-1 block w-full",placeholder:"Enter task name",required:""},null,8,["modelValue"]),v(ae,{message:J.name?J.name[0]:"",class:"mt-2"},null,8,["message"])]),i("div",null,[v(q,{for:"task-description",value:"Description"}),de(i("textarea",{id:"task-description","onUpdate:modelValue":L[2]||(L[2]=K=>r.description=K),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",rows:"3",placeholder:"Enter task description"},null,512),[[Le,r.description]]),v(ae,{message:J.description?J.description[0]:"",class:"mt-2"},null,8,["message"])]),i("div",null,[v(q,{for:"task-status",value:"Status"}),v($e,{id:"task-status",modelValue:r.status,"onUpdate:modelValue":L[3]||(L[3]=K=>r.status=K),options:o.map(K=>({value:K,label:K})),"value-key":"value","label-key":"label",placeholder:"Select status",class:"mt-1"},null,8,["modelValue","options"]),v(ae,{message:J.status?J.status[0]:"",class:"mt-2"},null,8,["message"])]),i("div",null,[v(q,{for:"task-priority",value:"Priority"}),v($e,{id:"task-priority",modelValue:r.priority,"onUpdate:modelValue":L[4]||(L[4]=K=>r.priority=K),options:n,"value-key":"value","label-key":"label",placeholder:"Select priority",class:"mt-1"},null,8,["modelValue"]),v(ae,{message:J.priority?J.priority[0]:"",class:"mt-2"},null,8,["message"])]),i("div",null,[v(q,{for:"task-due-date",value:"Due Date"}),v(Fe,{id:"task-due-date",modelValue:r.due_date,"onUpdate:modelValue":L[5]||(L[5]=K=>r.due_date=K),type:"date",class:"mt-1 block w-full"},null,8,["modelValue"]),v(ae,{message:J.due_date?J.due_date[0]:"",class:"mt-2"},null,8,["message"])]),i("div",null,[v(q,{for:"task-assigned-to",value:"Assigned To"}),$.value?(u(),f("div",Ho,"Loading users...")):(u(),E($e,{key:1,id:"task-assigned-to",modelValue:r.assigned_to_user_id,"onUpdate:modelValue":L[6]||(L[6]=K=>r.assigned_to_user_id=K),options:W.value,"value-key":"value","label-key":"label",placeholder:"Unassigned",class:"mt-1","allow-empty":!0},null,8,["modelValue","options"])),v(ae,{message:J.assigned_to_user_id?J.assigned_to_user_id[0]:"",class:"mt-2"},null,8,["message"])]),i("div",null,[v(q,{for:"task-type",value:"Task Type"}),j.value?(u(),f("div",Bo,"Loading task types...")):(u(),E($e,{key:1,id:"task-type",modelValue:r.task_type_id,"onUpdate:modelValue":L[7]||(L[7]=K=>r.task_type_id=K),options:re.value,"value-key":"value","label-key":"label",placeholder:"Select a task type",class:"mt-1","allow-empty":!0},null,8,["modelValue","options"])),v(ae,{message:J.task_type_id?J.task_type_id[0]:"",class:"mt-2"},null,8,["message"])]),i("div",null,[v(q,{for:"task-milestone",value:"Milestone"}),i("div",zo,[N.value?(u(),f("div",Go,"Loading milestones...")):(u(),E($e,{key:1,id:"task-milestone",modelValue:r.milestone_id,"onUpdate:modelValue":L[8]||(L[8]=K=>r.milestone_id=K),options:Ae.value,"value-key":"value","label-key":"label",placeholder:"No milestone",class:"flex-grow","allow-empty":!0,disabled:!r.project_id},null,8,["modelValue","options","disabled"])),i("button",{type:"button",onClick:_,disabled:!r.project_id||N.value,class:"px-3 py-2 text-sm font-medium text-blue-600 bg-blue-50 rounded-md hover:bg-blue-100 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",title:"Add New Milestone"},L[11]||(L[11]=[i("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4v16m8-8H4"})],-1)]),8,qo)]),v(ae,{message:J.milestone_id?J.milestone_id[0]:"",class:"mt-2"},null,8,["message"])]),i("div",null,[v(ca,{modelValue:r.tags,"onUpdate:modelValue":L[9]||(L[9]=K=>r.tags=K),initialTags:r.tags_data,label:"Tags",placeholder:"Search or add tags",error:J.tags?J.tags[0]:"",disabled:!r.project_id},null,8,["modelValue","initialTags","error","disabled"])])])]),_:1},8,["show","form-data"]),v(Wo,{show:k.value,"project-id":r.project_id,onClose:L[10]||(L[10]=J=>k.value=!1),onSaved:Y},null,8,["show","project-id"])],64))}},tn={class:"space-y-4"},sn={class:"flex items-center mt-4"},an={__name:"CreateForm",props:{show:{type:Boolean,default:!1},apiEndpoint:{type:String,required:!0}},emits:["close","resourceCreated"],setup(e,{emit:t}){const s=e,a=t,r=qt({title:"",description:"",url:"",type:"website",thumbnail_url:"",visible_to_client:!0,tags:[]}),o=H(()=>[{value:"website",label:"Website"},{value:"youtube",label:"YouTube Video"},{value:"document",label:"Document"},{value:"image",label:"Image"},{value:"other",label:"Other"}]),n=c=>c,l=c=>{a("resourceCreated",c),m()},m=()=>{r.title="",r.description="",r.url="",r.type="website",r.thumbnail_url="",r.visible_to_client=!0,r.tags=[],a("close")};return(c,p)=>(u(),E(Zt,{show:s.show,title:"Add New Shareable Resource",apiEndpoint:s.apiEndpoint,httpMethod:"post",formData:r,submitButtonText:"Create Resource",successMessage:"Shareable resource created successfully!",formatDataForApi:n,onSubmitted:l,onClose:m},{default:x(({errors:g})=>[i("div",tn,[i("div",null,[v(q,{for:"title",value:"Title",class:"mb-1"}),v(Fe,{id:"title",type:"text",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:r.title,"onUpdate:modelValue":p[0]||(p[0]=$=>r.title=$),required:""},null,8,["modelValue"]),v(ae,{message:g.title?g.title[0]:"",class:"mt-2"},null,8,["message"])]),i("div",null,[v(q,{for:"url",value:"Resource URL",class:"mb-1"}),v(Fe,{id:"url",type:"url",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:r.url,"onUpdate:modelValue":p[1]||(p[1]=$=>r.url=$),required:""},null,8,["modelValue"]),v(ae,{message:g.url?g.url[0]:"",class:"mt-2"},null,8,["message"])]),i("div",null,[v(q,{for:"type",value:"Resource Type",class:"mb-1"}),v($e,{id:"type",modelValue:r.type,"onUpdate:modelValue":p[2]||(p[2]=$=>r.type=$),options:o.value,valueKey:"value",labelKey:"label",placeholder:"Select Resource Type",required:"",class:"mt-1 block w-full"},null,8,["modelValue","options"]),v(ae,{message:g.type?g.type[0]:"",class:"mt-2"},null,8,["message"])]),i("div",null,[v(q,{for:"thumbnail_url",value:"Thumbnail URL (Optional)",class:"mb-1"}),v(Fe,{id:"thumbnail_url",type:"url",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:r.thumbnail_url,"onUpdate:modelValue":p[3]||(p[3]=$=>r.thumbnail_url=$)},null,8,["modelValue"]),v(ae,{message:g.thumbnail_url?g.thumbnail_url[0]:"",class:"mt-2"},null,8,["message"])]),i("div",null,[v(q,{for:"description",value:"Description (Optional)",class:"mb-1"}),de(i("textarea",{id:"description",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-lg shadow-sm mt-1 block w-full","onUpdate:modelValue":p[4]||(p[4]=$=>r.description=$),rows:"3"},null,512),[[Le,r.description]]),v(ae,{message:g.description?g.description[0]:"",class:"mt-2"},null,8,["message"])]),i("div",null,[v(ca,{modelValue:r.tags,"onUpdate:modelValue":p[5]||(p[5]=$=>r.tags=$),label:"Associated Tags",placeholder:"Search or add tags",error:g.tags?g.tags[0]:""},null,8,["modelValue","error"])]),i("div",sn,[v(pr,{id:"visible_to_client",checked:r.visible_to_client,"onUpdate:checked":p[6]||(p[6]=$=>r.visible_to_client=$)},null,8,["checked"]),v(q,{for:"visible_to_client",value:"Visible to Client",class:"ml-2"}),v(ae,{message:g.visible_to_client?g.visible_to_client[0]:"",class:"mt-2"},null,8,["message"])])])]),_:1},8,["show","apiEndpoint","formData"]))}},rn=ct(an,[["__scopeId","data-v-3e3a6a9f"]]),on={key:0,class:"sidebar-wrapper"},nn={class:"fixed inset-0 z-[100] flex pointer-events-none"},ln={class:"flex items-center justify-between p-4 border-b border-gray-200 bg-white rounded-tl-xl sticky top-0 z-20"},un={class:"text-xl font-semibold text-gray-900"},dn={class:"flex-1 overflow-y-auto p-6 scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-gray-300 scrollbar-track-gray-100"},cn={key:1,class:"p-4 border-t border-gray-200 bg-white sticky bottom-0 z-20"},fn={__name:"RightSidebar",props:{show:{type:Boolean,default:!1},title:{type:String,default:"Details"},initialWidth:{type:Number,default:50},minWidth:{type:Number,default:30},maxWidth:{type:Number,default:90}},emits:["close","update:show"],setup(e,{emit:t}){const s=e,a=t,r=O(s.initialWidth),o=O(!1),n=g=>{o.value=!0,document.addEventListener("pointermove",l),document.addEventListener("pointerup",m)},l=g=>{if(!o.value)return;const $=window.innerWidth,N=($-g.clientX)/$*100,k=Math.max(s.minWidth,Math.min(s.maxWidth,N));r.value=k},m=()=>{o.value=!1,document.removeEventListener("pointermove",l),document.removeEventListener("pointerup",m)};ge(()=>s.show,g=>{g?document.body.style.overflow="hidden":document.body.style.overflow=""},{immediate:!0});const c=()=>{a("update:show",!1),a("close")},p=H(()=>window.innerWidth<768);return ge(p,g=>{g&&s.show?r.value=100:!g&&s.show&&(r.value=s.initialWidth)},{immediate:!0}),ge(()=>s.show,g=>{g&&(p.value?r.value=100:r.value=s.initialWidth)}),(g,$)=>(u(),E(hr,{to:"body"},[v(la,{"enter-active-class":"transition ease-out duration-300 transform","enter-from-class":"translate-x-full","enter-to-class":"translate-x-0","leave-active-class":"transition ease-in duration-200 transform","leave-from-class":"translate-x-0","leave-to-class":"translate-x-full"},{default:x(()=>[e.show?(u(),f("div",on,[i("div",{class:"fixed inset-0 bg-gray-900 bg-opacity-50 transition-opacity z-[99]",onClick:c}),i("div",nn,[i("div",{class:"relative ml-auto h-full bg-white shadow-xl flex flex-col rounded-l-xl pointer-events-auto",style:mr({width:p.value?"100%":`${r.value}vw`})},[p.value?b("",!0):(u(),f("div",{key:0,class:"absolute left-0 top-0 h-full w-2 cursor-col-resize -ml-1 z-10",onPointerdown:n,title:"Drag to resize"},null,32)),i("div",ln,[i("h3",un,P(e.title),1),i("button",{onClick:c,class:"text-gray-400 hover:text-gray-600 transition-colors"},$[0]||($[0]=[i("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),i("div",dn,[Ye(g.$slots,"content",{},void 0,!0)]),g.$slots.footer?(u(),f("div",cn,[Ye(g.$slots,"footer",{},void 0,!0)])):b("",!0)],4)])])):b("",!0)]),_:3})]))}},fa=ct(fn,[["__scopeId","data-v-2d864577"]]),mn={class:"flex border-b border-gray-200"},hn={key:0,class:"ml-2 px-2 py-1 text-xs font-bold bg-red-600 text-white rounded-full"},vn={class:"p-4 space-y-2 overflow-y-auto"},gn={key:0,class:"p-6 text-center text-gray-500"},yn={key:0},pn={key:1},_n=["onClick"],kn={class:"flex-1 min-w-0"},wn={class:"flex items-start justify-between gap-2 mb-1"},bn={class:"flex-1 min-w-0"},xn={key:0,class:"text-base font-semibold text-gray-900 truncate"},Sn={key:1,class:"text-xs text-gray-500"},Dn={key:0,class:"text-sm text-gray-600 mt-1 mb-2"},Mn={class:"flex items-center text-xs text-gray-500 font-medium"},Tn={key:0},$n={key:1,class:"mx-2"},Cn={key:2},Yn={__name:"NotificationsSidebar",setup(e){const t=H(()=>Dt.value.notifications),s=O("New"),a=H(()=>s.value==="New"?t.value.filter(l=>!l.isRead):t.value),r=async l=>{await na(l.view_id);const m=l.task_id||o(l.url),c=l.project_id||n(l.url);m&&c?(ia(m,c),qs()):(console.warn("Could not open task sidebar. Falling back to opening URL in new tab."),l.url&&window.open(l.url,"_blank"))},o=l=>{const m=l.match(/\/task\/(\d+)/);return m?parseInt(m[1]):null},n=l=>{const m=l.match(/\/project\/(\d+)\//);return m?parseInt(m[1]):null};return(l,m)=>(u(),E(fa,{show:I(Dt).show,"onUpdate:show":I(qs),title:"Notifications","initial-width":35,class:"z-[100]"},{content:x(()=>[i("div",mn,[i("button",{onClick:m[0]||(m[0]=c=>s.value="New"),class:G([{"border-blue-600 text-blue-600 font-semibold":s.value==="New","border-transparent text-gray-500 hover:text-gray-700":s.value!=="New"},"flex-1 py-4 px-1 text-center text-sm border-b-2 transition-colors duration-200"])},[m[2]||(m[2]=T(" New ",-1)),t.value.filter(c=>!c.isRead).length>0?(u(),f("span",hn,P(t.value.filter(c=>!c.isRead).length),1)):b("",!0)],2),i("button",{onClick:m[1]||(m[1]=c=>s.value="All"),class:G([{"border-blue-600 text-blue-600 font-semibold":s.value==="All","border-transparent text-gray-500 hover:text-gray-700":s.value!=="All"},"flex-1 py-4 px-1 text-center text-sm border-b-2 transition-colors duration-200"])}," All ",2)]),i("div",vn,[a.value.length===0?(u(),f("div",gn,[s.value==="New"?(u(),f("span",yn,"You have no new notifications.")):(u(),f("span",pn,"You have no notifications."))])):b("",!0),(u(!0),f(ue,null,ce(a.value,c=>(u(),f("div",{key:c.id,class:G(["bg-white rounded-xl shadow-sm p-4 flex items-start space-x-4 border border-gray-200 transition-all duration-200 hover:shadow-md cursor-pointer",{"bg-gray-50":c.isRead}]),onClick:p=>r(c)},[i("div",kn,[i("div",wn,[i("div",bn,[c.title?(u(),f("h3",xn,P(c.title),1)):b("",!0),c.project_name?(u(),f("p",Sn,P(c.project_name),1)):b("",!0)])]),c.message?(u(),f("p",Dn,P(c.message),1)):b("",!0),i("div",Mn,[c.due_date?(u(),f("span",Tn,"Due: "+P(I(oa)(c.due_date)),1)):b("",!0),c.due_date&&c.priority?(u(),f("span",$n,"•")):b("",!0),c.priority?(u(),f("span",Cn,"Priority: "+P(c.priority),1)):b("",!0)])])],10,_n))),128))])]),_:1},8,["show","onUpdate:show"]))}},Pn={class:"flex items-center p-4 h-16 border-b border-gray-700"},On={key:0,class:"text-xl font-semibold flex-1 truncate"},Nn=["title"],In={key:0,class:"p-4 border-b border-gray-700"},An={class:"relative"},En={key:1,class:"flex-1 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-500 scrollbar-track-gray-700 p-4"},Rn={key:0,class:"mb-4"},Un={class:"ml-2 mt-2 space-y-1"},jn=["onClick"],Wn={class:"text-sm font-medium text-gray-300 truncate"},Ln={class:"ml-4 mt-1 space-y-1"},Fn={class:"truncate"},Vn={key:1,class:"mb-4"},Hn={class:"ml-2 mt-2 space-y-1"},Bn=["onClick"],zn={class:"text-sm font-medium text-gray-300 truncate"},Gn={class:"ml-4 mt-1 space-y-1"},qn={class:"truncate"},Zn={key:2,class:"mb-4"},Jn={class:"ml-2 mt-2 space-y-1"},Qn={class:"truncate"},Kn={key:3,class:"mb-4"},Xn={class:"ml-2 mt-2 space-y-1"},ei={class:"truncate"},ti={key:4,class:"text-gray-400 text-sm text-center py-4"},si={key:5,class:"text-gray-400 text-sm text-center py-4"},ai={key:2,class:"flex flex-col items-center pt-4 space-y-4"},ri={key:0,class:"text-gray-400 text-xs text-center px-2"},oi={__name:"LeftSidebar",props:{allProjects:{type:Array,default:()=>[]},activeProjectId:{type:Number,default:null}},emits:["project-selected"],setup(e,{emit:t}){const s=e,a=t,r=O(localStorage.getItem("leftSidebarCollapsed")!=="false"),o=O(""),n=O({}),l=H(()=>{const d=new Set;return s.allProjects.forEach(h=>{h.project_type&&d.add(h.project_type)}),Array.from(d).sort()}),m=H(()=>{const d=new Set;return s.allProjects.forEach(h=>{Array.isArray(h.tags)&&h.tags.forEach(_=>d.add(_))}),Array.from(d).sort()}),c=H(()=>{if(!o.value)return s.allProjects;const d=o.value.toLowerCase();return s.allProjects.filter(h=>{var _,Y,W;return h.name.toLowerCase().includes(d)||((_=h.description)==null?void 0:_.toLowerCase().includes(d))||((Y=h.project_type)==null?void 0:Y.toLowerCase().includes(d))||Array.isArray(h.tags)&&h.tags.some(re=>re.toLowerCase().includes(d))||((W=h.status)==null?void 0:W.toLowerCase().includes(d))})}),p=H(()=>{const d={};c.value.forEach(h=>{h.project_type&&h.status==="active"&&(d[h.project_type]||(d[h.project_type]=[]),d[h.project_type].push(h))});for(const h in d)d[h].sort((_,Y)=>_.name.localeCompare(Y.name));return d}),g=H(()=>{const d={};c.value.forEach(h=>{Array.isArray(h.tags)&&h.tags.length>0&&h.tags.forEach(_=>{d[_]||(d[_]=[]),d[_].push(h)})});for(const h in d)d[h]=[...new Set(d[h])].sort((_,Y)=>_.name.localeCompare(Y.name));return d}),$=H(()=>c.value.filter(d=>d.status!=="active").sort((d,h)=>d.name.localeCompare(h.name))),j=H(()=>c.value.filter(d=>!d.project_type&&(!Array.isArray(d.tags)||d.tags.length===0)).sort((d,h)=>d.name.localeCompare(h.name)));ge(()=>s.allProjects,()=>{l.value.forEach(d=>{const h=`type-${d}`;n.value[h]===void 0&&(n.value[h]=!0)}),m.value.forEach(d=>{const h=`tag-${d}`;n.value[h]===void 0&&(n.value[h]=!0)}),n.value["main-types"]===void 0&&(n.value["main-types"]=!1),n.value["main-tags"]===void 0&&(n.value["main-tags"]=!1),n.value["inactive-projects"]===void 0&&(n.value["inactive-projects"]=!1),n.value.uncategorized===void 0&&(n.value.uncategorized=!1)},{immediate:!0}),ge(r,d=>{localStorage.setItem("leftSidebarCollapsed",d)});const N=()=>{r.value=!r.value},k=d=>{n.value[d]=!n.value[d]},S=d=>{a("project-selected",d)},y=()=>{o.value=""};return(d,h)=>(u(),f("div",{class:G({"w-64":!r.value,"w-16":r.value,"min-w-16":!0,"bg-gray-800 text-white flex flex-col transition-all duration-300 ease-in-out shrink-0 h-screen overflow-hidden":!0})},[i("div",Pn,[r.value?b("",!0):(u(),f("h2",On,"Projects")),i("button",{onClick:N,class:"p-2 rounded-full hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500",title:r.value?"Expand Sidebar":"Collapse Sidebar"},[(u(),f("svg",{class:G(["w-6 h-6 text-gray-400 transform transition-transform duration-300",{"rotate-180":r.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},h[5]||(h[5]=[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"},null,-1)]),2))],8,Nn)]),r.value?b("",!0):(u(),f("div",In,[i("div",An,[de(i("input",{type:"text","onUpdate:modelValue":h[0]||(h[0]=_=>o.value=_),placeholder:"Search all projects...",class:"w-full p-2 rounded-md bg-gray-700 border border-gray-600 text-white placeholder-gray-400 focus:ring-indigo-500 focus:border-indigo-500 text-sm"},null,512),[[Le,o.value]]),o.value?(u(),f("button",{key:0,onClick:y,class:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-200",title:"Clear search"},h[6]||(h[6]=[i("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))):b("",!0)])])),r.value?(u(),f("div",ai,[(u(!0),f(ue,null,ce(s.allProjects,_=>(u(),E(I(Ue),{key:_.id,href:d.route("projects.show",_.id),onClick:Y=>S(_.id),class:G({"w-10 h-10 rounded-full flex items-center justify-center text-xs font-bold transition-all duration-200":!0,"bg-indigo-600 text-white":_.id===e.activeProjectId,"bg-gray-700 text-gray-300 hover:bg-gray-600":_.id!==e.activeProjectId}),title:_.name},{default:x(()=>[T(P(_.name.charAt(0).toUpperCase()),1)]),_:2},1032,["href","onClick","class","title"]))),128)),e.allProjects.length===0?(u(),f("div",ri," No Projects ")):b("",!0)])):(u(),f("div",En,[Object.keys(p.value).length>0?(u(),f("div",Rn,[i("div",{class:"flex items-center justify-between cursor-pointer py-2 hover:bg-gray-700 rounded-md px-2",onClick:h[1]||(h[1]=_=>k("main-types"))},[h[8]||(h[8]=i("h3",{class:"text-sm font-semibold text-gray-400"},"Active Projects by Type",-1)),(u(),f("svg",{class:G(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!n.value["main-types"]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},h[7]||(h[7]=[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))]),de(i("div",Un,[(u(!0),f(ue,null,ce(p.value,(_,Y)=>(u(),f("div",{key:Y},[i("div",{class:"flex items-center justify-between cursor-pointer py-1 hover:bg-gray-700 rounded-md px-2",onClick:W=>k(`type-${Y}`)},[i("h4",Wn,P(Y),1),(u(),f("svg",{class:G(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!n.value[`type-${Y}`]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},h[9]||(h[9]=[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))],8,jn),de(i("ul",Ln,[(u(!0),f(ue,null,ce(_,W=>(u(),f("li",{key:W.id},[v(I(Ue),{href:d.route("projects.show",W.id),onClick:re=>S(W.id),class:G({"block w-full text-left px-3 py-2 rounded-md transition-colors":!0,"bg-indigo-600 text-white":W.id===e.activeProjectId,"hover:bg-gray-700 text-gray-200":W.id!==e.activeProjectId,"font-bold":W.id===e.activeProjectId})},{default:x(()=>[i("span",Fn,P(W.name),1)]),_:2},1032,["href","onClick","class"])]))),128))],512),[[Ze,!n.value[`type-${Y}`]]])]))),128))],512),[[Ze,!n.value["main-types"]]])])):b("",!0),Object.keys(g.value).length>0?(u(),f("div",Vn,[i("div",{class:"flex items-center justify-between cursor-pointer py-2 hover:bg-gray-700 rounded-md px-2",onClick:h[2]||(h[2]=_=>k("main-tags"))},[h[11]||(h[11]=i("h3",{class:"text-sm font-semibold text-gray-400"},"Projects by Tag",-1)),(u(),f("svg",{class:G(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!n.value["main-tags"]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},h[10]||(h[10]=[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))]),de(i("div",Hn,[(u(!0),f(ue,null,ce(g.value,(_,Y)=>(u(),f("div",{key:Y},[i("div",{class:"flex items-center justify-between cursor-pointer py-1 hover:bg-gray-700 rounded-md px-2",onClick:W=>k(`tag-${Y}`)},[i("h4",zn,P(Y),1),(u(),f("svg",{class:G(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!n.value[`tag-${Y}`]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},h[12]||(h[12]=[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))],8,Bn),de(i("ul",Gn,[(u(!0),f(ue,null,ce(_,W=>(u(),f("li",{key:W.id},[v(I(Ue),{href:d.route("projects.show",W.id),onClick:re=>S(W.id),class:G({"block w-full text-left px-3 py-2 rounded-md transition-colors":!0,"bg-indigo-600 text-white":W.id===e.activeProjectId,"hover:bg-gray-700 text-gray-200":W.id!==e.activeProjectId,"font-bold":W.id===e.activeProjectId})},{default:x(()=>[i("span",qn,P(W.name),1)]),_:2},1032,["href","onClick","class"])]))),128))],512),[[Ze,!n.value[`tag-${Y}`]]])]))),128))],512),[[Ze,!n.value["main-tags"]]])])):b("",!0),$.value.length>0?(u(),f("div",Zn,[i("div",{class:"flex items-center justify-between cursor-pointer py-2 hover:bg-gray-700 rounded-md px-2",onClick:h[3]||(h[3]=_=>k("inactive-projects"))},[h[14]||(h[14]=i("h3",{class:"text-sm font-semibold text-gray-400"},"Inactive Projects",-1)),(u(),f("svg",{class:G(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!n.value["inactive-projects"]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},h[13]||(h[13]=[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))]),de(i("ul",Jn,[(u(!0),f(ue,null,ce($.value,_=>(u(),f("li",{key:_.id},[v(I(Ue),{href:d.route("projects.show",_.id),onClick:Y=>S(_.id),class:G({"block w-full text-left px-3 py-2 rounded-md transition-colors":!0,"bg-indigo-600 text-white":_.id===e.activeProjectId,"hover:bg-gray-700 text-gray-200":_.id!==e.activeProjectId,"font-bold":_.id===e.activeProjectId})},{default:x(()=>[i("span",Qn,P(_.name)+" ("+P(_.status.replace("_"," "))+")",1)]),_:2},1032,["href","onClick","class"])]))),128))],512),[[Ze,!n.value["inactive-projects"]]])])):b("",!0),j.value.length>0?(u(),f("div",Kn,[i("div",{class:"flex items-center justify-between cursor-pointer py-2 hover:bg-gray-700 rounded-md px-2",onClick:h[4]||(h[4]=_=>k("uncategorized"))},[h[16]||(h[16]=i("h3",{class:"text-sm font-semibold text-gray-400"},"Uncategorized",-1)),(u(),f("svg",{class:G(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!n.value.uncategorized}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},h[15]||(h[15]=[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))]),de(i("ul",Xn,[(u(!0),f(ue,null,ce(j.value,_=>(u(),f("li",{key:_.id},[v(I(Ue),{href:d.route("projects.show",_.id),onClick:Y=>S(_.id),class:G({"block w-full text-left px-3 py-2 rounded-md transition-colors":!0,"bg-indigo-600 text-white":_.id===e.activeProjectId,"hover:bg-gray-700 text-gray-200":_.id!==e.activeProjectId,"font-bold":_.id===e.activeProjectId})},{default:x(()=>[i("span",ei,P(_.name),1)]),_:2},1032,["href","onClick","class"])]))),128))],512),[[Ze,!n.value.uncategorized]])])):b("",!0),c.value.length===0?(u(),f("div",ti," No projects found matching your search. ")):e.allProjects.length===0&&!o.value?(u(),f("div",si," No projects available. ")):b("",!0)]))],2))}},ni=ct(oi,[["__scopeId","data-v-417d431f"]]),ii={class:"relative"},ma={__name:"Dropdown",props:{align:{type:String,default:"right"},width:{type:String,default:"48"},contentClasses:{type:String,default:"py-1 bg-white"}},setup(e){const t=e,s=n=>{o.value&&n.key==="Escape"&&(o.value=!1)};Pt(()=>document.addEventListener("keydown",s)),Gt(()=>document.removeEventListener("keydown",s));const a=H(()=>({48:"w-48"})[t.width.toString()]),r=H(()=>t.align==="left"?"ltr:origin-top-left rtl:origin-top-right start-0":t.align==="right"?"ltr:origin-top-right rtl:origin-top-left end-0":"origin-top"),o=O(!1);return(n,l)=>(u(),f("div",ii,[i("div",{onClick:l[0]||(l[0]=m=>o.value=!o.value)},[Ye(n.$slots,"trigger")]),de(i("div",{class:"fixed inset-0 z-40",onClick:l[1]||(l[1]=m=>o.value=!1)},null,512),[[Ze,o.value]]),v(la,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:x(()=>[de(i("div",{class:G(["absolute z-50 mt-2 rounded-md shadow-lg",[a.value,r.value]]),style:{display:"none"},onClick:l[2]||(l[2]=m=>o.value=!1)},[i("div",{class:G(["rounded-md ring-1 ring-black ring-opacity-5",e.contentClasses])},[Ye(n.$slots,"content")],2)],2),[[Ze,o.value]])]),_:3})]))}},be={__name:"DropdownLink",props:{href:{type:String,required:!0},method:{type:String,default:"get"},as:{type:String,default:"a"}},setup(e){return(t,s)=>(u(),E(I(Ue),ua({href:e.href,method:e.method,as:e.as},t.$attrs,{class:"block w-full px-4 py-2 text-start text-sm leading-5 text-gray-700 transition duration-150 ease-in-out hover:bg-gray-100 focus:bg-gray-100 focus:outline-none"}),{default:x(()=>[Ye(t.$slots,"default")]),_:3},16,["href","method","as"]))}},Js={__name:"NavLink",props:{href:{type:String,required:!0},active:{type:Boolean}},setup(e){const t=e,s=H(()=>t.active?"inline-flex items-center px-1 pt-1 border-b-2 border-indigo-400 text-sm font-medium leading-5 text-gray-900 focus:outline-none focus:border-indigo-700 transition duration-150 ease-in-out":"inline-flex items-center px-1 pt-1 border-b-2 border-transparent text-sm font-medium leading-5 text-gray-500 hover:text-gray-700 hover:border-gray-300 focus:outline-none focus:text-gray-700 focus:border-gray-300 transition duration-150 ease-in-out");return(a,r)=>(u(),E(I(Ue),{href:e.href,class:G(s.value)},{default:x(()=>[Ye(a.$slots,"default")]),_:3},8,["href","class"]))}};/**
 * @license lucide-vue-next v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qs=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),li=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,s,a)=>a?a.toUpperCase():s.toLowerCase()),ui=e=>{const t=li(e);return t.charAt(0).toUpperCase()+t.slice(1)},di=(...e)=>e.filter((t,s,a)=>!!t&&t.trim()!==""&&a.indexOf(t)===s).join(" ").trim(),Ks=e=>e==="";/**
 * @license lucide-vue-next v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var kt={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};/**
 * @license lucide-vue-next v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ci=({name:e,iconNode:t,absoluteStrokeWidth:s,"absolute-stroke-width":a,strokeWidth:r,"stroke-width":o,size:n=kt.width,color:l=kt.stroke,...m},{slots:c})=>hs("svg",{...kt,...m,width:n,height:n,stroke:l,"stroke-width":Ks(s)||Ks(a)||s===!0||a===!0?Number(r||o||kt["stroke-width"])*24/Number(n):r||o||kt["stroke-width"],class:di("lucide",m.class,...e?[`lucide-${Qs(ui(e))}-icon`,`lucide-${Qs(e)}`]:["lucide-icon"])},[...t.map(p=>hs(...p)),...c.default?[c.default()]:[]]);/**
 * @license lucide-vue-next v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fi=(e,t)=>(s,{slots:a,attrs:r})=>hs(ci,{...r,...s,iconNode:t,name:e},a);/**
 * @license lucide-vue-next v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mi=fi("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]),hi={class:"hidden sm:flex sm:items-center"},vi={__name:"AdminDropdown",setup(e){const{canDo:t}=xs(),s=t("manage_projects");t("compose_emails"),t("approve_emails");const a=t("create_users");t("manage_roles");const r=t("manage_task_types"),o=t("create_clients");return(n,l)=>(u(),f("div",hi,[v(ma,{align:"right",width:"48"},{trigger:x(()=>l[0]||(l[0]=[i("span",{class:"inline-flex rounded-md"},[i("button",{type:"button",class:"inline-flex items-center rounded-md border border-transparent bg-white px-3 py-2 text-sm font-medium leading-4 text-gray-500 transition duration-150 ease-in-out hover:text-gray-700 focus:outline-none"},[T(" Admin "),i("svg",{class:"ms-2 -me-0.5 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[i("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])])],-1)])),content:x(()=>[I(s)?(u(),E(be,{key:0,href:n.route("projects.index"),active:n.route().current("projects.index")},{default:x(()=>l[1]||(l[1]=[T(" Projects ",-1)])),_:1,__:[1]},8,["href","active"])):b("",!0),I(a)?(u(),E(be,{key:1,href:n.route("availability.index"),active:n.route().current("availability.index")},{default:x(()=>l[2]||(l[2]=[T(" Weekly Availability ",-1)])),_:1,__:[2]},8,["href","active"])):b("",!0),I(o)?(u(),E(be,{key:2,href:n.route("clients.index"),active:n.route().current("clients.index")},{default:x(()=>l[3]||(l[3]=[T(" Clients ",-1)])),_:1,__:[3]},8,["href","active"])):b("",!0),I(a)?(u(),E(be,{key:3,href:n.route("users.index"),active:n.route().current("users.index")},{default:x(()=>l[4]||(l[4]=[T(" Users ",-1)])),_:1,__:[4]},8,["href","active"])):b("",!0),I(r)?(u(),E(be,{key:4,href:n.route("task-types.index"),active:n.route().current("task-types.index")},{default:x(()=>l[5]||(l[5]=[T(" Task Types ",-1)])),_:1,__:[5]},8,["href","active"])):b("",!0),I(t)("manage_email_templates")?(u(),E(be,{key:5,href:n.route("email-templates.index"),active:n.route().current("email-templates.index")},{default:x(()=>l[6]||(l[6]=[T(" Email Templates ",-1)])),_:1,__:[6]},8,["href","active"])):b("",!0),I(t)("manage_placeholder_definitions")?(u(),E(be,{key:6,href:n.route("placeholder-definitions.index"),active:n.route().current("placeholder-definitions.index")},{default:x(()=>l[7]||(l[7]=[T(" Placeholder Definitions ",-1)])),_:1,__:[7]},8,["href","active"])):b("",!0),I(t)("manage_roles")?(u(),E(be,{key:7,href:n.route("admin.roles.index")},{default:x(()=>l[8]||(l[8]=[T(" Manage Roles ",-1)])),_:1,__:[8]},8,["href"])):b("",!0),I(t)("manage_permissions")?(u(),E(be,{key:8,href:n.route("admin.permissions.index")},{default:x(()=>l[9]||(l[9]=[T(" Manage Permissions ",-1)])),_:1,__:[9]},8,["href"])):b("",!0)]),_:1})]))}},gi={class:"relative ms-3"},yi={class:"inline-flex rounded-md"},pi={type:"button",class:"inline-flex items-center rounded-md border border-transparent bg-white px-3 py-2 text-sm font-medium leading-4 text-gray-500 transition duration-150 ease-in-out hover:text-gray-700 focus:outline-none"},_i={__name:"UserDropdown",emits:["logoutSuccess","logoutError"],setup(e,{emit:t}){const s=H(()=>Ot().props.auth.user),a=t,r=()=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization,a("logoutSuccess")},o=n=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization,window.location.href="/login",a("logoutError",n)};return(n,l)=>(u(),f("div",gi,[v(ma,{align:"right",width:"48"},{trigger:x(()=>{var m;return[i("span",yi,[i("button",pi,[T(P(s.value.name)+" ("+P((m=s.value.role_data)==null?void 0:m.name)+") ",1),l[0]||(l[0]=i("svg",{class:"ms-2 -me-0.5 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[i("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1))])])]}),content:x(()=>[v(be,{href:n.route("profile.edit")},{default:x(()=>l[1]||(l[1]=[T(" Profile ",-1)])),_:1,__:[1]},8,["href"]),v(be,{href:n.route("logout"),method:"post",as:"button",onSuccess:r,onError:o},{default:x(()=>l[2]||(l[2]=[T(" Log Out ",-1)])),_:1,__:[2]},8,["href"])]),_:1})]))}},ki={class:"border-b border-gray-100 bg-white z-10 relative"},wi={class:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8"},bi={class:"flex h-16 justify-between"},xi={class:"flex"},Si={class:"flex shrink-0 items-center"},Di={class:"hidden space-x-8 sm:-my-px sm:ms-10 sm:flex"},Mi={class:"hidden sm:ms-6 sm:flex sm:items-center"},Ti={key:0,class:"absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-red-100 transform translate-x-1/2 -translate-y-1/2 bg-red-600 rounded-full"},$i={class:"-me-2 flex items-center sm:hidden"},Ci={class:"h-6 w-6",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24"},Yi={__name:"TopNavigation",props:{unreadNotificationCount:{type:Number,default:0}},emits:["openCreateTaskModal","openAddResource","openNotificationsSidebar"],setup(e,{emit:t}){const s=t,a=O(!1);H(()=>Ot().props.auth.user);const{canDo:r}=xs(),o=r("manage_roles");return(n,l)=>(u(),f("nav",ki,[i("div",wi,[i("div",bi,[i("div",xi,[i("div",Si,[v(I(Ue),{href:n.route("dashboard")},{default:x(()=>[v(_r,{class:"block h-16 w-auto fill-current text-gray-800"})]),_:1},8,["href"])]),i("div",Di,[v(Js,{href:n.route("dashboard"),active:n.route().current("dashboard")},{default:x(()=>l[4]||(l[4]=[T(" Dashboard ",-1)])),_:1,__:[4]},8,["href","active"]),I(r)("view_emails")?(u(),E(Js,{key:0,href:n.route("inbox"),active:n.route().current("inbox")},{default:x(()=>l[5]||(l[5]=[T(" Inbox ",-1)])),_:1,__:[5]},8,["href","active"])):b("",!0),I(o)?(u(),E(vi,{key:1})):b("",!0)])]),i("div",Mi,[v(ve,{type:"button",onClick:l[0]||(l[0]=m=>s("openCreateTaskModal")),class:"mr-4 px-4 py-2 text-sm"},{default:x(()=>l[6]||(l[6]=[T(" Add Task ",-1)])),_:1,__:[6]}),v(ve,{type:"button",onClick:l[1]||(l[1]=m=>s("openAddResource")),class:"mr-4 px-4 py-2 text-sm"},{default:x(()=>l[7]||(l[7]=[T(" Add Resource ",-1)])),_:1,__:[7]}),i("button",{onClick:l[2]||(l[2]=m=>s("openNotificationsSidebar")),class:"relative flex-shrink-0 text-gray-400 hover:text-gray-600 p-1 rounded-full transition-colors duration-200 mr-4","aria-label":"View all notifications"},[v(I(mi),{class:"h-6 w-6"}),e.unreadNotificationCount>0?(u(),f("span",Ti,P(e.unreadNotificationCount),1)):b("",!0)]),v(_i)]),i("div",$i,[i("button",{onClick:l[3]||(l[3]=m=>a.value=!a.value),class:"inline-flex items-center justify-center rounded-md p-2 text-gray-400 transition duration-150 ease-in-out hover:bg-gray-100 hover:text-gray-500 focus:bg-gray-100 focus:text-gray-500 focus:outline-none"},[(u(),f("svg",Ci,[i("path",{class:G({hidden:a.value,"inline-flex":!a.value}),"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},null,2),i("path",{class:G({hidden:!a.value,"inline-flex":a.value}),"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,2)]))])])])])]))}},ie={__name:"ResponsiveNavLink",props:{href:{type:String,required:!0},active:{type:Boolean},method:{type:String,default:"get"},as:{type:String,default:"a"}},setup(e){const t=e,s=H(()=>t.active?"block w-full ps-3 pe-4 py-2 border-l-4 border-indigo-400 text-start text-base font-medium text-indigo-700 bg-indigo-50 focus:outline-none focus:text-indigo-800 focus:bg-indigo-100 focus:border-indigo-700 transition duration-150 ease-in-out":"block w-full ps-3 pe-4 py-2 border-l-4 border-transparent text-start text-base font-medium text-gray-600 hover:text-gray-800 hover:bg-gray-50 hover:border-gray-300 focus:outline-none focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300 transition duration-150 ease-in-out");return(a,r)=>(u(),E(I(Ue),ua({href:e.href,method:e.method,as:e.as},a.$attrs,{class:s.value}),{default:x(()=>[Ye(a.$slots,"default")]),_:3},16,["href","method","as","class"]))}},Pi={class:"space-y-1 pb-3 pt-2"},Oi={key:0,class:"mt-3 space-y-1"},Ni={class:"border-t border-gray-200 pb-1 pt-4"},Ii={class:"px-4"},Ai={class:"text-base font-medium text-gray-800"},Ei={class:"text-sm font-medium text-gray-500"},Ri={class:"text-sm font-medium text-gray-500 capitalize"},Ui={class:"mt-3 space-y-1"},ji={__name:"MobileNavigation",props:{showingNavigationDropdown:{type:Boolean,required:!0},unreadNotificationCount:{type:Number,default:0}},emits:["openCreateTaskModal","openAddResource","openNotificationsSidebar","logoutSuccess","logoutError"],setup(e,{emit:t}){const s=t,a=H(()=>Ot().props.auth.user),{canDo:r}=xs(),o=r("manage_projects"),n=r("compose_emails"),l=r("approve_emails"),m=r("create_users"),c=r("manage_roles"),p=r("manage_task_types"),g=r("create_clients"),$=()=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization,s("logoutSuccess")},j=N=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization,window.location.href="/login",s("logoutError",N)};return(N,k)=>{var S;return u(),f("div",{class:G([{block:e.showingNavigationDropdown,hidden:!e.showingNavigationDropdown},"sm:hidden"])},[i("div",Pi,[I(c)?(u(),f("div",Oi,[k[18]||(k[18]=i("div",{class:"px-4 font-medium text-base text-gray-800"},"Admin",-1)),v(ie,{href:N.route("dashboard"),active:N.route().current("dashboard")},{default:x(()=>k[3]||(k[3]=[T(" Dashboard ",-1)])),_:1,__:[3]},8,["href","active"]),I(r)("view_emails")?(u(),E(ie,{key:0,href:N.route("inbox"),active:N.route().current("inbox")},{default:x(()=>k[4]||(k[4]=[T(" Inbox ",-1)])),_:1,__:[4]},8,["href","active"])):b("",!0),I(g)?(u(),E(ie,{key:1,href:N.route("clients.index"),active:N.route().current("clients.index")},{default:x(()=>k[5]||(k[5]=[T(" Clients ",-1)])),_:1,__:[5]},8,["href","active"])):b("",!0),I(o)?(u(),E(ie,{key:2,href:N.route("projects.index"),active:N.route().current("projects.index")},{default:x(()=>k[6]||(k[6]=[T(" Projects ",-1)])),_:1,__:[6]},8,["href","active"])):b("",!0),I(m)?(u(),E(ie,{key:3,href:N.route("users.index"),active:N.route().current("users.index")},{default:x(()=>k[7]||(k[7]=[T(" Users ",-1)])),_:1,__:[7]},8,["href","active"])):b("",!0),I(n)?(u(),E(ie,{key:4,href:N.route("emails.compose"),active:N.route().current("emails.compose")},{default:x(()=>k[8]||(k[8]=[T(" Compose Email ",-1)])),_:1,__:[8]},8,["href","active"])):b("",!0),I(l)?(u(),E(ie,{key:5,href:N.route("emails.pending"),active:N.route().current("emails.pending")},{default:x(()=>k[9]||(k[9]=[T(" Approve Emails ",-1)])),_:1,__:[9]},8,["href","active"])):b("",!0),I(n)?(u(),E(ie,{key:6,href:N.route("emails.rejected"),active:N.route().current("emails.rejected")},{default:x(()=>k[10]||(k[10]=[T(" Rejected Emails ",-1)])),_:1,__:[10]},8,["href","active"])):b("",!0),I(m)?(u(),E(ie,{key:7,href:N.route("availability.index"),active:N.route().current("availability.index")},{default:x(()=>k[11]||(k[11]=[T(" Weekly Availability ",-1)])),_:1,__:[11]},8,["href","active"])):b("",!0),I(r)("manage_roles")?(u(),E(ie,{key:8,href:N.route("admin.roles.index"),active:N.route().current("admin.roles.index")},{default:x(()=>k[12]||(k[12]=[T(" Manage Roles ",-1)])),_:1,__:[12]},8,["href","active"])):b("",!0),I(r)("manage_permissions")?(u(),E(ie,{key:9,href:N.route("admin.permissions.index"),active:N.route().current("admin.permissions.index")},{default:x(()=>k[13]||(k[13]=[T(" Manage Permissions ",-1)])),_:1,__:[13]},8,["href","active"])):b("",!0),I(r)("manage_bonus_configuration")?(u(),E(ie,{key:10,href:N.route("bonus-configuration.index"),active:N.route().current("bonus-configuration.index")},{default:x(()=>k[14]||(k[14]=[T(" Bonus Configuration ",-1)])),_:1,__:[14]},8,["href","active"])):b("",!0),I(p)?(u(),E(ie,{key:11,href:N.route("task-types.index"),active:N.route().current("task-types.index")},{default:x(()=>k[15]||(k[15]=[T(" Task Types ",-1)])),_:1,__:[15]},8,["href","active"])):b("",!0),I(r)("manage_email_templates")?(u(),E(ie,{key:12,href:N.route("email-templates.index"),active:N.route().current("email-templates.index")},{default:x(()=>k[16]||(k[16]=[T(" Email Templates ",-1)])),_:1,__:[16]},8,["href","active"])):b("",!0),I(r)("manage_placeholder_definitions")?(u(),E(ie,{key:13,href:N.route("placeholder-definitions.index"),active:N.route().current("placeholder-definitions.index")},{default:x(()=>k[17]||(k[17]=[T(" Placeholder Definitions ",-1)])),_:1,__:[17]},8,["href","active"])):b("",!0)])):b("",!0)]),i("div",Ni,[i("div",Ii,[i("div",Ai,P(a.value.name),1),i("div",Ei,P(a.value.email),1),i("div",Ri,P((S=a.value.role_data)==null?void 0:S.name),1)]),i("div",Ui,[v(ie,{as:"button",onClick:k[0]||(k[0]=y=>s("openCreateTaskModal"))},{default:x(()=>k[19]||(k[19]=[T(" Add Task ",-1)])),_:1,__:[19]}),v(ie,{as:"button",onClick:k[1]||(k[1]=y=>s("openAddResource"))},{default:x(()=>k[20]||(k[20]=[T(" Add Resource ",-1)])),_:1,__:[20]}),v(ie,{as:"button",onClick:k[2]||(k[2]=y=>s("openNotificationsSidebar"))},{default:x(()=>[T(" Notifications ("+P(e.unreadNotificationCount)+") ",1)]),_:1}),v(ie,{href:N.route("profile.edit")},{default:x(()=>k[21]||(k[21]=[T(" Profile ",-1)])),_:1,__:[21]},8,["href"]),v(ie,{href:N.route("logout"),method:"post",as:"button",onSuccess:$,onError:j},{default:x(()=>k[22]||(k[22]=[T(" Log Out ",-1)])),_:1,__:[22]},8,["href"])])])],2)}}};//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var ha;function M(){return ha.apply(null,arguments)}function Wi(e){ha=e}function Se(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function st(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function B(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Ds(e){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(e).length===0;var t;for(t in e)if(B(e,t))return!1;return!0}function he(e){return e===void 0}function Be(e){return typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]"}function Nt(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function va(e,t){var s=[],a,r=e.length;for(a=0;a<r;++a)s.push(t(e[a],a));return s}function Je(e,t){for(var s in t)B(t,s)&&(e[s]=t[s]);return B(t,"toString")&&(e.toString=t.toString),B(t,"valueOf")&&(e.valueOf=t.valueOf),e}function Ne(e,t,s,a){return Ua(e,t,s,a,!0).utc()}function Li(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function U(e){return e._pf==null&&(e._pf=Li()),e._pf}var vs;Array.prototype.some?vs=Array.prototype.some:vs=function(e){var t=Object(this),s=t.length>>>0,a;for(a=0;a<s;a++)if(a in t&&e.call(this,t[a],a,t))return!0;return!1};function Ms(e){var t=null,s=!1,a=e._d&&!isNaN(e._d.getTime());if(a&&(t=U(e),s=vs.call(t.parsedDateParts,function(r){return r!=null}),a=t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&s),e._strict&&(a=a&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(e))e._isValid=a;else return a;return e._isValid}function Jt(e){var t=Ne(NaN);return e!=null?Je(U(t),e):U(t).userInvalidated=!0,t}var Xs=M.momentProperties=[],ds=!1;function Ts(e,t){var s,a,r,o=Xs.length;if(he(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),he(t._i)||(e._i=t._i),he(t._f)||(e._f=t._f),he(t._l)||(e._l=t._l),he(t._strict)||(e._strict=t._strict),he(t._tzm)||(e._tzm=t._tzm),he(t._isUTC)||(e._isUTC=t._isUTC),he(t._offset)||(e._offset=t._offset),he(t._pf)||(e._pf=U(t)),he(t._locale)||(e._locale=t._locale),o>0)for(s=0;s<o;s++)a=Xs[s],r=t[a],he(r)||(e[a]=r);return e}function It(e){Ts(this,e),this._d=new Date(e._d!=null?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),ds===!1&&(ds=!0,M.updateOffset(this),ds=!1)}function De(e){return e instanceof It||e!=null&&e._isAMomentObject!=null}function ga(e){M.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+e)}function ke(e,t){var s=!0;return Je(function(){if(M.deprecationHandler!=null&&M.deprecationHandler(null,e),s){var a=[],r,o,n,l=arguments.length;for(o=0;o<l;o++){if(r="",typeof arguments[o]=="object"){r+=`
[`+o+"] ";for(n in arguments[0])B(arguments[0],n)&&(r+=n+": "+arguments[0][n]+", ");r=r.slice(0,-2)}else r=arguments[o];a.push(r)}ga(e+`
Arguments: `+Array.prototype.slice.call(a).join("")+`
`+new Error().stack),s=!1}return t.apply(this,arguments)},t)}var ea={};function ya(e,t){M.deprecationHandler!=null&&M.deprecationHandler(e,t),ea[e]||(ga(t),ea[e]=!0)}M.suppressDeprecationWarnings=!1;M.deprecationHandler=null;function Ie(e){return typeof Function<"u"&&e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function Fi(e){var t,s;for(s in e)B(e,s)&&(t=e[s],Ie(t)?this[s]=t:this["_"+s]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function gs(e,t){var s=Je({},e),a;for(a in t)B(t,a)&&(st(e[a])&&st(t[a])?(s[a]={},Je(s[a],e[a]),Je(s[a],t[a])):t[a]!=null?s[a]=t[a]:delete s[a]);for(a in e)B(e,a)&&!B(t,a)&&st(e[a])&&(s[a]=Je({},s[a]));return s}function $s(e){e!=null&&this.set(e)}var ys;Object.keys?ys=Object.keys:ys=function(e){var t,s=[];for(t in e)B(e,t)&&s.push(t);return s};var Vi={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function Hi(e,t,s){var a=this._calendar[e]||this._calendar.sameElse;return Ie(a)?a.call(t,s):a}function Pe(e,t,s){var a=""+Math.abs(e),r=t-a.length,o=e>=0;return(o?s?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+a}var Cs=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Rt=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,cs={},lt={};function A(e,t,s,a){var r=a;typeof a=="string"&&(r=function(){return this[a]()}),e&&(lt[e]=r),t&&(lt[t[0]]=function(){return Pe(r.apply(this,arguments),t[1],t[2])}),s&&(lt[s]=function(){return this.localeData().ordinal(r.apply(this,arguments),e)})}function Bi(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function zi(e){var t=e.match(Cs),s,a;for(s=0,a=t.length;s<a;s++)lt[t[s]]?t[s]=lt[t[s]]:t[s]=Bi(t[s]);return function(r){var o="",n;for(n=0;n<a;n++)o+=Ie(t[n])?t[n].call(r,e):t[n];return o}}function jt(e,t){return e.isValid()?(t=pa(t,e.localeData()),cs[t]=cs[t]||zi(t),cs[t](e)):e.localeData().invalidDate()}function pa(e,t){var s=5;function a(r){return t.longDateFormat(r)||r}for(Rt.lastIndex=0;s>=0&&Rt.test(e);)e=e.replace(Rt,a),Rt.lastIndex=0,s-=1;return e}var Gi={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function qi(e){var t=this._longDateFormat[e],s=this._longDateFormat[e.toUpperCase()];return t||!s?t:(this._longDateFormat[e]=s.match(Cs).map(function(a){return a==="MMMM"||a==="MM"||a==="DD"||a==="dddd"?a.slice(1):a}).join(""),this._longDateFormat[e])}var Zi="Invalid date";function Ji(){return this._invalidDate}var Qi="%d",Ki=/\d{1,2}/;function Xi(e){return this._ordinal.replace("%d",e)}var el={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function tl(e,t,s,a){var r=this._relativeTime[s];return Ie(r)?r(e,t,s,a):r.replace(/%d/i,e)}function sl(e,t){var s=this._relativeTime[e>0?"future":"past"];return Ie(s)?s(t):s.replace(/%s/i,t)}var ta={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function we(e){return typeof e=="string"?ta[e]||ta[e.toLowerCase()]:void 0}function Ys(e){var t={},s,a;for(a in e)B(e,a)&&(s=we(a),s&&(t[s]=e[a]));return t}var al={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function rl(e){var t=[],s;for(s in e)B(e,s)&&t.push({unit:s,priority:al[s]});return t.sort(function(a,r){return a.priority-r.priority}),t}var _a=/\d/,pe=/\d\d/,ka=/\d{3}/,Ps=/\d{4}/,Qt=/[+-]?\d{6}/,te=/\d\d?/,wa=/\d\d\d\d?/,ba=/\d\d\d\d\d\d?/,Kt=/\d{1,3}/,Os=/\d{1,4}/,Xt=/[+-]?\d{1,6}/,ft=/\d+/,es=/[+-]?\d+/,ol=/Z|[+-]\d\d:?\d\d/gi,ts=/Z|[+-]\d\d(?::?\d\d)?/gi,nl=/[+-]?\d+(\.\d{1,3})?/,At=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,mt=/^[1-9]\d?/,Ns=/^([1-9]\d|\d)/,Ft;Ft={};function C(e,t,s){Ft[e]=Ie(t)?t:function(a,r){return a&&s?s:t}}function il(e,t){return B(Ft,e)?Ft[e](t._strict,t._locale):new RegExp(ll(e))}function ll(e){return Ve(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,s,a,r,o){return s||a||r||o}))}function Ve(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function _e(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function F(e){var t=+e,s=0;return t!==0&&isFinite(t)&&(s=_e(t)),s}var ps={};function Z(e,t){var s,a=t,r;for(typeof e=="string"&&(e=[e]),Be(t)&&(a=function(o,n){n[t]=F(o)}),r=e.length,s=0;s<r;s++)ps[e[s]]=a}function Et(e,t){Z(e,function(s,a,r,o){r._w=r._w||{},t(s,r._w,r,o)})}function ul(e,t,s){t!=null&&B(ps,e)&&ps[e](t,s._a,s,e)}function ss(e){return e%4===0&&e%100!==0||e%400===0}var fe=0,je=1,Ce=2,le=3,xe=4,We=5,tt=6,dl=7,cl=8;A("Y",0,0,function(){var e=this.year();return e<=9999?Pe(e,4):"+"+e});A(0,["YY",2],0,function(){return this.year()%100});A(0,["YYYY",4],0,"year");A(0,["YYYYY",5],0,"year");A(0,["YYYYYY",6,!0],0,"year");C("Y",es);C("YY",te,pe);C("YYYY",Os,Ps);C("YYYYY",Xt,Qt);C("YYYYYY",Xt,Qt);Z(["YYYYY","YYYYYY"],fe);Z("YYYY",function(e,t){t[fe]=e.length===2?M.parseTwoDigitYear(e):F(e)});Z("YY",function(e,t){t[fe]=M.parseTwoDigitYear(e)});Z("Y",function(e,t){t[fe]=parseInt(e,10)});function St(e){return ss(e)?366:365}M.parseTwoDigitYear=function(e){return F(e)+(F(e)>68?1900:2e3)};var xa=ht("FullYear",!0);function fl(){return ss(this.year())}function ht(e,t){return function(s){return s!=null?(Sa(this,e,s),M.updateOffset(this,t),this):Tt(this,e)}}function Tt(e,t){if(!e.isValid())return NaN;var s=e._d,a=e._isUTC;switch(t){case"Milliseconds":return a?s.getUTCMilliseconds():s.getMilliseconds();case"Seconds":return a?s.getUTCSeconds():s.getSeconds();case"Minutes":return a?s.getUTCMinutes():s.getMinutes();case"Hours":return a?s.getUTCHours():s.getHours();case"Date":return a?s.getUTCDate():s.getDate();case"Day":return a?s.getUTCDay():s.getDay();case"Month":return a?s.getUTCMonth():s.getMonth();case"FullYear":return a?s.getUTCFullYear():s.getFullYear();default:return NaN}}function Sa(e,t,s){var a,r,o,n,l;if(!(!e.isValid()||isNaN(s))){switch(a=e._d,r=e._isUTC,t){case"Milliseconds":return void(r?a.setUTCMilliseconds(s):a.setMilliseconds(s));case"Seconds":return void(r?a.setUTCSeconds(s):a.setSeconds(s));case"Minutes":return void(r?a.setUTCMinutes(s):a.setMinutes(s));case"Hours":return void(r?a.setUTCHours(s):a.setHours(s));case"Date":return void(r?a.setUTCDate(s):a.setDate(s));case"FullYear":break;default:return}o=s,n=e.month(),l=e.date(),l=l===29&&n===1&&!ss(o)?28:l,r?a.setUTCFullYear(o,n,l):a.setFullYear(o,n,l)}}function ml(e){return e=we(e),Ie(this[e])?this[e]():this}function hl(e,t){if(typeof e=="object"){e=Ys(e);var s=rl(e),a,r=s.length;for(a=0;a<r;a++)this[s[a].unit](e[s[a].unit])}else if(e=we(e),Ie(this[e]))return this[e](t);return this}function vl(e,t){return(e%t+t)%t}var oe;Array.prototype.indexOf?oe=Array.prototype.indexOf:oe=function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1};function Is(e,t){if(isNaN(e)||isNaN(t))return NaN;var s=vl(t,12);return e+=(t-s)/12,s===1?ss(e)?29:28:31-s%7%2}A("M",["MM",2],"Mo",function(){return this.month()+1});A("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)});A("MMMM",0,0,function(e){return this.localeData().months(this,e)});C("M",te,mt);C("MM",te,pe);C("MMM",function(e,t){return t.monthsShortRegex(e)});C("MMMM",function(e,t){return t.monthsRegex(e)});Z(["M","MM"],function(e,t){t[je]=F(e)-1});Z(["MMM","MMMM"],function(e,t,s,a){var r=s._locale.monthsParse(e,a,s._strict);r!=null?t[je]=r:U(s).invalidMonth=e});var gl="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Da="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Ma=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,yl=At,pl=At;function _l(e,t){return e?Se(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||Ma).test(t)?"format":"standalone"][e.month()]:Se(this._months)?this._months:this._months.standalone}function kl(e,t){return e?Se(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Ma.test(t)?"format":"standalone"][e.month()]:Se(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function wl(e,t,s){var a,r,o,n=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],a=0;a<12;++a)o=Ne([2e3,a]),this._shortMonthsParse[a]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[a]=this.months(o,"").toLocaleLowerCase();return s?t==="MMM"?(r=oe.call(this._shortMonthsParse,n),r!==-1?r:null):(r=oe.call(this._longMonthsParse,n),r!==-1?r:null):t==="MMM"?(r=oe.call(this._shortMonthsParse,n),r!==-1?r:(r=oe.call(this._longMonthsParse,n),r!==-1?r:null)):(r=oe.call(this._longMonthsParse,n),r!==-1?r:(r=oe.call(this._shortMonthsParse,n),r!==-1?r:null))}function bl(e,t,s){var a,r,o;if(this._monthsParseExact)return wl.call(this,e,t,s);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),a=0;a<12;a++){if(r=Ne([2e3,a]),s&&!this._longMonthsParse[a]&&(this._longMonthsParse[a]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[a]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),!s&&!this._monthsParse[a]&&(o="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[a]=new RegExp(o.replace(".",""),"i")),s&&t==="MMMM"&&this._longMonthsParse[a].test(e))return a;if(s&&t==="MMM"&&this._shortMonthsParse[a].test(e))return a;if(!s&&this._monthsParse[a].test(e))return a}}function Ta(e,t){if(!e.isValid())return e;if(typeof t=="string"){if(/^\d+$/.test(t))t=F(t);else if(t=e.localeData().monthsParse(t),!Be(t))return e}var s=t,a=e.date();return a=a<29?a:Math.min(a,Is(e.year(),s)),e._isUTC?e._d.setUTCMonth(s,a):e._d.setMonth(s,a),e}function $a(e){return e!=null?(Ta(this,e),M.updateOffset(this,!0),this):Tt(this,"Month")}function xl(){return Is(this.year(),this.month())}function Sl(e){return this._monthsParseExact?(B(this,"_monthsRegex")||Ca.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(B(this,"_monthsShortRegex")||(this._monthsShortRegex=yl),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function Dl(e){return this._monthsParseExact?(B(this,"_monthsRegex")||Ca.call(this),e?this._monthsStrictRegex:this._monthsRegex):(B(this,"_monthsRegex")||(this._monthsRegex=pl),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function Ca(){function e(m,c){return c.length-m.length}var t=[],s=[],a=[],r,o,n,l;for(r=0;r<12;r++)o=Ne([2e3,r]),n=Ve(this.monthsShort(o,"")),l=Ve(this.months(o,"")),t.push(n),s.push(l),a.push(l),a.push(n);t.sort(e),s.sort(e),a.sort(e),this._monthsRegex=new RegExp("^("+a.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+t.join("|")+")","i")}function Ml(e,t,s,a,r,o,n){var l;return e<100&&e>=0?(l=new Date(e+400,t,s,a,r,o,n),isFinite(l.getFullYear())&&l.setFullYear(e)):l=new Date(e,t,s,a,r,o,n),l}function $t(e){var t,s;return e<100&&e>=0?(s=Array.prototype.slice.call(arguments),s[0]=e+400,t=new Date(Date.UTC.apply(null,s)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function Vt(e,t,s){var a=7+t-s,r=(7+$t(e,0,a).getUTCDay()-t)%7;return-r+a-1}function Ya(e,t,s,a,r){var o=(7+s-a)%7,n=Vt(e,a,r),l=1+7*(t-1)+o+n,m,c;return l<=0?(m=e-1,c=St(m)+l):l>St(e)?(m=e+1,c=l-St(e)):(m=e,c=l),{year:m,dayOfYear:c}}function Ct(e,t,s){var a=Vt(e.year(),t,s),r=Math.floor((e.dayOfYear()-a-1)/7)+1,o,n;return r<1?(n=e.year()-1,o=r+He(n,t,s)):r>He(e.year(),t,s)?(o=r-He(e.year(),t,s),n=e.year()+1):(n=e.year(),o=r),{week:o,year:n}}function He(e,t,s){var a=Vt(e,t,s),r=Vt(e+1,t,s);return(St(e)-a+r)/7}A("w",["ww",2],"wo","week");A("W",["WW",2],"Wo","isoWeek");C("w",te,mt);C("ww",te,pe);C("W",te,mt);C("WW",te,pe);Et(["w","ww","W","WW"],function(e,t,s,a){t[a.substr(0,1)]=F(e)});function Tl(e){return Ct(e,this._week.dow,this._week.doy).week}var $l={dow:0,doy:6};function Cl(){return this._week.dow}function Yl(){return this._week.doy}function Pl(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function Ol(e){var t=Ct(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}A("d",0,"do","day");A("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)});A("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)});A("dddd",0,0,function(e){return this.localeData().weekdays(this,e)});A("e",0,0,"weekday");A("E",0,0,"isoWeekday");C("d",te);C("e",te);C("E",te);C("dd",function(e,t){return t.weekdaysMinRegex(e)});C("ddd",function(e,t){return t.weekdaysShortRegex(e)});C("dddd",function(e,t){return t.weekdaysRegex(e)});Et(["dd","ddd","dddd"],function(e,t,s,a){var r=s._locale.weekdaysParse(e,a,s._strict);r!=null?t.d=r:U(s).invalidWeekday=e});Et(["d","e","E"],function(e,t,s,a){t[a]=F(e)});function Nl(e,t){return typeof e!="string"?e:isNaN(e)?(e=t.weekdaysParse(e),typeof e=="number"?e:null):parseInt(e,10)}function Il(e,t){return typeof e=="string"?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function As(e,t){return e.slice(t,7).concat(e.slice(0,t))}var Al="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Pa="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),El="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Rl=At,Ul=At,jl=At;function Wl(e,t){var s=Se(this._weekdays)?this._weekdays:this._weekdays[e&&e!==!0&&this._weekdays.isFormat.test(t)?"format":"standalone"];return e===!0?As(s,this._week.dow):e?s[e.day()]:s}function Ll(e){return e===!0?As(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function Fl(e){return e===!0?As(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function Vl(e,t,s){var a,r,o,n=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],a=0;a<7;++a)o=Ne([2e3,1]).day(a),this._minWeekdaysParse[a]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[a]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[a]=this.weekdays(o,"").toLocaleLowerCase();return s?t==="dddd"?(r=oe.call(this._weekdaysParse,n),r!==-1?r:null):t==="ddd"?(r=oe.call(this._shortWeekdaysParse,n),r!==-1?r:null):(r=oe.call(this._minWeekdaysParse,n),r!==-1?r:null):t==="dddd"?(r=oe.call(this._weekdaysParse,n),r!==-1||(r=oe.call(this._shortWeekdaysParse,n),r!==-1)?r:(r=oe.call(this._minWeekdaysParse,n),r!==-1?r:null)):t==="ddd"?(r=oe.call(this._shortWeekdaysParse,n),r!==-1||(r=oe.call(this._weekdaysParse,n),r!==-1)?r:(r=oe.call(this._minWeekdaysParse,n),r!==-1?r:null)):(r=oe.call(this._minWeekdaysParse,n),r!==-1||(r=oe.call(this._weekdaysParse,n),r!==-1)?r:(r=oe.call(this._shortWeekdaysParse,n),r!==-1?r:null))}function Hl(e,t,s){var a,r,o;if(this._weekdaysParseExact)return Vl.call(this,e,t,s);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),a=0;a<7;a++){if(r=Ne([2e3,1]).day(a),s&&!this._fullWeekdaysParse[a]&&(this._fullWeekdaysParse[a]=new RegExp("^"+this.weekdays(r,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[a]=new RegExp("^"+this.weekdaysShort(r,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[a]=new RegExp("^"+this.weekdaysMin(r,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[a]||(o="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[a]=new RegExp(o.replace(".",""),"i")),s&&t==="dddd"&&this._fullWeekdaysParse[a].test(e))return a;if(s&&t==="ddd"&&this._shortWeekdaysParse[a].test(e))return a;if(s&&t==="dd"&&this._minWeekdaysParse[a].test(e))return a;if(!s&&this._weekdaysParse[a].test(e))return a}}function Bl(e){if(!this.isValid())return e!=null?this:NaN;var t=Tt(this,"Day");return e!=null?(e=Nl(e,this.localeData()),this.add(e-t,"d")):t}function zl(e){if(!this.isValid())return e!=null?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function Gl(e){if(!this.isValid())return e!=null?this:NaN;if(e!=null){var t=Il(e,this.localeData());return this.day(this.day()%7?t:t-7)}else return this.day()||7}function ql(e){return this._weekdaysParseExact?(B(this,"_weekdaysRegex")||Es.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(B(this,"_weekdaysRegex")||(this._weekdaysRegex=Rl),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function Zl(e){return this._weekdaysParseExact?(B(this,"_weekdaysRegex")||Es.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(B(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Ul),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Jl(e){return this._weekdaysParseExact?(B(this,"_weekdaysRegex")||Es.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(B(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=jl),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Es(){function e(p,g){return g.length-p.length}var t=[],s=[],a=[],r=[],o,n,l,m,c;for(o=0;o<7;o++)n=Ne([2e3,1]).day(o),l=Ve(this.weekdaysMin(n,"")),m=Ve(this.weekdaysShort(n,"")),c=Ve(this.weekdays(n,"")),t.push(l),s.push(m),a.push(c),r.push(l),r.push(m),r.push(c);t.sort(e),s.sort(e),a.sort(e),r.sort(e),this._weekdaysRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+t.join("|")+")","i")}function Rs(){return this.hours()%12||12}function Ql(){return this.hours()||24}A("H",["HH",2],0,"hour");A("h",["hh",2],0,Rs);A("k",["kk",2],0,Ql);A("hmm",0,0,function(){return""+Rs.apply(this)+Pe(this.minutes(),2)});A("hmmss",0,0,function(){return""+Rs.apply(this)+Pe(this.minutes(),2)+Pe(this.seconds(),2)});A("Hmm",0,0,function(){return""+this.hours()+Pe(this.minutes(),2)});A("Hmmss",0,0,function(){return""+this.hours()+Pe(this.minutes(),2)+Pe(this.seconds(),2)});function Oa(e,t){A(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}Oa("a",!0);Oa("A",!1);function Na(e,t){return t._meridiemParse}C("a",Na);C("A",Na);C("H",te,Ns);C("h",te,mt);C("k",te,mt);C("HH",te,pe);C("hh",te,pe);C("kk",te,pe);C("hmm",wa);C("hmmss",ba);C("Hmm",wa);C("Hmmss",ba);Z(["H","HH"],le);Z(["k","kk"],function(e,t,s){var a=F(e);t[le]=a===24?0:a});Z(["a","A"],function(e,t,s){s._isPm=s._locale.isPM(e),s._meridiem=e});Z(["h","hh"],function(e,t,s){t[le]=F(e),U(s).bigHour=!0});Z("hmm",function(e,t,s){var a=e.length-2;t[le]=F(e.substr(0,a)),t[xe]=F(e.substr(a)),U(s).bigHour=!0});Z("hmmss",function(e,t,s){var a=e.length-4,r=e.length-2;t[le]=F(e.substr(0,a)),t[xe]=F(e.substr(a,2)),t[We]=F(e.substr(r)),U(s).bigHour=!0});Z("Hmm",function(e,t,s){var a=e.length-2;t[le]=F(e.substr(0,a)),t[xe]=F(e.substr(a))});Z("Hmmss",function(e,t,s){var a=e.length-4,r=e.length-2;t[le]=F(e.substr(0,a)),t[xe]=F(e.substr(a,2)),t[We]=F(e.substr(r))});function Kl(e){return(e+"").toLowerCase().charAt(0)==="p"}var Xl=/[ap]\.?m?\.?/i,eu=ht("Hours",!0);function tu(e,t,s){return e>11?s?"pm":"PM":s?"am":"AM"}var Ia={calendar:Vi,longDateFormat:Gi,invalidDate:Zi,ordinal:Qi,dayOfMonthOrdinalParse:Ki,relativeTime:el,months:gl,monthsShort:Da,week:$l,weekdays:Al,weekdaysMin:El,weekdaysShort:Pa,meridiemParse:Xl},se={},wt={},Yt;function su(e,t){var s,a=Math.min(e.length,t.length);for(s=0;s<a;s+=1)if(e[s]!==t[s])return s;return a}function sa(e){return e&&e.toLowerCase().replace("_","-")}function au(e){for(var t=0,s,a,r,o;t<e.length;){for(o=sa(e[t]).split("-"),s=o.length,a=sa(e[t+1]),a=a?a.split("-"):null;s>0;){if(r=as(o.slice(0,s).join("-")),r)return r;if(a&&a.length>=s&&su(o,a)>=s-1)break;s--}t++}return Yt}function ru(e){return!!(e&&e.match("^[^/\\\\]*$"))}function as(e){var t=null,s;if(se[e]===void 0&&typeof module<"u"&&module&&module.exports&&ru(e))try{t=Yt._abbr,s=require,s("./locale/"+e),Ke(t)}catch{se[e]=null}return se[e]}function Ke(e,t){var s;return e&&(he(t)?s=ze(e):s=Us(e,t),s?Yt=s:typeof console<"u"&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),Yt._abbr}function Us(e,t){if(t!==null){var s,a=Ia;if(t.abbr=e,se[e]!=null)ya("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),a=se[e]._config;else if(t.parentLocale!=null)if(se[t.parentLocale]!=null)a=se[t.parentLocale]._config;else if(s=as(t.parentLocale),s!=null)a=s._config;else return wt[t.parentLocale]||(wt[t.parentLocale]=[]),wt[t.parentLocale].push({name:e,config:t}),null;return se[e]=new $s(gs(a,t)),wt[e]&&wt[e].forEach(function(r){Us(r.name,r.config)}),Ke(e),se[e]}else return delete se[e],null}function ou(e,t){if(t!=null){var s,a,r=Ia;se[e]!=null&&se[e].parentLocale!=null?se[e].set(gs(se[e]._config,t)):(a=as(e),a!=null&&(r=a._config),t=gs(r,t),a==null&&(t.abbr=e),s=new $s(t),s.parentLocale=se[e],se[e]=s),Ke(e)}else se[e]!=null&&(se[e].parentLocale!=null?(se[e]=se[e].parentLocale,e===Ke()&&Ke(e)):se[e]!=null&&delete se[e]);return se[e]}function ze(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Yt;if(!Se(e)){if(t=as(e),t)return t;e=[e]}return au(e)}function nu(){return ys(se)}function js(e){var t,s=e._a;return s&&U(e).overflow===-2&&(t=s[je]<0||s[je]>11?je:s[Ce]<1||s[Ce]>Is(s[fe],s[je])?Ce:s[le]<0||s[le]>24||s[le]===24&&(s[xe]!==0||s[We]!==0||s[tt]!==0)?le:s[xe]<0||s[xe]>59?xe:s[We]<0||s[We]>59?We:s[tt]<0||s[tt]>999?tt:-1,U(e)._overflowDayOfYear&&(t<fe||t>Ce)&&(t=Ce),U(e)._overflowWeeks&&t===-1&&(t=dl),U(e)._overflowWeekday&&t===-1&&(t=cl),U(e).overflow=t),e}var iu=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,lu=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,uu=/Z|[+-]\d\d(?::?\d\d)?/,Ut=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],fs=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],du=/^\/?Date\((-?\d+)/i,cu=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,fu={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Aa(e){var t,s,a=e._i,r=iu.exec(a)||lu.exec(a),o,n,l,m,c=Ut.length,p=fs.length;if(r){for(U(e).iso=!0,t=0,s=c;t<s;t++)if(Ut[t][1].exec(r[1])){n=Ut[t][0],o=Ut[t][2]!==!1;break}if(n==null){e._isValid=!1;return}if(r[3]){for(t=0,s=p;t<s;t++)if(fs[t][1].exec(r[3])){l=(r[2]||" ")+fs[t][0];break}if(l==null){e._isValid=!1;return}}if(!o&&l!=null){e._isValid=!1;return}if(r[4])if(uu.exec(r[4]))m="Z";else{e._isValid=!1;return}e._f=n+(l||"")+(m||""),Ls(e)}else e._isValid=!1}function mu(e,t,s,a,r,o){var n=[hu(e),Da.indexOf(t),parseInt(s,10),parseInt(a,10),parseInt(r,10)];return o&&n.push(parseInt(o,10)),n}function hu(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function vu(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function gu(e,t,s){if(e){var a=Pa.indexOf(e),r=new Date(t[0],t[1],t[2]).getDay();if(a!==r)return U(s).weekdayMismatch=!0,s._isValid=!1,!1}return!0}function yu(e,t,s){if(e)return fu[e];if(t)return 0;var a=parseInt(s,10),r=a%100,o=(a-r)/100;return o*60+r}function Ea(e){var t=cu.exec(vu(e._i)),s;if(t){if(s=mu(t[4],t[3],t[2],t[5],t[6],t[7]),!gu(t[1],s,e))return;e._a=s,e._tzm=yu(t[8],t[9],t[10]),e._d=$t.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),U(e).rfc2822=!0}else e._isValid=!1}function pu(e){var t=du.exec(e._i);if(t!==null){e._d=new Date(+t[1]);return}if(Aa(e),e._isValid===!1)delete e._isValid;else return;if(Ea(e),e._isValid===!1)delete e._isValid;else return;e._strict?e._isValid=!1:M.createFromInputFallback(e)}M.createFromInputFallback=ke("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});function nt(e,t,s){return e??t??s}function _u(e){var t=new Date(M.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function Ws(e){var t,s,a=[],r,o,n;if(!e._d){for(r=_u(e),e._w&&e._a[Ce]==null&&e._a[je]==null&&ku(e),e._dayOfYear!=null&&(n=nt(e._a[fe],r[fe]),(e._dayOfYear>St(n)||e._dayOfYear===0)&&(U(e)._overflowDayOfYear=!0),s=$t(n,0,e._dayOfYear),e._a[je]=s.getUTCMonth(),e._a[Ce]=s.getUTCDate()),t=0;t<3&&e._a[t]==null;++t)e._a[t]=a[t]=r[t];for(;t<7;t++)e._a[t]=a[t]=e._a[t]==null?t===2?1:0:e._a[t];e._a[le]===24&&e._a[xe]===0&&e._a[We]===0&&e._a[tt]===0&&(e._nextDay=!0,e._a[le]=0),e._d=(e._useUTC?$t:Ml).apply(null,a),o=e._useUTC?e._d.getUTCDay():e._d.getDay(),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[le]=24),e._w&&typeof e._w.d<"u"&&e._w.d!==o&&(U(e).weekdayMismatch=!0)}}function ku(e){var t,s,a,r,o,n,l,m,c;t=e._w,t.GG!=null||t.W!=null||t.E!=null?(o=1,n=4,s=nt(t.GG,e._a[fe],Ct(ee(),1,4).year),a=nt(t.W,1),r=nt(t.E,1),(r<1||r>7)&&(m=!0)):(o=e._locale._week.dow,n=e._locale._week.doy,c=Ct(ee(),o,n),s=nt(t.gg,e._a[fe],c.year),a=nt(t.w,c.week),t.d!=null?(r=t.d,(r<0||r>6)&&(m=!0)):t.e!=null?(r=t.e+o,(t.e<0||t.e>6)&&(m=!0)):r=o),a<1||a>He(s,o,n)?U(e)._overflowWeeks=!0:m!=null?U(e)._overflowWeekday=!0:(l=Ya(s,a,r,o,n),e._a[fe]=l.year,e._dayOfYear=l.dayOfYear)}M.ISO_8601=function(){};M.RFC_2822=function(){};function Ls(e){if(e._f===M.ISO_8601){Aa(e);return}if(e._f===M.RFC_2822){Ea(e);return}e._a=[],U(e).empty=!0;var t=""+e._i,s,a,r,o,n,l=t.length,m=0,c,p;for(r=pa(e._f,e._locale).match(Cs)||[],p=r.length,s=0;s<p;s++)o=r[s],a=(t.match(il(o,e))||[])[0],a&&(n=t.substr(0,t.indexOf(a)),n.length>0&&U(e).unusedInput.push(n),t=t.slice(t.indexOf(a)+a.length),m+=a.length),lt[o]?(a?U(e).empty=!1:U(e).unusedTokens.push(o),ul(o,a,e)):e._strict&&!a&&U(e).unusedTokens.push(o);U(e).charsLeftOver=l-m,t.length>0&&U(e).unusedInput.push(t),e._a[le]<=12&&U(e).bigHour===!0&&e._a[le]>0&&(U(e).bigHour=void 0),U(e).parsedDateParts=e._a.slice(0),U(e).meridiem=e._meridiem,e._a[le]=wu(e._locale,e._a[le],e._meridiem),c=U(e).era,c!==null&&(e._a[fe]=e._locale.erasConvertYear(c,e._a[fe])),Ws(e),js(e)}function wu(e,t,s){var a;return s==null?t:e.meridiemHour!=null?e.meridiemHour(t,s):(e.isPM!=null&&(a=e.isPM(s),a&&t<12&&(t+=12),!a&&t===12&&(t=0)),t)}function bu(e){var t,s,a,r,o,n,l=!1,m=e._f.length;if(m===0){U(e).invalidFormat=!0,e._d=new Date(NaN);return}for(r=0;r<m;r++)o=0,n=!1,t=Ts({},e),e._useUTC!=null&&(t._useUTC=e._useUTC),t._f=e._f[r],Ls(t),Ms(t)&&(n=!0),o+=U(t).charsLeftOver,o+=U(t).unusedTokens.length*10,U(t).score=o,l?o<a&&(a=o,s=t):(a==null||o<a||n)&&(a=o,s=t,n&&(l=!0));Je(e,s||t)}function xu(e){if(!e._d){var t=Ys(e._i),s=t.day===void 0?t.date:t.day;e._a=va([t.year,t.month,s,t.hour,t.minute,t.second,t.millisecond],function(a){return a&&parseInt(a,10)}),Ws(e)}}function Su(e){var t=new It(js(Ra(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function Ra(e){var t=e._i,s=e._f;return e._locale=e._locale||ze(e._l),t===null||s===void 0&&t===""?Jt({nullInput:!0}):(typeof t=="string"&&(e._i=t=e._locale.preparse(t)),De(t)?new It(js(t)):(Nt(t)?e._d=t:Se(s)?bu(e):s?Ls(e):Du(e),Ms(e)||(e._d=null),e))}function Du(e){var t=e._i;he(t)?e._d=new Date(M.now()):Nt(t)?e._d=new Date(t.valueOf()):typeof t=="string"?pu(e):Se(t)?(e._a=va(t.slice(0),function(s){return parseInt(s,10)}),Ws(e)):st(t)?xu(e):Be(t)?e._d=new Date(t):M.createFromInputFallback(e)}function Ua(e,t,s,a,r){var o={};return(t===!0||t===!1)&&(a=t,t=void 0),(s===!0||s===!1)&&(a=s,s=void 0),(st(e)&&Ds(e)||Se(e)&&e.length===0)&&(e=void 0),o._isAMomentObject=!0,o._useUTC=o._isUTC=r,o._l=s,o._i=e,o._f=t,o._strict=a,Su(o)}function ee(e,t,s,a){return Ua(e,t,s,a,!1)}var Mu=ke("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=ee.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:Jt()}),Tu=ke("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=ee.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:Jt()});function ja(e,t){var s,a;if(t.length===1&&Se(t[0])&&(t=t[0]),!t.length)return ee();for(s=t[0],a=1;a<t.length;++a)(!t[a].isValid()||t[a][e](s))&&(s=t[a]);return s}function $u(){var e=[].slice.call(arguments,0);return ja("isBefore",e)}function Cu(){var e=[].slice.call(arguments,0);return ja("isAfter",e)}var Yu=function(){return Date.now?Date.now():+new Date},bt=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Pu(e){var t,s=!1,a,r=bt.length;for(t in e)if(B(e,t)&&!(oe.call(bt,t)!==-1&&(e[t]==null||!isNaN(e[t]))))return!1;for(a=0;a<r;++a)if(e[bt[a]]){if(s)return!1;parseFloat(e[bt[a]])!==F(e[bt[a]])&&(s=!0)}return!0}function Ou(){return this._isValid}function Nu(){return Me(NaN)}function rs(e){var t=Ys(e),s=t.year||0,a=t.quarter||0,r=t.month||0,o=t.week||t.isoWeek||0,n=t.day||0,l=t.hour||0,m=t.minute||0,c=t.second||0,p=t.millisecond||0;this._isValid=Pu(t),this._milliseconds=+p+c*1e3+m*6e4+l*1e3*60*60,this._days=+n+o*7,this._months=+r+a*3+s*12,this._data={},this._locale=ze(),this._bubble()}function Wt(e){return e instanceof rs}function _s(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function Iu(e,t,s){var a=Math.min(e.length,t.length),r=Math.abs(e.length-t.length),o=0,n;for(n=0;n<a;n++)F(e[n])!==F(t[n])&&o++;return o+r}function Wa(e,t){A(e,0,0,function(){var s=this.utcOffset(),a="+";return s<0&&(s=-s,a="-"),a+Pe(~~(s/60),2)+t+Pe(~~s%60,2)})}Wa("Z",":");Wa("ZZ","");C("Z",ts);C("ZZ",ts);Z(["Z","ZZ"],function(e,t,s){s._useUTC=!0,s._tzm=Fs(ts,e)});var Au=/([\+\-]|\d\d)/gi;function Fs(e,t){var s=(t||"").match(e),a,r,o;return s===null?null:(a=s[s.length-1]||[],r=(a+"").match(Au)||["-",0,0],o=+(r[1]*60)+F(r[2]),o===0?0:r[0]==="+"?o:-o)}function Vs(e,t){var s,a;return t._isUTC?(s=t.clone(),a=(De(e)||Nt(e)?e.valueOf():ee(e).valueOf())-s.valueOf(),s._d.setTime(s._d.valueOf()+a),M.updateOffset(s,!1),s):ee(e).local()}function ks(e){return-Math.round(e._d.getTimezoneOffset())}M.updateOffset=function(){};function Eu(e,t,s){var a=this._offset||0,r;if(!this.isValid())return e!=null?this:NaN;if(e!=null){if(typeof e=="string"){if(e=Fs(ts,e),e===null)return this}else Math.abs(e)<16&&!s&&(e=e*60);return!this._isUTC&&t&&(r=ks(this)),this._offset=e,this._isUTC=!0,r!=null&&this.add(r,"m"),a!==e&&(!t||this._changeInProgress?Va(this,Me(e-a,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,M.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?a:ks(this)}function Ru(e,t){return e!=null?(typeof e!="string"&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function Uu(e){return this.utcOffset(0,e)}function ju(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(ks(this),"m")),this}function Wu(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var e=Fs(ol,this._i);e!=null?this.utcOffset(e):this.utcOffset(0,!0)}return this}function Lu(e){return this.isValid()?(e=e?ee(e).utcOffset():0,(this.utcOffset()-e)%60===0):!1}function Fu(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Vu(){if(!he(this._isDSTShifted))return this._isDSTShifted;var e={},t;return Ts(e,this),e=Ra(e),e._a?(t=e._isUTC?Ne(e._a):ee(e._a),this._isDSTShifted=this.isValid()&&Iu(e._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function Hu(){return this.isValid()?!this._isUTC:!1}function Bu(){return this.isValid()?this._isUTC:!1}function La(){return this.isValid()?this._isUTC&&this._offset===0:!1}var zu=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Gu=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Me(e,t){var s=e,a=null,r,o,n;return Wt(e)?s={ms:e._milliseconds,d:e._days,M:e._months}:Be(e)||!isNaN(+e)?(s={},t?s[t]=+e:s.milliseconds=+e):(a=zu.exec(e))?(r=a[1]==="-"?-1:1,s={y:0,d:F(a[Ce])*r,h:F(a[le])*r,m:F(a[xe])*r,s:F(a[We])*r,ms:F(_s(a[tt]*1e3))*r}):(a=Gu.exec(e))?(r=a[1]==="-"?-1:1,s={y:et(a[2],r),M:et(a[3],r),w:et(a[4],r),d:et(a[5],r),h:et(a[6],r),m:et(a[7],r),s:et(a[8],r)}):s==null?s={}:typeof s=="object"&&("from"in s||"to"in s)&&(n=qu(ee(s.from),ee(s.to)),s={},s.ms=n.milliseconds,s.M=n.months),o=new rs(s),Wt(e)&&B(e,"_locale")&&(o._locale=e._locale),Wt(e)&&B(e,"_isValid")&&(o._isValid=e._isValid),o}Me.fn=rs.prototype;Me.invalid=Nu;function et(e,t){var s=e&&parseFloat(e.replace(",","."));return(isNaN(s)?0:s)*t}function aa(e,t){var s={};return s.months=t.month()-e.month()+(t.year()-e.year())*12,e.clone().add(s.months,"M").isAfter(t)&&--s.months,s.milliseconds=+t-+e.clone().add(s.months,"M"),s}function qu(e,t){var s;return e.isValid()&&t.isValid()?(t=Vs(t,e),e.isBefore(t)?s=aa(e,t):(s=aa(t,e),s.milliseconds=-s.milliseconds,s.months=-s.months),s):{milliseconds:0,months:0}}function Fa(e,t){return function(s,a){var r,o;return a!==null&&!isNaN(+a)&&(ya(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),o=s,s=a,a=o),r=Me(s,a),Va(this,r,e),this}}function Va(e,t,s,a){var r=t._milliseconds,o=_s(t._days),n=_s(t._months);e.isValid()&&(a=a??!0,n&&Ta(e,Tt(e,"Month")+n*s),o&&Sa(e,"Date",Tt(e,"Date")+o*s),r&&e._d.setTime(e._d.valueOf()+r*s),a&&M.updateOffset(e,o||n))}var Zu=Fa(1,"add"),Ju=Fa(-1,"subtract");function Ha(e){return typeof e=="string"||e instanceof String}function Qu(e){return De(e)||Nt(e)||Ha(e)||Be(e)||Xu(e)||Ku(e)||e===null||e===void 0}function Ku(e){var t=st(e)&&!Ds(e),s=!1,a=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],r,o,n=a.length;for(r=0;r<n;r+=1)o=a[r],s=s||B(e,o);return t&&s}function Xu(e){var t=Se(e),s=!1;return t&&(s=e.filter(function(a){return!Be(a)&&Ha(e)}).length===0),t&&s}function ed(e){var t=st(e)&&!Ds(e),s=!1,a=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],r,o;for(r=0;r<a.length;r+=1)o=a[r],s=s||B(e,o);return t&&s}function td(e,t){var s=e.diff(t,"days",!0);return s<-6?"sameElse":s<-1?"lastWeek":s<0?"lastDay":s<1?"sameDay":s<2?"nextDay":s<7?"nextWeek":"sameElse"}function sd(e,t){arguments.length===1&&(arguments[0]?Qu(arguments[0])?(e=arguments[0],t=void 0):ed(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var s=e||ee(),a=Vs(s,this).startOf("day"),r=M.calendarFormat(this,a)||"sameElse",o=t&&(Ie(t[r])?t[r].call(this,s):t[r]);return this.format(o||this.localeData().calendar(r,this,ee(s)))}function ad(){return new It(this)}function rd(e,t){var s=De(e)?e:ee(e);return this.isValid()&&s.isValid()?(t=we(t)||"millisecond",t==="millisecond"?this.valueOf()>s.valueOf():s.valueOf()<this.clone().startOf(t).valueOf()):!1}function od(e,t){var s=De(e)?e:ee(e);return this.isValid()&&s.isValid()?(t=we(t)||"millisecond",t==="millisecond"?this.valueOf()<s.valueOf():this.clone().endOf(t).valueOf()<s.valueOf()):!1}function nd(e,t,s,a){var r=De(e)?e:ee(e),o=De(t)?t:ee(t);return this.isValid()&&r.isValid()&&o.isValid()?(a=a||"()",(a[0]==="("?this.isAfter(r,s):!this.isBefore(r,s))&&(a[1]===")"?this.isBefore(o,s):!this.isAfter(o,s))):!1}function id(e,t){var s=De(e)?e:ee(e),a;return this.isValid()&&s.isValid()?(t=we(t)||"millisecond",t==="millisecond"?this.valueOf()===s.valueOf():(a=s.valueOf(),this.clone().startOf(t).valueOf()<=a&&a<=this.clone().endOf(t).valueOf())):!1}function ld(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function ud(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function dd(e,t,s){var a,r,o;if(!this.isValid())return NaN;if(a=Vs(e,this),!a.isValid())return NaN;switch(r=(a.utcOffset()-this.utcOffset())*6e4,t=we(t),t){case"year":o=Lt(this,a)/12;break;case"month":o=Lt(this,a);break;case"quarter":o=Lt(this,a)/3;break;case"second":o=(this-a)/1e3;break;case"minute":o=(this-a)/6e4;break;case"hour":o=(this-a)/36e5;break;case"day":o=(this-a-r)/864e5;break;case"week":o=(this-a-r)/6048e5;break;default:o=this-a}return s?o:_e(o)}function Lt(e,t){if(e.date()<t.date())return-Lt(t,e);var s=(t.year()-e.year())*12+(t.month()-e.month()),a=e.clone().add(s,"months"),r,o;return t-a<0?(r=e.clone().add(s-1,"months"),o=(t-a)/(a-r)):(r=e.clone().add(s+1,"months"),o=(t-a)/(r-a)),-(s+o)||0}M.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";M.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function cd(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function fd(e){if(!this.isValid())return null;var t=e!==!0,s=t?this.clone().utc():this;return s.year()<0||s.year()>9999?jt(s,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):Ie(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",jt(s,"Z")):jt(s,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function md(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="",s,a,r,o;return this.isLocal()||(e=this.utcOffset()===0?"moment.utc":"moment.parseZone",t="Z"),s="["+e+'("]',a=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",r="-MM-DD[T]HH:mm:ss.SSS",o=t+'[")]',this.format(s+a+r+o)}function hd(e){e||(e=this.isUtc()?M.defaultFormatUtc:M.defaultFormat);var t=jt(this,e);return this.localeData().postformat(t)}function vd(e,t){return this.isValid()&&(De(e)&&e.isValid()||ee(e).isValid())?Me({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function gd(e){return this.from(ee(),e)}function yd(e,t){return this.isValid()&&(De(e)&&e.isValid()||ee(e).isValid())?Me({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function pd(e){return this.to(ee(),e)}function Ba(e){var t;return e===void 0?this._locale._abbr:(t=ze(e),t!=null&&(this._locale=t),this)}var za=ke("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===void 0?this.localeData():this.locale(e)});function Ga(){return this._locale}var Ht=1e3,ut=60*Ht,Bt=60*ut,qa=(365*400+97)*24*Bt;function dt(e,t){return(e%t+t)%t}function Za(e,t,s){return e<100&&e>=0?new Date(e+400,t,s)-qa:new Date(e,t,s).valueOf()}function Ja(e,t,s){return e<100&&e>=0?Date.UTC(e+400,t,s)-qa:Date.UTC(e,t,s)}function _d(e){var t,s;if(e=we(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(s=this._isUTC?Ja:Za,e){case"year":t=s(this.year(),0,1);break;case"quarter":t=s(this.year(),this.month()-this.month()%3,1);break;case"month":t=s(this.year(),this.month(),1);break;case"week":t=s(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=s(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=s(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=dt(t+(this._isUTC?0:this.utcOffset()*ut),Bt);break;case"minute":t=this._d.valueOf(),t-=dt(t,ut);break;case"second":t=this._d.valueOf(),t-=dt(t,Ht);break}return this._d.setTime(t),M.updateOffset(this,!0),this}function kd(e){var t,s;if(e=we(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(s=this._isUTC?Ja:Za,e){case"year":t=s(this.year()+1,0,1)-1;break;case"quarter":t=s(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=s(this.year(),this.month()+1,1)-1;break;case"week":t=s(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=s(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=s(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=Bt-dt(t+(this._isUTC?0:this.utcOffset()*ut),Bt)-1;break;case"minute":t=this._d.valueOf(),t+=ut-dt(t,ut)-1;break;case"second":t=this._d.valueOf(),t+=Ht-dt(t,Ht)-1;break}return this._d.setTime(t),M.updateOffset(this,!0),this}function wd(){return this._d.valueOf()-(this._offset||0)*6e4}function bd(){return Math.floor(this.valueOf()/1e3)}function xd(){return new Date(this.valueOf())}function Sd(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function Dd(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function Md(){return this.isValid()?this.toISOString():null}function Td(){return Ms(this)}function $d(){return Je({},U(this))}function Cd(){return U(this).overflow}function Yd(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}A("N",0,0,"eraAbbr");A("NN",0,0,"eraAbbr");A("NNN",0,0,"eraAbbr");A("NNNN",0,0,"eraName");A("NNNNN",0,0,"eraNarrow");A("y",["y",1],"yo","eraYear");A("y",["yy",2],0,"eraYear");A("y",["yyy",3],0,"eraYear");A("y",["yyyy",4],0,"eraYear");C("N",Hs);C("NN",Hs);C("NNN",Hs);C("NNNN",Ld);C("NNNNN",Fd);Z(["N","NN","NNN","NNNN","NNNNN"],function(e,t,s,a){var r=s._locale.erasParse(e,a,s._strict);r?U(s).era=r:U(s).invalidEra=e});C("y",ft);C("yy",ft);C("yyy",ft);C("yyyy",ft);C("yo",Vd);Z(["y","yy","yyy","yyyy"],fe);Z(["yo"],function(e,t,s,a){var r;s._locale._eraYearOrdinalRegex&&(r=e.match(s._locale._eraYearOrdinalRegex)),s._locale.eraYearOrdinalParse?t[fe]=s._locale.eraYearOrdinalParse(e,r):t[fe]=parseInt(e,10)});function Pd(e,t){var s,a,r,o=this._eras||ze("en")._eras;for(s=0,a=o.length;s<a;++s){switch(typeof o[s].since){case"string":r=M(o[s].since).startOf("day"),o[s].since=r.valueOf();break}switch(typeof o[s].until){case"undefined":o[s].until=1/0;break;case"string":r=M(o[s].until).startOf("day").valueOf(),o[s].until=r.valueOf();break}}return o}function Od(e,t,s){var a,r,o=this.eras(),n,l,m;for(e=e.toUpperCase(),a=0,r=o.length;a<r;++a)if(n=o[a].name.toUpperCase(),l=o[a].abbr.toUpperCase(),m=o[a].narrow.toUpperCase(),s)switch(t){case"N":case"NN":case"NNN":if(l===e)return o[a];break;case"NNNN":if(n===e)return o[a];break;case"NNNNN":if(m===e)return o[a];break}else if([n,l,m].indexOf(e)>=0)return o[a]}function Nd(e,t){var s=e.since<=e.until?1:-1;return t===void 0?M(e.since).year():M(e.since).year()+(t-e.offset)*s}function Id(){var e,t,s,a=this.localeData().eras();for(e=0,t=a.length;e<t;++e)if(s=this.clone().startOf("day").valueOf(),a[e].since<=s&&s<=a[e].until||a[e].until<=s&&s<=a[e].since)return a[e].name;return""}function Ad(){var e,t,s,a=this.localeData().eras();for(e=0,t=a.length;e<t;++e)if(s=this.clone().startOf("day").valueOf(),a[e].since<=s&&s<=a[e].until||a[e].until<=s&&s<=a[e].since)return a[e].narrow;return""}function Ed(){var e,t,s,a=this.localeData().eras();for(e=0,t=a.length;e<t;++e)if(s=this.clone().startOf("day").valueOf(),a[e].since<=s&&s<=a[e].until||a[e].until<=s&&s<=a[e].since)return a[e].abbr;return""}function Rd(){var e,t,s,a,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e)if(s=r[e].since<=r[e].until?1:-1,a=this.clone().startOf("day").valueOf(),r[e].since<=a&&a<=r[e].until||r[e].until<=a&&a<=r[e].since)return(this.year()-M(r[e].since).year())*s+r[e].offset;return this.year()}function Ud(e){return B(this,"_erasNameRegex")||Bs.call(this),e?this._erasNameRegex:this._erasRegex}function jd(e){return B(this,"_erasAbbrRegex")||Bs.call(this),e?this._erasAbbrRegex:this._erasRegex}function Wd(e){return B(this,"_erasNarrowRegex")||Bs.call(this),e?this._erasNarrowRegex:this._erasRegex}function Hs(e,t){return t.erasAbbrRegex(e)}function Ld(e,t){return t.erasNameRegex(e)}function Fd(e,t){return t.erasNarrowRegex(e)}function Vd(e,t){return t._eraYearOrdinalRegex||ft}function Bs(){var e=[],t=[],s=[],a=[],r,o,n,l,m,c=this.eras();for(r=0,o=c.length;r<o;++r)n=Ve(c[r].name),l=Ve(c[r].abbr),m=Ve(c[r].narrow),t.push(n),e.push(l),s.push(m),a.push(n),a.push(l),a.push(m);this._erasRegex=new RegExp("^("+a.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+t.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+s.join("|")+")","i")}A(0,["gg",2],0,function(){return this.weekYear()%100});A(0,["GG",2],0,function(){return this.isoWeekYear()%100});function os(e,t){A(0,[e,e.length],0,t)}os("gggg","weekYear");os("ggggg","weekYear");os("GGGG","isoWeekYear");os("GGGGG","isoWeekYear");C("G",es);C("g",es);C("GG",te,pe);C("gg",te,pe);C("GGGG",Os,Ps);C("gggg",Os,Ps);C("GGGGG",Xt,Qt);C("ggggg",Xt,Qt);Et(["gggg","ggggg","GGGG","GGGGG"],function(e,t,s,a){t[a.substr(0,2)]=F(e)});Et(["gg","GG"],function(e,t,s,a){t[a]=M.parseTwoDigitYear(e)});function Hd(e){return Qa.call(this,e,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function Bd(e){return Qa.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function zd(){return He(this.year(),1,4)}function Gd(){return He(this.isoWeekYear(),1,4)}function qd(){var e=this.localeData()._week;return He(this.year(),e.dow,e.doy)}function Zd(){var e=this.localeData()._week;return He(this.weekYear(),e.dow,e.doy)}function Qa(e,t,s,a,r){var o;return e==null?Ct(this,a,r).year:(o=He(e,a,r),t>o&&(t=o),Jd.call(this,e,t,s,a,r))}function Jd(e,t,s,a,r){var o=Ya(e,t,s,a,r),n=$t(o.year,0,o.dayOfYear);return this.year(n.getUTCFullYear()),this.month(n.getUTCMonth()),this.date(n.getUTCDate()),this}A("Q",0,"Qo","quarter");C("Q",_a);Z("Q",function(e,t){t[je]=(F(e)-1)*3});function Qd(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}A("D",["DD",2],"Do","date");C("D",te,mt);C("DD",te,pe);C("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient});Z(["D","DD"],Ce);Z("Do",function(e,t){t[Ce]=F(e.match(te)[0])});var Ka=ht("Date",!0);A("DDD",["DDDD",3],"DDDo","dayOfYear");C("DDD",Kt);C("DDDD",ka);Z(["DDD","DDDD"],function(e,t,s){s._dayOfYear=F(e)});function Kd(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}A("m",["mm",2],0,"minute");C("m",te,Ns);C("mm",te,pe);Z(["m","mm"],xe);var Xd=ht("Minutes",!1);A("s",["ss",2],0,"second");C("s",te,Ns);C("ss",te,pe);Z(["s","ss"],We);var ec=ht("Seconds",!1);A("S",0,0,function(){return~~(this.millisecond()/100)});A(0,["SS",2],0,function(){return~~(this.millisecond()/10)});A(0,["SSS",3],0,"millisecond");A(0,["SSSS",4],0,function(){return this.millisecond()*10});A(0,["SSSSS",5],0,function(){return this.millisecond()*100});A(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});A(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});A(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});A(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});C("S",Kt,_a);C("SS",Kt,pe);C("SSS",Kt,ka);var Qe,Xa;for(Qe="SSSS";Qe.length<=9;Qe+="S")C(Qe,ft);function tc(e,t){t[tt]=F(("0."+e)*1e3)}for(Qe="S";Qe.length<=9;Qe+="S")Z(Qe,tc);Xa=ht("Milliseconds",!1);A("z",0,0,"zoneAbbr");A("zz",0,0,"zoneName");function sc(){return this._isUTC?"UTC":""}function ac(){return this._isUTC?"Coordinated Universal Time":""}var w=It.prototype;w.add=Zu;w.calendar=sd;w.clone=ad;w.diff=dd;w.endOf=kd;w.format=hd;w.from=vd;w.fromNow=gd;w.to=yd;w.toNow=pd;w.get=ml;w.invalidAt=Cd;w.isAfter=rd;w.isBefore=od;w.isBetween=nd;w.isSame=id;w.isSameOrAfter=ld;w.isSameOrBefore=ud;w.isValid=Td;w.lang=za;w.locale=Ba;w.localeData=Ga;w.max=Tu;w.min=Mu;w.parsingFlags=$d;w.set=hl;w.startOf=_d;w.subtract=Ju;w.toArray=Sd;w.toObject=Dd;w.toDate=xd;w.toISOString=fd;w.inspect=md;typeof Symbol<"u"&&Symbol.for!=null&&(w[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});w.toJSON=Md;w.toString=cd;w.unix=bd;w.valueOf=wd;w.creationData=Yd;w.eraName=Id;w.eraNarrow=Ad;w.eraAbbr=Ed;w.eraYear=Rd;w.year=xa;w.isLeapYear=fl;w.weekYear=Hd;w.isoWeekYear=Bd;w.quarter=w.quarters=Qd;w.month=$a;w.daysInMonth=xl;w.week=w.weeks=Pl;w.isoWeek=w.isoWeeks=Ol;w.weeksInYear=qd;w.weeksInWeekYear=Zd;w.isoWeeksInYear=zd;w.isoWeeksInISOWeekYear=Gd;w.date=Ka;w.day=w.days=Bl;w.weekday=zl;w.isoWeekday=Gl;w.dayOfYear=Kd;w.hour=w.hours=eu;w.minute=w.minutes=Xd;w.second=w.seconds=ec;w.millisecond=w.milliseconds=Xa;w.utcOffset=Eu;w.utc=Uu;w.local=ju;w.parseZone=Wu;w.hasAlignedHourOffset=Lu;w.isDST=Fu;w.isLocal=Hu;w.isUtcOffset=Bu;w.isUtc=La;w.isUTC=La;w.zoneAbbr=sc;w.zoneName=ac;w.dates=ke("dates accessor is deprecated. Use date instead.",Ka);w.months=ke("months accessor is deprecated. Use month instead",$a);w.years=ke("years accessor is deprecated. Use year instead",xa);w.zone=ke("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Ru);w.isDSTShifted=ke("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Vu);function rc(e){return ee(e*1e3)}function oc(){return ee.apply(null,arguments).parseZone()}function er(e){return e}var z=$s.prototype;z.calendar=Hi;z.longDateFormat=qi;z.invalidDate=Ji;z.ordinal=Xi;z.preparse=er;z.postformat=er;z.relativeTime=tl;z.pastFuture=sl;z.set=Fi;z.eras=Pd;z.erasParse=Od;z.erasConvertYear=Nd;z.erasAbbrRegex=jd;z.erasNameRegex=Ud;z.erasNarrowRegex=Wd;z.months=_l;z.monthsShort=kl;z.monthsParse=bl;z.monthsRegex=Dl;z.monthsShortRegex=Sl;z.week=Tl;z.firstDayOfYear=Yl;z.firstDayOfWeek=Cl;z.weekdays=Wl;z.weekdaysMin=Fl;z.weekdaysShort=Ll;z.weekdaysParse=Hl;z.weekdaysRegex=ql;z.weekdaysShortRegex=Zl;z.weekdaysMinRegex=Jl;z.isPM=Kl;z.meridiem=tu;function zt(e,t,s,a){var r=ze(),o=Ne().set(a,t);return r[s](o,e)}function tr(e,t,s){if(Be(e)&&(t=e,e=void 0),e=e||"",t!=null)return zt(e,t,s,"month");var a,r=[];for(a=0;a<12;a++)r[a]=zt(e,a,s,"month");return r}function zs(e,t,s,a){typeof e=="boolean"?(Be(t)&&(s=t,t=void 0),t=t||""):(t=e,s=t,e=!1,Be(t)&&(s=t,t=void 0),t=t||"");var r=ze(),o=e?r._week.dow:0,n,l=[];if(s!=null)return zt(t,(s+o)%7,a,"day");for(n=0;n<7;n++)l[n]=zt(t,(n+o)%7,a,"day");return l}function nc(e,t){return tr(e,t,"months")}function ic(e,t){return tr(e,t,"monthsShort")}function lc(e,t,s){return zs(e,t,s,"weekdays")}function uc(e,t,s){return zs(e,t,s,"weekdaysShort")}function dc(e,t,s){return zs(e,t,s,"weekdaysMin")}Ke("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,s=F(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+s}});M.lang=ke("moment.lang is deprecated. Use moment.locale instead.",Ke);M.langData=ke("moment.langData is deprecated. Use moment.localeData instead.",ze);var Ee=Math.abs;function cc(){var e=this._data;return this._milliseconds=Ee(this._milliseconds),this._days=Ee(this._days),this._months=Ee(this._months),e.milliseconds=Ee(e.milliseconds),e.seconds=Ee(e.seconds),e.minutes=Ee(e.minutes),e.hours=Ee(e.hours),e.months=Ee(e.months),e.years=Ee(e.years),this}function sr(e,t,s,a){var r=Me(t,s);return e._milliseconds+=a*r._milliseconds,e._days+=a*r._days,e._months+=a*r._months,e._bubble()}function fc(e,t){return sr(this,e,t,1)}function mc(e,t){return sr(this,e,t,-1)}function ra(e){return e<0?Math.floor(e):Math.ceil(e)}function hc(){var e=this._milliseconds,t=this._days,s=this._months,a=this._data,r,o,n,l,m;return e>=0&&t>=0&&s>=0||e<=0&&t<=0&&s<=0||(e+=ra(ws(s)+t)*864e5,t=0,s=0),a.milliseconds=e%1e3,r=_e(e/1e3),a.seconds=r%60,o=_e(r/60),a.minutes=o%60,n=_e(o/60),a.hours=n%24,t+=_e(n/24),m=_e(ar(t)),s+=m,t-=ra(ws(m)),l=_e(s/12),s%=12,a.days=t,a.months=s,a.years=l,this}function ar(e){return e*4800/146097}function ws(e){return e*146097/4800}function vc(e){if(!this.isValid())return NaN;var t,s,a=this._milliseconds;if(e=we(e),e==="month"||e==="quarter"||e==="year")switch(t=this._days+a/864e5,s=this._months+ar(t),e){case"month":return s;case"quarter":return s/3;case"year":return s/12}else switch(t=this._days+Math.round(ws(this._months)),e){case"week":return t/7+a/6048e5;case"day":return t+a/864e5;case"hour":return t*24+a/36e5;case"minute":return t*1440+a/6e4;case"second":return t*86400+a/1e3;case"millisecond":return Math.floor(t*864e5)+a;default:throw new Error("Unknown unit "+e)}}function Ge(e){return function(){return this.as(e)}}var rr=Ge("ms"),gc=Ge("s"),yc=Ge("m"),pc=Ge("h"),_c=Ge("d"),kc=Ge("w"),wc=Ge("M"),bc=Ge("Q"),xc=Ge("y"),Sc=rr;function Dc(){return Me(this)}function Mc(e){return e=we(e),this.isValid()?this[e+"s"]():NaN}function at(e){return function(){return this.isValid()?this._data[e]:NaN}}var Tc=at("milliseconds"),$c=at("seconds"),Cc=at("minutes"),Yc=at("hours"),Pc=at("days"),Oc=at("months"),Nc=at("years");function Ic(){return _e(this.days()/7)}var Re=Math.round,it={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function Ac(e,t,s,a,r){return r.relativeTime(t||1,!!s,e,a)}function Ec(e,t,s,a){var r=Me(e).abs(),o=Re(r.as("s")),n=Re(r.as("m")),l=Re(r.as("h")),m=Re(r.as("d")),c=Re(r.as("M")),p=Re(r.as("w")),g=Re(r.as("y")),$=o<=s.ss&&["s",o]||o<s.s&&["ss",o]||n<=1&&["m"]||n<s.m&&["mm",n]||l<=1&&["h"]||l<s.h&&["hh",l]||m<=1&&["d"]||m<s.d&&["dd",m];return s.w!=null&&($=$||p<=1&&["w"]||p<s.w&&["ww",p]),$=$||c<=1&&["M"]||c<s.M&&["MM",c]||g<=1&&["y"]||["yy",g],$[2]=t,$[3]=+e>0,$[4]=a,Ac.apply(null,$)}function Rc(e){return e===void 0?Re:typeof e=="function"?(Re=e,!0):!1}function Uc(e,t){return it[e]===void 0?!1:t===void 0?it[e]:(it[e]=t,e==="s"&&(it.ss=t-1),!0)}function jc(e,t){if(!this.isValid())return this.localeData().invalidDate();var s=!1,a=it,r,o;return typeof e=="object"&&(t=e,e=!1),typeof e=="boolean"&&(s=e),typeof t=="object"&&(a=Object.assign({},it,t),t.s!=null&&t.ss==null&&(a.ss=t.s-1)),r=this.localeData(),o=Ec(this,!s,a,r),s&&(o=r.pastFuture(+this,o)),r.postformat(o)}var ms=Math.abs;function ot(e){return(e>0)-(e<0)||+e}function ns(){if(!this.isValid())return this.localeData().invalidDate();var e=ms(this._milliseconds)/1e3,t=ms(this._days),s=ms(this._months),a,r,o,n,l=this.asSeconds(),m,c,p,g;return l?(a=_e(e/60),r=_e(a/60),e%=60,a%=60,o=_e(s/12),s%=12,n=e?e.toFixed(3).replace(/\.?0+$/,""):"",m=l<0?"-":"",c=ot(this._months)!==ot(l)?"-":"",p=ot(this._days)!==ot(l)?"-":"",g=ot(this._milliseconds)!==ot(l)?"-":"",m+"P"+(o?c+o+"Y":"")+(s?c+s+"M":"")+(t?p+t+"D":"")+(r||a||e?"T":"")+(r?g+r+"H":"")+(a?g+a+"M":"")+(e?g+n+"S":"")):"P0D"}var V=rs.prototype;V.isValid=Ou;V.abs=cc;V.add=fc;V.subtract=mc;V.as=vc;V.asMilliseconds=rr;V.asSeconds=gc;V.asMinutes=yc;V.asHours=pc;V.asDays=_c;V.asWeeks=kc;V.asMonths=wc;V.asQuarters=bc;V.asYears=xc;V.valueOf=Sc;V._bubble=hc;V.clone=Dc;V.get=Mc;V.milliseconds=Tc;V.seconds=$c;V.minutes=Cc;V.hours=Yc;V.days=Pc;V.weeks=Ic;V.months=Oc;V.years=Nc;V.humanize=jc;V.toISOString=ns;V.toString=ns;V.toJSON=ns;V.locale=Ba;V.localeData=Ga;V.toIsoString=ke("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",ns);V.lang=za;A("X",0,0,"unix");A("x",0,0,"valueOf");C("x",es);C("X",nl);Z("X",function(e,t,s){s._d=new Date(parseFloat(e)*1e3)});Z("x",function(e,t,s){s._d=new Date(F(e))});//! moment.js
M.version="2.30.1";Wi(ee);M.fn=w;M.min=$u;M.max=Cu;M.now=Yu;M.utc=Ne;M.unix=rc;M.months=nc;M.isDate=Nt;M.locale=Ke;M.invalid=Jt;M.duration=Me;M.isMoment=De;M.weekdays=lc;M.parseZone=oc;M.localeData=ze;M.isDuration=Wt;M.monthsShort=ic;M.weekdaysMin=dc;M.defineLocale=Us;M.updateLocale=ou;M.locales=nu;M.weekdaysShort=uc;M.normalizeUnits=we;M.relativeTimeRounding=Rc;M.relativeTimeThreshold=Uc;M.calendarFormat=td;M.prototype=w;M.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};const Wc={class:"space-y-4"},Lc={key:0,class:"mb-4 p-3 bg-gray-100 rounded-md"},Fc={class:"text-sm font-medium text-gray-900"},Vc={class:"text-xs text-gray-500 mt-1"},Hc={class:"mb-4"},Bc="post",zc="Add Note",Gc="Note added successfully!",qc={__name:"TaskNoteModal",props:{show:Boolean,taskForNote:Object},emits:["close","note-added"],setup(e,{emit:t}){const s=e,a=t,r=qt({note:""}),o=H(()=>{var c;return`Add Note to Task: "${(c=s.taskForNote)==null?void 0:c.name}"`}),n=H(()=>{var c;return`/api/tasks/${(c=s.taskForNote)==null?void 0:c.id}/notes`});ge(()=>s.show,c=>{c&&Object.assign(r,{note:""})},{immediate:!0});const l=c=>{a("note-added",c),a("close")},m=()=>{a("close")};return(c,p)=>(u(),E(Zt,{show:e.show,title:o.value,"api-endpoint":n.value,"http-method":Bc,"form-data":r,"submit-button-text":zc,"success-message":Gc,onClose:m,onSubmitted:l},{default:x(({errors:g})=>[i("div",Wc,[e.taskForNote?(u(),f("div",Lc,[i("p",Fc,P(e.taskForNote.name),1),i("p",Vc,"Status: "+P(e.taskForNote.status),1)])):b("",!0),i("div",Hc,[v(q,{for:"task-note-content",value:"Note Content"}),de(i("textarea",{id:"task-note-content","onUpdate:modelValue":p[0]||(p[0]=$=>r.note=$),class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full h-32",placeholder:"Enter your note...",required:""},null,512),[[Le,r.note]]),v(ae,{message:g.note?g.note[0]:"",class:"mt-2"},null,8,["message"])])])]),_:1},8,["show","title","api-endpoint","form-data"]))}},Zc={class:"task-history-list"},Jc={key:0,class:"text-center py-4"},Qc={key:1,class:"text-gray-500 text-sm py-2"},Kc={key:2,class:"space-y-3"},Xc={class:"flex items-start"},ef={class:"text-xl mr-2"},tf={class:"text-sm text-gray-700"},sf={class:"text-xs text-gray-500 mt-1"},af={__name:"TaskHistoryList",props:{activities:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},setup(e){const t=a=>a?new Date(a).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",s=a=>(console.log(a),a.includes("created")?"🆕":a.includes("started")?"🚀":a.includes("paused")?"⏸️":a.includes("resumed")?"▶️":a.includes("unblocked")?"🔓":a.includes("blocked")?"⛔":a.includes("completed")?"✅":a.includes("revised")?"🔄":a.includes("deleted")?"🗑️":a.includes("assigned")?"👤":a.includes("updated")?"📝":a.includes("added note")?"🗒️":a.includes("commented")?"💬":"📋");return(a,r)=>(u(),f("div",Zc,[e.loading?(u(),f("div",Jc,r[0]||(r[0]=[i("div",{class:"inline-block animate-spin rounded-full h-6 w-6 border-t-2 border-b-2 border-indigo-500"},null,-1),i("p",{class:"mt-2 text-gray-500"},"Loading activity history...",-1)]))):e.activities.length===0?(u(),f("div",Qc," No activity history available for this task. ")):(u(),f("div",Kc,[(u(!0),f(ue,null,ce(e.activities,o=>{var n;return u(),f("div",{key:o.id,class:"p-3 bg-gray-50 rounded-md"},[i("div",Xc,[i("span",ef,P(s(o.description)),1),i("div",null,[i("p",tf,P(o.description),1),i("p",sf," By "+P(((n=o.causer)==null?void 0:n.name)||"System")+" on "+P(t(o.created_at)),1)])])])}),128))]))]))}},rf=ct(af,[["__scopeId","data-v-423d54af"]]),Tm=async()=>{try{return(await ne.get("/api/assigned-tasks")).data}catch(e){throw console.error("Error fetching assigned tasks:",e),me("Failed to load assigned tasks"),e}},$m=async e=>{try{return(await ne.get(`/api/projects/${e}/tasks`)).data}catch(t){throw console.error("Error fetching project tasks:",t),me("Failed to load project tasks"),t}},Cm=async e=>{try{return(await ne.get(`/api/projects/${e}/due-and-overdue-tasks`)).data}catch(t){throw console.error("Error fetching due and overdue tasks:",t),me("Failed to load due and overdue tasks"),t}},of=async e=>{if(!e||e.status==="In Progress")return e;try{Xe("Starting task...");const t=await ne.post(`/api/tasks/${e.id}/start`);return Oe("Task started successfully"),t.data}catch(t){throw console.error("Error starting task:",t),me("Failed to start task. Please try again."),t}},nf=async e=>{if(!e||e.status!=="In Progress")return ye('Task can only be paused from "In Progress" status.'),e;try{Xe("Pausing task...");const t=await ne.post(`/api/tasks/${e.id}/pause`);return Oe("Task paused successfully"),t.data}catch(t){throw console.error("Error pausing task:",t),me("Failed to pause task. Please try again."),t}},lf=async e=>{if(!e||e.status!=="Paused")return ye('Task can only be resumed from "Paused" status.'),e;try{Xe("Resuming task...");const t=await ne.post(`/api/tasks/${e.id}/resume`);return Oe("Task resumed successfully"),t.data}catch(t){throw console.error("Error resuming task:",t),me("Failed to resume task. Please try again."),t}},uf=async e=>{if(!e||e.status==="Done")return e;if(e.status!=="In Progress")throw ye("Task must be started before it can be completed"),new Error("Task must be started before it can be completed");try{Xe("Completing task...");const t=await ne.patch(`/api/tasks/${e.id}/complete`);return Oe("Task completed successfully"),t.data}catch(t){throw console.error("Error completing task:",t),t.response&&t.response.status===422?ye(t.response.data.message||"Task must be started before it can be completed"):me("Failed to complete task. Please try again."),t}},df=async(e,t)=>{if(!e||e.status==="Blocked")return ye("Task is already blocked."),e;if(e.status==="Done")return ye("Completed tasks cannot be blocked."),e;if(!t)throw ye("Please provide a reason for blocking the task"),new Error("Blocking reason is required");try{Xe("Blocking task...");const s=await ne.post(`/api/tasks/${e.id}/block`,{reason:t});return Oe("Task blocked successfully"),s.data}catch(s){throw console.error("Error blocking task:",s),me("Failed to block task. Please try again."),s}},cf=async e=>{if(!e||e.status!=="Blocked")return ye("Task is not in a blocked state."),e;try{Xe("Unblocking task...");const t=await ne.post(`/api/tasks/${e.id}/unblock`);return Oe("Task unblocked successfully"),t.data}catch(t){throw console.error("Error unblocking task:",t),me("Failed to unblock task. Please try again."),t}},ff=async e=>{if(!e||e.status!=="Done")return ye("Only completed tasks can be revised."),e;try{Xe("Revising task...");const t=await ne.post(`/api/tasks/${e.id}/revise`);return Oe("Task revised successfully"),t.data}catch(t){throw console.error("Error revising task:",t),t.response&&t.response.status===422?ye(t.response.data.message||"Only completed tasks can be revised"):me("Failed to revise task. Please try again."),t}},mf=async e=>{if(!e)return!1;if(e.status!=="To Do")throw ye("Only tasks in To Do status can be deleted"),new Error("Only tasks in To Do status can be deleted");if(!confirm("Are you sure you want to delete this task? This action cannot be undone."))return!1;try{return Xe("Deleting task..."),await ne.delete(`/api/tasks/${e.id}`),Oe("Task deleted successfully"),!0}catch(t){throw console.error("Error deleting task:",t),me("Failed to delete task. Please try again."),t}},hf=e=>{switch(e){case"To Do":return"bg-yellow-100 text-yellow-800";case"In Progress":return"bg-blue-100 text-blue-800";case"Paused":return"bg-orange-100 text-orange-800";case"Blocked":return"bg-red-100 text-red-800";case"Done":return"bg-green-100 text-green-800";case"Archived":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},Ym=e=>{switch(e){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},Pm=e=>e?e.charAt(0).toUpperCase()+e.slice(1):"Medium",vf={key:0,class:"text-center py-8 text-gray-500"},gf={key:1,class:"text-center py-8 text-red-600"},yf={key:2,class:"space-y-6"},pf={class:"bg-gray-50 p-4 rounded-lg shadow-sm"},_f={class:"text-xl font-bold text-gray-900 mb-2"},kf={class:"flex items-center space-x-2 text-sm text-gray-600 mb-4"},wf={key:0,class:"text-indigo-600 font-medium"},bf={key:1,class:"text-purple-600 font-medium"},xf={class:"text-gray-700 leading-relaxed"},Sf={class:"mt-4 flex flex-wrap gap-2"},Df={key:0,class:"text-xs text-gray-500 mt-1"},Mf={key:0,class:"bg-yellow-50 border-l-4 border-red-400 p-4 rounded-lg shadow-sm"},Tf={class:"flex items-center"},$f={class:"ml-3"},Cf={class:"mt-2 text-sm text-yellow-700"},Yf={class:"space-y-4 p-4 bg-white rounded-lg shadow-sm"},Pf={class:"flex items-center justify-between py-2 border-b border-gray-100"},Of={class:"flex-1 text-right"},Nf={key:0,class:"text-xs text-gray-400 ml-1"},If={key:1,class:"flex items-center space-x-2"},Af={class:"flex items-center justify-between py-2 border-b border-gray-100"},Ef={class:"flex-1 text-right"},Rf={key:1,class:"flex items-center space-x-2"},Uf={class:"flex items-center justify-between py-2 border-b border-gray-100"},jf={class:"flex-1 text-right"},Wf={key:0,class:"text-xs text-gray-400 ml-1"},Lf={key:1,class:"flex items-center space-x-2"},Ff={class:"flex items-center justify-between py-2 border-b border-gray-100"},Vf={class:"text-gray-700"},Hf={class:"flex items-start py-2 border-b border-gray-100"},Bf={class:"flex-1 flex flex-wrap gap-2"},zf={key:0,class:"text-gray-500 text-sm"},Gf={class:"bg-white p-4 rounded-lg shadow-sm"},qf={class:"flex justify-between items-center mb-4 border-b pb-2"},Zf={key:0,class:"space-y-3"},Jf={class:"text-sm text-gray-700"},Qf={class:"text-xs text-gray-500 mt-1"},Kf={key:1,class:"text-gray-500 text-sm py-2"},Xf={class:"bg-white p-4 rounded-lg shadow-sm"},em={key:3,class:"text-center py-8 text-gray-500"},tm={key:4,class:"mt-4 flex flex-col items-center"},sm={key:0,class:"text-xs text-red-500 mt-1"},am={class:"p-6"},rm={class:"mb-4"},om={class:"flex justify-end space-x-3"},nm={__name:"TaskDetailSidebar",props:{taskId:{type:Number,required:!0},projectId:{type:Number,required:!0},projectUsers:{type:Array,default:()=>[]}},emits:["close","task-updated","task-deleted"],setup(e,{emit:t}){const s=e,a=t,r=O(null),o=O(!0),n=O(""),l=O(!1),m=O(!1),c=O(!1),p=O(null),g=O(null),$=O(null),j=O([]),N=O(!1),k=[{value:"low",label:"Low"},{value:"medium",label:"Medium"},{value:"high",label:"High"}],S=O(!1),y=async()=>{o.value=!0,n.value="";try{const R=await window.axios.get(`/api/tasks/${s.taskId}`);r.value=R.data,p.value=r.value.assigned_to_id||null,g.value=r.value.due_date||null,$.value=r.value.priority||"medium",d()}catch(R){n.value="Failed to load task details.",console.error("Error fetching task details:",R)}finally{o.value=!1}},d=async()=>{N.value=!0;try{const R=await window.axios.get("/api/activities",{params:{subject_type:"App\\Models\\Task",subject_id:s.taskId}});j.value=R.data}catch(R){console.error("Error fetching task activities:",R)}finally{N.value=!1}};ge(()=>s.taskId,R=>{R?y():r.value=null},{immediate:!0});const h=H(()=>s.projectUsers.map(R=>({value:R.id,label:R.name}))),_=async()=>{if(!r.value||p.value===r.value.assigned_to_id){l.value=!1;return}try{const R=await window.axios.patch(`/api/tasks/${r.value.id}`,{assigned_to_user_id:p.value});r.value=R.data,a("task-updated",r.value)}catch(R){console.error("Error updating assigned user:",R),p.value=r.value.assigned_to_id,me("Failed to update assigned user. Please try again.")}finally{l.value=!1}},Y=async()=>{if(!r.value||g.value===r.value.due_date){m.value=!1;return}try{const R=await window.axios.patch(`/api/tasks/${r.value.id}`,{due_date:g.value});r.value=R.data,a("task-updated",r.value)}catch(R){console.error("Error updating due date:",R),g.value=r.value.due_date,me("Failed to update due date. Please try again.")}finally{m.value=!1}},W=async()=>{if(!r.value||$.value===r.value.priority){c.value=!1;return}try{const R=await window.axios.patch(`/api/tasks/${r.value.id}`,{priority:$.value});r.value=R.data,a("task-updated",r.value)}catch(R){console.error("Error updating priority:",R),$.value=r.value.priority,me("Failed to update priority. Please try again.")}finally{c.value=!1}},re=()=>{S.value=!0},Ae=()=>{y(),S.value=!1},X=async()=>{try{await mf(r.value),a("task-deleted",r.value.id),a("close")}catch(R){console.error("Error deleting task:",R)}},L=async()=>{try{r.value=await of(r.value),a("task-updated",r.value),d()}catch(R){console.error("Error starting task:",R)}},J=async()=>{try{r.value=await nf(r.value),a("task-updated",r.value),d()}catch(R){console.error("Error pausing task:",R)}},K=async()=>{try{r.value=await lf(r.value),a("task-updated",r.value),d()}catch(R){console.error("Error resuming task:",R)}},Te=async()=>{try{r.value=await uf(r.value),a("task-updated",r.value),d()}catch(R){console.error("Error completing task:",R)}},or=async()=>{try{r.value=await ff(r.value),a("task-updated",r.value),d()}catch(R){console.error("Error revising task:",R)}},vt=O(!1),rt=O(""),nr=()=>{rt.value="",vt.value=!0},ir=async()=>{if(!rt.value.trim()){ye("Please provide a reason for blocking the task");return}try{r.value=await df(r.value,rt.value),Oe("Task blocked successfully"),a("task-updated",r.value),d(),vt.value=!1}catch(R){console.error("Error blocking task:",R)}},lr=async()=>{try{r.value=await cf(r.value),a("task-updated",r.value),d()}catch(R){console.error("Error unblocking task:",R)}},ur=H(()=>r.value?hf(r.value.status):""),is=H(()=>{var D,gt,yt,pt;if(!j.value||((D=r.value)==null?void 0:D.status)!=="Blocked")return null;const R=j.value.find(_t=>{var Q,Gs;return _t.event==="updated"&&((Gs=(Q=_t.properties)==null?void 0:Q.attributes)==null?void 0:Gs.status)==="Blocked"});return R?(console.log(R.properties),{causer:((gt=R.causer)==null?void 0:gt.name)||"Unknown",reason:((pt=(yt=R.properties)==null?void 0:yt.attributes)==null?void 0:pt.block_reason)||"No reason provided."}):null});return(R,D)=>{var gt,yt,pt,_t;return u(),f("div",null,[o.value?(u(),f("div",vf," Loading task details... ")):n.value?(u(),f("div",gf,P(n.value),1)):r.value?(u(),f("div",yf,[i("div",pf,[i("h4",_f,P(r.value.name),1),i("div",kf,[i("span",{class:G(["px-2 py-1 rounded-full text-xs font-medium",ur.value])},P(r.value.status),3),r.value.task_type?(u(),f("span",wf," | "+P((gt=r.value.task_type)==null?void 0:gt.name)+" | ",1)):b("",!0),D[13]||(D[13]=i("br",null,null,-1)),(yt=r.value.milestone)!=null&&yt.name?(u(),f("span",bf,P((pt=r.value.milestone)==null?void 0:pt.name),1)):b("",!0)]),i("p",xf,P(r.value.description||"No description provided."),1),i("div",Sf,[r.value.status==="To Do"?(u(),E(ve,{key:0,onClick:L,class:"bg-blue-600 hover:bg-blue-700"},{default:x(()=>D[14]||(D[14]=[T(" Start Task ",-1)])),_:1,__:[14]})):r.value.status==="In Progress"?(u(),E(ve,{key:1,onClick:J,class:"bg-orange-600 hover:bg-orange-700"},{default:x(()=>D[15]||(D[15]=[T(" Pause Task ",-1)])),_:1,__:[15]})):r.value.status==="Paused"?(u(),E(ve,{key:2,onClick:K,class:"bg-blue-600 hover:bg-blue-700"},{default:x(()=>D[16]||(D[16]=[T(" Resume Task ",-1)])),_:1,__:[16]})):r.value.status==="Blocked"?(u(),E(ve,{key:3,onClick:lr,class:"bg-green-600 hover:bg-green-700"},{default:x(()=>D[17]||(D[17]=[T(" Unblock Task ",-1)])),_:1,__:[17]})):b("",!0),r.value.status==="To Do"||r.value.status==="In Progress"||r.value.status==="Paused"?(u(),E(ve,{key:4,onClick:nr,class:"bg-red-600 hover:bg-red-700"},{default:x(()=>D[18]||(D[18]=[T(" Block Task ",-1)])),_:1,__:[18]})):b("",!0),r.value.status==="In Progress"?(u(),E(ve,{key:5,onClick:Te,class:"bg-green-600 hover:bg-green-700"},{default:x(()=>D[19]||(D[19]=[T(" Complete Task ",-1)])),_:1,__:[19]})):b("",!0),r.value.status==="Done"?(u(),E(ve,{key:6,onClick:or,class:"bg-yellow-600 hover:bg-yellow-700"},{default:x(()=>D[20]||(D[20]=[T(" Revise Task ",-1)])),_:1,__:[20]})):b("",!0)]),r.value.status==="Done"?(u(),f("div",Df,' Revising will change the task status back to "To Do" ')):b("",!0)]),r.value.status==="Blocked"&&is.value?(u(),f("div",Mf,[i("div",Tf,[D[22]||(D[22]=i("div",{class:"flex-shrink-0"},[i("svg",{class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[i("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.487 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11.75 13a.75.75 0 01-1.5 0v-2.25a.75.75 0 011.5 0V13zm-1.5-7.5a.75.75 0 011.5 0v1.5a.75.75 0 01-1.5 0V5.5z","clip-rule":"evenodd"})])],-1)),i("div",$f,[D[21]||(D[21]=i("h3",{class:"text-sm font-medium text-yellow-800"},"Task Blocked",-1)),i("div",Cf,[i("p",null,"This task was blocked by **"+P(is.value.causer)+"** with the following reason:",1),i("p",null,P(is.value.reason),1)])])])])):b("",!0),i("div",Yf,[D[29]||(D[29]=i("h5",{class:"text-lg font-semibold text-gray-800 border-b pb-2 mb-4"},"Task Attributes",-1)),i("div",Pf,[v(q,{class:"min-w-[100px] text-gray-600"},{default:x(()=>D[23]||(D[23]=[T("Assigned To:",-1)])),_:1,__:[23]}),i("div",Of,[l.value?(u(),f("div",If,[v($e,{id:"edit-assigned-to",modelValue:p.value,"onUpdate:modelValue":D[1]||(D[1]=Q=>p.value=Q),options:h.value,"value-key":"value","label-key":"label",placeholder:"Unassigned",class:"mt-1 flex-1","allow-empty":!0},null,8,["modelValue","options"]),i("button",{onClick:_,class:"text-green-600 hover:text-green-800 text-sm font-medium"},"Save"),i("button",{onClick:D[2]||(D[2]=Q=>l.value=!1),class:"text-gray-600 hover:text-gray-800 text-sm font-medium"},"Cancel")])):(u(),f("div",{key:0,onClick:D[0]||(D[0]=Q=>r.value.status!=="Done"?l.value=!0:ye("Cannot change assignment for a completed task. Use the Revise button to change the task status first.")),class:G(["cursor-pointer",{"text-indigo-600 hover:text-indigo-800":r.value.status!=="Done","text-gray-500":r.value.status==="Done"}])},[T(P(((_t=r.value.assigned_to)==null?void 0:_t.name)||"Unassigned")+" ",1),r.value.status!=="Done"?(u(),f("span",Nf,"(Click to edit)")):b("",!0)],2))])]),i("div",Af,[v(q,{class:"min-w-[100px] text-gray-600"},{default:x(()=>D[24]||(D[24]=[T("Due Date:",-1)])),_:1,__:[24]}),i("div",Ef,[m.value?(u(),f("div",Rf,[v(Fe,{id:"edit-due-date",modelValue:g.value,"onUpdate:modelValue":D[4]||(D[4]=Q=>g.value=Q),type:"date",class:"mt-1 flex-1"},null,8,["modelValue"]),i("button",{onClick:Y,class:"text-green-600 hover:text-green-800 text-sm font-medium"},"Save"),i("button",{onClick:D[5]||(D[5]=Q=>m.value=!1),class:"text-gray-600 hover:text-gray-800 text-sm font-medium"},"Cancel")])):(u(),f("div",{key:0,onClick:D[3]||(D[3]=Q=>m.value=!0),class:"cursor-pointer text-indigo-600 hover:text-indigo-800"},[T(P(r.value.due_date?I(M)(r.value.due_date).format("MMM D, YYYY"):"No Due Date")+" ",1),D[25]||(D[25]=i("span",{class:"text-xs text-gray-400 ml-1"},"(Click to edit)",-1))]))])]),i("div",Uf,[v(q,{class:"min-w-[100px] text-gray-600"},{default:x(()=>D[26]||(D[26]=[T("Priority:",-1)])),_:1,__:[26]}),i("div",jf,[c.value?(u(),f("div",Lf,[v($e,{id:"edit-priority",modelValue:$.value,"onUpdate:modelValue":D[7]||(D[7]=Q=>$.value=Q),options:k,"value-key":"value","label-key":"label",placeholder:"Select priority",class:"mt-1 flex-1"},null,8,["modelValue"]),i("button",{onClick:W,class:"text-green-600 hover:text-green-800 text-sm font-medium"},"Save"),i("button",{onClick:D[8]||(D[8]=Q=>c.value=!1),class:"text-gray-600 hover:text-gray-800 text-sm font-medium"},"Cancel")])):(u(),f("div",{key:0,onClick:D[6]||(D[6]=Q=>r.value.status!=="Done"?c.value=!0:ye("Cannot change priority for a completed task. Use the Revise button to change the task status first.")),class:G(["cursor-pointer",{"text-indigo-600 hover:text-indigo-800":r.value.status!=="Done","text-gray-500":r.value.status==="Done"}])},[i("span",{class:G({"text-red-600 font-medium":r.value.priority==="high","text-yellow-600 font-medium":r.value.priority==="medium","text-green-600 font-medium":r.value.priority==="low"})},P(r.value.priority?r.value.priority.charAt(0).toUpperCase()+r.value.priority.slice(1):"Medium"),3),r.value.status!=="Done"?(u(),f("span",Wf,"(Click to edit)")):b("",!0)],2))])]),i("div",Ff,[v(q,{class:"min-w-[100px] text-gray-600"},{default:x(()=>D[27]||(D[27]=[T("Created:",-1)])),_:1,__:[27]}),i("span",Vf,P(r.value.created_at?new Date(r.value.created_at).toLocaleDateString():"N/A"),1)]),i("div",Hf,[v(q,{class:"min-w-[100px] text-gray-600 mt-1"},{default:x(()=>D[28]||(D[28]=[T("Tags:",-1)])),_:1,__:[28]}),i("div",Bf,[(u(!0),f(ue,null,ce(r.value.tags,Q=>(u(),f("span",{key:Q.id,class:"inline-flex items-center px-3 py-1 text-sm font-medium bg-indigo-100 text-indigo-800 rounded-full shadow-sm"},P(Q.name),1))),128)),!r.value.tags||r.value.tags.length===0?(u(),f("span",zf,"No tags")):b("",!0)])])]),i("div",Gf,[i("div",qf,[D[31]||(D[31]=i("h5",{class:"text-lg font-semibold text-gray-800"},"Notes",-1)),v(ve,{onClick:re,class:"bg-indigo-600 hover:bg-indigo-700 transition-colors"},{default:x(()=>D[30]||(D[30]=[T(" Add Note ",-1)])),_:1,__:[30]})]),r.value.notes&&r.value.notes.length>0?(u(),f("div",Zf,[(u(!0),f(ue,null,ce(r.value.notes,Q=>(u(),f("div",{key:Q.id,class:"p-3 bg-gray-50 rounded-md"},[i("p",Jf,P(Q.content),1),i("p",Qf," By "+P(Q.creator_name||"Unknown")+" on "+P(new Date(Q.created_at).toLocaleDateString()),1)]))),128))])):(u(),f("div",Kf,"No notes for this task yet."))]),i("div",Xf,[D[32]||(D[32]=i("h5",{class:"text-lg font-semibold text-gray-800 border-b pb-2 mb-4"},"History",-1)),v(rf,{activities:j.value,loading:N.value},null,8,["activities","loading"])])])):(u(),f("div",em," Select a task to view details. ")),r.value&&r.value.status!=="Done"?(u(),f("div",tm,[v(da,{onClick:X,disabled:r.value.status!=="To Do"},{default:x(()=>D[33]||(D[33]=[T(" Delete Task ",-1)])),_:1,__:[33]},8,["disabled"]),r.value.status!=="To Do"?(u(),f("p",sm,"Task can only be deleted in 'To Do' status.")):b("",!0)])):b("",!0),v(qc,{show:S.value,"task-for-note":r.value,onClose:D[9]||(D[9]=Q=>S.value=!1),onNoteAdded:Ae},null,8,["show","task-for-note"]),v(Ss,{show:vt.value,onClose:D[12]||(D[12]=Q=>vt.value=!1)},{default:x(()=>[i("div",am,[D[37]||(D[37]=i("h2",{class:"text-lg font-medium text-gray-900 mb-4"}," Block Task ",-1)),i("div",rm,[D[34]||(D[34]=i("p",{class:"text-sm text-gray-600 mb-2"}," Please provide a reason for blocking this task: ",-1)),de(i("textarea",{"onUpdate:modelValue":D[10]||(D[10]=Q=>rt.value=Q),class:"w-full rounded-md shadow-sm border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",rows:"3",placeholder:"Enter reason for blocking..."},null,512),[[Le,rt.value]])]),i("div",om,[v(Mt,{onClick:D[11]||(D[11]=Q=>vt.value=!1)},{default:x(()=>D[35]||(D[35]=[T(" Cancel ",-1)])),_:1,__:[35]}),v(ve,{onClick:ir,disabled:!rt.value.trim(),class:"bg-red-600 hover:bg-red-700"},{default:x(()=>D[36]||(D[36]=[T(" Block Task ",-1)])),_:1,__:[36]},8,["disabled"])])])]),_:1},8,["show"])])}}},im={key:1,class:"p-4 text-gray-500"},lm={key:0,class:"flex justify-end space-x-3"},um={__name:"TaskSidebar",emits:["taskUpdated","taskDeleted"],setup(e){const t=O(null);return(s,a)=>(u(),E(fa,{show:I(qe).show,"onUpdate:show":I(us),title:I(qe).taskId?"Task Details":"Details",initialWidth:50},{content:x(()=>[I(qe).taskId?(u(),E(nm,{key:0,"task-id":I(qe).taskId,"project-id":I(qe).projectId,"project-users":I(qe).projectUsers,ref_key:"taskDetailSidebarRef",ref:t,onClose:I(us),onTaskUpdated:a[0]||(a[0]=r=>{s.$emit("taskUpdated",r)}),onTaskDeleted:a[1]||(a[1]=r=>{s.$emit("taskDeleted",r),I(us)()})},null,8,["task-id","project-id","project-users","onClose"])):I(qe).show?(u(),f("div",im," No task selected or task ID is missing. ")):b("",!0)]),footer:x(()=>[I(qe).taskId?(u(),f("div",lm,[t.value&&t.value.task&&t.value.task.status!=="In Progress"&&t.value.task.status!=="Done"?(u(),E(Mt,{key:0,onClick:t.value.startTask,class:"bg-blue-50 text-blue-700 hover:bg-blue-100"},{default:x(()=>a[2]||(a[2]=[T(" Start Task ",-1)])),_:1,__:[2]},8,["onClick"])):b("",!0),t.value&&t.value.task&&t.value.task.status==="In Progress"?(u(),E(Mt,{key:1,onClick:t.value.completeTask,class:"bg-green-50 text-green-700 hover:bg-green-100"},{default:x(()=>a[3]||(a[3]=[T(" Complete Task ",-1)])),_:1,__:[3]},8,["onClick"])):b("",!0),t.value&&t.value.task?(u(),E(da,{key:2,onClick:t.value.deleteTask,class:"bg-red-50 text-red-700 hover:bg-red-100"},{default:x(()=>a[4]||(a[4]=[T(" Delete Task ",-1)])),_:1,__:[4]},8,["onClick"])):b("",!0)])):b("",!0)]),_:1},8,["show","onUpdate:show","title"]))}},dm={class:"flex h-screen overflow-hidden"},cm={class:"flex-1 flex flex-col overflow-hidden"},fm={key:0,class:"bg-white shadow"},mm={class:"mx-auto max-w-7xl px-4 py-6 sm:px-6 lg:px-8"},hm={class:"flex-1 overflow-y-auto"},Om={__name:"AuthenticatedLayout",setup(e){const t=O(!1),s=O(!1),a=O(!1),r=O([]),o=O(!0),n=H(()=>Ot().props.id||null),l=O(null),m=async()=>{const S=localStorage.getItem("authToken");if(S){window.axios.defaults.headers.common.Authorization=`Bearer ${S}`;try{await window.axios.get("/api/user")}catch(y){y.response&&y.response.status===401&&(console.log("Session expired, redirecting to login"),localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization,window.location.href="/login")}}else delete window.axios.defaults.headers.common.Authorization},c=()=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization},p=S=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization,window.location.href="/login"},g=async()=>{o.value=!0;try{const S=await window.axios.get("/api/projects-simplified");r.value=S.data}catch(S){console.error("Error fetching all projects for sidebar:",S),r.value=[]}finally{o.value=!1}},$=S=>{yr.visit(route("projects.show",S))},j=H(()=>Dt.value.notifications.filter(S=>!S.isRead).length),N=S=>{console.log("Task updated globally.",S)},k=S=>{console.log("Task deleted globally.",S)};return Pt(()=>{m(),l.value&&vr(l.value),g(),gr()}),(S,y)=>(u(),f("div",dm,[v(jr,{ref_key:"standardNotificationContainerRef",ref:l},null,512),v(Ar,{"sidebar-is-open":I(Dt).show},null,8,["sidebar-is-open"]),v(yo),v(ni,{"all-projects":r.value,"active-project-id":n.value,onProjectSelected:$},null,8,["all-projects","active-project-id"]),i("div",cm,[v(Yi,{"unread-notification-count":j.value,onOpenCreateTaskModal:y[0]||(y[0]=d=>s.value=!0),onOpenAddResource:y[1]||(y[1]=d=>a.value=!0),onOpenNotificationsSidebar:I(Zs)},null,8,["unread-notification-count","onOpenNotificationsSidebar"]),v(ji,{"showing-navigation-dropdown":t.value,"unread-notification-count":j.value,onOpenCreateTaskModal:y[2]||(y[2]=d=>s.value=!0),onOpenAddResource:y[3]||(y[3]=d=>a.value=!0),onOpenNotificationsSidebar:I(Zs),onLogoutSuccess:c,onLogoutError:p},null,8,["showing-navigation-dropdown","unread-notification-count","onOpenNotificationsSidebar"]),S.$slots.header?(u(),f("header",fm,[i("div",mm,[Ye(S.$slots,"header")])])):b("",!0),i("main",hm,[Ye(S.$slots,"default")]),v(en,{show:s.value,onClose:y[4]||(y[4]=d=>s.value=!1),onSaved:y[5]||(y[5]=d=>s.value=!1)},null,8,["show"]),v(rn,{"api-endpoint":"/api/shareable-resources",show:a.value,onClose:y[6]||(y[6]=d=>a.value=!1)},null,8,["show"])]),v(um,{onTaskUpdated:N,onTaskDeleted:k}),v(Yn)]))}};export{Zt as B,rn as C,ca as T,Om as _,mo as a,Pm as b,Ym as c,uf as d,mf as e,Tm as f,hf as g,ff as h,df as i,M as j,Wo as k,qc as l,$m as m,en as n,Cm as o,nf as p,lf as r,of as s,cf as u};
