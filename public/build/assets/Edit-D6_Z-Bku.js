import{x as k,c as V,o as a,a as p,b as s,d as E,e as i,u as t,f,j,v as P,h as d,F as _,i as x,t as u,l as $,g as C,S as N,k as v,n as S,m as B}from"./app-BFd-8kIE.js";import{_ as U}from"./AuthenticatedLayout-7KjWacK4.js";import{_ as g}from"./InputError-DhXOP2h9.js";import{_ as y,a as M}from"./TextInput-BDV5wMMi.js";import{P as R}from"./PrimaryButton-CCPqaBb5.js";import"./ApplicationLogo-C0WcFAYF.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const D={class:"font-semibold text-xl text-gray-800 leading-tight"},O={class:"py-12"},T={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},q={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},A={class:"p-6 bg-white border-b border-gray-200"},F={class:"mb-6"},z={class:"mb-6"},L={class:"mb-6"},G={class:"mb-6"},H={key:0,class:"text-sm text-gray-500"},I={key:1},J={class:"font-medium text-gray-700 mb-2"},K={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2"},Q={class:"flex items-center h-5"},W=["id","value"],X={class:"ml-3 text-sm"},Y=["for"],Z={key:0,class:"text-gray-500"},ee={class:"flex items-center justify-end mt-4"},le={__name:"Edit",props:{role:Object,permissions:Object,rolePermissions:Array},setup(c){const m=c,e=k({name:m.role.name,description:m.role.description||"",type:m.role.type||"",permissions:m.rolePermissions||[]}),h=async()=>{try{e.processing=!0;const r=await B.put(`/api/roles/${m.role.id}`,{name:e.name,description:e.description,permissions:e.permissions,type:e.type||"application"});e.clearErrors(),console.log("Role updated successfully",r.data)}catch(r){r.response&&r.response.status===422?(e.setError("name",r.response.data.errors.name),e.setError("description",r.response.data.errors.description),e.setError("permissions",r.response.data.errors.permissions)):console.error("Error updating role:",r)}finally{e.processing=!1}};return(r,o)=>(a(),V(U,null,{header:p(()=>[s("h2",D," Edit Role: "+u(c.role.name),1)]),default:p(()=>[s("div",O,[s("div",T,[s("div",q,[s("div",A,[s("form",{onSubmit:E(h,["prevent"])},[s("div",F,[i(y,{for:"name",value:"Name"}),i(M,{id:"name",type:"text",class:"mt-1 block w-full",modelValue:t(e).name,"onUpdate:modelValue":o[0]||(o[0]=n=>t(e).name=n),required:"",autofocus:""},null,8,["modelValue"]),i(g,{class:"mt-2",message:t(e).errors.name},null,8,["message"])]),s("div",z,[i(y,{for:"description",value:"Description"}),f(s("textarea",{id:"description",class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm","onUpdate:modelValue":o[1]||(o[1]=n=>t(e).description=n),rows:"3"},null,512),[[j,t(e).description]]),i(g,{class:"mt-2",message:t(e).errors.description},null,8,["message"])]),s("div",L,[i(y,{for:"type",value:"Role Type"}),f(s("select",{id:"type",class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm","onUpdate:modelValue":o[2]||(o[2]=n=>t(e).type=n),required:""},o[4]||(o[4]=[s("option",{value:""},"Select a type",-1),s("option",{value:"application"},"Application",-1),s("option",{value:"client"},"Client",-1),s("option",{value:"project"},"Project",-1)]),512),[[P,t(e).type]]),i(g,{class:"mt-2",message:t(e).errors.type},null,8,["message"])]),s("div",G,[o[5]||(o[5]=s("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Permissions",-1)),Object.keys(c.permissions).length===0?(a(),d("div",H," No permissions available. Please create some permissions first. ")):(a(),d("div",I,[(a(!0),d(_,null,x(c.permissions,(n,b)=>(a(),d("div",{key:b,class:"mb-4"},[s("h4",J,u(b),1),s("div",K,[(a(!0),d(_,null,x(n,l=>(a(),d("div",{key:l.id,class:"flex items-start"},[s("div",Q,[f(s("input",{id:`permission-${l.id}`,type:"checkbox",value:l.id,"onUpdate:modelValue":o[3]||(o[3]=w=>t(e).permissions=w),class:"focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300 rounded"},null,8,W),[[$,t(e).permissions]])]),s("div",X,[s("label",{for:`permission-${l.id}`,class:"font-medium text-gray-700"},u(l.name),9,Y),l.description?(a(),d("p",Z,u(l.description),1)):C("",!0)])]))),128))])]))),128))])),i(g,{class:"mt-2",message:t(e).errors.permissions},null,8,["message"])]),s("div",ee,[i(t(N),{href:r.route("admin.roles.index"),class:"inline-flex items-center px-4 py-2 bg-gray-300 border border-transparent rounded-md font-semibold text-xs text-gray-800 uppercase tracking-widest hover:bg-gray-400 active:bg-gray-500 focus:outline-none focus:border-gray-500 focus:ring focus:ring-gray-300 disabled:opacity-25 transition mr-2"},{default:p(()=>o[6]||(o[6]=[v(" Cancel ")])),_:1,__:[6]},8,["href"]),i(R,{class:S(["ml-4",{"opacity-25":t(e).processing}]),disabled:t(e).processing},{default:p(()=>o[7]||(o[7]=[v(" Update Role ")])),_:1,__:[7]},8,["class","disabled"])])],32)])])])])]),_:1}))}};export{le as default};
