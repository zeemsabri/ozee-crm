import{s as g,r as u,w as p,c as N,o as f,a as i,b as n,h as y,g as $,t as x,d as b,e as r,k as _}from"./app-B738Rhv8.js";import{a as j,_ as k}from"./SecondaryButton-DrvFxIfD.js";import{_ as V,a as B}from"./InputError-D5pctweW.js";import{_ as C}from"./TextInput-Bkzlu6i5.js";import{P as h}from"./PrimaryButton-DgtrenrK.js";import{s as A}from"./AuthenticatedLayout-Cl9mjPQX.js";const E={class:"p-6"},F={key:0,class:"text-red-600 text-sm mb-4"},I={class:"mb-4"},M={class:"mt-6 flex justify-end"},z={__name:"NotesModal",props:{show:Boolean,projectId:Number},emits:["close","noteAdded"],setup(m,{emit:v}){const d=m,c=v,s=g({project_id:null,content:""}),a=u({}),o=u("");p(()=>d.projectId,e=>{e&&(s.project_id=e)},{immediate:!0}),p(()=>d.show,e=>{e&&(s.project_id=d.projectId,s.content="",a.value={},o.value="")});const w=async()=>{a.value={},o.value="";try{await window.axios.post(`/api/projects/${s.project_id}/notes`,{notes:[{content:s.content}]}),A("Note added successfully!"),c("noteAdded"),c("close")}catch(e){e.response&&e.response.status===422?a.value=e.response.data.errors:e.response&&e.response.data.message?(o.value=e.response.data.message,e(e.response.data.message)):(o.value="Failed to add note.",e("Failed to add note."),console.error("Error adding note:",e))}};return(e,t)=>(f(),N(k,{show:m.show,onClose:t[2]||(t[2]=l=>e.$emit("close"))},{default:i(()=>[n("div",E,[t[5]||(t[5]=n("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Add Note",-1)),o.value?(f(),y("div",F,x(o.value),1)):$("",!0),n("form",{onSubmit:b(w,["prevent"])},[n("div",I,[r(V,{for:"note_content",value:"Note Content"}),r(C,{id:"note_content",type:"text",class:"mt-1 block w-full",modelValue:s.content,"onUpdate:modelValue":t[0]||(t[0]=l=>s.content=l),required:""},null,8,["modelValue"]),r(B,{message:a.value["notes.0.content"]?a.value["notes.0.content"][0]:"",class:"mt-2"},null,8,["message"])]),n("div",M,[r(j,{onClick:t[1]||(t[1]=l=>e.$emit("close"))},{default:i(()=>t[3]||(t[3]=[_("Cancel")])),_:1,__:[3]}),r(h,{class:"ms-3",type:"submit"},{default:i(()=>t[4]||(t[4]=[_("Add Note")])),_:1,__:[4]})])],32)])]),_:1},8,["show"]))}};export{z as _};
