import{a as o,o as n,b as u,r as f,c as C,f as $,Q as j,e as R,q as K,d as M,i as x,t as v,F as L,l as B,m as A,x as O,u as w,j as y,J as z,v as H,k as I,g as q,n as F}from"./app-BXwNPRau.js";import{r as U}from"./ChevronDownIcon-5n4swiT9.js";function Z(s,m){return n(),o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[u("path",{"fill-rule":"evenodd",d:"M16.704 4.153a.75.75 0 0 1 .143 1.052l-8 10.5a.75.75 0 0 1-1.127.075l-4.5-4.5a.75.75 0 0 1 1.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 0 1 1.05-.143Z","clip-rule":"evenodd"})])}function J(s,m){return n(),o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[u("path",{d:"M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z"})])}const Q=["disabled"],G={key:0,class:"flex flex-wrap gap-1 items-center"},P={key:0,class:"text-gray-500"},W={class:"absolute z-50 mt-1 w-full rounded-xl shadow-lg bg-white ring-1 ring-black ring-opacity-5"},X={class:"p-2 border-b border-gray-200"},Y=["onClick"],_={key:0,class:"block px-4 py-2 text-sm text-gray-500"},le={__name:"MultiSelectDropdown",props:{modelValue:{type:[String,Number,Object,Array,null],default:null},options:{type:Array,default:()=>[]},placeholder:{type:String,default:"Select an option"},valueKey:{type:String,default:"value"},labelKey:{type:String,default:"label"},isMulti:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},required:{type:Boolean,default:!1},maxHeight:{type:String,default:"250px"},width:{type:String,default:"full"},labelClass:{type:String,default:"text-xs"}},emits:["update:modelValue","change"],setup(s,{emit:m}){const e=s,d=m,r=f(!1),i=f(""),g=f(null),p=f(null),b=C(()=>{if(!i.value)return e.options;const l=i.value.toLowerCase();return e.options.filter(t=>t[e.labelKey].toLowerCase().includes(l))}),k=l=>!e.isMulti||!e.modelValue?!1:Array.isArray(e.modelValue)&&e.modelValue.includes(l[e.valueKey]),E=l=>{if(e.isMulti){let t=e.modelValue?[...e.modelValue]:[];const a=l[e.valueKey],c=t.indexOf(a);c>-1?t.splice(c,1):t.push(a),d("update:modelValue",t),d("change",t)}else d("update:modelValue",l[e.valueKey]),d("change",l[e.valueKey]),r.value=!1,i.value=""},N=l=>{if(!e.isMulti||!e.modelValue)return;const t=e.modelValue.filter(a=>a!==l);d("update:modelValue",t),d("change",t)},h=C(()=>e.isMulti?e.options.filter(t=>Array.isArray(e.modelValue)&&e.modelValue.includes(t[e.valueKey])).map(t=>t[e.labelKey]):e.placeholder),V=l=>{g.value&&!g.value.contains(l.target)&&(r.value=!1,i.value="")},S=l=>{l.key==="Escape"&&r.value&&(r.value=!1,i.value="")};$(()=>{document.addEventListener("click",V),document.addEventListener("keydown",S)}),j(()=>{document.removeEventListener("click",V),document.removeEventListener("keydown",S)});const T=()=>{e.disabled||(r.value=!r.value,r.value&&F(()=>{p.value&&p.value.focus()}))};return R(()=>e.modelValue,l=>{(l==null||e.isMulti&&Array.isArray(l)&&l.length===0)&&(i.value="")},{deep:!0}),(l,t)=>(n(),o("div",{ref_key:"dropdownRef",ref:g,class:y(["relative",{"w-full":s.width==="full"}])},[u("button",{type:"button",onClick:T,disabled:s.disabled,class:y(["border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-xl shadow-sm mt-1 block w-full text-left px-3 py-2 text-gray-700 bg-white relative flex items-center justify-between",{"opacity-50 cursor-not-allowed":s.disabled}])},[s.isMulti?(n(),o("div",G,[h.value.length===0?(n(),o("span",P,v(s.placeholder),1)):x("",!0),(n(!0),o(L,null,B(h.value,a=>(n(),o("span",{key:a,class:"bg-indigo-100 text-indigo-800 px-2 py-1 rounded-full text-xs font-medium flex items-center gap-1"},[A(v(a)+" ",1),M(w(J),{class:"w-3 h-3 cursor-pointer hover:text-indigo-600",onClick:O(c=>N(s.options.find(D=>D[s.labelKey]===a)[s.valueKey]),["stop"])},null,8,["onClick"])]))),128))])):(n(),o("span",{key:1,class:y({"text-gray-500":!s.modelValue})},v(h.value),3)),M(w(U),{class:"h-5 w-5 text-gray-500"})],10,Q),K(u("div",W,[u("div",X,[K(u("input",{ref_key:"searchInputRef",ref:p,type:"text","onUpdate:modelValue":t[0]||(t[0]=a=>i.value=a),onInput:t[1]||(t[1]=a=>r.value=!0),class:"block w-full rounded-xl border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-sm",placeholder:"Search...",onClick:t[2]||(t[2]=O(()=>{},["stop"]))},null,544),[[H,i.value]])]),u("div",{class:"py-1 overflow-y-auto",style:I({maxHeight:s.maxHeight})},[(n(!0),o(L,null,B(b.value,a=>(n(),o("div",{key:a[s.valueKey],onClick:c=>E(a),class:y(["block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 cursor-pointer flex items-center justify-between",{"bg-gray-100":k(a)}])},[A(v(a[s.labelKey])+" ",1),k(a)?(n(),q(w(Z),{key:0,class:"w-4 h-4 text-indigo-600"})):x("",!0)],10,Y))),128)),b.value.length===0?(n(),o("div",_," No options available ")):x("",!0)],4)],512),[[z,r.value]])],2))}};export{le as _};
