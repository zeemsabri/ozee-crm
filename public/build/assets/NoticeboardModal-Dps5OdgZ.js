import{r as f,e as b,a as r,i as p,o as a,b as e,t as y,j as m,F as j,l as $,p as M,M as B,H as I,c as C,d as k,m as N,u as w,g as F,S as L,x as V,A as O}from"./app-DuVs67_v.js";const E=["checked","onChange"],ge={__name:"ChecklistComponent",props:{items:{type:Array,required:!0},apiEndpoint:{type:String,required:!0},title:{type:String,default:"Checklist"},containerClass:{type:String,default:"mt-4 p-3 bg-gray-100 rounded-lg text-sm text-gray-700 border border-gray-200"},titleClass:{type:String,default:"font-semibold text-gray-900 mb-2"},itemsContainerClass:{type:String,default:"space-y-1"},itemClass:{type:String,default:"flex items-center space-x-2"},checkboxClass:{type:String,default:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"},completedItemClass:{type:String,default:"line-through text-gray-500"},successMessage:{type:String,default:"Checklist item updated!"},errorMessage:{type:String,default:"Failed to update checklist item"},payloadTransformer:{type:Function,default:null},checkListStyle:{type:String,default:"checklist"}},emits:["update:items","item-toggled"],setup(s,{emit:u}){const n=s,g=u,o=f(JSON.parse(JSON.stringify(n.items)));b(()=>n.items,l=>{o.value=JSON.parse(JSON.stringify(l))},{deep:!0});async function v(l){const h=o.value[l],t=!h.completed;h.completed=t;try{let c;n.payloadTransformer?c=n.payloadTransformer(o.value,l):c={items:o.value},await M.put(n.apiEndpoint,c),g("update:items",o.value),g("item-toggled",{index:l,item:h,completed:t}),B(n.successMessage)}catch(c){console.error("Error updating checklist item:",c),h.completed=!t,I(n.errorMessage)}}return(l,h)=>o.value&&o.value.length>0?(a(),r("div",{key:0,class:m(s.containerClass)},[e("p",{class:m(s.titleClass)},y(s.title),3),e("ul",{class:m(s.itemsContainerClass)},[(a(!0),r(j,null,$(o.value,(t,c)=>(a(),r("li",{key:c,class:m(s.itemClass)},[s.checkListStyle==="checklist"?(a(),r("input",{key:0,type:"checkbox",checked:t.completed,onChange:_=>v(c),class:m(s.checkboxClass)},null,42,E)):p("",!0),e("span",{class:m({[s.completedItemClass]:t.completed})},y(t.name),3)],2))),128))],2)],2)):p("",!0)}};function H(s,u){return a(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"})])}function S(s,u){return a(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0M3.124 7.5A8.969 8.969 0 0 1 5.292 3m13.416 0a8.969 8.969 0 0 1 2.168 4.5"})])}function J(s,u){return a(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75 11.25 15 15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068a3.745 3.745 0 0 1-1.043 3.296 3.745 3.745 0 0 1-3.296 1.043A3.745 3.745 0 0 1 12 21c-1.268 0-2.39-.63-3.068-1.593a3.746 3.746 0 0 1-3.296-1.043 3.745 3.745 0 0 1-1.043-3.296A3.745 3.745 0 0 1 3 12c0-1.268.63-2.39 1.593-3.068a3.745 3.745 0 0 1 1.043-3.296 3.746 3.746 0 0 1 3.296-1.043A3.746 3.746 0 0 1 12 3c1.268 0 2.39.63 3.068 1.593a3.746 3.746 0 0 1 3.296 1.043 3.746 3.746 0 0 1 1.043 3.296A3.745 3.745 0 0 1 21 12Z"})])}function T(s,u){return a(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})])}function D(s,u){return a(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.34 15.84c-.688-.06-1.386-.09-2.09-.09H7.5a4.5 4.5 0 1 1 0-9h.75c.704 0 1.402-.03 2.09-.09m0 9.18c.253.962.584 1.892.985 2.783.247.55.06 1.21-.463 1.511l-.657.38c-.551.318-1.26.117-1.527-.461a20.845 20.845 0 0 1-1.44-4.282m3.102.069a18.03 18.03 0 0 1-.59-4.59c0-1.586.205-3.124.59-4.59m0 9.18a23.848 23.848 0 0 1 8.835 2.535M10.34 6.66a23.847 23.847 0 0 0 8.835-2.535m0 0A23.74 23.74 0 0 0 18.795 3m.38 1.125a23.91 23.91 0 0 1 1.014 5.395m-1.014 8.855c-.118.38-.245.754-.38 1.125m.38-1.125a23.91 23.91 0 0 0 1.014-5.395m0-3.46c.495.413.811 1.035.811 1.73 0 .695-.316 1.317-.811 1.73m0-3.46a24.347 24.347 0 0 1 0 3.46"})])}function U(s,u){return a(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"})])}const Z={key:0,class:"fixed inset-0 z-[60] flex items-center justify-center p-4"},q={class:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700"},z={class:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2"},W={class:"max-h-[70vh] overflow-y-auto p-6 space-y-4"},G={key:0,class:"text-center text-gray-500 py-8"},K={key:1,class:"bg-gray-50 dark:bg-gray-700 rounded-2xl p-5 shadow-sm border border-gray-200 dark:border-gray-600"},P={class:"flex items-start justify-between gap-4"},Q={class:"flex-1 min-w-0"},R={class:"flex items-center gap-2 mb-2"},X={class:"font-bold text-lg text-gray-900 dark:text-white truncate"},Y={key:0,class:"mb-3"},ee=["src"],te={class:"text-sm text-gray-700 dark:text-gray-300 whitespace-pre-line leading-relaxed"},se={key:0,class:"flex-shrink-0"},ae=["href"],re={key:2,class:"text-xs text-gray-500 dark:text-gray-400 text-right pr-1"},oe={class:"p-6 border-t border-gray-200 dark:border-gray-700 flex flex-col md:flex-row items-center justify-between gap-4"},ne={class:"flex items-center w-full md:w-auto"},le={class:"flex justify-end gap-3 w-full md:w-auto"},ie=["disabled"],ce={key:0},de={key:1},he={__name:"NoticeboardModal",props:{show:{type:Boolean,default:!1},unreadNotices:{type:Array,default:()=>[]}},emits:["close"],setup(s,{emit:u}){const n=s,g=u,o=f(!1),v=f(!1),l=f(0);b(()=>n.show,d=>{d&&(l.value=0,o.value=!1)}),b(()=>n.unreadNotices,()=>{l.value>=n.unreadNotices.length&&(l.value=0)});const h=C(()=>n.unreadNotices.length),t=C(()=>n.unreadNotices[l.value]||null),c=async()=>{if(!(!o.value||v.value)){if(!t.value){g("close");return}v.value=!0;try{const d=t.value.id;await M.post("/api/notices/acknowledge",{notice_ids:[d]}),o.value=!1,l.value+1<n.unreadNotices.length?l.value+=1:g("close")}catch(d){console.error("Failed to acknowledge notices",d)}finally{v.value=!1}}},_=d=>{switch(d){case"Warning":return T;case"Updates":return D;case"Final Notice":return J;default:return S}},A=d=>{switch(d){case"Warning":return"text-red-500 bg-red-100";case"Updates":return"text-blue-500 bg-blue-100";case"Final Notice":return"text-yellow-500 bg-yellow-100";default:return"text-indigo-500 bg-indigo-100"}};return(d,i)=>s.show?(a(),r("div",Z,[e("div",{class:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:i[0]||(i[0]=x=>g("close"))}),e("div",{class:m(["relative bg-white dark:bg-gray-800 rounded-3xl shadow-2xl max-w-2xl w-full mx-auto transform transition-all duration-300 scale-100",{"scale-95 opacity-0":!s.show}])},[e("div",q,[e("h3",z,[k(w(S),{class:"h-7 w-7 text-indigo-500"}),i[4]||(i[4]=N(" Important Notices ",-1))]),e("button",{onClick:i[1]||(i[1]=x=>g("close")),class:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors rounded-full hover:bg-gray-100 dark:hover:bg-gray-700"},[k(w(U),{class:"h-6 w-6"})])]),e("div",W,[t.value?(a(),r("div",K,[e("div",P,[e("div",Q,[e("div",R,[(a(),F(L(_(t.value.type)),{class:m(["h-5 w-5",A(t.value.type)])},null,8,["class"])),e("div",X,y(t.value.title),1)]),t.value.thumbnail_url_public?(a(),r("div",Y,[e("img",{src:t.value.thumbnail_url_public,alt:"Notice image",class:"w-full h-auto rounded-lg object-cover"},null,8,ee)])):p("",!0),e("div",te,y(t.value.description),1)]),t.value.url?(a(),r("div",se,[e("a",{href:`/notices/${t.value.id}/redirect`,target:"_blank",class:"flex items-center text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-200 transition-colors font-medium text-sm"},[i[5]||(i[5]=N(" Open Link ",-1)),k(w(H),{class:"h-4 w-4 ml-1"})],8,ae)])):p("",!0)])])):(a(),r("div",G," All notices have been read. ")),t.value&&h.value>1?(a(),r("div",re," Notice "+y(l.value+1)+" of "+y(h.value),1)):p("",!0)]),e("div",oe,[e("div",ne,[V(e("input",{id:"acknowledge",type:"checkbox","onUpdate:modelValue":i[2]||(i[2]=x=>o.value=x),class:"h-5 w-5 text-indigo-600 rounded-lg border-gray-300 dark:border-gray-500 dark:bg-gray-600 focus:ring-indigo-500 focus:ring-offset-0 transition-colors"},null,512),[[O,o.value]]),i[6]||(i[6]=e("label",{for:"acknowledge",class:"ml-3 text-sm text-gray-700 dark:text-gray-300 select-none"}," I have read and understood this notice. ",-1))]),e("div",le,[e("button",{onClick:i[3]||(i[3]=x=>g("close")),class:"px-5 py-2.5 rounded-xl border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors text-sm font-medium"}," Close "),e("button",{onClick:c,disabled:!o.value||v.value,class:"px-5 py-2.5 bg-indigo-600 text-white rounded-xl shadow-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-indigo-700 transition-colors text-sm font-medium"},[v.value?(a(),r("span",ce,"Acknowledging...")):(a(),r("span",de,"Acknowledge"))],8,ie)])])],2)])):p("",!0)}};export{ge as _,he as a,U as b,T as r};
