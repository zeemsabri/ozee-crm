import{d as U}from"./vuedraggable.umd-CzETQHYO.js";import{_ as k}from"./TextInput-NaXOPvP6.js";import{_ as w}from"./PrimaryButton-B0ACJT5L.js";import{r as z}from"./InformationCircleIcon-BJsN6yaN.js";import{r as M}from"./TrashIcon-B2Fn8GfW.js";import{r as P,e as V,a as u,o as n,b as s,d as i,i as m,g as T,w as f,m as p,u as g}from"./app-BeWHP9Dz.js";const R={class:"space-y-3"},S={class:"flex items-start gap-3"},I={class:"flex gap-2"},D={key:0,class:"flex items-start text-sm text-gray-600 bg-gray-50 border border-gray-200 rounded-md px-3 py-2"},E={class:"flex items-start gap-2"},Y={class:"flex-1"},F={key:0,class:"grid grid-cols-1 sm:grid-cols-2 gap-2 w-full"},j={key:1},q={class:"mt-1 flex gap-2"},G=["onClick"],H=["onClick"],J=["onClick"],ee={__name:"RepeatableDynamicField",props:{modelValue:{type:Array,default:()=>[]},allowLinks:{type:Boolean,default:!1},placeholderName:{type:String,default:"item"},addButtonText:{type:String,default:"Add item"},labelPlaceholder:{type:String,default:"Label"},urlPlaceholder:{type:String,default:"https://example.com"},itemPlaceholder:{type:String,default:"Enter value"}},emits:["update:modelValue"],setup(o,{emit:_}){const b=o,$=_,l=P([...b.modelValue]);V(()=>b.modelValue,t=>{l.value=Array.isArray(t)?[...t]:[]},{deep:!0}),V(l,t=>{$("update:modelValue",t)},{deep:!0});const x=/^\((.*?)\)\[(.*?)\]$/,C=()=>{l.value.push("")},L=()=>{l.value.push("(Label)[]")},N=t=>{window.confirm("Remove this item?")&&l.value.splice(t,1)},v=t=>typeof t=="string"&&x.test(t),c=t=>{const e=typeof t=="string"?t.match(x):null;return{label:e?e[1]:"",url:e?e[2]:""}},h=(t,e)=>`(${t||""})[${e||""}]`,A=t=>{const e=l.value[t]??"";l.value[t]=h(e,"")},B=t=>{const{label:e,url:d}=c(l.value[t]);l.value[t]=e||d||""};return(t,e)=>(n(),u("div",R,[s("div",S,[s("div",I,[i(w,{type:"button",onClick:C},{default:f(()=>e[1]||(e[1]=[p(" Add text ",-1)])),_:1,__:[1]}),o.allowLinks?(n(),T(w,{key:0,type:"button",onClick:L},{default:f(()=>e[2]||(e[2]=[p(" Add link ",-1)])),_:1,__:[2]})):m("",!0)]),o.allowLinks?(n(),u("div",D,[i(g(z),{class:"h-5 w-5 text-indigo-500 mr-2 mt-0.5"}),e[3]||(e[3]=s("div",null,[p(" You can insert inline links by typing: "),s("code",null,"(Label)[https://example.com]"),p(" inside any text item. You can also add a dedicated link item with the button. Drag to reorder. ")],-1))])):m("",!0)]),i(g(U),{modelValue:l.value,"onUpdate:modelValue":e[0]||(e[0]=d=>l.value=d),"item-key":"__index",handle:".drag-handle",class:"space-y-2"},{item:f(({element:d,index:a})=>[s("div",E,[e[4]||(e[4]=s("button",{type:"button",class:"drag-handle cursor-move text-gray-400 hover:text-gray-600 p-2","aria-label":"Drag to reorder"},[s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[s("path",{d:"M7 4a1 1 0 110-2 1 1 0 010 2zM13 4a1 1 0 110-2 1 1 0 010 2zM7 11a1 1 0 110-2 1 1 0 010 2zM13 11a1 1 0 110-2 1 1 0 010 2zM7 18a1 1 0 110-2 1 1 0 010 2zM13 18a1 1 0 110-2 1 1 0 010 2z"})])],-1)),s("div",Y,[v(d)?(n(),u("div",F,[i(k,{id:`${o.placeholderName}-${a}-label`,type:"text",class:"block w-full",placeholder:o.labelPlaceholder,"model-value":c(d).label,"onUpdate:modelValue":r=>{const y=c(l.value[a]);l.value[a]=h(r,y.url)}},null,8,["id","placeholder","model-value","onUpdate:modelValue"]),i(k,{id:`${o.placeholderName}-${a}-url`,type:"url",class:"block w-full",placeholder:o.urlPlaceholder,"model-value":c(d).url,"onUpdate:modelValue":r=>{const y=c(l.value[a]);l.value[a]=h(y.label,r)}},null,8,["id","placeholder","model-value","onUpdate:modelValue"])])):(n(),u("div",j,[i(k,{id:`${o.placeholderName}-${a}`,type:"text",class:"block w-full",placeholder:o.itemPlaceholder,modelValue:l.value[a],"onUpdate:modelValue":r=>l.value[a]=r},null,8,["id","placeholder","modelValue","onUpdate:modelValue"])])),s("div",q,[o.allowLinks&&!v(d)?(n(),u("button",{key:0,type:"button",class:"text-xs text-indigo-600 hover:underline",onClick:r=>A(a)},"Convert to link",8,G)):m("",!0),o.allowLinks&&v(d)?(n(),u("button",{key:1,type:"button",class:"text-xs text-indigo-600 hover:underline",onClick:r=>B(a)},"Convert to text",8,H)):m("",!0)])]),s("button",{type:"button",class:"text-red-500 hover:text-red-600 p-2",onClick:r=>N(a),"aria-label":"Remove item"},[i(g(M),{class:"h-5 w-5"})],8,J)])]),_:1},8,["modelValue"])]))}};export{ee as _};
