import{c as d,o as r,a as e,r as b,m as Je,d as Ee,g as L,l as x,v as ge,z as he,y as we,F as k,j as D,n as R,t as l,p as Ke,b as Ie,f as p,u as m,h as Ye,w as ke,i as v,L as ae,q as He,K as Ge,H as Qe}from"./app-WIHyXZWG.js";import{b as We,_ as Xe}from"./AuthenticatedLayout-ECawOVHa.js";import{_ as je}from"./MultiSelectDropdown-CQ__er0G.js";import{R as et}from"./RightSidebar-Ddi9I2oh.js";import{_ as tt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as J}from"./SparklesIcon-Dhv83EGe.js";import{r as st}from"./MagnifyingGlassIcon-TIQqZJB-.js";import{r as ye}from"./CheckCircleIcon-B3AP7h1f.js";import{r as at}from"./BriefcaseIcon-B5DV3wqJ.js";import{r as nt,a as ot}from"./PrinterIcon-CqyQgFCz.js";import{r as it}from"./ChevronDownIcon-BUn8X9fi.js";import{r as Le}from"./ArrowPathIcon-wmM9wm5q.js";import{r as rt}from"./ClockIcon-BqqdT9dL.js";import{r as dt}from"./CalendarIcon-D_ero6TD.js";import"./PrimaryButton-B5t-6tYg.js";import"./Modal-D2bimvxE.js";import"./InputLabel-D5drRsp6.js";import"./InputError-DL1wWT06.js";import"./SecondaryButton--5EITdbj.js";import"./index-zp0iriUz.js";import"./BaseFormModal-Ct6N1dY_.js";import"./TextInput-Ch2VDIcN.js";import"./SelectDropdown-wBt9QVhg.js";/* empty css                                                                       */import"./debounce-C-hnF4Z3.js";import"./ApplicationLogo-CI51ds49.js";import"./createLucideIcon-7Xd9j-yR.js";import"./plus-9y_TYYNb.js";import"./DangerButton-Bim1IEnT.js";import"./moment-BLMuvzoS.js";import"./taskState-cuhgCleq.js";import"./NoticeboardModal-DZoYVtsN.js";import"./x-D9mozYbG.js";function lt(O,U){return r(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m3.75 13.5 10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75Z"})])}function ct(O,U){return r(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 7.5V6.108c0-1.135.845-2.098 1.976-2.192.373-.03.748-.057 1.123-.08M15.75 18H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08M15.75 18.75v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5A3.375 3.375 0 0 0 6.375 7.5H5.25m11.9-3.664A2.251 2.251 0 0 0 15 2.25h-1.5a2.251 2.251 0 0 0-2.15 1.586m5.8 0c.065.21.1.433.1.664v.75h-6V4.5c0-.231.035-.454.1-.664M6.75 7.5H4.875c-.621 0-1.125.504-1.125 1.125v12c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V16.5a9 9 0 0 0-9-9Z"})])}function Be(O,U){return r(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})])}function De(O,U){return r(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"})])}function ut(O,U){return r(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"})])}function pt(O,U){return r(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.05 4.575a1.575 1.575 0 1 0-3.15 0v3m3.15-3v-1.5a1.575 1.575 0 0 1 3.15 0v1.5m-3.15 0 .075 5.925m3.075.75V4.575m0 0a1.575 1.575 0 0 1 3.15 0V15M6.9 7.575a1.575 1.575 0 1 0-3.15 0v8.175a6.75 6.75 0 0 0 6.75 6.75h2.018a5.25 5.25 0 0 0 3.712-1.538l1.732-1.732a5.25 5.25 0 0 0 1.538-3.712l.003-2.024a.668.668 0 0 1 .198-.471 1.575 1.575 0 1 0-2.228-2.228 3.818 3.818 0 0 0-1.12 2.687M6.9 7.575V12m6.27 4.318A4.49 4.49 0 0 1 16.35 15m.002 0h-.002"})])}function re(O,U){return r(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"})])}const gt={class:"relative flex-1"},mt=["onKeydown","placeholder"],xt={key:0,class:"absolute z-50 bottom-full mb-2 w-64 bg-white border border-gray-200 rounded-2xl shadow-2xl max-h-60 overflow-y-auto p-2"},_t=["onClick"],ht={class:"flex items-center gap-2"},yt={class:"h-6 w-6 rounded-lg bg-indigo-100 flex items-center justify-center text-[10px] text-indigo-600 font-black"},ft={class:"text-[9px] text-gray-400 uppercase font-bold"},vt={__name:"MentionInput",props:{projectId:{type:Number,required:!0},placeholder:{type:String,default:"Add quick action point..."},modelValue:{type:String,default:""}},emits:["update:modelValue","submit","user-selected"],setup(O,{expose:U,emit:me}){const K=O,q=me,N=b(K.modelValue);Je(()=>K.modelValue,A=>{N.value=A});const ne=b([]),V=b(!1),P=b([]),S=b(0),Z=b(null),$=b(-1),de=async()=>{try{const A=await window.axios.get(`/api/projects/${K.projectId}/sections/users`);ne.value=A.data.users||A.data||[]}catch(A){console.error("Failed to fetch project users for mentions:",A)}},oe=A=>{q("update:modelValue",N.value);const I=A.target.selectionStart,_=N.value.slice(0,I),M=_.lastIndexOf("@");if(M!==-1&&(M===0||_[M-1]===" ")){const z=_.slice(M+1);$.value=M,P.value=ne.value.filter(E=>E.name.toLowerCase().includes(z.toLowerCase())),P.value.length>0?(V.value=!0,S.value=0):V.value=!1}else V.value=!1},ie=A=>{const I=N.value.slice(0,$.value),_=N.value.slice(Z.value.selectionStart);N.value=`${I}@${A.name} ${_}`,V.value=!1,q("update:modelValue",N.value),q("user-selected",A),Ke(()=>{Z.value.focus()})},le=()=>{V.value&&(S.value=(S.value+1)%P.value.length)},xe=()=>{V.value&&(S.value=(S.value-1+P.value.length)%P.value.length)},Y=()=>{V.value&&P.value.length>0?ie(P.value[S.value]):q("submit")};return Ee(()=>{de()}),U({focus:()=>{var A;return(A=Z.value)==null?void 0:A.focus()},clear:()=>{N.value="",q("update:modelValue","")}}),(A,I)=>(r(),d("div",gt,[L(e("input",{ref_key:"inputRef",ref:Z,type:"text","onUpdate:modelValue":I[0]||(I[0]=_=>N.value=_),onInput:oe,onKeydown:[he(we(le,["prevent"]),["down"]),he(we(xe,["prevent"]),["up"]),he(we(Y,["prevent"]),["enter"]),I[1]||(I[1]=he(_=>V.value=!1,["esc"]))],onBlur:I[2]||(I[2]=_=>A.setTimeout(()=>V.value=!1,200)),placeholder:O.placeholder,class:"w-full rounded-xl border-gray-200 text-sm focus:ring-indigo-500 font-medium h-10 px-4"},null,40,mt),[[ge,N.value]]),V.value&&P.value.length>0?(r(),d("div",xt,[I[3]||(I[3]=e("div",{class:"px-3 py-2 text-[10px] font-black text-gray-400 uppercase tracking-widest border-b border-gray-50 mb-1"},"Project Members",-1)),(r(!0),d(k,null,D(P.value,(_,M)=>{var z,E;return r(),d("div",{key:_.id,onClick:ce=>ie(_),class:R([{"bg-indigo-50 text-indigo-700":S.value===M,"text-gray-700":S.value!==M},"px-3 py-2 text-xs font-bold cursor-pointer rounded-xl hover:bg-gray-50 flex items-center justify-between transition-colors"])},[e("div",ht,[e("div",yt,l(_.name.substring(0,2).toUpperCase()),1),e("span",null,l(_.name),1)]),e("span",ft,l(((z=_.pivot)==null?void 0:z.role)||((E=_.role)==null?void 0:E.name)||"User"),1)],10,_t)}),128))])):x("",!0)]))}},bt={class:"flex justify-between items-center print:hidden"},wt={class:"flex gap-3"},kt=["disabled"],Dt={class:"py-6 bg-gray-50 min-h-screen print:bg-white print:py-0"},Ct={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 space-y-6"},$t={class:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6 print:hidden"},St={class:"grid grid-cols-1 md:grid-cols-5 gap-6 items-end"},At={class:"md:col-span-2"},Mt={class:"text-[10px] font-black text-indigo-600 uppercase mb-2 block flex items-center gap-1"},Tt={class:"mt-6 flex bg-gray-100 p-1 rounded-xl w-full max-w-md mx-auto"},Vt={class:"animate-in fade-in duration-500 space-y-6"},Ut={class:"flex items-center justify-between px-2"},Nt={class:"text-lg font-black text-gray-800 flex items-center gap-2"},Pt={class:"text-xs font-bold text-gray-400 uppercase tracking-widest"},It={key:0,class:"bg-white p-16 rounded-[2.5rem] border-2 border-dashed border-gray-200 text-center"},Ht={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Lt={class:"p-6 bg-gray-50/50 border-b border-gray-100 flex items-center gap-4"},Bt={class:"h-12 w-12 rounded-2xl bg-indigo-600 flex items-center justify-center text-white font-black text-lg shadow-sm"},Et={class:"font-black text-gray-900 leading-tight text-lg"},Ft={class:"p-6 space-y-6 flex-1"},Rt={key:0},Ot={class:"text-[10px] font-black text-indigo-600 uppercase tracking-widest mb-3 flex items-center gap-1"},Zt=["innerHTML"],qt={key:1},zt={class:"text-[10px] font-black text-orange-500 uppercase tracking-widest mb-3 flex items-center gap-1"},Jt={class:"text-[9px] font-black mt-2 text-orange-400 uppercase"},Kt={key:2},Yt={class:"text-[10px] font-black text-green-600 uppercase tracking-widest mb-3 flex items-center gap-1"},Gt={class:"space-y-2"},Qt=["onClick"],Wt={class:"text-xs font-bold text-gray-800"},Xt={key:0,class:"text-[10px] text-gray-400 line-clamp-1 mb-1"},jt={class:"text-[9px] text-gray-400 font-bold uppercase tracking-tight"},es={key:3},ts={class:"text-[10px] font-black text-blue-500 uppercase tracking-widest mb-3 flex items-center gap-1"},ss=["innerHTML"],as={class:"text-[9px] text-blue-400 font-black uppercase"},ns={key:4},os={class:"text-[10px] font-black text-purple-600 uppercase tracking-widest mb-3 flex items-center gap-1"},is={class:"text-xs font-bold text-gray-800 truncate"},rs={key:0,class:"text-[10px] text-purple-600 italic mt-1 font-medium line-clamp-2"},ds={class:"text-[9px] text-purple-400 font-black uppercase mt-1"},ls={class:"animate-in fade-in duration-500 space-y-6"},cs=["onClick"],us={class:"flex items-center space-x-5"},ps={class:"h-14 w-14 rounded-2xl bg-indigo-50 flex items-center justify-center text-indigo-600 shadow-inner"},gs={class:"font-black text-xl text-gray-900 leading-none"},ms={class:"flex items-center gap-3 mt-2"},xs={class:"px-2 py-0.5 rounded-lg text-[10px] font-black uppercase tracking-widest bg-gray-100 text-gray-600"},_s={key:0,class:"flex items-center text-[10px] text-indigo-500 font-bold uppercase"},hs={class:"flex items-center gap-3"},ys=["onClick"],fs={class:"border-t border-gray-100 bg-gray-50/10"},vs={class:"px-8 py-4 bg-white border-b border-gray-100 flex flex-col md:flex-row items-center justify-between gap-4"},bs={class:"flex items-center gap-3 w-full md:w-auto"},ws=["onUpdate:modelValue"],ks=["value"],Ds={class:"flex space-x-1 p-1 bg-gray-100 rounded-xl overflow-x-auto scrollbar-hide"},Cs=["onClick"],$s={key:0,class:"ml-1 px-1.5 py-0.5 bg-indigo-500 text-white rounded-md text-[8px]"},Ss={class:"p-8"},As={class:"space-y-6"},Ms={class:"space-y-4"},Ts={class:"flex items-center justify-between"},Vs={class:"text-[10px] font-black tracking-widest text-indigo-600 uppercase flex items-center gap-1"},Us={class:"flex gap-2"},Ns=["onClick","disabled"],Ps={key:0,class:"space-y-2"},Is=["checked","onChange"],Hs={class:"flex-1 min-w-0"},Ls={key:0,class:"text-[9px] font-black text-indigo-500 uppercase flex items-center gap-1 mt-0.5"},Bs=["onClick"],Es={key:1,class:"mt-4 pt-4 border-t border-dashed border-gray-100"},Fs={class:"space-y-2 opacity-75"},Rs=["checked","onChange"],Os={class:"flex-1 min-w-0"},Zs={class:"text-xs font-medium text-gray-600 block truncate"},qs={key:0,class:"text-[8px] font-black text-indigo-400 uppercase flex items-center gap-0.5 mt-0.5"},zs={class:"text-[8px] font-black text-gray-300 ml-auto uppercase"},Js={key:0,class:"space-y-6"},Ks={key:0,class:"space-y-3"},Ys={class:"text-[10px] font-black tracking-widest text-red-500 uppercase flex items-center gap-1"},Gs=["onClick"],Qs={class:"flex justify-between items-start"},Ws={class:"font-bold text-gray-900"},Xs={key:0,class:"mt-2 text-[11px] text-gray-500 line-clamp-2"},js={class:"text-[10px] font-bold text-gray-500 flex items-center gap-1"},ea={key:1,class:"space-y-3"},ta={class:"text-[10px] font-black tracking-widest text-indigo-500 uppercase flex items-center gap-1"},sa=["onClick"],aa={class:"flex justify-between items-start"},na={class:"flex-1"},oa={class:"font-bold text-gray-900"},ia={key:0,class:"mt-2 text-[11px] text-gray-500 line-clamp-2"},ra={key:1,class:"mt-3 p-2 bg-white/50 rounded-lg border border-indigo-50 text-[10px] italic text-gray-600"},da={class:"text-[10px] font-bold text-gray-500 flex items-center gap-1 ml-4"},la={key:2,class:"space-y-3"},ca={class:"text-[10px] font-black tracking-widest text-green-500 uppercase flex items-center gap-1"},ua=["onClick"],pa={class:"flex items-start gap-3"},ga={class:"flex-1"},ma={class:"font-bold text-gray-900 text-sm"},xa={key:0,class:"mt-1 text-[11px] text-gray-500"},_a={class:"ml-auto text-[10px] text-gray-400 font-bold uppercase"},ha={key:3,class:"space-y-3"},ya={class:"text-[10px] font-black tracking-widest text-blue-500 uppercase flex items-center gap-1"},fa={class:"text-[9px] font-black text-gray-400 uppercase tracking-widest mb-2 block"},va=["innerHTML"],ba={class:"flex items-center gap-2 text-[10px] font-bold text-gray-500"},wa={key:4,class:"space-y-3"},ka={class:"text-[10px] font-black tracking-widest text-purple-500 uppercase flex items-center gap-1"},Da={class:"flex items-center justify-between mb-2"},Ca={class:"text-sm font-bold text-gray-800"},$a={class:"text-[10px] text-gray-500 font-bold uppercase"},Sa={key:0,class:"p-3 bg-white/60 rounded-lg border border-purple-50 text-[11px] text-purple-700 font-medium"},Aa={key:1,class:"text-center py-8"},Ma={class:"space-y-8"},Ta={key:0,class:"space-y-4"},Va={class:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-2 border-b border-gray-100 pb-2"},Ua=["onClick"],Na={class:"flex justify-between items-start"},Pa={class:"font-black text-gray-900 group-hover:text-indigo-600 transition"},Ia={class:"flex items-center gap-4 mt-2"},Ha={class:"text-[10px] font-bold text-gray-400 flex items-center gap-1 uppercase tracking-tighter"},La={class:"text-[10px] font-bold text-gray-400 flex items-center gap-1 uppercase tracking-tighter"},Ba={class:"bg-amber-50 text-amber-600 px-2 py-1 rounded-lg text-[10px] font-black uppercase"},Ea={key:0,class:"mt-4 p-4 bg-gray-50 rounded-2xl text-xs text-gray-600 whitespace-pre-wrap border border-gray-100"},Fa={key:0,class:"text-center text-gray-400 text-xs italic"},Ra={class:"space-y-8"},Oa={key:0,class:"space-y-4"},Za={class:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-2 border-b border-gray-100 pb-2"},qa={class:"flex items-start gap-4"},za={class:"font-black text-gray-900"},Ja={class:"text-[10px] font-bold text-gray-400 mt-1 uppercase tracking-tighter"},Ka={key:0,class:"mt-3 p-3 bg-gray-50 rounded-xl text-xs text-gray-500 border border-gray-100"},Ya={key:0,class:"text-center text-gray-400 text-xs italic"},Ga={class:"space-y-8"},Qa={key:0},Wa={class:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-4 border-b border-gray-100 pb-2"},Xa={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ja={key:0,class:"absolute -top-2 -right-2 bg-indigo-600 text-white text-[8px] font-black uppercase px-2 py-1 rounded-full shadow-lg"},en=["innerHTML"],tn={class:"mt-auto pt-4 border-t border-gray-50 flex items-center justify-between"},sn={class:"flex items-center gap-2"},an={class:"h-8 w-8 rounded-xl bg-gray-100 flex items-center justify-center text-[10px] font-black"},nn={class:"text-xs font-bold text-gray-600"},on={class:"text-[10px] text-gray-400 font-bold"},rn={key:0,class:"mt-8 bg-indigo-50/30 p-8 rounded-[2rem] border border-indigo-100"},dn={class:"text-sm font-black text-indigo-900 mb-4 flex items-center gap-2"},ln=["onUpdate:modelValue"],cn={class:"flex justify-end mt-4"},un=["onClick","disabled"],pn={class:"space-y-8"},gn={key:0,class:"space-y-6"},mn={class:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-2 border-b border-gray-100 pb-2"},xn={class:"flex flex-col md:flex-row justify-between md:items-center gap-4 mb-6"},_n={class:"flex items-center gap-4"},hn={class:"font-black text-gray-900 text-lg leading-none"},yn={class:"text-[10px] font-bold text-gray-400 uppercase mt-2 tracking-widest"},fn={class:"text-[11px] font-bold text-gray-400 bg-gray-50 px-3 py-1.5 rounded-xl"},vn={key:0,class:"space-y-4"},bn={class:"flex items-center gap-2 mb-3 text-purple-600"},wn={class:"text-sm text-gray-700 leading-relaxed font-medium"},kn={__name:"ProjectIndex",setup(O){const U=b([]),me=b([]),K=b(!1),q=b(!1),N=b({}),ne=b([]),V=b(""),P=b(""),S=b(""),Z=b({}),$=b({}),de=b({}),oe=b(!1),ie=b(null),le=b(null),xe=b([]),Y=b("summary"),A=i=>{Z.value[i]=!Z.value[i]},I=(i,s)=>{$.value[i]=s},_=i=>{if(!S.value||!i)return!1;const s=S.value.split("T")[0],t=i.split("T")[0];return s===t},M=i=>{if(!S.value||!i.due_date)return!1;const s=S.value.split("T")[0];return i.due_date===s},z=i=>i?i.replace(/\*\*(.*?)\*\*/g,'<strong class="font-black text-gray-900">$1</strong>').replace(/\n/g,"<br/>"):"",E=b({}),ce=b({}),ue=b({}),_e=b({}),fe=b({}),Ce=async i=>{var t;const s=ue.value[i.id];if(s){_e.value[i.id]=!0;try{const u=((t=i.data)==null?void 0:t.action_points)||[],c=fe.value[i.id],w={id:Date.now(),content:s,date:S.value,user_id:c?c.id:null,user_name:c?c.name:null,done:!1,created_at:new Date().toISOString()},h=[...u,w];await window.axios.put(`/api/projects/${i.id}/update-data`,{key:"action_points",value:h}),ue.value[i.id]="",fe.value[i.id]=null,i.data={...i.data||{},action_points:h}}catch(u){console.error(u)}finally{_e.value[i.id]=!1}}},Fe=(i,s)=>{fe.value[i.id]=s},$e=async(i,s)=>{var t;try{const u=[...((t=i.data)==null?void 0:t.action_points)||[]],c=u.findIndex(w=>w.id===s);if(c===-1)return;u[c].done=!u[c].done,await window.axios.put(`/api/projects/${i.id}/update-data`,{key:"action_points",value:u}),i.data.action_points=u}catch(u){console.error(u)}},Re=async(i,s)=>{var t;if(confirm("Are you sure you want to delete this action point?"))try{const u=(((t=i.data)==null?void 0:t.action_points)||[]).filter(c=>c.id!==s);await window.axios.put(`/api/projects/${i.id}/update-data`,{key:"action_points",value:u}),i.data.action_points=u}catch(u){console.error(u)}},Oe=async i=>{if(E.value[i]){ce.value[i]=!0;try{await window.axios.post(`/api/projects/${i}/notes`,{notes:[{content:E.value[i]}],type:"daily_summary"}),E.value[i]="",ve()}catch(s){console.error(s)}finally{ce.value[i]=!1}}},Se=Ie(()=>{const i={},s=t=>{const u=t||"Unassigned";return i[u]||(i[u]={tasksDone:[],standups:[],meetings:[],emails:[],notes:[],dailySummaries:[]}),i[u]};return U.value.forEach(t=>{var u,c,w;(u=t.tasks)==null||u.forEach(h=>{_(h.updated_at)&&h.status==="Done"&&s(h.assigned_to).tasksDone.push({...h,projectName:t.name})}),(c=t.project_notes)==null||c.forEach(h=>{if(_(h.created_at)){const B=s(h.creator_name);h.type==="standup"?B.standups.push({...h,projectName:t.name}):h.type==="meeting_minutes"?B.meetings.push({...h,projectName:t.name}):h.type==="daily_summary"?B.dailySummaries.push({...h,projectName:t.name}):B.notes.push({...h,projectName:t.name})}}),(w=t.emails)==null||w.forEach(h=>{_(h.created_at)&&s(h.sender).emails.push({...h,projectName:t.name})})}),i}),Ae=Ie(()=>Object.keys(Se.value).length),Ze=i=>{var t,u,c;const s=new Set;return(t=i.tasks)==null||t.forEach(w=>w.assigned_to&&s.add(w.assigned_to)),(u=i.project_notes)==null||u.forEach(w=>w.creator_name&&s.add(w.creator_name)),(c=i.emails)==null||c.forEach(w=>w.sender&&s.add(w.sender)),Array.from(s).sort()},G=(i,s,t)=>{const u=de.value[s];return!u||u==="all"?i:i.filter(c=>c[t]===u)},pe=async i=>{if(!(!i||!i.id)){ie.value=i.id,le.value=i.project_id||0;try{const s=await window.axios.get(`/api/projects/${le.value}/sections/clients-users`);xe.value=s.data.users||[]}catch(s){console.error(s)}oe.value=!0}},ve=async()=>{K.value=!0;try{const i=await window.axios.get("/api/productivity/project-report",{params:{project_ids:ne.value.join(","),date_start:V.value,date_end:P.value}});U.value=i.data.reportData,me.value=i.data.projects,U.value.forEach(s=>{s.has_activity&&(Z.value[s.id]=!0,$.value[s.id]="today")})}catch(i){console.error(i)}finally{K.value=!1}},f=(i,s)=>i?i.filter(t=>_(t[s])):[],T=(i,s)=>i?i.filter(t=>!_(t[s])):[],qe=()=>{const i=U.value.map(s=>{var t,u,c,w,h,B,Q,W,X,j,ee,te,se;return{projectName:s.name,status:s.status,highlightedActivity:{notes:f((t=s.project_notes)==null?void 0:t.filter(o=>!o.type||o.type==="note"),"created_at").map(o=>({author:o.creator_name,content:o.content,date:o.created_at})),standups:f((u=s.project_notes)==null?void 0:u.filter(o=>o.type==="standup"),"created_at").map(o=>({author:o.creator_name,content:o.content,date:o.created_at})),meetingMinutes:f((c=s.project_notes)==null?void 0:c.filter(o=>o.type==="meeting_minutes"),"created_at").map(o=>({author:o.creator_name,content:o.content,date:o.created_at})),dailySummary:f((w=s.project_notes)==null?void 0:w.filter(o=>o.type==="daily_summary"),"created_at").map(o=>({author:o.creator_name,content:o.content,date:o.created_at})),tasksTodo:f((h=s.tasks)==null?void 0:h.filter(o=>o.status!=="Done"),"updated_at").map(o=>{var n,y;return{name:o.name,description:o.description,assignee:o.assigned_to,status:o.status,latestNotes:(y=(n=o.notes)==null?void 0:n[0])==null?void 0:y.content}}),tasksDone:f((B=s.tasks)==null?void 0:B.filter(o=>o.status==="Done"),"updated_at").map(o=>{var n,y;return{name:o.name,description:o.description,assignee:o.assigned_to,finishedAt:o.updated_at,latestNotes:(y=(n=o.notes)==null?void 0:n[0])==null?void 0:y.content}}),tasksDueToday:(Q=s.tasks)==null?void 0:Q.filter(o=>M(o)).map(o=>({name:o.name,description:o.description,assignee:o.assigned_to,status:o.status})),communications:f(s.emails,"created_at").map(o=>{var n,y;return{subject:o.subject,sender:o.sender,date:o.created_at,aiContext:(y=(n=o.contexts)==null?void 0:n[0])==null?void 0:y.summary}}),actionPoints:(((W=s.data)==null?void 0:W.action_points)||[]).filter(o=>_(o.date)).map(o=>({content:o.content,done:o.done}))},archivedActivity:{notes:T((X=s.project_notes)==null?void 0:X.filter(o=>!o.type||o.type==="note"),"created_at").map(o=>({author:o.creator_name,content:o.content,date:o.created_at})),standups:T((j=s.project_notes)==null?void 0:j.filter(o=>o.type==="standup"),"created_at").map(o=>({author:o.creator_name,content:o.content,date:o.created_at})),meetingMinutes:T((ee=s.project_notes)==null?void 0:ee.filter(o=>o.type==="meeting_minutes"),"created_at").map(o=>({author:o.creator_name,content:o.content,date:o.created_at})),tasksTodo:T((te=s.tasks)==null?void 0:te.filter(o=>o.status!=="Done"),"updated_at").map(o=>{var n,y;return{name:o.name,description:o.description,assignee:o.assigned_to,status:o.status,latestNotes:(y=(n=o.notes)==null?void 0:n[0])==null?void 0:y.content}}),tasksDone:T((se=s.tasks)==null?void 0:se.filter(o=>o.status==="Done"),"updated_at").map(o=>{var n,y;return{name:o.name,description:o.description,assignee:o.assigned_to,finishedAt:o.updated_at,latestNotes:(y=(n=o.notes)==null?void 0:n[0])==null?void 0:y.content}}),communications:T(s.emails,"created_at").map(o=>{var n,y;return{subject:o.subject,sender:o.sender,date:o.created_at,aiContext:(y=(n=o.contexts)==null?void 0:n[0])==null?void 0:y.summary}})}}});navigator.clipboard.writeText(JSON.stringify(i,null,2)).then(()=>{q.value=!0,setTimeout(()=>q.value=!1,3e3)})},ze=(i,s)=>{var u,c,w,h,B,Q,W,X,j,ee,te,se,o;s&&s.stopPropagation();const t={projectName:i.name,status:i.status,highlightedActivity:{notes:f((u=i.project_notes)==null?void 0:u.filter(n=>!n.type||n.type==="note"),"created_at").map(n=>({author:n.creator_name,content:n.content,date:n.created_at})),standups:f((c=i.project_notes)==null?void 0:c.filter(n=>n.type==="standup"),"created_at").map(n=>({author:n.creator_name,content:n.content,date:n.created_at})),meetingMinutes:f((w=i.project_notes)==null?void 0:w.filter(n=>n.type==="meeting_minutes"),"created_at").map(n=>({author:n.creator_name,content:n.content,date:n.created_at})),dailySummary:f((h=i.project_notes)==null?void 0:h.filter(n=>n.type==="daily_summary"),"created_at").map(n=>({author:n.creator_name,content:n.content,date:n.created_at})),tasksTodo:f((B=i.tasks)==null?void 0:B.filter(n=>n.status!=="Done"),"updated_at").map(n=>{var y,H;return{name:n.name,description:n.description,assignee:n.assigned_to,latestNotes:(H=(y=n.notes)==null?void 0:y[0])==null?void 0:H.content}}),tasksDone:f((Q=i.tasks)==null?void 0:Q.filter(n=>n.status==="Done"),"updated_at").map(n=>{var y,H;return{name:n.name,description:n.description,assignee:n.assigned_to,latestNotes:(H=(y=n.notes)==null?void 0:y[0])==null?void 0:H.content}}),tasksDueToday:(W=i.tasks)==null?void 0:W.filter(n=>M(n)).map(n=>({name:n.name,description:n.description,assignee:n.assigned_to,status:n.status})),communications:f(i.emails,"created_at").map(n=>{var y,H;return{subject:n.subject,aiContext:(H=(y=n.contexts)==null?void 0:y[0])==null?void 0:H.summary}}),actionPoints:(((X=i.data)==null?void 0:X.action_points)||[]).filter(n=>_(n.date)).map(n=>({content:n.content,done:n.done}))},archivedActivity:{notes:T((j=i.project_notes)==null?void 0:j.filter(n=>!n.type||n.type==="note"),"created_at").map(n=>({author:n.creator_name,content:n.content,date:n.created_at})),standups:T((ee=i.project_notes)==null?void 0:ee.filter(n=>n.type==="standup"),"created_at").map(n=>({author:n.creator_name,content:n.content,date:n.created_at})),meetingMinutes:T((te=i.project_notes)==null?void 0:te.filter(n=>n.type==="meeting_minutes"),"created_at").map(n=>({author:n.creator_name,content:n.content,date:n.created_at})),tasksTodo:T((se=i.tasks)==null?void 0:se.filter(n=>n.status!=="Done"),"updated_at").map(n=>({name:n.name,description:n.description,assignee:n.assigned_to})),tasksDone:T((o=i.tasks)==null?void 0:o.filter(n=>n.status==="Done"),"updated_at").map(n=>({name:n.name,description:n.description,assignee:n.assigned_to})),communications:T(i.emails,"created_at").map(n=>{var y,H;return{subject:n.subject,aiContext:(H=(y=n.contexts)==null?void 0:y[0])==null?void 0:H.summary}})}};navigator.clipboard.writeText(JSON.stringify(t,null,2)).then(()=>{N.value[i.id]=!0,setTimeout(()=>N.value[i.id]=!1,3e3)})},be=i=>i?new Date(i).toLocaleDateString("en-AU",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"}):"";return Ee(()=>{const i=new Date;S.value=i.toISOString().split("T")[0];const s=new Date(i.getFullYear(),i.getMonth(),1);V.value=s.toISOString().split("T")[0],P.value=i.toISOString().split("T")[0],ve()}),(i,s)=>(r(),d(k,null,[p(m(Ye),{title:"Morning Briefing Report"}),p(Xe,null,{header:ke(()=>[e("div",bt,[s[11]||(s[11]=e("div",null,[e("h2",{class:"font-black text-2xl text-gray-900 tracking-tight"},"Morning Briefing"),e("p",{class:"text-sm text-gray-500 font-medium"},"Daily action point & productivity generator")],-1)),e("div",wt,[e("button",{onClick:qe,class:"flex items-center px-4 py-2 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-xl text-sm font-bold hover:shadow-lg transition"},[p(m(J),{class:"h-4 w-4 mr-2"}),v(" "+l(q.value?"Copied JSON!":"AI Export (Global)"),1)]),e("button",{onClick:ve,disabled:K.value,class:"flex items-center px-4 py-2 bg-indigo-600 text-white rounded-xl text-sm font-bold hover:bg-indigo-700 transition disabled:opacity-50"},[p(m(Le),{class:R(["h-4 w-4 mr-2",{"animate-spin":K.value}])},null,8,["class"]),s[9]||(s[9]=v(" Refresh ",-1))],8,kt),e("button",{onClick:s[0]||(s[0]=t=>i.window.print()),class:"flex items-center px-4 py-2 bg-white border border-gray-200 rounded-xl text-sm font-bold text-gray-700 hover:bg-gray-50 transition"},[p(m(ot),{class:"h-4 w-4 mr-2"}),s[10]||(s[10]=v(" PDF ",-1))])])])]),default:ke(()=>[e("div",Dt,[e("div",Ct,[e("div",$t,[e("div",St,[e("div",At,[s[12]||(s[12]=e("label",{class:"text-[10px] font-bold text-gray-400 uppercase mb-2 block tracking-widest"},"Selected Projects",-1)),p(je,{modelValue:ne.value,"onUpdate:modelValue":s[1]||(s[1]=t=>ne.value=t),options:me.value,"is-multi":!0,placeholder:"Analyze All Projects"},null,8,["modelValue","options"])]),e("div",null,[s[13]||(s[13]=e("label",{class:"text-[10px] font-bold text-gray-400 uppercase mb-2 block tracking-widest"},"Range Start",-1)),L(e("input",{type:"date","onUpdate:modelValue":s[2]||(s[2]=t=>V.value=t),class:"w-full rounded-xl border-gray-200 text-sm focus:ring-indigo-500 font-bold text-gray-700"},null,512),[[ge,V.value]])]),e("div",null,[s[14]||(s[14]=e("label",{class:"text-[10px] font-bold text-gray-400 uppercase mb-2 block tracking-widest"},"Range End",-1)),L(e("input",{type:"date","onUpdate:modelValue":s[3]||(s[3]=t=>P.value=t),class:"w-full rounded-xl border-gray-200 text-sm focus:ring-indigo-500 font-bold text-gray-700"},null,512),[[ge,P.value]])]),e("div",null,[e("label",Mt,[p(m(J),{class:"h-3 w-3"}),s[15]||(s[15]=v(" Focus Date",-1))]),L(e("input",{type:"date","onUpdate:modelValue":s[4]||(s[4]=t=>S.value=t),class:"w-full rounded-xl border-indigo-200 bg-indigo-50 text-indigo-900 font-bold text-sm focus:ring-indigo-500"},null,512),[[ge,S.value]])])]),e("div",Tt,[e("button",{onClick:s[5]||(s[5]=t=>Y.value="summary"),class:R([Y.value==="summary"?"bg-white shadow-sm text-indigo-600":"text-gray-500","flex-1 py-1.5 rounded-lg text-xs font-black uppercase transition"])},"User Summary",2),e("button",{onClick:s[6]||(s[6]=t=>Y.value="projects"),class:R([Y.value==="projects"?"bg-white shadow-sm text-indigo-600":"text-gray-500","flex-1 py-1.5 rounded-lg text-xs font-black uppercase transition"])},"Portfolio View",2)])]),L(e("section",Vt,[e("div",Ut,[e("h3",Nt,[p(m(lt),{class:"h-5 w-5 text-amber-500"}),s[16]||(s[16]=v(" Daily Activity Stream",-1))]),e("span",Pt,l(Ae.value)+" Contributors on "+l(S.value),1)]),Ae.value===0?(r(),d("div",It,[p(m(st),{class:"h-12 w-12 text-gray-300 mx-auto mb-4"}),s[17]||(s[17]=e("p",{class:"text-gray-600 font-bold text-xl"},"No specific logs found for this focus date.",-1)),s[18]||(s[18]=e("p",{class:"text-sm text-gray-400 mt-1"},"Try selecting a different date or checking the detailed portfolio view.",-1))])):x("",!0),e("div",Ht,[(r(!0),d(k,null,D(Se.value,(t,u)=>(r(),d("div",{key:u,class:"bg-white rounded-[2rem] shadow-sm border border-gray-100 overflow-hidden flex flex-col transition hover:shadow-lg"},[e("div",Lt,[e("div",Bt,l(u.substring(0,2).toUpperCase()),1),e("div",null,[e("h4",Et,l(u),1),s[19]||(s[19]=e("p",{class:"text-[10px] text-indigo-500 font-bold uppercase tracking-tighter"},"Daily Impact",-1))])]),e("div",Ft,[t.dailySummaries.length>0?(r(),d("div",Rt,[e("h5",Ot,[p(m(J),{class:"h-3 w-3"}),s[20]||(s[20]=v(" Daily Impact Summary",-1))]),(r(!0),d(k,null,D(t.dailySummaries,c=>(r(),d("div",{key:c.id,class:"text-xs text-indigo-700 bg-indigo-50/50 p-4 rounded-2xl border border-indigo-100 mb-2 font-medium",innerHTML:z(c.content)},null,8,Zt))),128))])):x("",!0),t.standups.length>0?(r(),d("div",qt,[e("h5",zt,[p(m(pt),{class:"h-3 w-3"}),s[21]||(s[21]=v(" Standup Context",-1))]),(r(!0),d(k,null,D(t.standups,c=>(r(),d("div",{key:c.id,class:"text-xs text-gray-600 bg-orange-50/50 p-4 rounded-2xl border border-orange-100 mb-2 italic"},[v(' "'+l(c.content)+'" ',1),e("p",Jt,l(c.projectName),1)]))),128))])):x("",!0),t.tasksDone.length>0?(r(),d("div",Kt,[e("h5",Yt,[p(m(ye),{class:"h-3 w-3"}),s[22]||(s[22]=v(" Accomplishments",-1))]),e("ul",Gt,[(r(!0),d(k,null,D(t.tasksDone,c=>(r(),d("li",{key:c.id,onClick:w=>pe(c),class:"p-3 bg-green-50/30 rounded-xl border border-green-100 cursor-pointer hover:bg-white transition"},[e("p",Wt,l(c.name),1),c.description?(r(),d("p",Xt,l(c.description),1)):x("",!0),e("p",jt,l(c.projectName),1)],8,Qt))),128))])])):x("",!0),t.notes.length>0?(r(),d("div",es,[e("h5",ts,[p(m(Be),{class:"h-3 w-3"}),s[23]||(s[23]=v(" Field Notes & Updates",-1))]),(r(!0),d(k,null,D(t.notes,c=>(r(),d("div",{key:c.id,class:"p-3 bg-blue-50/30 rounded-xl border border-blue-100 mb-2"},[e("div",{class:"text-xs text-gray-700 mb-2",innerHTML:z(c.content)},null,8,ss),e("p",as,l(c.projectName),1)]))),128))])):x("",!0),t.emails.length>0?(r(),d("div",ns,[e("h5",os,[p(m(De),{class:"h-3 w-3"}),s[24]||(s[24]=v(" Communications",-1))]),(r(!0),d(k,null,D(t.emails,c=>{var w,h;return r(),d("div",{key:c.id,class:"p-3 bg-purple-50/30 rounded-xl border border-purple-100 mb-2"},[e("p",is,l(c.subject),1),(h=(w=c.contexts)==null?void 0:w[0])!=null&&h.summary?(r(),d("p",rs,"AI Context: "+l(c.contexts[0].summary),1)):x("",!0),e("p",ds,l(c.projectName),1)])}),128))])):x("",!0)])]))),128))])],512),[[ae,Y.value==="summary"]]),L(e("section",ls,[s[39]||(s[39]=e("div",{class:"flex items-center justify-between px-2"},[e("h3",{class:"text-sm font-black text-gray-400 uppercase tracking-[0.2em]"},"Portfolio Deep Dive")],-1)),(r(!0),d(k,null,D(U.value,t=>{var u,c,w,h,B,Q,W,X,j,ee,te,se,o,n,y,H,Me,Te,Ve,Ue,Ne;return r(),d("div",{key:t.id,class:"bg-white rounded-[2rem] border border-gray-200 shadow-sm overflow-hidden mb-8 transition hover:shadow-md"},[e("div",{onClick:a=>A(t.id),class:"p-6 flex flex-col md:flex-row md:items-center justify-between cursor-pointer hover:bg-gray-50 transition gap-4"},[e("div",us,[e("div",ps,[p(m(at),{class:"h-8 w-8"})]),e("div",null,[e("h4",gs,l(t.name),1),e("div",ms,[e("span",xs,l(t.status),1),t.has_activity?(r(),d("span",_s,s[25]||(s[25]=[e("div",{class:"h-1.5 w-1.5 bg-indigo-500 rounded-full mr-1.5 animate-pulse"},null,-1),v(" Recent Activity",-1)]))):x("",!0)])])]),e("div",hs,[e("button",{onClick:a=>ze(t,a),class:"px-4 py-2 border border-indigo-200 text-indigo-600 rounded-xl text-xs font-bold hover:bg-indigo-50 transition flex items-center gap-2"},[p(m(J),{class:"h-3.5 w-3.5"}),v(" "+l(N.value[t.id]?"Copied!":"Export JSON"),1)],8,ys),(r(),He(Ge(Z.value[t.id]?m(nt):m(it)),{class:"h-6 w-6 text-gray-300"}))])],8,cs),L(e("div",fs,[e("div",vs,[e("div",bs,[p(m(ut),{class:"h-4 w-4 text-gray-400"}),L(e("select",{"onUpdate:modelValue":a=>de.value[t.id]=a,class:"rounded-xl border-gray-200 text-xs font-bold text-gray-600 focus:ring-indigo-500 py-1.5 pr-8 pl-3"},[s[26]||(s[26]=e("option",{value:"all"},"Show All Contributors",-1)),(r(!0),d(k,null,D(Ze(t),a=>(r(),d("option",{key:a,value:a},l(a),9,ks))),128))],8,ws),[[Qe,de.value[t.id]]])]),e("nav",Ds,[(r(),d(k,null,D(["today","todo","done","notes","standups","meetings","summary","emails"],a=>{var C,g;return e("button",{key:a,onClick:F=>I(t.id,a),class:R([$.value[t.id]===a?"bg-white shadow-sm text-indigo-600":"text-gray-500","py-1.5 px-4 rounded-lg text-[10px] font-black uppercase transition whitespace-nowrap"])},[v(l(a)+" ",1),a==="today"&&((C=t.tasks)!=null&&C.filter(F=>M(F)).length)?(r(),d("span",$s,l((g=t.tasks)==null?void 0:g.filter(F=>M(F)).length),1)):x("",!0)],10,Cs)}),64))])]),e("div",Ss,[L(e("div",As,[e("div",Ms,[e("div",Ts,[e("h5",Vs,[p(m(ct),{class:"h-3 w-3"}),s[27]||(s[27]=v(" Quick Action Points",-1))]),s[28]||(s[28]=e("span",{class:"text-[9px] font-bold text-gray-400"},"Save notes for AI task creation",-1))]),e("div",Us,[p(vt,{"project-id":t.id,modelValue:ue.value[t.id],"onUpdate:modelValue":a=>ue.value[t.id]=a,onSubmit:a=>Ce(t),onUserSelected:a=>Fe(t,a),placeholder:"Add quick action point (type @ for users)..."},null,8,["project-id","modelValue","onUpdate:modelValue","onSubmit","onUserSelected"]),e("button",{onClick:a=>Ce(t),disabled:_e.value[t.id]||!ue.value[t.id],class:"bg-indigo-600 text-white rounded-xl px-4 py-2 font-black text-xs hover:bg-indigo-700 transition flex items-center gap-2 h-10 disabled:opacity-50"},[p(m(J),{class:"h-3.5 w-3.5"}),v(" "+l(_e.value[t.id]?"Saving...":"Add"),1)],8,Ns)]),(((u=t.data)==null?void 0:u.action_points)||[]).filter(a=>_(a.date)).length?(r(),d("div",Ps,[(r(!0),d(k,null,D((((c=t.data)==null?void 0:c.action_points)||[]).filter(a=>_(a.date)),a=>(r(),d("div",{key:a.id,class:"flex items-center gap-3 p-3 bg-white border border-gray-100 rounded-xl group hover:shadow-sm transition"},[e("input",{type:"checkbox",checked:a.done,onChange:C=>$e(t,a.id),class:"h-4 w-4 rounded text-indigo-600 focus:ring-indigo-500 border-gray-300"},null,40,Is),e("div",Hs,[e("span",{class:R([{"line-through text-gray-400":a.done,"text-gray-700":!a.done},"text-xs font-bold block truncate"])},l(a.content),3),a.user_name?(r(),d("span",Ls,[p(m(re),{class:"h-2.5 w-2.5"}),v(" Mentioned: "+l(a.user_name),1)])):x("",!0)]),e("button",{onClick:C=>Re(t,a.id),class:"text-gray-300 hover:text-red-500 transition opacity-0 group-hover:opacity-100"},[p(m(Le),{class:"h-3.5 w-3.5 stroke-2"})],8,Bs)]))),128))])):x("",!0),(((w=t.data)==null?void 0:w.action_points)||[]).filter(a=>!_(a.date)&&!a.done).length?(r(),d("div",Es,[s[29]||(s[29]=e("h6",{class:"text-[9px] font-black text-amber-500 uppercase tracking-widest mb-3 flex items-center gap-1"},"Yesterday's Pending",-1)),e("div",Fs,[(r(!0),d(k,null,D((((h=t.data)==null?void 0:h.action_points)||[]).filter(a=>!_(a.date)&&!a.done),a=>(r(),d("div",{key:a.id,class:"flex items-center gap-3 p-3 bg-white border border-gray-100 rounded-xl"},[e("input",{type:"checkbox",checked:a.done,onChange:C=>$e(t,a.id),class:"h-4 w-4 rounded text-indigo-600 border-gray-300"},null,40,Rs),e("div",Os,[e("span",Zs,l(a.content),1),a.user_name?(r(),d("span",qs,[p(m(re),{class:"h-2 w-2"}),v(" "+l(a.user_name),1)])):x("",!0)]),e("span",zs,l(a.date),1)]))),128))])])):x("",!0)]),(B=t.tasks)!=null&&B.filter(a=>M(a)).length||f((Q=t.tasks)==null?void 0:Q.filter(a=>a.status!=="Done"),"updated_at").length||f((W=t.tasks)==null?void 0:W.filter(a=>a.status==="Done"),"updated_at").length||f(t.project_notes,"created_at").length||f(t.emails,"created_at").length?(r(),d("div",Js,[(X=t.tasks)!=null&&X.filter(a=>M(a)).length?(r(),d("div",Ks,[e("h5",Ys,[p(m(rt),{class:"h-3 w-3"}),s[30]||(s[30]=v(" Due Today (Deadline)",-1))]),(r(!0),d(k,null,D((j=t.tasks)==null?void 0:j.filter(a=>M(a)),a=>(r(),d("div",{key:a.id,onClick:C=>pe(a),class:"p-4 bg-red-50/50 border border-red-100 rounded-xl cursor-pointer hover:bg-white transition"},[e("div",Qs,[e("div",null,[e("h6",Ws,l(a.name),1),a.description?(r(),d("div",Xs,l(a.description),1)):x("",!0)]),e("span",js,[p(m(re),{class:"h-3 w-3"}),v(" "+l(a.assigned_to||"Unassigned"),1)])])],8,Gs))),128))])):x("",!0),f((ee=t.tasks)==null?void 0:ee.filter(a=>a.status!=="Done"),"updated_at").length?(r(),d("div",ea,[e("h5",ta,[p(m(J),{class:"h-3 w-3"}),s[31]||(s[31]=v(" Focus Tasks (Active Today)",-1))]),(r(!0),d(k,null,D(f((te=t.tasks)==null?void 0:te.filter(a=>a.status!=="Done"),"updated_at"),a=>{var C;return r(),d("div",{key:a.id,onClick:g=>pe(a),class:"p-4 bg-indigo-50/50 border border-indigo-100 rounded-xl cursor-pointer hover:bg-white transition"},[e("div",aa,[e("div",na,[e("h6",oa,l(a.name),1),a.description?(r(),d("div",ia,l(a.description),1)):x("",!0),(C=a.notes)!=null&&C.length?(r(),d("div",ra,' "'+l(a.notes[0].content)+'" ',1)):x("",!0)]),e("span",da,[p(m(re),{class:"h-3 w-3"}),v(" "+l(a.assigned_to||"Unassigned"),1)])])],8,sa)}),128))])):x("",!0),f((se=t.tasks)==null?void 0:se.filter(a=>a.status==="Done"),"updated_at").length?(r(),d("div",la,[e("h5",ca,[p(m(ye),{class:"h-3 w-3"}),s[32]||(s[32]=v(" Accomplished Today",-1))]),(r(!0),d(k,null,D(f((o=t.tasks)==null?void 0:o.filter(a=>a.status==="Done"),"updated_at"),a=>(r(),d("div",{key:a.id,onClick:C=>pe(a),class:"p-4 bg-green-50/50 border border-green-100 rounded-xl"},[e("div",pa,[p(m(ye),{class:"h-5 w-5 text-green-500 mt-0.5"}),e("div",ga,[e("h6",ma,l(a.name),1),a.description?(r(),d("div",xa,l(a.description),1)):x("",!0)]),e("span",_a,l(a.assigned_to),1)])],8,ua))),128))])):x("",!0),f(t.project_notes,"created_at").length?(r(),d("div",ha,[e("h5",ya,[p(m(Be),{class:"h-3 w-3"}),s[33]||(s[33]=v(" Today's Logs",-1))]),(r(!0),d(k,null,D(f(t.project_notes,"created_at"),a=>(r(),d("div",{key:a.id,class:"p-4 bg-gray-50 border border-gray-100 rounded-xl"},[e("span",fa,l(a.type||"Note"),1),e("div",{class:"text-sm text-gray-700 italic mb-3 whitespace-pre-wrap",innerHTML:z(a.content)},null,8,va),e("div",ba,[p(m(re),{class:"h-3 w-3"}),v(" "+l(a.creator_name),1)])]))),128))])):x("",!0),f(t.emails,"created_at").length?(r(),d("div",wa,[e("h5",ka,[p(m(De),{class:"h-3 w-3"}),s[34]||(s[34]=v(" Today's Comms",-1))]),(r(!0),d(k,null,D(f(t.emails,"created_at"),a=>{var C;return r(),d("div",{key:a.id,class:"p-4 bg-purple-50/30 border border-purple-100 rounded-xl"},[e("div",Da,[e("p",Ca,l(a.subject),1),e("p",$a,l(a.sender),1)]),(C=a.contexts)!=null&&C.length?(r(),d("div",Sa,[p(m(J),{class:"h-3 w-3 inline mr-1"}),v(" "+l(a.contexts[0].summary),1)])):x("",!0)])}),128))])):x("",!0)])):(r(),d("div",Aa,s[35]||(s[35]=[e("p",{class:"text-gray-400 text-sm font-bold"},"No activity recorded for this focus date.",-1)])))],512),[[ae,$.value[t.id]==="today"]]),L(e("div",Ma,[(r(!0),d(k,null,D({"Highlighted (Focus Date)":f(G((n=t.tasks)==null?void 0:n.filter(a=>a.status!=="Done"),t.id,"assigned_to"),"updated_at"),Archive:T(G((y=t.tasks)==null?void 0:y.filter(a=>a.status!=="Done"),t.id,"assigned_to"),"updated_at")},(a,C)=>(r(),d("div",{key:C},[a.length>0?(r(),d("div",Ta,[e("h5",Va,l(C),1),(r(!0),d(k,null,D(a,g=>(r(),d("div",{key:g.id,onClick:F=>pe(g),class:R(["group p-5 bg-white border rounded-[1.5rem] cursor-pointer hover:border-indigo-400 transition",_(g.updated_at)?"border-indigo-300 ring-2 ring-indigo-50 shadow-md":"border-gray-100"])},[e("div",Na,[e("div",null,[e("h6",Pa,l(g.name),1),e("div",Ia,[e("span",Ha,[p(m(re),{class:"h-3 w-3"}),v(" "+l(g.assigned_to||"Unassigned"),1)]),e("span",La,[p(m(dt),{class:"h-3 w-3"}),v(" "+l(g.due_date||"No Date"),1)])])]),e("span",Ba,l(g.status),1)]),g.description?(r(),d("div",Ea,l(g.description),1)):x("",!0)],10,Ua))),128))])):x("",!0)]))),128)),(H=t.tasks)!=null&&H.filter(a=>a.status!=="Done").length?x("",!0):(r(),d("p",Fa,"No active tasks found."))],512),[[ae,$.value[t.id]==="todo"]]),L(e("div",Ra,[(r(!0),d(k,null,D({"Highlighted (Focus Date)":f(G((Me=t.tasks)==null?void 0:Me.filter(a=>a.status==="Done"),t.id,"assigned_to"),"updated_at"),Archive:T(G((Te=t.tasks)==null?void 0:Te.filter(a=>a.status==="Done"),t.id,"assigned_to"),"updated_at")},(a,C)=>(r(),d("div",{key:C},[a.length>0?(r(),d("div",Oa,[e("h5",Za,l(C),1),(r(!0),d(k,null,D(a,g=>(r(),d("div",{key:g.id,class:R(["p-5 bg-white border border-gray-100 rounded-[1.5rem]",_(g.updated_at)?"ring-2 ring-green-100 border-green-200":""])},[e("div",qa,[p(m(ye),{class:"h-6 w-6 text-green-500 mt-1"}),e("div",null,[e("h6",za,l(g.name),1),e("p",Ja,l(g.assigned_to)+" • Done "+l(be(g.updated_at)),1),g.description?(r(),d("div",Ka,l(g.description),1)):x("",!0)])])],2))),128))])):x("",!0)]))),128)),(Ve=t.tasks)!=null&&Ve.filter(a=>a.status==="Done").length?x("",!0):(r(),d("p",Ya,"No done tasks found."))],512),[[ae,$.value[t.id]==="done"]]),L(e("div",Ga,[(r(!0),d(k,null,D({"Highlighted (Focus Date)":f(G((Ue=t.project_notes)==null?void 0:Ue.filter(a=>$.value[t.id]==="notes"&&(!a.type||a.type==="note")||$.value[t.id]==="standups"&&a.type==="standup"||$.value[t.id]==="meetings"&&a.type==="meeting_minutes"||$.value[t.id]==="summary"&&a.type==="daily_summary"),t.id,"creator_name"),"created_at"),Archive:T(G((Ne=t.project_notes)==null?void 0:Ne.filter(a=>$.value[t.id]==="notes"&&(!a.type||a.type==="note")||$.value[t.id]==="standups"&&a.type==="standup"||$.value[t.id]==="meetings"&&a.type==="meeting_minutes"||$.value[t.id]==="summary"&&a.type==="daily_summary"),t.id,"creator_name"),"created_at")},(a,C)=>(r(),d("div",{key:C},[a.length>0?(r(),d("div",Qa,[e("h5",Wa,l(C),1),e("div",Xa,[(r(!0),d(k,null,D(a,g=>{var F;return r(),d("div",{key:g.id,class:R(["p-6 bg-white border border-gray-100 rounded-[2rem] shadow-sm flex flex-col relative",_(g.created_at)?"ring-2 ring-indigo-50 border-indigo-200":""])},[_(g.created_at)?(r(),d("div",ja,"New Log")):x("",!0),e("div",{class:"text-sm text-gray-700 leading-relaxed mb-6 whitespace-pre-wrap",innerHTML:z(g.content)},null,8,en),e("div",tn,[e("div",sn,[e("div",an,l((F=g.creator_name)==null?void 0:F.substring(0,2)),1),e("span",nn,l(g.creator_name),1)]),e("span",on,l(be(g.created_at)),1)])],2)}),128))])])):x("",!0)]))),128)),$.value[t.id]==="summary"?(r(),d("div",rn,[e("h5",dn,[p(m(J),{class:"h-5 w-5"}),s[36]||(s[36]=v(" Daily Impact Summary",-1))]),s[37]||(s[37]=e("p",{class:"text-xs text-indigo-600 mb-4 font-medium italic"},"Summarize the overall progress, blockers, and next steps for today.",-1)),L(e("textarea",{"onUpdate:modelValue":a=>E.value[t.id]=a,rows:"4",class:"w-full rounded-2xl border-indigo-100 focus:ring-indigo-500 text-sm p-4 placeholder:text-indigo-200",placeholder:"Paste your AI-generated summary or write one manually..."},null,8,ln),[[ge,E.value[t.id]]]),e("div",cn,[e("button",{onClick:a=>Oe(t.id),disabled:ce.value[t.id]||!E.value[t.id],class:"px-6 py-2 bg-indigo-600 text-white rounded-xl text-sm font-black hover:bg-indigo-700 transition disabled:opacity-50"},l(ce.value[t.id]?"Saving...":"Post Summary"),9,un)])])):x("",!0)],512),[[ae,["notes","standups","meetings","summary"].includes($.value[t.id])]]),L(e("div",pn,[(r(!0),d(k,null,D({"Highlighted (Focus Date)":f(G(t.emails,t.id,"sender"),"created_at"),Archive:T(G(t.emails,t.id,"sender"),"created_at")},(a,C)=>(r(),d("div",{key:C},[a.length>0?(r(),d("div",gn,[e("h5",mn,l(C),1),(r(!0),d(k,null,D(a,g=>{var F;return r(),d("div",{key:g.id,class:R(["bg-white rounded-[2rem] p-6 border border-gray-100 shadow-sm",_(g.created_at)?"ring-2 ring-purple-100 border-purple-200":""])},[e("div",xn,[e("div",_n,[e("div",{class:R([g.type==="Received"?"bg-orange-100 text-orange-600":"bg-green-100 text-green-600","p-3 rounded-2xl shadow-inner"])},[p(m(De),{class:"h-6 w-6"})],2),e("div",null,[e("h6",hn,l(g.subject),1),e("p",yn,l(g.type)+" • "+l(g.sender),1)])]),e("span",fn,l(be(g.created_at)),1)]),(F=g.contexts)!=null&&F.length?(r(),d("div",vn,[(r(!0),d(k,null,D(g.contexts,Pe=>(r(),d("div",{key:Pe.id,class:"p-5 bg-purple-50/50 rounded-[1.5rem] border border-purple-100"},[e("div",bn,[p(m(J),{class:"h-4 w-4"}),s[38]||(s[38]=e("span",{class:"text-[10px] font-black uppercase tracking-widest"},"AI Summary",-1))]),e("p",wn,l(Pe.summary),1)]))),128))])):x("",!0)],2)}),128))])):x("",!0)]))),128))],512),[[ae,$.value[t.id]==="emails"]])])],512),[[ae,Z.value[t.id]]])])}),128))],512),[[ae,Y.value==="projects"]])])]),p(et,{show:oe.value,"onUpdate:show":s[8]||(s[8]=t=>oe.value=t),title:"Morning Review Detail",initialWidth:40},{content:ke(()=>[ie.value?(r(),He(We,{key:0,"task-id":ie.value,"project-id":le.value,"project-users":xe.value,onClose:s[7]||(s[7]=t=>oe.value=!1)},null,8,["task-id","project-id","project-users"])):x("",!0)]),_:1},8,["show"])]),_:1})],64))}},ao=tt(kn,[["__scopeId","data-v-fcb23604"]]);export{ao as default};
