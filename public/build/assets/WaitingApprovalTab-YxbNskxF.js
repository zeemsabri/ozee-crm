import{r as x,m as E,c as o,o as a,a as t,i as A,t as r,l as y,F as w,j as v,s as C}from"./app-DTsjYMjF.js";const D={key:0,class:"flex justify-center py-8"},V={key:1,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert"},B={class:"block sm:inline"},S={key:2},F={key:0,class:"text-center py-8 text-gray-500 bg-gray-50 rounded-lg"},N={key:1,class:"mb-8"},L={class:"overflow-x-auto shadow rounded-lg"},P={class:"min-w-full divide-y divide-gray-200"},U={class:"bg-white divide-y divide-gray-200"},H={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},T={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},$={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},I={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},M={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},O=["onClick"],R={key:2},W={class:"overflow-x-auto shadow rounded-lg"},Y={class:"min-w-full divide-y divide-gray-200"},q={class:"bg-white divide-y divide-gray-200"},z={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},G={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},J={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},K={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},Q=["onClick"],tt={__name:"WaitingApprovalTab",props:{isActive:Boolean},emits:["view-email"],setup(f,{expose:_,emit:b}){const k=f,c=x([]),d=x([]),g=x(!0),p=x(""),j=b,u=async()=>{g.value=!0,p.value="";try{const i=await C.get("/api/inbox/waiting-approval");c.value=i.data.outgoing,d.value=i.data.incoming}catch(i){console.error("Error fetching emails waiting approval:",i),p.value="Failed to load emails waiting for approval. Please try again."}finally{g.value=!1}},h=i=>{j("view-email",i)};return E(()=>k.isActive,i=>{i&&u()},{immediate:!0}),_({refresh:u}),(i,e)=>(a(),o("div",null,[t("div",{class:"mb-4 flex items-center justify-between"},[e[1]||(e[1]=t("h3",{class:"text-xl font-medium text-gray-900"},"Emails Awaiting Your Approval",-1)),t("button",{onClick:u,class:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},e[0]||(e[0]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),A(" Refresh ",-1)]))]),g.value?(a(),o("div",D,e[2]||(e[2]=[t("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-500"},null,-1)]))):p.value?(a(),o("div",V,[t("span",B,r(p.value),1)])):(a(),o("div",S,[d.value.length===0&&c.value.length===0?(a(),o("div",F,e[3]||(e[3]=[t("p",null,"No emails waiting for approval.",-1)]))):y("",!0),d.value.length>0?(a(),o("div",N,[e[5]||(e[5]=t("h4",{class:"text-lg font-medium text-gray-900 mb-4"},"Incoming Emails",-1)),t("div",L,[t("table",P,[e[4]||(e[4]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"From"),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Subject"),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Project"),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date"),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),t("tbody",U,[(a(!0),o(w,null,v(d.value,s=>{var n,l,m;return a(),o("tr",{key:s.id,class:"hover:bg-gray-50"},[t("td",H,r(((n=s.sender)==null?void 0:n.name)||"Unknown"),1),t("td",T,r(s.subject),1),t("td",$,r(((m=(l=s.conversation)==null?void 0:l.project)==null?void 0:m.name)||"Unknown"),1),t("td",I,r(new Date(s.created_at).toLocaleDateString()),1),t("td",M,[t("button",{onClick:X=>h(s),class:"text-indigo-600 hover:text-indigo-900"}," View ",8,O)])])}),128))])])])])):y("",!0),c.value.length>0?(a(),o("div",R,[e[7]||(e[7]=t("h4",{class:"text-lg font-medium text-gray-900 mb-4"},"Outgoing Emails",-1)),t("div",W,[t("table",Y,[e[6]||(e[6]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Subject"),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Project"),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date"),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),t("tbody",q,[(a(!0),o(w,null,v(c.value,s=>{var n,l;return a(),o("tr",{key:s.id,class:"hover:bg-gray-50"},[t("td",z,r(s.subject),1),t("td",G,r(((l=(n=s.conversation)==null?void 0:n.project)==null?void 0:l.name)||"Unknown"),1),t("td",J,r(new Date(s.created_at).toLocaleDateString()),1),t("td",K,[t("button",{onClick:m=>h(s),class:"text-indigo-600 hover:text-indigo-900"}," View ",8,Q)])])}),128))])])])])):y("",!0)]))]))}};export{tt as default};
