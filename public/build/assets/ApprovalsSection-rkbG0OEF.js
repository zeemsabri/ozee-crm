import{aR as N,r as x,c,a as l,o as n,V as y,b as r,j as v,t as i,v as S,x as M,i as L,F as R,l as V,m as g}from"./app-D4PaCJao.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";const B={class:"p-6 bg-white rounded-xl shadow-lg font-inter min-h-[calc(100vh-6rem)]"},T={class:"flex flex-wrap gap-2 mb-6 border-b border-gray-200 pb-2"},H={class:"relative mb-6"},$={key:0,class:"text-center text-gray-500 py-8"},z={class:"text-lg mb-2"},I={key:0,class:"mt-2 text-sm"},U={key:1,class:"mt-2 text-sm"},F={key:2,class:"mt-2 text-sm"},P={key:3,class:"mt-2 text-sm"},Z={key:4,class:"mt-2 text-sm"},E={key:1,class:"text-center text-gray-500 py-8"},G={class:"text-lg mb-2"},Q={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},J={class:"flex justify-between items-start mb-3"},K={class:"text-lg font-bold text-gray-900 pr-2"},O={class:"text-sm text-gray-700 mb-3 line-clamp-3"},W={class:"text-sm text-gray-600 mb-4"},X={class:"flex items-center mb-1"},Y={class:"font-medium text-gray-800 capitalize ml-1"},ee={class:"flex items-center"},te={class:"font-medium text-gray-800 ml-1"},re={class:"mt-auto"},se=["onClick"],ae={__name:"ApprovalsSection",props:{deliverables:{type:Array,default:()=>[]},initialAuthToken:{type:String,required:!0},projectId:{type:[String,Number],required:!0}},emits:["open-deliverable-viewer"],setup(f,{emit:_}){const u=f,k=_,{showModal:oe}=N("modalService"),a=x("action-required"),d=x(""),m=c(()=>u.deliverables.filter(t=>{const e=t.status==="pending_review",s=t.status==="revisions_requested",o=t.client_interaction;return e?!o||!o.approved_at&&!o.rejected_at&&!o.revisions_requested_at:s?!o||!o.approved_at&&!o.rejected_at:!1}).sort((t,e)=>new Date(e.submitted_at)-new Date(t.submitted_at))),j=c(()=>u.deliverables.filter(t=>t.status==="pending_review"||t.status==="revisions_requested").sort((t,e)=>new Date(e.submitted_at)-new Date(t.submitted_at))),h=c(()=>u.deliverables.filter(t=>t.status==="approved").sort((t,e)=>new Date(e.overall_approved_at||e.updated_at)-new Date(t.overall_approved_at||t.updated_at))),b=c(()=>u.deliverables.filter(t=>t.status==="rejected").sort((t,e)=>new Date(e.updated_at)-new Date(t.updated_at))),w=c(()=>[...u.deliverables].sort((t,e)=>new Date(e.submitted_at)-new Date(t.submitted_at))),p=c(()=>{let t=[];switch(a.value){case"action-required":t=m.value;break;case"in-review":t=j.value;break;case"approved":t=h.value;break;case"rejected":t=b.value;break;case"all-deliverables":t=w.value;break;default:t=[]}if(d.value){const e=d.value.toLowerCase();return t.filter(s=>{var o;return s.title.toLowerCase().includes(e)||s.description&&s.description.toLowerCase().includes(e)||s.type.toLowerCase().includes(e.replace(" ","_"))||s.status.toLowerCase().includes(e.replace(" ","_"))||((o=s.team_member)==null?void 0:o.name)&&s.team_member.name.toLowerCase().includes(e)})}return t}),D=t=>{k("open-deliverable-viewer",t)},C=t=>t?new Date(t).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"N/A",q=t=>{switch(t.toLowerCase()){case"pending_review":return"bg-yellow-100 text-yellow-800";case"revisions_requested":return"bg-orange-100 text-orange-800";case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";case"completed":return"bg-indigo-100 text-indigo-800";default:return"bg-gray-100 text-gray-800"}};return(t,e)=>(n(),l("div",B,[e[11]||(e[11]=y('<h2 class="text-2xl font-bold text-gray-900 mb-6 flex items-center" data-v-f200ec15><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard-check mr-2 w-6 h-6" data-v-f200ec15><rect width="8" height="4" x="8" y="2" rx="1" ry="1" data-v-f200ec15></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2" data-v-f200ec15></path><path d="m9 14 2 2 4-4" data-v-f200ec15></path></svg> Project Deliverables </h2>',1)),r("div",T,[r("button",{onClick:e[0]||(e[0]=s=>a.value="action-required"),class:v(["px-5 py-2 rounded-lg font-semibold text-sm transition-colors duration-200",a.value==="action-required"?"bg-indigo-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"])}," Action Required ("+i(m.value.length)+") ",3),r("button",{onClick:e[1]||(e[1]=s=>a.value="approved"),class:v(["px-5 py-2 rounded-lg font-semibold text-sm transition-colors duration-200",a.value==="approved"?"bg-indigo-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"])}," Approved ("+i(h.value.length)+") ",3),r("button",{onClick:e[2]||(e[2]=s=>a.value="rejected"),class:v(["px-5 py-2 rounded-lg font-semibold text-sm transition-colors duration-200",a.value==="rejected"?"bg-indigo-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"])}," Rejected ("+i(b.value.length)+") ",3),r("button",{onClick:e[3]||(e[3]=s=>a.value="all-deliverables"),class:v(["px-5 py-2 rounded-lg font-semibold text-sm transition-colors duration-200",a.value==="all-deliverables"?"bg-indigo-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"])}," All Deliverables ("+i(w.value.length)+") ",3)]),r("div",H,[S(r("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=s=>d.value=s),placeholder:"Search deliverables by title, type, or status...",class:"w-full p-3 pl-10 border border-gray-300 rounded-xl shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 transition duration-200","aria-label":"Search Deliverables"},null,512),[[M,d.value]]),e[5]||(e[5]=r("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[r("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-search text-gray-400 w-5 h-5"},[r("circle",{cx:"11",cy:"11",r:"8"}),r("path",{d:"m21 21-4.3-4.3"})])],-1))]),p.value.length===0&&!d.value?(n(),l("div",$,[r("p",z,"No "+i(a.value.replace("-"," "))+" deliverables found.",1),a.value==="action-required"?(n(),l("p",I,"Great job keeping up with your project deliverables!")):a.value==="in-review"?(n(),l("p",U,"No deliverables are currently in review.")):a.value==="approved"?(n(),l("p",F,"No deliverables have been approved yet.")):a.value==="rejected"?(n(),l("p",P,"No deliverables have been rejected.")):a.value==="all-deliverables"?(n(),l("p",Z,"No deliverables have been posted for this project yet.")):L("",!0)])):p.value.length===0&&d.value?(n(),l("div",E,[r("p",G,"No "+i(a.value.replace("-"," "))+' deliverables match your search "'+i(d.value)+'".',1),e[6]||(e[6]=r("p",null,"Try a different keyword or clear your search.",-1))])):(n(),l("div",Q,[(n(!0),l(R,null,V(p.value,s=>{var o;return n(),l("div",{key:s.id,class:"bg-gray-50 rounded-lg shadow-sm p-5 border border-gray-200 flex flex-col justify-between hover:shadow-md transition-shadow duration-200"},[r("div",null,[r("div",J,[r("h3",K,i(s.title),1),r("span",{class:v(["px-3 py-1 rounded-full text-xs font-bold capitalize flex-shrink-0",q(s.status)])},i(s.status.replace(/_/g," ")),3)]),r("p",O,i(s.description||"No description provided."),1)]),r("div",W,[r("div",X,[e[7]||(e[7]=y('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-file-text mr-1 text-gray-500" data-v-f200ec15><path d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z" data-v-f200ec15></path><path d="M14 2v4a2 2 0 0 0 2 2h4" data-v-f200ec15></path><path d="M10 9H8" data-v-f200ec15></path><path d="M16 13H8" data-v-f200ec15></path><path d="M16 17H8" data-v-f200ec15></path></svg> Type: ',2)),r("span",Y,i(s.type.replace(/_/g," ")),1)]),r("div",ee,[e[8]||(e[8]=r("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-user mr-1 text-gray-500"},[r("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),r("circle",{cx:"12",cy:"7",r:"4"})],-1)),e[9]||(e[9]=g(" Submitted by: ",-1)),r("span",te,i(((o=s.team_member)==null?void 0:o.name)||"Unknown"),1),g(" on "+i(C(s.submitted_at)),1)])]),r("div",re,[r("button",{onClick:ie=>D(s),class:"w-full bg-blue-600 text-white py-2.5 px-4 rounded-lg font-semibold hover:bg-blue-700 transition-all duration-200 ease-in-out transform hover:scale-105 shadow-md flex items-center justify-center"},e[10]||(e[10]=[r("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-eye mr-2"},[r("path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"}),r("circle",{cx:"12",cy:"12",r:"3"})],-1),g(" Review Now ",-1)]),8,se)])])}),128))]))]))}},de=A(ae,[["__scopeId","data-v-f200ec15"]]);export{de as default};
