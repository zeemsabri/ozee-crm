import{c as u,r as c,e as p,f as y,a as m,i as d,o as r,b as o,v as x,x as b,d as f,g,a8 as E,m as S,u as A}from"./app-DbT8OS6U.js";import{u as C,l as D}from"./workflowStore-DZJsW282.js";import{S as R}from"./SelectDropdown-CHW2wT9H.js";import k from"./CreateRecordConfig-CFamKmFI.js";import w from"./UpdateRecordConfig-BVOnP9lT.js";import T from"./SendEmailConfig-74yinAi8.js";import{S as V}from"./save-Dz7hmyY3.js";/* empty css                                                                       */import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./plus-Cqbd8Y22.js";import"./createLucideIcon-CcTmroC8.js";import"./trash-2-TxAo_pPz.js";const N={key:0,class:"p-4 space-y-4"},h={key:0,class:"pt-4 border-t mt-4"},O={class:"pt-2"},H={__name:"ActionConfig",setup(U){const l=C(),t=u(()=>l.selectedStep),a=c(null),v=c([{value:"CREATE_RECORD",label:"Create Record"},{value:"UPDATE_RECORD",label:"Update Record"},{value:"SEND_EMAIL",label:"Send Email"}]),i=u(()=>{switch(a.value){case"CREATE_RECORD":return k;case"UPDATE_RECORD":return w;case"SEND_EMAIL":return T;default:return null}});p(t,s=>{var e;s&&((e=s.step_config)!=null&&e.action_type)?a.value=s.step_config.action_type:a.value=null},{immediate:!0}),p(a,s=>{t.value&&((!t.value.step_config||typeof t.value.step_config!="object"||Array.isArray(t.value.step_config))&&(t.value.step_config={}),t.value.step_config.action_type=s)}),y(()=>{Object.keys(l.automationSchema).length||l.fetchAutomationSchema()});const _=async()=>{t.value&&(await l.persistStep(t.value),D.success("Step saved successfully!"),l.selectStep(null))};return(s,e)=>t.value?(r(),m("div",N,[o("div",null,[e[2]||(e[2]=o("label",{class:"block text-xs font-medium text-gray-700"},"Name",-1)),x(o("input",{"onUpdate:modelValue":e[0]||(e[0]=n=>t.value.name=n),type:"text",class:"mt-1 w-full border rounded px-2 py-1 text-sm",placeholder:"Action name"},null,512),[[b,t.value.name]])]),o("div",null,[e[3]||(e[3]=o("label",{class:"block text-xs font-medium text-gray-700"},"Action Type",-1)),f(R,{modelValue:a.value,"onUpdate:modelValue":e[1]||(e[1]=n=>a.value=n),options:v.value,placeholder:"Select an action...",class:"w-full mt-1"},null,8,["modelValue","options"]),e[4]||(e[4]=o("p",{class:"text-xs text-gray-500 mt-1"},"Define the task this step will perform.",-1))]),i.value?(r(),m("div",h,[(r(),g(E(i.value)))])):d("",!0),o("div",O,[o("button",{onClick:_,class:"w-full flex items-center justify-center gap-2 px-4 py-2 text-sm font-semibold text-white bg-blue-600 rounded-lg hover:bg-blue-700"},[f(A(V),{class:"w-4 h-4"}),e[5]||(e[5]=S(" Save Step ",-1))])])])):d("",!0)}};export{H as default};
