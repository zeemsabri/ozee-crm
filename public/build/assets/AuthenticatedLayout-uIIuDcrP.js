import{r as P,B as mt,w as me,c as E,o as l,a as b,b as i,d as Gt,i as m,g as x,t as N,F as de,j as ce,p as F,f as ie,l as ir,m as $,e as v,k as Ye,x as ne,s as H,K as Ot,J as qt,G as lr,I as ut,_ as at,A as Oe,L as Ne,M as he,N as Le,D as ra,O as us,z as Zt,T as oa,P as ur,Q as Wt,h as A,R as dr,S as qs,U as cr,V as fr,n as je,W as na,X as vs,Y as xs,Z as Xe,$ as pe,a0 as Ze,a1 as ds,a2 as mr,a3 as hr,a4 as vr,a5 as Zs,q as gr}from"./app-LVJx7_bI.js";import{P as ye}from"./PrimaryButton-CAJgoEm1.js";import{a as Mt,_ as Ss}from"./SecondaryButton-6J3uj4Gp.js";import{_ as G}from"./InputLabel-CBNE2Wzj.js";import{a as ae,_ as Fe}from"./InputError-BJ3-j-HB.js";import{_ as yr}from"./Checkbox-Bti-hCmj.js";import{A as pr}from"./ApplicationLogo-CSv8NqB_.js";import{D as ia}from"./DangerButton-Bhib9ZFo.js";const kr={class:"p-6"},_r={class:"mt-6"},wr={key:0,class:"mb-4 p-4 bg-green-100 border border-green-400 text-green-700 rounded"},br={key:1,class:"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded"},xr={class:"flex items-center mb-3"},Sr=["id","onUpdate:modelValue"],Dr=["for"],Mr={key:0,class:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800"},Tr={key:0},$r={class:"mb-4"},Cr={class:"flex items-center"},Yr=["id","checked","onChange"],Or=["for"],Pr={key:0,class:"mb-4"},Nr=["id","onUpdate:modelValue"],Ar={key:1,class:"mb-4"},Ir={class:"flex-1"},Er=["id","onUpdate:modelValue"],Rr={class:"flex-1"},Ur=["id","onUpdate:modelValue"],Lr={key:0,class:"flex items-end pb-1"},jr=["onClick"],Wr=["onClick"],Vr={class:"mt-6 flex justify-end space-x-3"},Fr={key:0,class:"flex items-center"},Hr={key:1},Br={__name:"AvailabilityModal",props:{show:Boolean,date:{type:String,default:()=>{const e=new Date;return e.setDate(e.getDate()+1),e.toISOString().split("T")[0]}},nextWeekDates:{type:Array,default:()=>[]},userId:{type:Number,default:null}},emits:["close","availability-saved"],setup(e,{emit:t}){const s=()=>{const w=localStorage.getItem("authToken");w&&!ne.defaults.headers.common.Authorization&&(ne.defaults.headers.common.Authorization=`Bearer ${w}`,console.log("Auth headers set in AvailabilityModal"))},a=e,r=t,o=P({}),n=P({}),u=P(!1),f=P(""),d=()=>{const w=[],y=new Date,c=new Date(y);c.setDate(y.getDate()+1);for(let h=0;h<7;h++){const k=new Date(c);k.setDate(c.getDate()+h);const Y=k.toISOString().split("T")[0];w.push({value:Y,label:k.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})}),o.value[Y]={isSelected:!1,isAvailable:!0,reason:"",timeSlots:[{start_time:"",end_time:""}]}}return w},p=P([]);mt(()=>{s(),a.nextWeekDates.length>0?(p.value=a.nextWeekDates,a.nextWeekDates.forEach(w=>{o.value[w.value]={isSelected:!1,isAvailable:!0,reason:"",timeSlots:[{start_time:"",end_time:""}]}})):p.value=d()});const S=async()=>{try{if(s(),p.value.length===0)return;const w=p.value[0].value,y=p.value[p.value.length-1].value,c=await ne.get("/api/availabilities",{params:{start_date:w,end_date:y,user_id:a.userId}});if(c.data&&c.data.availabilities){const h=c.data.availabilities;p.value.forEach(k=>{o.value[k.value]={isSelected:!1,isAvailable:!0,reason:"",timeSlots:[{start_time:"",end_time:""}]}}),h.forEach(k=>{const Y=k.date.split("T")[0];o.value[Y]&&(o.value[Y].isSelected=!0,o.value[Y].isAvailable=k.is_available,k.is_available?o.value[Y].timeSlots=k.time_slots&&k.time_slots.length>0?[...k.time_slots]:[{start_time:"",end_time:""}]:o.value[Y].reason=k.reason||"")})}}catch(w){console.error("Error fetching existing availabilities:",w),p.value.forEach(y=>{o.value[y.value]={isSelected:!1,isAvailable:!0,reason:"",timeSlots:[{start_time:"",end_time:""}]}})}};me(()=>a.show,async w=>{w&&(n.value={},f.value="",await S())},{immediate:!0});const O=w=>{o.value[w].timeSlots.push({start_time:"",end_time:""})},Z=(w,y)=>{o.value[w].timeSlots.length>1&&o.value[w].timeSlots.splice(y,1)},T=(w,y)=>{o.value[w].isAvailable=y,y?o.value[w].reason="":o.value[w].timeSlots=[{start_time:"",end_time:""}]},g=async()=>{u.value=!0,n.value={},f.value="";const w=[];let y=!1;for(const c of p.value){const h=c.value,k=o.value[h];if(k.isSelected){let Y={};if(k.isAvailable)if(k.timeSlots.some(L=>!L.start_time||!L.end_time))Y.timeSlots="Please fill in all time slots.",y=!0;else for(const L of k.timeSlots){const re=L.start_time.split(":").map(Number),Ee=L.end_time.split(":").map(Number);if(re.length!==2||Ee.length!==2||isNaN(re[0])||isNaN(re[1])||isNaN(Ee[0])||isNaN(Ee[1])){Y.timeSlots="Invalid time format. Please use HH:MM format.",y=!0;break}const X=re[0]*60+re[1],j=Ee[0]*60+Ee[1];if(X>=j){Y.timeSlots="End time must be after start time.",y=!0;break}}else k.reason.trim()||(Y.reason="Please provide a reason for unavailability.",y=!0);Object.keys(Y).length>0&&(n.value[h]=Y),Object.keys(Y).length===0&&w.push({date:h,is_available:k.isAvailable,reason:k.isAvailable?null:k.reason,time_slots:k.isAvailable?k.timeSlots:null})}}if(y){u.value=!1,n.value.general="Please correct the errors in the highlighted dates.";return}if(w.length===0){n.value.general="Please select at least one day to set availability for.",u.value=!1;return}try{s();const c=await ne.post("/api/availabilities/batch",{availabilities:w});f.value="Availability saved successfully!";try{const h=await ne.get("/api/availability-prompt");localStorage.setItem("shouldBlockUser",h.data.should_block_user),localStorage.setItem("allWeekdaysCovered",h.data.all_weekdays_covered);const k=new CustomEvent("availability-status-updated",{detail:{shouldBlockUser:h.data.should_block_user,allWeekdaysCovered:h.data.all_weekdays_covered}});window.dispatchEvent(k),console.log("Availability status updated from modal:",{shouldBlockUser:h.data.should_block_user,allWeekdaysCovered:h.data.all_weekdays_covered})}catch(h){console.error("Error updating availability status:",h)}r("availability-saved",c.data.availabilities),setTimeout(()=>{r("close")},1500)}catch(c){console.error("Error saving availability:",c),c.response&&c.response.data&&c.response.data.errors?n.value.general=c.response.data.message||"An error occurred while saving your availability.":c.response&&c.response.status===409?(f.value=c.response.data.message,setTimeout(()=>{r("close")},1500)):n.value.general="An unexpected error occurred while saving your availability."}finally{u.value=!1}};return(w,y)=>(l(),E(Ss,{show:e.show,onClose:y[1]||(y[1]=c=>w.$emit("close")),"max-width":"xl"},{default:b(()=>[i("div",kr,[y[6]||(y[6]=i("h2",{class:"text-lg font-medium text-gray-900"}," Submit Your Weekly Availability ",-1)),y[7]||(y[7]=i("p",{class:"mt-1 text-sm text-gray-600"}," Please select the dates you wish to set availability for and provide your details for each. ",-1)),i("div",_r,[i("form",{onSubmit:Gt(g,["prevent"])},[f.value?(l(),m("div",wr,N(f.value),1)):x("",!0),n.value.general?(l(),m("div",br,N(n.value.general),1)):x("",!0),(l(!0),m(de,null,ce(p.value,c=>{var h,k;return l(),m("div",{key:c.value,class:F(["mb-6 p-4 border rounded-lg shadow-sm",[o.value[c.value].isSelected?"border-indigo-300 bg-indigo-50":"border-gray-200",o.value[c.value].isSelected&&!n.value[c.value]?"border-l-4 border-l-indigo-500":""]])},[i("div",xr,[ie(i("input",{type:"checkbox",id:`select_date_${c.value}`,"onUpdate:modelValue":Y=>o.value[c.value].isSelected=Y,class:"rounded border-gray-300 text-indigo-600 shadow-sm focus:ring-indigo-500"},null,8,Sr),[[ir,o.value[c.value].isSelected]]),i("label",{for:`select_date_${c.value}`,class:"ml-2 block text-base font-medium text-gray-800"},[$(N(c.label)+" ",1),o.value[c.value].isSelected?(l(),m("span",Mr," Saved ")):x("",!0)],8,Dr)]),o.value[c.value].isSelected?(l(),m("div",Tr,[i("div",$r,[i("div",Cr,[i("input",{type:"checkbox",id:`isAvailableToggle_${c.value}`,checked:o.value[c.value].isAvailable,onChange:Y=>T(c.value,Y.target.checked),class:"rounded border-gray-300 text-indigo-600 shadow-sm focus:ring-indigo-500"},null,40,Yr),i("label",{for:`isAvailableToggle_${c.value}`,class:"ml-2 block text-sm text-gray-700"}," I am available on this day ",8,Or)])]),o.value[c.value].isAvailable?x("",!0):(l(),m("div",Pr,[v(G,{for:`reason_${c.value}`,value:"Reason for Not Available"},null,8,["for"]),ie(i("textarea",{id:`reason_${c.value}`,"onUpdate:modelValue":Y=>o.value[c.value].reason=Y,rows:"2",class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",placeholder:"e.g., Out of office, Holiday, Meeting all day"},null,8,Nr),[[Ye,o.value[c.value].reason]]),v(ae,{message:(h=n.value[c.value])==null?void 0:h.reason,class:"mt-2"},null,8,["message"])])),o.value[c.value].isAvailable?(l(),m("div",Ar,[v(G,{value:"Available Time Slots"}),v(ae,{message:(k=n.value[c.value])==null?void 0:k.timeSlots,class:"mt-2"},null,8,["message"]),(l(!0),m(de,null,ce(o.value[c.value].timeSlots,(Y,L)=>(l(),m("div",{key:L,class:"flex items-center space-x-2 mt-2"},[i("div",Ir,[v(G,{for:`start_time_${c.value}_${L}`,value:"Start Time",class:"text-xs"},null,8,["for"]),ie(i("input",{id:`start_time_${c.value}_${L}`,type:"time","onUpdate:modelValue":re=>Y.start_time=re,class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm"},null,8,Er),[[Ye,Y.start_time]])]),i("div",Rr,[v(G,{for:`end_time_${c.value}_${L}`,value:"End Time",class:"text-xs"},null,8,["for"]),ie(i("input",{id:`end_time_${c.value}_${L}`,type:"time","onUpdate:modelValue":re=>Y.end_time=re,class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm"},null,8,Ur),[[Ye,Y.end_time]])]),o.value[c.value].timeSlots.length>1?(l(),m("div",Lr,[i("button",{type:"button",onClick:re=>Z(c.value,L),class:"p-2 text-red-600 hover:text-red-800"},y[2]||(y[2]=[i("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[i("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm6 0a1 1 0 012 0v6a1 1 0 11-2 0V8z","clip-rule":"evenodd"})],-1)]),8,jr)])):x("",!0)]))),128)),i("button",{type:"button",onClick:Y=>O(c.value),class:"mt-3 w-full flex items-center justify-center px-4 py-2 border border-dashed border-indigo-300 rounded-lg text-indigo-600 hover:bg-indigo-50 transition duration-150 ease-in-out"},y[3]||(y[3]=[i("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[i("path",{"fill-rule":"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z","clip-rule":"evenodd"})],-1),$(" Add Another Time Slot ",-1)]),8,Wr)])):x("",!0)])):x("",!0)],2)}),128)),i("div",Vr,[v(Mt,{onClick:y[0]||(y[0]=c=>w.$emit("close"))},{default:b(()=>y[4]||(y[4]=[$(" Cancel ",-1)])),_:1,__:[4]}),v(ye,{disabled:u.value,class:F({"opacity-50":u.value})},{default:b(()=>[u.value?(l(),m("span",Fr,y[5]||(y[5]=[i("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[i("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),i("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),$(" Saving... ",-1)]))):(l(),m("span",Hr,"Save Availability"))]),_:1},8,["disabled","class"])])],32)])])]),_:1},8,["show"]))}},zr={key:0,class:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center"},Gr={class:"bg-white rounded-lg shadow-xl p-6 max-w-lg w-full mx-4"},qr={class:"flex justify-center"},Zr={__name:"AvailabilityBlocker",setup(e){const t=P(!1),s=P(!0),a=P(!1),r=P([]),o=H(()=>{var g;return((g=Ot().props.auth.user)==null?void 0:g.id)||null}),n=()=>{const g=localStorage.getItem("authToken");g&&!ne.defaults.headers.common.Authorization&&(ne.defaults.headers.common.Authorization=`Bearer ${g}`)},u=async()=>{s.value=!0;const g=localStorage.getItem("shouldBlockUser"),w=localStorage.getItem("allWeekdaysCovered");if(g==="true"&&w==="false")t.value=!0,await f();else try{n();const y=await ne.get("/api/availability-prompt");t.value=y.data.should_block_user&&!y.data.all_weekdays_covered,t.value&&await f()}catch(y){console.error("Error checking if user should be blocked:",y),t.value=!1}s.value=!1},f=async()=>{try{n();const g=await ne.get("/api/availability-prompt");d(g.data.next_week_start,g.data.next_week_end)}catch(g){console.error("Error fetching next week dates:",g)}},d=(g,w)=>{const y=[],c=new Date(g),h=new Date(w),k=new Date(c);for(;k<=h;)y.push({value:k.toISOString().split("T")[0],label:k.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})}),k.setDate(k.getDate()+1);r.value=y},p=()=>{a.value=!0},S=()=>{u()},O=g=>{t.value=g.detail.shouldBlockUser&&!g.detail.allWeekdaysCovered},Z=()=>{document.visibilityState==="visible"&&ut(()=>{u()})},T=g=>{(g.key==="shouldBlockUser"||g.key==="allWeekdaysCovered")&&ut(()=>{u()})};return mt(()=>{u(),window.addEventListener("availability-status-updated",O),document.addEventListener("visibilitychange",Z),window.addEventListener("storage",T)}),qt(()=>{window.removeEventListener("availability-status-updated",O),document.removeEventListener("visibilitychange",Z),window.removeEventListener("storage",T)}),(g,w)=>t.value&&!s.value?(l(),m("div",zr,[i("div",Gr,[w[2]||(w[2]=lr('<div class="flex items-center mb-4"><div class="flex-shrink-0 mr-3"><svg class="h-8 w-8 text-red-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg></div><h2 class="text-xl font-bold text-gray-900">Action Required</h2></div><p class="mb-6 text-gray-700"> You must submit your availability for all weekdays of next week before you can continue using the application. This is required for planning meetings and work schedules. </p>',2)),i("div",qr,[v(ye,{onClick:p,class:"bg-red-600 hover:bg-red-700"},{default:b(()=>w[1]||(w[1]=[$(" Submit Availability Now ",-1)])),_:1,__:[1]})]),v(Br,{show:a.value,"next-week-dates":r.value,date:r.value.length>0?r.value[0].value:"",userId:o.value,onClose:w[0]||(w[0]=y=>a.value=!1),onAvailabilitySaved:S},null,8,["show","next-week-dates","date","userId"])])])):x("",!0)}},Kr={class:"p-6"},Jr={class:"flex justify-between items-center mb-4"},Qr={class:"text-lg font-medium text-gray-900"},Xr={key:0,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert"},eo={class:"block sm:inline"},to={key:0,class:"mt-6 flex justify-end space-x-3"},so={__name:"BaseFormModal",props:{show:{type:Boolean,default:!1},title:{type:String,default:"Modal Title"},apiEndpoint:{type:String,required:!1},httpMethod:{type:String,default:"post",validator:e=>["post","put","patch","delete"].includes(e.toLowerCase())},formData:{type:Object,required:!0},submitButtonText:{type:String,default:"Save"},successMessage:{type:String,default:"Operation successful!"},formatDataForApi:{type:Function,default:e=>e},showFooter:{type:Boolean,default:!0}},emits:["close","submitted","error"],setup(e,{emit:t}){const s=e,a=t,r=P(!1),o=P({}),n=P("");me(()=>s.show,d=>{d&&(o.value={},n.value="",r.value=!1)});const u=async()=>{r.value=!0,o.value={},n.value="";try{const d=s.formatDataForApi(s.formData);let p;const S=s.httpMethod.toLowerCase();if(S==="post")p=await window.axios.post(s.apiEndpoint,d);else if(S==="put")p=await window.axios.put(s.apiEndpoint,d);else if(S==="patch")p=await window.axios.patch(s.apiEndpoint,d);else if(S==="delete")p=await window.axios.delete(s.apiEndpoint,{data:d});else throw new Error(`Unsupported HTTP method: ${s.httpMethod}`);Ne(s.successMessage),a("submitted",p.data),a("close")}catch(d){console.error("API submission error:",d),d.response?d.response.status===422?(o.value=d.response.data.errors,n.value="Please correct the errors in the form."):n.value=d.response.data.message||"An unexpected error occurred.":n.value="A network error occurred or the server is unreachable.",he(n.value),a("error",d)}finally{r.value=!1}},f=()=>{a("close")};return(d,p)=>(l(),E(Ss,{show:e.show,onClose:f},{default:b(()=>[i("div",Kr,[i("div",Jr,[i("h2",Qr,N(e.title),1),i("button",{onClick:f,class:"text-gray-400 hover:text-gray-500"},p[0]||(p[0]=[i("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),n.value?(l(),m("div",Xr,[i("span",eo,N(n.value),1)])):x("",!0),i("form",{onSubmit:Gt(u,["prevent"])},[Oe(d.$slots,"default",{errors:o.value},void 0,!0),e.showFooter?(l(),m("div",to,[v(Mt,{onClick:f,type:"button",disabled:r.value},{default:b(()=>p[1]||(p[1]=[$(" Cancel ",-1)])),_:1,__:[1]},8,["disabled"]),v(ye,{type:"submit",disabled:r.value,class:F({"opacity-75 cursor-not-allowed":r.value})},{default:b(()=>[$(N(r.value?"Submitting...":e.submitButtonText),1)]),_:1},8,["disabled","class"])])):x("",!0)],32)])]),_:3},8,["show"]))}},Kt=at(so,[["__scopeId","data-v-380ca613"]]),ao=["disabled"],ro={class:"absolute z-50 mt-1 w-full rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5"},oo={class:"p-2 border-b border-gray-200"},no=["onClick"],io={key:0,class:"block px-4 py-2 text-sm text-gray-500"},lo={__name:"SelectDropdown",props:{modelValue:{type:[String,Number,Object,null],default:null},options:{type:Array,default:()=>[]},placeholder:{type:String,default:"Select an option"},valueKey:{type:String,default:"value"},labelKey:{type:String,default:"label"},disabled:{type:Boolean,default:!1},required:{type:Boolean,default:!1},maxHeight:{type:String,default:"250px"},width:{type:String,default:"full"},labelClass:{type:String,default:"text-xs"}},emits:["update:modelValue","change"],setup(e,{emit:t}){const s=e,a=t,r=P(!1),o=P(""),n=P(null),u=P(null),f=H(()=>{if(!o.value)return s.options;const T=o.value.toLowerCase();return s.options.filter(g=>g[s.labelKey].toLowerCase().includes(T))}),d=T=>{n.value&&!n.value.contains(T.target)&&(r.value=!1,o.value="")},p=T=>{T.key==="Escape"&&r.value&&(r.value=!1,o.value="")};mt(()=>{document.addEventListener("click",d),document.addEventListener("keydown",p)}),qt(()=>{document.removeEventListener("click",d),document.removeEventListener("keydown",p)});const S=H(()=>{if(s.modelValue===null||s.modelValue===void 0||s.modelValue==="")return s.placeholder;const T=s.options.find(g=>g[s.valueKey]===s.modelValue);return T?T[s.labelKey]:s.placeholder}),O=T=>{a("update:modelValue",T[s.valueKey]),a("change",T[s.valueKey]),r.value=!1,o.value=""},Z=()=>{s.disabled||(r.value=!r.value,r.value&&ut(()=>{u.value&&u.value.focus()}))};return me(()=>s.modelValue,T=>{(T==null||T==="")&&(o.value="")}),(T,g)=>(l(),m("div",{ref_key:"dropdownRef",ref:n,class:F(["relative",{"w-full":e.width==="full"}])},[i("button",{type:"button",onClick:Z,disabled:e.disabled,class:F(["border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full text-left px-3 py-2 text-gray-700 bg-white relative flex items-center justify-between",{"opacity-50 cursor-not-allowed":e.disabled}])},[i("span",{class:F({"text-gray-500":!s.modelValue})},N(S.value),3),g[3]||(g[3]=i("svg",{class:"h-4 w-4 text-gray-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[i("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1))],10,ao),ie(i("div",ro,[i("div",oo,[ie(i("input",{ref_key:"searchInputRef",ref:u,type:"text","onUpdate:modelValue":g[0]||(g[0]=w=>o.value=w),onInput:g[1]||(g[1]=w=>r.value=!0),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-sm",placeholder:"Search...",onClick:g[2]||(g[2]=Gt(()=>{},["stop"]))},null,544),[[Ye,o.value]])]),i("div",{class:"py-1 overflow-y-auto",style:ra({maxHeight:e.maxHeight})},[(l(!0),m(de,null,ce(f.value,w=>(l(),m("div",{key:w[e.valueKey],onClick:y=>O(w),class:F(["block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 cursor-pointer",{"bg-gray-100":w[e.valueKey]===e.modelValue}])},N(w[e.labelKey]),11,no))),128)),f.value.length===0?(l(),m("div",io," No options available ")):x("",!0)],4)],512),[[Le,r.value]])],2))}},$e=at(lo,[["__scopeId","data-v-d2f1cfa0"]]),uo=(e,t)=>{let s;return(...a)=>{clearTimeout(s),s=setTimeout(()=>e(...a),t)}},co={class:"relative"},fo={class:"flex flex-wrap items-center gap-2 mb-2 p-2 border border-gray-300 rounded-lg bg-white min-h-[44px] focus-within:border-indigo-500 focus-within:ring-1 focus-within:ring-indigo-500 transition-all duration-150"},mo=["onClick"],ho={key:0,class:"absolute z-20 w-full bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto mt-1 transform-gpu"},vo=["onClick"],go={key:1,class:"px-4 py-2 text-sm text-gray-500"},yo={key:2,class:"px-4 py-2 text-sm text-gray-500"},po={__name:"TagInput",props:{modelValue:{type:Array,default:()=>[]},label:{type:String,default:"Tags"},placeholder:{type:String,default:"Add tags..."},error:{type:String,default:""},initialTags:{type:Array,default:()=>[]},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:t}){const s=e,a=t,r=P(""),o=P([]),n=P([]),u=P(!1),f=P(null);function d(){a("update:modelValue",n.value.map(y=>y.id))}me(()=>s.initialTags,y=>{if(n.value=[],y&&y.length>0){const Y=[],L=new Set;y.forEach(re=>{L.has(re.id)||(Y.push(re),L.add(re.id))}),n.value.push(...Y)}const c=y.map(Y=>Y.id),h=Array.isArray(s.modelValue)?s.modelValue:[];(c.length!==h.length||c.some(Y=>!h.includes(Y))||h.some(Y=>!c.includes(Y)))&&d()},{immediate:!0});const p=uo(async y=>{if(y.length<2){o.value=[],u.value=!1;return}try{const c=await ne.get(`/api/tags/search?query=${y}`);o.value=c.data,u.value=!0}catch(c){console.error("Error fetching tags:",c),o.value=[],u.value=!1}},300);me(r,y=>{s.disabled||p(y)});const S=y=>{n.value.some(c=>c.id===y.id)||(n.value.push(y),r.value="",o.value=[],u.value=!1,d()),ut(()=>f.value.focus())},O=()=>{if(s.disabled)return;const y=r.value.trim();if(!y)return;const c=o.value.find(k=>k.name.toLowerCase()===y.toLowerCase()),h=n.value.some(k=>k.name.toLowerCase()===y.toLowerCase());if(c)S(c);else if(h)r.value="",o.value=[],u.value=!1;else{const k={id:`new_${y.replace(/\s+/g,"-").toLowerCase()}_${Date.now()}`,name:y};n.value.push(k),r.value="",o.value=[],u.value=!1,d()}ut(()=>f.value.focus())},Z=y=>{s.disabled||(n.value=n.value.filter(c=>c.id!==y.id),d(),ut(()=>f.value.focus()))},T=()=>{s.disabled||r.value===""&&n.value.length>0&&Z(n.value[n.value.length-1])},g=H(()=>o.value.filter(y=>!n.value.some(c=>c.id===y.id))),w=y=>{f.value&&!f.value.$el.contains(y.target)&&(u.value=!1,r.value="")};return mt(()=>{document.addEventListener("click",w)}),qt(()=>{document.removeEventListener("click",w)}),(y,c)=>(l(),m("div",co,[v(G,{value:e.label,class:"mb-1"},null,8,["value"]),i("div",fo,[(l(!0),m(de,null,ce(n.value,h=>(l(),m("span",{key:h.id,class:"inline-flex items-center px-3 py-1 text-sm font-medium bg-indigo-100 text-indigo-800 rounded-full shadow-sm"},[$(N(h.name)+" ",1),e.disabled?x("",!0):(l(),m("button",{key:0,type:"button",onClick:k=>Z(h),class:"ml-2 -mr-1 text-indigo-500 hover:text-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 rounded-full p-0.5"},c[3]||(c[3]=[i("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,mo))]))),128)),v(Fe,{ref_key:"inputRef",ref:f,type:"text",placeholder:n.value.length===0?e.placeholder:"",modelValue:r.value,"onUpdate:modelValue":c[0]||(c[0]=h=>r.value=h),onFocus:c[1]||(c[1]=h=>u.value=!0),onKeydown:[us(Gt(O,["prevent"]),["enter"]),c[2]||(c[2]=us(h=>u.value=!1,["tab"])),us(T,["delete"])],class:"flex-grow min-w-[100px] border-none focus:ring-0 shadow-none p-0 bg-transparent text-gray-900",disabled:e.disabled},null,8,["placeholder","modelValue","onKeydown","disabled"])]),u.value&&(g.value.length>0||r.value.length>=2||g.value.length===0&&r.value.length<2)&&!e.disabled?(l(),m("div",ho,[(l(!0),m(de,null,ce(g.value,h=>(l(),m("div",{key:h.id,onClick:k=>S(h),class:"px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 cursor-pointer transition-colors duration-100"},N(h.name),9,vo))),128)),!o.value.some(h=>h.name.toLowerCase()===r.value.toLowerCase())&&r.value.length>=2?(l(),m("div",{key:0,onClick:O,class:"px-4 py-2 text-sm text-indigo-700 bg-indigo-50 hover:bg-indigo-100 cursor-pointer border-t border-indigo-200 font-semibold transition-colors duration-100"},' Add new tag: "'+N(r.value)+'" ',1)):x("",!0),g.value.length===0&&r.value.length<2?(l(),m("div",go," Type at least 2 characters to search for tags. ")):x("",!0),g.value.length===0&&r.value.length>=2&&!o.value.some(h=>h.name.toLowerCase()===r.value.toLowerCase())?(l(),m("div",yo,[c[4]||(c[4]=$(" No matching tags found. Press ",-1)),c[5]||(c[5]=i("span",{class:"font-semibold text-indigo-600"},"Enter",-1)),$(' to add "'+N(r.value)+'" as a new tag. ',1)])):x("",!0)])):x("",!0),v(ae,{message:e.error,class:"mt-2"},null,8,["message"])]))}},la=at(po,[["__scopeId","data-v-4d528a4c"]]),ko={class:"space-y-4"},_o="Add New Milestone",wo="/api/milestones",bo="post",xo="Create Milestone",So="Milestone created successfully!",Do={__name:"MilestoneFormModal",props:{show:Boolean,projectId:Number},emits:["close","saved"],setup(e,{emit:t}){const s=e,a=t,r=Zt({name:"",description:"",completion_date:null,status:"Not Started",project_id:s.projectId}),o=["Not Started","In Progress","Completed","Overdue"];me(()=>s.show,f=>{f&&Object.assign(r,{name:"",description:"",completion_date:null,status:"Not Started",project_id:s.projectId})},{immediate:!0});const n=f=>{a("saved",f),a("close")},u=()=>{a("close")};return(f,d)=>(l(),E(Kt,{show:e.show,title:_o,"api-endpoint":wo,"http-method":bo,"form-data":r,"submit-button-text":xo,"success-message":So,onClose:u,onSubmitted:n},{default:b(({errors:p})=>[i("div",ko,[i("div",null,[v(G,{for:"milestone-name",value:"Milestone Name"}),v(Fe,{id:"milestone-name",modelValue:r.name,"onUpdate:modelValue":d[0]||(d[0]=S=>r.name=S),type:"text",class:"mt-1 block w-full",placeholder:"Enter milestone name",required:""},null,8,["modelValue"]),v(ae,{message:p.name?p.name[0]:"",class:"mt-2"},null,8,["message"])]),i("div",null,[v(G,{for:"milestone-description",value:"Description"}),ie(i("textarea",{id:"milestone-description","onUpdate:modelValue":d[1]||(d[1]=S=>r.description=S),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",rows:"3",placeholder:"Enter milestone description"},null,512),[[Ye,r.description]]),v(ae,{message:p.description?p.description[0]:"",class:"mt-2"},null,8,["message"])]),i("div",null,[v(G,{for:"milestone-completion-date",value:"Completion Date"}),v(Fe,{id:"milestone-completion-date",modelValue:r.completion_date,"onUpdate:modelValue":d[2]||(d[2]=S=>r.completion_date=S),type:"date",class:"mt-1 block w-full"},null,8,["modelValue"]),v(ae,{message:p.completion_date?p.completion_date[0]:"",class:"mt-2"},null,8,["message"])]),i("div",null,[v(G,{for:"milestone-status",value:"Status"}),v($e,{id:"milestone-status",modelValue:r.status,"onUpdate:modelValue":d[3]||(d[3]=S=>r.status=S),options:o.map(S=>({value:S,label:S})),"value-key":"value","label-key":"label",placeholder:"Select status",class:"mt-1"},null,8,["modelValue","options"]),v(ae,{message:p.status?p.status[0]:"",class:"mt-2"},null,8,["message"])])])]),_:1},8,["show","form-data"]))}},Mo={class:"space-y-4"},To={key:0},$o={key:0,class:"text-sm text-gray-500"},Co={key:0,class:"text-sm text-gray-500"},Yo={key:0,class:"text-sm text-gray-500"},Oo={class:"flex items-center gap-2 mt-1"},Po={key:0,class:"text-sm text-gray-500"},No=["disabled"],Ao="Create New Task",Io="/api/tasks",Eo="post",Ro="Create Task",Uo="Task created successfully!",Lo={__name:"CreateTaskModal",props:{show:Boolean,projectId:{type:Number,default:null}},emits:["close","saved"],setup(e,{emit:t}){const s=e,a=t,r=Zt({name:"",description:"",assigned_to_user_id:null,due_date:null,status:"To Do",task_type_id:null,milestone_id:null,project_id:s.projectId,priority:"medium",tags:[],tags_data:[]}),o=["To Do","In Progress","Done","Blocked","Archived"],n=[{value:"low",label:"Low"},{value:"medium",label:"Medium"},{value:"high",label:"High"}],u=P([]),f=P([]),d=P([]),p=P([]),S=P(!0),O=P(!1),Z=P(!1),T=P(!1),g=P(!1);me(()=>s.show,async X=>{X&&(Object.assign(r,{name:"",description:"",assigned_to_user_id:null,due_date:null,status:"To Do",task_type_id:null,milestone_id:null,project_id:s.projectId,priority:"medium",tags:[],tags_data:[]}),s.projectId?await y(s.projectId):await w())},{immediate:!0}),me(()=>r.project_id,async X=>{X?await y(X):(f.value=[],d.value=[],p.value=[])});const w=async()=>{S.value=!0;try{const X=await window.axios.get("/api/projects-simplified");u.value=X.data.map(j=>({value:j.id,label:j.name}))}catch(X){console.error("Error fetching projects:",X),u.value=[]}finally{S.value=!1}},y=async X=>{if(X){O.value=!0,Z.value=!0,T.value=!0;try{const[j,K,Q]=await Promise.all([window.axios.get(`/api/projects/${X}/users`),window.axios.get("/api/task-types"),window.axios.get(`/api/projects/${X}/milestones`)]);f.value=j.data.map(Te=>({value:Te.id,label:Te.name})),d.value=K.data.map(Te=>({value:Te.id,label:Te.name})),p.value=Q.data.map(Te=>({value:Te.id,label:Te.name}))}catch(j){console.error("Error fetching associated task data:",j),f.value=[],d.value=[],p.value=[]}finally{O.value=!1,Z.value=!1,T.value=!1}}},c=X=>{a("saved",X),a("close")},h=()=>{a("close")},k=()=>{r.project_id?g.value=!0:alert("Please select a project before adding a milestone.")},Y=X=>{if(g.value=!1,X&&X.id&&X.name){const j={value:X.id,label:X.name};p.value.some(K=>K.value===j.value)||p.value.push(j),r.milestone_id=j.value}},L=H(()=>f.value),re=H(()=>d.value),Ee=H(()=>p.value);return(X,j)=>(l(),m(de,null,[v(Kt,{show:e.show,title:Ao,"api-endpoint":Io,"http-method":Eo,"form-data":r,"submit-button-text":Ro,"success-message":Uo,onClose:h,onSubmitted:c},{default:b(({errors:K})=>[i("div",Mo,[e.projectId?x("",!0):(l(),m("div",To,[v(G,{for:"task-project",value:"Project"}),S.value?(l(),m("div",$o,"Loading projects...")):(l(),E($e,{key:1,id:"task-project",modelValue:r.project_id,"onUpdate:modelValue":j[0]||(j[0]=Q=>r.project_id=Q),options:u.value,"value-key":"value","label-key":"label",placeholder:"Select a project",class:"mt-1",required:!0},null,8,["modelValue","options"])),v(ae,{message:K.project_id?K.project_id[0]:"",class:"mt-2"},null,8,["message"])])),i("div",null,[v(G,{for:"task-name",value:"Task Name"}),v(Fe,{id:"task-name",modelValue:r.name,"onUpdate:modelValue":j[1]||(j[1]=Q=>r.name=Q),type:"text",class:"mt-1 block w-full",placeholder:"Enter task name",required:""},null,8,["modelValue"]),v(ae,{message:K.name?K.name[0]:"",class:"mt-2"},null,8,["message"])]),i("div",null,[v(G,{for:"task-description",value:"Description"}),ie(i("textarea",{id:"task-description","onUpdate:modelValue":j[2]||(j[2]=Q=>r.description=Q),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",rows:"3",placeholder:"Enter task description"},null,512),[[Ye,r.description]]),v(ae,{message:K.description?K.description[0]:"",class:"mt-2"},null,8,["message"])]),i("div",null,[v(G,{for:"task-status",value:"Status"}),v($e,{id:"task-status",modelValue:r.status,"onUpdate:modelValue":j[3]||(j[3]=Q=>r.status=Q),options:o.map(Q=>({value:Q,label:Q})),"value-key":"value","label-key":"label",placeholder:"Select status",class:"mt-1"},null,8,["modelValue","options"]),v(ae,{message:K.status?K.status[0]:"",class:"mt-2"},null,8,["message"])]),i("div",null,[v(G,{for:"task-priority",value:"Priority"}),v($e,{id:"task-priority",modelValue:r.priority,"onUpdate:modelValue":j[4]||(j[4]=Q=>r.priority=Q),options:n,"value-key":"value","label-key":"label",placeholder:"Select priority",class:"mt-1"},null,8,["modelValue"]),v(ae,{message:K.priority?K.priority[0]:"",class:"mt-2"},null,8,["message"])]),i("div",null,[v(G,{for:"task-due-date",value:"Due Date"}),v(Fe,{id:"task-due-date",modelValue:r.due_date,"onUpdate:modelValue":j[5]||(j[5]=Q=>r.due_date=Q),type:"date",class:"mt-1 block w-full"},null,8,["modelValue"]),v(ae,{message:K.due_date?K.due_date[0]:"",class:"mt-2"},null,8,["message"])]),i("div",null,[v(G,{for:"task-assigned-to",value:"Assigned To"}),O.value?(l(),m("div",Co,"Loading users...")):(l(),E($e,{key:1,id:"task-assigned-to",modelValue:r.assigned_to_user_id,"onUpdate:modelValue":j[6]||(j[6]=Q=>r.assigned_to_user_id=Q),options:L.value,"value-key":"value","label-key":"label",placeholder:"Unassigned",class:"mt-1","allow-empty":!0},null,8,["modelValue","options"])),v(ae,{message:K.assigned_to_user_id?K.assigned_to_user_id[0]:"",class:"mt-2"},null,8,["message"])]),i("div",null,[v(G,{for:"task-type",value:"Task Type"}),Z.value?(l(),m("div",Yo,"Loading task types...")):(l(),E($e,{key:1,id:"task-type",modelValue:r.task_type_id,"onUpdate:modelValue":j[7]||(j[7]=Q=>r.task_type_id=Q),options:re.value,"value-key":"value","label-key":"label",placeholder:"Select a task type",class:"mt-1","allow-empty":!0},null,8,["modelValue","options"])),v(ae,{message:K.task_type_id?K.task_type_id[0]:"",class:"mt-2"},null,8,["message"])]),i("div",null,[v(G,{for:"task-milestone",value:"Milestone"}),i("div",Oo,[T.value?(l(),m("div",Po,"Loading milestones...")):(l(),E($e,{key:1,id:"task-milestone",modelValue:r.milestone_id,"onUpdate:modelValue":j[8]||(j[8]=Q=>r.milestone_id=Q),options:Ee.value,"value-key":"value","label-key":"label",placeholder:"No milestone",class:"flex-grow","allow-empty":!0,disabled:!r.project_id},null,8,["modelValue","options","disabled"])),i("button",{type:"button",onClick:k,disabled:!r.project_id||T.value,class:"px-3 py-2 text-sm font-medium text-blue-600 bg-blue-50 rounded-md hover:bg-blue-100 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",title:"Add New Milestone"},j[11]||(j[11]=[i("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4v16m8-8H4"})],-1)]),8,No)]),v(ae,{message:K.milestone_id?K.milestone_id[0]:"",class:"mt-2"},null,8,["message"])]),i("div",null,[v(la,{modelValue:r.tags,"onUpdate:modelValue":j[9]||(j[9]=Q=>r.tags=Q),initialTags:r.tags_data,label:"Tags",placeholder:"Search or add tags",error:K.tags?K.tags[0]:"",disabled:!r.project_id},null,8,["modelValue","initialTags","error","disabled"])])])]),_:1},8,["show","form-data"]),v(Do,{show:g.value,"project-id":r.project_id,onClose:j[10]||(j[10]=K=>g.value=!1),onSaved:Y},null,8,["show","project-id"])],64))}},jo={class:"space-y-4"},Wo={class:"flex items-center mt-4"},Vo={__name:"CreateForm",props:{show:{type:Boolean,default:!1},apiEndpoint:{type:String,required:!0}},emits:["close","resourceCreated"],setup(e,{emit:t}){const s=e,a=t,r=Zt({title:"",description:"",url:"",type:"website",thumbnail_url:"",visible_to_client:!0,tags:[]}),o=H(()=>[{value:"website",label:"Website"},{value:"youtube",label:"YouTube Video"},{value:"document",label:"Document"},{value:"image",label:"Image"},{value:"other",label:"Other"}]),n=d=>d,u=d=>{a("resourceCreated",d),f()},f=()=>{r.title="",r.description="",r.url="",r.type="website",r.thumbnail_url="",r.visible_to_client=!0,r.tags=[],a("close")};return(d,p)=>(l(),E(Kt,{show:s.show,title:"Add New Shareable Resource",apiEndpoint:s.apiEndpoint,httpMethod:"post",formData:r,submitButtonText:"Create Resource",successMessage:"Shareable resource created successfully!",formatDataForApi:n,onSubmitted:u,onClose:f},{default:b(({errors:S})=>[i("div",jo,[i("div",null,[v(G,{for:"title",value:"Title",class:"mb-1"}),v(Fe,{id:"title",type:"text",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:r.title,"onUpdate:modelValue":p[0]||(p[0]=O=>r.title=O),required:""},null,8,["modelValue"]),v(ae,{message:S.title?S.title[0]:"",class:"mt-2"},null,8,["message"])]),i("div",null,[v(G,{for:"url",value:"Resource URL",class:"mb-1"}),v(Fe,{id:"url",type:"url",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:r.url,"onUpdate:modelValue":p[1]||(p[1]=O=>r.url=O),required:""},null,8,["modelValue"]),v(ae,{message:S.url?S.url[0]:"",class:"mt-2"},null,8,["message"])]),i("div",null,[v(G,{for:"type",value:"Resource Type",class:"mb-1"}),v($e,{id:"type",modelValue:r.type,"onUpdate:modelValue":p[2]||(p[2]=O=>r.type=O),options:o.value,valueKey:"value",labelKey:"label",placeholder:"Select Resource Type",required:"",class:"mt-1 block w-full"},null,8,["modelValue","options"]),v(ae,{message:S.type?S.type[0]:"",class:"mt-2"},null,8,["message"])]),i("div",null,[v(G,{for:"thumbnail_url",value:"Thumbnail URL (Optional)",class:"mb-1"}),v(Fe,{id:"thumbnail_url",type:"url",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:r.thumbnail_url,"onUpdate:modelValue":p[3]||(p[3]=O=>r.thumbnail_url=O)},null,8,["modelValue"]),v(ae,{message:S.thumbnail_url?S.thumbnail_url[0]:"",class:"mt-2"},null,8,["message"])]),i("div",null,[v(G,{for:"description",value:"Description (Optional)",class:"mb-1"}),ie(i("textarea",{id:"description",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-lg shadow-sm mt-1 block w-full","onUpdate:modelValue":p[4]||(p[4]=O=>r.description=O),rows:"3"},null,512),[[Ye,r.description]]),v(ae,{message:S.description?S.description[0]:"",class:"mt-2"},null,8,["message"])]),i("div",null,[v(la,{modelValue:r.tags,"onUpdate:modelValue":p[5]||(p[5]=O=>r.tags=O),label:"Associated Tags",placeholder:"Search or add tags",error:S.tags?S.tags[0]:""},null,8,["modelValue","error"])]),i("div",Wo,[v(yr,{id:"visible_to_client",checked:r.visible_to_client,"onUpdate:checked":p[6]||(p[6]=O=>r.visible_to_client=O)},null,8,["checked"]),v(G,{for:"visible_to_client",value:"Visible to Client",class:"ml-2"}),v(ae,{message:S.visible_to_client?S.visible_to_client[0]:"",class:"mt-2"},null,8,["message"])])])]),_:1},8,["show","apiEndpoint","formData"]))}},Fo=at(Vo,[["__scopeId","data-v-3e3a6a9f"]]),Ho={key:0,class:"sidebar-wrapper"},Bo={class:"fixed inset-0 z-[100] flex pointer-events-none"},zo={class:"flex items-center justify-between p-4 border-b border-gray-200 bg-white rounded-tl-xl sticky top-0 z-20"},Go={class:"text-xl font-semibold text-gray-900"},qo={class:"flex-1 overflow-y-auto p-6 scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-gray-300 scrollbar-track-gray-100"},Zo={key:1,class:"p-4 border-t border-gray-200 bg-white sticky bottom-0 z-20"},Ko={__name:"RightSidebar",props:{show:{type:Boolean,default:!1},title:{type:String,default:"Details"},initialWidth:{type:Number,default:50},minWidth:{type:Number,default:30},maxWidth:{type:Number,default:90}},emits:["close","update:show"],setup(e,{emit:t}){const s=e,a=t,r=P(s.initialWidth),o=P(!1),n=S=>{o.value=!0,document.addEventListener("pointermove",u),document.addEventListener("pointerup",f)},u=S=>{if(!o.value)return;const O=window.innerWidth,T=(O-S.clientX)/O*100,g=Math.max(s.minWidth,Math.min(s.maxWidth,T));r.value=g},f=()=>{o.value=!1,document.removeEventListener("pointermove",u),document.removeEventListener("pointerup",f)};me(()=>s.show,S=>{S?document.body.style.overflow="hidden":document.body.style.overflow=""},{immediate:!0});const d=()=>{a("update:show",!1),a("close")},p=H(()=>window.innerWidth<768);return me(p,S=>{S&&s.show?r.value=100:!S&&s.show&&(r.value=s.initialWidth)},{immediate:!0}),me(()=>s.show,S=>{S&&(p.value?r.value=100:r.value=s.initialWidth)}),(S,O)=>(l(),E(ur,{to:"body"},[v(oa,{"enter-active-class":"transition ease-out duration-300 transform","enter-from-class":"translate-x-full","enter-to-class":"translate-x-0","leave-active-class":"transition ease-in duration-200 transform","leave-from-class":"translate-x-0","leave-to-class":"translate-x-full"},{default:b(()=>[e.show?(l(),m("div",Ho,[i("div",{class:"fixed inset-0 bg-gray-900 bg-opacity-50 transition-opacity z-[99]",onClick:d}),i("div",Bo,[i("div",{class:"relative ml-auto h-full bg-white shadow-xl flex flex-col rounded-l-xl pointer-events-auto",style:ra({width:p.value?"100%":`${r.value}vw`})},[p.value?x("",!0):(l(),m("div",{key:0,class:"absolute left-0 top-0 h-full w-2 cursor-col-resize -ml-1 z-10",onPointerdown:n,title:"Drag to resize"},null,32)),i("div",zo,[i("h3",Go,N(e.title),1),i("button",{onClick:d,class:"text-gray-400 hover:text-gray-600 transition-colors"},O[0]||(O[0]=[i("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),i("div",qo,[Oe(S.$slots,"content",{},void 0,!0)]),S.$slots.footer?(l(),m("div",Zo,[Oe(S.$slots,"footer",{},void 0,!0)])):x("",!0)],4)])])):x("",!0)]),_:3})]))}},ua=at(Ko,[["__scopeId","data-v-2d864577"]]),Jo={class:"flex border-b border-gray-200"},Qo={key:0,class:"ml-2 px-2 py-1 text-xs font-bold bg-red-600 text-white rounded-full"},Xo={class:"p-4 space-y-2 overflow-y-auto"},en={key:0,class:"p-6 text-center text-gray-500"},tn={key:0},sn={key:1},an=["onClick"],rn={class:"flex-1 min-w-0"},on={class:"flex items-start justify-between gap-2 mb-1"},nn={class:"flex-1 min-w-0"},ln={key:0,class:"text-base font-semibold text-gray-900 truncate"},un={key:1,class:"text-xs text-gray-500"},dn={key:0,class:"text-sm text-gray-600 mt-1 mb-2"},cn={class:"flex items-center text-xs text-gray-500 font-medium"},fn={key:0},mn={key:1,class:"mx-2"},hn={key:2},vn={__name:"NotificationsSidebar",setup(e){const t=H(()=>Wt.value.notifications),s=P("New"),a=H(()=>s.value==="New"?t.value.filter(u=>!u.isRead):t.value),r=async u=>{await cr(u.view_id);const f=u.task_id||o(u.url),d=u.project_id||n(u.url);f&&d?(fr(f,d),qs()):(console.warn("Could not open task sidebar. Falling back to opening URL in new tab."),u.url&&window.open(u.url,"_blank"))},o=u=>{const f=u.match(/\/task\/(\d+)/);return f?parseInt(f[1]):null},n=u=>{const f=u.match(/\/project\/(\d+)\//);return f?parseInt(f[1]):null};return(u,f)=>(l(),E(ua,{show:A(Wt).show,"onUpdate:show":A(qs),title:"Notifications","initial-width":35,class:"z-[100]"},{content:b(()=>[i("div",Jo,[i("button",{onClick:f[0]||(f[0]=d=>s.value="New"),class:F([{"border-blue-600 text-blue-600 font-semibold":s.value==="New","border-transparent text-gray-500 hover:text-gray-700":s.value!=="New"},"flex-1 py-4 px-1 text-center text-sm border-b-2 transition-colors duration-200"])},[f[2]||(f[2]=$(" New ",-1)),t.value.filter(d=>!d.isRead).length>0?(l(),m("span",Qo,N(t.value.filter(d=>!d.isRead).length),1)):x("",!0)],2),i("button",{onClick:f[1]||(f[1]=d=>s.value="All"),class:F([{"border-blue-600 text-blue-600 font-semibold":s.value==="All","border-transparent text-gray-500 hover:text-gray-700":s.value!=="All"},"flex-1 py-4 px-1 text-center text-sm border-b-2 transition-colors duration-200"])}," All ",2)]),i("div",Xo,[a.value.length===0?(l(),m("div",en,[s.value==="New"?(l(),m("span",tn,"You have no new notifications.")):(l(),m("span",sn,"You have no notifications."))])):x("",!0),(l(!0),m(de,null,ce(a.value,d=>(l(),m("div",{key:d.id,class:F(["bg-white rounded-xl shadow-sm p-4 flex items-start space-x-4 border border-gray-200 transition-all duration-200 hover:shadow-md cursor-pointer",{"bg-gray-50":d.isRead}]),onClick:p=>r(d)},[i("div",rn,[i("div",on,[i("div",nn,[d.title?(l(),m("h3",ln,N(d.title),1)):x("",!0),d.project_name?(l(),m("p",un,N(d.project_name),1)):x("",!0)])]),d.message?(l(),m("p",dn,N(d.message),1)):x("",!0),i("div",cn,[d.due_date?(l(),m("span",fn,"Due: "+N(A(dr)(d.due_date)),1)):x("",!0),d.due_date&&d.priority?(l(),m("span",mn,"•")):x("",!0),d.priority?(l(),m("span",hn,"Priority: "+N(d.priority),1)):x("",!0)])])],10,an))),128))])]),_:1},8,["show","onUpdate:show"]))}},gn={class:"flex items-center p-4 h-16 border-b border-gray-700"},yn={key:0,class:"text-xl font-semibold flex-1 truncate"},pn=["title"],kn={key:0,class:"p-4 border-b border-gray-700"},_n={class:"relative"},wn={key:1,class:"flex-1 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-500 scrollbar-track-gray-700 p-4"},bn={key:0,class:"mb-4"},xn={class:"ml-2 mt-2 space-y-1"},Sn=["onClick"],Dn={class:"text-sm font-medium text-gray-300 truncate"},Mn={class:"ml-4 mt-1 space-y-1"},Tn={class:"truncate"},$n={key:1,class:"mb-4"},Cn={class:"ml-2 mt-2 space-y-1"},Yn=["onClick"],On={class:"text-sm font-medium text-gray-300 truncate"},Pn={class:"ml-4 mt-1 space-y-1"},Nn={class:"truncate"},An={key:2,class:"mb-4"},In={class:"ml-2 mt-2 space-y-1"},En={class:"truncate"},Rn={key:3,class:"mb-4"},Un={class:"ml-2 mt-2 space-y-1"},Ln={class:"truncate"},jn={key:4,class:"text-gray-400 text-sm text-center py-4"},Wn={key:5,class:"text-gray-400 text-sm text-center py-4"},Vn={key:2,class:"flex flex-col items-center pt-4 space-y-4"},Fn={key:0,class:"text-gray-400 text-xs text-center px-2"},Hn={__name:"LeftSidebar",props:{allProjects:{type:Array,default:()=>[]},activeProjectId:{type:Number,default:null}},emits:["project-selected"],setup(e,{emit:t}){const s=e,a=t,r=P(localStorage.getItem("leftSidebarCollapsed")!=="false"),o=P(""),n=P({}),u=H(()=>{const c=new Set;return s.allProjects.forEach(h=>{h.project_type&&c.add(h.project_type)}),Array.from(c).sort()}),f=H(()=>{const c=new Set;return s.allProjects.forEach(h=>{Array.isArray(h.tags)&&h.tags.forEach(k=>c.add(k))}),Array.from(c).sort()}),d=H(()=>{if(!o.value)return s.allProjects;const c=o.value.toLowerCase();return s.allProjects.filter(h=>{var k,Y,L;return h.name.toLowerCase().includes(c)||((k=h.description)==null?void 0:k.toLowerCase().includes(c))||((Y=h.project_type)==null?void 0:Y.toLowerCase().includes(c))||Array.isArray(h.tags)&&h.tags.some(re=>re.toLowerCase().includes(c))||((L=h.status)==null?void 0:L.toLowerCase().includes(c))})}),p=H(()=>{const c={};d.value.forEach(h=>{h.project_type&&h.status==="active"&&(c[h.project_type]||(c[h.project_type]=[]),c[h.project_type].push(h))});for(const h in c)c[h].sort((k,Y)=>k.name.localeCompare(Y.name));return c}),S=H(()=>{const c={};d.value.forEach(h=>{Array.isArray(h.tags)&&h.tags.length>0&&h.tags.forEach(k=>{c[k]||(c[k]=[]),c[k].push(h)})});for(const h in c)c[h]=[...new Set(c[h])].sort((k,Y)=>k.name.localeCompare(Y.name));return c}),O=H(()=>d.value.filter(c=>c.status!=="active").sort((c,h)=>c.name.localeCompare(h.name))),Z=H(()=>d.value.filter(c=>!c.project_type&&(!Array.isArray(c.tags)||c.tags.length===0)).sort((c,h)=>c.name.localeCompare(h.name)));me(()=>s.allProjects,()=>{u.value.forEach(c=>{const h=`type-${c}`;n.value[h]===void 0&&(n.value[h]=!0)}),f.value.forEach(c=>{const h=`tag-${c}`;n.value[h]===void 0&&(n.value[h]=!0)}),n.value["main-types"]===void 0&&(n.value["main-types"]=!1),n.value["main-tags"]===void 0&&(n.value["main-tags"]=!1),n.value["inactive-projects"]===void 0&&(n.value["inactive-projects"]=!1),n.value.uncategorized===void 0&&(n.value.uncategorized=!1)},{immediate:!0}),me(r,c=>{localStorage.setItem("leftSidebarCollapsed",c)});const T=()=>{r.value=!r.value},g=c=>{n.value[c]=!n.value[c]},w=c=>{a("project-selected",c)},y=()=>{o.value=""};return(c,h)=>(l(),m("div",{class:F({"w-64":!r.value,"w-16":r.value,"min-w-16":!0,"bg-gray-800 text-white flex flex-col transition-all duration-300 ease-in-out shrink-0 h-screen overflow-hidden":!0})},[i("div",gn,[r.value?x("",!0):(l(),m("h2",yn,"Projects")),i("button",{onClick:T,class:"p-2 rounded-full hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500",title:r.value?"Expand Sidebar":"Collapse Sidebar"},[(l(),m("svg",{class:F(["w-6 h-6 text-gray-400 transform transition-transform duration-300",{"rotate-180":r.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},h[5]||(h[5]=[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"},null,-1)]),2))],8,pn)]),r.value?x("",!0):(l(),m("div",kn,[i("div",_n,[ie(i("input",{type:"text","onUpdate:modelValue":h[0]||(h[0]=k=>o.value=k),placeholder:"Search all projects...",class:"w-full p-2 rounded-md bg-gray-700 border border-gray-600 text-white placeholder-gray-400 focus:ring-indigo-500 focus:border-indigo-500 text-sm"},null,512),[[Ye,o.value]]),o.value?(l(),m("button",{key:0,onClick:y,class:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-200",title:"Clear search"},h[6]||(h[6]=[i("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))):x("",!0)])])),r.value?(l(),m("div",Vn,[(l(!0),m(de,null,ce(s.allProjects,k=>(l(),E(A(je),{key:k.id,href:c.route("projects.show",k.id),onClick:Y=>w(k.id),class:F({"w-10 h-10 rounded-full flex items-center justify-center text-xs font-bold transition-all duration-200":!0,"bg-indigo-600 text-white":k.id===e.activeProjectId,"bg-gray-700 text-gray-300 hover:bg-gray-600":k.id!==e.activeProjectId}),title:k.name},{default:b(()=>[$(N(k.name.charAt(0).toUpperCase()),1)]),_:2},1032,["href","onClick","class","title"]))),128)),e.allProjects.length===0?(l(),m("div",Fn," No Projects ")):x("",!0)])):(l(),m("div",wn,[Object.keys(p.value).length>0?(l(),m("div",bn,[i("div",{class:"flex items-center justify-between cursor-pointer py-2 hover:bg-gray-700 rounded-md px-2",onClick:h[1]||(h[1]=k=>g("main-types"))},[h[8]||(h[8]=i("h3",{class:"text-sm font-semibold text-gray-400"},"Active Projects by Type",-1)),(l(),m("svg",{class:F(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!n.value["main-types"]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},h[7]||(h[7]=[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))]),ie(i("div",xn,[(l(!0),m(de,null,ce(p.value,(k,Y)=>(l(),m("div",{key:Y},[i("div",{class:"flex items-center justify-between cursor-pointer py-1 hover:bg-gray-700 rounded-md px-2",onClick:L=>g(`type-${Y}`)},[i("h4",Dn,N(Y),1),(l(),m("svg",{class:F(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!n.value[`type-${Y}`]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},h[9]||(h[9]=[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))],8,Sn),ie(i("ul",Mn,[(l(!0),m(de,null,ce(k,L=>(l(),m("li",{key:L.id},[v(A(je),{href:c.route("projects.show",L.id),onClick:re=>w(L.id),class:F({"block w-full text-left px-3 py-2 rounded-md transition-colors":!0,"bg-indigo-600 text-white":L.id===e.activeProjectId,"hover:bg-gray-700 text-gray-200":L.id!==e.activeProjectId,"font-bold":L.id===e.activeProjectId})},{default:b(()=>[i("span",Tn,N(L.name),1)]),_:2},1032,["href","onClick","class"])]))),128))],512),[[Le,!n.value[`type-${Y}`]]])]))),128))],512),[[Le,!n.value["main-types"]]])])):x("",!0),Object.keys(S.value).length>0?(l(),m("div",$n,[i("div",{class:"flex items-center justify-between cursor-pointer py-2 hover:bg-gray-700 rounded-md px-2",onClick:h[2]||(h[2]=k=>g("main-tags"))},[h[11]||(h[11]=i("h3",{class:"text-sm font-semibold text-gray-400"},"Projects by Tag",-1)),(l(),m("svg",{class:F(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!n.value["main-tags"]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},h[10]||(h[10]=[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))]),ie(i("div",Cn,[(l(!0),m(de,null,ce(S.value,(k,Y)=>(l(),m("div",{key:Y},[i("div",{class:"flex items-center justify-between cursor-pointer py-1 hover:bg-gray-700 rounded-md px-2",onClick:L=>g(`tag-${Y}`)},[i("h4",On,N(Y),1),(l(),m("svg",{class:F(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!n.value[`tag-${Y}`]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},h[12]||(h[12]=[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))],8,Yn),ie(i("ul",Pn,[(l(!0),m(de,null,ce(k,L=>(l(),m("li",{key:L.id},[v(A(je),{href:c.route("projects.show",L.id),onClick:re=>w(L.id),class:F({"block w-full text-left px-3 py-2 rounded-md transition-colors":!0,"bg-indigo-600 text-white":L.id===e.activeProjectId,"hover:bg-gray-700 text-gray-200":L.id!==e.activeProjectId,"font-bold":L.id===e.activeProjectId})},{default:b(()=>[i("span",Nn,N(L.name),1)]),_:2},1032,["href","onClick","class"])]))),128))],512),[[Le,!n.value[`tag-${Y}`]]])]))),128))],512),[[Le,!n.value["main-tags"]]])])):x("",!0),O.value.length>0?(l(),m("div",An,[i("div",{class:"flex items-center justify-between cursor-pointer py-2 hover:bg-gray-700 rounded-md px-2",onClick:h[3]||(h[3]=k=>g("inactive-projects"))},[h[14]||(h[14]=i("h3",{class:"text-sm font-semibold text-gray-400"},"Inactive Projects",-1)),(l(),m("svg",{class:F(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!n.value["inactive-projects"]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},h[13]||(h[13]=[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))]),ie(i("ul",In,[(l(!0),m(de,null,ce(O.value,k=>(l(),m("li",{key:k.id},[v(A(je),{href:c.route("projects.show",k.id),onClick:Y=>w(k.id),class:F({"block w-full text-left px-3 py-2 rounded-md transition-colors":!0,"bg-indigo-600 text-white":k.id===e.activeProjectId,"hover:bg-gray-700 text-gray-200":k.id!==e.activeProjectId,"font-bold":k.id===e.activeProjectId})},{default:b(()=>[i("span",En,N(k.name)+" ("+N(k.status.replace("_"," "))+")",1)]),_:2},1032,["href","onClick","class"])]))),128))],512),[[Le,!n.value["inactive-projects"]]])])):x("",!0),Z.value.length>0?(l(),m("div",Rn,[i("div",{class:"flex items-center justify-between cursor-pointer py-2 hover:bg-gray-700 rounded-md px-2",onClick:h[4]||(h[4]=k=>g("uncategorized"))},[h[16]||(h[16]=i("h3",{class:"text-sm font-semibold text-gray-400"},"Uncategorized",-1)),(l(),m("svg",{class:F(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!n.value.uncategorized}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},h[15]||(h[15]=[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))]),ie(i("ul",Un,[(l(!0),m(de,null,ce(Z.value,k=>(l(),m("li",{key:k.id},[v(A(je),{href:c.route("projects.show",k.id),onClick:Y=>w(k.id),class:F({"block w-full text-left px-3 py-2 rounded-md transition-colors":!0,"bg-indigo-600 text-white":k.id===e.activeProjectId,"hover:bg-gray-700 text-gray-200":k.id!==e.activeProjectId,"font-bold":k.id===e.activeProjectId})},{default:b(()=>[i("span",Ln,N(k.name),1)]),_:2},1032,["href","onClick","class"])]))),128))],512),[[Le,!n.value.uncategorized]])])):x("",!0),d.value.length===0?(l(),m("div",jn," No projects found matching your search. ")):e.allProjects.length===0&&!o.value?(l(),m("div",Wn," No projects available. ")):x("",!0)]))],2))}},Bn=at(Hn,[["__scopeId","data-v-417d431f"]]),zn={class:"relative"},da={__name:"Dropdown",props:{align:{type:String,default:"right"},width:{type:String,default:"48"},contentClasses:{type:String,default:"py-1 bg-white"}},setup(e){const t=e,s=n=>{o.value&&n.key==="Escape"&&(o.value=!1)};mt(()=>document.addEventListener("keydown",s)),qt(()=>document.removeEventListener("keydown",s));const a=H(()=>({48:"w-48"})[t.width.toString()]),r=H(()=>t.align==="left"?"ltr:origin-top-left rtl:origin-top-right start-0":t.align==="right"?"ltr:origin-top-right rtl:origin-top-left end-0":"origin-top"),o=P(!1);return(n,u)=>(l(),m("div",zn,[i("div",{onClick:u[0]||(u[0]=f=>o.value=!o.value)},[Oe(n.$slots,"trigger")]),ie(i("div",{class:"fixed inset-0 z-40",onClick:u[1]||(u[1]=f=>o.value=!1)},null,512),[[Le,o.value]]),v(oa,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:b(()=>[ie(i("div",{class:F(["absolute z-50 mt-2 rounded-md shadow-lg",[a.value,r.value]]),style:{display:"none"},onClick:u[2]||(u[2]=f=>o.value=!1)},[i("div",{class:F(["rounded-md ring-1 ring-black ring-opacity-5",e.contentClasses])},[Oe(n.$slots,"content")],2)],2),[[Le,o.value]])]),_:3})]))}},ve={__name:"DropdownLink",props:{href:{type:String,required:!0},method:{type:String,default:"get"},as:{type:String,default:"a"}},setup(e){return(t,s)=>(l(),E(A(je),na({href:e.href,method:e.method,as:e.as},t.$attrs,{class:"block w-full px-4 py-2 text-start text-sm leading-5 text-gray-700 transition duration-150 ease-in-out hover:bg-gray-100 focus:bg-gray-100 focus:outline-none"}),{default:b(()=>[Oe(t.$slots,"default")]),_:3},16,["href","method","as"]))}},Gn={__name:"NavLink",props:{href:{type:String,required:!0},active:{type:Boolean}},setup(e){const t=e,s=H(()=>t.active?"inline-flex items-center px-1 pt-1 border-b-2 border-indigo-400 text-sm font-medium leading-5 text-gray-900 focus:outline-none focus:border-indigo-700 transition duration-150 ease-in-out":"inline-flex items-center px-1 pt-1 border-b-2 border-transparent text-sm font-medium leading-5 text-gray-500 hover:text-gray-700 hover:border-gray-300 focus:outline-none focus:text-gray-700 focus:border-gray-300 transition duration-150 ease-in-out");return(a,r)=>(l(),E(A(je),{href:e.href,class:F(s.value)},{default:b(()=>[Oe(a.$slots,"default")]),_:3},8,["href","class"]))}};/**
 * @license lucide-vue-next v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),qn=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,s,a)=>a?a.toUpperCase():s.toLowerCase()),Zn=e=>{const t=qn(e);return t.charAt(0).toUpperCase()+t.slice(1)},Kn=(...e)=>e.filter((t,s,a)=>!!t&&t.trim()!==""&&a.indexOf(t)===s).join(" ").trim(),Js=e=>e==="";/**
 * @license lucide-vue-next v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var bt={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};/**
 * @license lucide-vue-next v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jn=({name:e,iconNode:t,absoluteStrokeWidth:s,"absolute-stroke-width":a,strokeWidth:r,"stroke-width":o,size:n=bt.width,color:u=bt.stroke,...f},{slots:d})=>vs("svg",{...bt,...f,width:n,height:n,stroke:u,"stroke-width":Js(s)||Js(a)||s===!0||a===!0?Number(r||o||bt["stroke-width"])*24/Number(n):r||o||bt["stroke-width"],class:Kn("lucide",f.class,...e?[`lucide-${Ks(Zn(e))}-icon`,`lucide-${Ks(e)}`]:["lucide-icon"])},[...t.map(p=>vs(...p)),...d.default?[d.default()]:[]]);/**
 * @license lucide-vue-next v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qn=(e,t)=>(s,{slots:a,attrs:r})=>vs(Jn,{...r,...s,iconNode:t,name:e},a);/**
 * @license lucide-vue-next v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xn=Qn("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]),ei={class:"hidden sm:flex sm:items-center"},ti={__name:"AdminDropdown",setup(e){const{canDo:t}=xs(),s=t("manage_projects"),a=t("compose_emails"),r=t("approve_emails"),o=t("create_users");t("manage_roles");const n=t("manage_task_types"),u=t("create_clients");return(f,d)=>(l(),m("div",ei,[v(da,{align:"right",width:"48"},{trigger:b(()=>d[0]||(d[0]=[i("span",{class:"inline-flex rounded-md"},[i("button",{type:"button",class:"inline-flex items-center rounded-md border border-transparent bg-white px-3 py-2 text-sm font-medium leading-4 text-gray-500 transition duration-150 ease-in-out hover:text-gray-700 focus:outline-none"},[$(" Admin "),i("svg",{class:"ms-2 -me-0.5 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[i("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])])],-1)])),content:b(()=>[A(s)?(l(),E(ve,{key:0,href:f.route("projects.index"),active:f.route().current("projects.index")},{default:b(()=>d[1]||(d[1]=[$(" Projects ",-1)])),_:1,__:[1]},8,["href","active"])):x("",!0),A(r)?(l(),E(ve,{key:1,href:f.route("emails.pending"),active:f.route().current("emails.pending")},{default:b(()=>d[2]||(d[2]=[$(" Approve Emails ",-1)])),_:1,__:[2]},8,["href","active"])):x("",!0),A(a)?(l(),E(ve,{key:2,href:f.route("emails.rejected"),active:f.route().current("emails.rejected")},{default:b(()=>d[3]||(d[3]=[$(" Rejected Emails ",-1)])),_:1,__:[3]},8,["href","active"])):x("",!0),A(o)?(l(),E(ve,{key:3,href:f.route("availability.index"),active:f.route().current("availability.index")},{default:b(()=>d[4]||(d[4]=[$(" Weekly Availability ",-1)])),_:1,__:[4]},8,["href","active"])):x("",!0),A(u)?(l(),E(ve,{key:4,href:f.route("clients.index"),active:f.route().current("clients.index")},{default:b(()=>d[5]||(d[5]=[$(" Clients ",-1)])),_:1,__:[5]},8,["href","active"])):x("",!0),A(o)?(l(),E(ve,{key:5,href:f.route("users.index"),active:f.route().current("users.index")},{default:b(()=>d[6]||(d[6]=[$(" Users ",-1)])),_:1,__:[6]},8,["href","active"])):x("",!0),A(n)?(l(),E(ve,{key:6,href:f.route("task-types.index"),active:f.route().current("task-types.index")},{default:b(()=>d[7]||(d[7]=[$(" Task Types ",-1)])),_:1,__:[7]},8,["href","active"])):x("",!0),A(t)("manage_bonus_configuration")?(l(),E(ve,{key:7,href:f.route("bonus-configuration.index"),active:f.route().current("bonus-configuration.index")},{default:b(()=>d[8]||(d[8]=[$(" Bonus Configuration ",-1)])),_:1,__:[8]},8,["href","active"])):x("",!0),A(t)("manage_email_templates")?(l(),E(ve,{key:8,href:f.route("email-templates.index"),active:f.route().current("email-templates.index")},{default:b(()=>d[9]||(d[9]=[$(" Email Templates ",-1)])),_:1,__:[9]},8,["href","active"])):x("",!0),A(t)("manage_placeholder_definitions")?(l(),E(ve,{key:9,href:f.route("placeholder-definitions.index"),active:f.route().current("placeholder-definitions.index")},{default:b(()=>d[10]||(d[10]=[$(" Placeholder Definitions ",-1)])),_:1,__:[10]},8,["href","active"])):x("",!0),A(t)("manage_roles")?(l(),E(ve,{key:10,href:f.route("admin.roles.index")},{default:b(()=>d[11]||(d[11]=[$(" Manage Roles ",-1)])),_:1,__:[11]},8,["href"])):x("",!0),A(t)("manage_permissions")?(l(),E(ve,{key:11,href:f.route("admin.permissions.index")},{default:b(()=>d[12]||(d[12]=[$(" Manage Permissions ",-1)])),_:1,__:[12]},8,["href"])):x("",!0)]),_:1})]))}},si={class:"relative ms-3"},ai={class:"inline-flex rounded-md"},ri={type:"button",class:"inline-flex items-center rounded-md border border-transparent bg-white px-3 py-2 text-sm font-medium leading-4 text-gray-500 transition duration-150 ease-in-out hover:text-gray-700 focus:outline-none"},oi={__name:"UserDropdown",emits:["logoutSuccess","logoutError"],setup(e,{emit:t}){const s=H(()=>Ot().props.auth.user),a=t,r=()=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization,a("logoutSuccess")},o=n=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization,window.location.href="/login",a("logoutError",n)};return(n,u)=>(l(),m("div",si,[v(da,{align:"right",width:"48"},{trigger:b(()=>{var f;return[i("span",ai,[i("button",ri,[$(N(s.value.name)+" ("+N((f=s.value.role_data)==null?void 0:f.name)+") ",1),u[0]||(u[0]=i("svg",{class:"ms-2 -me-0.5 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[i("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1))])])]}),content:b(()=>[v(ve,{href:n.route("profile.edit")},{default:b(()=>u[1]||(u[1]=[$(" Profile ",-1)])),_:1,__:[1]},8,["href"]),v(ve,{href:n.route("logout"),method:"post",as:"button",onSuccess:r,onError:o},{default:b(()=>u[2]||(u[2]=[$(" Log Out ",-1)])),_:1,__:[2]},8,["href"])]),_:1})]))}},ni={class:"border-b border-gray-100 bg-white z-10 relative"},ii={class:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8"},li={class:"flex h-16 justify-between"},ui={class:"flex"},di={class:"flex shrink-0 items-center"},ci={class:"hidden space-x-8 sm:-my-px sm:ms-10 sm:flex"},fi={class:"hidden sm:ms-6 sm:flex sm:items-center"},mi={key:0,class:"absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-red-100 transform translate-x-1/2 -translate-y-1/2 bg-red-600 rounded-full"},hi={class:"-me-2 flex items-center sm:hidden"},vi={class:"h-6 w-6",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24"},gi={__name:"TopNavigation",props:{unreadNotificationCount:{type:Number,default:0}},emits:["openCreateTaskModal","openAddResource","openNotificationsSidebar"],setup(e,{emit:t}){const s=t,a=P(!1);H(()=>Ot().props.auth.user);const{canDo:r}=xs(),o=r("manage_roles");return(n,u)=>(l(),m("nav",ni,[i("div",ii,[i("div",li,[i("div",ui,[i("div",di,[v(A(je),{href:n.route("dashboard")},{default:b(()=>[v(pr,{class:"block h-16 w-auto fill-current text-gray-800"})]),_:1},8,["href"])]),i("div",ci,[v(Gn,{href:n.route("dashboard"),active:n.route().current("dashboard")},{default:b(()=>u[4]||(u[4]=[$(" Dashboard ",-1)])),_:1,__:[4]},8,["href","active"]),A(o)?(l(),E(ti,{key:0})):x("",!0)])]),i("div",fi,[v(ye,{type:"button",onClick:u[0]||(u[0]=f=>s("openCreateTaskModal")),class:"mr-4 px-4 py-2 text-sm"},{default:b(()=>u[5]||(u[5]=[$(" Add Task ",-1)])),_:1,__:[5]}),v(ye,{type:"button",onClick:u[1]||(u[1]=f=>s("openAddResource")),class:"mr-4 px-4 py-2 text-sm"},{default:b(()=>u[6]||(u[6]=[$(" Add Resource ",-1)])),_:1,__:[6]}),i("button",{onClick:u[2]||(u[2]=f=>s("openNotificationsSidebar")),class:"relative flex-shrink-0 text-gray-400 hover:text-gray-600 p-1 rounded-full transition-colors duration-200 mr-4","aria-label":"View all notifications"},[v(A(Xn),{class:"h-6 w-6"}),e.unreadNotificationCount>0?(l(),m("span",mi,N(e.unreadNotificationCount),1)):x("",!0)]),v(oi)]),i("div",hi,[i("button",{onClick:u[3]||(u[3]=f=>a.value=!a.value),class:"inline-flex items-center justify-center rounded-md p-2 text-gray-400 transition duration-150 ease-in-out hover:bg-gray-100 hover:text-gray-500 focus:bg-gray-100 focus:text-gray-500 focus:outline-none"},[(l(),m("svg",vi,[i("path",{class:F({hidden:a.value,"inline-flex":!a.value}),"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},null,2),i("path",{class:F({hidden:!a.value,"inline-flex":a.value}),"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,2)]))])])])])]))}},le={__name:"ResponsiveNavLink",props:{href:{type:String,required:!0},active:{type:Boolean},method:{type:String,default:"get"},as:{type:String,default:"a"}},setup(e){const t=e,s=H(()=>t.active?"block w-full ps-3 pe-4 py-2 border-l-4 border-indigo-400 text-start text-base font-medium text-indigo-700 bg-indigo-50 focus:outline-none focus:text-indigo-800 focus:bg-indigo-100 focus:border-indigo-700 transition duration-150 ease-in-out":"block w-full ps-3 pe-4 py-2 border-l-4 border-transparent text-start text-base font-medium text-gray-600 hover:text-gray-800 hover:bg-gray-50 hover:border-gray-300 focus:outline-none focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300 transition duration-150 ease-in-out");return(a,r)=>(l(),E(A(je),na({href:e.href,method:e.method,as:e.as},a.$attrs,{class:s.value}),{default:b(()=>[Oe(a.$slots,"default")]),_:3},16,["href","method","as","class"]))}},yi={class:"space-y-1 pb-3 pt-2"},pi={key:0,class:"mt-3 space-y-1"},ki={class:"border-t border-gray-200 pb-1 pt-4"},_i={class:"px-4"},wi={class:"text-base font-medium text-gray-800"},bi={class:"text-sm font-medium text-gray-500"},xi={class:"text-sm font-medium text-gray-500 capitalize"},Si={class:"mt-3 space-y-1"},Di={__name:"MobileNavigation",props:{showingNavigationDropdown:{type:Boolean,required:!0},unreadNotificationCount:{type:Number,default:0}},emits:["openCreateTaskModal","openAddResource","openNotificationsSidebar","logoutSuccess","logoutError"],setup(e,{emit:t}){const s=t,a=H(()=>Ot().props.auth.user),{canDo:r}=xs(),o=r("manage_projects"),n=r("compose_emails"),u=r("approve_emails"),f=r("create_users"),d=r("manage_roles"),p=r("manage_task_types"),S=r("create_clients"),O=()=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization,s("logoutSuccess")},Z=T=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization,window.location.href="/login",s("logoutError",T)};return(T,g)=>{var w;return l(),m("div",{class:F([{block:e.showingNavigationDropdown,hidden:!e.showingNavigationDropdown},"sm:hidden"])},[i("div",yi,[A(d)?(l(),m("div",pi,[g[17]||(g[17]=i("div",{class:"px-4 font-medium text-base text-gray-800"},"Admin",-1)),v(le,{href:T.route("dashboard"),active:T.route().current("dashboard")},{default:b(()=>g[3]||(g[3]=[$(" Dashboard ",-1)])),_:1,__:[3]},8,["href","active"]),A(S)?(l(),E(le,{key:0,href:T.route("clients.index"),active:T.route().current("clients.index")},{default:b(()=>g[4]||(g[4]=[$(" Clients ",-1)])),_:1,__:[4]},8,["href","active"])):x("",!0),A(o)?(l(),E(le,{key:1,href:T.route("projects.index"),active:T.route().current("projects.index")},{default:b(()=>g[5]||(g[5]=[$(" Projects ",-1)])),_:1,__:[5]},8,["href","active"])):x("",!0),A(f)?(l(),E(le,{key:2,href:T.route("users.index"),active:T.route().current("users.index")},{default:b(()=>g[6]||(g[6]=[$(" Users ",-1)])),_:1,__:[6]},8,["href","active"])):x("",!0),A(n)?(l(),E(le,{key:3,href:T.route("emails.compose"),active:T.route().current("emails.compose")},{default:b(()=>g[7]||(g[7]=[$(" Compose Email ",-1)])),_:1,__:[7]},8,["href","active"])):x("",!0),A(u)?(l(),E(le,{key:4,href:T.route("emails.pending"),active:T.route().current("emails.pending")},{default:b(()=>g[8]||(g[8]=[$(" Approve Emails ",-1)])),_:1,__:[8]},8,["href","active"])):x("",!0),A(n)?(l(),E(le,{key:5,href:T.route("emails.rejected"),active:T.route().current("emails.rejected")},{default:b(()=>g[9]||(g[9]=[$(" Rejected Emails ",-1)])),_:1,__:[9]},8,["href","active"])):x("",!0),A(f)?(l(),E(le,{key:6,href:T.route("availability.index"),active:T.route().current("availability.index")},{default:b(()=>g[10]||(g[10]=[$(" Weekly Availability ",-1)])),_:1,__:[10]},8,["href","active"])):x("",!0),A(r)("manage_roles")?(l(),E(le,{key:7,href:T.route("admin.roles.index"),active:T.route().current("admin.roles.index")},{default:b(()=>g[11]||(g[11]=[$(" Manage Roles ",-1)])),_:1,__:[11]},8,["href","active"])):x("",!0),A(r)("manage_permissions")?(l(),E(le,{key:8,href:T.route("admin.permissions.index"),active:T.route().current("admin.permissions.index")},{default:b(()=>g[12]||(g[12]=[$(" Manage Permissions ",-1)])),_:1,__:[12]},8,["href","active"])):x("",!0),A(r)("manage_bonus_configuration")?(l(),E(le,{key:9,href:T.route("bonus-configuration.index"),active:T.route().current("bonus-configuration.index")},{default:b(()=>g[13]||(g[13]=[$(" Bonus Configuration ",-1)])),_:1,__:[13]},8,["href","active"])):x("",!0),A(p)?(l(),E(le,{key:10,href:T.route("task-types.index"),active:T.route().current("task-types.index")},{default:b(()=>g[14]||(g[14]=[$(" Task Types ",-1)])),_:1,__:[14]},8,["href","active"])):x("",!0),A(r)("manage_email_templates")?(l(),E(le,{key:11,href:T.route("email-templates.index"),active:T.route().current("email-templates.index")},{default:b(()=>g[15]||(g[15]=[$(" Email Templates ",-1)])),_:1,__:[15]},8,["href","active"])):x("",!0),A(r)("manage_placeholder_definitions")?(l(),E(le,{key:12,href:T.route("placeholder-definitions.index"),active:T.route().current("placeholder-definitions.index")},{default:b(()=>g[16]||(g[16]=[$(" Placeholder Definitions ",-1)])),_:1,__:[16]},8,["href","active"])):x("",!0)])):x("",!0)]),i("div",ki,[i("div",_i,[i("div",wi,N(a.value.name),1),i("div",bi,N(a.value.email),1),i("div",xi,N((w=a.value.role_data)==null?void 0:w.name),1)]),i("div",Si,[v(le,{as:"button",onClick:g[0]||(g[0]=y=>s("openCreateTaskModal"))},{default:b(()=>g[18]||(g[18]=[$(" Add Task ",-1)])),_:1,__:[18]}),v(le,{as:"button",onClick:g[1]||(g[1]=y=>s("openAddResource"))},{default:b(()=>g[19]||(g[19]=[$(" Add Resource ",-1)])),_:1,__:[19]}),v(le,{as:"button",onClick:g[2]||(g[2]=y=>s("openNotificationsSidebar"))},{default:b(()=>[$(" Notifications ("+N(e.unreadNotificationCount)+") ",1)]),_:1}),v(le,{href:T.route("profile.edit")},{default:b(()=>g[20]||(g[20]=[$(" Profile ",-1)])),_:1,__:[20]},8,["href"]),v(le,{href:T.route("logout"),method:"post",as:"button",onSuccess:O,onError:Z},{default:b(()=>g[21]||(g[21]=[$(" Log Out ",-1)])),_:1,__:[21]},8,["href"])])])],2)}}};//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var ca;function M(){return ca.apply(null,arguments)}function Mi(e){ca=e}function Se(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function st(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function B(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Ds(e){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(e).length===0;var t;for(t in e)if(B(e,t))return!1;return!0}function ge(e){return e===void 0}function ze(e){return typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]"}function Pt(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function fa(e,t){var s=[],a,r=e.length;for(a=0;a<r;++a)s.push(t(e[a],a));return s}function Ke(e,t){for(var s in t)B(t,s)&&(e[s]=t[s]);return B(t,"toString")&&(e.toString=t.toString),B(t,"valueOf")&&(e.valueOf=t.valueOf),e}function Ae(e,t,s,a){return Ia(e,t,s,a,!0).utc()}function Ti(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function U(e){return e._pf==null&&(e._pf=Ti()),e._pf}var gs;Array.prototype.some?gs=Array.prototype.some:gs=function(e){var t=Object(this),s=t.length>>>0,a;for(a=0;a<s;a++)if(a in t&&e.call(this,t[a],a,t))return!0;return!1};function Ms(e){var t=null,s=!1,a=e._d&&!isNaN(e._d.getTime());if(a&&(t=U(e),s=gs.call(t.parsedDateParts,function(r){return r!=null}),a=t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&s),e._strict&&(a=a&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(e))e._isValid=a;else return a;return e._isValid}function Jt(e){var t=Ae(NaN);return e!=null?Ke(U(t),e):U(t).userInvalidated=!0,t}var Qs=M.momentProperties=[],cs=!1;function Ts(e,t){var s,a,r,o=Qs.length;if(ge(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),ge(t._i)||(e._i=t._i),ge(t._f)||(e._f=t._f),ge(t._l)||(e._l=t._l),ge(t._strict)||(e._strict=t._strict),ge(t._tzm)||(e._tzm=t._tzm),ge(t._isUTC)||(e._isUTC=t._isUTC),ge(t._offset)||(e._offset=t._offset),ge(t._pf)||(e._pf=U(t)),ge(t._locale)||(e._locale=t._locale),o>0)for(s=0;s<o;s++)a=Qs[s],r=t[a],ge(r)||(e[a]=r);return e}function Nt(e){Ts(this,e),this._d=new Date(e._d!=null?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),cs===!1&&(cs=!0,M.updateOffset(this),cs=!1)}function De(e){return e instanceof Nt||e!=null&&e._isAMomentObject!=null}function ma(e){M.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+e)}function we(e,t){var s=!0;return Ke(function(){if(M.deprecationHandler!=null&&M.deprecationHandler(null,e),s){var a=[],r,o,n,u=arguments.length;for(o=0;o<u;o++){if(r="",typeof arguments[o]=="object"){r+=`
[`+o+"] ";for(n in arguments[0])B(arguments[0],n)&&(r+=n+": "+arguments[0][n]+", ");r=r.slice(0,-2)}else r=arguments[o];a.push(r)}ma(e+`
Arguments: `+Array.prototype.slice.call(a).join("")+`
`+new Error().stack),s=!1}return t.apply(this,arguments)},t)}var Xs={};function ha(e,t){M.deprecationHandler!=null&&M.deprecationHandler(e,t),Xs[e]||(ma(t),Xs[e]=!0)}M.suppressDeprecationWarnings=!1;M.deprecationHandler=null;function Ie(e){return typeof Function<"u"&&e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function $i(e){var t,s;for(s in e)B(e,s)&&(t=e[s],Ie(t)?this[s]=t:this["_"+s]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function ys(e,t){var s=Ke({},e),a;for(a in t)B(t,a)&&(st(e[a])&&st(t[a])?(s[a]={},Ke(s[a],e[a]),Ke(s[a],t[a])):t[a]!=null?s[a]=t[a]:delete s[a]);for(a in e)B(e,a)&&!B(t,a)&&st(e[a])&&(s[a]=Ke({},s[a]));return s}function $s(e){e!=null&&this.set(e)}var ps;Object.keys?ps=Object.keys:ps=function(e){var t,s=[];for(t in e)B(e,t)&&s.push(t);return s};var Ci={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function Yi(e,t,s){var a=this._calendar[e]||this._calendar.sameElse;return Ie(a)?a.call(t,s):a}function Pe(e,t,s){var a=""+Math.abs(e),r=t-a.length,o=e>=0;return(o?s?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+a}var Cs=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Et=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,fs={},dt={};function I(e,t,s,a){var r=a;typeof a=="string"&&(r=function(){return this[a]()}),e&&(dt[e]=r),t&&(dt[t[0]]=function(){return Pe(r.apply(this,arguments),t[1],t[2])}),s&&(dt[s]=function(){return this.localeData().ordinal(r.apply(this,arguments),e)})}function Oi(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function Pi(e){var t=e.match(Cs),s,a;for(s=0,a=t.length;s<a;s++)dt[t[s]]?t[s]=dt[t[s]]:t[s]=Oi(t[s]);return function(r){var o="",n;for(n=0;n<a;n++)o+=Ie(t[n])?t[n].call(r,e):t[n];return o}}function Ut(e,t){return e.isValid()?(t=va(t,e.localeData()),fs[t]=fs[t]||Pi(t),fs[t](e)):e.localeData().invalidDate()}function va(e,t){var s=5;function a(r){return t.longDateFormat(r)||r}for(Et.lastIndex=0;s>=0&&Et.test(e);)e=e.replace(Et,a),Et.lastIndex=0,s-=1;return e}var Ni={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function Ai(e){var t=this._longDateFormat[e],s=this._longDateFormat[e.toUpperCase()];return t||!s?t:(this._longDateFormat[e]=s.match(Cs).map(function(a){return a==="MMMM"||a==="MM"||a==="DD"||a==="dddd"?a.slice(1):a}).join(""),this._longDateFormat[e])}var Ii="Invalid date";function Ei(){return this._invalidDate}var Ri="%d",Ui=/\d{1,2}/;function Li(e){return this._ordinal.replace("%d",e)}var ji={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function Wi(e,t,s,a){var r=this._relativeTime[s];return Ie(r)?r(e,t,s,a):r.replace(/%d/i,e)}function Vi(e,t){var s=this._relativeTime[e>0?"future":"past"];return Ie(s)?s(t):s.replace(/%s/i,t)}var ea={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function be(e){return typeof e=="string"?ea[e]||ea[e.toLowerCase()]:void 0}function Ys(e){var t={},s,a;for(a in e)B(e,a)&&(s=be(a),s&&(t[s]=e[a]));return t}var Fi={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function Hi(e){var t=[],s;for(s in e)B(e,s)&&t.push({unit:s,priority:Fi[s]});return t.sort(function(a,r){return a.priority-r.priority}),t}var ga=/\d/,ke=/\d\d/,ya=/\d{3}/,Os=/\d{4}/,Qt=/[+-]?\d{6}/,te=/\d\d?/,pa=/\d\d\d\d?/,ka=/\d\d\d\d\d\d?/,Xt=/\d{1,3}/,Ps=/\d{1,4}/,es=/[+-]?\d{1,6}/,ht=/\d+/,ts=/[+-]?\d+/,Bi=/Z|[+-]\d\d:?\d\d/gi,ss=/Z|[+-]\d\d(?::?\d\d)?/gi,zi=/[+-]?\d+(\.\d{1,3})?/,At=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,vt=/^[1-9]\d?/,Ns=/^([1-9]\d|\d)/,Vt;Vt={};function C(e,t,s){Vt[e]=Ie(t)?t:function(a,r){return a&&s?s:t}}function Gi(e,t){return B(Vt,e)?Vt[e](t._strict,t._locale):new RegExp(qi(e))}function qi(e){return He(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,s,a,r,o){return s||a||r||o}))}function He(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function _e(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function W(e){var t=+e,s=0;return t!==0&&isFinite(t)&&(s=_e(t)),s}var ks={};function q(e,t){var s,a=t,r;for(typeof e=="string"&&(e=[e]),ze(t)&&(a=function(o,n){n[t]=W(o)}),r=e.length,s=0;s<r;s++)ks[e[s]]=a}function It(e,t){q(e,function(s,a,r,o){r._w=r._w||{},t(s,r._w,r,o)})}function Zi(e,t,s){t!=null&&B(ks,e)&&ks[e](t,s._a,s,e)}function as(e){return e%4===0&&e%100!==0||e%400===0}var fe=0,We=1,Ce=2,ue=3,xe=4,Ve=5,tt=6,Ki=7,Ji=8;I("Y",0,0,function(){var e=this.year();return e<=9999?Pe(e,4):"+"+e});I(0,["YY",2],0,function(){return this.year()%100});I(0,["YYYY",4],0,"year");I(0,["YYYYY",5],0,"year");I(0,["YYYYYY",6,!0],0,"year");C("Y",ts);C("YY",te,ke);C("YYYY",Ps,Os);C("YYYYY",es,Qt);C("YYYYYY",es,Qt);q(["YYYYY","YYYYYY"],fe);q("YYYY",function(e,t){t[fe]=e.length===2?M.parseTwoDigitYear(e):W(e)});q("YY",function(e,t){t[fe]=M.parseTwoDigitYear(e)});q("Y",function(e,t){t[fe]=parseInt(e,10)});function Dt(e){return as(e)?366:365}M.parseTwoDigitYear=function(e){return W(e)+(W(e)>68?1900:2e3)};var _a=gt("FullYear",!0);function Qi(){return as(this.year())}function gt(e,t){return function(s){return s!=null?(wa(this,e,s),M.updateOffset(this,t),this):Tt(this,e)}}function Tt(e,t){if(!e.isValid())return NaN;var s=e._d,a=e._isUTC;switch(t){case"Milliseconds":return a?s.getUTCMilliseconds():s.getMilliseconds();case"Seconds":return a?s.getUTCSeconds():s.getSeconds();case"Minutes":return a?s.getUTCMinutes():s.getMinutes();case"Hours":return a?s.getUTCHours():s.getHours();case"Date":return a?s.getUTCDate():s.getDate();case"Day":return a?s.getUTCDay():s.getDay();case"Month":return a?s.getUTCMonth():s.getMonth();case"FullYear":return a?s.getUTCFullYear():s.getFullYear();default:return NaN}}function wa(e,t,s){var a,r,o,n,u;if(!(!e.isValid()||isNaN(s))){switch(a=e._d,r=e._isUTC,t){case"Milliseconds":return void(r?a.setUTCMilliseconds(s):a.setMilliseconds(s));case"Seconds":return void(r?a.setUTCSeconds(s):a.setSeconds(s));case"Minutes":return void(r?a.setUTCMinutes(s):a.setMinutes(s));case"Hours":return void(r?a.setUTCHours(s):a.setHours(s));case"Date":return void(r?a.setUTCDate(s):a.setDate(s));case"FullYear":break;default:return}o=s,n=e.month(),u=e.date(),u=u===29&&n===1&&!as(o)?28:u,r?a.setUTCFullYear(o,n,u):a.setFullYear(o,n,u)}}function Xi(e){return e=be(e),Ie(this[e])?this[e]():this}function el(e,t){if(typeof e=="object"){e=Ys(e);var s=Hi(e),a,r=s.length;for(a=0;a<r;a++)this[s[a].unit](e[s[a].unit])}else if(e=be(e),Ie(this[e]))return this[e](t);return this}function tl(e,t){return(e%t+t)%t}var oe;Array.prototype.indexOf?oe=Array.prototype.indexOf:oe=function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1};function As(e,t){if(isNaN(e)||isNaN(t))return NaN;var s=tl(t,12);return e+=(t-s)/12,s===1?as(e)?29:28:31-s%7%2}I("M",["MM",2],"Mo",function(){return this.month()+1});I("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)});I("MMMM",0,0,function(e){return this.localeData().months(this,e)});C("M",te,vt);C("MM",te,ke);C("MMM",function(e,t){return t.monthsShortRegex(e)});C("MMMM",function(e,t){return t.monthsRegex(e)});q(["M","MM"],function(e,t){t[We]=W(e)-1});q(["MMM","MMMM"],function(e,t,s,a){var r=s._locale.monthsParse(e,a,s._strict);r!=null?t[We]=r:U(s).invalidMonth=e});var sl="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ba="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),xa=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,al=At,rl=At;function ol(e,t){return e?Se(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||xa).test(t)?"format":"standalone"][e.month()]:Se(this._months)?this._months:this._months.standalone}function nl(e,t){return e?Se(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[xa.test(t)?"format":"standalone"][e.month()]:Se(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function il(e,t,s){var a,r,o,n=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],a=0;a<12;++a)o=Ae([2e3,a]),this._shortMonthsParse[a]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[a]=this.months(o,"").toLocaleLowerCase();return s?t==="MMM"?(r=oe.call(this._shortMonthsParse,n),r!==-1?r:null):(r=oe.call(this._longMonthsParse,n),r!==-1?r:null):t==="MMM"?(r=oe.call(this._shortMonthsParse,n),r!==-1?r:(r=oe.call(this._longMonthsParse,n),r!==-1?r:null)):(r=oe.call(this._longMonthsParse,n),r!==-1?r:(r=oe.call(this._shortMonthsParse,n),r!==-1?r:null))}function ll(e,t,s){var a,r,o;if(this._monthsParseExact)return il.call(this,e,t,s);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),a=0;a<12;a++){if(r=Ae([2e3,a]),s&&!this._longMonthsParse[a]&&(this._longMonthsParse[a]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[a]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),!s&&!this._monthsParse[a]&&(o="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[a]=new RegExp(o.replace(".",""),"i")),s&&t==="MMMM"&&this._longMonthsParse[a].test(e))return a;if(s&&t==="MMM"&&this._shortMonthsParse[a].test(e))return a;if(!s&&this._monthsParse[a].test(e))return a}}function Sa(e,t){if(!e.isValid())return e;if(typeof t=="string"){if(/^\d+$/.test(t))t=W(t);else if(t=e.localeData().monthsParse(t),!ze(t))return e}var s=t,a=e.date();return a=a<29?a:Math.min(a,As(e.year(),s)),e._isUTC?e._d.setUTCMonth(s,a):e._d.setMonth(s,a),e}function Da(e){return e!=null?(Sa(this,e),M.updateOffset(this,!0),this):Tt(this,"Month")}function ul(){return As(this.year(),this.month())}function dl(e){return this._monthsParseExact?(B(this,"_monthsRegex")||Ma.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(B(this,"_monthsShortRegex")||(this._monthsShortRegex=al),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function cl(e){return this._monthsParseExact?(B(this,"_monthsRegex")||Ma.call(this),e?this._monthsStrictRegex:this._monthsRegex):(B(this,"_monthsRegex")||(this._monthsRegex=rl),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function Ma(){function e(f,d){return d.length-f.length}var t=[],s=[],a=[],r,o,n,u;for(r=0;r<12;r++)o=Ae([2e3,r]),n=He(this.monthsShort(o,"")),u=He(this.months(o,"")),t.push(n),s.push(u),a.push(u),a.push(n);t.sort(e),s.sort(e),a.sort(e),this._monthsRegex=new RegExp("^("+a.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+t.join("|")+")","i")}function fl(e,t,s,a,r,o,n){var u;return e<100&&e>=0?(u=new Date(e+400,t,s,a,r,o,n),isFinite(u.getFullYear())&&u.setFullYear(e)):u=new Date(e,t,s,a,r,o,n),u}function $t(e){var t,s;return e<100&&e>=0?(s=Array.prototype.slice.call(arguments),s[0]=e+400,t=new Date(Date.UTC.apply(null,s)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function Ft(e,t,s){var a=7+t-s,r=(7+$t(e,0,a).getUTCDay()-t)%7;return-r+a-1}function Ta(e,t,s,a,r){var o=(7+s-a)%7,n=Ft(e,a,r),u=1+7*(t-1)+o+n,f,d;return u<=0?(f=e-1,d=Dt(f)+u):u>Dt(e)?(f=e+1,d=u-Dt(e)):(f=e,d=u),{year:f,dayOfYear:d}}function Ct(e,t,s){var a=Ft(e.year(),t,s),r=Math.floor((e.dayOfYear()-a-1)/7)+1,o,n;return r<1?(n=e.year()-1,o=r+Be(n,t,s)):r>Be(e.year(),t,s)?(o=r-Be(e.year(),t,s),n=e.year()+1):(n=e.year(),o=r),{week:o,year:n}}function Be(e,t,s){var a=Ft(e,t,s),r=Ft(e+1,t,s);return(Dt(e)-a+r)/7}I("w",["ww",2],"wo","week");I("W",["WW",2],"Wo","isoWeek");C("w",te,vt);C("ww",te,ke);C("W",te,vt);C("WW",te,ke);It(["w","ww","W","WW"],function(e,t,s,a){t[a.substr(0,1)]=W(e)});function ml(e){return Ct(e,this._week.dow,this._week.doy).week}var hl={dow:0,doy:6};function vl(){return this._week.dow}function gl(){return this._week.doy}function yl(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function pl(e){var t=Ct(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}I("d",0,"do","day");I("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)});I("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)});I("dddd",0,0,function(e){return this.localeData().weekdays(this,e)});I("e",0,0,"weekday");I("E",0,0,"isoWeekday");C("d",te);C("e",te);C("E",te);C("dd",function(e,t){return t.weekdaysMinRegex(e)});C("ddd",function(e,t){return t.weekdaysShortRegex(e)});C("dddd",function(e,t){return t.weekdaysRegex(e)});It(["dd","ddd","dddd"],function(e,t,s,a){var r=s._locale.weekdaysParse(e,a,s._strict);r!=null?t.d=r:U(s).invalidWeekday=e});It(["d","e","E"],function(e,t,s,a){t[a]=W(e)});function kl(e,t){return typeof e!="string"?e:isNaN(e)?(e=t.weekdaysParse(e),typeof e=="number"?e:null):parseInt(e,10)}function _l(e,t){return typeof e=="string"?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function Is(e,t){return e.slice(t,7).concat(e.slice(0,t))}var wl="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),$a="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),bl="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),xl=At,Sl=At,Dl=At;function Ml(e,t){var s=Se(this._weekdays)?this._weekdays:this._weekdays[e&&e!==!0&&this._weekdays.isFormat.test(t)?"format":"standalone"];return e===!0?Is(s,this._week.dow):e?s[e.day()]:s}function Tl(e){return e===!0?Is(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function $l(e){return e===!0?Is(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function Cl(e,t,s){var a,r,o,n=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],a=0;a<7;++a)o=Ae([2e3,1]).day(a),this._minWeekdaysParse[a]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[a]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[a]=this.weekdays(o,"").toLocaleLowerCase();return s?t==="dddd"?(r=oe.call(this._weekdaysParse,n),r!==-1?r:null):t==="ddd"?(r=oe.call(this._shortWeekdaysParse,n),r!==-1?r:null):(r=oe.call(this._minWeekdaysParse,n),r!==-1?r:null):t==="dddd"?(r=oe.call(this._weekdaysParse,n),r!==-1||(r=oe.call(this._shortWeekdaysParse,n),r!==-1)?r:(r=oe.call(this._minWeekdaysParse,n),r!==-1?r:null)):t==="ddd"?(r=oe.call(this._shortWeekdaysParse,n),r!==-1||(r=oe.call(this._weekdaysParse,n),r!==-1)?r:(r=oe.call(this._minWeekdaysParse,n),r!==-1?r:null)):(r=oe.call(this._minWeekdaysParse,n),r!==-1||(r=oe.call(this._weekdaysParse,n),r!==-1)?r:(r=oe.call(this._shortWeekdaysParse,n),r!==-1?r:null))}function Yl(e,t,s){var a,r,o;if(this._weekdaysParseExact)return Cl.call(this,e,t,s);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),a=0;a<7;a++){if(r=Ae([2e3,1]).day(a),s&&!this._fullWeekdaysParse[a]&&(this._fullWeekdaysParse[a]=new RegExp("^"+this.weekdays(r,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[a]=new RegExp("^"+this.weekdaysShort(r,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[a]=new RegExp("^"+this.weekdaysMin(r,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[a]||(o="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[a]=new RegExp(o.replace(".",""),"i")),s&&t==="dddd"&&this._fullWeekdaysParse[a].test(e))return a;if(s&&t==="ddd"&&this._shortWeekdaysParse[a].test(e))return a;if(s&&t==="dd"&&this._minWeekdaysParse[a].test(e))return a;if(!s&&this._weekdaysParse[a].test(e))return a}}function Ol(e){if(!this.isValid())return e!=null?this:NaN;var t=Tt(this,"Day");return e!=null?(e=kl(e,this.localeData()),this.add(e-t,"d")):t}function Pl(e){if(!this.isValid())return e!=null?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function Nl(e){if(!this.isValid())return e!=null?this:NaN;if(e!=null){var t=_l(e,this.localeData());return this.day(this.day()%7?t:t-7)}else return this.day()||7}function Al(e){return this._weekdaysParseExact?(B(this,"_weekdaysRegex")||Es.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(B(this,"_weekdaysRegex")||(this._weekdaysRegex=xl),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function Il(e){return this._weekdaysParseExact?(B(this,"_weekdaysRegex")||Es.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(B(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Sl),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function El(e){return this._weekdaysParseExact?(B(this,"_weekdaysRegex")||Es.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(B(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Dl),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Es(){function e(p,S){return S.length-p.length}var t=[],s=[],a=[],r=[],o,n,u,f,d;for(o=0;o<7;o++)n=Ae([2e3,1]).day(o),u=He(this.weekdaysMin(n,"")),f=He(this.weekdaysShort(n,"")),d=He(this.weekdays(n,"")),t.push(u),s.push(f),a.push(d),r.push(u),r.push(f),r.push(d);t.sort(e),s.sort(e),a.sort(e),r.sort(e),this._weekdaysRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+t.join("|")+")","i")}function Rs(){return this.hours()%12||12}function Rl(){return this.hours()||24}I("H",["HH",2],0,"hour");I("h",["hh",2],0,Rs);I("k",["kk",2],0,Rl);I("hmm",0,0,function(){return""+Rs.apply(this)+Pe(this.minutes(),2)});I("hmmss",0,0,function(){return""+Rs.apply(this)+Pe(this.minutes(),2)+Pe(this.seconds(),2)});I("Hmm",0,0,function(){return""+this.hours()+Pe(this.minutes(),2)});I("Hmmss",0,0,function(){return""+this.hours()+Pe(this.minutes(),2)+Pe(this.seconds(),2)});function Ca(e,t){I(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}Ca("a",!0);Ca("A",!1);function Ya(e,t){return t._meridiemParse}C("a",Ya);C("A",Ya);C("H",te,Ns);C("h",te,vt);C("k",te,vt);C("HH",te,ke);C("hh",te,ke);C("kk",te,ke);C("hmm",pa);C("hmmss",ka);C("Hmm",pa);C("Hmmss",ka);q(["H","HH"],ue);q(["k","kk"],function(e,t,s){var a=W(e);t[ue]=a===24?0:a});q(["a","A"],function(e,t,s){s._isPm=s._locale.isPM(e),s._meridiem=e});q(["h","hh"],function(e,t,s){t[ue]=W(e),U(s).bigHour=!0});q("hmm",function(e,t,s){var a=e.length-2;t[ue]=W(e.substr(0,a)),t[xe]=W(e.substr(a)),U(s).bigHour=!0});q("hmmss",function(e,t,s){var a=e.length-4,r=e.length-2;t[ue]=W(e.substr(0,a)),t[xe]=W(e.substr(a,2)),t[Ve]=W(e.substr(r)),U(s).bigHour=!0});q("Hmm",function(e,t,s){var a=e.length-2;t[ue]=W(e.substr(0,a)),t[xe]=W(e.substr(a))});q("Hmmss",function(e,t,s){var a=e.length-4,r=e.length-2;t[ue]=W(e.substr(0,a)),t[xe]=W(e.substr(a,2)),t[Ve]=W(e.substr(r))});function Ul(e){return(e+"").toLowerCase().charAt(0)==="p"}var Ll=/[ap]\.?m?\.?/i,jl=gt("Hours",!0);function Wl(e,t,s){return e>11?s?"pm":"PM":s?"am":"AM"}var Oa={calendar:Ci,longDateFormat:Ni,invalidDate:Ii,ordinal:Ri,dayOfMonthOrdinalParse:Ui,relativeTime:ji,months:sl,monthsShort:ba,week:hl,weekdays:wl,weekdaysMin:bl,weekdaysShort:$a,meridiemParse:Ll},se={},xt={},Yt;function Vl(e,t){var s,a=Math.min(e.length,t.length);for(s=0;s<a;s+=1)if(e[s]!==t[s])return s;return a}function ta(e){return e&&e.toLowerCase().replace("_","-")}function Fl(e){for(var t=0,s,a,r,o;t<e.length;){for(o=ta(e[t]).split("-"),s=o.length,a=ta(e[t+1]),a=a?a.split("-"):null;s>0;){if(r=rs(o.slice(0,s).join("-")),r)return r;if(a&&a.length>=s&&Vl(o,a)>=s-1)break;s--}t++}return Yt}function Hl(e){return!!(e&&e.match("^[^/\\\\]*$"))}function rs(e){var t=null,s;if(se[e]===void 0&&typeof module<"u"&&module&&module.exports&&Hl(e))try{t=Yt._abbr,s=require,s("./locale/"+e),Qe(t)}catch{se[e]=null}return se[e]}function Qe(e,t){var s;return e&&(ge(t)?s=Ge(e):s=Us(e,t),s?Yt=s:typeof console<"u"&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),Yt._abbr}function Us(e,t){if(t!==null){var s,a=Oa;if(t.abbr=e,se[e]!=null)ha("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),a=se[e]._config;else if(t.parentLocale!=null)if(se[t.parentLocale]!=null)a=se[t.parentLocale]._config;else if(s=rs(t.parentLocale),s!=null)a=s._config;else return xt[t.parentLocale]||(xt[t.parentLocale]=[]),xt[t.parentLocale].push({name:e,config:t}),null;return se[e]=new $s(ys(a,t)),xt[e]&&xt[e].forEach(function(r){Us(r.name,r.config)}),Qe(e),se[e]}else return delete se[e],null}function Bl(e,t){if(t!=null){var s,a,r=Oa;se[e]!=null&&se[e].parentLocale!=null?se[e].set(ys(se[e]._config,t)):(a=rs(e),a!=null&&(r=a._config),t=ys(r,t),a==null&&(t.abbr=e),s=new $s(t),s.parentLocale=se[e],se[e]=s),Qe(e)}else se[e]!=null&&(se[e].parentLocale!=null?(se[e]=se[e].parentLocale,e===Qe()&&Qe(e)):se[e]!=null&&delete se[e]);return se[e]}function Ge(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Yt;if(!Se(e)){if(t=rs(e),t)return t;e=[e]}return Fl(e)}function zl(){return ps(se)}function Ls(e){var t,s=e._a;return s&&U(e).overflow===-2&&(t=s[We]<0||s[We]>11?We:s[Ce]<1||s[Ce]>As(s[fe],s[We])?Ce:s[ue]<0||s[ue]>24||s[ue]===24&&(s[xe]!==0||s[Ve]!==0||s[tt]!==0)?ue:s[xe]<0||s[xe]>59?xe:s[Ve]<0||s[Ve]>59?Ve:s[tt]<0||s[tt]>999?tt:-1,U(e)._overflowDayOfYear&&(t<fe||t>Ce)&&(t=Ce),U(e)._overflowWeeks&&t===-1&&(t=Ki),U(e)._overflowWeekday&&t===-1&&(t=Ji),U(e).overflow=t),e}var Gl=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ql=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Zl=/Z|[+-]\d\d(?::?\d\d)?/,Rt=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],ms=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Kl=/^\/?Date\((-?\d+)/i,Jl=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Ql={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Pa(e){var t,s,a=e._i,r=Gl.exec(a)||ql.exec(a),o,n,u,f,d=Rt.length,p=ms.length;if(r){for(U(e).iso=!0,t=0,s=d;t<s;t++)if(Rt[t][1].exec(r[1])){n=Rt[t][0],o=Rt[t][2]!==!1;break}if(n==null){e._isValid=!1;return}if(r[3]){for(t=0,s=p;t<s;t++)if(ms[t][1].exec(r[3])){u=(r[2]||" ")+ms[t][0];break}if(u==null){e._isValid=!1;return}}if(!o&&u!=null){e._isValid=!1;return}if(r[4])if(Zl.exec(r[4]))f="Z";else{e._isValid=!1;return}e._f=n+(u||"")+(f||""),Ws(e)}else e._isValid=!1}function Xl(e,t,s,a,r,o){var n=[eu(e),ba.indexOf(t),parseInt(s,10),parseInt(a,10),parseInt(r,10)];return o&&n.push(parseInt(o,10)),n}function eu(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function tu(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function su(e,t,s){if(e){var a=$a.indexOf(e),r=new Date(t[0],t[1],t[2]).getDay();if(a!==r)return U(s).weekdayMismatch=!0,s._isValid=!1,!1}return!0}function au(e,t,s){if(e)return Ql[e];if(t)return 0;var a=parseInt(s,10),r=a%100,o=(a-r)/100;return o*60+r}function Na(e){var t=Jl.exec(tu(e._i)),s;if(t){if(s=Xl(t[4],t[3],t[2],t[5],t[6],t[7]),!su(t[1],s,e))return;e._a=s,e._tzm=au(t[8],t[9],t[10]),e._d=$t.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),U(e).rfc2822=!0}else e._isValid=!1}function ru(e){var t=Kl.exec(e._i);if(t!==null){e._d=new Date(+t[1]);return}if(Pa(e),e._isValid===!1)delete e._isValid;else return;if(Na(e),e._isValid===!1)delete e._isValid;else return;e._strict?e._isValid=!1:M.createFromInputFallback(e)}M.createFromInputFallback=we("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});function it(e,t,s){return e??t??s}function ou(e){var t=new Date(M.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function js(e){var t,s,a=[],r,o,n;if(!e._d){for(r=ou(e),e._w&&e._a[Ce]==null&&e._a[We]==null&&nu(e),e._dayOfYear!=null&&(n=it(e._a[fe],r[fe]),(e._dayOfYear>Dt(n)||e._dayOfYear===0)&&(U(e)._overflowDayOfYear=!0),s=$t(n,0,e._dayOfYear),e._a[We]=s.getUTCMonth(),e._a[Ce]=s.getUTCDate()),t=0;t<3&&e._a[t]==null;++t)e._a[t]=a[t]=r[t];for(;t<7;t++)e._a[t]=a[t]=e._a[t]==null?t===2?1:0:e._a[t];e._a[ue]===24&&e._a[xe]===0&&e._a[Ve]===0&&e._a[tt]===0&&(e._nextDay=!0,e._a[ue]=0),e._d=(e._useUTC?$t:fl).apply(null,a),o=e._useUTC?e._d.getUTCDay():e._d.getDay(),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[ue]=24),e._w&&typeof e._w.d<"u"&&e._w.d!==o&&(U(e).weekdayMismatch=!0)}}function nu(e){var t,s,a,r,o,n,u,f,d;t=e._w,t.GG!=null||t.W!=null||t.E!=null?(o=1,n=4,s=it(t.GG,e._a[fe],Ct(ee(),1,4).year),a=it(t.W,1),r=it(t.E,1),(r<1||r>7)&&(f=!0)):(o=e._locale._week.dow,n=e._locale._week.doy,d=Ct(ee(),o,n),s=it(t.gg,e._a[fe],d.year),a=it(t.w,d.week),t.d!=null?(r=t.d,(r<0||r>6)&&(f=!0)):t.e!=null?(r=t.e+o,(t.e<0||t.e>6)&&(f=!0)):r=o),a<1||a>Be(s,o,n)?U(e)._overflowWeeks=!0:f!=null?U(e)._overflowWeekday=!0:(u=Ta(s,a,r,o,n),e._a[fe]=u.year,e._dayOfYear=u.dayOfYear)}M.ISO_8601=function(){};M.RFC_2822=function(){};function Ws(e){if(e._f===M.ISO_8601){Pa(e);return}if(e._f===M.RFC_2822){Na(e);return}e._a=[],U(e).empty=!0;var t=""+e._i,s,a,r,o,n,u=t.length,f=0,d,p;for(r=va(e._f,e._locale).match(Cs)||[],p=r.length,s=0;s<p;s++)o=r[s],a=(t.match(Gi(o,e))||[])[0],a&&(n=t.substr(0,t.indexOf(a)),n.length>0&&U(e).unusedInput.push(n),t=t.slice(t.indexOf(a)+a.length),f+=a.length),dt[o]?(a?U(e).empty=!1:U(e).unusedTokens.push(o),Zi(o,a,e)):e._strict&&!a&&U(e).unusedTokens.push(o);U(e).charsLeftOver=u-f,t.length>0&&U(e).unusedInput.push(t),e._a[ue]<=12&&U(e).bigHour===!0&&e._a[ue]>0&&(U(e).bigHour=void 0),U(e).parsedDateParts=e._a.slice(0),U(e).meridiem=e._meridiem,e._a[ue]=iu(e._locale,e._a[ue],e._meridiem),d=U(e).era,d!==null&&(e._a[fe]=e._locale.erasConvertYear(d,e._a[fe])),js(e),Ls(e)}function iu(e,t,s){var a;return s==null?t:e.meridiemHour!=null?e.meridiemHour(t,s):(e.isPM!=null&&(a=e.isPM(s),a&&t<12&&(t+=12),!a&&t===12&&(t=0)),t)}function lu(e){var t,s,a,r,o,n,u=!1,f=e._f.length;if(f===0){U(e).invalidFormat=!0,e._d=new Date(NaN);return}for(r=0;r<f;r++)o=0,n=!1,t=Ts({},e),e._useUTC!=null&&(t._useUTC=e._useUTC),t._f=e._f[r],Ws(t),Ms(t)&&(n=!0),o+=U(t).charsLeftOver,o+=U(t).unusedTokens.length*10,U(t).score=o,u?o<a&&(a=o,s=t):(a==null||o<a||n)&&(a=o,s=t,n&&(u=!0));Ke(e,s||t)}function uu(e){if(!e._d){var t=Ys(e._i),s=t.day===void 0?t.date:t.day;e._a=fa([t.year,t.month,s,t.hour,t.minute,t.second,t.millisecond],function(a){return a&&parseInt(a,10)}),js(e)}}function du(e){var t=new Nt(Ls(Aa(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function Aa(e){var t=e._i,s=e._f;return e._locale=e._locale||Ge(e._l),t===null||s===void 0&&t===""?Jt({nullInput:!0}):(typeof t=="string"&&(e._i=t=e._locale.preparse(t)),De(t)?new Nt(Ls(t)):(Pt(t)?e._d=t:Se(s)?lu(e):s?Ws(e):cu(e),Ms(e)||(e._d=null),e))}function cu(e){var t=e._i;ge(t)?e._d=new Date(M.now()):Pt(t)?e._d=new Date(t.valueOf()):typeof t=="string"?ru(e):Se(t)?(e._a=fa(t.slice(0),function(s){return parseInt(s,10)}),js(e)):st(t)?uu(e):ze(t)?e._d=new Date(t):M.createFromInputFallback(e)}function Ia(e,t,s,a,r){var o={};return(t===!0||t===!1)&&(a=t,t=void 0),(s===!0||s===!1)&&(a=s,s=void 0),(st(e)&&Ds(e)||Se(e)&&e.length===0)&&(e=void 0),o._isAMomentObject=!0,o._useUTC=o._isUTC=r,o._l=s,o._i=e,o._f=t,o._strict=a,du(o)}function ee(e,t,s,a){return Ia(e,t,s,a,!1)}var fu=we("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=ee.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:Jt()}),mu=we("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=ee.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:Jt()});function Ea(e,t){var s,a;if(t.length===1&&Se(t[0])&&(t=t[0]),!t.length)return ee();for(s=t[0],a=1;a<t.length;++a)(!t[a].isValid()||t[a][e](s))&&(s=t[a]);return s}function hu(){var e=[].slice.call(arguments,0);return Ea("isBefore",e)}function vu(){var e=[].slice.call(arguments,0);return Ea("isAfter",e)}var gu=function(){return Date.now?Date.now():+new Date},St=["year","quarter","month","week","day","hour","minute","second","millisecond"];function yu(e){var t,s=!1,a,r=St.length;for(t in e)if(B(e,t)&&!(oe.call(St,t)!==-1&&(e[t]==null||!isNaN(e[t]))))return!1;for(a=0;a<r;++a)if(e[St[a]]){if(s)return!1;parseFloat(e[St[a]])!==W(e[St[a]])&&(s=!0)}return!0}function pu(){return this._isValid}function ku(){return Me(NaN)}function os(e){var t=Ys(e),s=t.year||0,a=t.quarter||0,r=t.month||0,o=t.week||t.isoWeek||0,n=t.day||0,u=t.hour||0,f=t.minute||0,d=t.second||0,p=t.millisecond||0;this._isValid=yu(t),this._milliseconds=+p+d*1e3+f*6e4+u*1e3*60*60,this._days=+n+o*7,this._months=+r+a*3+s*12,this._data={},this._locale=Ge(),this._bubble()}function Lt(e){return e instanceof os}function _s(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function _u(e,t,s){var a=Math.min(e.length,t.length),r=Math.abs(e.length-t.length),o=0,n;for(n=0;n<a;n++)W(e[n])!==W(t[n])&&o++;return o+r}function Ra(e,t){I(e,0,0,function(){var s=this.utcOffset(),a="+";return s<0&&(s=-s,a="-"),a+Pe(~~(s/60),2)+t+Pe(~~s%60,2)})}Ra("Z",":");Ra("ZZ","");C("Z",ss);C("ZZ",ss);q(["Z","ZZ"],function(e,t,s){s._useUTC=!0,s._tzm=Vs(ss,e)});var wu=/([\+\-]|\d\d)/gi;function Vs(e,t){var s=(t||"").match(e),a,r,o;return s===null?null:(a=s[s.length-1]||[],r=(a+"").match(wu)||["-",0,0],o=+(r[1]*60)+W(r[2]),o===0?0:r[0]==="+"?o:-o)}function Fs(e,t){var s,a;return t._isUTC?(s=t.clone(),a=(De(e)||Pt(e)?e.valueOf():ee(e).valueOf())-s.valueOf(),s._d.setTime(s._d.valueOf()+a),M.updateOffset(s,!1),s):ee(e).local()}function ws(e){return-Math.round(e._d.getTimezoneOffset())}M.updateOffset=function(){};function bu(e,t,s){var a=this._offset||0,r;if(!this.isValid())return e!=null?this:NaN;if(e!=null){if(typeof e=="string"){if(e=Vs(ss,e),e===null)return this}else Math.abs(e)<16&&!s&&(e=e*60);return!this._isUTC&&t&&(r=ws(this)),this._offset=e,this._isUTC=!0,r!=null&&this.add(r,"m"),a!==e&&(!t||this._changeInProgress?ja(this,Me(e-a,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,M.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?a:ws(this)}function xu(e,t){return e!=null?(typeof e!="string"&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function Su(e){return this.utcOffset(0,e)}function Du(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(ws(this),"m")),this}function Mu(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var e=Vs(Bi,this._i);e!=null?this.utcOffset(e):this.utcOffset(0,!0)}return this}function Tu(e){return this.isValid()?(e=e?ee(e).utcOffset():0,(this.utcOffset()-e)%60===0):!1}function $u(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Cu(){if(!ge(this._isDSTShifted))return this._isDSTShifted;var e={},t;return Ts(e,this),e=Aa(e),e._a?(t=e._isUTC?Ae(e._a):ee(e._a),this._isDSTShifted=this.isValid()&&_u(e._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function Yu(){return this.isValid()?!this._isUTC:!1}function Ou(){return this.isValid()?this._isUTC:!1}function Ua(){return this.isValid()?this._isUTC&&this._offset===0:!1}var Pu=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Nu=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Me(e,t){var s=e,a=null,r,o,n;return Lt(e)?s={ms:e._milliseconds,d:e._days,M:e._months}:ze(e)||!isNaN(+e)?(s={},t?s[t]=+e:s.milliseconds=+e):(a=Pu.exec(e))?(r=a[1]==="-"?-1:1,s={y:0,d:W(a[Ce])*r,h:W(a[ue])*r,m:W(a[xe])*r,s:W(a[Ve])*r,ms:W(_s(a[tt]*1e3))*r}):(a=Nu.exec(e))?(r=a[1]==="-"?-1:1,s={y:et(a[2],r),M:et(a[3],r),w:et(a[4],r),d:et(a[5],r),h:et(a[6],r),m:et(a[7],r),s:et(a[8],r)}):s==null?s={}:typeof s=="object"&&("from"in s||"to"in s)&&(n=Au(ee(s.from),ee(s.to)),s={},s.ms=n.milliseconds,s.M=n.months),o=new os(s),Lt(e)&&B(e,"_locale")&&(o._locale=e._locale),Lt(e)&&B(e,"_isValid")&&(o._isValid=e._isValid),o}Me.fn=os.prototype;Me.invalid=ku;function et(e,t){var s=e&&parseFloat(e.replace(",","."));return(isNaN(s)?0:s)*t}function sa(e,t){var s={};return s.months=t.month()-e.month()+(t.year()-e.year())*12,e.clone().add(s.months,"M").isAfter(t)&&--s.months,s.milliseconds=+t-+e.clone().add(s.months,"M"),s}function Au(e,t){var s;return e.isValid()&&t.isValid()?(t=Fs(t,e),e.isBefore(t)?s=sa(e,t):(s=sa(t,e),s.milliseconds=-s.milliseconds,s.months=-s.months),s):{milliseconds:0,months:0}}function La(e,t){return function(s,a){var r,o;return a!==null&&!isNaN(+a)&&(ha(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),o=s,s=a,a=o),r=Me(s,a),ja(this,r,e),this}}function ja(e,t,s,a){var r=t._milliseconds,o=_s(t._days),n=_s(t._months);e.isValid()&&(a=a??!0,n&&Sa(e,Tt(e,"Month")+n*s),o&&wa(e,"Date",Tt(e,"Date")+o*s),r&&e._d.setTime(e._d.valueOf()+r*s),a&&M.updateOffset(e,o||n))}var Iu=La(1,"add"),Eu=La(-1,"subtract");function Wa(e){return typeof e=="string"||e instanceof String}function Ru(e){return De(e)||Pt(e)||Wa(e)||ze(e)||Lu(e)||Uu(e)||e===null||e===void 0}function Uu(e){var t=st(e)&&!Ds(e),s=!1,a=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],r,o,n=a.length;for(r=0;r<n;r+=1)o=a[r],s=s||B(e,o);return t&&s}function Lu(e){var t=Se(e),s=!1;return t&&(s=e.filter(function(a){return!ze(a)&&Wa(e)}).length===0),t&&s}function ju(e){var t=st(e)&&!Ds(e),s=!1,a=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],r,o;for(r=0;r<a.length;r+=1)o=a[r],s=s||B(e,o);return t&&s}function Wu(e,t){var s=e.diff(t,"days",!0);return s<-6?"sameElse":s<-1?"lastWeek":s<0?"lastDay":s<1?"sameDay":s<2?"nextDay":s<7?"nextWeek":"sameElse"}function Vu(e,t){arguments.length===1&&(arguments[0]?Ru(arguments[0])?(e=arguments[0],t=void 0):ju(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var s=e||ee(),a=Fs(s,this).startOf("day"),r=M.calendarFormat(this,a)||"sameElse",o=t&&(Ie(t[r])?t[r].call(this,s):t[r]);return this.format(o||this.localeData().calendar(r,this,ee(s)))}function Fu(){return new Nt(this)}function Hu(e,t){var s=De(e)?e:ee(e);return this.isValid()&&s.isValid()?(t=be(t)||"millisecond",t==="millisecond"?this.valueOf()>s.valueOf():s.valueOf()<this.clone().startOf(t).valueOf()):!1}function Bu(e,t){var s=De(e)?e:ee(e);return this.isValid()&&s.isValid()?(t=be(t)||"millisecond",t==="millisecond"?this.valueOf()<s.valueOf():this.clone().endOf(t).valueOf()<s.valueOf()):!1}function zu(e,t,s,a){var r=De(e)?e:ee(e),o=De(t)?t:ee(t);return this.isValid()&&r.isValid()&&o.isValid()?(a=a||"()",(a[0]==="("?this.isAfter(r,s):!this.isBefore(r,s))&&(a[1]===")"?this.isBefore(o,s):!this.isAfter(o,s))):!1}function Gu(e,t){var s=De(e)?e:ee(e),a;return this.isValid()&&s.isValid()?(t=be(t)||"millisecond",t==="millisecond"?this.valueOf()===s.valueOf():(a=s.valueOf(),this.clone().startOf(t).valueOf()<=a&&a<=this.clone().endOf(t).valueOf())):!1}function qu(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function Zu(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function Ku(e,t,s){var a,r,o;if(!this.isValid())return NaN;if(a=Fs(e,this),!a.isValid())return NaN;switch(r=(a.utcOffset()-this.utcOffset())*6e4,t=be(t),t){case"year":o=jt(this,a)/12;break;case"month":o=jt(this,a);break;case"quarter":o=jt(this,a)/3;break;case"second":o=(this-a)/1e3;break;case"minute":o=(this-a)/6e4;break;case"hour":o=(this-a)/36e5;break;case"day":o=(this-a-r)/864e5;break;case"week":o=(this-a-r)/6048e5;break;default:o=this-a}return s?o:_e(o)}function jt(e,t){if(e.date()<t.date())return-jt(t,e);var s=(t.year()-e.year())*12+(t.month()-e.month()),a=e.clone().add(s,"months"),r,o;return t-a<0?(r=e.clone().add(s-1,"months"),o=(t-a)/(a-r)):(r=e.clone().add(s+1,"months"),o=(t-a)/(r-a)),-(s+o)||0}M.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";M.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function Ju(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Qu(e){if(!this.isValid())return null;var t=e!==!0,s=t?this.clone().utc():this;return s.year()<0||s.year()>9999?Ut(s,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):Ie(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",Ut(s,"Z")):Ut(s,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function Xu(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="",s,a,r,o;return this.isLocal()||(e=this.utcOffset()===0?"moment.utc":"moment.parseZone",t="Z"),s="["+e+'("]',a=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",r="-MM-DD[T]HH:mm:ss.SSS",o=t+'[")]',this.format(s+a+r+o)}function ed(e){e||(e=this.isUtc()?M.defaultFormatUtc:M.defaultFormat);var t=Ut(this,e);return this.localeData().postformat(t)}function td(e,t){return this.isValid()&&(De(e)&&e.isValid()||ee(e).isValid())?Me({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function sd(e){return this.from(ee(),e)}function ad(e,t){return this.isValid()&&(De(e)&&e.isValid()||ee(e).isValid())?Me({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function rd(e){return this.to(ee(),e)}function Va(e){var t;return e===void 0?this._locale._abbr:(t=Ge(e),t!=null&&(this._locale=t),this)}var Fa=we("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===void 0?this.localeData():this.locale(e)});function Ha(){return this._locale}var Ht=1e3,ct=60*Ht,Bt=60*ct,Ba=(365*400+97)*24*Bt;function ft(e,t){return(e%t+t)%t}function za(e,t,s){return e<100&&e>=0?new Date(e+400,t,s)-Ba:new Date(e,t,s).valueOf()}function Ga(e,t,s){return e<100&&e>=0?Date.UTC(e+400,t,s)-Ba:Date.UTC(e,t,s)}function od(e){var t,s;if(e=be(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(s=this._isUTC?Ga:za,e){case"year":t=s(this.year(),0,1);break;case"quarter":t=s(this.year(),this.month()-this.month()%3,1);break;case"month":t=s(this.year(),this.month(),1);break;case"week":t=s(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=s(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=s(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=ft(t+(this._isUTC?0:this.utcOffset()*ct),Bt);break;case"minute":t=this._d.valueOf(),t-=ft(t,ct);break;case"second":t=this._d.valueOf(),t-=ft(t,Ht);break}return this._d.setTime(t),M.updateOffset(this,!0),this}function nd(e){var t,s;if(e=be(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(s=this._isUTC?Ga:za,e){case"year":t=s(this.year()+1,0,1)-1;break;case"quarter":t=s(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=s(this.year(),this.month()+1,1)-1;break;case"week":t=s(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=s(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=s(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=Bt-ft(t+(this._isUTC?0:this.utcOffset()*ct),Bt)-1;break;case"minute":t=this._d.valueOf(),t+=ct-ft(t,ct)-1;break;case"second":t=this._d.valueOf(),t+=Ht-ft(t,Ht)-1;break}return this._d.setTime(t),M.updateOffset(this,!0),this}function id(){return this._d.valueOf()-(this._offset||0)*6e4}function ld(){return Math.floor(this.valueOf()/1e3)}function ud(){return new Date(this.valueOf())}function dd(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function cd(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function fd(){return this.isValid()?this.toISOString():null}function md(){return Ms(this)}function hd(){return Ke({},U(this))}function vd(){return U(this).overflow}function gd(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}I("N",0,0,"eraAbbr");I("NN",0,0,"eraAbbr");I("NNN",0,0,"eraAbbr");I("NNNN",0,0,"eraName");I("NNNNN",0,0,"eraNarrow");I("y",["y",1],"yo","eraYear");I("y",["yy",2],0,"eraYear");I("y",["yyy",3],0,"eraYear");I("y",["yyyy",4],0,"eraYear");C("N",Hs);C("NN",Hs);C("NNN",Hs);C("NNNN",Td);C("NNNNN",$d);q(["N","NN","NNN","NNNN","NNNNN"],function(e,t,s,a){var r=s._locale.erasParse(e,a,s._strict);r?U(s).era=r:U(s).invalidEra=e});C("y",ht);C("yy",ht);C("yyy",ht);C("yyyy",ht);C("yo",Cd);q(["y","yy","yyy","yyyy"],fe);q(["yo"],function(e,t,s,a){var r;s._locale._eraYearOrdinalRegex&&(r=e.match(s._locale._eraYearOrdinalRegex)),s._locale.eraYearOrdinalParse?t[fe]=s._locale.eraYearOrdinalParse(e,r):t[fe]=parseInt(e,10)});function yd(e,t){var s,a,r,o=this._eras||Ge("en")._eras;for(s=0,a=o.length;s<a;++s){switch(typeof o[s].since){case"string":r=M(o[s].since).startOf("day"),o[s].since=r.valueOf();break}switch(typeof o[s].until){case"undefined":o[s].until=1/0;break;case"string":r=M(o[s].until).startOf("day").valueOf(),o[s].until=r.valueOf();break}}return o}function pd(e,t,s){var a,r,o=this.eras(),n,u,f;for(e=e.toUpperCase(),a=0,r=o.length;a<r;++a)if(n=o[a].name.toUpperCase(),u=o[a].abbr.toUpperCase(),f=o[a].narrow.toUpperCase(),s)switch(t){case"N":case"NN":case"NNN":if(u===e)return o[a];break;case"NNNN":if(n===e)return o[a];break;case"NNNNN":if(f===e)return o[a];break}else if([n,u,f].indexOf(e)>=0)return o[a]}function kd(e,t){var s=e.since<=e.until?1:-1;return t===void 0?M(e.since).year():M(e.since).year()+(t-e.offset)*s}function _d(){var e,t,s,a=this.localeData().eras();for(e=0,t=a.length;e<t;++e)if(s=this.clone().startOf("day").valueOf(),a[e].since<=s&&s<=a[e].until||a[e].until<=s&&s<=a[e].since)return a[e].name;return""}function wd(){var e,t,s,a=this.localeData().eras();for(e=0,t=a.length;e<t;++e)if(s=this.clone().startOf("day").valueOf(),a[e].since<=s&&s<=a[e].until||a[e].until<=s&&s<=a[e].since)return a[e].narrow;return""}function bd(){var e,t,s,a=this.localeData().eras();for(e=0,t=a.length;e<t;++e)if(s=this.clone().startOf("day").valueOf(),a[e].since<=s&&s<=a[e].until||a[e].until<=s&&s<=a[e].since)return a[e].abbr;return""}function xd(){var e,t,s,a,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e)if(s=r[e].since<=r[e].until?1:-1,a=this.clone().startOf("day").valueOf(),r[e].since<=a&&a<=r[e].until||r[e].until<=a&&a<=r[e].since)return(this.year()-M(r[e].since).year())*s+r[e].offset;return this.year()}function Sd(e){return B(this,"_erasNameRegex")||Bs.call(this),e?this._erasNameRegex:this._erasRegex}function Dd(e){return B(this,"_erasAbbrRegex")||Bs.call(this),e?this._erasAbbrRegex:this._erasRegex}function Md(e){return B(this,"_erasNarrowRegex")||Bs.call(this),e?this._erasNarrowRegex:this._erasRegex}function Hs(e,t){return t.erasAbbrRegex(e)}function Td(e,t){return t.erasNameRegex(e)}function $d(e,t){return t.erasNarrowRegex(e)}function Cd(e,t){return t._eraYearOrdinalRegex||ht}function Bs(){var e=[],t=[],s=[],a=[],r,o,n,u,f,d=this.eras();for(r=0,o=d.length;r<o;++r)n=He(d[r].name),u=He(d[r].abbr),f=He(d[r].narrow),t.push(n),e.push(u),s.push(f),a.push(n),a.push(u),a.push(f);this._erasRegex=new RegExp("^("+a.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+t.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+s.join("|")+")","i")}I(0,["gg",2],0,function(){return this.weekYear()%100});I(0,["GG",2],0,function(){return this.isoWeekYear()%100});function ns(e,t){I(0,[e,e.length],0,t)}ns("gggg","weekYear");ns("ggggg","weekYear");ns("GGGG","isoWeekYear");ns("GGGGG","isoWeekYear");C("G",ts);C("g",ts);C("GG",te,ke);C("gg",te,ke);C("GGGG",Ps,Os);C("gggg",Ps,Os);C("GGGGG",es,Qt);C("ggggg",es,Qt);It(["gggg","ggggg","GGGG","GGGGG"],function(e,t,s,a){t[a.substr(0,2)]=W(e)});It(["gg","GG"],function(e,t,s,a){t[a]=M.parseTwoDigitYear(e)});function Yd(e){return qa.call(this,e,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function Od(e){return qa.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function Pd(){return Be(this.year(),1,4)}function Nd(){return Be(this.isoWeekYear(),1,4)}function Ad(){var e=this.localeData()._week;return Be(this.year(),e.dow,e.doy)}function Id(){var e=this.localeData()._week;return Be(this.weekYear(),e.dow,e.doy)}function qa(e,t,s,a,r){var o;return e==null?Ct(this,a,r).year:(o=Be(e,a,r),t>o&&(t=o),Ed.call(this,e,t,s,a,r))}function Ed(e,t,s,a,r){var o=Ta(e,t,s,a,r),n=$t(o.year,0,o.dayOfYear);return this.year(n.getUTCFullYear()),this.month(n.getUTCMonth()),this.date(n.getUTCDate()),this}I("Q",0,"Qo","quarter");C("Q",ga);q("Q",function(e,t){t[We]=(W(e)-1)*3});function Rd(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}I("D",["DD",2],"Do","date");C("D",te,vt);C("DD",te,ke);C("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient});q(["D","DD"],Ce);q("Do",function(e,t){t[Ce]=W(e.match(te)[0])});var Za=gt("Date",!0);I("DDD",["DDDD",3],"DDDo","dayOfYear");C("DDD",Xt);C("DDDD",ya);q(["DDD","DDDD"],function(e,t,s){s._dayOfYear=W(e)});function Ud(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}I("m",["mm",2],0,"minute");C("m",te,Ns);C("mm",te,ke);q(["m","mm"],xe);var Ld=gt("Minutes",!1);I("s",["ss",2],0,"second");C("s",te,Ns);C("ss",te,ke);q(["s","ss"],Ve);var jd=gt("Seconds",!1);I("S",0,0,function(){return~~(this.millisecond()/100)});I(0,["SS",2],0,function(){return~~(this.millisecond()/10)});I(0,["SSS",3],0,"millisecond");I(0,["SSSS",4],0,function(){return this.millisecond()*10});I(0,["SSSSS",5],0,function(){return this.millisecond()*100});I(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});I(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});I(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});I(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});C("S",Xt,ga);C("SS",Xt,ke);C("SSS",Xt,ya);var Je,Ka;for(Je="SSSS";Je.length<=9;Je+="S")C(Je,ht);function Wd(e,t){t[tt]=W(("0."+e)*1e3)}for(Je="S";Je.length<=9;Je+="S")q(Je,Wd);Ka=gt("Milliseconds",!1);I("z",0,0,"zoneAbbr");I("zz",0,0,"zoneName");function Vd(){return this._isUTC?"UTC":""}function Fd(){return this._isUTC?"Coordinated Universal Time":""}var _=Nt.prototype;_.add=Iu;_.calendar=Vu;_.clone=Fu;_.diff=Ku;_.endOf=nd;_.format=ed;_.from=td;_.fromNow=sd;_.to=ad;_.toNow=rd;_.get=Xi;_.invalidAt=vd;_.isAfter=Hu;_.isBefore=Bu;_.isBetween=zu;_.isSame=Gu;_.isSameOrAfter=qu;_.isSameOrBefore=Zu;_.isValid=md;_.lang=Fa;_.locale=Va;_.localeData=Ha;_.max=mu;_.min=fu;_.parsingFlags=hd;_.set=el;_.startOf=od;_.subtract=Eu;_.toArray=dd;_.toObject=cd;_.toDate=ud;_.toISOString=Qu;_.inspect=Xu;typeof Symbol<"u"&&Symbol.for!=null&&(_[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});_.toJSON=fd;_.toString=Ju;_.unix=ld;_.valueOf=id;_.creationData=gd;_.eraName=_d;_.eraNarrow=wd;_.eraAbbr=bd;_.eraYear=xd;_.year=_a;_.isLeapYear=Qi;_.weekYear=Yd;_.isoWeekYear=Od;_.quarter=_.quarters=Rd;_.month=Da;_.daysInMonth=ul;_.week=_.weeks=yl;_.isoWeek=_.isoWeeks=pl;_.weeksInYear=Ad;_.weeksInWeekYear=Id;_.isoWeeksInYear=Pd;_.isoWeeksInISOWeekYear=Nd;_.date=Za;_.day=_.days=Ol;_.weekday=Pl;_.isoWeekday=Nl;_.dayOfYear=Ud;_.hour=_.hours=jl;_.minute=_.minutes=Ld;_.second=_.seconds=jd;_.millisecond=_.milliseconds=Ka;_.utcOffset=bu;_.utc=Su;_.local=Du;_.parseZone=Mu;_.hasAlignedHourOffset=Tu;_.isDST=$u;_.isLocal=Yu;_.isUtcOffset=Ou;_.isUtc=Ua;_.isUTC=Ua;_.zoneAbbr=Vd;_.zoneName=Fd;_.dates=we("dates accessor is deprecated. Use date instead.",Za);_.months=we("months accessor is deprecated. Use month instead",Da);_.years=we("years accessor is deprecated. Use year instead",_a);_.zone=we("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",xu);_.isDSTShifted=we("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Cu);function Hd(e){return ee(e*1e3)}function Bd(){return ee.apply(null,arguments).parseZone()}function Ja(e){return e}var z=$s.prototype;z.calendar=Yi;z.longDateFormat=Ai;z.invalidDate=Ei;z.ordinal=Li;z.preparse=Ja;z.postformat=Ja;z.relativeTime=Wi;z.pastFuture=Vi;z.set=$i;z.eras=yd;z.erasParse=pd;z.erasConvertYear=kd;z.erasAbbrRegex=Dd;z.erasNameRegex=Sd;z.erasNarrowRegex=Md;z.months=ol;z.monthsShort=nl;z.monthsParse=ll;z.monthsRegex=cl;z.monthsShortRegex=dl;z.week=ml;z.firstDayOfYear=gl;z.firstDayOfWeek=vl;z.weekdays=Ml;z.weekdaysMin=$l;z.weekdaysShort=Tl;z.weekdaysParse=Yl;z.weekdaysRegex=Al;z.weekdaysShortRegex=Il;z.weekdaysMinRegex=El;z.isPM=Ul;z.meridiem=Wl;function zt(e,t,s,a){var r=Ge(),o=Ae().set(a,t);return r[s](o,e)}function Qa(e,t,s){if(ze(e)&&(t=e,e=void 0),e=e||"",t!=null)return zt(e,t,s,"month");var a,r=[];for(a=0;a<12;a++)r[a]=zt(e,a,s,"month");return r}function zs(e,t,s,a){typeof e=="boolean"?(ze(t)&&(s=t,t=void 0),t=t||""):(t=e,s=t,e=!1,ze(t)&&(s=t,t=void 0),t=t||"");var r=Ge(),o=e?r._week.dow:0,n,u=[];if(s!=null)return zt(t,(s+o)%7,a,"day");for(n=0;n<7;n++)u[n]=zt(t,(n+o)%7,a,"day");return u}function zd(e,t){return Qa(e,t,"months")}function Gd(e,t){return Qa(e,t,"monthsShort")}function qd(e,t,s){return zs(e,t,s,"weekdays")}function Zd(e,t,s){return zs(e,t,s,"weekdaysShort")}function Kd(e,t,s){return zs(e,t,s,"weekdaysMin")}Qe("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,s=W(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+s}});M.lang=we("moment.lang is deprecated. Use moment.locale instead.",Qe);M.langData=we("moment.langData is deprecated. Use moment.localeData instead.",Ge);var Re=Math.abs;function Jd(){var e=this._data;return this._milliseconds=Re(this._milliseconds),this._days=Re(this._days),this._months=Re(this._months),e.milliseconds=Re(e.milliseconds),e.seconds=Re(e.seconds),e.minutes=Re(e.minutes),e.hours=Re(e.hours),e.months=Re(e.months),e.years=Re(e.years),this}function Xa(e,t,s,a){var r=Me(t,s);return e._milliseconds+=a*r._milliseconds,e._days+=a*r._days,e._months+=a*r._months,e._bubble()}function Qd(e,t){return Xa(this,e,t,1)}function Xd(e,t){return Xa(this,e,t,-1)}function aa(e){return e<0?Math.floor(e):Math.ceil(e)}function ec(){var e=this._milliseconds,t=this._days,s=this._months,a=this._data,r,o,n,u,f;return e>=0&&t>=0&&s>=0||e<=0&&t<=0&&s<=0||(e+=aa(bs(s)+t)*864e5,t=0,s=0),a.milliseconds=e%1e3,r=_e(e/1e3),a.seconds=r%60,o=_e(r/60),a.minutes=o%60,n=_e(o/60),a.hours=n%24,t+=_e(n/24),f=_e(er(t)),s+=f,t-=aa(bs(f)),u=_e(s/12),s%=12,a.days=t,a.months=s,a.years=u,this}function er(e){return e*4800/146097}function bs(e){return e*146097/4800}function tc(e){if(!this.isValid())return NaN;var t,s,a=this._milliseconds;if(e=be(e),e==="month"||e==="quarter"||e==="year")switch(t=this._days+a/864e5,s=this._months+er(t),e){case"month":return s;case"quarter":return s/3;case"year":return s/12}else switch(t=this._days+Math.round(bs(this._months)),e){case"week":return t/7+a/6048e5;case"day":return t+a/864e5;case"hour":return t*24+a/36e5;case"minute":return t*1440+a/6e4;case"second":return t*86400+a/1e3;case"millisecond":return Math.floor(t*864e5)+a;default:throw new Error("Unknown unit "+e)}}function qe(e){return function(){return this.as(e)}}var tr=qe("ms"),sc=qe("s"),ac=qe("m"),rc=qe("h"),oc=qe("d"),nc=qe("w"),ic=qe("M"),lc=qe("Q"),uc=qe("y"),dc=tr;function cc(){return Me(this)}function fc(e){return e=be(e),this.isValid()?this[e+"s"]():NaN}function rt(e){return function(){return this.isValid()?this._data[e]:NaN}}var mc=rt("milliseconds"),hc=rt("seconds"),vc=rt("minutes"),gc=rt("hours"),yc=rt("days"),pc=rt("months"),kc=rt("years");function _c(){return _e(this.days()/7)}var Ue=Math.round,lt={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function wc(e,t,s,a,r){return r.relativeTime(t||1,!!s,e,a)}function bc(e,t,s,a){var r=Me(e).abs(),o=Ue(r.as("s")),n=Ue(r.as("m")),u=Ue(r.as("h")),f=Ue(r.as("d")),d=Ue(r.as("M")),p=Ue(r.as("w")),S=Ue(r.as("y")),O=o<=s.ss&&["s",o]||o<s.s&&["ss",o]||n<=1&&["m"]||n<s.m&&["mm",n]||u<=1&&["h"]||u<s.h&&["hh",u]||f<=1&&["d"]||f<s.d&&["dd",f];return s.w!=null&&(O=O||p<=1&&["w"]||p<s.w&&["ww",p]),O=O||d<=1&&["M"]||d<s.M&&["MM",d]||S<=1&&["y"]||["yy",S],O[2]=t,O[3]=+e>0,O[4]=a,wc.apply(null,O)}function xc(e){return e===void 0?Ue:typeof e=="function"?(Ue=e,!0):!1}function Sc(e,t){return lt[e]===void 0?!1:t===void 0?lt[e]:(lt[e]=t,e==="s"&&(lt.ss=t-1),!0)}function Dc(e,t){if(!this.isValid())return this.localeData().invalidDate();var s=!1,a=lt,r,o;return typeof e=="object"&&(t=e,e=!1),typeof e=="boolean"&&(s=e),typeof t=="object"&&(a=Object.assign({},lt,t),t.s!=null&&t.ss==null&&(a.ss=t.s-1)),r=this.localeData(),o=bc(this,!s,a,r),s&&(o=r.pastFuture(+this,o)),r.postformat(o)}var hs=Math.abs;function nt(e){return(e>0)-(e<0)||+e}function is(){if(!this.isValid())return this.localeData().invalidDate();var e=hs(this._milliseconds)/1e3,t=hs(this._days),s=hs(this._months),a,r,o,n,u=this.asSeconds(),f,d,p,S;return u?(a=_e(e/60),r=_e(a/60),e%=60,a%=60,o=_e(s/12),s%=12,n=e?e.toFixed(3).replace(/\.?0+$/,""):"",f=u<0?"-":"",d=nt(this._months)!==nt(u)?"-":"",p=nt(this._days)!==nt(u)?"-":"",S=nt(this._milliseconds)!==nt(u)?"-":"",f+"P"+(o?d+o+"Y":"")+(s?d+s+"M":"")+(t?p+t+"D":"")+(r||a||e?"T":"")+(r?S+r+"H":"")+(a?S+a+"M":"")+(e?S+n+"S":"")):"P0D"}var V=os.prototype;V.isValid=pu;V.abs=Jd;V.add=Qd;V.subtract=Xd;V.as=tc;V.asMilliseconds=tr;V.asSeconds=sc;V.asMinutes=ac;V.asHours=rc;V.asDays=oc;V.asWeeks=nc;V.asMonths=ic;V.asQuarters=lc;V.asYears=uc;V.valueOf=dc;V._bubble=ec;V.clone=cc;V.get=fc;V.milliseconds=mc;V.seconds=hc;V.minutes=vc;V.hours=gc;V.days=yc;V.weeks=_c;V.months=pc;V.years=kc;V.humanize=Dc;V.toISOString=is;V.toString=is;V.toJSON=is;V.locale=Va;V.localeData=Ha;V.toIsoString=we("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",is);V.lang=Fa;I("X",0,0,"unix");I("x",0,0,"valueOf");C("x",ts);C("X",zi);q("X",function(e,t,s){s._d=new Date(parseFloat(e)*1e3)});q("x",function(e,t,s){s._d=new Date(W(e))});//! moment.js
M.version="2.30.1";Mi(ee);M.fn=_;M.min=hu;M.max=vu;M.now=gu;M.utc=Ae;M.unix=Hd;M.months=zd;M.isDate=Pt;M.locale=Qe;M.invalid=Jt;M.duration=Me;M.isMoment=De;M.weekdays=qd;M.parseZone=Bd;M.localeData=Ge;M.isDuration=Lt;M.monthsShort=Gd;M.weekdaysMin=Kd;M.defineLocale=Us;M.updateLocale=Bl;M.locales=zl;M.weekdaysShort=Zd;M.normalizeUnits=be;M.relativeTimeRounding=xc;M.relativeTimeThreshold=Sc;M.calendarFormat=Wu;M.prototype=_;M.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};const Mc={class:"space-y-4"},Tc={key:0,class:"mb-4 p-3 bg-gray-100 rounded-md"},$c={class:"text-sm font-medium text-gray-900"},Cc={class:"text-xs text-gray-500 mt-1"},Yc={class:"mb-4"},Oc="post",Pc="Add Note",Nc="Note added successfully!",Ac={__name:"TaskNoteModal",props:{show:Boolean,taskForNote:Object},emits:["close","note-added"],setup(e,{emit:t}){const s=e,a=t,r=Zt({note:""}),o=H(()=>{var d;return`Add Note to Task: "${(d=s.taskForNote)==null?void 0:d.name}"`}),n=H(()=>{var d;return`/api/tasks/${(d=s.taskForNote)==null?void 0:d.id}/notes`});me(()=>s.show,d=>{d&&Object.assign(r,{note:""})},{immediate:!0});const u=d=>{a("note-added",d),a("close")},f=()=>{a("close")};return(d,p)=>(l(),E(Kt,{show:e.show,title:o.value,"api-endpoint":n.value,"http-method":Oc,"form-data":r,"submit-button-text":Pc,"success-message":Nc,onClose:f,onSubmitted:u},{default:b(({errors:S})=>[i("div",Mc,[e.taskForNote?(l(),m("div",Tc,[i("p",$c,N(e.taskForNote.name),1),i("p",Cc,"Status: "+N(e.taskForNote.status),1)])):x("",!0),i("div",Yc,[v(G,{for:"task-note-content",value:"Note Content"}),ie(i("textarea",{id:"task-note-content","onUpdate:modelValue":p[0]||(p[0]=O=>r.note=O),class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full h-32",placeholder:"Enter your note...",required:""},null,512),[[Ye,r.note]]),v(ae,{message:S.note?S.note[0]:"",class:"mt-2"},null,8,["message"])])])]),_:1},8,["show","title","api-endpoint","form-data"]))}},Ic={class:"task-history-list"},Ec={key:0,class:"text-center py-4"},Rc={key:1,class:"text-gray-500 text-sm py-2"},Uc={key:2,class:"space-y-3"},Lc={class:"flex items-start"},jc={class:"text-xl mr-2"},Wc={class:"text-sm text-gray-700"},Vc={class:"text-xs text-gray-500 mt-1"},Fc={__name:"TaskHistoryList",props:{activities:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},setup(e){const t=a=>a?new Date(a).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",s=a=>(console.log(a),a.includes("created")?"🆕":a.includes("started")?"🚀":a.includes("paused")?"⏸️":a.includes("resumed")?"▶️":a.includes("unblocked")?"🔓":a.includes("blocked")?"⛔":a.includes("completed")?"✅":a.includes("revised")?"🔄":a.includes("deleted")?"🗑️":a.includes("assigned")?"👤":a.includes("updated")?"📝":a.includes("added note")?"🗒️":a.includes("commented")?"💬":"📋");return(a,r)=>(l(),m("div",Ic,[e.loading?(l(),m("div",Ec,r[0]||(r[0]=[i("div",{class:"inline-block animate-spin rounded-full h-6 w-6 border-t-2 border-b-2 border-indigo-500"},null,-1),i("p",{class:"mt-2 text-gray-500"},"Loading activity history...",-1)]))):e.activities.length===0?(l(),m("div",Rc," No activity history available for this task. ")):(l(),m("div",Uc,[(l(!0),m(de,null,ce(e.activities,o=>{var n;return l(),m("div",{key:o.id,class:"p-3 bg-gray-50 rounded-md"},[i("div",Lc,[i("span",jc,N(s(o.description)),1),i("div",null,[i("p",Wc,N(o.description),1),i("p",Vc," By "+N(((n=o.causer)==null?void 0:n.name)||"System")+" on "+N(t(o.created_at)),1)])])])}),128))]))]))}},Hc=at(Fc,[["__scopeId","data-v-423d54af"]]),um=async()=>{try{return(await ne.get("/api/assigned-tasks")).data}catch(e){throw console.error("Error fetching assigned tasks:",e),he("Failed to load assigned tasks"),e}},dm=async e=>{try{return(await ne.get(`/api/projects/${e}/tasks`)).data}catch(t){throw console.error("Error fetching project tasks:",t),he("Failed to load project tasks"),t}},cm=async e=>{try{return(await ne.get(`/api/projects/${e}/due-and-overdue-tasks`)).data}catch(t){throw console.error("Error fetching due and overdue tasks:",t),he("Failed to load due and overdue tasks"),t}},Bc=async e=>{if(!e||e.status==="In Progress")return e;try{Xe("Starting task...");const t=await ne.post(`/api/tasks/${e.id}/start`);return Ne("Task started successfully"),t.data}catch(t){throw console.error("Error starting task:",t),he("Failed to start task. Please try again."),t}},zc=async e=>{if(!e||e.status!=="In Progress")return pe('Task can only be paused from "In Progress" status.'),e;try{Xe("Pausing task...");const t=await ne.post(`/api/tasks/${e.id}/pause`);return Ne("Task paused successfully"),t.data}catch(t){throw console.error("Error pausing task:",t),he("Failed to pause task. Please try again."),t}},Gc=async e=>{if(!e||e.status!=="Paused")return pe('Task can only be resumed from "Paused" status.'),e;try{Xe("Resuming task...");const t=await ne.post(`/api/tasks/${e.id}/resume`);return Ne("Task resumed successfully"),t.data}catch(t){throw console.error("Error resuming task:",t),he("Failed to resume task. Please try again."),t}},qc=async e=>{if(!e||e.status==="Done")return e;if(e.status!=="In Progress")throw pe("Task must be started before it can be completed"),new Error("Task must be started before it can be completed");try{Xe("Completing task...");const t=await ne.patch(`/api/tasks/${e.id}/complete`);return Ne("Task completed successfully"),t.data}catch(t){throw console.error("Error completing task:",t),t.response&&t.response.status===422?pe(t.response.data.message||"Task must be started before it can be completed"):he("Failed to complete task. Please try again."),t}},Zc=async(e,t)=>{if(!e||e.status==="Blocked")return pe("Task is already blocked."),e;if(e.status==="Done")return pe("Completed tasks cannot be blocked."),e;if(!t)throw pe("Please provide a reason for blocking the task"),new Error("Blocking reason is required");try{Xe("Blocking task...");const s=await ne.post(`/api/tasks/${e.id}/block`,{reason:t});return Ne("Task blocked successfully"),s.data}catch(s){throw console.error("Error blocking task:",s),he("Failed to block task. Please try again."),s}},Kc=async e=>{if(!e||e.status!=="Blocked")return pe("Task is not in a blocked state."),e;try{Xe("Unblocking task...");const t=await ne.post(`/api/tasks/${e.id}/unblock`);return Ne("Task unblocked successfully"),t.data}catch(t){throw console.error("Error unblocking task:",t),he("Failed to unblock task. Please try again."),t}},Jc=async e=>{if(!e||e.status!=="Done")return pe("Only completed tasks can be revised."),e;try{Xe("Revising task...");const t=await ne.post(`/api/tasks/${e.id}/revise`);return Ne("Task revised successfully"),t.data}catch(t){throw console.error("Error revising task:",t),t.response&&t.response.status===422?pe(t.response.data.message||"Only completed tasks can be revised"):he("Failed to revise task. Please try again."),t}},Qc=async e=>{if(!e)return!1;if(e.status!=="To Do")throw pe("Only tasks in To Do status can be deleted"),new Error("Only tasks in To Do status can be deleted");if(!confirm("Are you sure you want to delete this task? This action cannot be undone."))return!1;try{return Xe("Deleting task..."),await ne.delete(`/api/tasks/${e.id}`),Ne("Task deleted successfully"),!0}catch(t){throw console.error("Error deleting task:",t),he("Failed to delete task. Please try again."),t}},Xc=e=>{switch(e){case"To Do":return"bg-yellow-100 text-yellow-800";case"In Progress":return"bg-blue-100 text-blue-800";case"Paused":return"bg-orange-100 text-orange-800";case"Blocked":return"bg-red-100 text-red-800";case"Done":return"bg-green-100 text-green-800";case"Archived":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},fm=e=>{switch(e){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},mm=e=>e?e.charAt(0).toUpperCase()+e.slice(1):"Medium",ef={key:0,class:"text-center py-8 text-gray-500"},tf={key:1,class:"text-center py-8 text-red-600"},sf={key:2,class:"space-y-6"},af={class:"bg-gray-50 p-4 rounded-lg shadow-sm"},rf={class:"text-xl font-bold text-gray-900 mb-2"},of={class:"flex items-center space-x-2 text-sm text-gray-600 mb-4"},nf={key:0,class:"text-indigo-600 font-medium"},lf={key:1,class:"text-purple-600 font-medium"},uf={class:"text-gray-700 leading-relaxed"},df={class:"mt-4 flex flex-wrap gap-2"},cf={key:0,class:"text-xs text-gray-500 mt-1"},ff={key:0,class:"bg-yellow-50 border-l-4 border-red-400 p-4 rounded-lg shadow-sm"},mf={class:"flex items-center"},hf={class:"ml-3"},vf={class:"mt-2 text-sm text-yellow-700"},gf={class:"space-y-4 p-4 bg-white rounded-lg shadow-sm"},yf={class:"flex items-center justify-between py-2 border-b border-gray-100"},pf={class:"flex-1 text-right"},kf={key:0,class:"text-xs text-gray-400 ml-1"},_f={key:1,class:"flex items-center space-x-2"},wf={class:"flex items-center justify-between py-2 border-b border-gray-100"},bf={class:"flex-1 text-right"},xf={key:1,class:"flex items-center space-x-2"},Sf={class:"flex items-center justify-between py-2 border-b border-gray-100"},Df={class:"flex-1 text-right"},Mf={key:0,class:"text-xs text-gray-400 ml-1"},Tf={key:1,class:"flex items-center space-x-2"},$f={class:"flex items-center justify-between py-2 border-b border-gray-100"},Cf={class:"text-gray-700"},Yf={class:"flex items-start py-2 border-b border-gray-100"},Of={class:"flex-1 flex flex-wrap gap-2"},Pf={key:0,class:"text-gray-500 text-sm"},Nf={class:"bg-white p-4 rounded-lg shadow-sm"},Af={class:"flex justify-between items-center mb-4 border-b pb-2"},If={key:0,class:"space-y-3"},Ef={class:"text-sm text-gray-700"},Rf={class:"text-xs text-gray-500 mt-1"},Uf={key:1,class:"text-gray-500 text-sm py-2"},Lf={class:"bg-white p-4 rounded-lg shadow-sm"},jf={key:3,class:"text-center py-8 text-gray-500"},Wf={key:4,class:"mt-4 flex flex-col items-center"},Vf={key:0,class:"text-xs text-red-500 mt-1"},Ff={class:"p-6"},Hf={class:"mb-4"},Bf={class:"flex justify-end space-x-3"},zf={__name:"TaskDetailSidebar",props:{taskId:{type:Number,required:!0},projectId:{type:Number,required:!0},projectUsers:{type:Array,default:()=>[]}},emits:["close","task-updated","task-deleted"],setup(e,{emit:t}){const s=e,a=t,r=P(null),o=P(!0),n=P(""),u=P(!1),f=P(!1),d=P(!1),p=P(null),S=P(null),O=P(null),Z=P([]),T=P(!1),g=[{value:"low",label:"Low"},{value:"medium",label:"Medium"},{value:"high",label:"High"}],w=P(!1),y=async()=>{o.value=!0,n.value="";try{const R=await window.axios.get(`/api/tasks/${s.taskId}`);r.value=R.data,p.value=r.value.assigned_to_id||null,S.value=r.value.due_date||null,O.value=r.value.priority||"medium",c()}catch(R){n.value="Failed to load task details.",console.error("Error fetching task details:",R)}finally{o.value=!1}},c=async()=>{T.value=!0;try{const R=await window.axios.get("/api/activities",{params:{subject_type:"App\\Models\\Task",subject_id:s.taskId}});Z.value=R.data}catch(R){console.error("Error fetching task activities:",R)}finally{T.value=!1}};me(()=>s.taskId,R=>{R?y():r.value=null},{immediate:!0});const h=H(()=>s.projectUsers.map(R=>({value:R.id,label:R.name}))),k=async()=>{if(!r.value||p.value===r.value.assigned_to_id){u.value=!1;return}try{const R=await window.axios.patch(`/api/tasks/${r.value.id}`,{assigned_to_user_id:p.value});r.value=R.data,a("task-updated",r.value)}catch(R){console.error("Error updating assigned user:",R),p.value=r.value.assigned_to_id,he("Failed to update assigned user. Please try again.")}finally{u.value=!1}},Y=async()=>{if(!r.value||S.value===r.value.due_date){f.value=!1;return}try{const R=await window.axios.patch(`/api/tasks/${r.value.id}`,{due_date:S.value});r.value=R.data,a("task-updated",r.value)}catch(R){console.error("Error updating due date:",R),S.value=r.value.due_date,he("Failed to update due date. Please try again.")}finally{f.value=!1}},L=async()=>{if(!r.value||O.value===r.value.priority){d.value=!1;return}try{const R=await window.axios.patch(`/api/tasks/${r.value.id}`,{priority:O.value});r.value=R.data,a("task-updated",r.value)}catch(R){console.error("Error updating priority:",R),O.value=r.value.priority,he("Failed to update priority. Please try again.")}finally{d.value=!1}},re=()=>{w.value=!0},Ee=()=>{y(),w.value=!1},X=async()=>{try{await Qc(r.value),a("task-deleted",r.value.id),a("close")}catch(R){console.error("Error deleting task:",R)}},j=async()=>{try{r.value=await Bc(r.value),a("task-updated",r.value),c()}catch(R){console.error("Error starting task:",R)}},K=async()=>{try{r.value=await zc(r.value),a("task-updated",r.value),c()}catch(R){console.error("Error pausing task:",R)}},Q=async()=>{try{r.value=await Gc(r.value),a("task-updated",r.value),c()}catch(R){console.error("Error resuming task:",R)}},Te=async()=>{try{r.value=await qc(r.value),a("task-updated",r.value),c()}catch(R){console.error("Error completing task:",R)}},sr=async()=>{try{r.value=await Jc(r.value),a("task-updated",r.value),c()}catch(R){console.error("Error revising task:",R)}},yt=P(!1),ot=P(""),ar=()=>{ot.value="",yt.value=!0},rr=async()=>{if(!ot.value.trim()){pe("Please provide a reason for blocking the task");return}try{r.value=await Zc(r.value,ot.value),Ne("Task blocked successfully"),a("task-updated",r.value),c(),yt.value=!1}catch(R){console.error("Error blocking task:",R)}},or=async()=>{try{r.value=await Kc(r.value),a("task-updated",r.value),c()}catch(R){console.error("Error unblocking task:",R)}},nr=H(()=>r.value?Xc(r.value.status):""),ls=H(()=>{var D,pt,kt,_t;if(!Z.value||((D=r.value)==null?void 0:D.status)!=="Blocked")return null;const R=Z.value.find(wt=>{var J,Gs;return wt.event==="updated"&&((Gs=(J=wt.properties)==null?void 0:J.attributes)==null?void 0:Gs.status)==="Blocked"});return R?(console.log(R.properties),{causer:((pt=R.causer)==null?void 0:pt.name)||"Unknown",reason:((_t=(kt=R.properties)==null?void 0:kt.attributes)==null?void 0:_t.block_reason)||"No reason provided."}):null});return(R,D)=>{var pt,kt,_t,wt;return l(),m("div",null,[o.value?(l(),m("div",ef," Loading task details... ")):n.value?(l(),m("div",tf,N(n.value),1)):r.value?(l(),m("div",sf,[i("div",af,[i("h4",rf,N(r.value.name),1),i("div",of,[i("span",{class:F(["px-2 py-1 rounded-full text-xs font-medium",nr.value])},N(r.value.status),3),r.value.task_type?(l(),m("span",nf," | "+N((pt=r.value.task_type)==null?void 0:pt.name)+" | ",1)):x("",!0),D[13]||(D[13]=i("br",null,null,-1)),(kt=r.value.milestone)!=null&&kt.name?(l(),m("span",lf,N((_t=r.value.milestone)==null?void 0:_t.name),1)):x("",!0)]),i("p",uf,N(r.value.description||"No description provided."),1),i("div",df,[r.value.status==="To Do"?(l(),E(ye,{key:0,onClick:j,class:"bg-blue-600 hover:bg-blue-700"},{default:b(()=>D[14]||(D[14]=[$(" Start Task ",-1)])),_:1,__:[14]})):r.value.status==="In Progress"?(l(),E(ye,{key:1,onClick:K,class:"bg-orange-600 hover:bg-orange-700"},{default:b(()=>D[15]||(D[15]=[$(" Pause Task ",-1)])),_:1,__:[15]})):r.value.status==="Paused"?(l(),E(ye,{key:2,onClick:Q,class:"bg-blue-600 hover:bg-blue-700"},{default:b(()=>D[16]||(D[16]=[$(" Resume Task ",-1)])),_:1,__:[16]})):r.value.status==="Blocked"?(l(),E(ye,{key:3,onClick:or,class:"bg-green-600 hover:bg-green-700"},{default:b(()=>D[17]||(D[17]=[$(" Unblock Task ",-1)])),_:1,__:[17]})):x("",!0),r.value.status==="To Do"||r.value.status==="In Progress"||r.value.status==="Paused"?(l(),E(ye,{key:4,onClick:ar,class:"bg-red-600 hover:bg-red-700"},{default:b(()=>D[18]||(D[18]=[$(" Block Task ",-1)])),_:1,__:[18]})):x("",!0),r.value.status==="In Progress"?(l(),E(ye,{key:5,onClick:Te,class:"bg-green-600 hover:bg-green-700"},{default:b(()=>D[19]||(D[19]=[$(" Complete Task ",-1)])),_:1,__:[19]})):x("",!0),r.value.status==="Done"?(l(),E(ye,{key:6,onClick:sr,class:"bg-yellow-600 hover:bg-yellow-700"},{default:b(()=>D[20]||(D[20]=[$(" Revise Task ",-1)])),_:1,__:[20]})):x("",!0)]),r.value.status==="Done"?(l(),m("div",cf,' Revising will change the task status back to "To Do" ')):x("",!0)]),r.value.status==="Blocked"&&ls.value?(l(),m("div",ff,[i("div",mf,[D[22]||(D[22]=i("div",{class:"flex-shrink-0"},[i("svg",{class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[i("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.487 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11.75 13a.75.75 0 01-1.5 0v-2.25a.75.75 0 011.5 0V13zm-1.5-7.5a.75.75 0 011.5 0v1.5a.75.75 0 01-1.5 0V5.5z","clip-rule":"evenodd"})])],-1)),i("div",hf,[D[21]||(D[21]=i("h3",{class:"text-sm font-medium text-yellow-800"},"Task Blocked",-1)),i("div",vf,[i("p",null,"This task was blocked by **"+N(ls.value.causer)+"** with the following reason:",1),i("p",null,N(ls.value.reason),1)])])])])):x("",!0),i("div",gf,[D[29]||(D[29]=i("h5",{class:"text-lg font-semibold text-gray-800 border-b pb-2 mb-4"},"Task Attributes",-1)),i("div",yf,[v(G,{class:"min-w-[100px] text-gray-600"},{default:b(()=>D[23]||(D[23]=[$("Assigned To:",-1)])),_:1,__:[23]}),i("div",pf,[u.value?(l(),m("div",_f,[v($e,{id:"edit-assigned-to",modelValue:p.value,"onUpdate:modelValue":D[1]||(D[1]=J=>p.value=J),options:h.value,"value-key":"value","label-key":"label",placeholder:"Unassigned",class:"mt-1 flex-1","allow-empty":!0},null,8,["modelValue","options"]),i("button",{onClick:k,class:"text-green-600 hover:text-green-800 text-sm font-medium"},"Save"),i("button",{onClick:D[2]||(D[2]=J=>u.value=!1),class:"text-gray-600 hover:text-gray-800 text-sm font-medium"},"Cancel")])):(l(),m("div",{key:0,onClick:D[0]||(D[0]=J=>r.value.status!=="Done"?u.value=!0:pe("Cannot change assignment for a completed task. Use the Revise button to change the task status first.")),class:F(["cursor-pointer",{"text-indigo-600 hover:text-indigo-800":r.value.status!=="Done","text-gray-500":r.value.status==="Done"}])},[$(N(((wt=r.value.assigned_to)==null?void 0:wt.name)||"Unassigned")+" ",1),r.value.status!=="Done"?(l(),m("span",kf,"(Click to edit)")):x("",!0)],2))])]),i("div",wf,[v(G,{class:"min-w-[100px] text-gray-600"},{default:b(()=>D[24]||(D[24]=[$("Due Date:",-1)])),_:1,__:[24]}),i("div",bf,[f.value?(l(),m("div",xf,[v(Fe,{id:"edit-due-date",modelValue:S.value,"onUpdate:modelValue":D[4]||(D[4]=J=>S.value=J),type:"date",class:"mt-1 flex-1"},null,8,["modelValue"]),i("button",{onClick:Y,class:"text-green-600 hover:text-green-800 text-sm font-medium"},"Save"),i("button",{onClick:D[5]||(D[5]=J=>f.value=!1),class:"text-gray-600 hover:text-gray-800 text-sm font-medium"},"Cancel")])):(l(),m("div",{key:0,onClick:D[3]||(D[3]=J=>f.value=!0),class:"cursor-pointer text-indigo-600 hover:text-indigo-800"},[$(N(r.value.due_date?A(M)(r.value.due_date).format("MMM D, YYYY"):"No Due Date")+" ",1),D[25]||(D[25]=i("span",{class:"text-xs text-gray-400 ml-1"},"(Click to edit)",-1))]))])]),i("div",Sf,[v(G,{class:"min-w-[100px] text-gray-600"},{default:b(()=>D[26]||(D[26]=[$("Priority:",-1)])),_:1,__:[26]}),i("div",Df,[d.value?(l(),m("div",Tf,[v($e,{id:"edit-priority",modelValue:O.value,"onUpdate:modelValue":D[7]||(D[7]=J=>O.value=J),options:g,"value-key":"value","label-key":"label",placeholder:"Select priority",class:"mt-1 flex-1"},null,8,["modelValue"]),i("button",{onClick:L,class:"text-green-600 hover:text-green-800 text-sm font-medium"},"Save"),i("button",{onClick:D[8]||(D[8]=J=>d.value=!1),class:"text-gray-600 hover:text-gray-800 text-sm font-medium"},"Cancel")])):(l(),m("div",{key:0,onClick:D[6]||(D[6]=J=>r.value.status!=="Done"?d.value=!0:pe("Cannot change priority for a completed task. Use the Revise button to change the task status first.")),class:F(["cursor-pointer",{"text-indigo-600 hover:text-indigo-800":r.value.status!=="Done","text-gray-500":r.value.status==="Done"}])},[i("span",{class:F({"text-red-600 font-medium":r.value.priority==="high","text-yellow-600 font-medium":r.value.priority==="medium","text-green-600 font-medium":r.value.priority==="low"})},N(r.value.priority?r.value.priority.charAt(0).toUpperCase()+r.value.priority.slice(1):"Medium"),3),r.value.status!=="Done"?(l(),m("span",Mf,"(Click to edit)")):x("",!0)],2))])]),i("div",$f,[v(G,{class:"min-w-[100px] text-gray-600"},{default:b(()=>D[27]||(D[27]=[$("Created:",-1)])),_:1,__:[27]}),i("span",Cf,N(r.value.created_at?new Date(r.value.created_at).toLocaleDateString():"N/A"),1)]),i("div",Yf,[v(G,{class:"min-w-[100px] text-gray-600 mt-1"},{default:b(()=>D[28]||(D[28]=[$("Tags:",-1)])),_:1,__:[28]}),i("div",Of,[(l(!0),m(de,null,ce(r.value.tags,J=>(l(),m("span",{key:J.id,class:"inline-flex items-center px-3 py-1 text-sm font-medium bg-indigo-100 text-indigo-800 rounded-full shadow-sm"},N(J.name),1))),128)),!r.value.tags||r.value.tags.length===0?(l(),m("span",Pf,"No tags")):x("",!0)])])]),i("div",Nf,[i("div",Af,[D[31]||(D[31]=i("h5",{class:"text-lg font-semibold text-gray-800"},"Notes",-1)),v(ye,{onClick:re,class:"bg-indigo-600 hover:bg-indigo-700 transition-colors"},{default:b(()=>D[30]||(D[30]=[$(" Add Note ",-1)])),_:1,__:[30]})]),r.value.notes&&r.value.notes.length>0?(l(),m("div",If,[(l(!0),m(de,null,ce(r.value.notes,J=>(l(),m("div",{key:J.id,class:"p-3 bg-gray-50 rounded-md"},[i("p",Ef,N(J.content),1),i("p",Rf," By "+N(J.creator_name||"Unknown")+" on "+N(new Date(J.created_at).toLocaleDateString()),1)]))),128))])):(l(),m("div",Uf,"No notes for this task yet."))]),i("div",Lf,[D[32]||(D[32]=i("h5",{class:"text-lg font-semibold text-gray-800 border-b pb-2 mb-4"},"History",-1)),v(Hc,{activities:Z.value,loading:T.value},null,8,["activities","loading"])])])):(l(),m("div",jf," Select a task to view details. ")),r.value&&r.value.status!=="Done"?(l(),m("div",Wf,[v(ia,{onClick:X,disabled:r.value.status!=="To Do"},{default:b(()=>D[33]||(D[33]=[$(" Delete Task ",-1)])),_:1,__:[33]},8,["disabled"]),r.value.status!=="To Do"?(l(),m("p",Vf,"Task can only be deleted in 'To Do' status.")):x("",!0)])):x("",!0),v(Ac,{show:w.value,"task-for-note":r.value,onClose:D[9]||(D[9]=J=>w.value=!1),onNoteAdded:Ee},null,8,["show","task-for-note"]),v(Ss,{show:yt.value,onClose:D[12]||(D[12]=J=>yt.value=!1)},{default:b(()=>[i("div",Ff,[D[37]||(D[37]=i("h2",{class:"text-lg font-medium text-gray-900 mb-4"}," Block Task ",-1)),i("div",Hf,[D[34]||(D[34]=i("p",{class:"text-sm text-gray-600 mb-2"}," Please provide a reason for blocking this task: ",-1)),ie(i("textarea",{"onUpdate:modelValue":D[10]||(D[10]=J=>ot.value=J),class:"w-full rounded-md shadow-sm border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",rows:"3",placeholder:"Enter reason for blocking..."},null,512),[[Ye,ot.value]])]),i("div",Bf,[v(Mt,{onClick:D[11]||(D[11]=J=>yt.value=!1)},{default:b(()=>D[35]||(D[35]=[$(" Cancel ",-1)])),_:1,__:[35]}),v(ye,{onClick:rr,disabled:!ot.value.trim(),class:"bg-red-600 hover:bg-red-700"},{default:b(()=>D[36]||(D[36]=[$(" Block Task ",-1)])),_:1,__:[36]},8,["disabled"])])])]),_:1},8,["show"])])}}},Gf={key:1,class:"p-4 text-gray-500"},qf={key:0,class:"flex justify-end space-x-3"},Zf={__name:"TaskSidebar",emits:["taskUpdated","taskDeleted"],setup(e){const t=P(null);return(s,a)=>(l(),E(ua,{show:A(Ze).show,"onUpdate:show":A(ds),title:A(Ze).taskId?"Task Details":"Details",initialWidth:50},{content:b(()=>[A(Ze).taskId?(l(),E(zf,{key:0,"task-id":A(Ze).taskId,"project-id":A(Ze).projectId,"project-users":A(Ze).projectUsers,ref_key:"taskDetailSidebarRef",ref:t,onClose:A(ds),onTaskUpdated:a[0]||(a[0]=r=>{s.$emit("taskUpdated",r)}),onTaskDeleted:a[1]||(a[1]=r=>{s.$emit("taskDeleted",r),A(ds)()})},null,8,["task-id","project-id","project-users","onClose"])):A(Ze).show?(l(),m("div",Gf," No task selected or task ID is missing. ")):x("",!0)]),footer:b(()=>[A(Ze).taskId?(l(),m("div",qf,[t.value&&t.value.task&&t.value.task.status!=="In Progress"&&t.value.task.status!=="Done"?(l(),E(Mt,{key:0,onClick:t.value.startTask,class:"bg-blue-50 text-blue-700 hover:bg-blue-100"},{default:b(()=>a[2]||(a[2]=[$(" Start Task ",-1)])),_:1,__:[2]},8,["onClick"])):x("",!0),t.value&&t.value.task&&t.value.task.status==="In Progress"?(l(),E(Mt,{key:1,onClick:t.value.completeTask,class:"bg-green-50 text-green-700 hover:bg-green-100"},{default:b(()=>a[3]||(a[3]=[$(" Complete Task ",-1)])),_:1,__:[3]},8,["onClick"])):x("",!0),t.value&&t.value.task?(l(),E(ia,{key:2,onClick:t.value.deleteTask,class:"bg-red-50 text-red-700 hover:bg-red-100"},{default:b(()=>a[4]||(a[4]=[$(" Delete Task ",-1)])),_:1,__:[4]},8,["onClick"])):x("",!0)])):x("",!0)]),_:1},8,["show","onUpdate:show","title"]))}},Kf={class:"flex h-screen overflow-hidden"},Jf={class:"flex-1 flex flex-col overflow-hidden"},Qf={key:0,class:"bg-white shadow"},Xf={class:"mx-auto max-w-7xl px-4 py-6 sm:px-6 lg:px-8"},em={class:"flex-1 overflow-y-auto"},hm={__name:"AuthenticatedLayout",setup(e){const t=P(!1),s=P(!1),a=P(!1),r=P([]),o=P(!0),n=H(()=>Ot().props.id||null),u=async()=>{const w=localStorage.getItem("authToken");if(w){window.axios.defaults.headers.common.Authorization=`Bearer ${w}`;try{await window.axios.get("/api/user")}catch(y){y.response&&y.response.status===401&&(console.log("Session expired, redirecting to login"),localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization,window.location.href="/login")}}else delete window.axios.defaults.headers.common.Authorization},f=()=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization},d=w=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization,window.location.href="/login"},p=async()=>{o.value=!0;try{const w=await window.axios.get("/api/projects-simplified");r.value=w.data}catch(w){console.error("Error fetching all projects for sidebar:",w),r.value=[]}finally{o.value=!1}},S=w=>{gr.visit(route("projects.show",w))},O=P(null),Z=H(()=>Wt.value.notifications.filter(w=>!w.isRead).length),T=w=>{console.log("Task updated globally.",w)},g=w=>{console.log("Task deleted globally.",w)};return mt(()=>{u(),O.value&&mr(O.value),p(),hr()}),(w,y)=>(l(),m("div",Kf,[v(vr,{ref_key:"notificationContainerRef",ref:O,"sidebar-is-open":A(Wt).show},null,8,["sidebar-is-open"]),v(Zr),v(Bn,{"all-projects":r.value,"active-project-id":n.value,onProjectSelected:S},null,8,["all-projects","active-project-id"]),i("div",Jf,[v(gi,{"unread-notification-count":Z.value,onOpenCreateTaskModal:y[0]||(y[0]=c=>s.value=!0),onOpenAddResource:y[1]||(y[1]=c=>a.value=!0),onOpenNotificationsSidebar:A(Zs)},null,8,["unread-notification-count","onOpenNotificationsSidebar"]),v(Di,{"showing-navigation-dropdown":t.value,"unread-notification-count":Z.value,onOpenCreateTaskModal:y[2]||(y[2]=c=>s.value=!0),onOpenAddResource:y[3]||(y[3]=c=>a.value=!0),onOpenNotificationsSidebar:A(Zs),onLogoutSuccess:f,onLogoutError:d},null,8,["showing-navigation-dropdown","unread-notification-count","onOpenNotificationsSidebar"]),w.$slots.header?(l(),m("header",Qf,[i("div",Xf,[Oe(w.$slots,"header")])])):x("",!0),i("main",em,[Oe(w.$slots,"default")]),v(Lo,{show:s.value,onClose:y[4]||(y[4]=c=>s.value=!1),onSaved:y[5]||(y[5]=c=>s.value=!1)},null,8,["show"]),v(Fo,{"api-endpoint":"/api/shareable-resources",show:a.value,onClose:y[6]||(y[6]=c=>a.value=!1)},null,8,["show"])]),v(Zf,{onTaskUpdated:T,onTaskDeleted:g}),v(vn)]))}};export{Kt as B,Fo as C,$e as S,la as T,hm as _,Br as a,mm as b,fm as c,qc as d,Qc as e,um as f,Xc as g,Jc as h,Zc as i,M as j,Do as k,Ac as l,dm as m,Lo as n,cm as o,zc as p,Gc as r,Bc as s,Kc as u};
