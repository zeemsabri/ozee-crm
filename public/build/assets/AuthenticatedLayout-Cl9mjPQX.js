import{A as ie}from"./ApplicationLogo-qDzEaR1o.js";import{z as F,P as ee,p as V,r as C,h as w,o as i,b as t,f as H,e as f,y as W,I as Z,a as l,n as I,T as le,c as S,R as te,u as k,S as G,t as B,F as K,i as Q,U as ne,w as ue,d as de,g as _,l as ce,k as v,j as J,m as P,V as me,A as ve,D as fe}from"./app-B738Rhv8.js";import{_ as ge}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{P as se}from"./PrimaryButton-DgtrenrK.js";import{a as he,_ as pe}from"./SecondaryButton-DrvFxIfD.js";import{_ as Y,a as j}from"./InputError-D5pctweW.js";const ye={class:"relative"},O={__name:"Dropdown",props:{align:{type:String,default:"right"},width:{type:String,default:"48"},contentClasses:{type:String,default:"py-1 bg-white"}},setup(d){const n=d,c=u=>{o.value&&u.key==="Escape"&&(o.value=!1)};F(()=>document.addEventListener("keydown",c)),ee(()=>document.removeEventListener("keydown",c));const h=V(()=>({48:"w-48"})[n.width.toString()]),b=V(()=>n.align==="left"?"ltr:origin-top-left rtl:origin-top-right start-0":n.align==="right"?"ltr:origin-top-right rtl:origin-top-left end-0":"origin-top"),o=C(!1);return(u,m)=>(i(),w("div",ye,[t("div",{onClick:m[0]||(m[0]=y=>o.value=!o.value)},[W(u.$slots,"trigger")]),H(t("div",{class:"fixed inset-0 z-40",onClick:m[1]||(m[1]=y=>o.value=!1)},null,512),[[Z,o.value]]),f(le,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:l(()=>[H(t("div",{class:I(["absolute z-50 mt-2 rounded-md shadow-lg",[h.value,b.value]]),style:{display:"none"},onClick:m[2]||(m[2]=y=>o.value=!1)},[t("div",{class:I(["rounded-md ring-1 ring-black ring-opacity-5",d.contentClasses])},[W(u.$slots,"content")],2)],2),[[Z,o.value]])]),_:3})]))}},U={__name:"DropdownLink",props:{href:{type:String,required:!0},method:{type:String,default:"get"},as:{type:String,default:"a"}},setup(d){return(n,c)=>(i(),S(k(G),te({href:d.href,method:d.method,as:d.as},n.$attrs,{class:"block w-full px-4 py-2 text-start text-sm leading-5 text-gray-700 transition duration-150 ease-in-out hover:bg-gray-100 focus:bg-gray-100 focus:outline-none"}),{default:l(()=>[W(n.$slots,"default")]),_:3},16,["href","method","as"]))}},R={__name:"NavLink",props:{href:{type:String,required:!0},active:{type:Boolean}},setup(d){const n=d,c=V(()=>n.active?"inline-flex items-center px-1 pt-1 border-b-2 border-indigo-400 text-sm font-medium leading-5 text-gray-900 focus:outline-none focus:border-indigo-700 transition duration-150 ease-in-out":"inline-flex items-center px-1 pt-1 border-b-2 border-transparent text-sm font-medium leading-5 text-gray-500 hover:text-gray-700 hover:border-gray-300 focus:outline-none focus:text-gray-700 focus:border-gray-300 transition duration-150 ease-in-out");return(h,b)=>(i(),S(k(G),{href:d.href,class:I(c.value)},{default:l(()=>[W(h.$slots,"default")]),_:3},8,["href","class"]))}},E={__name:"ResponsiveNavLink",props:{href:{type:String,required:!0},active:{type:Boolean},method:{type:String,default:"get"},as:{type:String,default:"a"}},setup(d){const n=d,c=V(()=>n.active?"block w-full ps-3 pe-4 py-2 border-l-4 border-indigo-400 text-start text-base font-medium text-indigo-700 bg-indigo-50 focus:outline-none focus:text-indigo-800 focus:bg-indigo-100 focus:border-indigo-700 transition duration-150 ease-in-out":"block w-full ps-3 pe-4 py-2 border-l-4 border-transparent text-start text-base font-medium text-gray-600 hover:text-gray-800 hover:bg-gray-50 hover:border-gray-300 focus:outline-none focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300 transition duration-150 ease-in-out");return(h,b)=>(i(),S(k(G),te({href:d.href,method:d.method,as:d.as},h.$attrs,{class:c.value}),{default:l(()=>[W(h.$slots,"default")]),_:3},16,["href","method","as","class"]))}},be={class:"p-4 flex items-start"},_e={class:"flex-shrink-0"},we=["d"],xe={class:"ml-3 w-0 flex-1 pt-0.5"},ke={class:"text-sm font-medium"},Se={__name:"Notification",props:{type:{type:String,default:"info",validator:d=>["success","error","info","warning"].includes(d)},message:{type:String,required:!0},duration:{type:Number,default:5e3},id:{type:String,required:!0}},emits:["close"],setup(d,{emit:n}){const c=d,h=n,b=C(!1),o=C(null),u=V(()=>{switch(c.type){case"success":return"bg-green-50 text-green-800 border-green-400";case"error":return"bg-red-50 text-red-800 border-red-400";case"warning":return"bg-yellow-50 text-yellow-800 border-yellow-400";default:return"bg-blue-50 text-blue-800 border-blue-400"}}),m=V(()=>{switch(c.type){case"success":return"text-green-500";case"error":return"text-red-500";case"warning":return"text-yellow-500";default:return"text-blue-500"}}),y=V(()=>{switch(c.type){case"success":return"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z";case"error":return"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z";case"warning":return"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z";default:return"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}}),z=()=>{b.value=!1,o.value&&clearTimeout(o.value),setTimeout(()=>{h("close",c.id)},300)};return F(()=>{setTimeout(()=>{b.value=!0},100),c.duration>0&&(o.value=setTimeout(()=>{z()},c.duration))}),($,L)=>(i(),w("div",{class:I(["fixed z-50 transition-all duration-300 ease-in-out transform",[b.value?"opacity-100 translate-y-0":"opacity-0 translate-y-2","max-w-sm w-full shadow-lg rounded-lg pointer-events-auto border-l-4",u.value]]),role:"alert"},[t("div",be,[t("div",_e,[(i(),w("svg",{class:I(["h-5 w-5",m.value]),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[t("path",{"fill-rule":"evenodd",d:y.value,"clip-rule":"evenodd"},null,8,we)],2))]),t("div",xe,[t("p",ke,B(d.message),1)]),t("div",{class:"ml-4 flex-shrink-0 flex"},[t("button",{class:"bg-transparent rounded-md inline-flex text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:z},L[0]||(L[0]=[t("span",{class:"sr-only"},"Close",-1),t("svg",{class:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[t("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)]))])])],2))}},$e={class:"fixed top-4 right-4 z-50 space-y-4 w-full max-w-sm"},Ae={__name:"NotificationContainer",setup(d,{expose:n}){const c=C([]),h=()=>Date.now().toString(36)+Math.random().toString(36).substr(2),b=(u,m="info",y=5e3)=>{const z=h();return c.value.push({id:z,message:u,type:m,duration:y}),z},o=u=>{const m=c.value.findIndex(y=>y.id===u);m!==-1&&c.value.splice(m,1)};return n({addNotification:b,removeNotification:o,success:(u,m)=>b(u,"success",m),error:(u,m)=>b(u,"error",m),info:(u,m)=>b(u,"info",m),warning:(u,m)=>b(u,"warning",m)}),(u,m)=>(i(),w("div",$e,[f(ne,{name:"notification"},{default:l(()=>[(i(!0),w(K,null,Q(c.value,y=>(i(),S(Se,{key:y.id,id:y.id,type:y.type,message:y.message,duration:y.duration,onClose:o},null,8,["id","type","message","duration"]))),128))]),_:1})]))}},Ce=ge(Ae,[["__scopeId","data-v-24b5eed3"]]),De={class:"p-6"},Me={class:"mt-6"},Te={key:0,class:"mb-4 p-4 bg-green-100 border border-green-400 text-green-700 rounded"},Ee={key:1,class:"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded"},ze={class:"flex items-center mb-3"},Ne=["id","onUpdate:modelValue"],Ie=["for"],Le={key:0,class:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800"},Be={key:0},Ve={class:"mb-4"},Pe={class:"flex items-center"},Ue=["id","checked","onChange"],We=["for"],Re={key:0,class:"mb-4"},He=["id","onUpdate:modelValue"],qe={key:1,class:"mb-4"},Fe={class:"flex-1"},Ye=["id","onUpdate:modelValue"],Ge={class:"flex-1"},Je=["id","onUpdate:modelValue"],Ke={key:0,class:"flex items-end pb-1"},Qe=["onClick"],Xe=["onClick"],Ze={class:"mt-6 flex justify-end space-x-3"},je={key:0,class:"flex items-center"},Oe={key:1},et={__name:"AvailabilityModal",props:{show:Boolean,date:{type:String,default:()=>{const d=new Date;return d.setDate(d.getDate()+1),d.toISOString().split("T")[0]}},nextWeekDates:{type:Array,default:()=>[]}},emits:["close","availability-saved"],setup(d,{emit:n}){const c=()=>{const e=localStorage.getItem("authToken");e&&!P.defaults.headers.common.Authorization&&(P.defaults.headers.common.Authorization=`Bearer ${e}`,console.log("Auth headers set in AvailabilityModal"))},h=d,b=n,o=C({}),u=C({}),m=C(!1),y=C(""),z=()=>{const e=[],r=new Date,a=new Date(r);a.setDate(r.getDate()+1);for(let M=0;M<7;M++){const p=new Date(a);p.setDate(a.getDate()+M);const g=p.toISOString().split("T")[0];e.push({value:g,label:p.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})}),o.value[g]={isSelected:!1,isAvailable:!0,reason:"",timeSlots:[{start_time:"",end_time:""}]}}return e},$=C([]);F(()=>{c(),h.nextWeekDates.length>0?($.value=h.nextWeekDates,h.nextWeekDates.forEach(e=>{o.value[e.value]={isSelected:!1,isAvailable:!0,reason:"",timeSlots:[{start_time:"",end_time:""}]}})):$.value=z()});const L=async()=>{try{if(c(),$.value.length===0)return;const e=$.value[0].value,r=$.value[$.value.length-1].value,a=await P.get("/api/availabilities",{params:{start_date:e,end_date:r}});if(a.data&&a.data.availabilities){const M=a.data.availabilities;$.value.forEach(p=>{o.value[p.value]={isSelected:!1,isAvailable:!0,reason:"",timeSlots:[{start_time:"",end_time:""}]}}),M.forEach(p=>{const g=p.date.split("T")[0];o.value[g]&&(o.value[g].isSelected=!0,o.value[g].isAvailable=p.is_available,p.is_available?o.value[g].timeSlots=p.time_slots&&p.time_slots.length>0?[...p.time_slots]:[{start_time:"",end_time:""}]:o.value[g].reason=p.reason||"")})}}catch(e){console.error("Error fetching existing availabilities:",e),$.value.forEach(r=>{o.value[r.value]={isSelected:!1,isAvailable:!0,reason:"",timeSlots:[{start_time:"",end_time:""}]}})}};ue(()=>h.show,async e=>{e&&(u.value={},y.value="",await L())},{immediate:!0});const x=e=>{o.value[e].timeSlots.push({start_time:"",end_time:""})},A=(e,r)=>{o.value[e].timeSlots.length>1&&o.value[e].timeSlots.splice(r,1)},D=(e,r)=>{o.value[e].isAvailable=r,r?o.value[e].reason="":o.value[e].timeSlots=[{start_time:"",end_time:""}]},s=async()=>{m.value=!0,u.value={},y.value="";const e=[];let r=!1;for(const a of $.value){const M=a.value,p=o.value[M];if(p.isSelected){let g={};if(p.isAvailable)if(p.timeSlots.some(T=>!T.start_time||!T.end_time))g.timeSlots="Please fill in all time slots.",r=!0;else for(const T of p.timeSlots){const N=T.start_time.split(":").map(Number),q=T.end_time.split(":").map(Number);if(N.length!==2||q.length!==2||isNaN(N[0])||isNaN(N[1])||isNaN(q[0])||isNaN(q[1])){g.timeSlots="Invalid time format. Please use HH:MM format.",r=!0;break}const oe=N[0]*60+N[1],re=q[0]*60+q[1];if(oe>=re){g.timeSlots="End time must be after start time.",r=!0;break}}else p.reason.trim()||(g.reason="Please provide a reason for unavailability.",r=!0);Object.keys(g).length>0&&(u.value[M]=g),Object.keys(g).length===0&&e.push({date:M,is_available:p.isAvailable,reason:p.isAvailable?null:p.reason,time_slots:p.isAvailable?p.timeSlots:null})}}if(r){m.value=!1,u.value.general="Please correct the errors in the highlighted dates.";return}if(e.length===0){u.value.general="Please select at least one day to set availability for.",m.value=!1;return}try{c();const a=await P.post("/api/availabilities/batch",{availabilities:e});y.value="Availability saved successfully!",b("availability-saved",a.data.availabilities),setTimeout(()=>{b("close")},1500)}catch(a){console.error("Error saving availability:",a),a.response&&a.response.data&&a.response.data.errors?u.value.general=a.response.data.message||"An error occurred while saving your availability.":a.response&&a.response.status===409?(y.value=a.response.data.message,setTimeout(()=>{b("close")},1500)):u.value.general="An unexpected error occurred while saving your availability."}finally{m.value=!1}};return(e,r)=>(i(),S(pe,{show:d.show,onClose:r[1]||(r[1]=a=>e.$emit("close")),"max-width":"xl"},{default:l(()=>[t("div",De,[r[6]||(r[6]=t("h2",{class:"text-lg font-medium text-gray-900"}," Submit Your Weekly Availability ",-1)),r[7]||(r[7]=t("p",{class:"mt-1 text-sm text-gray-600"}," Please select the dates you wish to set availability for and provide your details for each. ",-1)),t("div",Me,[t("form",{onSubmit:de(s,["prevent"])},[y.value?(i(),w("div",Te,B(y.value),1)):_("",!0),u.value.general?(i(),w("div",Ee,B(u.value.general),1)):_("",!0),(i(!0),w(K,null,Q($.value,a=>{var M,p;return i(),w("div",{key:a.value,class:I(["mb-6 p-4 border rounded-lg shadow-sm",[o.value[a.value].isSelected?"border-indigo-300 bg-indigo-50":"border-gray-200",o.value[a.value].isSelected&&!u.value[a.value]?"border-l-4 border-l-indigo-500":""]])},[t("div",ze,[H(t("input",{type:"checkbox",id:`select_date_${a.value}`,"onUpdate:modelValue":g=>o.value[a.value].isSelected=g,class:"rounded border-gray-300 text-indigo-600 shadow-sm focus:ring-indigo-500"},null,8,Ne),[[ce,o.value[a.value].isSelected]]),t("label",{for:`select_date_${a.value}`,class:"ml-2 block text-base font-medium text-gray-800"},[v(B(a.label)+" ",1),o.value[a.value].isSelected?(i(),w("span",Le," Saved ")):_("",!0)],8,Ie)]),o.value[a.value].isSelected?(i(),w("div",Be,[t("div",Ve,[t("div",Pe,[t("input",{type:"checkbox",id:`isAvailableToggle_${a.value}`,checked:o.value[a.value].isAvailable,onChange:g=>D(a.value,g.target.checked),class:"rounded border-gray-300 text-indigo-600 shadow-sm focus:ring-indigo-500"},null,40,Ue),t("label",{for:`isAvailableToggle_${a.value}`,class:"ml-2 block text-sm text-gray-700"}," I am available on this day ",8,We)])]),o.value[a.value].isAvailable?_("",!0):(i(),w("div",Re,[f(Y,{for:`reason_${a.value}`,value:"Reason for Not Available"},null,8,["for"]),H(t("textarea",{id:`reason_${a.value}`,"onUpdate:modelValue":g=>o.value[a.value].reason=g,rows:"2",class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",placeholder:"e.g., Out of office, Holiday, Meeting all day"},null,8,He),[[J,o.value[a.value].reason]]),f(j,{message:(M=u.value[a.value])==null?void 0:M.reason,class:"mt-2"},null,8,["message"])])),o.value[a.value].isAvailable?(i(),w("div",qe,[f(Y,{value:"Available Time Slots"}),f(j,{message:(p=u.value[a.value])==null?void 0:p.timeSlots,class:"mt-2"},null,8,["message"]),(i(!0),w(K,null,Q(o.value[a.value].timeSlots,(g,T)=>(i(),w("div",{key:T,class:"flex items-center space-x-2 mt-2"},[t("div",Fe,[f(Y,{for:`start_time_${a.value}_${T}`,value:"Start Time",class:"text-xs"},null,8,["for"]),H(t("input",{id:`start_time_${a.value}_${T}`,type:"time","onUpdate:modelValue":N=>g.start_time=N,class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm"},null,8,Ye),[[J,g.start_time]])]),t("div",Ge,[f(Y,{for:`end_time_${a.value}_${T}`,value:"End Time",class:"text-xs"},null,8,["for"]),H(t("input",{id:`end_time_${a.value}_${T}`,type:"time","onUpdate:modelValue":N=>g.end_time=N,class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm"},null,8,Je),[[J,g.end_time]])]),o.value[a.value].timeSlots.length>1?(i(),w("div",Ke,[t("button",{type:"button",onClick:N=>A(a.value,T),class:"p-2 text-red-600 hover:text-red-800"},r[2]||(r[2]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm6 0a1 1 0 012 0v6a1 1 0 11-2 0V8z","clip-rule":"evenodd"})],-1)]),8,Qe)])):_("",!0)]))),128)),t("button",{type:"button",onClick:g=>x(a.value),class:"mt-3 w-full flex items-center justify-center px-4 py-2 border border-dashed border-indigo-300 rounded-lg text-indigo-600 hover:bg-indigo-50 transition duration-150 ease-in-out"},r[3]||(r[3]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z","clip-rule":"evenodd"})],-1),v(" Add Another Time Slot ")]),8,Xe)])):_("",!0)])):_("",!0)],2)}),128)),t("div",Ze,[f(he,{onClick:r[0]||(r[0]=a=>e.$emit("close"))},{default:l(()=>r[4]||(r[4]=[v(" Cancel ")])),_:1,__:[4]}),f(se,{disabled:m.value,class:I({"opacity-50":m.value})},{default:l(()=>[m.value?(i(),w("span",je,r[5]||(r[5]=[t("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),v(" Saving... ")]))):(i(),w("span",Oe,"Save Availability"))]),_:1},8,["disabled","class"])])],32)])])]),_:1},8,["show"]))}},tt={key:0,class:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center"},st={class:"bg-white rounded-lg shadow-xl p-6 max-w-lg w-full mx-4"},at={class:"flex justify-center"},ot={__name:"AvailabilityBlocker",setup(d){const n=C(!1),c=C(!0),h=C(!1),b=C([]),o=()=>{const x=localStorage.getItem("authToken");x&&!P.defaults.headers.common.Authorization&&(P.defaults.headers.common.Authorization=`Bearer ${x}`)},u=async()=>{c.value=!0;const x=localStorage.getItem("shouldBlockUser"),A=localStorage.getItem("allWeekdaysCovered");if(x==="true"&&A==="false")n.value=!0,await m();else try{o();const D=await P.get("/api/availability-prompt");n.value=D.data.should_block_user&&!D.data.all_weekdays_covered,n.value&&await m()}catch(D){console.error("Error checking if user should be blocked:",D),n.value=!1}c.value=!1},m=async()=>{try{o();const x=await P.get("/api/availability-prompt");y(x.data.next_week_start,x.data.next_week_end)}catch(x){console.error("Error fetching next week dates:",x)}},y=(x,A)=>{const D=[],s=new Date(x),e=new Date(A),r=new Date(s);for(;r<=e;)D.push({value:r.toISOString().split("T")[0],label:r.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})}),r.setDate(r.getDate()+1);b.value=D},z=()=>{h.value=!0},$=()=>{u()},L=x=>{n.value=x.detail.shouldBlockUser&&!x.detail.allWeekdaysCovered};return F(()=>{u(),window.addEventListener("availability-status-updated",L)}),ee(()=>{window.removeEventListener("availability-status-updated",L)}),(x,A)=>n.value&&!c.value?(i(),w("div",tt,[t("div",st,[A[2]||(A[2]=me('<div class="flex items-center mb-4"><div class="flex-shrink-0 mr-3"><svg class="h-8 w-8 text-red-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg></div><h2 class="text-xl font-bold text-gray-900">Action Required</h2></div><p class="mb-6 text-gray-700"> You must submit your availability for all weekdays of next week before you can continue using the application. This is required for planning meetings and work schedules. </p>',2)),t("div",at,[f(se,{onClick:z,class:"bg-red-600 hover:bg-red-700"},{default:l(()=>A[1]||(A[1]=[v(" Submit Availability Now ")])),_:1,__:[1]})]),f(et,{show:h.value,"next-week-dates":b.value,date:b.value.length>0?b.value[0].value:"",onClose:A[0]||(A[0]=D=>h.value=!1),onAvailabilitySaved:$},null,8,["show","next-week-dates","date"])])])):_("",!0)}};let X=null;const rt=d=>{X=d},ae=(d,n="info",c=5e3)=>X?X.addNotification(d,n,c):(console.warn("Notification container not set. Call setNotificationContainer first."),null),Bt=(d,n=5e3)=>ae(d,"success",n),Vt=(d,n=5e3)=>ae(d,"error",n),it={class:"min-h-screen bg-gray-100"},lt={class:"border-b border-gray-100 bg-white"},nt={class:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8"},ut={class:"flex h-16 justify-between"},dt={class:"flex"},ct={class:"flex shrink-0 items-center"},mt={class:"hidden space-x-8 sm:-my-px sm:ms-10 sm:flex"},vt={key:4,class:"hidden sm:flex sm:items-center"},ft={class:"hidden sm:ms-6 sm:flex sm:items-center"},gt={class:"relative ms-3"},ht={class:"inline-flex rounded-md"},pt={type:"button",class:"inline-flex items-center rounded-md border border-transparent bg-white px-3 py-2 text-sm font-medium leading-4 text-gray-500 transition duration-150 ease-in-out hover:text-gray-700 focus:outline-none"},yt={class:"-me-2 flex items-center sm:hidden"},bt={class:"h-6 w-6",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24"},_t={class:"space-y-1 pb-3 pt-2"},wt={key:6,class:"mt-3 space-y-1"},xt={class:"border-t border-gray-200 pb-1 pt-4"},kt={class:"px-4"},St={class:"text-base font-medium text-gray-800"},$t={class:"text-sm font-medium text-gray-500"},At={class:"text-sm font-medium text-gray-500 capitalize"},Ct={class:"mt-3 space-y-1"},Dt={key:0,class:"bg-white shadow"},Mt={class:"mx-auto max-w-7xl px-4 py-6 sm:px-6 lg:px-8"},Pt={__name:"AuthenticatedLayout",setup(d){const n=C(!1),c=V(()=>ve().props.auth.user);V(()=>{var s;return((s=c.value.role_data)==null?void 0:s.name)||""});const{canDo:h}=fe(),b=h("manage_projects"),o=h("compose_emails"),u=h("approve_emails"),m=h("create_users"),y=h("manage_roles"),z=h("manage_task_types"),$=h("create_clients"),L=async()=>{const s=localStorage.getItem("authToken");if(s){window.axios.defaults.headers.common.Authorization=`Bearer ${s}`;try{await window.axios.get("/api/user")}catch(e){e.response&&e.response.status===401&&(console.log("Session expired, redirecting to login"),localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization,window.location.href="/login")}}else delete window.axios.defaults.headers.common.Authorization},x=()=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),delete window.axios.defaults.headers.common.Authorization},A=s=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),delete window.axios.defaults.headers.common.Authorization,window.location.href="/login"},D=C(null);return F(()=>{L(),D.value&&rt(D.value)}),(s,e)=>{var r;return i(),w("div",null,[f(Ce,{ref_key:"notificationContainerRef",ref:D},null,512),f(ot),t("div",it,[t("nav",lt,[t("div",nt,[t("div",ut,[t("div",dt,[t("div",ct,[f(k(G),{href:s.route("dashboard")},{default:l(()=>[f(ie,{class:"block h-16 w-auto fill-current text-gray-800"})]),_:1},8,["href"])]),t("div",mt,[f(R,{href:s.route("dashboard"),active:s.route().current("dashboard")},{default:l(()=>e[1]||(e[1]=[v(" Dashboard ")])),_:1,__:[1]},8,["href","active"]),k(b)?(i(),S(R,{key:0,href:s.route("projects.index"),active:s.route().current("projects.index")},{default:l(()=>e[2]||(e[2]=[v(" Projects ")])),_:1,__:[2]},8,["href","active"])):_("",!0),k(o)?(i(),S(R,{key:1,href:s.route("emails.compose"),active:s.route().current("emails.compose")},{default:l(()=>e[3]||(e[3]=[v(" Compose Email ")])),_:1,__:[3]},8,["href","active"])):_("",!0),k(u)?(i(),S(R,{key:2,href:s.route("emails.pending"),active:s.route().current("emails.pending")},{default:l(()=>e[4]||(e[4]=[v(" Approve Emails ")])),_:1,__:[4]},8,["href","active"])):_("",!0),k(o)?(i(),S(R,{key:3,href:s.route("emails.rejected"),active:s.route().current("emails.rejected")},{default:l(()=>e[5]||(e[5]=[v(" Rejected Emails ")])),_:1,__:[5]},8,["href","active"])):_("",!0),f(R,{href:s.route("availability.index"),active:s.route().current("availability.index")},{default:l(()=>e[6]||(e[6]=[v(" Weekly Availability ")])),_:1,__:[6]},8,["href","active"]),k(y)?(i(),w("div",vt,[f(O,{align:"right",width:"48"},{trigger:l(()=>e[7]||(e[7]=[t("span",{class:"inline-flex rounded-md"},[t("button",{type:"button",class:"inline-flex items-center rounded-md border border-transparent bg-white px-3 py-2 text-sm font-medium leading-4 text-gray-500 transition duration-150 ease-in-out hover:text-gray-700 focus:outline-none"},[v(" Admin "),t("svg",{class:"ms-2 -me-0.5 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])])],-1)])),content:l(()=>[k($)?(i(),S(U,{key:0,href:s.route("clients.index"),active:s.route().current("clients.index")},{default:l(()=>e[8]||(e[8]=[v(" Clients ")])),_:1,__:[8]},8,["href","active"])):_("",!0),k(m)?(i(),S(U,{key:1,href:s.route("users.index"),active:s.route().current("users.index")},{default:l(()=>e[9]||(e[9]=[v(" Users ")])),_:1,__:[9]},8,["href","active"])):_("",!0),k(z)?(i(),S(U,{key:2,href:s.route("task-types.index"),active:s.route().current("task-types.index")},{default:l(()=>e[10]||(e[10]=[v(" Task Types ")])),_:1,__:[10]},8,["href","active"])):_("",!0),f(U,{href:s.route("admin.roles.index")},{default:l(()=>e[11]||(e[11]=[v(" Manage Roles ")])),_:1,__:[11]},8,["href"]),f(U,{href:s.route("admin.permissions.index")},{default:l(()=>e[12]||(e[12]=[v(" Manage Permissions ")])),_:1,__:[12]},8,["href"])]),_:1})])):_("",!0)])]),t("div",ft,[t("div",gt,[f(O,{align:"right",width:"48"},{trigger:l(()=>{var a;return[t("span",ht,[t("button",pt,[v(B(c.value.name)+" ("+B((a=c.value.role_data)==null?void 0:a.name)+") ",1),e[13]||(e[13]=t("svg",{class:"ms-2 -me-0.5 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1))])])]}),content:l(()=>[f(U,{href:s.route("profile.edit")},{default:l(()=>e[14]||(e[14]=[v(" Profile ")])),_:1,__:[14]},8,["href"]),f(U,{href:s.route("logout"),method:"post",as:"button",onSuccess:x,onError:A},{default:l(()=>e[15]||(e[15]=[v(" Log Out ")])),_:1,__:[15]},8,["href"])]),_:1})])]),t("div",yt,[t("button",{onClick:e[0]||(e[0]=a=>n.value=!n.value),class:"inline-flex items-center justify-center rounded-md p-2 text-gray-400 transition duration-150 ease-in-out hover:bg-gray-100 hover:text-gray-500 focus:bg-gray-100 focus:text-gray-500 focus:outline-none"},[(i(),w("svg",bt,[t("path",{class:I({hidden:n.value,"inline-flex":!n.value}),"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},null,2),t("path",{class:I({hidden:!n.value,"inline-flex":n.value}),"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,2)]))])])])]),t("div",{class:I([{block:n.value,hidden:!n.value},"sm:hidden"])},[t("div",_t,[f(E,{href:s.route("dashboard"),active:s.route().current("dashboard")},{default:l(()=>e[16]||(e[16]=[v(" Dashboard ")])),_:1,__:[16]},8,["href","active"]),k($)?(i(),S(E,{key:0,href:s.route("clients.index"),active:s.route().current("clients.index")},{default:l(()=>e[17]||(e[17]=[v(" Clients ")])),_:1,__:[17]},8,["href","active"])):_("",!0),k(b)?(i(),S(E,{key:1,href:s.route("projects.index"),active:s.route().current("projects.index")},{default:l(()=>e[18]||(e[18]=[v(" Projects ")])),_:1,__:[18]},8,["href","active"])):_("",!0),k(m)?(i(),S(E,{key:2,href:s.route("users.index"),active:s.route().current("users.index")},{default:l(()=>e[19]||(e[19]=[v(" Users ")])),_:1,__:[19]},8,["href","active"])):_("",!0),k(o)?(i(),S(E,{key:3,href:s.route("emails.compose"),active:s.route().current("emails.compose")},{default:l(()=>e[20]||(e[20]=[v(" Compose Email ")])),_:1,__:[20]},8,["href","active"])):_("",!0),k(u)?(i(),S(E,{key:4,href:s.route("emails.pending"),active:s.route().current("emails.pending")},{default:l(()=>e[21]||(e[21]=[v(" Approve Emails ")])),_:1,__:[21]},8,["href","active"])):_("",!0),k(o)?(i(),S(E,{key:5,href:s.route("emails.rejected"),active:s.route().current("emails.rejected")},{default:l(()=>e[22]||(e[22]=[v(" Rejected Emails ")])),_:1,__:[22]},8,["href","active"])):_("",!0),f(E,{href:s.route("availability.index"),active:s.route().current("availability.index")},{default:l(()=>e[23]||(e[23]=[v(" Weekly Availability ")])),_:1,__:[23]},8,["href","active"]),k(y)?(i(),w("div",wt,[e[26]||(e[26]=t("div",{class:"px-4 font-medium text-base text-gray-800"},"Admin",-1)),f(E,{href:s.route("admin.roles.index"),active:s.route().current("admin.roles.index")},{default:l(()=>e[24]||(e[24]=[v(" Manage Roles ")])),_:1,__:[24]},8,["href","active"]),f(E,{href:s.route("admin.permissions.index"),active:s.route().current("admin.permissions.index")},{default:l(()=>e[25]||(e[25]=[v(" Manage Permissions ")])),_:1,__:[25]},8,["href","active"])])):_("",!0)]),t("div",xt,[t("div",kt,[t("div",St,B(c.value.name),1),t("div",$t,B(c.value.email),1),t("div",At,B((r=c.value.role_data)==null?void 0:r.name),1)]),t("div",Ct,[f(E,{href:s.route("profile.edit")},{default:l(()=>e[27]||(e[27]=[v(" Profile ")])),_:1,__:[27]},8,["href"]),f(E,{href:s.route("logout"),method:"post",as:"button",onSuccess:x,onError:A},{default:l(()=>e[28]||(e[28]=[v(" Log Out ")])),_:1,__:[28]},8,["href"])])])],2)]),s.$slots.header?(i(),w("header",Dt,[t("div",Mt,[W(s.$slots,"header")])])):_("",!0),t("main",null,[W(s.$slots,"default")])])])}}};export{Pt as _,et as a,Vt as e,Bt as s};
