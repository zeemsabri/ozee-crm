import{r as M,l as W,Q as Ke,b as be,d as Xe,c as i,k as _,o as a,F as Z,i as oe,a as e,t as G,u as N,R as Gt,S as ia,U as jt,V as Pt,n as O,s as fe,m as re,q as D,w as h,g as k,e as n,f as L,v as ne,G as We,W as Qe,p as Se,z as Oe,y as Et,D as Ge,H as qe,A as dt,N as Be,M as ke,X as He,Y as At,L as Ae,B as we,Z as je,_ as na,$ as Vt,a0 as ct,E as et,a1 as ra,a2 as ua,a3 as ot,P as da,a4 as _e,a5 as it,I as It,a6 as ca,a7 as ma,a8 as Tt,a9 as Mt,J as va}from"./app-NvjusqzW.js";import{_ as ce}from"./PrimaryButton-DyMJ23zT.js";import{_ as Pe}from"./Modal-WfuBHZw-.js";import{_ as q}from"./InputLabel-B-JvZrPi.js";import{_ as X}from"./InputError-C86gSAlz.js";import{_ as De}from"./SecondaryButton-BVXB-fHo.js";import{r as pa}from"./index-BS9jytds.js";import{B as Ne}from"./BaseFormModal-BZDOdKaG.js";import{_ as pe}from"./TextInput-DQ5o7k5N.js";import{S as ge}from"./SelectDropdown-D8hFvJSz.js";import{d as fa}from"./debounce-C-hnF4Z3.js";import{_ as tt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{R as Bt}from"./RightSidebar-DHBV3G6o.js";import{A as ga}from"./ApplicationLogo-CZE5GbwZ.js";import{_ as Ze}from"./MultiSelectDropdown-C-Vnog0G.js";import{c as mt}from"./createLucideIcon-BMutPSMD.js";import{P as nt}from"./plus-CF8K5TQq.js";import{D as vt}from"./DangerButton-BC4GbFUV.js";import{h as ba}from"./moment-BLMuvzoS.js";import{g as ya,_ as ha,s as xa,p as ka,r as wa,u as _a,c as Aa,a as Ta,d as Ma,b as Ca}from"./taskState-BHp-2wa2.js";import{_ as $a,c as Sa}from"./NoticeboardModal-B4hKXa1i.js";import{C as Ga,X as Ct}from"./x-DJm6jnpc.js";const ja={key:0,class:"fixed bottom-4 right-4 z-50 flex flex-col items-end space-y-2"},Pa={key:0,class:"notification-list w-full max-w-xs space-y-2"},Ea={class:"flex-1 min-w-0"},Va={class:"flex items-start justify-between gap-2 mb-1"},Ia={class:"flex-1 min-w-0"},Ba={key:0,class:"text-base font-semibold text-gray-800 truncate"},Da={key:1,class:"text-xs text-gray-500"},Na={key:0,class:"text-xs text-gray-600 mb-2"},Ua={class:"flex items-center justify-between mt-2"},La={key:0,class:"text-xs text-gray-500 font-medium"},za=["onClick"],Ra={key:1,class:"flex justify-end w-full max-w-xs"},Fa={key:0},Oa={key:1},$e="notification_minimized_state",qa=3,Ha={__name:"PushNotificationContainer",props:{sidebarIsOpen:{type:Boolean,default:!1}},setup(b){const A=M(!1),v=M(null),s=M(0),t=M(null),p=W(()=>Ke.value.notifications.filter(l=>l.isNewPush).slice(0,qa)),c=W(()=>{const l=Math.floor(s.value/60),u=s.value%60;return`${String(l).padStart(2,"0")}:${String(u).padStart(2,"0")}`}),y=l=>{if(!l)return null;const u=l.match(/\/task\/(\d+)/);return u?parseInt(u[1]):null},d=l=>{if(!l)return null;const u=l.match(/\/project\/(\d+)\//);return u?parseInt(u[1]):null},r=()=>{if(A.value=!A.value,clearTimeout(v.value),clearInterval(t.value),A.value){const l=Date.now()+3e5;localStorage.setItem($e,JSON.stringify({isMinimized:!0,expiryTime:l})),v.value=setTimeout(()=>{A.value=!1,clearInterval(t.value),localStorage.removeItem($e)},3e5),s.value=300,t.value=setInterval(()=>{s.value>0?s.value--:clearInterval(t.value)},1e3)}else localStorage.removeItem($e)},o=async l=>{ia(l.id),await jt(l.view_id);const u=l.task_id||y(l.url),m=l.project_id||d(l.url);u&&m?Pt(u,m):(console.warn("Could not open task sidebar. Falling back to redirecting."),l.url&&(window.location.href=l.url))};return be(()=>{const l=localStorage.getItem($e);if(l)try{const{isMinimized:u,expiryTime:m}=JSON.parse(l),C=Date.now(),g=m-C;g>0?(A.value=u,s.value=Math.floor(g/1e3),v.value=setTimeout(()=>{A.value=!1,clearInterval(t.value),localStorage.removeItem($e)},g),t.value=setInterval(()=>{s.value>0?s.value--:clearInterval(t.value)},1e3)):localStorage.removeItem($e)}catch(u){console.error("Error restoring notification minimized state:",u),localStorage.removeItem($e)}}),Xe(()=>{clearTimeout(v.value),clearInterval(t.value)}),(l,u)=>b.sidebarIsOpen?_("",!0):(a(),i("div",ja,[!A.value&&p.value.length>0?(a(),i("div",Pa,[(a(!0),i(Z,null,oe(p.value,m=>(a(),i("div",{key:m.id,class:"bg-white rounded-lg shadow-lg p-3 flex items-start space-x-3 border border-gray-200 transition-opacity duration-300 opacity-60 hover:opacity-100"},[e("div",Ea,[e("div",Va,[e("div",Ia,[m.title?(a(),i("h3",Ba,G(m.title),1)):_("",!0),m.project_name?(a(),i("p",Da,G(m.project_name),1)):_("",!0)])]),m.message?(a(),i("p",Na,G(m.message),1)):_("",!0),e("div",Ua,[m.due_date?(a(),i("div",La," Due: "+G(N(Gt)(m.due_date)),1)):_("",!0),e("button",{onClick:C=>o(m),class:"px-2.5 py-1 bg-blue-600 text-white text-xs font-medium rounded-md hover:bg-blue-700 transition-colors duration-200 shadow"},G(m.button_label||"View"),9,za)])])]))),128))])):_("",!0),p.value.length>0?(a(),i("div",Ra,[e("button",{onClick:r,class:"bg-white/80 backdrop-blur-sm text-gray-600 hover:text-gray-900 text-xs font-bold py-1 px-3 rounded-full shadow-md transition-all duration-300"},[A.value?(a(),i("span",Fa,"Show ("+G(c.value)+")",1)):(a(),i("span",Oa,"Minimize"))])])):_("",!0)]))}},Ka={class:"fixed top-4 right-4 z-[9999] flex flex-col items-end space-y-3"},Wa={class:"p-4"},Ja={class:"text-sm font-medium text-white"},Ya={key:0,class:"mt-3 flex gap-2"},Qa=["onClick"],Za=["onClick"],Xa={__name:"StandardNotificationContainer",setup(b,{expose:A}){const v=M([]),s=(d,r="info",o=5e3)=>{let l;typeof d=="object"&&d!==null?l={...d}:l={message:d,type:r,duration:o};const u=l.id||crypto.randomUUID(),m={id:u,message:l.message||"",type:l.type||"info",duration:typeof l.duration=="number"?l.duration:5e3,sticky:!!l.sticky,confirm:l.confirm||null};return v.value.unshift(m),!m.sticky&&!m.confirm&&setTimeout(()=>{t(u)},m.duration),u},t=d=>{const r=v.value.findIndex(o=>o.id===d);r>-1&&v.value.splice(r,1)},p=d=>{const r=v.value.find(o=>o.id===d);if(r&&r.confirm&&typeof r.confirm.onConfirm=="function")try{r.confirm.onConfirm()}catch{}t(d)},c=d=>{const r=v.value.find(o=>o.id===d);if(r&&r.confirm&&typeof r.confirm.onCancel=="function")try{r.confirm.onCancel()}catch{}t(d)},y=d=>{switch(d){case"success":return"bg-green-500";case"error":return"bg-red-500";case"warning":return"bg-yellow-500";case"info":default:return"bg-blue-500"}};return A({addNotification:s}),(d,r)=>(a(),i("div",Ka,[(a(!0),i(Z,null,oe(v.value,o=>(a(),i("div",{key:o.id,class:O(["w-full max-w-sm rounded-md shadow-lg pointer-events-auto overflow-hidden",y(o.type)])},[e("div",Wa,[e("p",Ja,G(o.message),1),o.confirm?(a(),i("div",Ya,[e("button",{class:"px-3 py-1 text-sm font-semibold rounded bg-white/90 text-slate-800 hover:bg-white",onClick:l=>p(o.id)},G(o.confirm.confirmText||"Confirm"),9,Qa),e("button",{class:"px-3 py-1 text-sm font-semibold rounded bg-transparent border border-white/70 text-white hover:bg-white/10",onClick:l=>c(o.id)},G(o.confirm.cancelText||"Cancel"),9,Za)])):_("",!0)])],2))),128))]))}};var Ye={exports:{}},el=Ye.exports,$t;function tl(){return $t||($t=1,function(b,A){(function(s,t){b.exports=t(pa())})(el,v=>(()=>{var s={113:(P,I)=>{Object.defineProperty(I,"__esModule",{value:!0}),I.default=(K,B)=>{const $=K.__vccOpts||K;for(const[Q,ie]of B)$[Q]=ie;return $}},594:P=>{P.exports=v}},t={};function p(P){var I=t[P];if(I!==void 0)return I.exports;var K=t[P]={exports:{}};return s[P](K,K.exports,p),K.exports}p.d=(P,I)=>{for(var K in I)p.o(I,K)&&!p.o(P,K)&&Object.defineProperty(P,K,{enumerable:!0,get:I[K]})},p.o=(P,I)=>Object.prototype.hasOwnProperty.call(P,I),p.r=P=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(P,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(P,"__esModule",{value:!0})};var c={};p.r(c),p.d(c,{ToastComponent:()=>j,ToastPlugin:()=>R,ToastPositions:()=>m,default:()=>H,useToast:()=>z});var y=p(594);const d=["innerHTML"];function r(P,I,K,B,$,Q){return(0,y.openBlock)(),(0,y.createBlock)(y.Transition,{"enter-active-class":P.transition.enter,"leave-active-class":P.transition.leave},{default:(0,y.withCtx)(()=>[(0,y.withDirectives)((0,y.createElementVNode)("div",{ref:"root",role:"alert",class:(0,y.normalizeClass)(["v-toast__item",[`v-toast__item--${P.type}`,`v-toast__item--${P.position}`]]),onMouseover:I[0]||(I[0]=ie=>P.toggleTimer(!0)),onMouseleave:I[1]||(I[1]=ie=>P.toggleTimer(!1)),onClick:I[2]||(I[2]=function(){return P.whenClicked&&P.whenClicked(...arguments)})},[I[3]||(I[3]=(0,y.createElementVNode)("div",{class:"v-toast__icon"},null,-1)),(0,y.createElementVNode)("p",{class:"v-toast__text",innerHTML:P.message},null,8,d)],34),[[y.vShow,P.isActive]])]),_:1},8,["enter-active-class","leave-active-class"])}function o(P){var I;typeof P.remove<"u"?P.remove():(I=P.parentNode)==null||I.removeChild(P)}function l(P,I,K){let B=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const $=(0,y.h)(P,I,B),Q=document.createElement("div");return Q.classList.add("v-toast--pending"),K.appendChild(Q),(0,y.render)($,Q),$.component}class u{constructor(I,K){this.startedAt=Date.now(),this.callback=I,this.delay=K,this.timer=setTimeout(I,K)}pause(){this.stop(),this.delay-=Date.now()-this.startedAt}resume(){this.stop(),this.startedAt=Date.now(),this.timer=setTimeout(this.callback,this.delay)}stop(){clearTimeout(this.timer)}}const m=Object.freeze({TOP_RIGHT:"top-right",TOP:"top",TOP_LEFT:"top-left",BOTTOM_RIGHT:"bottom-right",BOTTOM:"bottom",BOTTOM_LEFT:"bottom-left"});function C(P){return{all:P=P||new Map,on:function(I,K){var B=P.get(I);B?B.push(K):P.set(I,[K])},off:function(I,K){var B=P.get(I);B&&(K?B.splice(B.indexOf(K)>>>0,1):P.set(I,[]))},emit:function(I,K){var B=P.get(I);B&&B.slice().map(function($){$(K)}),(B=P.get("*"))&&B.slice().map(function($){$(I,K)})}}}const V=C(),E=(0,y.defineComponent)({name:"Toast",props:{message:{type:String,required:!0},type:{type:String,default:"success"},position:{type:String,default:m.BOTTOM_RIGHT,validator(P){return Object.values(m).includes(P)}},duration:{type:Number,default:3e3},dismissible:{type:Boolean,default:!0},onDismiss:{type:Function,default:()=>{}},onClick:{type:Function,default:()=>{}},queue:Boolean,pauseOnHover:{type:Boolean,default:!0}},data(){return{isActive:!1,parentTop:null,parentBottom:null,isHovered:!1}},beforeMount(){this.setupContainer()},mounted(){this.showNotice(),V.on("toast-clear",this.dismiss)},methods:{setupContainer(){if(this.parentTop=document.querySelector(".v-toast.v-toast--top"),this.parentBottom=document.querySelector(".v-toast.v-toast--bottom"),this.parentTop&&this.parentBottom)return;this.parentTop||(this.parentTop=document.createElement("div"),this.parentTop.className="v-toast v-toast--top"),this.parentBottom||(this.parentBottom=document.createElement("div"),this.parentBottom.className="v-toast v-toast--bottom");const P=document.body;P.appendChild(this.parentTop),P.appendChild(this.parentBottom)},shouldQueue(){return this.queue?this.parentTop.childElementCount>0||this.parentBottom.childElementCount>0:!1},dismiss(){this.timer&&this.timer.stop(),clearTimeout(this.queueTimer),this.isActive=!1,setTimeout(()=>{this.onDismiss.apply(null,arguments);const P=this.$refs.root;(0,y.render)(null,P),o(P)},150)},showNotice(){if(this.shouldQueue()){this.queueTimer=setTimeout(this.showNotice,250);return}const P=this.$refs.root.parentElement;this.correctParent.insertAdjacentElement("afterbegin",this.$refs.root),o(P),this.isActive=!0,this.duration&&(this.timer=new u(this.dismiss,this.duration))},whenClicked(){this.dismissible&&(this.onClick.apply(null,arguments),this.dismiss())},toggleTimer(P){!this.pauseOnHover||!this.timer||(P?this.timer.pause():this.timer.resume())}},computed:{correctParent(){switch(this.position){case m.TOP:case m.TOP_RIGHT:case m.TOP_LEFT:return this.parentTop;case m.BOTTOM:case m.BOTTOM_RIGHT:case m.BOTTOM_LEFT:return this.parentBottom}},transition(){switch(this.position){case m.TOP:case m.TOP_RIGHT:case m.TOP_LEFT:return{enter:"v-toast--fade-in-down",leave:"v-toast--fade-out"};case m.BOTTOM:case m.BOTTOM_RIGHT:case m.BOTTOM_LEFT:return{enter:"v-toast--fade-in-up",leave:"v-toast--fade-out"}}}},beforeUnmount(){V.off("toast-clear",this.dismiss)}});var T=p(113);const j=(0,T.default)(E,[["render",r]]),z=function(){let P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{open(I){let K=null;typeof I=="string"&&(K=I);const $=Object.assign({},{message:K},P,I);return{dismiss:l(j,$,document.body).ctx.dismiss}},clear(){V.emit("toast-clear")},success(I){let K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.open(Object.assign({},{message:I,type:"success"},K))},error(I){let K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.open(Object.assign({},{message:I,type:"error"},K))},info(I){let K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.open(Object.assign({},{message:I,type:"info"},K))},warning(I){let K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.open(Object.assign({},{message:I,type:"warning"},K))},default(I){let K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.open(Object.assign({},{message:I,type:"default"},K))}}},R={install:function(P){let I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},K=z(I);P.config.globalProperties.$toast=K,P.provide("$toast",K)}},H=R;return c})())}(Ye)),Ye.exports}var al=tl();const ll={class:"p-8"},sl={class:"mt-2 text-sm text-gray-600"},ol={key:0,class:"mt-6 p-4 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 rounded-lg"},il={class:"mt-4"},nl={class:"mt-6 grid grid-cols-1 lg:grid-cols-3 gap-6"},rl={class:"lg:col-span-1 space-y-3"},ul=["onClick"],dl={class:"flex items-center justify-between"},cl={class:"flex items-center"},ml={class:"ml-2 text-sm text-gray-500"},vl={key:0},pl={key:1},fl={key:1,class:"text-xs text-gray-400"},gl={key:0,class:"lg:col-span-2 p-6 bg-gray-50 rounded-xl shadow-inner"},bl={class:"text-xl font-semibold text-gray-800 mb-4"},yl={class:"mb-4 text-sm text-right"},hl=["disabled"],xl={class:"flex items-center justify-between mb-6 p-4 rounded-lg bg-white shadow-sm border border-gray-200"},kl={class:"relative inline-flex items-center cursor-pointer"},wl=["checked"],_l={key:0},Al={class:"flex-1"},Tl=["onUpdate:modelValue"],Ml={class:"flex-1"},Cl=["onUpdate:modelValue"],$l=["onClick"],Sl={key:1},Gl={key:1,class:"lg:col-span-2 p-6 bg-gray-50 rounded-xl shadow-inner flex items-center justify-center"},jl={class:"px-6 py-4 bg-gray-50 border-t flex justify-end gap-3"},Pl={key:0,class:"flex items-center"},El={key:1},Vl={__name:"AvailabilityModal",props:{show:Boolean,userId:{type:Number,default:null}},emits:["close","availability-saved"],setup(b,{emit:A}){const v=()=>{const B=localStorage.getItem("authToken");B&&!fe.defaults.headers.common.Authorization&&(fe.defaults.headers.common.Authorization=`Bearer ${B}`)},s=b,t=A,p=al.useToast(),c=M({}),y=M({}),d=M(!1),r=M(null),o=M(""),l=M(!1),u=M([]),m=()=>{const B=[],$=new Date,Q=$.getDay(),ie=Q===0?1:8-Q,ee=new Date($);ee.setDate($.getDate()+ie);for(let le=0;le<7;le++){const J=new Date(ee);J.setDate(ee.getDate()+le);const se=J.toISOString().split("T")[0];B.push({value:se,label:J.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"}),day:J.toLocaleDateString("en-US",{weekday:"short"})})}return B},C=()=>{const B=[],$=new Date,Q=$.getDay(),ie=new Date($);ie.setDate($.getDate()-(Q===0?6:Q-1));for(let ee=0;ee<7;ee++){const le=new Date(ie);le.setDate(ie.getDate()+ee);const J=le.toISOString().split("T")[0];B.push({value:J,label:le.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"}),day:le.toLocaleDateString("en-US",{weekday:"short"})})}return B},g=()=>{l.value=!0,o.value="",u.value=C(),r.value=null,E()},V=()=>{l.value=!1,o.value="",u.value=m(),r.value=null,E()};be(()=>{v(),u.value=m(),E()});const E=async()=>{try{if(v(),u.value.length===0)return;const B=u.value[0].value,$=u.value[u.value.length-1].value,Q=await fe.get("/api/availabilities",{params:{start_date:B,end_date:$,user_id:s.userId}});if(Q.data&&Q.data.availabilities){const ie={};u.value.forEach(ee=>{ie[ee.value]={isSelected:!1,isAvailable:!0,reason:"",timeSlots:[{start_time:"",end_time:""}]}}),c.value=ie,Q.data.availabilities.forEach(ee=>{const le=ee.date.split("T")[0];c.value[le]&&(c.value[le].isAvailable=ee.is_available,ee.is_available?c.value[le].timeSlots=ee.time_slots&&ee.time_slots.length>0?[...ee.time_slots]:[{start_time:"",end_time:""}]:c.value[le].reason=ee.reason||"")})}}catch(B){console.error("Error fetching existing availabilities:",B)}};re(()=>s.show,async B=>{if(B){y.value={},o.value="";try{v();const{data:$}=await fe.get("/api/availability-prompt");!($.all_current_weekdays_covered??!0)?(l.value=!0,u.value=C()):(l.value=!1,u.value=m())}catch{l.value=!1,u.value=m()}await E(),r.value=null}else r.value=null},{immediate:!0});const T=W(()=>c.value[r.value]||{isSelected:!1,isAvailable:!0,reason:"",timeSlots:[{start_time:"",end_time:""}]}),w=W(()=>Object.values(c.value).some(B=>B.isSelected)),j=W(()=>{const B=c.value[r.value];return B?B.isAvailable?B.timeSlots.some($=>$.start_time&&$.end_time):B.reason.trim().split(/\s+/).filter(Boolean).length>=2:!1}),z=B=>{r.value=B},R=()=>{var $;const B=($=c.value[r.value])==null?void 0:$.timeSlots;B&&(B.push({start_time:"",end_time:""}),c.value[r.value].isSelected=!0)},H=B=>{var Q;const $=(Q=c.value[r.value])==null?void 0:Q.timeSlots;$&&$.length>1&&($.splice(B,1),c.value[r.value].isSelected=!0)},P=B=>{c.value[r.value]&&(c.value[r.value].isAvailable=B,c.value[r.value].isSelected=!0,B?c.value[r.value].reason="":c.value[r.value].timeSlots=[{start_time:"",end_time:""}])},I=()=>{const B=c.value[r.value];if(B){if(!j.value){B.isAvailable?y.value[r.value]={timeSlots:"Please fill in at least one time slot before applying to all days."}:y.value[r.value]={reason:"Reason must be at least 2 words to apply to all days."};return}delete y.value[r.value];for(const $ of u.value){const Q=$.value;c.value[Q]=JSON.parse(JSON.stringify(B)),c.value[Q].isSelected=!0}p.success("Availability applied to all days!")}},K=async()=>{if(d.value=!0,y.value={},l.value&&!o.value.trim()){y.value.lateReason="Please provide a reason for this late submission.",d.value=!1;return}const B=[];let $=!1;for(const Q of u.value){const ie=Q.value,ee=c.value[ie];let le={};if(ee.isSelected){if(ee.isAvailable)if(ee.timeSlots.some(J=>!J.start_time||!J.end_time))le.timeSlots="Please fill in all time slots.",$=!0;else for(const J of ee.timeSlots){const se=J.start_time.split(":").map(Number),de=J.end_time.split(":").map(Number);if(se[0]*60+se[1]>=de[0]*60+de[1]){le.timeSlots="End time must be after start time.",$=!0;break}}else ee.reason.trim()||(le.reason="Please provide a reason for unavailability.",$=!0);Object.keys(le).length>0&&(y.value[ie]=le),Object.keys(le).length===0&&B.push({date:ie,is_available:ee.isAvailable,reason:ee.isAvailable?null:ee.reason,time_slots:ee.isAvailable?ee.timeSlots:null})}}if(B.length===0&&!$){y.value.general="Please select and set availability for at least one day.",d.value=!1;return}if($){d.value=!1;return}try{v();const Q={availabilities:B,reason_for_late_submission:l.value?o.value:null};await fe.post("/api/availabilities/batch",Q),p.success("Availability saved successfully!"),t("availability-saved"),t("close")}catch(Q){console.error("Error saving availability:",Q),p.error("An error occurred while saving your availability.")}finally{d.value=!1}};return(B,$)=>(a(),D(Pe,{show:b.show,onClose:$[7]||($[7]=Q=>B.$emit("close")),"max-width":"4xl",closeable:""},{default:h(()=>{var Q,ie,ee,le;return[e("div",ll,[$[18]||($[18]=e("h2",{class:"text-2xl font-bold text-gray-900"}," Set Your Weekly Availability ",-1)),e("p",sl,[$[8]||($[8]=k(" Select a day to quickly set your schedule for the upcoming week. ",-1)),l.value?(a(),i("span",{key:1,class:"text-indigo-600 hover:text-indigo-800 transition duration-150 ease-in-out cursor-pointer",onClick:V}," Go back to next week. ")):(a(),i("span",{key:0,class:"text-indigo-600 hover:text-indigo-800 transition duration-150 ease-in-out cursor-pointer",onClick:g}," Missed the deadline? Submit for this week. "))]),l.value?(a(),i("div",ol,[$[9]||($[9]=e("div",{class:"flex items-center"},[e("svg",{class:"h-5 w-5 text-yellow-500 mr-2",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.344a1.5 1.5 0 012.486 0l5.446 9.176A1.5 1.5 0 0114.246 15H5.754a1.5 1.5 0 01-1.238-2.48zM9 11a1 1 0 102 0V7a1 1 0 10-2 0v4zm1-3a1 1 0 100 2h.01a1 1 0 100-2H10z","clip-rule":"evenodd"})]),e("p",{class:"font-semibold"},"Late Submission for Current Week")],-1)),$[10]||($[10]=e("p",{class:"mt-2 text-sm"}," Please provide a reason for submitting late. We acknowledge that availability submissions are due by Thursday evening. ",-1)),e("div",il,[n(q,{value:"Reason for late submission"}),L(e("textarea",{"onUpdate:modelValue":$[0]||($[0]=J=>o.value=J),rows:"2",class:"mt-1 block w-full rounded-md border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 shadow-sm",placeholder:"e.g., I was out sick, I forgot, I had no access to the system"},null,512),[[ne,o.value]]),n(X,{message:y.value.lateReason,class:"mt-2"},null,8,["message"])])])):_("",!0),e("div",nl,[e("div",rl,[(a(!0),i(Z,null,oe(u.value,J=>{var se,de,Te,Me,Ee;return a(),i("div",{key:J.value,class:O(["p-4 rounded-xl border cursor-pointer transition-all duration-200 ease-in-out",{"bg-indigo-50 border-indigo-500 shadow-lg":r.value===J.value,"bg-white border-gray-200 hover:border-indigo-400 hover:shadow-md":r.value!==J.value,"border-red-400 bg-red-50":y.value[J.value],"opacity-70":J.isPast}]),onClick:ye=>z(J.value)},[e("div",dl,[e("div",cl,[e("div",{class:O(["text-lg font-bold",{"text-indigo-600":r.value===J.value,"text-gray-800":r.value!==J.value}])},G(J.day),3),e("div",ml,G(J.label.split(", ")[1]),1)]),(de=(se=c.value[J.value])==null?void 0:se.timeSlots[0])!=null&&de.start_time&&((Me=(Te=c.value[J.value])==null?void 0:Te.timeSlots[0])!=null&&Me.end_time)||(Ee=c.value[J.value])!=null&&Ee.reason?(a(),i("span",{key:0,class:O(["inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium",{"bg-emerald-100 text-emerald-800":c.value[J.value].isAvailable,"bg-amber-100 text-amber-800":!c.value[J.value].isAvailable}])},[c.value[J.value].isAvailable?(a(),i("span",vl,"Available")):(a(),i("span",pl,"Unavailable"))],2)):(a(),i("span",fl," Not Set "))])],10,ul)}),128))]),r.value?(a(),i("div",gl,[e("h3",bl," Availability for "+G((Q=u.value.find(J=>J.value===r.value))==null?void 0:Q.label),1),e("div",yl,[e("button",{type:"button",onClick:I,disabled:!j.value,class:O([{"opacity-50 cursor-not-allowed":!j.value},"text-indigo-600 hover:text-indigo-800 transition duration-150 ease-in-out"])},$[11]||($[11]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 inline mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{d:"M7 9a2 2 0 012-2h6a2 2 0 012 2v6a2 2 0 01-2 2H9a2 2 0 01-2-2V9z"}),e("path",{d:"M5 3a2 2 0 00-2 2v6a2 2 0 002 2V5h8a2 2 0 00-2-2H5z"})],-1),k(" Apply to all days ",-1)]),10,hl)]),e("div",xl,[$[13]||($[13]=e("span",{class:"text-sm font-medium text-gray-700"},"I am available on this day",-1)),e("label",kl,[e("input",{type:"checkbox",checked:T.value.isAvailable,onChange:$[1]||($[1]=J=>P(J.target.checked)),class:"sr-only peer"},null,40,wl),$[12]||($[12]=e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"},null,-1))])]),n(X,{message:(ie=y.value[r.value])==null?void 0:ie.general,class:"mt-2"},null,8,["message"]),T.value.isAvailable?(a(),i("div",_l,[n(q,{value:"Available Time Slots",class:"text-gray-800 mb-2"}),n(X,{message:(ee=y.value[r.value])==null?void 0:ee.timeSlots,class:"mt-2 mb-4"},null,8,["message"]),(a(!0),i(Z,null,oe(T.value.timeSlots,(J,se)=>(a(),i("div",{key:se,class:"flex items-center space-x-2 mb-4"},[e("div",Al,[L(e("input",{type:"time","onUpdate:modelValue":de=>c.value[r.value].timeSlots[se].start_time=de,onChange:$[2]||($[2]=de=>c.value[r.value].isSelected=!0),class:"block w-full rounded-md border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 shadow-sm"},null,40,Tl),[[ne,c.value[r.value].timeSlots[se].start_time]])]),$[15]||($[15]=e("span",{class:"text-gray-500"},"-",-1)),e("div",Ml,[L(e("input",{type:"time","onUpdate:modelValue":de=>c.value[r.value].timeSlots[se].end_time=de,onChange:$[3]||($[3]=de=>c.value[r.value].isSelected=!0),class:"block w-full rounded-md border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 shadow-sm"},null,40,Cl),[[ne,c.value[r.value].timeSlots[se].end_time]])]),c.value[r.value].timeSlots.length>1?(a(),i("button",{key:0,type:"button",onClick:de=>H(se),class:"p-2 text-red-600 hover:text-red-800 transition duration-150 ease-in-out"},$[14]||($[14]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm6 0a1 1 0 012 0v6a1 1 0 11-2 0V8z","clip-rule":"evenodd"})],-1)]),8,$l)):_("",!0)]))),128)),e("button",{type:"button",onClick:R,class:"mt-2 w-full flex items-center justify-center px-4 py-2 border border-dashed border-indigo-300 rounded-lg text-indigo-600 hover:bg-indigo-50 transition duration-150 ease-in-out"},$[16]||($[16]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z","clip-rule":"evenodd"})],-1),k(" Add Another Time Slot ",-1)]))])):(a(),i("div",Sl,[n(q,{value:"Reason for Not Available",class:"text-gray-800 mb-2"}),L(e("textarea",{"onUpdate:modelValue":$[4]||($[4]=J=>c.value[r.value].reason=J),onInput:$[5]||($[5]=J=>c.value[r.value].isSelected=!0),rows:"3",class:"block w-full rounded-md border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 shadow-sm",placeholder:"e.g., Out of office, Holiday, Meeting all day"},null,544),[[ne,c.value[r.value].reason]]),n(X,{message:(le=y.value[r.value])==null?void 0:le.reason,class:"mt-2"},null,8,["message"])]))])):(a(),i("div",Gl,$[17]||($[17]=[e("p",{class:"text-gray-500 text-lg font-medium"}," Please select a day from the left to set your availability. ",-1)])))])]),e("div",jl,[n(De,{onClick:$[6]||($[6]=J=>B.$emit("close"))},{default:h(()=>$[19]||($[19]=[k(" Cancel ",-1)])),_:1,__:[19]}),n(ce,{onClick:K,disabled:d.value||!w.value,class:O({"opacity-50 cursor-not-allowed":d.value||!w.value})},{default:h(()=>[d.value?(a(),i("span",Pl,$[20]||($[20]=[e("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),k(" Saving... ",-1)]))):(a(),i("span",El,"Save Availability"))]),_:1},8,["disabled","class"])])]}),_:1},8,["show"]))}},Il={key:0,class:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center"},Bl={class:"bg-white rounded-lg shadow-xl p-6 max-w-lg w-full mx-4"},Dl={class:"mb-4 text-gray-700"},Nl={class:"flex justify-center"},Ul={__name:"AvailabilityBlocker",setup(b){const A=M(!1),v=M(!0),s=M(!1),t=M(!0),p=M(!0),c=M(!1),y=W(()=>{var g;return((g=We().props.auth.user)==null?void 0:g.id)||null}),d=()=>{const g=localStorage.getItem("authToken");g&&!fe.defaults.headers.common.Authorization&&(fe.defaults.headers.common.Authorization=`Bearer ${g}`)},r=async()=>{v.value=!0;try{d();const{data:g}=await fe.get("/api/availability-prompt");A.value=!!g.should_block_user,t.value=!!g.all_current_weekdays_covered,p.value=!!(g.all_next_weekdays_covered??g.all_weekdays_covered),c.value=!!g.is_friday_onwards,localStorage.setItem("shouldBlockUser",String(A.value)),localStorage.setItem("allCurrentWeekdaysCovered",String(t.value)),localStorage.setItem("allNextWeekdaysCovered",String(p.value)),localStorage.setItem("allWeekdaysCovered",String(p.value));const V=new CustomEvent("availability-status-updated",{detail:{shouldBlockUser:A.value,allCurrentWeekdaysCovered:t.value,allNextWeekdaysCovered:p.value}});window.dispatchEvent(V)}catch(g){console.error("Error checking if user should be blocked:",g),A.value=!1}finally{v.value=!1}},o=()=>{s.value=!0},l=()=>{r()},u=g=>{A.value=!!g.detail.shouldBlockUser,"allCurrentWeekdaysCovered"in g.detail&&(t.value=!!g.detail.allCurrentWeekdaysCovered),"allNextWeekdaysCovered"in g.detail&&(p.value=!!g.detail.allNextWeekdaysCovered)},m=()=>{document.visibilityState==="visible"&&Se(()=>{r()})},C=g=>{["shouldBlockUser","allWeekdaysCovered","allCurrentWeekdaysCovered","allNextWeekdaysCovered"].includes(g.key)&&Se(()=>{r()})};return be(()=>{r(),window.addEventListener("availability-status-updated",u),document.addEventListener("visibilitychange",m),window.addEventListener("storage",C)}),Xe(()=>{window.removeEventListener("availability-status-updated",u),document.removeEventListener("visibilitychange",m),window.removeEventListener("storage",C)}),(g,V)=>A.value&&!v.value?(a(),i("div",Il,[e("div",Bl,[V[2]||(V[2]=Qe('<div class="flex items-center mb-4"><div class="flex-shrink-0 mr-3"><svg class="h-8 w-8 text-red-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg></div><h2 class="text-xl font-bold text-gray-900">Action Required</h2></div>',1)),e("p",Dl,[!t.value&&!p.value?(a(),i(Z,{key:0},[k(" You need to submit your availability for the current week (up to today) and for all weekdays of next week. ")],64)):t.value?(a(),i(Z,{key:2},[k(" You must submit your availability for all weekdays of next week before you can continue using the application. ")],64)):(a(),i(Z,{key:1},[k(" You need to submit your availability for the current week (up to today). ")],64))]),V[3]||(V[3]=e("p",{class:"mb-6 text-gray-600"}," This information is required for planning meetings and work schedules. ",-1)),e("div",Nl,[n(ce,{onClick:o,class:"bg-red-600 hover:bg-red-700"},{default:h(()=>V[1]||(V[1]=[k(" Submit Availability Now ",-1)])),_:1,__:[1]})]),n(Vl,{show:s.value,userId:y.value,onClose:V[0]||(V[0]=E=>s.value=!1),onAvailabilitySaved:l},null,8,["show","userId"])])])):_("",!0)}},Ll={class:"relative"},zl={class:"flex flex-wrap items-center gap-2 mb-2 p-2 border border-gray-300 rounded-lg bg-white min-h-[44px] focus-within:border-indigo-500 focus-within:ring-1 focus-within:ring-indigo-500 transition-all duration-150"},Rl=["onClick"],Fl={key:0,class:"absolute z-20 w-full bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto mt-1 transform-gpu"},Ol=["onClick"],ql={key:1,class:"px-4 py-2 text-sm text-gray-500"},Hl={key:2,class:"px-4 py-2 text-sm text-gray-500"},Kl={__name:"TagInput",props:{modelValue:{type:Array,default:()=>[]},label:{type:String,default:"Tags"},placeholder:{type:String,default:"Add tags..."},error:{type:String,default:""},initialTags:{type:Array,default:()=>[]},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(b,{emit:A}){const v=b,s=A,t=M(""),p=M([]),c=M([]),y=M(!1),d=M(null);function r(){s("update:modelValue",c.value.map(E=>E.id))}re(()=>v.initialTags,E=>{if(c.value=[],E&&E.length>0){const z=[],R=new Set;E.forEach(H=>{R.has(H.id)||(z.push(H),R.add(H.id))}),c.value.push(...z)}const T=E.map(z=>z.id),w=Array.isArray(v.modelValue)?v.modelValue:[];(T.length!==w.length||T.some(z=>!w.includes(z))||w.some(z=>!T.includes(z)))&&r()},{immediate:!0});const o=fa(async E=>{if(E.length<2){p.value=[],y.value=!1;return}try{const T=await fe.get(`/api/tags/search?query=${E}`);p.value=T.data,y.value=!0}catch(T){console.error("Error fetching tags:",T),p.value=[],y.value=!1}},300);re(t,E=>{v.disabled||o(E)});const l=E=>{c.value.some(T=>T.id===E.id)||(c.value.push(E),t.value="",p.value=[],y.value=!1,r()),Se(()=>d.value.focus())},u=()=>{if(v.disabled)return;const E=t.value.trim();if(!E)return;const T=p.value.find(j=>j.name.toLowerCase()===E.toLowerCase()),w=c.value.some(j=>j.name.toLowerCase()===E.toLowerCase());if(T)l(T);else if(w)t.value="",p.value=[],y.value=!1;else{const j={id:`new_${E.replace(/\s+/g,"-").toLowerCase()}_${Date.now()}`,name:E};c.value.push(j),t.value="",p.value=[],y.value=!1,r()}Se(()=>d.value.focus())},m=E=>{v.disabled||(c.value=c.value.filter(T=>T.id!==E.id),r(),Se(()=>d.value.focus()))},C=()=>{v.disabled||t.value===""&&c.value.length>0&&m(c.value[c.value.length-1])},g=W(()=>p.value.filter(E=>!c.value.some(T=>T.id===E.id))),V=E=>{d.value&&!d.value.$el.contains(E.target)&&(y.value=!1,t.value="")};return be(()=>{document.addEventListener("click",V)}),Xe(()=>{document.removeEventListener("click",V)}),(E,T)=>(a(),i("div",Ll,[n(q,{value:b.label,class:"mb-1"},null,8,["value"]),e("div",zl,[(a(!0),i(Z,null,oe(c.value,w=>(a(),i("span",{key:w.id,class:"inline-flex items-center px-3 py-1 text-sm font-medium bg-indigo-100 text-indigo-800 rounded-full shadow-sm"},[k(G(w.name)+" ",1),b.disabled?_("",!0):(a(),i("button",{key:0,type:"button",onClick:j=>m(w),class:"ml-2 -mr-1 text-indigo-500 hover:text-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 rounded-full p-0.5"},T[3]||(T[3]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,Rl))]))),128)),n(pe,{ref_key:"inputRef",ref:d,type:"text",placeholder:c.value.length===0?b.placeholder:"",modelValue:t.value,"onUpdate:modelValue":T[0]||(T[0]=w=>t.value=w),onFocus:T[1]||(T[1]=w=>y.value=!0),onKeydown:[Oe(Et(u,["prevent"]),["enter"]),T[2]||(T[2]=Oe(w=>y.value=!1,["tab"])),Oe(C,["delete"])],class:"flex-grow min-w-[100px] border-none focus:ring-0 shadow-none p-0 bg-transparent text-gray-900",disabled:b.disabled},null,8,["placeholder","modelValue","onKeydown","disabled"])]),y.value&&(g.value.length>0||t.value.length>=2||g.value.length===0&&t.value.length<2)&&!b.disabled?(a(),i("div",Fl,[(a(!0),i(Z,null,oe(g.value,w=>(a(),i("div",{key:w.id,onClick:j=>l(w),class:"px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 cursor-pointer transition-colors duration-100"},G(w.name),9,Ol))),128)),!p.value.some(w=>w.name.toLowerCase()===t.value.toLowerCase())&&t.value.length>=2?(a(),i("div",{key:0,onClick:u,class:"px-4 py-2 text-sm text-indigo-700 bg-indigo-50 hover:bg-indigo-100 cursor-pointer border-t border-indigo-200 font-semibold transition-colors duration-100"},' Add new tag: "'+G(t.value)+'" ',1)):_("",!0),g.value.length===0&&t.value.length<2?(a(),i("div",ql," Type at least 2 characters to search for tags. ")):_("",!0),g.value.length===0&&t.value.length>=2&&!p.value.some(w=>w.name.toLowerCase()===t.value.toLowerCase())?(a(),i("div",Hl,[T[4]||(T[4]=k(" No matching tags found. Press ",-1)),T[5]||(T[5]=e("span",{class:"font-semibold text-indigo-600"},"Enter",-1)),k(' to add "'+G(t.value)+'" as a new tag. ',1)])):_("",!0)])):_("",!0),n(X,{message:b.error,class:"mt-2"},null,8,["message"])]))}},Dt=tt(Kl,[["__scopeId","data-v-4d528a4c"]]),Wl={class:"space-y-4"},Jl="Add New Milestone",Yl="/api/milestones",Ql="post",Zl="Create Milestone",Xl="Milestone created successfully!",es={__name:"MilestoneFormModal",props:{show:Boolean,projectId:Number},emits:["close","saved"],setup(b,{emit:A}){const v=b,s=A,t=Ge({name:"",description:"",completion_date:null,status:"Not Started",project_id:v.projectId}),p=Ge({completion_date:null}),c=["Not Started","In Progress","Completed","Overdue"];re(()=>v.show,o=>{o&&(Object.assign(t,{name:"",description:"",completion_date:null,status:"Not Started",project_id:v.projectId}),p.completion_date=null)},{immediate:!0});const y=()=>(p.completion_date=null,t.completion_date?!0:(p.completion_date=["Completion date is required."],!1)),d=o=>{s("saved",o),s("close")},r=()=>{s("close")};return(o,l)=>(a(),D(Ne,{show:b.show,title:Jl,"api-endpoint":Yl,"http-method":Ql,"form-data":t,"submit-button-text":Zl,"success-message":Xl,"before-submit":y,onClose:r,onSubmitted:d},{default:h(({errors:u})=>[e("div",Wl,[e("div",null,[n(q,{for:"milestone-name",value:"Milestone Name"}),n(pe,{id:"milestone-name",modelValue:t.name,"onUpdate:modelValue":l[0]||(l[0]=m=>t.name=m),type:"text",class:"mt-1 block w-full",placeholder:"Enter milestone name",required:""},null,8,["modelValue"]),n(X,{message:u.name?u.name[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[n(q,{for:"milestone-description",value:"Description"}),L(e("textarea",{id:"milestone-description","onUpdate:modelValue":l[1]||(l[1]=m=>t.description=m),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",rows:"3",placeholder:"Enter milestone description"},null,512),[[ne,t.description]]),n(X,{message:u.description?u.description[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[n(q,{for:"milestone-completion-date",value:"Completion Date"}),n(pe,{id:"milestone-completion-date",modelValue:t.completion_date,"onUpdate:modelValue":l[2]||(l[2]=m=>t.completion_date=m),type:"date",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),n(X,{message:u.completion_date?u.completion_date[0]:p.completion_date?p.completion_date[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[n(q,{for:"milestone-status",value:"Status"}),n(ge,{id:"milestone-status",modelValue:t.status,"onUpdate:modelValue":l[3]||(l[3]=m=>t.status=m),options:c.map(m=>({value:m,label:m})),"value-key":"value","label-key":"label",placeholder:"Select status",class:"mt-1"},null,8,["modelValue","options"]),n(X,{message:u.status?u.status[0]:"",class:"mt-2"},null,8,["message"])])])]),_:1},8,["show","form-data"]))}};function Nt(b,A){return a(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z"})])}const ts={class:"space-y-6 text-sm text-gray-700"},as={class:"flex justify-center bg-gray-100 p-1 rounded-lg mb-4"},ls={class:"border-t pt-4"},ss={class:"space-y-4"},os={class:"flex gap-2"},is={class:"bg-gray-900 text-white p-4 rounded-lg text-center mt-4"},ns={class:"text-4xl font-bold text-indigo-400"},rs={class:"border-t pt-4"},us={class:"space-y-4"},ds=["value"],cs={class:"bg-gray-900 text-white p-4 rounded-lg text-center mt-4"},ms={class:"text-4xl font-bold text-blue-400"},Ut={__name:"EffortEstimationGuide",setup(b){const A=M("developer"),v=M(1),s=M(1),t=W(()=>{if(A.value==="admin"){const r=p.value;return r===1?1:r===2?2:r===3?3:5}const y=v.value*s.value;return[1,2,3,5,8,13].reduce((r,o)=>Math.abs(o-y)<Math.abs(r-y)?o:r)}),p=M(1),c=[{value:1,label:"Quick Task / Reply (< 1 hr)"},{value:2,label:"Routine / Notes (1-2 hrs)"},{value:3,label:"Half Day / Focus (3-4 hrs)"},{value:4,label:"Full Day / Complex (5+ hrs)"}];return(y,d)=>(a(),i("div",ts,[e("div",as,[e("button",{onClick:d[0]||(d[0]=r=>A.value="developer"),class:O(["flex-1 py-1 text-xs font-semibold rounded-md transition-colors",A.value==="developer"?"bg-white text-indigo-600 shadow-sm":"text-gray-500 hover:text-gray-700"])}," Developer ",2),e("button",{onClick:d[1]||(d[1]=r=>A.value="admin"),class:O(["flex-1 py-1 text-xs font-semibold rounded-md transition-colors",A.value==="admin"?"bg-white text-indigo-600 shadow-sm":"text-gray-500 hover:text-gray-700"])}," Admin / Staff ",2)]),A.value==="developer"?(a(),i(Z,{key:0},[d[12]||(d[12]=Qe('<section><h4 class="font-bold text-gray-900 text-lg mb-2">What are Story Points?</h4><p class="mb-2">Story points estimate the <span class="font-semibold">effort</span> required to implement a task. They consider:</p><ul class="list-disc pl-5 space-y-1"><li><span class="font-semibold">Complexity:</span> How difficult is the logic?</li><li><span class="font-semibold">Risk:</span> How much uncertainty is there?</li><li><span class="font-semibold">Repetition:</span> How tedious is the work?</li></ul></section><section class="bg-indigo-50 p-4 rounded-lg border border-indigo-100"><h4 class="font-bold text-indigo-900 text-md mb-3">Quick Reference</h4><div class="grid grid-cols-1 gap-3"><div class="flex gap-3 items-start border-b border-indigo-200 pb-2"><span class="bg-indigo-600 text-white font-bold w-8 h-8 flex items-center justify-center rounded-full shrink-0">1</span><div><span class="font-bold block text-indigo-900">Tiny / Trivial</span><span class="text-xs">Typo fix, color change, simple config. &lt; 1 hour.</span></div></div><div class="flex gap-3 items-start border-b border-indigo-200 pb-2"><span class="bg-indigo-600 text-white font-bold w-8 h-8 flex items-center justify-center rounded-full shrink-0">2</span><div><span class="font-bold block text-indigo-900">Small / Routine</span><span class="text-xs">Add field, update text, standard bug fix. 1-4 hours.</span></div></div><div class="flex gap-3 items-start border-b border-indigo-200 pb-2"><span class="bg-indigo-600 text-white font-bold w-8 h-8 flex items-center justify-center rounded-full shrink-0">3</span><div><span class="font-bold block text-indigo-900">Medium</span><span class="text-xs">New simple feature, standard page dev, component logic. 4-8 hours (1 day).</span></div></div><div class="flex gap-3 items-start border-b border-indigo-200 pb-2"><span class="bg-indigo-600 text-white font-bold w-8 h-8 flex items-center justify-center rounded-full shrink-0">5</span><div><span class="font-bold block text-indigo-900">Large</span><span class="text-xs">Complex feature, integration, heavy logic. 2-3 days.</span></div></div><div class="flex gap-3 items-start"><span class="bg-yellow-600 text-white font-bold w-8 h-8 flex items-center justify-center rounded-full shrink-0">8+</span><div><span class="font-bold block text-yellow-900">Ex-Large (Break Down!)</span><span class="text-xs">Full module, major refactor. Consider splitting into smaller subtasks. 3-5+ days.</span></div></div></div></section>',2)),e("section",ls,[d[11]||(d[11]=e("h4",{class:"font-bold text-gray-900 text-md mb-3"},"Estimation Calculator",-1)),e("div",ss,[e("div",null,[d[7]||(d[7]=e("label",{class:"block text-xs font-semibold text-gray-600 mb-1"},"Difficulty (1-5)",-1)),L(e("input",{type:"range",min:"1",max:"5","onUpdate:modelValue":d[2]||(d[2]=r=>v.value=r),class:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"},null,512),[[ne,v.value,void 0,{number:!0}]]),d[8]||(d[8]=e("div",{class:"flex justify-between text-xs text-gray-500 mt-1"},[e("span",null,"Easy"),e("span",null,"Expert")],-1))]),e("div",null,[d[9]||(d[9]=e("label",{class:"block text-xs font-semibold text-gray-600 mb-1"},"Scope/Uncertainty (1-3)",-1)),e("div",os,[e("button",{onClick:d[3]||(d[3]=r=>s.value=1),class:O([s.value===1?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700","flex-1 py-1 rounded text-xs"])},"Clear",2),e("button",{onClick:d[4]||(d[4]=r=>s.value=2),class:O([s.value===2?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700","flex-1 py-1 rounded text-xs"])},"Vague",2),e("button",{onClick:d[5]||(d[5]=r=>s.value=3),class:O([s.value===3?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700","flex-1 py-1 rounded text-xs"])},"Unknown",2)])]),e("div",is,[d[10]||(d[10]=e("div",{class:"text-xs uppercase tracking-wide text-gray-400"},"Suggested Points",-1)),e("div",ns,G(t.value),1)])])])],64)):(a(),i(Z,{key:1},[d[16]||(d[16]=Qe('<section><h4 class="font-bold text-gray-900 text-lg mb-2">Admin / Staff Points</h4><p class="mb-2">For non-technical tasks, use <span class="font-semibold">Time &amp; Volume</span> to estimate points.</p></section><section class="bg-blue-50 p-4 rounded-lg border border-blue-100"><h4 class="font-bold text-blue-900 text-md mb-3">Reference Table</h4><div class="grid grid-cols-1 gap-3"><div class="flex gap-3 items-start border-b border-blue-200 pb-2"><span class="bg-blue-600 text-white font-bold w-12 h-6 flex items-center justify-center rounded px-2 text-xs shrink-0">1 pt</span><div><span class="font-bold block text-blue-900">Quick Task</span><span class="text-xs">Replies, emails, simple checks. &lt; 1 hour.</span></div></div><div class="flex gap-3 items-start border-b border-blue-200 pb-2"><span class="bg-blue-600 text-white font-bold w-12 h-6 flex items-center justify-center rounded px-2 text-xs shrink-0">2 pts</span><div><span class="font-bold block text-blue-900">Routine Task</span><span class="text-xs">Meeting minutes, detailed responses. 1-2 hours.</span></div></div><div class="flex gap-3 items-start border-b border-blue-200 pb-2"><span class="bg-blue-600 text-white font-bold w-12 h-6 flex items-center justify-center rounded px-2 text-xs shrink-0">3 pts</span><div><span class="font-bold block text-blue-900">Half Day</span><span class="text-xs">Deep focus admin work, organization. 3-4 hours.</span></div></div><div class="flex gap-3 items-start"><span class="bg-blue-600 text-white font-bold w-12 h-6 flex items-center justify-center rounded px-2 text-xs shrink-0">5 pts</span><div><span class="font-bold block text-blue-900">Full Day</span><span class="text-xs">Complex analysis, long meetings/planning. 5+ hours.</span></div></div></div></section>',2)),e("section",rs,[d[15]||(d[15]=e("h4",{class:"font-bold text-gray-900 text-md mb-3"},"Calculator",-1)),e("div",us,[e("div",null,[d[13]||(d[13]=e("label",{class:"block text-xs font-semibold text-gray-600 mb-1"},"Task Type / Volume",-1)),L(e("select",{"onUpdate:modelValue":d[6]||(d[6]=r=>p.value=r),class:"w-full rounded-md border-gray-300 text-sm focus:border-indigo-500 focus:ring-indigo-500"},[(a(),i(Z,null,oe(c,r=>e("option",{key:r.value,value:r.value},G(r.label),9,ds)),64))],512),[[qe,p.value,void 0,{number:!0}]])]),e("div",cs,[d[14]||(d[14]=e("div",{class:"text-xs uppercase tracking-wide text-gray-400"},"Suggested Points",-1)),e("div",ms,G(t.value),1)])])])],64))]))}},vs={class:"p-4 sm:p-6"},ps={class:"flex items-center justify-between mb-4"},fs={class:"text-lg font-medium text-gray-900"},gs={class:"space-y-6"},bs={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ys={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},hs={key:0},xs=["min"],ks={key:1},ws=["min"],_s={key:2,class:"md:col-span-2"},As={class:"mt-2 flex flex-wrap gap-2"},Ts=["value"],Ms={class:"ml-2 text-sm"},Cs={class:"flex gap-2"},$s=["value"],Ss=["value"],Gs={key:5,class:"md:col-span-2"},js={class:"p-3 rounded-md bg-gray-50 border border-gray-200 text-sm text-gray-800"},Ps={class:"flex items-center justify-end gap-3"},Es={__name:"SchedulePickerModal",props:{show:{type:Boolean,default:!1},title:{type:String,default:"Schedule"},initial:{type:Object,default:()=>({})}},emits:["close","save"],setup(b,{emit:A}){function v(l=new Date){const u=T=>String(T).padStart(2,"0"),m=l.getFullYear(),C=u(l.getMonth()+1),g=u(l.getDate()),V=u(l.getHours()),E=u(l.getMinutes());return`${m}-${C}-${g}T${V}:${E}`}const s=b,t=A,p=M({name:"",description:"",start_at:v(new Date),end_at:"",mode:"once",time:new Date().toTimeString().slice(0,5),days_of_week:[],day_of_month:null,nth:1,dow_for_monthly:1,month:1,cron:""});re(()=>s.show,l=>{l&&(p.value={name:s.initial.name||"",description:s.initial.description||"",start_at:s.initial.start_at||v(new Date),end_at:s.initial.end_at||"",mode:s.initial.mode||"once",time:s.initial.time||new Date().toTimeString().slice(0,5),days_of_week:s.initial.days_of_week||[],day_of_month:s.initial.day_of_month||null,nth:s.initial.nth||1,dow_for_monthly:s.initial.dow_for_monthly||1,month:s.initial.month||1,cron:s.initial.cron||""})});const c=[{value:"once",label:"Once"},{value:"daily",label:"Daily"},{value:"weekly",label:"Weekly"},{value:"monthly",label:"Monthly"},{value:"yearly",label:"Yearly"},{value:"cron",label:"Custom cron"}],y=W(()=>v(new Date)),d=W(()=>p.value.start_at||y.value),r=W(()=>{var m,C;const l=p.value,u=l.time||"00:00";switch(l.mode){case"once":return`One-time at ${(m=l.start_at)==null?void 0:m.replace("T"," ")} (deactivates after run)`;case"daily":return`Daily at ${u}`;case"weekly":if(!((C=l.days_of_week)!=null&&C.length))return`Weekly at ${u}`;const g=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return`Weekly on ${l.days_of_week.map(T=>g[T]).join(", ")} at ${u}`;case"monthly":return l.day_of_month?`Monthly on day ${l.day_of_month} at ${u}`:`Monthly on the ${["First","Second","Third","Fourth","Fifth"][l.nth-1]} ${["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][l.dow_for_monthly]} at ${u}`;case"yearly":return`Yearly on ${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][(l.month||1)-1]} ${l.day_of_month||1} at ${u}`;case"cron":return`Custom cron: ${l.cron||"* * * * *"}`}});function o(){t("save",{...p.value})}return(l,u)=>(a(),D(Pe,{show:b.show,onClose:u[15]||(u[15]=()=>t("close"))},{default:h(()=>[e("div",vs,[e("div",ps,[e("h3",fs,G(b.title),1),e("button",{onClick:u[0]||(u[0]=()=>t("close")),class:"text-gray-500 hover:text-gray-700"},"âœ•")]),e("div",gs,[e("section",null,[e("div",bs,[e("div",null,[n(q,{value:"Schedule Name"}),L(e("input",{"onUpdate:modelValue":u[1]||(u[1]=m=>p.value.name=m),type:"text",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",placeholder:"e.g., Weekly reminder"},null,512),[[ne,p.value.name]])]),e("div",null,[n(q,{value:"Description (optional)"}),L(e("input",{"onUpdate:modelValue":u[2]||(u[2]=m=>p.value.description=m),type:"text",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[ne,p.value.description]])])])]),e("section",null,[e("div",ys,[e("div",null,[n(q,{value:"Run"}),n(ge,{modelValue:p.value.mode,"onUpdate:modelValue":u[3]||(u[3]=m=>p.value.mode=m),options:c,placeholder:"Select frequency..."},null,8,["modelValue"])]),p.value.mode!=="cron"&&p.value.mode!=="once"?(a(),i("div",hs,[n(q,{value:"Time"}),L(e("input",{"onUpdate:modelValue":u[4]||(u[4]=m=>p.value.time=m),type:"time",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[ne,p.value.time]])])):_("",!0),e("div",null,[n(q,{value:"Start at"}),L(e("input",{"onUpdate:modelValue":u[5]||(u[5]=m=>p.value.start_at=m),type:"datetime-local",min:y.value,class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,8,xs),[[ne,p.value.start_at]])]),p.value.mode!=="once"?(a(),i("div",ks,[n(q,{value:"End at (optional)"}),L(e("input",{"onUpdate:modelValue":u[6]||(u[6]=m=>p.value.end_at=m),type:"datetime-local",min:d.value,class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,8,ws),[[ne,p.value.end_at]])])):_("",!0),p.value.mode==="weekly"?(a(),i("div",_s,[n(q,{value:"Days of the week"}),e("div",As,[(a(),i(Z,null,oe(7,m=>e("label",{key:m-1,class:"inline-flex items-center"},[L(e("input",{class:"rounded border-gray-300 text-indigo-600 shadow-sm focus:ring-indigo-500",type:"checkbox",value:m-1,"onUpdate:modelValue":u[7]||(u[7]=C=>p.value.days_of_week=C)},null,8,Ts),[[dt,p.value.days_of_week]]),e("span",Ms,G(["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][m-1]),1)])),64))])])):_("",!0),p.value.mode==="monthly"?(a(),i(Z,{key:3},[e("div",null,[n(q,{value:"Day of month"}),L(e("input",{"onUpdate:modelValue":u[8]||(u[8]=m=>p.value.day_of_month=m),type:"number",min:"1",max:"31",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",placeholder:"e.g., 15"},null,512),[[ne,p.value.day_of_month,void 0,{number:!0}]])]),e("div",null,[n(q,{value:"Or: Nth weekday"}),e("div",Cs,[L(e("select",{"onUpdate:modelValue":u[9]||(u[9]=m=>p.value.nth=m),class:"mt-1 block w-1/2 rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},u[16]||(u[16]=[e("option",{value:1},"First",-1),e("option",{value:2},"Second",-1),e("option",{value:3},"Third",-1),e("option",{value:4},"Fourth",-1),e("option",{value:5},"Fifth",-1)]),512),[[qe,p.value.nth,void 0,{number:!0}]]),L(e("select",{"onUpdate:modelValue":u[10]||(u[10]=m=>p.value.dow_for_monthly=m),class:"mt-1 block w-1/2 rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[(a(),i(Z,null,oe(7,m=>e("option",{key:m-1,value:m-1},G(["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][m-1]),9,$s)),64))],512),[[qe,p.value.dow_for_monthly,void 0,{number:!0}]])])])],64)):_("",!0),p.value.mode==="yearly"?(a(),i(Z,{key:4},[e("div",null,[n(q,{value:"Month"}),L(e("select",{"onUpdate:modelValue":u[11]||(u[11]=m=>p.value.month=m),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[(a(),i(Z,null,oe(12,m=>e("option",{key:m,value:m},G(["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][m-1]),9,Ss)),64))],512),[[qe,p.value.month,void 0,{number:!0}]])]),e("div",null,[n(q,{value:"Day of month"}),L(e("input",{"onUpdate:modelValue":u[12]||(u[12]=m=>p.value.day_of_month=m),type:"number",min:"1",max:"31",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[ne,p.value.day_of_month,void 0,{number:!0}]])])],64)):_("",!0),p.value.mode==="cron"?(a(),i("div",Gs,[n(q,{value:"Cron expression"}),L(e("input",{"onUpdate:modelValue":u[13]||(u[13]=m=>p.value.cron=m),type:"text",placeholder:"* * * * *",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[ne,p.value.cron]])])):_("",!0)])]),e("section",null,[e("div",js,G(r.value),1),u[17]||(u[17]=e("p",{class:"text-[11px] text-gray-500 mt-1"},"Times are entered in your local timezone; they will be stored in the app timezone.",-1))]),e("div",Ps,[e("button",{onClick:u[14]||(u[14]=()=>t("close")),class:"px-4 py-2 rounded-md border border-gray-300 text-gray-700 bg-white hover:bg-gray-50"},"Cancel"),e("button",{onClick:o,class:"inline-flex items-center rounded-md bg-indigo-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500"},"Save")])])])]),_:1},8,["show"]))}};function Vs(){const b=M(!1),A=M(null);function v(){b.value=!0}function s(){b.value=!1}function t(c){A.value={...c},b.value=!1}async function p(c,y){var d,r;if(!A.value)return null;try{const o={...A.value,scheduled_item_type:c,scheduled_item_id:y},{data:l}=await window.axios.post("/api/schedules",o);return Be("Schedule created"),A.value=null,l}catch(o){return console.error("Failed to create schedule",o),ke(((r=(d=o==null?void 0:o.response)==null?void 0:d.data)==null?void 0:r.message)||"Failed to create schedule"),null}}return{showScheduleModal:b,scheduleDraft:A,open:v,close:s,onSaveDraft:t,attachAfterCreate:p}}const Is={class:"mb-4 flex justify-end"},Bs={key:0,class:"mb-4"},Ds={key:1,class:"flex flex-col md:flex-row md:gap-8"},Ns={class:"flex-grow flex flex-col space-y-4"},Us={key:0,class:"flex-grow flex flex-col"},Ls={key:0,class:"text-xs text-gray-500 mt-1"},zs={class:"w-full md:w-72 flex-shrink-0 mt-6 md:mt-0 space-y-5"},Rs={key:0},Fs={class:"space-y-5"},Os={class:"flex items-center gap-3"},qs={class:"flex-grow flex items-center gap-2"},Hs=["disabled"],Ks={class:"flex items-center gap-3"},Ws={key:0,class:"mt-5 flex items-center gap-3"},Js={key:1,class:"mt-5 flex items-center gap-3"},Ys={key:2,class:"mt-5 flex items-center gap-3"},Qs={key:3,class:"mt-5 space-y-2"},Zs={class:"flex items-center justify-between rounded-md bg-gray-100 p-1"},Xs={key:4,class:"mt-5 space-y-2"},eo={class:"flex items-center justify-between"},to={key:2,class:"mt-6 border-t pt-4"},ao={class:"space-y-4 mb-4"},lo={key:0},so={key:1},oo={key:2,class:"flex items-center"},io={key:3,class:"flex items-center"},no={key:4,class:"flex items-center justify-between"},ro={key:0,class:"text-sm text-gray-700"},uo={key:1,class:"text-sm text-gray-500"},co={class:"flex items-center gap-2"},mo={class:"flex items-center gap-2 flex-wrap"},vo={class:"p-6"},po={class:"flex items-center justify-between mb-4"},fo={class:"mt-6 flex justify-end"},go="Create New Task",bo="/api/tasks",yo="post",ho="Create Task",xo="Task created successfully!",ko={__name:"CreateTaskModal",props:{show:Boolean,projectId:{type:Number,default:null}},emits:["close","saved"],setup(b,{emit:A}){const v=b,s=A,t=Ge({name:"",description:"",assigned_to_user_id:null,due_date:null,status:"To Do",task_type_id:null,milestone_id:null,project_id:v.projectId,priority:"medium",needs_approval:!1,requires_qa:!1,effort:null,tags:[],tags_data:[]}),p=M(!1),c=["To Do","In Progress","Done","Blocked","Archived"],y=M([]),d=M([]),r=M([]),o=M([]),l=M(!0),u=M(!1),m=M(!1),C=M(!1),g=M(!1),V=M(!1),E=M(!1),T=M(!1),w=M(!1),j=M(!1),{showScheduleModal:z,scheduleDraft:R,open:H,close:P,onSaveDraft:I,attachAfterCreate:K}=Vs(),B=W(()=>{const U=R.value;if(!U)return null;const x=U.time||"00:00";switch(U.mode){case"once":return`One-time at ${String(U.start_at||"").replace("T"," ")}`;case"daily":return`Daily at ${x}`;case"weekly":{const te=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return`Weekly on ${(U.days_of_week||[]).map(me=>te[me]).join(", ")||"â€”"} at ${x}`}case"monthly":return U.day_of_month?`Monthly on day ${U.day_of_month} at ${x}`:`Monthly on the ${["First","Second","Third","Fourth","Fifth"][(U.nth||1)-1]} ${["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][U.dow_for_monthly||1]} at ${x}`;case"yearly":return`Yearly on ${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][(U.month||1)-1]} ${U.day_of_month||1} at ${x}`;case"cron":return`Custom cron: ${U.cron||"* * * * *"}`}return null}),$=async()=>(R.value?t.schedule={...R.value}:t.schedule&&delete t.schedule,!0);re(()=>v.show,async U=>{U&&(Object.assign(t,{name:"",description:"",assigned_to_user_id:null,due_date:null,status:"To Do",task_type_id:null,milestone_id:null,project_id:v.projectId,priority:"medium",needs_approval:!1,requires_qa:!1,effort:null,tags:[],tags_data:[]}),V.value=!1,E.value=!1,T.value=!1,w.value=!1,j.value=!1,v.projectId?await ie(v.projectId):await Q())},{immediate:!0}),re(()=>t.description,U=>{U.length<10&&(t.milestone_id=null)}),re(()=>t.milestone_id,()=>{t.due_date=null}),re(()=>t.due_date,()=>{t.assigned_to_user_id=null}),re(()=>t.assigned_to_user_id,()=>{t.task_type_id=null}),re(()=>t.task_type_id,()=>{t.priority="medium"}),re(()=>t.project_id,async U=>{U?await ie(U):(d.value=[],r.value=[],o.value=[])});const Q=async()=>{l.value=!0;try{const U=await window.axios.get("/api/projects-simplified");y.value=U.data.map(x=>({value:x.id,label:x.name}))}catch(U){console.error("Error fetching projects:",U),y.value=[]}finally{l.value=!1}},ie=async U=>{if(U){u.value=!0,m.value=!0,C.value=!0;try{const[x,te,F]=await Promise.all([window.axios.get(`/api/projects/${U}/users`),window.axios.get("/api/task-types"),window.axios.get(`/api/projects/${U}/milestones`)]);d.value=x.data.map(me=>({value:me.id,label:me.name})),r.value=te.data.map(me=>({value:me.id,label:me.name})),o.value=F.data}catch(x){console.error("Error fetching associated task data:",x),d.value=[],r.value=[],o.value=[]}finally{u.value=!1,m.value=!1,C.value=!1}}},ee=W(()=>new Date().toISOString().split("T")[0]),le=W(()=>{if(!t.milestone_id)return"";const U=o.value.find(x=>x.id===t.milestone_id);return!U||!U.completion_date?"":U.completion_date.split("T")[0]}),J=M([]),se=U=>{J.value=Array.from(U.target.files||[])},de=async U=>{if(!J.value.length)return;const x=new FormData;J.value.forEach((te,F)=>x.append(`files[${F}]`,te)),x.append("model_type","Task"),x.append("model_id",U);try{await window.axios.post("/api/files",x,{headers:{"Content-Type":"multipart/form-data"}}),Be("Files uploaded to Google Drive.")}catch(te){console.error("Failed to upload task files",te),ke("Failed to upload files.")}},Te=async U=>{var x,te,F;try{const me=(U==null?void 0:U.id)||((x=U==null?void 0:U.task)==null?void 0:x.id)||((te=U==null?void 0:U.data)==null?void 0:te.id);me&&(await de(me),!(U!=null&&U.attached_schedule_id||(F=U==null?void 0:U.data)!=null&&F.attached_schedule_id)&&R.value&&await K("task",me))}finally{R.value=null,s("saved",U),s("close"),J.value=[]}},Me=()=>{s("close")},Ee=()=>{t.project_id?g.value=!0:alert("Please select a project before adding a milestone.")},ye=U=>{g.value=!1,U&&U.id&&U.name&&(o.value.push(U),t.milestone_id=U.id)},at=W(()=>d.value),Ve=W(()=>r.value),xe=W(()=>o.value);return(U,x)=>(a(),i(Z,null,[n(Ne,{show:b.show,title:go,"api-endpoint":bo,"http-method":yo,"form-data":t,"submit-button-text":ho,"success-message":xo,"before-submit":$,onClose:Me,onSubmitted:Te,"max-width":"4xl"},{default:h(({errors:te})=>[e("div",Is,[e("button",{type:"button",onClick:x[0]||(x[0]=F=>U.$emit("switch-to-bulk")),class:"text-xs font-semibold text-indigo-600 hover:text-indigo-800 flex items-center gap-1 transition-colors"},x[28]||(x[28]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})],-1),k(" Switch to Bulk Creation ",-1)]))]),e("div",null,[b.projectId?_("",!0):(a(),i("div",Bs,[n(ge,{id:"task-project",modelValue:t.project_id,"onUpdate:modelValue":x[1]||(x[1]=F=>t.project_id=F),options:y.value,"value-key":"value","label-key":"label",placeholder:"Select a project",required:!0},null,8,["modelValue","options"]),n(X,{message:te.project_id?te.project_id[0]:"",class:"mt-2"},null,8,["message"])])),t.project_id?(a(),i("div",Ds,[e("div",Ns,[n(pe,{id:"task-name",modelValue:t.name,"onUpdate:modelValue":x[2]||(x[2]=F=>t.name=F),type:"text",class:"block w-full text-xl font-semibold border-gray-200",placeholder:"Task Title",required:""},null,8,["modelValue"]),n(X,{message:te.name?te.name[0]:"",class:"mt-2"},null,8,["message"]),t.name?(a(),i("div",Us,[L(e("textarea",{id:"task-description","onUpdate:modelValue":x[3]||(x[3]=F=>t.description=F),class:"flex-grow w-full rounded-md border-gray-200 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",placeholder:"Add a description..."},null,512),[[ne,t.description]]),n(X,{message:te.description?te.description[0]:"",class:"mt-2"},null,8,["message"]),t.name&&t.description.length<10?(a(),i("p",Ls," Enter at least 10 characters to continue. ")):_("",!0)])):_("",!0)]),e("div",zs,[t.description.length>=10?(a(),i("div",Rs,[e("div",Fs,[e("div",Os,[x[30]||(x[30]=e("svg",{class:"h-5 w-5 text-gray-500 flex-shrink-0",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 20.25h12m-7.5-3.75v3.75m.75-12.75l3 3m0 0l3-3m-3 3v11.25m-4.5 0L7.5 21m0 0H6"})],-1)),e("div",qs,[n(ge,{id:"task-milestone",modelValue:t.milestone_id,"onUpdate:modelValue":x[4]||(x[4]=F=>t.milestone_id=F),options:xe.value,"value-key":"id","label-key":"name",placeholder:"Select Milestone",class:"flex-grow",required:""},null,8,["modelValue","options"]),e("button",{type:"button",onClick:Ee,disabled:!t.project_id||C.value,class:"p-2 text-sm font-medium text-blue-600 bg-blue-50 rounded-md hover:bg-blue-100 disabled:opacity-50",title:"Add New Milestone"},x[29]||(x[29]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4v16m8-8H4"})],-1)]),8,Hs)])]),n(X,{message:te.milestone_id?te.milestone_id[0]:"",class:"mt-2"},null,8,["message"]),e("div",Ks,[x[31]||(x[31]=e("svg",{class:"h-5 w-5 text-gray-500 flex-shrink-0",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 9.563C9 9.252 9.252 9 9.563 9h4.874c.311 0 .563.252.563.563v4.874c0 .311-.252.563-.563.563H9.564A.562.562 0 019 14.437V9.564z"})],-1)),n(ge,{id:"task-status",modelValue:t.status,"onUpdate:modelValue":x[5]||(x[5]=F=>t.status=F),options:c.map(F=>({value:F,label:F})),"value-key":"value","label-key":"label",class:"flex-grow"},null,8,["modelValue","options"])])]),t.milestone_id?(a(),i("div",Ws,[x[32]||(x[32]=e("svg",{class:"h-5 w-5 text-gray-500 flex-shrink-0",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5"})],-1)),n(pe,{id:"task-due-date",modelValue:t.due_date,"onUpdate:modelValue":x[6]||(x[6]=F=>t.due_date=F),type:"date",class:"flex-grow",min:ee.value,max:le.value},null,8,["modelValue","min","max"])])):_("",!0),t.due_date?(a(),i("div",Js,[x[33]||(x[33]=e("svg",{class:"h-5 w-5 text-gray-500 flex-shrink-0",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"})],-1)),n(ge,{id:"task-assigned-to",modelValue:t.assigned_to_user_id,"onUpdate:modelValue":x[7]||(x[7]=F=>t.assigned_to_user_id=F),options:at.value,"value-key":"value","label-key":"label",placeholder:"Unassigned",class:"flex-grow","allow-empty":!0},null,8,["modelValue","options"])])):_("",!0),t.assigned_to_user_id?(a(),i("div",Ys,[x[34]||(x[34]=e("svg",{class:"h-5 w-5 text-gray-500 flex-shrink-0",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.568 3H5.25A2.25 2.25 0 003 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 005.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 009.568 3z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 6h.008v.008H6V6z"})],-1)),n(ge,{id:"task-type",modelValue:t.task_type_id,"onUpdate:modelValue":x[8]||(x[8]=F=>t.task_type_id=F),options:Ve.value,"value-key":"value","label-key":"label",placeholder:"Select Type",class:"flex-grow",required:""},null,8,["modelValue","options"])])):_("",!0),t.task_type_id?(a(),i("div",Qs,[n(q,{value:"Priority"}),e("div",Zs,[e("button",{type:"button",onClick:x[9]||(x[9]=F=>t.priority="low"),class:O(["px-3 py-1 text-sm rounded-md w-full flex items-center justify-center gap-2",t.priority==="low"?"bg-white shadow":"text-gray-600 hover:bg-gray-200"])},x[35]||(x[35]=[e("svg",{class:"h-4 w-4 text-green-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 13.5L12 21m0 0l-7.5-7.5M12 21V3"})],-1),k(" Low ",-1)]),2),e("button",{type:"button",onClick:x[10]||(x[10]=F=>t.priority="medium"),class:O(["px-3 py-1 text-sm rounded-md w-full flex items-center justify-center gap-2",t.priority==="medium"?"bg-white shadow":"text-gray-600 hover:bg-gray-200"])},x[36]||(x[36]=[e("svg",{class:"h-4 w-4 text-yellow-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 9h16.5m-16.5 6.75h16.5"})],-1),k(" Medium ",-1)]),2),e("button",{type:"button",onClick:x[11]||(x[11]=F=>t.priority="high"),class:O(["px-3 py-1 text-sm rounded-md w-full flex items-center justify-center gap-2",t.priority==="high"?"bg-white shadow":"text-gray-600 hover:bg-gray-200"])},x[37]||(x[37]=[e("svg",{class:"h-4 w-4 text-red-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.5 10.5L12 3m0 0l7.5 7.5M12 3v18"})],-1),k(" High ",-1)]),2)])])):_("",!0),t.task_type_id?(a(),i("div",Xs,[e("div",eo,[n(q,{value:"Effort (Story Points)"}),e("button",{type:"button",onClick:x[12]||(x[12]=F=>p.value=!0),class:"text-xs text-indigo-600 hover:text-indigo-800 flex items-center gap-1"},[n(N(Nt),{class:"h-4 w-4"}),x[38]||(x[38]=k(" Guide ",-1))])]),n(pe,{id:"task-effort",modelValue:t.effort,"onUpdate:modelValue":x[13]||(x[13]=F=>t.effort=F),type:"number",min:"0",class:"block w-full",placeholder:"e.g. 1, 2, 3, 5, 8"},null,8,["modelValue"]),n(X,{message:te.effort?te.effort[0]:"",class:"mt-2"},null,8,["message"])])):_("",!0)])):_("",!0)])])):_("",!0),t.description.length>=10?(a(),i("div",to,[e("div",ao,[V.value?(a(),i("div",lo,[n(Dt,{modelValue:t.tags,"onUpdate:modelValue":x[14]||(x[14]=F=>t.tags=F),initialTags:t.tags_data,label:"Tags",placeholder:"Add tags...",error:te.tags?te.tags[0]:"",disabled:!t.project_id},null,8,["modelValue","initialTags","error","disabled"])])):_("",!0),E.value?(a(),i("div",so,[n(q,{for:"task-files",value:"Attachments"}),e("input",{id:"task-files",type:"file",class:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-violet-50 file:text-violet-700 hover:file:bg-violet-100",multiple:"",onChange:se},null,32)])):_("",!0),w.value?(a(),i("div",oo,[L(e("input",{id:"needs-approval",type:"checkbox","onUpdate:modelValue":x[15]||(x[15]=F=>t.needs_approval=F),class:"h-4 w-4 text-indigo-600 border-gray-300 rounded"},null,512),[[dt,t.needs_approval]]),x[39]||(x[39]=e("label",{for:"needs-approval",class:"ml-2 block text-sm text-gray-700"},"This task needs approval",-1))])):_("",!0),j.value?(a(),i("div",io,[L(e("input",{id:"requires-qa",type:"checkbox","onUpdate:modelValue":x[16]||(x[16]=F=>t.requires_qa=F),class:"h-4 w-4 text-indigo-600 border-gray-300 rounded"},null,512),[[dt,t.requires_qa]]),x[40]||(x[40]=e("label",{for:"requires-qa",class:"ml-2 block text-sm text-gray-700"},"Required QA Task",-1))])):_("",!0),T.value?(a(),i("div",no,[e("div",null,[n(q,{value:"Schedule"}),B.value?(a(),i("div",ro,"Planned: "+G(B.value),1)):(a(),i("div",uo,"No schedule attached"))]),e("div",co,[e("button",{type:"button",onClick:x[17]||(x[17]=(...F)=>N(H)&&N(H)(...F)),class:"px-3 py-2 text-sm font-medium text-indigo-600 bg-indigo-50 rounded-md hover:bg-indigo-100"},G(B.value?"Edit Schedule":"Add Schedule"),1),N(R)?(a(),i("button",{key:0,type:"button",onClick:x[18]||(x[18]=F=>R.value=null),class:"px-3 py-2 text-sm font-medium text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200"},"Clear")):_("",!0)])])):_("",!0)]),e("div",mo,[e("button",{type:"button",onClick:x[19]||(x[19]=F=>V.value=!V.value),class:O(["flex items-center gap-1 text-sm text-gray-600 hover:text-black bg-gray-100 hover:bg-gray-200 px-2 py-1 rounded-md transition-colors",{"bg-gray-300":V.value}])},x[41]||(x[41]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 7h.01M7 3h5a2 2 0 012 2v5a2 2 0 01-2 2H7a2 2 0 01-2-2V5a2 2 0 012-2zm0 0v11a2 2 0 002 2h5a2 2 0 002-2v-5a2 2 0 00-2-2H7z"})],-1),k("Tag",-1)]),2),e("button",{type:"button",onClick:x[20]||(x[20]=F=>E.value=!E.value),class:O(["flex items-center gap-1 text-sm text-gray-600 hover:text-black bg-gray-100 hover:bg-gray-200 px-2 py-1 rounded-md transition-colors",{"bg-gray-300":E.value}])},x[42]||(x[42]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})],-1),k("Attachment",-1)]),2),e("button",{type:"button",onClick:x[21]||(x[21]=F=>w.value=!w.value),class:O(["flex items-center gap-1 text-sm text-gray-600 hover:text-black bg-gray-100 hover:bg-gray-200 px-2 py-1 rounded-md transition-colors",{"bg-gray-300":w.value}])},x[43]||(x[43]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),k("Approval",-1)]),2),e("button",{type:"button",onClick:x[22]||(x[22]=F=>j.value=!j.value),class:O(["flex items-center gap-1 text-sm text-gray-600 hover:text-black bg-gray-100 hover:bg-gray-200 px-2 py-1 rounded-md transition-colors",{"bg-gray-300":j.value}])},x[44]||(x[44]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6l7 3v4c0 4.418-2.239 8-7 9-4.761-1-7-4.582-7-9V9l7-3z"})],-1),k("QA",-1)]),2),e("button",{type:"button",onClick:x[23]||(x[23]=F=>T.value=!T.value),class:O(["flex items-center gap-1 text-sm text-gray-600 hover:text-black bg-gray-100 hover:bg-gray-200 px-2 py-1 rounded-md transition-colors",{"bg-gray-300":T.value}])},x[45]||(x[45]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),k("Schedule",-1)]),2)])])):_("",!0)])]),_:1},8,["show","form-data"]),n(Es,{show:N(z),title:"Add Schedule",onClose:N(P),onSave:N(I)},null,8,["show","onClose","onSave"]),n(es,{show:g.value,"project-id":t.project_id,onClose:x[24]||(x[24]=te=>g.value=!1),onSaved:ye},null,8,["show","project-id"]),n(Pe,{show:p.value,onClose:x[27]||(x[27]=te=>p.value=!1),"max-width":"lg"},{default:h(()=>[e("div",vo,[e("div",po,[x[47]||(x[47]=e("h3",{class:"text-lg font-medium text-gray-900"},"Effort Estimation Guide",-1)),e("button",{onClick:x[25]||(x[25]=te=>p.value=!1),class:"text-gray-400 hover:text-gray-500"},x[46]||(x[46]=[e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),n(Ut),e("div",fo,[n(De,{onClick:x[26]||(x[26]=te=>p.value=!1)},{default:h(()=>x[48]||(x[48]=[k("Close",-1)])),_:1,__:[48]})])])]),_:1},8,["show"])],64))}},wo={class:"space-y-4"},_o={class:"mt-4"},Ao={class:"flex items-center space-x-6"},To={class:"inline-flex items-center"},Mo={class:"inline-flex items-center"},Co={class:"inline-flex items-center"},$o={__name:"CreateForm",props:{show:{type:Boolean,default:!1},apiEndpoint:{type:String,required:!0}},emits:["close","resourceCreated"],setup(b,{emit:A}){const v=b,s=A,t=Ge({title:"",description:"",url:"",type:"website",thumbnail_url:"",visible_to_client:!0,visibility:"client",tags:[]}),p=[{value:"website",label:"Website"},{value:"youtube",label:"YouTube Video"},{value:"document",label:"Document"},{value:"image",label:"Image"},{value:"other",label:"Other"}],c=M(p);be(async()=>{try{const{data:o}=await fe.get("/api/options/shareable_resource_types");Array.isArray(o)&&o.length&&(c.value=o)}catch{c.value=p}});const y=o=>{const l={title:o.title,description:o.description,url:o.url,type:o.type,thumbnail_url:o.thumbnail_url,visibility:o.visibility,tags:o.tags};if(Array.isArray(o.tags)&&o.tags.length){const u=o.tags.map(m=>typeof m=="object"&&m!==null?m.id:m).filter(Boolean);l.tag_ids=u}return l},d=o=>{s("resourceCreated",o),r()},r=()=>{t.title="",t.description="",t.url="",t.type="website",t.thumbnail_url="",t.visible_to_client=!0,t.tags=[],s("close")};return(o,l)=>(a(),D(Ne,{show:v.show,title:"Add New Shareable Resource",apiEndpoint:v.apiEndpoint,httpMethod:"post",formData:t,formatDataForApi:y,submitButtonText:"Create Resource",successMessage:"Shareable resource created successfully!",onSubmitted:d,onClose:r},{default:h(({errors:u})=>[e("div",wo,[e("div",null,[n(q,{for:"title",value:"Title",class:"mb-1"}),n(pe,{id:"title",type:"text",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:t.title,"onUpdate:modelValue":l[0]||(l[0]=m=>t.title=m),required:""},null,8,["modelValue"]),n(X,{message:u.title?u.title[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[n(q,{for:"url",value:"Resource URL",class:"mb-1"}),n(pe,{id:"url",type:"url",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:t.url,"onUpdate:modelValue":l[1]||(l[1]=m=>t.url=m),required:""},null,8,["modelValue"]),n(X,{message:u.url?u.url[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[n(q,{for:"type",value:"Resource Type",class:"mb-1"}),n(ge,{id:"type",modelValue:t.type,"onUpdate:modelValue":l[2]||(l[2]=m=>t.type=m),options:c.value,valueKey:"value",labelKey:"label",placeholder:"Select Resource Type",required:"",class:"mt-1 block w-full"},null,8,["modelValue","options"]),n(X,{message:u.type?u.type[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[n(q,{for:"thumbnail_url",value:"Thumbnail URL (Optional)",class:"mb-1"}),n(pe,{id:"thumbnail_url",type:"url",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:t.thumbnail_url,"onUpdate:modelValue":l[3]||(l[3]=m=>t.thumbnail_url=m)},null,8,["modelValue"]),n(X,{message:u.thumbnail_url?u.thumbnail_url[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[n(q,{for:"description",value:"Description (Optional)",class:"mb-1"}),L(e("textarea",{id:"description",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-lg shadow-sm mt-1 block w-full","onUpdate:modelValue":l[4]||(l[4]=m=>t.description=m),rows:"3"},null,512),[[ne,t.description]]),n(X,{message:u.description?u.description[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[n(Dt,{modelValue:t.tags,"onUpdate:modelValue":l[5]||(l[5]=m=>t.tags=m),label:"Associated Tags",placeholder:"Search or add tags",error:u.tags?u.tags[0]:""},null,8,["modelValue","error"])]),e("div",_o,[n(q,{value:"Visibility",class:"mb-2"}),e("div",Ao,[e("label",To,[L(e("input",{type:"radio",class:"form-radio",value:"client","onUpdate:modelValue":l[6]||(l[6]=m=>t.visibility=m)},null,512),[[He,t.visibility]]),l[9]||(l[9]=e("span",{class:"ml-2"},"Visible to Client",-1))]),e("label",Mo,[L(e("input",{type:"radio",class:"form-radio",value:"team","onUpdate:modelValue":l[7]||(l[7]=m=>t.visibility=m)},null,512),[[He,t.visibility]]),l[10]||(l[10]=e("span",{class:"ml-2"},"Visible to Team",-1))]),e("label",Co,[L(e("input",{type:"radio",class:"form-radio",value:"private","onUpdate:modelValue":l[8]||(l[8]=m=>t.visibility=m)},null,512),[[He,t.visibility]]),l[11]||(l[11]=e("span",{class:"ml-2"},"Private",-1))])]),n(X,{message:u.visibility?u.visibility[0]:"",class:"mt-2"},null,8,["message"])])])]),_:1},8,["show","apiEndpoint","formData"]))}},So=tt($o,[["__scopeId","data-v-9f619b0e"]]),Go={class:"flex border-b border-gray-200"},jo={key:0,class:"ml-2 px-2 py-1 text-xs font-bold bg-red-600 text-white rounded-full"},Po={class:"p-4 space-y-2 overflow-y-auto"},Eo={key:0,class:"p-6 text-center text-gray-500"},Vo={key:0},Io={key:1},Bo=["onClick"],Do={class:"flex-1 min-w-0"},No={class:"flex items-start justify-between gap-2 mb-1"},Uo={class:"flex-1 min-w-0"},Lo={key:0,class:"text-base font-semibold text-gray-900 truncate"},zo={key:1,class:"text-xs text-gray-500"},Ro={key:0,class:"text-sm text-gray-600 mt-1 mb-2"},Fo={class:"flex items-center text-xs text-gray-500 font-medium"},Oo={key:0},qo={key:1,class:"mx-2"},Ho={key:2},Ko={__name:"NotificationsSidebar",setup(b){const A=W(()=>Ke.value.notifications),v=M("New"),s=W(()=>v.value==="New"?A.value.filter(y=>!y.isRead):A.value),t=async y=>{await jt(y.view_id);const d=y.task_id||p(y.url),r=y.project_id||c(y.url);d&&r?(Pt(d,r),At()):(console.warn("Could not open task sidebar. Falling back to opening URL in new tab."),y.url&&window.open(y.url,"_blank"))},p=y=>{const d=y.match(/\/task\/(\d+)/);return d?parseInt(d[1]):null},c=y=>{const d=y.match(/\/project\/(\d+)\//);return d?parseInt(d[1]):null};return(y,d)=>(a(),D(Bt,{show:N(Ke).show,"onUpdate:show":N(At),title:"Notifications","initial-width":35,class:"z-[100]"},{content:h(()=>[e("div",Go,[e("button",{onClick:d[0]||(d[0]=r=>v.value="New"),class:O([{"border-blue-600 text-blue-600 font-semibold":v.value==="New","border-transparent text-gray-500 hover:text-gray-700":v.value!=="New"},"flex-1 py-4 px-1 text-center text-sm border-b-2 transition-colors duration-200"])},[d[2]||(d[2]=k(" New ",-1)),A.value.filter(r=>!r.isRead).length>0?(a(),i("span",jo,G(A.value.filter(r=>!r.isRead).length),1)):_("",!0)],2),e("button",{onClick:d[1]||(d[1]=r=>v.value="All"),class:O([{"border-blue-600 text-blue-600 font-semibold":v.value==="All","border-transparent text-gray-500 hover:text-gray-700":v.value!=="All"},"flex-1 py-4 px-1 text-center text-sm border-b-2 transition-colors duration-200"])}," All ",2)]),e("div",Po,[s.value.length===0?(a(),i("div",Eo,[v.value==="New"?(a(),i("span",Vo,"You have no new notifications.")):(a(),i("span",Io,"You have no notifications."))])):_("",!0),(a(!0),i(Z,null,oe(s.value,r=>(a(),i("div",{key:r.id,class:O(["bg-white rounded-xl shadow-sm p-4 flex items-start space-x-4 border border-gray-200 transition-all duration-200 hover:shadow-md cursor-pointer",{"bg-gray-50":r.isRead}]),onClick:o=>t(r)},[e("div",Do,[e("div",No,[e("div",Uo,[r.title?(a(),i("h3",Lo,G(r.title),1)):_("",!0),r.project_name?(a(),i("p",zo,G(r.project_name),1)):_("",!0)])]),r.message?(a(),i("p",Ro,G(r.message),1)):_("",!0),e("div",Fo,[r.due_date?(a(),i("span",Oo,"Due: "+G(N(Gt)(r.due_date)),1)):_("",!0),r.due_date&&r.priority?(a(),i("span",qo,"â€¢")):_("",!0),r.priority?(a(),i("span",Ho,"Priority: "+G(r.priority),1)):_("",!0)])])],10,Bo))),128))])]),_:1},8,["show","onUpdate:show"]))}},Wo={class:"space-y-4"},Jo={key:0,class:"text-red-600 text-xs mt-1"},Yo={key:0,class:"text-red-600 text-xs mt-1"},Qo={key:0,class:"text-red-600 text-xs mt-1"},Zo={__name:"KudoModal",props:{show:{type:Boolean,default:!1}},emits:["close","submitted"],setup(b,{emit:A}){const v=A,s=M([]),t=M([]),p=Ge({recipient_id:"",project_id:"",comment:""}),c=M({}),y=async()=>{try{const{data:l}=await window.axios.get("/api/projects-simplified");s.value=(l||[]).map(u=>({value:u.id,label:u.name}))}catch{s.value=[]}},d=async l=>{if(t.value=[],!!l)try{const{data:u}=await window.axios.get(`/api/projects/${l}/users`);t.value=(u||[]).map(m=>({value:m.id,label:`${m.name} (${m.email})`}))}catch{t.value=[]}};re(()=>p.project_id,l=>{l&&d(l)}),be(()=>{y()});const r=()=>{p.recipient_id="",p.project_id="",p.comment="",c.value={}},o=l=>{r(),v("submitted",l)};return(l,u)=>(a(),D(Ne,{show:b.show,title:"Give a Kudo âœ¨","api-endpoint":"/api/kudos","http-method":"post","form-data":p,"submit-button-text":"Submit Kudo","success-message":"Kudo submitted! Pending approval.",onClose:u[3]||(u[3]=m=>l.$emit("close")),onSubmitted:o},{default:h(({errors:m})=>[e("div",Wo,[e("div",null,[u[4]||(u[4]=e("label",{class:"block text-sm font-medium text-gray-700"},"Project",-1)),n(ge,{options:s.value,modelValue:p.project_id,"onUpdate:modelValue":u[0]||(u[0]=C=>p.project_id=C),placeholder:"Select a project..."},null,8,["options","modelValue"]),m.project_id?(a(),i("p",Jo,G(m.project_id[0]),1)):_("",!0)]),e("div",null,[u[5]||(u[5]=e("label",{class:"block text-sm font-medium text-gray-700"},"Recipient",-1)),n(ge,{options:t.value,modelValue:p.recipient_id,"onUpdate:modelValue":u[1]||(u[1]=C=>p.recipient_id=C),placeholder:"Select a teammate..."},null,8,["options","modelValue"]),m.recipient_id?(a(),i("p",Yo,G(m.recipient_id[0]),1)):_("",!0)]),e("div",null,[u[6]||(u[6]=e("label",{class:"block text-sm font-medium text-gray-700"},"Comment",-1)),L(e("textarea",{"onUpdate:modelValue":u[2]||(u[2]=C=>p.comment=C),rows:"4",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",placeholder:"e.g., Thank you for helping with the last-minute changes!"},null,512),[[ne,p.comment]]),m.comment?(a(),i("p",Qo,G(m.comment[0]),1)):_("",!0)])])]),_:1},8,["show","form-data"]))}},Xo={class:"flex items-center p-4 h-16 border-b border-gray-700"},ei={key:0,class:"text-xl font-semibold flex-1 truncate"},ti=["title"],ai={key:0,class:"p-4 border-b border-gray-700"},li={class:"relative"},si={key:1,class:"flex-1 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-500 scrollbar-track-gray-700 p-4"},oi={key:0,class:"mb-4"},ii={class:"ml-2 mt-2 space-y-1"},ni=["onClick"],ri={class:"text-sm font-medium text-gray-300 truncate"},ui={class:"ml-4 mt-1 space-y-1"},di={class:"truncate"},ci={key:1,class:"mb-4"},mi={class:"ml-2 mt-2 space-y-1"},vi=["onClick"],pi={class:"text-sm font-medium text-gray-300 truncate"},fi={class:"ml-4 mt-1 space-y-1"},gi={class:"truncate"},bi={key:2,class:"mb-4"},yi={class:"ml-2 mt-2 space-y-1"},hi={class:"truncate"},xi={key:3,class:"mb-4"},ki={class:"ml-2 mt-2 space-y-1"},wi={class:"truncate"},_i={key:4,class:"text-gray-400 text-sm text-center py-4"},Ai={key:5,class:"text-gray-400 text-sm text-center py-4"},Ti={key:2,class:"flex flex-col items-center pt-4 space-y-4"},Mi={key:0,class:"text-gray-400 text-xs text-center px-2"},Ci={__name:"LeftSidebar",props:{allProjects:{type:Array,default:()=>[]},activeProjectId:{type:Number,default:null}},emits:["project-selected"],setup(b,{emit:A}){const v=b,s=A,t=M(localStorage.getItem("leftSidebarCollapsed")!=="false"),p=M(""),c=M({}),y=W(()=>{const T=new Set;return v.allProjects.forEach(w=>{w.project_type&&T.add(w.project_type)}),Array.from(T).sort()}),d=W(()=>{const T=new Set;return v.allProjects.forEach(w=>{Array.isArray(w.tags)&&w.tags.forEach(j=>T.add(j))}),Array.from(T).sort()}),r=W(()=>{if(!p.value)return v.allProjects;const T=p.value.toLowerCase();return v.allProjects.filter(w=>{var j,z,R;return w.name.toLowerCase().includes(T)||((j=w.description)==null?void 0:j.toLowerCase().includes(T))||((z=w.project_type)==null?void 0:z.toLowerCase().includes(T))||Array.isArray(w.tags)&&w.tags.some(H=>H.toLowerCase().includes(T))||((R=w.status)==null?void 0:R.toLowerCase().includes(T))})}),o=W(()=>{const T={};r.value.forEach(w=>{w.project_type&&w.status==="active"&&(T[w.project_type]||(T[w.project_type]=[]),T[w.project_type].push(w))});for(const w in T)T[w].sort((j,z)=>j.name.localeCompare(z.name));return T}),l=W(()=>{const T={};r.value.forEach(w=>{Array.isArray(w.tags)&&w.tags.length>0&&w.tags.forEach(j=>{T[j]||(T[j]=[]),T[j].push(w)})});for(const w in T)T[w]=[...new Set(T[w])].sort((j,z)=>j.name.localeCompare(z.name));return T}),u=W(()=>r.value.filter(T=>T.status!=="active").sort((T,w)=>T.name.localeCompare(w.name))),m=W(()=>r.value.filter(T=>!T.project_type&&(!Array.isArray(T.tags)||T.tags.length===0)).sort((T,w)=>T.name.localeCompare(w.name)));re(()=>v.allProjects,()=>{y.value.forEach(T=>{const w=`type-${T}`;c.value[w]===void 0&&(c.value[w]=!0)}),d.value.forEach(T=>{const w=`tag-${T}`;c.value[w]===void 0&&(c.value[w]=!0)}),c.value["main-types"]===void 0&&(c.value["main-types"]=!1),c.value["main-tags"]===void 0&&(c.value["main-tags"]=!1),c.value["inactive-projects"]===void 0&&(c.value["inactive-projects"]=!1),c.value.uncategorized===void 0&&(c.value.uncategorized=!1)},{immediate:!0}),re(t,T=>{localStorage.setItem("leftSidebarCollapsed",T)});const C=()=>{t.value=!t.value},g=T=>{c.value[T]=!c.value[T]},V=T=>{s("project-selected",T)},E=()=>{p.value=""};return(T,w)=>(a(),i("div",{class:O({"w-64":!t.value,"w-16":t.value,"min-w-16":!0,"bg-gray-800 text-white flex flex-col transition-all duration-300 ease-in-out shrink-0 h-screen overflow-hidden":!0})},[e("div",Xo,[t.value?_("",!0):(a(),i("h2",ei,"Projects")),e("button",{onClick:C,class:"p-2 rounded-full hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500",title:t.value?"Expand Sidebar":"Collapse Sidebar"},[(a(),i("svg",{class:O(["w-6 h-6 text-gray-400 transform transition-transform duration-300",{"rotate-180":t.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},w[5]||(w[5]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"},null,-1)]),2))],8,ti)]),t.value?_("",!0):(a(),i("div",ai,[e("div",li,[L(e("input",{type:"text","onUpdate:modelValue":w[0]||(w[0]=j=>p.value=j),placeholder:"Search all projects...",class:"w-full p-2 rounded-md bg-gray-700 border border-gray-600 text-white placeholder-gray-400 focus:ring-indigo-500 focus:border-indigo-500 text-sm"},null,512),[[ne,p.value]]),p.value?(a(),i("button",{key:0,onClick:E,class:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-200",title:"Clear search"},w[6]||(w[6]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))):_("",!0)])])),t.value?(a(),i("div",Ti,[(a(!0),i(Z,null,oe(v.allProjects,j=>(a(),D(N(we),{key:j.id,href:T.route("projects.show",j.id),onClick:z=>V(j.id),class:O({"w-10 h-10 rounded-full flex items-center justify-center text-xs font-bold transition-all duration-200":!0,"bg-indigo-600 text-white":j.id===b.activeProjectId,"bg-gray-700 text-gray-300 hover:bg-gray-600":j.id!==b.activeProjectId}),title:j.name},{default:h(()=>[k(G(j.name.charAt(0).toUpperCase()),1)]),_:2},1032,["href","onClick","class","title"]))),128)),b.allProjects.length===0?(a(),i("div",Mi," No Projects ")):_("",!0)])):(a(),i("div",si,[Object.keys(o.value).length>0?(a(),i("div",oi,[e("div",{class:"flex items-center justify-between cursor-pointer py-2 hover:bg-gray-700 rounded-md px-2",onClick:w[1]||(w[1]=j=>g("main-types"))},[w[8]||(w[8]=e("h3",{class:"text-sm font-semibold text-gray-400"},"Active Projects by Type",-1)),(a(),i("svg",{class:O(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!c.value["main-types"]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},w[7]||(w[7]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))]),L(e("div",ii,[(a(!0),i(Z,null,oe(o.value,(j,z)=>(a(),i("div",{key:z},[e("div",{class:"flex items-center justify-between cursor-pointer py-1 hover:bg-gray-700 rounded-md px-2",onClick:R=>g(`type-${z}`)},[e("h4",ri,G(z),1),(a(),i("svg",{class:O(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!c.value[`type-${z}`]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},w[9]||(w[9]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))],8,ni),L(e("ul",ui,[(a(!0),i(Z,null,oe(j,R=>(a(),i("li",{key:R.id},[n(N(we),{href:T.route("projects.show",R.id),onClick:H=>V(R.id),class:O({"block w-full text-left px-3 py-2 rounded-md transition-colors":!0,"bg-indigo-600 text-white":R.id===b.activeProjectId,"hover:bg-gray-700 text-gray-200":R.id!==b.activeProjectId,"font-bold":R.id===b.activeProjectId})},{default:h(()=>[e("span",di,G(R.name),1)]),_:2},1032,["href","onClick","class"])]))),128))],512),[[Ae,!c.value[`type-${z}`]]])]))),128))],512),[[Ae,!c.value["main-types"]]])])):_("",!0),Object.keys(l.value).length>0?(a(),i("div",ci,[e("div",{class:"flex items-center justify-between cursor-pointer py-2 hover:bg-gray-700 rounded-md px-2",onClick:w[2]||(w[2]=j=>g("main-tags"))},[w[11]||(w[11]=e("h3",{class:"text-sm font-semibold text-gray-400"},"Projects by Tag",-1)),(a(),i("svg",{class:O(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!c.value["main-tags"]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},w[10]||(w[10]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))]),L(e("div",mi,[(a(!0),i(Z,null,oe(l.value,(j,z)=>(a(),i("div",{key:z},[e("div",{class:"flex items-center justify-between cursor-pointer py-1 hover:bg-gray-700 rounded-md px-2",onClick:R=>g(`tag-${z}`)},[e("h4",pi,G(z),1),(a(),i("svg",{class:O(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!c.value[`tag-${z}`]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},w[12]||(w[12]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))],8,vi),L(e("ul",fi,[(a(!0),i(Z,null,oe(j,R=>(a(),i("li",{key:R.id},[n(N(we),{href:T.route("projects.show",R.id),onClick:H=>V(R.id),class:O({"block w-full text-left px-3 py-2 rounded-md transition-colors":!0,"bg-indigo-600 text-white":R.id===b.activeProjectId,"hover:bg-gray-700 text-gray-200":R.id!==b.activeProjectId,"font-bold":R.id===b.activeProjectId})},{default:h(()=>[e("span",gi,G(R.name),1)]),_:2},1032,["href","onClick","class"])]))),128))],512),[[Ae,!c.value[`tag-${z}`]]])]))),128))],512),[[Ae,!c.value["main-tags"]]])])):_("",!0),u.value.length>0?(a(),i("div",bi,[e("div",{class:"flex items-center justify-between cursor-pointer py-2 hover:bg-gray-700 rounded-md px-2",onClick:w[3]||(w[3]=j=>g("inactive-projects"))},[w[14]||(w[14]=e("h3",{class:"text-sm font-semibold text-gray-400"},"Inactive Projects",-1)),(a(),i("svg",{class:O(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!c.value["inactive-projects"]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},w[13]||(w[13]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))]),L(e("ul",yi,[(a(!0),i(Z,null,oe(u.value,j=>(a(),i("li",{key:j.id},[n(N(we),{href:T.route("projects.show",j.id),onClick:z=>V(j.id),class:O({"block w-full text-left px-3 py-2 rounded-md transition-colors":!0,"bg-indigo-600 text-white":j.id===b.activeProjectId,"hover:bg-gray-700 text-gray-200":j.id!==b.activeProjectId,"font-bold":j.id===b.activeProjectId})},{default:h(()=>[e("span",hi,G(j.name)+" ("+G(j.status.replace("_"," "))+")",1)]),_:2},1032,["href","onClick","class"])]))),128))],512),[[Ae,!c.value["inactive-projects"]]])])):_("",!0),m.value.length>0?(a(),i("div",xi,[e("div",{class:"flex items-center justify-between cursor-pointer py-2 hover:bg-gray-700 rounded-md px-2",onClick:w[4]||(w[4]=j=>g("uncategorized"))},[w[16]||(w[16]=e("h3",{class:"text-sm font-semibold text-gray-400"},"Uncategorized",-1)),(a(),i("svg",{class:O(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!c.value.uncategorized}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},w[15]||(w[15]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))]),L(e("ul",ki,[(a(!0),i(Z,null,oe(m.value,j=>(a(),i("li",{key:j.id},[n(N(we),{href:T.route("projects.show",j.id),onClick:z=>V(j.id),class:O({"block w-full text-left px-3 py-2 rounded-md transition-colors":!0,"bg-indigo-600 text-white":j.id===b.activeProjectId,"hover:bg-gray-700 text-gray-200":j.id!==b.activeProjectId,"font-bold":j.id===b.activeProjectId})},{default:h(()=>[e("span",wi,G(j.name),1)]),_:2},1032,["href","onClick","class"])]))),128))],512),[[Ae,!c.value.uncategorized]])])):_("",!0),r.value.length===0?(a(),i("div",_i," No projects found matching your search. ")):b.allProjects.length===0&&!p.value?(a(),i("div",Ai," No projects available. ")):_("",!0)]))],2))}},$i=tt(Ci,[["__scopeId","data-v-417d431f"]]),Si={class:"relative"},pt={__name:"Dropdown",props:{align:{type:String,default:"right"},width:{type:String,default:"48"},contentClasses:{type:String,default:"py-1 bg-white"}},setup(b){const A=b,v=y=>{c.value&&y.key==="Escape"&&(c.value=!1)};be(()=>document.addEventListener("keydown",v)),Xe(()=>document.removeEventListener("keydown",v));const s=W(()=>{const y={48:"w-48",64:"w-64",72:"w-72",80:"w-80",96:"w-96",full:"w-full",screen:"w-screen",auto:""},d=A.width.toString();return y[d]??y[48]}),t=W(()=>A.width.toString()==="screen"),p=W(()=>A.align==="left"?"ltr:origin-top-left rtl:origin-top-right start-0":A.align==="right"?"ltr:origin-top-right rtl:origin-top-left end-0":"origin-top"),c=M(!1);return(y,d)=>(a(),i("div",Si,[e("div",{onClick:d[0]||(d[0]=r=>c.value=!c.value)},[je(y.$slots,"trigger")]),L(e("div",{class:"fixed inset-0 z-40",onClick:d[1]||(d[1]=r=>c.value=!1)},null,512),[[Ae,c.value]]),n(na,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:h(()=>[L(e("div",{class:O(["z-50 mt-2 rounded-md shadow-lg",t.value?"fixed left-0 right-0":"absolute",p.value,s.value]),style:{display:"none"},onClick:d[2]||(d[2]=r=>c.value=!1)},[e("div",{class:O(["rounded-md ring-1 ring-black ring-opacity-5",b.contentClasses])},[je(y.$slots,"content")],2)],2),[[Ae,c.value]])]),_:3})]))}},ae={__name:"DropdownLink",props:{href:{type:String,required:!0},method:{type:String,default:"get"},as:{type:String,default:"a"}},setup(b){return(A,v)=>(a(),D(N(we),Vt({href:b.href,method:b.method,as:b.as},A.$attrs,{class:"block w-full px-4 py-2 text-start text-sm leading-5 text-gray-700 transition duration-150 ease-in-out hover:bg-gray-100 focus:bg-gray-100 focus:outline-none"}),{default:h(()=>[je(A.$slots,"default")]),_:3},16,["href","method","as"]))}},he={__name:"NavLink",props:{href:{type:String,required:!0},active:{type:Boolean}},setup(b){const A=b,v=W(()=>A.active?"inline-flex items-center px-1 pt-1 border-b-2 border-indigo-400 text-sm font-medium leading-5 text-gray-900 focus:outline-none focus:border-indigo-700 transition duration-150 ease-in-out":"inline-flex items-center px-1 pt-1 border-b-2 border-transparent text-sm font-medium leading-5 text-gray-500 hover:text-gray-700 hover:border-gray-300 focus:outline-none focus:text-gray-700 focus:border-gray-300 transition duration-150 ease-in-out");return(s,t)=>(a(),D(N(we),{href:b.href,class:O(v.value)},{default:h(()=>[je(s.$slots,"default")]),_:3},8,["href","class"]))}};/**
 * @license lucide-vue-next v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gi=mt("award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-vue-next v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ji=mt("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);/**
 * @license lucide-vue-next v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pi=mt("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);function St(b,A){return a(),i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M8.75 1A2.75 2.75 0 0 0 6 3.75v.443c-.795.077-1.584.176-2.365.298a.75.75 0 1 0 .23 1.482l.149-.022.841 10.518A2.75 2.75 0 0 0 7.596 19h4.807a2.75 2.75 0 0 0 2.742-2.53l.841-10.52.149.023a.75.75 0 0 0 .23-1.482A41.03 41.03 0 0 0 14 4.193V3.75A2.75 2.75 0 0 0 11.25 1h-2.5ZM10 4c.84 0 1.673.025 2.5.075V3.75c0-.69-.56-1.25-1.25-1.25h-2.5c-.69 0-1.25.56-1.25 1.25v.325C8.327 4.025 9.16 4 10 4ZM8.58 7.72a.75.75 0 0 0-1.5.06l.3 7.5a.75.75 0 1 0 1.5-.06l-.3-7.5Zm4.34.06a.75.75 0 1 0-1.5-.06l-.3 7.5a.75.75 0 1 0 1.5.06l.3-7.5Z","clip-rule":"evenodd"})])}const Ei={class:"hidden sm:flex sm:items-center"},Vi={class:"mx-auto w-full max-w-6xl"},Ii={class:"grid grid-cols-2 md:grid-cols-4 gap-8"},Bi={class:"space-y-1"},Di={class:"space-y-1"},Ni={class:"space-y-1"},Ui={class:"space-y-1"},Li={class:"p-4"},zi={class:"flex justify-between items-center mb-4"},Ri={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Fi={class:"border rounded-lg p-4"},Oi={class:"space-y-3"},qi={class:"flex justify-end"},Hi={class:"border rounded-lg p-4"},Ki={class:"space-y-3"},Wi={class:"flex items-center gap-3 mt-2"},Ji={class:"flex items-center gap-2 text-sm"},Yi={class:"flex items-center gap-2 text-sm"},Qi={key:0},Zi={key:1},Xi={class:"mt-3"},en={class:"flex justify-end"},tn={__name:"AdminDropdown",setup(b){const A=M(!1),v=M(!1),s=Ge({sets:[],models:[],categoryName:"",setMode:"existing",selectedSetId:null,newSetName:"",newSetModels:[],setName:"",setModels:[],errors:{}}),t=async()=>{A.value=!0,await Promise.all([p(),c()])},p=async()=>{try{const{data:o}=await window.axios.get("/api/category-sets");s.sets=o.map(l=>({value:l.id,label:l.name,raw:l}))}catch(o){console.error("Failed to load sets",o)}},c=async()=>{try{const{data:o}=await window.axios.get("/api/models/available");s.models=o}catch(o){console.error("Failed to load models",o)}},y=()=>{s.errors={}},d=async()=>{var o;y(),v.value=!0;try{const l={name:s.setName,allowed_models:s.setModels},{data:u}=await window.axios.post("/api/category-sets",l);await p(),s.setName="",s.setModels=[]}catch(l){((o=l.response)==null?void 0:o.status)===422&&(s.errors=l.response.data.errors||{})}finally{v.value=!1}},r=async()=>{var o;y(),v.value=!0;try{const l={name:s.categoryName};s.setMode==="existing"?l.category_set_id=s.selectedSetId:(l.new_set_name=s.newSetName,l.allowed_models=s.newSetModels);const{data:u}=await window.axios.post("/api/categories",l);await p(),s.categoryName="",s.selectedSetId=null,s.newSetName="",s.newSetModels=[],s.setMode="existing"}catch(l){((o=l.response)==null?void 0:o.status)===422&&(s.errors=l.response.data.errors||{})}finally{v.value=!1}};return(o,l)=>{const u=ct("permission");return a(),i(Z,null,[e("div",Ei,[n(pt,{align:"left",width:"screen","content-classes":"py-6 bg-white p-6 w-full shadow-lg"},{trigger:h(()=>l[10]||(l[10]=[e("span",{class:"inline-flex rounded-md"},[e("button",{type:"button",class:"inline-flex items-center rounded-md border border-transparent bg-white px-3 py-2 text-sm font-medium leading-4 text-gray-700 hover:text-gray-900 focus:outline-none"},[k(" Admin "),e("svg",{class:"ms-2 -me-0.5 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])])],-1)])),content:h(()=>[e("div",Vi,[e("div",Ii,[e("div",null,[l[19]||(l[19]=e("h4",{class:"text-xs font-semibold uppercase tracking-wider text-gray-500 mb-3"},"Management",-1)),e("div",Bi,[L((a(),D(ae,{href:o.route("projects.index"),active:o.route().current("projects.index"),class:"!px-2 !py-1.5"},{default:h(()=>l[11]||(l[11]=[k("Projects",-1)])),_:1,__:[11]},8,["href","active"])),[[u,"manage_projects"]]),L((a(),D(ae,{href:o.route("clients.page"),active:o.route().current("clients.page"),class:"!px-2 !py-1.5"},{default:h(()=>l[12]||(l[12]=[k("Clients",-1)])),_:1,__:[12]},8,["href","active"])),[[u,"create_clients"]]),L((a(),D(ae,{href:o.route("users.page"),active:o.route().current("users.page"),class:"!px-2 !py-1.5"},{default:h(()=>l[13]||(l[13]=[k("Users",-1)])),_:1,__:[13]},8,["href","active"])),[[u,"create_users"]]),L((a(),D(ae,{href:o.route("leads.page"),active:o.route().current("leads.page"),class:"!px-2 !py-1.5"},{default:h(()=>l[14]||(l[14]=[k("Leads",-1)])),_:1,__:[14]},8,["href","active"])),[[u,"manage_projects"]]),L((a(),D(ae,{href:"/campaigns",active:o.$page.url&&o.$page.url.startsWith("/campaigns"),class:"!px-2 !py-1.5"},{default:h(()=>l[15]||(l[15]=[k("Campaigns",-1)])),_:1,__:[15]},8,["active"])),[[u,"manage_projects"]]),L((a(),D(ae,{href:o.route("admin.productivity.index"),active:o.route().current("admin.productivity.index"),class:"!px-2 !py-1.5"},{default:h(()=>l[16]||(l[16]=[k("Productivity Report",-1)])),_:1,__:[16]},8,["href","active"])),[[u,"manage_projects"]]),L((a(),D(ae,{href:o.route("admin.productivity-projects.index"),active:o.route().current("admin.productivity-projects.index"),class:"!px-2 !py-1.5"},{default:h(()=>l[17]||(l[17]=[k("Project Activity Report",-1)])),_:1,__:[17]},8,["href","active"])),[[u,"manage_projects"]]),L((a(),D(ae,{href:o.route("admin.activity-report.index"),active:o.route().current("admin.activity-report.index"),class:"!px-2 !py-1.5"},{default:h(()=>l[18]||(l[18]=[k("Activity Report",-1)])),_:1,__:[18]},8,["href","active"])),[[u,"manage_projects"]])])]),e("div",null,[l[23]||(l[23]=e("h4",{class:"text-xs font-semibold uppercase tracking-wider text-gray-500 mb-3"},"Planning / Sharing",-1)),e("div",Di,[L((a(),D(ae,{href:o.route("availability.index"),active:o.route().current("availability.index"),class:"!px-2 !py-1.5"},{default:h(()=>l[20]||(l[20]=[k("Weekly Availability",-1)])),_:1,__:[20]},8,["href","active"])),[[u,"create_users"]]),L((a(),D(ae,{href:o.route("admin.notice-board.index"),class:"!px-2 !py-1.5"},{default:h(()=>l[21]||(l[21]=[k("Notice Board",-1)])),_:1,__:[21]},8,["href"])),[[u,"manage_notices"]]),L((a(),D(ae,{href:o.route("shareable-resources.page"),class:"!px-2 !py-1.5"},{default:h(()=>l[22]||(l[22]=[k("Shareable Resources",-1)])),_:1,__:[22]},8,["href"])),[[u,"view_shareable_resources"]])])]),e("div",null,[l[32]||(l[32]=e("h4",{class:"text-xs font-semibold uppercase tracking-wider text-gray-500 mb-3"},"Configuration",-1)),e("div",Ni,[L((a(),D(ae,{href:o.route("task-types.page"),active:o.route().current("task-types.page"),class:"!px-2 !py-1.5"},{default:h(()=>l[24]||(l[24]=[k("Task Types",-1)])),_:1,__:[24]},8,["href","active"])),[[u,"manage_projects"]]),L((a(),D(ae,{href:"/admin/project-tiers",class:"!px-2 !py-1.5"},{default:h(()=>l[25]||(l[25]=[k("Project Tiers",-1)])),_:1,__:[25]})),[[u,"view_project_tiers"]]),L((a(),D(ae,{href:o.route("email-templates.page"),active:o.route().current("email-templates.page"),class:"!px-2 !py-1.5"},{default:h(()=>l[26]||(l[26]=[k("Email Templates",-1)])),_:1,__:[26]},8,["href","active"])),[[u,"manage_email_templates"]]),L((a(),D(ae,{href:o.route("placeholder-definitions.page"),active:o.route().current("placeholder-definitions.page"),class:"!px-2 !py-1.5"},{default:h(()=>l[27]||(l[27]=[k("Placeholder Definitions",-1)])),_:1,__:[27]},8,["href","active"])),[[u,"manage_placeholder_definitions"]]),L((a(),D(ae,{href:o.route("automation.page"),active:o.route().current("automation.page"),class:"!px-2 !py-1.5"},{default:h(()=>l[28]||(l[28]=[k("Automation",-1)])),_:1,__:[28]},8,["href","active"])),[[u,"create_automations"]]),L((a(),D(ae,{href:o.route("prompts.page"),active:o.route().current("prompts.page"),class:"!px-2 !py-1.5"},{default:h(()=>l[29]||(l[29]=[k("Prompts",-1)])),_:1,__:[29]},8,["href","active"])),[[u,"create_automations"]]),L((a(),D(ae,{href:o.route("schedules.index"),active:o.$page.url&&o.$page.url.startsWith("/schedules"),class:"!px-2 !py-1.5"},{default:h(()=>l[30]||(l[30]=[k("Schedules",-1)])),_:1,__:[30]},8,["href","active"])),[[u,"create_schedules"]]),n(ae,{href:o.route("admin.categories.index"),class:"!px-2 !py-1.5"},{default:h(()=>l[31]||(l[31]=[k("Categories",-1)])),_:1,__:[31]},8,["href"]),e("button",{type:"button",class:"!px-2 !py-1.5 text-left text-sm text-gray-700 hover:text-gray-900",onClick:t},"Quick Add")])]),e("div",null,[l[37]||(l[37]=e("h4",{class:"text-xs font-semibold uppercase tracking-wider text-gray-500 mb-3"},"Access & Finance",-1)),e("div",Ui,[L((a(),D(ae,{href:o.route("admin.roles.index"),class:"!px-2 !py-1.5"},{default:h(()=>l[33]||(l[33]=[k("Manage Roles",-1)])),_:1,__:[33]},8,["href"])),[[u,"manage_roles"]]),L((a(),D(ae,{href:o.route("admin.permissions.index"),class:"!px-2 !py-1.5"},{default:h(()=>l[34]||(l[34]=[k("Manage Permissions",-1)])),_:1,__:[34]},8,["href"])),[[u,"assign_permissions"]]),L((a(),D(ae,{href:"/admin/monthly-budgets",class:"!px-2 !py-1.5"},{default:h(()=>l[35]||(l[35]=[k("Monthly Budgets",-1)])),_:1,__:[35]})),[[u,"manage_monthly_budgets"]]),L((a(),D(ae,{href:"/admin/bonus-calculator",class:"!px-2 !py-1.5"},{default:h(()=>l[36]||(l[36]=[k("Bonus Calculator",-1)])),_:1,__:[36]})),[[u,"view_monthly_budgets"]])])])])])]),_:1})]),n(Pe,{show:A.value,onClose:l[9]||(l[9]=m=>A.value=!1),maxWidth:"3xl"},{default:h(()=>{var m,C,g,V,E,T,w,j;return[e("div",Li,[e("div",zi,[l[38]||(l[38]=e("h2",{class:"text-lg font-semibold"},"Manage Categories",-1)),e("button",{onClick:l[0]||(l[0]=z=>A.value=!1),class:"text-gray-400 hover:text-gray-600"},"âœ•")]),e("div",Ri,[e("div",Fi,[l[40]||(l[40]=e("h3",{class:"text-sm font-semibold mb-3"},"Create Category Set",-1)),e("div",Oi,[e("div",null,[n(q,{value:"Set Name"}),n(pe,{modelValue:s.setName,"onUpdate:modelValue":l[1]||(l[1]=z=>s.setName=z),class:"w-full mt-1"},null,8,["modelValue"]),n(X,{message:(C=(m=s.errors)==null?void 0:m.name)==null?void 0:C[0]},null,8,["message"])]),e("div",null,[n(q,{value:"Allowed Models (optional)"}),n(Ze,{options:s.models,modelValue:s.setModels,"onUpdate:modelValue":l[2]||(l[2]=z=>s.setModels=z),isMulti:!0,placeholder:"Select models"},null,8,["options","modelValue"])]),e("div",qi,[n(ce,{type:"button",onClick:d,disabled:v.value},{default:h(()=>l[39]||(l[39]=[k("Create Set",-1)])),_:1,__:[39]},8,["disabled"])])])]),e("div",Hi,[l[44]||(l[44]=e("h3",{class:"text-sm font-semibold mb-3"},"Create Category",-1)),e("div",Ki,[e("div",null,[n(q,{value:"Category Name"}),n(pe,{modelValue:s.categoryName,"onUpdate:modelValue":l[3]||(l[3]=z=>s.categoryName=z),class:"w-full mt-1"},null,8,["modelValue"]),n(X,{message:(V=(g=s.errors)==null?void 0:g.name)==null?void 0:V[0]},null,8,["message"])]),e("div",Wi,[e("label",Ji,[L(e("input",{type:"radio",value:"existing","onUpdate:modelValue":l[4]||(l[4]=z=>s.setMode=z)},null,512),[[He,s.setMode]]),l[41]||(l[41]=k(" Use Existing Set ",-1))]),e("label",Yi,[L(e("input",{type:"radio",value:"new","onUpdate:modelValue":l[5]||(l[5]=z=>s.setMode=z)},null,512),[[He,s.setMode]]),l[42]||(l[42]=k(" Create New Set ",-1))])]),s.setMode==="existing"?(a(),i("div",Qi,[n(q,{value:"Select Set"}),n(ge,{options:s.sets,modelValue:s.selectedSetId,"onUpdate:modelValue":l[6]||(l[6]=z=>s.selectedSetId=z),placeholder:"Choose a set"},null,8,["options","modelValue"]),n(X,{message:(T=(E=s.errors)==null?void 0:E.category_set_id)==null?void 0:T[0]},null,8,["message"])])):(a(),i("div",Zi,[n(q,{value:"New Set Name"}),n(pe,{modelValue:s.newSetName,"onUpdate:modelValue":l[7]||(l[7]=z=>s.newSetName=z),class:"w-full mt-1"},null,8,["modelValue"]),n(X,{message:(j=(w=s.errors)==null?void 0:w.new_set_name)==null?void 0:j[0]},null,8,["message"]),e("div",Xi,[n(q,{value:"Allowed Models (optional)"}),n(Ze,{options:s.models,modelValue:s.newSetModels,"onUpdate:modelValue":l[8]||(l[8]=z=>s.newSetModels=z),isMulti:!0,placeholder:"Select models"},null,8,["options","modelValue"])])])),e("div",en,[n(ce,{type:"button",onClick:r,disabled:v.value},{default:h(()=>l[43]||(l[43]=[k("Create Category",-1)])),_:1,__:[43]},8,["disabled"])])])])])])]}),_:1},8,["show"])],64)}}},an={class:"relative ms-3"},ln={class:"inline-flex rounded-md"},sn={type:"button",class:"inline-flex items-center rounded-md border border-transparent bg-white px-3 py-2 text-sm font-medium leading-4 text-gray-500 transition duration-150 ease-in-out hover:text-gray-700 focus:outline-none"},on={__name:"UserDropdown",emits:["logoutSuccess","logoutError"],setup(b,{emit:A}){const v=W(()=>We().props.auth.user),s=A,t=()=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization,s("logoutSuccess")},p=c=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization,window.location.href="/login",s("logoutError",c)};return(c,y)=>(a(),i("div",an,[n(pt,{align:"right",width:"48"},{trigger:h(()=>{var d;return[e("span",ln,[e("button",sn,[k(G(v.value.name)+" ("+G((d=v.value.role_data)==null?void 0:d.name)+") ",1),y[0]||(y[0]=e("svg",{class:"ms-2 -me-0.5 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1))])])]}),content:h(()=>[n(ae,{href:c.route("profile.edit")},{default:h(()=>y[1]||(y[1]=[k(" Profile ",-1)])),_:1,__:[1]},8,["href"]),n(ae,{href:c.route("logout"),method:"post",as:"button",onSuccess:t,onError:p},{default:h(()=>y[2]||(y[2]=[k(" Log Out ",-1)])),_:1,__:[2]},8,["href"])]),_:1})]))}},nn={class:"hidden sm:flex sm:items-center"},rn={class:"mx-auto w-full max-w-6xl"},un={class:"grid grid-cols-2 md:grid-cols-3 gap-8"},dn={class:"space-y-1"},cn={class:"space-y-1"},mn={key:0},vn={class:"space-y-1"},pn={__name:"BonusDropdown",setup(b){const{canDo:A}=et();return(v,s)=>{const t=ct("permission");return a(),i("div",nn,[n(pt,{align:"left",width:"screen","content-classes":"py-6 bg-white p-6 w-full shadow-lg"},{trigger:h(()=>s[0]||(s[0]=[e("span",{class:"inline-flex rounded-md"},[e("button",{type:"button",class:"inline-flex items-center rounded-md border border-transparent bg-white px-3 py-2 text-sm font-medium leading-4 text-gray-700 hover:text-gray-900 focus:outline-none"},[k(" Team Resources "),e("svg",{class:"ms-2 -me-0.5 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])])],-1)])),content:h(()=>[e("div",rn,[e("div",un,[e("div",null,[s[4]||(s[4]=e("h4",{class:"text-xs font-semibold uppercase tracking-wider text-gray-500 mb-3"},"Program",-1)),e("div",dn,[n(ae,{href:v.route("bonus-system.index"),active:v.route().current("bonus-system.index"),class:"!px-2 !py-1.5"},{default:h(()=>s[1]||(s[1]=[k("Bonus System",-1)])),_:1,__:[1]},8,["href","active"]),n(ae,{href:v.route("leaderboard.index"),active:v.route().current("leaderboard.index"),class:"!px-2 !py-1.5"},{default:h(()=>s[2]||(s[2]=[k("Leaderboard",-1)])),_:1,__:[2]},8,["href","active"]),n(ae,{href:v.route("kudos.index"),active:v.route().current("kudos.index"),class:"!px-2 !py-1.5"},{default:h(()=>s[3]||(s[3]=[k("Kudos",-1)])),_:1,__:[3]},8,["href","active"])])]),e("div",null,[s[7]||(s[7]=e("h4",{class:"text-xs font-semibold uppercase tracking-wider text-gray-500 mb-3"},"Valuable",-1)),e("div",cn,[n(ae,{href:v.route("team-resources.page"),active:v.route().current("team-resources.page"),class:"!px-2 !py-1.5"},{default:h(()=>s[5]||(s[5]=[k("Resources",-1)])),_:1,__:[5]},8,["href","active"]),n(ae,{href:v.route("presentations.index"),active:v.route().current("presentations.index"),class:"!px-2 !py-1.5"},{default:h(()=>s[6]||(s[6]=[k("Presentation",-1)])),_:1,__:[6]},8,["href","active"])])]),N(A)("add_expendables").value?(a(),i("div",mn,[s[9]||(s[9]=e("h4",{class:"text-xs font-semibold uppercase tracking-wider text-gray-500 mb-3"},"Management",-1)),e("div",vn,[L((a(),D(ae,{href:v.route("project-expendables.index"),class:"!px-2 !py-1.5"},{default:h(()=>s[8]||(s[8]=[k("Project Expendables",-1)])),_:1,__:[8]},8,["href"])),[[t,"add_expendables"]])])])):_("",!0)])])]),_:1})])}}},fn={class:"bg-white z-[49] relative w-full shadow-sm border-b border-gray-100"},gn={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},bn={class:"flex h-16 justify-between items-center"},yn={class:"flex-shrink-0 flex items-center"},hn={class:"hidden sm:flex items-center space-x-6"},xn={key:0,class:"group relative inline-flex items-center px-3 py-1 rounded-full bg-gradient-to-r from-green-400 to-emerald-500 text-white text-sm font-semibold shadow-lg ring-2 ring-emerald-300/60 transition-all duration-300 ease-in-out"},kn={class:"font-bold"},wn={key:1,class:"inline-flex items-center px-3 py-1 rounded-full bg-gray-100 text-gray-500 text-sm font-medium"},_n={key:0,class:"absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-red-100 transform translate-x-1/2 -translate-y-1/2 bg-red-600 rounded-full"},An={class:"-mr-2 flex items-center sm:hidden"},Tn={class:"h-6 w-6",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24"},Mn={class:"bg-gray-50 border-t border-gray-100 py-2 hidden sm:block"},Cn={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},$n={class:"flex items-center justify-between"},Sn={class:"flex items-center space-x-2 overflow-x-auto no-scrollbar"},Gn={class:"flex items-center space-x-2 flex-shrink-0"},jn={class:"space-y-1 pt-2 pb-3"},Pn={__name:"TopNavigation",props:{unreadNotificationCount:{type:Number,default:0}},emits:["openCreateTaskModal","openAddResource","openNotificationsSidebar","open-kudo-modal","open-meeting-minutes-modal"],setup(b,{emit:A}){const v=A,s=M(!1);W(()=>We().props.auth.user);const{canDo:t}=et();t("manage_projects"),t("create_users"),t("manage_roles"),t("manage_task_types"),t("create_clients"),W(()=>t("manage_project_tiers").value||t("view_project_tiers").value||t("create_project_tiers").value||t("edit_project_tiers").value),t("manage_notices"),t("manage_email_templates"),t("manage_placeholder_definitions"),t("manage_permissions"),t("manage_monthly_budgets"),t("view_monthly_budgets"),t("view_admin_menu");const p=t("view_admin_dropdown"),c=M(null),y=M(!0),d=M(null);return be(async()=>{try{const{data:r}=await window.axios.get("/api/leaderboard/stats");c.value=(r==null?void 0:r.userMonthlyPoints)??0}catch(r){console.error("Failed to load monthly points",r),d.value="Failed to load points",c.value=0}finally{y.value=!1}}),(r,o)=>{const l=ct("permission");return a(),i("nav",fn,[e("div",gn,[e("div",bn,[e("div",yn,[n(N(we),{href:r.route("dashboard")},{default:h(()=>[n(ga,{class:"block h-14 w-auto fill-current text-gray-800"})]),_:1},8,["href"])]),e("div",hn,[n(N(we),{href:r.route("leaderboard.index"),class:"mr-3 cursor-pointer"},{default:h(()=>[y.value?(a(),i("div",wn," Loading... ")):(a(),i("div",xn,[o[6]||(o[6]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1.5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})],-1)),e("span",kn,G(c.value??0),1),o[7]||(o[7]=e("span",{class:"ml-1 text-white/80"},"pts",-1))]))]),_:1},8,["href"]),e("button",{onClick:o[0]||(o[0]=u=>v("openNotificationsSidebar")),class:"relative flex-shrink-0 text-gray-400 hover:text-indigo-600 p-2 rounded-full transition-colors duration-200","aria-label":"View all notifications"},[n(N(ji),{class:"h-6 w-6"}),b.unreadNotificationCount>0?(a(),i("span",_n,G(b.unreadNotificationCount),1)):_("",!0)]),n(on)]),e("div",An,[e("button",{onClick:o[1]||(o[1]=u=>s.value=!s.value),class:"inline-flex items-center justify-center rounded-md p-2 text-gray-400 transition duration-150 ease-in-out hover:bg-gray-100 hover:text-gray-500 focus:bg-gray-100 focus:text-gray-500 focus:outline-none"},[(a(),i("svg",Tn,[e("path",{class:O({hidden:s.value,"inline-flex":!s.value}),"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},null,2),e("path",{class:O({hidden:!s.value,"inline-flex":s.value}),"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,2)]))])])])]),e("div",Mn,[e("div",Cn,[e("div",$n,[e("div",Sn,[n(he,{href:r.route("dashboard"),active:r.route().current("dashboard")},{default:h(()=>o[8]||(o[8]=[k(" Dashboard ",-1)])),_:1,__:[8]},8,["href","active"]),n(he,{href:r.route("inbox"),active:r.route().current("inbox")},{default:h(()=>o[9]||(o[9]=[k(" Inbox ",-1)])),_:1,__:[9]},8,["href","active"]),n(he,{href:r.route("workspace.index"),active:r.route().current("workspace.index")},{default:h(()=>o[10]||(o[10]=[k(" My Workspace ",-1)])),_:1,__:[10]},8,["href","active"]),n(pn),N(p)?(a(),D(tn,{key:0})):_("",!0)]),e("div",Gn,[n(ce,{type:"button",onClick:o[2]||(o[2]=u=>v("openCreateTaskModal")),class:"px-3 py-1.5 text-sm"},{default:h(()=>[n(N(nt),{class:"h-4 w-4 mr-1.5"}),o[11]||(o[11]=e("span",null,"Add Task",-1))]),_:1,__:[11]}),n(ce,{type:"button",onClick:o[3]||(o[3]=u=>v("openAddResource")),class:"px-3 py-1.5 text-sm"},{default:h(()=>[n(N(nt),{class:"h-4 w-4 mr-1.5"}),o[12]||(o[12]=e("span",null,"Add Resource",-1))]),_:1,__:[12]}),n(ce,{type:"button",onClick:o[4]||(o[4]=u=>v("open-meeting-minutes-modal")),class:"px-3 py-1.5 text-sm"},{default:h(()=>[n(N(nt),{class:"h-4 w-4 mr-1.5"}),o[13]||(o[13]=e("span",null,"Add Meeting Minutes",-1))]),_:1,__:[13]}),N(t)("create_kudos")?(a(),i("button",{key:0,type:"button",onClick:o[5]||(o[5]=u=>r.$emit("open-kudo-modal")),class:"inline-flex items-center justify-center px-3 py-1.5 text-sm font-semibold rounded-lg bg-orange-500 text-white hover:bg-orange-600 transition-colors duration-200"},[n(N(Gi),{class:"h-4 w-4 mr-1.5"}),o[14]||(o[14]=e("span",null,"Give Kudo",-1))])):_("",!0)])])])]),e("div",{class:O([{block:s.value,hidden:!s.value},"sm:hidden"])},[e("div",jn,[n(he,{href:r.route("dashboard"),active:r.route().current("dashboard")},{default:h(()=>o[15]||(o[15]=[k(" Dashboard ",-1)])),_:1,__:[15]},8,["href","active"]),n(he,{href:r.route("inbox"),active:r.route().current("inbox")},{default:h(()=>o[16]||(o[16]=[k(" Inbox ",-1)])),_:1,__:[16]},8,["href","active"]),n(he,{href:r.route("workspace.index"),active:r.route().current("workspace.index")},{default:h(()=>o[17]||(o[17]=[k(" My Workspace ",-1)])),_:1,__:[17]},8,["href","active"]),n(he,{href:r.route("presentations.index"),active:r.route().current("presentations.index")},{default:h(()=>o[18]||(o[18]=[k(" Presentation ",-1)])),_:1,__:[18]},8,["href","active"]),n(he,{href:r.route("bonus-system.index"),active:r.route().current("bonus-system.index")},{default:h(()=>o[19]||(o[19]=[k(" Bonus System ",-1)])),_:1,__:[19]},8,["href","active"]),n(he,{href:r.route("leaderboard.index"),active:r.route().current("leaderboard.index")},{default:h(()=>o[20]||(o[20]=[k(" Leaderboard ",-1)])),_:1,__:[20]},8,["href","active"]),n(he,{href:r.route("kudos.index"),active:r.route().current("kudos.index")},{default:h(()=>o[21]||(o[21]=[k(" Kudos ",-1)])),_:1,__:[21]},8,["href","active"]),L((a(),D(he,{href:r.route("project-expendables.index")},{default:h(()=>o[22]||(o[22]=[k(" Project Expendables ",-1)])),_:1,__:[22]},8,["href"])),[[l,"add_expendables"]])])],2)])}}},ue={__name:"ResponsiveNavLink",props:{href:{type:String,required:!0},active:{type:Boolean},method:{type:String,default:"get"},as:{type:String,default:"a"}},setup(b){const A=b,v=W(()=>A.active?"block w-full ps-3 pe-4 py-2 border-l-4 border-indigo-400 text-start text-base font-medium text-indigo-700 bg-indigo-50 focus:outline-none focus:text-indigo-800 focus:bg-indigo-100 focus:border-indigo-700 transition duration-150 ease-in-out":"block w-full ps-3 pe-4 py-2 border-l-4 border-transparent text-start text-base font-medium text-gray-600 hover:text-gray-800 hover:bg-gray-50 hover:border-gray-300 focus:outline-none focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300 transition duration-150 ease-in-out");return(s,t)=>(a(),D(N(we),Vt({href:b.href,method:b.method,as:b.as},s.$attrs,{class:v.value}),{default:h(()=>[je(s.$slots,"default")]),_:3},16,["href","method","as","class"]))}},En={class:"space-y-1 pb-3 pt-2"},Vn={key:0,class:"mt-3 space-y-1"},In={class:"border-t border-gray-200 pb-1 pt-4"},Bn={class:"px-4"},Dn={class:"text-base font-medium text-gray-800"},Nn={class:"text-sm font-medium text-gray-500"},Un={class:"text-sm font-medium text-gray-500 capitalize"},Ln={class:"mt-3 space-y-1"},zn={__name:"MobileNavigation",props:{showingNavigationDropdown:{type:Boolean,required:!0},unreadNotificationCount:{type:Number,default:0}},emits:["openCreateTaskModal","openAddResource","openNotificationsSidebar","logoutSuccess","logoutError"],setup(b,{emit:A}){const v=A,s=W(()=>We().props.auth.user),{canDo:t}=et(),p=t("manage_projects"),c=t("compose_emails"),y=t("approve_emails"),d=t("create_users"),r=t("manage_roles"),o=t("manage_task_types"),l=t("create_clients"),u=()=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization,v("logoutSuccess")},m=C=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization,window.location.href="/login",v("logoutError",C)};return(C,g)=>{var V;return a(),i("div",{class:O([{block:b.showingNavigationDropdown,hidden:!b.showingNavigationDropdown},"sm:hidden"])},[e("div",En,[N(r)?(a(),i("div",Vn,[g[19]||(g[19]=e("div",{class:"px-4 font-medium text-base text-gray-800"},"Admin",-1)),n(ue,{href:C.route("dashboard"),active:C.route().current("dashboard")},{default:h(()=>g[3]||(g[3]=[k(" Dashboard ",-1)])),_:1,__:[3]},8,["href","active"]),N(t)("view_emails")?(a(),D(ue,{key:0,href:C.route("inbox"),active:C.route().current("inbox")},{default:h(()=>g[4]||(g[4]=[k(" Inbox ",-1)])),_:1,__:[4]},8,["href","active"])):_("",!0),N(l)?(a(),D(ue,{key:1,href:C.route("clients.page"),active:C.route().current("clients.page")},{default:h(()=>g[5]||(g[5]=[k(" Clients ",-1)])),_:1,__:[5]},8,["href","active"])):_("",!0),N(p)?(a(),D(ue,{key:2,href:C.route("projects.index"),active:C.route().current("projects.index")},{default:h(()=>g[6]||(g[6]=[k(" Projects ",-1)])),_:1,__:[6]},8,["href","active"])):_("",!0),N(d)?(a(),D(ue,{key:3,href:C.route("users.page"),active:C.route().current("users.page")},{default:h(()=>g[7]||(g[7]=[k(" Users ",-1)])),_:1,__:[7]},8,["href","active"])):_("",!0),N(c)?(a(),D(ue,{key:4,href:C.route("emails.compose"),active:C.route().current("emails.compose")},{default:h(()=>g[8]||(g[8]=[k(" Compose Email ",-1)])),_:1,__:[8]},8,["href","active"])):_("",!0),N(y)?(a(),D(ue,{key:5,href:C.route("emails.pending"),active:C.route().current("emails.pending")},{default:h(()=>g[9]||(g[9]=[k(" Approve Emails ",-1)])),_:1,__:[9]},8,["href","active"])):_("",!0),N(c)?(a(),D(ue,{key:6,href:C.route("emails.rejected"),active:C.route().current("emails.rejected")},{default:h(()=>g[10]||(g[10]=[k(" Rejected Emails ",-1)])),_:1,__:[10]},8,["href","active"])):_("",!0),N(d)?(a(),D(ue,{key:7,href:C.route("availability.index"),active:C.route().current("availability.index")},{default:h(()=>g[11]||(g[11]=[k(" Weekly Availability ",-1)])),_:1,__:[11]},8,["href","active"])):_("",!0),N(t)("manage_roles")?(a(),D(ue,{key:8,href:C.route("admin.roles.index"),active:C.route().current("admin.roles.index")},{default:h(()=>g[12]||(g[12]=[k(" Manage Roles ",-1)])),_:1,__:[12]},8,["href","active"])):_("",!0),N(t)("manage_permissions")?(a(),D(ue,{key:9,href:C.route("admin.permissions.index"),active:C.route().current("admin.permissions.index")},{default:h(()=>g[13]||(g[13]=[k(" Manage Permissions ",-1)])),_:1,__:[13]},8,["href","active"])):_("",!0),N(o)?(a(),D(ue,{key:10,href:C.route("task-types.page"),active:C.route().current("task-types.page")},{default:h(()=>g[14]||(g[14]=[k(" Task Types ",-1)])),_:1,__:[14]},8,["href","active"])):_("",!0),N(t)("manage_email_templates")?(a(),D(ue,{key:11,href:C.route("email-templates.page"),active:C.route().current("email-templates.page")},{default:h(()=>g[15]||(g[15]=[k(" Email Templates ",-1)])),_:1,__:[15]},8,["href","active"])):_("",!0),N(t)("manage_placeholder_definitions")?(a(),D(ue,{key:12,href:C.route("placeholder-definitions.page"),active:C.route().current("placeholder-definitions.page")},{default:h(()=>g[16]||(g[16]=[k(" Placeholder Definitions ",-1)])),_:1,__:[16]},8,["href","active"])):_("",!0),N(t)("view_shareable_resources")?(a(),D(ue,{key:13,href:C.route("shareable-resources.page"),active:C.route().current("shareable-resources.page")},{default:h(()=>g[17]||(g[17]=[k(" Shareable Resources ",-1)])),_:1,__:[17]},8,["href","active"])):_("",!0),N(t)("view_shareable_resources")?(a(),D(ue,{key:14,href:C.route("team-resources.page"),active:C.route().current("team-resources.page")},{default:h(()=>g[18]||(g[18]=[k(" Team Resources ",-1)])),_:1,__:[18]},8,["href","active"])):_("",!0)])):_("",!0)]),e("div",In,[e("div",Bn,[e("div",Dn,G(s.value.name),1),e("div",Nn,G(s.value.email),1),e("div",Un,G((V=s.value.role_data)==null?void 0:V.name),1)]),e("div",Ln,[n(ue,{as:"button",onClick:g[0]||(g[0]=E=>v("openCreateTaskModal"))},{default:h(()=>g[20]||(g[20]=[k(" Add Task ",-1)])),_:1,__:[20]}),n(ue,{as:"button",onClick:g[1]||(g[1]=E=>v("openAddResource"))},{default:h(()=>g[21]||(g[21]=[k(" Add Resource ",-1)])),_:1,__:[21]}),n(ue,{as:"button",onClick:g[2]||(g[2]=E=>v("openNotificationsSidebar"))},{default:h(()=>[k(" Notifications ("+G(b.unreadNotificationCount)+") ",1)]),_:1}),n(ue,{href:C.route("profile.edit")},{default:h(()=>g[22]||(g[22]=[k(" Profile ",-1)])),_:1,__:[22]},8,["href"]),n(ue,{href:C.route("logout"),method:"post",as:"button",onSuccess:u,onError:m},{default:h(()=>g[23]||(g[23]=[k(" Log Out ",-1)])),_:1,__:[23]},8,["href"])])])],2)}}},Rn={class:"task-history-list"},Fn={key:0,class:"text-center py-4"},On={key:1,class:"text-gray-500 text-sm py-2"},qn={key:2,class:"space-y-3"},Hn={class:"flex items-start"},Kn={class:"text-xl mr-2"},Wn={class:"text-sm text-gray-700"},Jn={class:"text-xs text-gray-500 mt-1"},Yn={__name:"TaskHistoryList",props:{activities:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},setup(b){const A=s=>s?new Date(s).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",v=s=>(console.log(s),s.includes("created")?"ðŸ†•":s.includes("started")?"ðŸš€":s.includes("paused")?"â¸ï¸":s.includes("resumed")?"â–¶ï¸":s.includes("unblocked")?"ðŸ”“":s.includes("blocked")?"â›”":s.includes("completed")?"âœ…":s.includes("revised")?"ðŸ”„":s.includes("deleted")?"ðŸ—‘ï¸":s.includes("assigned")?"ðŸ‘¤":s.includes("updated")?"ðŸ“":s.includes("added note")?"ðŸ—’ï¸":s.includes("commented")?"ðŸ’¬":"ðŸ“‹");return(s,t)=>(a(),i("div",Rn,[b.loading?(a(),i("div",Fn,t[0]||(t[0]=[e("div",{class:"inline-block animate-spin rounded-full h-6 w-6 border-t-2 border-b-2 border-indigo-500"},null,-1),e("p",{class:"mt-2 text-gray-500"},"Loading activity history...",-1)]))):b.activities.length===0?(a(),i("div",On," No activity history available for this task. ")):(a(),i("div",qn,[(a(!0),i(Z,null,oe(b.activities,p=>{var c;return a(),i("div",{key:p.id,class:"p-3 bg-gray-50 rounded-md"},[e("div",Hn,[e("span",Kn,G(v(p.description)),1),e("div",null,[e("p",Wn,G(p.description),1),e("p",Jn," By "+G(((c=p.causer)==null?void 0:c.name)||"System")+" on "+G(A(p.created_at)),1)])])])}),128))]))]))}},Qn=tt(Yn,[["__scopeId","data-v-423d54af"]]),Zn={class:"mt-4"},Xn={__name:"ChecklistCreator",props:{modelValue:{type:Array,required:!0},placeholder:{type:String,default:"e.g., Task 1, Task 2, Task 3"},label:{type:String,default:"Checklist Items"},density:{type:String,default:"spacious",validator:b=>["spacious","tight","notes"].includes(b)}},emits:["update:modelValue"],setup(b,{emit:A}){const v=b,s=A,t=M([]),p=M([]),c=M(!1);re(()=>v.modelValue,l=>{c.value=!0,t.value=JSON.parse(JSON.stringify(l)),(t.value.length===0||t.value[t.value.length-1].name.trim()!=="")&&t.value.push({name:"",completed:!1}),Se(()=>{c.value=!1})},{immediate:!0,deep:!0}),re(()=>t.value,l=>{c.value||s("update:modelValue",l)},{deep:!0});function y(l){t.value.splice(l,1),t.value.length===0&&t.value.push({name:"",completed:!1})}function d(l){l===t.value.length-1&&t.value[l].name.trim()!==""&&t.value.push({name:"",completed:!1})}function r(l){l<t.value.length-1&&Se(()=>{var u;(u=p.value[l+1])==null||u.focus()})}const o=W(()=>v.density==="tight"?{listClass:"space-y-1",itemClass:"flex items-center space-x-1",inputClass:"px-1 py-1 text-sm"}:v.density==="notes"?{listClass:"space-y-0.5",itemClass:"flex items-center space-x-1",inputClass:"px-1 py-0.5 text-sm border-transparent focus:border-transparent focus:ring-0 bg-transparent"}:{listClass:"space-y-2",itemClass:"flex items-center space-x-2",inputClass:""});return(l,u)=>(a(),i("div",Zn,[b.label?(a(),D(q,{key:0,value:b.label},null,8,["value"])):_("",!0),e("ul",{class:O(o.value.listClass)},[(a(!0),i(Z,null,oe(t.value,(m,C)=>(a(),i("li",{key:C,class:O(o.value.itemClass)},[b.density==="notes"?(a(),D(N(St),{key:0,class:"h4 w-4",onClick:g=>y(C)},null,8,["onClick"])):_("",!0),n(pe,{modelValue:m.name,"onUpdate:modelValue":g=>m.name=g,type:"text",class:O(["flex-1",o.value.inputClass]),placeholder:C===t.value.length-1?b.placeholder:"",onInput:g=>d(C),onKeyup:Oe(Et(g=>r(C),["prevent"]),["enter"]),ref_for:!0,ref:g=>{g&&(p.value[C]=g)}},null,8,["modelValue","onUpdate:modelValue","class","placeholder","onInput","onKeyup"]),t.value.length>1&&b.density!=="notes"?(a(),D(vt,{key:1,type:"button",onClick:g=>y(C)},{default:h(()=>[n(N(St),{class:"h-4 w-4"})]),_:2},1032,["onClick"])):_("",!0)],2))),128))],2)]))}},er={class:"p-6"},tr={class:"text-lg font-medium text-gray-900 mb-4"},ar={class:"mb-4"},lr=["placeholder"],sr={class:"flex justify-end space-x-3"},or={__name:"BlockReasonModal",props:{show:{type:Boolean,default:!1},title:{type:String,default:"Block Task"},confirmText:{type:String,default:"Block Task"},placeholder:{type:String,default:"Enter reason for blocking..."},initialReason:{type:String,default:""},disabled:{type:Boolean,default:!1}},emits:["close","confirm"],setup(b,{emit:A}){const v=b,s=A,t=M("");re(()=>v.show,y=>{y&&(t.value=v.initialReason||"")},{immediate:!0});const p=()=>s("close"),c=()=>{const y=(t.value||"").trim();y&&s("confirm",y)};return(y,d)=>(a(),D(Pe,{show:b.show,onClose:p},{default:h(()=>[e("div",er,[e("h2",tr,G(b.title),1),e("div",ar,[d[1]||(d[1]=e("p",{class:"text-sm text-gray-600 mb-2"},"Please provide a reason:",-1)),L(e("textarea",{"onUpdate:modelValue":d[0]||(d[0]=r=>t.value=r),class:"w-full rounded-md shadow-sm border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",rows:"3",placeholder:b.placeholder},null,8,lr),[[ne,t.value]])]),e("div",sr,[n(De,{onClick:p},{default:h(()=>d[2]||(d[2]=[k("Cancel",-1)])),_:1,__:[2]}),n(ce,{onClick:c,disabled:b.disabled||!t.value.trim(),class:"bg-red-600 hover:bg-red-700"},{default:h(()=>[k(G(b.confirmText),1)]),_:1},8,["disabled"])])])]),_:1},8,["show"]))}},ir={key:0,class:"text-center py-8 text-gray-500"},nr={key:1,class:"text-center py-8 text-red-600"},rr={key:2,class:"space-y-6"},ur={class:"bg-gray-50 p-4 rounded-lg shadow-sm"},dr={class:"text-xl font-bold text-gray-900 mb-2"},cr={class:"flex flex-wrap items-center gap-y-1 gap-x-2 text-sm text-gray-600 mb-4"},mr={key:0,class:"text-indigo-600 font-medium"},vr={class:"w-full flex items-center gap-1 mt-1"},pr={key:0,class:"text-blue-700 font-bold uppercase tracking-wider text-[10px] bg-blue-50 px-1.5 py-0.5 rounded border border-blue-100"},fr={key:1,class:"text-gray-400 mx-0.5"},gr={key:2,class:"text-purple-600 font-medium"},br={class:"text-gray-700 leading-relaxed"},yr={class:"mt-4 flex flex-wrap gap-2"},hr={key:0,class:"text-xs text-gray-500 mt-1"},xr={key:0,class:"bg-yellow-50 border-l-4 border-red-400 p-4 rounded-lg shadow-sm"},kr={class:"flex items-center"},wr={class:"ml-3"},_r={class:"mt-2 text-sm text-yellow-700"},Ar={key:1,class:"bg-amber-50 border-l-4 border-amber-400 p-4 rounded-lg shadow-sm"},Tr={class:"flex items-start"},Mr={class:"ml-3"},Cr={class:"mt-1 text-sm text-amber-700"},$r={key:0},Sr={class:"font-medium"},Gr={class:"text-red-500"},jr={key:2,class:"bg-blue-50 border-l-4 border-blue-400 p-3 rounded-lg shadow-sm"},Pr={class:"space-y-4 p-4 bg-white rounded-lg shadow-sm mb-4"},Er={class:"flex justify-between items-center border-b pb-2 mb-4"},Vr={key:0},Ir={key:1},Br={key:0,class:"mb-4"},Dr={class:"flex justify-end mt-4"},Nr={key:2,class:"text-gray-500 text-sm py-2"},Ur={class:"space-y-4 p-4 bg-white rounded-lg shadow-sm"},Lr={class:"flex items-center justify-between py-2 border-b border-gray-100"},zr={class:"flex-1 text-right"},Rr={key:0,class:"text-xs text-gray-400 ml-1"},Fr={key:1,class:"flex items-center space-x-2"},Or={class:"flex items-center justify-between py-2 border-b border-gray-100"},qr={class:"flex-1 text-right"},Hr={key:0,class:"text-xs text-gray-400 ml-1"},Kr={key:1,class:"flex items-center space-x-2"},Wr={class:"flex items-center justify-between py-2 border-b border-gray-100"},Jr={class:"flex-1 text-right"},Yr={key:0,class:"text-xs text-gray-400 ml-1"},Qr={key:1,class:"flex items-center space-x-2"},Zr={class:"flex items-center justify-between py-2 border-b border-gray-100"},Xr={class:"flex items-center gap-1 min-w-[100px]"},eu={class:"flex-1 text-right"},tu={key:0,class:"text-xs text-gray-400 ml-1"},au={key:1,class:"flex items-center justify-end space-x-2"},lu={class:"flex items-center justify-between py-2 border-b border-gray-100"},su={class:"text-gray-700"},ou={class:"flex items-start py-2 border-b border-gray-100"},iu={class:"flex-1 flex flex-wrap gap-2"},nu={key:0,class:"text-gray-500 text-sm"},ru={key:3,class:"p-4 bg-white rounded-lg shadow-sm"},uu={class:"space-y-3 text-sm"},du={class:"flex items-center justify-between border-b border-gray-100 pb-2"},cu={class:"text-gray-800 text-right flex-1 break-words"},mu={key:0,class:"flex items-center justify-between border-b border-gray-100 pb-2"},vu={class:"text-gray-800 text-right flex-1 break-words"},pu={key:1,class:"flex items-center justify-between border-b border-gray-100 pb-2"},fu={class:"flex-1 text-right overflow-hidden overflow-ellipsis whitespace-nowrap ml-2"},gu=["href","title"],bu={key:2,class:"flex items-center justify-between border-b border-gray-100 pb-2"},yu={class:"flex-1 text-right"},hu=["href"],xu={key:3,class:"pt-2"},ku=["href"],wu=["src"],_u={class:"bg-white p-4 rounded-lg shadow-sm"},Au={class:"mb-4 border-b pb-3 flex flex-col gap-3"},Tu={class:"flex items-center justify-between"},Mu={class:"flex items-center gap-2"},Cu=["disabled"],$u={key:0,class:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Su={class:"flex items-center gap-3"},Gu={class:"relative inline-flex items-center px-4 py-2 rounded-md border border-dashed border-indigo-300 text-indigo-700 bg-indigo-50 hover:bg-indigo-100 cursor-pointer transition"},ju=["disabled"],Pu={key:0,class:"flex flex-wrap gap-2"},Eu=["title"],Vu=["onClick"],Iu={key:0,class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3"},Bu={key:1,class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3"},Du={class:"aspect-video bg-gray-50 flex items-center justify-center overflow-hidden"},Nu=["src","alt","onClick"],Uu=["onClick"],Lu={class:"p-2 flex items-center justify-between"},zu=["title","onClick"],Ru=["onClick"],Fu={key:2,class:"text-sm text-gray-500"},Ou={class:"bg-white p-4 rounded-lg shadow-sm"},qu={class:"flex justify-between items-center mb-4 border-b pb-2"},Hu={key:0,class:"space-y-3"},Ku={class:"text-sm text-gray-700"},Wu={class:"text-xs text-gray-500 mt-1"},Ju={key:1,class:"text-gray-500 text-sm py-2"},Yu={class:"bg-white p-4 rounded-lg shadow-sm"},Qu={key:3,class:"text-center py-8 text-gray-500"},Zu={key:4,class:"mt-4 flex flex-col items-center"},Xu={key:0,class:"text-xs text-red-500 mt-1"},ed={class:"p-6"},td={class:"flex items-center justify-between mb-4"},ad={class:"mt-6 flex justify-end"},ld={class:"p-4 sm:p-6 w-full max-w-4xl"},sd={class:"flex justify-between items-center mb-3"},od=["title"],id={class:"bg-black/5 rounded-lg overflow-hidden",style:{"min-height":"320px"}},nd=["src"],rd=["src"],ud={key:2,class:"p-6 text-center text-gray-700"},dd=["href"],cd={key:3,class:"p-6 text-center text-gray-500"},md={__name:"TaskDetailSidebar",props:{taskId:{type:Number,required:!0},projectId:{type:Number,required:!0},projectUsers:{type:Array,default:()=>[]}},emits:["close","task-updated","task-deleted"],setup(b,{emit:A}){const v=b,s=A,t=M(null),p=M(!0),c=M(""),y=W(()=>{var S,f;return((f=(S=t.value)==null?void 0:S.milestone)==null?void 0:f.project_id)||null});ra(y);const d=W(()=>{const S=y.value;return S?{id:S}:null}),r=ua(d),{canDo:o,canManage:l}=et(y),u=l("projects",r),m=W(()=>o("change_due_date",r).value===!0||u.value===!0),C=M(!1),g=M(!1),V=M(!1),E=M(!1),T=M(null),w=M(null),j=M(null),z=M(null),R=M(!1),H=M([]),P=M(!1),I=M([]),K=M(!1),B=M(!1),$=M([]),Q=async()=>{if(v.taskId){K.value=!0;try{const S=await window.axios.get("/api/files",{params:{model_type:"Task",model_id:v.taskId}});I.value=S.data||[]}catch(S){console.error("Error fetching task files",S)}finally{K.value=!1}}},ie=S=>{$.value=Array.from(S.target.files||[])},ee=async()=>{if(!$.value.length)return;B.value=!0;const S=new FormData;$.value.forEach((f,ve)=>S.append(`files[${ve}]`,f)),S.append("model_type","Task"),S.append("model_id",v.taskId);try{await window.axios.post("/api/files",S,{headers:{"Content-Type":"multipart/form-data"}}),Be("Files uploaded"),$.value=[],await Q()}catch(f){console.error("Upload failed",f),ke("Failed to upload files")}finally{B.value=!1}},le=async S=>{if(await da(`Delete file "${S.filename}"?`,{confirmText:"Delete",cancelText:"Cancel",type:"warning"}))try{await window.axios.delete(`/api/files/${S.id}`),Be("File deleted"),await Q()}catch(ve){console.error("Delete failed",ve),ke("Failed to delete file")}},J=M(!1),se=M(null),de=S=>{se.value=S,J.value=!0},Te=()=>{J.value=!1,se.value=null},Me=S=>S?S.thumbnail_url?S.thumbnail_url:S.mime_type&&S.mime_type.includes("image")&&S.path_url?S.path_url:null:null,Ee=S=>{if(!S)return{type:"none"};const f=S.path_url||null,ve=(S.mime_type||"").toLowerCase();return f?ve.includes("image")?{type:"image",src:f}:ve.includes("pdf")||ve.includes("text")||ve.includes("html")?{type:"iframe",src:f}:{type:"external_link",url:f}:{type:"none"}},ye=W(()=>Ee(se.value)),at=[{value:"low",label:"Low"},{value:"medium",label:"Medium"},{value:"high",label:"High"}],Ve=M(!1),xe=M(!1),U=M([{name:"",completed:!1}]),x=M(!1),te=async()=>{p.value=!0,c.value="";try{const S=await window.axios.get(`/api/tasks/${v.taskId}`);t.value=S.data,T.value=t.value.assigned_to_id||null,w.value=t.value.due_date||null,j.value=t.value.priority||"medium",z.value=t.value.effort||null,F()}catch(S){c.value="Failed to load task details.",console.error("Error fetching task details:",S)}finally{p.value=!1}},F=async()=>{P.value=!0;try{const S=await window.axios.get("/api/activities",{params:{subject_type:"App\\Models\\Task",subject_id:v.taskId}});H.value=S.data}catch(S){console.error("Error fetching task activities:",S)}finally{P.value=!1}};re(()=>v.taskId,S=>{S?(te(),Q()):(t.value=null,I.value=[])},{immediate:!0});const me=M([]),lt=M(!1),Lt=W(()=>((me.value&&me.value.length?me.value:v.projectUsers)||[]).map(f=>({value:f.id,label:f.name}))),zt=async()=>{const S=y.value;if(S){lt.value=!0;try{const f=await window.axios.get(`/api/projects/${S}/users`);me.value=f.data||[]}catch(f){console.error("Failed to fetch project users",f),ke("Could not load project users")}finally{lt.value=!1}}},Rt=async()=>{if(!t.value||T.value===t.value.assigned_to_id){C.value=!1;return}try{const S=await window.axios.patch(`/api/tasks/${t.value.id}`,{assigned_to_user_id:T.value});t.value=S.data,s("task-updated",t.value),F()}catch(S){console.error("Error updating assigned user:",S),T.value=t.value.assigned_to_id,ke("Failed to update assigned user. Please try again.")}finally{C.value=!1}},Ft=async()=>{if(!t.value||w.value===t.value.due_date){g.value=!1;return}try{const S=await window.axios.patch(`/api/tasks/${t.value.id}`,{due_date:w.value});t.value=S.data,s("task-updated",t.value),F()}catch(S){console.error("Error updating due date:",S),w.value=t.value.due_date,ke("Failed to update due date. Please try again.")}finally{g.value=!1}},Ot=async()=>{if(!t.value||j.value===t.value.priority){V.value=!1;return}try{const S=await window.axios.patch(`/api/tasks/${t.value.id}`,{priority:j.value});t.value=S.data,s("task-updated",t.value)}catch(S){console.error("Error updating priority:",S),j.value=t.value.priority,ke("Failed to update priority. Please try again.")}finally{V.value=!1}},ft=async()=>{const S=z.value===""?null:parseInt(z.value);if(!t.value||S===t.value.effort){E.value=!1;return}try{const f=await window.axios.patch(`/api/tasks/${t.value.id}`,{effort:S});t.value=f.data,s("task-updated",t.value)}catch(f){console.error("Error updating effort:",f),z.value=t.value.effort,ke("Failed to update effort. Please try again.")}finally{E.value=!1}},qt=()=>{Ve.value=!0},Ht=()=>{te(),Ve.value=!1},Kt=async()=>{try{await Ma(t.value),s("task-deleted",t.value.id),s("close")}catch(S){console.error("Error deleting task:",S)}},Wt=async()=>{try{t.value=await xa(t.value),s("task-updated",t.value),F()}catch(S){console.error("Error starting task:",S)}},Jt=async()=>{try{t.value=await ka(t.value),s("task-updated",t.value),F()}catch(S){console.error("Error pausing task:",S)}},Yt=async()=>{try{t.value=await wa(t.value),s("task-updated",t.value),F()}catch(S){console.error("Error resuming task:",S)}},Qt=async()=>{try{t.value=await Aa(t.value),s("task-updated",t.value),F()}catch(S){console.error("Error completing task:",S)}},Zt=async()=>{try{t.value=await Ta(t.value),s("task-updated",t.value),F()}catch(S){console.error("Error revising task:",S)}},Xt=()=>{var S;xe.value=!xe.value,xe.value&&((S=t.value.details)!=null&&S.checklist&&t.value.details.checklist.length>0?(U.value=JSON.parse(JSON.stringify(t.value.details.checklist)),U.value[U.value.length-1].name!==""&&U.value.push({name:"",completed:!1})):U.value=[{name:"",completed:!1}])},ea=async()=>{if(!x.value){x.value=!0;try{const S=U.value.filter(Ce=>Ce.name.trim()!==""),f={details:{...t.value.details,checklist:S}},ve=await window.axios.patch(`/api/tasks/${t.value.id}`,f);t.value=ve.data,xe.value=!1,Be("Checklist saved successfully"),s("task-updated",t.value)}catch(S){console.error("Error saving checklist:",S),ke("Failed to save checklist")}finally{x.value=!1}}},Je=M(!1),ta=()=>{Je.value=!0},aa=async S=>{try{t.value=await Ca(t.value,S),Be("Task blocked successfully"),s("task-updated",t.value),F(),Je.value=!1}catch(f){console.error("Error blocking task:",f)}},la=async()=>{try{t.value=await _a(t.value),s("task-updated",t.value),F()}catch(S){console.error("Error unblocking task:",S)}},sa=W(()=>t.value?ya(t.value.status):""),st=W(()=>{var f,ve,Ce,Ue;if(!H.value||((f=t.value)==null?void 0:f.status)!=="Blocked")return null;const S=H.value.find(Le=>{var ze,Re;return Le.event==="updated"&&((Re=(ze=Le.properties)==null?void 0:ze.attributes)==null?void 0:Re.status)==="Blocked"});return S?(console.log(S.properties),{causer:((ve=S.causer)==null?void 0:ve.name)||"Unknown",reason:((Ue=(Ce=S.properties)==null?void 0:Ce.attributes)==null?void 0:Ue.block_reason)||"No reason provided."}):null});return(S,f)=>{var ve,Ce,Ue,Le,ze,Re,gt,bt,yt,ht,xt,kt,wt,_t;return a(),i("div",null,[p.value?(a(),i("div",ir," Loading task details... ")):c.value?(a(),i("div",nr,G(c.value),1)):t.value?(a(),i("div",rr,[e("div",ur,[e("h4",dr,G(t.value.name),1),e("div",cr,[e("span",{class:O(["px-2 py-1 rounded-full text-xs font-medium",sa.value])},G(t.value.status),3),t.value.task_type?(a(),i("span",mr," | "+G((ve=t.value.task_type)==null?void 0:ve.name)+" | ",1)):_("",!0),e("div",vr,[(Ce=t.value.milestone)!=null&&Ce.project?(a(),i("span",pr,G((Le=(Ue=t.value.milestone)==null?void 0:Ue.project)==null?void 0:Le.name),1)):_("",!0),(ze=t.value.milestone)!=null&&ze.project&&((Re=t.value.milestone)!=null&&Re.name)?(a(),i("span",fr,"/")):_("",!0),(gt=t.value.milestone)!=null&&gt.name?(a(),i("span",gr,G((bt=t.value.milestone)==null?void 0:bt.name),1)):_("",!0)])]),e("p",br,G(t.value.description||"No description provided."),1),e("div",yr,[t.value.status==="To Do"?(a(),D(ce,{key:0,onClick:Wt,class:"bg-blue-600 hover:bg-blue-700"},{default:h(()=>f[19]||(f[19]=[k(" Start Task ",-1)])),_:1,__:[19]})):t.value.status==="In Progress"?(a(),D(ce,{key:1,onClick:Jt,class:"bg-orange-600 hover:bg-orange-700"},{default:h(()=>f[20]||(f[20]=[k(" Pause Task ",-1)])),_:1,__:[20]})):t.value.status==="Paused"?(a(),D(ce,{key:2,onClick:Yt,class:"bg-blue-600 hover:bg-blue-700"},{default:h(()=>f[21]||(f[21]=[k(" Resume Task ",-1)])),_:1,__:[21]})):t.value.status==="Blocked"?(a(),D(ce,{key:3,onClick:la,class:"bg-green-600 hover:bg-green-700"},{default:h(()=>f[22]||(f[22]=[k(" Unblock Task ",-1)])),_:1,__:[22]})):_("",!0),t.value.status==="To Do"||t.value.status==="In Progress"||t.value.status==="Paused"?(a(),D(ce,{key:4,onClick:ta,class:"bg-red-600 hover:bg-red-700"},{default:h(()=>f[23]||(f[23]=[k(" Block Task ",-1)])),_:1,__:[23]})):_("",!0),t.value.status==="In Progress"?(a(),D(ce,{key:5,onClick:Qt,class:"bg-green-600 hover:bg-green-700"},{default:h(()=>f[24]||(f[24]=[k(" Complete Task ",-1)])),_:1,__:[24]})):_("",!0),t.value.status==="Done"?(a(),D(ce,{key:6,onClick:Zt,class:"bg-yellow-600 hover:bg-yellow-700"},{default:h(()=>f[25]||(f[25]=[k(" Revise Task ",-1)])),_:1,__:[25]})):_("",!0)]),t.value.status==="Done"?(a(),i("div",hr,' Revising will change the task status back to "To Do" ')):_("",!0)]),t.value.status==="Blocked"&&st.value?(a(),i("div",xr,[e("div",kr,[f[27]||(f[27]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.487 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11.75 13a.75.75 0 01-1.5 0v-2.25a.75.75 0 011.5 0V13zm-1.5-7.5a.75.75 0 011.5 0v1.5a.75.75 0 01-1.5 0V5.5z","clip-rule":"evenodd"})])],-1)),e("div",wr,[f[26]||(f[26]=e("h3",{class:"text-sm font-medium text-yellow-800"},"Task Blocked",-1)),e("div",_r,[e("p",null,"This task was blocked by **"+G(st.value.causer)+"** with the following reason:",1),e("p",null,G(st.value.reason),1)])])])])):_("",!0),t.value.needs_approval?(a(),i("div",Ar,[e("div",Tr,[f[32]||(f[32]=e("svg",{class:"h-5 w-5 text-amber-500 mt-0.5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.487 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0V9a1 1 0 112 0v4zm-1 4a1.25 1.25 0 100-2.5A1.25 1.25 0 0010 17z","clip-rule":"evenodd"})],-1)),e("div",Mr,[f[31]||(f[31]=e("h3",{class:"text-sm font-semibold text-amber-800"},"Approval required",-1)),e("p",Cr,[f[29]||(f[29]=k(" This task needs approval",-1)),t.value.creator_name?(a(),i("span",$r,[f[28]||(f[28]=k(" from ",-1)),e("span",Sr,G(t.value.creator_name),1)])):_("",!0),f[30]||(f[30]=k(". ",-1))]),e("p",Gr,"Do Not, complete the task and make sure you report it to "+G(t.value.creator_name)+" or Project Manager",1)])])])):_("",!0),t.value.requires_qa?(a(),i("div",jr,f[33]||(f[33]=[Qe('<div class="flex items-start gap-2"><svg class="h-5 w-5 text-blue-500 mt-0.5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6.375c-1.148 0-2.285-.22-3.351-.651l-2.262-.906a1.125 1.125 0 00-1.537 1.04V11.25c0 5.157 3.33 9.8 8.25 11.25 4.92-1.45 8.25-6.093 8.25-11.25V5.858a1.125 1.125 0 00-1.537-1.04l-2.262.906A9.568 9.568 0 0112 6.375z"></path><path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75l2.25 2.25L15 11.25"></path></svg><div class="text-sm text-blue-800"> This task requires QA verification once completed. </div></div>',1)]))):_("",!0),e("div",Pr,[e("div",Er,[f[34]||(f[34]=e("h5",{class:"text-lg font-semibold text-gray-800"},"Task Checklist",-1)),e("button",{onClick:Xt,class:"text-indigo-600 hover:text-indigo-800 text-sm font-medium flex items-center"},[xe.value?(a(),i("span",Ir,"Cancel")):(a(),i("span",Vr,G((yt=t.value.details)!=null&&yt.checklist&&t.value.details.checklist.length>0?"Edit Checklist":"Add Checklist"),1))])]),xe.value?(a(),i("div",Br,[n(Xn,{modelValue:U.value,"onUpdate:modelValue":f[0]||(f[0]=Y=>U.value=Y),placeholder:"e.g., Review design, Update documentation",label:"Checklist Items",density:"notes"},null,8,["modelValue"]),e("div",Dr,[n(ce,{onClick:ea,disabled:x.value,class:"flex items-center space-x-1"},{default:h(()=>[n(N(Pi),{class:"h-4 w-4"}),f[35]||(f[35]=e("span",null,"Save Checklist",-1))]),_:1,__:[35]},8,["disabled"])])])):_("",!0),(ht=t.value.details)!=null&&ht.checklist&&t.value.details.checklist.length>0&&!xe.value?(a(),D($a,{key:1,items:t.value.details.checklist,"api-endpoint":`/api/tasks/${t.value.id}`,title:"Items to complete:","payload-transformer":Y=>({details:{...t.value.details,checklist:Y}})},null,8,["items","api-endpoint","payload-transformer"])):_("",!0),(!((xt=t.value.details)!=null&&xt.checklist)||t.value.details.checklist.length===0)&&!xe.value?(a(),i("div",Nr,' No checklist items for this task yet. Click "Add Checklist" to create one. ')):_("",!0)]),e("div",Ur,[f[42]||(f[42]=e("h5",{class:"text-lg font-semibold text-gray-800 border-b pb-2 mb-4"},"Task Attributes",-1)),e("div",Lr,[n(q,{class:"min-w-[100px] text-gray-600"},{default:h(()=>f[36]||(f[36]=[k("Assigned To:",-1)])),_:1,__:[36]}),e("div",zr,[C.value?(a(),i("div",Fr,[n(ge,{id:"edit-assigned-to",modelValue:T.value,"onUpdate:modelValue":f[2]||(f[2]=Y=>T.value=Y),options:Lt.value,"value-key":"value","label-key":"label",placeholder:"Unassigned",class:"mt-1 flex-1","allow-empty":!0},null,8,["modelValue","options"]),e("button",{onClick:Rt,class:"text-green-600 hover:text-green-800 text-sm font-medium"},"Save"),e("button",{onClick:f[3]||(f[3]=Y=>C.value=!1),class:"text-gray-600 hover:text-gray-800 text-sm font-medium"},"Cancel")])):(a(),i("div",{key:0,onClick:f[1]||(f[1]=Y=>t.value.status!=="Done"?(zt(),C.value=!0):ot("Cannot change assignment for a completed task. Use the Revise button to change the task status first.")),class:O(["cursor-pointer",{"text-indigo-600 hover:text-indigo-800":t.value.status!=="Done","text-gray-500":t.value.status==="Done"}])},[k(G(((kt=t.value.assigned_to)==null?void 0:kt.name)||"Unassigned")+" ",1),t.value.status!=="Done"?(a(),i("span",Rr,"(Click to edit)")):_("",!0)],2))])]),e("div",Or,[n(q,{class:"min-w-[100px] text-gray-600"},{default:h(()=>f[37]||(f[37]=[k("Due Date:",-1)])),_:1,__:[37]}),e("div",qr,[g.value?(a(),i("div",Kr,[n(pe,{id:"edit-due-date",modelValue:w.value,"onUpdate:modelValue":f[5]||(f[5]=Y=>w.value=Y),type:"date",class:"mt-1 flex-1"},null,8,["modelValue"]),e("button",{onClick:Ft,class:"text-green-600 hover:text-green-800 text-sm font-medium"},"Save"),e("button",{onClick:f[6]||(f[6]=Y=>g.value=!1),class:"text-gray-600 hover:text-gray-800 text-sm font-medium"},"Cancel")])):(a(),i("div",{key:0,onClick:f[4]||(f[4]=Y=>m.value?g.value=!0:null),class:O(["cursor-pointer",m.value?"text-indigo-600 hover:text-indigo-800":"text-gray-700 cursor-default"])},[k(G(t.value.due_date?N(ba)(t.value.due_date).format("MMM D, YYYY"):"No Due Date")+" ",1),m.value?(a(),i("span",Hr,"(Click to edit)")):_("",!0)],2))])]),e("div",Wr,[n(q,{class:"min-w-[100px] text-gray-600"},{default:h(()=>f[38]||(f[38]=[k("Priority:",-1)])),_:1,__:[38]}),e("div",Jr,[V.value?(a(),i("div",Qr,[n(ge,{id:"edit-priority",modelValue:j.value,"onUpdate:modelValue":f[8]||(f[8]=Y=>j.value=Y),options:at,"value-key":"value","label-key":"label",placeholder:"Select priority",class:"mt-1 flex-1"},null,8,["modelValue"]),e("button",{onClick:Ot,class:"text-green-600 hover:text-green-800 text-sm font-medium"},"Save"),e("button",{onClick:f[9]||(f[9]=Y=>V.value=!1),class:"text-gray-600 hover:text-gray-800 text-sm font-medium"},"Cancel")])):(a(),i("div",{key:0,onClick:f[7]||(f[7]=Y=>t.value.status!=="Done"?V.value=!0:ot("Cannot change priority for a completed task. Use the Revise button to change the task status first.")),class:O(["cursor-pointer",{"text-indigo-600 hover:text-indigo-800":t.value.status!=="Done","text-gray-500":t.value.status==="Done"}])},[e("span",{class:O({"text-red-600 font-medium":t.value.priority==="high","text-yellow-600 font-medium":t.value.priority==="medium","text-green-600 font-medium":t.value.priority==="low"})},G(t.value.priority?t.value.priority.charAt(0).toUpperCase()+t.value.priority.slice(1):"Medium"),3),t.value.status!=="Done"?(a(),i("span",Yr,"(Click to edit)")):_("",!0)],2))])]),e("div",Zr,[e("div",Xr,[n(q,{class:"text-gray-600"},{default:h(()=>f[39]||(f[39]=[k("Effort:",-1)])),_:1,__:[39]}),e("button",{onClick:f[10]||(f[10]=Y=>R.value=!0),class:"text-gray-400 hover:text-indigo-600 transition-colors",title:"View Estimation Guide"},[n(N(Nt),{class:"h-4 w-4"})])]),e("div",eu,[E.value?(a(),i("div",au,[n(pe,{id:"edit-effort",modelValue:z.value,"onUpdate:modelValue":f[12]||(f[12]=Y=>z.value=Y),type:"number",min:"0",class:"mt-1 w-20 text-right",placeholder:"Pts",onKeypress:Oe(ft,["enter"])},null,8,["modelValue"]),e("button",{onClick:ft,class:"text-green-600 hover:text-green-800 p-1"},[n(N(Ga),{class:"h-5 w-5"})]),e("button",{onClick:f[13]||(f[13]=Y=>E.value=!1),class:"text-red-600 hover:text-red-800 p-1"},[n(N(Ct),{class:"h-5 w-5"})])])):(a(),i("div",{key:0,onClick:f[11]||(f[11]=Y=>t.value.status!=="Done"?E.value=!0:ot("Cannot change effort for a completed task.")),class:O(["cursor-pointer",{"text-indigo-600 hover:text-indigo-800":t.value.status!=="Done","text-gray-500":t.value.status==="Done"}])},[e("span",{class:O({"font-bold":t.value.effort})},G(t.value.effort?t.value.effort+" pts":"Not set"),3),t.value.status!=="Done"?(a(),i("span",tu,"(Click to edit)")):_("",!0)],2))])]),e("div",lu,[n(q,{class:"min-w-[100px] text-gray-600"},{default:h(()=>f[40]||(f[40]=[k("Created:",-1)])),_:1,__:[40]}),e("span",su,G(t.value.created_at?new Date(t.value.created_at).toLocaleDateString():"N/A"),1)]),e("div",ou,[n(q,{class:"min-w-[100px] text-gray-600 mt-1"},{default:h(()=>f[41]||(f[41]=[k("Tags:",-1)])),_:1,__:[41]}),e("div",iu,[(a(!0),i(Z,null,oe(t.value.tags,Y=>(a(),i("span",{key:Y.id,class:"inline-flex items-center px-3 py-1 text-sm font-medium bg-indigo-100 text-indigo-800 rounded-full shadow-sm"},G(Y.name),1))),128)),!t.value.tags||t.value.tags.length===0?(a(),i("span",nu,"No tags")):_("",!0)])])]),(wt=t.value.additional_info)!=null&&wt.bugherd_info?(a(),i("div",ru,[f[49]||(f[49]=e("h5",{class:"text-lg font-semibold text-gray-800 border-b pb-2 mb-4"},"BugHerd Details",-1)),e("div",uu,[e("div",du,[f[43]||(f[43]=e("span",{class:"text-gray-600 font-medium w-1/3"},"Requester:",-1)),e("span",cu,G(((_t=t.value.additional_info.bugherd_info.requester)==null?void 0:_t.display_name)||t.value.additional_info.bugherd_info.requester_email||"Unknown"),1)]),t.value.additional_info.bugherd_info.requester_os||t.value.additional_info.bugherd_info.requester_browser?(a(),i("div",mu,[f[44]||(f[44]=e("span",{class:"text-gray-600 font-medium w-1/3"},"Environment:",-1)),e("span",vu,G(t.value.additional_info.bugherd_info.requester_os)+" / "+G(t.value.additional_info.bugherd_info.requester_browser),1)])):_("",!0),t.value.additional_info.bugherd_info.url?(a(),i("div",pu,[f[45]||(f[45]=e("span",{class:"text-gray-600 font-medium w-24"},"Page URL:",-1)),e("div",fu,[e("a",{href:t.value.additional_info.bugherd_info.url,target:"_blank",class:"text-indigo-600 hover:text-indigo-800",title:t.value.additional_info.bugherd_info.url},G(t.value.additional_info.bugherd_info.url),9,gu)])])):_("",!0),t.value.additional_info.bugherd_info.secret_link?(a(),i("div",bu,[f[47]||(f[47]=e("span",{class:"text-gray-600 font-medium w-1/3"},"Bug Link:",-1)),e("div",yu,[e("a",{href:t.value.additional_info.bugherd_info.secret_link,target:"_blank",class:"text-indigo-600 hover:text-indigo-800 inline-flex items-center gap-1"},f[46]||(f[46]=[k(" View Original ",-1),e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{d:"M11 3a1 1 0 100 2h2.586l-6.293 6.293a1 1 0 101.414 1.414L15 6.414V9a1 1 0 102 0V4a1 1 0 00-1-1h-5z"}),e("path",{d:"M5 5a2 2 0 00-2 2v8a2 2 0 002 2h8a2 2 0 002-2v-3a1 1 0 10-2 0v3H5V7h3a1 1 0 000-2H5z"})],-1)]),8,hu)])])):_("",!0),t.value.additional_info.bugherd_info.screenshot_url?(a(),i("div",xu,[f[48]||(f[48]=e("span",{class:"text-gray-600 font-medium block mb-2"},"Screenshot:",-1)),e("a",{href:t.value.additional_info.bugherd_info.screenshot_url,target:"_blank",class:"block border border-gray-200 rounded-lg overflow-hidden hover:opacity-90 transition-opacity max-w-sm mx-auto shadow-sm"},[e("img",{src:t.value.additional_info.bugherd_info.screenshot_url,alt:"BugHerd Screenshot",class:"w-full h-auto object-cover"},null,8,wu)],8,ku)])):_("",!0)])])):_("",!0),e("div",_u,[e("div",Au,[e("div",Tu,[f[51]||(f[51]=e("h5",{class:"text-lg font-semibold text-gray-800"},"Files",-1)),e("div",Mu,[e("button",{type:"button",class:"inline-flex items-center px-4 py-2 rounded-md bg-indigo-600 text-white hover:bg-indigo-700 transition disabled:opacity-60 disabled:cursor-not-allowed",disabled:B.value||$.value.length===0,onClick:ee},[B.value?(a(),i("svg",$u,f[50]||(f[50]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"},null,-1)]))):_("",!0),e("span",null,G(B.value?"Uploading...":"Upload"),1)],8,Cu)])]),e("div",Su,[e("label",Gu,[f[52]||(f[52]=e("svg",{class:"h-5 w-5 mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1M4 12l1.5-1.5M20 12l-1.5-1.5M12 4v12"})],-1)),f[53]||(f[53]=e("span",{class:"font-medium"},"Choose Files",-1)),e("input",{class:"absolute inset-0 opacity-0 cursor-pointer",type:"file",multiple:"",onChange:ie,disabled:B.value},null,40,ju)]),f[54]||(f[54]=e("p",{class:"text-xs text-gray-500"},"You can select multiple files. Images, PDFs, Docs are supported.",-1))]),$.value.length?(a(),i("div",Pu,[(a(!0),i(Z,null,oe($.value,(Y,Ie)=>(a(),i("span",{key:Ie,class:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-gray-100 text-gray-800 text-xs"},[f[55]||(f[55]=e("svg",{class:"h-4 w-4 text-indigo-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})],-1)),e("span",{class:"max-w-[160px] truncate",title:Y.name},G(Y.name),9,Eu),e("button",{type:"button",class:"text-gray-500 hover:text-red-600",onClick:Id=>$.value=$.value.filter((Bd,oa)=>oa!==Ie)},"Ã—",8,Vu)]))),128))])):_("",!0)]),e("div",null,[K.value?(a(),i("div",Iu,[(a(),i(Z,null,oe(6,Y=>e("div",{key:Y,class:"h-28 bg-gray-100 rounded animate-pulse"})),64))])):I.value.length>0?(a(),i("div",Bu,[(a(!0),i(Z,null,oe(I.value,Y=>(a(),i("div",{key:Y.id,class:"group relative rounded-lg border border-gray-200 overflow-hidden bg-white shadow-sm hover:shadow-md transition"},[e("div",Du,[Me(Y)?(a(),i("img",{key:0,src:Me(Y),alt:Y.filename,class:"object-cover w-full h-full",onClick:Ie=>de(Y)},null,8,Nu)):(a(),i("div",{key:1,class:"text-gray-400",onClick:Ie=>de(Y)},f[56]||(f[56]=[e("svg",{class:"h-10 w-10",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})],-1)]),8,Uu))]),e("div",Lu,[e("button",{class:"text-xs text-blue-600 hover:underline truncate max-w-[70%] text-left",title:Y.filename,onClick:Ie=>de(Y)},G(Y.filename),9,zu),e("button",{class:"text-red-600 hover:text-red-800 text-xs",onClick:Ie=>le(Y)},"Delete",8,Ru)])]))),128))])):(a(),i("div",Fu,"No files attached."))])]),e("div",Ou,[e("div",qu,[f[58]||(f[58]=e("h5",{class:"text-lg font-semibold text-gray-800"},"Notes",-1)),n(ce,{onClick:qt,class:"bg-indigo-600 hover:bg-indigo-700 transition-colors"},{default:h(()=>f[57]||(f[57]=[k(" Add Note ",-1)])),_:1,__:[57]})]),t.value.notes&&t.value.notes.length>0?(a(),i("div",Hu,[(a(!0),i(Z,null,oe(t.value.notes,Y=>(a(),i("div",{key:Y.id,class:"p-3 bg-gray-50 rounded-md"},[e("p",Ku,G(Y.content),1),e("p",Wu," By "+G(Y.creator_name||"Unknown")+" on "+G(new Date(Y.created_at).toLocaleDateString()),1)]))),128))])):(a(),i("div",Ju,"No notes for this task yet."))]),e("div",Yu,[f[59]||(f[59]=e("h5",{class:"text-lg font-semibold text-gray-800 border-b pb-2 mb-4"},"History",-1)),n(Qn,{activities:H.value,loading:P.value},null,8,["activities","loading"])])])):(a(),i("div",Qu," Select a task to view details. ")),t.value&&t.value.status!=="Done"?(a(),i("div",Zu,[n(vt,{onClick:Kt,disabled:t.value.status!=="To Do"},{default:h(()=>f[60]||(f[60]=[k(" Delete Task ",-1)])),_:1,__:[60]},8,["disabled"]),t.value.status!=="To Do"?(a(),i("p",Xu,"Task can only be deleted in 'To Do' status.")):_("",!0)])):_("",!0),n(Pe,{show:R.value,onClose:f[16]||(f[16]=Y=>R.value=!1),"max-width":"lg"},{default:h(()=>[e("div",ed,[e("div",td,[f[61]||(f[61]=e("h3",{class:"text-lg font-medium text-gray-900"},"Effort Estimation Guide",-1)),e("button",{onClick:f[14]||(f[14]=Y=>R.value=!1),class:"text-gray-400 hover:text-gray-500"},[n(N(Ct),{class:"h-6 w-6"})])]),n(Ut),e("div",ad,[n(De,{onClick:f[15]||(f[15]=Y=>R.value=!1)},{default:h(()=>f[62]||(f[62]=[k("Close",-1)])),_:1,__:[62]})])])]),_:1},8,["show"]),n(ha,{show:Ve.value,"task-for-note":t.value,onClose:f[17]||(f[17]=Y=>Ve.value=!1),onNoteAdded:Ht},null,8,["show","task-for-note"]),n(or,{show:Je.value,title:"Block Task","confirm-text":"Block Task",placeholder:"Enter reason for blocking...",onClose:f[18]||(f[18]=Y=>Je.value=!1),onConfirm:aa},null,8,["show"]),n(Pe,{show:J.value,onClose:Te},{default:h(()=>[e("div",ld,[e("div",sd,[e("h3",{class:"text-lg font-semibold text-gray-800 truncate",title:se.value&&se.value.filename?se.value.filename:""},G(se.value&&se.value.filename?se.value.filename:"Preview"),9,od),e("button",{class:"text-gray-500 hover:text-gray-700",onClick:Te},"âœ•")]),e("div",id,[k(G(ye.value.type)+" ",1),ye.value.type==="iframe"?(a(),i("iframe",{key:0,src:ye.value.src,class:"w-full h-[70vh]",frameborder:"0",allow:"autoplay; encrypted-media",allowfullscreen:""},null,8,nd)):ye.value.type==="image"?(a(),i("img",{key:1,src:ye.value.src,alt:"Preview",class:"w-full h-auto"},null,8,rd)):ye.value.type==="external_link"?(a(),i("div",ud,[f[63]||(f[63]=e("p",null,"This file can't be embedded. You can open it using the link below:",-1)),e("a",{href:ye.value.url,target:"_blank",class:"text-indigo-600 hover:underline break-all"},G(ye.value.url),9,dd)])):(a(),i("div",cd,"No preview available."))])])]),_:1},8,["show"])])}}},vd={key:1,class:"p-4 text-gray-500"},pd={key:0,class:"flex justify-end space-x-3"},fd={__name:"TaskSidebar",emits:["taskUpdated","taskDeleted"],setup(b){const A=M(null);return(v,s)=>(a(),D(Bt,{show:N(_e).show,"onUpdate:show":N(it),title:N(_e).taskId?"Task Details":"Details",initialWidth:50},{content:h(()=>[N(_e).taskId?(a(),D(md,{key:0,"task-id":N(_e).taskId,"project-id":N(_e).projectId,"project-users":N(_e).projectUsers,ref_key:"taskDetailSidebarRef",ref:A,onClose:N(it),onTaskUpdated:s[0]||(s[0]=t=>{v.$emit("taskUpdated",t)}),onTaskDeleted:s[1]||(s[1]=t=>{v.$emit("taskDeleted",t),N(it)()})},null,8,["task-id","project-id","project-users","onClose"])):N(_e).show?(a(),i("div",vd," No task selected or task ID is missing. ")):_("",!0)]),footer:h(()=>[N(_e).taskId?(a(),i("div",pd,[A.value&&A.value.task&&A.value.task.status!=="In Progress"&&A.value.task.status!=="Done"?(a(),D(De,{key:0,onClick:A.value.startTask,class:"bg-blue-50 text-blue-700 hover:bg-blue-100"},{default:h(()=>s[2]||(s[2]=[k(" Start Task ",-1)])),_:1,__:[2]},8,["onClick"])):_("",!0),A.value&&A.value.task&&A.value.task.status==="In Progress"?(a(),D(De,{key:1,onClick:A.value.completeTask,class:"bg-green-50 text-green-700 hover:bg-green-100"},{default:h(()=>s[3]||(s[3]=[k(" Complete Task ",-1)])),_:1,__:[3]},8,["onClick"])):_("",!0),A.value&&A.value.task?(a(),D(vt,{key:2,onClick:A.value.deleteTask,class:"bg-red-50 text-red-700 hover:bg-red-100"},{default:h(()=>s[4]||(s[4]=[k(" Delete Task ",-1)])),_:1,__:[4]},8,["onClick"])):_("",!0)])):_("",!0)]),_:1},8,["show","onUpdate:show","title"]))}},rt=M(!1),Fe=M([]),ut=M(!1);function gd(){const b=async()=>{var s;try{const t=await fe.get("/api/notices/unread");Fe.value=((s=t.data)==null?void 0:s.data)||[],rt.value=Fe.value.length>0}catch(t){console.error("Failed to fetch unread notices",t)}},A=async()=>{if(ut.value)try{const s=Fe.value.map(t=>t.id);if(s.length===0)return;await fe.post("/api/notices/acknowledge",{notice_ids:s}),v()}catch(s){console.error("Failed to acknowledge notices",s)}},v=()=>{rt.value=!1,Fe.value=[],ut.value=!1};return be(()=>{b()}),It(()=>{}),{showNoticeModal:rt,unreadNotices:Fe,acknowledgeChecked:ut,fetchUnreadNotices:b,acknowledgeNotices:A,closeModal:v}}const bd={class:"mb-4"},yd={__name:"TimezoneSelect",props:{modelValue:{type:String,default:null},label:{type:String,default:"Timezone"},placeholder:{type:String,default:"Select a timezone"},disabled:{type:Boolean,default:!1},required:{type:Boolean,default:!1},error:{type:String,default:""}},emits:["update:modelValue","change"],setup(b,{emit:A}){const v=b,s=A,t=W(()=>[{value:"Africa/Abidjan",label:"Africa/Abidjan (GMT+00:00)"},{value:"Africa/Accra",label:"Africa/Accra (GMT+00:00)"},{value:"Africa/Addis_Ababa",label:"Africa/Addis_Ababa (GMT+03:00)"},{value:"Africa/Algiers",label:"Africa/Algiers (GMT+01:00)"},{value:"Africa/Asmara",label:"Africa/Asmara (GMT+03:00)"},{value:"Africa/Bamako",label:"Africa/Bamako (GMT+00:00)"},{value:"Africa/Bangui",label:"Africa/Bangui (GMT+01:00)"},{value:"Africa/Banjul",label:"Africa/Banjul (GMT+00:00)"},{value:"Africa/Bissau",label:"Africa/Bissau (GMT+00:00)"},{value:"Africa/Blantyre",label:"Africa/Blantyre (GMT+02:00)"},{value:"Africa/Brazzaville",label:"Africa/Brazzaville (GMT+01:00)"},{value:"Africa/Bujumbura",label:"Africa/Bujumbura (GMT+02:00)"},{value:"Africa/Cairo",label:"Africa/Cairo (GMT+02:00)"},{value:"Africa/Casablanca",label:"Africa/Casablanca (GMT+01:00)"},{value:"Africa/Ceuta",label:"Africa/Ceuta (GMT+01:00)"},{value:"Africa/Conakry",label:"Africa/Conakry (GMT+00:00)"},{value:"Africa/Dakar",label:"Africa/Dakar (GMT+00:00)"},{value:"Africa/Dar_es_Salaam",label:"Africa/Dar_es_Salaam (GMT+03:00)"},{value:"Africa/Djibouti",label:"Africa/Djibouti (GMT+03:00)"},{value:"Africa/Douala",label:"Africa/Douala (GMT+01:00)"},{value:"Africa/El_Aaiun",label:"Africa/El_Aaiun (GMT+01:00)"},{value:"Africa/Freetown",label:"Africa/Freetown (GMT+00:00)"},{value:"Africa/Gaborone",label:"Africa/Gaborone (GMT+02:00)"},{value:"Africa/Harare",label:"Africa/Harare (GMT+02:00)"},{value:"Africa/Johannesburg",label:"Africa/Johannesburg (GMT+02:00)"},{value:"Africa/Juba",label:"Africa/Juba (GMT+03:00)"},{value:"Africa/Kampala",label:"Africa/Kampala (GMT+03:00)"},{value:"Africa/Khartoum",label:"Africa/Khartoum (GMT+02:00)"},{value:"Africa/Kigali",label:"Africa/Kigali (GMT+02:00)"},{value:"Africa/Kinshasa",label:"Africa/Kinshasa (GMT+01:00)"},{value:"Africa/Lagos",label:"Africa/Lagos (GMT+01:00)"},{value:"Africa/Libreville",label:"Africa/Libreville (GMT+01:00)"},{value:"Africa/Lome",label:"Africa/Lome (GMT+00:00)"},{value:"Africa/Luanda",label:"Africa/Luanda (GMT+01:00)"},{value:"Africa/Lubumbashi",label:"Africa/Lubumbashi (GMT+02:00)"},{value:"Africa/Lusaka",label:"Africa/Lusaka (GMT+02:00)"},{value:"Africa/Malabo",label:"Africa/Malabo (GMT+01:00)"},{value:"Africa/Maputo",label:"Africa/Maputo (GMT+02:00)"},{value:"Africa/Maseru",label:"Africa/Maseru (GMT+02:00)"},{value:"Africa/Mbabane",label:"Africa/Mbabane (GMT+02:00)"},{value:"Africa/Mogadishu",label:"Africa/Mogadishu (GMT+03:00)"},{value:"Africa/Monrovia",label:"Africa/Monrovia (GMT+00:00)"},{value:"Africa/Nairobi",label:"Africa/Nairobi (GMT+03:00)"},{value:"Africa/Ndjamena",label:"Africa/Ndjamena (GMT+01:00)"},{value:"Africa/Niamey",label:"Africa/Niamey (GMT+01:00)"},{value:"Africa/Nouakchott",label:"Africa/Nouakchott (GMT+00:00)"},{value:"Africa/Ouagadougou",label:"Africa/Ouagadougou (GMT+00:00)"},{value:"Africa/Porto-Novo",label:"Africa/Porto-Novo (GMT+01:00)"},{value:"Africa/Sao_Tome",label:"Africa/Sao_Tome (GMT+00:00)"},{value:"Africa/Tripoli",label:"Africa/Tripoli (GMT+02:00)"},{value:"Africa/Tunis",label:"Africa/Tunis (GMT+01:00)"},{value:"Africa/Windhoek",label:"Africa/Windhoek (GMT+02:00)"},{value:"America/Adak",label:"America/Adak (GMT-10:00)"},{value:"America/Anchorage",label:"America/Anchorage (GMT-09:00)"},{value:"America/Anguilla",label:"America/Anguilla (GMT-04:00)"},{value:"America/Antigua",label:"America/Antigua (GMT-04:00)"},{value:"America/Araguaina",label:"America/Araguaina (GMT-03:00)"},{value:"America/Argentina/Buenos_Aires",label:"America/Argentina/Buenos_Aires (GMT-03:00)"},{value:"America/Argentina/Catamarca",label:"America/Argentina/Catamarca (GMT-03:00)"},{value:"America/Argentina/Cordoba",label:"America/Argentina/Cordoba (GMT-03:00)"},{value:"America/Argentina/Jujuy",label:"America/Argentina/Jujuy (GMT-03:00)"},{value:"America/Argentina/La_Rioja",label:"America/Argentina/La_Rioja (GMT-03:00)"},{value:"America/Argentina/Mendoza",label:"America/Argentina/Mendoza (GMT-03:00)"},{value:"America/Argentina/Rio_Gallegos",label:"America/Argentina/Rio_Gallegos (GMT-03:00)"},{value:"America/Argentina/Salta",label:"America/Argentina/Salta (GMT-03:00)"},{value:"America/Argentina/San_Juan",label:"America/Argentina/San_Juan (GMT-03:00)"},{value:"America/Argentina/San_Luis",label:"America/Argentina/San_Luis (GMT-03:00)"},{value:"America/Argentina/Tucuman",label:"America/Argentina/Tucuman (GMT-03:00)"},{value:"America/Argentina/Ushuaia",label:"America/Argentina/Ushuaia (GMT-03:00)"},{value:"America/Aruba",label:"America/Aruba (GMT-04:00)"},{value:"America/Asuncion",label:"America/Asuncion (GMT-04:00)"},{value:"America/Atikokan",label:"America/Atikokan (GMT-05:00)"},{value:"America/Bahia",label:"America/Bahia (GMT-03:00)"},{value:"America/Bahia_Banderas",label:"America/Bahia_Banderas (GMT-06:00)"},{value:"America/Barbados",label:"America/Barbados (GMT-04:00)"},{value:"America/Belem",label:"America/Belem (GMT-03:00)"},{value:"America/Belize",label:"America/Belize (GMT-06:00)"},{value:"America/Blanc-Sablon",label:"America/Blanc-Sablon (GMT-04:00)"},{value:"America/Boa_Vista",label:"America/Boa_Vista (GMT-04:00)"},{value:"America/Bogota",label:"America/Bogota (GMT-05:00)"},{value:"America/Boise",label:"America/Boise (GMT-06:00)"},{value:"America/Cambridge_Bay",label:"America/Cambridge_Bay (GMT-06:00)"},{value:"America/Campo_Grande",label:"America/Campo_Grande (GMT-04:00)"},{value:"America/Cancun",label:"America/Cancun (GMT-05:00)"},{value:"America/Caracas",label:"America/Caracas (GMT-04:00)"},{value:"America/Cayenne",label:"America/Cayenne (GMT-03:00)"},{value:"America/Cayman",label:"America/Cayman (GMT-05:00)"},{value:"America/Chicago",label:"America/Chicago (GMT-05:00)"},{value:"America/Chihuahua",label:"America/Chihuahua (GMT-06:00)"},{value:"America/Ciudad_Juarez",label:"America/Ciudad_Juarez (GMT-06:00)"},{value:"America/Costa_Rica",label:"America/Costa_Rica (GMT-06:00)"},{value:"America/Creston",label:"America/Creston (GMT-07:00)"},{value:"America/Cuiaba",label:"America/Cuiaba (GMT-04:00)"},{value:"America/Curacao",label:"America/Curacao (GMT-04:00)"},{value:"America/Danmarkshavn",label:"America/Danmarkshavn (GMT+00:00)"},{value:"America/Dawson",label:"America/Dawson (GMT-07:00)"},{value:"America/Dawson_Creek",label:"America/Dawson_Creek (GMT-07:00)"},{value:"America/Denver",label:"America/Denver (GMT-06:00)"},{value:"America/Detroit",label:"America/Detroit (GMT-04:00)"},{value:"America/Dominica",label:"America/Dominica (GMT-04:00)"},{value:"America/Edmonton",label:"America/Edmonton (GMT-06:00)"},{value:"America/Eirunepe",label:"America/Eirunepe (GMT-05:00)"},{value:"America/El_Salvador",label:"America/El_Salvador (GMT-06:00)"},{value:"America/Fort_Nelson",label:"America/Fort_Nelson (GMT-07:00)"},{value:"America/Fortaleza",label:"America/Fortaleza (GMT-03:00)"},{value:"America/Glace_Bay",label:"America/Glace_Bay (GMT-03:00)"},{value:"America/Goose_Bay",label:"America/Goose_Bay (GMT-03:00)"},{value:"America/Grand_Turk",label:"America/Grand_Turk (GMT-04:00)"},{value:"America/Grenada",label:"America/Grenada (GMT-04:00)"},{value:"America/Guadeloupe",label:"America/Guadeloupe (GMT-04:00)"},{value:"America/Guatemala",label:"America/Guatemala (GMT-06:00)"},{value:"America/Guayaquil",label:"America/Guayaquil (GMT-05:00)"},{value:"America/Guyana",label:"America/Guyana (GMT-04:00)"},{value:"America/Halifax",label:"America/Halifax (GMT-03:00)"},{value:"America/Havana",label:"America/Havana (GMT-04:00)"},{value:"America/Hermosillo",label:"America/Hermosillo (GMT-07:00)"},{value:"America/Indiana/Indianapolis",label:"America/Indiana/Indianapolis (GMT-04:00)"},{value:"America/Indiana/Knox",label:"America/Indiana/Knox (GMT-05:00)"},{value:"America/Indiana/Marengo",label:"America/Indiana/Marengo (GMT-04:00)"},{value:"America/Indiana/Petersburg",label:"America/Indiana/Petersburg (GMT-04:00)"},{value:"America/Indiana/Vevay",label:"America/Indiana/Vevay (GMT-04:00)"},{value:"America/Indiana/Vincennes",label:"America/Indiana/Vincennes (GMT-04:00)"},{value:"America/Indiana/Winamac",label:"America/Indiana/Winamac (GMT-04:00)"},{value:"America/Inuvik",label:"America/Inuvik (GMT-06:00)"},{value:"America/Iqaluit",label:"America/Iqaluit (GMT-04:00)"},{value:"America/Jamaica",label:"America/Jamaica (GMT-05:00)"},{value:"America/Juneau",label:"America/Juneau (GMT-08:00)"},{value:"America/Kentucky/Louisville",label:"America/Kentucky/Louisville (GMT-04:00)"},{value:"America/Kentucky/Monticello",label:"America/Kentucky/Monticello (GMT-04:00)"},{value:"America/La_Paz",label:"America/La_Paz (GMT-04:00)"},{value:"America/Lima",label:"America/Lima (GMT-05:00)"},{value:"America/Los_Angeles",label:"America/Los_Angeles (GMT-07:00)"},{value:"America/Lower_Princes",label:"America/Lower_Princes (GMT-04:00)"},{value:"America/Maceio",label:"America/Maceio (GMT-03:00)"},{value:"America/Managua",label:"America/Managua (GMT-06:00)"},{value:"America/Manaus",label:"America/Manaus (GMT-04:00)"},{value:"America/Marigot",label:"America/Marigot (GMT-04:00)"},{value:"America/Martinique",label:"America/Martinique (GMT-04:00)"},{value:"America/Matamoros",label:"America/Matamoros (GMT-05:00)"},{value:"America/Mazatlan",label:"America/Mazatlan (GMT-06:00)"},{value:"America/Menominee",label:"America/Menominee (GMT-05:00)"},{value:"America/Merida",label:"America/Merida (GMT-05:00)"},{value:"America/Metlakatla",label:"America/Metlakatla (GMT-08:00)"},{value:"America/Mexico_City",label:"America/Mexico_City (GMT-05:00)"},{value:"America/Miquelon",label:"America/Miquelon (GMT-02:00)"},{value:"America/Moncton",label:"America/Moncton (GMT-03:00)"},{value:"America/Monterrey",label:"America/Monterrey (GMT-05:00)"},{value:"America/Montevideo",label:"America/Montevideo (GMT-03:00)"},{value:"America/Montserrat",label:"America/Montserrat (GMT-04:00)"},{value:"America/Nassau",label:"America/Nassau (GMT-04:00)"},{value:"America/New_York",label:"America/New_York (GMT-04:00)"},{value:"America/Nome",label:"America/Nome (GMT-08:00)"},{value:"America/Noronha",label:"America/Noronha (GMT-02:00)"},{value:"America/North_Dakota/Beulah",label:"America/North_Dakota/Beulah (GMT-05:00)"},{value:"America/North_Dakota/Center",label:"America/North_Dakota/Center (GMT-05:00)"},{value:"America/North_Dakota/New_Salem",label:"America/North_Dakota/New_Salem (GMT-05:00)"},{value:"America/Nuuk",label:"America/Nuuk (GMT-02:00)"},{value:"America/Ojinaga",label:"America/Ojinaga (GMT-06:00)"},{value:"America/Panama",label:"America/Panama (GMT-05:00)"},{value:"America/Paramaribo",label:"America/Paramaribo (GMT-03:00)"},{value:"America/Phoenix",label:"America/Phoenix (GMT-07:00)"},{value:"America/Port-au-Prince",label:"America/Port-au-Prince (GMT-04:00)"},{value:"America/Port_of_Spain",label:"America/Port_of_Spain (GMT-04:00)"},{value:"America/Puerto_Rico",label:"America/Puerto_Rico (GMT-04:00)"},{value:"America/Punta_Arenas",label:"America/Punta_Arenas (GMT-03:00)"},{value:"America/Rankin_Inlet",label:"America/Rankin_Inlet (GMT-05:00)"},{value:"America/Recife",label:"America/Recife (GMT-03:00)"},{value:"America/Regina",label:"America/Regina (GMT-06:00)"},{value:"America/Resolute",label:"America/Resolute (GMT-05:00)"},{value:"America/Rio_Branco",label:"America/Rio_Branco (GMT-05:00)"},{value:"America/Santarem",label:"America/Santarem (GMT-03:00)"},{value:"America/Santiago",label:"America/Santiago (GMT-04:00)"},{value:"America/Santo_Domingo",label:"America/Santo_Domingo (GMT-04:00)"},{value:"America/Sao_Paulo",label:"America/Sao_Paulo (GMT-03:00)"},{value:"America/Scoresbysund",label:"America/Scoresbysund (GMT+00:00)"},{value:"America/Sitka",label:"America/Sitka (GMT-08:00)"},{value:"America/St_Barthelemy",label:"America/St_Barthelemy (GMT-04:00)"},{value:"America/St_Johns",label:"America/St_Johns (GMT-02:30)"},{value:"America/St_Kitts",label:"America/St_Kitts (GMT-04:00)"},{value:"America/St_Lucia",label:"America/St_Lucia (GMT-04:00)"},{value:"America/St_Thomas",label:"America/St_Thomas (GMT-04:00)"},{value:"America/St_Vincent",label:"America/St_Vincent (GMT-04:00)"},{value:"America/Swift_Current",label:"America/Swift_Current (GMT-06:00)"},{value:"America/Tegucigalpa",label:"America/Tegucigalpa (GMT-06:00)"},{value:"America/Thule",label:"America/Thule (GMT-03:00)"},{value:"America/Tijuana",label:"America/Tijuana (GMT-07:00)"},{value:"America/Toronto",label:"America/Toronto (GMT-04:00)"},{value:"America/Tortola",label:"America/Tortola (GMT-04:00)"},{value:"America/Vancouver",label:"America/Vancouver (GMT-07:00)"},{value:"America/Whitehorse",label:"America/Whitehorse (GMT-07:00)"},{value:"America/Winnipeg",label:"America/Winnipeg (GMT-05:00)"},{value:"America/Yakutat",label:"America/Yakutat (GMT-08:00)"},{value:"America/Yellowknife",label:"America/Yellowknife (GMT-06:00)"},{value:"Antarctica/Casey",label:"Antarctica/Casey (GMT+11:00)"},{value:"Antarctica/Davis",label:"Antarctica/Davis (GMT+07:00)"},{value:"Antarctica/DumontDUrville",label:"Antarctica/DumontDUrville (GMT+10:00)"},{value:"Antarctica/Macquarie",label:"Antarctica/Macquarie (GMT+11:00)"},{value:"Antarctica/Mawson",label:"Antarctica/Mawson (GMT+05:00)"},{value:"Antarctica/Palmer",label:"Antarctica/Palmer (GMT-03:00)"},{value:"Antarctica/Rothera",label:"Antarctica/Rothera (GMT-03:00)"},{value:"Antarctica/Syowa",label:"Antarctica/Syowa (GMT+03:00)"},{value:"Antarctica/Troll",label:"Antarctica/Troll (GMT+00:00)"},{value:"Antarctica/Vostok",label:"Antarctica/Vostok (GMT+06:00)"},{value:"Asia/Almaty",label:"Asia/Almaty (GMT+05:00)"},{value:"Asia/Amman",label:"Asia/Amman (GMT+03:00)"},{value:"Asia/Anadyr",label:"Asia/Anadyr (GMT+12:00)"},{value:"Asia/Aqtau",label:"Asia/Aqtau (GMT+05:00)"},{value:"Asia/Aqtobe",label:"Asia/Aqtobe (GMT+05:00)"},{value:"Asia/Ashgabat",label:"Asia/Ashgabat (GMT+05:00)"},{value:"Asia/Atyrau",label:"Asia/Atyrau (GMT+05:00)"},{value:"Asia/Baghdad",label:"Asia/Baghdad (GMT+03:00)"},{value:"Asia/Baku",label:"Asia/Baku (GMT+04:00)"},{value:"Asia/Bangkok",label:"Asia/Bangkok (GMT+07:00)"},{value:"Asia/Barnaul",label:"Asia/Barnaul (GMT+07:00)"},{value:"Asia/Beirut",label:"Asia/Beirut (GMT+03:00)"},{value:"Asia/Bishkek",label:"Asia/Bishkek (GMT+06:00)"},{value:"Asia/Brunei",label:"Asia/Brunei (GMT+08:00)"},{value:"Asia/Chita",label:"Asia/Chita (GMT+09:00)"},{value:"Asia/Choibalsan",label:"Asia/Choibalsan (GMT+08:00)"},{value:"Asia/Colombo",label:"Asia/Colombo (GMT+05:30)"},{value:"Asia/Damascus",label:"Asia/Damascus (GMT+03:00)"},{value:"Asia/Dhaka",label:"Asia/Dhaka (GMT+06:00)"},{value:"Asia/Dili",label:"Asia/Dili (GMT+09:00)"},{value:"Asia/Dubai",label:"Asia/Dubai (GMT+04:00)"},{value:"Asia/Dushanbe",label:"Asia/Dushanbe (GMT+05:00)"},{value:"Asia/Famagusta",label:"Asia/Famagusta (GMT+03:00)"},{value:"Asia/Gaza",label:"Asia/Gaza (GMT+03:00)"},{value:"Asia/Hebron",label:"Asia/Hebron (GMT+03:00)"},{value:"Asia/Ho_Chi_Minh",label:"Asia/Ho_Chi_Minh (GMT+07:00)"},{value:"Asia/Hong_Kong",label:"Asia/Hong_Kong (GMT+08:00)"},{value:"Asia/Hovd",label:"Asia/Hovd (GMT+07:00)"},{value:"Asia/Irkutsk",label:"Asia/Irkutsk (GMT+08:00)"},{value:"Asia/Jakarta",label:"Asia/Jakarta (GMT+07:00)"},{value:"Asia/Jayapura",label:"Asia/Jayapura (GMT+09:00)"},{value:"Asia/Jerusalem",label:"Asia/Jerusalem (GMT+03:00)"},{value:"Asia/Kabul",label:"Asia/Kabul (GMT+04:30)"},{value:"Asia/Kamchatka",label:"Asia/Kamchatka (GMT+12:00)"},{value:"Asia/Karachi",label:"Asia/Karachi (GMT+05:00)"},{value:"Asia/Kathmandu",label:"Asia/Kathmandu (GMT+05:45)"},{value:"Asia/Khandyga",label:"Asia/Khandyga (GMT+09:00)"},{value:"Asia/Kolkata",label:"Asia/Kolkata (GMT+05:30)"},{value:"Asia/Krasnoyarsk",label:"Asia/Krasnoyarsk (GMT+07:00)"},{value:"Asia/Kuala_Lumpur",label:"Asia/Kuala_Lumpur (GMT+08:00)"},{value:"Asia/Kuching",label:"Asia/Kuching (GMT+08:00)"},{value:"Asia/Kuwait",label:"Asia/Kuwait (GMT+03:00)"},{value:"Asia/Macau",label:"Asia/Macau (GMT+08:00)"},{value:"Asia/Magadan",label:"Asia/Magadan (GMT+11:00)"},{value:"Asia/Makassar",label:"Asia/Makassar (GMT+08:00)"},{value:"Asia/Manila",label:"Asia/Manila (GMT+08:00)"},{value:"Asia/Muscat",label:"Asia/Muscat (GMT+04:00)"},{value:"Asia/Nicosia",label:"Asia/Nicosia (GMT+03:00)"},{value:"Asia/Novokuznetsk",label:"Asia/Novokuznetsk (GMT+07:00)"},{value:"Asia/Novosibirsk",label:"Asia/Novosibirsk (GMT+07:00)"},{value:"Asia/Omsk",label:"Asia/Omsk (GMT+06:00)"},{value:"Asia/Oral",label:"Asia/Oral (GMT+05:00)"},{value:"Asia/Phnom_Penh",label:"Asia/Phnom_Penh (GMT+07:00)"},{value:"Asia/Pontianak",label:"Asia/Pontianak (GMT+07:00)"},{value:"Asia/Pyongyang",label:"Asia/Pyongyang (GMT+09:00)"},{value:"Asia/Qatar",label:"Asia/Qatar (GMT+03:00)"},{value:"Asia/Qostanay",label:"Asia/Qostanay (GMT+05:00)"},{value:"Asia/Qyzylorda",label:"Asia/Qyzylorda (GMT+05:00)"},{value:"Asia/Riyadh",label:"Asia/Riyadh (GMT+03:00)"},{value:"Asia/Sakhalin",label:"Asia/Sakhalin (GMT+11:00)"},{value:"Asia/Samarkand",label:"Asia/Samarkand (GMT+05:00)"},{value:"Asia/Seoul",label:"Asia/Seoul (GMT+09:00)"},{value:"Asia/Shanghai",label:"Asia/Shanghai (GMT+08:00)"},{value:"Asia/Singapore",label:"Asia/Singapore (GMT+08:00)"},{value:"Asia/Srednekolymsk",label:"Asia/Srednekolymsk (GMT+11:00)"},{value:"Asia/Taipei",label:"Asia/Taipei (GMT+08:00)"},{value:"Asia/Tashkent",label:"Asia/Tashkent (GMT+05:00)"},{value:"Asia/Tbilisi",label:"Asia/Tbilisi (GMT+04:00)"},{value:"Asia/Tehran",label:"Asia/Tehran (GMT+03:30)"},{value:"Asia/Thimphu",label:"Asia/Thimphu (GMT+06:00)"},{value:"Asia/Tokyo",label:"Asia/Tokyo (GMT+09:00)"},{value:"Asia/Tomsk",label:"Asia/Tomsk (GMT+07:00)"},{value:"Asia/Ulaanbaatar",label:"Asia/Ulaanbaatar (GMT+08:00)"},{value:"Asia/Urumqi",label:"Asia/Urumqi (GMT+06:00)"},{value:"Asia/Ust-Nera",label:"Asia/Ust-Nera (GMT+10:00)"},{value:"Asia/Vladivostok",label:"Asia/Vladivostok (GMT+10:00)"},{value:"Asia/Yakutsk",label:"Asia/Yakutsk (GMT+09:00)"},{value:"Asia/Yangon",label:"Asia/Yangon (GMT+06:30)"},{value:"Asia/Yekaterinburg",label:"Asia/Yekaterinburg (GMT+05:00)"},{value:"Asia/Yerevan",label:"Asia/Yerevan (GMT+04:00)"},{value:"Atlantic/Azores",label:"Atlantic/Azores (GMT-01:00)"},{value:"Atlantic/Bermuda",label:"Atlantic/Bermuda (GMT-03:00)"},{value:"Atlantic/Canary",label:"Atlantic/Canary (GMT+00:00)"},{value:"Atlantic/Cape_Verde",label:"Atlantic/Cape_Verde (GMT-01:00)"},{value:"Atlantic/Faroe",label:"Atlantic/Faroe (GMT+00:00)"},{value:"Atlantic/Madeira",label:"Atlantic/Madeira (GMT+00:00)"},{value:"Atlantic/Reykjavik",label:"Atlantic/Reykjavik (GMT+00:00)"},{value:"Atlantic/South_Georgia",label:"Atlantic/South_Georgia (GMT-02:00)"},{value:"Atlantic/St_Helena",label:"Atlantic/St_Helena (GMT+00:00)"},{value:"Atlantic/Stanley",label:"Atlantic/Stanley (GMT-03:00)"},{value:"Australia/Adelaide",label:"Australia/Adelaide (GMT+09:30)"},{value:"Australia/Brisbane",label:"Australia/Brisbane (GMT+10:00)"},{value:"Australia/Broken_Hill",label:"Australia/Broken_Hill (GMT+09:30)"},{value:"Australia/Darwin",label:"Australia/Darwin (GMT+09:30)"},{value:"Australia/Eucla",label:"Australia/Eucla (GMT+08:45)"},{value:"Australia/Hobart",label:"Australia/Hobart (GMT+10:00)"},{value:"Australia/Lindeman",label:"Australia/Lindeman (GMT+10:00)"},{value:"Australia/Lord_Howe",label:"Australia/Lord_Howe (GMT+10:30)"},{value:"Australia/Melbourne",label:"Australia/Melbourne (GMT+10:00)"},{value:"Australia/Perth",label:"Australia/Perth (GMT+08:00)"},{value:"Australia/Sydney",label:"Australia/Sydney (GMT+10:00)"},{value:"Europe/Amsterdam",label:"Europe/Amsterdam (GMT+02:00)"},{value:"Europe/Andorra",label:"Europe/Andorra (GMT+02:00)"},{value:"Europe/Astrakhan",label:"Europe/Astrakhan (GMT+04:00)"},{value:"Europe/Athens",label:"Europe/Athens (GMT+03:00)"},{value:"Europe/Belgrade",label:"Europe/Belgrade (GMT+02:00)"},{value:"Europe/Berlin",label:"Europe/Berlin (GMT+02:00)"},{value:"Europe/Brussels",label:"Europe/Brussels (GMT+02:00)"},{value:"Europe/Bucharest",label:"Europe/Bucharest (GMT+03:00)"},{value:"Europe/Budapest",label:"Europe/Budapest (GMT+02:00)"},{value:"Europe/Chisinau",label:"Europe/Chisinau (GMT+03:00)"},{value:"Europe/Copenhagen",label:"Europe/Copenhagen (GMT+02:00)"},{value:"Europe/Dublin",label:"Europe/Dublin (GMT+01:00)"},{value:"Europe/Gibraltar",label:"Europe/Gibraltar (GMT+02:00)"},{value:"Europe/Helsinki",label:"Europe/Helsinki (GMT+03:00)"},{value:"Europe/Istanbul",label:"Europe/Istanbul (GMT+03:00)"},{value:"Europe/Kaliningrad",label:"Europe/Kaliningrad (GMT+02:00)"},{value:"Europe/Kirov",label:"Europe/Kirov (GMT+03:00)"},{value:"Europe/Kyiv",label:"Europe/Kyiv (GMT+03:00)"},{value:"Europe/Lisbon",label:"Europe/Lisbon (GMT+01:00)"},{value:"Europe/London",label:"Europe/London (GMT+01:00)"},{value:"Europe/Luxembourg",label:"Europe/Luxembourg (GMT+02:00)"},{value:"Europe/Madrid",label:"Europe/Madrid (GMT+02:00)"},{value:"Europe/Malta",label:"Europe/Malta (GMT+02:00)"},{value:"Europe/Minsk",label:"Europe/Minsk (GMT+03:00)"},{value:"Europe/Monaco",label:"Europe/Monaco (GMT+02:00)"},{value:"Europe/Moscow",label:"Europe/Moscow (GMT+03:00)"},{value:"Europe/Oslo",label:"Europe/Oslo (GMT+02:00)"},{value:"Europe/Paris",label:"Europe/Paris (GMT+02:00)"},{value:"Europe/Prague",label:"Europe/Prague (GMT+02:00)"},{value:"Europe/Riga",label:"Europe/Riga (GMT+03:00)"},{value:"Europe/Rome",label:"Europe/Rome (GMT+02:00)"},{value:"Europe/Samara",label:"Europe/Samara (GMT+04:00)"},{value:"Europe/San_Marino",label:"Europe/San_Marino (GMT+02:00)"},{value:"Europe/Sarajevo",label:"Europe/Sarajevo (GMT+02:00)"},{value:"Europe/Saratov",label:"Europe/Saratov (GMT+04:00)"},{value:"Europe/Simferopol",label:"Europe/Simferopol (GMT+03:00)"},{value:"Europe/Skopje",label:"Europe/Skopje (GMT+02:00)"},{value:"Europe/Sofia",label:"Europe/Sofia (GMT+03:00)"},{value:"Europe/Stockholm",label:"Europe/Stockholm (GMT+02:00)"},{value:"Europe/Tallinn",label:"Europe/Tallinn (GMT+03:00)"},{value:"Europe/Tirane",label:"Europe/Tirane (GMT+02:00)"},{value:"Europe/Ulyanovsk",label:"Europe/Ulyanovsk (GMT+04:00)"},{value:"Europe/Uzhgorod",label:"Europe/Uzhgorod (GMT+03:00)"},{value:"Europe/Vaduz",label:"Europe/Vaduz (GMT+02:00)"},{value:"Europe/Vatican",label:"Europe/Vatican (GMT+02:00)"},{value:"Europe/Vienna",label:"Europe/Vienna (GMT+02:00)"},{value:"Europe/Vilnius",label:"Europe/Vilnius (GMT+03:00)"},{value:"Europe/Volgograd",label:"Europe/Volgograd (GMT+03:00)"},{value:"Europe/Warsaw",label:"Europe/Warsaw (GMT+02:00)"},{value:"Europe/Zagreb",label:"Europe/Zagreb (GMT+02:00)"},{value:"Europe/Zaporozhye",label:"Europe/Zaporozhye (GMT+03:00)"},{value:"Europe/Zurich",label:"Europe/Zurich (GMT+02:00)"},{value:"Indian/Antananarivo",label:"Indian/Antananarivo (GMT+03:00)"},{value:"Indian/Chagos",label:"Indian/Chagos (GMT+06:00)"},{value:"Indian/Christmas",label:"Indian/Christmas (GMT+07:00)"},{value:"Indian/Cocos",label:"Indian/Cocos (GMT+06:30)"},{value:"Indian/Comoro",label:"Indian/Comoro (GMT+03:00)"},{value:"Indian/Kerguelen",label:"Indian/Kerguelen (GMT+05:00)"},{value:"Indian/Mahe",label:"Indian/Mahe (GMT+04:00)"},{value:"Indian/Maldives",label:"Indian/Maldives (GMT+05:00)"},{value:"Indian/Mauritius",label:"Indian/Mauritius (GMT+04:00)"},{value:"Indian/Mayotte",label:"Indian/Mayotte (GMT+03:00)"},{value:"Indian/Reunion",label:"Indian/Reunion (GMT+04:00)"},{value:"Pacific/Apia",label:"Pacific/Apia (GMT+13:00)"},{value:"Pacific/Auckland",label:"Pacific/Auckland (GMT+12:00)"},{value:"Pacific/Bougainville",label:"Pacific/Bougainville (GMT+11:00)"},{value:"Pacific/Chatham",label:"Pacific/Chatham (GMT+12:45)"},{value:"Pacific/Chuuk",label:"Pacific/Chuuk (GMT+10:00)"},{value:"Pacific/Easter",label:"Pacific/Easter (GMT-06:00)"},{value:"Pacific/Efate",label:"Pacific/Efate (GMT+11:00)"},{value:"Pacific/Fakaofo",label:"Pacific/Fakaofo (GMT+13:00)"},{value:"Pacific/Fiji",label:"Pacific/Fiji (GMT+12:00)"},{value:"Pacific/Funafuti",label:"Pacific/Funafuti (GMT+12:00)"},{value:"Pacific/Galapagos",label:"Pacific/Galapagos (GMT-06:00)"},{value:"Pacific/Gambier",label:"Pacific/Gambier (GMT-09:00)"},{value:"Pacific/Guadalcanal",label:"Pacific/Guadalcanal (GMT+11:00)"},{value:"Pacific/Guam",label:"Pacific/Guam (GMT+10:00)"},{value:"Pacific/Honolulu",label:"Pacific/Honolulu (GMT-10:00)"},{value:"Pacific/Kanton",label:"Pacific/Kanton (GMT+13:00)"},{value:"Pacific/Kiritimati",label:"Pacific/Kiritimati (GMT+14:00)"},{value:"Pacific/Kosrae",label:"Pacific/Kosrae (GMT+11:00)"},{value:"Pacific/Kwajalein",label:"Pacific/Kwajalein (GMT+12:00)"},{value:"Pacific/Majuro",label:"Pacific/Majuro (GMT+12:00)"},{value:"Pacific/Marquesas",label:"Pacific/Marquesas (GMT-09:30)"},{value:"Pacific/Midway",label:"Pacific/Midway (GMT-11:00)"},{value:"Pacific/Nauru",label:"Pacific/Nauru (GMT+12:00)"},{value:"Pacific/Niue",label:"Pacific/Niue (GMT-11:00)"},{value:"Pacific/Norfolk",label:"Pacific/Norfolk (GMT+11:00)"},{value:"Pacific/Noumea",label:"Pacific/Noumea (GMT+11:00)"},{value:"Pacific/Pago_Pago",label:"Pacific/Pago_Pago (GMT-11:00)"},{value:"Pacific/Palau",label:"Pacific/Palau (GMT+09:00)"},{value:"Pacific/Pitcairn",label:"Pacific/Pitcairn (GMT-08:00)"},{value:"Pacific/Pohnpei",label:"Pacific/Pohnpei (GMT+11:00)"},{value:"Pacific/Port_Moresby",label:"Pacific/Port_Moresby (GMT+10:00)"},{value:"Pacific/Rarotonga",label:"Pacific/Rarotonga (GMT-10:00)"},{value:"Pacific/Saipan",label:"Pacific/Saipan (GMT+10:00)"},{value:"Pacific/Tahiti",label:"Pacific/Tahiti (GMT-10:00)"},{value:"Pacific/Tarawa",label:"Pacific/Tarawa (GMT+12:00)"},{value:"Pacific/Tongatapu",label:"Pacific/Tongatapu (GMT+13:00)"},{value:"Pacific/Wake",label:"Pacific/Wake (GMT+12:00)"},{value:"Pacific/Wallis",label:"Pacific/Wallis (GMT+12:00)"}]),p=W({get:()=>v.modelValue,set:c=>{s("update:modelValue",c),s("change",c)}});return be(()=>{if((v.modelValue===null||v.modelValue===void 0)&&!v.disabled)try{const c=Intl.DateTimeFormat().resolvedOptions().timeZone;t.value.find(d=>d.value===c)?p.value=c:console.warn(`Detected timezone "${c}" is not in the predefined list.`)}catch(c){console.error("Error auto-detecting timezone:",c)}}),(c,y)=>(a(),i("div",bd,[n(q,{for:b.label.toLowerCase().replace(/\s/g,"-"),value:b.label},null,8,["for","value"]),n(ge,{id:b.label.toLowerCase().replace(/\s/g,"-"),modelValue:p.value,"onUpdate:modelValue":y[0]||(y[0]=d=>p.value=d),options:t.value,valueKey:"value",labelKey:"label",placeholder:b.placeholder,disabled:b.disabled,required:b.required,class:"mt-1 block w-full"},null,8,["id","modelValue","options","placeholder","disabled","required"]),n(X,{message:b.error,class:"mt-2"},null,8,["message"])]))}},hd={key:0,class:"text-sm text-gray-600 mb-3"},xd=["value"],kd={__name:"UserDataPromptModal",props:{show:{type:Boolean,default:!1},configItem:{type:Object,required:!0}},emits:["close","submitted","error"],setup(b,{emit:A}){const v=b,s=M({value:""});re(()=>v.show,d=>{d&&(s.value={value:""})});const t=W(()=>{var d,r;return((r=(d=v.configItem)==null?void 0:d.api)==null?void 0:r.endpoint)||"/api/user/update-profile-field"}),p=W(()=>{var d,r;return((r=(d=v.configItem)==null?void 0:d.api)==null?void 0:r.method)||"post"}),c=d=>{var l,u,m,C,g;if((l=v.configItem)!=null&&l.toPayload)return v.configItem.toPayload(d.value);const r=((m=(u=v.configItem)==null?void 0:u.api)==null?void 0:m.fieldParam)||"field",o=((g=(C=v.configItem)==null?void 0:C.api)==null?void 0:g.valueParam)||"value";return{[r]:v.configItem.column,[o]:d.value}},y=W(()=>{var d;return((d=v.configItem)==null?void 0:d.title)||"Additional Information Required"});return(d,r)=>(a(),D(Ne,{show:b.show,title:y.value,"api-endpoint":t.value,"http-method":p.value,"form-data":s.value,"submit-button-text":"Save","success-message":"Saved successfully","format-data-for-api":c,onClose:r[3]||(r[3]=o=>d.$emit("close")),onSubmitted:r[4]||(r[4]=o=>d.$emit("submitted",o)),onError:r[5]||(r[5]=o=>d.$emit("error",o))},{default:h(({errors:o})=>{var l,u,m,C,g,V,E,T,w,j,z,R,H,P;return[(l=b.configItem)!=null&&l.description?(a(),i("p",hd,G(b.configItem.description),1)):_("",!0),e("div",null,[((m=(u=b.configItem)==null?void 0:u.input)==null?void 0:m.type)==="component"&&((g=(C=b.configItem)==null?void 0:C.input)==null?void 0:g.component)==="TimezoneSelect"?(a(),i(Z,{key:0},[n(yd,{modelValue:s.value.value,"onUpdate:modelValue":r[0]||(r[0]=I=>s.value.value=I),required:!0},null,8,["modelValue"]),n(X,{message:(V=o==null?void 0:o.value)==null?void 0:V[0],class:"mt-2"},null,8,["message"])],64)):((T=(E=b.configItem)==null?void 0:E.input)==null?void 0:T.type)==="select"?(a(),i(Z,{key:1},[n(q,{value:((w=b.configItem)==null?void 0:w.label)||"Select an option"},null,8,["value"]),L(e("select",{"onUpdate:modelValue":r[1]||(r[1]=I=>s.value.value=I),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[r[6]||(r[6]=e("option",{disabled:"",value:""},"Please select",-1)),(a(!0),i(Z,null,oe(((z=(j=b.configItem)==null?void 0:j.input)==null?void 0:z.options)||[],I=>(a(),i("option",{key:I.value||I,value:I.value||I},G(I.label||I),9,xd))),128))],512),[[qe,s.value.value]]),n(X,{message:(R=o==null?void 0:o.value)==null?void 0:R[0],class:"mt-2"},null,8,["message"])],64)):(a(),i(Z,{key:2},[n(q,{value:((H=b.configItem)==null?void 0:H.label)||"Value"},null,8,["value"]),n(pe,{modelValue:s.value.value,"onUpdate:modelValue":r[2]||(r[2]=I=>s.value.value=I),class:"mt-1 block w-full"},null,8,["modelValue"]),n(X,{message:(P=o==null?void 0:o.value)==null?void 0:P[0],class:"mt-2"},null,8,["message"])],64))])]}),_:1},8,["show","title","api-endpoint","http-method","form-data"]))}},wd=[{id:"users.timezone",model:"users",column:"timezone",title:"Set your timezone",description:"We could not detect your timezone during login. Please select your timezone to get correct schedule times.",input:{type:"component",component:"TimezoneSelect",props:{}},api:{endpoint:"/api/user/update-profile-field",method:"post",fieldParam:"field",valueParam:"value"},isMissing:b=>!(b!=null&&b.timezone),toPayload:b=>({field:"timezone",value:b})}],_d={__name:"PromptOrchestrator",setup(b){const A=M(!1),v=M(null),s=M([]),t=()=>{const o=localStorage.getItem("authToken");o&&!fe.defaults.headers.common.Authorization&&(fe.defaults.headers.common.Authorization=`Bearer ${o}`)},p=async()=>{t();const{data:o}=await fe.get("/api/user");return o},c=o=>{const l=[];for(const u of wd)try{(typeof u.isMissing=="function"?u.isMissing(o):!(o!=null&&o[u.column]))&&l.push(u)}catch(m){console.error("Error evaluating prompt config",u,m)}return l},y=()=>{if(s.value.length===0){v.value=null,A.value=!1;return}v.value=s.value.shift(),A.value=!0},d=async()=>{try{const o=await p();s.value=c(o),y()}catch(o){console.error("PromptOrchestrator initialization failed",o)}},r=async()=>{try{const o=await p();s.value=c(o)}catch{}y()};return be(()=>{d()}),(o,l)=>v.value?(a(),D(kd,{key:0,show:A.value,"config-item":v.value,onClose:y,onSubmitted:r},null,8,["show","config-item"])):_("",!0)}},Ad={key:0,class:"mb-4"},Td={key:1,class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},Md={class:"mb-6 flex space-x-4 border-b border-gray-100"},Cd={key:2,class:"space-y-4"},$d={key:3},Sd={__name:"MeetingMinutesModal",props:{show:Boolean,projectId:Number,projects:{type:Array,default:()=>[]}},emits:["close","minutesAdded"],setup(b,{emit:A}){const v=b,s=A,t=M("separate"),p=M(!1),c=M([]),y=M([]),d=Ge({project_id:null,discussion:"",more_info:"",blockers:"",actions:"",full_minutes:"",attended_users:[],attended_clients:[]});re(()=>v.projectId,C=>{C&&(d.project_id=C)},{immediate:!0}),re(()=>v.show,C=>{C&&(d.project_id=v.projectId||null,d.discussion="",d.more_info="",d.blockers="",d.actions="",d.full_minutes="",d.attended_users=[],d.attended_clients=[],t.value="separate")});const r=async C=>{if(C){p.value=!0;try{const g=await window.axios.get(`/api/projects/${C}/sections/meeting-attendees`);c.value=(g.data.users||[]).map(V=>({value:V.id,label:V.name})),y.value=(g.data.clients||[]).map(V=>({value:V.id,label:V.name}))}catch(g){console.error("Error fetching attendees:",g)}finally{p.value=!1}}},o=C=>{s("minutesAdded")},l=C=>{console.error("Error in MeetingMinutesModal submission:",C)},u=M("");re(()=>d.project_id,C=>{C?(u.value=`/api/projects/${C}/meeting-minutes`,r(C)):(u.value="",c.value=[],y.value=[])},{immediate:!0});const m=M([]);return re(()=>v.projects,C=>{m.value=C.map(g=>({value:g.id,label:g.name}))},{immediate:!0}),(C,g)=>(a(),D(Ne,{show:b.show,title:"Add Meeting Minutes","api-endpoint":u.value,"http-method":"post","form-data":d,"submit-button-text":"Submit Minutes","success-message":"Meeting minutes submitted successfully!",onClose:g[10]||(g[10]=V=>C.$emit("close")),onSubmitted:o,onError:l},{default:h(({errors:V})=>[b.projectId?_("",!0):(a(),i("div",Ad,[n(q,{for:"project_id",value:"Select Project"}),n(ge,{modelValue:d.project_id,"onUpdate:modelValue":g[0]||(g[0]=E=>d.project_id=E),options:m.value,placeholder:"Select a project...",class:"mt-1 block w-full"},null,8,["modelValue","options"]),n(X,{message:V.project_id?V.project_id[0]:"",class:"mt-2"},null,8,["message"])])),d.project_id?(a(),i("div",Td,[e("div",null,[n(q,{for:"attended_users",value:"Who attended (Internal)"}),n(Ze,{modelValue:d.attended_users,"onUpdate:modelValue":g[1]||(g[1]=E=>d.attended_users=E),options:c.value,"is-multi":!0,placeholder:"Select team members...",class:"mt-1",disabled:p.value},null,8,["modelValue","options","disabled"]),n(X,{message:V.attended_users?V.attended_users[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[n(q,{for:"attended_clients",value:"Client Attended (Optional)"}),n(Ze,{modelValue:d.attended_clients,"onUpdate:modelValue":g[2]||(g[2]=E=>d.attended_clients=E),options:y.value,"is-multi":!0,placeholder:"Select clients...",class:"mt-1",disabled:p.value},null,8,["modelValue","options","disabled"]),n(X,{message:V.attended_clients?V.attended_clients[0]:"",class:"mt-2"},null,8,["message"])])])):_("",!0),e("div",Md,[e("button",{type:"button",onClick:g[3]||(g[3]=E=>t.value="separate"),class:O(["pb-2 px-1 text-sm font-medium transition-colors duration-200 border-b-2",t.value==="separate"?"text-indigo-600 border-indigo-600":"text-gray-500 border-transparent hover:text-gray-700"])}," Structured ",2),e("button",{type:"button",onClick:g[4]||(g[4]=E=>t.value="full"),class:O(["pb-2 px-1 text-sm font-medium transition-colors duration-200 border-b-2",t.value==="full"?"text-indigo-600 border-indigo-600":"text-gray-500 border-transparent hover:text-gray-700"])}," Paste Text ",2)]),t.value==="separate"?(a(),i("div",Cd,[e("div",null,[n(q,{for:"discussion",value:"Discussion"}),L(e("textarea",{id:"discussion",rows:"3",class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm","onUpdate:modelValue":g[5]||(g[5]=E=>d.discussion=E),placeholder:"What was discussed?"},null,512),[[ne,d.discussion]]),n(X,{message:V.discussion?V.discussion[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[n(q,{for:"more_info",value:"Require More Information"}),L(e("textarea",{id:"more_info",rows:"2",class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm","onUpdate:modelValue":g[6]||(g[6]=E=>d.more_info=E),placeholder:"Any information needed?"},null,512),[[ne,d.more_info]]),n(X,{message:V.more_info?V.more_info[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[n(q,{for:"blockers",value:"Blockers"}),L(e("textarea",{id:"blockers",rows:"2",class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm","onUpdate:modelValue":g[7]||(g[7]=E=>d.blockers=E),placeholder:"Any blockers?"},null,512),[[ne,d.blockers]]),n(X,{message:V.blockers?V.blockers[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[n(q,{for:"actions",value:"Actions"}),L(e("textarea",{id:"actions",rows:"3",class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm","onUpdate:modelValue":g[8]||(g[8]=E=>d.actions=E),placeholder:"Action items..."},null,512),[[ne,d.actions]]),n(X,{message:V.actions?V.actions[0]:"",class:"mt-2"},null,8,["message"])])])):(a(),i("div",$d,[n(q,{for:"full_minutes",value:"Past All Meeting Minutes"}),L(e("textarea",{id:"full_minutes",rows:"12",class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm font-mono text-sm","onUpdate:modelValue":g[9]||(g[9]=E=>d.full_minutes=E),placeholder:"Paste all minutes here..."},null,512),[[ne,d.full_minutes]]),n(X,{message:V.full_minutes?V.full_minutes[0]:"",class:"mt-2"},null,8,["message"])]))]),_:1},8,["show","api-endpoint","form-data"]))}},Gd={class:"flex h-screen overflow-hidden"},jd={class:"flex-1 flex flex-col overflow-hidden"},Pd={key:0,class:"bg-white shadow"},Ed={class:"mx-auto max-w-7xl px-4 py-6 sm:px-6 lg:px-8"},Vd={class:"flex-1 overflow-y-auto"},o0={__name:"AuthenticatedLayout",setup(b){const A=M(!1),v=M(!1),s=M(!1),t=M(!1),p=M(!1),c=M([]),y=M(!0),d=W(()=>We().props.id||null),{showNoticeModal:r,unreadNotices:o,fetchUnreadNotices:l,closeModal:u}=gd(),m=M(null),C=async()=>{const R=localStorage.getItem("authToken");if(R){window.axios.defaults.headers.common.Authorization=`Bearer ${R}`;try{await window.axios.get("/api/user")}catch(H){H.response&&H.response.status===401&&(console.log("Session expired, redirecting to login"),localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization,window.location.href="/login")}}else delete window.axios.defaults.headers.common.Authorization},g=()=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization},V=R=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization,window.location.href="/login"},E=async()=>{y.value=!0;try{const R=await window.axios.get("/api/projects-simplified");c.value=R.data}catch(R){console.error("Error fetching all projects for sidebar:",R),c.value=[]}finally{y.value=!1}},T=R=>{va.visit(route("projects.show",R))},w=W(()=>Ke.value.notifications.filter(R=>!R.isRead).length),j=R=>{console.log("Task updated globally.",R)},z=R=>{console.log("Task deleted globally.",R)};return be(()=>{C(),m.value&&ca(m.value),E(),ma(),Tt(l),l()}),It(()=>{Tt(null)}),(R,H)=>(a(),i("div",Gd,[n(Xa,{ref_key:"standardNotificationContainerRef",ref:m},null,512),n(Ha,{"sidebar-is-open":N(Ke).show},null,8,["sidebar-is-open"]),n(Ul),n($i,{"all-projects":c.value,"active-project-id":d.value,onProjectSelected:T},null,8,["all-projects","active-project-id"]),e("div",jd,[n(Pn,{"unread-notification-count":w.value,onOpenCreateTaskModal:H[0]||(H[0]=P=>v.value=!0),onOpenAddResource:H[1]||(H[1]=P=>s.value=!0),onOpenNotificationsSidebar:N(Mt),onOpenKudoModal:H[2]||(H[2]=P=>t.value=!0),onOpenMeetingMinutesModal:H[3]||(H[3]=P=>p.value=!0)},null,8,["unread-notification-count","onOpenNotificationsSidebar"]),n(zn,{"showing-navigation-dropdown":A.value,"unread-notification-count":w.value,onOpenCreateTaskModal:H[4]||(H[4]=P=>v.value=!0),onOpenAddResource:H[5]||(H[5]=P=>s.value=!0),onOpenNotificationsSidebar:N(Mt),onLogoutSuccess:g,onLogoutError:V},null,8,["showing-navigation-dropdown","unread-notification-count","onOpenNotificationsSidebar"]),R.$slots.header?(a(),i("header",Pd,[e("div",Ed,[je(R.$slots,"header")])])):_("",!0),e("main",Vd,[je(R.$slots,"default")]),n(ko,{show:v.value,onClose:H[6]||(H[6]=P=>v.value=!1),onSaved:H[7]||(H[7]=P=>v.value=!1)},null,8,["show"]),n(So,{"api-endpoint":"/api/shareable-resources",show:s.value,onClose:H[8]||(H[8]=P=>s.value=!1)},null,8,["show"]),n(Zo,{show:t.value,onClose:H[9]||(H[9]=P=>t.value=!1),onSubmitted:H[10]||(H[10]=P=>t.value=!1)},null,8,["show"]),n(Sd,{show:p.value,projects:c.value,onClose:H[11]||(H[11]=P=>p.value=!1),onMinutesAdded:H[12]||(H[12]=P=>p.value=!1)},null,8,["show","projects"])]),n(fd,{onTaskUpdated:j,onTaskDeleted:z}),n(Ko),n(Sa,{show:N(r),unreadNotices:N(o),onClose:N(u)},null,8,["show","unreadNotices","onClose"]),n(_d)]))}};export{So as C,Dt as T,o0 as _,Ut as a,md as b,es as c,Vl as d,yd as e,Xn as f,St as g,ko as h,or as i,Nt as r};
