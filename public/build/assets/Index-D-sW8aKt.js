import{r as n,c as X,e as O,aT as lt,D as ot,f as Pe,E as Te,a as u,o as i,d as y,u as Se,h as nt,w as ue,b as s,j as je,g as rt,i as d,t as S,F as Ie,l as it,v as Me,z as ut,x as ct,s as dt,U as vt}from"./app-CDr3a6VS.js";import{d as mt,a as pt}from"./currency-CqZLnMpJ.js";import{v as gt,_ as yt,i as _t,u as ft,s as Fe,e as ht,r as kt,p as wt,j as bt}from"./AuthenticatedLayout-DfaIPwmm.js";import xt from"./Filters-pZi2BNp6.js";import Dt from"./ProjectCards-B-fSNNZe.js";import Ct from"./Sidebar-CUETZdoA.js";import{_ as At}from"./KanbanBoard-DlAtM8_g.js";import{S as V}from"./SelectDropdown-C5smnqto.js";import"./PrimaryButton-PdEFYjA-.js";import"./Modal-BeOWcYaT.js";import"./InputLabel-B8WUjPsD.js";import"./InputError-DbJd9iC5.js";import"./SecondaryButton-COk71P9Q.js";import"./index-eWUSAXnC.js";import"./BaseFormModal-D19JOLoJ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./TextInput-DriM8Ct1.js";import"./debounce-C-hnF4Z3.js";import"./ApplicationLogo-D4ou4Siy.js";import"./createLucideIcon-C7qfAF7e.js";import"./plus-DVAY_DV-.js";import"./DangerButton-CmoCYmjx.js";import"./moment-BLMuvzoS.js";import"./NoticeboardModal-ChEfRJI3.js";import"./ProjectCard-Ds5l7z27.js";/* empty css                                                                       */const Pt={class:"flex items-center justify-between"},Tt={class:"flex items-center gap-3"},St=["data-active"],jt={class:"py-10"},It={class:"mb-6"},Mt={key:0,class:"flex flex-col lg:flex-row gap-8"},Ft={class:"lg:w-2/3"},Ut={class:"lg:w-1/3"},Vt={key:1,class:"mt-4"},Bt={class:"mb-3 flex flex-col gap-3"},$t={class:"flex items-center justify-between gap-4"},Ht={class:"flex items-center gap-2"},Lt={key:0,class:"text-xs text-gray-500"},Ot={key:1,class:"text-xs text-red-600"},Wt={class:"relative"},Rt={key:0,class:"absolute right-0 mt-2 w-56 bg-white border rounded-md shadow-lg z-10 p-3"},Et={class:"space-y-2"},zt=["value"],Kt={key:0,class:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-7 gap-3"},Nt={class:"relative"},Yt={class:"absolute inset-y-0 right-2 flex items-center gap-1"},Jt={class:"flex items-center gap-2"},qt={class:"flex-1"},Gt={class:"flex items-center gap-2"},Qt={class:"flex-1"},Xt={class:"flex items-center gap-2"},Zt={class:"flex-1"},ea={key:0,class:"flex items-center gap-2"},ta={class:"flex-1"},aa={class:"flex items-center gap-2"},sa={class:"flex-1"},la={class:"flex items-center gap-2"},oa={class:"flex-1"},na=["onDragstart","onClick","title"],ra={key:0,class:"absolute top-1 right-1 text-red-500",title:"Overdue"},ia={class:"text-sm font-medium text-gray-800 truncate"},ua={key:1,class:"text-xs text-gray-500 truncate"},ca={class:"text-xs text-gray-500 truncate"},da={key:2,class:"text-xs text-gray-500 truncate"},Oa={__name:"Index",setup(va){const Z=n([{id:1,name:"Project Phoenix",role:"Manager",health:"at-risk",alert:{text:"Client email from Project Phoenix requires a reply.",timer:"3h 25m",incentive:"Reply in time to earn 50 points."},overview:{milestone:"3 of 5 - Design Phase (60% Complete)",budget:"$15,000 / $25,000 Used",status:"On Track"},tasks:{today:[{name:"Create new ad copy",status:"started",assignee:"Alex Ray"},{name:"Review wireframes",status:"blocked",assignee:"Sarah Chen"}],tomorrow:[{name:"Client feedback call",status:"paused",assignee:"Jane Doe"},{name:"Design review meeting",status:"complete",assignee:"Team A"}],completed:[{name:"Initial Project Kickoff",status:"complete"}]},communication:{lastSent:"Today at 9:15 AM",lastReceived:"3 days ago at 4:30 PM"}},{id:2,name:"Project Odyssey",role:"Contributor",health:"needs-attention",tasks:{today:[{name:"Develop login API endpoint",status:"blocked"},{name:"Write unit tests for checkout process",status:"started"}],tomorrow:[{name:"Refactor database schema",status:"paused"}],completed:[{name:"Update documentation",status:"complete"}]},milestone:{name:"Backend API Development",deadline:"September 5, 2025",progress:75,incentive:"Complete on time to earn a 5% bonus and 200 points!"}},{id:3,name:"Project Gemini",role:"Manager",health:"on-track",alert:null,overview:{milestone:"2 of 4 - Testing Phase (95% Complete)",budget:"$8,000 / $10,000 Used",status:"In Progress"},tasks:{today:[{name:"User Acceptance Testing",status:"complete"}],tomorrow:[{name:"Deploy to staging",status:"started"}],completed:[{name:"Initial QA Review",status:"complete"}]},communication:{lastSent:"Yesterday at 11:00 AM",lastReceived:"Yesterday at 10:45 AM"}},{id:4,name:"Project Alpha",role:"Contributor",health:"on-track",tasks:{today:[],tomorrow:[],completed:[{name:"Initial project setup",status:"complete"},{name:"Write documentation",status:"complete"}]},milestone:{name:"Project Kickoff",deadline:"September 20, 2025",progress:100,incentive:"Complete on time to earn a 5% bonus and 200 points!"}}]),j=n("all"),ee=n(""),te=n("with");X(()=>j.value==="all"?Z.value:j.value==="manager"?Z.value.filter(e=>e.role==="Manager"):j.value==="contributor"?Z.value.filter(e=>e.role==="Contributor"):[]);const ae=n(["Follow up with Alex on Project Phoenix","Prepare for sprint planning"]),ce=n(localStorage.getItem("my_dashboard_notes")||"");function Ue(e){e&&ae.value.push(e)}function Ve(e){ae.value.splice(e,1)}function Be(e){ce.value=e,localStorage.setItem("my_dashboard_notes",e)}const f=n(localStorage.getItem("workspace_kanban_view")==="1");O(f,e=>{try{localStorage.setItem("workspace_kanban_view",e?"1":"0")}catch{}});const de=[{key:"To Do",title:"To Do"},{key:"In Progress",title:"In Progress"},{key:"Paused",title:"Paused"},{key:"Blocked",title:"Blocked"},{key:"Done",title:"Done"},{key:"Archived",title:"Archived"}],$e=["To Do","In Progress","Paused","Blocked","Done"],W=n((()=>{try{const e=JSON.parse(localStorage.getItem("workspace_kanban_columns")||"null");if(Array.isArray(e)&&e.length)return e}catch{}return $e})()),se=n(!1);O(W,e=>{try{localStorage.setItem("workspace_kanban_columns",JSON.stringify(e))}catch{}},{deep:!0});const He=X(()=>de.filter(e=>W.value.includes(e.key))),p=n([]),k=n(!1),w=n(""),I=n(""),h=n("all"),b=n("all"),_=n(null),g=n(null),C=n(""),x=n(null),B=n(!1),R=n([]),M=n([]),E=n([]),Le=lt(),{canDo:A}=ot(),v=new Date,P=new Date(v);P.setDate(v.getDate()-v.getDay()),P.setHours(0,0,0,0);const F=new Date(P);F.setDate(P.getDate()+6),F.setHours(23,59,59,999);const z=new Date(v);z.setDate(v.getDate()-1),z.setHours(0,0,0,0);const ve=new Date(z);ve.setHours(23,59,59,999);const K=new Date(P);K.setMilliseconds(-1);const le=new Date(K);le.setDate(K.getDate()-6),le.setHours(0,0,0,0);const me=new Date(v.getFullYear(),v.getMonth(),1),pe=new Date(v.getFullYear(),v.getMonth()+1,0);pe.setHours(23,59,59,999);const N=new Date(me);N.setMilliseconds(-1);const ge=new Date(N.getFullYear(),N.getMonth(),1);ge.setHours(0,0,0,0);const oe=new Date(v);oe.setDate(v.getDate()-6),oe.setHours(0,0,0,0);const ne=new Date(v);ne.setDate(v.getDate()-29),ne.setHours(0,0,0,0);const Oe=[{value:"",label:"All Priorities"},{value:"high",label:"High"},{value:"medium",label:"Medium"},{value:"low",label:"Low"}],We=()=>{I.value="",_.value=null,g.value=null,C.value="",x.value=null,h.value="all",b.value="all"},Re=()=>{_.value=null},Ee=()=>{g.value=null},ze=()=>{C.value=""},Ke=()=>{x.value=null},Ne=()=>{h.value="all"},Ye=()=>{b.value="all"},Je=()=>{I.value=""},re=new Map,qe=async()=>{try{const{data:e}=await window.axios.get("/api/projects-simplified"),t=Array.isArray(e)?e.map(a=>({value:a.id,label:a.name})):[];R.value=[{value:null,label:"All Projects"},...t]}catch(e){console.error("Failed to fetch projects-simplified",e),R.value=[{value:null,label:"All Projects"}]}},ye=async()=>{try{const{data:e}=await window.axios.get("/api/users"),t=(Array.isArray(e)?e:[]).map(a=>({value:a.id,label:a.name}));M.value=A("view_all_user").value?[{value:"__all__",label:"All Users"},...t]:t}catch(e){console.error("Failed to fetch users",e),M.value=A("view_all_user").value?[{value:"__all__",label:"All Users"}]:[]}},ie=async e=>{if(!e&&e!==0)return[];if(re.has(e))return re.get(e);try{const{data:t}=await window.axios.get(`/api/projects/${e}/users`),a=(Array.isArray(t)?t:[]).map(l=>({value:l.id,label:l.name}));return re.set(e,a),a}catch(t){return console.error("Failed to fetch project users",t),[]}},_e=async()=>{const e=R.value.map(l=>l.value).filter(l=>l!==null),t=new Map;await Promise.all(e.map(async l=>{const o=await ie(l);for(const r of o)t.has(r.value)||t.set(r.value,r)}));const a=Array.from(t.values()).sort((l,o)=>String(l.label).localeCompare(String(o.label)));M.value=A("view_all_user").value?[{value:"__all__",label:"All Users"},...a]:a},Ge=async e=>{if(E.value=[],!!e)try{const{data:t}=await window.axios.get(`/api/projects/${e}/milestones`);E.value=(Array.isArray(t)?t:[]).map(a=>({value:a.id,label:a.name}))}catch(t){console.warn("Failed to fetch project milestones; falling back to none",t),E.value=[]}};Pe(async()=>{try{await Le.fetchGlobalPermissions()}catch{}await qe(),A("view_all_user").value?await ye():await _e()}),O(_,async e=>{if(x.value=null,await Ge(e),A("view_all_user").value)if(e){const t=await ie(e);M.value=[{value:"__all__",label:"All Users"},...t]}else await ye();else e?M.value=await ie(e):await _e();if(f.value&&A("view_all_user").value&&g.value==="__all__"){const t={};e&&(t.project_id=e),await he(t)}});const Qe=async()=>{var t,a;const e=(a=(t=Te().props.auth)==null?void 0:t.user)==null?void 0:a.id;if(e){k.value=!0,w.value="";try{const{data:l}=await window.axios.get("/api/tasks",{params:{assigned_to_user_id:e}});p.value=Array.isArray(l)?l:[]}catch(l){console.error("Failed to load assigned tasks for kanban",l),w.value="Failed to load tasks",p.value=[]}finally{k.value=!1}}},fe=async e=>{k.value=!0,w.value="";try{const{data:t}=await window.axios.get("/api/tasks",{params:e});p.value=Array.isArray(t)?t:Array.isArray(t==null?void 0:t.data)?t.data:[]}catch(t){console.error("Failed to load tasks",t),w.value="Failed to load tasks",p.value=[]}finally{k.value=!1}},he=async(e={})=>{var t;k.value=!0,w.value="";try{const a=new Date().toISOString().slice(0,10),l={...e,per_page:500,statuses:"To Do,In Progress,Paused,Blocked,Done",due_until:a},o=await window.axios.get("/api/tasks",{params:l}),r=Array.isArray(o.data)?o.data:Array.isArray((t=o.data)==null?void 0:t.data)?o.data.data:[];p.value=r}catch(a){console.error("Failed to load scoped All Users tasks",a),w.value="Failed to load tasks",p.value=[]}finally{k.value=!1}};O(f,e=>{setTimeout(()=>{e&&p.value.length===0&&!k.value&&Qe()},500)},{immediate:!0}),O(g,async e=>{var l,o;if(!f.value)return;const t=(o=(l=Te().props.auth)==null?void 0:l.user)==null?void 0:o.id,a={};_.value&&(a.project_id=_.value),A("view_all_user").value&&e==="__all__"?await he(a):e?await fe({...a,assigned_to_user_id:e,per_page:500}):t&&await fe({...a,assigned_to_user_id:t,per_page:500})});const Xe=X(()=>{const e=(I.value||"").toLowerCase().trim();return(p.value||[]).filter(a=>{var ke,we,be,xe,De,Ce;const l=!e||String(a.name||a.title||"").toLowerCase().includes(e)||String(((ke=a.milestone)==null?void 0:ke.name)||"").toLowerCase().includes(e)||String(((we=a.project)==null?void 0:we.name)||"").toLowerCase().includes(e),o=((be=a.project)==null?void 0:be.id)??((xe=a.milestone)==null?void 0:xe.project_id)??null,r=!_.value||o&&String(o)===String(_.value),H=a.assigned_to_user_id??((De=a.assigned_to)==null?void 0:De.id)??a.assigned_to_id??null,q=!g.value||g.value==="__all__"||H&&String(H)===String(g.value),G=!C.value||String(a.priority||"").toLowerCase()===String(C.value),L=((Ce=a.milestone)==null?void 0:Ce.id)??null,Q=!x.value||L&&String(L)===String(x.value);let D=!0;if(h.value&&h.value!=="all"){const T=a.due_date?new Date(a.due_date):null;if(!T)D=!1;else{const c=new Date(T);c.setHours(0,0,0,0);const U=new Date;U.setHours(0,0,0,0),h.value==="today"?D=c.getTime()===U.getTime():h.value==="overdue"?D=c.getTime()<U.getTime():h.value==="week"&&(D=T>=P&&T<=F)}}let m=!0;if(b.value&&b.value!=="all"){const T=a.completed_at||(a.status==="Done"?a.updated_at:null);if(!T)m=!1;else{const c=new Date(T),U=new Date(c);U.setHours(0,0,0,0);const Ae=new Date;switch(Ae.setHours(0,0,0,0),b.value){case"completed_today":m=U.getTime()===Ae.getTime();break;case"completed_yesterday":m=c>=z&&c<=ve;break;case"completed_this_week":m=c>=P&&c<=F;break;case"completed_last_week":m=c>=le&&c<=K;break;case"completed_this_month":m=c>=me&&c<=pe;break;case"completed_last_month":m=c>=ge&&c<=N;break;case"completed_last_7":m=c>=oe&&c<=F;break;case"completed_last_30":m=c>=ne&&c<=F;break;default:m=!0}m&&(m=a.status==="Done")}}return l&&r&&q&&G&&Q&&D&&m})}),Ze=X(()=>{const e={"To Do":[],"In Progress":[],Paused:[],Blocked:[],Done:[],Archived:[]};for(const t of Xe.value){const a=t.status&&e[t.status]!==void 0?t.status:"To Do";e[a].push(t)}return e.Done&&e.Done.length>0&&(e.Done.sort((t,a)=>new Date(a.updated_at||a.completed_at||0)-new Date(t.updated_at||t.completed_at||0)),e.Done=e.Done.slice(0,10)),e}),Y=n(!1),J=n(null),et=e=>{J.value=e,Y.value=!0},tt=async e=>{if(J.value)try{const t=await bt(J.value,e);$(t)}catch(t){console.error("Failed to block task from workspace:",t)}finally{Y.value=!1,J.value=null}},at=(e,t)=>e===t?null:e==="To Do"&&t==="In Progress"?"start":e==="In Progress"&&t==="Paused"?"pause":e==="Paused"&&t==="In Progress"?"resume":e==="In Progress"&&t==="Done"?"complete":(e==="To Do"||e==="In Progress"||e==="Paused")&&t==="Blocked"?"block":e==="Blocked"&&t==="In Progress"?"unblock_to_inprogress":e==="Done"&&t==="To Do"?"revise":null,$=e=>{if(!e)return;const t=p.value.findIndex(a=>String(a.id)===String(e.id));t>=0?p.value[t]={...p.value[t],...e}:p.value.push(e)},st=async({data:e,to:t})=>{if(!e||!t)return;const a=e.status,l=at(a,t);if(!l)return;const o={...e};e.status=t,$(e);try{let r;switch(l){case"start":r=await Fe(o);break;case"pause":r=await wt(o);break;case"resume":r=await kt(o);break;case"complete":r=await ht(o);break;case"block":return e.status=o.status,$(o),et(o);case"unblock_to_inprogress":r=await ft(o),r.status==="To Do"&&(r=await Fe(r));break;case"revise":r=await _t(o);break;default:throw new Error("Unsupported transition")}$(r)}catch{$(o)}};return Pe(async()=>{try{const e=localStorage.getItem("displayCurrency");e&&(mt.value=e),await pt()}catch(e){console.warn("Currency initialization failed in Workspace/Index.vue:",e)}}),(e,t)=>(i(),u(Ie,null,[y(Se(nt),{title:"My Workspace"}),y(yt,null,{header:ue(()=>[s("div",Pt,[s("div",Tt,[s("button",{type:"button",class:"px-3 py-1.5 rounded-md border text-sm transition border-gray-300 text-gray-700 hover:bg-gray-50 data-[active=true]:bg-indigo-600 data-[active=true]:text-white data-[active=true]:border-indigo-600","data-active":f.value?"true":"false",onClick:t[0]||(t[0]=a=>f.value=!f.value)}," Kanban ",8,St),t[15]||(t[15]=s("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Workspace",-1))])])]),default:ue(()=>[s("div",jt,[s("div",{class:je(f.value?"max-w-none w-full px-4 sm:px-6 lg:px-8":"max-w-7xl mx-auto sm:px-6 lg:px-8")},[s("div",It,[f.value?d("",!0):(i(),rt(xt,{key:0,"onUpdate:filter":t[1]||(t[1]=a=>j.value=a),"active-filter":j.value,search:ee.value,"onUpdate:search":t[2]||(t[2]=a=>ee.value=a),"pending-filter":te.value,"onUpdate:pending":t[3]||(t[3]=a=>te.value=a)},null,8,["active-filter","search","pending-filter"]))]),f.value?(i(),u("div",Vt,[s("div",Bt,[s("div",$t,[t[17]||(t[17]=s("h3",{class:"text-lg font-semibold text-gray-800"},"My Tasks (Kanban)",-1)),s("div",Ht,[k.value?(i(),u("span",Lt,"Loading...")):w.value?(i(),u("span",Ot,S(w.value),1)):d("",!0),s("div",Wt,[s("button",{type:"button",class:"px-3 py-1.5 text-sm border rounded-md bg-white hover:bg-gray-50",onClick:t[4]||(t[4]=a=>se.value=!se.value)}," Columns "),se.value?(i(),u("div",Rt,[s("div",Et,[(i(),u(Ie,null,it(de,a=>s("label",{key:a.key,class:"flex items-center gap-2 text-sm"},[Me(s("input",{type:"checkbox",class:"rounded",value:a.key,"onUpdate:modelValue":t[5]||(t[5]=l=>W.value=l)},null,8,zt),[[ut,W.value]]),s("span",null,S(a.title),1)])),64)),t[16]||(t[16]=s("div",{class:"text-xs text-gray-500 pt-1"},"Tip: Archived is optional",-1))])])):d("",!0)]),s("button",{type:"button",class:"px-3 py-1.5 text-sm border rounded-md bg-white hover:bg-gray-50",onClick:t[6]||(t[6]=a=>B.value=!B.value)},S(B.value?"Hide Filters":"Show Filters"),1),B.value?(i(),u("button",{key:2,type:"button",class:"px-3 py-1.5 text-sm border rounded-md bg-white hover:bg-gray-50",onClick:We,title:"Clear all filters"}," Clear All ")):d("",!0)])]),B.value?(i(),u("div",Kt,[s("div",Nt,[Me(s("input",{type:"text","onUpdate:modelValue":t[7]||(t[7]=a=>I.value=a),placeholder:"Search tasks...",class:"w-full pr-16 px-3 py-2 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-500"},null,512),[[ct,I.value]]),s("div",Yt,[I.value?(i(),u("button",{key:0,type:"button",class:"text-xs text-gray-600 hover:text-gray-900",onClick:Je},"Clear")):d("",!0)])]),s("div",Jt,[s("div",qt,[y(V,{modelValue:_.value,"onUpdate:modelValue":t[8]||(t[8]=a=>_.value=a),options:R.value,placeholder:"Filter by project"},null,8,["modelValue","options"])]),_.value?(i(),u("button",{key:0,type:"button",class:"text-xs text-gray-600 hover:text-gray-900",onClick:Re},"Clear")):d("",!0)]),s("div",Gt,[s("div",Qt,[y(V,{modelValue:g.value,"onUpdate:modelValue":t[9]||(t[9]=a=>g.value=a),options:M.value,placeholder:"Filter by assignee"},null,8,["modelValue","options"])]),g.value?(i(),u("button",{key:0,type:"button",class:"text-xs text-gray-600 hover:text-gray-900",onClick:Ee},"Clear")):d("",!0)]),s("div",Xt,[s("div",Zt,[y(V,{modelValue:C.value,"onUpdate:modelValue":t[10]||(t[10]=a=>C.value=a),options:Oe,placeholder:"Priority"},null,8,["modelValue"])]),C.value?(i(),u("button",{key:0,type:"button",class:"text-xs text-gray-600 hover:text-gray-900",onClick:ze},"Clear")):d("",!0)]),_.value?(i(),u("div",ea,[s("div",ta,[y(V,{modelValue:x.value,"onUpdate:modelValue":t[11]||(t[11]=a=>x.value=a),options:E.value,placeholder:"Filter by milestone"},null,8,["modelValue","options"])]),x.value?(i(),u("button",{key:0,type:"button",class:"text-xs text-gray-600 hover:text-gray-900",onClick:Ke},"Clear")):d("",!0)])):d("",!0),s("div",aa,[s("div",sa,[y(V,{modelValue:h.value,"onUpdate:modelValue":t[12]||(t[12]=a=>h.value=a),options:[{value:"all",label:"All Due"},{value:"today",label:"Due Today"},{value:"overdue",label:"Overdue"},{value:"week",label:"Due This Week"}],placeholder:"Due filter"},null,8,["modelValue"])]),h.value!=="all"?(i(),u("button",{key:0,type:"button",class:"text-xs text-gray-600 hover:text-gray-900",onClick:Ne},"Clear")):d("",!0)]),s("div",la,[s("div",oa,[y(V,{modelValue:b.value,"onUpdate:modelValue":t[13]||(t[13]=a=>b.value=a),options:[{value:"all",label:"All Completed"},{value:"completed_today",label:"Completed Today"},{value:"completed_yesterday",label:"Completed Yesterday"},{value:"completed_this_week",label:"Completed This Week"},{value:"completed_last_week",label:"Completed Last Week"},{value:"completed_this_month",label:"Completed This Month"},{value:"completed_last_month",label:"Completed Last Month"},{value:"completed_last_7",label:"Completed in Last 7 Days"},{value:"completed_last_30",label:"Completed in Last 30 Days"}],placeholder:"Completed filter"},null,8,["modelValue"])]),b.value!=="all"?(i(),u("button",{key:0,type:"button",class:"text-xs text-gray-600 hover:text-gray-900",onClick:Ye},"Clear")):d("",!0)])])):d("",!0)]),y(At,{columns:He.value,"items-by-column":Ze.value,loading:k.value,onDrop:st},{item:ue(({item:a,columnKey:l})=>{var o,r,H,q,G,L;return[s("div",{class:je(["relative p-3 rounded-md bg-white border border-gray-200 shadow-sm cursor-move border-l-4",[String(a.priority||"").toLowerCase()==="high"?"border-l-red-500":String(a.priority||"").toLowerCase()==="medium"?"border-l-yellow-500":String(a.priority||"").toLowerCase()==="low"?"border-l-green-500":"border-l-gray-200",a.due_date&&new Date(a.due_date)<new Date(new Date().setHours(0,0,0,0))&&a.status!=="Done"?"ring-1 ring-red-300":""]]),draggable:"true",onDragstart:Q=>Q.dataTransfer.setData("text/plain",JSON.stringify(a)),onClick:dt(Q=>{var D;return Se(vt)(a.id,(D=a.milestone)==null?void 0:D.project_id)},["stop"]),title:(o=a.milestone)!=null&&o.name?`${a.name} â€” ${a.milestone.name}`:a.name},[a.due_date&&new Date(a.due_date)<new Date(new Date().setHours(0,0,0,0))&&a.status!=="Done"?(i(),u("div",ra,t[18]||(t[18]=[s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[s("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.487 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11.75 13a.75.75 0 01-1.5 0v-2.25a.75.75 0 011.5 0V13zm-1.5-7.5a.75.75 0 011.5 0v1.5a.75.75 0 01-1.5 0V5.5z","clip-rule":"evenodd"})],-1)]))):d("",!0),s("div",ia,S(a.name||a.title||"Task"),1),(r=a.milestone)!=null&&r.name?(i(),u("div",ua,S(a.milestone.name),1)):d("",!0),s("div",ca,S(((H=a.project)==null?void 0:H.name)||((G=(q=a.milestone)==null?void 0:q.project)==null?void 0:G.name)),1),!g.value||g.value==="__all__"?(i(),u("div",da,S((L=a.assigned_to)==null?void 0:L.name),1)):d("",!0)],42,na)]}),_:1},8,["columns","items-by-column","loading"]),y(gt,{show:Y.value,title:"Block Task","confirm-text":"Block Task",placeholder:"Enter reason for blocking...",onClose:t[14]||(t[14]=a=>Y.value=!1),onConfirm:tt},null,8,["show"])])):(i(),u("div",Mt,[s("div",Ft,[y(Dt,{search:ee.value,"active-filter":j.value,"pending-filter":te.value},null,8,["search","active-filter","pending-filter"])]),s("div",Ut,[y(Ct,{"checklist-items":ae.value,notes:ce.value,onAddChecklistItem:Ue,onRemoveChecklistItem:Ve,onUpdateNotes:Be},null,8,["checklist-items","notes"])])]))],2)])]),_:1})],64))}};export{Oa as default};
