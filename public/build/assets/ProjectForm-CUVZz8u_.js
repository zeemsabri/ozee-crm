import{r as S,z as Ue,s as U,w as se,i as s,o as t,b as a,g as w,t as j,m as N,e as o,f as Me,v as Fe,F as me,j as ve,n as X,c as ge,a as ae,a1 as Ee,N as Ke,B as je,h as V,a5 as Je,q as Ye,_ as qe,I as He,d as Qe,H as Te,x as Be,k as Ie,Q as Ze,a6 as Xe,a7 as ea,a8 as aa,J as la}from"./app-D5G0eC8U.js";import{P as ue}from"./PrimaryButton-BbYtyW3j.js";import{_ as D,a as Y,b as R}from"./InputError-B1y5QRUu.js";import{_ as ta}from"./Checkbox-ClIsPjoe.js";import{S as ie,s as ne,e as re,w as sa}from"./AuthenticatedLayout-CPa1D12g.js";import{a as De}from"./SecondaryButton-BsDQQMvb.js";const oa={class:"p-6 bg-white rounded-lg shadow-xl font-inter"},ra={key:0,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert"},na={class:"block sm:inline ml-2"},ia={key:1,class:"flex items-center justify-center py-8"},ua={key:2},ca={key:0,class:"bg-gradient-to-r from-blue-500 to-indigo-600 text-white p-6 rounded-lg shadow-md mb-6"},da={class:"flex items-center justify-between"},ma={class:"text-3xl font-bold mt-1"},va={class:"text-sm opacity-90 mt-2"},ba={class:"font-semibold"},ga={class:"font-semibold"},pa={key:1,class:"bg-gray-100 text-gray-600 p-4 rounded-lg shadow-sm mb-6 text-center"},fa={class:"bg-gray-50 p-6 rounded-lg shadow-sm mb-6 border border-gray-200"},ya={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Aa=["disabled"],ha=["value"],Ma={class:"bg-gray-50 p-6 rounded-lg shadow-sm mb-6 border border-gray-200"},wa={class:"mb-4"},ka={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-1 gap-4"},Ta={class:"flex items-center justify-between"},xa=["for"],_a={class:"ms-2 text-base font-medium text-gray-800"},Ga=["onClick"],Pa={key:0,class:"mt-4 pt-4 border-t border-gray-200"},ja={class:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4"},Sa={class:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4"},Ca=["id","onUpdate:modelValue","disabled"],$a={key:0,class:"mt-4 p-4 bg-blue-50 rounded-lg border border-blue-200"},Va={class:"flex justify-between items-center mb-3"},Ea={class:"space-y-4"},Da={class:"flex justify-between items-center mb-2"},Ba=["onClick"],Ua={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},Ia=["onClick"],Na={key:0},Fa={class:"mt-6 pt-4 border-t border-gray-200"},Ra={key:1,class:"mt-4 flex items-center"},La={key:2,class:"mt-6 flex justify-end"},Oa={__name:"ServicesAndPaymentForm",props:{projectId:{type:[Number,String],required:!0},paymentTypeOptions:{type:Array,required:!0},canManageProjectServicesAndPayments:{type:Boolean,required:!0},canViewProjectServicesAndPayments:{type:Boolean,required:!0}},emits:["updated"],setup(e,{emit:P}){const u=e,k=P,l=S({}),c=S(!1),x=[{value:"PKR",label:"PKR"},{value:"AUD",label:"AUD"},{value:"INR",label:"INR"},{value:"USD",label:"USD"},{value:"EUR",label:"EUR"},{value:"GBP",label:"GBP"}],y=S([...[{value:"Website Designing",label:"Website Designing"},{value:"SEO",label:"SEO"},{value:"Social Media",label:"Social Media"},{value:"Content Writing",label:"Content Writing"},{value:"Graphic Design",label:"Graphic Design"}]]),v=S(""),n=S(!1),m=Ue({services:[],service_details:[],payment_type:"one_off",currency:"AUD"}),B=Ue({}),O=U(()=>{let T=0;return m.services.forEach(i=>{const r=A(i);r&&r.amount&&(T+=parseFloat(r.amount))}),T.toFixed(2)}),q=U(()=>{let T=null,i=null;const r=new Date;return r.setHours(0,0,0,0),m.service_details.forEach(C=>{C.frequency==="one_off"&&C.payment_breakdown&&C.payment_breakdown.forEach(M=>{var W;if(M.due_date){const F=new Date(M.due_date);F.setHours(0,0,0,0),F>=r&&(!T||F<T.date)&&(T={date:F,serviceId:C.service_id,paymentLabel:M.label},i=((W=y.value.find(Q=>Q.value===C.service_id))==null?void 0:W.label)||C.service_id)}})}),T?{date:T.date.toLocaleDateString(),serviceLabel:i,paymentLabel:T.paymentLabel}:null}),H=U(()=>{const T=m.services.filter(i=>{const r=A(i);return r&&r.frequency!=="monthly"});return T.length===0?!0:T.every(i=>E(i)===100)}),J=U(()=>!u.projectId||!u.canManageProjectServicesAndPayments||!H.value),f=()=>{const T=v.value.trim();T&&!y.value.some(i=>i.label.toLowerCase()===T.toLowerCase())&&(y.value.push({value:T,label:T}),v.value="",n.value=!1)},b=async()=>{if(u.projectId){c.value=!0;try{const i=(await window.axios.get(`/api/projects/${u.projectId}/sections/services-payment`)).data;return m.services=i.services||[],m.service_details=i.service_details||[],m.payment_type=i.payment_type||"one_off",m.currency=i.currency||"AUD",m.services.forEach(r=>{y.value.some(C=>C.value===r)||y.value.push({value:r,label:r}),B[r]=!1}),m.service_details.forEach(r=>{if(r.payment_breakdown&&!Array.isArray(r.payment_breakdown)){const C=r.payment_breakdown;r.payment_breakdown=[{label:"First",percentage:parseInt(C.first)||30,due_date:null},{label:"Second",percentage:parseInt(C.second)||30,due_date:null},{label:"Third",percentage:parseInt(C.third)||40,due_date:null}]}else!r.payment_breakdown||r.payment_breakdown.length===0?r.payment_breakdown=[{label:"Payment 1",percentage:100,due_date:null}]:r.payment_breakdown.forEach(C=>{C.due_date===void 0&&(C.due_date=null)})}),i}catch(T){return console.error("Error fetching services and payment data:",T),l.value.general="Failed to fetch services and payment data.",null}finally{c.value=!1}}},h=async()=>{l.value={},c.value=!0;try{const T={services:m.services,service_details:m.service_details,total_amount:parseFloat(O.value),payment_type:m.payment_type,currency:m.currency},i=await window.axios.put(`/api/projects/${u.projectId}/sections/services-payment`,T);ne("Services and payment information updated successfully!"),k("updated")}catch(T){T.response&&T.response.status===422?l.value=T.response.data.errors:T.response&&T.response.data.message?l.value.general=T.response.data.message:(l.value.general="Failed to update services and payment information.",console.error("Error:",T))}finally{c.value=!1}},L=(T,i)=>{i?(m.service_details.some(r=>r.service_id===T)||m.service_details.push({service_id:T,amount:"",frequency:"one_off",start_date:"",payment_breakdown:[{label:"Payment 1",percentage:100,due_date:null}],currency:m.currency}),B[T]=!0):(m.service_details=m.service_details.filter(r=>r.service_id!==T),B[T]=!1)},A=T=>{let i=m.service_details.find(r=>r.service_id===T);if(!i)i={service_id:T,amount:"",frequency:"one_off",start_date:"",payment_breakdown:[{label:"Payment 1",percentage:100,due_date:null}],currency:m.currency},m.service_details.push(i);else if(i.payment_breakdown&&!Array.isArray(i.payment_breakdown)){const r=i.payment_breakdown;i.payment_breakdown=[{label:"First",percentage:parseInt(r.first)||30,due_date:null},{label:"Second",percentage:parseInt(r.second)||30,due_date:null},{label:"Third",percentage:parseInt(r.third)||40,due_date:null}]}else!i.payment_breakdown||i.payment_breakdown.length===0?i.payment_breakdown=[{label:"Payment 1",percentage:100,due_date:null}]:i.payment_breakdown.forEach(r=>{r.due_date===void 0&&(r.due_date=null)});return i},E=T=>{const i=A(T);return!i.payment_breakdown||!Array.isArray(i.payment_breakdown)?0:i.payment_breakdown.reduce((r,C)=>r+(parseInt(C.percentage)||0),0)},z=T=>{const i=A(T);if(i.payment_breakdown||(i.payment_breakdown=[]),!Array.isArray(i.payment_breakdown)){const M=i.payment_breakdown;i.payment_breakdown=[{label:"First",percentage:parseInt(M.first)||30,due_date:null},{label:"Second",percentage:parseInt(M.second)||30,due_date:null},{label:"Third",percentage:parseInt(M.third)||40,due_date:null}]}const r=i.payment_breakdown.length;let C=0;if(r>0){const M=i.payment_breakdown[r-1];C=Math.floor(M.percentage/2),M.percentage-=C}else C=100;i.payment_breakdown.push({label:`Payment ${r+1}`,percentage:C,due_date:null})},I=(T,i)=>{const r=A(T);if(!r.payment_breakdown||!Array.isArray(r.payment_breakdown)||r.payment_breakdown.length<=1)return;const C=parseInt(r.payment_breakdown[i].percentage)||0;if(r.payment_breakdown.splice(i,1),C>0&&r.payment_breakdown.length>0){const M=i>0&&i<=r.payment_breakdown.length?i-1:0;r.payment_breakdown[M].percentage=(parseInt(r.payment_breakdown[M].percentage)||0)+C}r.payment_breakdown.forEach((M,W)=>{M.label=`Payment ${W+1}`})},le=T=>{B[T]=!B[T]};return se(()=>u.projectId,T=>{T&&b()},{immediate:!0}),(T,i)=>(t(),s("div",oa,[i[22]||(i[22]=a("h3",{class:"text-2xl font-semibold text-gray-800 mb-6"},"Project Services & Payments",-1)),l.value.general?(t(),s("div",ra,[i[6]||(i[6]=a("strong",{class:"font-bold"},"Error!",-1)),a("span",na,j(l.value.general),1)])):w("",!0),c.value?(t(),s("div",ia,i[7]||(i[7]=[a("svg",{class:"animate-spin -ml-1 mr-3 h-8 w-8 text-blue-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[a("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),a("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),a("span",{class:"text-gray-600"},"Loading services and payment data...",-1)]))):(t(),s("div",ua,[q.value?(t(),s("div",ca,[a("div",da,[a("div",null,[i[10]||(i[10]=a("p",{class:"text-sm opacity-90"},"Next Payment Due",-1)),a("p",ma,j(q.value.date),1),a("p",va,[i[8]||(i[8]=N(" For: ",-1)),a("span",ba,j(q.value.serviceLabel),1),i[9]||(i[9]=N(" - ",-1)),a("span",ga,j(q.value.paymentLabel),1)])]),i[11]||(i[11]=a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-12 w-12 opacity-70",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1))])])):(t(),s("div",pa," No upcoming payment due dates found for one-off services. ")),a("div",fa,[i[13]||(i[13]=a("h4",{class:"text-xl font-semibold text-gray-700 mb-4"},"Overall Project Payment Details",-1)),a("div",ya,[a("div",null,[o(D,{for:"calculated_total_amount",value:"Calculated Total Amount"}),o(Y,{id:"calculated_total_amount",type:"text",class:"mt-1 block w-full bg-gray-100 cursor-not-allowed",value:O.value,disabled:""},null,8,["value"]),i[12]||(i[12]=a("p",{class:"text-sm text-gray-500 mt-1"},"This amount is automatically calculated from selected services.",-1))]),a("div",null,[o(D,{for:"payment_type",value:"Payment Type"}),Me(a("select",{id:"payment_type",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full p-2.5","onUpdate:modelValue":i[0]||(i[0]=r=>m.payment_type=r),required:"",disabled:!e.canManageProjectServicesAndPayments},[(t(!0),s(me,null,ve(e.paymentTypeOptions,r=>(t(),s("option",{key:r.value,value:r.value},j(r.label),9,ha))),128))],8,Aa),[[Fe,m.payment_type]]),o(R,{message:l.value.payment_type?l.value.payment_type[0]:"",class:"mt-2"},null,8,["message"])]),a("div",null,[o(D,{for:"overall_currency",value:"Overall Project Currency"}),o(ie,{id:"overall_currency",modelValue:m.currency,"onUpdate:modelValue":i[1]||(i[1]=r=>m.currency=r),options:x,"value-key":"value","label-key":"label",class:"w-full mt-1",disabled:!e.canManageProjectServicesAndPayments},null,8,["modelValue","disabled"]),o(R,{message:l.value.currency?l.value.currency[0]:"",class:"mt-2"},null,8,["message"])])])]),a("div",Ma,[i[20]||(i[20]=a("h4",{class:"text-xl font-semibold text-gray-700 mb-4"},"Manage Services",-1)),a("div",wa,[o(D,{for:"services",value:"Select Services",class:"mb-2"}),a("div",ka,[(t(!0),s(me,null,ve(y.value,r=>(t(),s("div",{key:r.value,class:"bg-white p-4 rounded-lg shadow-sm border border-gray-200"},[a("div",Ta,[a("label",{for:`service_${r.value}`,class:"flex items-center cursor-pointer"},[o(ta,{id:`service_${r.value}`,value:r.value,checked:m.services,"onUpdate:checked":[i[2]||(i[2]=C=>m.services=C),C=>L(r.value,C)],disabled:!e.canManageProjectServicesAndPayments},null,8,["id","value","checked","onUpdate:checked","disabled"]),a("span",_a,j(r.label),1)],8,xa),(m.services||[]).includes(r.value)?(t(),s("button",{key:0,onClick:C=>le(r.value),type:"button",class:X(["text-gray-500 hover:text-gray-700 transition-transform duration-200",{"rotate-180":B[r.value]}])},i[14]||(i[14]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1)]),10,Ga)):w("",!0)]),(m.services||[]).includes(r.value)&&B[r.value]?(t(),s("div",Pa,[a("div",ja,[a("div",null,[o(D,{for:`service_amount_${r.value}`,value:"Amount"},null,8,["for"]),o(Y,{id:`service_amount_${r.value}`,type:"number",step:"0.01",placeholder:"Service Amount",class:"w-full mt-1",modelValue:A(r.value).amount,"onUpdate:modelValue":C=>A(r.value).amount=C,disabled:!e.canManageProjectServicesAndPayments},null,8,["id","modelValue","onUpdate:modelValue","disabled"])]),a("div",null,[o(D,{for:`service_currency_${r.value}`,value:"Currency"},null,8,["for"]),o(ie,{id:`service_currency_${r.value}`,modelValue:A(r.value).currency,"onUpdate:modelValue":C=>A(r.value).currency=C,options:x,"value-key":"value","label-key":"label",class:"w-full mt-1",disabled:!e.canManageProjectServicesAndPayments},null,8,["id","modelValue","onUpdate:modelValue","disabled"])])]),a("div",Sa,[a("div",null,[o(D,{for:`service_frequency_${r.value}`,value:"Frequency"},null,8,["for"]),Me(a("select",{id:`service_frequency_${r.value}`,class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full p-2.5","onUpdate:modelValue":C=>A(r.value).frequency=C,disabled:!e.canManageProjectServicesAndPayments},i[15]||(i[15]=[a("option",{value:"monthly"},"Monthly",-1),a("option",{value:"one_off"},"One off",-1)]),8,Ca),[[Fe,A(r.value).frequency]])]),a("div",null,[o(D,{for:`service_start_date_${r.value}`,value:"Start Date"},null,8,["for"]),o(Y,{id:`service_start_date_${r.value}`,type:"date",class:"w-full mt-1",modelValue:A(r.value).start_date,"onUpdate:modelValue":C=>A(r.value).start_date=C,disabled:!e.canManageProjectServicesAndPayments},null,8,["id","modelValue","onUpdate:modelValue","disabled"])])]),A(r.value).frequency!=="monthly"?(t(),s("div",$a,[a("div",Va,[o(D,{value:"Payment Breakdown (%)",class:"text-base font-medium text-blue-800"}),e.canManageProjectServicesAndPayments?(t(),ge(ue,{key:0,type:"button",onClick:C=>z(r.value),class:"px-4 py-2 text-sm"},{default:ae(()=>i[16]||(i[16]=[N(" + Add Payment Step ",-1)])),_:2,__:[16]},1032,["onClick"])):w("",!0)]),a("div",Ea,[(t(!0),s(me,null,ve(A(r.value).payment_breakdown,(C,M)=>(t(),s("div",{key:M,class:"bg-white p-4 rounded-md shadow-sm border border-blue-100"},[a("div",Da,[o(D,{for:`payment_label_${M}_${r.value}`,value:C.label,class:"font-semibold"},null,8,["for","value"]),e.canManageProjectServicesAndPayments&&A(r.value).payment_breakdown.length>1?(t(),s("button",{key:0,type:"button",class:"text-red-500 hover:text-red-700 p-1 rounded-full hover:bg-red-100 transition-colors",onClick:W=>I(r.value,M),title:"Remove payment step"},i[17]||(i[17]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[a("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 011-1h4a1 1 0 110 2H8a1 1 0 01-1-1zm-1 3a1 1 0 100 2h8a1 1 0 100-2H6z","clip-rule":"evenodd"})],-1)]),8,Ba)):w("",!0)]),a("div",Ua,[a("div",null,[o(D,{for:`payment_percentage_${M}_${r.value}`,value:"Percentage (%)",class:"text-sm"},null,8,["for"]),o(Y,{id:`payment_percentage_${M}_${r.value}`,type:"number",min:"0",max:"100",class:"w-full mt-1",modelValue:C.percentage,"onUpdate:modelValue":W=>C.percentage=W,modelModifiers:{number:!0},onInput:W=>{C.percentage=Math.max(0,Math.min(100,parseInt(W.target.value)||0))},disabled:!e.canManageProjectServicesAndPayments},null,8,["id","modelValue","onUpdate:modelValue","onInput","disabled"])]),a("div",null,[o(D,{for:`payment_due_date_${M}_${r.value}`,value:"Due Date (Optional)",class:"text-sm"},null,8,["for"]),o(Y,{id:`payment_due_date_${M}_${r.value}`,type:"date",class:"w-full mt-1",modelValue:C.due_date,"onUpdate:modelValue":W=>C.due_date=W,disabled:!e.canManageProjectServicesAndPayments},null,8,["id","modelValue","onUpdate:modelValue","disabled"]),e.canManageProjectServicesAndPayments&&C.due_date?(t(),s("button",{key:0,type:"button",class:"text-xs text-red-500 hover:text-red-700 mt-1",onClick:W=>C.due_date=null}," Clear Date ",8,Ia)):w("",!0)])])]))),128))]),a("div",{class:X(["text-sm mt-4 p-2 rounded-md",{"bg-green-100 text-green-700":E(r.value)===100,"bg-red-100 text-red-700 font-bold":E(r.value)!==100}])},[N(" Total Percentage: "+j(E(r.value))+"% ",1),E(r.value)!==100?(t(),s("span",Na," (Total must be 100%) ")):w("",!0)],2)])):w("",!0)])):w("",!0)]))),128))])]),a("div",Fa,[e.canManageProjectServicesAndPayments&&!n.value?(t(),s("button",{key:0,type:"button",class:"inline-flex items-center px-4 py-2 bg-blue-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-blue-700 active:bg-blue-900 focus:outline-none focus:border-blue-900 focus:ring ring-blue-300 disabled:opacity-25 transition ease-in-out duration-150 shadow-md",onClick:i[3]||(i[3]=r=>n.value=!0)},i[18]||(i[18]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4v16m8-8H4"})],-1),N(" Add New Service/Department ",-1)]))):w("",!0),e.canManageProjectServicesAndPayments&&n.value?(t(),s("div",Ra,[o(Y,{type:"text",class:"flex-grow mr-2 border-gray-300 rounded-md shadow-sm p-2.5",modelValue:v.value,"onUpdate:modelValue":i[4]||(i[4]=r=>v.value=r),placeholder:"Enter new service/department name",onKeyup:Ee(f,["enter"])},null,8,["modelValue"]),o(ue,{onClick:f},{default:ae(()=>i[19]||(i[19]=[N("Add",-1)])),_:1,__:[19]}),a("button",{type:"button",class:"ml-2 text-sm text-gray-500 hover:text-gray-700 px-3 py-2 rounded-md transition-colors",onClick:i[5]||(i[5]=r=>{n.value=!1,v.value=""})}," Cancel ")])):w("",!0)]),o(R,{message:l.value.services?l.value.services[0]:"",class:"mt-2"},null,8,["message"])]),e.canManageProjectServicesAndPayments?(t(),s("div",La,[o(ue,{onClick:h,disabled:J.value,class:X([{"opacity-50 cursor-not-allowed":J.value},"px-6 py-3 text-base"])},{default:ae(()=>i[21]||(i[21]=[N(" Update Services & Payment ",-1)])),_:1,__:[21]},8,["disabled","class"])])):w("",!0)]))]))}},Z=S({}),za=localStorage.getItem("displayCurrency"),We=S(za||"USD");se(We,e=>{localStorage.setItem("displayCurrency",e)});const Re=async()=>{try{const e=await window.axios.get("/api/currency-rates");Z.value=e.data,console.log("Fetched currency rates:",Z.value)}catch(e){console.error("Failed to fetch currency rates:",e),Z.value={PKR:.0034,AUD:.65,INR:.012,EUR:1.08,GBP:1.28,USD:1}}},oe=(e,P="USD")=>{if(isNaN(e)||e==null)return"0.00";try{return new Intl.NumberFormat("en-US",{style:"currency",currency:P,minimumFractionDigits:2,maximumFractionDigits:2}).format(e)}catch(u){return console.warn(`Error formatting currency for ${e} ${P}:`,u),`${P} ${parseFloat(e).toFixed(2)}`}},Pe=(e,P,u)=>{if(isNaN(e)||e==null||!P||!u)return 0;if(P.toUpperCase()===u.toUpperCase())return Number(e);const k=Z.value,l=k[P.toUpperCase()],c=k[u.toUpperCase()];if(!l||!c)return console.warn(`Missing conversion rates for: ${P} or ${u}. Cannot perform conversion.`),Number(e);const _=Number(e)*l/c;return Number(_.toFixed(2))},Ka={class:"p-6 bg-white rounded-lg shadow-xl"},qa={key:0,class:"text-red-600 text-sm mb-4"},Ha={key:1,class:"mb-6 p-4 bg-gray-50 rounded-md"},Wa={class:"mb-6"},Ja={class:"flex justify-end items-center mb-4"},Ya={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Qa={class:"p-3 bg-blue-100 rounded-md"},Za={class:"text-lg font-bold text-blue-800"},Xa={class:"p-3 bg-red-100 rounded-md"},el={class:"text-lg font-bold text-red-800"},al={class:"text-xs text-gray-500"},ll={class:"p-3 bg-purple-100 rounded-md"},tl={class:"text-lg font-bold text-purple-800"},sl={class:"p-3 bg-green-100 rounded-md"},ol={class:"text-lg font-bold text-green-800"},rl={class:"p-3 bg-yellow-100 rounded-md col-span-full md:col-span-1"},nl={class:"text-lg font-bold text-yellow-800"},il={class:"text-xs text-gray-500"},ul={class:"p-3 bg-orange-100 rounded-md col-span-full md:col-span-1"},cl={class:"text-lg font-bold text-orange-900 mt-1"},dl={class:"text-xs text-gray-500"},ml={class:"p-3 bg-gray-100 rounded-md col-span-full md:col-span-1"},vl={class:"text-lg font-bold mt-1 text-green-400"},bl={class:"p-3 bg-gray-100 rounded-md col-span-full md:col-span-1"},gl={class:"text-lg font-bold text-red-400 mt-1"},pl={class:"grid grid-cols-1 gap-4 md:grid-cols-2"},fl={key:0},yl={key:1},Al={class:"mt-4 flex justify-end"},hl={key:2},Ml={key:0,class:"space-y-3"},wl={key:1,class:"p-4 bg-gray-50 rounded-md text-gray-600 text-center"},kl={key:2,class:"space-y-4"},Tl={class:"flex justify-between items-start mb-2"},xl={class:"flex-grow"},_l={class:"font-medium text-gray-900 text-lg"},Gl={class:"text-xs text-gray-500 mt-1"},Pl={class:"flex-shrink-0 text-right"},jl={key:0,class:"text-sm text-gray-600"},Sl={class:"flex justify-between items-end text-xs text-gray-600 mt-2 border-t border-gray-200 pt-2"},Cl={key:0,class:"block"},$l={key:1,class:"block"},Vl={key:2,class:"block mt-1 text-gray-500"},El={class:"flex space-x-2 mt-2"},Dl={key:0,class:"mt-4 p-4 bg-blue-50 rounded-md border border-blue-200"},Bl={class:"text-md font-medium text-gray-900 mb-4"},Ul={class:"mb-4"},Il={class:"mb-4"},Nl={class:"flex items-center"},Fl=["disabled"],Rl={class:"text-sm text-gray-700"},Ll={key:0,class:"mb-4"},Ol={class:"flex justify-end space-x-2"},Le=.25,zl={__name:"ProjectTransactions",props:{projectId:{type:[Number,String],required:!0},userProjectRole:{type:Object,default:()=>({})}},setup(e){const P=e,{canDo:u,canManage:k}=Ke(()=>P.projectId),l=k("project_expenses",P.userProjectRole),c=k("project_income",P.userProjectRole),x=u("view_project_transactions",P.userProjectRole),_=S([]),y=S([]),v=S({}),n=S(""),m=S(!1),B=S(null),O=S(""),q=S(!1),H=S({}),J=S(null),f=S(""),b=S({description:"",amount:"",currency:"PKR",user_id:null,hours_spent:"",type:"expense"}),h=We,L=[{value:"PKR",label:"PKR"},{value:"AUD",label:"AUD"},{value:"INR",label:"INR"},{value:"USD",label:"USD"},{value:"EUR",label:"EUR"},{value:"GBP",label:"GBP"}],A=[{value:"expense",label:"Expense"},{value:"income",label:"Income"},{value:"bonus",label:"Bonus"}],E=U(()=>y.value.map(G=>({value:G.id,label:G.name||"Unknown User"}))),z=()=>{const G=new Date,d=G.getFullYear(),K=String(G.getMonth()+1).padStart(2,"0"),ee=String(G.getDate()).padStart(2,"0");return`${d}-${K}-${ee}`},I=async()=>{if(!(!P.projectId||!x.value))try{const G=await window.axios.get(`/api/projects/${P.projectId}/sections/clients-users`);y.value=G.data.users||[]}catch(G){n.value="Failed to fetch users.",console.error("Error fetching users:",G)}},le=async()=>{if(!(!P.projectId||!x.value)){m.value=!0;try{(!Z.value||Object.keys(Z.value).length===0)&&await Re();const G=await window.axios.get(`/api/projects/${P.projectId}/sections/transactions`);_.value=G.data}catch(G){n.value="Failed to fetch transactions.",console.error("Error fetching transactions:",G)}finally{m.value=!1}}},T=async()=>{var G;if(!l.value&&!c.value){re("You do not have permission to manage transactions.");return}if(!b.value.amount||isNaN(b.value.amount)){v.value.amount=["Please enter a valid amount"];return}if(b.value.type==="expense"&&!l.value){re("You do not have permission to add expenses.");return}if(b.value.type==="income"&&!c.value){re("You do not have permission to add income.");return}if(b.value.type==="bonus"&&!l.value){re("You do not have permission to add bonuses.");return}v.value={},n.value="",m.value=!0;try{const d={...b.value,amount:Number(b.value.amount)},K=await window.axios.post(`/api/projects/${P.projectId}/transactions`,d);await le(),i(),ne("Transaction saved successfully!")}catch(d){((G=d.response)==null?void 0:G.status)===422?v.value=d.response.data.errors:(n.value="Failed to save transaction.",console.error("Error saving transaction:",d))}finally{m.value=!1}},i=()=>{b.value={description:"",amount:"",currency:"PKR",user_id:null,hours_spent:"",type:"expense"}},r=async G=>{if(!l.value&&!c.value){re("You do not have permission to delete transactions.");return}if(window.confirm("Are you sure you want to delete this transaction?"))try{const d=_.value[G].id;await window.axios.delete(`/api/projects/${P.projectId}/transactions/${d}`),await le(),ne("Transaction deleted successfully!")}catch(d){n.value="Failed to delete transaction.",console.error("Error deleting transaction:",d)}},C=G=>{if(!l.value&&!c.value){re("You do not have permission to manage transactions.");return}const d=_.value[G];B.value===d.id?(B.value=null,J.value=null,f.value=""):(J.value=G,B.value=d.id,O.value=d.amount,q.value=!1,H.value={},f.value=z(),(Number(d.amount)===0||Math.abs(Number(O.value)-Number(d.amount))<.01)&&(q.value=!0))};se(O,G=>{if(J.value!==null){const d=_.value[J.value];q.value=Math.abs(Number(G)-Number(d.amount))<.01}});const M=()=>{B.value=null,J.value=null,O.value="",q.value=!1,H.value={},f.value=""},W=async()=>{var ee;if(!l.value&&!c.value){re("You do not have permission to manage transactions.");return}const G=J.value,d=_.value[G],K=Number(O.value);if(!q.value&&(!O.value||isNaN(K)||K<=0||K>Number(d.amount))){H.value.amount=["Please enter a valid amount between 0 and "+oe(Number(d.amount),d.currency)];return}if(!f.value){H.value.date=["Please select a payment date."];return}H.value={},m.value=!0;try{const de=d.id,fe=q.value||Math.abs(K-Number(d.amount))<.01,$={payment_amount:fe?Number(d.amount):K,pay_in_full:fe,transaction_currency:d.currency,transaction_type:d.type,original_description:d.description,payment_date:f.value};await window.axios.patch(`/api/projects/${P.projectId}/transactions/${de}/process-payment`,$),await le(),ne("Payment processed successfully!"),M()}catch(de){((ee=de.response)==null?void 0:ee.status)===422?H.value=de.response.data.errors:(n.value="Failed to process payment.",console.error("Error processing payment:",de))}finally{m.value=!1}},F=U(()=>!Z.value||Object.keys(Z.value).length===0?0:_.value.filter(G=>G.type==="income").reduce((G,d)=>G+Pe(parseFloat(d.amount||0),d.currency,h.value),0)),Q=U(()=>!Z.value||Object.keys(Z.value).length===0?0:_.value.filter(G=>G.type==="expense").reduce((G,d)=>G+Pe(parseFloat(d.amount||0),d.currency,h.value),0)),pe=U(()=>!Z.value||Object.keys(Z.value).length===0?0:_.value.filter(G=>G.type==="bonus").reduce((G,d)=>G+Pe(parseFloat(d.amount||0),d.currency,h.value),0)),we=U(()=>oe(F.value,h.value)),ye=U(()=>oe(Q.value,h.value)),xe=U(()=>oe(pe.value,h.value)),ke=U(()=>{if(!Z.value||Object.keys(Z.value).length===0)return oe(0,h.value);const G=Q.value+pe.value;return oe(F.value-G,h.value)}),Ae=U(()=>F.value===0?"0.00%":`${(Q.value/F.value*100).toFixed(2)}%`),ce=U(()=>F.value===0?"0.00%":`${((Q.value+pe.value)/F.value*100).toFixed(2)}%`),Se=U(()=>{if(F.value<=0)return oe(0,h.value);const G=F.value*Le;return oe(G,h.value)}),_e=U(()=>{const G=_.value.filter(K=>(K.type==="expense"||K.type==="bonus")&&K.is_paid&&K.payment_date);if(G.length===0)return"N/A";const d=G.reduce((K,ee)=>new Date(ee.payment_date)>new Date(K.payment_date)?ee:K);return new Date(d.payment_date).toLocaleDateString()}),he=U(()=>{const G=_.value.filter(K=>K.type==="income"&&K.payment_date);if(G.length===0)return"N/A";const d=G.reduce((K,ee)=>new Date(ee.payment_date)>new Date(K.payment_date)?ee:K);return new Date(d.payment_date).toLocaleDateString()});return je(async()=>{const G=localStorage.getItem("displayCurrency");G&&(h.value=G),await Re(),le(),I()}),se([()=>P.projectId,h,Z],()=>{P.projectId&&Z.value&&Object.keys(Z.value).length>0&&(le(),I())},{deep:!0}),se(h,G=>{G&&localStorage.setItem("displayCurrency",G)},{deep:!0}),(G,d)=>{var K,ee,de,fe,$,p;return t(),s("div",Ka,[d[25]||(d[25]=a("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Project Transactions",-1)),n.value?(t(),s("div",qa,j(n.value),1)):w("",!0),V(l)||V(c)?(t(),s("div",Ha,[a("div",Wa,[a("div",Ja,[d[10]||(d[10]=a("span",{class:"text-sm font-medium text-gray-700 mr-2"},"Currency:",-1)),o(ie,{id:"transactions-display-currency-switcher",modelValue:V(h),"onUpdate:modelValue":d[0]||(d[0]=g=>Je(h)?h.value=g:null),options:L,"value-key":"value","label-key":"label",class:"w-24"},null,8,["modelValue"])]),d[19]||(d[19]=a("h4",{class:"text-md font-medium text-gray-700 mb-2"},"Summary",-1)),a("div",Ya,[a("div",Qa,[d[11]||(d[11]=a("p",{class:"text-sm text-gray-600"},"Total Income",-1)),a("p",Za,j(we.value),1)]),a("div",Xa,[d[12]||(d[12]=a("p",{class:"text-sm text-gray-600"},"Total Expenses",-1)),a("p",el,j(ye.value),1),a("p",al,"("+j(Ae.value)+" of Income)",1)]),a("div",ll,[d[13]||(d[13]=a("p",{class:"text-sm text-gray-600"},"Total Bonuses",-1)),a("p",tl,j(xe.value),1)]),a("div",sl,[d[14]||(d[14]=a("p",{class:"text-sm text-gray-600"},"Balance",-1)),a("p",ol,j(ke.value),1)]),a("div",rl,[d[15]||(d[15]=a("p",{class:"text-sm text-gray-600"},"Expense + Bonus",-1)),a("p",nl,j(V(oe)(Q.value+pe.value,V(h))),1),a("p",il,"("+j(ce.value)+" of Income)",1)]),a("div",ul,[d[16]||(d[16]=a("p",{class:"text-sm font-medium text-orange-800"},"Estimated Income Tax (AUD)",-1)),a("p",cl,j(Se.value),1),a("p",dl," (Based on "+j((Le*100).toFixed(1))+"% of Total Income. This is an estimation.) ",1)]),a("div",ml,[d[17]||(d[17]=a("p",{class:"text-sm font-medium text-gray-800"},"Last Payment Received Date",-1)),a("p",vl,j(he.value),1)]),a("div",bl,[d[18]||(d[18]=a("p",{class:"text-sm font-medium text-gray-800"},"Last Payment Sent Date",-1)),a("p",gl,j(_e.value),1)])])]),d[20]||(d[20]=a("h4",{class:"text-md font-medium text-gray-700 mb-4"},"Add Transaction",-1)),a("div",pl,[a("div",null,[o(D,{for:"description",value:"Description"}),o(Y,{id:"description",modelValue:b.value.description,"onUpdate:modelValue":d[1]||(d[1]=g=>b.value.description=g),class:"mt-1 block w-full",disabled:m.value},null,8,["modelValue","disabled"]),o(R,{message:(K=v.value.description)==null?void 0:K[0],class:"mt-2"},null,8,["message"])]),a("div",null,[o(D,{for:"amount",value:"Amount"}),o(Y,{id:"amount",type:"number",modelValue:b.value.amount,"onUpdate:modelValue":d[2]||(d[2]=g=>b.value.amount=g),class:"mt-1 block w-full",disabled:m.value},null,8,["modelValue","disabled"]),o(R,{message:(ee=v.value.amount)==null?void 0:ee[0],class:"mt-2"},null,8,["message"])]),a("div",null,[o(D,{for:"currency",value:"Currency"}),o(ie,{id:"currency",modelValue:b.value.currency,"onUpdate:modelValue":d[3]||(d[3]=g=>b.value.currency=g),options:L,disabled:m.value},null,8,["modelValue","disabled"]),o(R,{message:(de=v.value.currency)==null?void 0:de[0],class:"mt-2"},null,8,["message"])]),a("div",null,[o(D,{for:"type",value:"Type"}),o(ie,{id:"type",modelValue:b.value.type,"onUpdate:modelValue":d[4]||(d[4]=g=>b.value.type=g),options:A,disabled:m.value||!V(l)&&b.value.type==="expense"&&b.value.type!=="bonus"||!V(c)&&b.value.type==="income"},null,8,["modelValue","disabled"]),o(R,{message:(fe=v.value.type)==null?void 0:fe[0],class:"mt-2"},null,8,["message"])]),b.value.type==="expense"||b.value.type==="bonus"?(t(),s("div",fl,[o(D,{for:"user_id",value:"User"}),o(ie,{id:"user_id",modelValue:b.value.user_id,"onUpdate:modelValue":d[5]||(d[5]=g=>b.value.user_id=g),options:E.value,disabled:m.value||!y.value.length,placeholder:"Select a user"},null,8,["modelValue","options","disabled"]),o(R,{message:($=v.value.user_id)==null?void 0:$[0],class:"mt-2"},null,8,["message"])])):w("",!0),b.value.type==="expense"||b.value.type==="bonus"?(t(),s("div",yl,[o(D,{for:"hours_spent",value:"Hours Spent (Optional)"}),o(Y,{id:"hours_spent",type:"number",modelValue:b.value.hours_spent,"onUpdate:modelValue":d[6]||(d[6]=g=>b.value.hours_spent=g),class:"mt-1 block w-full",disabled:m.value},null,8,["modelValue","disabled"]),o(R,{message:(p=v.value.hours_spent)==null?void 0:p[0],class:"mt-2"},null,8,["message"])])):w("",!0)]),a("div",Al,[o(ue,{onClick:T,disabled:m.value},{default:ae(()=>[N(j(m.value?"Saving...":"Save Transaction"),1)]),_:1},8,["disabled"])])])):w("",!0),V(x)?(t(),s("div",hl,[d[24]||(d[24]=a("h4",{class:"text-md font-medium text-gray-700 mb-4"},"Transaction History",-1)),m.value?(t(),s("div",Ml,d[21]||(d[21]=[a("div",{class:"h-4 bg-gray-200 rounded animate-pulse w-full"},null,-1),a("div",{class:"h-4 bg-gray-200 rounded animate-pulse w-5/6"},null,-1),a("div",{class:"h-4 bg-gray-200 rounded animate-pulse w-3/4"},null,-1)]))):_.value.length===0?(t(),s("div",wl," No transactions found for this project. ")):(t(),s("div",kl,[(t(!0),s(me,null,ve(_.value,(g,te)=>{var Ge,Ce,Ne;return t(),s("div",{key:g.id,class:X([{"bg-green-50 border-green-200":g.type==="income","bg-red-50 border-red-200":g.type==="expense","bg-purple-50 border-purple-200":g.type==="bonus","border-l-4":!0},"p-4 rounded-md shadow-sm transition-all duration-200 ease-in-out hover:shadow-md"])},[a("div",Tl,[a("div",xl,[a("p",_l,j(g.description),1),a("p",Gl,j(g.type==="income"?"Income":g.type==="expense"?"Expense":"Bonus")+" on "+j(new Date(g.created_at).toLocaleDateString()),1)]),a("div",Pl,[a("p",{class:X(["text-lg font-bold",{"text-green-700":g.type==="income","text-red-700":g.type==="expense","text-purple-700":g.type==="bonus"}])},j(V(oe)(g.amount,g.currency)),3),g.currency.toUpperCase()!==V(h).toUpperCase()?(t(),s("p",jl," ("+j(V(oe)(V(Pe)(g.amount,g.currency,V(h)),V(h)))+") ",1)):w("",!0),a("span",{class:X(["block text-xs mt-1",g.is_paid?"text-green-600":"text-red-600"])},j(g.is_paid?"Paid":"Unpaid"),3)])]),a("div",Sl,[a("div",null,[g.user_id?(t(),s("span",Cl,"User: "+j(((Ge=y.value.find(be=>be.id===g.user_id))==null?void 0:Ge.name)||"Unknown"),1)):w("",!0),g.hours_spent?(t(),s("span",$l,"Hours: "+j(g.hours_spent),1)):w("",!0),(g.type==="expense"||g.type==="bonus")&&F.value>0?(t(),s("span",Vl,j((V(Pe)(g.amount,g.currency,V(h))/F.value*100).toFixed(2))+"% of Income ",1)):w("",!0)]),a("div",El,[!g.is_paid&&(V(l)||V(c))?(t(),ge(De,{key:0,onClick:be=>C(te),class:X({"text-green-600":g.type!=="income","text-blue-600":g.type==="income"})},{default:ae(()=>[N(j(g.type==="income"?"Receive":"Pay"),1)]),_:2},1032,["onClick","class"])):w("",!0),V(l)||V(c)?(t(),ge(De,{key:1,onClick:be=>r(te),class:"text-red-600"},{default:ae(()=>d[22]||(d[22]=[N(" Delete ",-1)])),_:2,__:[22]},1032,["onClick"])):w("",!0)])]),B.value===g.id?(t(),s("div",Dl,[a("h4",Bl,j(g.type==="income"?"Record Receipt":"Make Payment"),1),a("div",Ul,[o(D,{for:"payment_date",value:"Date"}),o(Y,{id:"payment_date",type:"date",modelValue:f.value,"onUpdate:modelValue":d[7]||(d[7]=be=>f.value=be),class:"mt-1 block w-full",disabled:m.value},null,8,["modelValue","disabled"]),o(R,{message:(Ce=H.value.date)==null?void 0:Ce[0],class:"mt-2"},null,8,["message"])]),a("div",Il,[a("label",Nl,[Me(a("input",{type:"checkbox","onUpdate:modelValue":d[8]||(d[8]=be=>q.value=be),class:"mr-2 rounded text-blue-600 focus:ring-blue-500",disabled:m.value},null,8,Fl),[[Ye,q.value]]),a("span",Rl,j(g.type==="income"?"Receive in Full":"Pay in Full"),1)])]),q.value?w("",!0):(t(),s("div",Ll,[o(D,{for:"payment_amount",value:"Amount"}),o(Y,{id:"payment_amount",type:"number",modelValue:O.value,"onUpdate:modelValue":d[9]||(d[9]=be=>O.value=be),class:"mt-1 block w-full",disabled:m.value,placeholder:"Enter partial "+(g.type==="income"?"receipt":"payment")+" amount (Max: "+V(oe)(g.amount,g.currency)+")"},null,8,["modelValue","disabled","placeholder"]),o(R,{message:(Ne=H.value.amount)==null?void 0:Ne[0],class:"mt-2"},null,8,["message"])])),a("div",Ol,[o(De,{onClick:M,disabled:m.value},{default:ae(()=>d[23]||(d[23]=[N(" Cancel ",-1)])),_:1,__:[23]},8,["disabled"]),o(ue,{onClick:W,disabled:m.value},{default:ae(()=>[N(j(m.value?"Processing...":g.type==="income"?"Record Receipt":"Submit Payment"),1)]),_:2},1032,["disabled"])])])):w("",!0)],2)}),128))]))])):w("",!0)])}}},Kl=(e,P)=>{let u;return(...k)=>{clearTimeout(u),u=setTimeout(()=>e(...k),P)}},ql={class:"relative"},Hl={class:"flex flex-wrap items-center gap-2 mb-2 p-2 border border-gray-300 rounded-lg bg-white min-h-[44px] focus-within:border-indigo-500 focus-within:ring-1 focus-within:ring-indigo-500 transition-all duration-150"},Wl=["onClick"],Jl={key:0,class:"absolute z-20 w-full bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto mt-1 transform-gpu"},Yl=["onClick"],Ql={key:1,class:"px-4 py-2 text-sm text-gray-500"},Zl={key:2,class:"px-4 py-2 text-sm text-gray-500"},Xl={__name:"TagInput",props:{modelValue:{type:Array,default:()=>[]},label:{type:String,default:"Tags"},placeholder:{type:String,default:"Add tags..."},error:{type:String,default:""},initialTags:{type:Array,default:()=>[]},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:P}){const u=e,k=P,l=S(""),c=S([]),x=S([]),_=S(!1),y=S(null);function v(){k("update:modelValue",x.value.map(f=>f.id))}se(()=>u.initialTags,f=>{if(x.value=[],f&&f.length>0){const b=[],h=new Set;f.forEach(L=>{h.has(L.id)||(b.push(L),h.add(L.id))}),x.value.push(...b)}v()},{immediate:!0,deep:!0});const n=Kl(async f=>{if(f.length<2){c.value=[],_.value=!1;return}try{const b=await Be.get(`/api/tags/search?query=${f}`);c.value=b.data,_.value=!0}catch(b){console.error("Error fetching tags:",b),c.value=[],_.value=!1}},300);se(l,f=>{u.disabled||n(f)});const m=f=>{x.value.some(b=>b.id===f.id)||(x.value.push(f),l.value="",c.value=[],_.value=!1,v()),Te(()=>y.value.focus())},B=()=>{if(u.disabled)return;const f=l.value.trim();if(!f)return;const b=c.value.find(L=>L.name.toLowerCase()===f.toLowerCase()),h=x.value.some(L=>L.name.toLowerCase()===f.toLowerCase());if(b)m(b);else if(h)l.value="",c.value=[],_.value=!1;else{const L={id:`new_${f.replace(/\s+/g,"-").toLowerCase()}_${Date.now()}`,name:f};x.value.push(L),l.value="",c.value=[],_.value=!1,v()}Te(()=>y.value.focus())},O=f=>{u.disabled||(x.value=x.value.filter(b=>b.id!==f.id),v(),Te(()=>y.value.focus()))},q=()=>{u.disabled||l.value===""&&x.value.length>0&&O(x.value[x.value.length-1])},H=U(()=>c.value.filter(f=>!x.value.some(b=>b.id===f.id))),J=f=>{y.value&&!y.value.$el.contains(f.target)&&(_.value=!1,l.value="")};return je(()=>{document.addEventListener("click",J)}),He(()=>{document.removeEventListener("click",J)}),(f,b)=>(t(),s("div",ql,[o(D,{value:e.label,class:"mb-1"},null,8,["value"]),a("div",Hl,[(t(!0),s(me,null,ve(x.value,h=>(t(),s("span",{key:h.id,class:"inline-flex items-center px-3 py-1 text-sm font-medium bg-indigo-100 text-indigo-800 rounded-full shadow-sm"},[N(j(h.name)+" ",1),e.disabled?w("",!0):(t(),s("button",{key:0,type:"button",onClick:L=>O(h),class:"ml-2 -mr-1 text-indigo-500 hover:text-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 rounded-full p-0.5"},b[3]||(b[3]=[a("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,Wl))]))),128)),o(Y,{ref_key:"inputRef",ref:y,type:"text",placeholder:x.value.length===0?e.placeholder:"",modelValue:l.value,"onUpdate:modelValue":b[0]||(b[0]=h=>l.value=h),onFocus:b[1]||(b[1]=h=>_.value=!0),onKeydown:[Ee(Qe(B,["prevent"]),["enter"]),b[2]||(b[2]=Ee(h=>_.value=!1,["tab"])),Ee(q,["delete"])],class:"flex-grow min-w-[100px] border-none focus:ring-0 shadow-none p-0 bg-transparent text-gray-900",disabled:e.disabled},null,8,["placeholder","modelValue","onKeydown","disabled"])]),_.value&&(H.value.length>0||l.value.length>=2||H.value.length===0&&l.value.length<2)&&!e.disabled?(t(),s("div",Jl,[(t(!0),s(me,null,ve(H.value,h=>(t(),s("div",{key:h.id,onClick:L=>m(h),class:"px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 cursor-pointer transition-colors duration-100"},j(h.name),9,Yl))),128)),!c.value.some(h=>h.name.toLowerCase()===l.value.toLowerCase())&&l.value.length>=2?(t(),s("div",{key:0,onClick:B,class:"px-4 py-2 text-sm text-indigo-700 bg-indigo-50 hover:bg-indigo-100 cursor-pointer border-t border-indigo-200 font-semibold transition-colors duration-100"},' Add new tag: "'+j(l.value)+'" ',1)):w("",!0),H.value.length===0&&l.value.length<2?(t(),s("div",Ql," Type at least 2 characters to search for tags. ")):w("",!0),H.value.length===0&&l.value.length>=2&&!c.value.some(h=>h.name.toLowerCase()===l.value.toLowerCase())?(t(),s("div",Zl,[b[4]||(b[4]=N(" No matching tags found. Press ",-1)),b[5]||(b[5]=a("span",{class:"font-semibold text-indigo-600"},"Enter",-1)),N(' to add "'+j(l.value)+'" as a new tag. ',1)])):w("",!0)])):w("",!0),o(R,{message:e.error,class:"mt-2"},null,8,["message"])]))}},et=qe(Xl,[["__scopeId","data-v-5e1237f3"]]),at={class:"mb-4"},lt={__name:"TimezoneSelect",props:{modelValue:{type:String,default:null},label:{type:String,default:"Timezone"},placeholder:{type:String,default:"Select a timezone"},disabled:{type:Boolean,default:!1},required:{type:Boolean,default:!1},error:{type:String,default:""}},emits:["update:modelValue","change"],setup(e,{emit:P}){const u=e,k=P,l=U(()=>[{value:"Africa/Abidjan",label:"Africa/Abidjan (GMT+00:00)"},{value:"Africa/Accra",label:"Africa/Accra (GMT+00:00)"},{value:"Africa/Addis_Ababa",label:"Africa/Addis_Ababa (GMT+03:00)"},{value:"Africa/Algiers",label:"Africa/Algiers (GMT+01:00)"},{value:"Africa/Asmara",label:"Africa/Asmara (GMT+03:00)"},{value:"Africa/Bamako",label:"Africa/Bamako (GMT+00:00)"},{value:"Africa/Bangui",label:"Africa/Bangui (GMT+01:00)"},{value:"Africa/Banjul",label:"Africa/Banjul (GMT+00:00)"},{value:"Africa/Bissau",label:"Africa/Bissau (GMT+00:00)"},{value:"Africa/Blantyre",label:"Africa/Blantyre (GMT+02:00)"},{value:"Africa/Brazzaville",label:"Africa/Brazzaville (GMT+01:00)"},{value:"Africa/Bujumbura",label:"Africa/Bujumbura (GMT+02:00)"},{value:"Africa/Cairo",label:"Africa/Cairo (GMT+02:00)"},{value:"Africa/Casablanca",label:"Africa/Casablanca (GMT+01:00)"},{value:"Africa/Ceuta",label:"Africa/Ceuta (GMT+01:00)"},{value:"Africa/Conakry",label:"Africa/Conakry (GMT+00:00)"},{value:"Africa/Dakar",label:"Africa/Dakar (GMT+00:00)"},{value:"Africa/Dar_es_Salaam",label:"Africa/Dar_es_Salaam (GMT+03:00)"},{value:"Africa/Djibouti",label:"Africa/Djibouti (GMT+03:00)"},{value:"Africa/Douala",label:"Africa/Douala (GMT+01:00)"},{value:"Africa/El_Aaiun",label:"Africa/El_Aaiun (GMT+01:00)"},{value:"Africa/Freetown",label:"Africa/Freetown (GMT+00:00)"},{value:"Africa/Gaborone",label:"Africa/Gaborone (GMT+02:00)"},{value:"Africa/Harare",label:"Africa/Harare (GMT+02:00)"},{value:"Africa/Johannesburg",label:"Africa/Johannesburg (GMT+02:00)"},{value:"Africa/Juba",label:"Africa/Juba (GMT+03:00)"},{value:"Africa/Kampala",label:"Africa/Kampala (GMT+03:00)"},{value:"Africa/Khartoum",label:"Africa/Khartoum (GMT+02:00)"},{value:"Africa/Kigali",label:"Africa/Kigali (GMT+02:00)"},{value:"Africa/Kinshasa",label:"Africa/Kinshasa (GMT+01:00)"},{value:"Africa/Lagos",label:"Africa/Lagos (GMT+01:00)"},{value:"Africa/Libreville",label:"Africa/Libreville (GMT+01:00)"},{value:"Africa/Lome",label:"Africa/Lome (GMT+00:00)"},{value:"Africa/Luanda",label:"Africa/Luanda (GMT+01:00)"},{value:"Africa/Lubumbashi",label:"Africa/Lubumbashi (GMT+02:00)"},{value:"Africa/Lusaka",label:"Africa/Lusaka (GMT+02:00)"},{value:"Africa/Malabo",label:"Africa/Malabo (GMT+01:00)"},{value:"Africa/Maputo",label:"Africa/Maputo (GMT+02:00)"},{value:"Africa/Maseru",label:"Africa/Maseru (GMT+02:00)"},{value:"Africa/Mbabane",label:"Africa/Mbabane (GMT+02:00)"},{value:"Africa/Mogadishu",label:"Africa/Mogadishu (GMT+03:00)"},{value:"Africa/Monrovia",label:"Africa/Monrovia (GMT+00:00)"},{value:"Africa/Nairobi",label:"Africa/Nairobi (GMT+03:00)"},{value:"Africa/Ndjamena",label:"Africa/Ndjamena (GMT+01:00)"},{value:"Africa/Niamey",label:"Africa/Niamey (GMT+01:00)"},{value:"Africa/Nouakchott",label:"Africa/Nouakchott (GMT+00:00)"},{value:"Africa/Ouagadougou",label:"Africa/Ouagadougou (GMT+00:00)"},{value:"Africa/Porto-Novo",label:"Africa/Porto-Novo (GMT+01:00)"},{value:"Africa/Sao_Tome",label:"Africa/Sao_Tome (GMT+00:00)"},{value:"Africa/Tripoli",label:"Africa/Tripoli (GMT+02:00)"},{value:"Africa/Tunis",label:"Africa/Tunis (GMT+01:00)"},{value:"Africa/Windhoek",label:"Africa/Windhoek (GMT+02:00)"},{value:"America/Adak",label:"America/Adak (GMT-10:00)"},{value:"America/Anchorage",label:"America/Anchorage (GMT-09:00)"},{value:"America/Anguilla",label:"America/Anguilla (GMT-04:00)"},{value:"America/Antigua",label:"America/Antigua (GMT-04:00)"},{value:"America/Araguaina",label:"America/Araguaina (GMT-03:00)"},{value:"America/Argentina/Buenos_Aires",label:"America/Argentina/Buenos_Aires (GMT-03:00)"},{value:"America/Argentina/Catamarca",label:"America/Argentina/Catamarca (GMT-03:00)"},{value:"America/Argentina/Cordoba",label:"America/Argentina/Cordoba (GMT-03:00)"},{value:"America/Argentina/Jujuy",label:"America/Argentina/Jujuy (GMT-03:00)"},{value:"America/Argentina/La_Rioja",label:"America/Argentina/La_Rioja (GMT-03:00)"},{value:"America/Argentina/Mendoza",label:"America/Argentina/Mendoza (GMT-03:00)"},{value:"America/Argentina/Rio_Gallegos",label:"America/Argentina/Rio_Gallegos (GMT-03:00)"},{value:"America/Argentina/Salta",label:"America/Argentina/Salta (GMT-03:00)"},{value:"America/Argentina/San_Juan",label:"America/Argentina/San_Juan (GMT-03:00)"},{value:"America/Argentina/San_Luis",label:"America/Argentina/San_Luis (GMT-03:00)"},{value:"America/Argentina/Tucuman",label:"America/Argentina/Tucuman (GMT-03:00)"},{value:"America/Argentina/Ushuaia",label:"America/Argentina/Ushuaia (GMT-03:00)"},{value:"America/Aruba",label:"America/Aruba (GMT-04:00)"},{value:"America/Asuncion",label:"America/Asuncion (GMT-04:00)"},{value:"America/Atikokan",label:"America/Atikokan (GMT-05:00)"},{value:"America/Bahia",label:"America/Bahia (GMT-03:00)"},{value:"America/Bahia_Banderas",label:"America/Bahia_Banderas (GMT-06:00)"},{value:"America/Barbados",label:"America/Barbados (GMT-04:00)"},{value:"America/Belem",label:"America/Belem (GMT-03:00)"},{value:"America/Belize",label:"America/Belize (GMT-06:00)"},{value:"America/Blanc-Sablon",label:"America/Blanc-Sablon (GMT-04:00)"},{value:"America/Boa_Vista",label:"America/Boa_Vista (GMT-04:00)"},{value:"America/Bogota",label:"America/Bogota (GMT-05:00)"},{value:"America/Boise",label:"America/Boise (GMT-06:00)"},{value:"America/Cambridge_Bay",label:"America/Cambridge_Bay (GMT-06:00)"},{value:"America/Campo_Grande",label:"America/Campo_Grande (GMT-04:00)"},{value:"America/Cancun",label:"America/Cancun (GMT-05:00)"},{value:"America/Caracas",label:"America/Caracas (GMT-04:00)"},{value:"America/Cayenne",label:"America/Cayenne (GMT-03:00)"},{value:"America/Cayman",label:"America/Cayman (GMT-05:00)"},{value:"America/Chicago",label:"America/Chicago (GMT-05:00)"},{value:"America/Chihuahua",label:"America/Chihuahua (GMT-06:00)"},{value:"America/Ciudad_Juarez",label:"America/Ciudad_Juarez (GMT-06:00)"},{value:"America/Costa_Rica",label:"America/Costa_Rica (GMT-06:00)"},{value:"America/Creston",label:"America/Creston (GMT-07:00)"},{value:"America/Cuiaba",label:"America/Cuiaba (GMT-04:00)"},{value:"America/Curacao",label:"America/Curacao (GMT-04:00)"},{value:"America/Danmarkshavn",label:"America/Danmarkshavn (GMT+00:00)"},{value:"America/Dawson",label:"America/Dawson (GMT-07:00)"},{value:"America/Dawson_Creek",label:"America/Dawson_Creek (GMT-07:00)"},{value:"America/Denver",label:"America/Denver (GMT-06:00)"},{value:"America/Detroit",label:"America/Detroit (GMT-04:00)"},{value:"America/Dominica",label:"America/Dominica (GMT-04:00)"},{value:"America/Edmonton",label:"America/Edmonton (GMT-06:00)"},{value:"America/Eirunepe",label:"America/Eirunepe (GMT-05:00)"},{value:"America/El_Salvador",label:"America/El_Salvador (GMT-06:00)"},{value:"America/Fort_Nelson",label:"America/Fort_Nelson (GMT-07:00)"},{value:"America/Fortaleza",label:"America/Fortaleza (GMT-03:00)"},{value:"America/Glace_Bay",label:"America/Glace_Bay (GMT-03:00)"},{value:"America/Goose_Bay",label:"America/Goose_Bay (GMT-03:00)"},{value:"America/Grand_Turk",label:"America/Grand_Turk (GMT-04:00)"},{value:"America/Grenada",label:"America/Grenada (GMT-04:00)"},{value:"America/Guadeloupe",label:"America/Guadeloupe (GMT-04:00)"},{value:"America/Guatemala",label:"America/Guatemala (GMT-06:00)"},{value:"America/Guayaquil",label:"America/Guayaquil (GMT-05:00)"},{value:"America/Guyana",label:"America/Guyana (GMT-04:00)"},{value:"America/Halifax",label:"America/Halifax (GMT-03:00)"},{value:"America/Havana",label:"America/Havana (GMT-04:00)"},{value:"America/Hermosillo",label:"America/Hermosillo (GMT-07:00)"},{value:"America/Indiana/Indianapolis",label:"America/Indiana/Indianapolis (GMT-04:00)"},{value:"America/Indiana/Knox",label:"America/Indiana/Knox (GMT-05:00)"},{value:"America/Indiana/Marengo",label:"America/Indiana/Marengo (GMT-04:00)"},{value:"America/Indiana/Petersburg",label:"America/Indiana/Petersburg (GMT-04:00)"},{value:"America/Indiana/Vevay",label:"America/Indiana/Vevay (GMT-04:00)"},{value:"America/Indiana/Vincennes",label:"America/Indiana/Vincennes (GMT-04:00)"},{value:"America/Indiana/Winamac",label:"America/Indiana/Winamac (GMT-04:00)"},{value:"America/Inuvik",label:"America/Inuvik (GMT-06:00)"},{value:"America/Iqaluit",label:"America/Iqaluit (GMT-04:00)"},{value:"America/Jamaica",label:"America/Jamaica (GMT-05:00)"},{value:"America/Juneau",label:"America/Juneau (GMT-08:00)"},{value:"America/Kentucky/Louisville",label:"America/Kentucky/Louisville (GMT-04:00)"},{value:"America/Kentucky/Monticello",label:"America/Kentucky/Monticello (GMT-04:00)"},{value:"America/La_Paz",label:"America/La_Paz (GMT-04:00)"},{value:"America/Lima",label:"America/Lima (GMT-05:00)"},{value:"America/Los_Angeles",label:"America/Los_Angeles (GMT-07:00)"},{value:"America/Lower_Princes",label:"America/Lower_Princes (GMT-04:00)"},{value:"America/Maceio",label:"America/Maceio (GMT-03:00)"},{value:"America/Managua",label:"America/Managua (GMT-06:00)"},{value:"America/Manaus",label:"America/Manaus (GMT-04:00)"},{value:"America/Marigot",label:"America/Marigot (GMT-04:00)"},{value:"America/Martinique",label:"America/Martinique (GMT-04:00)"},{value:"America/Matamoros",label:"America/Matamoros (GMT-05:00)"},{value:"America/Mazatlan",label:"America/Mazatlan (GMT-06:00)"},{value:"America/Menominee",label:"America/Menominee (GMT-05:00)"},{value:"America/Merida",label:"America/Merida (GMT-05:00)"},{value:"America/Metlakatla",label:"America/Metlakatla (GMT-08:00)"},{value:"America/Mexico_City",label:"America/Mexico_City (GMT-05:00)"},{value:"America/Miquelon",label:"America/Miquelon (GMT-02:00)"},{value:"America/Moncton",label:"America/Moncton (GMT-03:00)"},{value:"America/Monterrey",label:"America/Monterrey (GMT-05:00)"},{value:"America/Montevideo",label:"America/Montevideo (GMT-03:00)"},{value:"America/Montserrat",label:"America/Montserrat (GMT-04:00)"},{value:"America/Nassau",label:"America/Nassau (GMT-04:00)"},{value:"America/New_York",label:"America/New_York (GMT-04:00)"},{value:"America/Nome",label:"America/Nome (GMT-08:00)"},{value:"America/Noronha",label:"America/Noronha (GMT-02:00)"},{value:"America/North_Dakota/Beulah",label:"America/North_Dakota/Beulah (GMT-05:00)"},{value:"America/North_Dakota/Center",label:"America/North_Dakota/Center (GMT-05:00)"},{value:"America/North_Dakota/New_Salem",label:"America/North_Dakota/New_Salem (GMT-05:00)"},{value:"America/Nuuk",label:"America/Nuuk (GMT-02:00)"},{value:"America/Ojinaga",label:"America/Ojinaga (GMT-06:00)"},{value:"America/Panama",label:"America/Panama (GMT-05:00)"},{value:"America/Paramaribo",label:"America/Paramaribo (GMT-03:00)"},{value:"America/Phoenix",label:"America/Phoenix (GMT-07:00)"},{value:"America/Port-au-Prince",label:"America/Port-au-Prince (GMT-04:00)"},{value:"America/Port_of_Spain",label:"America/Port_of_Spain (GMT-04:00)"},{value:"America/Puerto_Rico",label:"America/Puerto_Rico (GMT-04:00)"},{value:"America/Punta_Arenas",label:"America/Punta_Arenas (GMT-03:00)"},{value:"America/Rankin_Inlet",label:"America/Rankin_Inlet (GMT-05:00)"},{value:"America/Recife",label:"America/Recife (GMT-03:00)"},{value:"America/Regina",label:"America/Regina (GMT-06:00)"},{value:"America/Resolute",label:"America/Resolute (GMT-05:00)"},{value:"America/Rio_Branco",label:"America/Rio_Branco (GMT-05:00)"},{value:"America/Santarem",label:"America/Santarem (GMT-03:00)"},{value:"America/Santiago",label:"America/Santiago (GMT-04:00)"},{value:"America/Santo_Domingo",label:"America/Santo_Domingo (GMT-04:00)"},{value:"America/Sao_Paulo",label:"America/Sao_Paulo (GMT-03:00)"},{value:"America/Scoresbysund",label:"America/Scoresbysund (GMT+00:00)"},{value:"America/Sitka",label:"America/Sitka (GMT-08:00)"},{value:"America/St_Barthelemy",label:"America/St_Barthelemy (GMT-04:00)"},{value:"America/St_Johns",label:"America/St_Johns (GMT-02:30)"},{value:"America/St_Kitts",label:"America/St_Kitts (GMT-04:00)"},{value:"America/St_Lucia",label:"America/St_Lucia (GMT-04:00)"},{value:"America/St_Thomas",label:"America/St_Thomas (GMT-04:00)"},{value:"America/St_Vincent",label:"America/St_Vincent (GMT-04:00)"},{value:"America/Swift_Current",label:"America/Swift_Current (GMT-06:00)"},{value:"America/Tegucigalpa",label:"America/Tegucigalpa (GMT-06:00)"},{value:"America/Thule",label:"America/Thule (GMT-03:00)"},{value:"America/Tijuana",label:"America/Tijuana (GMT-07:00)"},{value:"America/Toronto",label:"America/Toronto (GMT-04:00)"},{value:"America/Tortola",label:"America/Tortola (GMT-04:00)"},{value:"America/Vancouver",label:"America/Vancouver (GMT-07:00)"},{value:"America/Whitehorse",label:"America/Whitehorse (GMT-07:00)"},{value:"America/Winnipeg",label:"America/Winnipeg (GMT-05:00)"},{value:"America/Yakutat",label:"America/Yakutat (GMT-08:00)"},{value:"America/Yellowknife",label:"America/Yellowknife (GMT-06:00)"},{value:"Antarctica/Casey",label:"Antarctica/Casey (GMT+11:00)"},{value:"Antarctica/Davis",label:"Antarctica/Davis (GMT+07:00)"},{value:"Antarctica/DumontDUrville",label:"Antarctica/DumontDUrville (GMT+10:00)"},{value:"Antarctica/Macquarie",label:"Antarctica/Macquarie (GMT+11:00)"},{value:"Antarctica/Mawson",label:"Antarctica/Mawson (GMT+05:00)"},{value:"Antarctica/Palmer",label:"Antarctica/Palmer (GMT-03:00)"},{value:"Antarctica/Rothera",label:"Antarctica/Rothera (GMT-03:00)"},{value:"Antarctica/Syowa",label:"Antarctica/Syowa (GMT+03:00)"},{value:"Antarctica/Troll",label:"Antarctica/Troll (GMT+00:00)"},{value:"Antarctica/Vostok",label:"Antarctica/Vostok (GMT+06:00)"},{value:"Asia/Almaty",label:"Asia/Almaty (GMT+05:00)"},{value:"Asia/Amman",label:"Asia/Amman (GMT+03:00)"},{value:"Asia/Anadyr",label:"Asia/Anadyr (GMT+12:00)"},{value:"Asia/Aqtau",label:"Asia/Aqtau (GMT+05:00)"},{value:"Asia/Aqtobe",label:"Asia/Aqtobe (GMT+05:00)"},{value:"Asia/Ashgabat",label:"Asia/Ashgabat (GMT+05:00)"},{value:"Asia/Atyrau",label:"Asia/Atyrau (GMT+05:00)"},{value:"Asia/Baghdad",label:"Asia/Baghdad (GMT+03:00)"},{value:"Asia/Baku",label:"Asia/Baku (GMT+04:00)"},{value:"Asia/Bangkok",label:"Asia/Bangkok (GMT+07:00)"},{value:"Asia/Barnaul",label:"Asia/Barnaul (GMT+07:00)"},{value:"Asia/Beirut",label:"Asia/Beirut (GMT+03:00)"},{value:"Asia/Bishkek",label:"Asia/Bishkek (GMT+06:00)"},{value:"Asia/Brunei",label:"Asia/Brunei (GMT+08:00)"},{value:"Asia/Chita",label:"Asia/Chita (GMT+09:00)"},{value:"Asia/Choibalsan",label:"Asia/Choibalsan (GMT+08:00)"},{value:"Asia/Colombo",label:"Asia/Colombo (GMT+05:30)"},{value:"Asia/Damascus",label:"Asia/Damascus (GMT+03:00)"},{value:"Asia/Dhaka",label:"Asia/Dhaka (GMT+06:00)"},{value:"Asia/Dili",label:"Asia/Dili (GMT+09:00)"},{value:"Asia/Dubai",label:"Asia/Dubai (GMT+04:00)"},{value:"Asia/Dushanbe",label:"Asia/Dushanbe (GMT+05:00)"},{value:"Asia/Famagusta",label:"Asia/Famagusta (GMT+03:00)"},{value:"Asia/Gaza",label:"Asia/Gaza (GMT+03:00)"},{value:"Asia/Hebron",label:"Asia/Hebron (GMT+03:00)"},{value:"Asia/Ho_Chi_Minh",label:"Asia/Ho_Chi_Minh (GMT+07:00)"},{value:"Asia/Hong_Kong",label:"Asia/Hong_Kong (GMT+08:00)"},{value:"Asia/Hovd",label:"Asia/Hovd (GMT+07:00)"},{value:"Asia/Irkutsk",label:"Asia/Irkutsk (GMT+08:00)"},{value:"Asia/Jakarta",label:"Asia/Jakarta (GMT+07:00)"},{value:"Asia/Jayapura",label:"Asia/Jayapura (GMT+09:00)"},{value:"Asia/Jerusalem",label:"Asia/Jerusalem (GMT+03:00)"},{value:"Asia/Kabul",label:"Asia/Kabul (GMT+04:30)"},{value:"Asia/Kamchatka",label:"Asia/Kamchatka (GMT+12:00)"},{value:"Asia/Karachi",label:"Asia/Karachi (GMT+05:00)"},{value:"Asia/Kathmandu",label:"Asia/Kathmandu (GMT+05:45)"},{value:"Asia/Khandyga",label:"Asia/Khandyga (GMT+09:00)"},{value:"Asia/Kolkata",label:"Asia/Kolkata (GMT+05:30)"},{value:"Asia/Krasnoyarsk",label:"Asia/Krasnoyarsk (GMT+07:00)"},{value:"Asia/Kuala_Lumpur",label:"Asia/Kuala_Lumpur (GMT+08:00)"},{value:"Asia/Kuching",label:"Asia/Kuching (GMT+08:00)"},{value:"Asia/Kuwait",label:"Asia/Kuwait (GMT+03:00)"},{value:"Asia/Macau",label:"Asia/Macau (GMT+08:00)"},{value:"Asia/Magadan",label:"Asia/Magadan (GMT+11:00)"},{value:"Asia/Makassar",label:"Asia/Makassar (GMT+08:00)"},{value:"Asia/Manila",label:"Asia/Manila (GMT+08:00)"},{value:"Asia/Muscat",label:"Asia/Muscat (GMT+04:00)"},{value:"Asia/Nicosia",label:"Asia/Nicosia (GMT+03:00)"},{value:"Asia/Novokuznetsk",label:"Asia/Novokuznetsk (GMT+07:00)"},{value:"Asia/Novosibirsk",label:"Asia/Novosibirsk (GMT+07:00)"},{value:"Asia/Omsk",label:"Asia/Omsk (GMT+06:00)"},{value:"Asia/Oral",label:"Asia/Oral (GMT+05:00)"},{value:"Asia/Phnom_Penh",label:"Asia/Phnom_Penh (GMT+07:00)"},{value:"Asia/Pontianak",label:"Asia/Pontianak (GMT+07:00)"},{value:"Asia/Pyongyang",label:"Asia/Pyongyang (GMT+09:00)"},{value:"Asia/Qatar",label:"Asia/Qatar (GMT+03:00)"},{value:"Asia/Qostanay",label:"Asia/Qostanay (GMT+05:00)"},{value:"Asia/Qyzylorda",label:"Asia/Qyzylorda (GMT+05:00)"},{value:"Asia/Riyadh",label:"Asia/Riyadh (GMT+03:00)"},{value:"Asia/Sakhalin",label:"Asia/Sakhalin (GMT+11:00)"},{value:"Asia/Samarkand",label:"Asia/Samarkand (GMT+05:00)"},{value:"Asia/Seoul",label:"Asia/Seoul (GMT+09:00)"},{value:"Asia/Shanghai",label:"Asia/Shanghai (GMT+08:00)"},{value:"Asia/Singapore",label:"Asia/Singapore (GMT+08:00)"},{value:"Asia/Srednekolymsk",label:"Asia/Srednekolymsk (GMT+11:00)"},{value:"Asia/Taipei",label:"Asia/Taipei (GMT+08:00)"},{value:"Asia/Tashkent",label:"Asia/Tashkent (GMT+05:00)"},{value:"Asia/Tbilisi",label:"Asia/Tbilisi (GMT+04:00)"},{value:"Asia/Tehran",label:"Asia/Tehran (GMT+03:30)"},{value:"Asia/Thimphu",label:"Asia/Thimphu (GMT+06:00)"},{value:"Asia/Tokyo",label:"Asia/Tokyo (GMT+09:00)"},{value:"Asia/Tomsk",label:"Asia/Tomsk (GMT+07:00)"},{value:"Asia/Ulaanbaatar",label:"Asia/Ulaanbaatar (GMT+08:00)"},{value:"Asia/Urumqi",label:"Asia/Urumqi (GMT+06:00)"},{value:"Asia/Ust-Nera",label:"Asia/Ust-Nera (GMT+10:00)"},{value:"Asia/Vladivostok",label:"Asia/Vladivostok (GMT+10:00)"},{value:"Asia/Yakutsk",label:"Asia/Yakutsk (GMT+09:00)"},{value:"Asia/Yangon",label:"Asia/Yangon (GMT+06:30)"},{value:"Asia/Yekaterinburg",label:"Asia/Yekaterinburg (GMT+05:00)"},{value:"Asia/Yerevan",label:"Asia/Yerevan (GMT+04:00)"},{value:"Atlantic/Azores",label:"Atlantic/Azores (GMT-01:00)"},{value:"Atlantic/Bermuda",label:"Atlantic/Bermuda (GMT-03:00)"},{value:"Atlantic/Canary",label:"Atlantic/Canary (GMT+00:00)"},{value:"Atlantic/Cape_Verde",label:"Atlantic/Cape_Verde (GMT-01:00)"},{value:"Atlantic/Faroe",label:"Atlantic/Faroe (GMT+00:00)"},{value:"Atlantic/Madeira",label:"Atlantic/Madeira (GMT+00:00)"},{value:"Atlantic/Reykjavik",label:"Atlantic/Reykjavik (GMT+00:00)"},{value:"Atlantic/South_Georgia",label:"Atlantic/South_Georgia (GMT-02:00)"},{value:"Atlantic/St_Helena",label:"Atlantic/St_Helena (GMT+00:00)"},{value:"Atlantic/Stanley",label:"Atlantic/Stanley (GMT-03:00)"},{value:"Australia/Adelaide",label:"Australia/Adelaide (GMT+09:30)"},{value:"Australia/Brisbane",label:"Australia/Brisbane (GMT+10:00)"},{value:"Australia/Broken_Hill",label:"Australia/Broken_Hill (GMT+09:30)"},{value:"Australia/Darwin",label:"Australia/Darwin (GMT+09:30)"},{value:"Australia/Eucla",label:"Australia/Eucla (GMT+08:45)"},{value:"Australia/Hobart",label:"Australia/Hobart (GMT+10:00)"},{value:"Australia/Lindeman",label:"Australia/Lindeman (GMT+10:00)"},{value:"Australia/Lord_Howe",label:"Australia/Lord_Howe (GMT+10:30)"},{value:"Australia/Melbourne",label:"Australia/Melbourne (GMT+10:00)"},{value:"Australia/Perth",label:"Australia/Perth (GMT+08:00)"},{value:"Australia/Sydney",label:"Australia/Sydney (GMT+10:00)"},{value:"Europe/Amsterdam",label:"Europe/Amsterdam (GMT+02:00)"},{value:"Europe/Andorra",label:"Europe/Andorra (GMT+02:00)"},{value:"Europe/Astrakhan",label:"Europe/Astrakhan (GMT+04:00)"},{value:"Europe/Athens",label:"Europe/Athens (GMT+03:00)"},{value:"Europe/Belgrade",label:"Europe/Belgrade (GMT+02:00)"},{value:"Europe/Berlin",label:"Europe/Berlin (GMT+02:00)"},{value:"Europe/Brussels",label:"Europe/Brussels (GMT+02:00)"},{value:"Europe/Bucharest",label:"Europe/Bucharest (GMT+03:00)"},{value:"Europe/Budapest",label:"Europe/Budapest (GMT+02:00)"},{value:"Europe/Chisinau",label:"Europe/Chisinau (GMT+03:00)"},{value:"Europe/Copenhagen",label:"Europe/Copenhagen (GMT+02:00)"},{value:"Europe/Dublin",label:"Europe/Dublin (GMT+01:00)"},{value:"Europe/Gibraltar",label:"Europe/Gibraltar (GMT+02:00)"},{value:"Europe/Helsinki",label:"Europe/Helsinki (GMT+03:00)"},{value:"Europe/Istanbul",label:"Europe/Istanbul (GMT+03:00)"},{value:"Europe/Kaliningrad",label:"Europe/Kaliningrad (GMT+02:00)"},{value:"Europe/Kirov",label:"Europe/Kirov (GMT+03:00)"},{value:"Europe/Kyiv",label:"Europe/Kyiv (GMT+03:00)"},{value:"Europe/Lisbon",label:"Europe/Lisbon (GMT+01:00)"},{value:"Europe/London",label:"Europe/London (GMT+01:00)"},{value:"Europe/Luxembourg",label:"Europe/Luxembourg (GMT+02:00)"},{value:"Europe/Madrid",label:"Europe/Madrid (GMT+02:00)"},{value:"Europe/Malta",label:"Europe/Malta (GMT+02:00)"},{value:"Europe/Minsk",label:"Europe/Minsk (GMT+03:00)"},{value:"Europe/Monaco",label:"Europe/Monaco (GMT+02:00)"},{value:"Europe/Moscow",label:"Europe/Moscow (GMT+03:00)"},{value:"Europe/Oslo",label:"Europe/Oslo (GMT+02:00)"},{value:"Europe/Paris",label:"Europe/Paris (GMT+02:00)"},{value:"Europe/Prague",label:"Europe/Prague (GMT+02:00)"},{value:"Europe/Riga",label:"Europe/Riga (GMT+03:00)"},{value:"Europe/Rome",label:"Europe/Rome (GMT+02:00)"},{value:"Europe/Samara",label:"Europe/Samara (GMT+04:00)"},{value:"Europe/San_Marino",label:"Europe/San_Marino (GMT+02:00)"},{value:"Europe/Sarajevo",label:"Europe/Sarajevo (GMT+02:00)"},{value:"Europe/Saratov",label:"Europe/Saratov (GMT+04:00)"},{value:"Europe/Simferopol",label:"Europe/Simferopol (GMT+03:00)"},{value:"Europe/Skopje",label:"Europe/Skopje (GMT+02:00)"},{value:"Europe/Sofia",label:"Europe/Sofia (GMT+03:00)"},{value:"Europe/Stockholm",label:"Europe/Stockholm (GMT+02:00)"},{value:"Europe/Tallinn",label:"Europe/Tallinn (GMT+03:00)"},{value:"Europe/Tirane",label:"Europe/Tirane (GMT+02:00)"},{value:"Europe/Ulyanovsk",label:"Europe/Ulyanovsk (GMT+04:00)"},{value:"Europe/Uzhgorod",label:"Europe/Uzhgorod (GMT+03:00)"},{value:"Europe/Vaduz",label:"Europe/Vaduz (GMT+02:00)"},{value:"Europe/Vatican",label:"Europe/Vatican (GMT+02:00)"},{value:"Europe/Vienna",label:"Europe/Vienna (GMT+02:00)"},{value:"Europe/Vilnius",label:"Europe/Vilnius (GMT+03:00)"},{value:"Europe/Volgograd",label:"Europe/Volgograd (GMT+03:00)"},{value:"Europe/Warsaw",label:"Europe/Warsaw (GMT+02:00)"},{value:"Europe/Zagreb",label:"Europe/Zagreb (GMT+02:00)"},{value:"Europe/Zaporozhye",label:"Europe/Zaporozhye (GMT+03:00)"},{value:"Europe/Zurich",label:"Europe/Zurich (GMT+02:00)"},{value:"Indian/Antananarivo",label:"Indian/Antananarivo (GMT+03:00)"},{value:"Indian/Chagos",label:"Indian/Chagos (GMT+06:00)"},{value:"Indian/Christmas",label:"Indian/Christmas (GMT+07:00)"},{value:"Indian/Cocos",label:"Indian/Cocos (GMT+06:30)"},{value:"Indian/Comoro",label:"Indian/Comoro (GMT+03:00)"},{value:"Indian/Kerguelen",label:"Indian/Kerguelen (GMT+05:00)"},{value:"Indian/Mahe",label:"Indian/Mahe (GMT+04:00)"},{value:"Indian/Maldives",label:"Indian/Maldives (GMT+05:00)"},{value:"Indian/Mauritius",label:"Indian/Mauritius (GMT+04:00)"},{value:"Indian/Mayotte",label:"Indian/Mayotte (GMT+03:00)"},{value:"Indian/Reunion",label:"Indian/Reunion (GMT+04:00)"},{value:"Pacific/Apia",label:"Pacific/Apia (GMT+13:00)"},{value:"Pacific/Auckland",label:"Pacific/Auckland (GMT+12:00)"},{value:"Pacific/Bougainville",label:"Pacific/Bougainville (GMT+11:00)"},{value:"Pacific/Chatham",label:"Pacific/Chatham (GMT+12:45)"},{value:"Pacific/Chuuk",label:"Pacific/Chuuk (GMT+10:00)"},{value:"Pacific/Easter",label:"Pacific/Easter (GMT-06:00)"},{value:"Pacific/Efate",label:"Pacific/Efate (GMT+11:00)"},{value:"Pacific/Fakaofo",label:"Pacific/Fakaofo (GMT+13:00)"},{value:"Pacific/Fiji",label:"Pacific/Fiji (GMT+12:00)"},{value:"Pacific/Funafuti",label:"Pacific/Funafuti (GMT+12:00)"},{value:"Pacific/Galapagos",label:"Pacific/Galapagos (GMT-06:00)"},{value:"Pacific/Gambier",label:"Pacific/Gambier (GMT-09:00)"},{value:"Pacific/Guadalcanal",label:"Pacific/Guadalcanal (GMT+11:00)"},{value:"Pacific/Guam",label:"Pacific/Guam (GMT+10:00)"},{value:"Pacific/Honolulu",label:"Pacific/Honolulu (GMT-10:00)"},{value:"Pacific/Kanton",label:"Pacific/Kanton (GMT+13:00)"},{value:"Pacific/Kiritimati",label:"Pacific/Kiritimati (GMT+14:00)"},{value:"Pacific/Kosrae",label:"Pacific/Kosrae (GMT+11:00)"},{value:"Pacific/Kwajalein",label:"Pacific/Kwajalein (GMT+12:00)"},{value:"Pacific/Majuro",label:"Pacific/Majuro (GMT+12:00)"},{value:"Pacific/Marquesas",label:"Pacific/Marquesas (GMT-09:30)"},{value:"Pacific/Midway",label:"Pacific/Midway (GMT-11:00)"},{value:"Pacific/Nauru",label:"Pacific/Nauru (GMT+12:00)"},{value:"Pacific/Niue",label:"Pacific/Niue (GMT-11:00)"},{value:"Pacific/Norfolk",label:"Pacific/Norfolk (GMT+11:00)"},{value:"Pacific/Noumea",label:"Pacific/Noumea (GMT+11:00)"},{value:"Pacific/Pago_Pago",label:"Pacific/Pago_Pago (GMT-11:00)"},{value:"Pacific/Palau",label:"Pacific/Palau (GMT+09:00)"},{value:"Pacific/Pitcairn",label:"Pacific/Pitcairn (GMT-08:00)"},{value:"Pacific/Pohnpei",label:"Pacific/Pohnpei (GMT+11:00)"},{value:"Pacific/Port_Moresby",label:"Pacific/Port_Moresby (GMT+10:00)"},{value:"Pacific/Rarotonga",label:"Pacific/Rarotonga (GMT-10:00)"},{value:"Pacific/Saipan",label:"Pacific/Saipan (GMT+10:00)"},{value:"Pacific/Tahiti",label:"Pacific/Tahiti (GMT-10:00)"},{value:"Pacific/Tarawa",label:"Pacific/Tarawa (GMT+12:00)"},{value:"Pacific/Tongatapu",label:"Pacific/Tongatapu (GMT+13:00)"},{value:"Pacific/Wake",label:"Pacific/Wake (GMT+12:00)"},{value:"Pacific/Wallis",label:"Pacific/Wallis (GMT+12:00)"}]),c=U({get:()=>u.modelValue,set:x=>{k("update:modelValue",x),k("change",x)}});return je(()=>{if((u.modelValue===null||u.modelValue===void 0)&&!u.disabled)try{const x=Intl.DateTimeFormat().resolvedOptions().timeZone;l.value.find(y=>y.value===x)?c.value=x:console.warn(`Detected timezone "${x}" is not in the predefined list.`)}catch(x){console.error("Error auto-detecting timezone:",x)}}),(x,_)=>(t(),s("div",at,[o(D,{for:e.label.toLowerCase().replace(/\s/g,"-"),value:e.label},null,8,["for","value"]),o(ie,{id:e.label.toLowerCase().replace(/\s/g,"-"),modelValue:c.value,"onUpdate:modelValue":_[0]||(_[0]=y=>c.value=y),options:l.value,valueKey:"value",labelKey:"label",placeholder:e.placeholder,disabled:e.disabled,required:e.required,class:"mt-1 block w-full"},null,8,["id","modelValue","options","placeholder","disabled","required"]),o(R,{message:e.error,class:"mt-2"},null,8,["message"])]))}},tt={class:"relative"},st={class:"flex flex-wrap items-center gap-2 mb-2 p-2 border border-gray-300 rounded-lg bg-white min-h-[44px] focus-within:border-indigo-500 focus-within:ring-1 focus-within:ring-indigo-500 transition-all duration-150"},ot={key:0,class:"inline-flex items-center px-3 py-1 text-sm font-medium bg-indigo-100 text-indigo-800 rounded-full shadow-sm"},rt={key:0,class:"absolute z-20 w-full bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto mt-1 transform-gpu project-type-suggestions"},nt=["onClick"],it={key:1,class:"px-4 py-2 text-sm text-gray-500"},ut={key:2,class:"px-4 py-2 text-sm text-gray-500"},ct={__name:"ProjectTypeInput",props:{modelValue:{type:String,default:null},label:{type:String,default:"Project Type"},placeholder:{type:String,default:"Select or type a project type"},error:{type:String,default:""},disabled:{type:Boolean,default:!1},required:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(e,{emit:P}){const u=e,k=P,l=S(""),c=S(null),x=S(!1),_=S(null),y=U(()=>[{value:"wix-website",label:"Wix Website"},{value:"shopify-website",label:"Shopify Website"},{value:"wordpress-website",label:"WordPress Website"},{value:"seo-service",label:"SEO Service"},{value:"social-media-management",label:"Social Media Management"},{value:"google-ads-campaign",label:"Google Ads Campaign"},{value:"mobile-app-development",label:"Mobile App Development"},{value:"custom-web-application",label:"Custom Web Application"},{value:"e-commerce-solution",label:"E-commerce Solution"},{value:"branding-identity",label:"Branding & Identity"},{value:"content-creation",label:"Content Creation"},{value:"email-marketing",label:"Email Marketing"},{value:"crm-integration",label:"CRM Integration"},{value:"data-analytics",label:"Data Analytics"},{value:"ui-ux-design",label:"UI/UX Design"}]),v=f=>{if(!f)return null;const b=y.value.find(h=>h.value===f);if(b)return b;if(typeof f=="string"&&f.startsWith("new_")){const h=f.split("_");h.shift(),h.length>0&&h.pop();const L=h.join(" ").replace(/-/g," ");return{value:f,label:L}}return null};se(()=>u.modelValue,f=>{c.value=v(f),l.value=""},{immediate:!0});const n=U(()=>{const f=l.value.toLowerCase();return f?y.value.filter(b=>b.label.toLowerCase().includes(f)&&(!c.value||b.value!==c.value.value)):c.value?[c.value,...y.value.filter(b=>b.value!==c.value.value)]:y.value}),m=f=>{u.disabled||(c.value=f,k("update:modelValue",f.value),k("change",f.value),l.value="",x.value=!1,Te(()=>_.value.focus()))},B=()=>{if(u.disabled)return;const f=l.value.trim();if(!f)return;const b=y.value.find(L=>L.label.toLowerCase()===f.toLowerCase());if(b){m(b);return}if(!(c.value&&c.value.value.startsWith("new_")&&c.value.label.toLowerCase()===f.toLowerCase())){const A={value:`new_${f.replace(/\s+/g,"-").toLowerCase()}_${Date.now()}`,label:f};c.value=A,k("update:modelValue",A.value),k("change",A.value),l.value=""}x.value=!1,Te(()=>_.value.focus())},O=f=>{f.stopPropagation(),!u.disabled&&(c.value=null,k("update:modelValue",null),k("change",null),l.value="",x.value=!1,Te(()=>_.value.focus()))},q=f=>{f.key==="Enter"?(f.preventDefault(),B()):f.key==="Escape"?(x.value=!1,l.value="",_.value&&_.value.blur()):f.key==="Backspace"&&l.value===""&&c.value&&O(f)},H=f=>{l.value=f.target.value,x.value=!0},J=f=>{var h;const b=((h=_.value)==null?void 0:h.$el)||_.value;b&&!b.contains(f.target)&&!f.target.closest(".project-type-suggestions")&&(x.value=!1,c.value,l.value="")};return je(()=>{document.addEventListener("click",J)}),He(()=>{document.removeEventListener("click",J)}),(f,b)=>(t(),s("div",tt,[o(D,{value:e.label,class:"mb-1"},null,8,["value"]),a("div",st,[c.value?(t(),s("span",ot,[N(j(c.value.label)+" ",1),e.disabled?w("",!0):(t(),s("button",{key:0,type:"button",onClick:O,class:"ml-2 -mr-1 text-indigo-500 hover:text-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 rounded-full p-0.5","aria-label":"Remove selected project type"},b[1]||(b[1]=[a("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])))])):w("",!0),o(Y,{ref_key:"inputRef",ref:_,type:"text",placeholder:c.value?"":e.placeholder,modelValue:l.value,"onUpdate:modelValue":b[0]||(b[0]=h=>l.value=h),onKeydown:q,onInput:H,class:"flex-grow min-w-[150px] border-none focus:ring-0 shadow-none p-0 bg-transparent text-gray-900",disabled:e.disabled},null,8,["placeholder","modelValue","disabled"])]),x.value&&!e.disabled?(t(),s("div",rt,[(t(!0),s(me,null,ve(n.value,h=>(t(),s("div",{key:h.value,onClick:L=>m(h),class:X(["px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 cursor-pointer transition-colors duration-100",{"bg-indigo-50 text-indigo-700":c.value&&h.value===c.value.value}])},j(h.label),11,nt))),128)),l.value.trim()!==""&&!y.value.some(h=>h.label.toLowerCase()===l.value.toLowerCase())?(t(),s("div",{key:0,onClick:B,class:"px-4 py-2 text-sm text-indigo-700 bg-indigo-50 hover:bg-indigo-100 cursor-pointer border-t border-indigo-200 font-semibold transition-colors duration-100"},' Add new type: "'+j(l.value.trim())+'" ',1)):w("",!0),n.value.length===0&&l.value.trim()!==""?(t(),s("div",it,[b[2]||(b[2]=N(" No matching options found. Press ",-1)),b[3]||(b[3]=a("span",{class:"font-semibold text-indigo-600"},"Enter",-1)),N(' to add "'+j(l.value.trim())+'" as a new type. ',1)])):w("",!0),n.value.length===0&&l.value.trim()===""&&!c.value?(t(),s("div",ut," Start typing to search or select a type. ")):w("",!0)])):w("",!0),o(R,{message:e.error,class:"mt-2"},null,8,["message"])]))}},dt=qe(ct,[["__scopeId","data-v-5dcfabc3"]]),mt={class:"space-y-6 bg-white p-6 rounded-lg shadow-md border border-gray-100 font-inter"},vt={class:"mb-4"},bt={class:"mb-4"},gt=["disabled"],pt={class:"mb-4"},ft={class:"mb-4"},yt={class:"mb-4"},At={key:0,class:"mb-4"},ht=["disabled"],Mt={key:0,class:"mt-2"},wt=["src"],kt={key:1,class:"mb-4"},Tt={key:2,class:"mb-4"},xt={class:"mb-4"},_t={class:"mb-4"},Gt={class:"mb-4"},Pt={class:"mb-4"},jt={class:"mb-4"},St={class:"mt-6 flex justify-end"},Ct={key:0,class:"flex items-center"},$t={key:1},Vt={__name:"ProjectFormBasicInfo",props:{projectForm:{type:Object,required:!0,default:()=>({id:null,name:"",description:"",website:"",social_media_link:"",preferred_keywords:"",google_chat_id:"",google_drive_link:"",logo:null,status:"active",project_type:"",source:"",tags:[],tags_data:[],timezone:null})},errors:{type:Object,default:()=>({})},statusOptions:{type:Array,required:!0,default:()=>[{value:"active",label:"Active"},{value:"completed",label:"Completed"},{value:"paid",label:"Paid"},{value:"on-hold",label:"On-hold"}]},sourceOptions:{type:Array,required:!0},canManageProjects:{type:Boolean,default:!1},canManageProjectBasicDetails:{type:Boolean,default:!1},isSaving:{type:Boolean,default:!1}},emits:["update:projectForm","submit"],setup(e,{emit:P}){const u=e,k=P,l=U({get:()=>u.projectForm,set:y=>k("update:projectForm",y)}),c=async(y,v)=>{try{const n=new FormData;n.append("logo",y);const m=await window.axios.post(`/api/projects/${v}/logo`,n,{headers:{"Content-Type":"multipart/form-data"}});return m.data&&m.data.logo&&(l.value.logo=m.data.logo,ne("Project logo uploaded successfully!")),m}catch(n){console.error("Error uploading logo:",n)}},x=async()=>{const y={name:l.value.name,description:l.value.description,website:l.value.website,social_media_link:l.value.social_media_link,preferred_keywords:l.value.preferred_keywords,google_chat_id:l.value.google_chat_id,status:l.value.status,project_type:l.value.project_type,source:l.value.source,google_drive_link:l.value.google_drive_link,tags:l.value.tags,timezone:l.value.timezone},v=l.value.logo,n=typeof v=="object"&&v!==null&&"name"in v?v:null;n&&delete y.logo,k("submit",y,!l.value.id,n),n&&l.value.id&&await c(n,l.value.id)},_=y=>{const v=y.target.files[0];v?l.value.logo=v:l.value.logo=null};return(y,v)=>(t(),s("div",mt,[a("div",vt,[o(D,{for:"name",value:"Project Name"}),o(Y,{id:"name",type:"text",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:l.value.name,"onUpdate:modelValue":v[0]||(v[0]=n=>l.value.name=n),required:"",autofocus:"",disabled:!e.canManageProjects||e.isSaving},null,8,["modelValue","disabled"]),o(R,{message:e.errors.name?e.errors.name[0]:"",class:"mt-2"},null,8,["message"])]),a("div",bt,[o(D,{for:"description",value:"Description"}),Me(a("textarea",{id:"description",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-lg shadow-sm mt-1 block w-full","onUpdate:modelValue":v[1]||(v[1]=n=>l.value.description=n),disabled:!e.canManageProjects||e.isSaving,rows:"4"},null,8,gt),[[Ie,l.value.description]]),o(R,{message:e.errors.description?e.errors.description[0]:"",class:"mt-2"},null,8,["message"])]),a("div",pt,[o(D,{for:"website",value:"Website"}),o(Y,{id:"website",type:"url",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:l.value.website,"onUpdate:modelValue":v[2]||(v[2]=n=>l.value.website=n),disabled:!e.canManageProjects||e.isSaving},null,8,["modelValue","disabled"]),o(R,{message:e.errors.website?e.errors.website[0]:"",class:"mt-2"},null,8,["message"])]),a("div",ft,[o(D,{for:"social_media_link",value:"Social Media Link"}),o(Y,{id:"social_media_link",type:"url",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:l.value.social_media_link,"onUpdate:modelValue":v[3]||(v[3]=n=>l.value.social_media_link=n),disabled:!e.canManageProjects||e.isSaving},null,8,["modelValue","disabled"]),o(R,{message:e.errors.social_media_link?e.errors.social_media_link[0]:"",class:"mt-2"},null,8,["message"])]),a("div",yt,[o(D,{for:"preferred_keywords",value:"Client Preferred Keywords"}),o(Y,{id:"preferred_keywords",type:"text",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:l.value.preferred_keywords,"onUpdate:modelValue":v[4]||(v[4]=n=>l.value.preferred_keywords=n),disabled:!e.canManageProjects||e.isSaving},null,8,["modelValue","disabled"]),o(R,{message:e.errors.preferred_keywords?e.errors.preferred_keywords[0]:"",class:"mt-2"},null,8,["message"])]),l.value.id&&e.canManageProjectBasicDetails?(t(),s("div",At,[o(D,{for:"logo",value:"Project Logo"}),a("input",{type:"file",id:"logo",onChange:_,class:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100 cursor-pointer",accept:"image/*",disabled:!e.canManageProjectBasicDetails||e.isSaving},null,40,ht),l.value.logo&&typeof l.value.logo=="string"?(t(),s("div",Mt,[v[12]||(v[12]=a("p",{class:"text-sm text-gray-600"},"Current Logo:",-1)),a("img",{src:l.value.logo,alt:"Project Logo",class:"h-20 w-20 object-contain rounded-lg shadow-md border border-gray-200"},null,8,wt)])):w("",!0),o(R,{message:e.errors.logo?e.errors.logo[0]:"",class:"mt-2"},null,8,["message"])])):w("",!0),e.canManageProjectBasicDetails?(t(),s("div",kt,[o(D,{for:"google_chat_id",value:"Google Chat ID"}),o(Y,{id:"google_chat_id",type:"text",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:l.value.google_chat_id,"onUpdate:modelValue":v[5]||(v[5]=n=>l.value.google_chat_id=n),disabled:!e.canManageProjects||e.isSaving},null,8,["modelValue","disabled"]),o(R,{message:e.errors.google_chat_id?e.errors.google_chat_id[0]:"",class:"mt-2"},null,8,["message"])])):w("",!0),e.canManageProjectBasicDetails?(t(),s("div",Tt,[o(D,{for:"google_drive_link",value:"Google Drive Link"}),o(Y,{id:"google_drive_link",type:"text",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:l.value.google_drive_link,"onUpdate:modelValue":v[6]||(v[6]=n=>l.value.google_drive_link=n),disabled:!e.canManageProjects||e.isSaving},null,8,["modelValue","disabled"]),o(R,{message:e.errors.google_drive_link?e.errors.google_drive_link[0]:"",class:"mt-2"},null,8,["message"])])):w("",!0),a("div",xt,[o(D,{for:"status",value:"Status"}),o(ie,{id:"status",modelValue:l.value.status,"onUpdate:modelValue":v[7]||(v[7]=n=>l.value.status=n),options:e.statusOptions,valueKey:"value",labelKey:"label",placeholder:"Select Project Status",disabled:!e.canManageProjects||e.isSaving,required:!0,class:"mt-1 block w-full"},null,8,["modelValue","options","disabled"]),o(R,{message:e.errors.status?e.errors.status[0]:"",class:"mt-2"},null,8,["message"])]),a("div",_t,[o(dt,{id:"project_type",modelValue:l.value.project_type,"onUpdate:modelValue":v[8]||(v[8]=n=>l.value.project_type=n),disabled:!e.canManageProjects||e.isSaving,class:"mt-1 block w-full"},null,8,["modelValue","disabled"]),o(R,{message:e.errors.project_type?e.errors.project_type[0]:"",class:"mt-2"},null,8,["message"])]),a("div",Gt,[o(D,{for:"source",value:"Source"}),o(ie,{id:"source",modelValue:l.value.source,"onUpdate:modelValue":v[9]||(v[9]=n=>l.value.source=n),options:e.sourceOptions,valueKey:"value",labelKey:"label",placeholder:"Select a Source",disabled:!e.canManageProjects||e.isSaving,class:"mt-1 block w-full"},null,8,["modelValue","options","disabled"]),o(R,{message:e.errors.source?e.errors.source[0]:"",class:"mt-2"},null,8,["message"])]),a("div",Pt,[o(lt,{id:"timezone",modelValue:l.value.timezone,"onUpdate:modelValue":v[10]||(v[10]=n=>l.value.timezone=n),disabled:!e.canManageProjects||e.isSaving,class:"mt-1 block w-full"},null,8,["modelValue","disabled"]),o(R,{message:e.errors.timezone?e.errors.timezone[0]:"",class:"mt-2"},null,8,["message"])]),a("div",jt,[o(et,{modelValue:l.value.tags,"onUpdate:modelValue":v[11]||(v[11]=n=>l.value.tags=n),initialTags:l.value.tags_data,label:"Associated Tags",placeholder:"Search or add tags",error:e.errors.tags?e.errors.tags[0]:"",disabled:!e.canManageProjects||e.isSaving},null,8,["modelValue","initialTags","error","disabled"])]),a("div",St,[o(ue,{onClick:x,disabled:!e.canManageProjects||l.value.id&&!e.canManageProjectBasicDetails||e.isSaving,class:X([{"opacity-50 cursor-not-allowed":e.isSaving},"px-6 py-2 rounded-lg text-base shadow-md hover:shadow-lg transition-all"])},{default:ae(()=>[e.isSaving?(t(),s("span",Ct,[v[13]||(v[13]=a("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[a("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),a("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),N(" "+j(l.value.id?"Updating...":"Creating..."),1)])):(t(),s("span",$t,j(l.value.id?"Update Basic Information":"Create Project"),1))]),_:1},8,["disabled","class"])])]))}},Et={class:"mb-4"},Dt={class:"mt-2"},Bt={key:0,class:"text-gray-500 text-sm mb-2"},Ut={class:"mb-4"},It={key:1,class:"space-y-3"},Nt={class:"flex-grow text-gray-800 font-medium"},Ft={class:"text-gray-600 text-sm"},Rt={class:"flex items-center space-x-2"},Lt=["onClick"],Ot={key:2,class:"p-4 bg-gray-50 rounded-lg text-gray-600 text-center border border-dashed border-gray-200"},Oe={__name:"MultiSelectWithRoles",props:{label:{type:String,required:!0},items:{type:Array,default:()=>[]},endpoint:{type:String,default:""},selectedItems:{type:Array,default:()=>[]},itemText:{type:String,default:"name"},itemSubtext:{type:String,default:"email"},itemValue:{type:String,default:"id"},roleOptions:{type:Array,default:()=>[]},roleType:{type:String,default:"application"},defaultRoleId:{type:Number,default:null},error:{type:String,default:""},placeholder:{type:String,default:"Select an item"},showRemoveButton:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1}},emits:["update:selectedItems"],setup(e,{emit:P}){const u=e,k=P,l=S([]),c=S([]),x=S([]),_=S([]),y=S(!1),v=async()=>{if(!(u.roleOptions.length>0))try{const E=(await Be.get(`/api/roles?type=${u.roleType}`)).data;x.value=E.map(z=>({value:z.id,label:z.name}))}catch(A){console.error("Error fetching roles:",A)}},n=U(()=>x.value.length>0?x.value:u.roleOptions),m=()=>u.defaultRoleId?u.defaultRoleId:n.value.length>0?n.value[0].value:1,B=()=>{l.value=[],c.value=[],!(!u.selectedItems||u.selectedItems.length===0)&&u.selectedItems.forEach(A=>{const E=typeof A=="object"?A[u.itemValue]:A,z=typeof A=="object"&&A.role_id!==void 0?A.role_id:m();if(!l.value.includes(E))l.value.push(E),c.value.push({id:E,role_id:z});else{const I=c.value.find(le=>le.id===E);I&&I.role_id!==z&&(I.role_id=z)}})};se(()=>u.selectedItems,(A,E)=>{JSON.stringify(A)!==JSON.stringify(E)&&B()},{deep:!0,immediate:!0}),se(c,A=>{k("update:selectedItems",A)},{deep:!0});const O=A=>{u.disabled||A&&!l.value.includes(A)&&(l.value.push(A),c.value.push({id:A,role_id:m()}))},q=A=>{u.disabled||(l.value=l.value.filter(E=>E!==A),c.value=c.value.filter(E=>E.id!==A))},H=(A,E)=>{if(u.disabled)return;const z=c.value.find(I=>I.id===A);z&&(z.role_id=parseInt(E))},J=A=>h.value.find(E=>E[u.itemValue]===A),f=A=>{const E=c.value.find(z=>z.id===A);return E?E.role_id:m()},b=async()=>{if(u.endpoint){y.value=!0;try{const A=await Be.get(u.endpoint);A.data&&Array.isArray(A.data)?_.value=A.data:A.data&&A.data.data&&Array.isArray(A.data.data)&&(_.value=A.data.data)}catch(A){console.error("Error fetching items from endpoint:",A)}finally{y.value=!1}}},h=U(()=>u.endpoint&&_.value.length>0?_.value:u.items),L=U(()=>h.value.filter(A=>!l.value.includes(A[u.itemValue])).map(A=>({value:A[u.itemValue],label:`${A[u.itemText]} (${A[u.itemSubtext]})`})));return je(()=>{v(),u.endpoint&&b()}),(A,E)=>(t(),s("div",Et,[o(D,{value:e.label},null,8,["value"]),a("div",Dt,[y.value?(t(),s("div",Bt,"Loading available items...")):w("",!0),a("div",Ut,[o(ie,{modelValue:A.selectedItemToAdd,"onUpdate:modelValue":E[0]||(E[0]=z=>A.selectedItemToAdd=z),options:L.value,valueKey:"value",labelKey:"label",placeholder:e.placeholder,disabled:y.value||e.disabled,onChange:O,class:"w-full"},null,8,["modelValue","options","placeholder","disabled"])]),l.value.length>0?(t(),s("div",It,[(t(!0),s(me,null,ve(l.value,z=>{var I,le;return t(),s("div",{key:z,class:"flex items-center p-3 border border-gray-200 rounded-lg bg-gray-50 shadow-sm"},[a("div",Nt,[N(j((I=J(z))==null?void 0:I[e.itemText])+" ",1),a("span",Ft,"("+j((le=J(z))==null?void 0:le[e.itemSubtext])+")",1)]),a("div",Rt,[o(ie,{modelValue:f(z),"onUpdate:modelValue":T=>H(z,T),options:n.value,valueKey:"value",labelKey:"label",placeholder:"Select Role",disabled:e.disabled,class:"w-32"},null,8,["modelValue","onUpdate:modelValue","options","disabled"]),e.showRemoveButton&&!e.disabled?(t(),s("button",{key:0,type:"button",class:"text-red-500 hover:text-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 rounded-full p-1 transition-colors duration-200",onClick:T=>q(z),"aria-label":"Remove item"},E[1]||(E[1]=[a("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,Lt)):w("",!0)])])}),128))])):(t(),s("div",Ot," No "+j(e.label.toLowerCase())+" selected. ",1))]),o(R,{message:e.error,class:"mt-2"},null,8,["message"])]))}},zt={class:"space-y-8"},Kt={key:0,class:"bg-gray-50 p-6 rounded-lg shadow-inner border border-gray-200"},qt={key:0,class:"mt-6 flex justify-end"},Ht={key:0},Wt={key:1},Jt={key:1,class:"mt-3 text-green-600 text-sm flex items-center"},Yt={key:2,class:"mt-3 text-red-600 text-sm flex items-center"},Qt={class:"bg-gray-50 p-6 rounded-lg shadow-inner border border-gray-200"},Zt=["disabled"],Xt={key:1,class:"bg-gray-50 p-6 rounded-lg shadow-inner border border-gray-200"},es={key:0,class:"mt-6 flex justify-end"},as={key:0},ls={key:1},ts={key:1,class:"mt-3 text-green-600 text-sm flex items-center"},ss={key:2,class:"mt-3 text-red-600 text-sm flex items-center"},os={__name:"ProjectFormClientsUsers",props:{projectForm:{type:Object,required:!0,default:()=>({id:null,client_ids:[],user_ids:[],contract_details:""})},errors:{type:Object,default:()=>({})},clientRoleOptions:{type:Array,default:()=>[]},userRoleOptions:{type:Array,default:()=>[]},clients:{type:Array,default:()=>[]},users:{type:Array,default:()=>[]},canViewProjectClients:{type:Boolean,default:!1},canManageProjectClients:{type:Boolean,default:!1},canViewProjectUsers:{type:Boolean,default:!1},canManageProjectUsers:{type:Boolean,default:!1},clientSaving:{type:Boolean,default:!1},clientSaveSuccess:{type:Boolean,default:!1},clientSaveError:{type:String,default:""},userSaving:{type:Boolean,default:!1},userSaveSuccess:{type:Boolean,default:!1},userSaveError:{type:String,default:""}},emits:["update:projectForm","saveClients","saveUsers"],setup(e,{emit:P}){const u=e,k=P,l=U({get:()=>u.projectForm,set:_=>k("update:projectForm",_)}),c=()=>{k("saveClients",l.value.client_ids)},x=()=>{k("saveUsers",l.value.user_ids)};return(_,y)=>(t(),s("div",zt,[e.canViewProjectClients?(t(),s("div",Kt,[y[5]||(y[5]=a("h3",{class:"text-xl font-semibold text-gray-800 mb-5"},"Project Clients",-1)),o(Oe,{label:"Select Clients",items:e.clients,selectedItems:l.value.client_ids,"onUpdate:selectedItems":y[0]||(y[0]=v=>l.value.client_ids=v),roleOptions:e.clientRoleOptions,roleType:"client",error:e.errors.client_ids?e.errors.client_ids[0]:"",placeholder:"Search and select clients to add",disabled:!e.canManageProjectClients,readonly:!e.canManageProjectClients&&e.canViewProjectClients,showRemoveButton:e.canManageProjectClients,class:"mb-4"},null,8,["items","selectedItems","roleOptions","error","disabled","readonly","showRemoveButton"]),e.canManageProjectClients?(t(),s("div",qt,[o(ue,{onClick:c,disabled:e.clientSaving,class:"px-6 py-3 rounded-lg text-lg shadow-md hover:shadow-lg transition-all duration-200"},{default:ae(()=>[e.clientSaving?(t(),s("span",Ht,"Saving Clients...")):(t(),s("span",Wt,"Save Clients"))]),_:1},8,["disabled"])])):w("",!0),e.clientSaveSuccess?(t(),s("div",Jt,y[3]||(y[3]=[a("svg",{class:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),N(" Clients saved successfully! ",-1)]))):w("",!0),e.clientSaveError?(t(),s("div",Yt,[y[4]||(y[4]=a("svg",{class:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),N(" "+j(e.clientSaveError),1)])):w("",!0)])):w("",!0),a("div",Qt,[y[6]||(y[6]=a("h3",{class:"text-xl font-semibold text-gray-800 mb-5"},"Contract Information",-1)),o(D,{for:"contract_details",value:"Contract Details",class:"mb-1"}),Me(a("textarea",{id:"contract_details",class:"block w-full px-4 py-2 border-gray-300 rounded-lg shadow-sm focus:border-indigo-500 focus:ring-indigo-500 transition-colors duration-200 resize-y min-h-[120px]","onUpdate:modelValue":y[1]||(y[1]=v=>l.value.contract_details=v),disabled:!e.canManageProjectClients,placeholder:"Enter contract terms, agreements, or important notes about the client relationship."},null,8,Zt),[[Ie,l.value.contract_details]]),o(R,{message:e.errors.contract_details?e.errors.contract_details[0]:"",class:"mt-2"},null,8,["message"])]),e.canViewProjectUsers?(t(),s("div",Xt,[y[9]||(y[9]=a("h3",{class:"text-xl font-semibold text-gray-800 mb-5"},"Assign Project Users",-1)),o(Oe,{label:"Assign Users",items:e.users,selectedItems:l.value.user_ids,"onUpdate:selectedItems":y[2]||(y[2]=v=>l.value.user_ids=v),roleOptions:e.userRoleOptions,roleType:"project",defaultRoleId:2,error:e.errors.user_ids?e.errors.user_ids[0]:"",placeholder:"Search and assign users to this project",disabled:!e.canManageProjectUsers,readonly:!e.canManageProjectUsers&&e.canViewProjectUsers,showRemoveButton:e.canManageProjectUsers,class:"mb-4"},null,8,["items","selectedItems","roleOptions","error","disabled","readonly","showRemoveButton"]),e.canManageProjectUsers?(t(),s("div",es,[o(ue,{onClick:x,disabled:e.userSaving,class:"px-6 py-3 rounded-lg text-lg shadow-md hover:shadow-lg transition-all duration-200"},{default:ae(()=>[e.userSaving?(t(),s("span",as,"Saving Users...")):(t(),s("span",ls,"Save Users"))]),_:1},8,["disabled"])])):w("",!0),e.userSaveSuccess?(t(),s("div",ts,y[7]||(y[7]=[a("svg",{class:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),N(" Users saved successfully! ",-1)]))):w("",!0),e.userSaveError?(t(),s("div",ss,[y[8]||(y[8]=a("svg",{class:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),N(" "+j(e.userSaveError),1)])):w("",!0)])):w("",!0)]))}},rs={class:"space-y-6"},ns={key:0,class:"bg-gray-50 p-6 rounded-lg shadow-inner border border-gray-200"},is={class:"mt-6"},us={key:0,class:"text-sm text-red-500 mt-3"},cs={key:1,class:"mt-8 bg-white p-6 rounded-lg shadow-md border border-gray-200"},ds={class:"space-y-3"},ms={class:"flex items-center"},vs={class:"mr-3 text-indigo-500"},bs={key:0,class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},gs={key:1,class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},ps={key:2,class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},fs={key:3,class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},ys=["href"],As={key:1,class:"text-gray-700 font-medium break-all mr-4"},hs=["onClick"],Ms={key:2,class:"p-6 bg-gray-50 rounded-lg text-gray-600 text-center border border-gray-200 shadow-sm"},ws={__name:"ProjectFormDocuments",props:{projectForm:{type:Object,required:!0,default:()=>({id:null,documents:[]})},errors:{type:Object,default:()=>({})},canUploadProjectDocuments:{type:Boolean,default:!1},canViewProjectDocuments:{type:Boolean,default:!1}},emits:["update:projectForm","uploadDocuments"],setup(e,{emit:P}){const u=e,k=P,l=U({get:()=>u.projectForm,set:v=>k("update:projectForm",v)}),c=S(null),x=v=>{const n=Array.from(v.target.files);if(n.length>0){const m=Array.isArray(l.value.documents)?l.value.documents.filter(B=>typeof B=="object"&&"path"in B):[];l.value.documents=[...m,...n]}},_=()=>{const v=l.value.documents.filter(n=>n instanceof File);k("uploadDocuments",v),c.value&&(c.value.value="")},y=v=>{l.value.documents=l.value.documents.filter((n,m)=>m!==v)};return(v,n)=>(t(),s("div",rs,[n[9]||(n[9]=a("h3",{class:"text-xl font-semibold text-gray-800 mb-4"},"Manage Project Documents",-1)),e.canUploadProjectDocuments?(t(),s("div",ns,[o(D,{for:"documents-upload",value:"Upload New Documents",class:"mb-2 text-lg"}),a("input",{type:"file",id:"documents-upload",ref_key:"documentFileInput",ref:c,onChange:x,class:"mt-2 block w-full text-sm text-gray-600 file:mr-4 file:py-2.5 file:px-5 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100 transition-colors duration-200 cursor-pointer",multiple:"",accept:".pdf,.doc,.docx,.jpg,.jpeg,.png,.gif"},null,544),n[1]||(n[1]=a("p",{class:"text-sm text-gray-500 mt-2"},"Supported formats: PDF, DOC, DOCX, JPG, JPEG, PNG, GIF. Max file size: 5MB.",-1)),o(R,{message:e.errors.documents?e.errors.documents[0]:"",class:"mt-2"},null,8,["message"]),a("div",is,[o(ue,{type:"button",onClick:_,disabled:!l.value.id||!l.value.documents||!l.value.documents.some(m=>m instanceof v.File),class:"px-6 py-3 rounded-lg text-lg shadow-md hover:shadow-lg transition-all duration-200"},{default:ae(()=>n[0]||(n[0]=[N(" Upload Selected Documents ",-1)])),_:1,__:[0]},8,["disabled"]),l.value.id?w("",!0):(t(),s("p",us," Please save the project first before uploading documents. "))])])):w("",!0),e.canViewProjectDocuments&&l.value.documents&&l.value.documents.length>0?(t(),s("div",cs,[n[8]||(n[8]=a("h3",{class:"text-xl font-semibold text-gray-800 mb-5"},"Existing Project Documents",-1)),a("ul",ds,[(t(!0),s(me,null,ve(l.value.documents,(m,B)=>(t(),s("li",{key:B,class:"flex items-center justify-between p-4 bg-gray-50 rounded-md border border-gray-100 shadow-sm transition-shadow hover:shadow-md duration-200"},[a("div",ms,[a("span",vs,[typeof m=="object"&&"type"in m&&m.type.includes("image")?(t(),s("svg",bs,n[2]||(n[2]=[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 002.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"},null,-1)]))):typeof m=="object"&&"type"in m&&m.type.includes("pdf")?(t(),s("svg",gs,n[3]||(n[3]=[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"},null,-1)]))):typeof m=="object"&&"type"in m&&(m.type.includes("word")||m.type.includes("document"))?(t(),s("svg",ps,n[4]||(n[4]=[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)]))):(t(),s("svg",fs,n[5]||(n[5]=[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)])))]),typeof m=="object"&&"path"in m?(t(),s("a",{key:0,href:`/storage/${m.path}`,target:"_blank",class:"text-blue-600 hover:text-blue-800 hover:underline font-medium break-all mr-4"},j(m.filename),9,ys)):(t(),s("span",As,[N(j(m.name)+" ",1),n[6]||(n[6]=a("span",{class:"text-gray-500 text-sm"},"(Pending Upload)",-1))]))]),e.canUploadProjectDocuments?(t(),s("button",{key:0,type:"button",onClick:O=>y(B),class:"p-2 rounded-full text-red-500 hover:bg-red-100 hover:text-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition-colors duration-200",title:"Remove document"},n[7]||(n[7]=[a("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,hs)):w("",!0)]))),128))])])):e.canViewProjectDocuments?(t(),s("div",Ms," No documents found for this project. ")):w("",!0),n[10]||(n[10]=a("div",{class:"mt-6 p-4 bg-blue-50 rounded-lg text-blue-700 text-sm border border-blue-200"},[a("p",null,"Note: Uploaded documents will be stored in the project's designated Google Drive folder.")],-1))]))}},ks={class:"p-6 bg-white rounded-lg shadow-xl font-inter"},Ts={key:0,class:"p-6 bg-gray-50 rounded-lg text-gray-600 text-center border border-gray-200 shadow-sm"},xs={key:1},_s={class:"mb-6 flex justify-between items-center"},Gs={key:0,class:"flex items-center"},Ps={key:1},js={key:0,class:"text-sm text-red-500 mb-4 bg-red-50 p-3 rounded-md border border-red-200"},Ss={key:1,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"},Cs={class:"flex justify-between items-start mb-3"},$s=["onClick","disabled"],Vs=["onUpdate:modelValue","readonly"],Es={class:"mt-auto pt-3 border-t border-gray-100 text-xs text-gray-500 flex justify-between items-center"},Ds={class:"font-medium text-gray-700"},Bs={key:2,class:"p-8 bg-gray-50 rounded-lg text-gray-600 text-center border border-gray-200 shadow-sm flex flex-col items-center justify-center h-64"},Us={__name:"ProjectFormNotes",props:{projectId:{type:[Number,String],required:!0},projectForm:{type:Object,required:!0,default:()=>({id:null,notes:[]})},errors:{type:Object,default:()=>({})},canAddProjectNotes:{type:Boolean,default:!1},canViewProjectNotes:{type:Boolean,default:!1},isSaving:{type:Boolean,default:!1}},emits:["update:projectForm","updateNotes"],setup(e,{emit:P}){const u=e,k=P,l=U({get:()=>u.projectForm,set:v=>k("update:projectForm",v)}),c=()=>{u.canAddProjectNotes&&l.value.notes.push({id:null,content:"",created_at:new Date().toISOString(),creator_name:"You"})},x=v=>{u.canAddProjectNotes&&l.value.notes.splice(v,1)},_=()=>{const v=l.value.notes.map(n=>({id:n.id||null,content:n.content}));console.log("Payload being emitted for save:",v),k("updateNotes",v)},y=v=>v?new Date(v).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A";return se(()=>u.projectForm.notes,v=>{console.log("ProjectFormNotes received notes:",v)},{deep:!0,immediate:!0}),(v,n)=>(t(),s("div",ks,[n[5]||(n[5]=a("h3",{class:"text-2xl font-semibold text-gray-800 mb-6"},"Project Notes Board",-1)),e.canViewProjectNotes?(t(),s("div",xs,[a("div",_s,[o(ue,{onClick:c,type:"button",class:"px-5 py-2.5 rounded-lg text-base shadow-sm hover:shadow-md transition-all duration-200",disabled:!e.canAddProjectNotes||e.isSaving},{default:ae(()=>n[0]||(n[0]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4v16m8-8H4"})],-1),N(" Add New Note ",-1)])),_:1,__:[0]},8,["disabled"]),o(ue,{onClick:_,disabled:!l.value.id||!e.canAddProjectNotes||e.isSaving,class:X([{"opacity-50 cursor-not-allowed":e.isSaving},"px-6 py-3 rounded-lg text-lg shadow-md hover:shadow-lg transition-all duration-200"])},{default:ae(()=>[e.isSaving?(t(),s("span",Gs,n[1]||(n[1]=[a("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[a("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),a("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),N(" Saving... ",-1)]))):(t(),s("span",Ps,"Save All Notes"))]),_:1},8,["disabled","class"])]),l.value.id?w("",!0):(t(),s("p",js," Please save the project first before adding or editing notes. ")),l.value.notes&&l.value.notes.length>0?(t(),s("div",Ss,[(t(!0),s(me,null,ve(l.value.notes,(m,B)=>(t(),s("div",{key:m.id||`new-note-${B}`,class:X(["relative bg-white p-5 rounded-lg shadow-md border border-gray-200 flex flex-col h-64 transition-all duration-200 ease-in-out hover:shadow-lg",{"opacity-75 cursor-not-allowed":!e.canAddProjectNotes||e.isSaving}])},[a("div",Cs,[o(D,{value:`Note ${B+1}`,class:"text-sm font-semibold text-gray-700"},null,8,["value"]),e.canAddProjectNotes?(t(),s("button",{key:0,type:"button",onClick:O=>x(B),class:"p-1 rounded-full text-red-500 hover:bg-red-100 hover:text-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition-colors duration-200",title:"Remove note",disabled:e.isSaving},n[2]||(n[2]=[a("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,$s)):w("",!0)]),Me(a("textarea",{"onUpdate:modelValue":O=>m.content=O,readonly:!e.canAddProjectNotes||e.isSaving,placeholder:"Type your note content here...",class:"flex-grow border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-lg shadow-sm block w-full resize-none transition-colors duration-200 p-3 text-sm overflow-auto",rows:"6"},null,8,Vs),[[Ie,m.content]]),o(R,{message:e.errors[`notes.${B}.content`]?e.errors[`notes.${B}.content`][0]:"",class:"mt-2"},null,8,["message"]),a("div",Es,[a("span",null,[n[3]||(n[3]=N("By: ",-1)),a("span",Ds,j(m.creator_name||"Unknown"),1)]),a("span",null,"Last updated: "+j(y(m.created_at)),1)])],2))),128))])):(t(),s("div",Bs,n[4]||(n[4]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-16 w-16 text-gray-400 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),a("p",{class:"text-lg font-medium"},"No notes found for this project.",-1),a("p",{class:"text-sm mt-2"},'Click "Add New Note" to start creating your project notes.',-1)])))])):(t(),s("div",Ts," You do not have permission to view project notes. "))]))}},Is=S([]),Ns=S([]),$e=S([]),Ve=S([]),ze=async e=>{try{const k=(await Be.get(`/api/roles?type=${e}`)).data.map(l=>({value:l.id,label:l.name}));return e==="client"?Is.value=k:e==="project"&&(Ns.value=k),k}catch(P){return console.error(`Error fetching ${e} roles:`,P),re(`Failed to load ${e} roles. Please refresh the page.`),[]}},Fs=async(e,P)=>{try{let u;return P&&!e?(u=await window.axios.get(`/api/projects/${P}/clients`),$e.value=u.data):e?(u=await window.axios.get("/api/clients"),$e.value=u.data.data||u.data):$e.value=[],$e.value}catch(u){return console.error("Error fetching clients:",u),re("Failed to load clients. Please try again."),[]}},Rs=async(e,P)=>{try{let u;return P&&!e?(u=await window.axios.get(`/api/projects/${P}/users`),Ve.value=u.data):e?(u=await window.axios.get("/api/users"),Ve.value=u.data):(u=await window.axios.get("/api/users"),Ve.value=u.data),Ve.value}catch(u){return console.error("Error fetching users:",u),re("Failed to load users. Please try again."),[]}},Ls=async(e,P,u)=>{let k="",l=null;try{switch(P){case"basic":k=`/api/projects/${e}/sections/basic`;break;case"client":(u.canViewProjectClients||u.canManageProjectClients||u.canViewProjectUsers||u.canManageProjectUsers)&&(k=`/api/projects/${e}/sections/clients-users`);break;case"services":(u.canViewProjectServicesAndPayments||u.canManageProjectServicesAndPayments)&&(k=`/api/projects/${e}/sections/services-payment`);break;case"documents":u.canViewProjectDocuments&&(k=`/api/projects/${e}/sections/documents`);break;case"notes":(u.canViewProjectNotes||u.canAddProjectNotes)&&(k=`/api/projects/${e}/sections/notes?type=private`);break;case"transactions":return null;default:return console.warn(`Attempted to fetch data for unknown tab: ${P}`),null}return k&&(l=(await window.axios.get(k)).data),l}catch(c){throw console.error(`Error fetching data for tab '${P}':`,c),re(`Failed to load data for ${P} section. Please try again.`),c}},Os={class:"p-6 w-full max-w-6xl mx-auto bg-white rounded-xl shadow-2xl transition-all duration-300 transform scale-100 opacity-100"},zs={class:"flex justify-between items-center pb-4 mb-6 border-b border-gray-200"},Ks={class:"text-2xl font-semibold text-gray-800"},qs={key:0,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-md relative mb-4",role:"alert"},Hs={class:"block sm:inline"},Ws={class:"border-b border-gray-200 mb-6"},Js={class:"flex -mb-px space-x-4"},Ys={key:1,class:"text-center py-8 text-gray-500 text-lg"},Qs={class:"py-4"},Zs={class:"mt-8 flex justify-end pt-4 border-t border-gray-200"},oo={__name:"ProjectForm",props:{show:{type:Boolean,required:!0},project:{type:Object,default:()=>({})},statusOptions:{type:Array,required:!0},departmentOptions:{type:Array,required:!0},sourceOptions:{type:Array,required:!0},clientRoleOptions:{type:Array,default:()=>[]},userRoleOptions:{type:Array,default:()=>[]},paymentTypeOptions:{type:Array,required:!0}},emits:["close","submit"],setup(e,{emit:P}){Ze();const u=S({}),k=e;se(()=>k.project,$=>{u.value=$||{}},{immediate:!0});const l=U(()=>{var $;return(($=u.value)==null?void 0:$.id)||null});Xe(l);const c=ea(u);U(()=>!!c.value),U(()=>{if(!c.value)return!1;const $=c.value.name,p=c.value.slug;return $==="Manager"||$==="Project Manager"||p==="manager"||p==="project-manager"});const{canDo:x,canView:_,canManage:y}=Ke(l),v=x("manage_projects",c),n=x("create_projects",c),m=x("create_clients",c),B=x("upload_project_documents",c);y("project_expenses",c),y("project_income",c);const O=y("project_services_and_payments",c),q=x("add_project_notes",c),H=y("project_users",c),J=y("project_clients",c),f=x("manage_project_basic_details",c),b=_("project_documents",c),h=_("project_services_and_payments",c),L=_("project_notes",c),A=_("project_users",c),E=_("project_clients",c),z=_("project_transactions",c),I=S("basic"),le=U(()=>E.value&&A.value?"Clients and Users":E.value?"Clients":A.value?"Users":"Clients and Users"),T=S([]),i=S([]),r=S([]),C=S([]),M=Ue({id:null,name:"",description:"",website:"",social_media_link:"",preferred_keywords:"",google_chat_id:"",logo:null,documents:[],client_ids:[],status:"active",project_type:"",services:[],service_details:[],source:"",total_amount:"",contract_details:"",google_drive_link:"",payment_type:"one_off",user_ids:[],notes:[],tags:[],tags_data:[],timezone:null}),W=S({}),F=S(""),Q=S(!1);S(!1);const pe=S(!1),we=S(!1),ye=S(""),xe=S(!1),ke=S(!1),Ae=S(""),ce=async $=>{if($==="documents"&&!M.id){sa("Please create the project first before managing documents.");return}if(I.value=$,M.id){Q.value=!0;try{const p=await Ls(M.id,$,{canViewProjectClients:E.value,canManageProjectClients:J.value,canViewProjectUsers:A.value,canManageProjectUsers:H.value,canViewProjectServicesAndPayments:h.value,canManageProjectServicesAndPayments:O.value,canViewProjectDocuments:b.value,canViewProjectNotes:L.value,canAddProjectNotes:q.value});p&&($==="basic"?Object.assign(M,{name:p.name||"",description:p.description||"",website:p.website||"",social_media_link:p.social_media_link||"",preferred_keywords:p.preferred_keywords||"",google_chat_id:p.google_chat_id||"",status:p.status||"active",project_type:p.project_type||"",source:p.source||"",google_drive_link:p.google_drive_link||"",logo:p.logo||null,tags:p.tags_data||[],tags_data:p.tags_data||[],timezone:p.timezone||null}):$==="client"?(M.client_ids=p.clients?p.clients.map(g=>{var te;return{id:g.id,role_id:((te=g.pivot)==null?void 0:te.role_id)||(T.value.length>0?T.value[0].value:1)}}):[],M.user_ids=p.users?p.users.map(g=>{var te;return{id:g.id,role_id:((te=g.pivot)==null?void 0:te.role_id)||(i.value.length>0?i.value[0].value:2)}}):[],M.contract_details=p.contract_details||""):$==="services"?(M.services=p.services||[],M.service_details=p.service_details||[],M.total_amount=p.total_amount||"",M.payment_type=p.payment_type||"one_off"):$==="documents"?M.documents=p||[]:$==="notes"&&(M.notes=p.map(g=>({id:g.id,content:g.content}))||[]))}catch(p){F.value=`Failed to fetch ${$} data. Please try again.`,console.error(`Error fetching ${$} data:`,p)}finally{Q.value=!1}}},Se=P,_e=S(!1);se([()=>k.show,()=>k.project.id],async([$,p],[g,te])=>{if($&&(p!==te||!_e.value)){W.value={},F.value="",Q.value=!0,_e.value=!0,Object.assign(M,{id:k.project.id||null,name:k.project.name||"",description:k.project.description||"",website:k.project.website||"",social_media_link:k.project.social_media_link||"",preferred_keywords:k.project.preferred_keywords||"",google_chat_id:k.project.google_chat_id||"",logo:k.project.logo||null,documents:[],client_ids:[],status:k.project.status||"active",project_type:k.project.project_type||"",services:[],service_details:[],source:k.project.source||"",total_amount:k.project.total_amount||"",contract_details:k.project.contract_details||"",google_drive_link:k.project.google_drive_link||"",payment_type:k.project.payment_type||"one_off",user_ids:[],notes:[],timezone:k.project.timezone||null}),te&&!p&&["documents","services","transactions","notes"].includes(I.value)&&(I.value="basic");try{T.value=await ze("client"),i.value=await ze("project"),r.value=await Fs(m.value,l.value),C.value=await Rs(n.value,l.value),l.value&&await aa(l.value),await ce(I.value)}catch(Ce){F.value="Failed to load project data. Please check your connection.",console.error("Initial data load error:",Ce)}finally{Q.value=!1}}else $||(_e.value=!1,Object.assign(M,{id:null,name:"",description:"",website:"",social_media_link:"",preferred_keywords:"",google_chat_id:"",logo:null,documents:[],client_ids:[],status:"active",project_type:"",services:[],service_details:[],source:"",total_amount:"",contract_details:"",google_drive_link:"",payment_type:"one_off",user_ids:[],notes:[]}),I.value="basic")},{immediate:!0});const he=($,p)=>{$.response&&$.response.status===422?(W.value=$.response.data.errors,F.value="Please correct the highlighted fields."):$.response&&$.response.data.message?F.value=$.response.data.message:(F.value=p,console.error("API Error:",$))},G=async($,p)=>{W.value={},F.value="";try{let g;p?(g=await window.axios.post("/api/projects",$),M.id=g.data.id,Se("submit",g.data),ne("Project created successfully!")):(g=await window.axios.put(`/api/projects/${M.id}/sections/basic`,$),ne("Basic information updated successfully!"))}catch(g){he(g,`Failed to ${p?"create":"update"} project.`)}},d=async $=>{if(!M.id){ye.value="Please save the project first before saving clients.";return}if(!$||$.length===0){ye.value="Please select at least one client to save.";return}pe.value=!0,we.value=!1,ye.value="";try{await window.axios.post(`/api/projects/${M.id}/attach-clients`,{client_ids:$}),we.value=!0,ne("Clients saved successfully!"),setTimeout(()=>{we.value=!1},3e3)}catch(p){he(p,"Failed to save clients."),ye.value=F.value}finally{pe.value=!1}},K=async $=>{if(!M.id){Ae.value="Please save the project first before saving users.";return}if(!$||$.length===0){Ae.value="Please select at least one user to save.";return}xe.value=!0,ke.value=!1,Ae.value="";try{await window.axios.post(`/api/projects/${M.id}/attach-users`,{user_ids:$}),ke.value=!0,ne("Users saved successfully!"),setTimeout(()=>{ke.value=!1},3e3)}catch(p){he(p,"Failed to save users."),Ae.value=F.value}finally{xe.value=!1}},ee=async $=>{if(!M.id){F.value="Please save the project first before uploading documents.";return}if(!$||$.length===0){F.value="Please select documents to upload.";return}try{const p=new FormData;$.forEach((te,Ge)=>{p.append(`documents[${Ge}]`,te)});const g=await window.axios.post(`/api/projects/${M.id}/documents`,p,{headers:{"Content-Type":"multipart/form-data"}});M.documents=g.data.documents||[],ne("Documents uploaded successfully!")}catch(p){he(p,"Failed to upload documents.")}},de=async $=>{W.value={},F.value="",Q.value=!0;try{await window.axios.put(`/api/projects/${M.id}/sections/notes?type=private`,{notes:$}),ne("Notes updated successfully!"),Q.value=!1}catch(p){Q.value=!1,he(p,"Failed to update notes.")}},fe=()=>{Se("close")};return($,p)=>(t(),s("div",Os,[a("div",zs,[a("h2",Ks,j(M.id?"Edit Project":"Create New Project"),1),a("button",{onClick:fe,class:"p-2 rounded-full text-gray-400 hover:bg-gray-100 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition-colors duration-200"},p[11]||(p[11]=[a("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),F.value?(t(),s("div",qs,[a("span",Hs,j(F.value),1)])):w("",!0),a("div",Ws,[a("nav",Js,[V(v)||!M.id?(t(),s("button",{key:0,onClick:p[0]||(p[0]=g=>ce("basic")),class:X(["py-3 px-5 text-center border-b-2 font-medium text-base rounded-t-lg transition-colors duration-200",I.value==="basic"?"border-indigo-600 text-indigo-700 bg-indigo-50":"border-transparent text-gray-600 hover:text-gray-800 hover:border-gray-300 hover:bg-gray-50"])}," Basic Information ",2)):w("",!0),M.id&&(V(E)||V(A))||!M.id?(t(),s("button",{key:1,onClick:p[1]||(p[1]=g=>ce("client")),class:X(["py-3 px-5 text-center border-b-2 font-medium text-base rounded-t-lg transition-colors duration-200",I.value==="client"?"border-indigo-600 text-indigo-700 bg-indigo-50":"border-transparent text-gray-600 hover:text-gray-800 hover:border-gray-300 hover:bg-gray-50"])},j(le.value),3)):w("",!0),M.id&&(V(O)||V(h))?(t(),s("button",{key:2,onClick:p[2]||(p[2]=g=>ce("services")),class:X(["py-3 px-5 text-center border-b-2 font-medium text-base rounded-t-lg transition-colors duration-200",I.value==="services"?"border-indigo-600 text-indigo-700 bg-indigo-50":"border-transparent text-gray-600 hover:text-gray-800 hover:border-gray-300 hover:bg-gray-50"])}," Services & Payment ",2)):w("",!0),M.id&&V(z)?(t(),s("button",{key:3,onClick:p[3]||(p[3]=g=>ce("transactions")),class:X(["py-3 px-5 text-center border-b-2 font-medium text-base rounded-t-lg transition-colors duration-200",I.value==="transactions"?"border-indigo-600 text-indigo-700 bg-indigo-50":"border-transparent text-gray-600 hover:text-gray-800 hover:border-gray-300 hover:bg-gray-50"])}," Transactions ",2)):w("",!0),M.id&&V(b)?(t(),s("button",{key:4,onClick:p[4]||(p[4]=g=>ce("documents")),class:X(["py-3 px-5 text-center border-b-2 font-medium text-base rounded-t-lg transition-colors duration-200",I.value==="documents"?"border-indigo-600 text-indigo-700 bg-indigo-50":"border-transparent text-gray-600 hover:text-gray-800 hover:border-gray-300 hover:bg-gray-50"])}," Documents ",2)):w("",!0),M.id&&(V(q)||V(L))?(t(),s("button",{key:5,onClick:p[5]||(p[5]=g=>ce("notes")),class:X(["py-3 px-5 text-center border-b-2 font-medium text-base rounded-t-lg transition-colors duration-200",I.value==="notes"?"border-indigo-600 text-indigo-700 bg-indigo-50":"border-transparent text-gray-600 hover:text-gray-800 hover:border-gray-300 hover:bg-gray-50"])}," Notes ",2)):w("",!0)])]),Q.value?(t(),s("div",Ys,p[12]||(p[12]=[a("svg",{class:"animate-spin h-8 w-8 text-indigo-500 mx-auto mb-3",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[a("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),a("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),N(" Loading project data... ",-1)]))):w("",!0),Me(a("div",Qs,[I.value==="basic"?(t(),ge(Vt,{key:0,projectForm:M,"onUpdate:projectForm":p[6]||(p[6]=g=>M=g),errors:W.value,statusOptions:e.statusOptions,sourceOptions:e.sourceOptions,canManageProjects:V(v),canManageProjectBasicDetails:V(f),onSubmit:G},null,8,["projectForm","errors","statusOptions","sourceOptions","canManageProjects","canManageProjectBasicDetails"])):w("",!0),I.value==="client"?(t(),ge(os,{key:1,projectForm:M,"onUpdate:projectForm":p[7]||(p[7]=g=>M=g),errors:W.value,clientRoleOptions:T.value,userRoleOptions:i.value,clients:r.value,users:C.value,canViewProjectClients:V(E),canManageProjectClients:V(J),canViewProjectUsers:V(A),canManageProjectUsers:V(H),clientSaving:pe.value,clientSaveSuccess:we.value,clientSaveError:ye.value,userSaving:xe.value,userSaveSuccess:ke.value,userSaveError:Ae.value,onSaveClients:d,onSaveUsers:K},null,8,["projectForm","errors","clientRoleOptions","userRoleOptions","clients","users","canViewProjectClients","canManageProjectClients","canViewProjectUsers","canManageProjectUsers","clientSaving","clientSaveSuccess","clientSaveError","userSaving","userSaveSuccess","userSaveError"])):w("",!0),I.value==="services"?(t(),ge(Oa,{key:2,projectId:M.id,departmentOptions:e.departmentOptions,paymentTypeOptions:e.paymentTypeOptions,canManageProjectServicesAndPayments:V(O),canViewProjectServicesAndPayments:V(h),onUpdated:p[8]||(p[8]=g=>ce("services"))},null,8,["projectId","departmentOptions","paymentTypeOptions","canManageProjectServicesAndPayments","canViewProjectServicesAndPayments"])):w("",!0),I.value==="transactions"&&V(z)?(t(),ge(zl,{key:3,projectId:M.id,userProjectRole:V(c).value},null,8,["projectId","userProjectRole"])):w("",!0),I.value==="documents"?(t(),ge(ws,{key:4,projectForm:M,"onUpdate:projectForm":p[9]||(p[9]=g=>M=g),errors:W.value,canUploadProjectDocuments:V(B),canViewProjectDocuments:V(b),onUploadDocuments:ee},null,8,["projectForm","errors","canUploadProjectDocuments","canViewProjectDocuments"])):w("",!0),I.value==="notes"?(t(),ge(Us,{key:5,projectForm:M,"onUpdate:projectForm":p[10]||(p[10]=g=>M=g),errors:W.value,canAddProjectNotes:V(q),canViewProjectNotes:V(L),onUpdateNotes:de,"project-id":l.value,"is-saving":Q.value},null,8,["projectForm","errors","canAddProjectNotes","canViewProjectNotes","project-id","is-saving"])):w("",!0)],512),[[la,!Q.value]]),a("div",Zs,[o(De,{onClick:fe,class:"px-6 py-2 rounded-lg text-lg"},{default:ae(()=>p[13]||(p[13]=[N("Close",-1)])),_:1,__:[13]})])]))}};export{oo as _,Pe as a,Re as b,Z as c,We as d,oe as f};
