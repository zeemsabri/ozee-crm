import{c as n,o as r,a as e,r as d,l as z,b as q,e as c,u as p,h as K,w as U,k as x,f as S,g,v as W,n as w,t as i,F as m,i as h,q as H,K as G,L as E}from"./app-BB49X1tp.js";import{b as J,_ as Q}from"./AuthenticatedLayout-CJntGdOY.js";import{_ as X}from"./MultiSelectDropdown-Bhj_tQt_.js";import{R as ee}from"./RightSidebar-D3M15iR-.js";import{_ as te}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as se}from"./SparklesIcon-BxlAHVwH.js";import{r as oe}from"./MagnifyingGlassIcon-BB5fW-Ou.js";import{r as re}from"./CheckCircleIcon-CxipuCvk.js";import{r as ae}from"./BriefcaseIcon-Bv72YOUc.js";import{r as ne,a as ie}from"./PrinterIcon-J2995WNV.js";import{r as le}from"./ChevronDownIcon-C13M-utK.js";import{r as de}from"./ArrowPathIcon-C8r4okHY.js";import"./PrimaryButton-ByHbGtgS.js";import"./Modal-BhZEOuT6.js";import"./InputLabel-CF6SQJlm.js";import"./InputError-BYAWAWU2.js";import"./SecondaryButton-h9tD_s2q.js";import"./index-DHNLbyBN.js";import"./BaseFormModal-C1rPl9Vb.js";import"./TextInput-B8kjVC_X.js";import"./SelectDropdown-Dd_bXZ8S.js";/* empty css                                                                       */import"./debounce-C-hnF4Z3.js";import"./ApplicationLogo-m9x7uzgD.js";import"./createLucideIcon-bK6Z0bQ_.js";import"./plus-D8NgBDXz.js";import"./DangerButton-CmmvETjq.js";import"./moment-BLMuvzoS.js";import"./taskState-Dm-EQCFk.js";import"./NoticeboardModal-C9hb9LrZ.js";import"./x-CMzV8zv1.js";function ce(C,v){return r(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m3.75 13.5 10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75Z"})])}function ue(C,v){return r(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"})])}function pe(C,v){return r(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.05 4.575a1.575 1.575 0 1 0-3.15 0v3m3.15-3v-1.5a1.575 1.575 0 0 1 3.15 0v1.5m-3.15 0 .075 5.925m3.075.75V4.575m0 0a1.575 1.575 0 0 1 3.15 0V15M6.9 7.575a1.575 1.575 0 1 0-3.15 0v8.175a6.75 6.75 0 0 0 6.75 6.75h2.018a5.25 5.25 0 0 0 3.712-1.538l1.732-1.732a5.25 5.25 0 0 0 1.538-3.712l.003-2.024a.668.668 0 0 1 .198-.471 1.575 1.575 0 1 0-2.228-2.228 3.818 3.818 0 0 0-1.12 2.687M6.9 7.575V12m6.27 4.318A4.49 4.49 0 0 1 16.35 15m.002 0h-.002"})])}function ge(C,v){return r(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"})])}const xe={class:"flex justify-between items-center print:hidden"},me={class:"flex gap-3"},ve=["disabled"],he={class:"py-6 bg-gray-50 min-h-screen print:bg-white print:py-0"},be={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 space-y-6"},fe={class:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6 print:hidden"},ye={class:"grid grid-cols-1 md:grid-cols-4 gap-6 items-end"},_e={class:"md:col-span-1"},we={class:"text-[10px] font-black text-indigo-600 uppercase mb-2 block flex items-center gap-1"},ke={class:"md:col-span-2"},Ce={class:"flex bg-gray-100 p-1 rounded-xl"},je={key:0,class:"space-y-4"},De={class:"flex items-center justify-between px-2"},$e={class:"text-lg font-black text-gray-800 flex items-center gap-2"},Te={class:"text-xs font-bold text-gray-400 uppercase tracking-widest"},Se={key:0,class:"bg-white p-10 rounded-3xl border-2 border-dashed border-gray-200 text-center"},Me={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Ne={class:"p-5 bg-gray-50/50 border-b border-gray-100 flex items-center gap-3"},Ve={class:"h-10 w-10 rounded-full bg-indigo-600 flex items-center justify-center text-white font-black shadow-sm"},Pe={class:"font-black text-gray-900 leading-tight"},Be={class:"p-5 space-y-6 flex-1"},Ue={key:0},Ee={class:"text-[10px] font-black text-orange-500 uppercase tracking-widest mb-3 flex items-center gap-1"},Ae={class:"text-[9px] font-black mt-2 text-orange-400"},Ie={key:1},Fe={class:"text-[10px] font-black text-green-600 uppercase tracking-widest mb-3 flex items-center gap-1"},Le={class:"space-y-2"},Oe={class:"flex items-start gap-2"},Re=["onClick"],Ze={class:"text-[9px] text-gray-400 font-bold uppercase tracking-tight"},ze={key:2},He={class:"text-[10px] font-black text-purple-600 uppercase tracking-widest mb-3 flex items-center gap-1"},Ye={class:"space-y-2"},qe={class:"text-xs font-bold text-gray-800 truncate"},Ke={class:"text-[9px] text-purple-400 font-black uppercase"},We={key:3},Ge={class:"text-[10px] font-black text-teal-600 uppercase tracking-widest mb-3 flex items-center gap-1"},Je={key:1,class:"border-gray-200 my-10"},Qe={key:2,class:"space-y-6"},Xe=["onClick"],et={class:"flex items-center space-x-4"},tt={class:"h-10 w-10 rounded-xl bg-indigo-50 flex items-center justify-center text-indigo-600"},st={class:"font-black text-lg text-gray-900"},ot={class:"px-2 py-0.5 rounded text-[9px] font-black uppercase bg-gray-100 text-gray-600"},rt={class:"border-t border-gray-100 bg-gray-50/20"},at={class:"flex border-b border-gray-100 bg-white px-4"},nt=["onClick"],it=["onClick"],lt=["onClick"],dt={class:"p-6"},ct={class:"space-y-3"},ut=["onClick"],pt={class:"font-bold text-gray-900 text-sm"},gt={class:"text-[10px] text-gray-400 mt-1 uppercase font-bold"},xt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},mt={class:"mt-2 text-[9px] font-black text-indigo-500 uppercase"},vt={__name:"ProjectIndex",setup(C){const v=d([]),A=d([]),j=d(!1);d(!1),d({});const M=d([]),I=d(""),F=d(""),_=d(""),k=d({}),b=d({}),D=d(!1),N=d(null),$=d(null),L=d([]),f=d("summary"),Y=a=>{k.value[a]=!k.value[a]},V=(a,t)=>{b.value[a]=t},P=a=>{if(!_.value||!a)return!1;const t=_.value.split("T")[0],s=a.split("T")[0];return t===s},O=z(()=>{const a={},t=s=>{const u=s||"Unassigned/System";return a[u]||(a[u]={tasksDone:[],tasksUpdated:[],notes:[],standups:[],meetings:[],emails:[]}),a[u]};return v.value.forEach(s=>{var u,o,T;(u=s.tasks)==null||u.forEach(l=>{if(P(l.updated_at)){const y=t(l.assigned_to);l.status==="Done"?y.tasksDone.push({...l,projectName:s.name}):y.tasksUpdated.push({...l,projectName:s.name})}}),(o=s.project_notes)==null||o.forEach(l=>{if(P(l.created_at)){const y=t(l.creator_name);l.type==="standup"?y.standups.push({...l,projectName:s.name}):l.type==="meeting_minutes"?y.meetings.push({...l,projectName:s.name}):y.notes.push({...l,projectName:s.name})}}),(T=s.emails)==null||T.forEach(l=>{P(l.created_at)&&t(l.sender).emails.push({...l,projectName:s.name})})}),a}),B=z(()=>Object.keys(O.value).length),R=async a=>{if(!(!a||!a.id)){if(N.value=a.id,$.value=a.project_id||0,$.value)try{const t=await window.axios.get(`/api/projects/${$.value}/sections/clients-users`);L.value=t.data.users||[]}catch(t){console.error("Failed to fetch project users",t)}D.value=!0}},Z=async()=>{j.value=!0;try{const a=await window.axios.get("/api/productivity/project-report",{params:{project_ids:M.value.join(","),date_start:I.value,date_end:F.value}});v.value=a.data.reportData,A.value=a.data.projects,v.value.forEach(t=>{t.has_activity&&(k.value[t.id]=!0,b.value[t.id]="todo")})}catch(a){console.error(a)}finally{j.value=!1}};return q(()=>{const a=new Date;_.value=a.toISOString().split("T")[0];const t=new Date(a.getFullYear(),a.getMonth(),1);I.value=t.toISOString().split("T")[0],F.value=a.toISOString().split("T")[0],Z()}),(a,t)=>(r(),n(m,null,[c(p(K),{title:"Morning Briefing Report"}),c(Q,null,{header:U(()=>[e("div",xe,[t[9]||(t[9]=e("div",null,[e("h2",{class:"font-black text-2xl text-gray-900 tracking-tight"},"Morning Briefing"),e("p",{class:"text-sm text-gray-500 font-medium"},"Daily productivity & action point generator")],-1)),e("div",me,[e("button",{onClick:Z,disabled:j.value,class:"flex items-center px-4 py-2 bg-indigo-600 text-white rounded-xl text-sm font-bold hover:bg-indigo-700 shadow-sm transition disabled:opacity-50"},[c(p(de),{class:w(["h-4 w-4 mr-2",{"animate-spin":j.value}])},null,8,["class"]),t[7]||(t[7]=g(" Refresh Data ",-1))],8,ve),e("button",{onClick:t[0]||(t[0]=s=>a.window.print()),class:"flex items-center px-4 py-2 bg-white border border-gray-200 rounded-xl text-sm font-bold text-gray-700 hover:bg-gray-50 shadow-sm transition"},[c(p(ie),{class:"h-4 w-4 mr-2"}),t[8]||(t[8]=g(" PDF ",-1))])])])]),default:U(()=>[e("div",he,[e("div",be,[e("div",fe,[e("div",ye,[e("div",_e,[e("label",we,[c(p(se),{class:"h-3 w-3"}),t[10]||(t[10]=g(" Focus Date (Yesterday/Today) ",-1))]),S(e("input",{type:"date","onUpdate:modelValue":t[1]||(t[1]=s=>_.value=s),class:"w-full rounded-xl border-indigo-200 bg-indigo-50 text-indigo-900 font-bold text-sm focus:ring-indigo-500 shadow-inner"},null,512),[[W,_.value]])]),e("div",ke,[t[11]||(t[11]=e("label",{class:"text-[10px] font-bold text-gray-400 uppercase mb-2 block tracking-widest"},"Filter Project Scope",-1)),c(X,{modelValue:M.value,"onUpdate:modelValue":t[2]||(t[2]=s=>M.value=s),options:A.value,"is-multi":!0,placeholder:"Analyze All Projects"},null,8,["modelValue","options"])]),e("div",Ce,[e("button",{onClick:t[3]||(t[3]=s=>f.value="summary"),class:w([f.value==="summary"?"bg-white shadow-sm text-indigo-600":"text-gray-500","flex-1 py-1.5 px-3 rounded-lg text-xs font-black uppercase transition"])},"Summary",2),e("button",{onClick:t[4]||(t[4]=s=>f.value="projects"),class:w([f.value==="projects"?"bg-white shadow-sm text-indigo-600":"text-gray-500","flex-1 py-1.5 px-3 rounded-lg text-xs font-black uppercase transition"])},"Projects",2)])])]),f.value==="summary"||B.value>0?(r(),n("section",je,[e("div",De,[e("h3",$e,[c(p(ce),{class:"h-5 w-5 text-amber-500"}),g(" Activity Snapshot: "+i(_.value),1)]),e("span",Te,i(B.value)+" Contributors",1)]),B.value===0?(r(),n("div",Se,[c(p(oe),{class:"h-10 w-10 text-gray-300 mx-auto mb-3"}),t[12]||(t[12]=e("p",{class:"text-gray-500 font-bold text-lg"},"No activity recorded for this specific date.",-1)),t[13]||(t[13]=e("p",{class:"text-sm text-gray-400"},"Try selecting a different date or refreshing the data.",-1))])):x("",!0),e("div",Me,[(r(!0),n(m,null,h(O.value,(s,u)=>(r(),n("div",{key:u,class:"bg-white rounded-3xl shadow-sm border border-gray-100 overflow-hidden flex flex-col transition hover:shadow-md"},[e("div",Ne,[e("div",Ve,i(u.substring(0,2).toUpperCase()),1),e("div",null,[e("h4",Pe,i(u),1),t[14]||(t[14]=e("p",{class:"text-[10px] text-indigo-500 font-bold uppercase tracking-tighter"},"Daily Output",-1))])]),e("div",Be,[s.standups.length>0?(r(),n("div",Ue,[e("h5",Ee,[c(p(pe),{class:"h-3 w-3"}),t[15]||(t[15]=g(" Standup Log ",-1))]),(r(!0),n(m,null,h(s.standups,o=>(r(),n("div",{key:o.id,class:"text-xs text-gray-600 bg-orange-50/50 p-3 rounded-xl border border-orange-100 mb-2 italic"},[g(i(o.content)+" ",1),e("p",Ae,i(o.projectName),1)]))),128))])):x("",!0),s.tasksDone.length>0?(r(),n("div",Ie,[e("h5",Fe,[c(p(re),{class:"h-3 w-3"}),t[16]||(t[16]=g(" Completed ",-1))]),e("ul",Le,[(r(!0),n(m,null,h(s.tasksDone,o=>(r(),n("li",{key:o.id,class:"group"},[e("div",Oe,[t[17]||(t[17]=e("div",{class:"mt-1 h-1.5 w-1.5 rounded-full bg-green-500"},null,-1)),e("div",null,[e("p",{class:"text-xs font-bold text-gray-800 group-hover:text-indigo-600 cursor-pointer",onClick:T=>R(o)},i(o.name),9,Re),e("p",Ze,i(o.projectName),1)])])]))),128))])])):x("",!0),s.emails.length>0?(r(),n("div",ze,[e("h5",He,[c(p(ue),{class:"h-3 w-3"}),t[18]||(t[18]=g(" Communications ",-1))]),e("ul",Ye,[(r(!0),n(m,null,h(s.emails,o=>(r(),n("li",{key:o.id,class:"bg-purple-50 p-2 rounded-lg border border-purple-100"},[e("p",qe,i(o.subject),1),e("p",Ke,i(o.projectName),1)]))),128))])])):x("",!0),s.meetings.length>0?(r(),n("div",We,[e("h5",Ge,[c(p(ge),{class:"h-3 w-3"}),t[19]||(t[19]=g(" Drafted Minutes ",-1))]),(r(!0),n(m,null,h(s.meetings,o=>(r(),n("div",{key:o.id,class:"text-[11px] text-gray-600 border-l-2 border-teal-200 pl-3 py-1"},i(o.content.substring(0,100))+"... ",1))),128))])):x("",!0)])]))),128))])])):x("",!0),f.value==="projects"?(r(),n("hr",Je)):x("",!0),f.value==="projects"?(r(),n("div",Qe,[t[20]||(t[20]=e("h3",{class:"text-sm font-black text-gray-400 uppercase tracking-[0.2em] px-2"},"Deep Dive by Project",-1)),(r(!0),n(m,null,h(v.value,s=>{var u;return r(),n("div",{key:s.id,class:"bg-white rounded-3xl border border-gray-200 shadow-sm overflow-hidden mb-6"},[e("div",{onClick:o=>Y(s.id),class:"p-6 flex items-center justify-between cursor-pointer hover:bg-gray-50 transition"},[e("div",et,[e("div",tt,[c(p(ae),{class:"h-6 w-6"})]),e("div",null,[e("h4",st,i(s.name),1),e("span",ot,i(s.status),1)])]),(r(),H(G(k.value[s.id]?p(ne):p(le)),{class:"h-5 w-5 text-gray-400"}))],8,Xe),S(e("div",rt,[e("div",at,[e("button",{onClick:o=>V(s.id,"todo"),class:w([b.value[s.id]==="todo"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-400","py-3 px-4 border-b-2 text-[10px] font-black uppercase tracking-widest"])},"Active Tasks",10,nt),e("button",{onClick:o=>V(s.id,"notes"),class:w([b.value[s.id]==="notes"?"border-blue-500 text-blue-600":"border-transparent text-gray-400","py-3 px-4 border-b-2 text-[10px] font-black uppercase tracking-widest"])},"Notes",10,it),e("button",{onClick:o=>V(s.id,"emails"),class:w([b.value[s.id]==="emails"?"border-purple-500 text-purple-600":"border-transparent text-gray-400","py-3 px-4 border-b-2 text-[10px] font-black uppercase tracking-widest"])},"Emails",10,lt)]),e("div",dt,[S(e("div",ct,[(r(!0),n(m,null,h((u=s.tasks)==null?void 0:u.filter(o=>o.status!=="Done"),o=>(r(),n("div",{key:o.id,onClick:T=>R(o),class:"bg-white p-4 rounded-xl border border-gray-100 cursor-pointer hover:border-indigo-200 transition"},[e("p",pt,i(o.name),1),e("p",gt,i(o.assigned_to)+" • "+i(o.status),1)],8,ut))),128))],512),[[E,b.value[s.id]==="todo"]]),S(e("div",xt,[(r(!0),n(m,null,h(s.project_notes,o=>(r(),n("div",{key:o.id,class:"bg-white p-4 rounded-xl border border-gray-100 text-xs leading-relaxed text-gray-600"},[g(' "'+i(o.content)+'" ',1),e("div",mt,i(o.creator_name)+" • "+i(o.type),1)]))),128))],512),[[E,b.value[s.id]==="notes"]])])],512),[[E,k.value[s.id]]])])}),128))])):x("",!0)])]),c(ee,{show:D.value,"onUpdate:show":t[6]||(t[6]=s=>D.value=s),title:"Task Review",initialWidth:40},{content:U(()=>[N.value?(r(),H(J,{key:0,"task-id":N.value,"project-id":$.value,"project-users":L.value,onClose:t[5]||(t[5]=s=>D.value=!1)},null,8,["task-id","project-id","project-users"])):x("",!0)]),_:1},8,["show"])]),_:1})],64))}},Kt=te(vt,[["__scopeId","data-v-eff9f2e6"]]);export{Kt as default};
