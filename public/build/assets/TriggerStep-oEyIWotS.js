import{u as w}from"./workflowStore-BpEtorFZ.js";import x from"./StepCard-v5z4ZMXR.js";import{S as c}from"./SelectDropdown-CPLyGcRc.js";import{b as V,l as a,q as d,o as u,w as k,a as v,e as y,k as g,c as C,t as B}from"./app-DHObBZ9c.js";import"./trash-Dq6xPxFB.js";import"./createLucideIcon-C2r74J4U.js";/* empty css                                                                       */import"./_plugin-vue_export-helper-DlAUqK2U.js";const M={class:"flex items-center flex-wrap gap-2 text-md"},q={key:1,class:"w-full text-sm text-amber-700 bg-amber-50 border border-amber-200 rounded-md px-3 py-2"},A={__name:"TriggerStep",props:{step:{type:Object,required:!0}},emits:["update:step"],setup(f,{emit:h}){const l=f,i=h,n=w();V(()=>{n.automationSchema.length||n.fetchAutomationSchema()});const p=a(()=>n.automationSchema||[]),_=a(()=>p.value.map(e=>({label:e.name,value:e.name}))),o=a({get(){var e;return((e=l.step.step_config)==null?void 0:e.model)||null},set(e){const t={model:e,event:null,trigger_event:null};i("update:step",{...l.step,step_config:t})}}),m=a({get(){var e;return((e=l.step.step_config)==null?void 0:e.event)||null},set(e){const t=o.value,s={...l.step.step_config,event:e,trigger_event:t&&e?`${t.toLowerCase()}.${e}`:null};i("update:step",{...l.step,step_config:s})}}),b=a(()=>o.value?p.value.find(e=>e.name===o.value):null),r=a(()=>{if(!o.value)return[];const e=b.value;return e?e.events:[]}),S=a(()=>o.value&&r.value.length===0);return(e,t)=>(u(),d(x,{icon:"⚡",title:"1. When this happens... (Trigger)"},{default:k(()=>[v("div",M,[t[2]||(t[2]=v("span",{class:"font-semibold text-gray-700"},"When a",-1)),y(c,{modelValue:o.value,"onUpdate:modelValue":t[0]||(t[0]=s=>o.value=s),options:_.value,placeholder:"Select a model",class:"w-56"},null,8,["modelValue","options"]),o.value&&r.value.length?(u(),d(c,{key:0,modelValue:m.value,"onUpdate:modelValue":t[1]||(t[1]=s=>m.value=s),options:r.value,placeholder:"is...",class:"w-56"},null,8,["modelValue","options"])):g("",!0),S.value?(u(),C("div",q," Triggers are not available for “"+B(o.value)+"”. You can still use this model in conditions or actions. If you need a trigger for it, please contact your workspace admin to request support. ",1)):g("",!0)])]),_:1}))}};export{A as default};
