import{c as d,o as i,a as e,r as b,m as Je,d as Fe,g as L,l as _,v as _e,z as ae,y as xe,F as k,j as D,n as K,t as l,p as Ye,b as Ie,f as p,u as x,h as Ge,w as ke,i as v,L as ne,q as He,K as Qe,H as We}from"./app-DTsjYMjF.js";import{b as Xe,_ as je}from"./AuthenticatedLayout-D17oGgsj.js";import{_ as et}from"./MultiSelectDropdown-Bm2yaaOu.js";import{R as tt}from"./RightSidebar-Cz8C3-mM.js";import{_ as st}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as Y}from"./SparklesIcon-B0okjUwf.js";import{r as at}from"./MagnifyingGlassIcon-Cgppowbl.js";import{r as fe}from"./CheckCircleIcon-B0tXOfjn.js";import{r as nt}from"./BriefcaseIcon-huTOcdjB.js";import{r as ot,a as it}from"./PrinterIcon-CPss-F7T.js";import{r as rt}from"./ChevronDownIcon-DdkfLZIn.js";import{r as Le}from"./ArrowPathIcon-CjfbIHHD.js";import{r as dt}from"./ClockIcon-_3442bJA.js";import{r as lt}from"./CalendarIcon-RaLsvpE-.js";import"./PrimaryButton-D076RvOo.js";import"./Modal-lthPmoFq.js";import"./InputLabel-p_uEzplv.js";import"./InputError-BY1ILKbO.js";import"./SecondaryButton-DFL_0W38.js";import"./index-BX4cYnC4.js";import"./BaseFormModal-BDiV8hA6.js";import"./TextInput-CUpprBTS.js";import"./SelectDropdown-Jct9JlPq.js";/* empty css                                                                       */import"./debounce-C-hnF4Z3.js";import"./ApplicationLogo-BlwxnmM_.js";import"./createLucideIcon-CdumglnZ.js";import"./plus-DaGPOpMo.js";import"./DangerButton-DzjLaV1C.js";import"./moment-BLMuvzoS.js";import"./taskState-CuaCDlH1.js";import"./NoticeboardModal-CHa5nCCL.js";import"./x-BF9xoPW-.js";function ct(E,P){return i(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m3.75 13.5 10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75Z"})])}function ut(E,P){return i(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 7.5V6.108c0-1.135.845-2.098 1.976-2.192.373-.03.748-.057 1.123-.08M15.75 18H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08M15.75 18.75v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5A3.375 3.375 0 0 0 6.375 7.5H5.25m11.9-3.664A2.251 2.251 0 0 0 15 2.25h-1.5a2.251 2.251 0 0 0-2.15 1.586m5.8 0c.065.21.1.433.1.664v.75h-6V4.5c0-.231.035-.454.1-.664M6.75 7.5H4.875c-.621 0-1.125.504-1.125 1.125v12c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V16.5a9 9 0 0 0-9-9Z"})])}function Be(E,P){return i(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})])}function De(E,P){return i(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"})])}function pt(E,P){return i(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"})])}function gt(E,P){return i(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.05 4.575a1.575 1.575 0 1 0-3.15 0v3m3.15-3v-1.5a1.575 1.575 0 0 1 3.15 0v1.5m-3.15 0 .075 5.925m3.075.75V4.575m0 0a1.575 1.575 0 0 1 3.15 0V15M6.9 7.575a1.575 1.575 0 1 0-3.15 0v8.175a6.75 6.75 0 0 0 6.75 6.75h2.018a5.25 5.25 0 0 0 3.712-1.538l1.732-1.732a5.25 5.25 0 0 0 1.538-3.712l.003-2.024a.668.668 0 0 1 .198-.471 1.575 1.575 0 1 0-2.228-2.228 3.818 3.818 0 0 0-1.12 2.687M6.9 7.575V12m6.27 4.318A4.49 4.49 0 0 1 16.35 15m.002 0h-.002"})])}function le(E,P){return i(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"})])}const mt={class:"relative flex-1"},xt=["onKeydown","placeholder"],_t=["onKeydown","placeholder"],ht={key:2,class:"absolute z-50 bottom-full mb-2 w-64 bg-white border border-gray-200 rounded-2xl shadow-2xl max-h-60 overflow-y-auto p-2"},yt=["onClick"],ft={class:"flex items-center gap-2"},vt={class:"h-6 w-6 rounded-lg bg-indigo-100 flex items-center justify-center text-[10px] text-indigo-600 font-black"},bt={class:"text-[9px] text-gray-400 uppercase font-bold"},Ee={__name:"MentionInput",props:{projectId:{type:Number,required:!0},placeholder:{type:String,default:"Add quick action point..."},modelValue:{type:String,default:""},type:{type:String,default:"input"}},emits:["update:modelValue","submit","user-selected"],setup(E,{expose:P,emit:he}){const Z=E,q=he,U=b(Z.modelValue);Je(()=>Z.modelValue,$=>{U.value=$});const ie=b([]),V=b(!1),I=b([]),T=b(0),F=b(null),A=b(-1),ce=async()=>{try{const $=await window.axios.get(`/api/projects/${Z.projectId}/sections/meeting-attendees`),S=($.data.users||[]).map(M=>({...M,memberType:"User"})),g=($.data.clients||[]).map(M=>({...M,memberType:"Client"}));ie.value=[...S,...g]}catch($){console.error("Failed to fetch project members for mentions:",$)}},oe=$=>{q("update:modelValue",U.value);const S=$.target.selectionStart,g=U.value.slice(0,S),M=g.lastIndexOf("@");if(M!==-1&&(M===0||[" ",`
`,"\r"].includes(g[M-1]))){const J=g.slice(M+1);A.value=M,I.value=ie.value.filter(R=>R.name.toLowerCase().includes(J.toLowerCase())),I.value.length>0?(V.value=!0,T.value=0):V.value=!1}else V.value=!1},re=$=>{const S=U.value.slice(0,A.value),g=U.value.slice(F.value.selectionStart);U.value=`${S}@${$.name} ${g}`,V.value=!1,q("update:modelValue",U.value),q("user-selected",$),Ye(()=>{F.value.focus()})},de=()=>{V.value&&(T.value=(T.value+1)%I.value.length)},ue=()=>{V.value&&(T.value=(T.value-1+I.value.length)%I.value.length)},z=$=>{V.value&&I.value.length>0?($.preventDefault(),re(I.value[T.value])):Z.type==="input"&&($.preventDefault(),q("submit"))};return Fe(()=>{ce()}),P({focus:()=>{var $;return($=F.value)==null?void 0:$.focus()},clear:()=>{U.value="",q("update:modelValue","")}}),($,S)=>(i(),d("div",mt,[E.type==="textarea"?L((i(),d("textarea",{key:0,ref_key:"inputRef",ref:F,"onUpdate:modelValue":S[0]||(S[0]=g=>U.value=g),onInput:oe,onKeydown:[ae(xe(de,["prevent"]),["down"]),ae(xe(ue,["prevent"]),["up"]),ae(z,["enter"]),S[1]||(S[1]=ae(g=>V.value=!1,["esc"]))],onBlur:S[2]||(S[2]=g=>$.setTimeout(()=>V.value=!1,200)),placeholder:E.placeholder,class:"w-full rounded-2xl border-indigo-100 focus:ring-indigo-500 text-sm p-4 min-h-[120px] placeholder:text-indigo-200"},null,40,xt)),[[_e,U.value]]):L((i(),d("input",{key:1,ref_key:"inputRef",ref:F,type:"text","onUpdate:modelValue":S[3]||(S[3]=g=>U.value=g),onInput:oe,onKeydown:[ae(xe(de,["prevent"]),["down"]),ae(xe(ue,["prevent"]),["up"]),ae(xe(z,["prevent"]),["enter"]),S[4]||(S[4]=ae(g=>V.value=!1,["esc"]))],onBlur:S[5]||(S[5]=g=>$.setTimeout(()=>V.value=!1,200)),placeholder:E.placeholder,class:"w-full rounded-xl border-gray-200 text-sm focus:ring-indigo-500 font-medium h-10 px-4"},null,40,_t)),[[_e,U.value]]),V.value&&I.value.length>0?(i(),d("div",ht,[S[6]||(S[6]=e("div",{class:"px-3 py-2 text-[10px] font-black text-gray-400 uppercase tracking-widest border-b border-gray-50 mb-1"},"Project Members",-1)),(i(!0),d(k,null,D(I.value,(g,M)=>{var J,R;return i(),d("div",{key:g.id,onClick:pe=>re(g),class:K([{"bg-indigo-50 text-indigo-700":T.value===M,"text-gray-700":T.value!==M},"px-3 py-2 text-xs font-bold cursor-pointer rounded-xl hover:bg-gray-50 flex items-center justify-between transition-colors"])},[e("div",ft,[e("div",vt,l(g.name.substring(0,2).toUpperCase()),1),e("span",null,l(g.name),1)]),e("span",bt,l(g.memberType==="Client"?"Client":((J=g.pivot)==null?void 0:J.role)||((R=g.role)==null?void 0:R.name)||"User"),1)],10,yt)}),128))])):_("",!0)]))}},wt={class:"flex justify-between items-center print:hidden"},kt={class:"flex gap-3"},Dt=["disabled"],Ct={class:"py-6 bg-gray-50 min-h-screen print:bg-white print:py-0"},$t={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 space-y-6"},St={class:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6 print:hidden"},At={class:"grid grid-cols-1 md:grid-cols-5 gap-6 items-end"},Mt={class:"md:col-span-2"},Tt={class:"text-[10px] font-black text-indigo-600 uppercase mb-2 block flex items-center gap-1"},Vt={class:"mt-6 flex bg-gray-100 p-1 rounded-xl w-full max-w-md mx-auto"},Ut={class:"animate-in fade-in duration-500 space-y-6"},Nt={class:"flex items-center justify-between px-2"},Pt={class:"text-lg font-black text-gray-800 flex items-center gap-2"},It={class:"text-xs font-bold text-gray-400 uppercase tracking-widest"},Ht={key:0,class:"bg-white p-16 rounded-[2.5rem] border-2 border-dashed border-gray-200 text-center"},Lt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Bt={class:"p-6 bg-gray-50/50 border-b border-gray-100 flex items-center gap-4"},Et={class:"h-12 w-12 rounded-2xl bg-indigo-600 flex items-center justify-center text-white font-black text-lg shadow-sm"},Ft={class:"font-black text-gray-900 leading-tight text-lg"},Rt={class:"p-6 space-y-6 flex-1"},Ot={key:0},Kt={class:"text-[10px] font-black text-indigo-600 uppercase tracking-widest mb-3 flex items-center gap-1"},Zt=["innerHTML"],qt={key:1},zt={class:"text-[10px] font-black text-orange-500 uppercase tracking-widest mb-3 flex items-center gap-1"},Jt={class:"text-[9px] font-black mt-2 text-orange-400 uppercase"},Yt={key:2},Gt={class:"text-[10px] font-black text-green-600 uppercase tracking-widest mb-3 flex items-center gap-1"},Qt={class:"space-y-2"},Wt=["onClick"],Xt={class:"text-xs font-bold text-gray-800"},jt={key:0,class:"text-[10px] text-gray-400 line-clamp-1 mb-1"},es={class:"text-[9px] text-gray-400 font-bold uppercase tracking-tight"},ts={key:3},ss={class:"text-[10px] font-black text-blue-500 uppercase tracking-widest mb-3 flex items-center gap-1"},as=["innerHTML"],ns={class:"text-[9px] text-blue-400 font-black uppercase"},os={key:4},is={class:"text-[10px] font-black text-purple-600 uppercase tracking-widest mb-3 flex items-center gap-1"},rs={class:"text-xs font-bold text-gray-800 truncate"},ds={key:0,class:"text-[10px] text-purple-600 italic mt-1 font-medium line-clamp-2"},ls={class:"text-[9px] text-purple-400 font-black uppercase mt-1"},cs={class:"animate-in fade-in duration-500 space-y-6"},us=["onClick"],ps={class:"flex items-center space-x-5"},gs={class:"h-14 w-14 rounded-2xl bg-indigo-50 flex items-center justify-center text-indigo-600 shadow-inner"},ms={class:"font-black text-xl text-gray-900 leading-none"},xs={class:"flex items-center gap-3 mt-2"},_s={class:"px-2 py-0.5 rounded-lg text-[10px] font-black uppercase tracking-widest bg-gray-100 text-gray-600"},hs={key:0,class:"flex items-center text-[10px] text-indigo-500 font-bold uppercase"},ys={class:"flex items-center gap-3"},fs=["onClick"],vs={class:"border-t border-gray-100 bg-gray-50/10"},bs={class:"px-8 py-4 bg-white border-b border-gray-100 flex flex-col md:flex-row items-center justify-between gap-4"},ws={class:"flex items-center gap-3 w-full md:w-auto"},ks=["onUpdate:modelValue"],Ds=["value"],Cs={class:"flex space-x-1 p-1 bg-gray-100 rounded-xl overflow-x-auto scrollbar-hide"},$s=["onClick"],Ss={key:0,class:"ml-1 px-1.5 py-0.5 bg-indigo-500 text-white rounded-md text-[8px]"},As={class:"p-8"},Ms={class:"space-y-6"},Ts={class:"space-y-4"},Vs={class:"flex items-center justify-between"},Us={class:"text-[10px] font-black tracking-widest text-indigo-600 uppercase flex items-center gap-1"},Ns={class:"flex gap-2"},Ps=["onClick","disabled"],Is={key:0,class:"space-y-2"},Hs=["checked","onChange"],Ls={class:"flex-1 min-w-0"},Bs={key:0,class:"text-[9px] font-black text-indigo-500 uppercase flex items-center gap-1 mt-0.5"},Es=["onClick"],Fs={key:1,class:"mt-4 pt-4 border-t border-dashed border-gray-100"},Rs={class:"space-y-2 opacity-75"},Os=["checked","onChange"],Ks={class:"flex-1 min-w-0"},Zs={class:"text-xs font-medium text-gray-600 block truncate"},qs={key:0,class:"text-[8px] font-black text-indigo-400 uppercase flex items-center gap-0.5 mt-0.5"},zs={class:"text-[8px] font-black text-gray-300 ml-auto uppercase"},Js={key:0,class:"space-y-6"},Ys={key:0,class:"space-y-3"},Gs={class:"text-[10px] font-black tracking-widest text-red-500 uppercase flex items-center gap-1"},Qs=["onClick"],Ws={class:"flex justify-between items-start"},Xs={class:"font-bold text-gray-900"},js={key:0,class:"mt-2 text-[11px] text-gray-500 line-clamp-2"},ea={class:"text-[10px] font-bold text-gray-500 flex items-center gap-1"},ta={key:1,class:"space-y-3"},sa={class:"text-[10px] font-black tracking-widest text-indigo-500 uppercase flex items-center gap-1"},aa=["onClick"],na={class:"flex justify-between items-start"},oa={class:"flex-1"},ia={class:"font-bold text-gray-900"},ra={key:0,class:"mt-2 text-[11px] text-gray-500 line-clamp-2"},da={key:1,class:"mt-3 p-2 bg-white/50 rounded-lg border border-indigo-50 text-[10px] italic text-gray-600"},la={class:"text-[10px] font-bold text-gray-500 flex items-center gap-1 ml-4"},ca={key:2,class:"space-y-3"},ua={class:"text-[10px] font-black tracking-widest text-green-500 uppercase flex items-center gap-1"},pa=["onClick"],ga={class:"flex items-start gap-3"},ma={class:"flex-1"},xa={class:"font-bold text-gray-900 text-sm"},_a={key:0,class:"mt-1 text-[11px] text-gray-500"},ha={class:"ml-auto text-[10px] text-gray-400 font-bold uppercase"},ya={key:3,class:"space-y-3"},fa={class:"text-[10px] font-black tracking-widest text-blue-500 uppercase flex items-center gap-1"},va={class:"text-[9px] font-black text-gray-400 uppercase tracking-widest mb-2 block"},ba=["innerHTML"],wa={class:"flex items-center gap-2 text-[10px] font-bold text-gray-500"},ka={key:4,class:"space-y-3"},Da={class:"text-[10px] font-black tracking-widest text-purple-500 uppercase flex items-center gap-1"},Ca={class:"flex items-center justify-between mb-2"},$a={class:"text-sm font-bold text-gray-800"},Sa={class:"text-[10px] text-gray-500 font-bold uppercase"},Aa={key:0,class:"p-3 bg-white/60 rounded-lg border border-purple-50 text-[11px] text-purple-700 font-medium"},Ma={key:1,class:"text-center py-8"},Ta={class:"space-y-8"},Va={key:0,class:"space-y-4"},Ua={class:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-2 border-b border-gray-100 pb-2"},Na=["onClick"],Pa={class:"flex justify-between items-start"},Ia={class:"font-black text-gray-900 group-hover:text-indigo-600 transition"},Ha={class:"flex items-center gap-4 mt-2"},La={class:"text-[10px] font-bold text-gray-400 flex items-center gap-1 uppercase tracking-tighter"},Ba={class:"text-[10px] font-bold text-gray-400 flex items-center gap-1 uppercase tracking-tighter"},Ea={class:"bg-amber-50 text-amber-600 px-2 py-1 rounded-lg text-[10px] font-black uppercase"},Fa={key:0,class:"mt-4 p-4 bg-gray-50 rounded-2xl text-xs text-gray-600 whitespace-pre-wrap border border-gray-100"},Ra={key:0,class:"text-center text-gray-400 text-xs italic"},Oa={class:"space-y-8"},Ka={key:0,class:"space-y-4"},Za={class:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-2 border-b border-gray-100 pb-2"},qa={class:"flex items-start gap-4"},za={class:"font-black text-gray-900"},Ja={class:"text-[10px] font-bold text-gray-400 mt-1 uppercase tracking-tighter"},Ya={key:0,class:"mt-3 p-3 bg-gray-50 rounded-xl text-xs text-gray-500 border border-gray-100"},Ga={key:0,class:"text-center text-gray-400 text-xs italic"},Qa={class:"space-y-8"},Wa={key:0},Xa={class:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-4 border-b border-gray-100 pb-2"},ja={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},en={key:0,class:"absolute -top-2 -right-2 bg-indigo-600 text-white text-[8px] font-black uppercase px-2 py-1 rounded-full shadow-lg"},tn=["innerHTML"],sn={class:"mt-auto pt-4 border-t border-gray-50 flex items-center justify-between"},an={class:"flex items-center gap-2"},nn={class:"h-8 w-8 rounded-xl bg-gray-100 flex items-center justify-center text-[10px] font-black"},on={class:"text-xs font-bold text-gray-600"},rn={class:"text-[10px] text-gray-400 font-bold"},dn={key:0,class:"mt-8 bg-indigo-50/30 p-8 rounded-[2rem] border border-indigo-100"},ln={class:"text-sm font-black text-indigo-900 mb-4 flex items-center gap-2"},cn={class:"flex justify-end mt-4"},un=["onClick","disabled"],pn={class:"space-y-8"},gn={key:0,class:"space-y-6"},mn={class:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-2 border-b border-gray-100 pb-2"},xn={class:"flex flex-col md:flex-row justify-between md:items-center gap-4 mb-6"},_n={class:"flex items-center gap-4"},hn={class:"font-black text-gray-900 text-lg leading-none"},yn={class:"text-[10px] font-bold text-gray-400 uppercase mt-2 tracking-widest"},fn={class:"text-[11px] font-bold text-gray-400 bg-gray-50 px-3 py-1.5 rounded-xl"},vn={key:0,class:"space-y-4"},bn={class:"flex items-center gap-2 mb-3 text-purple-600"},wn={class:"text-sm text-gray-700 leading-relaxed font-medium"},kn={__name:"ProjectIndex",setup(E){const P=b([]),he=b([]),Z=b(!1),q=b(!1),U=b({}),ie=b([]),V=b(""),I=b(""),T=b(""),F=b({}),A=b({}),ce=b({}),oe=b(!1),re=b(null),de=b(null),ue=b([]),z=b("summary"),$=r=>{F.value[r]=!F.value[r]},S=(r,s)=>{A.value[r]=s},g=r=>{if(!T.value||!r)return!1;const s=T.value.split("T")[0],t=r.split("T")[0];return s===t},M=r=>{if(!T.value||!r.due_date)return!1;const s=T.value.split("T")[0];return r.due_date===s},J=r=>r?r.replace(/\*\*(.*?)\*\*/g,'<strong class="font-black text-gray-900">$1</strong>').replace(/\n/g,"<br/>"):"",R=b({}),pe=b({}),ge=b({}),ye=b({}),ve=b({}),Ce=async r=>{var t;const s=ge.value[r.id];if(s){ye.value[r.id]=!0;try{const u=((t=r.data)==null?void 0:t.action_points)||[],c=ve.value[r.id],w={id:Date.now(),content:s,date:T.value,user_id:c?c.id:null,user_name:c?c.name:null,done:!1,created_at:new Date().toISOString()},h=[...u,w];await window.axios.put(`/api/projects/${r.id}/update-data`,{key:"action_points",value:h}),ge.value[r.id]="",ve.value[r.id]=null,r.data={...r.data||{},action_points:h}}catch(u){console.error(u)}finally{ye.value[r.id]=!1}}},Re=(r,s)=>{ve.value[r.id]=s},$e=async(r,s)=>{var t;try{const u=[...((t=r.data)==null?void 0:t.action_points)||[]],c=u.findIndex(w=>w.id===s);if(c===-1)return;u[c].done=!u[c].done,await window.axios.put(`/api/projects/${r.id}/update-data`,{key:"action_points",value:u}),r.data.action_points=u}catch(u){console.error(u)}},Oe=async(r,s)=>{var t;if(confirm("Are you sure you want to delete this action point?"))try{const u=(((t=r.data)==null?void 0:t.action_points)||[]).filter(c=>c.id!==s);await window.axios.put(`/api/projects/${r.id}/update-data`,{key:"action_points",value:u}),r.data.action_points=u}catch(u){console.error(u)}},Ke=async r=>{if(R.value[r]){pe.value[r]=!0;try{await window.axios.post(`/api/projects/${r}/notes`,{notes:[{content:R.value[r]}],type:"daily_summary"}),R.value[r]="",be()}catch(s){console.error(s)}finally{pe.value[r]=!1}}},Se=Ie(()=>{const r={},s=t=>{const u=t||"Unassigned";return r[u]||(r[u]={tasksDone:[],standups:[],meetings:[],emails:[],notes:[],dailySummaries:[]}),r[u]};return P.value.forEach(t=>{var u,c,w;(u=t.tasks)==null||u.forEach(h=>{g(h.updated_at)&&h.status==="Done"&&s(h.assigned_to).tasksDone.push({...h,projectName:t.name})}),(c=t.project_notes)==null||c.forEach(h=>{if(g(h.created_at)){const B=s(h.creator_name);h.type==="standup"?B.standups.push({...h,projectName:t.name}):h.type==="meeting_minutes"?B.meetings.push({...h,projectName:t.name}):h.type==="daily_summary"?B.dailySummaries.push({...h,projectName:t.name}):B.notes.push({...h,projectName:t.name})}}),(w=t.emails)==null||w.forEach(h=>{g(h.created_at)&&s(h.sender).emails.push({...h,projectName:t.name})})}),r}),Ae=Ie(()=>Object.keys(Se.value).length),Ze=r=>{var t,u,c;const s=new Set;return(t=r.tasks)==null||t.forEach(w=>w.assigned_to&&s.add(w.assigned_to)),(u=r.project_notes)==null||u.forEach(w=>w.creator_name&&s.add(w.creator_name)),(c=r.emails)==null||c.forEach(w=>w.sender&&s.add(w.sender)),Array.from(s).sort()},G=(r,s,t)=>{const u=ce.value[s];return!u||u==="all"?r:r.filter(c=>c[t]===u)},me=async r=>{if(!(!r||!r.id)){re.value=r.id,de.value=r.project_id||0;try{const s=await window.axios.get(`/api/projects/${de.value}/sections/clients-users`);ue.value=s.data.users||[]}catch(s){console.error(s)}oe.value=!0}},be=async()=>{Z.value=!0;try{const r=await window.axios.get("/api/productivity/project-report",{params:{project_ids:ie.value.join(","),date_start:V.value,date_end:I.value}});P.value=r.data.reportData,he.value=r.data.projects,P.value.forEach(s=>{s.has_activity&&(F.value[s.id]=!0,A.value[s.id]="today")})}catch(r){console.error(r)}finally{Z.value=!1}},f=(r,s)=>r?r.filter(t=>g(t[s])):[],N=(r,s)=>r?r.filter(t=>!g(t[s])):[],qe=()=>{const r=P.value.map(s=>{var t,u,c,w,h,B,Q,W,X,j,ee,te,se;return{projectName:s.name,status:s.status,highlightedActivity:{notes:f((t=s.project_notes)==null?void 0:t.filter(o=>!o.type||o.type==="note"),"created_at").map(o=>({author:o.creator_name,content:o.content,date:o.created_at})),standups:f((u=s.project_notes)==null?void 0:u.filter(o=>o.type==="standup"),"created_at").map(o=>({author:o.creator_name,content:o.content,date:o.created_at})),meetingMinutes:f((c=s.project_notes)==null?void 0:c.filter(o=>o.type==="meeting_minutes"),"created_at").map(o=>({author:o.creator_name,content:o.content,date:o.created_at})),dailySummary:f((w=s.project_notes)==null?void 0:w.filter(o=>o.type==="daily_summary"),"created_at").map(o=>({author:o.creator_name,content:o.content,date:o.created_at})),tasksTodo:f((h=s.tasks)==null?void 0:h.filter(o=>o.status!=="Done"),"updated_at").map(o=>{var n,y;return{name:o.name,description:o.description,assignee:o.assigned_to,status:o.status,latestNotes:(y=(n=o.notes)==null?void 0:n[0])==null?void 0:y.content}}),tasksDone:f((B=s.tasks)==null?void 0:B.filter(o=>o.status==="Done"),"updated_at").map(o=>{var n,y;return{name:o.name,description:o.description,assignee:o.assigned_to,finishedAt:o.updated_at,latestNotes:(y=(n=o.notes)==null?void 0:n[0])==null?void 0:y.content}}),tasksDueToday:(Q=s.tasks)==null?void 0:Q.filter(o=>M(o)).map(o=>({name:o.name,description:o.description,assignee:o.assigned_to,status:o.status})),communications:f(s.emails,"created_at").map(o=>{var n,y;return{subject:o.subject,sender:o.sender,date:o.created_at,aiContext:(y=(n=o.contexts)==null?void 0:n[0])==null?void 0:y.summary}}),actionPoints:(((W=s.data)==null?void 0:W.action_points)||[]).filter(o=>g(o.date)).map(o=>({content:o.content,done:o.done}))},archivedActivity:{notes:N((X=s.project_notes)==null?void 0:X.filter(o=>!o.type||o.type==="note"),"created_at").map(o=>({author:o.creator_name,content:o.content,date:o.created_at})),standups:N((j=s.project_notes)==null?void 0:j.filter(o=>o.type==="standup"),"created_at").map(o=>({author:o.creator_name,content:o.content,date:o.created_at})),meetingMinutes:N((ee=s.project_notes)==null?void 0:ee.filter(o=>o.type==="meeting_minutes"),"created_at").map(o=>({author:o.creator_name,content:o.content,date:o.created_at})),tasksTodo:N((te=s.tasks)==null?void 0:te.filter(o=>o.status!=="Done"),"updated_at").map(o=>{var n,y;return{name:o.name,description:o.description,assignee:o.assigned_to,status:o.status,latestNotes:(y=(n=o.notes)==null?void 0:n[0])==null?void 0:y.content}}),tasksDone:N((se=s.tasks)==null?void 0:se.filter(o=>o.status==="Done"),"updated_at").map(o=>{var n,y;return{name:o.name,description:o.description,assignee:o.assigned_to,finishedAt:o.updated_at,latestNotes:(y=(n=o.notes)==null?void 0:n[0])==null?void 0:y.content}}),communications:N(s.emails,"created_at").map(o=>{var n,y;return{subject:o.subject,sender:o.sender,date:o.created_at,aiContext:(y=(n=o.contexts)==null?void 0:n[0])==null?void 0:y.summary}})}}});navigator.clipboard.writeText(JSON.stringify(r,null,2)).then(()=>{q.value=!0,setTimeout(()=>q.value=!1,3e3)})},ze=(r,s)=>{var u,c,w,h,B,Q,W,X,j,ee,te,se,o;s&&s.stopPropagation();const t={projectName:r.name,status:r.status,highlightedActivity:{notes:f((u=r.project_notes)==null?void 0:u.filter(n=>!n.type||n.type==="note"),"created_at").map(n=>({author:n.creator_name,content:n.content,date:n.created_at})),standups:f((c=r.project_notes)==null?void 0:c.filter(n=>n.type==="standup"),"created_at").map(n=>({author:n.creator_name,content:n.content,date:n.created_at})),meetingMinutes:f((w=r.project_notes)==null?void 0:w.filter(n=>n.type==="meeting_minutes"),"created_at").map(n=>({author:n.creator_name,content:n.content,date:n.created_at})),dailySummary:f((h=r.project_notes)==null?void 0:h.filter(n=>n.type==="daily_summary"),"created_at").map(n=>({author:n.creator_name,content:n.content,date:n.created_at})),tasksTodo:f((B=r.tasks)==null?void 0:B.filter(n=>n.status!=="Done"),"updated_at").map(n=>{var y,H;return{name:n.name,description:n.description,assignee:n.assigned_to,latestNotes:(H=(y=n.notes)==null?void 0:y[0])==null?void 0:H.content}}),tasksDone:f((Q=r.tasks)==null?void 0:Q.filter(n=>n.status==="Done"),"updated_at").map(n=>{var y,H;return{name:n.name,description:n.description,assignee:n.assigned_to,latestNotes:(H=(y=n.notes)==null?void 0:y[0])==null?void 0:H.content}}),tasksDueToday:(W=r.tasks)==null?void 0:W.filter(n=>M(n)).map(n=>({name:n.name,description:n.description,assignee:n.assigned_to,status:n.status})),communications:f(r.emails,"created_at").map(n=>{var y,H;return{subject:n.subject,aiContext:(H=(y=n.contexts)==null?void 0:y[0])==null?void 0:H.summary}}),actionPoints:(((X=r.data)==null?void 0:X.action_points)||[]).filter(n=>g(n.date)).map(n=>({content:n.content,done:n.done}))},archivedActivity:{notes:N((j=r.project_notes)==null?void 0:j.filter(n=>!n.type||n.type==="note"),"created_at").map(n=>({author:n.creator_name,content:n.content,date:n.created_at})),standups:N((ee=r.project_notes)==null?void 0:ee.filter(n=>n.type==="standup"),"created_at").map(n=>({author:n.creator_name,content:n.content,date:n.created_at})),meetingMinutes:N((te=r.project_notes)==null?void 0:te.filter(n=>n.type==="meeting_minutes"),"created_at").map(n=>({author:n.creator_name,content:n.content,date:n.created_at})),tasksTodo:N((se=r.tasks)==null?void 0:se.filter(n=>n.status!=="Done"),"updated_at").map(n=>({name:n.name,description:n.description,assignee:n.assigned_to})),tasksDone:N((o=r.tasks)==null?void 0:o.filter(n=>n.status==="Done"),"updated_at").map(n=>({name:n.name,description:n.description,assignee:n.assigned_to})),communications:N(r.emails,"created_at").map(n=>{var y,H;return{subject:n.subject,aiContext:(H=(y=n.contexts)==null?void 0:y[0])==null?void 0:H.summary}})}};navigator.clipboard.writeText(JSON.stringify(t,null,2)).then(()=>{U.value[r.id]=!0,setTimeout(()=>U.value[r.id]=!1,3e3)})},we=r=>r?new Date(r).toLocaleDateString("en-AU",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"}):"";return Fe(()=>{const r=new Date;T.value=r.toISOString().split("T")[0];const s=new Date(r.getFullYear(),r.getMonth(),1);V.value=s.toISOString().split("T")[0],I.value=r.toISOString().split("T")[0],be()}),(r,s)=>(i(),d(k,null,[p(x(Ge),{title:"Morning Briefing Report"}),p(je,null,{header:ke(()=>[e("div",wt,[s[11]||(s[11]=e("div",null,[e("h2",{class:"font-black text-2xl text-gray-900 tracking-tight"},"Morning Briefing"),e("p",{class:"text-sm text-gray-500 font-medium"},"Daily action point & productivity generator")],-1)),e("div",kt,[e("button",{onClick:qe,class:"flex items-center px-4 py-2 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-xl text-sm font-bold hover:shadow-lg transition"},[p(x(Y),{class:"h-4 w-4 mr-2"}),v(" "+l(q.value?"Copied JSON!":"AI Export (Global)"),1)]),e("button",{onClick:be,disabled:Z.value,class:"flex items-center px-4 py-2 bg-indigo-600 text-white rounded-xl text-sm font-bold hover:bg-indigo-700 transition disabled:opacity-50"},[p(x(Le),{class:K(["h-4 w-4 mr-2",{"animate-spin":Z.value}])},null,8,["class"]),s[9]||(s[9]=v(" Refresh ",-1))],8,Dt),e("button",{onClick:s[0]||(s[0]=t=>r.window.print()),class:"flex items-center px-4 py-2 bg-white border border-gray-200 rounded-xl text-sm font-bold text-gray-700 hover:bg-gray-50 transition"},[p(x(it),{class:"h-4 w-4 mr-2"}),s[10]||(s[10]=v(" PDF ",-1))])])])]),default:ke(()=>[e("div",Ct,[e("div",$t,[e("div",St,[e("div",At,[e("div",Mt,[s[12]||(s[12]=e("label",{class:"text-[10px] font-bold text-gray-400 uppercase mb-2 block tracking-widest"},"Selected Projects",-1)),p(et,{modelValue:ie.value,"onUpdate:modelValue":s[1]||(s[1]=t=>ie.value=t),options:he.value,"is-multi":!0,placeholder:"Analyze All Projects"},null,8,["modelValue","options"])]),e("div",null,[s[13]||(s[13]=e("label",{class:"text-[10px] font-bold text-gray-400 uppercase mb-2 block tracking-widest"},"Range Start",-1)),L(e("input",{type:"date","onUpdate:modelValue":s[2]||(s[2]=t=>V.value=t),class:"w-full rounded-xl border-gray-200 text-sm focus:ring-indigo-500 font-bold text-gray-700"},null,512),[[_e,V.value]])]),e("div",null,[s[14]||(s[14]=e("label",{class:"text-[10px] font-bold text-gray-400 uppercase mb-2 block tracking-widest"},"Range End",-1)),L(e("input",{type:"date","onUpdate:modelValue":s[3]||(s[3]=t=>I.value=t),class:"w-full rounded-xl border-gray-200 text-sm focus:ring-indigo-500 font-bold text-gray-700"},null,512),[[_e,I.value]])]),e("div",null,[e("label",Tt,[p(x(Y),{class:"h-3 w-3"}),s[15]||(s[15]=v(" Focus Date",-1))]),L(e("input",{type:"date","onUpdate:modelValue":s[4]||(s[4]=t=>T.value=t),class:"w-full rounded-xl border-indigo-200 bg-indigo-50 text-indigo-900 font-bold text-sm focus:ring-indigo-500"},null,512),[[_e,T.value]])])]),e("div",Vt,[e("button",{onClick:s[5]||(s[5]=t=>z.value="summary"),class:K([z.value==="summary"?"bg-white shadow-sm text-indigo-600":"text-gray-500","flex-1 py-1.5 rounded-lg text-xs font-black uppercase transition"])},"User Summary",2),e("button",{onClick:s[6]||(s[6]=t=>z.value="projects"),class:K([z.value==="projects"?"bg-white shadow-sm text-indigo-600":"text-gray-500","flex-1 py-1.5 rounded-lg text-xs font-black uppercase transition"])},"Portfolio View",2)])]),L(e("section",Ut,[e("div",Nt,[e("h3",Pt,[p(x(ct),{class:"h-5 w-5 text-amber-500"}),s[16]||(s[16]=v(" Daily Activity Stream",-1))]),e("span",It,l(Ae.value)+" Contributors on "+l(T.value),1)]),Ae.value===0?(i(),d("div",Ht,[p(x(at),{class:"h-12 w-12 text-gray-300 mx-auto mb-4"}),s[17]||(s[17]=e("p",{class:"text-gray-600 font-bold text-xl"},"No specific logs found for this focus date.",-1)),s[18]||(s[18]=e("p",{class:"text-sm text-gray-400 mt-1"},"Try selecting a different date or checking the detailed portfolio view.",-1))])):_("",!0),e("div",Lt,[(i(!0),d(k,null,D(Se.value,(t,u)=>(i(),d("div",{key:u,class:"bg-white rounded-[2rem] shadow-sm border border-gray-100 overflow-hidden flex flex-col transition hover:shadow-lg"},[e("div",Bt,[e("div",Et,l(u.substring(0,2).toUpperCase()),1),e("div",null,[e("h4",Ft,l(u),1),s[19]||(s[19]=e("p",{class:"text-[10px] text-indigo-500 font-bold uppercase tracking-tighter"},"Daily Impact",-1))])]),e("div",Rt,[t.dailySummaries.length>0?(i(),d("div",Ot,[e("h5",Kt,[p(x(Y),{class:"h-3 w-3"}),s[20]||(s[20]=v(" Daily Impact Summary",-1))]),(i(!0),d(k,null,D(t.dailySummaries,c=>(i(),d("div",{key:c.id,class:"text-xs text-indigo-700 bg-indigo-50/50 p-4 rounded-2xl border border-indigo-100 mb-2 font-medium",innerHTML:J(c.content)},null,8,Zt))),128))])):_("",!0),t.standups.length>0?(i(),d("div",qt,[e("h5",zt,[p(x(gt),{class:"h-3 w-3"}),s[21]||(s[21]=v(" Standup Context",-1))]),(i(!0),d(k,null,D(t.standups,c=>(i(),d("div",{key:c.id,class:"text-xs text-gray-600 bg-orange-50/50 p-4 rounded-2xl border border-orange-100 mb-2 italic"},[v(' "'+l(c.content)+'" ',1),e("p",Jt,l(c.projectName),1)]))),128))])):_("",!0),t.tasksDone.length>0?(i(),d("div",Yt,[e("h5",Gt,[p(x(fe),{class:"h-3 w-3"}),s[22]||(s[22]=v(" Accomplishments",-1))]),e("ul",Qt,[(i(!0),d(k,null,D(t.tasksDone,c=>(i(),d("li",{key:c.id,onClick:w=>me(c),class:"p-3 bg-green-50/30 rounded-xl border border-green-100 cursor-pointer hover:bg-white transition"},[e("p",Xt,l(c.name),1),c.description?(i(),d("p",jt,l(c.description),1)):_("",!0),e("p",es,l(c.projectName),1)],8,Wt))),128))])])):_("",!0),t.notes.length>0?(i(),d("div",ts,[e("h5",ss,[p(x(Be),{class:"h-3 w-3"}),s[23]||(s[23]=v(" Field Notes & Updates",-1))]),(i(!0),d(k,null,D(t.notes,c=>(i(),d("div",{key:c.id,class:"p-3 bg-blue-50/30 rounded-xl border border-blue-100 mb-2"},[e("div",{class:"text-xs text-gray-700 mb-2",innerHTML:J(c.content)},null,8,as),e("p",ns,l(c.projectName),1)]))),128))])):_("",!0),t.emails.length>0?(i(),d("div",os,[e("h5",is,[p(x(De),{class:"h-3 w-3"}),s[24]||(s[24]=v(" Communications",-1))]),(i(!0),d(k,null,D(t.emails,c=>{var w,h;return i(),d("div",{key:c.id,class:"p-3 bg-purple-50/30 rounded-xl border border-purple-100 mb-2"},[e("p",rs,l(c.subject),1),(h=(w=c.contexts)==null?void 0:w[0])!=null&&h.summary?(i(),d("p",ds,"AI Context: "+l(c.contexts[0].summary),1)):_("",!0),e("p",ls,l(c.projectName),1)])}),128))])):_("",!0)])]))),128))])],512),[[ne,z.value==="summary"]]),L(e("section",cs,[s[39]||(s[39]=e("div",{class:"flex items-center justify-between px-2"},[e("h3",{class:"text-sm font-black text-gray-400 uppercase tracking-[0.2em]"},"Portfolio Deep Dive")],-1)),(i(!0),d(k,null,D(P.value,t=>{var u,c,w,h,B,Q,W,X,j,ee,te,se,o,n,y,H,Me,Te,Ve,Ue,Ne;return i(),d("div",{key:t.id,class:"bg-white rounded-[2rem] border border-gray-200 shadow-sm overflow-hidden mb-8 transition hover:shadow-md"},[e("div",{onClick:a=>$(t.id),class:"p-6 flex flex-col md:flex-row md:items-center justify-between cursor-pointer hover:bg-gray-50 transition gap-4"},[e("div",ps,[e("div",gs,[p(x(nt),{class:"h-8 w-8"})]),e("div",null,[e("h4",ms,l(t.name),1),e("div",xs,[e("span",_s,l(t.status),1),t.has_activity?(i(),d("span",hs,s[25]||(s[25]=[e("div",{class:"h-1.5 w-1.5 bg-indigo-500 rounded-full mr-1.5 animate-pulse"},null,-1),v(" Recent Activity",-1)]))):_("",!0)])])]),e("div",ys,[e("button",{onClick:a=>ze(t,a),class:"px-4 py-2 border border-indigo-200 text-indigo-600 rounded-xl text-xs font-bold hover:bg-indigo-50 transition flex items-center gap-2"},[p(x(Y),{class:"h-3.5 w-3.5"}),v(" "+l(U.value[t.id]?"Copied!":"Export JSON"),1)],8,fs),(i(),He(Qe(F.value[t.id]?x(ot):x(rt)),{class:"h-6 w-6 text-gray-300"}))])],8,us),L(e("div",vs,[e("div",bs,[e("div",ws,[p(x(pt),{class:"h-4 w-4 text-gray-400"}),L(e("select",{"onUpdate:modelValue":a=>ce.value[t.id]=a,class:"rounded-xl border-gray-200 text-xs font-bold text-gray-600 focus:ring-indigo-500 py-1.5 pr-8 pl-3"},[s[26]||(s[26]=e("option",{value:"all"},"Show All Contributors",-1)),(i(!0),d(k,null,D(Ze(t),a=>(i(),d("option",{key:a,value:a},l(a),9,Ds))),128))],8,ks),[[We,ce.value[t.id]]])]),e("nav",Cs,[(i(),d(k,null,D(["today","todo","done","notes","standups","meetings","summary","emails"],a=>{var C,m;return e("button",{key:a,onClick:O=>S(t.id,a),class:K([A.value[t.id]===a?"bg-white shadow-sm text-indigo-600":"text-gray-500","py-1.5 px-4 rounded-lg text-[10px] font-black uppercase transition whitespace-nowrap"])},[v(l(a)+" ",1),a==="today"&&((C=t.tasks)!=null&&C.filter(O=>M(O)).length)?(i(),d("span",Ss,l((m=t.tasks)==null?void 0:m.filter(O=>M(O)).length),1)):_("",!0)],10,$s)}),64))])]),e("div",As,[L(e("div",Ms,[e("div",Ts,[e("div",Vs,[e("h5",Us,[p(x(ut),{class:"h-3 w-3"}),s[27]||(s[27]=v(" Quick Action Points",-1))]),s[28]||(s[28]=e("span",{class:"text-[9px] font-bold text-gray-400"},"Save notes for AI task creation",-1))]),e("div",Ns,[p(Ee,{"project-id":t.id,modelValue:ge.value[t.id],"onUpdate:modelValue":a=>ge.value[t.id]=a,onSubmit:a=>Ce(t),onUserSelected:a=>Re(t,a),placeholder:"Add quick action point (type @ for users)..."},null,8,["project-id","modelValue","onUpdate:modelValue","onSubmit","onUserSelected"]),e("button",{onClick:a=>Ce(t),disabled:ye.value[t.id]||!ge.value[t.id],class:"bg-indigo-600 text-white rounded-xl px-4 py-2 font-black text-xs hover:bg-indigo-700 transition flex items-center gap-2 h-10 disabled:opacity-50"},[p(x(Y),{class:"h-3.5 w-3.5"}),v(" "+l(ye.value[t.id]?"Saving...":"Add"),1)],8,Ps)]),(((u=t.data)==null?void 0:u.action_points)||[]).filter(a=>g(a.date)).length?(i(),d("div",Is,[(i(!0),d(k,null,D((((c=t.data)==null?void 0:c.action_points)||[]).filter(a=>g(a.date)),a=>(i(),d("div",{key:a.id,class:"flex items-center gap-3 p-3 bg-white border border-gray-100 rounded-xl group hover:shadow-sm transition"},[e("input",{type:"checkbox",checked:a.done,onChange:C=>$e(t,a.id),class:"h-4 w-4 rounded text-indigo-600 focus:ring-indigo-500 border-gray-300"},null,40,Hs),e("div",Ls,[e("span",{class:K([{"line-through text-gray-400":a.done,"text-gray-700":!a.done},"text-xs font-bold block truncate"])},l(a.content),3),a.user_name?(i(),d("span",Bs,[p(x(le),{class:"h-2.5 w-2.5"}),v(" Mentioned: "+l(a.user_name),1)])):_("",!0)]),e("button",{onClick:C=>Oe(t,a.id),class:"text-gray-300 hover:text-red-500 transition opacity-0 group-hover:opacity-100"},[p(x(Le),{class:"h-3.5 w-3.5 stroke-2"})],8,Es)]))),128))])):_("",!0),(((w=t.data)==null?void 0:w.action_points)||[]).filter(a=>!g(a.date)&&!a.done).length?(i(),d("div",Fs,[s[29]||(s[29]=e("h6",{class:"text-[9px] font-black text-amber-500 uppercase tracking-widest mb-3 flex items-center gap-1"},"Yesterday's Pending",-1)),e("div",Rs,[(i(!0),d(k,null,D((((h=t.data)==null?void 0:h.action_points)||[]).filter(a=>!g(a.date)&&!a.done),a=>(i(),d("div",{key:a.id,class:"flex items-center gap-3 p-3 bg-white border border-gray-100 rounded-xl"},[e("input",{type:"checkbox",checked:a.done,onChange:C=>$e(t,a.id),class:"h-4 w-4 rounded text-indigo-600 border-gray-300"},null,40,Os),e("div",Ks,[e("span",Zs,l(a.content),1),a.user_name?(i(),d("span",qs,[p(x(le),{class:"h-2 w-2"}),v(" "+l(a.user_name),1)])):_("",!0)]),e("span",zs,l(a.date),1)]))),128))])])):_("",!0)]),(B=t.tasks)!=null&&B.filter(a=>M(a)).length||f((Q=t.tasks)==null?void 0:Q.filter(a=>a.status!=="Done"),"updated_at").length||f((W=t.tasks)==null?void 0:W.filter(a=>a.status==="Done"),"updated_at").length||f(t.project_notes,"created_at").length||f(t.emails,"created_at").length?(i(),d("div",Js,[(X=t.tasks)!=null&&X.filter(a=>M(a)).length?(i(),d("div",Ys,[e("h5",Gs,[p(x(dt),{class:"h-3 w-3"}),s[30]||(s[30]=v(" Due Today (Deadline)",-1))]),(i(!0),d(k,null,D((j=t.tasks)==null?void 0:j.filter(a=>M(a)),a=>(i(),d("div",{key:a.id,onClick:C=>me(a),class:"p-4 bg-red-50/50 border border-red-100 rounded-xl cursor-pointer hover:bg-white transition"},[e("div",Ws,[e("div",null,[e("h6",Xs,l(a.name),1),a.description?(i(),d("div",js,l(a.description),1)):_("",!0)]),e("span",ea,[p(x(le),{class:"h-3 w-3"}),v(" "+l(a.assigned_to||"Unassigned"),1)])])],8,Qs))),128))])):_("",!0),f((ee=t.tasks)==null?void 0:ee.filter(a=>a.status!=="Done"),"updated_at").length?(i(),d("div",ta,[e("h5",sa,[p(x(Y),{class:"h-3 w-3"}),s[31]||(s[31]=v(" Focus Tasks (Active Today)",-1))]),(i(!0),d(k,null,D(f((te=t.tasks)==null?void 0:te.filter(a=>a.status!=="Done"),"updated_at"),a=>{var C;return i(),d("div",{key:a.id,onClick:m=>me(a),class:"p-4 bg-indigo-50/50 border border-indigo-100 rounded-xl cursor-pointer hover:bg-white transition"},[e("div",na,[e("div",oa,[e("h6",ia,l(a.name),1),a.description?(i(),d("div",ra,l(a.description),1)):_("",!0),(C=a.notes)!=null&&C.length?(i(),d("div",da,' "'+l(a.notes[0].content)+'" ',1)):_("",!0)]),e("span",la,[p(x(le),{class:"h-3 w-3"}),v(" "+l(a.assigned_to||"Unassigned"),1)])])],8,aa)}),128))])):_("",!0),f((se=t.tasks)==null?void 0:se.filter(a=>a.status==="Done"),"updated_at").length?(i(),d("div",ca,[e("h5",ua,[p(x(fe),{class:"h-3 w-3"}),s[32]||(s[32]=v(" Accomplished Today",-1))]),(i(!0),d(k,null,D(f((o=t.tasks)==null?void 0:o.filter(a=>a.status==="Done"),"updated_at"),a=>(i(),d("div",{key:a.id,onClick:C=>me(a),class:"p-4 bg-green-50/50 border border-green-100 rounded-xl"},[e("div",ga,[p(x(fe),{class:"h-5 w-5 text-green-500 mt-0.5"}),e("div",ma,[e("h6",xa,l(a.name),1),a.description?(i(),d("div",_a,l(a.description),1)):_("",!0)]),e("span",ha,l(a.assigned_to),1)])],8,pa))),128))])):_("",!0),f(t.project_notes,"created_at").length?(i(),d("div",ya,[e("h5",fa,[p(x(Be),{class:"h-3 w-3"}),s[33]||(s[33]=v(" Today's Logs",-1))]),(i(!0),d(k,null,D(f(t.project_notes,"created_at"),a=>(i(),d("div",{key:a.id,class:"p-4 bg-gray-50 border border-gray-100 rounded-xl"},[e("span",va,l(a.type||"Note"),1),e("div",{class:"text-sm text-gray-700 italic mb-3 whitespace-pre-wrap",innerHTML:J(a.content)},null,8,ba),e("div",wa,[p(x(le),{class:"h-3 w-3"}),v(" "+l(a.creator_name),1)])]))),128))])):_("",!0),f(t.emails,"created_at").length?(i(),d("div",ka,[e("h5",Da,[p(x(De),{class:"h-3 w-3"}),s[34]||(s[34]=v(" Today's Comms",-1))]),(i(!0),d(k,null,D(f(t.emails,"created_at"),a=>{var C;return i(),d("div",{key:a.id,class:"p-4 bg-purple-50/30 border border-purple-100 rounded-xl"},[e("div",Ca,[e("p",$a,l(a.subject),1),e("p",Sa,l(a.sender),1)]),(C=a.contexts)!=null&&C.length?(i(),d("div",Aa,[p(x(Y),{class:"h-3 w-3 inline mr-1"}),v(" "+l(a.contexts[0].summary),1)])):_("",!0)])}),128))])):_("",!0)])):(i(),d("div",Ma,s[35]||(s[35]=[e("p",{class:"text-gray-400 text-sm font-bold"},"No activity recorded for this focus date.",-1)])))],512),[[ne,A.value[t.id]==="today"]]),L(e("div",Ta,[(i(!0),d(k,null,D({"Highlighted (Focus Date)":f(G((n=t.tasks)==null?void 0:n.filter(a=>a.status!=="Done"),t.id,"assigned_to"),"updated_at"),Archive:N(G((y=t.tasks)==null?void 0:y.filter(a=>a.status!=="Done"),t.id,"assigned_to"),"updated_at")},(a,C)=>(i(),d("div",{key:C},[a.length>0?(i(),d("div",Va,[e("h5",Ua,l(C),1),(i(!0),d(k,null,D(a,m=>(i(),d("div",{key:m.id,onClick:O=>me(m),class:K(["group p-5 bg-white border rounded-[1.5rem] cursor-pointer hover:border-indigo-400 transition",g(m.updated_at)?"border-indigo-300 ring-2 ring-indigo-50 shadow-md":"border-gray-100"])},[e("div",Pa,[e("div",null,[e("h6",Ia,l(m.name),1),e("div",Ha,[e("span",La,[p(x(le),{class:"h-3 w-3"}),v(" "+l(m.assigned_to||"Unassigned"),1)]),e("span",Ba,[p(x(lt),{class:"h-3 w-3"}),v(" "+l(m.due_date||"No Date"),1)])])]),e("span",Ea,l(m.status),1)]),m.description?(i(),d("div",Fa,l(m.description),1)):_("",!0)],10,Na))),128))])):_("",!0)]))),128)),(H=t.tasks)!=null&&H.filter(a=>a.status!=="Done").length?_("",!0):(i(),d("p",Ra,"No active tasks found."))],512),[[ne,A.value[t.id]==="todo"]]),L(e("div",Oa,[(i(!0),d(k,null,D({"Highlighted (Focus Date)":f(G((Me=t.tasks)==null?void 0:Me.filter(a=>a.status==="Done"),t.id,"assigned_to"),"updated_at"),Archive:N(G((Te=t.tasks)==null?void 0:Te.filter(a=>a.status==="Done"),t.id,"assigned_to"),"updated_at")},(a,C)=>(i(),d("div",{key:C},[a.length>0?(i(),d("div",Ka,[e("h5",Za,l(C),1),(i(!0),d(k,null,D(a,m=>(i(),d("div",{key:m.id,class:K(["p-5 bg-white border border-gray-100 rounded-[1.5rem]",g(m.updated_at)?"ring-2 ring-green-100 border-green-200":""])},[e("div",qa,[p(x(fe),{class:"h-6 w-6 text-green-500 mt-1"}),e("div",null,[e("h6",za,l(m.name),1),e("p",Ja,l(m.assigned_to)+" • Done "+l(we(m.updated_at)),1),m.description?(i(),d("div",Ya,l(m.description),1)):_("",!0)])])],2))),128))])):_("",!0)]))),128)),(Ve=t.tasks)!=null&&Ve.filter(a=>a.status==="Done").length?_("",!0):(i(),d("p",Ga,"No done tasks found."))],512),[[ne,A.value[t.id]==="done"]]),L(e("div",Qa,[(i(!0),d(k,null,D({"Highlighted (Focus Date)":f(G((Ue=t.project_notes)==null?void 0:Ue.filter(a=>A.value[t.id]==="notes"&&(!a.type||a.type==="note")||A.value[t.id]==="standups"&&a.type==="standup"||A.value[t.id]==="meetings"&&a.type==="meeting_minutes"||A.value[t.id]==="summary"&&a.type==="daily_summary"),t.id,"creator_name"),"created_at"),Archive:N(G((Ne=t.project_notes)==null?void 0:Ne.filter(a=>A.value[t.id]==="notes"&&(!a.type||a.type==="note")||A.value[t.id]==="standups"&&a.type==="standup"||A.value[t.id]==="meetings"&&a.type==="meeting_minutes"||A.value[t.id]==="summary"&&a.type==="daily_summary"),t.id,"creator_name"),"created_at")},(a,C)=>(i(),d("div",{key:C},[a.length>0?(i(),d("div",Wa,[e("h5",Xa,l(C),1),e("div",ja,[(i(!0),d(k,null,D(a,m=>{var O;return i(),d("div",{key:m.id,class:K(["p-6 bg-white border border-gray-100 rounded-[2rem] shadow-sm flex flex-col relative",g(m.created_at)?"ring-2 ring-indigo-50 border-indigo-200":""])},[g(m.created_at)?(i(),d("div",en,"New Log")):_("",!0),e("div",{class:"text-sm text-gray-700 leading-relaxed mb-6 whitespace-pre-wrap",innerHTML:J(m.content)},null,8,tn),e("div",sn,[e("div",an,[e("div",nn,l((O=m.creator_name)==null?void 0:O.substring(0,2)),1),e("span",on,l(m.creator_name),1)]),e("span",rn,l(we(m.created_at)),1)])],2)}),128))])])):_("",!0)]))),128)),A.value[t.id]==="summary"?(i(),d("div",dn,[e("h5",ln,[p(x(Y),{class:"h-5 w-5"}),s[36]||(s[36]=v(" Daily Impact Summary",-1))]),s[37]||(s[37]=e("p",{class:"text-xs text-indigo-600 mb-4 font-medium italic"},"Summarize the overall progress, blockers, and next steps for today.",-1)),p(Ee,{"project-id":t.id,modelValue:R.value[t.id],"onUpdate:modelValue":a=>R.value[t.id]=a,type:"textarea",placeholder:"Paste your AI-generated summary or write one manually (type @ for users)..."},null,8,["project-id","modelValue","onUpdate:modelValue"]),e("div",cn,[e("button",{onClick:a=>Ke(t.id),disabled:pe.value[t.id]||!R.value[t.id],class:"px-6 py-2 bg-indigo-600 text-white rounded-xl text-sm font-black hover:bg-indigo-700 transition disabled:opacity-50"},l(pe.value[t.id]?"Saving...":"Post Summary"),9,un)])])):_("",!0)],512),[[ne,["notes","standups","meetings","summary"].includes(A.value[t.id])]]),L(e("div",pn,[(i(!0),d(k,null,D({"Highlighted (Focus Date)":f(G(t.emails,t.id,"sender"),"created_at"),Archive:N(G(t.emails,t.id,"sender"),"created_at")},(a,C)=>(i(),d("div",{key:C},[a.length>0?(i(),d("div",gn,[e("h5",mn,l(C),1),(i(!0),d(k,null,D(a,m=>{var O;return i(),d("div",{key:m.id,class:K(["bg-white rounded-[2rem] p-6 border border-gray-100 shadow-sm",g(m.created_at)?"ring-2 ring-purple-100 border-purple-200":""])},[e("div",xn,[e("div",_n,[e("div",{class:K([m.type==="Received"?"bg-orange-100 text-orange-600":"bg-green-100 text-green-600","p-3 rounded-2xl shadow-inner"])},[p(x(De),{class:"h-6 w-6"})],2),e("div",null,[e("h6",hn,l(m.subject),1),e("p",yn,l(m.type)+" • "+l(m.sender),1)])]),e("span",fn,l(we(m.created_at)),1)]),(O=m.contexts)!=null&&O.length?(i(),d("div",vn,[(i(!0),d(k,null,D(m.contexts,Pe=>(i(),d("div",{key:Pe.id,class:"p-5 bg-purple-50/50 rounded-[1.5rem] border border-purple-100"},[e("div",bn,[p(x(Y),{class:"h-4 w-4"}),s[38]||(s[38]=e("span",{class:"text-[10px] font-black uppercase tracking-widest"},"AI Summary",-1))]),e("p",wn,l(Pe.summary),1)]))),128))])):_("",!0)],2)}),128))])):_("",!0)]))),128))],512),[[ne,A.value[t.id]==="emails"]])])],512),[[ne,F.value[t.id]]])])}),128))],512),[[ne,z.value==="projects"]])])]),p(tt,{show:oe.value,"onUpdate:show":s[8]||(s[8]=t=>oe.value=t),title:"Morning Review Detail",initialWidth:40},{content:ke(()=>[re.value?(i(),He(Xe,{key:0,"task-id":re.value,"project-id":de.value,"project-users":ue.value,onClose:s[7]||(s[7]=t=>oe.value=!1)},null,8,["task-id","project-id","project-users"])):_("",!0)]),_:1},8,["show"])]),_:1})],64))}},ao=st(kn,[["__scopeId","data-v-cf1ccf2b"]]);export{ao as default};
