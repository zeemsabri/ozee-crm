import{u as oe}from"./workflowStore-DMkwNXfJ.js";import ce from"./StepCard-lQ3hdvW4.js";import j from"./DataTokenInserter-PXL-7_KC.js";import{S as pe}from"./SelectDropdown-CFOqYu4w.js";import{c as x,r as V,e as K,a as d,o as i,b as n,i as y,v as Z,G as ee,j as ne,F as w,l as T,t as h,m as z,f as me,g as te,w as ve,d as O,u as le,p as fe}from"./app-DPPlWUgE.js";import{P as ge}from"./plus-C14Liy18.js";import{T as ye}from"./trash-Bqntw_EZ.js";/* empty css                                                                       */import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./createLucideIcon-DCzPbb62.js";const be={class:"relative inline-flex items-center gap-2"},xe={key:0,class:"absolute z-50 mt-2 w-96 bg-white border rounded shadow p-3"},he={class:"space-y-2"},_e={class:"flex items-center gap-2"},Ce=["value"],ke={key:0},we={class:"flex flex-wrap items-center gap-2 mb-2"},Se=["onClick"],Ae={class:"flex items-center gap-2"},$e=["value"],Ee={key:1},Re=["value"],Te={class:"flex items-center justify-between mt-3"},Ie={key:0,class:"text-[11px] text-gray-500 truncate"},Me={class:"font-mono"},De={class:"flex items-center gap-2 ml-auto"},Oe={__name:"RelationshipPathPicker",props:{mode:{type:String,default:"id"},allStepsBefore:{type:Array,default:()=>[]},value:{type:String,default:""}},emits:["select"],setup(_,{emit:G}){const C=_,P=G,W=oe(),A=x(()=>W.automationSchema||[]),$=x(()=>W.morphMap||[]),I=V(!1),f=V(null),g=V([]),s=V(""),k=x(()=>{var r;const c=[],a=C.allStepsBefore.find(p=>{var v;return p.step_type==="TRIGGER"&&((v=p.step_config)==null?void 0:v.model)});if((r=a==null?void 0:a.step_config)!=null&&r.model){const p=a.step_config.model;c.push({id:"trigger",label:`Trigger: ${p}`,modelName:p,baseToken:`trigger.${p.toLowerCase()}`})}return C.allStepsBefore.forEach((p,v)=>{var b,S;if(p.step_type==="ACTION"&&((b=p.step_config)==null?void 0:b.action_type)==="CREATE_RECORD"&&((S=p.step_config)!=null&&S.target_model)){const q=p.step_config.target_model;c.push({id:`step_${p.id}`,label:`Step ${v+1}: Created ${q}`,modelName:q,baseToken:`${q.toLowerCase()}`})}}),c}),M=x(()=>{var c;return(c=f.value)!=null&&c.modelName&&A.value.find(a=>a.name===f.value.modelName)||null});x(()=>{var c;return((c=M.value)==null?void 0:c.relationships)||[]});function D(){g.value=[],s.value=""}function H(c){c&&g.value.push(c)}function F(){var p;const c=((p=f.value)==null?void 0:p.baseToken)||"",a=g.value.length?`.${g.value.join(".")}`:"",r=C.mode==="id"?".id":"";return`{{${c}${a}${r}}}`}function L(){C.mode==="type"?s.value?P("select",s.value):P("select",""):P("select",F()),I.value=!1}x(()=>{if(!M.value||g.value.length===0)return null;let c=M.value,a=null;for(const r of g.value){const p=(c.relationships||[]).find(v=>v.name===r);if(!p)return null;if(a=p,p.type!=="MorphTo"&&p.full_class){const v=A.value.find(b=>b.full_class===p.full_class||b.name===p.model);v&&(c=v)}}return a});const B=x(()=>{if(!M.value)return[];let c=M.value;for(const a of g.value){const r=(c.relationships||[]).find(p=>p.name===a);if(!r)return[];if(r.type!=="MorphTo"&&r.full_class){const p=A.value.find(v=>v.full_class===r.full_class||v.name===r.model);if(p)c=p;else return[]}else return[]}return c.relationships||[]});x(()=>{var v;if(C.mode==="type"){if(!s.value)return"";const b=$.value.find(S=>S.alias===s.value);return b?b.label||b.alias:s.value}if(!f.value)return"";const c=((v=f.value)==null?void 0:v.baseToken)||"",a=g.value.length?`.${g.value.join(".")}`:"",r=C.mode==="id"?".id":"";return`${c}${a}${r}`.replace(/^trigger\./,"trigger.")}),K(f,()=>D());function U(c){if(C.mode==="type"){if(!c||typeof c!="string"){s.value="";return}const b=$.value.find(S=>S.alias===c);if(b){s.value=b.alias;return}s.value=""}if(!c||typeof c!="string"||!c.startsWith("{{")){f.value=null,g.value=[];return}const a=c.replace(/[{}]/g,"").trim().split(".");if(a.length<2){f.value=null,g.value=[];return}const r=a[0];let p;r.toLowerCase()==="trigger"?p=a.slice(2):p=a.slice(1);const v=k.value.find(b=>(b.id==="trigger"?"trigger":b.modelName.toLowerCase())===r.toLowerCase());v?(f.value=v,g.value=p.slice(0,-1)):(f.value=null,g.value=[])}return K(()=>C.value,c=>{U(c)},{immediate:!0}),(c,a)=>(i(),d("div",be,[n("button",{type:"button",onClick:a[0]||(a[0]=r=>I.value=!I.value),class:"px-2 py-1 text-xs rounded bg-indigo-50 text-indigo-700 border border-indigo-200 hover:bg-indigo-100"},"Pick via relationships"),I.value?(i(),d("div",xe,[n("div",he,[n("div",null,[a[8]||(a[8]=n("label",{class:"block text-xs text-gray-600 mb-1"},"Start from",-1)),n("div",_e,[Z(n("select",{"onUpdate:modelValue":a[1]||(a[1]=r=>f.value=r),class:ne(["w-full p-2 border rounded text-sm",{"text-gray-400":!f.value}])},[a[7]||(a[7]=n("option",{value:null,disabled:""},"Select a source",-1)),(i(!0),d(w,null,T(k.value,r=>(i(),d("option",{key:r.id,value:r},h(r.label),9,Ce))),128))],2),[[ee,f.value]]),f.value?(i(),d("button",{key:0,type:"button",onClick:a[2]||(a[2]=r=>{f.value=null,D()}),class:"text-[11px] px-2 py-1 rounded border bg-white hover:bg-gray-50"},"Clear")):y("",!0)])]),f.value&&M.value?(i(),d("div",ke,[a[10]||(a[10]=n("label",{class:"block text-xs text-gray-600 mb-1"},"Traverse relationships",-1)),n("div",we,[(i(!0),d(w,null,T(g.value,(r,p)=>(i(),d("span",{key:p,class:"inline-flex items-center text-xs bg-gray-100 px-2 py-1 rounded border"},[z(h(r)+" ",1),n("button",{type:"button",class:"ml-1 text-gray-400 hover:text-red-600",onClick:v=>g.value.splice(p)},"×",8,Se)]))),128)),g.value.length?(i(),d("button",{key:0,type:"button",onClick:a[3]||(a[3]=r=>D()),class:"ml-auto text-[11px] px-2 py-1 rounded border bg-white hover:bg-gray-50"},"Clear path")):y("",!0)]),n("div",Ae,[n("select",{onChange:a[4]||(a[4]=r=>{H(r.target.value),r.target.value=""}),class:"w-full p-2 border rounded text-sm"},[a[9]||(a[9]=n("option",{value:""},"Add relation...",-1)),(i(!0),d(w,null,T(B.value,r=>(i(),d("option",{key:r.name,value:r.name},h(r.name)+" ("+h(r.type)+")",9,$e))),128))],32)])])):y("",!0),C.mode==="type"?(i(),d("div",Ee,[a[12]||(a[12]=n("label",{class:"block text-xs text-gray-600 mb-1"},"Select type",-1)),Z(n("select",{"onUpdate:modelValue":a[5]||(a[5]=r=>s.value=r),class:"w-full p-2 border rounded text-sm"},[a[11]||(a[11]=n("option",{value:""},"Choose a type...",-1)),(i(!0),d(w,null,T($.value,r=>(i(),d("option",{key:r.alias,value:r.alias},h(r.label),9,Re))),128))],512),[[ee,s.value]])])):y("",!0),n("div",Te,[C.mode==="id"?(i(),d("div",Ie,[a[13]||(a[13]=z("Token preview: ",-1)),n("span",Me,h(F()),1)])):y("",!0),n("div",De,[n("button",{onClick:a[6]||(a[6]=r=>I.value=!1),class:"px-2 py-1 text-xs rounded border"},"Cancel"),n("button",{onClick:L,class:"px-2 py-1 text-xs rounded bg-indigo-600 text-white"},"Use")])])])])):y("",!0)]))}},Fe=["value"],Pe=["value"],Be={key:0,class:"space-y-4 mt-4 border-t pt-4"},Ne={class:"flex items-center gap-2"},Le=["value"],Ue={class:"flex items-center gap-2"},qe=["value"],je={class:"relative"},Ve=["value"],We={class:"absolute top-2 right-2"},Ke={class:"block text-xs font-medium text-gray-600 mb-1"},ze={key:0},Ge={class:"flex items-center gap-2"},He=["value"],Je={class:"flex items-center justify-between mb-2"},Qe={key:0,class:"mb-2 text-[11px]"},Xe={class:"text-gray-600"},Ye={class:"px-1.5 py-0.5 rounded bg-amber-50 border border-amber-200 text-amber-700"},Ze={key:0},et={key:0,class:"mt-1 text-red-600"},tt={key:1,class:"space-y-2"},lt={class:"flex items-center justify-between gap-2"},ot={class:"flex-1 flex items-center gap-2"},nt=["value","onChange","disabled"],st=["value"],at={key:0,class:"text-[10px] px-1.5 py-0.5 rounded bg-amber-50 border border-amber-200 text-amber-700"},rt=["onClick","title"],ut={class:"flex items-center gap-2 mt-2"},it=["value","onChange"],dt=["value"],ct=["value","onInput"],pt=["value","onInput"],mt={class:"mt-1 text-[14px] text-gray-500"},vt={key:0,class:"mt-1 text-[11px] text-gray-500"},ft={key:2,class:"p-3 bg-blue-50 border-l-4 border-blue-400 text-blue-800 text-sm rounded-r-md"},At={__name:"ActionStep",props:{step:{type:Object,required:!0},allStepsBefore:{type:Array,default:()=>[]},loopContextSchema:{type:Object,default:null}},emits:["update:step","delete"],setup(_,{emit:G}){const C=_,P=G,W=oe(),A=x(()=>W.automationSchema||[]),$=V({});function I(t,e){return`${t||""}:${e||""}`}async function f(t,e){if(!t||!e)return null;const l=I(t,e);if(Array.isArray($.value[l])&&$.value[l].length)return $.value[l];try{const{data:o}=await fe.get(`/api/value-dictionaries/${encodeURIComponent(t)}/${encodeURIComponent(e)}`);let m=null;if(Array.isArray(o)?m=o:o&&Array.isArray(o.values)&&(m=o.values),Array.isArray(m)&&m.length)return $.value[l]=m,m}catch{}return null}const g=[{value:"SEND_EMAIL",label:"Send Email"},{value:"CREATE_RECORD",label:"Create Record"},{value:"UPDATE_RECORD",label:"Update Record"},{value:"CHECK_MILESTONE_COMPLETION",label:"Check for Milestone Completion & Update"}],s=x({get:()=>C.step.step_config||{},set:t=>P("update:step",{...C.step,step_config:t})});function k(t,e){s.value={...s.value,[t]:e}}function M(t){s.value={action_type:t}}function D(t,e){const l=s.value[t]||"";k(t,`${l}${e}`)}x(()=>A.value.map(t=>t.name));const H=x(()=>(A.value||[]).map(t=>({label:t.name,value:t.name})));function F(t){if(!t||typeof t!="string")return"";let e=t.toLowerCase();if(e==="id")return"ID";e.endsWith("_id")&&(e=e.slice(0,-3)),e=e.replace(/[_-]+/g," ");let l=e.replace(/\b\w/g,o=>o.toUpperCase());return l=l.replace(/\bId\b/g,"ID").replace(/\bUrl\b/g,"URL"),l}const L=x(()=>{const t=s.value.target_model;if(!t)return null;let e=(A.value||[]).find(o=>o.name===t);if(e||(e=(A.value||[]).find(o=>o.full_class===t),e))return e;const l=typeof t=="string"?t.split("\\").pop().split("/").pop():t;return(A.value||[]).find(o=>o.name===l)||null}),B=x(()=>{const t=L.value;return t?(t.columns||[]).map(e=>typeof e=="string"?{name:e,label:F(e),is_required:!1,allowed_values:null,description:null,ui:null}:{name:e.name,label:e.label||F(e.name),is_required:!!e.is_required,allowed_values:e.allowed_values??null,description:e.description||null,ui:e.ui||null}):[]});function U(t){return B.value.find(e=>e.name===t)||null}function c(t){return typeof t=="string"&&t.endsWith("_type")}function a(t){return typeof t=="string"&&t.endsWith("_id")}function r(t){const e=U(t.column);return a(t.column)||c(t.column)&&((e==null?void 0:e.ui)==="morph_type"||Array.isArray(e==null?void 0:e.allowed_values))}function p(t){return c(t.column)?"type":"id"}const v=x(()=>{var t;return((t=L.value)==null?void 0:t.required_on_create)||[]}),b=x(()=>{var t;return((t=L.value)==null?void 0:t.defaults_on_create)||{}});function S(t){return v.value.includes(t)}function q(t){const e=b.value||{},l=s.value.target_model,m=`{{trigger.${l?l.toLowerCase():""}.${t}}}`,u=(()=>{const R=(B.value||[]).find(de=>de.name===t);return!!(R&&Array.isArray(R.allowed_values)&&R.allowed_values.length>0)})();return s.value.action_type==="CREATE_RECORD"&&u?"":e[t]!==void 0&&e[t]!==null||t.endsWith("_id")?m:""}function Q(){const t=v.value||[];if(!t.length)return;const e=Array.isArray(s.value.fields)?[...s.value.fields]:[],l=new Map;e.forEach(u=>{const E=u.column||u.field||u.name;E&&l.set(E,!0)});const o=[];for(const u of t)l.has(u)||o.push({column:u,value:q(u)});o.length&&k("fields",[...e,...o]);const m=s.value.target_model;if(m)for(const u of t)f(m,u)}function se(t){k("target_model",t),Q()}K(()=>s.value.target_model,async(t,e)=>{if(t&&t!==e){Q();const l=Array.isArray(s.value.fields)?s.value.fields:[];for(const o of l){const m=(o==null?void 0:o.column)||(o==null?void 0:o.field)||(o==null?void 0:o.name);m&&await f(t,m)}}}),K(()=>s.value.fields,async t=>{const e=s.value.target_model;if(!(!e||!Array.isArray(t)))for(const l of t){const o=(l==null?void 0:l.column)||(l==null?void 0:l.field)||(l==null?void 0:l.name);o&&await f(e,o)}},{deep:!0,immediate:!0}),me(async()=>{const t=s.value.target_model,e=Array.isArray(s.value.fields)?s.value.fields:[];if(t)for(const l of e){const o=(l==null?void 0:l.column)||(l==null?void 0:l.field)||(l==null?void 0:l.name);o&&await f(t,o)}});function ae(){const t=s.value.fields||[];k("fields",[...t,{column:"",value:""}])}function re(t){const e=s.value.fields||[];k("fields",e.filter((l,o)=>o!==t))}function N(t,e,l){const m=[...s.value.fields||[]];m[t]={...m[t],[e]:l},k("fields",m)}function ue(t,e){const o=(s.value.fields||[])[t].value||"";N(t,"value",o+e)}function X(t){var E;const e=s.value.target_model;if(!e||!t)return null;const l=t.column||t.field||t.name;if(!l)return null;const o=(E=(B.value||[]).find(R=>R.name===l))==null?void 0:E.allowed_values;if(Array.isArray(o)&&o.length)return o;const m=I(e,l),u=$.value[m];return Array.isArray(u)&&u.length?u:null}function ie(t){const e=X(t);return!(!e||!e.length||(t.value||"").toString().includes("{{"))}const Y=x(()=>{const t=v.value||[];if(!t.length)return[];const e=new Map;return(Array.isArray(s.value.fields)?s.value.fields:[]).forEach(o=>{const m=o.column||o.field||o.name,u=(o.value??"").toString().trim();m&&u&&e.set(m,!0)}),t.filter(o=>!e.has(o))});function J(t){var m,u,E;const e=Array.isArray(s.value.fields)?s.value.fields:[],l=((m=e[t])==null?void 0:m.column)||((u=e[t])==null?void 0:u.field)||((E=e[t])==null?void 0:E.name);return!l||!S(l)?!0:e.filter(R=>(R.column||R.field||R.name)===l).length>1}return(t,e)=>(i(),te(ce,{icon:"⚙️",title:"Perform an Action",onDelete:()=>P("delete")},{default:ve(()=>[n("select",{value:s.value.action_type||"",onChange:e[0]||(e[0]=l=>M(l.target.value)),class:"p-2 border border-gray-300 rounded-md bg-white shadow-sm w-full text-sm"},[e[9]||(e[9]=n("option",{value:"",disabled:""},"Select an action...",-1)),(i(),d(w,null,T(g,l=>n("option",{key:l.value,value:l.value},h(l.label),9,Pe)),64))],40,Fe),s.value.action_type?(i(),d("div",Be,[s.value.action_type==="SEND_EMAIL"?(i(),d(w,{key:0},[n("div",null,[e[10]||(e[10]=n("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"To",-1)),n("div",Ne,[n("input",{type:"text",value:s.value.to||"",onInput:e[1]||(e[1]=l=>k("to",l.target.value)),class:"w-full p-2 border border-gray-300 rounded-md text-sm",placeholder:"e.g., {{trigger.email.sender}}"},null,40,Le),O(j,{"all-steps-before":_.allStepsBefore,"loop-context-schema":_.loopContextSchema,onInsert:e[2]||(e[2]=l=>D("to",l))},null,8,["all-steps-before","loop-context-schema"])])]),n("div",null,[e[11]||(e[11]=n("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"Subject",-1)),n("div",Ue,[n("input",{type:"text",value:s.value.subject||"",onInput:e[3]||(e[3]=l=>k("subject",l.target.value)),class:"w-full p-2 border border-gray-300 rounded-md text-sm",placeholder:"e.g., AI says: {{step_2.category}}"},null,40,qe),O(j,{"all-steps-before":_.allStepsBefore,"loop-context-schema":_.loopContextSchema,onInsert:e[4]||(e[4]=l=>D("subject",l))},null,8,["all-steps-before","loop-context-schema"])])]),n("div",null,[e[12]||(e[12]=n("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"Body",-1)),n("div",je,[n("textarea",{rows:"5",value:s.value.body||"",onInput:e[5]||(e[5]=l=>k("body",l.target.value)),class:"w-full p-2 border border-gray-300 rounded-md text-sm"},null,40,Ve),n("div",We,[O(j,{"all-steps-before":_.allStepsBefore,"loop-context-schema":_.loopContextSchema,onInsert:e[6]||(e[6]=l=>D("body",l))},null,8,["all-steps-before","loop-context-schema"])])])])],64)):y("",!0),s.value.action_type==="CREATE_RECORD"||s.value.action_type==="UPDATE_RECORD"?(i(),d(w,{key:1},[n("div",null,[n("label",Ke,h(s.value.action_type==="CREATE_RECORD"?"Model to Create":"Model to Update"),1),O(pe,{"model-value":s.value.target_model||"",options:H.value,placeholder:"Select model...","onUpdate:modelValue":se,class:"w-full"},null,8,["model-value","options"])]),s.value.action_type==="UPDATE_RECORD"?(i(),d("div",ze,[e[13]||(e[13]=n("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"Record ID",-1)),n("div",Ge,[n("input",{type:"text",value:s.value.record_id||"",onInput:e[7]||(e[7]=l=>k("record_id",l.target.value)),class:"w-full p-2 border border-gray-300 rounded-md text-sm",placeholder:"e.g., {{trigger.task.id}}"},null,40,He),O(j,{"all-steps-before":_.allStepsBefore,"loop-context-schema":_.loopContextSchema,onInsert:e[8]||(e[8]=l=>D("record_id",l))},null,8,["all-steps-before","loop-context-schema"])])])):y("",!0),n("div",null,[n("div",Je,[e[15]||(e[15]=n("label",{class:"text-xs font-medium text-gray-600"},"Fields to set",-1)),n("button",{onClick:ae,class:"flex items-center gap-1 px-2 py-1 text-xs rounded-md bg-gray-100 hover:bg-gray-200"},[O(le(ge),{class:"h-3 w-3"}),e[14]||(e[14]=z(" Add ",-1))])]),v.value.length?(i(),d("div",Qe,[n("span",Xe,"Required for "+h(s.value.target_model)+":",1),(i(!0),d(w,null,T(v.value,(l,o)=>(i(),d("span",{class:"ml-1",key:l},[n("span",Ye,h(F(l)),1),o<v.value.length-1?(i(),d("span",Ze,", ")):y("",!0)]))),128)),Y.value.length?(i(),d("div",et,"Missing: "+h(Y.value.map(F).join(", ")),1)):y("",!0)])):y("",!0),s.value.fields&&s.value.fields.length>0?(i(),d("div",tt,[(i(!0),d(w,null,T(s.value.fields,(l,o)=>{var m;return i(),d("div",{key:o,class:"p-2 border rounded-md bg-gray-50/50"},[n("div",lt,[n("div",ot,[n("select",{value:l.column,onChange:u=>N(o,"column",u.target.value),class:"w-full p-2 border border-gray-300 rounded-md text-sm",disabled:!s.value.target_model},[e[16]||(e[16]=n("option",{value:"",disabled:""},"Field...",-1)),(i(!0),d(w,null,T(B.value,u=>(i(),d("option",{key:u.name,value:u.name},h(u.label),9,st))),128))],40,nt),S(l.column)?(i(),d("span",at,"Required")):y("",!0)]),n("button",{onClick:u=>J(o)&&re(o),class:ne([[J(o)?"text-gray-400 hover:text-red-500 hover:bg-red-50":"text-gray-300 cursor-not-allowed"],"p-1 rounded-full"]),title:J(o)?"Remove Field":"Cannot remove required field"},[O(le(ye),{class:"w-4 h-4"})],10,rt)]),n("div",ut,[s.value.target_model?(i(),d(w,{key:0},[ie(l)?(i(),d("select",{key:0,value:l.value||"",onChange:u=>N(o,"value",u.target.value),class:"w-full p-2 border border-gray-300 rounded-md text-sm"},[e[17]||(e[17]=n("option",{value:"",disabled:""},"Select value...",-1)),(i(!0),d(w,null,T(X(l)||[],u=>(i(),d("option",{key:u.value,value:u.value},h(u.label??u.value),9,dt))),128))],40,it)):(i(),d("input",{key:1,value:l.value,onInput:u=>N(o,"value",u.target.value),type:"text",class:"w-full border rounded px-2 py-2 text-sm",placeholder:"Value..."},null,40,ct))],64)):(i(),d("input",{key:1,value:l.value,onInput:u=>N(o,"value",u.target.value),type:"text",class:"w-full border rounded px-2 py-2 text-sm",placeholder:"Value..."},null,40,pt)),O(j,{"all-steps-before":_.allStepsBefore,"loop-context-schema":_.loopContextSchema,onInsert:u=>ue(o,u)},null,8,["all-steps-before","loop-context-schema","onInsert"]),r(l)?(i(),te(Oe,{key:2,mode:p(l),"all-steps-before":_.allStepsBefore,value:l.value,onSelect:u=>N(o,"value",u)},null,8,["mode","all-steps-before","value","onSelect"])):y("",!0)]),n("p",mt,[e[18]||(e[18]=z("Selected Relationship: ",-1)),n("strong",null,h(l.value),1)]),(m=U(l.column))!=null&&m.description?(i(),d("p",vt,h(U(l.column).description),1)):y("",!0)])}),128))])):y("",!0)])],64)):y("",!0),s.value.action_type==="CHECK_MILESTONE_COMPLETION"?(i(),d("div",ft,e[19]||(e[19]=[n("p",{class:"font-semibold"},"This is a smart action.",-1),n("p",null,"It will automatically use the context from the trigger to check if all tasks in the milestone are complete. If so, it will mark the milestone as completed.",-1)]))):y("",!0)])):y("",!0)]),_:1},8,["onDelete"]))}};export{At as default};
