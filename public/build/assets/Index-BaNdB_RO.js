import{c as i,o as n,a as l,l as C,G as _e,E as xe,r as f,D as be,b as he,e as o,u as p,h as ke,w,t as u,f as V,q as Ue,k as b,F as $,i as M,H as j,g as _,n as X,y as I}from"./app-ChNNGQpZ.js";import{_ as Ce}from"./AuthenticatedLayout-6RQS8V1b.js";import{_ as R}from"./PrimaryButton-NC2t_HoE.js";import{D as Ve}from"./DangerButton-D73APu0H.js";import{_ as K}from"./Modal-BVF4Zl1w.js";import{_ as v}from"./InputLabel-Bvo8T8oq.js";import{_ as h}from"./TextInput-CcWdt2zx.js";import{_ as x}from"./InputError-BQxDaFqc.js";import{_ as Y}from"./SecondaryButton-D0KIHOxV.js";import{r as Z}from"./UsersIcon-BeyLH4no.js";import{r as $e}from"./BriefcaseIcon-BQsKpn04.js";import{r as je}from"./MagnifyingGlassIcon-DG1yifEo.js";import{r as Ae}from"./PlusIcon-nWUKpiya.js";import{r as ze}from"./PencilSquareIcon-BQ0lw7jZ.js";import"./index-CP72OQU6.js";import"./BaseFormModal-DIxmT_Gd.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./SelectDropdown-M38VjQTw.js";/* empty css                                                                       */import"./debounce-C-hnF4Z3.js";import"./ApplicationLogo-B3GrnINu.js";import"./MultiSelectDropdown-D3XvIqj2.js";import"./createLucideIcon-Zi0Lz4se.js";import"./plus-BP7uux2D.js";import"./moment-BLMuvzoS.js";import"./NoticeboardModal-wU_Jv4Nf.js";function Me(H,c){return n(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z"})])}function Pe(H,c){return n(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m9 9 6-6m0 0 6 6m-6-6v12a6 6 0 0 1-12 0v-3"})])}function ee(H,c){return n(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z"})])}const Ee={class:"py-6 sm:py-12"},Se={class:"px-4 sm:px-6 lg:px-8"},Ne={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},De={class:"bg-white rounded-2xl shadow-sm p-6 flex items-center justify-between transition-all duration-300 hover:shadow-md hover:scale-105"},qe={class:"text-3xl font-bold text-gray-900 mt-1"},Fe={class:"bg-white rounded-2xl shadow-sm p-6 flex items-center justify-between transition-all duration-300 hover:shadow-md hover:scale-105"},Le={class:"text-3xl font-bold text-gray-900 mt-1"},Be={class:"bg-white rounded-2xl shadow-sm p-6 flex items-center justify-between transition-all duration-300 hover:shadow-md hover:scale-105"},Re={class:"text-3xl font-bold text-gray-900 mt-1"},He={class:"bg-white rounded-2xl shadow-sm p-6 flex items-center justify-between transition-all duration-300 hover:shadow-md hover:scale-105"},Oe={class:"text-3xl font-bold text-gray-900 mt-1"},Ke={class:"bg-white rounded-2xl shadow-xl overflow-hidden"},Ye={class:"p-6"},Ze={class:"flex flex-col md:flex-row justify-between items-center mb-6 gap-4"},Ge={class:"w-full md:w-auto flex flex-col sm:flex-row gap-4 items-center"},Te={class:"relative w-full"},Qe={class:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"},Je=["value"],We=["value"],Xe={key:0,class:"text-center p-12"},Ie={key:1,class:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded-lg",role:"alert"},es={key:2,class:"text-center p-12"},ss={key:3},ts={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"},ls={class:"flex items-center space-x-4 mb-4"},os={class:"flex-shrink-0"},as={class:"text-xl font-bold text-gray-900"},rs={class:"text-sm text-gray-500 truncate"},ns={class:"flex flex-wrap gap-2 mb-4"},is={class:"inline-flex items-center rounded-full px-3 py-1 text-xs font-medium bg-gray-50 text-gray-600 ring-1 ring-inset ring-gray-500/10"},ds={class:"text-sm text-gray-600 mt-auto"},us={key:0,class:"text-xs mt-1 text-gray-500"},ms={key:0,class:"group relative inline-block cursor-pointer text-indigo-500 hover:text-indigo-700"},cs={class:"absolute z-10 bottom-full left-1/2 -translate-x-1/2 mb-2 w-max p-2 bg-gray-800 text-white text-xs rounded-md shadow-lg opacity-0 group-hover:opacity-100 transition-opacity"},ps={class:"list-none p-0 m-0"},vs={key:1,class:"text-xs text-gray-400 mt-1"},gs={key:0,class:"mt-3 p-2 bg-gray-50 rounded-lg border border-dashed border-gray-300"},fs={class:"text-[10px] uppercase font-semibold text-gray-400 mb-1 flex items-center"},ws={class:"text-[10px] break-all text-indigo-600 block"},ys={class:"mt-4 flex justify-end gap-2"},_s=["onClick"],xs=["onClick"],bs=["onClick"],hs=["onClick"],ks={class:"p-6"},Us={key:0,class:"text-red-600 text-sm mb-4"},Cs={class:"mb-4"},Vs={class:"mb-4"},$s={class:"mb-4"},js={class:"mb-4"},As={class:"mb-4"},zs=["value","disabled"],Ms={class:"mb-4"},Ps={class:"mb-4"},Es={class:"mt-6 flex justify-end"},Ss={class:"p-6"},Ns={key:0,class:"text-red-600 text-sm mb-4"},Ds={class:"mb-4"},qs={class:"mb-4"},Fs={class:"mb-4"},Ls={class:"mb-4"},Bs={class:"mb-4"},Rs=["disabled"],Hs=["value","disabled"],Os={class:"mb-4"},Ks={class:"mb-4"},Ys={class:"mt-6 flex justify-end"},Zs={class:"p-6"},Gs={key:0,class:"mt-4 text-gray-800"},Ts={key:1,class:"text-red-600 text-sm mb-4"},Qs={class:"mt-6 flex justify-end"},ht={__name:"Index",setup(H){const c=C(()=>_e().props.auth.user),{canDo:G}=xe(),y=f([]),O=f(!0),r=f({}),d=f(""),D=f(""),q=f(""),F=f(""),L=f("active"),P=f(!1),E=f(!1),S=f(!1),a=be({id:null,name:"",email:"",password:"",password_confirmation:"",role:"contractor",role_id:4,user_type:"contractor",timezone:""}),k=f(null),g=f([]),se=C(()=>{const t=y.value.flatMap(s=>s.projects||[]);return[...new Set(t.map(s=>s.id))].map(s=>{const m=t.find(U=>U.id===s);return{value:m.id,label:m.name}})}),te=C(()=>y.value.length),le=C(()=>y.value.filter(t=>{var e;return((e=t.role_data)==null?void 0:e.slug)==="manager"||t.role==="manager"||t.role==="manager-role"||t.role==="manager_role"}).length),oe=C(()=>y.value.filter(t=>{var e;return((e=t.role_data)==null?void 0:e.slug)==="employee"||t.role==="employee"}).length),ae=C(()=>y.value.filter(t=>{var e;return((e=t.role_data)==null?void 0:e.slug)==="contractor"||t.role==="contractor"}).length),T=C(()=>{let t=y.value;if(q.value&&(t=t.filter(e=>{var m,U;return(((m=e.role_data)==null?void 0:m.id)||((U=g.value.find(B=>B.slug===e.role))==null?void 0:U.value))===q.value})),F.value&&(t=t.filter(e=>e.projects&&e.projects.some(s=>s.id===F.value))),D.value){const e=D.value.toLowerCase();t=t.filter(s=>s.name.toLowerCase().includes(e)||s.email.toLowerCase().includes(e))}return t}),re=async()=>{try{const t=await window.axios.get("/api/roles?type=application");g.value=t.data.map(e=>({value:e.id,slug:e.slug.replace(/-/g,"_"),label:e.name}))}catch(t){console.error("Error fetching roles:",t),g.value=[{value:1,slug:"super_admin",label:"Super Admin"},{value:2,slug:"manager",label:"Manager"},{value:3,slug:"employee",label:"Employee"},{value:4,slug:"contractor",label:"Contractor"}]}},N=C(()=>{var t;return c.value?((t=c.value.role_data)==null?void 0:t.slug)==="super-admin"||c.value.role==="super_admin"||c.value.role==="super-admin":!1}),Q=C(()=>{var t;return c.value?((t=c.value.role_data)==null?void 0:t.slug)==="manager"||c.value.role==="manager"||c.value.role==="manager-role"||c.value.role==="manager_role":!1}),J=G("delete_users"),ne=G("create_users"),A=async()=>{O.value=!0,d.value="";try{const t={};L.value==="all"?t.with_trashed=1:L.value==="archived"&&(t.only_trashed=1);const e=await window.axios.get("/api/users",{params:t});y.value=e.data}catch(t){d.value="Failed to fetch users.",console.error("Error fetching users:",t),t.response&&t.response.status===403?d.value="You do not have permission to view users.":t.response&&t.response.status===401&&(d.value="Session expired. Please log in again.",localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),window.location.href="/login")}finally{O.value=!1}},ie=()=>{a.id=null,a.name="",a.email="",a.password="",a.password_confirmation="";const t=g.value.find(e=>e.slug==="contractor");a.role_id=(t==null?void 0:t.value)||(g.value.length>0?g.value[0].value:4),a.role=(t==null?void 0:t.slug)||"contractor",a.user_type="contractor";try{a.timezone=Intl.DateTimeFormat().resolvedOptions().timeZone||""}catch{a.timezone=""}r.value={},d.value="",P.value=!0},de=async()=>{r.value={},d.value="";try{const t=await window.axios.post("/api/users",a);y.value.push(t.data),P.value=!1,console.log("User created successfully!"),A()}catch(t){t.response&&t.response.status===422?r.value=t.response.data.errors:t.response&&t.response.data.message?d.value=t.response.data.message:(d.value="Failed to create user.",console.error("Error creating user:",t))}},ue=t=>{if(a.id=t.id,a.name=t.name,a.email=t.email,a.timezone=t.timezone||"",t.role_data&&t.role_data.id)a.role_id=t.role_data.id,a.role=t.role_data.slug.replace(/-/g,"_");else{const e=typeof t.role=="string"?t.role.replace(/-/g,"_"):"employee",s=g.value.find(m=>m.slug===e);a.role_id=(s==null?void 0:s.value)||(g.value.length>0?g.value[0].value:null),a.role=e}a.user_type=t.user_type||"employee",a.password="",a.password_confirmation="",r.value={},d.value="",E.value=!0},me=async()=>{r.value={},d.value="";try{const t={...a};t.password||(delete t.password,delete t.password_confirmation);const e=await window.axios.put(`/api/users/${a.id}`,t),s=y.value.findIndex(m=>m.id===a.id);s!==-1&&(y.value[s]=e.data),E.value=!1,console.log("User updated successfully!"),A()}catch(t){t.response&&t.response.status===422?r.value=t.response.data.errors:t.response&&t.response.data.message?d.value=t.response.data.message:(d.value="Failed to update user.",console.error("Error updating user:",t))}},ce=t=>{k.value=t,S.value=!0},pe=async()=>{d.value="";try{await window.axios.delete(`/api/users/${k.value.id}`),await A(),S.value=!1,k.value=null,console.log("User archived successfully!")}catch(t){d.value="Failed to archive user.",t.response&&t.response.data.message&&(d.value=t.response.data.message),console.error("Error archiving user:",t)}},ve=async t=>{d.value="";try{await window.axios.post(`/api/users/${t.id}/restore`),await A(),console.log("User restored successfully!")}catch(e){d.value="Failed to restore user.",e.response&&e.response.data.message&&(d.value=e.response.data.message),console.error("Error restoring user:",e)}},ge=async t=>{if(confirm(`Are you sure you want to generate a new API key for ${t.name}? The old one will stop working.`))try{const e=await window.axios.post(`/api/users/${t.id}/generate-api-key`),s=y.value.findIndex(m=>m.id===t.id);s!==-1&&(y.value[s].api_key=e.data.api_key),console.log("API key generated successfully!")}catch(e){console.error("Error generating API key:",e),alert("Failed to generate API key.")}},W=()=>{const t=g.value.find(e=>e.value===a.role_id);t&&(a.role=t.slug)},fe=t=>{if(!t||t.length===0)return"None";const e=t.map(m=>m.name);if(e.length<=2)return e.join(", ");const s=e.length-2;return`${e[0]}, ${e[1]} and ${s} more`};he(()=>{A(),re()});const we=t=>{switch(typeof t=="string"?t.toLowerCase():(t==null?void 0:t.slug)||"employee"){case"super_admin":case"super-admin":return"bg-red-50 text-red-700 ring-red-600/20";case"manager":return"bg-indigo-50 text-indigo-700 ring-indigo-600/20";case"employee":return"bg-emerald-50 text-emerald-700 ring-emerald-600/20";case"contractor":return"bg-yellow-50 text-yellow-700 ring-yellow-600/20";default:return"bg-gray-50 text-gray-600 ring-gray-500/10"}},ye=t=>{const e=t.split("").reduce((m,U)=>m+U.charCodeAt(0),0),s=["bg-blue-500","bg-indigo-500","bg-purple-500","bg-pink-500","bg-rose-500","bg-orange-500","bg-amber-500","bg-lime-500","bg-emerald-500","bg-cyan-500"];return s[e%s.length]};return(t,e)=>(n(),i($,null,[o(p(ke),{title:"Users"}),o(Ce,null,{header:w(()=>e[24]||(e[24]=[l("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Users",-1)])),default:w(()=>[l("div",Ee,[l("div",Se,[l("div",Ne,[l("div",De,[l("div",null,[e[25]||(e[25]=l("h4",{class:"text-gray-500 font-medium text-sm"},"Total Users",-1)),l("p",qe,u(te.value),1)]),o(p(Z),{class:"h-12 w-12 text-indigo-500 opacity-80"})]),l("div",Fe,[l("div",null,[e[26]||(e[26]=l("h4",{class:"text-gray-500 font-medium text-sm"},"Managers",-1)),l("p",Le,u(le.value),1)]),o(p(Z),{class:"h-12 w-12 text-green-500 opacity-80"})]),l("div",Be,[l("div",null,[e[27]||(e[27]=l("h4",{class:"text-gray-500 font-medium text-sm"},"Employees",-1)),l("p",Re,u(oe.value),1)]),o(p(Z),{class:"h-12 w-12 text-yellow-500 opacity-80"})]),l("div",He,[l("div",null,[e[28]||(e[28]=l("h4",{class:"text-gray-500 font-medium text-sm"},"Contractors",-1)),l("p",Oe,u(ae.value),1)]),o(p($e),{class:"h-12 w-12 text-pink-500 opacity-80"})])]),l("div",Ke,[l("div",Ye,[l("div",Ze,[e[33]||(e[33]=l("h3",{class:"text-2xl font-bold text-gray-900"},"User Management",-1)),l("div",Ge,[l("div",Te,[l("div",Qe,[o(p(je),{class:"w-5 h-5 text-gray-400"})]),o(h,{id:"search",type:"text",class:"w-full pl-10 pr-3 py-2 rounded-lg",placeholder:"Search users...",modelValue:D.value,"onUpdate:modelValue":e[0]||(e[0]=s=>D.value=s)},null,8,["modelValue"])]),V(l("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>q.value=s),class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-lg shadow-sm w-full sm:w-40"},[e[29]||(e[29]=l("option",{value:""},"All Roles",-1)),(n(!0),i($,null,M(g.value,s=>(n(),i("option",{key:s.value,value:s.value},u(s.label),9,Je))),128))],512),[[j,q.value]]),V(l("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>F.value=s),class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-lg shadow-sm w-full sm:w-40"},[e[30]||(e[30]=l("option",{value:""},"All Projects",-1)),(n(!0),i($,null,M(se.value,s=>(n(),i("option",{key:s.value,value:s.value},u(s.label),9,We))),128))],512),[[j,F.value]]),V(l("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>L.value=s),onChange:A,class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-lg shadow-sm w-full sm:w-40"},e[31]||(e[31]=[l("option",{value:"active"},"Active",-1),l("option",{value:"archived"},"Archived",-1),l("option",{value:"all"},"All",-1)]),544),[[j,L.value]]),p(ne)?(n(),Ue(R,{key:0,onClick:ie,class:"w-full sm:w-auto"},{default:w(()=>[o(p(Ae),{class:"w-4 h-4 mr-2"}),e[32]||(e[32]=_(" Add User ",-1))]),_:1,__:[32]})):b("",!0)])]),O.value?(n(),i("div",Xe,e[34]||(e[34]=[l("svg",{class:"animate-spin h-10 w-10 text-indigo-500 mx-auto",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[l("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),l("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),l("p",{class:"text-gray-600 mt-4"},"Loading users...",-1)]))):d.value?(n(),i("div",Ie,[l("p",null,u(d.value),1)])):T.value.length===0?(n(),i("div",es,e[35]||(e[35]=[l("p",{class:"text-gray-600"},"No users found matching your criteria.",-1)]))):(n(),i("div",ss,[l("div",ts,[(n(!0),i($,null,M(T.value,s=>{var m,U,B;return n(),i("div",{key:s.id,class:"bg-white rounded-2xl shadow-sm p-6 flex flex-col justify-between relative border border-gray-100 transition-all duration-300 hover:shadow-lg"},[l("div",null,[l("div",ls,[l("div",os,[l("div",{class:X(["h-12 w-12 rounded-full flex items-center justify-center text-white font-bold text-lg",ye(s.name)])},u(s.name.charAt(0)),3)]),l("div",null,[l("p",as,u(s.name),1),l("p",rs,u(s.email),1)])]),l("div",ns,[l("span",{class:X(["inline-flex items-center rounded-full px-3 py-1 text-xs font-medium ring-1 ring-inset",we(((m=s.role_data)==null?void 0:m.slug)||s.role)])}," Role: "+u(((U=s.role_data)==null?void 0:U.name)||(typeof s.role=="string"?s.role.replace(/_|-/g," "):"Employee")),3),l("span",is," Type: "+u(((B=s.user_type)==null?void 0:B.toUpperCase())||"EMPLOYEE"),1)]),l("div",ds,[e[38]||(e[38]=l("p",{class:"font-medium text-gray-800"},"Projects",-1)),s.projects&&s.projects.length?(n(),i("p",us,[_(u(fe(s.projects))+" ",1),s.projects.length>2?(n(),i("span",ms,[e[37]||(e[37]=_(" (more) ",-1)),l("span",cs,[l("ul",ps,[(n(!0),i($,null,M(s.projects,z=>(n(),i("li",{key:z.id,class:"whitespace-nowrap"},u(z.name),1))),128))]),e[36]||(e[36]=l("div",{class:"absolute w-3 h-3 bg-gray-800 transform rotate-45 -bottom-1 left-1/2 -translate-x-1/2"},null,-1))])])):b("",!0)])):(n(),i("p",vs,"No projects assigned."))]),s.api_key?(n(),i("div",gs,[l("p",fs,[o(p(ee),{class:"h-3 w-3 mr-1"}),e[39]||(e[39]=_(" API Key ",-1))]),l("code",ws,u(s.api_key),1)])):b("",!0)]),l("div",ys,[o(R,{as:"a",href:`/users/${s.id}`,title:"View User"},{default:w(()=>e[40]||(e[40]=[_("View",-1)])),_:2,__:[40]},1032,["href"]),N.value||Q.value?(n(),i("button",{key:0,onClick:z=>ge(s),class:"p-2 rounded-full text-gray-400 hover:text-amber-600 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-amber-500 transition-colors",title:"Generate API Key"},[o(p(ee),{class:"h-5 w-5"})],8,_s)):b("",!0),N.value||Q.value?(n(),i("button",{key:1,onClick:z=>ue(s),class:"p-2 rounded-full text-gray-400 hover:text-indigo-600 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-colors",title:"Edit User"},[o(p(ze),{class:"h-5 w-5"})],8,xs)):b("",!0),p(J)&&s.id!==c.value.id&&!s.deleted_at?(n(),i("button",{key:2,onClick:z=>ce(s),class:"p-2 rounded-full text-gray-400 hover:text-red-600 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-red-500 transition-colors",title:"Archive User"},[o(p(Me),{class:"h-5 w-5"})],8,bs)):b("",!0),p(J)&&s.deleted_at?(n(),i("button",{key:3,onClick:z=>ve(s),class:"p-2 rounded-full text-gray-400 hover:text-green-600 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-green-500 transition-colors",title:"Unarchive User"},[o(p(Pe),{class:"h-5 w-5"})],8,hs)):b("",!0)])])}),128))])]))])])])]),o(K,{show:P.value,onClose:e[12]||(e[12]=s=>P.value=!1)},{default:w(()=>[l("div",ks,[e[44]||(e[44]=l("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Create New User",-1)),d.value?(n(),i("div",Us,u(d.value),1)):b("",!0),l("form",{onSubmit:I(de,["prevent"])},[l("div",Cs,[o(v,{for:"create_name",value:"Name"}),o(h,{id:"create_name",type:"text",class:"mt-1 block w-full",modelValue:a.name,"onUpdate:modelValue":e[4]||(e[4]=s=>a.name=s),required:"",autofocus:""},null,8,["modelValue"]),o(x,{message:r.value.name?r.value.name[0]:"",class:"mt-2"},null,8,["message"])]),l("div",Vs,[o(v,{for:"create_email",value:"Email"}),o(h,{id:"create_email",type:"email",class:"mt-1 block w-full",modelValue:a.email,"onUpdate:modelValue":e[5]||(e[5]=s=>a.email=s),required:""},null,8,["modelValue"]),o(x,{message:r.value.email?r.value.email[0]:"",class:"mt-2"},null,8,["message"])]),l("div",$s,[o(v,{for:"create_password",value:"Password"}),o(h,{id:"create_password",type:"password",class:"mt-1 block w-full",modelValue:a.password,"onUpdate:modelValue":e[6]||(e[6]=s=>a.password=s),required:"",autocomplete:"new-password"},null,8,["modelValue"]),o(x,{message:r.value.password?r.value.password[0]:"",class:"mt-2"},null,8,["message"])]),l("div",js,[o(v,{for:"create_password_confirmation",value:"Confirm Password"}),o(h,{id:"create_password_confirmation",type:"password",class:"mt-1 block w-full",modelValue:a.password_confirmation,"onUpdate:modelValue":e[7]||(e[7]=s=>a.password_confirmation=s),required:"",autocomplete:"new-password"},null,8,["modelValue"])]),l("div",As,[o(v,{for:"create_role",value:"Role"}),V(l("select",{id:"create_role",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full","onUpdate:modelValue":e[8]||(e[8]=s=>a.role_id=s),onChange:W},[(n(!0),i($,null,M(g.value,s=>(n(),i("option",{key:s.value,value:s.value,disabled:!N.value&&(s.slug==="super_admin"||s.slug==="manager")},u(s.label),9,zs))),128))],544),[[j,a.role_id]]),o(x,{message:r.value.role_id?r.value.role_id[0]:r.value.role?r.value.role[0]:"",class:"mt-2"},null,8,["message"])]),l("div",Ms,[o(v,{for:"create_user_type",value:"User Type"}),V(l("select",{id:"create_user_type",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full","onUpdate:modelValue":e[9]||(e[9]=s=>a.user_type=s)},e[41]||(e[41]=[l("option",{value:"employee"},"Employee",-1),l("option",{value:"contractor"},"Contractor",-1)]),512),[[j,a.user_type]]),o(x,{message:r.value.user_type?r.value.user_type[0]:"",class:"mt-2"},null,8,["message"])]),l("div",Ps,[o(v,{for:"create_timezone",value:"Timezone"}),o(h,{id:"create_timezone",type:"text",class:"mt-1 block w-full",modelValue:a.timezone,"onUpdate:modelValue":e[10]||(e[10]=s=>a.timezone=s),placeholder:"e.g., America/New_York"},null,8,["modelValue"]),o(x,{message:r.value.timezone?r.value.timezone[0]:"",class:"mt-2"},null,8,["message"])]),l("div",Es,[o(Y,{onClick:e[11]||(e[11]=s=>P.value=!1)},{default:w(()=>e[42]||(e[42]=[_("Cancel",-1)])),_:1,__:[42]}),o(R,{class:"ms-3",type:"submit"},{default:w(()=>e[43]||(e[43]=[_("Create User",-1)])),_:1,__:[43]})])],32)])]),_:1},8,["show"]),o(K,{show:E.value,onClose:e[21]||(e[21]=s=>E.value=!1)},{default:w(()=>[l("div",Ss,[e[48]||(e[48]=l("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Edit User",-1)),d.value?(n(),i("div",Ns,u(d.value),1)):b("",!0),l("form",{onSubmit:I(me,["prevent"])},[l("div",Ds,[o(v,{for:"edit_name",value:"Name"}),o(h,{id:"edit_name",type:"text",class:"mt-1 block w-full",modelValue:a.name,"onUpdate:modelValue":e[13]||(e[13]=s=>a.name=s),required:"",autofocus:""},null,8,["modelValue"]),o(x,{message:r.value.name?r.value.name[0]:"",class:"mt-2"},null,8,["message"])]),l("div",qs,[o(v,{for:"edit_email",value:"Email"}),o(h,{id:"edit_email",type:"email",class:"mt-1 block w-full",modelValue:a.email,"onUpdate:modelValue":e[14]||(e[14]=s=>a.email=s),required:""},null,8,["modelValue"]),o(x,{message:r.value.email?r.value.email[0]:"",class:"mt-2"},null,8,["message"])]),l("div",Fs,[o(v,{for:"edit_password",value:"Password (leave blank to keep current)"}),o(h,{id:"edit_password",type:"password",class:"mt-1 block w-full",modelValue:a.password,"onUpdate:modelValue":e[15]||(e[15]=s=>a.password=s),autocomplete:"new-password"},null,8,["modelValue"]),o(x,{message:r.value.password?r.value.password[0]:"",class:"mt-2"},null,8,["message"])]),l("div",Ls,[o(v,{for:"edit_password_confirmation",value:"Confirm Password"}),o(h,{id:"edit_password_confirmation",type:"password",class:"mt-1 block w-full",modelValue:a.password_confirmation,"onUpdate:modelValue":e[16]||(e[16]=s=>a.password_confirmation=s),autocomplete:"new-password"},null,8,["modelValue"])]),l("div",Bs,[o(v,{for:"edit_role",value:"Role"}),V(l("select",{id:"edit_role",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full","onUpdate:modelValue":e[17]||(e[17]=s=>a.role_id=s),onChange:W,disabled:!N.value&&a.id===c.value.id},[(n(!0),i($,null,M(g.value,s=>(n(),i("option",{key:s.value,value:s.value,disabled:!N.value&&(s.slug==="super_admin"||s.slug==="manager")&&a.id!==c.value.id},u(s.label),9,Hs))),128))],40,Rs),[[j,a.role_id]]),o(x,{message:r.value.role_id?r.value.role_id[0]:r.value.role?r.value.role[0]:"",class:"mt-2"},null,8,["message"])]),l("div",Os,[o(v,{for:"edit_user_type",value:"User Type"}),V(l("select",{id:"edit_user_type",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full","onUpdate:modelValue":e[18]||(e[18]=s=>a.user_type=s)},e[45]||(e[45]=[l("option",{value:"employee"},"Employee",-1),l("option",{value:"contractor"},"Contractor",-1)]),512),[[j,a.user_type]]),o(x,{message:r.value.user_type?r.value.user_type[0]:"",class:"mt-2"},null,8,["message"])]),l("div",Ks,[o(v,{for:"edit_timezone",value:"Timezone"}),o(h,{id:"edit_timezone",type:"text",class:"mt-1 block w-full",modelValue:a.timezone,"onUpdate:modelValue":e[19]||(e[19]=s=>a.timezone=s),placeholder:"e.g., Europe/London"},null,8,["modelValue"]),o(x,{message:r.value.timezone?r.value.timezone[0]:"",class:"mt-2"},null,8,["message"])]),l("div",Ys,[o(Y,{onClick:e[20]||(e[20]=s=>E.value=!1)},{default:w(()=>e[46]||(e[46]=[_("Cancel",-1)])),_:1,__:[46]}),o(R,{class:"ms-3",type:"submit"},{default:w(()=>e[47]||(e[47]=[_("Update User",-1)])),_:1,__:[47]})])],32)])]),_:1},8,["show"]),o(K,{show:S.value,onClose:e[23]||(e[23]=s=>S.value=!1)},{default:w(()=>{var s;return[l("div",Zs,[e[52]||(e[52]=l("h2",{class:"text-lg font-medium text-gray-900"}," Archive this user? ",-1)),e[53]||(e[53]=l("p",{class:"mt-1 text-sm text-gray-600"}," The user will be archived and can be unarchived later. No data will be permanently removed. ",-1)),k.value?(n(),i("div",Gs,[e[49]||(e[49]=l("strong",null,"User:",-1)),_(" "+u(k.value.name)+" ("+u(k.value.email)+") - Role: "+u(((s=k.value.role_data)==null?void 0:s.name)||(typeof k.value.role=="string"?k.value.role:"Employee")),1)])):b("",!0),d.value?(n(),i("div",Ts,u(d.value),1)):b("",!0),l("div",Qs,[o(Y,{onClick:e[22]||(e[22]=m=>S.value=!1)},{default:w(()=>e[50]||(e[50]=[_("Cancel",-1)])),_:1,__:[50]}),o(Ve,{class:"ms-3",onClick:pe},{default:w(()=>e[51]||(e[51]=[_("Archive User",-1)])),_:1,__:[51]})])])]}),_:1},8,["show"])]),_:1})],64))}};export{ht as default};
