import g from"./StepCard-D3kJ9o_B.js";import a from"./DataTokenInserter-Ih7p2Wa9.js";import{l as x,q as y,o as u,w as k,a as l,c as m,k as c,F as f,i as I,t as w,e as n}from"./app-nAqQJsbR.js";import"./createLucideIcon-5puRqNY3.js";import"./x-P1eR8_mO.js";import"./trash-CxuT3PTC.js";import"./workflowStore-DJRVtfVl.js";const B={class:"space-y-4"},S=["value"],C=["value"],T={class:"flex items-center gap-2 mt-1"},F=["value"],R={class:"flex items-center gap-2 mt-1"},D=["value"],N={class:"flex items-center gap-2 mt-1"},O=["value"],V={class:"flex items-center gap-2 mt-1"},q=["value"],L={class:"flex items-center gap-2 mt-1"},$=["value"],j={key:2},A={class:"flex items-center gap-2 mt-1"},E=["value"],K={__name:"TransformStep",props:{step:{type:Object,required:!0},allStepsBefore:{type:Array,default:()=>[]}},emits:["update:step","delete"],setup(o,{emit:v}){const d=o,p=v,r=x({get:()=>d.step.step_config||{},set:i=>p("update:step",{...d.step,step_config:i})});function s(i,e){r.value={...r.value,[i]:e}}const b=[{value:"remove_after_marker",label:"Remove content after a marker"},{value:"find_and_replace",label:"Find and replace text"},{value:"remove_html",label:"Plain Text Only"}];return(i,e)=>(u(),y(g,{icon:"✂️",title:d.step.name||"Transform Content",onDelete:()=>p("delete"),"onUpdate:title":e[13]||(e[13]=t=>p("update:step",{...d.step,name:t}))},{default:k(()=>[l("div",B,[l("div",null,[e[15]||(e[15]=l("label",{class:"block text-sm font-medium text-gray-700"},"Choose a transformation",-1)),l("select",{value:r.value.type||"",onChange:e[0]||(e[0]=t=>s("type",t.target.value)),class:"w-full p-2 border border-gray-300 rounded-md text-sm mt-1"},[e[14]||(e[14]=l("option",{value:"",disabled:""},"Select a transformation...",-1)),(u(),m(f,null,I(b,t=>l("option",{key:t.value,value:t.value},w(t.label),9,C)),64))],40,S)]),r.value.type==="remove_after_marker"?(u(),m(f,{key:0},[l("div",null,[e[16]||(e[16]=l("label",{class:"block text-sm font-medium text-gray-700"},"In this data:",-1)),l("div",T,[l("input",{type:"text",value:r.value.source||"",onInput:e[1]||(e[1]=t=>s("source",t.target.value)),class:"w-full p-2 border border-gray-300 rounded-md text-sm",placeholder:"e.g., {{trigger.body}}"},null,40,F),n(a,{"all-steps-before":o.allStepsBefore,onInsert:e[2]||(e[2]=t=>s("source",t))},null,8,["all-steps-before"])])]),l("div",null,[e[17]||(e[17]=l("label",{class:"block text-sm font-medium text-gray-700"},"Remove everything after this marker:",-1)),l("div",R,[l("input",{type:"text",value:r.value.marker||"",onInput:e[3]||(e[3]=t=>s("marker",t.target.value)),class:"w-full p-2 border border-gray-300 rounded-md text-sm",placeholder:"e.g., 'On [date], [sender] wrote:'"},null,40,D),n(a,{"all-steps-before":o.allStepsBefore,onInsert:e[4]||(e[4]=t=>s("marker",t))},null,8,["all-steps-before"])])])],64)):r.value.type==="find_and_replace"?(u(),m(f,{key:1},[l("div",null,[e[18]||(e[18]=l("label",{class:"block text-sm font-medium text-gray-700"},"In this data:",-1)),l("div",N,[l("input",{type:"text",value:r.value.source||"",onInput:e[5]||(e[5]=t=>s("source",t.target.value)),class:"w-full p-2 border border-gray-300 rounded-md text-sm",placeholder:"e.g., {{trigger.body}}"},null,40,O),n(a,{"all-steps-before":o.allStepsBefore,onInsert:e[6]||(e[6]=t=>s("source",t))},null,8,["all-steps-before"])])]),l("div",null,[e[19]||(e[19]=l("label",{class:"block text-sm font-medium text-gray-700"},"Find this text:",-1)),l("div",V,[l("input",{type:"text",value:r.value.find||"",onInput:e[7]||(e[7]=t=>s("find",t.target.value)),class:"w-full p-2 border border-gray-300 rounded-md text-sm",placeholder:"Text to search for"},null,40,q),n(a,{"all-steps-before":o.allStepsBefore,onInsert:e[8]||(e[8]=t=>s("find",t))},null,8,["all-steps-before"])])]),l("div",null,[e[20]||(e[20]=l("label",{class:"block text-sm font-medium text-gray-700"},"Replace it with:",-1)),l("div",L,[l("input",{type:"text",value:r.value.replace||"",onInput:e[9]||(e[9]=t=>s("replace",t.target.value)),class:"w-full p-2 border border-gray-300 rounded-md text-sm",placeholder:"Replacement text (can be empty)"},null,40,$),n(a,{"all-steps-before":o.allStepsBefore,onInsert:e[10]||(e[10]=t=>s("replace",t))},null,8,["all-steps-before"])])])],64)):r.value.type==="remove_html"?(u(),m("div",j,[e[21]||(e[21]=l("label",{class:"block text-sm font-medium text-gray-700"},"HTML content to clean:",-1)),l("div",A,[l("input",{type:"text",value:r.value.source||"",onInput:e[11]||(e[11]=t=>s("source",t.target.value)),class:"w-full p-2 border border-gray-300 rounded-md text-sm",placeholder:"e.g., {{trigger.body}}"},null,40,E),n(a,{"all-steps-before":o.allStepsBefore,onInsert:e[12]||(e[12]=t=>s("source",t))},null,8,["all-steps-before"])])])):c("",!0)])]),_:1},8,["title","onDelete"]))}};export{K as default};
