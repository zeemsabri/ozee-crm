import{c as r,o,a as e,r as b,w as Je,b as Fe,i as B,m as _,v as _e,z as ae,y as xe,F as k,k as D,n as Z,t as l,p as Ye,d as Ie,f as p,u as x,h as Ge,g as ke,j as v,K as ne,q as He,L as Qe,H as We}from"./app-D7QPKPE4.js";import{a as Xe,_ as je}from"./AuthenticatedLayout-DLOIOO-1.js";import{_ as et}from"./MultiSelectDropdown-CyRBOWTE.js";import{R as tt}from"./RightSidebar-CDH0lA8j.js";import{_ as st}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as Y}from"./SparklesIcon-o1y4F0Q9.js";import{r as at}from"./MagnifyingGlassIcon-Yho4_frP.js";import{r as fe}from"./CheckCircleIcon-Q4N699jJ.js";import{r as nt}from"./BriefcaseIcon-BerMzMIq.js";import{r as ot}from"./ChevronDownIcon-CECiwj8J.js";import{r as Le}from"./ArrowPathIcon-C87Rbg_B.js";import{r as it}from"./ClockIcon-B7eRvVL7.js";import{r as rt}from"./CalendarIcon-weZq0iBo.js";import"./PrimaryButton-Df8eYq8U.js";import"./Modal-HDlQE6cu.js";import"./InputLabel-CWCGwrcM.js";import"./InputError-DbYTA_wQ.js";import"./SecondaryButton--nZ9ZcNb.js";import"./index-Cwl7QULI.js";import"./BaseFormModal-BHwhVhPM.js";import"./TextInput-DyWNBG4w.js";import"./SelectDropdown-Tj0LL-lv.js";/* empty css                                                                       */import"./debounce-C-hnF4Z3.js";import"./ApplicationLogo-WMpBwhKM.js";import"./createLucideIcon-Bev7MvDm.js";import"./plus-DU_dcSEX.js";import"./DangerButton-DfR7ENZL.js";import"./moment-BLMuvzoS.js";import"./taskState-KUgl5y92.js";import"./NoticeboardModal-B2iDMcWY.js";import"./check-DtaHoLJM.js";import"./x-2hL9HgOV.js";function dt(I,U){return o(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m3.75 13.5 10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75Z"})])}function lt(I,U){return o(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m4.5 15.75 7.5-7.5 7.5 7.5"})])}function ct(I,U){return o(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 7.5V6.108c0-1.135.845-2.098 1.976-2.192.373-.03.748-.057 1.123-.08M15.75 18H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08M15.75 18.75v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5A3.375 3.375 0 0 0 6.375 7.5H5.25m11.9-3.664A2.251 2.251 0 0 0 15 2.25h-1.5a2.251 2.251 0 0 0-2.15 1.586m5.8 0c.065.21.1.433.1.664v.75h-6V4.5c0-.231.035-.454.1-.664M6.75 7.5H4.875c-.621 0-1.125.504-1.125 1.125v12c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V16.5a9 9 0 0 0-9-9Z"})])}function Be(I,U){return o(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})])}function De(I,U){return o(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"})])}function ut(I,U){return o(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"})])}function pt(I,U){return o(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.05 4.575a1.575 1.575 0 1 0-3.15 0v3m3.15-3v-1.5a1.575 1.575 0 0 1 3.15 0v1.5m-3.15 0 .075 5.925m3.075.75V4.575m0 0a1.575 1.575 0 0 1 3.15 0V15M6.9 7.575a1.575 1.575 0 1 0-3.15 0v8.175a6.75 6.75 0 0 0 6.75 6.75h2.018a5.25 5.25 0 0 0 3.712-1.538l1.732-1.732a5.25 5.25 0 0 0 1.538-3.712l.003-2.024a.668.668 0 0 1 .198-.471 1.575 1.575 0 1 0-2.228-2.228 3.818 3.818 0 0 0-1.12 2.687M6.9 7.575V12m6.27 4.318A4.49 4.49 0 0 1 16.35 15m.002 0h-.002"})])}function gt(I,U){return o(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.72 13.829c-.24.03-.48.062-.72.096m.72-.096a42.415 42.415 0 0 1 10.56 0m-10.56 0L6.34 18m10.94-4.171c.24.03.48.062.72.096m-.72-.096L17.66 18m0 0 .229 2.523a1.125 1.125 0 0 1-1.12 1.227H7.231c-.662 0-1.18-.568-1.12-1.227L6.34 18m11.318 0h1.091A2.25 2.25 0 0 0 21 15.75V9.456c0-1.081-.768-2.015-1.837-2.175a48.055 48.055 0 0 0-1.913-.247M6.34 18H5.25A2.25 2.25 0 0 1 3 15.75V9.456c0-1.081.768-2.015 1.837-2.175a48.041 48.041 0 0 1 1.913-.247m10.5 0a48.536 48.536 0 0 0-10.5 0m10.5 0V3.375c0-.621-.504-1.125-1.125-1.125h-8.25c-.621 0-1.125.504-1.125 1.125v3.659M18 10.5h.008v.008H18V10.5Zm-3 0h.008v.008H15V10.5Z"})])}function le(I,U){return o(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"})])}const mt={class:"relative flex-1"},xt=["onKeydown","placeholder"],_t=["onKeydown","placeholder"],ht={key:2,class:"absolute z-50 bottom-full mb-2 w-64 bg-white border border-gray-200 rounded-2xl shadow-2xl max-h-60 overflow-y-auto p-2"},yt=["onClick"],ft={class:"flex items-center gap-2"},vt={class:"h-6 w-6 rounded-lg bg-indigo-100 flex items-center justify-center text-[10px] text-indigo-600 font-black"},bt={class:"text-[9px] text-gray-400 uppercase font-bold"},Ee={__name:"MentionInput",props:{projectId:{type:Number,required:!0},placeholder:{type:String,default:"Add quick action point..."},modelValue:{type:String,default:""},type:{type:String,default:"input"}},emits:["update:modelValue","submit","user-selected"],setup(I,{expose:U,emit:he}){const K=I,q=he,N=b(K.modelValue);Je(()=>K.modelValue,$=>{N.value=$});const ie=b([]),T=b(!1),H=b([]),V=b(0),F=b(null),A=b(-1),ce=async()=>{try{const $=await window.axios.get(`/api/projects/${K.projectId}/sections/meeting-attendees`),S=($.data.users||[]).map(M=>({...M,memberType:"User"})),g=($.data.clients||[]).map(M=>({...M,memberType:"Client"}));ie.value=[...S,...g]}catch($){console.error("Failed to fetch project members for mentions:",$)}},oe=$=>{q("update:modelValue",N.value);const S=$.target.selectionStart,g=N.value.slice(0,S),M=g.lastIndexOf("@");if(M!==-1&&(M===0||[" ",`
`,"\r"].includes(g[M-1]))){const J=g.slice(M+1);A.value=M,H.value=ie.value.filter(R=>R.name.toLowerCase().includes(J.toLowerCase())),H.value.length>0?(T.value=!0,V.value=0):T.value=!1}else T.value=!1},re=$=>{const S=N.value.slice(0,A.value),g=N.value.slice(F.value.selectionStart);N.value=`${S}@${$.name} ${g}`,T.value=!1,q("update:modelValue",N.value),q("user-selected",$),Ye(()=>{F.value.focus()})},de=()=>{T.value&&(V.value=(V.value+1)%H.value.length)},ue=()=>{T.value&&(V.value=(V.value-1+H.value.length)%H.value.length)},z=$=>{T.value&&H.value.length>0?($.preventDefault(),re(H.value[V.value])):K.type==="input"&&($.preventDefault(),q("submit"))};return Fe(()=>{ce()}),U({focus:()=>{var $;return($=F.value)==null?void 0:$.focus()},clear:()=>{N.value="",q("update:modelValue","")}}),($,S)=>(o(),r("div",mt,[I.type==="textarea"?B((o(),r("textarea",{key:0,ref_key:"inputRef",ref:F,"onUpdate:modelValue":S[0]||(S[0]=g=>N.value=g),onInput:oe,onKeydown:[ae(xe(de,["prevent"]),["down"]),ae(xe(ue,["prevent"]),["up"]),ae(z,["enter"]),S[1]||(S[1]=ae(g=>T.value=!1,["esc"]))],onBlur:S[2]||(S[2]=g=>$.setTimeout(()=>T.value=!1,200)),placeholder:I.placeholder,class:"w-full rounded-2xl border-indigo-100 focus:ring-indigo-500 text-sm p-4 min-h-[120px] placeholder:text-indigo-200"},null,40,xt)),[[_e,N.value]]):B((o(),r("input",{key:1,ref_key:"inputRef",ref:F,type:"text","onUpdate:modelValue":S[3]||(S[3]=g=>N.value=g),onInput:oe,onKeydown:[ae(xe(de,["prevent"]),["down"]),ae(xe(ue,["prevent"]),["up"]),ae(xe(z,["prevent"]),["enter"]),S[4]||(S[4]=ae(g=>T.value=!1,["esc"]))],onBlur:S[5]||(S[5]=g=>$.setTimeout(()=>T.value=!1,200)),placeholder:I.placeholder,class:"w-full rounded-xl border-gray-200 text-sm focus:ring-indigo-500 font-medium h-10 px-4"},null,40,_t)),[[_e,N.value]]),T.value&&H.value.length>0?(o(),r("div",ht,[S[6]||(S[6]=e("div",{class:"px-3 py-2 text-[10px] font-black text-gray-400 uppercase tracking-widest border-b border-gray-50 mb-1"},"Project Members",-1)),(o(!0),r(k,null,D(H.value,(g,M)=>{var J,R;return o(),r("div",{key:g.id,onClick:pe=>re(g),class:Z([{"bg-indigo-50 text-indigo-700":V.value===M,"text-gray-700":V.value!==M},"px-3 py-2 text-xs font-bold cursor-pointer rounded-xl hover:bg-gray-50 flex items-center justify-between transition-colors"])},[e("div",ft,[e("div",vt,l(g.name.substring(0,2).toUpperCase()),1),e("span",null,l(g.name),1)]),e("span",bt,l(g.memberType==="Client"?"Client":((J=g.pivot)==null?void 0:J.role)||((R=g.role)==null?void 0:R.name)||"User"),1)],10,yt)}),128))])):_("",!0)]))}},wt={class:"flex justify-between items-center print:hidden"},kt={class:"flex gap-3"},Dt=["disabled"],Ct={class:"py-6 bg-gray-50 min-h-screen print:bg-white print:py-0"},$t={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 space-y-6"},St={class:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6 print:hidden"},At={class:"grid grid-cols-1 md:grid-cols-5 gap-6 items-end"},Mt={class:"md:col-span-2"},Vt={class:"text-[10px] font-black text-indigo-600 uppercase mb-2 block flex items-center gap-1"},Tt={class:"mt-6 flex bg-gray-100 p-1 rounded-xl w-full max-w-md mx-auto"},Ut={class:"animate-in fade-in duration-500 space-y-6"},Nt={class:"flex items-center justify-between px-2"},Pt={class:"text-lg font-black text-gray-800 flex items-center gap-2"},It={class:"text-xs font-bold text-gray-400 uppercase tracking-widest"},Ht={key:0,class:"bg-white p-16 rounded-[2.5rem] border-2 border-dashed border-gray-200 text-center"},Lt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Bt={class:"p-6 bg-gray-50/50 border-b border-gray-100 flex items-center gap-4"},Et={class:"h-12 w-12 rounded-2xl bg-indigo-600 flex items-center justify-center text-white font-black text-lg shadow-sm"},Ft={class:"font-black text-gray-900 leading-tight text-lg"},Rt={class:"p-6 space-y-6 flex-1"},Ot={key:0},Zt={class:"text-[10px] font-black text-indigo-600 uppercase tracking-widest mb-3 flex items-center gap-1"},Kt=["innerHTML"],qt={key:1},zt={class:"text-[10px] font-black text-orange-500 uppercase tracking-widest mb-3 flex items-center gap-1"},Jt={class:"text-[9px] font-black mt-2 text-orange-400 uppercase"},Yt={key:2},Gt={class:"text-[10px] font-black text-green-600 uppercase tracking-widest mb-3 flex items-center gap-1"},Qt={class:"space-y-2"},Wt=["onClick"],Xt={class:"text-xs font-bold text-gray-800"},jt={key:0,class:"text-[10px] text-gray-400 line-clamp-1 mb-1"},es={class:"text-[9px] text-gray-400 font-bold uppercase tracking-tight"},ts={key:3},ss={class:"text-[10px] font-black text-blue-500 uppercase tracking-widest mb-3 flex items-center gap-1"},as=["innerHTML"],ns={class:"text-[9px] text-blue-400 font-black uppercase"},os={key:4},is={class:"text-[10px] font-black text-purple-600 uppercase tracking-widest mb-3 flex items-center gap-1"},rs={class:"text-xs font-bold text-gray-800 truncate"},ds={key:0,class:"text-[10px] text-purple-600 italic mt-1 font-medium line-clamp-2"},ls={class:"text-[9px] text-purple-400 font-black uppercase mt-1"},cs={class:"animate-in fade-in duration-500 space-y-6"},us=["onClick"],ps={class:"flex items-center space-x-5"},gs={class:"h-14 w-14 rounded-2xl bg-indigo-50 flex items-center justify-center text-indigo-600 shadow-inner"},ms={class:"font-black text-xl text-gray-900 leading-none"},xs={class:"flex items-center gap-3 mt-2"},_s={class:"px-2 py-0.5 rounded-lg text-[10px] font-black uppercase tracking-widest bg-gray-100 text-gray-600"},hs={key:0,class:"flex items-center text-[10px] text-indigo-500 font-bold uppercase"},ys={class:"flex items-center gap-3"},fs=["onClick"],vs={class:"border-t border-gray-100 bg-gray-50/10"},bs={class:"px-8 py-4 bg-white border-b border-gray-100 flex flex-col md:flex-row items-center justify-between gap-4"},ws={class:"flex items-center gap-3 w-full md:w-auto"},ks=["onUpdate:modelValue"],Ds=["value"],Cs={class:"flex space-x-1 p-1 bg-gray-100 rounded-xl overflow-x-auto scrollbar-hide"},$s=["onClick"],Ss={key:0,class:"ml-1 px-1.5 py-0.5 bg-indigo-500 text-white rounded-md text-[8px]"},As={class:"p-8"},Ms={class:"space-y-6"},Vs={class:"space-y-4"},Ts={class:"flex items-center justify-between"},Us={class:"text-[10px] font-black tracking-widest text-indigo-600 uppercase flex items-center gap-1"},Ns={class:"flex gap-2"},Ps=["onClick","disabled"],Is={key:0,class:"space-y-2"},Hs=["checked","onChange"],Ls={class:"flex-1 min-w-0"},Bs={key:0,class:"text-[9px] font-black text-indigo-500 uppercase flex items-center gap-1 mt-0.5"},Es=["onClick"],Fs={key:1,class:"mt-4 pt-4 border-t border-dashed border-gray-100"},Rs={class:"space-y-2 opacity-75"},Os=["checked","onChange"],Zs={class:"flex-1 min-w-0"},Ks={class:"text-xs font-medium text-gray-600 block truncate"},qs={key:0,class:"text-[8px] font-black text-indigo-400 uppercase flex items-center gap-0.5 mt-0.5"},zs={class:"text-[8px] font-black text-gray-300 ml-auto uppercase"},Js={key:0,class:"space-y-6"},Ys={key:0,class:"space-y-3"},Gs={class:"text-[10px] font-black tracking-widest text-red-500 uppercase flex items-center gap-1"},Qs=["onClick"],Ws={class:"flex justify-between items-start"},Xs={class:"font-bold text-gray-900"},js={key:0,class:"mt-2 text-[11px] text-gray-500 line-clamp-2"},ea={class:"text-[10px] font-bold text-gray-500 flex items-center gap-1"},ta={key:1,class:"space-y-3"},sa={class:"text-[10px] font-black tracking-widest text-indigo-500 uppercase flex items-center gap-1"},aa=["onClick"],na={class:"flex justify-between items-start"},oa={class:"flex-1"},ia={class:"font-bold text-gray-900"},ra={key:0,class:"mt-2 text-[11px] text-gray-500 line-clamp-2"},da={key:1,class:"mt-3 p-2 bg-white/50 rounded-lg border border-indigo-50 text-[10px] italic text-gray-600"},la={class:"text-[10px] font-bold text-gray-500 flex items-center gap-1 ml-4"},ca={key:2,class:"space-y-3"},ua={class:"text-[10px] font-black tracking-widest text-green-500 uppercase flex items-center gap-1"},pa=["onClick"],ga={class:"flex items-start gap-3"},ma={class:"flex-1"},xa={class:"font-bold text-gray-900 text-sm"},_a={key:0,class:"mt-1 text-[11px] text-gray-500"},ha={class:"ml-auto text-[10px] text-gray-400 font-bold uppercase"},ya={key:3,class:"space-y-3"},fa={class:"text-[10px] font-black tracking-widest text-blue-500 uppercase flex items-center gap-1"},va={class:"text-[9px] font-black text-gray-400 uppercase tracking-widest mb-2 block"},ba=["innerHTML"],wa={class:"flex items-center gap-2 text-[10px] font-bold text-gray-500"},ka={key:4,class:"space-y-3"},Da={class:"text-[10px] font-black tracking-widest text-purple-500 uppercase flex items-center gap-1"},Ca={class:"flex items-center justify-between mb-2"},$a={class:"text-sm font-bold text-gray-800"},Sa={class:"text-[10px] text-gray-500 font-bold uppercase"},Aa={key:0,class:"p-3 bg-white/60 rounded-lg border border-purple-50 text-[11px] text-purple-700 font-medium"},Ma={key:1,class:"text-center py-8"},Va={class:"space-y-8"},Ta={key:0,class:"space-y-4"},Ua={class:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-2 border-b border-gray-100 pb-2"},Na=["onClick"],Pa={class:"flex justify-between items-start"},Ia={class:"font-black text-gray-900 group-hover:text-indigo-600 transition"},Ha={class:"flex items-center gap-4 mt-2"},La={class:"text-[10px] font-bold text-gray-400 flex items-center gap-1 uppercase tracking-tighter"},Ba={class:"text-[10px] font-bold text-gray-400 flex items-center gap-1 uppercase tracking-tighter"},Ea={class:"bg-amber-50 text-amber-600 px-2 py-1 rounded-lg text-[10px] font-black uppercase"},Fa={key:0,class:"mt-4 p-4 bg-gray-50 rounded-2xl text-xs text-gray-600 whitespace-pre-wrap border border-gray-100"},Ra={key:0,class:"text-center text-gray-400 text-xs italic"},Oa={class:"space-y-8"},Za={key:0,class:"space-y-4"},Ka={class:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-2 border-b border-gray-100 pb-2"},qa={class:"flex items-start gap-4"},za={class:"font-black text-gray-900"},Ja={class:"text-[10px] font-bold text-gray-400 mt-1 uppercase tracking-tighter"},Ya={key:0,class:"mt-3 p-3 bg-gray-50 rounded-xl text-xs text-gray-500 border border-gray-100"},Ga={key:0,class:"text-center text-gray-400 text-xs italic"},Qa={class:"space-y-8"},Wa={key:0},Xa={class:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-4 border-b border-gray-100 pb-2"},ja={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},en={key:0,class:"absolute -top-2 -right-2 bg-indigo-600 text-white text-[8px] font-black uppercase px-2 py-1 rounded-full shadow-lg"},tn=["innerHTML"],sn={class:"mt-auto pt-4 border-t border-gray-50 flex items-center justify-between"},an={class:"flex items-center gap-2"},nn={class:"h-8 w-8 rounded-xl bg-gray-100 flex items-center justify-center text-[10px] font-black"},on={class:"text-xs font-bold text-gray-600"},rn={class:"text-[10px] text-gray-400 font-bold"},dn={key:0,class:"mt-8 bg-indigo-50/30 p-8 rounded-[2rem] border border-indigo-100"},ln={class:"text-sm font-black text-indigo-900 mb-4 flex items-center gap-2"},cn={class:"flex justify-end mt-4"},un=["onClick","disabled"],pn={class:"space-y-8"},gn={key:0,class:"space-y-6"},mn={class:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-2 border-b border-gray-100 pb-2"},xn={class:"flex flex-col md:flex-row justify-between md:items-center gap-4 mb-6"},_n={class:"flex items-center gap-4"},hn={class:"font-black text-gray-900 text-lg leading-none"},yn={class:"text-[10px] font-bold text-gray-400 uppercase mt-2 tracking-widest"},fn={class:"text-[11px] font-bold text-gray-400 bg-gray-50 px-3 py-1.5 rounded-xl"},vn={key:0,class:"space-y-4"},bn={class:"flex items-center gap-2 mb-3 text-purple-600"},wn={class:"text-sm text-gray-700 leading-relaxed font-medium"},kn={__name:"ProjectIndex",setup(I){const U=b([]),he=b([]),K=b(!1),q=b(!1),N=b({}),ie=b([]),T=b(""),H=b(""),V=b(""),F=b({}),A=b({}),ce=b({}),oe=b(!1),re=b(null),de=b(null),ue=b([]),z=b("summary"),$=d=>{F.value[d]=!F.value[d]},S=(d,s)=>{A.value[d]=s},g=d=>{if(!V.value||!d)return!1;const s=V.value.split("T")[0],t=d.split("T")[0];return s===t},M=d=>{if(!V.value||!d.due_date)return!1;const s=V.value.split("T")[0];return d.due_date===s},J=d=>d?d.replace(/\*\*(.*?)\*\*/g,'<strong class="font-black text-gray-900">$1</strong>').replace(/\n/g,"<br/>"):"",R=b({}),pe=b({}),ge=b({}),ye=b({}),ve=b({}),Ce=async d=>{var t;const s=ge.value[d.id];if(s){ye.value[d.id]=!0;try{const u=((t=d.data)==null?void 0:t.action_points)||[],c=ve.value[d.id],w={id:Date.now(),content:s,date:V.value,user_id:c?c.id:null,user_name:c?c.name:null,done:!1,created_at:new Date().toISOString()},h=[...u,w];await window.axios.put(`/api/projects/${d.id}/update-data`,{key:"action_points",value:h}),ge.value[d.id]="",ve.value[d.id]=null,d.data={...d.data||{},action_points:h}}catch(u){console.error(u)}finally{ye.value[d.id]=!1}}},Re=(d,s)=>{ve.value[d.id]=s},$e=async(d,s)=>{var t;try{const u=[...((t=d.data)==null?void 0:t.action_points)||[]],c=u.findIndex(w=>w.id===s);if(c===-1)return;u[c].done=!u[c].done,await window.axios.put(`/api/projects/${d.id}/update-data`,{key:"action_points",value:u}),d.data.action_points=u}catch(u){console.error(u)}},Oe=async(d,s)=>{var t;if(confirm("Are you sure you want to delete this action point?"))try{const u=(((t=d.data)==null?void 0:t.action_points)||[]).filter(c=>c.id!==s);await window.axios.put(`/api/projects/${d.id}/update-data`,{key:"action_points",value:u}),d.data.action_points=u}catch(u){console.error(u)}},Ze=async d=>{if(R.value[d]){pe.value[d]=!0;try{await window.axios.post(`/api/projects/${d}/notes`,{notes:[{content:R.value[d]}],type:"daily_summary"}),R.value[d]="",be()}catch(s){console.error(s)}finally{pe.value[d]=!1}}},Se=Ie(()=>{const d={},s=t=>{const u=t||"Unassigned";return d[u]||(d[u]={tasksDone:[],standups:[],meetings:[],emails:[],notes:[],dailySummaries:[]}),d[u]};return U.value.forEach(t=>{var u,c,w;(u=t.tasks)==null||u.forEach(h=>{g(h.updated_at)&&h.status==="Done"&&s(h.assigned_to).tasksDone.push({...h,projectName:t.name})}),(c=t.project_notes)==null||c.forEach(h=>{if(g(h.created_at)){const E=s(h.creator_name);h.type==="standup"?E.standups.push({...h,projectName:t.name}):h.type==="meeting_minutes"?E.meetings.push({...h,projectName:t.name}):h.type==="daily_summary"?E.dailySummaries.push({...h,projectName:t.name}):E.notes.push({...h,projectName:t.name})}}),(w=t.emails)==null||w.forEach(h=>{g(h.created_at)&&s(h.sender).emails.push({...h,projectName:t.name})})}),d}),Ae=Ie(()=>Object.keys(Se.value).length),Ke=d=>{var t,u,c;const s=new Set;return(t=d.tasks)==null||t.forEach(w=>w.assigned_to&&s.add(w.assigned_to)),(u=d.project_notes)==null||u.forEach(w=>w.creator_name&&s.add(w.creator_name)),(c=d.emails)==null||c.forEach(w=>w.sender&&s.add(w.sender)),Array.from(s).sort()},G=(d,s,t)=>{const u=ce.value[s];return!u||u==="all"?d:d.filter(c=>c[t]===u)},me=async d=>{if(!(!d||!d.id)){re.value=d.id,de.value=d.project_id||0;try{const s=await window.axios.get(`/api/projects/${de.value}/sections/clients-users`);ue.value=s.data.users||[]}catch(s){console.error(s)}oe.value=!0}},be=async()=>{K.value=!0;try{const d=await window.axios.get("/api/productivity/project-report",{params:{project_ids:ie.value.join(","),date_start:T.value,date_end:H.value}});U.value=d.data.reportData,he.value=d.data.projects,U.value.forEach(s=>{s.has_activity&&(F.value[s.id]=!0,A.value[s.id]="today")})}catch(d){console.error(d)}finally{K.value=!1}},f=(d,s)=>d?d.filter(t=>g(t[s])):[],P=(d,s)=>d?d.filter(t=>!g(t[s])):[],qe=()=>{const d=U.value.map(s=>{var t,u,c,w,h,E,Q,W,X,j,ee,te,se;return{projectName:s.name,status:s.status,highlightedActivity:{notes:f((t=s.project_notes)==null?void 0:t.filter(i=>!i.type||i.type==="note"),"created_at").map(i=>({author:i.creator_name,content:i.content,date:i.created_at})),standups:f((u=s.project_notes)==null?void 0:u.filter(i=>i.type==="standup"),"created_at").map(i=>({author:i.creator_name,content:i.content,date:i.created_at})),meetingMinutes:f((c=s.project_notes)==null?void 0:c.filter(i=>i.type==="meeting_minutes"),"created_at").map(i=>({author:i.creator_name,content:i.content,date:i.created_at})),dailySummary:f((w=s.project_notes)==null?void 0:w.filter(i=>i.type==="daily_summary"),"created_at").map(i=>({author:i.creator_name,content:i.content,date:i.created_at})),tasksTodo:f((h=s.tasks)==null?void 0:h.filter(i=>i.status!=="Done"),"updated_at").map(i=>{var n,y;return{name:i.name,description:i.description,assignee:i.assigned_to,status:i.status,latestNotes:(y=(n=i.notes)==null?void 0:n[0])==null?void 0:y.content}}),tasksDone:f((E=s.tasks)==null?void 0:E.filter(i=>i.status==="Done"),"updated_at").map(i=>{var n,y;return{name:i.name,description:i.description,assignee:i.assigned_to,finishedAt:i.updated_at,latestNotes:(y=(n=i.notes)==null?void 0:n[0])==null?void 0:y.content}}),tasksDueToday:(Q=s.tasks)==null?void 0:Q.filter(i=>M(i)).map(i=>({name:i.name,description:i.description,assignee:i.assigned_to,status:i.status})),communications:f(s.emails,"created_at").map(i=>{var n,y;return{subject:i.subject,sender:i.sender,date:i.created_at,aiContext:(y=(n=i.contexts)==null?void 0:n[0])==null?void 0:y.summary}}),actionPoints:(((W=s.data)==null?void 0:W.action_points)||[]).filter(i=>g(i.date)).map(i=>({content:i.content,done:i.done}))},archivedActivity:{notes:P((X=s.project_notes)==null?void 0:X.filter(i=>!i.type||i.type==="note"),"created_at").map(i=>({author:i.creator_name,content:i.content,date:i.created_at})),standups:P((j=s.project_notes)==null?void 0:j.filter(i=>i.type==="standup"),"created_at").map(i=>({author:i.creator_name,content:i.content,date:i.created_at})),meetingMinutes:P((ee=s.project_notes)==null?void 0:ee.filter(i=>i.type==="meeting_minutes"),"created_at").map(i=>({author:i.creator_name,content:i.content,date:i.created_at})),tasksTodo:P((te=s.tasks)==null?void 0:te.filter(i=>i.status!=="Done"),"updated_at").map(i=>{var n,y;return{name:i.name,description:i.description,assignee:i.assigned_to,status:i.status,latestNotes:(y=(n=i.notes)==null?void 0:n[0])==null?void 0:y.content}}),tasksDone:P((se=s.tasks)==null?void 0:se.filter(i=>i.status==="Done"),"updated_at").map(i=>{var n,y;return{name:i.name,description:i.description,assignee:i.assigned_to,finishedAt:i.updated_at,latestNotes:(y=(n=i.notes)==null?void 0:n[0])==null?void 0:y.content}}),communications:P(s.emails,"created_at").map(i=>{var n,y;return{subject:i.subject,sender:i.sender,date:i.created_at,aiContext:(y=(n=i.contexts)==null?void 0:n[0])==null?void 0:y.summary}})}}});navigator.clipboard.writeText(JSON.stringify(d,null,2)).then(()=>{q.value=!0,setTimeout(()=>q.value=!1,3e3)})},ze=(d,s)=>{var u,c,w,h,E,Q,W,X,j,ee,te,se,i;s&&s.stopPropagation();const t={projectName:d.name,status:d.status,highlightedActivity:{notes:f((u=d.project_notes)==null?void 0:u.filter(n=>!n.type||n.type==="note"),"created_at").map(n=>({author:n.creator_name,content:n.content,date:n.created_at})),standups:f((c=d.project_notes)==null?void 0:c.filter(n=>n.type==="standup"),"created_at").map(n=>({author:n.creator_name,content:n.content,date:n.created_at})),meetingMinutes:f((w=d.project_notes)==null?void 0:w.filter(n=>n.type==="meeting_minutes"),"created_at").map(n=>({author:n.creator_name,content:n.content,date:n.created_at})),dailySummary:f((h=d.project_notes)==null?void 0:h.filter(n=>n.type==="daily_summary"),"created_at").map(n=>({author:n.creator_name,content:n.content,date:n.created_at})),tasksTodo:f((E=d.tasks)==null?void 0:E.filter(n=>n.status!=="Done"),"updated_at").map(n=>{var y,L;return{name:n.name,description:n.description,assignee:n.assigned_to,latestNotes:(L=(y=n.notes)==null?void 0:y[0])==null?void 0:L.content}}),tasksDone:f((Q=d.tasks)==null?void 0:Q.filter(n=>n.status==="Done"),"updated_at").map(n=>{var y,L;return{name:n.name,description:n.description,assignee:n.assigned_to,latestNotes:(L=(y=n.notes)==null?void 0:y[0])==null?void 0:L.content}}),tasksDueToday:(W=d.tasks)==null?void 0:W.filter(n=>M(n)).map(n=>({name:n.name,description:n.description,assignee:n.assigned_to,status:n.status})),communications:f(d.emails,"created_at").map(n=>{var y,L;return{subject:n.subject,aiContext:(L=(y=n.contexts)==null?void 0:y[0])==null?void 0:L.summary}}),actionPoints:(((X=d.data)==null?void 0:X.action_points)||[]).filter(n=>g(n.date)).map(n=>({content:n.content,done:n.done}))},archivedActivity:{notes:P((j=d.project_notes)==null?void 0:j.filter(n=>!n.type||n.type==="note"),"created_at").map(n=>({author:n.creator_name,content:n.content,date:n.created_at})),standups:P((ee=d.project_notes)==null?void 0:ee.filter(n=>n.type==="standup"),"created_at").map(n=>({author:n.creator_name,content:n.content,date:n.created_at})),meetingMinutes:P((te=d.project_notes)==null?void 0:te.filter(n=>n.type==="meeting_minutes"),"created_at").map(n=>({author:n.creator_name,content:n.content,date:n.created_at})),tasksTodo:P((se=d.tasks)==null?void 0:se.filter(n=>n.status!=="Done"),"updated_at").map(n=>({name:n.name,description:n.description,assignee:n.assigned_to})),tasksDone:P((i=d.tasks)==null?void 0:i.filter(n=>n.status==="Done"),"updated_at").map(n=>({name:n.name,description:n.description,assignee:n.assigned_to})),communications:P(d.emails,"created_at").map(n=>{var y,L;return{subject:n.subject,aiContext:(L=(y=n.contexts)==null?void 0:y[0])==null?void 0:L.summary}})}};navigator.clipboard.writeText(JSON.stringify(t,null,2)).then(()=>{N.value[d.id]=!0,setTimeout(()=>N.value[d.id]=!1,3e3)})},we=d=>d?new Date(d).toLocaleDateString("en-AU",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"}):"";return Fe(()=>{const d=new Date;V.value=d.toISOString().split("T")[0];const s=new Date(d.getFullYear(),d.getMonth(),1);T.value=s.toISOString().split("T")[0],H.value=d.toISOString().split("T")[0],be()}),(d,s)=>(o(),r(k,null,[p(x(Ge),{title:"Morning Briefing Report"}),p(je,null,{header:ke(()=>[e("div",wt,[s[11]||(s[11]=e("div",null,[e("h2",{class:"font-black text-2xl text-gray-900 tracking-tight"},"Morning Briefing"),e("p",{class:"text-sm text-gray-500 font-medium"},"Daily action point & productivity generator")],-1)),e("div",kt,[e("button",{onClick:qe,class:"flex items-center px-4 py-2 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-xl text-sm font-bold hover:shadow-lg transition"},[p(x(Y),{class:"h-4 w-4 mr-2"}),v(" "+l(q.value?"Copied JSON!":"AI Export (Global)"),1)]),e("button",{onClick:be,disabled:K.value,class:"flex items-center px-4 py-2 bg-indigo-600 text-white rounded-xl text-sm font-bold hover:bg-indigo-700 transition disabled:opacity-50"},[p(x(Le),{class:Z(["h-4 w-4 mr-2",{"animate-spin":K.value}])},null,8,["class"]),s[9]||(s[9]=v(" Refresh ",-1))],8,Dt),e("button",{onClick:s[0]||(s[0]=t=>d.window.print()),class:"flex items-center px-4 py-2 bg-white border border-gray-200 rounded-xl text-sm font-bold text-gray-700 hover:bg-gray-50 transition"},[p(x(gt),{class:"h-4 w-4 mr-2"}),s[10]||(s[10]=v(" PDF ",-1))])])])]),default:ke(()=>[e("div",Ct,[e("div",$t,[e("div",St,[e("div",At,[e("div",Mt,[s[12]||(s[12]=e("label",{class:"text-[10px] font-bold text-gray-400 uppercase mb-2 block tracking-widest"},"Selected Projects",-1)),p(et,{modelValue:ie.value,"onUpdate:modelValue":s[1]||(s[1]=t=>ie.value=t),options:he.value,"is-multi":!0,placeholder:"Analyze All Projects"},null,8,["modelValue","options"])]),e("div",null,[s[13]||(s[13]=e("label",{class:"text-[10px] font-bold text-gray-400 uppercase mb-2 block tracking-widest"},"Range Start",-1)),B(e("input",{type:"date","onUpdate:modelValue":s[2]||(s[2]=t=>T.value=t),class:"w-full rounded-xl border-gray-200 text-sm focus:ring-indigo-500 font-bold text-gray-700"},null,512),[[_e,T.value]])]),e("div",null,[s[14]||(s[14]=e("label",{class:"text-[10px] font-bold text-gray-400 uppercase mb-2 block tracking-widest"},"Range End",-1)),B(e("input",{type:"date","onUpdate:modelValue":s[3]||(s[3]=t=>H.value=t),class:"w-full rounded-xl border-gray-200 text-sm focus:ring-indigo-500 font-bold text-gray-700"},null,512),[[_e,H.value]])]),e("div",null,[e("label",Vt,[p(x(Y),{class:"h-3 w-3"}),s[15]||(s[15]=v(" Focus Date",-1))]),B(e("input",{type:"date","onUpdate:modelValue":s[4]||(s[4]=t=>V.value=t),class:"w-full rounded-xl border-indigo-200 bg-indigo-50 text-indigo-900 font-bold text-sm focus:ring-indigo-500"},null,512),[[_e,V.value]])])]),e("div",Tt,[e("button",{onClick:s[5]||(s[5]=t=>z.value="summary"),class:Z([z.value==="summary"?"bg-white shadow-sm text-indigo-600":"text-gray-500","flex-1 py-1.5 rounded-lg text-xs font-black uppercase transition"])},"User Summary",2),e("button",{onClick:s[6]||(s[6]=t=>z.value="projects"),class:Z([z.value==="projects"?"bg-white shadow-sm text-indigo-600":"text-gray-500","flex-1 py-1.5 rounded-lg text-xs font-black uppercase transition"])},"Portfolio View",2)])]),B(e("section",Ut,[e("div",Nt,[e("h3",Pt,[p(x(dt),{class:"h-5 w-5 text-amber-500"}),s[16]||(s[16]=v(" Daily Activity Stream",-1))]),e("span",It,l(Ae.value)+" Contributors on "+l(V.value),1)]),Ae.value===0?(o(),r("div",Ht,[p(x(at),{class:"h-12 w-12 text-gray-300 mx-auto mb-4"}),s[17]||(s[17]=e("p",{class:"text-gray-600 font-bold text-xl"},"No specific logs found for this focus date.",-1)),s[18]||(s[18]=e("p",{class:"text-sm text-gray-400 mt-1"},"Try selecting a different date or checking the detailed portfolio view.",-1))])):_("",!0),e("div",Lt,[(o(!0),r(k,null,D(Se.value,(t,u)=>(o(),r("div",{key:u,class:"bg-white rounded-[2rem] shadow-sm border border-gray-100 overflow-hidden flex flex-col transition hover:shadow-lg"},[e("div",Bt,[e("div",Et,l(u.substring(0,2).toUpperCase()),1),e("div",null,[e("h4",Ft,l(u),1),s[19]||(s[19]=e("p",{class:"text-[10px] text-indigo-500 font-bold uppercase tracking-tighter"},"Daily Impact",-1))])]),e("div",Rt,[t.dailySummaries.length>0?(o(),r("div",Ot,[e("h5",Zt,[p(x(Y),{class:"h-3 w-3"}),s[20]||(s[20]=v(" Daily Impact Summary",-1))]),(o(!0),r(k,null,D(t.dailySummaries,c=>(o(),r("div",{key:c.id,class:"text-xs text-indigo-700 bg-indigo-50/50 p-4 rounded-2xl border border-indigo-100 mb-2 font-medium",innerHTML:J(c.content)},null,8,Kt))),128))])):_("",!0),t.standups.length>0?(o(),r("div",qt,[e("h5",zt,[p(x(pt),{class:"h-3 w-3"}),s[21]||(s[21]=v(" Standup Context",-1))]),(o(!0),r(k,null,D(t.standups,c=>(o(),r("div",{key:c.id,class:"text-xs text-gray-600 bg-orange-50/50 p-4 rounded-2xl border border-orange-100 mb-2 italic"},[v(' "'+l(c.content)+'" ',1),e("p",Jt,l(c.projectName),1)]))),128))])):_("",!0),t.tasksDone.length>0?(o(),r("div",Yt,[e("h5",Gt,[p(x(fe),{class:"h-3 w-3"}),s[22]||(s[22]=v(" Accomplishments",-1))]),e("ul",Qt,[(o(!0),r(k,null,D(t.tasksDone,c=>(o(),r("li",{key:c.id,onClick:w=>me(c),class:"p-3 bg-green-50/30 rounded-xl border border-green-100 cursor-pointer hover:bg-white transition"},[e("p",Xt,l(c.name),1),c.description?(o(),r("p",jt,l(c.description),1)):_("",!0),e("p",es,l(c.projectName),1)],8,Wt))),128))])])):_("",!0),t.notes.length>0?(o(),r("div",ts,[e("h5",ss,[p(x(Be),{class:"h-3 w-3"}),s[23]||(s[23]=v(" Field Notes & Updates",-1))]),(o(!0),r(k,null,D(t.notes,c=>(o(),r("div",{key:c.id,class:"p-3 bg-blue-50/30 rounded-xl border border-blue-100 mb-2"},[e("div",{class:"text-xs text-gray-700 mb-2",innerHTML:J(c.content)},null,8,as),e("p",ns,l(c.projectName),1)]))),128))])):_("",!0),t.emails.length>0?(o(),r("div",os,[e("h5",is,[p(x(De),{class:"h-3 w-3"}),s[24]||(s[24]=v(" Communications",-1))]),(o(!0),r(k,null,D(t.emails,c=>{var w,h;return o(),r("div",{key:c.id,class:"p-3 bg-purple-50/30 rounded-xl border border-purple-100 mb-2"},[e("p",rs,l(c.subject),1),(h=(w=c.contexts)==null?void 0:w[0])!=null&&h.summary?(o(),r("p",ds,"AI Context: "+l(c.contexts[0].summary),1)):_("",!0),e("p",ls,l(c.projectName),1)])}),128))])):_("",!0)])]))),128))])],512),[[ne,z.value==="summary"]]),B(e("section",cs,[s[39]||(s[39]=e("div",{class:"flex items-center justify-between px-2"},[e("h3",{class:"text-sm font-black text-gray-400 uppercase tracking-[0.2em]"},"Portfolio Deep Dive")],-1)),(o(!0),r(k,null,D(U.value,t=>{var u,c,w,h,E,Q,W,X,j,ee,te,se,i,n,y,L,Me,Ve,Te,Ue,Ne;return o(),r("div",{key:t.id,class:"bg-white rounded-[2rem] border border-gray-200 shadow-sm overflow-hidden mb-8 transition hover:shadow-md"},[e("div",{onClick:a=>$(t.id),class:"p-6 flex flex-col md:flex-row md:items-center justify-between cursor-pointer hover:bg-gray-50 transition gap-4"},[e("div",ps,[e("div",gs,[p(x(nt),{class:"h-8 w-8"})]),e("div",null,[e("h4",ms,l(t.name),1),e("div",xs,[e("span",_s,l(t.status),1),t.has_activity?(o(),r("span",hs,s[25]||(s[25]=[e("div",{class:"h-1.5 w-1.5 bg-indigo-500 rounded-full mr-1.5 animate-pulse"},null,-1),v(" Recent Activity",-1)]))):_("",!0)])])]),e("div",ys,[e("button",{onClick:a=>ze(t,a),class:"px-4 py-2 border border-indigo-200 text-indigo-600 rounded-xl text-xs font-bold hover:bg-indigo-50 transition flex items-center gap-2"},[p(x(Y),{class:"h-3.5 w-3.5"}),v(" "+l(N.value[t.id]?"Copied!":"Export JSON"),1)],8,fs),(o(),He(Qe(F.value[t.id]?x(lt):x(ot)),{class:"h-6 w-6 text-gray-300"}))])],8,us),B(e("div",vs,[e("div",bs,[e("div",ws,[p(x(ut),{class:"h-4 w-4 text-gray-400"}),B(e("select",{"onUpdate:modelValue":a=>ce.value[t.id]=a,class:"rounded-xl border-gray-200 text-xs font-bold text-gray-600 focus:ring-indigo-500 py-1.5 pr-8 pl-3"},[s[26]||(s[26]=e("option",{value:"all"},"Show All Contributors",-1)),(o(!0),r(k,null,D(Ke(t),a=>(o(),r("option",{key:a,value:a},l(a),9,Ds))),128))],8,ks),[[We,ce.value[t.id]]])]),e("nav",Cs,[(o(),r(k,null,D(["today","todo","done","notes","standups","meetings","summary","emails"],a=>{var C,m;return e("button",{key:a,onClick:O=>S(t.id,a),class:Z([A.value[t.id]===a?"bg-white shadow-sm text-indigo-600":"text-gray-500","py-1.5 px-4 rounded-lg text-[10px] font-black uppercase transition whitespace-nowrap"])},[v(l(a)+" ",1),a==="today"&&((C=t.tasks)!=null&&C.filter(O=>M(O)).length)?(o(),r("span",Ss,l((m=t.tasks)==null?void 0:m.filter(O=>M(O)).length),1)):_("",!0)],10,$s)}),64))])]),e("div",As,[B(e("div",Ms,[e("div",Vs,[e("div",Ts,[e("h5",Us,[p(x(ct),{class:"h-3 w-3"}),s[27]||(s[27]=v(" Quick Action Points",-1))]),s[28]||(s[28]=e("span",{class:"text-[9px] font-bold text-gray-400"},"Save notes for AI task creation",-1))]),e("div",Ns,[p(Ee,{"project-id":t.id,modelValue:ge.value[t.id],"onUpdate:modelValue":a=>ge.value[t.id]=a,onSubmit:a=>Ce(t),onUserSelected:a=>Re(t,a),placeholder:"Add quick action point (type @ for users)..."},null,8,["project-id","modelValue","onUpdate:modelValue","onSubmit","onUserSelected"]),e("button",{onClick:a=>Ce(t),disabled:ye.value[t.id]||!ge.value[t.id],class:"bg-indigo-600 text-white rounded-xl px-4 py-2 font-black text-xs hover:bg-indigo-700 transition flex items-center gap-2 h-10 disabled:opacity-50"},[p(x(Y),{class:"h-3.5 w-3.5"}),v(" "+l(ye.value[t.id]?"Saving...":"Add"),1)],8,Ps)]),(((u=t.data)==null?void 0:u.action_points)||[]).filter(a=>g(a.date)).length?(o(),r("div",Is,[(o(!0),r(k,null,D((((c=t.data)==null?void 0:c.action_points)||[]).filter(a=>g(a.date)),a=>(o(),r("div",{key:a.id,class:"flex items-center gap-3 p-3 bg-white border border-gray-100 rounded-xl group hover:shadow-sm transition"},[e("input",{type:"checkbox",checked:a.done,onChange:C=>$e(t,a.id),class:"h-4 w-4 rounded text-indigo-600 focus:ring-indigo-500 border-gray-300"},null,40,Hs),e("div",Ls,[e("span",{class:Z([{"line-through text-gray-400":a.done,"text-gray-700":!a.done},"text-xs font-bold block truncate"])},l(a.content),3),a.user_name?(o(),r("span",Bs,[p(x(le),{class:"h-2.5 w-2.5"}),v(" Mentioned: "+l(a.user_name),1)])):_("",!0)]),e("button",{onClick:C=>Oe(t,a.id),class:"text-gray-300 hover:text-red-500 transition opacity-0 group-hover:opacity-100"},[p(x(Le),{class:"h-3.5 w-3.5 stroke-2"})],8,Es)]))),128))])):_("",!0),(((w=t.data)==null?void 0:w.action_points)||[]).filter(a=>!g(a.date)&&!a.done).length?(o(),r("div",Fs,[s[29]||(s[29]=e("h6",{class:"text-[9px] font-black text-amber-500 uppercase tracking-widest mb-3 flex items-center gap-1"},"Yesterday's Pending",-1)),e("div",Rs,[(o(!0),r(k,null,D((((h=t.data)==null?void 0:h.action_points)||[]).filter(a=>!g(a.date)&&!a.done),a=>(o(),r("div",{key:a.id,class:"flex items-center gap-3 p-3 bg-white border border-gray-100 rounded-xl"},[e("input",{type:"checkbox",checked:a.done,onChange:C=>$e(t,a.id),class:"h-4 w-4 rounded text-indigo-600 border-gray-300"},null,40,Os),e("div",Zs,[e("span",Ks,l(a.content),1),a.user_name?(o(),r("span",qs,[p(x(le),{class:"h-2 w-2"}),v(" "+l(a.user_name),1)])):_("",!0)]),e("span",zs,l(a.date),1)]))),128))])])):_("",!0)]),(E=t.tasks)!=null&&E.filter(a=>M(a)).length||f((Q=t.tasks)==null?void 0:Q.filter(a=>a.status!=="Done"),"updated_at").length||f((W=t.tasks)==null?void 0:W.filter(a=>a.status==="Done"),"updated_at").length||f(t.project_notes,"created_at").length||f(t.emails,"created_at").length?(o(),r("div",Js,[(X=t.tasks)!=null&&X.filter(a=>M(a)).length?(o(),r("div",Ys,[e("h5",Gs,[p(x(it),{class:"h-3 w-3"}),s[30]||(s[30]=v(" Due Today (Deadline)",-1))]),(o(!0),r(k,null,D((j=t.tasks)==null?void 0:j.filter(a=>M(a)),a=>(o(),r("div",{key:a.id,onClick:C=>me(a),class:"p-4 bg-red-50/50 border border-red-100 rounded-xl cursor-pointer hover:bg-white transition"},[e("div",Ws,[e("div",null,[e("h6",Xs,l(a.name),1),a.description?(o(),r("div",js,l(a.description),1)):_("",!0)]),e("span",ea,[p(x(le),{class:"h-3 w-3"}),v(" "+l(a.assigned_to||"Unassigned"),1)])])],8,Qs))),128))])):_("",!0),f((ee=t.tasks)==null?void 0:ee.filter(a=>a.status!=="Done"),"updated_at").length?(o(),r("div",ta,[e("h5",sa,[p(x(Y),{class:"h-3 w-3"}),s[31]||(s[31]=v(" Focus Tasks (Active Today)",-1))]),(o(!0),r(k,null,D(f((te=t.tasks)==null?void 0:te.filter(a=>a.status!=="Done"),"updated_at"),a=>{var C;return o(),r("div",{key:a.id,onClick:m=>me(a),class:"p-4 bg-indigo-50/50 border border-indigo-100 rounded-xl cursor-pointer hover:bg-white transition"},[e("div",na,[e("div",oa,[e("h6",ia,l(a.name),1),a.description?(o(),r("div",ra,l(a.description),1)):_("",!0),(C=a.notes)!=null&&C.length?(o(),r("div",da,' "'+l(a.notes[0].content)+'" ',1)):_("",!0)]),e("span",la,[p(x(le),{class:"h-3 w-3"}),v(" "+l(a.assigned_to||"Unassigned"),1)])])],8,aa)}),128))])):_("",!0),f((se=t.tasks)==null?void 0:se.filter(a=>a.status==="Done"),"updated_at").length?(o(),r("div",ca,[e("h5",ua,[p(x(fe),{class:"h-3 w-3"}),s[32]||(s[32]=v(" Accomplished Today",-1))]),(o(!0),r(k,null,D(f((i=t.tasks)==null?void 0:i.filter(a=>a.status==="Done"),"updated_at"),a=>(o(),r("div",{key:a.id,onClick:C=>me(a),class:"p-4 bg-green-50/50 border border-green-100 rounded-xl"},[e("div",ga,[p(x(fe),{class:"h-5 w-5 text-green-500 mt-0.5"}),e("div",ma,[e("h6",xa,l(a.name),1),a.description?(o(),r("div",_a,l(a.description),1)):_("",!0)]),e("span",ha,l(a.assigned_to),1)])],8,pa))),128))])):_("",!0),f(t.project_notes,"created_at").length?(o(),r("div",ya,[e("h5",fa,[p(x(Be),{class:"h-3 w-3"}),s[33]||(s[33]=v(" Today's Logs",-1))]),(o(!0),r(k,null,D(f(t.project_notes,"created_at"),a=>(o(),r("div",{key:a.id,class:"p-4 bg-gray-50 border border-gray-100 rounded-xl"},[e("span",va,l(a.type||"Note"),1),e("div",{class:"text-sm text-gray-700 italic mb-3 whitespace-pre-wrap",innerHTML:J(a.content)},null,8,ba),e("div",wa,[p(x(le),{class:"h-3 w-3"}),v(" "+l(a.creator_name),1)])]))),128))])):_("",!0),f(t.emails,"created_at").length?(o(),r("div",ka,[e("h5",Da,[p(x(De),{class:"h-3 w-3"}),s[34]||(s[34]=v(" Today's Comms",-1))]),(o(!0),r(k,null,D(f(t.emails,"created_at"),a=>{var C;return o(),r("div",{key:a.id,class:"p-4 bg-purple-50/30 border border-purple-100 rounded-xl"},[e("div",Ca,[e("p",$a,l(a.subject),1),e("p",Sa,l(a.sender),1)]),(C=a.contexts)!=null&&C.length?(o(),r("div",Aa,[p(x(Y),{class:"h-3 w-3 inline mr-1"}),v(" "+l(a.contexts[0].summary),1)])):_("",!0)])}),128))])):_("",!0)])):(o(),r("div",Ma,s[35]||(s[35]=[e("p",{class:"text-gray-400 text-sm font-bold"},"No activity recorded for this focus date.",-1)])))],512),[[ne,A.value[t.id]==="today"]]),B(e("div",Va,[(o(!0),r(k,null,D({"Highlighted (Focus Date)":f(G((n=t.tasks)==null?void 0:n.filter(a=>a.status!=="Done"),t.id,"assigned_to"),"updated_at"),Archive:P(G((y=t.tasks)==null?void 0:y.filter(a=>a.status!=="Done"),t.id,"assigned_to"),"updated_at")},(a,C)=>(o(),r("div",{key:C},[a.length>0?(o(),r("div",Ta,[e("h5",Ua,l(C),1),(o(!0),r(k,null,D(a,m=>(o(),r("div",{key:m.id,onClick:O=>me(m),class:Z(["group p-5 bg-white border rounded-[1.5rem] cursor-pointer hover:border-indigo-400 transition",g(m.updated_at)?"border-indigo-300 ring-2 ring-indigo-50 shadow-md":"border-gray-100"])},[e("div",Pa,[e("div",null,[e("h6",Ia,l(m.name),1),e("div",Ha,[e("span",La,[p(x(le),{class:"h-3 w-3"}),v(" "+l(m.assigned_to||"Unassigned"),1)]),e("span",Ba,[p(x(rt),{class:"h-3 w-3"}),v(" "+l(m.due_date||"No Date"),1)])])]),e("span",Ea,l(m.status),1)]),m.description?(o(),r("div",Fa,l(m.description),1)):_("",!0)],10,Na))),128))])):_("",!0)]))),128)),(L=t.tasks)!=null&&L.filter(a=>a.status!=="Done").length?_("",!0):(o(),r("p",Ra,"No active tasks found."))],512),[[ne,A.value[t.id]==="todo"]]),B(e("div",Oa,[(o(!0),r(k,null,D({"Highlighted (Focus Date)":f(G((Me=t.tasks)==null?void 0:Me.filter(a=>a.status==="Done"),t.id,"assigned_to"),"updated_at"),Archive:P(G((Ve=t.tasks)==null?void 0:Ve.filter(a=>a.status==="Done"),t.id,"assigned_to"),"updated_at")},(a,C)=>(o(),r("div",{key:C},[a.length>0?(o(),r("div",Za,[e("h5",Ka,l(C),1),(o(!0),r(k,null,D(a,m=>(o(),r("div",{key:m.id,class:Z(["p-5 bg-white border border-gray-100 rounded-[1.5rem]",g(m.updated_at)?"ring-2 ring-green-100 border-green-200":""])},[e("div",qa,[p(x(fe),{class:"h-6 w-6 text-green-500 mt-1"}),e("div",null,[e("h6",za,l(m.name),1),e("p",Ja,l(m.assigned_to)+" • Done "+l(we(m.updated_at)),1),m.description?(o(),r("div",Ya,l(m.description),1)):_("",!0)])])],2))),128))])):_("",!0)]))),128)),(Te=t.tasks)!=null&&Te.filter(a=>a.status==="Done").length?_("",!0):(o(),r("p",Ga,"No done tasks found."))],512),[[ne,A.value[t.id]==="done"]]),B(e("div",Qa,[(o(!0),r(k,null,D({"Highlighted (Focus Date)":f(G((Ue=t.project_notes)==null?void 0:Ue.filter(a=>A.value[t.id]==="notes"&&(!a.type||a.type==="note")||A.value[t.id]==="standups"&&a.type==="standup"||A.value[t.id]==="meetings"&&a.type==="meeting_minutes"||A.value[t.id]==="summary"&&a.type==="daily_summary"),t.id,"creator_name"),"created_at"),Archive:P(G((Ne=t.project_notes)==null?void 0:Ne.filter(a=>A.value[t.id]==="notes"&&(!a.type||a.type==="note")||A.value[t.id]==="standups"&&a.type==="standup"||A.value[t.id]==="meetings"&&a.type==="meeting_minutes"||A.value[t.id]==="summary"&&a.type==="daily_summary"),t.id,"creator_name"),"created_at")},(a,C)=>(o(),r("div",{key:C},[a.length>0?(o(),r("div",Wa,[e("h5",Xa,l(C),1),e("div",ja,[(o(!0),r(k,null,D(a,m=>{var O;return o(),r("div",{key:m.id,class:Z(["p-6 bg-white border border-gray-100 rounded-[2rem] shadow-sm flex flex-col relative",g(m.created_at)?"ring-2 ring-indigo-50 border-indigo-200":""])},[g(m.created_at)?(o(),r("div",en,"New Log")):_("",!0),e("div",{class:"text-sm text-gray-700 leading-relaxed mb-6 whitespace-pre-wrap",innerHTML:J(m.content)},null,8,tn),e("div",sn,[e("div",an,[e("div",nn,l((O=m.creator_name)==null?void 0:O.substring(0,2)),1),e("span",on,l(m.creator_name),1)]),e("span",rn,l(we(m.created_at)),1)])],2)}),128))])])):_("",!0)]))),128)),A.value[t.id]==="summary"?(o(),r("div",dn,[e("h5",ln,[p(x(Y),{class:"h-5 w-5"}),s[36]||(s[36]=v(" Daily Impact Summary",-1))]),s[37]||(s[37]=e("p",{class:"text-xs text-indigo-600 mb-4 font-medium italic"},"Summarize the overall progress, blockers, and next steps for today.",-1)),p(Ee,{"project-id":t.id,modelValue:R.value[t.id],"onUpdate:modelValue":a=>R.value[t.id]=a,type:"textarea",placeholder:"Paste your AI-generated summary or write one manually (type @ for users)..."},null,8,["project-id","modelValue","onUpdate:modelValue"]),e("div",cn,[e("button",{onClick:a=>Ze(t.id),disabled:pe.value[t.id]||!R.value[t.id],class:"px-6 py-2 bg-indigo-600 text-white rounded-xl text-sm font-black hover:bg-indigo-700 transition disabled:opacity-50"},l(pe.value[t.id]?"Saving...":"Post Summary"),9,un)])])):_("",!0)],512),[[ne,["notes","standups","meetings","summary"].includes(A.value[t.id])]]),B(e("div",pn,[(o(!0),r(k,null,D({"Highlighted (Focus Date)":f(G(t.emails,t.id,"sender"),"created_at"),Archive:P(G(t.emails,t.id,"sender"),"created_at")},(a,C)=>(o(),r("div",{key:C},[a.length>0?(o(),r("div",gn,[e("h5",mn,l(C),1),(o(!0),r(k,null,D(a,m=>{var O;return o(),r("div",{key:m.id,class:Z(["bg-white rounded-[2rem] p-6 border border-gray-100 shadow-sm",g(m.created_at)?"ring-2 ring-purple-100 border-purple-200":""])},[e("div",xn,[e("div",_n,[e("div",{class:Z([m.type==="Received"?"bg-orange-100 text-orange-600":"bg-green-100 text-green-600","p-3 rounded-2xl shadow-inner"])},[p(x(De),{class:"h-6 w-6"})],2),e("div",null,[e("h6",hn,l(m.subject),1),e("p",yn,l(m.type)+" • "+l(m.sender),1)])]),e("span",fn,l(we(m.created_at)),1)]),(O=m.contexts)!=null&&O.length?(o(),r("div",vn,[(o(!0),r(k,null,D(m.contexts,Pe=>(o(),r("div",{key:Pe.id,class:"p-5 bg-purple-50/50 rounded-[1.5rem] border border-purple-100"},[e("div",bn,[p(x(Y),{class:"h-4 w-4"}),s[38]||(s[38]=e("span",{class:"text-[10px] font-black uppercase tracking-widest"},"AI Summary",-1))]),e("p",wn,l(Pe.summary),1)]))),128))])):_("",!0)],2)}),128))])):_("",!0)]))),128))],512),[[ne,A.value[t.id]==="emails"]])])],512),[[ne,F.value[t.id]]])])}),128))],512),[[ne,z.value==="projects"]])])]),p(tt,{show:oe.value,"onUpdate:show":s[8]||(s[8]=t=>oe.value=t),title:"Morning Review Detail",initialWidth:40},{content:ke(()=>[re.value?(o(),He(Xe,{key:0,"task-id":re.value,"project-id":de.value,"project-users":ue.value,onClose:s[7]||(s[7]=t=>oe.value=!1)},null,8,["task-id","project-id","project-users"])):_("",!0)]),_:1},8,["show"])]),_:1})],64))}},ao=st(kn,[["__scopeId","data-v-cf1ccf2b"]]);export{ao as default};
