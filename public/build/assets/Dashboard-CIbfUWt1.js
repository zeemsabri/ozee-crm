import{r as i,b as w,c as s,o,a as e,m as c,t as l,j as b,n as p,F as k,k as _,V as C,s as D}from"./app-D7QPKPE4.js";const j={class:"min-h-screen bg-gray-100 flex flex-col items-center p-4 sm:p-6 lg:p-8"},E={class:"w-full max-w-5xl"},B={class:"text-center mb-8"},P={key:0,class:"text-4xl font-extrabold text-indigo-700"},S={key:1,class:"text-sm text-gray-500 mt-2"},V={class:"font-medium"},N={key:1,class:"text-center text-gray-700 p-10"},T={key:2},R={key:0},L={class:"bg-white rounded-lg shadow-xl p-6 sm:p-8"},A={key:0,class:"space-y-4"},F={class:"text-lg font-semibold text-indigo-600"},M={class:"text-sm"},W=["onClick"],$={key:1,class:"text-gray-500 text-center py-8"},z={key:1},O={class:"bg-white rounded-lg shadow-xl p-6 sm:p-8"},Q={class:"text-3xl font-bold text-gray-800 mb-4"},G={__name:"Dashboard",props:{magicToken:String,project:Object,clientEmail:String},setup(d){const x=d,u=i("dashboard"),m=i(null),g=i([]),v=i(!1),n=i(""),h=async()=>{v.value=!0,n.value="";try{const a=await D.get(`/api/client-portal/${x.magicToken}/documents`);g.value=a.data}catch(a){console.error("Error fetching documents:",a),n.value="Error: Could not load documents. Please try again later.",g.value=[{id:1,title:"Q3 Blog Post Draft",status:"Pending Review"},{id:2,title:"New Website Mockup",status:"Approved"}]}finally{v.value=!1}};w(()=>{h(),console.log("Client Dashboard mounted with props:",x)});const y=a=>{m.value=a,u.value="document"},f=()=>{m.value=null,u.value="dashboard",n.value=""};return(a,t)=>(o(),s("div",j,[e("div",E,[e("div",B,[d.project?(o(),s("h1",P,l(d.project.name),1)):c("",!0),t[1]||(t[1]=e("p",{class:"text-lg text-gray-600"},"Client Portal",-1)),d.clientEmail?(o(),s("p",S,[t[0]||(t[0]=b(" Viewing as: ",-1)),e("span",V,l(d.clientEmail),1)])):c("",!0)]),n.value?(o(),s("div",{key:0,class:p(["p-3 mb-4 rounded-md text-center w-full",n.value.startsWith("Error")?"bg-red-100 text-red-700":"bg-green-100 text-green-700"])},l(n.value),3)):c("",!0),v.value?(o(),s("div",N,t[2]||(t[2]=[e("p",{class:"animate-pulse"},"Loading documents...",-1)]))):(o(),s("div",T,[u.value==="dashboard"?(o(),s("div",R,[e("div",L,[t[5]||(t[5]=e("h2",{class:"text-2xl font-bold text-gray-800 mb-6"},"Documents for Your Review",-1)),g.value.length>0?(o(),s("div",A,[(o(!0),s(k,null,_(g.value,r=>(o(),s("div",{key:r.id,class:"flex items-center justify-between p-4 rounded-md bg-gray-50 border hover:bg-gray-100 transition-colors"},[e("div",null,[e("h3",F,l(r.title),1),e("p",M,[t[3]||(t[3]=b("Status: ",-1)),e("span",{class:p({"text-orange-500":r.status==="Pending Review","text-green-600":r.status==="Approved"})},l(r.status),3)])]),e("button",{onClick:Y=>y(r),class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700"}," Review & Comment ",8,W)]))),128))])):(o(),s("div",$,t[4]||(t[4]=[e("p",null,"There are currently no documents for you to review.",-1)])))])])):c("",!0),u.value==="document"&&m.value?(o(),s("div",z,[e("div",O,[e("button",{onClick:f,class:"mb-6 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-indigo-700 bg-indigo-100 hover:bg-indigo-200"}," ‚Üê Back to Dashboard "),e("h2",Q,l(m.value.title),1),t[6]||(t[6]=C('<div class="bg-gray-200 h-96 rounded-md flex items-center justify-center border"><p class="text-gray-500">[ Document embed would go here ]</p></div><div class="mt-8"><h3 class="text-xl font-semibold">Comments</h3><div class="mt-4 text-gray-500 p-4 bg-gray-50 rounded-md border">[ Comments section would go here ]</div></div>',2))])])):c("",!0)]))])]))}};export{G as default};
