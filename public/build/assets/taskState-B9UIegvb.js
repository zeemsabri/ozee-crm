import{ac as n,s as a,N as c,M as o,a3 as t}from"./app-DBy4gMm0.js";const u=async()=>{try{return(await a.get("/api/assigned-tasks")).data}catch(e){throw console.error("Error fetching assigned tasks:",e),o("Failed to load assigned tasks"),e}},d=async e=>{try{return(await a.get(`/api/projects/${e}/tasks`)).data}catch(s){throw console.error("Error fetching project tasks:",s),o("Failed to load project tasks"),s}},g=async e=>{try{return(await a.get(`/api/projects/${e}/due-and-overdue-tasks`)).data}catch(s){throw console.error("Error fetching due and overdue tasks:",s),o("Failed to load due and overdue tasks"),s}},k=async e=>{if(!e||e.status==="In Progress")return e;try{n("Starting task...");const s=await a.post(`/api/tasks/${e.id}/start`);return c("Task started successfully"),s.data}catch(s){throw console.error("Error starting task:",s),o("Failed to start task. Please try again."),s}},p=async e=>{if(!e||e.status!=="In Progress")return t('Task can only be paused from "In Progress" status.'),e;try{n("Pausing task...");const s=await a.post(`/api/tasks/${e.id}/pause`);return c("Task paused successfully"),s.data}catch(s){throw console.error("Error pausing task:",s),o("Failed to pause task. Please try again."),s}},y=async e=>{if(!e||e.status!=="Paused")return t('Task can only be resumed from "Paused" status.'),e;try{n("Resuming task...");const s=await a.post(`/api/tasks/${e.id}/resume`);return c("Task resumed successfully"),s.data}catch(s){throw console.error("Error resuming task:",s),o("Failed to resume task. Please try again."),s}},b=async e=>{if(!e||e.status==="Done")return e;if(e.status!=="In Progress")throw t("Task must be started before it can be completed"),new Error("Task must be started before it can be completed");try{n("Completing task...");const s=await a.patch(`/api/tasks/${e.id}/complete`);c("Task completed successfully");const r=s.data;if(r!=null&&r.needs_approval){const i=(r==null?void 0:r.creator_name)||"the creator";n(`This task requires approval. A notification has been sent to ${i}.`)}return r}catch(s){throw console.error("Error completing task:",s),s.response&&s.response.status===422?t(s.response.data.message||"Task must be started before it can be completed"):o("Failed to complete task. Please try again."),s}},f=async(e,s)=>{if(!e||e.status==="Blocked")return t("Task is already blocked."),e;if(e.status==="Done")return t("Completed tasks cannot be blocked."),e;if(!s)throw t("Please provide a reason for blocking the task"),new Error("Blocking reason is required");try{n("Blocking task...");const r=await a.post(`/api/tasks/${e.id}/block`,{reason:s});return c("Task blocked successfully"),r.data}catch(r){throw console.error("Error blocking task:",r),o("Failed to block task. Please try again."),r}},h=async e=>{if(!e||e.status!=="Blocked")return t("Task is not in a blocked state."),e;try{n("Unblocking task...");const s=await a.post(`/api/tasks/${e.id}/unblock`);return c("Task unblocked successfully"),s.data}catch(s){throw console.error("Error unblocking task:",s),o("Failed to unblock task. Please try again."),s}},w=async e=>{if(!e||e.status!=="Done")return t("Only completed tasks can be revised."),e;try{n("Revising task...");const s=await a.post(`/api/tasks/${e.id}/revise`);return c("Task revised successfully"),s.data}catch(s){throw console.error("Error revising task:",s),s.response&&s.response.status===422?t(s.response.data.message||"Only completed tasks can be revised"):o("Failed to revise task. Please try again."),s}},m=async e=>{if(!e)return!1;if(e.status!=="To Do")throw t("Only tasks in To Do status can be deleted"),new Error("Only tasks in To Do status can be deleted");if(!confirm("Are you sure you want to delete this task? This action cannot be undone."))return!1;try{return n("Deleting task..."),await a.delete(`/api/tasks/${e.id}`),c("Task deleted successfully"),!0}catch(s){throw console.error("Error deleting task:",s),o("Failed to delete task. Please try again."),s}},T=e=>{switch(e){case"To Do":return"bg-yellow-100 text-yellow-800";case"In Progress":return"bg-blue-100 text-blue-800";case"Paused":return"bg-orange-100 text-orange-800";case"Blocked":return"bg-red-100 text-red-800";case"Done":return"bg-green-100 text-green-800";case"Archived":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},$=e=>{switch(e){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},P=e=>e?e.charAt(0).toUpperCase()+e.slice(1):"Medium";export{w as a,f as b,b as c,m as d,P as e,u as f,T as g,$ as h,d as i,g as j,p,y as r,k as s,h as u};
