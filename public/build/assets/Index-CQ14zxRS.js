import{q as J,r as m,J as z,c as $,f as G,e as A,a as d,o as n,d as l,u as U,h as O,w as c,b as t,g as I,i as E,m as r,F as K,l as Q,t as _,x as T,A as F,H as L}from"./app-SqGcPtWR.js";import{B as C,_ as W}from"./AuthenticatedLayout-fXnLTnWw.js";import{P as Y}from"./PrimaryButton-ZwHmGBND.js";import{D as X}from"./DangerButton-BhkV7ftf.js";import{_ as Z}from"./SecondaryButton-CwsDALDU.js";import{_ as p}from"./InputLabel-Bb8lo1WW.js";import{_ as j}from"./TextInput-CXH52_1a.js";import{_ as f}from"./InputError-CNTSKuH2.js";import{_ as x}from"./Checkbox-B0U4Q9FX.js";import{S as g}from"./SelectDropdown-CqneZTUc.js";import"./Modal-D6W0cgKy.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-CF15OVda.js";import"./moment-BLMuvzoS.js";const ee={class:"py-12"},te={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},se={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg p-6"},le={class:"flex justify-between items-center mb-6"},ae={key:0,class:"flex justify-center items-center py-12"},oe={key:1,class:"overflow-x-auto rounded-lg border border-gray-200 shadow-sm mt-6"},ie={class:"min-w-full divide-y divide-gray-200"},ne={class:"bg-white divide-y divide-gray-200"},de={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},re={class:"px-6 py-4 text-sm text-gray-500"},ce={class:"px-6 py-4 text-sm text-gray-500"},ue={key:0},me={key:1},pe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},fe={key:0,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800"},xe={key:1,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800"},_e={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ye={key:0,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800"},ge={key:1,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800"},be={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},he={key:0,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800"},ve={key:1,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800"},ke={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},we={key:0,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800"},De={key:1,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800"},Ve={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},Ue={class:"flex justify-end space-x-2"},Ce={key:2,class:"text-center text-gray-500 py-8"},Me={class:"space-y-4"},Se={class:"flex flex-col space-y-2"},Ne={class:"flex flex-wrap items-center gap-x-4 gap-y-2"},Pe={class:"flex items-center"},Be={class:"flex items-center"},$e={class:"flex items-center"},Ae={class:"flex items-center"},Ie={class:"space-y-4"},Ee={class:"flex flex-col space-y-2"},Ke={class:"flex flex-wrap items-center gap-x-4 gap-y-2"},Te={class:"flex items-center"},Fe={class:"flex items-center"},Le={class:"flex items-center"},Ye={class:"flex items-center"},je={class:"py-4"},qe={class:"text-gray-700"},ot={__name:"Index",setup(Re){const{canDo:M}=J(),b=m([]),h=m(!0),v=m(!1),k=m(!1),w=m(!1),u=m(null),D=m([]),S=m(!1),s=z({name:"",description:"",source_model:null,source_attribute:null,is_dynamic:!1,is_repeatable:!1,is_link:!1,is_selectable:!1,errors:{},processing:!1,reset(){this.name="",this.description="",this.source_model=null,this.source_attribute=null,this.is_dynamic=!1,this.is_repeatable=!1,this.is_link=!1,this.is_selectable=!1,this.errors={}},setError(i){this.errors=i}}),N=$(()=>D.value.map(i=>({label:i.name,value:i.full_class}))),P=$(()=>{const i=D.value.find(e=>e.full_class===s.source_model);return i?i.columns.map(e=>({label:e,value:e})):[]}),q=async()=>{S.value=!0;try{const i=await window.axios.get("/api/placeholder-definitions/models-and-columns");D.value=i.data}catch(i){console.error("Error fetching models and columns:",i),L("Failed to fetch application models and columns.")}finally{S.value=!1}},B=()=>{s.reset(),v.value=!0},R=i=>{u.value=i,s.name=i.name,s.description=i.description,s.source_model=i.source_model,s.source_attribute=i.source_attribute,s.is_dynamic=!!i.is_dynamic,s.is_repeatable=!!i.is_repeatable,s.is_link=!!i.is_link,s.is_selectable=!!i.is_selectable,k.value=!0},H=i=>{u.value=i,w.value=!0},V=()=>{v.value=!1,k.value=!1,w.value=!1,s.reset(),u.value=null},y=async()=>{h.value=!0;try{const i=await window.axios.get("/api/placeholder-definitions");b.value=i.data}catch(i){console.error("Error fetching definitions:",i),L("Failed to fetch placeholder definitions.")}finally{h.value=!1}};return G(()=>{q(),y()}),A(()=>s.is_dynamic,i=>{i&&(s.source_model=null,s.source_attribute=null)}),A(()=>s.source_model,i=>{i&&(s.is_dynamic=!1)}),(i,e)=>(n(),d(K,null,[l(U(O),{title:"Placeholder Definitions"}),l(W,null,{header:c(()=>e[16]||(e[16]=[t("h2",{class:"font-bold text-3xl text-gray-800 leading-tight"},"Placeholder Definitions",-1)])),default:c(()=>[t("div",ee,[t("div",te,[t("div",se,[t("div",le,[e[18]||(e[18]=t("h3",{class:"text-2xl font-semibold text-gray-900"},"Manage Placeholders",-1)),U(M)("manage_placeholder_definitions")?(n(),I(Y,{key:0,onClick:B},{default:c(()=>e[17]||(e[17]=[r(" Create New Definition ",-1)])),_:1,__:[17]})):E("",!0)]),h.value?(n(),d("div",ae,e[19]||(e[19]=[t("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-500"},null,-1)]))):b.value.length?(n(),d("div",oe,[t("table",ie,[e[22]||(e[22]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Name "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Description "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Source "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Dynamic "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Repeatable "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Link "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Selectable "),t("th",{scope:"col",class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),t("tbody",ne,[(n(!0),d(K,null,Q(b.value,a=>(n(),d("tr",{key:a.id},[t("td",de,_(a.name),1),t("td",re,_(a.description||"N/A"),1),t("td",ce,[a.source_model?(n(),d("span",ue,_(a.source_model.split("\\").pop())+" -> "+_(a.source_attribute),1)):(n(),d("span",me,"N/A"))]),t("td",pe,[a.is_dynamic?(n(),d("span",fe," Yes ")):(n(),d("span",xe," No "))]),t("td",_e,[a.is_repeatable?(n(),d("span",ye," Yes ")):(n(),d("span",ge," No "))]),t("td",be,[a.is_link?(n(),d("span",he," Yes ")):(n(),d("span",ve," No "))]),t("td",ke,[a.is_selectable?(n(),d("span",we," Yes ")):(n(),d("span",De," No "))]),t("td",Ve,[t("div",Ue,[l(Z,{onClick:o=>R(a)},{default:c(()=>e[20]||(e[20]=[r("Edit",-1)])),_:2,__:[20]},1032,["onClick"]),l(X,{onClick:o=>H(a)},{default:c(()=>e[21]||(e[21]=[r("Delete",-1)])),_:2,__:[21]},1032,["onClick"])])])]))),128))])])])):(n(),d("div",Ce,[e[24]||(e[24]=t("p",null,"No placeholder definitions found.",-1)),U(M)("manage_placeholder_definitions")?(n(),I(Y,{key:0,onClick:B,class:"mt-4"},{default:c(()=>e[23]||(e[23]=[r(" Create First Definition ",-1)])),_:1,__:[23]})):E("",!0)]))])])]),l(C,{show:v.value,title:"Create New Placeholder Definition","api-endpoint":"/api/placeholder-definitions","http-method":"post","form-data":s,"submit-button-text":"Save Definition","success-message":"Placeholder definition created successfully!",onClose:V,onSubmitted:y},{default:c(({errors:a})=>[t("div",Me,[t("div",null,[l(p,{for:"create-name",value:"Placeholder Name"}),l(j,{id:"create-name",modelValue:s.name,"onUpdate:modelValue":e[0]||(e[0]=o=>s.name=o),type:"text",class:"mt-1 block w-full",required:"",autofocus:""},null,8,["modelValue"]),l(f,{class:"mt-2",message:a.name?a.name[0]:""},null,8,["message"])]),t("div",null,[l(p,{for:"create-description",value:"Description"}),T(t("textarea",{id:"create-description","onUpdate:modelValue":e[1]||(e[1]=o=>s.description=o),class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-lg shadow-sm mt-1 block w-full"},null,512),[[F,s.description]]),l(f,{class:"mt-2",message:a.description?a.description[0]:""},null,8,["message"])]),t("div",null,[l(p,{for:"create-source_model",value:"Source Model"}),l(g,{id:"create-source_model",modelValue:s.source_model,"onUpdate:modelValue":e[2]||(e[2]=o=>s.source_model=o),options:N.value,valueKey:"value",labelKey:"label",placeholder:"Select a source model",class:"mt-1 block w-full",disabled:s.is_dynamic},null,8,["modelValue","options","disabled"]),l(f,{class:"mt-2",message:a.source_model?a.source_model[0]:""},null,8,["message"])]),t("div",null,[l(p,{for:"create-source_attribute",value:"Source Attribute (Column)"}),l(g,{id:"create-source_attribute",modelValue:s.source_attribute,"onUpdate:modelValue":e[3]||(e[3]=o=>s.source_attribute=o),options:P.value,valueKey:"value",labelKey:"label",placeholder:"Select a column",class:"mt-1 block w-full",disabled:!s.source_model||s.is_dynamic},null,8,["modelValue","options","disabled"]),l(f,{class:"mt-2",message:a.source_attribute?a.source_attribute[0]:""},null,8,["message"])]),t("div",Se,[e[29]||(e[29]=t("p",{class:"text-sm font-medium text-gray-700"},"Placeholder Type:",-1)),t("div",Ne,[t("label",Pe,[l(x,{name:"create-is_dynamic",checked:s.is_dynamic,"onUpdate:checked":e[4]||(e[4]=o=>s.is_dynamic=o)},null,8,["checked"]),e[25]||(e[25]=t("span",{class:"ml-2 text-sm text-gray-600"},"Is a dynamic input field",-1))]),t("label",Be,[l(x,{name:"create-is_repeatable",checked:s.is_repeatable,"onUpdate:checked":e[5]||(e[5]=o=>s.is_repeatable=o)},null,8,["checked"]),e[26]||(e[26]=t("span",{class:"ml-2 text-sm text-gray-600"},"Is a repeatable list",-1))]),t("label",$e,[l(x,{name:"create-is_link",checked:s.is_link,"onUpdate:checked":e[6]||(e[6]=o=>s.is_link=o)},null,8,["checked"]),e[27]||(e[27]=t("span",{class:"ml-2 text-sm text-gray-600"},"Is a link",-1))]),t("label",Ae,[l(x,{name:"edit-is_selectable",checked:s.is_selectable,"onUpdate:checked":e[7]||(e[7]=o=>s.is_selectable=o)},null,8,["checked"]),e[28]||(e[28]=t("span",{class:"ml-2 text-sm text-gray-600"},"Is a dropdown field",-1))])]),e[30]||(e[30]=t("p",{class:"text-xs text-gray-500 mt-1"},[t("strong",null,"Dynamic:"),r(" User will be able to manually add content for this placeholder. "),t("br"),t("strong",null,"Repeatable:"),r(" User will be able to select multiple items for this placeholder (e.g., a list of blogs). "),t("br"),t("strong",null,"Link:"),r(" The system will convert to a link or generate link for magic link. "),t("strong",null,"Link:"),r(" User will be able to select a single item from a dropdown list. ")],-1))])])]),_:1},8,["show","form-data"]),l(C,{show:k.value,title:"Edit Placeholder Definition","api-endpoint":u.value?`/api/placeholder-definitions/${u.value.id}`:"","http-method":"put","form-data":s,"submit-button-text":"Update Definition","success-message":"Placeholder definition updated successfully!",onClose:V,onSubmitted:y},{default:c(({errors:a})=>[t("div",Ie,[t("div",null,[l(p,{for:"edit-name",value:"Placeholder Name"}),l(j,{id:"edit-name",modelValue:s.name,"onUpdate:modelValue":e[8]||(e[8]=o=>s.name=o),type:"text",class:"mt-1 block w-full",required:"",autofocus:""},null,8,["modelValue"]),l(f,{class:"mt-2",message:a.name?a.name[0]:""},null,8,["message"])]),t("div",null,[l(p,{for:"edit-description",value:"Description"}),T(t("textarea",{id:"edit-description","onUpdate:modelValue":e[9]||(e[9]=o=>s.description=o),class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-lg shadow-sm mt-1 block w-full"},null,512),[[F,s.description]]),l(f,{class:"mt-2",message:a.description?a.description[0]:""},null,8,["message"])]),t("div",null,[l(p,{for:"edit-source_model",value:"Source Model"}),l(g,{id:"edit-source_model",modelValue:s.source_model,"onUpdate:modelValue":e[10]||(e[10]=o=>s.source_model=o),options:N.value,valueKey:"value",labelKey:"label",placeholder:"Select a source model",class:"mt-1 block w-full",disabled:s.is_dynamic},null,8,["modelValue","options","disabled"]),l(f,{class:"mt-2",message:a.source_model?a.source_model[0]:""},null,8,["message"])]),t("div",null,[l(p,{for:"edit-source_attribute",value:"Source Attribute (Column)"}),l(g,{id:"edit-source_attribute",modelValue:s.source_attribute,"onUpdate:modelValue":e[11]||(e[11]=o=>s.source_attribute=o),options:P.value,valueKey:"value",labelKey:"label",placeholder:"Select a column",class:"mt-1 block w-full",disabled:!s.source_model||s.is_dynamic},null,8,["modelValue","options","disabled"]),l(f,{class:"mt-2",message:a.source_attribute?a.source_attribute[0]:""},null,8,["message"])]),t("div",Ee,[e[35]||(e[35]=t("p",{class:"text-sm font-medium text-gray-700"},"Placeholder Type:",-1)),t("div",Ke,[t("label",Te,[l(x,{name:"edit-is_dynamic",checked:s.is_dynamic,"onUpdate:checked":e[12]||(e[12]=o=>s.is_dynamic=o)},null,8,["checked"]),e[31]||(e[31]=t("span",{class:"ml-2 text-sm text-gray-600"},"Is a dynamic input field",-1))]),t("label",Fe,[l(x,{name:"edit-is_repeatable",checked:s.is_repeatable,"onUpdate:checked":e[13]||(e[13]=o=>s.is_repeatable=o)},null,8,["checked"]),e[32]||(e[32]=t("span",{class:"ml-2 text-sm text-gray-600"},"Is a repeatable list",-1))]),t("label",Le,[l(x,{name:"edit-is_link",checked:s.is_link,"onUpdate:checked":e[14]||(e[14]=o=>s.is_link=o)},null,8,["checked"]),e[33]||(e[33]=t("span",{class:"ml-2 text-sm text-gray-600"},"Is a link",-1))]),t("label",Ye,[l(x,{name:"edit-is_selectable",checked:s.is_selectable,"onUpdate:checked":e[15]||(e[15]=o=>s.is_selectable=o)},null,8,["checked"]),e[34]||(e[34]=t("span",{class:"ml-2 text-sm text-gray-600"},"Is a dropdown field",-1))])]),e[36]||(e[36]=t("p",{class:"text-xs text-gray-500 mt-1"},[t("strong",null,"Dynamic:"),r(" User will be able to manually add content for this placeholder. "),t("br"),t("strong",null,"Repeatable:"),r(" User will be able to select multiple items for this placeholder (e.g., a list of blogs). "),t("br"),t("strong",null,"Link:"),r(" The system will convert to a link or generate link for magic link. "),t("strong",null,"Link:"),r(" User will be able to select a single item from a dropdown list. ")],-1))])])]),_:1},8,["show","api-endpoint","form-data"]),l(C,{show:w.value,title:"Delete Placeholder Definition","api-endpoint":u.value?`/api/placeholder-definitions/${u.value.id}`:"","http-method":"delete","form-data":{},"submit-button-text":"Delete","success-message":"Placeholder definition deleted successfully!",onClose:V,onSubmitted:y},{default:c(()=>{var a;return[t("div",je,[t("p",qe,' Are you sure you want to delete the definition "'+_((a=u.value)==null?void 0:a.name)+'"? This action cannot be undone. ',1)])]}),_:1},8,["show","api-endpoint"])]),_:1})],64))}};export{ot as default};
