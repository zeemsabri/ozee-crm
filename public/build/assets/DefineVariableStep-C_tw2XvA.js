import x from"./StepCard-D9mud0vP.js";import h from"./DataTokenInserter-JC-oaNQr.js";import{T as k}from"./trash-Cd4CShhb.js";import{P as _}from"./plus-5uR-idN0.js";import{l as w,q as V,o as i,w as C,a as o,c,F as B,i as D,k as I,e as d,u as m,g as N}from"./app-DBy4gMm0.js";import"./createLucideIcon-CTr2rqL2.js";import"./workflowStore-DjV57QTj.js";const S={class:"space-y-4 p-2"},T=["onClick"],A={class:"grid grid-cols-1 gap-3"},j=["value","onInput"],F={class:"relative"},$=["value","onInput"],q={class:"absolute inset-y-0 right-0 flex items-center pr-2"},J={__name:"DefineVariableStep",props:{step:{type:Object,required:!0},allStepsBefore:{type:Array,default:()=>[]},loopContextSchema:{type:Object,default:null},onDelete:{type:Function,default:null}},emits:["update:step","delete"],setup(n,{emit:v}){const p=n,b=v,a=w({get:()=>{const e=p.step.step_config||{};return Array.isArray(e.variables)||(e.variables=[{name:"",value:""}]),e},set:e=>b("update:step",{...p.step,step_config:e})});function f(){a.value={...a.value,variables:[...a.value.variables,{name:"",value:""}]}}function g(e){const t=a.value.variables.filter((l,s)=>s!==e);a.value={...a.value,variables:t}}function u(e,t,l){const s=[...a.value.variables];s[e]={...s[e],[t]:l},a.value={...a.value,variables:s}}function y(e,t){const l=a.value.variables[e].value||"";u(e,"value",l+t)}return(e,t)=>(i(),V(x,{icon:"ðŸ“",title:"Define Variables",onDelete:n.onDelete},{default:C(()=>[o("div",S,[t[3]||(t[3]=o("p",{class:"text-sm text-gray-500"}," Extract data into named variables for use in later steps. ",-1)),(i(!0),c(B,null,D(a.value.variables,(l,s)=>(i(),c("div",{key:s,class:"space-y-2 p-3 border rounded-lg bg-gray-50 relative group"},[a.value.variables.length>1?(i(),c("button",{key:0,onClick:r=>g(s),class:"absolute -top-2 -right-2 p-1 bg-white border rounded-full text-gray-400 hover:text-red-500 shadow-sm opacity-0 group-hover:opacity-100 transition-opacity"},[d(m(k),{class:"w-3 h-3"})],8,T)):I("",!0),o("div",A,[o("div",null,[t[0]||(t[0]=o("label",{class:"block text-[10px] font-bold text-gray-400 uppercase tracking-wider mb-1"},"Variable Name",-1)),o("input",{type:"text",value:l.name,onInput:r=>u(s,"name",r.target.value),placeholder:"e.g. project_id",class:"w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,40,j)]),o("div",null,[t[1]||(t[1]=o("label",{class:"block text-[10px] font-bold text-gray-400 uppercase tracking-wider mb-1"},"Value / Token",-1)),o("div",F,[o("input",{type:"text",value:l.value,onInput:r=>u(s,"value",r.target.value),placeholder:"{{loop.item.id}}",class:"w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm pr-10"},null,40,$),o("div",q,[d(h,{"all-steps-before":n.allStepsBefore,"loop-context-schema":n.loopContextSchema,onInsert:r=>y(s,r)},null,8,["all-steps-before","loop-context-schema","onInsert"])])])])])]))),128)),o("button",{onClick:f,class:"inline-flex items-center gap-1 text-sm font-medium text-indigo-600 hover:text-indigo-500"},[d(m(_),{class:"w-4 h-4"}),t[2]||(t[2]=N(" Add another variable ",-1))])])]),_:1},8,["onDelete"]))}};export{J as default};
