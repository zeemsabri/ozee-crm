import{q as P,g as A,o as n,w as p,b as s,s as j,a as l,d as u,F as f,l as b,t as g,v as S,u as d,z as $,i as N,A as V,m as x,j as B}from"./app-DPRFYhMr.js";import{_ as D}from"./AuthenticatedLayout-CLFhi4AT.js";import{_ as O}from"./InputError-JgWZJBZr.js";import{_ as F}from"./PrimaryButton-CFluK0r1.js";import"./Modal-BUkNAlge.js";import"./InputLabel-Cb2H9UDc.js";import"./SecondaryButton-DAsfepqb.js";import"./index-CJyHVEL7.js";import"./BaseFormModal-Bceo7F-t.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./TextInput-C-Um9pdD.js";import"./SelectDropdown-CbAVFnmQ.js";/* empty css                                                                       */import"./debounce-C-hnF4Z3.js";import"./ApplicationLogo-IMesq6yY.js";import"./MultiSelectDropdown-CLaPt5Nh.js";import"./createLucideIcon-CFnk7LvI.js";import"./plus-BTSW1AI4.js";import"./DangerButton-D_47bhMK.js";import"./moment-BLMuvzoS.js";import"./NoticeboardModal-DWavK6ME.js";const I={class:"font-semibold text-xl text-gray-800 leading-tight"},M={class:"py-12"},z={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},E={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},R={class:"p-6 bg-white border-b border-gray-200"},U={class:"mb-6"},q={key:0,class:"text-sm text-gray-500 p-4 bg-gray-50 rounded-lg"},L={key:1},T={class:"flex justify-between items-center mb-2"},G={class:"font-medium text-gray-700"},H={class:"flex space-x-2"},J=["onClick"],K=["onClick"],Q={class:"bg-gray-50 p-4 rounded-lg"},W={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2"},X={class:"flex items-center h-5"},Y=["id","value"],Z={class:"ml-3 text-sm"},ss=["for"],es={key:0,class:"text-gray-500"},ts={class:"flex items-center justify-end mt-4"},Cs={__name:"Permissions",props:{role:Object,permissions:Object,rolePermissions:Array},setup(c){const m=c,e=P({permissions:m.rolePermissions||[]}),y=Object.values(m.permissions).flat().map(a=>a.id),_=()=>{e.permissions=[...y]},h=()=>{e.permissions=[]},v=a=>{const t=m.permissions[a].map(r=>r.id),i=new Set(e.permissions);t.forEach(r=>{i.add(r)}),e.permissions=Array.from(i)},k=a=>{const t=new Set(m.permissions[a].map(i=>i.id));e.permissions=e.permissions.filter(i=>!t.has(i))},w=()=>{e.post(route("admin.roles.updatePermissions",m.role.id),{onSuccess:()=>{}})};return(a,t)=>(n(),A(D,null,{header:p(()=>[s("h2",I," Manage Permissions for Role: "+g(c.role.name),1)]),default:p(()=>[s("div",M,[s("div",z,[s("div",E,[s("div",R,[s("form",{onSubmit:j(w,["prevent"])},[s("div",U,[s("div",{class:"flex justify-between items-center mb-4"},[t[1]||(t[1]=s("h3",{class:"text-lg font-medium text-gray-900"},"Role Permissions",-1)),s("div",{class:"flex space-x-2"},[s("button",{type:"button",onClick:_,class:"inline-flex items-center px-4 py-2 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 active:bg-gray-900 focus:outline-none focus:border-gray-900 focus:ring focus:ring-gray-300 disabled:opacity-25 transition"}," Select All "),s("button",{type:"button",onClick:h,class:"inline-flex items-center px-4 py-2 bg-gray-500 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-400 active:bg-gray-600 focus:outline-none focus:border-gray-600 focus:ring focus:ring-gray-300 disabled:opacity-25 transition"}," Deselect All ")])]),Object.keys(c.permissions).length===0?(n(),l("div",q," No permissions available. Please create some permissions first. ")):(n(),l("div",L,[(n(!0),l(f,null,b(c.permissions,(i,r)=>(n(),l("div",{key:r,class:"mb-6"},[s("div",T,[s("h4",G,g(r),1),s("div",H,[s("button",{type:"button",onClick:o=>v(r),class:"text-xs text-indigo-600 hover:text-indigo-900"}," Select All ",8,J),s("button",{type:"button",onClick:o=>k(r),class:"text-xs text-gray-600 hover:text-gray-900"}," Deselect All ",8,K)])]),s("div",Q,[s("div",W,[(n(!0),l(f,null,b(i,o=>(n(),l("div",{key:o.id,class:"flex items-start"},[s("div",X,[S(s("input",{id:`permission-${o.id}`,type:"checkbox",value:o.id,"onUpdate:modelValue":t[0]||(t[0]=C=>d(e).permissions=C),class:"focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300 rounded"},null,8,Y),[[$,d(e).permissions]])]),s("div",Z,[s("label",{for:`permission-${o.id}`,class:"font-medium text-gray-700"},g(o.name),9,ss),o.description?(n(),l("p",es,g(o.description),1)):N("",!0)])]))),128))])])]))),128))])),u(O,{class:"mt-2",message:d(e).errors.permissions},null,8,["message"])]),s("div",ts,[u(d(V),{href:a.route("admin.roles.show",c.role.id),class:"inline-flex items-center px-4 py-2 bg-gray-300 border border-transparent rounded-md font-semibold text-xs text-gray-800 uppercase tracking-widest hover:bg-gray-400 active:bg-gray-500 focus:outline-none focus:border-gray-500 focus:ring focus:ring-gray-300 disabled:opacity-25 transition mr-2"},{default:p(()=>t[2]||(t[2]=[x(" Cancel ",-1)])),_:1,__:[2]},8,["href"]),u(F,{class:B(["ml-4",{"opacity-25":d(e).processing}]),disabled:d(e).processing},{default:p(()=>t[3]||(t[3]=[x(" Update Permissions ",-1)])),_:1,__:[3]},8,["class","disabled"])])],32)])])])])]),_:1}))}};export{Cs as default};
