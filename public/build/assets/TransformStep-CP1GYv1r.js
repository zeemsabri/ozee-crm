import b from"./StepCard-lQ3hdvW4.js";import i from"./DataTokenInserter-PXL-7_KC.js";import{c as g,g as y,o as n,w as x,b as t,a as d,i as k,F as p,l as _,t as C,d as f}from"./app-DPPlWUgE.js";import"./trash-Bqntw_EZ.js";import"./createLucideIcon-DCzPbb62.js";import"./workflowStore-DMkwNXfJ.js";const S={class:"space-y-4"},B=["value"],I=["value"],w={class:"flex items-center gap-2 mt-1"},h=["value"],D={class:"flex items-center gap-2 mt-1"},F=["value"],j={__name:"TransformStep",props:{step:{type:Object,required:!0},allStepsBefore:{type:Array,default:()=>[]}},emits:["update:step","delete"],setup(s,{emit:v}){const m=s,u=v,r=g({get:()=>m.step.step_config||{},set:o=>u("update:step",{...m.step,step_config:o})});function a(o,e){r.value={...r.value,[o]:e}}const c=[{value:"remove_after_marker",label:"Remove content after a marker"},{value:"find_and_replace",label:"Find and replace text"}];return(o,e)=>(n(),y(b,{icon:"✂️",title:"Transform Content",onDelete:()=>u("delete")},{default:x(()=>[t("div",S,[t("div",null,[e[6]||(e[6]=t("label",{class:"block text-sm font-medium text-gray-700"},"Choose a transformation",-1)),t("select",{value:r.value.type||"",onChange:e[0]||(e[0]=l=>a("type",l.target.value)),class:"w-full p-2 border border-gray-300 rounded-md text-sm mt-1"},[e[5]||(e[5]=t("option",{value:"",disabled:""},"Select a transformation...",-1)),(n(),d(p,null,_(c,l=>t("option",{key:l.value,value:l.value},C(l.label),9,I)),64))],40,B)]),r.value.type==="remove_after_marker"?(n(),d(p,{key:0},[t("div",null,[e[7]||(e[7]=t("label",{class:"block text-sm font-medium text-gray-700"},"In this data:",-1)),t("div",w,[t("input",{type:"text",value:r.value.source||"",onInput:e[1]||(e[1]=l=>a("source",l.target.value)),class:"w-full p-2 border border-gray-300 rounded-md text-sm",placeholder:"Select the email body or another text field."},null,40,h),f(i,{"all-steps-before":s.allStepsBefore,onInsert:e[2]||(e[2]=l=>a("source",l))},null,8,["all-steps-before"])])]),t("div",null,[e[8]||(e[8]=t("label",{class:"block text-sm font-medium text-gray-700"},"Remove everything after this marker:",-1)),t("div",D,[t("input",{type:"text",value:r.value.marker||"",onInput:e[3]||(e[3]=l=>a("marker",l.target.value)),class:"w-full p-2 border border-gray-300 rounded-md text-sm",placeholder:"Select the signature marker from the AI step."},null,40,F),f(i,{"all-steps-before":s.allStepsBefore,onInsert:e[4]||(e[4]=l=>a("marker",l))},null,8,["all-steps-before"])])])],64)):k("",!0)])]),_:1},8,["onDelete"]))}};export{j as default};
