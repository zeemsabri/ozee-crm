import{r as x,f as L,c as g,g as V,o as r,w as S,b as e,a as l,i as f,d as v,m as B,u as w,v as $,x as A,F as D,l as E,t as c,N as _,J as j}from"./app-CDr3a6VS.js";import{_ as F}from"./AuthenticatedLayout-DfaIPwmm.js";import{u as J}from"./workflowStore-BR1PCcyo.js";import O from"./PromptEditor-COKfIf4Z.js";import{P as U}from"./plus-DVAY_DV-.js";import"./PrimaryButton-PdEFYjA-.js";import"./Modal-BeOWcYaT.js";import"./InputLabel-B8WUjPsD.js";import"./InputError-DbJd9iC5.js";import"./SecondaryButton-COk71P9Q.js";import"./index-eWUSAXnC.js";import"./BaseFormModal-D19JOLoJ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./TextInput-DriM8Ct1.js";import"./SelectDropdown-C5smnqto.js";/* empty css                                                                       */import"./debounce-C-hnF4Z3.js";import"./ApplicationLogo-D4ou4Siy.js";import"./createLucideIcon-C7qfAF7e.js";import"./DangerButton-CmoCYmjx.js";import"./moment-BLMuvzoS.js";import"./NoticeboardModal-ChEfRJI3.js";import"./PromptForm-DGn3-a7f.js";import"./ResponseBuilder-D7OhZbQE.js";import"./FieldBuilder-D_RO77du.js";import"./chevron-down-DtVrRm39.js";import"./circle-x-DtpGslvS.js";const H={class:"p-4 sm:p-6 lg:p-8 font-sans"},I={key:0},T={key:1,class:"max-w-7xl mx-auto space-y-6"},q={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"},G={class:"bg-white rounded-lg shadow-sm border border-gray-200"},W={class:"p-4"},Y={class:"overflow-x-auto"},z={class:"min-w-full divide-y divide-gray-200"},K={class:"bg-white divide-y divide-gray-200"},Q={key:0},R={key:1},X={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},Z={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},tt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},et=["innerHTML"],st={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},at={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-4"},ot=["onClick"],At={__name:"Index",setup(rt){const n=J(),i=x("library"),p=x(null),u=x("");L(()=>{n.prompts.length||n.fetchPrompts()});const y=g(()=>n.prompts||[]),h=g(()=>{const a=u.value.toLowerCase(),s=a?y.value.filter(o=>{var d,m;return((d=o.name)==null?void 0:d.toLowerCase().includes(a))||((m=o.category)==null?void 0:m.toLowerCase().includes(a))}):y.value,t=new Map;return s.forEach(o=>{t.has(o.name)||t.set(o.name,[]),t.get(o.name).push(o)}),Array.from(t.values()).map(o=>(o.sort((d,m)=>m.version-d.version),{name:o[0].name,latest:o[0],allVersions:o}))});function b(){p.value={name:"New Prompt",category:"General",version:1,system_prompt_text:`You are a helpful AI assistant.

Use the provided template variables like {{example_variable}} to craft your response.`,model_name:"gemini-2.5-flash-preview-05-20",generation_config:{temperature:.7,maxOutputTokens:2048,responseMimeType:"application/json"},template_variables:["example_variable"],status:"draft"},i.value="editor"}function k(a){p.value=JSON.parse(JSON.stringify(a)),i.value="editor"}async function N(a){try{if(a.id&&!a.isNewVersion)await n.updatePrompt(a.id,a),_("Prompt updated successfully!");else{const{id:s,isNewVersion:t,...o}=a;await n.createPrompt(o),_("Prompt created successfully!")}i.value="library",p.value=null}catch(s){j("Failed to save prompt."),console.error(s)}}function C(){i.value="library",p.value=null}const M=({status:a})=>`<span class="px-2 py-1 text-xs font-medium rounded-full ${{active:"bg-green-100 text-green-800",draft:"bg-yellow-100 text-yellow-800",archived:"bg-gray-100 text-gray-600"}[a]}">${a}</span>`,P=a=>{if(!a)return"N/A";const s=Math.floor((new Date-new Date(a))/1e3);let t=s/31536e3;return t>1?Math.floor(t)+" years ago":(t=s/2592e3,t>1?Math.floor(t)+" months ago":(t=s/86400,t>1?Math.floor(t)+" days ago":(t=s/3600,t>1?Math.floor(t)+" hours ago":(t=s/60,t>1?Math.floor(t)+" minutes ago":"just now"))))};return(a,s)=>(r(),V(F,null,{default:S(()=>[e("div",H,[i.value==="editor"?(r(),l("div",I,[v(O,{prompt:p.value,onSave:N,onCancel:C},null,8,["prompt"])])):f("",!0),i.value==="library"?(r(),l("div",T,[e("div",q,[s[2]||(s[2]=e("h1",{class:"text-3xl font-bold text-gray-900"},"Prompt Library",-1)),e("button",{onClick:b,class:"inline-flex items-center gap-2 px-4 py-2 text-sm font-semibold text-white bg-indigo-600 rounded-md shadow-sm hover:bg-indigo-700"},[v(w(U),{class:"h-5 w-5"}),s[1]||(s[1]=B(" Create New Prompt ",-1))])]),e("div",G,[e("div",W,[$(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>u.value=t),type:"text",placeholder:"Search prompts by name or category...",class:"w-full md:w-1/3 border-gray-300 rounded-md shadow-sm text-sm"},null,512),[[A,u.value]])]),e("div",Y,[e("table",z,[s[5]||(s[5]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Name"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Category"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Latest Version"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Status"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Last Updated"),e("th",{class:"relative px-6 py-3"},[e("span",{class:"sr-only"},"Actions")])])],-1)),e("tbody",K,[w(n).isLoading?(r(),l("tr",Q,s[3]||(s[3]=[e("td",{colspan:"6",class:"text-center p-4 text-sm text-gray-500"},"Loading prompts...",-1)]))):h.value.length===0?(r(),l("tr",R,s[4]||(s[4]=[e("td",{colspan:"6",class:"text-center p-4 text-sm text-gray-500"},"No prompts found.",-1)]))):f("",!0),(r(!0),l(D,null,E(h.value,t=>(r(),l("tr",{key:t.name},[e("td",X,c(t.name),1),e("td",Z,c(t.latest.category),1),e("td",tt,"v"+c(t.latest.version),1),e("td",{class:"px-6 py-4 whitespace-nowrap",innerHTML:M({status:t.latest.status})},null,8,et),e("td",st,c(P(t.latest.updated_at)),1),e("td",at,[e("button",{onClick:o=>k(t.latest),class:"font-semibold text-indigo-600 hover:text-indigo-800"},"Edit",8,ot)])]))),128))])])])])])):f("",!0)])]),_:1}))}};export{At as default};
