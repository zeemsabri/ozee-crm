import{r as p,b as B,m as M,a0 as L,g as y,c as s,o as r,a as i,l as g,F as v,j as x,i as T,t as h,y as _,v as D,p as I,n as K}from"./app-R-i7AP1m.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";const $={class:"relative"},j=["onClick"],z=["placeholder"],A={key:0,class:"absolute z-50 w-full bg-white border border-gray-300 rounded-md shadow-lg mt-1 max-h-60 overflow-y-auto"},F={class:"py-1"},O={key:0,class:"px-4 py-2 text-gray-500 text-sm"},R=["onClick"],q={__name:"CustomMultiSelect",props:{modelValue:{type:Array,default:()=>[]},options:{type:Array,default:()=>[],required:!0},placeholder:{type:String,default:"Select items"},labelKey:{type:String,default:"name"},trackBy:{type:String,default:"id"}},emits:["update:modelValue"],setup(n,{emit:k}){const o=n,w=k,u=p(!1),d=p(""),c=p(null),m=B(()=>{if(!d.value)return o.options;const l=d.value.toLowerCase();return o.options.filter(e=>e[o.labelKey].toLowerCase().includes(l))});M(()=>o.modelValue,l=>{},{deep:!0});const f=l=>{const e=[...o.modelValue],a=e.findIndex(t=>t===l[o.trackBy]);a===-1?e.push(l[o.trackBy]):e.splice(a,1),w("update:modelValue",e),d.value=""},b=l=>{const e=o.options.find(a=>a[o.trackBy]===l);return e?e[o.labelKey]:""},C=l=>o.modelValue.includes(l);return(l,e)=>{const a=L("click-outside");return y((r(),s("div",$,[i("div",{class:"flex flex-wrap items-center w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm cursor-pointer min-h-[38px] bg-white focus-within:border-indigo-500 focus-within:ring-indigo-500",onClick:e[2]||(e[2]=()=>{u.value=!u.value,I(()=>c.value&&c.value.focus&&c.value.focus())})},[(r(!0),s(v,null,x(n.modelValue,t=>(r(),s("div",{key:t,class:"inline-flex items-center bg-indigo-100 text-indigo-800 text-xs font-medium px-2.5 py-0.5 rounded mr-2 mb-1"},[T(h(b(t))+" ",1),i("button",{type:"button",onClick:_(S=>f(n.options.find(V=>V[n.trackBy]===t)),["stop"]),class:"ml-1 text-indigo-800 hover:text-indigo-900 focus:outline-none"},e[3]||(e[3]=[i("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,j)]))),128)),y(i("input",{type:"text",ref_key:"inputRef",ref:c,"onUpdate:modelValue":e[0]||(e[0]=t=>d.value=t),onInput:e[1]||(e[1]=t=>u.value=!0),class:"flex-grow border-none focus:ring-0 p-0 text-sm placeholder-gray-400 bg-transparent outline-none",placeholder:n.modelValue.length===0?n.placeholder:"Search..."},null,40,z),[[D,d.value]])]),u.value?(r(),s("div",A,[i("ul",F,[m.value.length===0?(r(),s("li",O,"No items found.")):g("",!0),(r(!0),s(v,null,x(m.value,t=>(r(),s("li",{key:t[n.trackBy],class:K(["px-4 py-2 cursor-pointer hover:bg-gray-100 text-sm",{"bg-indigo-50 text-indigo-900":C(t[n.trackBy])}]),onClick:S=>f(t)},h(t[n.labelKey]),11,R))),128))])])):g("",!0)])),[[a,()=>{u.value=!1}]])}}},G=N(q,[["__scopeId","data-v-9d96e53f"]]);export{G as C};
