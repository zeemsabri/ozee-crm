import{c as r,r as i,f as x,e as m,a as b,i as S,o as y,b as a,v as w,x as V,d,m as k,u as h}from"./app-DbT8OS6U.js";import{u as _,l as N}from"./workflowStore-DZJsW282.js";import{S as p}from"./SelectDropdown-CHW2wT9H.js";import{S as C}from"./save-Dz7hmyY3.js";/* empty css                                                                       */import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./createLucideIcon-CcTmroC8.js";const D={key:0,class:"p-4 space-y-4"},M={class:"flex items-center gap-2 mt-1"},T={class:"pt-2"},A={__name:"TriggerConfig",setup(U){const s=_(),t=r(()=>s.selectedStep),n=i(null),u=i(null);r(()=>s.automationSchema);const c=r(()=>{var l;return((l=s.automationSchema)==null?void 0:l.models)||[]}),v=i([{value:"created",label:"Created"},{value:"updated",label:"Updated"},{value:"deleted",label:"Deleted"}]);x(()=>{Object.keys(s.automationSchema).length||s.fetchAutomationSchema()}),m(t,l=>{var e;if(l&&((e=l.step_config)!=null&&e.trigger_event)){const[o,g]=l.step_config.trigger_event.split(".");n.value=o||null,u.value=g||null}else n.value=null,u.value=null},{immediate:!0}),m([n,u],([l,e])=>{t.value&&(t.value.step_config||(t.value.step_config={}),l&&e&&(t.value.step_config.trigger_event=`${l}.${e}`))});const f=async()=>{t.value&&(await s.persistStep(t.value),N.success("Step saved successfully!"),s.selectStep(null))};return(l,e)=>t.value?(y(),b("div",D,[a("div",null,[e[3]||(e[3]=a("label",{class:"block text-xs font-medium text-gray-700"},"Name",-1)),w(a("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>t.value.name=o),type:"text",class:"mt-1 w-full border rounded px-2 py-1 text-sm",placeholder:"Trigger name"},null,512),[[V,t.value.name]])]),a("div",null,[e[4]||(e[4]=a("label",{class:"block text-xs font-medium text-gray-700"},"When...",-1)),a("div",M,[d(p,{modelValue:n.value,"onUpdate:modelValue":e[1]||(e[1]=o=>n.value=o),options:c.value,valueKey:"name",labelKey:"name",placeholder:"Select a Module...",class:"w-1/2"},null,8,["modelValue","options"]),d(p,{modelValue:u.value,"onUpdate:modelValue":e[2]||(e[2]=o=>u.value=o),options:v.value,placeholder:"Select an Event...",class:"w-1/2"},null,8,["modelValue","options"])]),e[5]||(e[5]=a("p",{class:"text-xs text-gray-500 mt-1"},"Define the event that starts this workflow.",-1))]),a("div",T,[a("button",{onClick:f,class:"w-full flex items-center justify-center gap-2 px-4 py-2 text-sm font-semibold text-white bg-blue-600 rounded-lg hover:bg-blue-700"},[d(h(C),{class:"w-4 h-4"}),e[6]||(e[6]=k(" Save Step ",-1))])])])):S("",!0)}};export{A as default};
