import{K,c as Y,f as B,e as H,g as N,o as c,w as D,b as e,d as l,x as j,A as W,r as g,a as p,i as R,j as V,t as b,m as G,F as $,l as M,z as J,N as A,I as F}from"./app-BHf0N9zz.js";import{T as Q,B as X,C as Z,_ as ee}from"./AuthenticatedLayout-88u_3LuH.js";import{_ as h}from"./InputLabel-DD9FndyX.js";import{_ as S}from"./TextInput-DNpKL3DE.js";import{_ as w}from"./InputError-BTuy46PJ.js";import{S as te}from"./SelectDropdown-CJaRwMp5.js";import{_ as se}from"./Checkbox-Cbx42CvW.js";import{_ as le}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{P as oe}from"./PrimaryButton-pwvb5d_L.js";import"./Modal-D3kGOx9y.js";import"./SecondaryButton-DQPsNT8c.js";import"./ApplicationLogo-GD7jeGHr.js";import"./DangerButton-ChVOiEUe.js";import"./moment-BLMuvzoS.js";const ae={class:"space-y-4"},ie={class:"flex items-center mt-4"},ne={__name:"EditForm",props:{show:{type:Boolean,default:!1},apiEndpoint:{type:String,required:!0},resource:{type:Object,required:!0}},emits:["close","resourceUpdated"],setup(T,{emit:y}){const a=T,f=y,s=K({title:"",description:"",url:"",type:"website",thumbnail_url:"",visible_to_client:!0,tags:[]}),v=Y(()=>[{value:"website",label:"Website"},{value:"youtube",label:"YouTube Video"},{value:"document",label:"Document"},{value:"image",label:"Image"},{value:"other",label:"Other"}]);B(()=>{x()});const x=()=>{if(a.resource){s.title=a.resource.title||"",s.description=a.resource.description||"",s.url=a.resource.url||"",s.type=a.resource.type||"website",s.thumbnail_url=a.resource.thumbnail_url||"",s.visible_to_client=a.resource.visible_to_client!==void 0?a.resource.visible_to_client:!0;const o=a.resource.tags||[];s.tags=Array.isArray(o)?o.map(t=>typeof t=="object"&&t!==null?t.id:t).filter(t=>t!=null):[]}};H(()=>a.resource,()=>{x()},{immediate:!0,deep:!0});const m=o=>{const t=Array.isArray(o.tags)?o.tags:[];return{title:o.title,description:o.description,url:o.url,type:o.type,thumbnail_url:o.thumbnail_url,visible_to_client:o.visible_to_client,tags:t,tag_ids:t}},k=o=>{f("resourceUpdated",o),_()},_=()=>{f("close")};return(o,t)=>(c(),N(X,{show:a.show,title:"Edit Shareable Resource",apiEndpoint:`${a.apiEndpoint}/${a.resource.id}`,httpMethod:"put",formData:s,submitButtonText:"Update Resource",successMessage:"Shareable resource updated successfully!",formatDataForApi:m,onSubmitted:k,onClose:_},{default:D(({errors:n})=>{var C;return[e("div",ae,[e("div",null,[l(h,{for:"title",value:"Title",class:"mb-1"}),l(S,{id:"title",type:"text",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:s.title,"onUpdate:modelValue":t[0]||(t[0]=r=>s.title=r),required:""},null,8,["modelValue"]),l(w,{message:n.title?n.title[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[l(h,{for:"url",value:"Resource URL",class:"mb-1"}),l(S,{id:"url",type:"url",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:s.url,"onUpdate:modelValue":t[1]||(t[1]=r=>s.url=r),required:""},null,8,["modelValue"]),l(w,{message:n.url?n.url[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[l(h,{for:"type",value:"Resource Type",class:"mb-1"}),l(te,{id:"type",modelValue:s.type,"onUpdate:modelValue":t[2]||(t[2]=r=>s.type=r),options:v.value,valueKey:"value",labelKey:"label",placeholder:"Select Resource Type",required:"",class:"mt-1 block w-full"},null,8,["modelValue","options"]),l(w,{message:n.type?n.type[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[l(h,{for:"thumbnail_url",value:"Thumbnail URL (Optional)",class:"mb-1"}),l(S,{id:"thumbnail_url",type:"url",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:s.thumbnail_url,"onUpdate:modelValue":t[3]||(t[3]=r=>s.thumbnail_url=r)},null,8,["modelValue"]),l(w,{message:n.thumbnail_url?n.thumbnail_url[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[l(h,{for:"description",value:"Description (Optional)",class:"mb-1"}),j(e("textarea",{id:"description",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-lg shadow-sm mt-1 block w-full","onUpdate:modelValue":t[4]||(t[4]=r=>s.description=r),rows:"3"},null,512),[[W,s.description]]),l(w,{message:n.description?n.description[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[l(Q,{modelValue:s.tags,"onUpdate:modelValue":t[5]||(t[5]=r=>s.tags=r),initialTags:((C=a.resource)==null?void 0:C.tags)||[],label:"Associated Tags",placeholder:"Search or add tags",error:n.tags?n.tags[0]:""},null,8,["modelValue","initialTags","error"])]),e("div",ie,[l(se,{id:"visible_to_client",checked:s.visible_to_client,"onUpdate:checked":t[6]||(t[6]=r=>s.visible_to_client=r)},null,8,["checked"]),l(h,{for:"visible_to_client",value:"Visible to Client",class:"ml-2"}),l(w,{message:n.visible_to_client?n.visible_to_client[0]:"",class:"mt-2"},null,8,["message"])])])]}),_:1},8,["show","apiEndpoint","formData"]))}},re=le(ne,[["__scopeId","data-v-6da8b65f"]]),de={class:"container mx-auto p-6 bg-gray-50 min-h-screen font-inter"},ue={class:"flex border-b border-gray-200 mb-6"},ce={class:"bg-white p-8 rounded-lg shadow-xl border border-gray-100"},pe={key:0},me={key:0,class:"text-center py-8"},ge={key:1,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert"},xe={class:"block sm:inline"},be={key:2,class:"text-center py-8 text-gray-600"},fe={key:3,class:"overflow-x-auto"},ye={class:"min-w-full divide-y divide-gray-200"},ve={class:"bg-white divide-y divide-gray-200"},_e={class:"px-6 py-4 whitespace-nowrap"},he={class:"text-sm font-medium text-gray-900"},we={key:0,class:"text-sm text-gray-500 mt-1 truncate max-w-xs"},ke={class:"px-6 py-4 whitespace-nowrap"},Ce={class:"px-6 py-4 whitespace-nowrap text-sm text-indigo-600 hover:text-indigo-900"},Ee=["href"],Re={class:"px-6 py-4 whitespace-nowrap"},Ve={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Te={class:"flex flex-wrap gap-1"},Se={key:0,class:"text-gray-400"},De={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},Ue={class:"flex justify-end space-x-3"},$e=["onClick"],Me=["onClick"],Ae={key:0,class:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center z-50"},Fe={class:"bg-white rounded-lg p-6 max-w-md w-full"},Be={class:"text-gray-600 mb-6"},Qe={__name:"Index",props:{apiEndpoint:{type:String,default:"/api/shareable-resources"}},setup(T){const y=T,a=g(!1),f=g(!1),s=g(!1),v=g(null),x=g(null),m=g("existing"),k=g([]),_=g(!1),o=g(null),t=async()=>{_.value=!0,o.value=null;try{const u=await window.axios.get(y.apiEndpoint);k.value=u.data.data,A("Resources loaded successfully!")}catch(u){console.error("Error fetching resources:",u),o.value="Failed to load resources. Please try again.",F(o.value)}finally{_.value=!1}},n=u=>{console.log("New resource created:",u),t(),a.value=!1,m.value="existing"},C=u=>{console.log("Resource updated:",u),t(),f.value=!1},r=()=>{a.value=!0,m.value="add-new"},I=u=>{v.value=u,f.value=!0},L=u=>{x.value=u,s.value=!0},q=async()=>{try{await window.axios.delete(`${y.apiEndpoint}/${x.value.id}`),A("Resource deleted successfully!"),t(),s.value=!1,x.value=null}catch(u){console.error("Error deleting resource:",u),F("Failed to delete resource. Please try again.")}},z=()=>{a.value=!1,m.value==="add-new"&&(m.value="existing")},O=()=>{f.value=!1,v.value=null},P=()=>{s.value=!1,x.value=null};return B(()=>{t()}),(u,d)=>(c(),N(ee,null,{default:D(()=>{var U;return[e("div",de,[d[7]||(d[7]=e("h1",{class:"text-4xl font-extrabold text-gray-900 mb-8 text-center"},"Shareable Resource Management",-1)),e("div",ue,[e("button",{onClick:d[0]||(d[0]=i=>m.value="existing"),class:V([["py-3 px-6 text-lg font-medium transition-all duration-200",m.value==="existing"?"border-b-4 border-indigo-600 text-indigo-700 bg-white shadow-sm":"text-gray-600 hover:text-gray-800 hover:border-gray-300"],"rounded-t-lg focus:outline-none"])}," Existing Resources ",2),e("button",{onClick:r,class:V([["py-3 px-6 text-lg font-medium transition-all duration-200",m.value==="add-new"?"border-b-4 border-indigo-600 text-indigo-700 bg-white shadow-sm":"text-gray-600 hover:text-gray-800 hover:border-gray-300"],"rounded-t-lg focus:outline-none"])}," Add New Resource ",2)]),e("div",ce,[m.value==="existing"?(c(),p("div",pe,[d[5]||(d[5]=e("h2",{class:"text-2xl font-semibold text-gray-800 mb-6"},"Your Shareable Resources",-1)),_.value?(c(),p("div",me,d[1]||(d[1]=[e("svg",{class:"animate-spin mx-auto h-10 w-10 text-indigo-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),e("p",{class:"mt-3 text-gray-600"},"Loading resources...",-1)]))):o.value?(c(),p("div",ge,[e("span",xe,b(o.value),1)])):k.value.length===0?(c(),p("div",be,[d[3]||(d[3]=e("p",{class:"text-lg"},"No shareable resources found. Start by adding a new one!",-1)),l(oe,{onClick:r,class:"mt-4"},{default:D(()=>d[2]||(d[2]=[G(" Add First Resource ",-1)])),_:1,__:[2]})])):(c(),p("div",fe,[e("table",ye,[d[4]||(d[4]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Title"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Type"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"URL"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Visible to Client"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Tags"),e("th",{scope:"col",class:"relative px-6 py-3"},[e("span",{class:"sr-only"},"Edit")])])],-1)),e("tbody",ve,[(c(!0),p($,null,M(k.value,i=>(c(),p("tr",{key:i.id},[e("td",_e,[e("div",he,b(i.title),1),i.description?(c(),p("div",we,b(i.description),1)):R("",!0)]),e("td",ke,[e("span",{class:V(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",i.type==="youtube"?"bg-red-100 text-red-800":i.type==="website"?"bg-blue-100 text-blue-800":i.type==="document"?"bg-green-100 text-green-800":i.type==="image"?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"])},b(i.type),3)]),e("td",Ce,[e("a",{href:i.url,target:"_blank",rel:"noopener noreferrer",class:"truncate max-w-xs block"},b(i.url),9,Ee)]),e("td",Re,[e("span",{class:V(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",i.visible_to_client?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},b(i.visible_to_client?"Yes":"No"),3)]),e("td",Ve,[e("div",Te,[(c(!0),p($,null,M(i.tags,E=>(c(),p("span",{key:E.id,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800"},b(E.name),1))),128)),!i.tags||i.tags.length===0?(c(),p("span",Se,"No tags")):R("",!0)])]),e("td",De,[e("div",Ue,[e("button",{onClick:E=>I(i),class:"text-indigo-600 hover:text-indigo-900"},"Edit",8,$e),e("button",{onClick:E=>L(i),class:"text-red-600 hover:text-red-900"},"Delete",8,Me)])])]))),128))])])]))])):R("",!0)]),l(Z,{show:a.value,apiEndpoint:y.apiEndpoint,onClose:z,onResourceCreated:n},null,8,["show","apiEndpoint"]),j(l(re,{show:f.value,apiEndpoint:y.apiEndpoint,resource:v.value||{},onClose:O,onResourceUpdated:C},null,8,["show","apiEndpoint","resource"]),[[J,v.value]]),s.value?(c(),p("div",Ae,[e("div",Fe,[d[6]||(d[6]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Confirm Delete",-1)),e("p",Be,' Are you sure you want to delete the resource "'+b((U=x.value)==null?void 0:U.title)+'"? This action cannot be undone. ',1),e("div",{class:"flex justify-end space-x-3"},[e("button",{onClick:P,class:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-400"}," Cancel "),e("button",{onClick:q,class:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500"}," Delete ")])])])):R("",!0)])]}),_:1}))}};export{Qe as default};
