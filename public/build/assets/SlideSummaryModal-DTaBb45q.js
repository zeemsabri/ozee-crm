import{r as n,f as B,J as x,g as F,o as a,w as I,b as e,a as i,F as _,l as b,j as L,v as y,t as d,z as j,G as D,N as g}from"./app-DKXfdGr7.js";import $ from"./Modal-DcRLsYqg.js";import{a as c}from"./presentationsApi-DLb1eWUa.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";const z={class:"bg-white p-4 sm:p-6 rounded-2xl shadow-xl w-full max-w-5xl transform transition-all flex flex-col"},V={class:"flex-shrink-0 flex items-center justify-between pb-4 border-b border-slate-200"},A={class:"flex-grow overflow-y-auto mt-6 -mx-6 px-6",style:{"max-height":"55vh"}},P={key:0,class:"text-center py-10 text-slate-500"},T={key:1,class:"text-center py-10 text-slate-500"},U={key:2,class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},q={class:"flex-grow"},E={class:"font-semibold text-sm text-slate-700 truncate"},G={class:"text-xs text-slate-400"},J=["value"],H={class:"flex-shrink-0 pt-6 mt-6 border-t border-slate-200 flex flex-col md:flex-row gap-4 justify-between"},K={class:"flex flex-col sm:flex-row gap-3"},O=["disabled"],Q=["disabled"],W={class:"flex items-center gap-2"},X={disabled:"",value:""},Y=["value"],Z=["disabled"],R=!0,ee={__name:"SlideSummaryModal",props:{presentationId:{type:Number,required:!0}},emits:["close","created","copied"],setup(w,{emit:k}){const u=w,p=k,v=n([]),m=n(!1),l=n([]),r=n(""),h=n([]);B(async()=>{m.value=!0;try{const o=await c.get(u.presentationId);v.value=o.slides||[];const t=await c.list(),s=Array.isArray(t)?t:(t==null?void 0:t.data)??[];h.value=s.filter(f=>f.id!==u.presentationId)}catch{x("Failed to load slides")}finally{m.value=!1}});async function C(){try{const o=await c.duplicate(u.presentationId);g("Presentation duplicated"),p("created",o)}catch{x("Failed to duplicate")}}function S(){p("created",{_fromSelection:!0,source_slide_ids:[...l.value]})}async function M(){try{await c.copySlides(r.value,l.value),g(`${l.value.length} slides copied successfully`),p("copied")}catch{x("Failed to copy slides")}}return(o,t)=>(a(),F($,{show:!0,onClose:t[3]||(t[3]=s=>o.$emit("close"))},{default:I(()=>[e("div",z,[e("div",V,[t[5]||(t[5]=e("div",null,[e("h2",{class:"text-xl font-bold text-slate-800"},"Manage Slides"),e("p",{class:"text-sm text-slate-500"},"Duplicate the presentation, or select slides to create a new one or copy.")],-1)),e("button",{onClick:t[0]||(t[0]=s=>o.$emit("close")),class:"icon-btn"},t[4]||(t[4]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",class:"w-5 h-5"},[e("path",{d:"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"})],-1)]))]),e("div",A,[m.value?(a(),i("div",P,"Loading slides...")):v.value.length?(a(),i("div",U,[(a(!0),i(_,null,b(v.value,s=>(a(),i("label",{key:s.id,class:L(["slide-card",{selected:l.value.includes(s.id)}])},[t[6]||(t[6]=e("div",{class:"aspect-video bg-slate-100 rounded-md flex items-center justify-center mb-2"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-8 h-8 text-slate-400"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 17.25v1.007a3 3 0 01-.879 2.122L7.5 21h9l-1.621-.87a3 3 0 01-.879-2.122v-1.007"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 15.75a3 3 0 01-3-3V4.5a3 3 0 116 0v8.25a3 3 0 01-3 3z"})])],-1)),e("div",q,[e("div",E,d(s.title||s.template_name),1),e("div",G,"Blocks: "+d((s.content_blocks||[]).length),1)]),y(e("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=f=>l.value=f),value:s.id,class:"slide-checkbox"},null,8,J),[[j,l.value]])],2))),128))])):(a(),i("div",T,"This presentation has no slides."))]),e("div",H,[e("div",K,[e("button",{class:"btn-primary-outline",onClick:C,disabled:!R},"Create Full Duplicate",8,O),e("button",{class:"btn-primary",onClick:S,disabled:!l.value.length},"New from Selection ("+d(l.value.length)+")",9,Q)]),e("div",W,[y(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>r.value=s),class:"select-input"},[e("option",X,"Copy "+d(l.value.length)+" slides to...",1),(a(!0),i(_,null,b(h.value,s=>(a(),i("option",{key:s.id,value:s.id},d(s.title),9,Y))),128))],512),[[D,r.value]]),e("button",{class:"btn-secondary",onClick:M,disabled:!l.value.length||!r.value},"Copy",8,Z)])])])]),_:1}))}},ae=N(ee,[["__scopeId","data-v-8700a0db"]]);export{ae as default};
