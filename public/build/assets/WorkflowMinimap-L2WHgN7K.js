import{C as R,c as l,o as r,F as d,i as v,n as f,a as i,k as u,t as y,q as g}from"./app-NvjusqzW.js";const T=["onClick","title"],$={class:"flex-shrink-0 mt-px"},A={class:"leading-snug truncate"},I={class:"ml-3 pl-2 border-l-2 border-green-300 mb-1"},O={key:1,class:"text-[10px] text-gray-400 italic px-1 mb-1"},N={class:"ml-3 pl-2 border-l-2 border-red-300 mb-1"},F={key:1,class:"text-[10px] text-gray-400 italic px-1 mb-1"},S={key:1,class:"ml-3 pl-2 border-l-2 border-purple-300 mb-1"},w={key:1,class:"text-[10px] text-gray-400 italic px-1 mb-1"},D={key:2,class:"flex justify-center mb-1"},j={__name:"WorkflowMinimap",props:{steps:{type:Array,default:()=>[]},depth:{type:Number,default:0}},emits:["jump"],setup(a,{emit:_}){const x=_,k={TRIGGER:{icon:"âš¡",label:"Trigger",color:"indigo"},SCHEDULE_TRIGGER:{icon:"â°",label:"Schedule Trigger",color:"indigo"},CONDITION:{icon:"ðŸ”€",label:"If / Else",color:"orange"},ACTION:{icon:"âš™ï¸",label:"Action",color:"blue"},AI_PROMPT:{icon:"ðŸ¤–",label:"AI Prompt",color:"violet"},FOR_EACH:{icon:"ðŸ”",label:"For Each",color:"purple"},FETCH_RECORDS:{icon:"ðŸ“‹",label:"Fetch Records",color:"teal"},TRANSFORM_CONTENT:{icon:"âœ¨",label:"Transform",color:"pink"},DEFINE_VARIABLE:{icon:"ðŸ“¦",label:"Define Variable",color:"gray"}},b={indigo:"bg-indigo-50 border-indigo-300 text-indigo-700",orange:"bg-orange-50 border-orange-300 text-orange-700",blue:"bg-blue-50   border-blue-300   text-blue-700",violet:"bg-violet-50 border-violet-300 text-violet-700",purple:"bg-purple-50 border-purple-300 text-purple-700",teal:"bg-teal-50   border-teal-300   text-teal-700",pink:"bg-pink-50   border-pink-300   text-pink-700",gray:"bg-gray-50   border-gray-300   text-gray-700"};function c(t){return k[t]||{icon:"ðŸ“Œ",label:t,color:"gray"}}function h(t){return b[c(t).color]||b.gray}function m(t){var s,e,p,n;const o=c(t.step_type);if(t.step_type==="ACTION"&&((s=t.step_config)!=null&&s.action_type)){const C=t.step_config.action_type.replace(/_/g," ");return`${o.icon} ${C}`}return t.step_type==="TRIGGER"&&((e=t.step_config)!=null&&e.trigger_event)?`${o.icon} ${t.step_config.trigger_event}`:t.step_type==="FETCH_RECORDS"&&((p=t.step_config)!=null&&p.model)?`${o.icon} Fetch ${t.step_config.model}`:t.step_type==="FOR_EACH"&&((n=t.step_config)!=null&&n.sourceArray)?`${o.icon} ${o.label}: ${t.step_config.sourceArray}`:`${o.icon} ${o.label}`}function E(t){x("jump",t.id)}return(t,o)=>{const s=R("WorkflowMinimap",!0);return r(),l("div",{class:f(a.depth>0?"ml-3 pl-2 border-l-2 border-gray-200":"")},[(r(!0),l(d,null,v(a.steps,(e,p)=>(r(),l(d,{key:e.id},[i("button",{type:"button",class:f(["w-full text-left group flex items-start gap-2 rounded-md px-2 py-1.5 mb-1 border text-xs font-medium transition-all hover:shadow-sm hover:brightness-95 focus:outline-none focus:ring-2 focus:ring-indigo-400",h(e.step_type)]),onClick:n=>E(e),title:`Jump to: ${e.name||m(e)}`},[i("span",$,y(c(e.step_type).icon),1),i("span",A,y(e.name&&e.name!==`New ${e.step_type.replace("_"," ")} Step`?e.name:m(e)),1)],10,T),e.step_type==="CONDITION"?(r(),l(d,{key:0},[i("div",I,[o[3]||(o[3]=i("p",{class:"text-[10px] font-bold text-green-600 uppercase tracking-wider mb-1 px-1"},"âœ… If Yes",-1)),e.if_true&&e.if_true.length?(r(),g(s,{key:0,steps:e.if_true,depth:a.depth+1,onJump:o[0]||(o[0]=n=>t.$emit("jump",n))},null,8,["steps","depth"])):(r(),l("p",O,"Empty branch"))]),i("div",N,[o[4]||(o[4]=i("p",{class:"text-[10px] font-bold text-red-500 uppercase tracking-wider mb-1 px-1"},"âŒ If No",-1)),e.if_false&&e.if_false.length?(r(),g(s,{key:0,steps:e.if_false,depth:a.depth+1,onJump:o[1]||(o[1]=n=>t.$emit("jump",n))},null,8,["steps","depth"])):(r(),l("p",F,"Empty branch"))])],64)):u("",!0),e.step_type==="FOR_EACH"?(r(),l("div",S,[o[5]||(o[5]=i("p",{class:"text-[10px] font-bold text-purple-600 uppercase tracking-wider mb-1 px-1"},"ðŸ” Loop Body",-1)),e.children&&e.children.length?(r(),g(s,{key:0,steps:e.children,depth:a.depth+1,onJump:o[2]||(o[2]=n=>t.$emit("jump",n))},null,8,["steps","depth"])):(r(),l("p",w,"Empty loop"))])):u("",!0),p<a.steps.length-1?(r(),l("div",D,o[6]||(o[6]=[i("div",{class:"w-px h-3 bg-gray-300"},null,-1)]))):u("",!0)],64))),128))],2)}}};export{j as default};
