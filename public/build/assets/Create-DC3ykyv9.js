import{z as k,r as h,i as g,o as p,b as t,e as s,f as P,k as V,a as v,m as x,n as C,p as M,N as O,R as $,h as y,y as z,F as U}from"./app-BJfVm6-U.js";import{S as w,s as S,e as N,_ as T}from"./AuthenticatedLayout-bif9SccK.js";import{_ as n,a as c,b as i}from"./InputError-JwYdV8lX.js";import{P as A}from"./PrimaryButton-qgzRaj56.js";import{P as D,_ as B,T as q}from"./ProjectTypeInput-UOPHPFvD.js";import"./ApplicationLogo-B0vjjpLC.js";import"./SecondaryButton-CHLiNgO8.js";const I={class:"space-y-6 bg-white p-6 rounded-lg shadow-md border border-gray-100 font-inter"},F={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},K=["disabled"],L={class:"mt-6"},E=["disabled"],G={class:"mt-6"},H={class:"mt-6"},J={class:"mt-6 flex justify-end"},R={key:0,class:"flex items-center"},W={key:1},Q={__name:"ProjectCreateBasicInfo",props:{statusOptions:{type:Array,required:!0,default:()=>[{value:"active",label:"Active"},{value:"completed",label:"Completed"},{value:"paid",label:"Paid"},{value:"on-hold",label:"On-hold"}]},sourceOptions:{type:Array,required:!0},errors:{type:Object,default:()=>({})},canManageProjects:{type:Boolean,default:!1}},emits:["projectCreated"],setup(r,{emit:f}){const o=r,b=f,l=k({name:"",description:"",website:"",social_media_link:"",preferred_keywords:"",google_chat_id:"",google_drive_link:"",logo:null,status:"active",project_type:"",source:"",tags:[],tags_data:[],timezone:null}),d=h(!1),m=u=>{const e=u.target.files[0];e?l.logo=e:l.logo=null},j=async()=>{d.value=!0;const u=new FormData;for(const e in l)e!=="tags_data"&&l[e]!==null&&l[e]!==void 0&&(Array.isArray(l[e])?l[e].forEach((a,_)=>{typeof a=="object"&&a!==null?u.append(`${e}[${_}]`,JSON.stringify(a)):u.append(`${e}[]`,a)}):u.append(e,l[e]));try{const e=await window.axios.post("/api/projects",u,{headers:{"Content-Type":"multipart/form-data"}});S("Project created successfully!"),e.data&&e.data.id&&(b("projectCreated",e.data.id),M.visit(route("projects.edit",{project:e.data.id})))}catch(e){console.error("Error creating project:",e);let a="Failed to create project. Please check the form and try again.";e.response&&e.response.data&&e.response.data.message&&(a=e.response.data.message),N(a)}finally{d.value=!1}};return(u,e)=>(p(),g("div",I,[e[13]||(e[13]=t("h2",{class:"text-2xl font-semibold text-gray-800 mb-6"},"Create New Project",-1)),t("div",F,[t("div",null,[s(n,{for:"name",value:"Project Name"}),s(c,{id:"name",type:"text",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:l.name,"onUpdate:modelValue":e[0]||(e[0]=a=>l.name=a),required:"",autofocus:"",disabled:!r.canManageProjects||d.value},null,8,["modelValue","disabled"]),s(i,{message:o.errors.name?o.errors.name[0]:"",class:"mt-2"},null,8,["message"])]),t("div",null,[s(n,{for:"website",value:"Website"}),s(c,{id:"website",type:"url",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:l.website,"onUpdate:modelValue":e[1]||(e[1]=a=>l.website=a),disabled:!r.canManageProjects||d.value},null,8,["modelValue","disabled"]),s(i,{message:o.errors.website?o.errors.website[0]:"",class:"mt-2"},null,8,["message"])]),t("div",null,[s(n,{for:"social_media_link",value:"Social Media Link"}),s(c,{id:"social_media_link",type:"url",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:l.social_media_link,"onUpdate:modelValue":e[2]||(e[2]=a=>l.social_media_link=a),disabled:!r.canManageProjects||d.value},null,8,["modelValue","disabled"]),s(i,{message:o.errors.social_media_link?o.errors.social_media_link[0]:"",class:"mt-2"},null,8,["message"])]),t("div",null,[s(n,{for:"google_chat_id",value:"Google Chat ID"}),s(c,{id:"google_chat_id",type:"text",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:l.google_chat_id,"onUpdate:modelValue":e[3]||(e[3]=a=>l.google_chat_id=a),disabled:!r.canManageProjects||d.value},null,8,["modelValue","disabled"]),s(i,{message:o.errors.google_chat_id?o.errors.google_chat_id[0]:"",class:"mt-2"},null,8,["message"])]),t("div",null,[s(n,{for:"google_drive_link",value:"Google Drive Link"}),s(c,{id:"google_drive_link",type:"text",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:l.google_drive_link,"onUpdate:modelValue":e[4]||(e[4]=a=>l.google_drive_link=a),disabled:!r.canManageProjects||d.value},null,8,["modelValue","disabled"]),s(i,{message:o.errors.google_drive_link?o.errors.google_drive_link[0]:"",class:"mt-2"},null,8,["message"])]),t("div",null,[s(n,{for:"status",value:"Status"}),s(w,{id:"status",modelValue:l.status,"onUpdate:modelValue":e[5]||(e[5]=a=>l.status=a),options:r.statusOptions,valueKey:"value",labelKey:"label",placeholder:"Select Project Status",disabled:!r.canManageProjects||d.value,required:!0,class:"mt-1 block w-full"},null,8,["modelValue","options","disabled"]),s(i,{message:o.errors.status?o.errors.status[0]:"",class:"mt-2"},null,8,["message"])]),t("div",null,[s(D,{id:"project_type",modelValue:l.project_type,"onUpdate:modelValue":e[6]||(e[6]=a=>l.project_type=a),disabled:!r.canManageProjects||d.value,class:"mt-1 block w-full"},null,8,["modelValue","disabled"]),s(i,{message:o.errors.project_type?o.errors.project_type[0]:"",class:"mt-2"},null,8,["message"])]),t("div",null,[s(n,{for:"source",value:"Source"}),s(w,{id:"source",modelValue:l.source,"onUpdate:modelValue":e[7]||(e[7]=a=>l.source=a),options:r.sourceOptions,valueKey:"value",labelKey:"label",placeholder:"Select a Source",disabled:!r.canManageProjects||d.value,class:"mt-1 block w-full"},null,8,["modelValue","options","disabled"]),s(i,{message:o.errors.source?o.errors.source[0]:"",class:"mt-2"},null,8,["message"])]),t("div",null,[s(n,{for:"timezone",value:"Timezone"}),s(B,{id:"timezone",modelValue:l.timezone,"onUpdate:modelValue":e[8]||(e[8]=a=>l.timezone=a),disabled:!r.canManageProjects||d.value,class:"mt-1 block w-full"},null,8,["modelValue","disabled"]),s(i,{message:o.errors.timezone?o.errors.timezone[0]:"",class:"mt-2"},null,8,["message"])]),t("div",null,[s(n,{for:"logo",value:"Project Logo"}),t("input",{type:"file",id:"logo",onChange:m,class:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100 cursor-pointer",accept:"image/*",disabled:!r.canManageProjects||d.value},null,40,K),s(i,{message:o.errors.logo?o.errors.logo[0]:"",class:"mt-2"},null,8,["message"])])]),t("div",L,[s(n,{for:"description",value:"Description"}),P(t("textarea",{id:"description",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-lg shadow-sm mt-1 block w-full","onUpdate:modelValue":e[9]||(e[9]=a=>l.description=a),disabled:!r.canManageProjects||d.value,rows:"4"},null,8,E),[[V,l.description]]),s(i,{message:o.errors.description?o.errors.description[0]:"",class:"mt-2"},null,8,["message"])]),t("div",G,[s(n,{for:"preferred_keywords",value:"Client Preferred Keywords"}),s(c,{id:"preferred_keywords",type:"text",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:l.preferred_keywords,"onUpdate:modelValue":e[10]||(e[10]=a=>l.preferred_keywords=a),disabled:!r.canManageProjects||d.value},null,8,["modelValue","disabled"]),s(i,{message:o.errors.preferred_keywords?o.errors.preferred_keywords[0]:"",class:"mt-2"},null,8,["message"])]),t("div",H,[s(q,{modelValue:l.tags,"onUpdate:modelValue":e[11]||(e[11]=a=>l.tags=a),initialTags:l.tags_data,label:"Associated Tags",placeholder:"Search or add tags",error:o.errors.tags?o.errors.tags[0]:"",disabled:!r.canManageProjects||d.value},null,8,["modelValue","initialTags","error","disabled"])]),t("div",J,[s(A,{onClick:j,disabled:!r.canManageProjects||d.value,class:C([{"opacity-50 cursor-not-allowed":d.value},"px-6 py-2 rounded-lg text-base shadow-md hover:shadow-lg transition-all"])},{default:v(()=>[d.value?(p(),g("span",R,e[12]||(e[12]=[t("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),x(" Creating... ",-1)]))):(p(),g("span",W," Create Project "))]),_:1},8,["disabled","class"])])]))}},X={class:"py-12"},Y={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},Z={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg p-6"},de={__name:"Create",props:{statusOptions:{type:Array,required:!0},sourceOptions:{type:Array,required:!0},errors:{type:Object,default:()=>({})}},setup(r){const{canDo:f}=O();$();const o=f("create_projects"),b=r,l=d=>{console.log(`New project created with ID: ${d}`)};return(d,m)=>(p(),g(U,null,[s(y(z),{title:"Create New Project"}),s(T,null,{header:v(()=>m[0]||(m[0]=[t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Create New Project ",-1)])),default:v(()=>[t("div",X,[t("div",Y,[t("div",Z,[s(Q,{statusOptions:r.statusOptions,sourceOptions:r.sourceOptions,errors:b.errors,canManageProjects:y(o),onProjectCreated:l},null,8,["statusOptions","sourceOptions","errors","canManageProjects"])])])])]),_:1})],64))}};export{de as default};
