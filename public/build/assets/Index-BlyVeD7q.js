import{c as h,W as de,q as ue,r as f,G as me,f as ve,a as n,o as i,d as a,u as G,h as pe,w as _,b as s,t as u,i as k,m as y,x as z,F as U,l as M,y as j,v as Q}from"./app-3py7x8f1.js";import{_ as ce}from"./AuthenticatedLayout-D8vCwVin.js";import{P as F}from"./PrimaryButton-CRiK8rbu.js";import{D as ge}from"./DangerButton-BHAUTJIS.js";import{_ as R}from"./Modal-9WYwIiGU.js";import{_ as v}from"./InputLabel-Cnai-htk.js";import{_ as x}from"./TextInput-c4VObcBL.js";import{_ as w}from"./InputError-Dm9zJ05G.js";import{_ as L}from"./SecondaryButton-CQZ-c5NM.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./SelectDropdown-86Cxrjx1.js";import"./Checkbox-jTHl9ced.js";import"./ApplicationLogo-Dkp_J6mJ.js";import"./moment-BLMuvzoS.js";const fe={class:"py-6 sm:py-12"},_e={class:"px-4 sm:px-6 lg:px-8"},we={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},ye={class:"bg-white rounded-lg shadow p-6 flex items-center justify-between"},xe={class:"text-3xl font-bold text-gray-900 mt-1"},be={class:"bg-white rounded-lg shadow p-6 flex items-center justify-between"},he={class:"text-3xl font-bold text-gray-900 mt-1"},ke={class:"bg-white rounded-lg shadow p-6 flex items-center justify-between"},Ve={class:"text-3xl font-bold text-gray-900 mt-1"},Ue={class:"bg-white rounded-lg shadow p-6 flex items-center justify-between"},Ce={class:"text-3xl font-bold text-gray-900 mt-1"},ze={class:"bg-white rounded-lg shadow overflow-hidden"},Me={class:"p-6"},je={class:"flex flex-col sm:flex-row justify-between items-center mb-6"},$e={key:0,class:"mt-4 sm:mt-0"},He={class:"mb-6 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"},Pe={class:"col-span-1 lg:col-span-2"},Se=["value"],Ae=["value"],Ee={key:0,class:"text-center p-8"},Ne={key:1,class:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded",role:"alert"},Be={key:2,class:"text-center p-8"},De={key:3},qe={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"},Fe={class:"flex items-center space-x-4 mb-4"},Re={class:"flex-shrink-0"},Le={class:"h-10 w-10 bg-indigo-500 rounded-full flex items-center justify-center text-white font-bold"},Oe={class:"text-lg font-semibold text-gray-900"},Ye={class:"text-sm text-gray-500"},Ge={class:"text-sm mb-4 flex space-x-4"},Qe={class:"capitalize"},Te={class:"capitalize"},We={class:"text-sm text-gray-600"},Ze={class:"font-medium text-gray-800 inline"},Je={class:"font-normal"},Ke={class:"group relative inline-block ml-1"},Xe={key:0,class:"absolute z-10 bottom-full left-0 mb-2 w-full p-2 bg-gray-800 text-white text-xs rounded-md shadow-lg opacity-0 group-hover:opacity-100 transition-opacity"},Ie={class:"list-none p-0 m-0"},el={class:"absolute top-4 right-4 flex space-x-2"},ll=["onClick"],sl=["onClick"],ol={class:"p-6"},tl={key:0,class:"text-red-600 text-sm mb-4"},al={class:"mb-4"},rl={class:"mb-4"},nl={class:"mb-4"},il={class:"mb-4"},dl={class:"mb-4"},ul=["value","disabled"],ml={class:"mb-4"},vl={class:"mb-4"},pl={class:"mt-6 flex justify-end"},cl={class:"p-6"},gl={key:0,class:"text-red-600 text-sm mb-4"},fl={class:"mb-4"},_l={class:"mb-4"},wl={class:"mb-4"},yl={class:"mb-4"},xl={class:"mb-4"},bl=["disabled"],hl=["value","disabled"],kl={class:"mb-4"},Vl={class:"mb-4"},Ul={class:"mt-6 flex justify-end"},Cl={class:"p-6"},zl={key:0,class:"mt-4 text-gray-800"},Ml={key:1,class:"text-red-600 text-sm mb-4"},jl={class:"mt-6 flex justify-end"},Gl={__name:"Index",setup($l){const p=h(()=>de().props.auth.user),{canDo:T}=ue(),g=f([]),D=f(!0),r=f({}),d=f(""),S=f(""),A=f(""),E=f(""),$=f(!1),H=f(!1),P=f(!1),t=me({id:null,name:"",email:"",password:"",password_confirmation:"",role:"contractor",role_id:4,user_type:"contractor",timezone:""}),b=f(null),c=f([]),W=h(()=>{const o=g.value.flatMap(l=>l.projects||[]);return[...new Set(o.map(l=>l.id))].map(l=>{const m=o.find(V=>V.id===l);return{value:m.id,label:m.name}})}),Z=h(()=>g.value.length),J=h(()=>g.value.filter(o=>{var e;return((e=o.role_data)==null?void 0:e.slug)==="manager"||o.role==="manager"||o.role==="manager-role"||o.role==="manager_role"}).length),K=h(()=>g.value.filter(o=>{var e;return((e=o.role_data)==null?void 0:e.slug)==="employee"||o.role==="employee"}).length),X=h(()=>g.value.filter(o=>{var e;return((e=o.role_data)==null?void 0:e.slug)==="contractor"||o.role==="contractor"}).length),O=h(()=>{let o=g.value;if(A.value&&(o=o.filter(e=>{var m,V;return(((m=e.role_data)==null?void 0:m.id)||((V=c.value.find(N=>N.slug===e.role))==null?void 0:V.value))===A.value})),E.value&&(o=o.filter(e=>e.projects&&e.projects.some(l=>l.id===E.value))),S.value){const e=S.value.toLowerCase();o=o.filter(l=>l.name.toLowerCase().includes(e)||l.email.toLowerCase().includes(e))}return o}),I=async()=>{try{const o=await window.axios.get("/api/roles?type=application");c.value=o.data.map(e=>({value:e.id,slug:e.slug.replace(/-/g,"_"),label:e.name}))}catch(o){console.error("Error fetching roles:",o),c.value=[{value:1,slug:"super_admin",label:"Super Admin"},{value:2,slug:"manager",label:"Manager"},{value:3,slug:"employee",label:"Employee"},{value:4,slug:"contractor",label:"Contractor"}]}},C=h(()=>{var o;return p.value?((o=p.value.role_data)==null?void 0:o.slug)==="super-admin"||p.value.role==="super_admin"||p.value.role==="super-admin":!1}),ee=h(()=>{var o;return p.value?((o=p.value.role_data)==null?void 0:o.slug)==="manager"||p.value.role==="manager"||p.value.role==="manager-role"||p.value.role==="manager_role":!1});h(()=>C.value);const le=T("create_users"),q=async()=>{D.value=!0,d.value="";try{const o=await window.axios.get("/api/users");g.value=o.data}catch(o){d.value="Failed to fetch users.",console.error("Error fetching users:",o),o.response&&o.response.status===403?d.value="You do not have permission to view users.":o.response&&o.response.status===401&&(d.value="Session expired. Please log in again.",localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),window.location.href="/login")}finally{D.value=!1}},se=()=>{t.id=null,t.name="",t.email="",t.password="",t.password_confirmation="";const o=c.value.find(e=>e.slug==="contractor");t.role_id=(o==null?void 0:o.value)||(c.value.length>0?c.value[0].value:4),t.role=(o==null?void 0:o.slug)||"contractor",t.user_type="contractor";try{t.timezone=Intl.DateTimeFormat().resolvedOptions().timeZone||""}catch{t.timezone=""}r.value={},d.value="",$.value=!0},oe=async()=>{r.value={},d.value="";try{const o=await window.axios.post("/api/users",t);g.value.push(o.data),$.value=!1,console.log("User created successfully!"),q()}catch(o){o.response&&o.response.status===422?r.value=o.response.data.errors:o.response&&o.response.data.message?d.value=o.response.data.message:(d.value="Failed to create user.",console.error("Error creating user:",o))}},te=o=>{if(t.id=o.id,t.name=o.name,t.email=o.email,t.timezone=o.timezone||"",o.role_data&&o.role_data.id)t.role_id=o.role_data.id,t.role=o.role_data.slug.replace(/-/g,"_");else{const e=typeof o.role=="string"?o.role.replace(/-/g,"_"):"employee",l=c.value.find(m=>m.slug===e);t.role_id=(l==null?void 0:l.value)||(c.value.length>0?c.value[0].value:null),t.role=e}t.user_type=o.user_type||"employee",t.password="",t.password_confirmation="",r.value={},d.value="",H.value=!0},ae=async()=>{r.value={},d.value="";try{const o={...t};o.password||(delete o.password,delete o.password_confirmation);const e=await window.axios.put(`/api/users/${t.id}`,o),l=g.value.findIndex(m=>m.id===t.id);l!==-1&&(g.value[l]=e.data),H.value=!1,console.log("User updated successfully!"),q()}catch(o){o.response&&o.response.status===422?r.value=o.response.data.errors:o.response&&o.response.data.message?d.value=o.response.data.message:(d.value="Failed to update user.",console.error("Error updating user:",o))}},re=o=>{b.value=o,P.value=!0},ne=async()=>{d.value="";try{await window.axios.delete(`/api/users/${b.value.id}`),g.value=g.value.filter(o=>o.id!==b.value.id),P.value=!1,b.value=null,console.log("User deleted successfully!")}catch(o){d.value="Failed to delete user.",o.response&&o.response.data.message&&(d.value=o.response.data.message),console.error("Error deleting user:",o)}},Y=()=>{const o=c.value.find(e=>e.value===t.role_id);o&&(t.role=o.slug)},ie=o=>{if(!o||o.length===0)return"None";const e=o.map(m=>m.name);if(e.length<=2)return e.join(", ");const l=e.length-2;return`${e[0]}, ${e[1]} and ${l} more`};return ve(()=>{q(),I()}),(o,e)=>(i(),n(U,null,[a(G(pe),{title:"Users"}),a(ce,null,{header:_(()=>e[23]||(e[23]=[s("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Users",-1)])),default:_(()=>[s("div",fe,[s("div",_e,[s("div",we,[s("div",ye,[s("div",null,[e[24]||(e[24]=s("h4",{class:"text-gray-500 font-medium"},"Total Users",-1)),s("p",xe,u(Z.value),1)]),e[25]||(e[25]=s("svg",{class:"h-10 w-10 text-indigo-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M12 4.354a4 4 0 100 5.292m7 12.247A8.998 8.998 0 0112 21c-2.404 0-4.639-.906-6.364-2.482M12 21a8.998 8.998 0 006.364-2.482M12 21a8.998 8.998 0 01-6.364-2.482m-4.062-8.083A8.998 8.998 0 0112 12a8.998 8.998 0 018.126 4.917m-16.252 0C3.766 12.391 7.29 9 12 9s8.234 3.391 8.126 8.917"})],-1))]),s("div",be,[s("div",null,[e[26]||(e[26]=s("h4",{class:"text-gray-500 font-medium"},"Managers",-1)),s("p",he,u(J.value),1)]),e[27]||(e[27]=s("svg",{class:"h-10 w-10 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h-6a1 1 0 01-1-1v-4a1 1 0 011-1h6a1 1 0 011 1v4a1 1 0 01-1 1zm0 0l2 2m-2-2l-2 2"}),s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 9a2 2 0 11-4 0 2 2 0 014 0zm0 0a2 2 0 10-4 0m8 0a2 2 0 11-4 0 2 2 0 014 0zm0 0a2 2 0 10-4 0m-4 12v-1a4 4 0 014-4h4a4 4 0 014 4v1"})],-1))]),s("div",ke,[s("div",null,[e[28]||(e[28]=s("h4",{class:"text-gray-500 font-medium"},"Employees",-1)),s("p",Ve,u(K.value),1)]),e[29]||(e[29]=s("svg",{class:"h-10 w-10 text-yellow-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 13.5a2.25 2.25 0 00-2.25-2.25H15m0-1.5v3.75m0-3.75a3.75 3.75 0 00-3.75-3.75H8.25m0 0a3.75 3.75 0 013.75 3.75M8.25 9.75v3.75m-4.5 0a3.75 3.75 0 013.75-3.75H12a3.75 3.75 0 013.75 3.75m-4.5 0h4.5m-4.5 0a3.75 3.75 0 01-3.75-3.75H8.25m-3.75 3.75H4.5M12 18a2.25 2.25 0 002.25-2.25V15m0 0h3.75m-3.75 0v3.75m0-3.75a2.25 2.25 0 00-2.25-2.25H9.75m-3.75 2.25H6m0 0a2.25 2.25 0 00-2.25-2.25h-1.5m3.75 2.25v3.75m0 0h-1.5M6 21a2.25 2.25 0 00-2.25-2.25H3.75a2.25 2.25 0 00-2.25 2.25v1.5m1.5-1.5h1.5M6 21v1.5"})],-1))]),s("div",Ue,[s("div",null,[e[30]||(e[30]=s("h4",{class:"text-gray-500 font-medium"},"Contractors",-1)),s("p",Ce,u(X.value),1)]),e[31]||(e[31]=s("svg",{class:"h-10 w-10 text-pink-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14 0a2 2 0 012 2v2a2 2 0 01-2 2m-4-2H8m4 0h.01M17 11v-4a2 2 0 00-2-2m2 5v2m-4-2h-.01M3 20.25a2.25 2.25 0 01-2.25-2.25V8.25a2.25 2.25 0 012.25-2.25H18.75A2.25 2.25 0 0121 8.25v9.75a2.25 2.25 0 01-2.25 2.25H3.75z"})],-1))])]),s("div",ze,[s("div",Me,[s("div",je,[e[33]||(e[33]=s("h3",{class:"text-2xl font-bold text-gray-900"},"Manage Users",-1)),G(le)?(i(),n("div",$e,[a(F,{onClick:se},{default:_(()=>e[32]||(e[32]=[y(" Create New User ",-1)])),_:1,__:[32]})])):k("",!0)]),s("div",He,[s("div",Pe,[a(x,{id:"search",type:"text",class:"w-full",placeholder:"Search by name or email...",modelValue:S.value,"onUpdate:modelValue":e[0]||(e[0]=l=>S.value=l)},null,8,["modelValue"])]),z(s("select",{"onUpdate:modelValue":e[1]||(e[1]=l=>A.value=l),class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm w-full"},[e[34]||(e[34]=s("option",{value:""},"All Roles",-1)),(i(!0),n(U,null,M(c.value,l=>(i(),n("option",{key:l.value,value:l.value},u(l.label),9,Se))),128))],512),[[j,A.value]]),z(s("select",{"onUpdate:modelValue":e[2]||(e[2]=l=>E.value=l),class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm w-full"},[e[35]||(e[35]=s("option",{value:""},"All Projects",-1)),(i(!0),n(U,null,M(W.value,l=>(i(),n("option",{key:l.value,value:l.value},u(l.label),9,Ae))),128))],512),[[j,E.value]])]),D.value?(i(),n("div",Ee,e[36]||(e[36]=[s("p",{class:"text-gray-600"},"Loading users...",-1)]))):d.value?(i(),n("div",Ne,[s("p",null,u(d.value),1)])):O.value.length===0?(i(),n("div",Be,e[37]||(e[37]=[s("p",{class:"text-gray-600"},"No users found matching your criteria.",-1)]))):(i(),n("div",De,[s("div",qe,[(i(!0),n(U,null,M(O.value,l=>{var m,V,N;return i(),n("div",{key:l.id,class:"bg-gray-50 rounded-lg shadow-sm p-6 flex flex-col justify-between relative overflow-hidden"},[s("div",null,[s("div",Fe,[s("div",Re,[s("div",Le,u(l.name.charAt(0)),1)]),s("div",null,[s("p",Oe,u(l.name),1),s("p",Ye,u(l.email),1)])]),s("div",Ge,[s("p",null,[e[38]||(e[38]=s("span",{class:"font-medium text-gray-800"},"Role:",-1)),e[39]||(e[39]=y()),s("span",Qe,u(((m=l.role_data)==null?void 0:m.name)||(typeof l.role=="string"?l.role.replace(/_|-/g," "):"Employee")),1)]),s("p",null,[e[40]||(e[40]=s("span",{class:"font-medium text-gray-800"},"Type:",-1)),e[41]||(e[41]=y()),s("span",Te,u(l.user_type||"Employee"),1)])]),s("div",We,[s("p",Ze,[e[42]||(e[42]=y("Projects: ",-1)),s("span",Je,u(ie(l.projects)),1)]),s("div",Ke,[l.projects&&l.projects.length>2?(i(),n("div",Xe,[s("ul",Ie,[(i(!0),n(U,null,M(l.projects,B=>(i(),n("li",{key:B.id,class:"whitespace-nowrap"},u(B.name),1))),128))]),e[43]||(e[43]=s("div",{class:"absolute w-3 h-3 bg-gray-800 transform rotate-45 -bottom-1 left-4"},null,-1))])):k("",!0)])])]),s("div",el,[C.value||ee.value&&(((V=l.role_data)==null?void 0:V.slug)==="employee"||((N=l.role_data)==null?void 0:N.slug)==="contractor"||typeof l.role=="string"&&(l.role.replace(/-/g,"_")==="employee"||l.role.replace(/-/g,"_")==="contractor"))||p.value.id===l.id?(i(),n("button",{key:0,onClick:B=>te(l),class:"p-1 rounded-full text-gray-400 hover:text-indigo-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",title:"Edit User"},e[44]||(e[44]=[s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[s("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.794.793-2.828-2.828.794-.793zm-5.646 12.016v.538h.538l8.53-8.529-1.39-1.389-8.53 8.529z"})],-1)]),8,ll)):k("",!0),C.value&&l.id!==p.value.id?(i(),n("button",{key:1,onClick:B=>re(l),class:"p-1 rounded-full text-gray-400 hover:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2",title:"Delete User"},e[45]||(e[45]=[s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[s("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)]),8,sl)):k("",!0)])])}),128))])]))])])])]),a(R,{show:$.value,onClose:e[11]||(e[11]=l=>$.value=!1)},{default:_(()=>[s("div",ol,[e[49]||(e[49]=s("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Create New User",-1)),d.value?(i(),n("div",tl,u(d.value),1)):k("",!0),s("form",{onSubmit:Q(oe,["prevent"])},[s("div",al,[a(v,{for:"create_name",value:"Name"}),a(x,{id:"create_name",type:"text",class:"mt-1 block w-full",modelValue:t.name,"onUpdate:modelValue":e[3]||(e[3]=l=>t.name=l),required:"",autofocus:""},null,8,["modelValue"]),a(w,{message:r.value.name?r.value.name[0]:"",class:"mt-2"},null,8,["message"])]),s("div",rl,[a(v,{for:"create_email",value:"Email"}),a(x,{id:"create_email",type:"email",class:"mt-1 block w-full",modelValue:t.email,"onUpdate:modelValue":e[4]||(e[4]=l=>t.email=l),required:""},null,8,["modelValue"]),a(w,{message:r.value.email?r.value.email[0]:"",class:"mt-2"},null,8,["message"])]),s("div",nl,[a(v,{for:"create_password",value:"Password"}),a(x,{id:"create_password",type:"password",class:"mt-1 block w-full",modelValue:t.password,"onUpdate:modelValue":e[5]||(e[5]=l=>t.password=l),required:"",autocomplete:"new-password"},null,8,["modelValue"]),a(w,{message:r.value.password?r.value.password[0]:"",class:"mt-2"},null,8,["message"])]),s("div",il,[a(v,{for:"create_password_confirmation",value:"Confirm Password"}),a(x,{id:"create_password_confirmation",type:"password",class:"mt-1 block w-full",modelValue:t.password_confirmation,"onUpdate:modelValue":e[6]||(e[6]=l=>t.password_confirmation=l),required:"",autocomplete:"new-password"},null,8,["modelValue"])]),s("div",dl,[a(v,{for:"create_role",value:"Role"}),z(s("select",{id:"create_role",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full","onUpdate:modelValue":e[7]||(e[7]=l=>t.role_id=l),onChange:Y},[(i(!0),n(U,null,M(c.value,l=>(i(),n("option",{key:l.value,value:l.value,disabled:!C.value&&(l.slug==="super_admin"||l.slug==="manager")},u(l.label),9,ul))),128))],544),[[j,t.role_id]]),a(w,{message:r.value.role_id?r.value.role_id[0]:r.value.role?r.value.role[0]:"",class:"mt-2"},null,8,["message"])]),s("div",ml,[a(v,{for:"create_user_type",value:"User Type"}),z(s("select",{id:"create_user_type",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full","onUpdate:modelValue":e[8]||(e[8]=l=>t.user_type=l)},e[46]||(e[46]=[s("option",{value:"employee"},"Employee",-1),s("option",{value:"contractor"},"Contractor",-1)]),512),[[j,t.user_type]]),a(w,{message:r.value.user_type?r.value.user_type[0]:"",class:"mt-2"},null,8,["message"])]),s("div",vl,[a(v,{for:"create_timezone",value:"Timezone"}),a(x,{id:"create_timezone",type:"text",class:"mt-1 block w-full",modelValue:t.timezone,"onUpdate:modelValue":e[9]||(e[9]=l=>t.timezone=l),placeholder:"e.g., America/New_York"},null,8,["modelValue"]),a(w,{message:r.value.timezone?r.value.timezone[0]:"",class:"mt-2"},null,8,["message"])]),s("div",pl,[a(L,{onClick:e[10]||(e[10]=l=>$.value=!1)},{default:_(()=>e[47]||(e[47]=[y("Cancel",-1)])),_:1,__:[47]}),a(F,{class:"ms-3",type:"submit"},{default:_(()=>e[48]||(e[48]=[y("Create User",-1)])),_:1,__:[48]})])],32)])]),_:1},8,["show"]),a(R,{show:H.value,onClose:e[20]||(e[20]=l=>H.value=!1)},{default:_(()=>[s("div",cl,[e[53]||(e[53]=s("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Edit User",-1)),d.value?(i(),n("div",gl,u(d.value),1)):k("",!0),s("form",{onSubmit:Q(ae,["prevent"])},[s("div",fl,[a(v,{for:"edit_name",value:"Name"}),a(x,{id:"edit_name",type:"text",class:"mt-1 block w-full",modelValue:t.name,"onUpdate:modelValue":e[12]||(e[12]=l=>t.name=l),required:"",autofocus:""},null,8,["modelValue"]),a(w,{message:r.value.name?r.value.name[0]:"",class:"mt-2"},null,8,["message"])]),s("div",_l,[a(v,{for:"edit_email",value:"Email"}),a(x,{id:"edit_email",type:"email",class:"mt-1 block w-full",modelValue:t.email,"onUpdate:modelValue":e[13]||(e[13]=l=>t.email=l),required:""},null,8,["modelValue"]),a(w,{message:r.value.email?r.value.email[0]:"",class:"mt-2"},null,8,["message"])]),s("div",wl,[a(v,{for:"edit_password",value:"Password (leave blank to keep current)"}),a(x,{id:"edit_password",type:"password",class:"mt-1 block w-full",modelValue:t.password,"onUpdate:modelValue":e[14]||(e[14]=l=>t.password=l),autocomplete:"new-password"},null,8,["modelValue"]),a(w,{message:r.value.password?r.value.password[0]:"",class:"mt-2"},null,8,["message"])]),s("div",yl,[a(v,{for:"edit_password_confirmation",value:"Confirm Password"}),a(x,{id:"edit_password_confirmation",type:"password",class:"mt-1 block w-full",modelValue:t.password_confirmation,"onUpdate:modelValue":e[15]||(e[15]=l=>t.password_confirmation=l),autocomplete:"new-password"},null,8,["modelValue"])]),s("div",xl,[a(v,{for:"edit_role",value:"Role"}),z(s("select",{id:"edit_role",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full","onUpdate:modelValue":e[16]||(e[16]=l=>t.role_id=l),onChange:Y,disabled:!C.value&&t.id===p.value.id},[(i(!0),n(U,null,M(c.value,l=>(i(),n("option",{key:l.value,value:l.value,disabled:!C.value&&(l.slug==="super_admin"||l.slug==="manager")&&t.id!==p.value.id},u(l.label),9,hl))),128))],40,bl),[[j,t.role_id]]),a(w,{message:r.value.role_id?r.value.role_id[0]:r.value.role?r.value.role[0]:"",class:"mt-2"},null,8,["message"])]),s("div",kl,[a(v,{for:"edit_user_type",value:"User Type"}),z(s("select",{id:"edit_user_type",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full","onUpdate:modelValue":e[17]||(e[17]=l=>t.user_type=l)},e[50]||(e[50]=[s("option",{value:"employee"},"Employee",-1),s("option",{value:"contractor"},"Contractor",-1)]),512),[[j,t.user_type]]),a(w,{message:r.value.user_type?r.value.user_type[0]:"",class:"mt-2"},null,8,["message"])]),s("div",Vl,[a(v,{for:"edit_timezone",value:"Timezone"}),a(x,{id:"edit_timezone",type:"text",class:"mt-1 block w-full",modelValue:t.timezone,"onUpdate:modelValue":e[18]||(e[18]=l=>t.timezone=l),placeholder:"e.g., Europe/London"},null,8,["modelValue"]),a(w,{message:r.value.timezone?r.value.timezone[0]:"",class:"mt-2"},null,8,["message"])]),s("div",Ul,[a(L,{onClick:e[19]||(e[19]=l=>H.value=!1)},{default:_(()=>e[51]||(e[51]=[y("Cancel",-1)])),_:1,__:[51]}),a(F,{class:"ms-3",type:"submit"},{default:_(()=>e[52]||(e[52]=[y("Update User",-1)])),_:1,__:[52]})])],32)])]),_:1},8,["show"]),a(R,{show:P.value,onClose:e[22]||(e[22]=l=>P.value=!1)},{default:_(()=>{var l;return[s("div",Cl,[e[57]||(e[57]=s("h2",{class:"text-lg font-medium text-gray-900"}," Are you sure you want to delete this user? ",-1)),e[58]||(e[58]=s("p",{class:"mt-1 text-sm text-gray-600"}," This action cannot be undone. All data associated with this user will be removed. ",-1)),b.value?(i(),n("div",zl,[e[54]||(e[54]=s("strong",null,"User:",-1)),y(" "+u(b.value.name)+" ("+u(b.value.email)+") - Role: "+u(((l=b.value.role_data)==null?void 0:l.name)||(typeof b.value.role=="string"?b.value.role:"Employee")),1)])):k("",!0),d.value?(i(),n("div",Ml,u(d.value),1)):k("",!0),s("div",jl,[a(L,{onClick:e[21]||(e[21]=m=>P.value=!1)},{default:_(()=>e[55]||(e[55]=[y("Cancel",-1)])),_:1,__:[55]}),a(ge,{class:"ms-3",onClick:ne},{default:_(()=>e[56]||(e[56]=[y("Delete User",-1)])),_:1,__:[56]})])])]}),_:1},8,["show"])]),_:1})],64))}};export{Gl as default};
