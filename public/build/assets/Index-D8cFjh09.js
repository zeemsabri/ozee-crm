import{r as i,f as G,e as B,c as J,g as K,o as l,w as Q,b as e,a as o,i as p,j as N,v as y,x as T,F as g,l as m,z as W,t as n,m as V,s as A,G as S,J as C,N as L}from"./app-CH-gkOrV.js";import{_ as X}from"./AuthenticatedLayout-BJ17P2Ds.js";import"./PrimaryButton-C9Jy5EgI.js";import"./Modal-C12bxVAA.js";import"./InputLabel-BpNpVDJT.js";import"./InputError-vhKQFypQ.js";import"./SecondaryButton-hnhNpR9e.js";import"./index-DHJPAxK-.js";import"./BaseFormModal-DxyOjkjJ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./TextInput-3yC3sg_t.js";import"./SelectDropdown-BL5Egiyt.js";/* empty css                                                                       */import"./debounce-C-hnF4Z3.js";import"./ApplicationLogo-D0voUyD3.js";import"./MultiSelectDropdown-DFLGKLiP.js";import"./createLucideIcon-CZOyxDgM.js";import"./plus-Cl7NBE6N.js";import"./DangerButton-eWYhAg6f.js";import"./moment-BLMuvzoS.js";import"./NoticeboardModal-BroRijKs.js";const Y={class:"p-4 sm:p-6 lg:p-8"},Z={class:"flex flex-col sm:flex-row items-start sm:items-center sm:justify-between mb-8"},ee={class:"mt-4 sm:mt-0 flex items-center space-x-2"},te={class:"inline-flex rounded-md shadow-sm"},se={class:"flex gap-8"},le={class:"w-64 hidden lg:block"},oe={class:"space-y-6"},ae={class:"mt-1 relative"},re={class:"mt-2 space-y-2"},de=["id","value"],ie=["for"],ne={key:0},ue={class:"flex-1"},ce={key:0},pe={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6"},ge={key:1,class:"text-center py-12"},me={class:"text-red-600 font-semibold"},ve={key:2,class:"text-center py-20 border-2 border-dashed rounded-lg"},ye={key:3},xe={key:0,class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6"},fe={class:"p-5 flex-grow"},be={class:"font-bold text-lg text-gray-800 truncate"},he=["href"],we={class:"text-xs text-gray-500 uppercase mt-3 mb-2 font-semibold"},ke={class:"flex flex-wrap gap-1.5"},_e={key:0,class:"text-gray-400 text-sm italic"},Ce={class:"border-t p-3 bg-gray-50 flex justify-end"},je=["onClick"],Me={key:1,class:"overflow-x-auto rounded-lg border"},Te={class:"min-w-full divide-y divide-gray-200"},$e={class:"bg-white divide-y divide-gray-200"},ze={class:"px-6 py-4 font-medium text-gray-900"},Re={class:"px-6 py-4 text-gray-500"},Ve={class:"px-6 py-4 text-indigo-600"},Ae=["href"],Pe={class:"px-6 py-4"},Fe={class:"flex flex-wrap gap-1"},Ue={key:0,class:"text-gray-400 text-sm italic"},Be={class:"px-6 py-4 text-right"},Ne=["onClick"],Se={class:"flex items-center justify-between mt-6"},Le={class:"text-sm text-gray-600"},qe={class:"font-medium"},He={class:"font-medium"},Oe={class:"space-x-2"},De=["disabled"],Ee=["disabled"],Ie={class:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md"},Ge={class:"text-sm text-gray-500 mb-4"},Je=["value"],Ke={class:"flex justify-end gap-3 mt-6"},Qe=["disabled"],We={class:"bg-white rounded-lg shadow-xl p-6 w-full max-w-lg"},Xe={class:"space-y-4"},Ye=["value"],Ze={class:"flex justify-end gap-3 mt-6"},kt={__name:"Index",setup(et){const x=i([]),$=i(!0),h=i(null),f=i("grid"),u=i({search:"",types:[]}),v=i(1),z=i(12),P=i(0),w=i([]),R=i([]),k=i(null),_=i(!1),b=i(null),j=i(!1),d=i({title:"",url:"",type:null,tags:""});async function M(){$.value=!0,h.value=null;try{const a={visible_to_team:!0,q:u.value.search||void 0,types:u.value.types.length?u.value.types:void 0,per_page:z.value,page:v.value},{data:t}=await window.axios.get("/api/shareable-resources",{params:a});x.value=t.data||[],P.value=t.total||0}catch(a){console.error("Failed to load team resources",a),h.value="Failed to load team resources",C(h.value)}finally{$.value=!1}}async function q(){try{const{data:a}=await window.axios.get("/api/options/shareable_resource_types");w.value=Array.isArray(a)?a:[]}catch{w.value=[]}}async function H(){try{const{data:a}=await window.axios.get("/api/projects-simplified");R.value=Array.isArray(a)?a:[]}catch{R.value=[]}}G(()=>{q(),H(),M()}),B(u,M,{deep:!0}),B([v,z],M);function F(a,t){var s;const r=w.value.find(c=>c.value===a);return((s=r==null?void 0:r.allow)==null?void 0:s.includes(t))??!1}function U(a){k.value=a,b.value=null,_.value=!0}async function O(){var a,t;if(!k.value||!b.value)return C("Please select a project");try{await window.axios.post(`/api/shareable-resources/${k.value.id}/copy-to-project`,{project_id:b.value}),L("Resource copied to project successfully."),_.value=!1,k.value=null}catch(r){console.error(r),C(((t=(a=r==null?void 0:r.response)==null?void 0:a.data)==null?void 0:t.message)||"Failed to copy resource.")}}async function D(){var a,t;if(!d.value.title||!d.value.url||!d.value.type)return C("Please fill in all required fields: Title, URL, and Type.");try{const r={title:d.value.title,url:d.value.url,type:d.value.type,tags:d.value.tags.split(",").map(s=>s.trim()).filter(Boolean)};await window.axios.post("/api/shareable-resources",r),L("Resource added successfully!"),j.value=!1,M()}catch(r){console.error("Failed to add resource",r),C(((t=(a=r==null?void 0:r.response)==null?void 0:a.data)==null?void 0:t.message)||"An error occurred while adding the resource.")}}function E(){u.value.search="",u.value.types=[]}const I=J(()=>u.value.search!==""||u.value.types.length>0);return(a,t)=>(l(),K(X,null,{default:Q(()=>{var r;return[e("div",Y,[e("header",Z,[t[17]||(t[17]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900"},"Team Resources"),e("p",{class:"mt-1 text-sm text-gray-500"},"Browse, search, and manage shared resources for your team.")],-1)),e("div",ee,[e("div",te,[e("button",{onClick:t[0]||(t[0]=s=>f.value="grid"),class:N(["px-3 py-2 rounded-l-md border border-gray-300",f.value==="grid"?"bg-indigo-600 text-white":"bg-white text-gray-500 hover:bg-gray-50"])},t[15]||(t[15]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM13 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2h-2z"})],-1)]),2),e("button",{onClick:t[1]||(t[1]=s=>f.value="list"),class:N(["px-3 py-2 -ml-px rounded-r-md border border-gray-300",f.value==="list"?"bg-indigo-600 text-white":"bg-white text-gray-500 hover:bg-gray-50"])},t[16]||(t[16]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"})],-1)]),2)])])]),e("div",se,[e("aside",le,[t[21]||(t[21]=e("h2",{class:"text-lg font-semibold text-gray-800 mb-4"},"Filter Options",-1)),e("div",oe,[e("div",null,[t[19]||(t[19]=e("label",{for:"search",class:"block text-sm font-medium text-gray-700"},"Search",-1)),e("div",ae,[y(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>u.value.search=s),id:"search",type:"text",placeholder:"Search by title, url...",class:"w-full border-gray-300 rounded-md shadow-sm pl-10"},null,512),[[T,u.value.search]]),t[18]||(t[18]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})])],-1))])]),e("div",null,[t[20]||(t[20]=e("h3",{class:"text-sm font-medium text-gray-700"},"Type",-1)),e("div",re,[(l(!0),o(g,null,m(w.value,s=>(l(),o("div",{key:s.value,class:"flex items-center"},[y(e("input",{id:`type-${s.value}`,value:s.value,"onUpdate:modelValue":t[3]||(t[3]=c=>u.value.types=c),type:"checkbox",class:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"},null,8,de),[[W,u.value.types]]),e("label",{for:`type-${s.value}`,class:"ml-3 text-sm text-gray-600"},n(s.label),9,ie)]))),128))])]),I.value?(l(),o("div",ne,[e("button",{onClick:E,class:"w-full text-sm text-indigo-600 hover:text-indigo-800"},"Clear all filters")])):p("",!0)])]),e("main",ue,[$.value?(l(),o("div",ce,[e("div",pe,[(l(),o(g,null,m(6,s=>e("div",{key:s,class:"bg-white p-4 rounded-lg shadow animate-pulse"},t[22]||(t[22]=[e("div",{class:"h-6 bg-gray-200 rounded w-3/4 mb-4"},null,-1),e("div",{class:"h-4 bg-gray-200 rounded w-1/2 mb-4"},null,-1),e("div",{class:"flex flex-wrap gap-2"},[e("div",{class:"h-5 bg-gray-200 rounded-full w-16"}),e("div",{class:"h-5 bg-gray-200 rounded-full w-20"})],-1)]))),64))])])):h.value?(l(),o("div",ge,[e("p",me,n(h.value),1),t[23]||(t[23]=e("p",{class:"text-gray-500 mt-2"},"Please try refreshing the page.",-1))])):x.value.length?(l(),o("div",ye,[f.value==="grid"?(l(),o("div",xe,[(l(!0),o(g,null,m(x.value,s=>(l(),o("div",{key:s.id,class:"bg-white rounded-lg shadow border border-gray-200 hover:shadow-lg transition-shadow duration-300 flex flex-col"},[e("div",fe,[e("h4",be,n(s.title),1),e("a",{href:s.url,target:"_blank",rel:"noopener",class:"text-sm text-indigo-600 hover:underline truncate block mt-1"},n(s.url),9,he),e("p",we,n(s.type),1),e("div",ke,[(l(!0),o(g,null,m(s.tags||[],c=>(l(),o("span",{key:c.id,class:"px-2 py-0.5 text-xs rounded-full bg-indigo-100 text-indigo-800"},n(c.name),1))),128)),!s.tags||!s.tags.length?(l(),o("span",_e,"No tags")):p("",!0)])]),e("div",Ce,[F(s.type,"copy")?(l(),o("button",{key:0,onClick:c=>U(s),class:"px-3 py-1.5 text-sm bg-emerald-600 hover:bg-emerald-700 text-white rounded-md font-semibold"}," Copy to Project ",8,je)):p("",!0)])]))),128))])):p("",!0),f.value==="list"?(l(),o("div",Me,[e("table",Te,[t[25]||(t[25]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Title"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Type"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"URL"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Tags"),e("th",{class:"px-6 py-3"})])],-1)),e("tbody",$e,[(l(!0),o(g,null,m(x.value,s=>(l(),o("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",ze,n(s.title),1),e("td",Re,n(s.type),1),e("td",Ve,[e("a",{href:s.url,target:"_blank",rel:"noopener",class:"hover:underline"},"Visit Link →",8,Ae)]),e("td",Pe,[e("div",Fe,[(l(!0),o(g,null,m(s.tags||[],c=>(l(),o("span",{key:c.id,class:"px-2 py-0.5 text-xs rounded-full bg-indigo-100 text-indigo-800"},n(c.name),1))),128)),!s.tags||!s.tags.length?(l(),o("span",Ue,"No tags")):p("",!0)])]),e("td",Be,[F(s.type,"copy")?(l(),o("button",{key:0,onClick:c=>U(s),class:"px-3 py-1.5 text-sm bg-emerald-600 hover:bg-emerald-700 text-white rounded-md font-semibold"},"Copy",8,Ne)):p("",!0)])]))),128))])])])):p("",!0),e("div",Se,[e("div",Le,[t[26]||(t[26]=V(" Showing ",-1)),e("span",qe,n(x.value.length),1),t[27]||(t[27]=V(" of ",-1)),e("span",He,n(P.value),1),t[28]||(t[28]=V(" results ",-1))]),e("div",Oe,[e("button",{class:"px-3 py-1.5 border rounded-md text-sm font-medium bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",disabled:v.value<=1,onClick:t[4]||(t[4]=s=>v.value=Math.max(1,v.value-1))},"Previous",8,De),e("button",{class:"px-3 py-1.5 border rounded-md text-sm font-medium bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",disabled:x.value.length<z.value,onClick:t[5]||(t[5]=s=>v.value=v.value+1)},"Next",8,Ee)])])])):(l(),o("div",ve,t[24]||(t[24]=[e("h3",{class:"text-xl font-semibold text-gray-800"},"No Resources Found",-1),e("p",{class:"mt-2 text-gray-500"},"Try adjusting your filters or add a new resource.",-1)])))])])]),_.value?(l(),o("div",{key:0,class:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4",onClick:t[8]||(t[8]=A(s=>_.value=!1,["self"]))},[e("div",Ie,[t[31]||(t[31]=e("h3",{class:"text-xl font-semibold text-gray-900 mb-2"},"Copy to Project",-1)),e("p",Ge,'Select a project to copy "'+n((r=k.value)==null?void 0:r.title)+'" to.',1),e("div",null,[t[30]||(t[30]=e("label",{for:"project-select",class:"block text-sm font-medium text-gray-700 mb-1"},"Project",-1)),y(e("select",{"onUpdate:modelValue":t[6]||(t[6]=s=>b.value=s),id:"project-select",class:"border-gray-300 rounded-md w-full p-2 focus:ring-indigo-500 focus:border-indigo-500"},[t[29]||(t[29]=e("option",{value:null,disabled:""},"-- Please select a project --",-1)),(l(!0),o(g,null,m(R.value,s=>(l(),o("option",{key:s.id,value:s.id},n(s.name),9,Je))),128))],512),[[S,b.value]])]),e("div",Ke,[e("button",{class:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium hover:bg-gray-50",onClick:t[7]||(t[7]=s=>_.value=!1)},"Cancel"),e("button",{class:"px-4 py-2 bg-emerald-600 text-white rounded-md text-sm font-medium hover:bg-emerald-700 disabled:opacity-50",onClick:O,disabled:!b.value},"Confirm Copy",8,Qe)])])])):p("",!0),j.value?(l(),o("div",{key:1,class:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4",onClick:t[14]||(t[14]=A(s=>j.value=!1,["self"]))},[e("div",We,[t[38]||(t[38]=e("h3",{class:"text-xl font-semibold text-gray-900 mb-4"},"Add New Resource",-1)),e("form",{onSubmit:A(D,["prevent"])},[e("div",Xe,[e("div",null,[t[32]||(t[32]=e("label",{for:"add-title",class:"block text-sm font-medium text-gray-700"},"Title",-1)),y(e("input",{"onUpdate:modelValue":t[9]||(t[9]=s=>d.value.title=s),id:"add-title",type:"text",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500",required:""},null,512),[[T,d.value.title]])]),e("div",null,[t[33]||(t[33]=e("label",{for:"add-url",class:"block text-sm font-medium text-gray-700"},"URL",-1)),y(e("input",{"onUpdate:modelValue":t[10]||(t[10]=s=>d.value.url=s),id:"add-url",type:"url",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500",required:""},null,512),[[T,d.value.url]])]),e("div",null,[t[34]||(t[34]=e("label",{for:"add-type",class:"block text-sm font-medium text-gray-700"},"Type",-1)),y(e("select",{"onUpdate:modelValue":t[11]||(t[11]=s=>d.value.type=s),id:"add-type",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500",required:""},[(l(!0),o(g,null,m(w.value,s=>(l(),o("option",{key:s.value,value:s.value},n(s.label),9,Ye))),128))],512),[[S,d.value.type]])]),e("div",null,[t[35]||(t[35]=e("label",{for:"add-tags",class:"block text-sm font-medium text-gray-700"},"Tags",-1)),y(e("input",{"onUpdate:modelValue":t[12]||(t[12]=s=>d.value.tags=s),id:"add-tags",type:"text",placeholder:"e.g. design, inspiration, vue",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[T,d.value.tags]]),t[36]||(t[36]=e("p",{class:"mt-1 text-xs text-gray-500"},"Separate tags with a comma.",-1))])]),e("div",Ze,[e("button",{type:"button",class:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium hover:bg-gray-50",onClick:t[13]||(t[13]=s=>j.value=!1)},"Cancel"),t[37]||(t[37]=e("button",{type:"submit",class:"px-4 py-2 bg-indigo-600 text-white rounded-md text-sm font-medium hover:bg-indigo-700"},"Save Resource",-1))])],32)])])):p("",!0)]}),_:1}))}};export{kt as default};
