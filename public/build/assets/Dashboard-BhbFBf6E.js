import{a as Te,_ as Ce}from"./AuthenticatedLayout-B7dtsG9y.js";import{r as i,s as $,M as de,B as ue,J as Se,i as o,o as l,g as b,e as m,p as Y,b as e,F as T,m as _,a as N,t as n,x as z,I as ie,h as X,y as je,j as G,n as re,W as Ae}from"./app-D6uJ9OU4.js";import{P as q}from"./PrimaryButton-Dh3BDN2R.js";import{_ as Ne,a as $e}from"./StandupModal-DP7YSWql.js";import{_ as Z}from"./InputError-D-iagFLv.js";import"./ApplicationLogo-CY9kt3Hl.js";import"./SecondaryButton-CXi8uMxN.js";import"./InputLabel-DE8PJp-3.js";import"./Checkbox-BD75YvYf.js";const Ve={class:"flex items-center justify-between flex-wrap gap-4"},Pe={class:"flex-shrink-0 flex items-center"},Le={key:0,class:"h-6 w-6 text-red-600",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},Me={key:1,class:"h-6 w-6 text-indigo-600",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},ze={class:"flex-shrink-0 mt-3 sm:mt-0"},Be={key:1,class:"text-center text-sm text-gray-500 py-4"},Ee={key:2,class:"text-center text-sm text-red-500 py-4"},Ue={__name:"AvailabilityPrompt",setup(u){const C=i(!1),S=i(!0),k=i([]),D=i(!1),p=i(""),d=i(!1),y=i(!1),h=i(null),V=i(!1),B=$(()=>{var r;return((r=de().props.auth.user)==null?void 0:r.id)||null}),P=()=>{const r=localStorage.getItem("authToken");r&&!z.defaults.headers.common.Authorization&&(z.defaults.headers.common.Authorization=`Bearer ${r}`,console.log("Auth headers set in AvailabilityPrompt"))},j=async()=>{S.value=!0,p.value="";try{P();const r=await z.get("/api/availability-prompt");C.value=r.data.should_show_prompt,d.value=r.data.should_block_user,y.value=r.data.all_next_weekdays_covered,h.value=r.data.current_day,V.value=r.data.is_thursday_to_saturday,C.value&&f(r.data.next_week_start,r.data.next_week_end),localStorage.setItem("shouldBlockUser",d.value),localStorage.setItem("allNextWeekdaysCovered",y.value);const c=new CustomEvent("availability-status-updated",{detail:{shouldBlockUser:d.value,allNextWeekdaysCovered:y.value}});window.dispatchEvent(c)}catch(r){console.error("Error checking availability prompt:",r),C.value=!1,r.response&&r.response.status===401?p.value="Authentication error. Please refresh the page or log in again.":p.value="Failed to load availability prompt status."}finally{S.value=!1}},f=(r,c)=>{const x=[],L=new Date(r),I=new Date(c);let g=new Date(L);for(;g<=I;)x.push({value:g.toISOString().split("T")[0],label:g.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})}),g.setDate(g.getDate()+1);k.value=x},H=()=>{D.value=!0},E=()=>{j()},U=()=>{document.visibilityState==="visible"&&ie(()=>{j()})},O=r=>{(r.key==="shouldBlockUser"||r.key==="allNextWeekdaysCovered")&&ie(()=>{j()})};return ue(()=>{j(),document.addEventListener("visibilitychange",U),window.addEventListener("storage",O)}),Se(()=>{document.removeEventListener("visibilitychange",U),window.removeEventListener("storage",O)}),(r,c)=>(l(),o(T,null,[C.value&&!S.value&&!p.value?(l(),o("div",{key:0,class:Y(["border-l-4 p-4 mb-6 rounded-md shadow-sm transition-all duration-300",d.value?"bg-red-50 border-red-500":"bg-indigo-50 border-indigo-500"])},[e("div",Ve,[e("div",Pe,[d.value?(l(),o("svg",Le,c[1]||(c[1]=[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"},null,-1)]))):(l(),o("svg",Me,c[2]||(c[2]=[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"},null,-1)]))),e("p",{class:Y(["ml-3 text-sm font-medium",d.value?"text-red-800":"text-indigo-800"])},[d.value?(l(),o(T,{key:0},[c[3]||(c[3]=e("span",{class:"font-bold"},"Action Required:",-1)),c[4]||(c[4]=_(" You must submit your availability for all weekdays of next week to unlock all features. ",-1))],64)):y.value?(l(),o(T,{key:2},[_(" Thank you for submitting your availability for next week! You can still update it if needed. ")],64)):(l(),o(T,{key:1},[_(" Please submit your availability for next week. This helps in planning meetings and work schedules. ")],64))],2)]),e("div",ze,[m(q,{onClick:H,class:Y(["whitespace-nowrap px-6 py-2 text-sm font-semibold rounded-md shadow-md",{"bg-red-600 hover:bg-red-700 focus:ring-red-500":d.value,"bg-indigo-600 hover:bg-indigo-700 focus:ring-indigo-500":!d.value&&!y.value,"bg-green-600 hover:bg-green-700 focus:ring-green-500":!d.value&&y.value}])},{default:N(()=>[_(n(y.value?"Update Availability":"Submit Availability"),1)]),_:1},8,["class"])])])],2)):S.value?(l(),o("div",Be,"Loading availability prompt...")):p.value?(l(),o("div",Ee,n(p.value),1)):b("",!0),m(Te,{show:D.value,"next-week-dates":k.value,date:k.value.length>0?k.value[0].value:"",userId:B.value,onClose:c[0]||(c[0]=x=>D.value=!1),onAvailabilitySaved:E},null,8,["show","next-week-dates","date","userId"])],64))}},Ie={key:0,class:"bg-amber-50 border-l-4 border-amber-500 p-4 mb-6 rounded-md shadow-md"},Fe={class:"flex items-center justify-between"},We={class:"flex items-center"},Ye={class:"ml-3"},He={class:"text-sm text-amber-800 font-medium"},Oe={key:0},Qe={key:1},qe={key:2},Re={__name:"TaskNotificationPrompt",props:{overdueTasks:{type:Number,required:!0},dueTodayTasks:{type:Number,required:!0}},emits:["view-tasks"],setup(u,{emit:C}){const S=u,k=C,D=$(()=>S.overdueTasks+S.dueTodayTasks),p=$(()=>D.value>0),d=()=>{k("view-tasks")};return(y,h)=>p.value?(l(),o("div",Ie,[e("div",Fe,[e("div",We,[h[0]||(h[0]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-6 w-6 text-amber-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1)),e("div",Ye,[e("p",He,[u.overdueTasks>0&&u.dueTodayTasks>0?(l(),o("span",Oe," You have "+n(u.overdueTasks)+" overdue "+n(u.overdueTasks===1?"task":"tasks")+" and "+n(u.dueTodayTasks)+" "+n(u.dueTodayTasks===1?"task":"tasks")+" due today. ",1)):u.overdueTasks>0?(l(),o("span",Qe," You have "+n(u.overdueTasks)+" overdue "+n(u.overdueTasks===1?"task":"tasks")+" that require your attention. ",1)):u.dueTodayTasks>0?(l(),o("span",qe," You have "+n(u.dueTodayTasks)+" "+n(u.dueTodayTasks===1?"task":"tasks")+" due today. ",1)):b("",!0)])])]),e("div",null,[m(q,{onClick:d,class:"px-4 py-2 text-sm bg-amber-600 hover:bg-amber-700 focus:ring-amber-500"},{default:N(()=>h[1]||(h[1]=[_(" View ",-1)])),_:1,__:[1]})])])])):b("",!0)}},Je={class:"py-12"},Ge={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},Ke={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},Xe={class:"md:col-span-2 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg shadow-xl p-8 text-white flex flex-col sm:flex-row items-center justify-between transition-all duration-300 hover:shadow-2xl"},Ze={class:"text-3xl font-bold mb-2"},et={class:"mt-6 sm:mt-0 sm:ml-8 text-center sm:text-right"},tt={class:"text-5xl font-extrabold"},st={class:"bg-white rounded-lg shadow-xl p-8 flex flex-col justify-between transition-all duration-300 hover:shadow-2xl"},at={class:"flex items-center justify-between"},ot={class:"text-5xl font-extrabold text-indigo-600"},lt={class:"md:col-span-3"},nt={class:"md:col-span-3 bg-white overflow-hidden shadow-xl sm:rounded-lg p-8 transition-all duration-300 hover:shadow-2xl"},it={class:"mb-6 text-md text-gray-600"},rt={class:"font-semibold text-indigo-700"},dt={key:0,class:"text-center text-sm text-gray-500 py-6"},ut={key:1,class:"text-center text-sm text-red-500 py-6"},ct={key:2,class:"text-center text-sm text-gray-500 py-6"},vt={key:3,class:"grid grid-cols-2 sm:grid-cols-4 md:grid-cols-7 gap-4 mt-4"},mt={class:"text-sm font-bold text-gray-800"},xt={class:"text-xs text-gray-600 mt-0.5"},gt={class:"mt-3 text-center text-xs w-full"},pt={key:0,class:"text-gray-600 leading-tight mt-1"},yt={key:0,class:"text-gray-600 leading-tight mt-1 break-words"},ft={key:2,class:"text-gray-500 font-medium"},ht={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6"},wt={class:"flex space-x-4 mt-2"},bt={class:"flex items-center"},_t={class:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-red-100 text-red-800 font-medium text-xs mr-2"},kt={class:"flex items-center"},Dt={class:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-yellow-100 text-yellow-800 font-medium text-xs mr-2"},Tt={class:"flex items-center"},Ct={class:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-green-100 text-green-800 font-medium text-xs mr-2"},St={class:"flex items-center space-x-4"},jt={key:0,class:"text-sm text-amber-600 font-medium"},At={key:0,class:"mt-4"},Nt={class:"mb-6"},$t={key:0,class:"text-center text-sm text-red-500 py-6"},Vt={key:1,class:"text-center text-sm text-gray-500 py-6"},Pt={key:2,class:"mt-3 overflow-x-auto rounded-lg border border-gray-200 shadow-sm relative"},Lt={key:0,class:"absolute inset-0 bg-white bg-opacity-75 flex items-center justify-center rounded-lg z-10"},Mt={class:"min-w-full divide-y divide-gray-200"},zt={class:"bg-white divide-y divide-gray-200"},Bt={class:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900"},Et={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-600"},Ut={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-600"},It={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-600"},Ft={class:"px-4 py-3 whitespace-nowrap text-sm"},Wt={class:"flex space-x-2"},Yt={class:"md:col-span-3 bg-white overflow-hidden shadow-xl sm:rounded-lg p-8 transition-all duration-300 hover:shadow-2xl"},Ht={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6"},Ot={key:0,class:"mt-4"},Qt={class:"mb-6"},qt={key:0,class:"text-center text-sm text-red-500 py-6"},Rt={key:1,class:"text-center text-sm text-gray-500 py-6"},Jt={key:2,class:"mt-3 overflow-x-auto rounded-lg border border-gray-200 shadow-sm relative"},Gt={key:0,class:"absolute inset-0 bg-white bg-opacity-75 flex items-center justify-center rounded-lg z-10"},Kt={class:"min-w-full divide-y divide-gray-200"},Xt={class:"bg-white divide-y divide-gray-200"},Zt={class:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900"},es={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-600"},ts={class:"px-4 py-3 whitespace-nowrap text-sm"},ss={class:"px-4 py-3 whitespace-nowrap text-sm"},as={class:"flex space-x-2"},os={class:"md:col-span-3 bg-white overflow-hidden shadow-xl sm:rounded-lg p-8 transition-all duration-300 hover:shadow-2xl"},ls={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6"},ns={key:0,class:"mt-4"},is={class:"mb-6"},rs={key:0,class:"text-center text-sm text-red-500 py-6"},ds={key:1,class:"text-center text-sm text-gray-500 py-6"},us={key:2,class:"mt-3 overflow-x-auto rounded-lg border border-gray-200 shadow-sm relative"},cs={key:0,class:"absolute inset-0 bg-white bg-opacity-75 flex items-center justify-center rounded-lg z-10"},vs={class:"min-w-full divide-y divide-gray-200"},ms={class:"bg-white divide-y divide-gray-200"},xs={class:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900"},gs={class:"px-4 py-3 whitespace-nowrap text-sm"},ps={class:"px-4 py-3 whitespace-nowrap text-sm"},ys={class:"px-4 py-3 whitespace-nowrap text-sm"},fs={class:"px-4 py-3 whitespace-nowrap text-sm"},hs={class:"flex space-x-2"},As={__name:"Dashboard",props:{projectCount:Number},setup(u){const C=$(()=>de().props.auth.user),S=u,k=i([]),D=i(!0),p=i(""),d=i(!1),y=i(""),h=i({total_due_tasks:0,projects:[]}),V=i(!0),B=i(""),P=i(!1),j=i(""),f=i({availabilities:[],start_date:"",end_date:""}),H=i(!1),E=i(""),U=i(!1),O=i(null),r=i(!1),c=i(null),x=i([]),L=i(!0),I=i(""),g=i(!1),R=i(""),K=a=>a?new Date(a).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}):"",ee=async()=>{D.value=!0,p.value="";try{const a=await z.get("/api/projects-simplified");k.value=a.data}catch(a){p.value="Failed to load projects",console.error("Error fetching projects:",a)}finally{D.value=!1}},te=$(()=>{if(!y.value)return k.value;const a=y.value.toLowerCase();return k.value.filter(t=>t.name.toLowerCase().includes(a)||t.user_role&&t.user_role.toLowerCase().includes(a)||t.status.toLowerCase().includes(a.replace(" ","_")))}),ce=()=>{d.value=!d.value,d.value&&k.value.length===0&&ee()},ve=a=>{switch(a){case"active":return"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 capitalize";case"pending":return"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 capitalize";case"on_hold":return"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 capitalize";default:return"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800 capitalize"}},se=async()=>{V.value=!0,B.value="";try{const a=await z.get("/api/task-statistics");h.value=a.data}catch(a){B.value="Failed to load task statistics",console.error("Error fetching task statistics:",a)}finally{V.value=!1}},ae=$(()=>{if(!j.value)return h.value.projects;const a=j.value.toLowerCase();return h.value.projects.filter(t=>t.name.toLowerCase().includes(a))}),me=()=>{P.value=!P.value,P.value&&h.value.projects.length===0&&se()},xe=async()=>{H.value=!0,E.value="";try{const a=new Date,t=new Date(a);t.setDate(a.getDate()-a.getDay()+(a.getDay()===0?-6:1));const s=new Date(t);s.setDate(t.getDate()+6);const v=W=>W.toISOString().split("T")[0],A=await z.get("/api/availabilities",{params:{user_id:C.value.id,start_date:v(t),end_date:v(s)}});f.value=A.data}catch(a){E.value="Failed to load availability data",console.error("Error fetching weekly availability:",a)}finally{H.value=!1}},ge=a=>["Mon","Tue","Wed","Thu","Fri","Sat","Sun"][a-1],pe=a=>{const t=new Date(f.value.start_date);return t.setDate(t.getDate()+a-1),t.toLocaleDateString("en-US",{month:"short",day:"numeric"})},M=a=>{const t=new Date(f.value.start_date);t.setDate(t.getDate()+a-1);const s=t.toISOString().split("T")[0],v=f.value.availabilities.filter(w=>w.date.split("T")[0]===s);if(v.length===0)return{status:"not-set"};if(v.some(w=>!w.is_available)){const w=v.find(J=>!J.is_available);return{status:"unavailable",reason:(w==null?void 0:w.reason)||"Not specified"}}const W=[];return v.forEach(w=>{w.is_available&&w.time_slots&&Array.isArray(w.time_slots)&&w.time_slots.forEach(J=>{W.push(`${J.start_time} - ${J.end_time}`)})}),{status:"available",slots:W.length>0?W:["All Day"]}},ye=a=>{const t=M(a);let s="";t.status==="available"?s="border-green-300 bg-green-50/50":t.status==="unavailable"?s="border-red-300 bg-red-50/50":s="border-gray-200 bg-gray-50";const v=new Date,A=new Date(f.value.start_date);return A.setDate(A.getDate()+a-1),v.toDateString()===A.toDateString()&&(s+=" ring-2 ring-indigo-500 ring-offset-2"),s},fe=a=>{O.value=a,U.value=!0},he=()=>{ee()},we=a=>{c.value=a,r.value=!0},be=()=>{r.value=!1},oe=async()=>{L.value=!0,I.value="";try{const a=await z.get("/api/assigned-tasks");x.value=a.data}catch(a){I.value="Failed to load assigned tasks",console.error("Error fetching assigned tasks:",a)}finally{L.value=!1}},le=$(()=>{if(!R.value)return x.value;const a=R.value.toLowerCase();return x.value.filter(t=>{var s,v;return t.name.toLowerCase().includes(a)||((s=t.milestone)==null?void 0:s.name)&&t.milestone.name.toLowerCase().includes(a)||((v=t.project)==null?void 0:v.name)&&t.project.name.toLowerCase().includes(a)})}),_e=()=>{g.value=!g.value,g.value&&x.value.length===0&&oe()},ke=(a,t)=>{Ae(a,t)},Q=i(null),F=i("all"),ne=$(()=>F.value==="due-overdue"?le.value.filter(a=>a.due_date&&new Date(a.due_date)<new Date||a.due_date&&new Date(a.due_date).toDateString()===new Date().toDateString()):le.value),De=()=>{g.value?(F.value="due-overdue",Q.value&&Q.value.scrollIntoView({behavior:"smooth"})):(g.value=!0,setTimeout(()=>{F.value="due-overdue",Q.value&&Q.value.scrollIntoView({behavior:"smooth"})},100))};return ue(()=>{se(),xe(),oe()}),(a,t)=>(l(),o(T,null,[m(X(je),{title:"Dashboard"}),m(Ce,null,{default:N(()=>[e("div",Je,[e("div",Ge,[m(Re,{"overdue-tasks":x.value.filter(s=>s.due_date&&new Date(s.due_date)<new Date).length,"due-today-tasks":x.value.filter(s=>s.due_date&&new Date(s.due_date).toDateString()===new Date().toDateString()).length,onViewTasks:De},null,8,["overdue-tasks","due-today-tasks"]),e("div",Ke,[e("div",Xe,[e("div",null,[e("h3",Ze,"Hello, "+n(C.value.name)+"!",1),t[6]||(t[6]=e("p",{class:"text-md opacity-90"},"Here's a quick overview of your activities and progress.",-1))]),e("div",et,[e("p",tt,n(S.projectCount),1),t[7]||(t[7]=e("p",{class:"text-sm opacity-90"},"Total Projects",-1))])]),e("div",st,[t[9]||(t[9]=e("h3",{class:"text-xl font-semibold text-gray-900 mb-4"},"Pending Tasks",-1)),e("div",at,[e("p",ot,n(h.value.total_due_tasks),1),t[8]||(t[8]=e("svg",{class:"w-12 h-12 text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})],-1))]),t[10]||(t[10]=e("p",{class:"text-sm text-gray-600 mt-4"},"Tasks currently due across all your projects.",-1))]),e("div",lt,[m(Ue)]),e("div",nt,[t[14]||(t[14]=e("h3",{class:"text-xl font-semibold text-gray-900 mb-4"},"Your Weekly Availability",-1)),e("p",it,[t[11]||(t[11]=_(" Availability for: ",-1)),e("span",rt,n(f.value.start_date?K(f.value.start_date):"")+" to "+n(f.value.end_date?K(f.value.end_date):""),1)]),H.value?(l(),o("div",dt,"Loading availability data...")):E.value?(l(),o("div",ut,n(E.value),1)):!f.value.availabilities||f.value.availabilities.length===0?(l(),o("div",ct," No availability data found for this week. ")):(l(),o("div",vt,[(l(),o(T,null,G(7,s=>e("div",{key:"availability-day-"+s,class:Y(["flex flex-col items-center justify-start p-4 border rounded-lg shadow-sm h-36 overflow-hidden text-clip relative group",ye(s)])},[e("span",mt,n(ge(s)),1),e("span",xt,n(pe(s)),1),e("div",gt,[M(s).status==="available"?(l(),o(T,{key:0},[t[12]||(t[12]=e("p",{class:"text-green-700 font-bold"},"Available",-1)),M(s).slots.length>0?(l(),o("p",pt,n(M(s).slots.join(", ")),1)):b("",!0)],64)):M(s).status==="unavailable"?(l(),o(T,{key:1},[t[13]||(t[13]=e("p",{class:"text-red-700 font-bold"},"Unavailable",-1)),M(s).reason?(l(),o("p",yt," Reason: "+n(M(s).reason),1)):b("",!0)],64)):(l(),o("p",ft,"Not Set"))])],2)),64))]))]),e("div",{ref_key:"assignedTasksRef",ref:Q,class:"md:col-span-3 bg-white overflow-hidden shadow-xl sm:rounded-lg p-8 transition-all duration-300 hover:shadow-2xl"},[e("div",ht,[e("div",null,[t[18]||(t[18]=e("h3",{class:"text-xl font-semibold text-gray-900 mb-2"},"Your Assigned Tasks",-1)),e("div",wt,[e("div",bt,[e("span",_t,n(x.value.filter(s=>s.due_date&&new Date(s.due_date)<new Date).length),1),t[15]||(t[15]=e("span",{class:"text-sm text-gray-600"},"Overdue",-1))]),e("div",kt,[e("span",Dt,n(x.value.filter(s=>s.due_date&&new Date(s.due_date).toDateString()===new Date().toDateString()).length),1),t[16]||(t[16]=e("span",{class:"text-sm text-gray-600"},"Due Today",-1))]),e("div",Tt,[e("span",Ct,n(x.value.filter(s=>s.status==="In Progress").length),1),t[17]||(t[17]=e("span",{class:"text-sm text-gray-600"},"In Progress",-1))])])]),e("div",St,[g.value&&F.value==="due-overdue"?(l(),o("div",jt,[t[19]||(t[19]=_(" Showing due and overdue tasks ",-1)),e("button",{onClick:t[0]||(t[0]=s=>F.value="all"),class:"ml-2 text-blue-600 hover:text-blue-800 underline"}," Show all ")])):b("",!0),e("button",{onClick:_e,class:"inline-flex justify-center items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-orange-600 hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 transition ease-in-out duration-150 w-48"},n(g.value?"Collapse Tasks":"View My Tasks ("+x.value.length+")"),1)])]),g.value?(l(),o("div",At,[e("div",Nt,[m(Z,{modelValue:R.value,"onUpdate:modelValue":t[1]||(t[1]=s=>R.value=s),placeholder:"Search tasks by name, milestone, or project...",class:"w-full",disabled:L.value},null,8,["modelValue","disabled"])]),I.value?(l(),o("div",$t,n(I.value),1)):ne.value.length===0&&!L.value?(l(),o("div",Vt,n(F.value==="due-overdue"?"No due or overdue tasks found.":"No assigned tasks found matching your search."),1)):(l(),o("div",Pt,[L.value?(l(),o("div",Lt,t[20]||(t[20]=[e("svg",{class:"animate-spin h-8 w-8 text-purple-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),e("span",{class:"ml-3 text-purple-700"},"Loading assigned tasks...",-1)]))):b("",!0),e("table",Mt,[t[22]||(t[22]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Task Name"),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Milestone"),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Project"),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Due Date"),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",zt,[(l(!0),o(T,null,G(ne.value,s=>{var v,A;return l(),o("tr",{key:s.id,class:Y(["hover:bg-gray-50 transition-colors duration-100",{"bg-red-50":s.due_date&&new Date(s.due_date)<new Date,"bg-yellow-50":s.due_date&&new Date(s.due_date).toDateString()===new Date().toDateString()}])},[e("td",Bt,n(s.name),1),e("td",Et,n(((v=s.milestone)==null?void 0:v.name)||"N/A"),1),e("td",Ut,n(((A=s.project)==null?void 0:A.name)||"N/A"),1),e("td",It,n(s.due_date?K(s.due_date):"No due date"),1),e("td",Ft,[e("div",Wt,[m(q,{onClick:W=>ke(s.id,s.project_id),class:"px-3 py-1 text-xs leading-4 bg-purple-600 hover:bg-purple-700"},{default:N(()=>t[21]||(t[21]=[_(" View ",-1)])),_:2,__:[21]},1032,["onClick"])])])],2)}),128))])])]))])):b("",!0)],512),e("div",Yt,[e("div",Ht,[t[23]||(t[23]=e("h3",{class:"text-xl font-semibold text-gray-900 mb-2 sm:mb-0"},"Your Projects",-1)),e("button",{onClick:ce,class:"inline-flex justify-center items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition ease-in-out duration-150 w-48"},n(d.value?"Collapse Projects":"View My Projects ("+u.projectCount+")"),1)]),d.value?(l(),o("div",Ot,[e("div",Qt,[m(Z,{modelValue:y.value,"onUpdate:modelValue":t[2]||(t[2]=s=>y.value=s),placeholder:"Search projects by name, role, or status...",class:"w-full",disabled:D.value},null,8,["modelValue","disabled"])]),p.value?(l(),o("div",qt,n(p.value),1)):te.value.length===0&&!D.value?(l(),o("div",Rt,"No projects found matching your search.")):(l(),o("div",Jt,[D.value?(l(),o("div",Gt,t[24]||(t[24]=[e("svg",{class:"animate-spin h-8 w-8 text-indigo-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),e("span",{class:"ml-3 text-indigo-700"},"Loading projects...",-1)]))):b("",!0),e("table",Kt,[t[28]||(t[28]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Project Name"),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Your Role"),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",Xt,[(l(!0),o(T,null,G(te.value,s=>(l(),o("tr",{key:s.id,class:"hover:bg-gray-50 transition-colors duration-100"},[e("td",Zt,n(s.name),1),e("td",es,n(s.user_role||"N/A"),1),e("td",ts,[e("span",{class:Y(ve(s.status))},n(s.status.replace("_"," ")),3)]),e("td",ss,[e("div",as,[m(X(re),{href:`/projects/${s.id}`,class:"inline-flex items-center px-3 py-1 border border-transparent text-xs leading-4 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:border-indigo-700 focus:ring active:bg-indigo-700 transition ease-in-out duration-150"},{default:N(()=>t[25]||(t[25]=[_(" View ",-1)])),_:2,__:[25]},1032,["href"]),m(q,{onClick:v=>fe(s.id),class:"px-3 py-1 text-xs leading-4 bg-purple-600 hover:bg-purple-700"},{default:N(()=>t[26]||(t[26]=[_(" Notes ",-1)])),_:2,__:[26]},1032,["onClick"]),m(q,{onClick:v=>we(s.id),class:"px-3 py-1 text-xs leading-4 bg-green-600 hover:bg-green-700"},{default:N(()=>t[27]||(t[27]=[_(" Standup ",-1)])),_:2,__:[27]},1032,["onClick"])])])]))),128))])])]))])):b("",!0)]),e("div",os,[e("div",ls,[t[29]||(t[29]=e("h3",{class:"text-xl font-semibold text-gray-900 mb-2 sm:mb-0"},"Due Tasks Breakdown",-1)),e("button",{onClick:me,class:"inline-flex justify-center items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition ease-in-out duration-150 w-48"},n(P.value?"Collapse Tasks":"My Task Summary"),1)]),P.value?(l(),o("div",ns,[e("div",is,[m(Z,{modelValue:j.value,"onUpdate:modelValue":t[3]||(t[3]=s=>j.value=s),placeholder:"Search tasks by project name...",class:"w-full",disabled:V.value},null,8,["modelValue","disabled"])]),B.value?(l(),o("div",rs,n(B.value),1)):ae.value.length===0&&!V.value?(l(),o("div",ds,"No due tasks found matching your search.")):(l(),o("div",us,[V.value?(l(),o("div",cs,t[30]||(t[30]=[e("svg",{class:"animate-spin h-8 w-8 text-blue-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),e("span",{class:"ml-3 text-blue-700"},"Loading tasks...",-1)]))):b("",!0),e("table",vs,[t[32]||(t[32]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Project Name"),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Total Due"),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Due Today"),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Assigned To Me"),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",ms,[(l(!0),o(T,null,G(ae.value,s=>(l(),o("tr",{key:s.id,class:"hover:bg-gray-50 transition-colors duration-100"},[e("td",xs,n(s.name),1),e("td",gs,n(s.due_tasks),1),e("td",ps,n(s.due_today),1),e("td",ys,n(s.assigned_to_me),1),e("td",fs,[e("div",hs,[m(X(re),{href:`/projects/${s.id}`,class:"inline-flex items-center px-3 py-1 border border-transparent text-xs leading-4 font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:border-blue-700 focus:ring active:bg-blue-700 transition ease-in-out duration-150"},{default:N(()=>t[31]||(t[31]=[_(" View Project ",-1)])),_:2,__:[31]},1032,["href"])])])]))),128))])])]))])):b("",!0)]),t[33]||(t[33]=e("div",{class:"md:col-span-3 bg-white overflow-hidden shadow-xl sm:rounded-lg p-8 transition-all duration-300 hover:shadow-2xl"},[e("h3",{class:"text-xl font-semibold text-gray-900 mb-4"},"Notice Board"),e("p",{class:"text-md text-gray-600"}," No new announcements at this time. Check back later for important updates! ")],-1))])])]),m(Ne,{show:U.value,"project-id":O.value,onClose:t[4]||(t[4]=s=>U.value=!1),onNoteAdded:he},null,8,["show","project-id"]),m($e,{show:r.value,"project-id":c.value,onClose:t[5]||(t[5]=s=>r.value=!1),onStandupAdded:be},null,8,["show","project-id"])]),_:1})],64))}};export{As as default};
