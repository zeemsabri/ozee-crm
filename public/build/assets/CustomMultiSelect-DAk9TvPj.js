import{r as y,c as B,e as C,$ as M,v as f,a as n,o as r,b as d,i as c,t as m,F as v,l as x,m as L,s as $,x as D,j as I}from"./app-CZiJFItQ.js";import{_ as K}from"./_plugin-vue_export-helper-DlAUqK2U.js";const N={class:"relative"},O={key:0,class:"text-gray-400 text-sm"},T=["onClick"],_=["placeholder"],j={key:0,class:"absolute z-50 w-full bg-white border border-gray-300 rounded-md shadow-lg mt-1 max-h-60 overflow-y-auto"},z={class:"py-1"},A={key:0,class:"px-4 py-2 text-gray-500 text-sm"},F=["onClick"],q={__name:"CustomMultiSelect",props:{modelValue:{type:Array,default:()=>[]},options:{type:Array,default:()=>[],required:!0},placeholder:{type:String,default:"Select items"},labelKey:{type:String,default:"name"},trackBy:{type:String,default:"id"}},emits:["update:modelValue"],setup(l,{emit:h}){const o=l,w=h,u=y(!1),a=y(""),p=B(()=>{if(!a.value)return o.options;const s=a.value.toLowerCase();return o.options.filter(e=>e[o.labelKey].toLowerCase().includes(s))});C(()=>o.modelValue,s=>{},{deep:!0});const g=s=>{const e=[...o.modelValue],i=e.findIndex(t=>t===s[o.trackBy]);i===-1?e.push(s[o.trackBy]):e.splice(i,1),w("update:modelValue",e),a.value=""},k=s=>{const e=o.options.find(i=>i[o.trackBy]===s);return e?e[o.labelKey]:""},b=s=>o.modelValue.includes(s);return(s,e)=>{const i=M("click-outside");return f((r(),n("div",N,[d("div",{class:"flex flex-wrap items-center w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm cursor-pointer min-h-[38px] bg-white focus-within:border-indigo-500 focus-within:ring-indigo-500",onClick:e[2]||(e[2]=t=>u.value=!u.value)},[l.modelValue.length===0&&!a.value?(r(),n("span",O,m(l.placeholder),1)):c("",!0),(r(!0),n(v,null,x(l.modelValue,t=>(r(),n("div",{key:t,class:"inline-flex items-center bg-indigo-100 text-indigo-800 text-xs font-medium px-2.5 py-0.5 rounded mr-2 mb-1"},[L(m(k(t))+" ",1),d("button",{type:"button",onClick:$(V=>g(l.options.find(S=>S[l.trackBy]===t)),["stop"]),class:"ml-1 text-indigo-800 hover:text-indigo-900 focus:outline-none"},e[3]||(e[3]=[d("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,T)]))),128)),f(d("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>a.value=t),onInput:e[1]||(e[1]=t=>u.value=!0),class:"flex-grow border-none focus:ring-0 p-0 text-sm placeholder-gray-400 bg-transparent outline-none",placeholder:l.modelValue.length===0?"Search...":""},null,40,_),[[D,a.value]])]),u.value?(r(),n("div",j,[d("ul",z,[p.value.length===0?(r(),n("li",A,"No items found.")):c("",!0),(r(!0),n(v,null,x(p.value,t=>(r(),n("li",{key:t[l.trackBy],class:I(["px-4 py-2 cursor-pointer hover:bg-gray-100 text-sm",{"bg-indigo-50 text-indigo-900":b(t[l.trackBy])}]),onClick:V=>g(t)},m(t[l.labelKey]),11,F))),128))])])):c("",!0)])),[[i,()=>u.value=!1]])}}},Z=K(q,[["__scopeId","data-v-5326f069"]]);export{Z as O};
