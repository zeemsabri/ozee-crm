import{C as x,r as _,f as C,a as g,o as p,b as t,d as l,v as M,x as O,w,m as T,j as U,J as y,N as $,I as S,D as z,aR as D,u as j,h as N,F as A}from"./app-C_l5dlFM.js";import{k as B,T as I,_ as K}from"./AuthenticatedLayout-C7ngEn3R.js";import{_ as n}from"./InputLabel-CBCIfFNJ.js";import{_ as c}from"./TextInput-CoLtqwhj.js";import{_ as d}from"./InputError-BkkNx5sB.js";import{_ as q}from"./PrimaryButton-BeqOxdrm.js";import{S as b}from"./SelectDropdown-Duuae3KQ.js";import{P as F}from"./ProjectTypeInput-C6KDe31L.js";import"./Modal-ernkAfjj.js";import"./SecondaryButton-CHg2i9M2.js";import"./index-CXsQbk8n.js";import"./BaseFormModal-gnHL_btQ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./debounce-C-hnF4Z3.js";import"./ApplicationLogo-Dq7BFhec.js";import"./createLucideIcon-kJjbaSbK.js";import"./plus-BLJjzuTJ.js";import"./DangerButton-DRwWv2nt.js";import"./moment-BLMuvzoS.js";import"./NoticeboardModal-BJAmCoaI.js";/* empty css                                                                       */const E={class:"space-y-6 bg-white p-6 rounded-lg shadow-md border border-gray-100 font-inter"},L={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},G=["disabled"],J={class:"mt-6"},H=["disabled"],R={class:"mt-6"},W={class:"mt-6"},Q={class:"mt-6 flex justify-end"},X={key:0,class:"flex items-center"},Y={key:1},Z={__name:"ProjectCreateBasicInfo",props:{statusOptions:{type:Array,required:!0,default:()=>[{value:"active",label:"Active"},{value:"completed",label:"Completed"},{value:"paid",label:"Paid"},{value:"on-hold",label:"On-hold"}]},sourceOptions:{type:Array,required:!0},errors:{type:Object,default:()=>({})},canManageProjects:{type:Boolean,default:!1}},emits:["projectCreated"],setup(r,{emit:f}){const o=r,v=f,a=x({name:"",description:"",website:"",social_media_link:"",preferred_keywords:"",google_chat_id:"",google_drive_link:"",logo:null,status:"active",project_type:"",source:"",tags:[],tags_data:[],timezone:null,project_tier_id:null,profit_margin_percentage:null}),i=_(!1),m=_([]),k=async()=>{try{const u=await window.axios.get("/api/project-tiers");m.value=u.data}catch(u){console.error("Error fetching project tiers:",u),y("Failed to load project tiers.")}},V=u=>{const e=u.target.files[0];e?a.logo=e:a.logo=null},P=async()=>{i.value=!0;const u=new FormData;for(const e in a)e!=="tags_data"&&a[e]!==null&&a[e]!==void 0&&(Array.isArray(a[e])?a[e].forEach((s,h)=>{typeof s=="object"&&s!==null?u.append(`${e}[${h}]`,JSON.stringify(s)):u.append(`${e}[]`,s)}):u.append(e,a[e]));try{const e=await window.axios.post("/api/projects",u,{headers:{"Content-Type":"multipart/form-data"}});$("Project created successfully!"),e.data&&e.data.id&&(v("projectCreated",e.data.id),S.visit(route("projects.edit",{project:e.data.id})))}catch(e){console.error("Error creating project:",e);let s="Failed to create project. Please check the form and try again.";e.response&&e.response.data&&e.response.data.message&&(s=e.response.data.message),y(s)}finally{i.value=!1}};return C(()=>{k()}),(u,e)=>(p(),g("div",E,[e[15]||(e[15]=t("h2",{class:"text-2xl font-semibold text-gray-800 mb-6"},"Create New Project",-1)),t("div",L,[t("div",null,[l(n,{for:"name",value:"Project Name"}),l(c,{id:"name",type:"text",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:a.name,"onUpdate:modelValue":e[0]||(e[0]=s=>a.name=s),required:"",autofocus:"",disabled:!r.canManageProjects||i.value},null,8,["modelValue","disabled"]),l(d,{message:o.errors.name?o.errors.name[0]:"",class:"mt-2"},null,8,["message"])]),t("div",null,[l(n,{for:"website",value:"Website"}),l(c,{id:"website",type:"url",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:a.website,"onUpdate:modelValue":e[1]||(e[1]=s=>a.website=s),disabled:!r.canManageProjects||i.value},null,8,["modelValue","disabled"]),l(d,{message:o.errors.website?o.errors.website[0]:"",class:"mt-2"},null,8,["message"])]),t("div",null,[l(n,{for:"social_media_link",value:"Social Media Link"}),l(c,{id:"social_media_link",type:"url",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:a.social_media_link,"onUpdate:modelValue":e[2]||(e[2]=s=>a.social_media_link=s),disabled:!r.canManageProjects||i.value},null,8,["modelValue","disabled"]),l(d,{message:o.errors.social_media_link?o.errors.social_media_link[0]:"",class:"mt-2"},null,8,["message"])]),t("div",null,[l(n,{for:"google_chat_id",value:"Google Chat ID"}),l(c,{id:"google_chat_id",type:"text",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:a.google_chat_id,"onUpdate:modelValue":e[3]||(e[3]=s=>a.google_chat_id=s),disabled:!r.canManageProjects||i.value},null,8,["modelValue","disabled"]),l(d,{message:o.errors.google_chat_id?o.errors.google_chat_id[0]:"",class:"mt-2"},null,8,["message"])]),t("div",null,[l(n,{for:"google_drive_link",value:"Google Drive Link"}),l(c,{id:"google_drive_link",type:"text",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:a.google_drive_link,"onUpdate:modelValue":e[4]||(e[4]=s=>a.google_drive_link=s),disabled:!r.canManageProjects||i.value},null,8,["modelValue","disabled"]),l(d,{message:o.errors.google_drive_link?o.errors.google_drive_link[0]:"",class:"mt-2"},null,8,["message"])]),t("div",null,[l(n,{for:"status",value:"Status"}),l(b,{id:"status",modelValue:a.status,"onUpdate:modelValue":e[5]||(e[5]=s=>a.status=s),options:r.statusOptions,valueKey:"value",labelKey:"label",placeholder:"Select Project Status",disabled:!r.canManageProjects||i.value,required:!0,class:"mt-1 block w-full"},null,8,["modelValue","options","disabled"]),l(d,{message:o.errors.status?o.errors.status[0]:"",class:"mt-2"},null,8,["message"])]),t("div",null,[l(F,{id:"project_type",modelValue:a.project_type,"onUpdate:modelValue":e[6]||(e[6]=s=>a.project_type=s),disabled:!r.canManageProjects||i.value,class:"mt-1 block w-full"},null,8,["modelValue","disabled"]),l(d,{message:o.errors.project_type?o.errors.project_type[0]:"",class:"mt-2"},null,8,["message"])]),t("div",null,[l(n,{for:"source",value:"Source"}),l(b,{id:"source",modelValue:a.source,"onUpdate:modelValue":e[7]||(e[7]=s=>a.source=s),options:r.sourceOptions,valueKey:"value",labelKey:"label",placeholder:"Select a Source",disabled:!r.canManageProjects||i.value,class:"mt-1 block w-full"},null,8,["modelValue","options","disabled"]),l(d,{message:o.errors.source?o.errors.source[0]:"",class:"mt-2"},null,8,["message"])]),t("div",null,[l(n,{for:"timezone",value:"Timezone"}),l(B,{id:"timezone",modelValue:a.timezone,"onUpdate:modelValue":e[8]||(e[8]=s=>a.timezone=s),disabled:!r.canManageProjects||i.value,class:"mt-1 block w-full"},null,8,["modelValue","disabled"]),l(d,{message:o.errors.timezone?o.errors.timezone[0]:"",class:"mt-2"},null,8,["message"])]),t("div",null,[l(n,{for:"project_tier_id",value:"Project Tier"}),l(b,{id:"project_tier_id",modelValue:a.project_tier_id,"onUpdate:modelValue":e[9]||(e[9]=s=>a.project_tier_id=s),options:m.value,valueKey:"id",labelKey:"name",placeholder:"Select Project Tier",disabled:!r.canManageProjects||i.value,class:"mt-1 block w-full"},null,8,["modelValue","options","disabled"]),l(d,{message:o.errors.project_tier_id?o.errors.project_tier_id[0]:"",class:"mt-2"},null,8,["message"])]),t("div",null,[l(n,{for:"profit_margin_percentage",value:"Profit Margin (%)"}),l(c,{id:"profit_margin_percentage",type:"number",step:"0.01",min:"0",max:"100",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:a.profit_margin_percentage,"onUpdate:modelValue":e[10]||(e[10]=s=>a.profit_margin_percentage=s),disabled:!r.canManageProjects||i.value},null,8,["modelValue","disabled"]),l(d,{message:o.errors.profit_margin_percentage?o.errors.profit_margin_percentage[0]:"",class:"mt-2"},null,8,["message"])]),t("div",null,[l(n,{for:"logo",value:"Project Logo"}),t("input",{type:"file",id:"logo",onChange:V,class:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100 cursor-pointer",accept:"image/*",disabled:!r.canManageProjects||i.value},null,40,G),l(d,{message:o.errors.logo?o.errors.logo[0]:"",class:"mt-2"},null,8,["message"])])]),t("div",J,[l(n,{for:"description",value:"Description"}),M(t("textarea",{id:"description",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-lg shadow-sm mt-1 block w-full","onUpdate:modelValue":e[11]||(e[11]=s=>a.description=s),disabled:!r.canManageProjects||i.value,rows:"4"},null,8,H),[[O,a.description]]),l(d,{message:o.errors.description?o.errors.description[0]:"",class:"mt-2"},null,8,["message"])]),t("div",R,[l(n,{for:"preferred_keywords",value:"Client Preferred Keywords"}),l(c,{id:"preferred_keywords",type:"text",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:a.preferred_keywords,"onUpdate:modelValue":e[12]||(e[12]=s=>a.preferred_keywords=s),disabled:!r.canManageProjects||i.value},null,8,["modelValue","disabled"]),l(d,{message:o.errors.preferred_keywords?o.errors.preferred_keywords[0]:"",class:"mt-2"},null,8,["message"])]),t("div",W,[l(I,{modelValue:a.tags,"onUpdate:modelValue":e[13]||(e[13]=s=>a.tags=s),initialTags:a.tags_data,label:"Associated Tags",placeholder:"Search or add tags",error:o.errors.tags?o.errors.tags[0]:"",disabled:!r.canManageProjects||i.value},null,8,["modelValue","initialTags","error","disabled"])]),t("div",Q,[l(q,{onClick:P,disabled:!r.canManageProjects||i.value,class:U([{"opacity-50 cursor-not-allowed":i.value},"px-6 py-2 rounded-lg text-base shadow-md hover:shadow-lg transition-all"])},{default:w(()=>[i.value?(p(),g("span",X,e[14]||(e[14]=[t("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),T(" Creating... ",-1)]))):(p(),g("span",Y," Create Project "))]),_:1},8,["disabled","class"])])]))}},ee={class:"py-12"},le={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},ae={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg p-6"},Pe={__name:"Create",props:{statusOptions:{type:Array,required:!0},sourceOptions:{type:Array,required:!0},errors:{type:Object,default:()=>({})}},setup(r){const{canDo:f}=z();D();const o=f("create_projects"),v=r,a=i=>{console.log(`New project created with ID: ${i}`)};return(i,m)=>(p(),g(A,null,[l(j(N),{title:"Create New Project"}),l(K,null,{header:w(()=>m[0]||(m[0]=[t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Create New Project ",-1)])),default:w(()=>[t("div",ee,[t("div",le,[t("div",ae,[l(Z,{statusOptions:r.statusOptions,sourceOptions:r.sourceOptions,errors:v.errors,canManageProjects:j(o),onProjectCreated:a},null,8,["statusOptions","sourceOptions","errors","canManageProjects"])])])])]),_:1})],64))}};export{Pe as default};
