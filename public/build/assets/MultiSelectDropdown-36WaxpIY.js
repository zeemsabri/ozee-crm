import{a as s,o as n,b as i,r as c,c as z,f as Q,Q as X,e as G,v as k,g as E,d as P,i as g,t as y,F as B,l as H,m as R,s as V,u as C,j as p,K as j,x as D,k as A,Y as J,n as W}from"./app-DKXfdGr7.js";import{r as _}from"./ChevronDownIcon-DMwNkgKU.js";function U(o,S){return n(),s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[i("path",{"fill-rule":"evenodd",d:"M16.704 4.153a.75.75 0 0 1 .143 1.052l-8 10.5a.75.75 0 0 1-1.127.075l-4.5-4.5a.75.75 0 0 1 1.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 0 1 1.05-.143Z","clip-rule":"evenodd"})])}function ee(o,S){return n(),s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[i("path",{d:"M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z"})])}const te=["disabled"],le={key:0,class:"flex flex-wrap gap-1 items-center"},ae={key:0,class:"text-gray-500"},oe={class:"absolute z-50 mt-1 w-full rounded-xl shadow-lg bg-white ring-1 ring-black ring-opacity-5"},ne={class:"p-2 border-b border-gray-200"},se=["onClick"],re={key:0,class:"block px-4 py-2 text-sm text-gray-500"},ie={class:"p-2 border-b border-gray-200"},ue=["onClick"],de={key:0,class:"block px-4 py-2 text-sm text-gray-500"},q=!0,ge={__name:"MultiSelectDropdown",props:{modelValue:{type:[String,Number,Object,Array,null],default:null},options:{type:Array,default:()=>[]},placeholder:{type:String,default:"Select an option"},valueKey:{type:String,default:"value"},labelKey:{type:String,default:"label"},isMulti:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},required:{type:Boolean,default:!1},maxHeight:{type:String,default:"250px"},width:{type:String,default:"full"},labelClass:{type:String,default:"text-xs"}},emits:["update:modelValue","change"],setup(o,{emit:S}){const l=o,v=S,r=c(!1),u=c(""),m=c(null),I=m,w=c(null),K=c(null),x=c({top:0,left:0,width:0}),O=c("250px"),f=()=>{if(!I.value)return;const a=I.value.querySelector("button");if(!a)return;const e=a.getBoundingClientRect(),d=(window.innerHeight||document.documentElement.clientHeight)-e.bottom,M=parseInt(String(l.maxHeight).replace("px",""))||250,Z=Math.min(M+50,d-8);O.value=`${Math.max(Z,150)}px`,x.value={top:e.bottom+window.scrollY,left:e.left+window.scrollX,width:e.width}},h=z(()=>{if(!u.value)return l.options;const a=u.value.toLowerCase();return l.options.filter(e=>e[l.labelKey].toLowerCase().includes(a))}),b=a=>!l.isMulti||!l.modelValue?!1:Array.isArray(l.modelValue)&&l.modelValue.includes(a[l.valueKey]),T=a=>{if(l.isMulti){let e=l.modelValue?[...l.modelValue]:[];const t=a[l.valueKey],d=e.indexOf(t);d>-1?e.splice(d,1):e.push(t),v("update:modelValue",e),v("change",e)}else v("update:modelValue",a[l.valueKey]),v("change",a[l.valueKey]),r.value=!1,u.value=""},F=a=>{if(!l.isMulti||!l.modelValue)return;const e=l.modelValue.filter(t=>t!==a);v("update:modelValue",e),v("change",e)},L=z(()=>l.isMulti?l.options.filter(e=>Array.isArray(l.modelValue)&&l.modelValue.includes(e[l.valueKey])).map(e=>e[l.labelKey]):l.placeholder),$=a=>{const e=m.value&&m.value.contains(a.target),t=K.value&&K.value.contains(a.target);!e&&!t&&(r.value=!1,u.value="")},N=a=>{a.key==="Escape"&&r.value&&(r.value=!1,u.value="")};Q(()=>{document.addEventListener("click",$),document.addEventListener("keydown",N),window.addEventListener("resize",f),window.addEventListener("scroll",f,!0)}),X(()=>{document.removeEventListener("click",$),document.removeEventListener("keydown",N),window.removeEventListener("resize",f),window.removeEventListener("scroll",f,!0)});const Y=()=>{l.disabled||(r.value=!r.value,r.value&&W(()=>{f(),w.value&&w.value.focus()}))};return G(()=>l.modelValue,a=>{(a==null||l.isMulti&&Array.isArray(a)&&a.length===0)&&(u.value="")},{deep:!0}),(a,e)=>(n(),s("div",{ref_key:"dropdownRef",ref:m,class:p(["relative",{"w-full":o.width==="full"}])},[i("button",{type:"button",onClick:Y,disabled:o.disabled,class:p(["border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-xl shadow-sm mt-1 block w-full text-left px-3 py-2 text-gray-700 bg-white relative flex items-center justify-between",{"opacity-50 cursor-not-allowed":o.disabled}])},[o.isMulti?(n(),s("div",le,[L.value.length===0?(n(),s("span",ae,y(o.placeholder),1)):g("",!0),(n(!0),s(B,null,H(L.value,t=>(n(),s("span",{key:t,class:"bg-indigo-100 text-indigo-800 px-2 py-1 rounded-full text-xs font-medium flex items-center gap-1"},[R(y(t)+" ",1),P(C(ee),{class:"w-3 h-3 cursor-pointer hover:text-indigo-600",onClick:V(d=>F(o.options.find(M=>M[o.labelKey]===t)[o.valueKey]),["stop"])},null,8,["onClick"])]))),128))])):(n(),s("span",{key:1,class:p({"text-gray-500":!o.modelValue})},y(L.value),3)),P(C(_),{class:"h-5 w-5 text-gray-500"})],10,te),k(i("div",oe,[i("div",ne,[k(i("input",{ref_key:"searchInputRef",ref:w,type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>u.value=t),onInput:e[1]||(e[1]=t=>r.value=!0),class:"block w-full rounded-xl border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-sm",placeholder:"Search...",onClick:e[2]||(e[2]=V(()=>{},["stop"]))},null,544),[[D,u.value]])]),i("div",{class:"py-1 overflow-y-auto",style:A({maxHeight:o.maxHeight})},[(n(!0),s(B,null,H(h.value,t=>(n(),s("div",{key:t[o.valueKey],onClick:d=>T(t),class:p(["block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 cursor-pointer flex items-center justify-between",{"bg-gray-100":b(t)}])},[R(y(t[o.labelKey])+" ",1),b(t)?(n(),E(C(U),{key:0,class:"w-4 h-4 text-indigo-600"})):g("",!0)],10,se))),128)),h.value.length===0?(n(),s("div",re," No options available ")):g("",!0)],4)],512),[[j,r.value&&!q]]),(n(),E(J,{to:"body"},[k(i("div",{ref_key:"portalPanelRef",ref:K,class:"z-50 rounded-xl shadow-lg bg-white ring-1 ring-black ring-opacity-5",style:A({position:"absolute",top:x.value.top+"px",left:x.value.left+"px",width:x.value.width+"px"}),onClick:e[6]||(e[6]=V(()=>{},["stop"]))},[i("div",ie,[k(i("input",{ref_key:"searchInputRef",ref:w,type:"text","onUpdate:modelValue":e[3]||(e[3]=t=>u.value=t),onInput:e[4]||(e[4]=t=>r.value=!0),class:"block w-full rounded-xl border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-sm",placeholder:"Search...",onClick:e[5]||(e[5]=V(()=>{},["stop"]))},null,544),[[D,u.value]])]),i("div",{class:"py-1 overflow-y-auto",style:A({maxHeight:O.value})},[(n(!0),s(B,null,H(h.value,t=>(n(),s("div",{key:t[o.valueKey],onClick:d=>T(t),class:p(["block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 cursor-pointer flex items-center justify-between",{"bg-gray-100":b(t)}])},[R(y(t[o.labelKey])+" ",1),b(t)?(n(),E(C(U),{key:0,class:"w-4 h-4 text-indigo-600"})):g("",!0)],10,ue))),128)),h.value.length===0?(n(),s("div",de," No options available ")):g("",!0)],4)],4),[[j,r.value&&q]])]))],2))}};export{ge as _};
