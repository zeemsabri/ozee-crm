import{r as V,s as C,e as N,g as b,o as l,w as c,b as s,v as S,d as r,u as a,x as f,z as B,i as x,a as i,F as _,l as w,t as g,y as U,A as $,m as y,B as A,j as M}from"./app-3py7x8f1.js";import{_ as P}from"./AuthenticatedLayout-D8vCwVin.js";import{_ as n}from"./InputError-Dm9zJ05G.js";import{_ as m}from"./InputLabel-Cnai-htk.js";import{P as q}from"./PrimaryButton-CRiK8rbu.js";import{_ as v}from"./TextInput-c4VObcBL.js";import"./Modal-9WYwIiGU.js";import"./SecondaryButton-CQZ-c5NM.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./SelectDropdown-86Cxrjx1.js";import"./Checkbox-jTHl9ced.js";import"./ApplicationLogo-Dkp_J6mJ.js";import"./DangerButton-BHAUTJIS.js";import"./moment-BLMuvzoS.js";const D={class:"py-12"},F={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},j={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},z={class:"p-6 bg-white border-b border-gray-200"},E={class:"mb-6"},T={class:"mb-6"},L={class:"mb-6"},O={class:"mb-6"},R={class:"flex space-x-2"},W=["value"],G={class:"mb-6"},H={class:"mt-2 max-h-60 overflow-y-auto p-2 border border-gray-300 rounded-md"},I={key:0,class:"text-gray-500 text-sm"},J={key:1,class:"space-y-2"},K={class:"flex items-center h-5"},Q=["id","value"],X={class:"ml-3 text-sm"},Y=["for"],Z={class:"text-xs text-gray-500"},ee={key:0,class:"text-gray-500"},se={class:"flex items-center justify-end mt-4"},ye={__name:"Create",props:{categories:Array,roles:Array},setup(u){const d=V(""),t=C({name:"",slug:"",description:"",category:"",roles:[]});N(()=>t.category,p=>{p!=="new"&&(d.value="")});const h=()=>{t.category==="new"&&d.value&&(t.category=d.value),t.post(route("admin.permissions.store"),{onSuccess:()=>{t.reset(),d.value=""}})};return(p,e)=>(l(),b(P,null,{header:c(()=>e[6]||(e[6]=[s("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Create New Permission ",-1)])),default:c(()=>[s("div",D,[s("div",F,[s("div",j,[s("div",z,[s("form",{onSubmit:S(h,["prevent"])},[s("div",E,[r(m,{for:"name",value:"Name"}),r(v,{id:"name",type:"text",class:"mt-1 block w-full",modelValue:a(t).name,"onUpdate:modelValue":e[0]||(e[0]=o=>a(t).name=o),required:"",autofocus:""},null,8,["modelValue"]),r(n,{class:"mt-2",message:a(t).errors.name},null,8,["message"])]),s("div",T,[r(m,{for:"slug",value:"Slug (optional)"}),r(v,{id:"slug",type:"text",class:"mt-1 block w-full",modelValue:a(t).slug,"onUpdate:modelValue":e[1]||(e[1]=o=>a(t).slug=o),placeholder:"Will be auto-generated if left empty"},null,8,["modelValue"]),r(n,{class:"mt-2",message:a(t).errors.slug},null,8,["message"])]),s("div",L,[r(m,{for:"description",value:"Description (optional)"}),f(s("textarea",{id:"description",class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm","onUpdate:modelValue":e[2]||(e[2]=o=>a(t).description=o),rows:"3"},null,512),[[B,a(t).description]]),r(n,{class:"mt-2",message:a(t).errors.description},null,8,["message"])]),s("div",O,[r(m,{for:"category",value:"Category"}),s("div",R,[f(s("select",{id:"category",class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm","onUpdate:modelValue":e[3]||(e[3]=o=>a(t).category=o),required:""},[e[7]||(e[7]=s("option",{value:"",disabled:""},"Select a category",-1)),(l(!0),i(_,null,w(u.categories,o=>(l(),i("option",{key:o,value:o},g(o),9,W))),128)),e[8]||(e[8]=s("option",{value:"new"},"+ Add New Category",-1))],512),[[U,a(t).category]]),a(t).category==="new"?(l(),b(v,{key:0,type:"text",class:"mt-1 block w-full",modelValue:d.value,"onUpdate:modelValue":e[4]||(e[4]=o=>d.value=o),placeholder:"Enter new category name",required:""},null,8,["modelValue"])):x("",!0)]),r(n,{class:"mt-2",message:a(t).errors.category},null,8,["message"])]),s("div",G,[r(m,{for:"roles",value:"Assign to Roles (Optional)"}),s("div",H,[!u.roles||u.roles.length===0?(l(),i("div",I," No roles available. ")):(l(),i("div",J,[(l(!0),i(_,null,w(u.roles,o=>(l(),i("div",{key:o.id,class:"flex items-start"},[s("div",K,[f(s("input",{id:`role-${o.id}`,type:"checkbox",value:o.id,"onUpdate:modelValue":e[5]||(e[5]=k=>a(t).roles=k),class:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"},null,8,Q),[[$,a(t).roles]])]),s("div",X,[s("label",{for:`role-${o.id}`,class:"font-medium text-gray-700"},[y(g(o.name)+" ",1),s("span",Z,"("+g(o.type)+")",1)],8,Y),o.description?(l(),i("p",ee,g(o.description),1)):x("",!0)])]))),128))]))]),e[9]||(e[9]=s("p",{class:"mt-1 text-sm text-gray-500"}," Select roles to automatically assign this permission to them. ",-1)),r(n,{class:"mt-2",message:a(t).errors.roles},null,8,["message"])]),s("div",se,[r(a(A),{href:p.route("admin.permissions.index"),class:"inline-flex items-center px-4 py-2 bg-gray-300 border border-transparent rounded-md font-semibold text-xs text-gray-800 uppercase tracking-widest hover:bg-gray-400 active:bg-gray-500 focus:outline-none focus:border-gray-500 focus:ring focus:ring-gray-300 disabled:opacity-25 transition mr-2"},{default:c(()=>e[10]||(e[10]=[y(" Cancel ",-1)])),_:1,__:[10]},8,["href"]),r(q,{class:M(["ml-4",{"opacity-25":a(t).processing}]),disabled:a(t).processing},{default:c(()=>e[11]||(e[11]=[y(" Create Permission ",-1)])),_:1,__:[11]},8,["class","disabled"])])],32)])])])])]),_:1}))}};export{ye as default};
