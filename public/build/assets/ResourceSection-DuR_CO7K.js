import{r as n,Q as R,c as b,f as L,e as S,a as r,o as l,b as s,R as k,x,A as H,C as M,F as w,l as f,t as d}from"./app-BHf0N9zz.js";import{_ as V}from"./_plugin-vue_export-helper-DlAUqK2U.js";const E={class:"p-6 bg-gray-100 min-h-screen font-inter text-gray-800"},z={class:"bg-white rounded-xl shadow-lg p-6"},N={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"},q={class:"relative md:col-span-2"},U=["value"],F=["value"],I={key:0,class:"text-center text-gray-600 py-12"},Z={key:1,class:"text-center text-red-600 py-12"},$={key:2,class:"text-center text-gray-500 py-12"},D={key:3,class:"text-center text-gray-500 py-12"},Q={key:4,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"},K=["onClick"],O={class:"p-5 flex-grow"},G={class:"flex items-center mb-3"},J=["innerHTML"],P={class:"text-lg font-semibold text-gray-900 line-clamp-2"},W={class:"text-sm text-gray-700 line-clamp-3 mb-3"},X={class:"flex flex-wrap gap-2 mt-auto"},Y={__name:"ResourceSection",props:{initialAuthToken:{type:String,required:!0},projectId:{type:[String,Number],required:!0},shareableResources:{type:Array,default:()=>[]}},emits:["add-activity"],setup(_,{emit:ee}){const a=_,u=n(!0),c=n([]),h=n(null),p=n(""),g=n("All"),v=n("All"),{showModal:m}=R("modalService"),A=b(()=>{const o=new Set;return a.shareableResources.forEach(e=>{e.tags.forEach(t=>o.add(t.name))}),["All",...Array.from(o).sort()]}),C=b(()=>{const o=new Set;return a.shareableResources.forEach(e=>{o.add(e.type)}),["All",...Array.from(o).sort()]}),y=b(()=>{let o=[...c.value];if(p.value){const e=p.value.toLowerCase();o=o.filter(t=>t.title.toLowerCase().includes(e)||t.description&&t.description.toLowerCase().includes(e)||t.tags&&t.tags.some(i=>i.name.toLowerCase().includes(e))||t.type.toLowerCase().includes(e))}return g.value!=="All"&&(o=o.filter(e=>e.tags&&e.tags.some(t=>t.name===g.value))),v.value!=="All"&&(o=o.filter(e=>e.type===v.value)),o}),j=async()=>{u.value=!0,h.value=null;try{const o=await fetch(`/api/client-api/project/${a.projectId}/shareable-resources?visible_to_client=true`,{headers:{Authorization:`Bearer ${a.initialAuthToken}`,"Content-Type":"application/json",Accept:"application/json"}}),e=await o.json();if(!o.ok){const t=e.errors?Object.values(e.errors).flat().join(`
`):e.message||"Failed to fetch resources.";throw new Error(t)}c.value=e}catch(o){console.error("Error fetching resources:",o),h.value=o.message||"An unexpected error occurred while fetching resources.",m("Error",h.value,"alert")}finally{u.value=!1}},T=o=>{o?window.open(o,"_blank"):m("No Link","This resource does not have an associated link.","alert")},B=o=>{switch(o){case"youtube":return'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-youtube text-red-500 w-6 h-6"><path d="M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0 2 2 0 0 1 1.4 1.4 24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.56 49.56 0 0 1-16.2 0 2 2 0 0 1-1.4-1.4Z"/><path d="m10 15 5-3-5-3z"/></svg>';case"website":return'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-globe text-blue-500 w-6 h-6"><circle cx="12" cy="12" r="10"/><path d="M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20"/><path d="M2 12h20"/></svg>';case"document":return'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-file text-green-500 w-6 h-6"><path d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"/><path d="M14 2v4a2 2 0 0 0 2 2h4"/></svg>';case"image":return'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-image text-purple-500 w-6 h-6"><rect width="18" height="18" x="3" y="3" rx="2" ry="2"/><circle cx="9" cy="9" r="2"/><path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"/></svg>';case"pdf":return'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-file-text text-red-500 w-6 h-6"><path d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"/><path d="M14 2v4a2 2 0 0 0 2 2h4"/><path d="M10 9H8"/><path d="M16 13H8"/><path d="M16 17H8"/></svg>';default:return'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-link text-gray-500 w-6 h-6"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07L9.4 6.6A2 2 0 0 1 8.07 8z"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.41-1.41A2 2 0 0 1 15.93 16z"/></svg>'}};return L(()=>{a.shareableResources&&a.shareableResources.length>0?(c.value=[...a.shareableResources],u.value=!1):j()}),S(()=>a.shareableResources,o=>{o&&o.length>0&&(c.value=[...o],u.value=!1)}),(o,e)=>(l(),r("div",E,[s("div",z,[e[13]||(e[13]=k('<h2 class="text-2xl font-bold text-gray-900 mb-6 flex items-center" data-v-be7b395d><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-book-open-text mr-2 w-6 h-6" data-v-be7b395d><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z" data-v-be7b395d></path><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h6z" data-v-be7b395d></path><path d="M10 12H6" data-v-be7b395d></path><path d="M14 12h4" data-v-be7b395d></path></svg> Knowledge Base &amp; Resources </h2>',1)),s("div",N,[s("div",q,[x(s("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>p.value=t),placeholder:"Search resources by title, description, or tag...",class:"w-full p-3 pl-10 border border-gray-300 rounded-xl shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 transition duration-200","aria-label":"Search Resources"},null,512),[[H,p.value]]),e[3]||(e[3]=s("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-search text-gray-400 w-5 h-5"},[s("circle",{cx:"11",cy:"11",r:"8"}),s("path",{d:"m21 21-4.3-4.3"})])],-1))]),s("div",null,[e[5]||(e[5]=s("label",{for:"tag-filter",class:"sr-only"},"Filter by Tag:",-1)),x(s("select",{id:"tag-filter","onUpdate:modelValue":e[1]||(e[1]=t=>g.value=t),class:"w-full p-3 border border-gray-300 rounded-xl shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 transition duration-200 bg-white"},[e[4]||(e[4]=s("option",{value:"All"},"All Tags",-1)),(l(!0),r(w,null,f(A.value,t=>(l(),r("option",{key:t,value:t},d(t),9,U))),128))],512),[[M,g.value]])]),s("div",null,[e[7]||(e[7]=s("label",{for:"type-filter",class:"sr-only"},"Filter by Type:",-1)),x(s("select",{id:"type-filter","onUpdate:modelValue":e[2]||(e[2]=t=>v.value=t),class:"w-full p-3 border border-gray-300 rounded-xl shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 transition duration-200 bg-white"},[e[6]||(e[6]=s("option",{value:"All"},"All Types",-1)),(l(!0),r(w,null,f(C.value,t=>(l(),r("option",{key:t,value:t},d(t.replace(/_/g," ").replace(/\b\w/g,i=>i.toUpperCase())),9,F))),128))],512),[[M,v.value]])])]),u.value?(l(),r("div",I,e[8]||(e[8]=[s("svg",{class:"animate-spin h-8 w-8 text-indigo-500 mx-auto mb-3",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),s("p",null,"Loading resources...",-1)]))):h.value?(l(),r("div",Z,[e[9]||(e[9]=s("p",{class:"font-semibold mb-2"},"Error loading resources:",-1)),s("p",null,d(h.value),1)])):y.value.length===0&&(p.value||g.value!=="All"||v.value!=="All")?(l(),r("div",$,e[10]||(e[10]=[s("p",{class:"text-lg mb-2"},"No resources match your current filters or search query.",-1),s("p",null,"Try adjusting your filters or clearing the search.",-1)]))):c.value.length===0?(l(),r("div",D,e[11]||(e[11]=[s("p",{class:"text-lg mb-2"},"No resources available for this project yet.",-1),s("p",null,"Check back later or contact your project manager.",-1)]))):(l(),r("div",Q,[(l(!0),r(w,null,f(y.value,t=>(l(),r("div",{key:t.id,class:"bg-gray-50 rounded-lg shadow-sm border border-gray-200 flex flex-col overflow-hidden cursor-pointer hover:shadow-md transition-shadow duration-200",onClick:i=>T(t.url)},[s("div",O,[s("div",G,[s("div",{innerHTML:B(t.type),class:"flex-shrink-0 mr-3"},null,8,J),s("h3",P,d(t.title),1)]),s("p",W,d(t.description||"No description provided."),1),s("div",X,[(l(!0),r(w,null,f(t.tags,i=>(l(),r("span",{key:i.id,class:"px-3 py-1 bg-indigo-100 text-indigo-700 text-xs font-medium rounded-full"},d(i.name),1))),128))])]),e[12]||(e[12]=k('<div class="p-4 border-t border-gray-200 bg-white flex justify-end" data-v-be7b395d><button class="bg-blue-600 text-white py-2 px-4 rounded-lg font-semibold text-sm hover:bg-blue-700 transition-colors duration-200 flex items-center" data-v-be7b395d><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-external-link mr-1" data-v-be7b395d><path d="M15 3h6v6" data-v-be7b395d></path><path d="M10 14 21 3" data-v-be7b395d></path><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6" data-v-be7b395d></path></svg> View Resource </button></div>',1))],8,K))),128))]))])]))}},oe=V(Y,[["__scopeId","data-v-be7b395d"]]);export{oe as default};
