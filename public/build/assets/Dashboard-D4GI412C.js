import{_ as V}from"./AuthenticatedLayout-CmeGlVeF.js";import{r as d,A as B,h as s,o as a,e as n,u as v,q as F,a as x,b as t,g as C,t as l,k as r,F as w,i as E,S as k,m as T}from"./app-uCPmy9lh.js";import{_ as M}from"./NotesModal-G9OzBYSn.js";import"./ApplicationLogo-C12D4JOa.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./SecondaryButton-BZ31n4gd.js";import"./TextInput-BFco6XAs.js";import"./InputError-B3ccaYAa.js";import"./PrimaryButton-XJOxuypH.js";const L={class:"py-12"},Y={class:"mx-auto max-w-7xl sm:px-6 lg:px-8 space-y-6"},q={class:"overflow-hidden bg-white shadow-sm sm:rounded-lg"},z={class:"p-6 text-gray-900"},I={class:"flex justify-between items-center"},U={class:"mt-1 text-sm text-gray-600"},G={class:"font-bold"},H={key:0,class:"mt-4"},J={key:0,class:"text-sm text-gray-500"},K={key:1,class:"text-sm text-red-500"},O={key:2,class:"text-sm text-gray-500"},Q={key:3,class:"mt-3"},R={class:"min-w-full divide-y divide-gray-200"},W={class:"bg-white divide-y divide-gray-200"},X={class:"px-3 py-2 whitespace-nowrap text-sm"},Z={class:"px-3 py-2 whitespace-nowrap text-sm capitalize"},tt={class:"px-3 py-2 whitespace-nowrap text-sm"},et={class:"flex space-x-2"},st=["onClick"],at={class:"overflow-hidden bg-white shadow-sm sm:rounded-lg"},ot={class:"p-6 text-gray-900"},lt={class:"flex justify-between items-center"},it={class:"mt-1 text-sm text-gray-600"},dt={class:"font-bold"},rt={key:0,class:"mt-4"},nt={key:0,class:"text-sm text-gray-500"},ct={key:1,class:"text-sm text-red-500"},pt={key:2,class:"text-sm text-gray-500"},ut={key:3,class:"mt-3"},xt={class:"min-w-full divide-y divide-gray-200"},mt={class:"bg-white divide-y divide-gray-200"},gt={class:"px-3 py-2 whitespace-nowrap text-sm"},ht={class:"px-3 py-2 whitespace-nowrap text-sm"},vt={class:"px-3 py-2 whitespace-nowrap text-sm"},yt={class:"px-3 py-2 whitespace-nowrap text-sm"},_t={class:"px-3 py-2 whitespace-nowrap text-sm"},ft={class:"flex space-x-2"},At={__name:"Dashboard",props:{projectCount:Number},setup(D){const m=d([]),y=d(!0),g=d(""),c=d(!1),p=d({total_due_tasks:0,projects:[]}),_=d(!1),h=d(""),u=d(!1),f=d(!1),b=d(null),j=async()=>{y.value=!0,g.value="";try{const i=await T.get("/api/projects-simplified");m.value=i.data}catch(i){g.value="Failed to load projects",console.error("Error fetching projects:",i)}finally{y.value=!1}},N=async()=>{_.value=!0,h.value="";try{const i=await T.get("/api/task-statistics");p.value=i.data}catch(i){h.value="Failed to load task statistics",console.error("Error fetching task statistics:",i)}finally{_.value=!1}},$=()=>{c.value=!c.value,c.value&&m.value.length===0&&j()},A=()=>{u.value=!u.value,u.value&&p.value.projects.length===0&&N()},P=i=>{b.value=i,f.value=!0},S=()=>{j()};return B(()=>{N()}),(i,e)=>(a(),s(w,null,[n(v(F),{title:"Dashboard"}),n(V,null,{header:x(()=>e[1]||(e[1]=[t("h2",{class:"text-xl font-semibold leading-tight text-gray-800"}," Dashboard ",-1)])),default:x(()=>[t("div",L,[t("div",Y,[t("div",q,[t("div",z,[t("div",I,[e[2]||(e[2]=t("h3",{class:"text-lg font-medium text-gray-900"},"Projects",-1)),t("button",{onClick:$,class:"text-sm text-blue-600 hover:text-blue-800"},l(c.value?"Collapse":"Expand"),1)]),t("p",U,[e[3]||(e[3]=r(" You have access to ")),t("span",G,l(D.projectCount),1),e[4]||(e[4]=r(" project(s). "))]),c.value?(a(),s("div",H,[y.value?(a(),s("div",J,"Loading projects...")):g.value?(a(),s("div",K,l(g.value),1)):m.value.length===0?(a(),s("div",O,"No projects found.")):(a(),s("div",Q,[t("table",R,[e[7]||(e[7]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Name"),t("th",{scope:"col",class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),t("th",{scope:"col",class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),t("tbody",W,[(a(!0),s(w,null,E(m.value,o=>(a(),s("tr",{key:o.id},[t("td",X,l(o.name),1),t("td",Z,l(o.status.replace("_"," ")),1),t("td",tt,[t("div",et,[n(v(k),{href:`/projects/${o.id}`,class:"text-xs bg-blue-500 hover:bg-blue-700 text-white py-1 px-2 rounded"},{default:x(()=>e[5]||(e[5]=[r(" View ")])),_:2,__:[5]},1032,["href"]),n(v(k),{href:`/emails/compose?project_id=${o.id}`,class:"text-xs bg-green-500 hover:bg-green-700 text-white py-1 px-2 rounded"},{default:x(()=>e[6]||(e[6]=[r(" Email ")])),_:2,__:[6]},1032,["href"]),t("button",{onClick:wt=>P(o.id),class:"text-xs bg-purple-500 hover:bg-purple-700 text-white py-1 px-2 rounded"}," Notes ",8,st)])])]))),128))])])]))])):C("",!0)])]),e[13]||(e[13]=t("div",{class:"overflow-hidden bg-white shadow-sm sm:rounded-lg"},[t("div",{class:"p-6 text-gray-900"},[t("h3",{class:"text-lg font-medium text-gray-900"},"Unread Email"),t("p",{class:"mt-1 text-sm text-gray-600"}," You have 0 unread emails. ")])],-1)),t("div",at,[t("div",ot,[t("div",lt,[e[8]||(e[8]=t("h3",{class:"text-lg font-medium text-gray-900"},"Due Tasks",-1)),t("button",{onClick:A,class:"text-sm text-blue-600 hover:text-blue-800"},l(u.value?"Collapse":"Expand"),1)]),t("p",it,[e[9]||(e[9]=r(" You have ")),t("span",dt,l(p.value.total_due_tasks),1),e[10]||(e[10]=r(" task(s) due. "))]),u.value?(a(),s("div",rt,[_.value?(a(),s("div",nt,"Loading tasks...")):h.value?(a(),s("div",ct,l(h.value),1)):p.value.projects.length===0?(a(),s("div",pt,"No due tasks found.")):(a(),s("div",ut,[t("table",xt,[e[12]||(e[12]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Project Name"),t("th",{scope:"col",class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Due Tasks"),t("th",{scope:"col",class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Due Today"),t("th",{scope:"col",class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Assigned Me"),t("th",{scope:"col",class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),t("tbody",mt,[(a(!0),s(w,null,E(p.value.projects,o=>(a(),s("tr",{key:o.id},[t("td",gt,l(o.name),1),t("td",ht,l(o.due_tasks),1),t("td",vt,l(o.due_today),1),t("td",yt,l(o.assigned_to_me),1),t("td",_t,[t("div",ft,[n(v(k),{href:`/projects/${o.id}`,class:"text-xs bg-blue-500 hover:bg-blue-700 text-white py-1 px-2 rounded"},{default:x(()=>e[11]||(e[11]=[r(" View ")])),_:2,__:[11]},1032,["href"])])])]))),128))])])]))])):C("",!0)])]),e[14]||(e[14]=t("div",{class:"overflow-hidden bg-white shadow-sm sm:rounded-lg"},[t("div",{class:"p-6 text-gray-900"},[t("h3",{class:"text-lg font-medium text-gray-900"},"Notice Board"),t("p",{class:"mt-1 text-sm text-gray-600"}," No new announcements at this time. ")])],-1))])]),n(M,{show:f.value,"project-id":b.value,onClose:e[0]||(e[0]=o=>f.value=!1),onNoteAdded:S},null,8,["show","project-id"])]),_:1})],64))}};export{At as default};
