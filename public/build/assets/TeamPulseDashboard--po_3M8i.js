import{r as g,c as w,f as he,e as z,a as l,o as n,d as U,u as be,h as we,w as G,b as e,X as _e,i as S,t as i,v as ke,G as je,j as L,m as b,F as _,l as M,k as E}from"./app-B08cQoG5.js";import{_ as Ae}from"./AuthenticatedLayout-CZbYOCJc.js";import{C as re}from"./CustomMultiSelect-BC4E9QML.js";import{_ as Se}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./PrimaryButton-BJX6el21.js";import"./Modal-BoluAObP.js";import"./InputLabel-WT-ex82W.js";import"./InputError-6ehJlBhd.js";import"./SecondaryButton-CVfagnOg.js";import"./index-DHA7isga.js";import"./BaseFormModal-DQPP7GLK.js";import"./TextInput-xQ5p0xDJ.js";import"./SelectDropdown-ByMYbAob.js";/* empty css                                                                       */import"./debounce-C-hnF4Z3.js";import"./ApplicationLogo-Cu7zPpFF.js";import"./MultiSelectDropdown-DBE9M4pG.js";import"./createLucideIcon-_HlkYaxu.js";import"./plus-CPjFUwyd.js";import"./DangerButton-DuqM8uZn.js";import"./moment-BLMuvzoS.js";import"./NoticeboardModal-XXHrnVXw.js";const Me={class:"py-10"},De={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},Te={key:0,class:"fixed top-4 right-4 z-50 transform transition-all duration-300"},Le={class:"bg-gray-900 text-white px-6 py-3 rounded-lg shadow-lg flex items-center gap-3"},Ce={class:"text-xs text-gray-300"},Ie={class:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4"},$e={class:"flex items-center bg-white p-1 rounded-lg shadow-sm border border-gray-200 overflow-visible max-w-full gap-2"},Be={class:"min-w-[220px]"},Pe={class:"min-w-[220px]"},Fe={class:"flex bg-gray-200 p-1 rounded-lg"},Ue={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},He={class:"lg:col-span-2"},Ve={key:0,class:"bg-white rounded-xl shadow-md overflow-hidden border border-gray-100"},Oe={class:"px-6 py-4 border-b border-gray-100 flex justify-between items-center bg-gray-50/50"},Ne={class:"text-lg font-semibold text-gray-800"},Re={class:"overflow-x-auto"},ze={class:"w-full text-left border-collapse"},Ge={class:"bg-gray-50 text-gray-600 text-xs uppercase tracking-wider border-b border-gray-100"},Ee={class:"block text-[10px] text-gray-400 font-normal"},Ke={class:"divide-y divide-gray-100 text-sm"},We={class:"px-6 py-4 font-medium text-gray-900 flex items-center gap-3 sticky left-0 bg-white group-hover:bg-gray-50 transition-colors z-10 border-r border-gray-100"},Ye={class:"relative"},qe=["src"],Xe={key:0,class:"absolute -top-1 -right-1 flex h-3 w-3"},Je={class:"flex justify-center"},Qe=["innerHTML"],Ze={key:1,class:"space-y-6"},et={class:"flex flex-col sm:flex-row sm:justify-between sm:items-center mb-2 px-1 gap-4"},tt={class:"flex items-center gap-2 text-sm text-gray-600 bg-white p-1.5 rounded-lg border border-gray-200 shadow-sm"},st={key:0,class:"bg-white rounded-xl shadow-sm p-12 text-center border border-gray-100"},at={key:1,class:"space-y-6"},rt={class:"bg-gray-50 px-5 py-3 border-b border-gray-200 flex justify-between items-center"},ot={class:"font-bold text-gray-800 text-lg flex items-center gap-2"},lt={class:"text-xs font-normal text-gray-500 bg-white border border-gray-200 px-2 py-0.5 rounded-full"},nt={class:"text-xs text-gray-500"},it={class:"divide-y divide-gray-100"},dt={class:"flex items-start gap-4"},ut=["src"],ct={class:"flex-grow"},mt={class:"flex justify-between items-center mb-2"},gt={class:"flex items-center gap-2"},pt={class:"font-bold text-gray-900 text-sm"},ft={class:"text-xs text-gray-500"},yt={key:0,class:"text-yellow-600 bg-yellow-50 px-1.5 rounded font-bold text-[10px]"},vt=["innerHTML"],xt={key:0,class:"mt-3"},ht={href:"#",class:"inline-flex items-center gap-1.5 px-2 py-1 rounded bg-gray-50 border border-gray-200 text-[11px] font-medium text-gray-600 hover:border-indigo-300 hover:text-indigo-600 transition-colors"},bt={key:2,class:"space-y-4"},wt={class:"flex justify-between items-start mb-3"},_t={class:"flex items-center gap-3"},kt=["src"],jt={class:"font-bold text-gray-900"},At={class:"text-xs text-gray-500 flex items-center gap-2 mt-0.5"},St={class:"bg-gray-100 px-1.5 py-0.5 rounded text-gray-600 font-medium"},Mt={key:0,class:"text-yellow-600 bg-yellow-50 px-1.5 rounded font-bold text-[10px]"},Dt=["innerHTML"],Tt={key:0,class:"mt-4 pl-10 ml-3"},Lt={href:"#",class:"inline-flex items-center gap-1.5 px-2.5 py-1.5 rounded-md bg-gray-50 border border-gray-200 text-xs text-gray-600 hover:border-indigo-300 hover:text-indigo-600 transition-colors"},Ct={class:"space-y-6"},It={class:"bg-white rounded-xl shadow-md p-6 border border-gray-100"},$t={class:"space-y-4"},Bt={class:"flex items-center gap-3"},Pt=["src"],Ft={class:"text-sm"},Ut={class:"font-semibold text-gray-900"},Ht={class:"text-xs text-gray-500"},Vt=["onClick"],Ot={key:0,class:"bg-red-50 rounded-xl shadow-sm p-5 border border-red-100"},Nt={class:"flex items-start gap-3"},Rt={class:"w-full"},zt={class:"space-y-2"},Gt={class:"text-sm font-semibold text-gray-800"},Et={class:"text-[10px] text-gray-500"},Kt={class:"bg-white rounded-xl shadow-md p-6 border border-gray-100"},Wt={class:"space-y-5"},Yt={class:"flex justify-between text-xs mb-1.5"},qt={class:"font-bold text-gray-900"},Xt={class:"w-full bg-gray-100 rounded-full h-2"},Jt={class:"flex justify-between text-xs mb-1.5"},Qt={class:"font-bold text-gray-900"},Zt={class:"w-full bg-gray-100 rounded-full h-2"},es={class:"flex justify-between text-xs mb-1.5"},ts={class:"font-bold text-gray-900"},ss={class:"w-full bg-gray-100 rounded-full h-2"},as={__name:"TeamPulseDashboard",setup(rs){const C=g("matrix"),I=g("user"),p=g({range:"7"}),x=g([]),f=g([]),H=g({show:!1,message:""}),h=g([]),k=g([]),N=g([]),y=g(null),D=g(null),j=g({filters:!1,feed:!1,matrix:!1,stats:!1}),m=g({filters:"",feed:"",matrix:"",stats:""}),$=g([]),oe=w(()=>(k.value||[]).map(t=>({id:t.id??t.project_id,name:t.name??t.project_name??"Project"}))),le=w(()=>(h.value||[]).map(t=>({id:t.id??t.user_id,name:t.name??t.user_name??"User"}))),R=()=>{const t={};return p.value.range&&(t.range=p.value.range),x.value.length===1?t.project_id=x.value[0]:x.value.length>1&&(t.project_ids=x.value.join(",")),f.value.length===1?t.user_id=f.value[0]:f.value.length>1&&(t.user_ids=f.value.join(",")),t},ne=async()=>{try{const{data:t}=await window.axios.get("/api/projects-simplified");k.value=Array.isArray(t)?t:[]}catch{m.value.filters=m.value.filters||"Failed to load projects"}},K=async()=>{try{const{data:t}=await window.axios.get("/api/users"),s=Array.isArray(t)?t:[];$.value=s,h.value=s}catch{m.value.filters=m.value.filters||"Failed to load users"}},ie=async(t=[])=>{if(!t.length){await K();return}try{const s=new Map;await Promise.all(t.map(async r=>{const{data:o}=await window.axios.get(`/api/projects/${r}/users`);(Array.isArray(o)?o:[]).forEach(u=>{const v=u.id??u.user_id;s.has(v)||s.set(v,u)})}));const a=Array.from(s.values());h.value=a,$.value.length||($.value=a)}catch{m.value.filters=m.value.filters||"Failed to load project users",$.value.length&&(h.value=$.value)}},de=async()=>{j.value.filters=!0,m.value.filters="";try{const{data:t}=await window.axios.get("/api/standups/analytics/filters");h.value=Array.isArray(t==null?void 0:t.users)?t.users:[],k.value=Array.isArray(t==null?void 0:t.projects)?t.projects:[],t!=null&&t.defaultRange&&(p.value.range=String(t.defaultRange)),k.value.length||await ne(),await K()}catch{m.value.filters="Failed to load filters"}finally{j.value.filters=!1}},W=async()=>{j.value.feed=!0,m.value.feed="";try{const{data:t}=await window.axios.get("/api/standups/analytics/feed",{params:R()}),s=Array.isArray(t)?t:Array.isArray(t==null?void 0:t.data)?t.data:[];N.value=s.map((a,r)=>{var o,u;return{id:a.id??`feed-${r}`,userId:a.user_id??a.userId??((o=a.user)==null?void 0:o.id)??null,projectId:a.project_id??a.projectId??((u=a.project)==null?void 0:u.id)??null,createdAt:a.created_at??a.createdAt??new Date().toISOString(),content:a.content??"",hasBlocker:!!(a.has_blocker??a.hasBlocker??a.blocker),taskId:a.task_id??a.taskId??null}})}catch{m.value.feed="Failed to load feed"}finally{j.value.feed=!1}},Y=async()=>{j.value.matrix=!0,m.value.matrix="";try{const{data:t}=await window.axios.get("/api/standups/analytics/matrix",{params:R()});y.value=t||null,Array.isArray(t==null?void 0:t.users)&&!h.value.length&&(h.value=t.users),Array.isArray(t==null?void 0:t.projects)&&!k.value.length&&(k.value=t.projects)}catch{m.value.matrix="Failed to load matrix"}finally{j.value.matrix=!1}},q=async()=>{j.value.stats=!0,m.value.stats="";try{const{data:t}=await window.axios.get("/api/standups/analytics/stats",{params:R()});D.value=t||null}catch{m.value.stats="Failed to load stats"}finally{j.value.stats=!1}},ue=async()=>{await Promise.all([de(),W(),Y(),q()])};he(()=>{ue()});const X=()=>{W(),Y(),q()};z(p,X,{deep:!0}),z([x,f],X,{deep:!0}),z(x,async t=>{await ie(t)},{deep:!0});const J=t=>{const s=new Date(t),a=Math.floor((new Date-s)/(1e3*60*60));return a<24?s.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}):a<48?"Yesterday":s.toLocaleDateString("en-US",{month:"short",day:"numeric"})},V=t=>new Date(t).getHours()>=10,Q=t=>{const s=new Date(t),r=new Date-s,o=Math.floor(r/(1e3*60*60*24));return o===0?"today":o===1?"yesterday":o<7?`${o} days ago`:o<30?`${Math.floor(o/7)} weeks ago`:`${Math.floor(o/30)} months ago`},A=w(()=>N.value.filter(t=>!(x.value.length&&!x.value.includes(t.projectId)||f.value.length&&!f.value.includes(t.userId)||Math.floor((new Date-new Date(t.createdAt))/(1e3*60*60*24))>parseInt(p.value.range)))),ce=w(()=>{const t={};return A.value.forEach(s=>{t[s.projectId]||(t[s.projectId]={projectId:s.projectId,projectName:te(s.projectId).name,items:[]}),t[s.projectId].items.push(s)}),Object.values(t).sort((s,a)=>{var u,v;const r=((u=s.items[0])==null?void 0:u.createdAt)||0,o=((v=a.items[0])==null?void 0:v.createdAt)||0;return new Date(o)-new Date(r)})}),Z=w(()=>{var a;if(Array.isArray((a=y.value)==null?void 0:a.headers)&&y.value.headers.length)return y.value.headers.map(r=>({name:r.name??r.label??r.date??"",date:r.display??r.pretty??r.date??"",full:r.full??r.value??r.date??"",isWeekend:!!(r.isWeekend??r.is_weekend)}));const t=parseInt(p.value.range||"7"),s=[];for(let r=0;r<t;r++){const o=new Date;o.setDate(o.getDate()-r),s.push({name:o.toLocaleDateString("en-US",{weekday:"short"}),date:o.toLocaleDateString("en-US",{month:"short",day:"numeric"}),full:o.toISOString().split("T")[0],isWeekend:o.getDay()===0||o.getDay()===6})}return s.reverse()}),me=w(()=>{var s;const t=Array.isArray((s=y.value)==null?void 0:s.rows)&&y.value.rows.length?y.value.rows:h.value;return f.value.length?t.filter(a=>f.value.includes(a.id??a.user_id)):t}),ee=w(()=>(k.value||[]).filter(t=>t.is_ghost||t.ghost||t.id===103).map(t=>({...t,lastActivity:t.last_standup?Q(t.last_standup):Q(t.lastStandup||new Date().toISOString())}))),ge=w(()=>[...h.value||[]].map(t=>({...t,streak:t.streak??t.streak_days??0})).sort((t,s)=>(s.streak??0)-(t.streak??0)).slice(0,5)),T=w(()=>{if(D.value)return{completion:Math.round(D.value.completion??0),onTime:Math.round(D.value.on_time??D.value.onTime??0),blockerRatio:Math.round(D.value.blocker_ratio??D.value.blockerRatio??0)};const t=A.value.length;if(t===0)return{completion:0,onTime:0,blockerRatio:0};const s=A.value.filter(r=>V(r.createdAt)).length,a=A.value.filter(r=>r.hasBlocker).length;return{completion:85,onTime:Math.round((t-s)/t*100),blockerRatio:Math.round(a/t*100)}}),B=t=>String(t??"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),pe=t=>{var a,r,o,u;if(!t||typeof t!="string")return{date:"",yesterday:"",today:"",blockers:""};if(!/<\/p>|<br\s*\/?>/i.test(t)){const v=t.match(/\*\*Daily Standup - ([^*]+)\*\*/)||t.match(/\*\*Daily Standup\s*-\s*([^\n*]+)\s*\*\*/)||t.match(/\*\*Daily Standup\*\*\s*-?\s*([^\n*]+)/),c=t.match(/\*\*Yesterday:\*\*\s*([^*]+?)(?=\s*\*\*Today:|\s*\*\*Blockers:|$)/i),d=t.match(/\*\*Today:\*\*\s*([^*]+?)(?=\s*\*\*Blockers:|$)/i),F=t.match(/\*\*Blockers:\*\*\s*([^*]+)$/i);return{date:v&&((a=v[1])==null?void 0:a.trim())||"",yesterday:c&&((r=c[1])==null?void 0:r.trim())||"",today:d&&((o=d[1])==null?void 0:o.trim())||"",blockers:F&&((u=F[1])==null?void 0:u.trim())||""}}return{date:"",yesterday:"",today:"",blockers:""}},P=t=>{var r;const a=(Array.isArray((r=y.value)==null?void 0:r.rows)&&y.value.rows.length?y.value.rows:h.value).find(o=>(o.id??o.user_id)===t);return a?{id:a.id??a.user_id,name:a.name??a.user_name??"Unknown",avatar:a.avatar??a.photo??"",streak:a.streak??a.streak_days??0}:{name:"Unknown",avatar:""}},te=t=>k.value.find(a=>(a.id??a.project_id)===t)||{name:"General"},se=t=>{if(!t)return"";if(/<[a-z][\s\S]*>/i.test(t))return t;const s=pe(t);if(!s.yesterday&&!s.today&&!s.blockers){const r=t.replace(/\*\*(.*?)\*\*/g,"$1");return`<p>${B(r)}</p>`}const a=[];return s.date&&a.push(`<p class="text-xs text-gray-500 font-medium mb-1">${B(s.date)}</p>`),a.push(`<p class="mb-1"><strong>Yesterday:</strong> ${B(s.yesterday||"Nothing")}</p>`,`<p class="mb-1"><strong>Today:</strong> ${B(s.today||"Nothing")}</p>`,`<p class="mb-1"><strong>Blockers:</strong> ${B(s.blockers||"None")}</p>`),a.join("")},fe=(t,s)=>{var v;const a=new Date(s),r=a.getDay()===0||a.getDay()===6,o=(((v=y.value)==null?void 0:v.rows)||[]).find(c=>(c.id??c.user_id)===t);if(o&&Array.isArray(o.statuses)){const c=o.statuses.find(d=>(d.date??d.full??d.day)===s);if(c){const d=String(c.status??c.value??"").toLowerCase(),F=c.submitted_at??c.time??null,O=F?new Date(F).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}):"";if(d==="on_time"||d==="ontime"||d==="present")return`<div class="mx-auto w-6 h-6 rounded-full bg-green-100 text-green-600 flex items-center justify-center cursor-help text-xs" title="${O?`Submitted at ${O}`:"On time"}">‚úì</div>`;if(d==="late")return`<div class="mx-auto w-6 h-6 rounded-full bg-yellow-100 text-yellow-600 flex items-center justify-center cursor-help text-xs" title="${O?`Late: ${O}`:"Late"}">‚ö†Ô∏è</div>`;if(d==="off"||d==="leave")return'<div class="mx-auto w-6 h-6 rounded-full bg-gray-100 text-gray-400 flex items-center justify-center text-[10px]" title="On Leave">OFF</div>';if(d==="missed"||d==="absent")return'<div class="mx-auto w-6 h-6 rounded-full bg-red-100 text-red-600 flex items-center justify-center cursor-help text-xs" title="Missed Standup">‚úï</div>'}}const u=N.value.find(c=>{const d=new Date(c.createdAt).toISOString().split("T")[0];return c.userId===t&&d===s});if(u){const d=new Date(u.createdAt).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"});return V(u.createdAt)?`<div class="mx-auto w-6 h-6 rounded-full bg-yellow-100 text-yellow-600 flex items-center justify-center cursor-help text-xs" title="Late: Submitted at ${d}">‚ö†Ô∏è</div>`:`<div class="mx-auto w-6 h-6 rounded-full bg-green-100 text-green-600 flex items-center justify-center cursor-help text-xs" title="Submitted at ${d}">‚úì</div>`}return r?'<span class="text-gray-300 text-xs">-</span>':'<div class="mx-auto w-6 h-6 rounded-full bg-red-100 text-red-600 flex items-center justify-center cursor-help text-xs" title="Missed Standup">‚úï</div>'},ae=t=>{H.value={show:!0,message:t},setTimeout(()=>H.value.show=!1,3e3)},ye=t=>{ae(`Kudo sent to ${t.name} for their ${t.streak} day streak!`)},ve=()=>{const t=A.value.map(s=>{const a=new Date(s.createdAt).toLocaleDateString("en-US"),r=s.content.replace(/<[^>]*>?/gm,"");return`${P(s.userId).name} (${a}): 
${r}`}).join(`
---
`);navigator.clipboard.writeText(t).then(()=>{ae(`Copied ${A.value.length} standups to clipboard`)})},xe=()=>{p.value={range:"7",project:"all",member:"all"}};return(t,s)=>(n(),l(_,null,[U(be(we),{title:"Team Pulse Dashboard"}),U(Ae,null,{header:G(()=>s[7]||(s[7]=[e("div",{class:"flex items-center justify-between"},[e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Team Pulse"),e("div",{class:"flex items-center gap-4"},[e("div",{class:"text-sm text-gray-500 flex items-center gap-2"},[e("span",{class:"w-2 h-2 rounded-full bg-green-500"}),b(" Live Data ")])])],-1)])),default:G(()=>[e("div",Me,[e("div",De,[U(_e,{name:"fade"},{default:G(()=>[H.value.show?(n(),l("div",Te,[e("div",Le,[s[9]||(s[9]=e("span",{class:"text-green-400 text-xl"},"‚úì",-1)),e("div",null,[s[8]||(s[8]=e("h4",{class:"font-bold text-sm"},"Success",-1)),e("p",Ce,i(H.value.message),1)])])])):S("",!0)]),_:1}),e("div",Ie,[e("div",$e,[ke(e("select",{"onUpdate:modelValue":s[0]||(s[0]=a=>p.value.range=a),class:"text-sm border-none focus:ring-0 text-gray-600 font-medium bg-transparent py-2 pl-3 pr-8 cursor-pointer hover:text-indigo-600"},s[10]||(s[10]=[e("option",{value:"7"},"Last 7 Days",-1),e("option",{value:"14"},"Last 14 Days",-1),e("option",{value:"30"},"Last 30 Days",-1)]),512),[[je,p.value.range]]),s[11]||(s[11]=e("div",{class:"w-px h-6 bg-gray-200 mx-2"},null,-1)),e("div",Be,[U(re,{modelValue:x.value,"onUpdate:modelValue":s[1]||(s[1]=a=>x.value=a),options:oe.value,placeholder:"All Projects (searchable)","label-key":"name","track-by":"id"},null,8,["modelValue","options"])]),s[12]||(s[12]=e("div",{class:"w-px h-6 bg-gray-200 mx-2"},null,-1)),e("div",Pe,[U(re,{modelValue:f.value,"onUpdate:modelValue":s[2]||(s[2]=a=>f.value=a),options:le.value,placeholder:"All Members (searchable)","label-key":"name","track-by":"id"},null,8,["modelValue","options"])])]),e("div",Fe,[e("button",{onClick:s[3]||(s[3]=a=>C.value="matrix"),class:L([C.value==="matrix"?"bg-white text-gray-800 shadow":"text-gray-600 hover:text-gray-800","px-4 py-2 text-sm font-semibold rounded-md transition-all duration-200"])}," Compliance Matrix ",2),e("button",{onClick:s[4]||(s[4]=a=>C.value="feed"),class:L([C.value==="feed"?"bg-white text-gray-800 shadow":"text-gray-600 hover:text-gray-800","px-4 py-2 text-sm font-medium rounded-md transition-all duration-200"])}," Daily Feed ",2)])]),e("div",Ue,[e("div",He,[C.value==="matrix"?(n(),l("div",Ve,[e("div",Oe,[e("h3",Ne,"Attendance: Last "+i(p.value.range)+" Days",1),s[13]||(s[13]=e("div",{class:"flex gap-4 text-xs text-gray-500 font-medium"},[e("span",{class:"flex items-center gap-1"},[e("span",{class:"w-2 h-2 rounded-full bg-green-500"}),b(" On Time")]),e("span",{class:"flex items-center gap-1"},[e("span",{class:"w-2 h-2 rounded-full bg-yellow-500"}),b(" Late (>10am)")]),e("span",{class:"flex items-center gap-1"},[e("span",{class:"w-2 h-2 rounded-full bg-red-500"}),b(" Missed")])],-1))]),e("div",Re,[e("table",ze,[e("thead",null,[e("tr",Ge,[s[14]||(s[14]=e("th",{class:"px-6 py-4 font-semibold sticky left-0 bg-gray-50 z-10 shadow-sm"},"Team Member",-1)),(n(!0),l(_,null,M(Z.value,a=>(n(),l("th",{key:a.full,class:"px-4 py-3 text-center min-w-[80px]"},[b(i(a.name)+" ",1),e("span",Ee,i(a.date),1)]))),128))])]),e("tbody",Ke,[(n(!0),l(_,null,M(me.value,a=>(n(),l("tr",{key:a.id,class:"hover:bg-gray-50 transition-colors group"},[e("td",We,[e("div",Ye,[e("img",{src:a.avatar,class:"w-8 h-8 rounded-full border border-gray-100"},null,8,qe),a.streak>5?(n(),l("div",Xe,s[15]||(s[15]=[e("span",{class:"animate-ping absolute inline-flex h-full w-full rounded-full bg-orange-400 opacity-75"},null,-1),e("span",{class:"relative inline-flex rounded-full h-3 w-3 bg-orange-500"},null,-1)]))):S("",!0)]),b(" "+i(a.name),1)]),(n(!0),l(_,null,M(Z.value,r=>(n(),l("td",{key:r.full,class:"px-4 py-3 text-center"},[e("div",Je,[e("span",{innerHTML:fe(a.id,r.full)},null,8,Qe)])]))),128))]))),128))])])])])):(n(),l("div",Ze,[e("div",et,[e("div",tt,[s[16]||(s[16]=e("span",{class:"font-medium px-2"},"Group by:",-1)),e("button",{onClick:s[5]||(s[5]=a=>I.value="user"),class:L([I.value==="user"?"bg-indigo-50 text-indigo-700 font-semibold":"text-gray-500 hover:text-gray-800","px-3 py-1 rounded-md transition-colors"])}," Individual ",2),s[17]||(s[17]=e("span",{class:"text-gray-200"},"|",-1)),e("button",{onClick:s[6]||(s[6]=a=>I.value="project"),class:L([I.value==="project"?"bg-indigo-50 text-indigo-700 font-semibold":"text-gray-500 hover:text-gray-800","px-3 py-1 rounded-md transition-colors"])}," Project ",2)]),e("button",{onClick:ve,class:"text-xs font-medium text-indigo-600 hover:text-indigo-800 bg-indigo-50 hover:bg-indigo-100 px-3 py-1.5 rounded-md transition-colors flex items-center gap-1"},s[18]||(s[18]=[e("svg",{class:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})],-1),b(" Copy visible ",-1)]))]),A.value.length===0?(n(),l("div",st,[s[19]||(s[19]=e("div",{class:"bg-gray-100 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4"},[e("svg",{class:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})])],-1)),s[20]||(s[20]=e("h3",{class:"text-lg font-medium text-gray-900"},"No standups found",-1)),s[21]||(s[21]=e("p",{class:"text-gray-500 mt-1"},"Try adjusting your filters to see more data.",-1)),e("button",{onClick:xe,class:"mt-4 text-indigo-600 font-medium hover:underline"},"Clear Filters")])):S("",!0),I.value==="project"?(n(),l("div",at,[(n(!0),l(_,null,M(ce.value,a=>(n(),l("div",{key:a.projectId,class:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden"},[e("div",rt,[e("h3",ot,[b(i(a.projectName)+" ",1),e("span",lt,i(a.items.length)+" Updates ",1)]),e("div",nt,i(p.value.range)+" Day Summary ",1)]),e("div",it,[(n(!0),l(_,null,M(a.items,r=>(n(),l("div",{key:r.id,class:"p-5 hover:bg-gray-50/50 transition-colors"},[e("div",dt,[e("img",{src:P(r.userId).avatar,class:"w-10 h-10 rounded-full border border-gray-200 flex-shrink-0 mt-1"},null,8,ut),e("div",ct,[e("div",mt,[e("div",gt,[e("h4",pt,i(P(r.userId).name),1),s[22]||(s[22]=e("span",{class:"text-gray-300"},"‚Ä¢",-1)),e("span",ft,i(J(r.createdAt)),1),V(r.createdAt)?(n(),l("span",yt,"LATE")):S("",!0)]),s[23]||(s[23]=e("button",{class:"text-gray-400 hover:text-indigo-600",title:"View in Google Chat"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})])],-1))]),e("div",{class:"prose prose-sm max-w-none text-gray-700",innerHTML:se(r.content)},null,8,vt),r.taskId?(n(),l("div",xt,[e("a",ht,[s[24]||(s[24]=e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})],-1)),b(" Task #"+i(r.taskId),1)])])):S("",!0)])])]))),128))])]))),128))])):(n(),l("div",bt,[(n(!0),l(_,null,M(A.value,a=>(n(),l("div",{key:a.id,class:L(["bg-white rounded-xl shadow-sm border border-gray-100 p-5 transition hover:shadow-md group relative overflow-hidden",a.hasBlocker?"border-l-4 border-l-red-500":"border-l-4 border-l-green-500"])},[e("div",wt,[e("div",_t,[e("img",{src:P(a.userId).avatar,class:"w-10 h-10 rounded-full border border-gray-100"},null,8,kt),e("div",null,[e("h4",jt,i(P(a.userId).name),1),e("div",At,[e("span",St,i(te(a.projectId).name),1),s[25]||(s[25]=e("span",{class:"text-gray-300"},"‚Ä¢",-1)),e("span",null,i(J(a.createdAt)),1),V(a.createdAt)?(n(),l("span",Mt,"LATE")):S("",!0)])])]),s[26]||(s[26]=e("div",{class:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity"},[e("button",{class:"text-gray-400 hover:text-indigo-600 p-1 hover:bg-gray-50 rounded",title:"View in Google Chat"},[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})])])],-1))]),e("div",{class:"prose prose-sm max-w-none text-gray-700 ml-13 pl-10 border-l border-gray-100",innerHTML:se(a.content)},null,8,Dt),a.taskId?(n(),l("div",Tt,[e("a",Lt,[s[27]||(s[27]=e("svg",{class:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})],-1)),b(" Linked to Task #"+i(a.taskId),1)])])):S("",!0)],2))),128))]))]))]),e("div",Ct,[e("div",It,[s[28]||(s[28]=e("div",{class:"flex justify-between items-center mb-4"},[e("h3",{class:"text-lg font-bold text-gray-800"},"üî• Top Streaks")],-1)),e("ul",$t,[(n(!0),l(_,null,M(ge.value,(a,r)=>(n(),l("li",{key:a.id,class:"flex items-center justify-between group"},[e("div",Bt,[e("div",{class:L(["w-6 text-center font-bold",r===0?"text-yellow-500 text-lg":r===1?"text-gray-400 text-lg":"text-gray-300 text-sm"])},i(r+1),3),e("img",{src:a.avatar,class:"w-8 h-8 rounded-full border border-gray-100"},null,8,Pt),e("div",Ft,[e("p",Ut,i(a.name),1),e("p",Ht,i(a.streak)+" Day Streak",1)])]),e("button",{onClick:o=>ye(a),class:"opacity-0 group-hover:opacity-100 text-xs font-medium text-indigo-600 hover:bg-indigo-50 px-2 py-1 rounded transition-all"}," Send Kudo ",8,Vt)]))),128))])]),ee.value.length>0?(n(),l("div",Ot,[e("div",Nt,[s[32]||(s[32]=e("div",{class:"bg-red-100 p-2 rounded-full text-red-600 flex-shrink-0"},[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1)),e("div",Rt,[s[30]||(s[30]=e("h4",{class:"font-bold text-red-900 text-sm"},"Ghost Project Alert",-1)),s[31]||(s[31]=e("p",{class:"text-xs text-red-700 mt-1 mb-3"},"Projects with active tasks but 0 standups in 48h.",-1)),e("div",zt,[(n(!0),l(_,null,M(ee.value,a=>(n(),l("div",{key:a.id,class:"bg-white rounded px-3 py-2 border border-red-200 shadow-sm flex justify-between items-center"},[e("div",null,[e("p",Gt,i(a.name),1),e("p",Et,"Last standup: "+i(a.lastActivity),1)]),s[29]||(s[29]=e("button",{class:"text-xs text-red-600 hover:underline"},"Nudge Team",-1))]))),128))])])])])):S("",!0),e("div",Kt,[s[36]||(s[36]=e("h3",{class:"text-lg font-bold text-gray-800 mb-4"},"Engagement Pulse",-1)),e("div",Wt,[e("div",null,[e("div",Yt,[s[33]||(s[33]=e("span",{class:"text-gray-600 font-medium"},"Standup Completion",-1)),e("span",qt,i(T.value.completion)+"%",1)]),e("div",Xt,[e("div",{class:"bg-indigo-600 h-2 rounded-full transition-all duration-1000",style:E({width:T.value.completion+"%"})},null,4)])]),e("div",null,[e("div",Jt,[s[34]||(s[34]=e("span",{class:"text-gray-600 font-medium"},"On-Time Rate",-1)),e("span",Qt,i(T.value.onTime)+"%",1)]),e("div",Zt,[e("div",{class:"bg-yellow-500 h-2 rounded-full transition-all duration-1000",style:E({width:T.value.onTime+"%"})},null,4)])]),e("div",null,[e("div",es,[s[35]||(s[35]=e("span",{class:"text-gray-600 font-medium"},"Blocker Ratio",-1)),e("span",ts,i(T.value.blockerRatio)+"%",1)]),e("div",ss,[e("div",{class:"bg-red-400 h-2 rounded-full transition-all duration-1000",style:E({width:T.value.blockerRatio+"%"})},null,4)])])])])])])])])]),_:1})],64))}},Ms=Se(as,[["__scopeId","data-v-c559b911"]]);export{Ms as default};
