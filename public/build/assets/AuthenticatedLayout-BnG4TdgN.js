import{A as be}from"./ApplicationLogo-BsdLnI8L.js";import{B as le,J as ie,s as N,r as T,i as f,o,b as e,f as q,e as d,A as te,K as J,a as w,n as D,T as we,c as I,L as ge,h as M,l as Q,w as G,d as re,g as S,t as B,F as H,j as O,q as ke,m as j,k as Z,x as Y,M as ue,G as xe,I as ae,_ as ne,D as _e,z as me,N as de,O as $e,P as Se,p as Ce}from"./app-lYCqlXvP.js";import{P as oe}from"./PrimaryButton-CH2koyUX.js";import{a as ye,_ as he}from"./SecondaryButton-Dt5K6mtl.js";import{_ as U,b as R,a as ee}from"./InputError-9UqQKVdM.js";import{_ as Ae}from"./Checkbox-C7HN0o0h.js";let ce=null;const je=r=>{ce=r},ve=(r,x="info",c=5e3)=>ce?ce.addNotification(r,x,c):(console.warn("Notification container not set. Call setNotificationContainer first."),null),Te=(r,x=5e3)=>ve(r,"success",x),Ve=(r,x=5e3)=>ve(r,"error",x),ma=(r,x=5e3)=>ve(r,"warning",x),Ee={class:"relative"},pe={__name:"Dropdown",props:{align:{type:String,default:"right"},width:{type:String,default:"48"},contentClasses:{type:String,default:"py-1 bg-white"}},setup(r){const x=r,c=u=>{m.value&&u.key==="Escape"&&(m.value=!1)};le(()=>document.addEventListener("keydown",c)),ie(()=>document.removeEventListener("keydown",c));const b=N(()=>({48:"w-48"})[x.width.toString()]),a=N(()=>x.align==="left"?"ltr:origin-top-left rtl:origin-top-right start-0":x.align==="right"?"ltr:origin-top-right rtl:origin-top-left end-0":"origin-top"),m=T(!1);return(u,_)=>(o(),f("div",Ee,[e("div",{onClick:_[0]||(_[0]=C=>m.value=!m.value)},[te(u.$slots,"trigger")]),q(e("div",{class:"fixed inset-0 z-40",onClick:_[1]||(_[1]=C=>m.value=!1)},null,512),[[J,m.value]]),d(we,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:w(()=>[q(e("div",{class:D(["absolute z-50 mt-2 rounded-md shadow-lg",[b.value,a.value]]),style:{display:"none"},onClick:_[2]||(_[2]=C=>m.value=!1)},[e("div",{class:D(["rounded-md ring-1 ring-black ring-opacity-5",r.contentClasses])},[te(u.$slots,"content")],2)],2),[[J,m.value]])]),_:3})]))}},K={__name:"DropdownLink",props:{href:{type:String,required:!0},method:{type:String,default:"get"},as:{type:String,default:"a"}},setup(r){return(x,c)=>(o(),I(M(Q),ge({href:r.href,method:r.method,as:r.as},x.$attrs,{class:"block w-full px-4 py-2 text-start text-sm leading-5 text-gray-700 transition duration-150 ease-in-out hover:bg-gray-100 focus:bg-gray-100 focus:outline-none"}),{default:w(()=>[te(x.$slots,"default")]),_:3},16,["href","method","as"]))}},Ie={__name:"NavLink",props:{href:{type:String,required:!0},active:{type:Boolean}},setup(r){const x=r,c=N(()=>x.active?"inline-flex items-center px-1 pt-1 border-b-2 border-indigo-400 text-sm font-medium leading-5 text-gray-900 focus:outline-none focus:border-indigo-700 transition duration-150 ease-in-out":"inline-flex items-center px-1 pt-1 border-b-2 border-transparent text-sm font-medium leading-5 text-gray-500 hover:text-gray-700 hover:border-gray-300 focus:outline-none focus:text-gray-700 focus:border-gray-300 transition duration-150 ease-in-out");return(b,a)=>(o(),I(M(Q),{href:r.href,class:D(c.value)},{default:w(()=>[te(b.$slots,"default")]),_:3},8,["href","class"]))}},F={__name:"ResponsiveNavLink",props:{href:{type:String,required:!0},active:{type:Boolean},method:{type:String,default:"get"},as:{type:String,default:"a"}},setup(r){const x=r,c=N(()=>x.active?"block w-full ps-3 pe-4 py-2 border-l-4 border-indigo-400 text-start text-base font-medium text-indigo-700 bg-indigo-50 focus:outline-none focus:text-indigo-800 focus:bg-indigo-100 focus:border-indigo-700 transition duration-150 ease-in-out":"block w-full ps-3 pe-4 py-2 border-l-4 border-transparent text-start text-base font-medium text-gray-600 hover:text-gray-800 hover:bg-gray-50 hover:border-gray-300 focus:outline-none focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300 transition duration-150 ease-in-out");return(b,a)=>(o(),I(M(Q),ge({href:r.href,method:r.method,as:r.as},b.$attrs,{class:c.value}),{default:w(()=>[te(b.$slots,"default")]),_:3},16,["href","method","as","class"]))}},Me={class:"p-6"},Pe={class:"mt-6"},De={key:0,class:"mb-4 p-4 bg-green-100 border border-green-400 text-green-700 rounded"},Be={key:1,class:"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded"},Le={class:"flex items-center mb-3"},Ue=["id","onUpdate:modelValue"],Ne=["for"],ze={key:0,class:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800"},Re={key:0},We={class:"mb-4"},qe={class:"flex items-center"},Fe=["id","checked","onChange"],He=["for"],Ke={key:0,class:"mb-4"},Oe=["id","onUpdate:modelValue"],Ye={key:1,class:"mb-4"},Ge={class:"flex-1"},Je=["id","onUpdate:modelValue"],Qe={class:"flex-1"},Xe=["id","onUpdate:modelValue"],Ze={key:0,class:"flex items-end pb-1"},et=["onClick"],tt=["onClick"],st={class:"mt-6 flex justify-end space-x-3"},at={key:0,class:"flex items-center"},lt={key:1},ot={__name:"AvailabilityModal",props:{show:Boolean,date:{type:String,default:()=>{const r=new Date;return r.setDate(r.getDate()+1),r.toISOString().split("T")[0]}},nextWeekDates:{type:Array,default:()=>[]},userId:{type:Number,default:null}},emits:["close","availability-saved"],setup(r,{emit:x}){const c=()=>{const y=localStorage.getItem("authToken");y&&!Y.defaults.headers.common.Authorization&&(Y.defaults.headers.common.Authorization=`Bearer ${y}`,console.log("Auth headers set in AvailabilityModal"))},b=r,a=x,m=T({}),u=T({}),_=T(!1),C=T(""),h=()=>{const y=[],v=new Date,t=new Date(v);t.setDate(v.getDate()+1);for(let s=0;s<7;s++){const i=new Date(t);i.setDate(t.getDate()+s);const p=i.toISOString().split("T")[0];y.push({value:p,label:i.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})}),m.value[p]={isSelected:!1,isAvailable:!0,reason:"",timeSlots:[{start_time:"",end_time:""}]}}return y},g=T([]);le(()=>{c(),b.nextWeekDates.length>0?(g.value=b.nextWeekDates,b.nextWeekDates.forEach(y=>{m.value[y.value]={isSelected:!1,isAvailable:!0,reason:"",timeSlots:[{start_time:"",end_time:""}]}})):g.value=h()});const $=async()=>{try{if(c(),g.value.length===0)return;const y=g.value[0].value,v=g.value[g.value.length-1].value,t=await Y.get("/api/availabilities",{params:{start_date:y,end_date:v,user_id:b.userId}});if(t.data&&t.data.availabilities){const s=t.data.availabilities;g.value.forEach(i=>{m.value[i.value]={isSelected:!1,isAvailable:!0,reason:"",timeSlots:[{start_time:"",end_time:""}]}}),s.forEach(i=>{const p=i.date.split("T")[0];m.value[p]&&(m.value[p].isSelected=!0,m.value[p].isAvailable=i.is_available,i.is_available?m.value[p].timeSlots=i.time_slots&&i.time_slots.length>0?[...i.time_slots]:[{start_time:"",end_time:""}]:m.value[p].reason=i.reason||"")})}}catch(y){console.error("Error fetching existing availabilities:",y),g.value.forEach(v=>{m.value[v.value]={isSelected:!1,isAvailable:!0,reason:"",timeSlots:[{start_time:"",end_time:""}]}})}};G(()=>b.show,async y=>{y&&(u.value={},C.value="",await $())},{immediate:!0});const V=y=>{m.value[y].timeSlots.push({start_time:"",end_time:""})},z=(y,v)=>{m.value[y].timeSlots.length>1&&m.value[y].timeSlots.splice(v,1)},E=(y,v)=>{m.value[y].isAvailable=v,v?m.value[y].reason="":m.value[y].timeSlots=[{start_time:"",end_time:""}]},k=async()=>{_.value=!0,u.value={},C.value="";const y=[];let v=!1;for(const t of g.value){const s=t.value,i=m.value[s];if(i.isSelected){let p={};if(i.isAvailable)if(i.timeSlots.some(n=>!n.start_time||!n.end_time))p.timeSlots="Please fill in all time slots.",v=!0;else for(const n of i.timeSlots){const l=n.start_time.split(":").map(Number),P=n.end_time.split(":").map(Number);if(l.length!==2||P.length!==2||isNaN(l[0])||isNaN(l[1])||isNaN(P[0])||isNaN(P[1])){p.timeSlots="Invalid time format. Please use HH:MM format.",v=!0;break}const A=l[0]*60+l[1],L=P[0]*60+P[1];if(A>=L){p.timeSlots="End time must be after start time.",v=!0;break}}else i.reason.trim()||(p.reason="Please provide a reason for unavailability.",v=!0);Object.keys(p).length>0&&(u.value[s]=p),Object.keys(p).length===0&&y.push({date:s,is_available:i.isAvailable,reason:i.isAvailable?null:i.reason,time_slots:i.isAvailable?i.timeSlots:null})}}if(v){_.value=!1,u.value.general="Please correct the errors in the highlighted dates.";return}if(y.length===0){u.value.general="Please select at least one day to set availability for.",_.value=!1;return}try{c();const t=await Y.post("/api/availabilities/batch",{availabilities:y});C.value="Availability saved successfully!";try{const s=await Y.get("/api/availability-prompt");localStorage.setItem("shouldBlockUser",s.data.should_block_user),localStorage.setItem("allWeekdaysCovered",s.data.all_weekdays_covered);const i=new CustomEvent("availability-status-updated",{detail:{shouldBlockUser:s.data.should_block_user,allWeekdaysCovered:s.data.all_weekdays_covered}});window.dispatchEvent(i),console.log("Availability status updated from modal:",{shouldBlockUser:s.data.should_block_user,allWeekdaysCovered:s.data.all_weekdays_covered})}catch(s){console.error("Error updating availability status:",s)}a("availability-saved",t.data.availabilities),setTimeout(()=>{a("close")},1500)}catch(t){console.error("Error saving availability:",t),t.response&&t.response.data&&t.response.data.errors?u.value.general=t.response.data.message||"An error occurred while saving your availability.":t.response&&t.response.status===409?(C.value=t.response.data.message,setTimeout(()=>{a("close")},1500)):u.value.general="An unexpected error occurred while saving your availability."}finally{_.value=!1}};return(y,v)=>(o(),I(he,{show:r.show,onClose:v[1]||(v[1]=t=>y.$emit("close")),"max-width":"xl"},{default:w(()=>[e("div",Me,[v[6]||(v[6]=e("h2",{class:"text-lg font-medium text-gray-900"}," Submit Your Weekly Availability ",-1)),v[7]||(v[7]=e("p",{class:"mt-1 text-sm text-gray-600"}," Please select the dates you wish to set availability for and provide your details for each. ",-1)),e("div",Pe,[e("form",{onSubmit:re(k,["prevent"])},[C.value?(o(),f("div",De,B(C.value),1)):S("",!0),u.value.general?(o(),f("div",Be,B(u.value.general),1)):S("",!0),(o(!0),f(H,null,O(g.value,t=>{var s,i;return o(),f("div",{key:t.value,class:D(["mb-6 p-4 border rounded-lg shadow-sm",[m.value[t.value].isSelected?"border-indigo-300 bg-indigo-50":"border-gray-200",m.value[t.value].isSelected&&!u.value[t.value]?"border-l-4 border-l-indigo-500":""]])},[e("div",Le,[q(e("input",{type:"checkbox",id:`select_date_${t.value}`,"onUpdate:modelValue":p=>m.value[t.value].isSelected=p,class:"rounded border-gray-300 text-indigo-600 shadow-sm focus:ring-indigo-500"},null,8,Ue),[[ke,m.value[t.value].isSelected]]),e("label",{for:`select_date_${t.value}`,class:"ml-2 block text-base font-medium text-gray-800"},[j(B(t.label)+" ",1),m.value[t.value].isSelected?(o(),f("span",ze," Saved ")):S("",!0)],8,Ne)]),m.value[t.value].isSelected?(o(),f("div",Re,[e("div",We,[e("div",qe,[e("input",{type:"checkbox",id:`isAvailableToggle_${t.value}`,checked:m.value[t.value].isAvailable,onChange:p=>E(t.value,p.target.checked),class:"rounded border-gray-300 text-indigo-600 shadow-sm focus:ring-indigo-500"},null,40,Fe),e("label",{for:`isAvailableToggle_${t.value}`,class:"ml-2 block text-sm text-gray-700"}," I am available on this day ",8,He)])]),m.value[t.value].isAvailable?S("",!0):(o(),f("div",Ke,[d(U,{for:`reason_${t.value}`,value:"Reason for Not Available"},null,8,["for"]),q(e("textarea",{id:`reason_${t.value}`,"onUpdate:modelValue":p=>m.value[t.value].reason=p,rows:"2",class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",placeholder:"e.g., Out of office, Holiday, Meeting all day"},null,8,Oe),[[Z,m.value[t.value].reason]]),d(R,{message:(s=u.value[t.value])==null?void 0:s.reason,class:"mt-2"},null,8,["message"])])),m.value[t.value].isAvailable?(o(),f("div",Ye,[d(U,{value:"Available Time Slots"}),d(R,{message:(i=u.value[t.value])==null?void 0:i.timeSlots,class:"mt-2"},null,8,["message"]),(o(!0),f(H,null,O(m.value[t.value].timeSlots,(p,n)=>(o(),f("div",{key:n,class:"flex items-center space-x-2 mt-2"},[e("div",Ge,[d(U,{for:`start_time_${t.value}_${n}`,value:"Start Time",class:"text-xs"},null,8,["for"]),q(e("input",{id:`start_time_${t.value}_${n}`,type:"time","onUpdate:modelValue":l=>p.start_time=l,class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm"},null,8,Je),[[Z,p.start_time]])]),e("div",Qe,[d(U,{for:`end_time_${t.value}_${n}`,value:"End Time",class:"text-xs"},null,8,["for"]),q(e("input",{id:`end_time_${t.value}_${n}`,type:"time","onUpdate:modelValue":l=>p.end_time=l,class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm"},null,8,Xe),[[Z,p.end_time]])]),m.value[t.value].timeSlots.length>1?(o(),f("div",Ze,[e("button",{type:"button",onClick:l=>z(t.value,n),class:"p-2 text-red-600 hover:text-red-800"},v[2]||(v[2]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm6 0a1 1 0 012 0v6a1 1 0 11-2 0V8z","clip-rule":"evenodd"})],-1)]),8,et)])):S("",!0)]))),128)),e("button",{type:"button",onClick:p=>V(t.value),class:"mt-3 w-full flex items-center justify-center px-4 py-2 border border-dashed border-indigo-300 rounded-lg text-indigo-600 hover:bg-indigo-50 transition duration-150 ease-in-out"},v[3]||(v[3]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z","clip-rule":"evenodd"})],-1),j(" Add Another Time Slot ",-1)]),8,tt)])):S("",!0)])):S("",!0)],2)}),128)),e("div",st,[d(ye,{onClick:v[0]||(v[0]=t=>y.$emit("close"))},{default:w(()=>v[4]||(v[4]=[j(" Cancel ",-1)])),_:1,__:[4]}),d(oe,{disabled:_.value,class:D({"opacity-50":_.value})},{default:w(()=>[_.value?(o(),f("span",at,v[5]||(v[5]=[e("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),j(" Saving... ",-1)]))):(o(),f("span",lt,"Save Availability"))]),_:1},8,["disabled","class"])])],32)])])]),_:1},8,["show"]))}},nt={key:0,class:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center"},it={class:"bg-white rounded-lg shadow-xl p-6 max-w-lg w-full mx-4"},rt={class:"flex justify-center"},dt={__name:"AvailabilityBlocker",setup(r){const x=T(!1),c=T(!0),b=T(!1),a=T([]),m=N(()=>{var k;return((k=ue().props.auth.user)==null?void 0:k.id)||null}),u=()=>{const k=localStorage.getItem("authToken");k&&!Y.defaults.headers.common.Authorization&&(Y.defaults.headers.common.Authorization=`Bearer ${k}`)},_=async()=>{c.value=!0;const k=localStorage.getItem("shouldBlockUser"),y=localStorage.getItem("allWeekdaysCovered");if(k==="true"&&y==="false")x.value=!0,await C();else try{u();const v=await Y.get("/api/availability-prompt");x.value=v.data.should_block_user&&!v.data.all_weekdays_covered,x.value&&await C()}catch(v){console.error("Error checking if user should be blocked:",v),x.value=!1}c.value=!1},C=async()=>{try{u();const k=await Y.get("/api/availability-prompt");h(k.data.next_week_start,k.data.next_week_end)}catch(k){console.error("Error fetching next week dates:",k)}},h=(k,y)=>{const v=[],t=new Date(k),s=new Date(y),i=new Date(t);for(;i<=s;)v.push({value:i.toISOString().split("T")[0],label:i.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})}),i.setDate(i.getDate()+1);a.value=v},g=()=>{b.value=!0},$=()=>{_()},V=k=>{x.value=k.detail.shouldBlockUser&&!k.detail.allWeekdaysCovered},z=()=>{document.visibilityState==="visible"&&ae(()=>{_()})},E=k=>{(k.key==="shouldBlockUser"||k.key==="allWeekdaysCovered")&&ae(()=>{_()})};return le(()=>{_(),window.addEventListener("availability-status-updated",V),document.addEventListener("visibilitychange",z),window.addEventListener("storage",E)}),ie(()=>{window.removeEventListener("availability-status-updated",V),document.removeEventListener("visibilitychange",z),window.removeEventListener("storage",E)}),(k,y)=>x.value&&!c.value?(o(),f("div",nt,[e("div",it,[y[2]||(y[2]=xe('<div class="flex items-center mb-4"><div class="flex-shrink-0 mr-3"><svg class="h-8 w-8 text-red-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg></div><h2 class="text-xl font-bold text-gray-900">Action Required</h2></div><p class="mb-6 text-gray-700"> You must submit your availability for all weekdays of next week before you can continue using the application. This is required for planning meetings and work schedules. </p>',2)),e("div",rt,[d(oe,{onClick:g,class:"bg-red-600 hover:bg-red-700"},{default:w(()=>y[1]||(y[1]=[j(" Submit Availability Now ",-1)])),_:1,__:[1]})]),d(ot,{show:b.value,"next-week-dates":a.value,date:a.value.length>0?a.value[0].value:"",userId:m.value,onClose:y[0]||(y[0]=v=>b.value=!1),onAvailabilitySaved:$},null,8,["show","next-week-dates","date","userId"])])])):S("",!0)}},ut={class:"p-6"},ct={class:"flex justify-between items-center mb-4"},mt={class:"text-lg font-medium text-gray-900"},vt={key:0,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert"},ft={class:"block sm:inline"},pt={key:0,class:"mt-6 flex justify-end space-x-3"},gt={__name:"BaseFormModal",props:{show:{type:Boolean,default:!1},title:{type:String,default:"Modal Title"},apiEndpoint:{type:String,required:!1},httpMethod:{type:String,default:"post",validator:r=>["post","put","patch","delete"].includes(r.toLowerCase())},formData:{type:Object,required:!0},submitButtonText:{type:String,default:"Save"},successMessage:{type:String,default:"Operation successful!"},formatDataForApi:{type:Function,default:r=>r},showFooter:{type:Boolean,default:!0}},emits:["close","submitted","error"],setup(r,{emit:x}){const c=r,b=x,a=T(!1),m=T({}),u=T("");G(()=>c.show,h=>{h&&(m.value={},u.value="",a.value=!1)});const _=async()=>{a.value=!0,m.value={},u.value="";try{const h=c.formatDataForApi(c.formData);let g;const $=c.httpMethod.toLowerCase();if($==="post")g=await window.axios.post(c.apiEndpoint,h);else if($==="put")g=await window.axios.put(c.apiEndpoint,h);else if($==="patch")g=await window.axios.patch(c.apiEndpoint,h);else if($==="delete")g=await window.axios.delete(c.apiEndpoint,{data:h});else throw new Error(`Unsupported HTTP method: ${c.httpMethod}`);Te(c.successMessage),b("submitted",g.data),b("close")}catch(h){console.error("API submission error:",h),h.response?h.response.status===422?(m.value=h.response.data.errors,u.value="Please correct the errors in the form."):u.value=h.response.data.message||"An unexpected error occurred.":u.value="A network error occurred or the server is unreachable.",Ve(u.value),b("error",h)}finally{a.value=!1}},C=()=>{b("close")};return(h,g)=>(o(),I(he,{show:r.show,onClose:C},{default:w(()=>[e("div",ut,[e("div",ct,[e("h2",mt,B(r.title),1),e("button",{onClick:C,class:"text-gray-400 hover:text-gray-500"},g[0]||(g[0]=[e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),u.value?(o(),f("div",vt,[e("span",ft,B(u.value),1)])):S("",!0),e("form",{onSubmit:re(_,["prevent"])},[te(h.$slots,"default",{errors:m.value},void 0,!0),r.showFooter?(o(),f("div",pt,[d(ye,{onClick:C,type:"button",disabled:a.value},{default:w(()=>g[1]||(g[1]=[j(" Cancel ",-1)])),_:1,__:[1]},8,["disabled"]),d(oe,{type:"submit",disabled:a.value,class:D({"opacity-75 cursor-not-allowed":a.value})},{default:w(()=>[j(B(a.value?"Submitting...":r.submitButtonText),1)]),_:1},8,["disabled","class"])])):S("",!0)],32)])]),_:3},8,["show"]))}},fe=ne(gt,[["__scopeId","data-v-380ca613"]]),yt=["disabled"],ht={class:"absolute z-50 mt-1 w-full rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5"},bt={class:"p-2 border-b border-gray-200"},wt=["onClick"],kt={key:0,class:"block px-4 py-2 text-sm text-gray-500"},xt={__name:"SelectDropdown",props:{modelValue:{type:[String,Number,Object,null],default:null},options:{type:Array,default:()=>[]},placeholder:{type:String,default:"Select an option"},valueKey:{type:String,default:"value"},labelKey:{type:String,default:"label"},disabled:{type:Boolean,default:!1},required:{type:Boolean,default:!1},maxHeight:{type:String,default:"250px"},width:{type:String,default:"full"},labelClass:{type:String,default:"text-xs"}},emits:["update:modelValue","change"],setup(r,{emit:x}){const c=r,b=x,a=T(!1),m=T(""),u=T(null),_=T(null),C=N(()=>{if(!m.value)return c.options;const E=m.value.toLowerCase();return c.options.filter(k=>k[c.labelKey].toLowerCase().includes(E))}),h=E=>{u.value&&!u.value.contains(E.target)&&(a.value=!1,m.value="")},g=E=>{E.key==="Escape"&&a.value&&(a.value=!1,m.value="")};le(()=>{document.addEventListener("click",h),document.addEventListener("keydown",g)}),ie(()=>{document.removeEventListener("click",h),document.removeEventListener("keydown",g)});const $=N(()=>{if(c.modelValue===null||c.modelValue===void 0||c.modelValue==="")return c.placeholder;const E=c.options.find(k=>k[c.valueKey]===c.modelValue);return E?E[c.labelKey]:c.placeholder}),V=E=>{b("update:modelValue",E[c.valueKey]),b("change",E[c.valueKey]),a.value=!1,m.value=""},z=()=>{c.disabled||(a.value=!a.value,a.value&&ae(()=>{_.value&&_.value.focus()}))};return G(()=>c.modelValue,E=>{(E==null||E==="")&&(m.value="")}),(E,k)=>(o(),f("div",{ref_key:"dropdownRef",ref:u,class:D(["relative",{"w-full":r.width==="full"}])},[e("button",{type:"button",onClick:z,disabled:r.disabled,class:D(["border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full text-left px-3 py-2 text-gray-700 bg-white relative flex items-center justify-between",{"opacity-50 cursor-not-allowed":r.disabled}])},[e("span",{class:D({"text-gray-500":!c.modelValue})},B($.value),3),k[3]||(k[3]=e("svg",{class:"h-4 w-4 text-gray-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1))],10,yt),q(e("div",ht,[e("div",bt,[q(e("input",{ref_key:"searchInputRef",ref:_,type:"text","onUpdate:modelValue":k[0]||(k[0]=y=>m.value=y),onInput:k[1]||(k[1]=y=>a.value=!0),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-sm",placeholder:"Search...",onClick:k[2]||(k[2]=re(()=>{},["stop"]))},null,544),[[Z,m.value]])]),e("div",{class:"py-1 overflow-y-auto",style:_e({maxHeight:r.maxHeight})},[(o(!0),f(H,null,O(C.value,y=>(o(),f("div",{key:y[r.valueKey],onClick:v=>V(y),class:D(["block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 cursor-pointer",{"bg-gray-100":y[r.valueKey]===r.modelValue}])},B(y[r.labelKey]),11,wt))),128)),C.value.length===0?(o(),f("div",kt," No options available ")):S("",!0)],4)],512),[[J,a.value]])],2))}},se=ne(xt,[["__scopeId","data-v-d2f1cfa0"]]),_t={class:"space-y-4"},$t="Add New Milestone",St="/api/milestones",Ct="post",At="Create Milestone",jt="Milestone created successfully!",Tt={__name:"MilestoneFormModal",props:{show:Boolean,projectId:Number},emits:["close","saved"],setup(r,{emit:x}){const c=r,b=x,a=me({name:"",description:"",completion_date:null,status:"Not Started",project_id:c.projectId}),m=["Not Started","In Progress","Completed","Overdue"];G(()=>c.show,C=>{C&&Object.assign(a,{name:"",description:"",completion_date:null,status:"Not Started",project_id:c.projectId})},{immediate:!0});const u=C=>{b("saved",C),b("close")},_=()=>{b("close")};return(C,h)=>(o(),I(fe,{show:r.show,title:$t,"api-endpoint":St,"http-method":Ct,"form-data":a,"submit-button-text":At,"success-message":jt,onClose:_,onSubmitted:u},{default:w(({errors:g})=>[e("div",_t,[e("div",null,[d(U,{for:"milestone-name",value:"Milestone Name"}),d(ee,{id:"milestone-name",modelValue:a.name,"onUpdate:modelValue":h[0]||(h[0]=$=>a.name=$),type:"text",class:"mt-1 block w-full",placeholder:"Enter milestone name",required:""},null,8,["modelValue"]),d(R,{message:g.name?g.name[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[d(U,{for:"milestone-description",value:"Description"}),q(e("textarea",{id:"milestone-description","onUpdate:modelValue":h[1]||(h[1]=$=>a.description=$),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",rows:"3",placeholder:"Enter milestone description"},null,512),[[Z,a.description]]),d(R,{message:g.description?g.description[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[d(U,{for:"milestone-completion-date",value:"Completion Date"}),d(ee,{id:"milestone-completion-date",modelValue:a.completion_date,"onUpdate:modelValue":h[2]||(h[2]=$=>a.completion_date=$),type:"date",class:"mt-1 block w-full"},null,8,["modelValue"]),d(R,{message:g.completion_date?g.completion_date[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[d(U,{for:"milestone-status",value:"Status"}),d(se,{id:"milestone-status",modelValue:a.status,"onUpdate:modelValue":h[3]||(h[3]=$=>a.status=$),options:m.map($=>({value:$,label:$})),"value-key":"value","label-key":"label",placeholder:"Select status",class:"mt-1"},null,8,["modelValue","options"]),d(R,{message:g.status?g.status[0]:"",class:"mt-2"},null,8,["message"])])])]),_:1},8,["show","form-data"]))}},Vt={class:"space-y-4"},Et={key:0},It={key:0,class:"text-sm text-gray-500"},Mt={key:0,class:"text-sm text-gray-500"},Pt={key:0,class:"text-sm text-gray-500"},Dt={class:"flex items-center gap-2 mt-1"},Bt={key:0,class:"text-sm text-gray-500"},Lt=["disabled"],Ut="Create New Task",Nt="/api/tasks",zt="post",Rt="Create Task",Wt="Task created successfully!",qt={__name:"CreateTaskModal",props:{show:Boolean,projectId:{type:Number,default:null}},emits:["close","saved"],setup(r,{emit:x}){const c=r,b=x,a=me({name:"",description:"",assigned_to_user_id:null,due_date:null,status:"To Do",task_type_id:null,milestone_id:null,project_id:c.projectId}),m=["To Do","In Progress","Done","Blocked","Archived"],u=T([]),_=T([]),C=T([]),h=T([]),g=T(!0),$=T(!1),V=T(!1),z=T(!1),E=T(!1);G(()=>c.show,async P=>{P&&(Object.assign(a,{name:"",description:"",assigned_to_user_id:null,due_date:null,status:"To Do",task_type_id:null,milestone_id:null,project_id:c.projectId}),c.projectId?await y(c.projectId):await k())},{immediate:!0}),G(()=>a.project_id,async P=>{P?await y(P):(_.value=[],C.value=[],h.value=[])});const k=async()=>{g.value=!0;try{const P=await window.axios.get("/api/projects-simplified");u.value=P.data.map(A=>({value:A.id,label:A.name}))}catch(P){console.error("Error fetching projects:",P),u.value=[]}finally{g.value=!1}},y=async P=>{if(P){$.value=!0,V.value=!0,z.value=!0;try{const[A,L,W]=await Promise.all([window.axios.get(`/api/projects/${P}/users`),window.axios.get("/api/task-types"),window.axios.get(`/api/projects/${P}/milestones`)]);_.value=A.data.map(X=>({value:X.id,label:X.name})),C.value=L.data.map(X=>({value:X.id,label:X.name})),h.value=W.data.map(X=>({value:X.id,label:X.name}))}catch(A){console.error("Error fetching associated task data:",A),_.value=[],C.value=[],h.value=[]}finally{$.value=!1,V.value=!1,z.value=!1}}},v=P=>{b("saved",P),b("close")},t=()=>{b("close")},s=()=>{a.project_id?E.value=!0:alert("Please select a project before adding a milestone.")},i=P=>{if(E.value=!1,P&&P.id&&P.name){const A={value:P.id,label:P.name};h.value.some(L=>L.value===A.value)||h.value.push(A),a.milestone_id=A.value}},p=N(()=>_.value),n=N(()=>C.value),l=N(()=>h.value);return(P,A)=>(o(),f(H,null,[d(fe,{show:r.show,title:Ut,"api-endpoint":Nt,"http-method":zt,"form-data":a,"submit-button-text":Rt,"success-message":Wt,onClose:t,onSubmitted:v},{default:w(({errors:L})=>[e("div",Vt,[r.projectId?S("",!0):(o(),f("div",Et,[d(U,{for:"task-project",value:"Project"}),g.value?(o(),f("div",It,"Loading projects...")):(o(),I(se,{key:1,id:"task-project",modelValue:a.project_id,"onUpdate:modelValue":A[0]||(A[0]=W=>a.project_id=W),options:u.value,"value-key":"value","label-key":"label",placeholder:"Select a project",class:"mt-1",required:!0},null,8,["modelValue","options"])),d(R,{message:L.project_id?L.project_id[0]:"",class:"mt-2"},null,8,["message"])])),e("div",null,[d(U,{for:"task-name",value:"Task Name"}),d(ee,{id:"task-name",modelValue:a.name,"onUpdate:modelValue":A[1]||(A[1]=W=>a.name=W),type:"text",class:"mt-1 block w-full",placeholder:"Enter task name",required:""},null,8,["modelValue"]),d(R,{message:L.name?L.name[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[d(U,{for:"task-description",value:"Description"}),q(e("textarea",{id:"task-description","onUpdate:modelValue":A[2]||(A[2]=W=>a.description=W),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",rows:"3",placeholder:"Enter task description"},null,512),[[Z,a.description]]),d(R,{message:L.description?L.description[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[d(U,{for:"task-status",value:"Status"}),d(se,{id:"task-status",modelValue:a.status,"onUpdate:modelValue":A[3]||(A[3]=W=>a.status=W),options:m.map(W=>({value:W,label:W})),"value-key":"value","label-key":"label",placeholder:"Select status",class:"mt-1"},null,8,["modelValue","options"]),d(R,{message:L.status?L.status[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[d(U,{for:"task-due-date",value:"Due Date"}),d(ee,{id:"task-due-date",modelValue:a.due_date,"onUpdate:modelValue":A[4]||(A[4]=W=>a.due_date=W),type:"date",class:"mt-1 block w-full"},null,8,["modelValue"]),d(R,{message:L.due_date?L.due_date[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[d(U,{for:"task-assigned-to",value:"Assigned To"}),$.value?(o(),f("div",Mt,"Loading users...")):(o(),I(se,{key:1,id:"task-assigned-to",modelValue:a.assigned_to_user_id,"onUpdate:modelValue":A[5]||(A[5]=W=>a.assigned_to_user_id=W),options:p.value,"value-key":"value","label-key":"label",placeholder:"Unassigned",class:"mt-1","allow-empty":!0},null,8,["modelValue","options"])),d(R,{message:L.assigned_to_user_id?L.assigned_to_user_id[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[d(U,{for:"task-type",value:"Task Type"}),V.value?(o(),f("div",Pt,"Loading task types...")):(o(),I(se,{key:1,id:"task-type",modelValue:a.task_type_id,"onUpdate:modelValue":A[6]||(A[6]=W=>a.task_type_id=W),options:n.value,"value-key":"value","label-key":"label",placeholder:"Select a task type",class:"mt-1","allow-empty":!0},null,8,["modelValue","options"])),d(R,{message:L.task_type_id?L.task_type_id[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[d(U,{for:"task-milestone",value:"Milestone"}),e("div",Dt,[z.value?(o(),f("div",Bt,"Loading milestones...")):(o(),I(se,{key:1,id:"task-milestone",modelValue:a.milestone_id,"onUpdate:modelValue":A[7]||(A[7]=W=>a.milestone_id=W),options:l.value,"value-key":"value","label-key":"label",placeholder:"No milestone",class:"flex-grow","allow-empty":!0,disabled:!a.project_id},null,8,["modelValue","options","disabled"])),e("button",{type:"button",onClick:s,disabled:!a.project_id||z.value,class:"px-3 py-2 text-sm font-medium text-blue-600 bg-blue-50 rounded-md hover:bg-blue-100 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",title:"Add New Milestone"},A[9]||(A[9]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4v16m8-8H4"})],-1)]),8,Lt)]),d(R,{message:L.milestone_id?L.milestone_id[0]:"",class:"mt-2"},null,8,["message"])])])]),_:1},8,["show","form-data"]),d(Tt,{show:E.value,"project-id":a.project_id,onClose:A[8]||(A[8]=L=>E.value=!1),onSaved:i},null,8,["show","project-id"])],64))}},Ft=(r,x)=>{let c;return(...b)=>{clearTimeout(c),c=setTimeout(()=>r(...b),x)}},Ht={class:"relative"},Kt={class:"flex flex-wrap items-center gap-2 mb-2 p-2 border border-gray-300 rounded-lg bg-white min-h-[44px] focus-within:border-indigo-500 focus-within:ring-1 focus-within:ring-indigo-500 transition-all duration-150"},Ot=["onClick"],Yt={key:0,class:"absolute z-20 w-full bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto mt-1 transform-gpu"},Gt=["onClick"],Jt={key:1,class:"px-4 py-2 text-sm text-gray-500"},Qt={key:2,class:"px-4 py-2 text-sm text-gray-500"},Xt={__name:"TagInput",props:{modelValue:{type:Array,default:()=>[]},label:{type:String,default:"Tags"},placeholder:{type:String,default:"Add tags..."},error:{type:String,default:""},initialTags:{type:Array,default:()=>[]},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(r,{emit:x}){const c=r,b=x,a=T(""),m=T([]),u=T([]),_=T(!1),C=T(null);function h(){b("update:modelValue",u.value.map(v=>v.id))}G(()=>c.initialTags,v=>{if(u.value=[],v&&v.length>0){const p=[],n=new Set;v.forEach(l=>{n.has(l.id)||(p.push(l),n.add(l.id))}),u.value.push(...p)}const t=v.map(p=>p.id),s=Array.isArray(c.modelValue)?c.modelValue:[];(t.length!==s.length||t.some(p=>!s.includes(p))||s.some(p=>!t.includes(p)))&&h()},{immediate:!0});const g=Ft(async v=>{if(v.length<2){m.value=[],_.value=!1;return}try{const t=await Y.get(`/api/tags/search?query=${v}`);m.value=t.data,_.value=!0}catch(t){console.error("Error fetching tags:",t),m.value=[],_.value=!1}},300);G(a,v=>{c.disabled||g(v)});const $=v=>{u.value.some(t=>t.id===v.id)||(u.value.push(v),a.value="",m.value=[],_.value=!1,h()),ae(()=>C.value.focus())},V=()=>{if(c.disabled)return;const v=a.value.trim();if(!v)return;const t=m.value.find(i=>i.name.toLowerCase()===v.toLowerCase()),s=u.value.some(i=>i.name.toLowerCase()===v.toLowerCase());if(t)$(t);else if(s)a.value="",m.value=[],_.value=!1;else{const i={id:`new_${v.replace(/\s+/g,"-").toLowerCase()}_${Date.now()}`,name:v};u.value.push(i),a.value="",m.value=[],_.value=!1,h()}ae(()=>C.value.focus())},z=v=>{c.disabled||(u.value=u.value.filter(t=>t.id!==v.id),h(),ae(()=>C.value.focus()))},E=()=>{c.disabled||a.value===""&&u.value.length>0&&z(u.value[u.value.length-1])},k=N(()=>m.value.filter(v=>!u.value.some(t=>t.id===v.id))),y=v=>{C.value&&!C.value.$el.contains(v.target)&&(_.value=!1,a.value="")};return le(()=>{document.addEventListener("click",y)}),ie(()=>{document.removeEventListener("click",y)}),(v,t)=>(o(),f("div",Ht,[d(U,{value:r.label,class:"mb-1"},null,8,["value"]),e("div",Kt,[(o(!0),f(H,null,O(u.value,s=>(o(),f("span",{key:s.id,class:"inline-flex items-center px-3 py-1 text-sm font-medium bg-indigo-100 text-indigo-800 rounded-full shadow-sm"},[j(B(s.name)+" ",1),r.disabled?S("",!0):(o(),f("button",{key:0,type:"button",onClick:i=>z(s),class:"ml-2 -mr-1 text-indigo-500 hover:text-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 rounded-full p-0.5"},t[3]||(t[3]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,Ot))]))),128)),d(ee,{ref_key:"inputRef",ref:C,type:"text",placeholder:u.value.length===0?r.placeholder:"",modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=s=>a.value=s),onFocus:t[1]||(t[1]=s=>_.value=!0),onKeydown:[de(re(V,["prevent"]),["enter"]),t[2]||(t[2]=de(s=>_.value=!1,["tab"])),de(E,["delete"])],class:"flex-grow min-w-[100px] border-none focus:ring-0 shadow-none p-0 bg-transparent text-gray-900",disabled:r.disabled},null,8,["placeholder","modelValue","onKeydown","disabled"])]),_.value&&(k.value.length>0||a.value.length>=2||k.value.length===0&&a.value.length<2)&&!r.disabled?(o(),f("div",Yt,[(o(!0),f(H,null,O(k.value,s=>(o(),f("div",{key:s.id,onClick:i=>$(s),class:"px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 cursor-pointer transition-colors duration-100"},B(s.name),9,Gt))),128)),!m.value.some(s=>s.name.toLowerCase()===a.value.toLowerCase())&&a.value.length>=2?(o(),f("div",{key:0,onClick:V,class:"px-4 py-2 text-sm text-indigo-700 bg-indigo-50 hover:bg-indigo-100 cursor-pointer border-t border-indigo-200 font-semibold transition-colors duration-100"},' Add new tag: "'+B(a.value)+'" ',1)):S("",!0),k.value.length===0&&a.value.length<2?(o(),f("div",Jt," Type at least 2 characters to search for tags. ")):S("",!0),k.value.length===0&&a.value.length>=2&&!m.value.some(s=>s.name.toLowerCase()===a.value.toLowerCase())?(o(),f("div",Qt,[t[4]||(t[4]=j(" No matching tags found. Press ",-1)),t[5]||(t[5]=e("span",{class:"font-semibold text-indigo-600"},"Enter",-1)),j(' to add "'+B(a.value)+'" as a new tag. ',1)])):S("",!0)])):S("",!0),d(R,{message:r.error,class:"mt-2"},null,8,["message"])]))}},Zt=ne(Xt,[["__scopeId","data-v-4d528a4c"]]),es={class:"space-y-4"},ts={class:"flex items-center mt-4"},ss={__name:"CreateForm",props:{show:{type:Boolean,default:!1},apiEndpoint:{type:String,required:!0}},emits:["close","resourceCreated"],setup(r,{emit:x}){const c=r,b=x,a=me({title:"",description:"",url:"",type:"website",thumbnail_url:"",visible_to_client:!0,tags:[]}),m=N(()=>[{value:"website",label:"Website"},{value:"youtube",label:"YouTube Video"},{value:"document",label:"Document"},{value:"image",label:"Image"},{value:"other",label:"Other"}]),u=h=>h,_=h=>{b("resourceCreated",h),C()},C=()=>{a.title="",a.description="",a.url="",a.type="website",a.thumbnail_url="",a.visible_to_client=!0,a.tags=[],b("close")};return(h,g)=>(o(),I(fe,{show:c.show,title:"Add New Shareable Resource",apiEndpoint:c.apiEndpoint,httpMethod:"post",formData:a,submitButtonText:"Create Resource",successMessage:"Shareable resource created successfully!",formatDataForApi:u,onSubmitted:_,onClose:C},{default:w(({errors:$})=>[e("div",es,[e("div",null,[d(U,{for:"title",value:"Title",class:"mb-1"}),d(ee,{id:"title",type:"text",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:a.title,"onUpdate:modelValue":g[0]||(g[0]=V=>a.title=V),required:""},null,8,["modelValue"]),d(R,{message:$.title?$.title[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[d(U,{for:"url",value:"Resource URL",class:"mb-1"}),d(ee,{id:"url",type:"url",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:a.url,"onUpdate:modelValue":g[1]||(g[1]=V=>a.url=V),required:""},null,8,["modelValue"]),d(R,{message:$.url?$.url[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[d(U,{for:"type",value:"Resource Type",class:"mb-1"}),d(se,{id:"type",modelValue:a.type,"onUpdate:modelValue":g[2]||(g[2]=V=>a.type=V),options:m.value,valueKey:"value",labelKey:"label",placeholder:"Select Resource Type",required:"",class:"mt-1 block w-full"},null,8,["modelValue","options"]),d(R,{message:$.type?$.type[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[d(U,{for:"thumbnail_url",value:"Thumbnail URL (Optional)",class:"mb-1"}),d(ee,{id:"thumbnail_url",type:"url",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:a.thumbnail_url,"onUpdate:modelValue":g[3]||(g[3]=V=>a.thumbnail_url=V)},null,8,["modelValue"]),d(R,{message:$.thumbnail_url?$.thumbnail_url[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[d(U,{for:"description",value:"Description (Optional)",class:"mb-1"}),q(e("textarea",{id:"description",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-lg shadow-sm mt-1 block w-full","onUpdate:modelValue":g[4]||(g[4]=V=>a.description=V),rows:"3"},null,512),[[Z,a.description]]),d(R,{message:$.description?$.description[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[d(Zt,{modelValue:a.tags,"onUpdate:modelValue":g[5]||(g[5]=V=>a.tags=V),label:"Associated Tags",placeholder:"Search or add tags",error:$.tags?$.tags[0]:""},null,8,["modelValue","error"])]),e("div",ts,[d(Ae,{id:"visible_to_client",checked:a.visible_to_client,"onUpdate:checked":g[6]||(g[6]=V=>a.visible_to_client=V)},null,8,["checked"]),d(U,{for:"visible_to_client",value:"Visible to Client",class:"ml-2"}),d(R,{message:$.visible_to_client?$.visible_to_client[0]:"",class:"mt-2"},null,8,["message"])])])]),_:1},8,["show","apiEndpoint","formData"]))}},as=ne(ss,[["__scopeId","data-v-3e3a6a9f"]]),ls={class:"flex items-center p-4 h-16 border-b border-gray-700"},os={key:0,class:"text-xl font-semibold flex-1 truncate"},ns=["title"],is={key:0,class:"p-4 border-b border-gray-700"},rs={class:"relative"},ds={key:1,class:"flex-1 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-500 scrollbar-track-gray-700 p-4"},us={key:0,class:"mb-4"},cs={class:"ml-2 mt-2 space-y-1"},ms=["onClick"],vs={class:"text-sm font-medium text-gray-300 truncate"},fs={class:"ml-4 mt-1 space-y-1"},ps={class:"truncate"},gs={key:1,class:"mb-4"},ys={class:"ml-2 mt-2 space-y-1"},hs=["onClick"],bs={class:"text-sm font-medium text-gray-300 truncate"},ws={class:"ml-4 mt-1 space-y-1"},ks={class:"truncate"},xs={key:2,class:"mb-4"},_s={class:"ml-2 mt-2 space-y-1"},$s={class:"truncate"},Ss={key:3,class:"mb-4"},Cs={class:"ml-2 mt-2 space-y-1"},As={class:"truncate"},js={key:4,class:"text-gray-400 text-sm text-center py-4"},Ts={key:5,class:"text-gray-400 text-sm text-center py-4"},Vs={key:2,class:"flex flex-col items-center pt-4 space-y-4"},Es={key:0,class:"text-gray-400 text-xs text-center px-2"},Is={__name:"LeftSidebar",props:{allProjects:{type:Array,default:()=>[]},activeProjectId:{type:Number,default:null}},emits:["project-selected"],setup(r,{emit:x}){const c=r,b=x,a=T(localStorage.getItem("leftSidebarCollapsed")!=="false"),m=T(""),u=T({}),_=N(()=>{const t=new Set;return c.allProjects.forEach(s=>{s.project_type&&t.add(s.project_type)}),Array.from(t).sort()}),C=N(()=>{const t=new Set;return c.allProjects.forEach(s=>{Array.isArray(s.tags)&&s.tags.forEach(i=>t.add(i))}),Array.from(t).sort()}),h=N(()=>{if(!m.value)return c.allProjects;const t=m.value.toLowerCase();return c.allProjects.filter(s=>{var i,p,n;return s.name.toLowerCase().includes(t)||((i=s.description)==null?void 0:i.toLowerCase().includes(t))||((p=s.project_type)==null?void 0:p.toLowerCase().includes(t))||Array.isArray(s.tags)&&s.tags.some(l=>l.toLowerCase().includes(t))||((n=s.status)==null?void 0:n.toLowerCase().includes(t))})}),g=N(()=>{const t={};h.value.forEach(s=>{s.project_type&&s.status==="active"&&(t[s.project_type]||(t[s.project_type]=[]),t[s.project_type].push(s))});for(const s in t)t[s].sort((i,p)=>i.name.localeCompare(p.name));return t}),$=N(()=>{const t={};h.value.forEach(s=>{Array.isArray(s.tags)&&s.tags.length>0&&s.tags.forEach(i=>{t[i]||(t[i]=[]),t[i].push(s)})});for(const s in t)t[s]=[...new Set(t[s])].sort((i,p)=>i.name.localeCompare(p.name));return t}),V=N(()=>h.value.filter(t=>t.status!=="active").sort((t,s)=>t.name.localeCompare(s.name))),z=N(()=>h.value.filter(t=>!t.project_type&&(!Array.isArray(t.tags)||t.tags.length===0)).sort((t,s)=>t.name.localeCompare(s.name)));G(()=>c.allProjects,()=>{_.value.forEach(t=>{const s=`type-${t}`;u.value[s]===void 0&&(u.value[s]=!0)}),C.value.forEach(t=>{const s=`tag-${t}`;u.value[s]===void 0&&(u.value[s]=!0)}),u.value["main-types"]===void 0&&(u.value["main-types"]=!1),u.value["main-tags"]===void 0&&(u.value["main-tags"]=!1),u.value["inactive-projects"]===void 0&&(u.value["inactive-projects"]=!1),u.value.uncategorized===void 0&&(u.value.uncategorized=!1)},{immediate:!0}),G(a,t=>{localStorage.setItem("leftSidebarCollapsed",t)});const E=()=>{a.value=!a.value},k=t=>{u.value[t]=!u.value[t]},y=t=>{b("project-selected",t)},v=()=>{m.value=""};return(t,s)=>(o(),f("div",{class:D({"w-64":!a.value,"w-16":a.value,"min-w-16":!0,"bg-gray-800 text-white flex flex-col transition-all duration-300 ease-in-out shrink-0 h-screen overflow-hidden":!0})},[e("div",ls,[a.value?S("",!0):(o(),f("h2",os,"Projects")),e("button",{onClick:E,class:"p-2 rounded-full hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500",title:a.value?"Expand Sidebar":"Collapse Sidebar"},[(o(),f("svg",{class:D(["w-6 h-6 text-gray-400 transform transition-transform duration-300",{"rotate-180":a.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},s[5]||(s[5]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"},null,-1)]),2))],8,ns)]),a.value?S("",!0):(o(),f("div",is,[e("div",rs,[q(e("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=i=>m.value=i),placeholder:"Search all projects...",class:"w-full p-2 rounded-md bg-gray-700 border border-gray-600 text-white placeholder-gray-400 focus:ring-indigo-500 focus:border-indigo-500 text-sm"},null,512),[[Z,m.value]]),m.value?(o(),f("button",{key:0,onClick:v,class:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-200",title:"Clear search"},s[6]||(s[6]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))):S("",!0)])])),a.value?(o(),f("div",Vs,[(o(!0),f(H,null,O(c.allProjects,i=>(o(),I(M(Q),{key:i.id,href:t.route("projects.show",i.id),onClick:p=>y(i.id),class:D({"w-10 h-10 rounded-full flex items-center justify-center text-xs font-bold transition-all duration-200":!0,"bg-indigo-600 text-white":i.id===r.activeProjectId,"bg-gray-700 text-gray-300 hover:bg-gray-600":i.id!==r.activeProjectId}),title:i.name},{default:w(()=>[j(B(i.name.charAt(0).toUpperCase()),1)]),_:2},1032,["href","onClick","class","title"]))),128)),r.allProjects.length===0?(o(),f("div",Es," No Projects ")):S("",!0)])):(o(),f("div",ds,[Object.keys(g.value).length>0?(o(),f("div",us,[e("div",{class:"flex items-center justify-between cursor-pointer py-2 hover:bg-gray-700 rounded-md px-2",onClick:s[1]||(s[1]=i=>k("main-types"))},[s[8]||(s[8]=e("h3",{class:"text-sm font-semibold text-gray-400"},"Active Projects by Type",-1)),(o(),f("svg",{class:D(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!u.value["main-types"]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},s[7]||(s[7]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))]),q(e("div",cs,[(o(!0),f(H,null,O(g.value,(i,p)=>(o(),f("div",{key:p},[e("div",{class:"flex items-center justify-between cursor-pointer py-1 hover:bg-gray-700 rounded-md px-2",onClick:n=>k(`type-${p}`)},[e("h4",vs,B(p),1),(o(),f("svg",{class:D(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!u.value[`type-${p}`]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},s[9]||(s[9]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))],8,ms),q(e("ul",fs,[(o(!0),f(H,null,O(i,n=>(o(),f("li",{key:n.id},[d(M(Q),{href:t.route("projects.show",n.id),onClick:l=>y(n.id),class:D({"block w-full text-left px-3 py-2 rounded-md transition-colors":!0,"bg-indigo-600 text-white":n.id===r.activeProjectId,"hover:bg-gray-700 text-gray-200":n.id!==r.activeProjectId,"font-bold":n.id===r.activeProjectId})},{default:w(()=>[e("span",ps,B(n.name),1)]),_:2},1032,["href","onClick","class"])]))),128))],512),[[J,!u.value[`type-${p}`]]])]))),128))],512),[[J,!u.value["main-types"]]])])):S("",!0),Object.keys($.value).length>0?(o(),f("div",gs,[e("div",{class:"flex items-center justify-between cursor-pointer py-2 hover:bg-gray-700 rounded-md px-2",onClick:s[2]||(s[2]=i=>k("main-tags"))},[s[11]||(s[11]=e("h3",{class:"text-sm font-semibold text-gray-400"},"Projects by Tag",-1)),(o(),f("svg",{class:D(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!u.value["main-tags"]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},s[10]||(s[10]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))]),q(e("div",ys,[(o(!0),f(H,null,O($.value,(i,p)=>(o(),f("div",{key:p},[e("div",{class:"flex items-center justify-between cursor-pointer py-1 hover:bg-gray-700 rounded-md px-2",onClick:n=>k(`tag-${p}`)},[e("h4",bs,B(p),1),(o(),f("svg",{class:D(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!u.value[`tag-${p}`]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},s[12]||(s[12]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))],8,hs),q(e("ul",ws,[(o(!0),f(H,null,O(i,n=>(o(),f("li",{key:n.id},[d(M(Q),{href:t.route("projects.show",n.id),onClick:l=>y(n.id),class:D({"block w-full text-left px-3 py-2 rounded-md transition-colors":!0,"bg-indigo-600 text-white":n.id===r.activeProjectId,"hover:bg-gray-700 text-gray-200":n.id!==r.activeProjectId,"font-bold":n.id===r.activeProjectId})},{default:w(()=>[e("span",ks,B(n.name),1)]),_:2},1032,["href","onClick","class"])]))),128))],512),[[J,!u.value[`tag-${p}`]]])]))),128))],512),[[J,!u.value["main-tags"]]])])):S("",!0),V.value.length>0?(o(),f("div",xs,[e("div",{class:"flex items-center justify-between cursor-pointer py-2 hover:bg-gray-700 rounded-md px-2",onClick:s[3]||(s[3]=i=>k("inactive-projects"))},[s[14]||(s[14]=e("h3",{class:"text-sm font-semibold text-gray-400"},"Inactive Projects",-1)),(o(),f("svg",{class:D(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!u.value["inactive-projects"]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},s[13]||(s[13]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))]),q(e("ul",_s,[(o(!0),f(H,null,O(V.value,i=>(o(),f("li",{key:i.id},[d(M(Q),{href:t.route("projects.show",i.id),onClick:p=>y(i.id),class:D({"block w-full text-left px-3 py-2 rounded-md transition-colors":!0,"bg-indigo-600 text-white":i.id===r.activeProjectId,"hover:bg-gray-700 text-gray-200":i.id!==r.activeProjectId,"font-bold":i.id===r.activeProjectId})},{default:w(()=>[e("span",$s,B(i.name)+" ("+B(i.status.replace("_"," "))+")",1)]),_:2},1032,["href","onClick","class"])]))),128))],512),[[J,!u.value["inactive-projects"]]])])):S("",!0),z.value.length>0?(o(),f("div",Ss,[e("div",{class:"flex items-center justify-between cursor-pointer py-2 hover:bg-gray-700 rounded-md px-2",onClick:s[4]||(s[4]=i=>k("uncategorized"))},[s[16]||(s[16]=e("h3",{class:"text-sm font-semibold text-gray-400"},"Uncategorized",-1)),(o(),f("svg",{class:D(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!u.value.uncategorized}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},s[15]||(s[15]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))]),q(e("ul",Cs,[(o(!0),f(H,null,O(z.value,i=>(o(),f("li",{key:i.id},[d(M(Q),{href:t.route("projects.show",i.id),onClick:p=>y(i.id),class:D({"block w-full text-left px-3 py-2 rounded-md transition-colors":!0,"bg-indigo-600 text-white":i.id===r.activeProjectId,"hover:bg-gray-700 text-gray-200":i.id!==r.activeProjectId,"font-bold":i.id===r.activeProjectId})},{default:w(()=>[e("span",As,B(i.name),1)]),_:2},1032,["href","onClick","class"])]))),128))],512),[[J,!u.value.uncategorized]])])):S("",!0),h.value.length===0?(o(),f("div",js," No projects found matching your search. ")):r.allProjects.length===0&&!m.value?(o(),f("div",Ts," No projects available. ")):S("",!0)]))],2))}},Ms=ne(Is,[["__scopeId","data-v-417d431f"]]),Ps={class:"flex h-screen overflow-hidden"},Ds={class:"flex-1 flex flex-col overflow-hidden"},Bs={class:"border-b border-gray-100 bg-white z-10 relative"},Ls={class:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8"},Us={class:"flex h-16 justify-between"},Ns={class:"flex"},zs={class:"flex shrink-0 items-center"},Rs={class:"hidden space-x-8 sm:-my-px sm:ms-10 sm:flex"},Ws={key:0,class:"hidden sm:flex sm:items-center"},qs={class:"hidden sm:ms-6 sm:flex sm:items-center"},Fs={class:"relative ms-3"},Hs={class:"inline-flex rounded-md"},Ks={type:"button",class:"inline-flex items-center rounded-md border border-transparent bg-white px-3 py-2 text-sm font-medium leading-4 text-gray-500 transition duration-150 ease-in-out hover:text-gray-700 focus:outline-none"},Os={class:"-me-2 flex items-center sm:hidden"},Ys={class:"h-6 w-6",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24"},Gs={class:"space-y-1 pb-3 pt-2"},Js={key:0,class:"mt-3 space-y-1"},Qs={class:"border-t border-gray-200 pb-1 pt-4"},Xs={class:"px-4"},Zs={class:"text-base font-medium text-gray-800"},ea={class:"text-sm font-medium text-gray-500"},ta={class:"text-sm font-medium text-gray-500 capitalize"},sa={class:"mt-3 space-y-1"},aa={key:0,class:"bg-white shadow"},la={class:"mx-auto max-w-7xl px-4 py-6 sm:px-6 lg:px-8"},oa={class:"flex-1 overflow-y-auto"},va={__name:"AuthenticatedLayout",setup(r){const x=T(!1),c=N(()=>ue().props.auth.user);N(()=>{var n;return((n=c.value.role_data)==null?void 0:n.name)||""});const{canDo:b}=$e(),a=b("manage_projects"),m=b("compose_emails"),u=b("approve_emails"),_=b("create_users"),C=b("manage_roles"),h=b("manage_task_types"),g=b("create_clients"),$=T(!1),V=T(!1),z=T([]),E=T(!0),k=N(()=>ue().props.id||null),y=async()=>{const n=localStorage.getItem("authToken");if(n){window.axios.defaults.headers.common.Authorization=`Bearer ${n}`;try{await window.axios.get("/api/user")}catch(l){l.response&&l.response.status===401&&(console.log("Session expired, redirecting to login"),localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization,window.location.href="/login")}}else delete window.axios.defaults.headers.common.Authorization},v=()=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),delete window.axios.defaults.headers.common.Authorization},t=n=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),delete window.axios.defaults.headers.common.Authorization,window.location.href="/login"},s=async()=>{E.value=!0;try{const n=await window.axios.get("/api/projects-simplified");z.value=n.data}catch(n){console.error("Error fetching all projects for sidebar:",n),z.value=[]}finally{E.value=!1}},i=n=>{Ce.visit(route("projects.show",n))},p=T(null);return le(()=>{y(),p.value&&je(p.value),s()}),(n,l)=>{var P;return o(),f("div",Ps,[d(Se,{ref_key:"notificationContainerRef",ref:p},null,512),d(dt),d(Ms,{"all-projects":z.value,"active-project-id":k.value,onProjectSelected:i},null,8,["all-projects","active-project-id"]),e("div",Ds,[e("nav",Bs,[e("div",Ls,[e("div",Us,[e("div",Ns,[e("div",zs,[d(M(Q),{href:n.route("dashboard")},{default:w(()=>[d(be,{class:"block h-16 w-auto fill-current text-gray-800"})]),_:1},8,["href"])]),e("div",Rs,[d(Ie,{href:n.route("dashboard"),active:n.route().current("dashboard")},{default:w(()=>l[8]||(l[8]=[j(" Dashboard ",-1)])),_:1,__:[8]},8,["href","active"]),M(C)?(o(),f("div",Ws,[d(pe,{align:"right",width:"48"},{trigger:w(()=>l[9]||(l[9]=[e("span",{class:"inline-flex rounded-md"},[e("button",{type:"button",class:"inline-flex items-center rounded-md border border-transparent bg-white px-3 py-2 text-sm font-medium leading-4 text-gray-500 transition duration-150 ease-in-out hover:text-gray-700 focus:outline-none"},[j(" Admin "),e("svg",{class:"ms-2 -me-0.5 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])])],-1)])),content:w(()=>[M(a)?(o(),I(K,{key:0,href:n.route("projects.index"),active:n.route().current("projects.index")},{default:w(()=>l[10]||(l[10]=[j(" Projects ",-1)])),_:1,__:[10]},8,["href","active"])):S("",!0),M(u)?(o(),I(K,{key:1,href:n.route("emails.pending"),active:n.route().current("emails.pending")},{default:w(()=>l[11]||(l[11]=[j(" Approve Emails ",-1)])),_:1,__:[11]},8,["href","active"])):S("",!0),M(m)?(o(),I(K,{key:2,href:n.route("emails.rejected"),active:n.route().current("emails.rejected")},{default:w(()=>l[12]||(l[12]=[j(" Rejected Emails ",-1)])),_:1,__:[12]},8,["href","active"])):S("",!0),M(_)?(o(),I(K,{key:3,href:n.route("availability.index"),active:n.route().current("availability.index")},{default:w(()=>l[13]||(l[13]=[j(" Weekly Availability ",-1)])),_:1,__:[13]},8,["href","active"])):S("",!0),M(g)?(o(),I(K,{key:4,href:n.route("clients.index"),active:n.route().current("clients.index")},{default:w(()=>l[14]||(l[14]=[j(" Clients ",-1)])),_:1,__:[14]},8,["href","active"])):S("",!0),M(_)?(o(),I(K,{key:5,href:n.route("users.index"),active:n.route().current("users.index")},{default:w(()=>l[15]||(l[15]=[j(" Users ",-1)])),_:1,__:[15]},8,["href","active"])):S("",!0),M(h)?(o(),I(K,{key:6,href:n.route("task-types.index"),active:n.route().current("task-types.index")},{default:w(()=>l[16]||(l[16]=[j(" Task Types ",-1)])),_:1,__:[16]},8,["href","active"])):S("",!0),M(b)("manage_bonus_configuration")?(o(),I(K,{key:7,href:n.route("bonus-configuration.index"),active:n.route().current("bonus-configuration.index")},{default:w(()=>l[17]||(l[17]=[j(" Bonus Configuration ",-1)])),_:1,__:[17]},8,["href","active"])):S("",!0),M(b)("manage_roles")?(o(),I(K,{key:8,href:n.route("admin.roles.index")},{default:w(()=>l[18]||(l[18]=[j(" Manage Roles ",-1)])),_:1,__:[18]},8,["href"])):S("",!0),M(b)("manage_permissions")?(o(),I(K,{key:9,href:n.route("admin.permissions.index")},{default:w(()=>l[19]||(l[19]=[j(" Manage Permissions ",-1)])),_:1,__:[19]},8,["href"])):S("",!0)]),_:1})])):S("",!0)])]),e("div",qs,[d(oe,{type:"button",onClick:l[0]||(l[0]=A=>$.value=!0),class:"mr-4 px-4 py-2 text-sm"},{default:w(()=>l[20]||(l[20]=[j(" Add Task ",-1)])),_:1,__:[20]}),d(oe,{type:"button",onClick:l[1]||(l[1]=A=>V.value=!0),class:"mr-4 px-4 py-2 text-sm"},{default:w(()=>l[21]||(l[21]=[j(" Add Resource ",-1)])),_:1,__:[21]}),e("div",Fs,[d(pe,{align:"right",width:"48"},{trigger:w(()=>{var A;return[e("span",Hs,[e("button",Ks,[j(B(c.value.name)+" ("+B((A=c.value.role_data)==null?void 0:A.name)+") ",1),l[22]||(l[22]=e("svg",{class:"ms-2 -me-0.5 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1))])])]}),content:w(()=>[d(K,{href:n.route("profile.edit")},{default:w(()=>l[23]||(l[23]=[j(" Profile ",-1)])),_:1,__:[23]},8,["href"]),d(K,{href:n.route("logout"),method:"post",as:"button",onSuccess:v,onError:t},{default:w(()=>l[24]||(l[24]=[j(" Log Out ",-1)])),_:1,__:[24]},8,["href"])]),_:1})])]),e("div",Os,[e("button",{onClick:l[2]||(l[2]=A=>x.value=!x.value),class:"inline-flex items-center justify-center rounded-md p-2 text-gray-400 transition duration-150 ease-in-out hover:bg-gray-100 hover:text-gray-500 focus:bg-gray-100 focus:text-gray-500 focus:outline-none"},[(o(),f("svg",Ys,[e("path",{class:D({hidden:x.value,"inline-flex":!x.value}),"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},null,2),e("path",{class:D({hidden:!x.value,"inline-flex":x.value}),"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,2)]))])])])]),e("div",{class:D([{block:x.value,hidden:!x.value},"sm:hidden"])},[e("div",Gs,[M(C)?(o(),f("div",Js,[l[37]||(l[37]=e("div",{class:"px-4 font-medium text-base text-gray-800"},"Admin",-1)),d(F,{href:n.route("dashboard"),active:n.route().current("dashboard")},{default:w(()=>l[25]||(l[25]=[j(" Dashboard ",-1)])),_:1,__:[25]},8,["href","active"]),M(g)?(o(),I(F,{key:0,href:n.route("clients.index"),active:n.route().current("clients.index")},{default:w(()=>l[26]||(l[26]=[j(" Clients ",-1)])),_:1,__:[26]},8,["href","active"])):S("",!0),M(a)?(o(),I(F,{key:1,href:n.route("projects.index"),active:n.route().current("projects.index")},{default:w(()=>l[27]||(l[27]=[j(" Projects ",-1)])),_:1,__:[27]},8,["href","active"])):S("",!0),M(_)?(o(),I(F,{key:2,href:n.route("users.index"),active:n.route().current("users.index")},{default:w(()=>l[28]||(l[28]=[j(" Users ",-1)])),_:1,__:[28]},8,["href","active"])):S("",!0),M(m)?(o(),I(F,{key:3,href:n.route("emails.compose"),active:n.route().current("emails.compose")},{default:w(()=>l[29]||(l[29]=[j(" Compose Email ",-1)])),_:1,__:[29]},8,["href","active"])):S("",!0),M(u)?(o(),I(F,{key:4,href:n.route("emails.pending"),active:n.route().current("emails.pending")},{default:w(()=>l[30]||(l[30]=[j(" Approve Emails ",-1)])),_:1,__:[30]},8,["href","active"])):S("",!0),M(m)?(o(),I(F,{key:5,href:n.route("emails.rejected"),active:n.route().current("emails.rejected")},{default:w(()=>l[31]||(l[31]=[j(" Rejected Emails ",-1)])),_:1,__:[31]},8,["href","active"])):S("",!0),M(_)?(o(),I(F,{key:6,href:n.route("availability.index"),active:n.route().current("availability.index")},{default:w(()=>l[32]||(l[32]=[j(" Weekly Availability ",-1)])),_:1,__:[32]},8,["href","active"])):S("",!0),M(b)("manage_roles")?(o(),I(F,{key:7,href:n.route("admin.roles.index"),active:n.route().current("admin.roles.index")},{default:w(()=>l[33]||(l[33]=[j(" Manage Roles ",-1)])),_:1,__:[33]},8,["href","active"])):S("",!0),M(b)("manage_permissions")?(o(),I(F,{key:8,href:n.route("admin.permissions.index"),active:n.route().current("admin.permissions.index")},{default:w(()=>l[34]||(l[34]=[j(" Manage Permissions ",-1)])),_:1,__:[34]},8,["href","active"])):S("",!0),M(b)("manage_bonus_configuration")?(o(),I(F,{key:9,href:n.route("bonus-configuration.index"),active:n.route().current("bonus-configuration.index")},{default:w(()=>l[35]||(l[35]=[j(" Bonus Configuration ",-1)])),_:1,__:[35]},8,["href","active"])):S("",!0),M(h)?(o(),I(F,{key:10,href:n.route("task-types.index"),active:n.route().current("task-types.index")},{default:w(()=>l[36]||(l[36]=[j(" Task Types ",-1)])),_:1,__:[36]},8,["href","active"])):S("",!0)])):S("",!0)]),e("div",Qs,[e("div",Xs,[e("div",Zs,B(c.value.name),1),e("div",ea,B(c.value.email),1),e("div",ta,B((P=c.value.role_data)==null?void 0:P.name),1)]),e("div",sa,[d(F,{as:"button",onClick:l[3]||(l[3]=A=>$.value=!0)},{default:w(()=>l[38]||(l[38]=[j(" Add Task ",-1)])),_:1,__:[38]}),d(F,{as:"button",onClick:l[4]||(l[4]=A=>V.value=!0)},{default:w(()=>l[39]||(l[39]=[j(" Add Resource ",-1)])),_:1,__:[39]}),d(F,{href:n.route("profile.edit")},{default:w(()=>l[40]||(l[40]=[j(" Profile ",-1)])),_:1,__:[40]},8,["href"]),d(F,{href:n.route("logout"),method:"post",as:"button",onSuccess:v,onError:t},{default:w(()=>l[41]||(l[41]=[j(" Log Out ",-1)])),_:1,__:[41]},8,["href"])])])],2)]),n.$slots.header?(o(),f("header",aa,[e("div",la,[te(n.$slots,"header")])])):S("",!0),e("main",oa,[te(n.$slots,"default")]),d(qt,{show:$.value,onClose:l[5]||(l[5]=A=>$.value=!1),onSaved:l[6]||(l[6]=A=>$.value=!1)},null,8,["show"]),d(as,{"api-endpoint":"/api/shareable-resources",show:V.value,onClose:l[7]||(l[7]=A=>V.value=!1)},null,8,["show"])])])}}};export{fe as B,as as C,se as S,Zt as T,va as _,ot as a,Tt as b,qt as c,Ve as e,Te as s,ma as w};
