import{r as $,c as q,P as qe,f as we,Q as tt,a as i,i as x,o as a,F as ee,l as re,b as e,t as j,u as U,R as Tt,S as Xt,T as Mt,U as $t,j as H,p as oe,e as se,g as B,w as h,m as A,d,v as N,x as ne,E as We,V as Ct,n as Ie,y as Ye,s as St,C as je,z as nt,G as Qe,M as ge,L as de,W as Oe,k as ea,X as $e,Y as Gt,Z as ta,_ as kt,K as Ge,A as Te,$ as jt,a0 as ut,D as at,a1 as ke,a2 as Ce,a3 as aa,a4 as la,O as sa,a5 as Se,a6 as st,H as Pt,a7 as oa,a8 as ia,a9 as wt,aa as xt,I as ra}from"./app-uz7jLOH9.js";import{_ as me}from"./PrimaryButton-fJeQTYNh.js";import{_ as He}from"./Modal-9Ob81uBd.js";import{_ as R}from"./InputLabel-CffkobvL.js";import{_ as X}from"./InputError-pNzzakDy.js";import{_ as Xe}from"./SecondaryButton-BQBAJtGL.js";import{r as na}from"./index-DHd-PSRu.js";import{B as Ve}from"./BaseFormModal-BRpxlLDW.js";import{_ as be}from"./TextInput-9F6Q-VFu.js";import{S as fe}from"./SelectDropdown-tY2220Dt.js";import{d as ua}from"./debounce-C-hnF4Z3.js";import{_ as Ke}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{A as da}from"./ApplicationLogo-DDazZIBi.js";import{_ as et}from"./MultiSelectDropdown-Cr3Ix5tu.js";import{c as dt}from"./createLucideIcon-lO9WsaxY.js";import{P as ot}from"./plus-DLaMPQe8.js";import{D as ct}from"./DangerButton-C-AZkSAP.js";import{h as ca}from"./moment-BLMuvzoS.js";import{_ as ma,a as va}from"./NoticeboardModal-Bd3ZJsT7.js";const pa={key:0,class:"fixed bottom-4 right-4 z-50 flex flex-col items-end space-y-2"},fa={key:0,class:"notification-list w-full max-w-xs space-y-2"},ga={class:"flex-1 min-w-0"},ba={class:"flex items-start justify-between gap-2 mb-1"},ya={class:"flex-1 min-w-0"},ha={key:0,class:"text-base font-semibold text-gray-800 truncate"},ka={key:1,class:"text-xs text-gray-500"},wa={key:0,class:"text-xs text-gray-600 mb-2"},xa={class:"flex items-center justify-between mt-2"},_a={key:0,class:"text-xs text-gray-500 font-medium"},Aa=["onClick"],Ta={key:1,class:"flex justify-end w-full max-w-xs"},Ma={key:0},$a={key:1},Ee="notification_minimized_state",Ca=3,Sa={__name:"PushNotificationContainer",props:{sidebarIsOpen:{type:Boolean,default:!1}},setup(n){const g=$(!1),c=$(null),s=$(0),t=$(null),p=q(()=>qe.value.notifications.filter(l=>l.isNewPush).slice(0,Ca)),m=q(()=>{const l=Math.floor(s.value/60),r=s.value%60;return`${String(l).padStart(2,"0")}:${String(r).padStart(2,"0")}`}),y=l=>{if(!l)return null;const r=l.match(/\/task\/(\d+)/);return r?parseInt(r[1]):null},f=l=>{if(!l)return null;const r=l.match(/\/project\/(\d+)\//);return r?parseInt(r[1]):null},u=()=>{if(g.value=!g.value,clearTimeout(c.value),clearInterval(t.value),g.value){const l=Date.now()+3e5;localStorage.setItem(Ee,JSON.stringify({isMinimized:!0,expiryTime:l})),c.value=setTimeout(()=>{g.value=!1,clearInterval(t.value),localStorage.removeItem(Ee)},3e5),s.value=300,t.value=setInterval(()=>{s.value>0?s.value--:clearInterval(t.value)},1e3)}else localStorage.removeItem(Ee)},o=async l=>{Xt(l.id),await Mt(l.view_id);const r=l.task_id||y(l.url),v=l.project_id||f(l.url);r&&v?$t(r,v):(console.warn("Could not open task sidebar. Falling back to redirecting."),l.url&&(window.location.href=l.url))};return we(()=>{const l=localStorage.getItem(Ee);if(l)try{const{isMinimized:r,expiryTime:v}=JSON.parse(l),_=Date.now(),b=v-_;b>0?(g.value=r,s.value=Math.floor(b/1e3),c.value=setTimeout(()=>{g.value=!1,clearInterval(t.value),localStorage.removeItem(Ee)},b),t.value=setInterval(()=>{s.value>0?s.value--:clearInterval(t.value)},1e3)):localStorage.removeItem(Ee)}catch(r){console.error("Error restoring notification minimized state:",r),localStorage.removeItem(Ee)}}),tt(()=>{clearTimeout(c.value),clearInterval(t.value)}),(l,r)=>n.sidebarIsOpen?x("",!0):(a(),i("div",pa,[!g.value&&p.value.length>0?(a(),i("div",fa,[(a(!0),i(ee,null,re(p.value,v=>(a(),i("div",{key:v.id,class:"bg-white rounded-lg shadow-lg p-3 flex items-start space-x-3 border border-gray-200 transition-opacity duration-300 opacity-60 hover:opacity-100"},[e("div",ga,[e("div",ba,[e("div",ya,[v.title?(a(),i("h3",ha,j(v.title),1)):x("",!0),v.project_name?(a(),i("p",ka,j(v.project_name),1)):x("",!0)])]),v.message?(a(),i("p",wa,j(v.message),1)):x("",!0),e("div",xa,[v.due_date?(a(),i("div",_a," Due: "+j(U(Tt)(v.due_date)),1)):x("",!0),e("button",{onClick:_=>o(v),class:"px-2.5 py-1 bg-blue-600 text-white text-xs font-medium rounded-md hover:bg-blue-700 transition-colors duration-200 shadow"},j(v.button_label||"View"),9,Aa)])])]))),128))])):x("",!0),p.value.length>0?(a(),i("div",Ta,[e("button",{onClick:u,class:"bg-white/80 backdrop-blur-sm text-gray-600 hover:text-gray-900 text-xs font-bold py-1 px-3 rounded-full shadow-md transition-all duration-300"},[g.value?(a(),i("span",Ma,"Show ("+j(m.value)+")",1)):(a(),i("span",$a,"Minimize"))])])):x("",!0)]))}},Ga={class:"fixed top-4 right-4 z-[9999] flex flex-col items-end space-y-3"},ja={class:"p-4"},Pa={class:"text-sm font-medium text-white"},Ea={key:0,class:"mt-3 flex gap-2"},Ia=["onClick"],Va=["onClick"],Ba={__name:"StandardNotificationContainer",setup(n,{expose:g}){const c=$([]),s=(f,u="info",o=5e3)=>{let l;typeof f=="object"&&f!==null?l={...f}:l={message:f,type:u,duration:o};const r=l.id||crypto.randomUUID(),v={id:r,message:l.message||"",type:l.type||"info",duration:typeof l.duration=="number"?l.duration:5e3,sticky:!!l.sticky,confirm:l.confirm||null};return c.value.unshift(v),!v.sticky&&!v.confirm&&setTimeout(()=>{t(r)},v.duration),r},t=f=>{const u=c.value.findIndex(o=>o.id===f);u>-1&&c.value.splice(u,1)},p=f=>{const u=c.value.find(o=>o.id===f);if(u&&u.confirm&&typeof u.confirm.onConfirm=="function")try{u.confirm.onConfirm()}catch{}t(f)},m=f=>{const u=c.value.find(o=>o.id===f);if(u&&u.confirm&&typeof u.confirm.onCancel=="function")try{u.confirm.onCancel()}catch{}t(f)},y=f=>{switch(f){case"success":return"bg-green-500";case"error":return"bg-red-500";case"warning":return"bg-yellow-500";case"info":default:return"bg-blue-500"}};return g({addNotification:s}),(f,u)=>(a(),i("div",Ga,[(a(!0),i(ee,null,re(c.value,o=>(a(),i("div",{key:o.id,class:H(["w-full max-w-sm rounded-md shadow-lg pointer-events-auto overflow-hidden",y(o.type)])},[e("div",ja,[e("p",Pa,j(o.message),1),o.confirm?(a(),i("div",Ea,[e("button",{class:"px-3 py-1 text-sm font-semibold rounded bg-white/90 text-slate-800 hover:bg-white",onClick:l=>p(o.id)},j(o.confirm.confirmText||"Confirm"),9,Ia),e("button",{class:"px-3 py-1 text-sm font-semibold rounded bg-transparent border border-white/70 text-white hover:bg-white/10",onClick:l=>m(o.id)},j(o.confirm.cancelText||"Cancel"),9,Va)])):x("",!0)])],2))),128))]))}};var Ze={exports:{}},Da=Ze.exports,_t;function Na(){return _t||(_t=1,function(n,g){(function(s,t){n.exports=t(na())})(Da,c=>(()=>{var s={113:(G,E)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.default=(O,z)=>{const C=O.__vccOpts||O;for(const[Z,ie]of z)C[Z]=ie;return C}},594:G=>{G.exports=c}},t={};function p(G){var E=t[G];if(E!==void 0)return E.exports;var O=t[G]={exports:{}};return s[G](O,O.exports,p),O.exports}p.d=(G,E)=>{for(var O in E)p.o(E,O)&&!p.o(G,O)&&Object.defineProperty(G,O,{enumerable:!0,get:E[O]})},p.o=(G,E)=>Object.prototype.hasOwnProperty.call(G,E),p.r=G=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(G,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(G,"__esModule",{value:!0})};var m={};p.r(m),p.d(m,{ToastComponent:()=>I,ToastPlugin:()=>F,ToastPositions:()=>v,default:()=>W,useToast:()=>D});var y=p(594);const f=["innerHTML"];function u(G,E,O,z,C,Z){return(0,y.openBlock)(),(0,y.createBlock)(y.Transition,{"enter-active-class":G.transition.enter,"leave-active-class":G.transition.leave},{default:(0,y.withCtx)(()=>[(0,y.withDirectives)((0,y.createElementVNode)("div",{ref:"root",role:"alert",class:(0,y.normalizeClass)(["v-toast__item",[`v-toast__item--${G.type}`,`v-toast__item--${G.position}`]]),onMouseover:E[0]||(E[0]=ie=>G.toggleTimer(!0)),onMouseleave:E[1]||(E[1]=ie=>G.toggleTimer(!1)),onClick:E[2]||(E[2]=function(){return G.whenClicked&&G.whenClicked(...arguments)})},[E[3]||(E[3]=(0,y.createElementVNode)("div",{class:"v-toast__icon"},null,-1)),(0,y.createElementVNode)("p",{class:"v-toast__text",innerHTML:G.message},null,8,f)],34),[[y.vShow,G.isActive]])]),_:1},8,["enter-active-class","leave-active-class"])}function o(G){var E;typeof G.remove<"u"?G.remove():(E=G.parentNode)==null||E.removeChild(G)}function l(G,E,O){let z=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const C=(0,y.h)(G,E,z),Z=document.createElement("div");return Z.classList.add("v-toast--pending"),O.appendChild(Z),(0,y.render)(C,Z),C.component}class r{constructor(E,O){this.startedAt=Date.now(),this.callback=E,this.delay=O,this.timer=setTimeout(E,O)}pause(){this.stop(),this.delay-=Date.now()-this.startedAt}resume(){this.stop(),this.startedAt=Date.now(),this.timer=setTimeout(this.callback,this.delay)}stop(){clearTimeout(this.timer)}}const v=Object.freeze({TOP_RIGHT:"top-right",TOP:"top",TOP_LEFT:"top-left",BOTTOM_RIGHT:"bottom-right",BOTTOM:"bottom",BOTTOM_LEFT:"bottom-left"});function _(G){return{all:G=G||new Map,on:function(E,O){var z=G.get(E);z?z.push(O):G.set(E,[O])},off:function(E,O){var z=G.get(E);z&&(O?z.splice(z.indexOf(O)>>>0,1):G.set(E,[]))},emit:function(E,O){var z=G.get(E);z&&z.slice().map(function(C){C(O)}),(z=G.get("*"))&&z.slice().map(function(C){C(E,O)})}}}const V=_(),P=(0,y.defineComponent)({name:"Toast",props:{message:{type:String,required:!0},type:{type:String,default:"success"},position:{type:String,default:v.BOTTOM_RIGHT,validator(G){return Object.values(v).includes(G)}},duration:{type:Number,default:3e3},dismissible:{type:Boolean,default:!0},onDismiss:{type:Function,default:()=>{}},onClick:{type:Function,default:()=>{}},queue:Boolean,pauseOnHover:{type:Boolean,default:!0}},data(){return{isActive:!1,parentTop:null,parentBottom:null,isHovered:!1}},beforeMount(){this.setupContainer()},mounted(){this.showNotice(),V.on("toast-clear",this.dismiss)},methods:{setupContainer(){if(this.parentTop=document.querySelector(".v-toast.v-toast--top"),this.parentBottom=document.querySelector(".v-toast.v-toast--bottom"),this.parentTop&&this.parentBottom)return;this.parentTop||(this.parentTop=document.createElement("div"),this.parentTop.className="v-toast v-toast--top"),this.parentBottom||(this.parentBottom=document.createElement("div"),this.parentBottom.className="v-toast v-toast--bottom");const G=document.body;G.appendChild(this.parentTop),G.appendChild(this.parentBottom)},shouldQueue(){return this.queue?this.parentTop.childElementCount>0||this.parentBottom.childElementCount>0:!1},dismiss(){this.timer&&this.timer.stop(),clearTimeout(this.queueTimer),this.isActive=!1,setTimeout(()=>{this.onDismiss.apply(null,arguments);const G=this.$refs.root;(0,y.render)(null,G),o(G)},150)},showNotice(){if(this.shouldQueue()){this.queueTimer=setTimeout(this.showNotice,250);return}const G=this.$refs.root.parentElement;this.correctParent.insertAdjacentElement("afterbegin",this.$refs.root),o(G),this.isActive=!0,this.duration&&(this.timer=new r(this.dismiss,this.duration))},whenClicked(){this.dismissible&&(this.onClick.apply(null,arguments),this.dismiss())},toggleTimer(G){!this.pauseOnHover||!this.timer||(G?this.timer.pause():this.timer.resume())}},computed:{correctParent(){switch(this.position){case v.TOP:case v.TOP_RIGHT:case v.TOP_LEFT:return this.parentTop;case v.BOTTOM:case v.BOTTOM_RIGHT:case v.BOTTOM_LEFT:return this.parentBottom}},transition(){switch(this.position){case v.TOP:case v.TOP_RIGHT:case v.TOP_LEFT:return{enter:"v-toast--fade-in-down",leave:"v-toast--fade-out"};case v.BOTTOM:case v.BOTTOM_RIGHT:case v.BOTTOM_LEFT:return{enter:"v-toast--fade-in-up",leave:"v-toast--fade-out"}}}},beforeUnmount(){V.off("toast-clear",this.dismiss)}});var T=p(113);const I=(0,T.default)(P,[["render",u]]),D=function(){let G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{open(E){let O=null;typeof E=="string"&&(O=E);const C=Object.assign({},{message:O},G,E);return{dismiss:l(I,C,document.body).ctx.dismiss}},clear(){V.emit("toast-clear")},success(E){let O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.open(Object.assign({},{message:E,type:"success"},O))},error(E){let O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.open(Object.assign({},{message:E,type:"error"},O))},info(E){let O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.open(Object.assign({},{message:E,type:"info"},O))},warning(E){let O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.open(Object.assign({},{message:E,type:"warning"},O))},default(E){let O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.open(Object.assign({},{message:E,type:"default"},O))}}},F={install:function(G){let E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},O=D(E);G.config.globalProperties.$toast=O,G.provide("$toast",O)}},W=F;return m})())}(Ze)),Ze.exports}var Ua=Na();const za={class:"p-8"},La={class:"mt-2 text-sm text-gray-600"},Fa={key:0,class:"mt-6 p-4 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 rounded-lg"},Ra={class:"mt-4"},Oa={class:"mt-6 grid grid-cols-1 lg:grid-cols-3 gap-6"},qa={class:"lg:col-span-1 space-y-3"},Wa=["onClick"],Ha={class:"flex items-center justify-between"},Ka={class:"flex items-center"},Ja={class:"ml-2 text-sm text-gray-500"},Ya={key:0},Qa={key:1},Za={key:1,class:"text-xs text-gray-400"},Xa={key:0,class:"lg:col-span-2 p-6 bg-gray-50 rounded-xl shadow-inner"},el={class:"text-xl font-semibold text-gray-800 mb-4"},tl={class:"mb-4 text-sm text-right"},al=["disabled"],ll={class:"flex items-center justify-between mb-6 p-4 rounded-lg bg-white shadow-sm border border-gray-200"},sl={class:"relative inline-flex items-center cursor-pointer"},ol=["checked"],il={key:0},rl={class:"flex-1"},nl=["onUpdate:modelValue"],ul={class:"flex-1"},dl=["onUpdate:modelValue"],cl=["onClick"],ml={key:1},vl={key:1,class:"lg:col-span-2 p-6 bg-gray-50 rounded-xl shadow-inner flex items-center justify-center"},pl={class:"px-6 py-4 bg-gray-50 border-t flex justify-end gap-3"},fl={key:0,class:"flex items-center"},gl={key:1},bl={__name:"AvailabilityModal",props:{show:Boolean,userId:{type:Number,default:null}},emits:["close","availability-saved"],setup(n,{emit:g}){const c=()=>{const z=localStorage.getItem("authToken");z&&!oe.defaults.headers.common.Authorization&&(oe.defaults.headers.common.Authorization=`Bearer ${z}`)},s=n,t=g,p=Ua.useToast(),m=$({}),y=$({}),f=$(!1),u=$(null),o=$(""),l=$(!1),r=$([]),v=()=>{const z=[],C=new Date,Z=C.getDay(),ie=Z===0?1:8-Z,Y=new Date(C);Y.setDate(C.getDate()+ie);for(let te=0;te<7;te++){const J=new Date(Y);J.setDate(Y.getDate()+te);const ce=J.toISOString().split("T")[0];z.push({value:ce,label:J.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"}),day:J.toLocaleDateString("en-US",{weekday:"short"})})}return z},_=()=>{const z=[],C=new Date,Z=C.getDay(),ie=new Date(C);ie.setDate(C.getDate()-(Z===0?6:Z-1));for(let Y=0;Y<7;Y++){const te=new Date(ie);te.setDate(ie.getDate()+Y);const J=te.toISOString().split("T")[0];z.push({value:J,label:te.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"}),day:te.toLocaleDateString("en-US",{weekday:"short"})})}return z},b=()=>{l.value=!0,o.value="",r.value=_(),u.value=null,P()},V=()=>{l.value=!1,o.value="",r.value=v(),u.value=null,P()};we(()=>{c(),r.value=v(),P()});const P=async()=>{try{if(c(),r.value.length===0)return;const z=r.value[0].value,C=r.value[r.value.length-1].value,Z=await oe.get("/api/availabilities",{params:{start_date:z,end_date:C,user_id:s.userId}});if(Z.data&&Z.data.availabilities){const ie={};r.value.forEach(Y=>{ie[Y.value]={isSelected:!1,isAvailable:!0,reason:"",timeSlots:[{start_time:"",end_time:""}]}}),m.value=ie,Z.data.availabilities.forEach(Y=>{const te=Y.date.split("T")[0];m.value[te]&&(m.value[te].isAvailable=Y.is_available,Y.is_available?m.value[te].timeSlots=Y.time_slots&&Y.time_slots.length>0?[...Y.time_slots]:[{start_time:"",end_time:""}]:m.value[te].reason=Y.reason||"")})}}catch(z){console.error("Error fetching existing availabilities:",z)}};se(()=>s.show,async z=>{if(z){y.value={},o.value="";try{c();const{data:C}=await oe.get("/api/availability-prompt");!(C.all_current_weekdays_covered??!0)?(l.value=!0,r.value=_()):(l.value=!1,r.value=v())}catch{l.value=!1,r.value=v()}await P(),u.value=null}else u.value=null},{immediate:!0});const T=q(()=>m.value[u.value]||{isSelected:!1,isAvailable:!0,reason:"",timeSlots:[{start_time:"",end_time:""}]}),k=q(()=>Object.values(m.value).some(z=>z.isSelected)),I=q(()=>{const z=m.value[u.value];return z?z.isAvailable?z.timeSlots.some(C=>C.start_time&&C.end_time):z.reason.trim().split(/\s+/).filter(Boolean).length>=2:!1}),D=z=>{u.value=z},F=()=>{var C;const z=(C=m.value[u.value])==null?void 0:C.timeSlots;z&&(z.push({start_time:"",end_time:""}),m.value[u.value].isSelected=!0)},W=z=>{var Z;const C=(Z=m.value[u.value])==null?void 0:Z.timeSlots;C&&C.length>1&&(C.splice(z,1),m.value[u.value].isSelected=!0)},G=z=>{m.value[u.value]&&(m.value[u.value].isAvailable=z,m.value[u.value].isSelected=!0,z?m.value[u.value].reason="":m.value[u.value].timeSlots=[{start_time:"",end_time:""}])},E=()=>{const z=m.value[u.value];if(z){if(!I.value){z.isAvailable?y.value[u.value]={timeSlots:"Please fill in at least one time slot before applying to all days."}:y.value[u.value]={reason:"Reason must be at least 2 words to apply to all days."};return}delete y.value[u.value];for(const C of r.value){const Z=C.value;m.value[Z]=JSON.parse(JSON.stringify(z)),m.value[Z].isSelected=!0}p.success("Availability applied to all days!")}},O=async()=>{if(f.value=!0,y.value={},l.value&&!o.value.trim()){y.value.lateReason="Please provide a reason for this late submission.",f.value=!1;return}const z=[];let C=!1;for(const Z of r.value){const ie=Z.value,Y=m.value[ie];let te={};if(Y.isSelected){if(Y.isAvailable)if(Y.timeSlots.some(J=>!J.start_time||!J.end_time))te.timeSlots="Please fill in all time slots.",C=!0;else for(const J of Y.timeSlots){const ce=J.start_time.split(":").map(Number),ve=J.end_time.split(":").map(Number);if(ce[0]*60+ce[1]>=ve[0]*60+ve[1]){te.timeSlots="End time must be after start time.",C=!0;break}}else Y.reason.trim()||(te.reason="Please provide a reason for unavailability.",C=!0);Object.keys(te).length>0&&(y.value[ie]=te),Object.keys(te).length===0&&z.push({date:ie,is_available:Y.isAvailable,reason:Y.isAvailable?null:Y.reason,time_slots:Y.isAvailable?Y.timeSlots:null})}}if(z.length===0&&!C){y.value.general="Please select and set availability for at least one day.",f.value=!1;return}if(C){f.value=!1;return}try{c();const Z={availabilities:z,reason_for_late_submission:l.value?o.value:null};await oe.post("/api/availabilities/batch",Z),p.success("Availability saved successfully!"),t("availability-saved"),t("close")}catch(Z){console.error("Error saving availability:",Z),p.error("An error occurred while saving your availability.")}finally{f.value=!1}};return(z,C)=>(a(),B(He,{show:n.show,onClose:C[7]||(C[7]=Z=>z.$emit("close")),"max-width":"4xl",closeable:""},{default:h(()=>{var Z,ie,Y,te;return[e("div",za,[C[18]||(C[18]=e("h2",{class:"text-2xl font-bold text-gray-900"}," Set Your Weekly Availability ",-1)),e("p",La,[C[8]||(C[8]=A(" Select a day to quickly set your schedule for the upcoming week. ",-1)),l.value?(a(),i("span",{key:1,class:"text-indigo-600 hover:text-indigo-800 transition duration-150 ease-in-out cursor-pointer",onClick:V}," Go back to next week. ")):(a(),i("span",{key:0,class:"text-indigo-600 hover:text-indigo-800 transition duration-150 ease-in-out cursor-pointer",onClick:b}," Missed the deadline? Submit for this week. "))]),l.value?(a(),i("div",Fa,[C[9]||(C[9]=e("div",{class:"flex items-center"},[e("svg",{class:"h-5 w-5 text-yellow-500 mr-2",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.344a1.5 1.5 0 012.486 0l5.446 9.176A1.5 1.5 0 0114.246 15H5.754a1.5 1.5 0 01-1.238-2.48zM9 11a1 1 0 102 0V7a1 1 0 10-2 0v4zm1-3a1 1 0 100 2h.01a1 1 0 100-2H10z","clip-rule":"evenodd"})]),e("p",{class:"font-semibold"},"Late Submission for Current Week")],-1)),C[10]||(C[10]=e("p",{class:"mt-2 text-sm"}," Please provide a reason for submitting late. We acknowledge that availability submissions are due by Thursday evening. ",-1)),e("div",Ra,[d(R,{value:"Reason for late submission"}),N(e("textarea",{"onUpdate:modelValue":C[0]||(C[0]=J=>o.value=J),rows:"2",class:"mt-1 block w-full rounded-md border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 shadow-sm",placeholder:"e.g., I was out sick, I forgot, I had no access to the system"},null,512),[[ne,o.value]]),d(X,{message:y.value.lateReason,class:"mt-2"},null,8,["message"])])])):x("",!0),e("div",Oa,[e("div",qa,[(a(!0),i(ee,null,re(r.value,J=>{var ce,ve,ye,Be,Me;return a(),i("div",{key:J.value,class:H(["p-4 rounded-xl border cursor-pointer transition-all duration-200 ease-in-out",{"bg-indigo-50 border-indigo-500 shadow-lg":u.value===J.value,"bg-white border-gray-200 hover:border-indigo-400 hover:shadow-md":u.value!==J.value,"border-red-400 bg-red-50":y.value[J.value],"opacity-70":J.isPast}]),onClick:xe=>D(J.value)},[e("div",Ha,[e("div",Ka,[e("div",{class:H(["text-lg font-bold",{"text-indigo-600":u.value===J.value,"text-gray-800":u.value!==J.value}])},j(J.day),3),e("div",Ja,j(J.label.split(", ")[1]),1)]),(ve=(ce=m.value[J.value])==null?void 0:ce.timeSlots[0])!=null&&ve.start_time&&((Be=(ye=m.value[J.value])==null?void 0:ye.timeSlots[0])!=null&&Be.end_time)||(Me=m.value[J.value])!=null&&Me.reason?(a(),i("span",{key:0,class:H(["inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium",{"bg-emerald-100 text-emerald-800":m.value[J.value].isAvailable,"bg-amber-100 text-amber-800":!m.value[J.value].isAvailable}])},[m.value[J.value].isAvailable?(a(),i("span",Ya,"Available")):(a(),i("span",Qa,"Unavailable"))],2)):(a(),i("span",Za," Not Set "))])],10,Wa)}),128))]),u.value?(a(),i("div",Xa,[e("h3",el," Availability for "+j((Z=r.value.find(J=>J.value===u.value))==null?void 0:Z.label),1),e("div",tl,[e("button",{type:"button",onClick:E,disabled:!I.value,class:H([{"opacity-50 cursor-not-allowed":!I.value},"text-indigo-600 hover:text-indigo-800 transition duration-150 ease-in-out"])},C[11]||(C[11]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 inline mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{d:"M7 9a2 2 0 012-2h6a2 2 0 012 2v6a2 2 0 01-2 2H9a2 2 0 01-2-2V9z"}),e("path",{d:"M5 3a2 2 0 00-2 2v6a2 2 0 002 2V5h8a2 2 0 00-2-2H5z"})],-1),A(" Apply to all days ",-1)]),10,al)]),e("div",ll,[C[13]||(C[13]=e("span",{class:"text-sm font-medium text-gray-700"},"I am available on this day",-1)),e("label",sl,[e("input",{type:"checkbox",checked:T.value.isAvailable,onChange:C[1]||(C[1]=J=>G(J.target.checked)),class:"sr-only peer"},null,40,ol),C[12]||(C[12]=e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"},null,-1))])]),d(X,{message:(ie=y.value[u.value])==null?void 0:ie.general,class:"mt-2"},null,8,["message"]),T.value.isAvailable?(a(),i("div",il,[d(R,{value:"Available Time Slots",class:"text-gray-800 mb-2"}),d(X,{message:(Y=y.value[u.value])==null?void 0:Y.timeSlots,class:"mt-2 mb-4"},null,8,["message"]),(a(!0),i(ee,null,re(T.value.timeSlots,(J,ce)=>(a(),i("div",{key:ce,class:"flex items-center space-x-2 mb-4"},[e("div",rl,[N(e("input",{type:"time","onUpdate:modelValue":ve=>m.value[u.value].timeSlots[ce].start_time=ve,onChange:C[2]||(C[2]=ve=>m.value[u.value].isSelected=!0),class:"block w-full rounded-md border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 shadow-sm"},null,40,nl),[[ne,m.value[u.value].timeSlots[ce].start_time]])]),C[15]||(C[15]=e("span",{class:"text-gray-500"},"-",-1)),e("div",ul,[N(e("input",{type:"time","onUpdate:modelValue":ve=>m.value[u.value].timeSlots[ce].end_time=ve,onChange:C[3]||(C[3]=ve=>m.value[u.value].isSelected=!0),class:"block w-full rounded-md border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 shadow-sm"},null,40,dl),[[ne,m.value[u.value].timeSlots[ce].end_time]])]),m.value[u.value].timeSlots.length>1?(a(),i("button",{key:0,type:"button",onClick:ve=>W(ce),class:"p-2 text-red-600 hover:text-red-800 transition duration-150 ease-in-out"},C[14]||(C[14]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm6 0a1 1 0 012 0v6a1 1 0 11-2 0V8z","clip-rule":"evenodd"})],-1)]),8,cl)):x("",!0)]))),128)),e("button",{type:"button",onClick:F,class:"mt-2 w-full flex items-center justify-center px-4 py-2 border border-dashed border-indigo-300 rounded-lg text-indigo-600 hover:bg-indigo-50 transition duration-150 ease-in-out"},C[16]||(C[16]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z","clip-rule":"evenodd"})],-1),A(" Add Another Time Slot ",-1)]))])):(a(),i("div",ml,[d(R,{value:"Reason for Not Available",class:"text-gray-800 mb-2"}),N(e("textarea",{"onUpdate:modelValue":C[4]||(C[4]=J=>m.value[u.value].reason=J),onInput:C[5]||(C[5]=J=>m.value[u.value].isSelected=!0),rows:"3",class:"block w-full rounded-md border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 shadow-sm",placeholder:"e.g., Out of office, Holiday, Meeting all day"},null,544),[[ne,m.value[u.value].reason]]),d(X,{message:(te=y.value[u.value])==null?void 0:te.reason,class:"mt-2"},null,8,["message"])]))])):(a(),i("div",vl,C[17]||(C[17]=[e("p",{class:"text-gray-500 text-lg font-medium"}," Please select a day from the left to set your availability. ",-1)])))])]),e("div",pl,[d(Xe,{onClick:C[6]||(C[6]=J=>z.$emit("close"))},{default:h(()=>C[19]||(C[19]=[A(" Cancel ",-1)])),_:1,__:[19]}),d(me,{onClick:O,disabled:f.value||!k.value,class:H({"opacity-50 cursor-not-allowed":f.value||!k.value})},{default:h(()=>[f.value?(a(),i("span",fl,C[20]||(C[20]=[e("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),A(" Saving... ",-1)]))):(a(),i("span",gl,"Save Availability"))]),_:1},8,["disabled","class"])])]}),_:1},8,["show"]))}},yl={key:0,class:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center"},hl={class:"bg-white rounded-lg shadow-xl p-6 max-w-lg w-full mx-4"},kl={class:"mb-4 text-gray-700"},wl={class:"flex justify-center"},xl={__name:"AvailabilityBlocker",setup(n){const g=$(!1),c=$(!0),s=$(!1),t=$(!0),p=$(!0),m=$(!1),y=q(()=>{var b;return((b=We().props.auth.user)==null?void 0:b.id)||null}),f=()=>{const b=localStorage.getItem("authToken");b&&!oe.defaults.headers.common.Authorization&&(oe.defaults.headers.common.Authorization=`Bearer ${b}`)},u=async()=>{c.value=!0;try{f();const{data:b}=await oe.get("/api/availability-prompt");g.value=!!b.should_block_user,t.value=!!b.all_current_weekdays_covered,p.value=!!(b.all_next_weekdays_covered??b.all_weekdays_covered),m.value=!!b.is_friday_onwards,localStorage.setItem("shouldBlockUser",String(g.value)),localStorage.setItem("allCurrentWeekdaysCovered",String(t.value)),localStorage.setItem("allNextWeekdaysCovered",String(p.value)),localStorage.setItem("allWeekdaysCovered",String(p.value));const V=new CustomEvent("availability-status-updated",{detail:{shouldBlockUser:g.value,allCurrentWeekdaysCovered:t.value,allNextWeekdaysCovered:p.value}});window.dispatchEvent(V)}catch(b){console.error("Error checking if user should be blocked:",b),g.value=!1}finally{c.value=!1}},o=()=>{s.value=!0},l=()=>{u()},r=b=>{g.value=!!b.detail.shouldBlockUser,"allCurrentWeekdaysCovered"in b.detail&&(t.value=!!b.detail.allCurrentWeekdaysCovered),"allNextWeekdaysCovered"in b.detail&&(p.value=!!b.detail.allNextWeekdaysCovered)},v=()=>{document.visibilityState==="visible"&&Ie(()=>{u()})},_=b=>{["shouldBlockUser","allWeekdaysCovered","allCurrentWeekdaysCovered","allNextWeekdaysCovered"].includes(b.key)&&Ie(()=>{u()})};return we(()=>{u(),window.addEventListener("availability-status-updated",r),document.addEventListener("visibilitychange",v),window.addEventListener("storage",_)}),tt(()=>{window.removeEventListener("availability-status-updated",r),document.removeEventListener("visibilitychange",v),window.removeEventListener("storage",_)}),(b,V)=>g.value&&!c.value?(a(),i("div",yl,[e("div",hl,[V[2]||(V[2]=Ct('<div class="flex items-center mb-4"><div class="flex-shrink-0 mr-3"><svg class="h-8 w-8 text-red-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg></div><h2 class="text-xl font-bold text-gray-900">Action Required</h2></div>',1)),e("p",kl,[!t.value&&!p.value?(a(),i(ee,{key:0},[A(" You need to submit your availability for the current week (up to today) and for all weekdays of next week. ")],64)):t.value?(a(),i(ee,{key:2},[A(" You must submit your availability for all weekdays of next week before you can continue using the application. ")],64)):(a(),i(ee,{key:1},[A(" You need to submit your availability for the current week (up to today). ")],64))]),V[3]||(V[3]=e("p",{class:"mb-6 text-gray-600"}," This information is required for planning meetings and work schedules. ",-1)),e("div",wl,[d(me,{onClick:o,class:"bg-red-600 hover:bg-red-700"},{default:h(()=>V[1]||(V[1]=[A(" Submit Availability Now ",-1)])),_:1,__:[1]})]),d(bl,{show:s.value,userId:y.value,onClose:V[0]||(V[0]=P=>s.value=!1),onAvailabilitySaved:l},null,8,["show","userId"])])])):x("",!0)}},_l={class:"relative"},Al={class:"flex flex-wrap items-center gap-2 mb-2 p-2 border border-gray-300 rounded-lg bg-white min-h-[44px] focus-within:border-indigo-500 focus-within:ring-1 focus-within:ring-indigo-500 transition-all duration-150"},Tl=["onClick"],Ml={key:0,class:"absolute z-20 w-full bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto mt-1 transform-gpu"},$l=["onClick"],Cl={key:1,class:"px-4 py-2 text-sm text-gray-500"},Sl={key:2,class:"px-4 py-2 text-sm text-gray-500"},Gl={__name:"TagInput",props:{modelValue:{type:Array,default:()=>[]},label:{type:String,default:"Tags"},placeholder:{type:String,default:"Add tags..."},error:{type:String,default:""},initialTags:{type:Array,default:()=>[]},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(n,{emit:g}){const c=n,s=g,t=$(""),p=$([]),m=$([]),y=$(!1),f=$(null);function u(){s("update:modelValue",m.value.map(P=>P.id))}se(()=>c.initialTags,P=>{if(m.value=[],P&&P.length>0){const D=[],F=new Set;P.forEach(W=>{F.has(W.id)||(D.push(W),F.add(W.id))}),m.value.push(...D)}const T=P.map(D=>D.id),k=Array.isArray(c.modelValue)?c.modelValue:[];(T.length!==k.length||T.some(D=>!k.includes(D))||k.some(D=>!T.includes(D)))&&u()},{immediate:!0});const o=ua(async P=>{if(P.length<2){p.value=[],y.value=!1;return}try{const T=await oe.get(`/api/tags/search?query=${P}`);p.value=T.data,y.value=!0}catch(T){console.error("Error fetching tags:",T),p.value=[],y.value=!1}},300);se(t,P=>{c.disabled||o(P)});const l=P=>{m.value.some(T=>T.id===P.id)||(m.value.push(P),t.value="",p.value=[],y.value=!1,u()),Ie(()=>f.value.focus())},r=()=>{if(c.disabled)return;const P=t.value.trim();if(!P)return;const T=p.value.find(I=>I.name.toLowerCase()===P.toLowerCase()),k=m.value.some(I=>I.name.toLowerCase()===P.toLowerCase());if(T)l(T);else if(k)t.value="",p.value=[],y.value=!1;else{const I={id:`new_${P.replace(/\s+/g,"-").toLowerCase()}_${Date.now()}`,name:P};m.value.push(I),t.value="",p.value=[],y.value=!1,u()}Ie(()=>f.value.focus())},v=P=>{c.disabled||(m.value=m.value.filter(T=>T.id!==P.id),u(),Ie(()=>f.value.focus()))},_=()=>{c.disabled||t.value===""&&m.value.length>0&&v(m.value[m.value.length-1])},b=q(()=>p.value.filter(P=>!m.value.some(T=>T.id===P.id))),V=P=>{f.value&&!f.value.$el.contains(P.target)&&(y.value=!1,t.value="")};return we(()=>{document.addEventListener("click",V)}),tt(()=>{document.removeEventListener("click",V)}),(P,T)=>(a(),i("div",_l,[d(R,{value:n.label,class:"mb-1"},null,8,["value"]),e("div",Al,[(a(!0),i(ee,null,re(m.value,k=>(a(),i("span",{key:k.id,class:"inline-flex items-center px-3 py-1 text-sm font-medium bg-indigo-100 text-indigo-800 rounded-full shadow-sm"},[A(j(k.name)+" ",1),n.disabled?x("",!0):(a(),i("button",{key:0,type:"button",onClick:I=>v(k),class:"ml-2 -mr-1 text-indigo-500 hover:text-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 rounded-full p-0.5"},T[3]||(T[3]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,Tl))]))),128)),d(be,{ref_key:"inputRef",ref:f,type:"text",placeholder:m.value.length===0?n.placeholder:"",modelValue:t.value,"onUpdate:modelValue":T[0]||(T[0]=k=>t.value=k),onFocus:T[1]||(T[1]=k=>y.value=!0),onKeydown:[Ye(St(r,["prevent"]),["enter"]),T[2]||(T[2]=Ye(k=>y.value=!1,["tab"])),Ye(_,["delete"])],class:"flex-grow min-w-[100px] border-none focus:ring-0 shadow-none p-0 bg-transparent text-gray-900",disabled:n.disabled},null,8,["placeholder","modelValue","onKeydown","disabled"])]),y.value&&(b.value.length>0||t.value.length>=2||b.value.length===0&&t.value.length<2)&&!n.disabled?(a(),i("div",Ml,[(a(!0),i(ee,null,re(b.value,k=>(a(),i("div",{key:k.id,onClick:I=>l(k),class:"px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 cursor-pointer transition-colors duration-100"},j(k.name),9,$l))),128)),!p.value.some(k=>k.name.toLowerCase()===t.value.toLowerCase())&&t.value.length>=2?(a(),i("div",{key:0,onClick:r,class:"px-4 py-2 text-sm text-indigo-700 bg-indigo-50 hover:bg-indigo-100 cursor-pointer border-t border-indigo-200 font-semibold transition-colors duration-100"},' Add new tag: "'+j(t.value)+'" ',1)):x("",!0),b.value.length===0&&t.value.length<2?(a(),i("div",Cl," Type at least 2 characters to search for tags. ")):x("",!0),b.value.length===0&&t.value.length>=2&&!p.value.some(k=>k.name.toLowerCase()===t.value.toLowerCase())?(a(),i("div",Sl,[T[4]||(T[4]=A(" No matching tags found. Press ",-1)),T[5]||(T[5]=e("span",{class:"font-semibold text-indigo-600"},"Enter",-1)),A(' to add "'+j(t.value)+'" as a new tag. ',1)])):x("",!0)])):x("",!0),d(X,{message:n.error,class:"mt-2"},null,8,["message"])]))}},Et=Ke(Gl,[["__scopeId","data-v-4d528a4c"]]),jl={class:"space-y-4"},Pl="Add New Milestone",El="/api/milestones",Il="post",Vl="Create Milestone",Bl="Milestone created successfully!",Dl={__name:"MilestoneFormModal",props:{show:Boolean,projectId:Number},emits:["close","saved"],setup(n,{emit:g}){const c=n,s=g,t=je({name:"",description:"",completion_date:null,status:"Not Started",project_id:c.projectId}),p=je({completion_date:null}),m=["Not Started","In Progress","Completed","Overdue"];se(()=>c.show,o=>{o&&(Object.assign(t,{name:"",description:"",completion_date:null,status:"Not Started",project_id:c.projectId}),p.completion_date=null)},{immediate:!0});const y=()=>(p.completion_date=null,t.completion_date?!0:(p.completion_date=["Completion date is required."],!1)),f=o=>{s("saved",o),s("close")},u=()=>{s("close")};return(o,l)=>(a(),B(Ve,{show:n.show,title:Pl,"api-endpoint":El,"http-method":Il,"form-data":t,"submit-button-text":Vl,"success-message":Bl,"before-submit":y,onClose:u,onSubmitted:f},{default:h(({errors:r})=>[e("div",jl,[e("div",null,[d(R,{for:"milestone-name",value:"Milestone Name"}),d(be,{id:"milestone-name",modelValue:t.name,"onUpdate:modelValue":l[0]||(l[0]=v=>t.name=v),type:"text",class:"mt-1 block w-full",placeholder:"Enter milestone name",required:""},null,8,["modelValue"]),d(X,{message:r.name?r.name[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[d(R,{for:"milestone-description",value:"Description"}),N(e("textarea",{id:"milestone-description","onUpdate:modelValue":l[1]||(l[1]=v=>t.description=v),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",rows:"3",placeholder:"Enter milestone description"},null,512),[[ne,t.description]]),d(X,{message:r.description?r.description[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[d(R,{for:"milestone-completion-date",value:"Completion Date"}),d(be,{id:"milestone-completion-date",modelValue:t.completion_date,"onUpdate:modelValue":l[2]||(l[2]=v=>t.completion_date=v),type:"date",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),d(X,{message:r.completion_date?r.completion_date[0]:p.completion_date?p.completion_date[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[d(R,{for:"milestone-status",value:"Status"}),d(fe,{id:"milestone-status",modelValue:t.status,"onUpdate:modelValue":l[3]||(l[3]=v=>t.status=v),options:m.map(v=>({value:v,label:v})),"value-key":"value","label-key":"label",placeholder:"Select status",class:"mt-1"},null,8,["modelValue","options"]),d(X,{message:r.status?r.status[0]:"",class:"mt-2"},null,8,["message"])])])]),_:1},8,["show","form-data"]))}},Nl={class:"p-4 sm:p-6"},Ul={class:"flex items-center justify-between mb-4"},zl={class:"text-lg font-medium text-gray-900"},Ll={class:"space-y-6"},Fl={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Rl={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ol={key:0},ql=["min"],Wl={key:1},Hl=["min"],Kl={key:2,class:"md:col-span-2"},Jl={class:"mt-2 flex flex-wrap gap-2"},Yl=["value"],Ql={class:"ml-2 text-sm"},Zl={class:"flex gap-2"},Xl=["value"],es=["value"],ts={key:5,class:"md:col-span-2"},as={class:"p-3 rounded-md bg-gray-50 border border-gray-200 text-sm text-gray-800"},ls={class:"flex items-center justify-end gap-3"},ss={__name:"SchedulePickerModal",props:{show:{type:Boolean,default:!1},title:{type:String,default:"Schedule"},initial:{type:Object,default:()=>({})}},emits:["close","save"],setup(n,{emit:g}){function c(l=new Date){const r=T=>String(T).padStart(2,"0"),v=l.getFullYear(),_=r(l.getMonth()+1),b=r(l.getDate()),V=r(l.getHours()),P=r(l.getMinutes());return`${v}-${_}-${b}T${V}:${P}`}const s=n,t=g,p=$({name:"",description:"",start_at:c(new Date),end_at:"",mode:"once",time:new Date().toTimeString().slice(0,5),days_of_week:[],day_of_month:null,nth:1,dow_for_monthly:1,month:1,cron:""});se(()=>s.show,l=>{l&&(p.value={name:s.initial.name||"",description:s.initial.description||"",start_at:s.initial.start_at||c(new Date),end_at:s.initial.end_at||"",mode:s.initial.mode||"once",time:s.initial.time||new Date().toTimeString().slice(0,5),days_of_week:s.initial.days_of_week||[],day_of_month:s.initial.day_of_month||null,nth:s.initial.nth||1,dow_for_monthly:s.initial.dow_for_monthly||1,month:s.initial.month||1,cron:s.initial.cron||""})});const m=[{value:"once",label:"Once"},{value:"daily",label:"Daily"},{value:"weekly",label:"Weekly"},{value:"monthly",label:"Monthly"},{value:"yearly",label:"Yearly"},{value:"cron",label:"Custom cron"}],y=q(()=>c(new Date)),f=q(()=>p.value.start_at||y.value),u=q(()=>{var v,_;const l=p.value,r=l.time||"00:00";switch(l.mode){case"once":return`One-time at ${(v=l.start_at)==null?void 0:v.replace("T"," ")} (deactivates after run)`;case"daily":return`Daily at ${r}`;case"weekly":if(!((_=l.days_of_week)!=null&&_.length))return`Weekly at ${r}`;const b=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return`Weekly on ${l.days_of_week.map(T=>b[T]).join(", ")} at ${r}`;case"monthly":return l.day_of_month?`Monthly on day ${l.day_of_month} at ${r}`:`Monthly on the ${["First","Second","Third","Fourth","Fifth"][l.nth-1]} ${["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][l.dow_for_monthly]} at ${r}`;case"yearly":return`Yearly on ${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][(l.month||1)-1]} ${l.day_of_month||1} at ${r}`;case"cron":return`Custom cron: ${l.cron||"* * * * *"}`}});function o(){t("save",{...p.value})}return(l,r)=>(a(),B(He,{show:n.show,onClose:r[15]||(r[15]=()=>t("close"))},{default:h(()=>[e("div",Nl,[e("div",Ul,[e("h3",zl,j(n.title),1),e("button",{onClick:r[0]||(r[0]=()=>t("close")),class:"text-gray-500 hover:text-gray-700"},"✕")]),e("div",Ll,[e("section",null,[e("div",Fl,[e("div",null,[d(R,{value:"Schedule Name"}),N(e("input",{"onUpdate:modelValue":r[1]||(r[1]=v=>p.value.name=v),type:"text",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",placeholder:"e.g., Weekly reminder"},null,512),[[ne,p.value.name]])]),e("div",null,[d(R,{value:"Description (optional)"}),N(e("input",{"onUpdate:modelValue":r[2]||(r[2]=v=>p.value.description=v),type:"text",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[ne,p.value.description]])])])]),e("section",null,[e("div",Rl,[e("div",null,[d(R,{value:"Run"}),d(fe,{modelValue:p.value.mode,"onUpdate:modelValue":r[3]||(r[3]=v=>p.value.mode=v),options:m,placeholder:"Select frequency..."},null,8,["modelValue"])]),p.value.mode!=="cron"&&p.value.mode!=="once"?(a(),i("div",Ol,[d(R,{value:"Time"}),N(e("input",{"onUpdate:modelValue":r[4]||(r[4]=v=>p.value.time=v),type:"time",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[ne,p.value.time]])])):x("",!0),e("div",null,[d(R,{value:"Start at"}),N(e("input",{"onUpdate:modelValue":r[5]||(r[5]=v=>p.value.start_at=v),type:"datetime-local",min:y.value,class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,8,ql),[[ne,p.value.start_at]])]),p.value.mode!=="once"?(a(),i("div",Wl,[d(R,{value:"End at (optional)"}),N(e("input",{"onUpdate:modelValue":r[6]||(r[6]=v=>p.value.end_at=v),type:"datetime-local",min:f.value,class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,8,Hl),[[ne,p.value.end_at]])])):x("",!0),p.value.mode==="weekly"?(a(),i("div",Kl,[d(R,{value:"Days of the week"}),e("div",Jl,[(a(),i(ee,null,re(7,v=>e("label",{key:v-1,class:"inline-flex items-center"},[N(e("input",{class:"rounded border-gray-300 text-indigo-600 shadow-sm focus:ring-indigo-500",type:"checkbox",value:v-1,"onUpdate:modelValue":r[7]||(r[7]=_=>p.value.days_of_week=_)},null,8,Yl),[[nt,p.value.days_of_week]]),e("span",Ql,j(["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][v-1]),1)])),64))])])):x("",!0),p.value.mode==="monthly"?(a(),i(ee,{key:3},[e("div",null,[d(R,{value:"Day of month"}),N(e("input",{"onUpdate:modelValue":r[8]||(r[8]=v=>p.value.day_of_month=v),type:"number",min:"1",max:"31",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",placeholder:"e.g., 15"},null,512),[[ne,p.value.day_of_month,void 0,{number:!0}]])]),e("div",null,[d(R,{value:"Or: Nth weekday"}),e("div",Zl,[N(e("select",{"onUpdate:modelValue":r[9]||(r[9]=v=>p.value.nth=v),class:"mt-1 block w-1/2 rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},r[16]||(r[16]=[e("option",{value:1},"First",-1),e("option",{value:2},"Second",-1),e("option",{value:3},"Third",-1),e("option",{value:4},"Fourth",-1),e("option",{value:5},"Fifth",-1)]),512),[[Qe,p.value.nth,void 0,{number:!0}]]),N(e("select",{"onUpdate:modelValue":r[10]||(r[10]=v=>p.value.dow_for_monthly=v),class:"mt-1 block w-1/2 rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[(a(),i(ee,null,re(7,v=>e("option",{key:v-1,value:v-1},j(["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][v-1]),9,Xl)),64))],512),[[Qe,p.value.dow_for_monthly,void 0,{number:!0}]])])])],64)):x("",!0),p.value.mode==="yearly"?(a(),i(ee,{key:4},[e("div",null,[d(R,{value:"Month"}),N(e("select",{"onUpdate:modelValue":r[11]||(r[11]=v=>p.value.month=v),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[(a(),i(ee,null,re(12,v=>e("option",{key:v,value:v},j(["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][v-1]),9,es)),64))],512),[[Qe,p.value.month,void 0,{number:!0}]])]),e("div",null,[d(R,{value:"Day of month"}),N(e("input",{"onUpdate:modelValue":r[12]||(r[12]=v=>p.value.day_of_month=v),type:"number",min:"1",max:"31",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[ne,p.value.day_of_month,void 0,{number:!0}]])])],64)):x("",!0),p.value.mode==="cron"?(a(),i("div",ts,[d(R,{value:"Cron expression"}),N(e("input",{"onUpdate:modelValue":r[13]||(r[13]=v=>p.value.cron=v),type:"text",placeholder:"* * * * *",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[ne,p.value.cron]])])):x("",!0)])]),e("section",null,[e("div",as,j(u.value),1),r[17]||(r[17]=e("p",{class:"text-[11px] text-gray-500 mt-1"},"Times are entered in your local timezone; they will be stored in the app timezone.",-1))]),e("div",ls,[e("button",{onClick:r[14]||(r[14]=()=>t("close")),class:"px-4 py-2 rounded-md border border-gray-300 text-gray-700 bg-white hover:bg-gray-50"},"Cancel"),e("button",{onClick:o,class:"inline-flex items-center rounded-md bg-indigo-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500"},"Save")])])])]),_:1},8,["show"]))}};function os(){const n=$(!1),g=$(null);function c(){n.value=!0}function s(){n.value=!1}function t(m){g.value={...m},n.value=!1}async function p(m,y){var f,u;if(!g.value)return null;try{const o={...g.value,scheduled_item_type:m,scheduled_item_id:y},{data:l}=await window.axios.post("/api/schedules",o);return ge("Schedule created"),g.value=null,l}catch(o){return console.error("Failed to create schedule",o),de(((u=(f=o==null?void 0:o.response)==null?void 0:f.data)==null?void 0:u.message)||"Failed to create schedule"),null}}return{showScheduleModal:n,scheduleDraft:g,open:c,close:s,onSaveDraft:t,attachAfterCreate:p}}const is={key:0,class:"mb-4"},rs={key:1,class:"flex flex-col md:flex-row md:gap-8"},ns={class:"flex-grow flex flex-col space-y-4"},us={key:0,class:"flex-grow flex flex-col"},ds={key:0,class:"text-xs text-gray-500 mt-1"},cs={class:"w-full md:w-72 flex-shrink-0 mt-6 md:mt-0 space-y-5"},ms={key:0},vs={class:"space-y-5"},ps={class:"flex items-center gap-3"},fs={class:"flex-grow flex items-center gap-2"},gs=["disabled"],bs={class:"flex items-center gap-3"},ys={key:0,class:"mt-5 flex items-center gap-3"},hs={key:1,class:"mt-5 flex items-center gap-3"},ks={key:2,class:"mt-5 flex items-center gap-3"},ws={key:3,class:"mt-5 space-y-2"},xs={class:"flex items-center justify-between rounded-md bg-gray-100 p-1"},_s={key:2,class:"mt-6 border-t pt-4"},As={class:"space-y-4 mb-4"},Ts={key:0},Ms={key:1},$s={key:2,class:"flex items-center"},Cs={key:3,class:"flex items-center"},Ss={key:4,class:"flex items-center justify-between"},Gs={key:0,class:"text-sm text-gray-700"},js={key:1,class:"text-sm text-gray-500"},Ps={class:"flex items-center gap-2"},Es={class:"flex items-center gap-2 flex-wrap"},Is="Create New Task",Vs="/api/tasks",Bs="post",Ds="Create Task",Ns="Task created successfully!",Us={__name:"CreateTaskModal",props:{show:Boolean,projectId:{type:Number,default:null}},emits:["close","saved"],setup(n,{emit:g}){const c=n,s=g,t=je({name:"",description:"",assigned_to_user_id:null,due_date:null,status:"To Do",task_type_id:null,milestone_id:null,project_id:c.projectId,priority:"medium",needs_approval:!1,requires_qa:!1,tags:[],tags_data:[]}),p=["To Do","In Progress","Done","Blocked","Archived"],m=$([]),y=$([]),f=$([]),u=$([]),o=$(!0),l=$(!1),r=$(!1),v=$(!1),_=$(!1),b=$(!1),V=$(!1),P=$(!1),T=$(!1),k=$(!1),{showScheduleModal:I,scheduleDraft:D,open:F,close:W,onSaveDraft:G,attachAfterCreate:E}=os(),O=q(()=>{const L=D.value;if(!L)return null;const M=L.time||"00:00";switch(L.mode){case"once":return`One-time at ${String(L.start_at||"").replace("T"," ")}`;case"daily":return`Daily at ${M}`;case"weekly":{const le=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return`Weekly on ${(L.days_of_week||[]).map(he=>le[he]).join(", ")||"—"} at ${M}`}case"monthly":return L.day_of_month?`Monthly on day ${L.day_of_month} at ${M}`:`Monthly on the ${["First","Second","Third","Fourth","Fifth"][(L.nth||1)-1]} ${["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][L.dow_for_monthly||1]} at ${M}`;case"yearly":return`Yearly on ${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][(L.month||1)-1]} ${L.day_of_month||1} at ${M}`;case"cron":return`Custom cron: ${L.cron||"* * * * *"}`}return null}),z=async()=>(D.value?t.schedule={...D.value}:t.schedule&&delete t.schedule,!0);se(()=>c.show,async L=>{L&&(Object.assign(t,{name:"",description:"",assigned_to_user_id:null,due_date:null,status:"To Do",task_type_id:null,milestone_id:null,project_id:c.projectId,priority:"medium",needs_approval:!1,requires_qa:!1,tags:[],tags_data:[]}),b.value=!1,V.value=!1,P.value=!1,T.value=!1,k.value=!1,c.projectId?await Z(c.projectId):await C())},{immediate:!0}),se(()=>t.description,L=>{L.length<10&&(t.milestone_id=null)}),se(()=>t.milestone_id,()=>{t.due_date=null}),se(()=>t.due_date,()=>{t.assigned_to_user_id=null}),se(()=>t.assigned_to_user_id,()=>{t.task_type_id=null}),se(()=>t.task_type_id,()=>{t.priority="medium"}),se(()=>t.project_id,async L=>{L?await Z(L):(y.value=[],f.value=[],u.value=[])});const C=async()=>{o.value=!0;try{const L=await window.axios.get("/api/projects-simplified");m.value=L.data.map(M=>({value:M.id,label:M.name}))}catch(L){console.error("Error fetching projects:",L),m.value=[]}finally{o.value=!1}},Z=async L=>{if(L){l.value=!0,r.value=!0,v.value=!0;try{const[M,le,K]=await Promise.all([window.axios.get(`/api/projects/${L}/users`),window.axios.get("/api/task-types"),window.axios.get(`/api/projects/${L}/milestones`)]);y.value=M.data.map(he=>({value:he.id,label:he.name})),f.value=le.data.map(he=>({value:he.id,label:he.name})),u.value=K.data}catch(M){console.error("Error fetching associated task data:",M),y.value=[],f.value=[],u.value=[]}finally{l.value=!1,r.value=!1,v.value=!1}}},ie=q(()=>new Date().toISOString().split("T")[0]),Y=q(()=>{if(!t.milestone_id)return"";const L=u.value.find(M=>M.id===t.milestone_id);return!L||!L.completion_date?"":L.completion_date.split("T")[0]}),te=$([]),J=L=>{te.value=Array.from(L.target.files||[])},ce=async L=>{if(!te.value.length)return;const M=new FormData;te.value.forEach((le,K)=>M.append(`files[${K}]`,le)),M.append("model_type","Task"),M.append("model_id",L);try{await window.axios.post("/api/files",M,{headers:{"Content-Type":"multipart/form-data"}}),ge("Files uploaded to Google Drive.")}catch(le){console.error("Failed to upload task files",le),de("Failed to upload files.")}},ve=async L=>{var M,le,K;try{const he=(L==null?void 0:L.id)||((M=L==null?void 0:L.task)==null?void 0:M.id)||((le=L==null?void 0:L.data)==null?void 0:le.id);he&&(await ce(he),!(L!=null&&L.attached_schedule_id||(K=L==null?void 0:L.data)!=null&&K.attached_schedule_id)&&D.value&&await E("task",he))}finally{D.value=null,s("saved",L),s("close"),te.value=[]}},ye=()=>{s("close")},Be=()=>{t.project_id?_.value=!0:alert("Please select a project before adding a milestone.")},Me=L=>{_.value=!1,L&&L.id&&L.name&&(u.value.push(L),t.milestone_id=L.id)},xe=q(()=>y.value),Ae=q(()=>f.value),De=q(()=>u.value);return(L,M)=>(a(),i(ee,null,[d(Ve,{show:n.show,title:Is,"api-endpoint":Vs,"http-method":Bs,"form-data":t,"submit-button-text":Ds,"success-message":Ns,"before-submit":z,onClose:ye,onSubmitted:ve,"max-width":"4xl"},{default:h(({errors:le})=>[e("div",null,[n.projectId?x("",!0):(a(),i("div",is,[d(fe,{id:"task-project",modelValue:t.project_id,"onUpdate:modelValue":M[0]||(M[0]=K=>t.project_id=K),options:m.value,"value-key":"value","label-key":"label",placeholder:"Select a project",required:!0},null,8,["modelValue","options"]),d(X,{message:le.project_id?le.project_id[0]:"",class:"mt-2"},null,8,["message"])])),t.project_id?(a(),i("div",rs,[e("div",ns,[d(be,{id:"task-name",modelValue:t.name,"onUpdate:modelValue":M[1]||(M[1]=K=>t.name=K),type:"text",class:"block w-full text-xl font-semibold border-gray-200",placeholder:"Task Title",required:""},null,8,["modelValue"]),d(X,{message:le.name?le.name[0]:"",class:"mt-2"},null,8,["message"]),t.name?(a(),i("div",us,[N(e("textarea",{id:"task-description","onUpdate:modelValue":M[2]||(M[2]=K=>t.description=K),class:"flex-grow w-full rounded-md border-gray-200 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",placeholder:"Add a description..."},null,512),[[ne,t.description]]),d(X,{message:le.description?le.description[0]:"",class:"mt-2"},null,8,["message"]),t.name&&t.description.length<10?(a(),i("p",ds," Enter at least 10 characters to continue. ")):x("",!0)])):x("",!0)]),e("div",cs,[t.description.length>=10?(a(),i("div",ms,[e("div",vs,[e("div",ps,[M[23]||(M[23]=e("svg",{class:"h-5 w-5 text-gray-500 flex-shrink-0",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 20.25h12m-7.5-3.75v3.75m.75-12.75l3 3m0 0l3-3m-3 3v11.25m-4.5 0L7.5 21m0 0H6"})],-1)),e("div",fs,[d(fe,{id:"task-milestone",modelValue:t.milestone_id,"onUpdate:modelValue":M[3]||(M[3]=K=>t.milestone_id=K),options:De.value,"value-key":"id","label-key":"name",placeholder:"Select Milestone",class:"flex-grow",required:""},null,8,["modelValue","options"]),e("button",{type:"button",onClick:Be,disabled:!t.project_id||v.value,class:"p-2 text-sm font-medium text-blue-600 bg-blue-50 rounded-md hover:bg-blue-100 disabled:opacity-50",title:"Add New Milestone"},M[22]||(M[22]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4v16m8-8H4"})],-1)]),8,gs)])]),d(X,{message:le.milestone_id?le.milestone_id[0]:"",class:"mt-2"},null,8,["message"]),e("div",bs,[M[24]||(M[24]=e("svg",{class:"h-5 w-5 text-gray-500 flex-shrink-0",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 9.563C9 9.252 9.252 9 9.563 9h4.874c.311 0 .563.252.563.563v4.874c0 .311-.252.563-.563.563H9.564A.562.562 0 019 14.437V9.564z"})],-1)),d(fe,{id:"task-status",modelValue:t.status,"onUpdate:modelValue":M[4]||(M[4]=K=>t.status=K),options:p.map(K=>({value:K,label:K})),"value-key":"value","label-key":"label",class:"flex-grow"},null,8,["modelValue","options"])])]),t.milestone_id?(a(),i("div",ys,[M[25]||(M[25]=e("svg",{class:"h-5 w-5 text-gray-500 flex-shrink-0",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5"})],-1)),d(be,{id:"task-due-date",modelValue:t.due_date,"onUpdate:modelValue":M[5]||(M[5]=K=>t.due_date=K),type:"date",class:"flex-grow",min:ie.value,max:Y.value},null,8,["modelValue","min","max"])])):x("",!0),t.due_date?(a(),i("div",hs,[M[26]||(M[26]=e("svg",{class:"h-5 w-5 text-gray-500 flex-shrink-0",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"})],-1)),d(fe,{id:"task-assigned-to",modelValue:t.assigned_to_user_id,"onUpdate:modelValue":M[6]||(M[6]=K=>t.assigned_to_user_id=K),options:xe.value,"value-key":"value","label-key":"label",placeholder:"Unassigned",class:"flex-grow","allow-empty":!0},null,8,["modelValue","options"])])):x("",!0),t.assigned_to_user_id?(a(),i("div",ks,[M[27]||(M[27]=e("svg",{class:"h-5 w-5 text-gray-500 flex-shrink-0",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.568 3H5.25A2.25 2.25 0 003 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 005.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 009.568 3z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 6h.008v.008H6V6z"})],-1)),d(fe,{id:"task-type",modelValue:t.task_type_id,"onUpdate:modelValue":M[7]||(M[7]=K=>t.task_type_id=K),options:Ae.value,"value-key":"value","label-key":"label",placeholder:"Select Type",class:"flex-grow",required:""},null,8,["modelValue","options"])])):x("",!0),t.task_type_id?(a(),i("div",ws,[d(R,{value:"Priority"}),e("div",xs,[e("button",{type:"button",onClick:M[8]||(M[8]=K=>t.priority="low"),class:H(["px-3 py-1 text-sm rounded-md w-full flex items-center justify-center gap-2",t.priority==="low"?"bg-white shadow":"text-gray-600 hover:bg-gray-200"])},M[28]||(M[28]=[e("svg",{class:"h-4 w-4 text-green-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 13.5L12 21m0 0l-7.5-7.5M12 21V3"})],-1),A(" Low ",-1)]),2),e("button",{type:"button",onClick:M[9]||(M[9]=K=>t.priority="medium"),class:H(["px-3 py-1 text-sm rounded-md w-full flex items-center justify-center gap-2",t.priority==="medium"?"bg-white shadow":"text-gray-600 hover:bg-gray-200"])},M[29]||(M[29]=[e("svg",{class:"h-4 w-4 text-yellow-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 9h16.5m-16.5 6.75h16.5"})],-1),A(" Medium ",-1)]),2),e("button",{type:"button",onClick:M[10]||(M[10]=K=>t.priority="high"),class:H(["px-3 py-1 text-sm rounded-md w-full flex items-center justify-center gap-2",t.priority==="high"?"bg-white shadow":"text-gray-600 hover:bg-gray-200"])},M[30]||(M[30]=[e("svg",{class:"h-4 w-4 text-red-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.5 10.5L12 3m0 0l7.5 7.5M12 3v18"})],-1),A(" High ",-1)]),2)])])):x("",!0)])):x("",!0)])])):x("",!0),t.description.length>=10?(a(),i("div",_s,[e("div",As,[b.value?(a(),i("div",Ts,[d(Et,{modelValue:t.tags,"onUpdate:modelValue":M[11]||(M[11]=K=>t.tags=K),initialTags:t.tags_data,label:"Tags",placeholder:"Add tags...",error:le.tags?le.tags[0]:"",disabled:!t.project_id},null,8,["modelValue","initialTags","error","disabled"])])):x("",!0),V.value?(a(),i("div",Ms,[d(R,{for:"task-files",value:"Attachments"}),e("input",{id:"task-files",type:"file",class:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-violet-50 file:text-violet-700 hover:file:bg-violet-100",multiple:"",onChange:J},null,32)])):x("",!0),T.value?(a(),i("div",$s,[N(e("input",{id:"needs-approval",type:"checkbox","onUpdate:modelValue":M[12]||(M[12]=K=>t.needs_approval=K),class:"h-4 w-4 text-indigo-600 border-gray-300 rounded"},null,512),[[nt,t.needs_approval]]),M[31]||(M[31]=e("label",{for:"needs-approval",class:"ml-2 block text-sm text-gray-700"},"This task needs approval",-1))])):x("",!0),k.value?(a(),i("div",Cs,[N(e("input",{id:"requires-qa",type:"checkbox","onUpdate:modelValue":M[13]||(M[13]=K=>t.requires_qa=K),class:"h-4 w-4 text-indigo-600 border-gray-300 rounded"},null,512),[[nt,t.requires_qa]]),M[32]||(M[32]=e("label",{for:"requires-qa",class:"ml-2 block text-sm text-gray-700"},"Required QA Task",-1))])):x("",!0),P.value?(a(),i("div",Ss,[e("div",null,[d(R,{value:"Schedule"}),O.value?(a(),i("div",Gs,"Planned: "+j(O.value),1)):(a(),i("div",js,"No schedule attached"))]),e("div",Ps,[e("button",{type:"button",onClick:M[14]||(M[14]=(...K)=>U(F)&&U(F)(...K)),class:"px-3 py-2 text-sm font-medium text-indigo-600 bg-indigo-50 rounded-md hover:bg-indigo-100"},j(O.value?"Edit Schedule":"Add Schedule"),1),U(D)?(a(),i("button",{key:0,type:"button",onClick:M[15]||(M[15]=K=>D.value=null),class:"px-3 py-2 text-sm font-medium text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200"},"Clear")):x("",!0)])])):x("",!0)]),e("div",Es,[e("button",{type:"button",onClick:M[16]||(M[16]=K=>b.value=!b.value),class:H(["flex items-center gap-1 text-sm text-gray-600 hover:text-black bg-gray-100 hover:bg-gray-200 px-2 py-1 rounded-md transition-colors",{"bg-gray-300":b.value}])},M[33]||(M[33]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 7h.01M7 3h5a2 2 0 012 2v5a2 2 0 01-2 2H7a2 2 0 01-2-2V5a2 2 0 012-2zm0 0v11a2 2 0 002 2h5a2 2 0 002-2v-5a2 2 0 00-2-2H7z"})],-1),A("Tag",-1)]),2),e("button",{type:"button",onClick:M[17]||(M[17]=K=>V.value=!V.value),class:H(["flex items-center gap-1 text-sm text-gray-600 hover:text-black bg-gray-100 hover:bg-gray-200 px-2 py-1 rounded-md transition-colors",{"bg-gray-300":V.value}])},M[34]||(M[34]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})],-1),A("Attachment",-1)]),2),e("button",{type:"button",onClick:M[18]||(M[18]=K=>T.value=!T.value),class:H(["flex items-center gap-1 text-sm text-gray-600 hover:text-black bg-gray-100 hover:bg-gray-200 px-2 py-1 rounded-md transition-colors",{"bg-gray-300":T.value}])},M[35]||(M[35]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),A("Approval",-1)]),2),e("button",{type:"button",onClick:M[19]||(M[19]=K=>k.value=!k.value),class:H(["flex items-center gap-1 text-sm text-gray-600 hover:text-black bg-gray-100 hover:bg-gray-200 px-2 py-1 rounded-md transition-colors",{"bg-gray-300":k.value}])},M[36]||(M[36]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6l7 3v4c0 4.418-2.239 8-7 9-4.761-1-7-4.582-7-9V9l7-3z"})],-1),A("QA",-1)]),2),e("button",{type:"button",onClick:M[20]||(M[20]=K=>P.value=!P.value),class:H(["flex items-center gap-1 text-sm text-gray-600 hover:text-black bg-gray-100 hover:bg-gray-200 px-2 py-1 rounded-md transition-colors",{"bg-gray-300":P.value}])},M[37]||(M[37]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),A("Schedule",-1)]),2)])])):x("",!0)])]),_:1},8,["show","form-data"]),d(ss,{show:U(I),title:"Add Schedule",onClose:U(W),onSave:U(G)},null,8,["show","onClose","onSave"]),d(Dl,{show:_.value,"project-id":t.project_id,onClose:M[21]||(M[21]=le=>_.value=!1),onSaved:Me},null,8,["show","project-id"])],64))}},zs={class:"space-y-4"},Ls={class:"mt-4"},Fs={class:"flex items-center space-x-6"},Rs={class:"inline-flex items-center"},Os={class:"inline-flex items-center"},qs={class:"inline-flex items-center"},Ws={__name:"CreateForm",props:{show:{type:Boolean,default:!1},apiEndpoint:{type:String,required:!0}},emits:["close","resourceCreated"],setup(n,{emit:g}){const c=n,s=g,t=je({title:"",description:"",url:"",type:"website",thumbnail_url:"",visible_to_client:!0,visibility:"client",tags:[]}),p=[{value:"website",label:"Website"},{value:"youtube",label:"YouTube Video"},{value:"document",label:"Document"},{value:"image",label:"Image"},{value:"other",label:"Other"}],m=$(p);we(async()=>{try{const{data:o}=await oe.get("/api/options/shareable_resource_types");Array.isArray(o)&&o.length&&(m.value=o)}catch{m.value=p}});const y=o=>{const l={title:o.title,description:o.description,url:o.url,type:o.type,thumbnail_url:o.thumbnail_url,visibility:o.visibility,tags:o.tags};if(Array.isArray(o.tags)&&o.tags.length){const r=o.tags.map(v=>typeof v=="object"&&v!==null?v.id:v).filter(Boolean);l.tag_ids=r}return l},f=o=>{s("resourceCreated",o),u()},u=()=>{t.title="",t.description="",t.url="",t.type="website",t.thumbnail_url="",t.visible_to_client=!0,t.tags=[],s("close")};return(o,l)=>(a(),B(Ve,{show:c.show,title:"Add New Shareable Resource",apiEndpoint:c.apiEndpoint,httpMethod:"post",formData:t,formatDataForApi:y,submitButtonText:"Create Resource",successMessage:"Shareable resource created successfully!",onSubmitted:f,onClose:u},{default:h(({errors:r})=>[e("div",zs,[e("div",null,[d(R,{for:"title",value:"Title",class:"mb-1"}),d(be,{id:"title",type:"text",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:t.title,"onUpdate:modelValue":l[0]||(l[0]=v=>t.title=v),required:""},null,8,["modelValue"]),d(X,{message:r.title?r.title[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[d(R,{for:"url",value:"Resource URL",class:"mb-1"}),d(be,{id:"url",type:"url",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:t.url,"onUpdate:modelValue":l[1]||(l[1]=v=>t.url=v),required:""},null,8,["modelValue"]),d(X,{message:r.url?r.url[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[d(R,{for:"type",value:"Resource Type",class:"mb-1"}),d(fe,{id:"type",modelValue:t.type,"onUpdate:modelValue":l[2]||(l[2]=v=>t.type=v),options:m.value,valueKey:"value",labelKey:"label",placeholder:"Select Resource Type",required:"",class:"mt-1 block w-full"},null,8,["modelValue","options"]),d(X,{message:r.type?r.type[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[d(R,{for:"thumbnail_url",value:"Thumbnail URL (Optional)",class:"mb-1"}),d(be,{id:"thumbnail_url",type:"url",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:t.thumbnail_url,"onUpdate:modelValue":l[3]||(l[3]=v=>t.thumbnail_url=v)},null,8,["modelValue"]),d(X,{message:r.thumbnail_url?r.thumbnail_url[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[d(R,{for:"description",value:"Description (Optional)",class:"mb-1"}),N(e("textarea",{id:"description",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-lg shadow-sm mt-1 block w-full","onUpdate:modelValue":l[4]||(l[4]=v=>t.description=v),rows:"3"},null,512),[[ne,t.description]]),d(X,{message:r.description?r.description[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[d(Et,{modelValue:t.tags,"onUpdate:modelValue":l[5]||(l[5]=v=>t.tags=v),label:"Associated Tags",placeholder:"Search or add tags",error:r.tags?r.tags[0]:""},null,8,["modelValue","error"])]),e("div",Ls,[d(R,{value:"Visibility",class:"mb-2"}),e("div",Fs,[e("label",Rs,[N(e("input",{type:"radio",class:"form-radio",value:"client","onUpdate:modelValue":l[6]||(l[6]=v=>t.visibility=v)},null,512),[[Oe,t.visibility]]),l[9]||(l[9]=e("span",{class:"ml-2"},"Visible to Client",-1))]),e("label",Os,[N(e("input",{type:"radio",class:"form-radio",value:"team","onUpdate:modelValue":l[7]||(l[7]=v=>t.visibility=v)},null,512),[[Oe,t.visibility]]),l[10]||(l[10]=e("span",{class:"ml-2"},"Visible to Team",-1))]),e("label",qs,[N(e("input",{type:"radio",class:"form-radio",value:"private","onUpdate:modelValue":l[8]||(l[8]=v=>t.visibility=v)},null,512),[[Oe,t.visibility]]),l[11]||(l[11]=e("span",{class:"ml-2"},"Private",-1))])]),d(X,{message:r.visibility?r.visibility[0]:"",class:"mt-2"},null,8,["message"])])])]),_:1},8,["show","apiEndpoint","formData"]))}},Hs=Ke(Ws,[["__scopeId","data-v-9f619b0e"]]),Ks={key:0,class:"sidebar-wrapper"},Js={class:"fixed inset-0 z-[100] flex pointer-events-none"},Ys={class:"flex items-center justify-between p-4 border-b border-gray-200 bg-white rounded-tl-xl sticky top-0 z-20"},Qs={class:"text-xl font-semibold text-gray-900"},Zs={class:"flex-1 overflow-y-auto p-6 scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-gray-300 scrollbar-track-gray-100"},Xs={key:1,class:"p-4 border-t border-gray-200 bg-white sticky bottom-0 z-20"},eo={__name:"RightSidebar",props:{show:{type:Boolean,default:!1},title:{type:String,default:"Details"},initialWidth:{type:Number,default:50},minWidth:{type:Number,default:30},maxWidth:{type:Number,default:90}},emits:["close","update:show"],setup(n,{emit:g}){const c=n,s=g,t=$(c.initialWidth),p=$(!1),m=l=>{p.value=!0,document.addEventListener("pointermove",y),document.addEventListener("pointerup",f)},y=l=>{if(!p.value)return;const r=window.innerWidth,_=(r-l.clientX)/r*100,b=Math.max(c.minWidth,Math.min(c.maxWidth,_));t.value=b},f=()=>{p.value=!1,document.removeEventListener("pointermove",y),document.removeEventListener("pointerup",f)};se(()=>c.show,l=>{l?document.body.style.overflow="hidden":document.body.style.overflow=""},{immediate:!0});const u=()=>{s("update:show",!1),s("close")},o=q(()=>window.innerWidth<768);return se(o,l=>{l&&c.show?t.value=100:!l&&c.show&&(t.value=c.initialWidth)},{immediate:!0}),se(()=>c.show,l=>{l&&(o.value?t.value=100:t.value=c.initialWidth)}),(l,r)=>(a(),B(ta,{to:"body"},[d(Gt,{"enter-active-class":"transition ease-out duration-300 transform","enter-from-class":"translate-x-full","enter-to-class":"translate-x-0","leave-active-class":"transition ease-in duration-200 transform","leave-from-class":"translate-x-0","leave-to-class":"translate-x-full"},{default:h(()=>[n.show?(a(),i("div",Ks,[e("div",{class:"fixed inset-0 bg-gray-900 bg-opacity-50 transition-opacity z-[99]",onClick:u}),e("div",Js,[e("div",{class:"relative ml-auto h-full bg-white shadow-xl flex flex-col rounded-l-xl pointer-events-auto",style:ea({width:o.value?"100%":`${t.value}vw`})},[o.value?x("",!0):(a(),i("div",{key:0,class:"absolute left-0 top-0 h-full w-2 cursor-col-resize -ml-1 z-10",onPointerdown:m,title:"Drag to resize"},null,32)),e("div",Ys,[e("h3",Qs,j(n.title),1),e("button",{onClick:u,class:"text-gray-400 hover:text-gray-600 transition-colors"},r[0]||(r[0]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("div",Zs,[$e(l.$slots,"content",{},void 0,!0)]),l.$slots.footer?(a(),i("div",Xs,[$e(l.$slots,"footer",{},void 0,!0)])):x("",!0)],4)])])):x("",!0)]),_:3})]))}},It=Ke(eo,[["__scopeId","data-v-2d864577"]]),to={class:"flex border-b border-gray-200"},ao={key:0,class:"ml-2 px-2 py-1 text-xs font-bold bg-red-600 text-white rounded-full"},lo={class:"p-4 space-y-2 overflow-y-auto"},so={key:0,class:"p-6 text-center text-gray-500"},oo={key:0},io={key:1},ro=["onClick"],no={class:"flex-1 min-w-0"},uo={class:"flex items-start justify-between gap-2 mb-1"},co={class:"flex-1 min-w-0"},mo={key:0,class:"text-base font-semibold text-gray-900 truncate"},vo={key:1,class:"text-xs text-gray-500"},po={key:0,class:"text-sm text-gray-600 mt-1 mb-2"},fo={class:"flex items-center text-xs text-gray-500 font-medium"},go={key:0},bo={key:1,class:"mx-2"},yo={key:2},ho={__name:"NotificationsSidebar",setup(n){const g=q(()=>qe.value.notifications),c=$("New"),s=q(()=>c.value==="New"?g.value.filter(y=>!y.isRead):g.value),t=async y=>{await Mt(y.view_id);const f=y.task_id||p(y.url),u=y.project_id||m(y.url);f&&u?($t(f,u),kt()):(console.warn("Could not open task sidebar. Falling back to opening URL in new tab."),y.url&&window.open(y.url,"_blank"))},p=y=>{const f=y.match(/\/task\/(\d+)/);return f?parseInt(f[1]):null},m=y=>{const f=y.match(/\/project\/(\d+)\//);return f?parseInt(f[1]):null};return(y,f)=>(a(),B(It,{show:U(qe).show,"onUpdate:show":U(kt),title:"Notifications","initial-width":35,class:"z-[100]"},{content:h(()=>[e("div",to,[e("button",{onClick:f[0]||(f[0]=u=>c.value="New"),class:H([{"border-blue-600 text-blue-600 font-semibold":c.value==="New","border-transparent text-gray-500 hover:text-gray-700":c.value!=="New"},"flex-1 py-4 px-1 text-center text-sm border-b-2 transition-colors duration-200"])},[f[2]||(f[2]=A(" New ",-1)),g.value.filter(u=>!u.isRead).length>0?(a(),i("span",ao,j(g.value.filter(u=>!u.isRead).length),1)):x("",!0)],2),e("button",{onClick:f[1]||(f[1]=u=>c.value="All"),class:H([{"border-blue-600 text-blue-600 font-semibold":c.value==="All","border-transparent text-gray-500 hover:text-gray-700":c.value!=="All"},"flex-1 py-4 px-1 text-center text-sm border-b-2 transition-colors duration-200"])}," All ",2)]),e("div",lo,[s.value.length===0?(a(),i("div",so,[c.value==="New"?(a(),i("span",oo,"You have no new notifications.")):(a(),i("span",io,"You have no notifications."))])):x("",!0),(a(!0),i(ee,null,re(s.value,u=>(a(),i("div",{key:u.id,class:H(["bg-white rounded-xl shadow-sm p-4 flex items-start space-x-4 border border-gray-200 transition-all duration-200 hover:shadow-md cursor-pointer",{"bg-gray-50":u.isRead}]),onClick:o=>t(u)},[e("div",no,[e("div",uo,[e("div",co,[u.title?(a(),i("h3",mo,j(u.title),1)):x("",!0),u.project_name?(a(),i("p",vo,j(u.project_name),1)):x("",!0)])]),u.message?(a(),i("p",po,j(u.message),1)):x("",!0),e("div",fo,[u.due_date?(a(),i("span",go,"Due: "+j(U(Tt)(u.due_date)),1)):x("",!0),u.due_date&&u.priority?(a(),i("span",bo,"•")):x("",!0),u.priority?(a(),i("span",yo,"Priority: "+j(u.priority),1)):x("",!0)])])],10,ro))),128))])]),_:1},8,["show","onUpdate:show"]))}},ko={class:"space-y-4"},wo={key:0,class:"text-red-600 text-xs mt-1"},xo={key:0,class:"text-red-600 text-xs mt-1"},_o={key:0,class:"text-red-600 text-xs mt-1"},Ao={__name:"KudoModal",props:{show:{type:Boolean,default:!1}},emits:["close","submitted"],setup(n,{emit:g}){const c=g,s=$([]),t=$([]),p=je({recipient_id:"",project_id:"",comment:""}),m=$({}),y=async()=>{try{const{data:l}=await window.axios.get("/api/projects-simplified");s.value=(l||[]).map(r=>({value:r.id,label:r.name}))}catch{s.value=[]}},f=async l=>{if(t.value=[],!!l)try{const{data:r}=await window.axios.get(`/api/projects/${l}/users`);t.value=(r||[]).map(v=>({value:v.id,label:`${v.name} (${v.email})`}))}catch{t.value=[]}};se(()=>p.project_id,l=>{l&&f(l)}),we(()=>{y()});const u=()=>{p.recipient_id="",p.project_id="",p.comment="",m.value={}},o=l=>{u(),c("submitted",l)};return(l,r)=>(a(),B(Ve,{show:n.show,title:"Give a Kudo ✨","api-endpoint":"/api/kudos","http-method":"post","form-data":p,"submit-button-text":"Submit Kudo","success-message":"Kudo submitted! Pending approval.",onClose:r[3]||(r[3]=v=>l.$emit("close")),onSubmitted:o},{default:h(({errors:v})=>[e("div",ko,[e("div",null,[r[4]||(r[4]=e("label",{class:"block text-sm font-medium text-gray-700"},"Project",-1)),d(fe,{options:s.value,modelValue:p.project_id,"onUpdate:modelValue":r[0]||(r[0]=_=>p.project_id=_),placeholder:"Select a project..."},null,8,["options","modelValue"]),v.project_id?(a(),i("p",wo,j(v.project_id[0]),1)):x("",!0)]),e("div",null,[r[5]||(r[5]=e("label",{class:"block text-sm font-medium text-gray-700"},"Recipient",-1)),d(fe,{options:t.value,modelValue:p.recipient_id,"onUpdate:modelValue":r[1]||(r[1]=_=>p.recipient_id=_),placeholder:"Select a teammate..."},null,8,["options","modelValue"]),v.recipient_id?(a(),i("p",xo,j(v.recipient_id[0]),1)):x("",!0)]),e("div",null,[r[6]||(r[6]=e("label",{class:"block text-sm font-medium text-gray-700"},"Comment",-1)),N(e("textarea",{"onUpdate:modelValue":r[2]||(r[2]=_=>p.comment=_),rows:"4",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",placeholder:"e.g., Thank you for helping with the last-minute changes!"},null,512),[[ne,p.comment]]),v.comment?(a(),i("p",_o,j(v.comment[0]),1)):x("",!0)])])]),_:1},8,["show","form-data"]))}},To={class:"flex items-center p-4 h-16 border-b border-gray-700"},Mo={key:0,class:"text-xl font-semibold flex-1 truncate"},$o=["title"],Co={key:0,class:"p-4 border-b border-gray-700"},So={class:"relative"},Go={key:1,class:"flex-1 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-500 scrollbar-track-gray-700 p-4"},jo={key:0,class:"mb-4"},Po={class:"ml-2 mt-2 space-y-1"},Eo=["onClick"],Io={class:"text-sm font-medium text-gray-300 truncate"},Vo={class:"ml-4 mt-1 space-y-1"},Bo={class:"truncate"},Do={key:1,class:"mb-4"},No={class:"ml-2 mt-2 space-y-1"},Uo=["onClick"],zo={class:"text-sm font-medium text-gray-300 truncate"},Lo={class:"ml-4 mt-1 space-y-1"},Fo={class:"truncate"},Ro={key:2,class:"mb-4"},Oo={class:"ml-2 mt-2 space-y-1"},qo={class:"truncate"},Wo={key:3,class:"mb-4"},Ho={class:"ml-2 mt-2 space-y-1"},Ko={class:"truncate"},Jo={key:4,class:"text-gray-400 text-sm text-center py-4"},Yo={key:5,class:"text-gray-400 text-sm text-center py-4"},Qo={key:2,class:"flex flex-col items-center pt-4 space-y-4"},Zo={key:0,class:"text-gray-400 text-xs text-center px-2"},Xo={__name:"LeftSidebar",props:{allProjects:{type:Array,default:()=>[]},activeProjectId:{type:Number,default:null}},emits:["project-selected"],setup(n,{emit:g}){const c=n,s=g,t=$(localStorage.getItem("leftSidebarCollapsed")!=="false"),p=$(""),m=$({}),y=q(()=>{const T=new Set;return c.allProjects.forEach(k=>{k.project_type&&T.add(k.project_type)}),Array.from(T).sort()}),f=q(()=>{const T=new Set;return c.allProjects.forEach(k=>{Array.isArray(k.tags)&&k.tags.forEach(I=>T.add(I))}),Array.from(T).sort()}),u=q(()=>{if(!p.value)return c.allProjects;const T=p.value.toLowerCase();return c.allProjects.filter(k=>{var I,D,F;return k.name.toLowerCase().includes(T)||((I=k.description)==null?void 0:I.toLowerCase().includes(T))||((D=k.project_type)==null?void 0:D.toLowerCase().includes(T))||Array.isArray(k.tags)&&k.tags.some(W=>W.toLowerCase().includes(T))||((F=k.status)==null?void 0:F.toLowerCase().includes(T))})}),o=q(()=>{const T={};u.value.forEach(k=>{k.project_type&&k.status==="active"&&(T[k.project_type]||(T[k.project_type]=[]),T[k.project_type].push(k))});for(const k in T)T[k].sort((I,D)=>I.name.localeCompare(D.name));return T}),l=q(()=>{const T={};u.value.forEach(k=>{Array.isArray(k.tags)&&k.tags.length>0&&k.tags.forEach(I=>{T[I]||(T[I]=[]),T[I].push(k)})});for(const k in T)T[k]=[...new Set(T[k])].sort((I,D)=>I.name.localeCompare(D.name));return T}),r=q(()=>u.value.filter(T=>T.status!=="active").sort((T,k)=>T.name.localeCompare(k.name))),v=q(()=>u.value.filter(T=>!T.project_type&&(!Array.isArray(T.tags)||T.tags.length===0)).sort((T,k)=>T.name.localeCompare(k.name)));se(()=>c.allProjects,()=>{y.value.forEach(T=>{const k=`type-${T}`;m.value[k]===void 0&&(m.value[k]=!0)}),f.value.forEach(T=>{const k=`tag-${T}`;m.value[k]===void 0&&(m.value[k]=!0)}),m.value["main-types"]===void 0&&(m.value["main-types"]=!1),m.value["main-tags"]===void 0&&(m.value["main-tags"]=!1),m.value["inactive-projects"]===void 0&&(m.value["inactive-projects"]=!1),m.value.uncategorized===void 0&&(m.value.uncategorized=!1)},{immediate:!0}),se(t,T=>{localStorage.setItem("leftSidebarCollapsed",T)});const _=()=>{t.value=!t.value},b=T=>{m.value[T]=!m.value[T]},V=T=>{s("project-selected",T)},P=()=>{p.value=""};return(T,k)=>(a(),i("div",{class:H({"w-64":!t.value,"w-16":t.value,"min-w-16":!0,"bg-gray-800 text-white flex flex-col transition-all duration-300 ease-in-out shrink-0 h-screen overflow-hidden":!0})},[e("div",To,[t.value?x("",!0):(a(),i("h2",Mo,"Projects")),e("button",{onClick:_,class:"p-2 rounded-full hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500",title:t.value?"Expand Sidebar":"Collapse Sidebar"},[(a(),i("svg",{class:H(["w-6 h-6 text-gray-400 transform transition-transform duration-300",{"rotate-180":t.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},k[5]||(k[5]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"},null,-1)]),2))],8,$o)]),t.value?x("",!0):(a(),i("div",Co,[e("div",So,[N(e("input",{type:"text","onUpdate:modelValue":k[0]||(k[0]=I=>p.value=I),placeholder:"Search all projects...",class:"w-full p-2 rounded-md bg-gray-700 border border-gray-600 text-white placeholder-gray-400 focus:ring-indigo-500 focus:border-indigo-500 text-sm"},null,512),[[ne,p.value]]),p.value?(a(),i("button",{key:0,onClick:P,class:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-200",title:"Clear search"},k[6]||(k[6]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))):x("",!0)])])),t.value?(a(),i("div",Qo,[(a(!0),i(ee,null,re(c.allProjects,I=>(a(),B(U(Te),{key:I.id,href:T.route("projects.show",I.id),onClick:D=>V(I.id),class:H({"w-10 h-10 rounded-full flex items-center justify-center text-xs font-bold transition-all duration-200":!0,"bg-indigo-600 text-white":I.id===n.activeProjectId,"bg-gray-700 text-gray-300 hover:bg-gray-600":I.id!==n.activeProjectId}),title:I.name},{default:h(()=>[A(j(I.name.charAt(0).toUpperCase()),1)]),_:2},1032,["href","onClick","class","title"]))),128)),n.allProjects.length===0?(a(),i("div",Zo," No Projects ")):x("",!0)])):(a(),i("div",Go,[Object.keys(o.value).length>0?(a(),i("div",jo,[e("div",{class:"flex items-center justify-between cursor-pointer py-2 hover:bg-gray-700 rounded-md px-2",onClick:k[1]||(k[1]=I=>b("main-types"))},[k[8]||(k[8]=e("h3",{class:"text-sm font-semibold text-gray-400"},"Active Projects by Type",-1)),(a(),i("svg",{class:H(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!m.value["main-types"]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},k[7]||(k[7]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))]),N(e("div",Po,[(a(!0),i(ee,null,re(o.value,(I,D)=>(a(),i("div",{key:D},[e("div",{class:"flex items-center justify-between cursor-pointer py-1 hover:bg-gray-700 rounded-md px-2",onClick:F=>b(`type-${D}`)},[e("h4",Io,j(D),1),(a(),i("svg",{class:H(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!m.value[`type-${D}`]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},k[9]||(k[9]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))],8,Eo),N(e("ul",Vo,[(a(!0),i(ee,null,re(I,F=>(a(),i("li",{key:F.id},[d(U(Te),{href:T.route("projects.show",F.id),onClick:W=>V(F.id),class:H({"block w-full text-left px-3 py-2 rounded-md transition-colors":!0,"bg-indigo-600 text-white":F.id===n.activeProjectId,"hover:bg-gray-700 text-gray-200":F.id!==n.activeProjectId,"font-bold":F.id===n.activeProjectId})},{default:h(()=>[e("span",Bo,j(F.name),1)]),_:2},1032,["href","onClick","class"])]))),128))],512),[[Ge,!m.value[`type-${D}`]]])]))),128))],512),[[Ge,!m.value["main-types"]]])])):x("",!0),Object.keys(l.value).length>0?(a(),i("div",Do,[e("div",{class:"flex items-center justify-between cursor-pointer py-2 hover:bg-gray-700 rounded-md px-2",onClick:k[2]||(k[2]=I=>b("main-tags"))},[k[11]||(k[11]=e("h3",{class:"text-sm font-semibold text-gray-400"},"Projects by Tag",-1)),(a(),i("svg",{class:H(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!m.value["main-tags"]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},k[10]||(k[10]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))]),N(e("div",No,[(a(!0),i(ee,null,re(l.value,(I,D)=>(a(),i("div",{key:D},[e("div",{class:"flex items-center justify-between cursor-pointer py-1 hover:bg-gray-700 rounded-md px-2",onClick:F=>b(`tag-${D}`)},[e("h4",zo,j(D),1),(a(),i("svg",{class:H(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!m.value[`tag-${D}`]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},k[12]||(k[12]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))],8,Uo),N(e("ul",Lo,[(a(!0),i(ee,null,re(I,F=>(a(),i("li",{key:F.id},[d(U(Te),{href:T.route("projects.show",F.id),onClick:W=>V(F.id),class:H({"block w-full text-left px-3 py-2 rounded-md transition-colors":!0,"bg-indigo-600 text-white":F.id===n.activeProjectId,"hover:bg-gray-700 text-gray-200":F.id!==n.activeProjectId,"font-bold":F.id===n.activeProjectId})},{default:h(()=>[e("span",Fo,j(F.name),1)]),_:2},1032,["href","onClick","class"])]))),128))],512),[[Ge,!m.value[`tag-${D}`]]])]))),128))],512),[[Ge,!m.value["main-tags"]]])])):x("",!0),r.value.length>0?(a(),i("div",Ro,[e("div",{class:"flex items-center justify-between cursor-pointer py-2 hover:bg-gray-700 rounded-md px-2",onClick:k[3]||(k[3]=I=>b("inactive-projects"))},[k[14]||(k[14]=e("h3",{class:"text-sm font-semibold text-gray-400"},"Inactive Projects",-1)),(a(),i("svg",{class:H(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!m.value["inactive-projects"]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},k[13]||(k[13]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))]),N(e("ul",Oo,[(a(!0),i(ee,null,re(r.value,I=>(a(),i("li",{key:I.id},[d(U(Te),{href:T.route("projects.show",I.id),onClick:D=>V(I.id),class:H({"block w-full text-left px-3 py-2 rounded-md transition-colors":!0,"bg-indigo-600 text-white":I.id===n.activeProjectId,"hover:bg-gray-700 text-gray-200":I.id!==n.activeProjectId,"font-bold":I.id===n.activeProjectId})},{default:h(()=>[e("span",qo,j(I.name)+" ("+j(I.status.replace("_"," "))+")",1)]),_:2},1032,["href","onClick","class"])]))),128))],512),[[Ge,!m.value["inactive-projects"]]])])):x("",!0),v.value.length>0?(a(),i("div",Wo,[e("div",{class:"flex items-center justify-between cursor-pointer py-2 hover:bg-gray-700 rounded-md px-2",onClick:k[4]||(k[4]=I=>b("uncategorized"))},[k[16]||(k[16]=e("h3",{class:"text-sm font-semibold text-gray-400"},"Uncategorized",-1)),(a(),i("svg",{class:H(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!m.value.uncategorized}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},k[15]||(k[15]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))]),N(e("ul",Ho,[(a(!0),i(ee,null,re(v.value,I=>(a(),i("li",{key:I.id},[d(U(Te),{href:T.route("projects.show",I.id),onClick:D=>V(I.id),class:H({"block w-full text-left px-3 py-2 rounded-md transition-colors":!0,"bg-indigo-600 text-white":I.id===n.activeProjectId,"hover:bg-gray-700 text-gray-200":I.id!==n.activeProjectId,"font-bold":I.id===n.activeProjectId})},{default:h(()=>[e("span",Ko,j(I.name),1)]),_:2},1032,["href","onClick","class"])]))),128))],512),[[Ge,!m.value.uncategorized]])])):x("",!0),u.value.length===0?(a(),i("div",Jo," No projects found matching your search. ")):n.allProjects.length===0&&!p.value?(a(),i("div",Yo," No projects available. ")):x("",!0)]))],2))}},ei=Ke(Xo,[["__scopeId","data-v-417d431f"]]),ti={class:"relative"},mt={__name:"Dropdown",props:{align:{type:String,default:"right"},width:{type:String,default:"48"},contentClasses:{type:String,default:"py-1 bg-white"}},setup(n){const g=n,c=y=>{m.value&&y.key==="Escape"&&(m.value=!1)};we(()=>document.addEventListener("keydown",c)),tt(()=>document.removeEventListener("keydown",c));const s=q(()=>{const y={48:"w-48",64:"w-64",72:"w-72",80:"w-80",96:"w-96",full:"w-full",screen:"w-screen",auto:""},f=g.width.toString();return y[f]??y[48]}),t=q(()=>g.width.toString()==="screen"),p=q(()=>g.align==="left"?"ltr:origin-top-left rtl:origin-top-right start-0":g.align==="right"?"ltr:origin-top-right rtl:origin-top-left end-0":"origin-top"),m=$(!1);return(y,f)=>(a(),i("div",ti,[e("div",{onClick:f[0]||(f[0]=u=>m.value=!m.value)},[$e(y.$slots,"trigger")]),N(e("div",{class:"fixed inset-0 z-40",onClick:f[1]||(f[1]=u=>m.value=!1)},null,512),[[Ge,m.value]]),d(Gt,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:h(()=>[N(e("div",{class:H(["z-50 mt-2 rounded-md shadow-lg",t.value?"fixed left-0 right-0":"absolute",p.value,s.value]),style:{display:"none"},onClick:f[2]||(f[2]=u=>m.value=!1)},[e("div",{class:H(["rounded-md ring-1 ring-black ring-opacity-5",n.contentClasses])},[$e(y.$slots,"content")],2)],2),[[Ge,m.value]])]),_:3})]))}},ae={__name:"DropdownLink",props:{href:{type:String,required:!0},method:{type:String,default:"get"},as:{type:String,default:"a"}},setup(n){return(g,c)=>(a(),B(U(Te),jt({href:n.href,method:n.method,as:n.as},g.$attrs,{class:"block w-full px-4 py-2 text-start text-sm leading-5 text-gray-700 transition duration-150 ease-in-out hover:bg-gray-100 focus:bg-gray-100 focus:outline-none"}),{default:h(()=>[$e(g.$slots,"default")]),_:3},16,["href","method","as"]))}},_e={__name:"NavLink",props:{href:{type:String,required:!0},active:{type:Boolean}},setup(n){const g=n,c=q(()=>g.active?"inline-flex items-center px-1 pt-1 border-b-2 border-indigo-400 text-sm font-medium leading-5 text-gray-900 focus:outline-none focus:border-indigo-700 transition duration-150 ease-in-out":"inline-flex items-center px-1 pt-1 border-b-2 border-transparent text-sm font-medium leading-5 text-gray-500 hover:text-gray-700 hover:border-gray-300 focus:outline-none focus:text-gray-700 focus:border-gray-300 transition duration-150 ease-in-out");return(s,t)=>(a(),B(U(Te),{href:n.href,class:H(c.value)},{default:h(()=>[$e(s.$slots,"default")]),_:3},8,["href","class"]))}};/**
 * @license lucide-vue-next v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ai=dt("award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-vue-next v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const li=dt("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);/**
 * @license lucide-vue-next v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const si=dt("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);function At(n,g){return a(),i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M8.75 1A2.75 2.75 0 0 0 6 3.75v.443c-.795.077-1.584.176-2.365.298a.75.75 0 1 0 .23 1.482l.149-.022.841 10.518A2.75 2.75 0 0 0 7.596 19h4.807a2.75 2.75 0 0 0 2.742-2.53l.841-10.52.149.023a.75.75 0 0 0 .23-1.482A41.03 41.03 0 0 0 14 4.193V3.75A2.75 2.75 0 0 0 11.25 1h-2.5ZM10 4c.84 0 1.673.025 2.5.075V3.75c0-.69-.56-1.25-1.25-1.25h-2.5c-.69 0-1.25.56-1.25 1.25v.325C8.327 4.025 9.16 4 10 4ZM8.58 7.72a.75.75 0 0 0-1.5.06l.3 7.5a.75.75 0 1 0 1.5-.06l-.3-7.5Zm4.34.06a.75.75 0 1 0-1.5-.06l-.3 7.5a.75.75 0 1 0 1.5.06l.3-7.5Z","clip-rule":"evenodd"})])}const oi={class:"hidden sm:flex sm:items-center"},ii={class:"mx-auto w-full max-w-6xl"},ri={class:"grid grid-cols-2 md:grid-cols-4 gap-8"},ni={class:"space-y-1"},ui={class:"space-y-1"},di={class:"space-y-1"},ci={class:"space-y-1"},mi={class:"p-4"},vi={class:"flex justify-between items-center mb-4"},pi={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},fi={class:"border rounded-lg p-4"},gi={class:"space-y-3"},bi={class:"flex justify-end"},yi={class:"border rounded-lg p-4"},hi={class:"space-y-3"},ki={class:"flex items-center gap-3 mt-2"},wi={class:"flex items-center gap-2 text-sm"},xi={class:"flex items-center gap-2 text-sm"},_i={key:0},Ai={key:1},Ti={class:"mt-3"},Mi={class:"flex justify-end"},$i={__name:"AdminDropdown",setup(n){const g=$(!1),c=$(!1),s=je({sets:[],models:[],categoryName:"",setMode:"existing",selectedSetId:null,newSetName:"",newSetModels:[],setName:"",setModels:[],errors:{}}),t=async()=>{g.value=!0,await Promise.all([p(),m()])},p=async()=>{try{const{data:o}=await window.axios.get("/api/category-sets");s.sets=o.map(l=>({value:l.id,label:l.name,raw:l}))}catch(o){console.error("Failed to load sets",o)}},m=async()=>{try{const{data:o}=await window.axios.get("/api/models/available");s.models=o}catch(o){console.error("Failed to load models",o)}},y=()=>{s.errors={}},f=async()=>{var o;y(),c.value=!0;try{const l={name:s.setName,allowed_models:s.setModels},{data:r}=await window.axios.post("/api/category-sets",l);await p(),s.setName="",s.setModels=[]}catch(l){((o=l.response)==null?void 0:o.status)===422&&(s.errors=l.response.data.errors||{})}finally{c.value=!1}},u=async()=>{var o;y(),c.value=!0;try{const l={name:s.categoryName};s.setMode==="existing"?l.category_set_id=s.selectedSetId:(l.new_set_name=s.newSetName,l.allowed_models=s.newSetModels);const{data:r}=await window.axios.post("/api/categories",l);await p(),s.categoryName="",s.selectedSetId=null,s.newSetName="",s.newSetModels=[],s.setMode="existing"}catch(l){((o=l.response)==null?void 0:o.status)===422&&(s.errors=l.response.data.errors||{})}finally{c.value=!1}};return(o,l)=>{const r=ut("permission");return a(),i(ee,null,[e("div",oi,[d(mt,{align:"left",width:"screen","content-classes":"py-6 bg-white p-6 w-full shadow-lg"},{trigger:h(()=>l[10]||(l[10]=[e("span",{class:"inline-flex rounded-md"},[e("button",{type:"button",class:"inline-flex items-center rounded-md border border-transparent bg-white px-3 py-2 text-sm font-medium leading-4 text-gray-700 hover:text-gray-900 focus:outline-none"},[A(" Admin "),e("svg",{class:"ms-2 -me-0.5 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])])],-1)])),content:h(()=>[e("div",ii,[e("div",ri,[e("div",null,[l[17]||(l[17]=e("h4",{class:"text-xs font-semibold uppercase tracking-wider text-gray-500 mb-3"},"Management",-1)),e("div",ni,[N((a(),B(ae,{href:o.route("projects.index"),active:o.route().current("projects.index"),class:"!px-2 !py-1.5"},{default:h(()=>l[11]||(l[11]=[A("Projects",-1)])),_:1,__:[11]},8,["href","active"])),[[r,"manage_projects"]]),N((a(),B(ae,{href:o.route("clients.page"),active:o.route().current("clients.page"),class:"!px-2 !py-1.5"},{default:h(()=>l[12]||(l[12]=[A("Clients",-1)])),_:1,__:[12]},8,["href","active"])),[[r,"create_clients"]]),N((a(),B(ae,{href:o.route("users.page"),active:o.route().current("users.page"),class:"!px-2 !py-1.5"},{default:h(()=>l[13]||(l[13]=[A("Users",-1)])),_:1,__:[13]},8,["href","active"])),[[r,"create_users"]]),N((a(),B(ae,{href:o.route("leads.page"),active:o.route().current("leads.page"),class:"!px-2 !py-1.5"},{default:h(()=>l[14]||(l[14]=[A("Leads",-1)])),_:1,__:[14]},8,["href","active"])),[[r,"manage_projects"]]),N((a(),B(ae,{href:"/campaigns",active:o.$page.url&&o.$page.url.startsWith("/campaigns"),class:"!px-2 !py-1.5"},{default:h(()=>l[15]||(l[15]=[A("Campaigns",-1)])),_:1,__:[15]},8,["active"])),[[r,"manage_projects"]]),N((a(),B(ae,{href:"/admin/productivity",active:o.$page.url&&o.$page.url.startsWith("/productivity"),class:"!px-2 !py-1.5"},{default:h(()=>l[16]||(l[16]=[A("Productivity Report",-1)])),_:1,__:[16]},8,["active"])),[[r,"manage_projects"]])])]),e("div",null,[l[21]||(l[21]=e("h4",{class:"text-xs font-semibold uppercase tracking-wider text-gray-500 mb-3"},"Planning / Sharing",-1)),e("div",ui,[N((a(),B(ae,{href:o.route("availability.index"),active:o.route().current("availability.index"),class:"!px-2 !py-1.5"},{default:h(()=>l[18]||(l[18]=[A("Weekly Availability",-1)])),_:1,__:[18]},8,["href","active"])),[[r,"create_users"]]),N((a(),B(ae,{href:o.route("admin.notice-board.index"),class:"!px-2 !py-1.5"},{default:h(()=>l[19]||(l[19]=[A("Notice Board",-1)])),_:1,__:[19]},8,["href"])),[[r,"manage_notices"]]),N((a(),B(ae,{href:o.route("shareable-resources.page"),class:"!px-2 !py-1.5"},{default:h(()=>l[20]||(l[20]=[A("Shareable Resources",-1)])),_:1,__:[20]},8,["href"])),[[r,"view_shareable_resources"]])])]),e("div",null,[l[30]||(l[30]=e("h4",{class:"text-xs font-semibold uppercase tracking-wider text-gray-500 mb-3"},"Configuration",-1)),e("div",di,[N((a(),B(ae,{href:o.route("task-types.page"),active:o.route().current("task-types.page"),class:"!px-2 !py-1.5"},{default:h(()=>l[22]||(l[22]=[A("Task Types",-1)])),_:1,__:[22]},8,["href","active"])),[[r,"manage_projects"]]),N((a(),B(ae,{href:"/admin/project-tiers",class:"!px-2 !py-1.5"},{default:h(()=>l[23]||(l[23]=[A("Project Tiers",-1)])),_:1,__:[23]})),[[r,"view_project_tiers"]]),N((a(),B(ae,{href:o.route("email-templates.page"),active:o.route().current("email-templates.page"),class:"!px-2 !py-1.5"},{default:h(()=>l[24]||(l[24]=[A("Email Templates",-1)])),_:1,__:[24]},8,["href","active"])),[[r,"manage_email_templates"]]),N((a(),B(ae,{href:o.route("placeholder-definitions.page"),active:o.route().current("placeholder-definitions.page"),class:"!px-2 !py-1.5"},{default:h(()=>l[25]||(l[25]=[A("Placeholder Definitions",-1)])),_:1,__:[25]},8,["href","active"])),[[r,"manage_placeholder_definitions"]]),N((a(),B(ae,{href:o.route("automation.page"),active:o.route().current("automation.page"),class:"!px-2 !py-1.5"},{default:h(()=>l[26]||(l[26]=[A("Automation",-1)])),_:1,__:[26]},8,["href","active"])),[[r,"create_automations"]]),N((a(),B(ae,{href:o.route("prompts.page"),active:o.route().current("prompts.page"),class:"!px-2 !py-1.5"},{default:h(()=>l[27]||(l[27]=[A("Prompts",-1)])),_:1,__:[27]},8,["href","active"])),[[r,"create_automations"]]),N((a(),B(ae,{href:o.route("schedules.index"),active:o.$page.url&&o.$page.url.startsWith("/schedules"),class:"!px-2 !py-1.5"},{default:h(()=>l[28]||(l[28]=[A("Schedules",-1)])),_:1,__:[28]},8,["href","active"])),[[r,"create_schedules"]]),d(ae,{href:o.route("admin.categories.index"),class:"!px-2 !py-1.5"},{default:h(()=>l[29]||(l[29]=[A("Categories",-1)])),_:1,__:[29]},8,["href"]),e("button",{type:"button",class:"!px-2 !py-1.5 text-left text-sm text-gray-700 hover:text-gray-900",onClick:t},"Quick Add")])]),e("div",null,[l[35]||(l[35]=e("h4",{class:"text-xs font-semibold uppercase tracking-wider text-gray-500 mb-3"},"Access & Finance",-1)),e("div",ci,[N((a(),B(ae,{href:o.route("admin.roles.index"),class:"!px-2 !py-1.5"},{default:h(()=>l[31]||(l[31]=[A("Manage Roles",-1)])),_:1,__:[31]},8,["href"])),[[r,"manage_roles"]]),N((a(),B(ae,{href:o.route("admin.permissions.index"),class:"!px-2 !py-1.5"},{default:h(()=>l[32]||(l[32]=[A("Manage Permissions",-1)])),_:1,__:[32]},8,["href"])),[[r,"assign_permissions"]]),N((a(),B(ae,{href:"/admin/monthly-budgets",class:"!px-2 !py-1.5"},{default:h(()=>l[33]||(l[33]=[A("Monthly Budgets",-1)])),_:1,__:[33]})),[[r,"manage_monthly_budgets"]]),N((a(),B(ae,{href:"/admin/bonus-calculator",class:"!px-2 !py-1.5"},{default:h(()=>l[34]||(l[34]=[A("Bonus Calculator",-1)])),_:1,__:[34]})),[[r,"view_monthly_budgets"]])])])])])]),_:1})]),d(He,{show:g.value,onClose:l[9]||(l[9]=v=>g.value=!1),maxWidth:"3xl"},{default:h(()=>{var v,_,b,V,P,T,k,I;return[e("div",mi,[e("div",vi,[l[36]||(l[36]=e("h2",{class:"text-lg font-semibold"},"Manage Categories",-1)),e("button",{onClick:l[0]||(l[0]=D=>g.value=!1),class:"text-gray-400 hover:text-gray-600"},"✕")]),e("div",pi,[e("div",fi,[l[38]||(l[38]=e("h3",{class:"text-sm font-semibold mb-3"},"Create Category Set",-1)),e("div",gi,[e("div",null,[d(R,{value:"Set Name"}),d(be,{modelValue:s.setName,"onUpdate:modelValue":l[1]||(l[1]=D=>s.setName=D),class:"w-full mt-1"},null,8,["modelValue"]),d(X,{message:(_=(v=s.errors)==null?void 0:v.name)==null?void 0:_[0]},null,8,["message"])]),e("div",null,[d(R,{value:"Allowed Models (optional)"}),d(et,{options:s.models,modelValue:s.setModels,"onUpdate:modelValue":l[2]||(l[2]=D=>s.setModels=D),isMulti:!0,placeholder:"Select models"},null,8,["options","modelValue"])]),e("div",bi,[d(me,{type:"button",onClick:f,disabled:c.value},{default:h(()=>l[37]||(l[37]=[A("Create Set",-1)])),_:1,__:[37]},8,["disabled"])])])]),e("div",yi,[l[42]||(l[42]=e("h3",{class:"text-sm font-semibold mb-3"},"Create Category",-1)),e("div",hi,[e("div",null,[d(R,{value:"Category Name"}),d(be,{modelValue:s.categoryName,"onUpdate:modelValue":l[3]||(l[3]=D=>s.categoryName=D),class:"w-full mt-1"},null,8,["modelValue"]),d(X,{message:(V=(b=s.errors)==null?void 0:b.name)==null?void 0:V[0]},null,8,["message"])]),e("div",ki,[e("label",wi,[N(e("input",{type:"radio",value:"existing","onUpdate:modelValue":l[4]||(l[4]=D=>s.setMode=D)},null,512),[[Oe,s.setMode]]),l[39]||(l[39]=A(" Use Existing Set ",-1))]),e("label",xi,[N(e("input",{type:"radio",value:"new","onUpdate:modelValue":l[5]||(l[5]=D=>s.setMode=D)},null,512),[[Oe,s.setMode]]),l[40]||(l[40]=A(" Create New Set ",-1))])]),s.setMode==="existing"?(a(),i("div",_i,[d(R,{value:"Select Set"}),d(fe,{options:s.sets,modelValue:s.selectedSetId,"onUpdate:modelValue":l[6]||(l[6]=D=>s.selectedSetId=D),placeholder:"Choose a set"},null,8,["options","modelValue"]),d(X,{message:(T=(P=s.errors)==null?void 0:P.category_set_id)==null?void 0:T[0]},null,8,["message"])])):(a(),i("div",Ai,[d(R,{value:"New Set Name"}),d(be,{modelValue:s.newSetName,"onUpdate:modelValue":l[7]||(l[7]=D=>s.newSetName=D),class:"w-full mt-1"},null,8,["modelValue"]),d(X,{message:(I=(k=s.errors)==null?void 0:k.new_set_name)==null?void 0:I[0]},null,8,["message"]),e("div",Ti,[d(R,{value:"Allowed Models (optional)"}),d(et,{options:s.models,modelValue:s.newSetModels,"onUpdate:modelValue":l[8]||(l[8]=D=>s.newSetModels=D),isMulti:!0,placeholder:"Select models"},null,8,["options","modelValue"])])])),e("div",Mi,[d(me,{type:"button",onClick:u,disabled:c.value},{default:h(()=>l[41]||(l[41]=[A("Create Category",-1)])),_:1,__:[41]},8,["disabled"])])])])])])]}),_:1},8,["show"])],64)}}},Ci={class:"relative ms-3"},Si={class:"inline-flex rounded-md"},Gi={type:"button",class:"inline-flex items-center rounded-md border border-transparent bg-white px-3 py-2 text-sm font-medium leading-4 text-gray-500 transition duration-150 ease-in-out hover:text-gray-700 focus:outline-none"},ji={__name:"UserDropdown",emits:["logoutSuccess","logoutError"],setup(n,{emit:g}){const c=q(()=>We().props.auth.user),s=g,t=()=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization,s("logoutSuccess")},p=m=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization,window.location.href="/login",s("logoutError",m)};return(m,y)=>(a(),i("div",Ci,[d(mt,{align:"right",width:"48"},{trigger:h(()=>{var f;return[e("span",Si,[e("button",Gi,[A(j(c.value.name)+" ("+j((f=c.value.role_data)==null?void 0:f.name)+") ",1),y[0]||(y[0]=e("svg",{class:"ms-2 -me-0.5 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1))])])]}),content:h(()=>[d(ae,{href:m.route("profile.edit")},{default:h(()=>y[1]||(y[1]=[A(" Profile ",-1)])),_:1,__:[1]},8,["href"]),d(ae,{href:m.route("logout"),method:"post",as:"button",onSuccess:t,onError:p},{default:h(()=>y[2]||(y[2]=[A(" Log Out ",-1)])),_:1,__:[2]},8,["href"])]),_:1})]))}},Pi={class:"hidden sm:flex sm:items-center"},Ei={class:"mx-auto w-full max-w-6xl"},Ii={class:"grid grid-cols-2 md:grid-cols-3 gap-8"},Vi={class:"space-y-1"},Bi={class:"space-y-1"},Di={key:0},Ni={class:"space-y-1"},Ui={__name:"BonusDropdown",setup(n){const{canDo:g}=at();return(c,s)=>{const t=ut("permission");return a(),i("div",Pi,[d(mt,{align:"left",width:"screen","content-classes":"py-6 bg-white p-6 w-full shadow-lg"},{trigger:h(()=>s[0]||(s[0]=[e("span",{class:"inline-flex rounded-md"},[e("button",{type:"button",class:"inline-flex items-center rounded-md border border-transparent bg-white px-3 py-2 text-sm font-medium leading-4 text-gray-700 hover:text-gray-900 focus:outline-none"},[A(" Team Resources "),e("svg",{class:"ms-2 -me-0.5 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])])],-1)])),content:h(()=>[e("div",Ei,[e("div",Ii,[e("div",null,[s[4]||(s[4]=e("h4",{class:"text-xs font-semibold uppercase tracking-wider text-gray-500 mb-3"},"Program",-1)),e("div",Vi,[d(ae,{href:c.route("bonus-system.index"),active:c.route().current("bonus-system.index"),class:"!px-2 !py-1.5"},{default:h(()=>s[1]||(s[1]=[A("Bonus System",-1)])),_:1,__:[1]},8,["href","active"]),d(ae,{href:c.route("leaderboard.index"),active:c.route().current("leaderboard.index"),class:"!px-2 !py-1.5"},{default:h(()=>s[2]||(s[2]=[A("Leaderboard",-1)])),_:1,__:[2]},8,["href","active"]),d(ae,{href:c.route("kudos.index"),active:c.route().current("kudos.index"),class:"!px-2 !py-1.5"},{default:h(()=>s[3]||(s[3]=[A("Kudos",-1)])),_:1,__:[3]},8,["href","active"])])]),e("div",null,[s[7]||(s[7]=e("h4",{class:"text-xs font-semibold uppercase tracking-wider text-gray-500 mb-3"},"Valuable",-1)),e("div",Bi,[d(ae,{href:c.route("team-resources.page"),active:c.route().current("team-resources.page"),class:"!px-2 !py-1.5"},{default:h(()=>s[5]||(s[5]=[A("Resources",-1)])),_:1,__:[5]},8,["href","active"]),d(ae,{href:c.route("presentations.index"),active:c.route().current("presentations.index"),class:"!px-2 !py-1.5"},{default:h(()=>s[6]||(s[6]=[A("Presentation",-1)])),_:1,__:[6]},8,["href","active"])])]),U(g)("add_expendables").value?(a(),i("div",Di,[s[9]||(s[9]=e("h4",{class:"text-xs font-semibold uppercase tracking-wider text-gray-500 mb-3"},"Management",-1)),e("div",Ni,[N((a(),B(ae,{href:c.route("project-expendables.index"),class:"!px-2 !py-1.5"},{default:h(()=>s[8]||(s[8]=[A("Project Expendables",-1)])),_:1,__:[8]},8,["href"])),[[t,"add_expendables"]])])])):x("",!0)])])]),_:1})])}}},zi={class:"bg-white z-[49] relative w-full shadow-sm border-b border-gray-100"},Li={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Fi={class:"flex h-16 justify-between items-center"},Ri={class:"flex-shrink-0 flex items-center"},Oi={class:"hidden sm:flex items-center space-x-6"},qi={key:0,class:"group relative inline-flex items-center px-3 py-1 rounded-full bg-gradient-to-r from-green-400 to-emerald-500 text-white text-sm font-semibold shadow-lg ring-2 ring-emerald-300/60 transition-all duration-300 ease-in-out"},Wi={class:"font-bold"},Hi={key:1,class:"inline-flex items-center px-3 py-1 rounded-full bg-gray-100 text-gray-500 text-sm font-medium"},Ki={key:0,class:"absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-red-100 transform translate-x-1/2 -translate-y-1/2 bg-red-600 rounded-full"},Ji={class:"-mr-2 flex items-center sm:hidden"},Yi={class:"h-6 w-6",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24"},Qi={class:"bg-gray-50 border-t border-gray-100 py-2 hidden sm:block"},Zi={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Xi={class:"flex items-center justify-between"},er={class:"flex items-center space-x-2 overflow-x-auto no-scrollbar"},tr={class:"flex items-center space-x-2 flex-shrink-0"},ar={class:"space-y-1 pt-2 pb-3"},lr={__name:"TopNavigation",props:{unreadNotificationCount:{type:Number,default:0}},emits:["openCreateTaskModal","openAddResource","openNotificationsSidebar","open-kudo-modal","open-meeting-minutes-modal"],setup(n,{emit:g}){const c=g,s=$(!1);q(()=>We().props.auth.user);const{canDo:t}=at();t("manage_projects"),t("create_users"),t("manage_roles"),t("manage_task_types"),t("create_clients"),q(()=>t("manage_project_tiers").value||t("view_project_tiers").value||t("create_project_tiers").value||t("edit_project_tiers").value),t("manage_notices"),t("manage_email_templates"),t("manage_placeholder_definitions"),t("manage_permissions"),t("manage_monthly_budgets"),t("view_monthly_budgets"),t("view_admin_menu");const p=t("view_admin_dropdown"),m=$(null),y=$(!0),f=$(null);return we(async()=>{try{const{data:u}=await window.axios.get("/api/leaderboard/stats");m.value=(u==null?void 0:u.userMonthlyPoints)??0}catch(u){console.error("Failed to load monthly points",u),f.value="Failed to load points",m.value=0}finally{y.value=!1}}),(u,o)=>{const l=ut("permission");return a(),i("nav",zi,[e("div",Li,[e("div",Fi,[e("div",Ri,[d(U(Te),{href:u.route("dashboard")},{default:h(()=>[d(da,{class:"block h-14 w-auto fill-current text-gray-800"})]),_:1},8,["href"])]),e("div",Oi,[d(U(Te),{href:u.route("leaderboard.index"),class:"mr-3 cursor-pointer"},{default:h(()=>[y.value?(a(),i("div",Hi," Loading... ")):(a(),i("div",qi,[o[6]||(o[6]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1.5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})],-1)),e("span",Wi,j(m.value??0),1),o[7]||(o[7]=e("span",{class:"ml-1 text-white/80"},"pts",-1))]))]),_:1},8,["href"]),e("button",{onClick:o[0]||(o[0]=r=>c("openNotificationsSidebar")),class:"relative flex-shrink-0 text-gray-400 hover:text-indigo-600 p-2 rounded-full transition-colors duration-200","aria-label":"View all notifications"},[d(U(li),{class:"h-6 w-6"}),n.unreadNotificationCount>0?(a(),i("span",Ki,j(n.unreadNotificationCount),1)):x("",!0)]),d(ji)]),e("div",Ji,[e("button",{onClick:o[1]||(o[1]=r=>s.value=!s.value),class:"inline-flex items-center justify-center rounded-md p-2 text-gray-400 transition duration-150 ease-in-out hover:bg-gray-100 hover:text-gray-500 focus:bg-gray-100 focus:text-gray-500 focus:outline-none"},[(a(),i("svg",Yi,[e("path",{class:H({hidden:s.value,"inline-flex":!s.value}),"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},null,2),e("path",{class:H({hidden:!s.value,"inline-flex":s.value}),"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,2)]))])])])]),e("div",Qi,[e("div",Zi,[e("div",Xi,[e("div",er,[d(_e,{href:u.route("dashboard"),active:u.route().current("dashboard")},{default:h(()=>o[8]||(o[8]=[A(" Dashboard ",-1)])),_:1,__:[8]},8,["href","active"]),d(_e,{href:u.route("inbox"),active:u.route().current("inbox")},{default:h(()=>o[9]||(o[9]=[A(" Inbox ",-1)])),_:1,__:[9]},8,["href","active"]),d(_e,{href:u.route("workspace.index"),active:u.route().current("workspace.index")},{default:h(()=>o[10]||(o[10]=[A(" My Workspace ",-1)])),_:1,__:[10]},8,["href","active"]),d(Ui),U(p)?(a(),B($i,{key:0})):x("",!0)]),e("div",tr,[d(me,{type:"button",onClick:o[2]||(o[2]=r=>c("openCreateTaskModal")),class:"px-3 py-1.5 text-sm"},{default:h(()=>[d(U(ot),{class:"h-4 w-4 mr-1.5"}),o[11]||(o[11]=e("span",null,"Add Task",-1))]),_:1,__:[11]}),d(me,{type:"button",onClick:o[3]||(o[3]=r=>c("openAddResource")),class:"px-3 py-1.5 text-sm"},{default:h(()=>[d(U(ot),{class:"h-4 w-4 mr-1.5"}),o[12]||(o[12]=e("span",null,"Add Resource",-1))]),_:1,__:[12]}),d(me,{type:"button",onClick:o[4]||(o[4]=r=>c("open-meeting-minutes-modal")),class:"px-3 py-1.5 text-sm"},{default:h(()=>[d(U(ot),{class:"h-4 w-4 mr-1.5"}),o[13]||(o[13]=e("span",null,"Add Meeting Minutes",-1))]),_:1,__:[13]}),U(t)("create_kudos")?(a(),i("button",{key:0,type:"button",onClick:o[5]||(o[5]=r=>u.$emit("open-kudo-modal")),class:"inline-flex items-center justify-center px-3 py-1.5 text-sm font-semibold rounded-lg bg-orange-500 text-white hover:bg-orange-600 transition-colors duration-200"},[d(U(ai),{class:"h-4 w-4 mr-1.5"}),o[14]||(o[14]=e("span",null,"Give Kudo",-1))])):x("",!0)])])])]),e("div",{class:H([{block:s.value,hidden:!s.value},"sm:hidden"])},[e("div",ar,[d(_e,{href:u.route("dashboard"),active:u.route().current("dashboard")},{default:h(()=>o[15]||(o[15]=[A(" Dashboard ",-1)])),_:1,__:[15]},8,["href","active"]),d(_e,{href:u.route("inbox"),active:u.route().current("inbox")},{default:h(()=>o[16]||(o[16]=[A(" Inbox ",-1)])),_:1,__:[16]},8,["href","active"]),d(_e,{href:u.route("workspace.index"),active:u.route().current("workspace.index")},{default:h(()=>o[17]||(o[17]=[A(" My Workspace ",-1)])),_:1,__:[17]},8,["href","active"]),d(_e,{href:u.route("presentations.index"),active:u.route().current("presentations.index")},{default:h(()=>o[18]||(o[18]=[A(" Presentation ",-1)])),_:1,__:[18]},8,["href","active"]),d(_e,{href:u.route("bonus-system.index"),active:u.route().current("bonus-system.index")},{default:h(()=>o[19]||(o[19]=[A(" Bonus System ",-1)])),_:1,__:[19]},8,["href","active"]),d(_e,{href:u.route("leaderboard.index"),active:u.route().current("leaderboard.index")},{default:h(()=>o[20]||(o[20]=[A(" Leaderboard ",-1)])),_:1,__:[20]},8,["href","active"]),d(_e,{href:u.route("kudos.index"),active:u.route().current("kudos.index")},{default:h(()=>o[21]||(o[21]=[A(" Kudos ",-1)])),_:1,__:[21]},8,["href","active"]),N((a(),B(_e,{href:u.route("project-expendables.index")},{default:h(()=>o[22]||(o[22]=[A(" Project Expendables ",-1)])),_:1,__:[22]},8,["href"])),[[l,"add_expendables"]])])],2)])}}},ue={__name:"ResponsiveNavLink",props:{href:{type:String,required:!0},active:{type:Boolean},method:{type:String,default:"get"},as:{type:String,default:"a"}},setup(n){const g=n,c=q(()=>g.active?"block w-full ps-3 pe-4 py-2 border-l-4 border-indigo-400 text-start text-base font-medium text-indigo-700 bg-indigo-50 focus:outline-none focus:text-indigo-800 focus:bg-indigo-100 focus:border-indigo-700 transition duration-150 ease-in-out":"block w-full ps-3 pe-4 py-2 border-l-4 border-transparent text-start text-base font-medium text-gray-600 hover:text-gray-800 hover:bg-gray-50 hover:border-gray-300 focus:outline-none focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300 transition duration-150 ease-in-out");return(s,t)=>(a(),B(U(Te),jt({href:n.href,method:n.method,as:n.as},s.$attrs,{class:c.value}),{default:h(()=>[$e(s.$slots,"default")]),_:3},16,["href","method","as","class"]))}},sr={class:"space-y-1 pb-3 pt-2"},or={key:0,class:"mt-3 space-y-1"},ir={class:"border-t border-gray-200 pb-1 pt-4"},rr={class:"px-4"},nr={class:"text-base font-medium text-gray-800"},ur={class:"text-sm font-medium text-gray-500"},dr={class:"text-sm font-medium text-gray-500 capitalize"},cr={class:"mt-3 space-y-1"},mr={__name:"MobileNavigation",props:{showingNavigationDropdown:{type:Boolean,required:!0},unreadNotificationCount:{type:Number,default:0}},emits:["openCreateTaskModal","openAddResource","openNotificationsSidebar","logoutSuccess","logoutError"],setup(n,{emit:g}){const c=g,s=q(()=>We().props.auth.user),{canDo:t}=at(),p=t("manage_projects"),m=t("compose_emails"),y=t("approve_emails"),f=t("create_users"),u=t("manage_roles"),o=t("manage_task_types"),l=t("create_clients"),r=()=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization,c("logoutSuccess")},v=_=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization,window.location.href="/login",c("logoutError",_)};return(_,b)=>{var V;return a(),i("div",{class:H([{block:n.showingNavigationDropdown,hidden:!n.showingNavigationDropdown},"sm:hidden"])},[e("div",sr,[U(u)?(a(),i("div",or,[b[19]||(b[19]=e("div",{class:"px-4 font-medium text-base text-gray-800"},"Admin",-1)),d(ue,{href:_.route("dashboard"),active:_.route().current("dashboard")},{default:h(()=>b[3]||(b[3]=[A(" Dashboard ",-1)])),_:1,__:[3]},8,["href","active"]),U(t)("view_emails")?(a(),B(ue,{key:0,href:_.route("inbox"),active:_.route().current("inbox")},{default:h(()=>b[4]||(b[4]=[A(" Inbox ",-1)])),_:1,__:[4]},8,["href","active"])):x("",!0),U(l)?(a(),B(ue,{key:1,href:_.route("clients.page"),active:_.route().current("clients.page")},{default:h(()=>b[5]||(b[5]=[A(" Clients ",-1)])),_:1,__:[5]},8,["href","active"])):x("",!0),U(p)?(a(),B(ue,{key:2,href:_.route("projects.index"),active:_.route().current("projects.index")},{default:h(()=>b[6]||(b[6]=[A(" Projects ",-1)])),_:1,__:[6]},8,["href","active"])):x("",!0),U(f)?(a(),B(ue,{key:3,href:_.route("users.page"),active:_.route().current("users.page")},{default:h(()=>b[7]||(b[7]=[A(" Users ",-1)])),_:1,__:[7]},8,["href","active"])):x("",!0),U(m)?(a(),B(ue,{key:4,href:_.route("emails.compose"),active:_.route().current("emails.compose")},{default:h(()=>b[8]||(b[8]=[A(" Compose Email ",-1)])),_:1,__:[8]},8,["href","active"])):x("",!0),U(y)?(a(),B(ue,{key:5,href:_.route("emails.pending"),active:_.route().current("emails.pending")},{default:h(()=>b[9]||(b[9]=[A(" Approve Emails ",-1)])),_:1,__:[9]},8,["href","active"])):x("",!0),U(m)?(a(),B(ue,{key:6,href:_.route("emails.rejected"),active:_.route().current("emails.rejected")},{default:h(()=>b[10]||(b[10]=[A(" Rejected Emails ",-1)])),_:1,__:[10]},8,["href","active"])):x("",!0),U(f)?(a(),B(ue,{key:7,href:_.route("availability.index"),active:_.route().current("availability.index")},{default:h(()=>b[11]||(b[11]=[A(" Weekly Availability ",-1)])),_:1,__:[11]},8,["href","active"])):x("",!0),U(t)("manage_roles")?(a(),B(ue,{key:8,href:_.route("admin.roles.index"),active:_.route().current("admin.roles.index")},{default:h(()=>b[12]||(b[12]=[A(" Manage Roles ",-1)])),_:1,__:[12]},8,["href","active"])):x("",!0),U(t)("manage_permissions")?(a(),B(ue,{key:9,href:_.route("admin.permissions.index"),active:_.route().current("admin.permissions.index")},{default:h(()=>b[13]||(b[13]=[A(" Manage Permissions ",-1)])),_:1,__:[13]},8,["href","active"])):x("",!0),U(o)?(a(),B(ue,{key:10,href:_.route("task-types.page"),active:_.route().current("task-types.page")},{default:h(()=>b[14]||(b[14]=[A(" Task Types ",-1)])),_:1,__:[14]},8,["href","active"])):x("",!0),U(t)("manage_email_templates")?(a(),B(ue,{key:11,href:_.route("email-templates.page"),active:_.route().current("email-templates.page")},{default:h(()=>b[15]||(b[15]=[A(" Email Templates ",-1)])),_:1,__:[15]},8,["href","active"])):x("",!0),U(t)("manage_placeholder_definitions")?(a(),B(ue,{key:12,href:_.route("placeholder-definitions.page"),active:_.route().current("placeholder-definitions.page")},{default:h(()=>b[16]||(b[16]=[A(" Placeholder Definitions ",-1)])),_:1,__:[16]},8,["href","active"])):x("",!0),U(t)("view_shareable_resources")?(a(),B(ue,{key:13,href:_.route("shareable-resources.page"),active:_.route().current("shareable-resources.page")},{default:h(()=>b[17]||(b[17]=[A(" Shareable Resources ",-1)])),_:1,__:[17]},8,["href","active"])):x("",!0),U(t)("view_shareable_resources")?(a(),B(ue,{key:14,href:_.route("team-resources.page"),active:_.route().current("team-resources.page")},{default:h(()=>b[18]||(b[18]=[A(" Team Resources ",-1)])),_:1,__:[18]},8,["href","active"])):x("",!0)])):x("",!0)]),e("div",ir,[e("div",rr,[e("div",nr,j(s.value.name),1),e("div",ur,j(s.value.email),1),e("div",dr,j((V=s.value.role_data)==null?void 0:V.name),1)]),e("div",cr,[d(ue,{as:"button",onClick:b[0]||(b[0]=P=>c("openCreateTaskModal"))},{default:h(()=>b[20]||(b[20]=[A(" Add Task ",-1)])),_:1,__:[20]}),d(ue,{as:"button",onClick:b[1]||(b[1]=P=>c("openAddResource"))},{default:h(()=>b[21]||(b[21]=[A(" Add Resource ",-1)])),_:1,__:[21]}),d(ue,{as:"button",onClick:b[2]||(b[2]=P=>c("openNotificationsSidebar"))},{default:h(()=>[A(" Notifications ("+j(n.unreadNotificationCount)+") ",1)]),_:1}),d(ue,{href:_.route("profile.edit")},{default:h(()=>b[22]||(b[22]=[A(" Profile ",-1)])),_:1,__:[22]},8,["href"]),d(ue,{href:_.route("logout"),method:"post",as:"button",onSuccess:r,onError:v},{default:h(()=>b[23]||(b[23]=[A(" Log Out ",-1)])),_:1,__:[23]},8,["href"])])])],2)}}},vr={class:"space-y-4"},pr={key:0,class:"mb-4 p-3 bg-gray-100 rounded-md"},fr={class:"text-sm font-medium text-gray-900"},gr={class:"text-xs text-gray-500 mt-1"},br={class:"mb-4"},yr="post",hr="Add Note",kr="Note added successfully!",wr={__name:"TaskNoteModal",props:{show:Boolean,taskForNote:Object},emits:["close","note-added"],setup(n,{emit:g}){const c=n,s=g,t=je({note:""}),p=q(()=>{var u;return`Add Note to Task: "${(u=c.taskForNote)==null?void 0:u.name}"`}),m=q(()=>{var u;return`/api/tasks/${(u=c.taskForNote)==null?void 0:u.id}/notes`});se(()=>c.show,u=>{u&&Object.assign(t,{note:""})},{immediate:!0});const y=u=>{s("note-added",u),s("close")},f=()=>{s("close")};return(u,o)=>(a(),B(Ve,{show:n.show,title:p.value,"api-endpoint":m.value,"http-method":yr,"form-data":t,"submit-button-text":hr,"success-message":kr,onClose:f,onSubmitted:y},{default:h(({errors:l})=>[e("div",vr,[n.taskForNote?(a(),i("div",pr,[e("p",fr,j(n.taskForNote.name),1),e("p",gr,"Status: "+j(n.taskForNote.status),1)])):x("",!0),e("div",br,[d(R,{for:"task-note-content",value:"Note Content"}),N(e("textarea",{id:"task-note-content","onUpdate:modelValue":o[0]||(o[0]=r=>t.note=r),class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full h-32",placeholder:"Enter your note...",required:""},null,512),[[ne,t.note]]),d(X,{message:l.note?l.note[0]:"",class:"mt-2"},null,8,["message"])])])]),_:1},8,["show","title","api-endpoint","form-data"]))}},xr={class:"task-history-list"},_r={key:0,class:"text-center py-4"},Ar={key:1,class:"text-gray-500 text-sm py-2"},Tr={key:2,class:"space-y-3"},Mr={class:"flex items-start"},$r={class:"text-xl mr-2"},Cr={class:"text-sm text-gray-700"},Sr={class:"text-xs text-gray-500 mt-1"},Gr={__name:"TaskHistoryList",props:{activities:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},setup(n){const g=s=>s?new Date(s).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",c=s=>(console.log(s),s.includes("created")?"🆕":s.includes("started")?"🚀":s.includes("paused")?"⏸️":s.includes("resumed")?"▶️":s.includes("unblocked")?"🔓":s.includes("blocked")?"⛔":s.includes("completed")?"✅":s.includes("revised")?"🔄":s.includes("deleted")?"🗑️":s.includes("assigned")?"👤":s.includes("updated")?"📝":s.includes("added note")?"🗒️":s.includes("commented")?"💬":"📋");return(s,t)=>(a(),i("div",xr,[n.loading?(a(),i("div",_r,t[0]||(t[0]=[e("div",{class:"inline-block animate-spin rounded-full h-6 w-6 border-t-2 border-b-2 border-indigo-500"},null,-1),e("p",{class:"mt-2 text-gray-500"},"Loading activity history...",-1)]))):n.activities.length===0?(a(),i("div",Ar," No activity history available for this task. ")):(a(),i("div",Tr,[(a(!0),i(ee,null,re(n.activities,p=>{var m;return a(),i("div",{key:p.id,class:"p-3 bg-gray-50 rounded-md"},[e("div",Mr,[e("span",$r,j(c(p.description)),1),e("div",null,[e("p",Cr,j(p.description),1),e("p",Sr," By "+j(((m=p.causer)==null?void 0:m.name)||"System")+" on "+j(g(p.created_at)),1)])])])}),128))]))]))}},jr=Ke(Gr,[["__scopeId","data-v-423d54af"]]),_d=async()=>{try{return(await oe.get("/api/assigned-tasks")).data}catch(n){throw console.error("Error fetching assigned tasks:",n),de("Failed to load assigned tasks"),n}},Ad=async n=>{try{return(await oe.get(`/api/projects/${n}/tasks`)).data}catch(g){throw console.error("Error fetching project tasks:",g),de("Failed to load project tasks"),g}},Td=async n=>{try{return(await oe.get(`/api/projects/${n}/due-and-overdue-tasks`)).data}catch(g){throw console.error("Error fetching due and overdue tasks:",g),de("Failed to load due and overdue tasks"),g}},Pr=async n=>{if(!n||n.status==="In Progress")return n;try{Ce("Starting task...");const g=await oe.post(`/api/tasks/${n.id}/start`);return ge("Task started successfully"),g.data}catch(g){throw console.error("Error starting task:",g),de("Failed to start task. Please try again."),g}},Er=async n=>{if(!n||n.status!=="In Progress")return ke('Task can only be paused from "In Progress" status.'),n;try{Ce("Pausing task...");const g=await oe.post(`/api/tasks/${n.id}/pause`);return ge("Task paused successfully"),g.data}catch(g){throw console.error("Error pausing task:",g),de("Failed to pause task. Please try again."),g}},Ir=async n=>{if(!n||n.status!=="Paused")return ke('Task can only be resumed from "Paused" status.'),n;try{Ce("Resuming task...");const g=await oe.post(`/api/tasks/${n.id}/resume`);return ge("Task resumed successfully"),g.data}catch(g){throw console.error("Error resuming task:",g),de("Failed to resume task. Please try again."),g}},Vr=async n=>{if(!n||n.status==="Done")return n;if(n.status!=="In Progress")throw ke("Task must be started before it can be completed"),new Error("Task must be started before it can be completed");try{Ce("Completing task...");const g=await oe.patch(`/api/tasks/${n.id}/complete`);ge("Task completed successfully");const c=g.data;if(c!=null&&c.needs_approval){const s=(c==null?void 0:c.creator_name)||"the creator";Ce(`This task requires approval. A notification has been sent to ${s}.`)}return c}catch(g){throw console.error("Error completing task:",g),g.response&&g.response.status===422?ke(g.response.data.message||"Task must be started before it can be completed"):de("Failed to complete task. Please try again."),g}},Br=async(n,g)=>{if(!n||n.status==="Blocked")return ke("Task is already blocked."),n;if(n.status==="Done")return ke("Completed tasks cannot be blocked."),n;if(!g)throw ke("Please provide a reason for blocking the task"),new Error("Blocking reason is required");try{Ce("Blocking task...");const c=await oe.post(`/api/tasks/${n.id}/block`,{reason:g});return ge("Task blocked successfully"),c.data}catch(c){throw console.error("Error blocking task:",c),de("Failed to block task. Please try again."),c}},Dr=async n=>{if(!n||n.status!=="Blocked")return ke("Task is not in a blocked state."),n;try{Ce("Unblocking task...");const g=await oe.post(`/api/tasks/${n.id}/unblock`);return ge("Task unblocked successfully"),g.data}catch(g){throw console.error("Error unblocking task:",g),de("Failed to unblock task. Please try again."),g}},Nr=async n=>{if(!n||n.status!=="Done")return ke("Only completed tasks can be revised."),n;try{Ce("Revising task...");const g=await oe.post(`/api/tasks/${n.id}/revise`);return ge("Task revised successfully"),g.data}catch(g){throw console.error("Error revising task:",g),g.response&&g.response.status===422?ke(g.response.data.message||"Only completed tasks can be revised"):de("Failed to revise task. Please try again."),g}},Ur=async n=>{if(!n)return!1;if(n.status!=="To Do")throw ke("Only tasks in To Do status can be deleted"),new Error("Only tasks in To Do status can be deleted");if(!confirm("Are you sure you want to delete this task? This action cannot be undone."))return!1;try{return Ce("Deleting task..."),await oe.delete(`/api/tasks/${n.id}`),ge("Task deleted successfully"),!0}catch(g){throw console.error("Error deleting task:",g),de("Failed to delete task. Please try again."),g}},zr=n=>{switch(n){case"To Do":return"bg-yellow-100 text-yellow-800";case"In Progress":return"bg-blue-100 text-blue-800";case"Paused":return"bg-orange-100 text-orange-800";case"Blocked":return"bg-red-100 text-red-800";case"Done":return"bg-green-100 text-green-800";case"Archived":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},Md=n=>{switch(n){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},$d=n=>n?n.charAt(0).toUpperCase()+n.slice(1):"Medium",Lr={class:"mt-4"},Fr={__name:"ChecklistCreator",props:{modelValue:{type:Array,required:!0},placeholder:{type:String,default:"e.g., Task 1, Task 2, Task 3"},label:{type:String,default:"Checklist Items"},density:{type:String,default:"spacious",validator:n=>["spacious","tight","notes"].includes(n)}},emits:["update:modelValue"],setup(n,{emit:g}){const c=n,s=g,t=$([]),p=$([]),m=$(!1);se(()=>c.modelValue,l=>{m.value=!0,t.value=JSON.parse(JSON.stringify(l)),(t.value.length===0||t.value[t.value.length-1].name.trim()!=="")&&t.value.push({name:"",completed:!1}),Ie(()=>{m.value=!1})},{immediate:!0,deep:!0}),se(()=>t.value,l=>{m.value||s("update:modelValue",l)},{deep:!0});function y(l){t.value.splice(l,1),t.value.length===0&&t.value.push({name:"",completed:!1})}function f(l){l===t.value.length-1&&t.value[l].name.trim()!==""&&t.value.push({name:"",completed:!1})}function u(l){l<t.value.length-1&&Ie(()=>{var r;(r=p.value[l+1])==null||r.focus()})}const o=q(()=>c.density==="tight"?{listClass:"space-y-1",itemClass:"flex items-center space-x-1",inputClass:"px-1 py-1 text-sm"}:c.density==="notes"?{listClass:"space-y-0.5",itemClass:"flex items-center space-x-1",inputClass:"px-1 py-0.5 text-sm border-transparent focus:border-transparent focus:ring-0 bg-transparent"}:{listClass:"space-y-2",itemClass:"flex items-center space-x-2",inputClass:""});return(l,r)=>(a(),i("div",Lr,[n.label?(a(),B(R,{key:0,value:n.label},null,8,["value"])):x("",!0),e("ul",{class:H(o.value.listClass)},[(a(!0),i(ee,null,re(t.value,(v,_)=>(a(),i("li",{key:_,class:H(o.value.itemClass)},[n.density==="notes"?(a(),B(U(At),{key:0,class:"h4 w-4",onClick:b=>y(_)},null,8,["onClick"])):x("",!0),d(be,{modelValue:v.name,"onUpdate:modelValue":b=>v.name=b,type:"text",class:H(["flex-1",o.value.inputClass]),placeholder:_===t.value.length-1?n.placeholder:"",onInput:b=>f(_),onKeyup:Ye(St(b=>u(_),["prevent"]),["enter"]),ref_for:!0,ref:b=>{b&&(p.value[_]=b)}},null,8,["modelValue","onUpdate:modelValue","class","placeholder","onInput","onKeyup"]),t.value.length>1&&n.density!=="notes"?(a(),B(ct,{key:1,type:"button",onClick:b=>y(_)},{default:h(()=>[d(U(At),{class:"h-4 w-4"})]),_:2},1032,["onClick"])):x("",!0)],2))),128))],2)]))}},Rr={class:"p-6"},Or={class:"text-lg font-medium text-gray-900 mb-4"},qr={class:"mb-4"},Wr=["placeholder"],Hr={class:"flex justify-end space-x-3"},Kr={__name:"BlockReasonModal",props:{show:{type:Boolean,default:!1},title:{type:String,default:"Block Task"},confirmText:{type:String,default:"Block Task"},placeholder:{type:String,default:"Enter reason for blocking..."},initialReason:{type:String,default:""},disabled:{type:Boolean,default:!1}},emits:["close","confirm"],setup(n,{emit:g}){const c=n,s=g,t=$("");se(()=>c.show,y=>{y&&(t.value=c.initialReason||"")},{immediate:!0});const p=()=>s("close"),m=()=>{const y=(t.value||"").trim();y&&s("confirm",y)};return(y,f)=>(a(),B(He,{show:n.show,onClose:p},{default:h(()=>[e("div",Rr,[e("h2",Or,j(n.title),1),e("div",qr,[f[1]||(f[1]=e("p",{class:"text-sm text-gray-600 mb-2"},"Please provide a reason:",-1)),N(e("textarea",{"onUpdate:modelValue":f[0]||(f[0]=u=>t.value=u),class:"w-full rounded-md shadow-sm border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",rows:"3",placeholder:n.placeholder},null,8,Wr),[[ne,t.value]])]),e("div",Hr,[d(Xe,{onClick:p},{default:h(()=>f[2]||(f[2]=[A("Cancel",-1)])),_:1,__:[2]}),d(me,{onClick:m,disabled:n.disabled||!t.value.trim(),class:"bg-red-600 hover:bg-red-700"},{default:h(()=>[A(j(n.confirmText),1)]),_:1},8,["disabled"])])])]),_:1},8,["show"]))}},Jr={key:0,class:"text-center py-8 text-gray-500"},Yr={key:1,class:"text-center py-8 text-red-600"},Qr={key:2,class:"space-y-6"},Zr={class:"bg-gray-50 p-4 rounded-lg shadow-sm"},Xr={class:"text-xl font-bold text-gray-900 mb-2"},en={class:"flex flex-wrap items-center gap-y-1 gap-x-2 text-sm text-gray-600 mb-4"},tn={key:0,class:"text-indigo-600 font-medium"},an={class:"w-full flex items-center gap-1 mt-1"},ln={key:0,class:"text-blue-700 font-bold uppercase tracking-wider text-[10px] bg-blue-50 px-1.5 py-0.5 rounded border border-blue-100"},sn={key:1,class:"text-gray-400 mx-0.5"},on={key:2,class:"text-purple-600 font-medium"},rn={class:"text-gray-700 leading-relaxed"},nn={class:"mt-4 flex flex-wrap gap-2"},un={key:0,class:"text-xs text-gray-500 mt-1"},dn={key:0,class:"bg-yellow-50 border-l-4 border-red-400 p-4 rounded-lg shadow-sm"},cn={class:"flex items-center"},mn={class:"ml-3"},vn={class:"mt-2 text-sm text-yellow-700"},pn={key:1,class:"bg-amber-50 border-l-4 border-amber-400 p-4 rounded-lg shadow-sm"},fn={class:"flex items-start"},gn={class:"ml-3"},bn={class:"mt-1 text-sm text-amber-700"},yn={key:0},hn={class:"font-medium"},kn={class:"text-red-500"},wn={key:2,class:"bg-blue-50 border-l-4 border-blue-400 p-3 rounded-lg shadow-sm"},xn={class:"space-y-4 p-4 bg-white rounded-lg shadow-sm mb-4"},_n={class:"flex justify-between items-center border-b pb-2 mb-4"},An={key:0},Tn={key:1},Mn={key:0,class:"mb-4"},$n={class:"flex justify-end mt-4"},Cn={key:2,class:"text-gray-500 text-sm py-2"},Sn={class:"space-y-4 p-4 bg-white rounded-lg shadow-sm"},Gn={class:"flex items-center justify-between py-2 border-b border-gray-100"},jn={class:"flex-1 text-right"},Pn={key:0,class:"text-xs text-gray-400 ml-1"},En={key:1,class:"flex items-center space-x-2"},In={class:"flex items-center justify-between py-2 border-b border-gray-100"},Vn={class:"flex-1 text-right"},Bn={key:0,class:"text-xs text-gray-400 ml-1"},Dn={key:1,class:"flex items-center space-x-2"},Nn={class:"flex items-center justify-between py-2 border-b border-gray-100"},Un={class:"flex-1 text-right"},zn={key:0,class:"text-xs text-gray-400 ml-1"},Ln={key:1,class:"flex items-center space-x-2"},Fn={class:"flex items-center justify-between py-2 border-b border-gray-100"},Rn={class:"text-gray-700"},On={class:"flex items-start py-2 border-b border-gray-100"},qn={class:"flex-1 flex flex-wrap gap-2"},Wn={key:0,class:"text-gray-500 text-sm"},Hn={class:"bg-white p-4 rounded-lg shadow-sm"},Kn={class:"mb-4 border-b pb-3 flex flex-col gap-3"},Jn={class:"flex items-center justify-between"},Yn={class:"flex items-center gap-2"},Qn=["disabled"],Zn={key:0,class:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Xn={class:"flex items-center gap-3"},eu={class:"relative inline-flex items-center px-4 py-2 rounded-md border border-dashed border-indigo-300 text-indigo-700 bg-indigo-50 hover:bg-indigo-100 cursor-pointer transition"},tu=["disabled"],au={key:0,class:"flex flex-wrap gap-2"},lu=["title"],su=["onClick"],ou={key:0,class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3"},iu={key:1,class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3"},ru={class:"aspect-video bg-gray-50 flex items-center justify-center overflow-hidden"},nu=["src","alt","onClick"],uu=["onClick"],du={class:"p-2 flex items-center justify-between"},cu=["title","onClick"],mu=["onClick"],vu={key:2,class:"text-sm text-gray-500"},pu={class:"bg-white p-4 rounded-lg shadow-sm"},fu={class:"flex justify-between items-center mb-4 border-b pb-2"},gu={key:0,class:"space-y-3"},bu={class:"text-sm text-gray-700"},yu={class:"text-xs text-gray-500 mt-1"},hu={key:1,class:"text-gray-500 text-sm py-2"},ku={class:"bg-white p-4 rounded-lg shadow-sm"},wu={key:3,class:"text-center py-8 text-gray-500"},xu={key:4,class:"mt-4 flex flex-col items-center"},_u={key:0,class:"text-xs text-red-500 mt-1"},Au={class:"p-4 sm:p-6 w-full max-w-4xl"},Tu={class:"flex justify-between items-center mb-3"},Mu=["title"],$u={class:"bg-black/5 rounded-lg overflow-hidden",style:{"min-height":"320px"}},Cu=["src"],Su=["src"],Gu={key:2,class:"p-6 text-center text-gray-700"},ju=["href"],Pu={key:3,class:"p-6 text-center text-gray-500"},Eu={__name:"TaskDetailSidebar",props:{taskId:{type:Number,required:!0},projectId:{type:Number,required:!0},projectUsers:{type:Array,default:()=>[]}},emits:["close","task-updated","task-deleted"],setup(n,{emit:g}){const c=n,s=g,t=$(null),p=$(!0),m=$(""),y=q(()=>{var S,w;return((w=(S=t.value)==null?void 0:S.milestone)==null?void 0:w.project_id)||null});aa(y);const f=q(()=>{const S=y.value;return S?{id:S}:null}),u=la(f),{canDo:o,canManage:l}=at(y),r=l("projects",u),v=q(()=>o("change_due_date",u).value===!0||r.value===!0),_=$(!1),b=$(!1),V=$(!1),P=$(null),T=$(null),k=$(null),I=$([]),D=$(!1),F=$([]),W=$(!1),G=$(!1),E=$([]),O=async()=>{if(c.taskId){W.value=!0;try{const S=await window.axios.get("/api/files",{params:{model_type:"Task",model_id:c.taskId}});F.value=S.data||[]}catch(S){console.error("Error fetching task files",S)}finally{W.value=!1}}},z=S=>{E.value=Array.from(S.target.files||[])},C=async()=>{if(!E.value.length)return;G.value=!0;const S=new FormData;E.value.forEach((w,pe)=>S.append(`files[${pe}]`,w)),S.append("model_type","Task"),S.append("model_id",c.taskId);try{await window.axios.post("/api/files",S,{headers:{"Content-Type":"multipart/form-data"}}),ge("Files uploaded"),E.value=[],await O()}catch(w){console.error("Upload failed",w),de("Failed to upload files")}finally{G.value=!1}},Z=async S=>{if(await sa(`Delete file "${S.filename}"?`,{confirmText:"Delete",cancelText:"Cancel",type:"warning"}))try{await window.axios.delete(`/api/files/${S.id}`),ge("File deleted"),await O()}catch(pe){console.error("Delete failed",pe),de("Failed to delete file")}},ie=$(!1),Y=$(null),te=S=>{Y.value=S,ie.value=!0},J=()=>{ie.value=!1,Y.value=null},ce=S=>S?S.thumbnail_url?S.thumbnail_url:S.mime_type&&S.mime_type.includes("image")&&S.path_url?S.path_url:null:null,ve=S=>{if(!S)return{type:"none"};const w=S.path_url||null,pe=(S.mime_type||"").toLowerCase();return w?pe.includes("image")?{type:"image",src:w}:pe.includes("pdf")||pe.includes("text")||pe.includes("html")?{type:"iframe",src:w}:{type:"external_link",url:w}:{type:"none"}},ye=q(()=>ve(Y.value)),Be=[{value:"low",label:"Low"},{value:"medium",label:"Medium"},{value:"high",label:"High"}],Me=$(!1),xe=$(!1),Ae=$([{name:"",completed:!1}]),De=$(!1),L=async()=>{p.value=!0,m.value="";try{const S=await window.axios.get(`/api/tasks/${c.taskId}`);t.value=S.data,P.value=t.value.assigned_to_id||null,T.value=t.value.due_date||null,k.value=t.value.priority||"medium",M()}catch(S){m.value="Failed to load task details.",console.error("Error fetching task details:",S)}finally{p.value=!1}},M=async()=>{D.value=!0;try{const S=await window.axios.get("/api/activities",{params:{subject_type:"App\\Models\\Task",subject_id:c.taskId}});I.value=S.data}catch(S){console.error("Error fetching task activities:",S)}finally{D.value=!1}};se(()=>c.taskId,S=>{S?(L(),O()):(t.value=null,F.value=[])},{immediate:!0});const le=$([]),K=$(!1),he=q(()=>((le.value&&le.value.length?le.value:c.projectUsers)||[]).map(w=>({value:w.id,label:w.name}))),vt=async()=>{const S=y.value;if(S){K.value=!0;try{const w=await window.axios.get(`/api/projects/${S}/users`);le.value=w.data||[]}catch(w){console.error("Failed to fetch project users",w),de("Could not load project users")}finally{K.value=!1}}},Vt=async()=>{if(!t.value||P.value===t.value.assigned_to_id){_.value=!1;return}try{const S=await window.axios.patch(`/api/tasks/${t.value.id}`,{assigned_to_user_id:P.value});t.value=S.data,s("task-updated",t.value),M()}catch(S){console.error("Error updating assigned user:",S),P.value=t.value.assigned_to_id,de("Failed to update assigned user. Please try again.")}finally{_.value=!1}},Bt=async()=>{if(!t.value||T.value===t.value.due_date){b.value=!1;return}try{const S=await window.axios.patch(`/api/tasks/${t.value.id}`,{due_date:T.value});t.value=S.data,s("task-updated",t.value),M()}catch(S){console.error("Error updating due date:",S),T.value=t.value.due_date,de("Failed to update due date. Please try again.")}finally{b.value=!1}},Dt=async()=>{if(!t.value||k.value===t.value.priority){V.value=!1;return}try{const S=await window.axios.patch(`/api/tasks/${t.value.id}`,{priority:k.value});t.value=S.data,s("task-updated",t.value)}catch(S){console.error("Error updating priority:",S),k.value=t.value.priority,de("Failed to update priority. Please try again.")}finally{V.value=!1}},Nt=()=>{Me.value=!0},Ut=()=>{L(),Me.value=!1},zt=async()=>{try{await Ur(t.value),s("task-deleted",t.value.id),s("close")}catch(S){console.error("Error deleting task:",S)}},Lt=async()=>{try{t.value=await Pr(t.value),s("task-updated",t.value),M()}catch(S){console.error("Error starting task:",S)}},Ft=async()=>{try{t.value=await Er(t.value),s("task-updated",t.value),M()}catch(S){console.error("Error pausing task:",S)}},Rt=async()=>{try{t.value=await Ir(t.value),s("task-updated",t.value),M()}catch(S){console.error("Error resuming task:",S)}},Ot=async()=>{try{t.value=await Vr(t.value),s("task-updated",t.value),M()}catch(S){console.error("Error completing task:",S)}},qt=async()=>{try{t.value=await Nr(t.value),s("task-updated",t.value),M()}catch(S){console.error("Error revising task:",S)}},Wt=()=>{var S;xe.value=!xe.value,xe.value&&((S=t.value.details)!=null&&S.checklist&&t.value.details.checklist.length>0?(Ae.value=JSON.parse(JSON.stringify(t.value.details.checklist)),Ae.value[Ae.value.length-1].name!==""&&Ae.value.push({name:"",completed:!1})):Ae.value=[{name:"",completed:!1}])},Ht=async()=>{if(!De.value){De.value=!0;try{const S=Ae.value.filter(Pe=>Pe.name.trim()!==""),w={details:{...t.value.details,checklist:S}},pe=await window.axios.patch(`/api/tasks/${t.value.id}`,w);t.value=pe.data,xe.value=!1,ge("Checklist saved successfully"),s("task-updated",t.value)}catch(S){console.error("Error saving checklist:",S),de("Failed to save checklist")}finally{De.value=!1}}},Je=$(!1),Kt=()=>{Je.value=!0},Jt=async S=>{try{t.value=await Br(t.value,S),ge("Task blocked successfully"),s("task-updated",t.value),M(),Je.value=!1}catch(w){console.error("Error blocking task:",w)}},Yt=async()=>{try{t.value=await Dr(t.value),s("task-updated",t.value),M()}catch(S){console.error("Error unblocking task:",S)}},Qt=q(()=>t.value?zr(t.value.status):""),lt=q(()=>{var w,pe,Pe,Ue;if(!I.value||((w=t.value)==null?void 0:w.status)!=="Blocked")return null;const S=I.value.find(ze=>{var Le,Fe;return ze.event==="updated"&&((Fe=(Le=ze.properties)==null?void 0:Le.attributes)==null?void 0:Fe.status)==="Blocked"});return S?(console.log(S.properties),{causer:((pe=S.causer)==null?void 0:pe.name)||"Unknown",reason:((Ue=(Pe=S.properties)==null?void 0:Pe.attributes)==null?void 0:Ue.block_reason)||"No reason provided."}):null});return(S,w)=>{var pe,Pe,Ue,ze,Le,Fe,pt,ft,gt,bt,yt,ht;return a(),i("div",null,[p.value?(a(),i("div",Jr," Loading task details... ")):m.value?(a(),i("div",Yr,j(m.value),1)):t.value?(a(),i("div",Qr,[e("div",Zr,[e("h4",Xr,j(t.value.name),1),e("div",en,[e("span",{class:H(["px-2 py-1 rounded-full text-xs font-medium",Qt.value])},j(t.value.status),3),t.value.task_type?(a(),i("span",tn," | "+j((pe=t.value.task_type)==null?void 0:pe.name)+" | ",1)):x("",!0),e("div",an,[(Pe=t.value.milestone)!=null&&Pe.project?(a(),i("span",ln,j((ze=(Ue=t.value.milestone)==null?void 0:Ue.project)==null?void 0:ze.name),1)):x("",!0),(Le=t.value.milestone)!=null&&Le.project&&((Fe=t.value.milestone)!=null&&Fe.name)?(a(),i("span",sn,"/")):x("",!0),(pt=t.value.milestone)!=null&&pt.name?(a(),i("span",on,j((ft=t.value.milestone)==null?void 0:ft.name),1)):x("",!0)])]),e("p",rn,j(t.value.description||"No description provided."),1),e("div",nn,[t.value.status==="To Do"?(a(),B(me,{key:0,onClick:Lt,class:"bg-blue-600 hover:bg-blue-700"},{default:h(()=>w[12]||(w[12]=[A(" Start Task ",-1)])),_:1,__:[12]})):t.value.status==="In Progress"?(a(),B(me,{key:1,onClick:Ft,class:"bg-orange-600 hover:bg-orange-700"},{default:h(()=>w[13]||(w[13]=[A(" Pause Task ",-1)])),_:1,__:[13]})):t.value.status==="Paused"?(a(),B(me,{key:2,onClick:Rt,class:"bg-blue-600 hover:bg-blue-700"},{default:h(()=>w[14]||(w[14]=[A(" Resume Task ",-1)])),_:1,__:[14]})):t.value.status==="Blocked"?(a(),B(me,{key:3,onClick:Yt,class:"bg-green-600 hover:bg-green-700"},{default:h(()=>w[15]||(w[15]=[A(" Unblock Task ",-1)])),_:1,__:[15]})):x("",!0),t.value.status==="To Do"||t.value.status==="In Progress"||t.value.status==="Paused"?(a(),B(me,{key:4,onClick:Kt,class:"bg-red-600 hover:bg-red-700"},{default:h(()=>w[16]||(w[16]=[A(" Block Task ",-1)])),_:1,__:[16]})):x("",!0),t.value.status==="In Progress"?(a(),B(me,{key:5,onClick:Ot,class:"bg-green-600 hover:bg-green-700"},{default:h(()=>w[17]||(w[17]=[A(" Complete Task ",-1)])),_:1,__:[17]})):x("",!0),t.value.status==="Done"?(a(),B(me,{key:6,onClick:qt,class:"bg-yellow-600 hover:bg-yellow-700"},{default:h(()=>w[18]||(w[18]=[A(" Revise Task ",-1)])),_:1,__:[18]})):x("",!0)]),t.value.status==="Done"?(a(),i("div",un,' Revising will change the task status back to "To Do" ')):x("",!0)]),t.value.status==="Blocked"&&lt.value?(a(),i("div",dn,[e("div",cn,[w[20]||(w[20]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.487 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11.75 13a.75.75 0 01-1.5 0v-2.25a.75.75 0 011.5 0V13zm-1.5-7.5a.75.75 0 011.5 0v1.5a.75.75 0 01-1.5 0V5.5z","clip-rule":"evenodd"})])],-1)),e("div",mn,[w[19]||(w[19]=e("h3",{class:"text-sm font-medium text-yellow-800"},"Task Blocked",-1)),e("div",vn,[e("p",null,"This task was blocked by **"+j(lt.value.causer)+"** with the following reason:",1),e("p",null,j(lt.value.reason),1)])])])])):x("",!0),t.value.needs_approval?(a(),i("div",pn,[e("div",fn,[w[25]||(w[25]=e("svg",{class:"h-5 w-5 text-amber-500 mt-0.5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.487 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0V9a1 1 0 112 0v4zm-1 4a1.25 1.25 0 100-2.5A1.25 1.25 0 0010 17z","clip-rule":"evenodd"})],-1)),e("div",gn,[w[24]||(w[24]=e("h3",{class:"text-sm font-semibold text-amber-800"},"Approval required",-1)),e("p",bn,[w[22]||(w[22]=A(" This task needs approval",-1)),t.value.creator_name?(a(),i("span",yn,[w[21]||(w[21]=A(" from ",-1)),e("span",hn,j(t.value.creator_name),1)])):x("",!0),w[23]||(w[23]=A(". ",-1))]),e("p",kn,"Do Not, complete the task and make sure you report it to "+j(t.value.creator_name)+" or Project Manager",1)])])])):x("",!0),t.value.requires_qa?(a(),i("div",wn,w[26]||(w[26]=[Ct('<div class="flex items-start gap-2"><svg class="h-5 w-5 text-blue-500 mt-0.5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6.375c-1.148 0-2.285-.22-3.351-.651l-2.262-.906a1.125 1.125 0 00-1.537 1.04V11.25c0 5.157 3.33 9.8 8.25 11.25 4.92-1.45 8.25-6.093 8.25-11.25V5.858a1.125 1.125 0 00-1.537-1.04l-2.262.906A9.568 9.568 0 0112 6.375z"></path><path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75l2.25 2.25L15 11.25"></path></svg><div class="text-sm text-blue-800"> This task requires QA verification once completed. </div></div>',1)]))):x("",!0),e("div",xn,[e("div",_n,[w[27]||(w[27]=e("h5",{class:"text-lg font-semibold text-gray-800"},"Task Checklist",-1)),e("button",{onClick:Wt,class:"text-indigo-600 hover:text-indigo-800 text-sm font-medium flex items-center"},[xe.value?(a(),i("span",Tn,"Cancel")):(a(),i("span",An,j((gt=t.value.details)!=null&&gt.checklist&&t.value.details.checklist.length>0?"Edit Checklist":"Add Checklist"),1))])]),xe.value?(a(),i("div",Mn,[d(Fr,{modelValue:Ae.value,"onUpdate:modelValue":w[0]||(w[0]=Q=>Ae.value=Q),placeholder:"e.g., Review design, Update documentation",label:"Checklist Items",density:"notes"},null,8,["modelValue"]),e("div",$n,[d(me,{onClick:Ht,disabled:De.value,class:"flex items-center space-x-1"},{default:h(()=>[d(U(si),{class:"h-4 w-4"}),w[28]||(w[28]=e("span",null,"Save Checklist",-1))]),_:1,__:[28]},8,["disabled"])])])):x("",!0),(bt=t.value.details)!=null&&bt.checklist&&t.value.details.checklist.length>0&&!xe.value?(a(),B(ma,{key:1,items:t.value.details.checklist,"api-endpoint":`/api/tasks/${t.value.id}`,title:"Items to complete:","payload-transformer":Q=>({details:{...t.value.details,checklist:Q}})},null,8,["items","api-endpoint","payload-transformer"])):x("",!0),(!((yt=t.value.details)!=null&&yt.checklist)||t.value.details.checklist.length===0)&&!xe.value?(a(),i("div",Cn,' No checklist items for this task yet. Click "Add Checklist" to create one. ')):x("",!0)]),e("div",Sn,[w[34]||(w[34]=e("h5",{class:"text-lg font-semibold text-gray-800 border-b pb-2 mb-4"},"Task Attributes",-1)),e("div",Gn,[d(R,{class:"min-w-[100px] text-gray-600"},{default:h(()=>w[29]||(w[29]=[A("Assigned To:",-1)])),_:1,__:[29]}),e("div",jn,[_.value?(a(),i("div",En,[d(fe,{id:"edit-assigned-to",modelValue:P.value,"onUpdate:modelValue":w[2]||(w[2]=Q=>P.value=Q),options:he.value,"value-key":"value","label-key":"label",placeholder:"Unassigned",class:"mt-1 flex-1","allow-empty":!0},null,8,["modelValue","options"]),e("button",{onClick:Vt,class:"text-green-600 hover:text-green-800 text-sm font-medium"},"Save"),e("button",{onClick:w[3]||(w[3]=Q=>_.value=!1),class:"text-gray-600 hover:text-gray-800 text-sm font-medium"},"Cancel")])):(a(),i("div",{key:0,onClick:w[1]||(w[1]=Q=>t.value.status!=="Done"?(vt(),_.value=!0):ke("Cannot change assignment for a completed task. Use the Revise button to change the task status first.")),class:H(["cursor-pointer",{"text-indigo-600 hover:text-indigo-800":t.value.status!=="Done","text-gray-500":t.value.status==="Done"}])},[A(j(((ht=t.value.assigned_to)==null?void 0:ht.name)||"Unassigned")+" ",1),t.value.status!=="Done"?(a(),i("span",Pn,"(Click to edit)")):x("",!0)],2))])]),e("div",In,[d(R,{class:"min-w-[100px] text-gray-600"},{default:h(()=>w[30]||(w[30]=[A("Due Date:",-1)])),_:1,__:[30]}),e("div",Vn,[b.value?(a(),i("div",Dn,[d(be,{id:"edit-due-date",modelValue:T.value,"onUpdate:modelValue":w[5]||(w[5]=Q=>T.value=Q),type:"date",class:"mt-1 flex-1"},null,8,["modelValue"]),e("button",{onClick:Bt,class:"text-green-600 hover:text-green-800 text-sm font-medium"},"Save"),e("button",{onClick:w[6]||(w[6]=Q=>b.value=!1),class:"text-gray-600 hover:text-gray-800 text-sm font-medium"},"Cancel")])):(a(),i("div",{key:0,onClick:w[4]||(w[4]=Q=>v.value?b.value=!0:null),class:H(["cursor-pointer",v.value?"text-indigo-600 hover:text-indigo-800":"text-gray-700 cursor-default"])},[A(j(t.value.due_date?U(ca)(t.value.due_date).format("MMM D, YYYY"):"No Due Date")+" ",1),v.value?(a(),i("span",Bn,"(Click to edit)")):x("",!0)],2))])]),e("div",Nn,[d(R,{class:"min-w-[100px] text-gray-600"},{default:h(()=>w[31]||(w[31]=[A("Priority:",-1)])),_:1,__:[31]}),e("div",Un,[V.value?(a(),i("div",Ln,[d(fe,{id:"edit-priority",modelValue:k.value,"onUpdate:modelValue":w[8]||(w[8]=Q=>k.value=Q),options:Be,"value-key":"value","label-key":"label",placeholder:"Select priority",class:"mt-1 flex-1"},null,8,["modelValue"]),e("button",{onClick:Dt,class:"text-green-600 hover:text-green-800 text-sm font-medium"},"Save"),e("button",{onClick:w[9]||(w[9]=Q=>V.value=!1),class:"text-gray-600 hover:text-gray-800 text-sm font-medium"},"Cancel")])):(a(),i("div",{key:0,onClick:w[7]||(w[7]=Q=>t.value.status!=="Done"?V.value=!0:ke("Cannot change priority for a completed task. Use the Revise button to change the task status first.")),class:H(["cursor-pointer",{"text-indigo-600 hover:text-indigo-800":t.value.status!=="Done","text-gray-500":t.value.status==="Done"}])},[e("span",{class:H({"text-red-600 font-medium":t.value.priority==="high","text-yellow-600 font-medium":t.value.priority==="medium","text-green-600 font-medium":t.value.priority==="low"})},j(t.value.priority?t.value.priority.charAt(0).toUpperCase()+t.value.priority.slice(1):"Medium"),3),t.value.status!=="Done"?(a(),i("span",zn,"(Click to edit)")):x("",!0)],2))])]),e("div",Fn,[d(R,{class:"min-w-[100px] text-gray-600"},{default:h(()=>w[32]||(w[32]=[A("Created:",-1)])),_:1,__:[32]}),e("span",Rn,j(t.value.created_at?new Date(t.value.created_at).toLocaleDateString():"N/A"),1)]),e("div",On,[d(R,{class:"min-w-[100px] text-gray-600 mt-1"},{default:h(()=>w[33]||(w[33]=[A("Tags:",-1)])),_:1,__:[33]}),e("div",qn,[(a(!0),i(ee,null,re(t.value.tags,Q=>(a(),i("span",{key:Q.id,class:"inline-flex items-center px-3 py-1 text-sm font-medium bg-indigo-100 text-indigo-800 rounded-full shadow-sm"},j(Q.name),1))),128)),!t.value.tags||t.value.tags.length===0?(a(),i("span",Wn,"No tags")):x("",!0)])])]),e("div",Hn,[e("div",Kn,[e("div",Jn,[w[36]||(w[36]=e("h5",{class:"text-lg font-semibold text-gray-800"},"Files",-1)),e("div",Yn,[e("button",{type:"button",class:"inline-flex items-center px-4 py-2 rounded-md bg-indigo-600 text-white hover:bg-indigo-700 transition disabled:opacity-60 disabled:cursor-not-allowed",disabled:G.value||E.value.length===0,onClick:C},[G.value?(a(),i("svg",Zn,w[35]||(w[35]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"},null,-1)]))):x("",!0),e("span",null,j(G.value?"Uploading...":"Upload"),1)],8,Qn)])]),e("div",Xn,[e("label",eu,[w[37]||(w[37]=e("svg",{class:"h-5 w-5 mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1M4 12l1.5-1.5M20 12l-1.5-1.5M12 4v12"})],-1)),w[38]||(w[38]=e("span",{class:"font-medium"},"Choose Files",-1)),e("input",{class:"absolute inset-0 opacity-0 cursor-pointer",type:"file",multiple:"",onChange:z,disabled:G.value},null,40,tu)]),w[39]||(w[39]=e("p",{class:"text-xs text-gray-500"},"You can select multiple files. Images, PDFs, Docs are supported.",-1))]),E.value.length?(a(),i("div",au,[(a(!0),i(ee,null,re(E.value,(Q,Ne)=>(a(),i("span",{key:Ne,class:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-gray-100 text-gray-800 text-xs"},[w[40]||(w[40]=e("svg",{class:"h-4 w-4 text-indigo-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})],-1)),e("span",{class:"max-w-[160px] truncate",title:Q.name},j(Q.name),9,lu),e("button",{type:"button",class:"text-gray-500 hover:text-red-600",onClick:ad=>E.value=E.value.filter((ld,Zt)=>Zt!==Ne)},"×",8,su)]))),128))])):x("",!0)]),e("div",null,[W.value?(a(),i("div",ou,[(a(),i(ee,null,re(6,Q=>e("div",{key:Q,class:"h-28 bg-gray-100 rounded animate-pulse"})),64))])):F.value.length>0?(a(),i("div",iu,[(a(!0),i(ee,null,re(F.value,Q=>(a(),i("div",{key:Q.id,class:"group relative rounded-lg border border-gray-200 overflow-hidden bg-white shadow-sm hover:shadow-md transition"},[e("div",ru,[ce(Q)?(a(),i("img",{key:0,src:ce(Q),alt:Q.filename,class:"object-cover w-full h-full",onClick:Ne=>te(Q)},null,8,nu)):(a(),i("div",{key:1,class:"text-gray-400",onClick:Ne=>te(Q)},w[41]||(w[41]=[e("svg",{class:"h-10 w-10",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})],-1)]),8,uu))]),e("div",du,[e("button",{class:"text-xs text-blue-600 hover:underline truncate max-w-[70%] text-left",title:Q.filename,onClick:Ne=>te(Q)},j(Q.filename),9,cu),e("button",{class:"text-red-600 hover:text-red-800 text-xs",onClick:Ne=>Z(Q)},"Delete",8,mu)])]))),128))])):(a(),i("div",vu,"No files attached."))])]),e("div",pu,[e("div",fu,[w[43]||(w[43]=e("h5",{class:"text-lg font-semibold text-gray-800"},"Notes",-1)),d(me,{onClick:Nt,class:"bg-indigo-600 hover:bg-indigo-700 transition-colors"},{default:h(()=>w[42]||(w[42]=[A(" Add Note ",-1)])),_:1,__:[42]})]),t.value.notes&&t.value.notes.length>0?(a(),i("div",gu,[(a(!0),i(ee,null,re(t.value.notes,Q=>(a(),i("div",{key:Q.id,class:"p-3 bg-gray-50 rounded-md"},[e("p",bu,j(Q.content),1),e("p",yu," By "+j(Q.creator_name||"Unknown")+" on "+j(new Date(Q.created_at).toLocaleDateString()),1)]))),128))])):(a(),i("div",hu,"No notes for this task yet."))]),e("div",ku,[w[44]||(w[44]=e("h5",{class:"text-lg font-semibold text-gray-800 border-b pb-2 mb-4"},"History",-1)),d(jr,{activities:I.value,loading:D.value},null,8,["activities","loading"])])])):(a(),i("div",wu," Select a task to view details. ")),t.value&&t.value.status!=="Done"?(a(),i("div",xu,[d(ct,{onClick:zt,disabled:t.value.status!=="To Do"},{default:h(()=>w[45]||(w[45]=[A(" Delete Task ",-1)])),_:1,__:[45]},8,["disabled"]),t.value.status!=="To Do"?(a(),i("p",_u,"Task can only be deleted in 'To Do' status.")):x("",!0)])):x("",!0),d(wr,{show:Me.value,"task-for-note":t.value,onClose:w[10]||(w[10]=Q=>Me.value=!1),onNoteAdded:Ut},null,8,["show","task-for-note"]),d(Kr,{show:Je.value,title:"Block Task","confirm-text":"Block Task",placeholder:"Enter reason for blocking...",onClose:w[11]||(w[11]=Q=>Je.value=!1),onConfirm:Jt},null,8,["show"]),d(He,{show:ie.value,onClose:J},{default:h(()=>[e("div",Au,[e("div",Tu,[e("h3",{class:"text-lg font-semibold text-gray-800 truncate",title:Y.value&&Y.value.filename?Y.value.filename:""},j(Y.value&&Y.value.filename?Y.value.filename:"Preview"),9,Mu),e("button",{class:"text-gray-500 hover:text-gray-700",onClick:J},"✕")]),e("div",$u,[A(j(ye.value.type)+" ",1),ye.value.type==="iframe"?(a(),i("iframe",{key:0,src:ye.value.src,class:"w-full h-[70vh]",frameborder:"0",allow:"autoplay; encrypted-media",allowfullscreen:""},null,8,Cu)):ye.value.type==="image"?(a(),i("img",{key:1,src:ye.value.src,alt:"Preview",class:"w-full h-auto"},null,8,Su)):ye.value.type==="external_link"?(a(),i("div",Gu,[w[46]||(w[46]=e("p",null,"This file can't be embedded. You can open it using the link below:",-1)),e("a",{href:ye.value.url,target:"_blank",class:"text-indigo-600 hover:underline break-all"},j(ye.value.url),9,ju)])):(a(),i("div",Pu,"No preview available."))])])]),_:1},8,["show"])])}}},Iu={key:1,class:"p-4 text-gray-500"},Vu={key:0,class:"flex justify-end space-x-3"},Bu={__name:"TaskSidebar",emits:["taskUpdated","taskDeleted"],setup(n){const g=$(null);return(c,s)=>(a(),B(It,{show:U(Se).show,"onUpdate:show":U(st),title:U(Se).taskId?"Task Details":"Details",initialWidth:50},{content:h(()=>[U(Se).taskId?(a(),B(Eu,{key:0,"task-id":U(Se).taskId,"project-id":U(Se).projectId,"project-users":U(Se).projectUsers,ref_key:"taskDetailSidebarRef",ref:g,onClose:U(st),onTaskUpdated:s[0]||(s[0]=t=>{c.$emit("taskUpdated",t)}),onTaskDeleted:s[1]||(s[1]=t=>{c.$emit("taskDeleted",t),U(st)()})},null,8,["task-id","project-id","project-users","onClose"])):U(Se).show?(a(),i("div",Iu," No task selected or task ID is missing. ")):x("",!0)]),footer:h(()=>[U(Se).taskId?(a(),i("div",Vu,[g.value&&g.value.task&&g.value.task.status!=="In Progress"&&g.value.task.status!=="Done"?(a(),B(Xe,{key:0,onClick:g.value.startTask,class:"bg-blue-50 text-blue-700 hover:bg-blue-100"},{default:h(()=>s[2]||(s[2]=[A(" Start Task ",-1)])),_:1,__:[2]},8,["onClick"])):x("",!0),g.value&&g.value.task&&g.value.task.status==="In Progress"?(a(),B(Xe,{key:1,onClick:g.value.completeTask,class:"bg-green-50 text-green-700 hover:bg-green-100"},{default:h(()=>s[3]||(s[3]=[A(" Complete Task ",-1)])),_:1,__:[3]},8,["onClick"])):x("",!0),g.value&&g.value.task?(a(),B(ct,{key:2,onClick:g.value.deleteTask,class:"bg-red-50 text-red-700 hover:bg-red-100"},{default:h(()=>s[4]||(s[4]=[A(" Delete Task ",-1)])),_:1,__:[4]},8,["onClick"])):x("",!0)])):x("",!0)]),_:1},8,["show","onUpdate:show","title"]))}},it=$(!1),Re=$([]),rt=$(!1);function Du(){const n=async()=>{var s;try{const t=await oe.get("/api/notices/unread");Re.value=((s=t.data)==null?void 0:s.data)||[],it.value=Re.value.length>0}catch(t){console.error("Failed to fetch unread notices",t)}},g=async()=>{if(rt.value)try{const s=Re.value.map(t=>t.id);if(s.length===0)return;await oe.post("/api/notices/acknowledge",{notice_ids:s}),c()}catch(s){console.error("Failed to acknowledge notices",s)}},c=()=>{it.value=!1,Re.value=[],rt.value=!1};return we(()=>{n()}),Pt(()=>{}),{showNoticeModal:it,unreadNotices:Re,acknowledgeChecked:rt,fetchUnreadNotices:n,acknowledgeNotices:g,closeModal:c}}const Nu={class:"mb-4"},Uu={__name:"TimezoneSelect",props:{modelValue:{type:String,default:null},label:{type:String,default:"Timezone"},placeholder:{type:String,default:"Select a timezone"},disabled:{type:Boolean,default:!1},required:{type:Boolean,default:!1},error:{type:String,default:""}},emits:["update:modelValue","change"],setup(n,{emit:g}){const c=n,s=g,t=q(()=>[{value:"Africa/Abidjan",label:"Africa/Abidjan (GMT+00:00)"},{value:"Africa/Accra",label:"Africa/Accra (GMT+00:00)"},{value:"Africa/Addis_Ababa",label:"Africa/Addis_Ababa (GMT+03:00)"},{value:"Africa/Algiers",label:"Africa/Algiers (GMT+01:00)"},{value:"Africa/Asmara",label:"Africa/Asmara (GMT+03:00)"},{value:"Africa/Bamako",label:"Africa/Bamako (GMT+00:00)"},{value:"Africa/Bangui",label:"Africa/Bangui (GMT+01:00)"},{value:"Africa/Banjul",label:"Africa/Banjul (GMT+00:00)"},{value:"Africa/Bissau",label:"Africa/Bissau (GMT+00:00)"},{value:"Africa/Blantyre",label:"Africa/Blantyre (GMT+02:00)"},{value:"Africa/Brazzaville",label:"Africa/Brazzaville (GMT+01:00)"},{value:"Africa/Bujumbura",label:"Africa/Bujumbura (GMT+02:00)"},{value:"Africa/Cairo",label:"Africa/Cairo (GMT+02:00)"},{value:"Africa/Casablanca",label:"Africa/Casablanca (GMT+01:00)"},{value:"Africa/Ceuta",label:"Africa/Ceuta (GMT+01:00)"},{value:"Africa/Conakry",label:"Africa/Conakry (GMT+00:00)"},{value:"Africa/Dakar",label:"Africa/Dakar (GMT+00:00)"},{value:"Africa/Dar_es_Salaam",label:"Africa/Dar_es_Salaam (GMT+03:00)"},{value:"Africa/Djibouti",label:"Africa/Djibouti (GMT+03:00)"},{value:"Africa/Douala",label:"Africa/Douala (GMT+01:00)"},{value:"Africa/El_Aaiun",label:"Africa/El_Aaiun (GMT+01:00)"},{value:"Africa/Freetown",label:"Africa/Freetown (GMT+00:00)"},{value:"Africa/Gaborone",label:"Africa/Gaborone (GMT+02:00)"},{value:"Africa/Harare",label:"Africa/Harare (GMT+02:00)"},{value:"Africa/Johannesburg",label:"Africa/Johannesburg (GMT+02:00)"},{value:"Africa/Juba",label:"Africa/Juba (GMT+03:00)"},{value:"Africa/Kampala",label:"Africa/Kampala (GMT+03:00)"},{value:"Africa/Khartoum",label:"Africa/Khartoum (GMT+02:00)"},{value:"Africa/Kigali",label:"Africa/Kigali (GMT+02:00)"},{value:"Africa/Kinshasa",label:"Africa/Kinshasa (GMT+01:00)"},{value:"Africa/Lagos",label:"Africa/Lagos (GMT+01:00)"},{value:"Africa/Libreville",label:"Africa/Libreville (GMT+01:00)"},{value:"Africa/Lome",label:"Africa/Lome (GMT+00:00)"},{value:"Africa/Luanda",label:"Africa/Luanda (GMT+01:00)"},{value:"Africa/Lubumbashi",label:"Africa/Lubumbashi (GMT+02:00)"},{value:"Africa/Lusaka",label:"Africa/Lusaka (GMT+02:00)"},{value:"Africa/Malabo",label:"Africa/Malabo (GMT+01:00)"},{value:"Africa/Maputo",label:"Africa/Maputo (GMT+02:00)"},{value:"Africa/Maseru",label:"Africa/Maseru (GMT+02:00)"},{value:"Africa/Mbabane",label:"Africa/Mbabane (GMT+02:00)"},{value:"Africa/Mogadishu",label:"Africa/Mogadishu (GMT+03:00)"},{value:"Africa/Monrovia",label:"Africa/Monrovia (GMT+00:00)"},{value:"Africa/Nairobi",label:"Africa/Nairobi (GMT+03:00)"},{value:"Africa/Ndjamena",label:"Africa/Ndjamena (GMT+01:00)"},{value:"Africa/Niamey",label:"Africa/Niamey (GMT+01:00)"},{value:"Africa/Nouakchott",label:"Africa/Nouakchott (GMT+00:00)"},{value:"Africa/Ouagadougou",label:"Africa/Ouagadougou (GMT+00:00)"},{value:"Africa/Porto-Novo",label:"Africa/Porto-Novo (GMT+01:00)"},{value:"Africa/Sao_Tome",label:"Africa/Sao_Tome (GMT+00:00)"},{value:"Africa/Tripoli",label:"Africa/Tripoli (GMT+02:00)"},{value:"Africa/Tunis",label:"Africa/Tunis (GMT+01:00)"},{value:"Africa/Windhoek",label:"Africa/Windhoek (GMT+02:00)"},{value:"America/Adak",label:"America/Adak (GMT-10:00)"},{value:"America/Anchorage",label:"America/Anchorage (GMT-09:00)"},{value:"America/Anguilla",label:"America/Anguilla (GMT-04:00)"},{value:"America/Antigua",label:"America/Antigua (GMT-04:00)"},{value:"America/Araguaina",label:"America/Araguaina (GMT-03:00)"},{value:"America/Argentina/Buenos_Aires",label:"America/Argentina/Buenos_Aires (GMT-03:00)"},{value:"America/Argentina/Catamarca",label:"America/Argentina/Catamarca (GMT-03:00)"},{value:"America/Argentina/Cordoba",label:"America/Argentina/Cordoba (GMT-03:00)"},{value:"America/Argentina/Jujuy",label:"America/Argentina/Jujuy (GMT-03:00)"},{value:"America/Argentina/La_Rioja",label:"America/Argentina/La_Rioja (GMT-03:00)"},{value:"America/Argentina/Mendoza",label:"America/Argentina/Mendoza (GMT-03:00)"},{value:"America/Argentina/Rio_Gallegos",label:"America/Argentina/Rio_Gallegos (GMT-03:00)"},{value:"America/Argentina/Salta",label:"America/Argentina/Salta (GMT-03:00)"},{value:"America/Argentina/San_Juan",label:"America/Argentina/San_Juan (GMT-03:00)"},{value:"America/Argentina/San_Luis",label:"America/Argentina/San_Luis (GMT-03:00)"},{value:"America/Argentina/Tucuman",label:"America/Argentina/Tucuman (GMT-03:00)"},{value:"America/Argentina/Ushuaia",label:"America/Argentina/Ushuaia (GMT-03:00)"},{value:"America/Aruba",label:"America/Aruba (GMT-04:00)"},{value:"America/Asuncion",label:"America/Asuncion (GMT-04:00)"},{value:"America/Atikokan",label:"America/Atikokan (GMT-05:00)"},{value:"America/Bahia",label:"America/Bahia (GMT-03:00)"},{value:"America/Bahia_Banderas",label:"America/Bahia_Banderas (GMT-06:00)"},{value:"America/Barbados",label:"America/Barbados (GMT-04:00)"},{value:"America/Belem",label:"America/Belem (GMT-03:00)"},{value:"America/Belize",label:"America/Belize (GMT-06:00)"},{value:"America/Blanc-Sablon",label:"America/Blanc-Sablon (GMT-04:00)"},{value:"America/Boa_Vista",label:"America/Boa_Vista (GMT-04:00)"},{value:"America/Bogota",label:"America/Bogota (GMT-05:00)"},{value:"America/Boise",label:"America/Boise (GMT-06:00)"},{value:"America/Cambridge_Bay",label:"America/Cambridge_Bay (GMT-06:00)"},{value:"America/Campo_Grande",label:"America/Campo_Grande (GMT-04:00)"},{value:"America/Cancun",label:"America/Cancun (GMT-05:00)"},{value:"America/Caracas",label:"America/Caracas (GMT-04:00)"},{value:"America/Cayenne",label:"America/Cayenne (GMT-03:00)"},{value:"America/Cayman",label:"America/Cayman (GMT-05:00)"},{value:"America/Chicago",label:"America/Chicago (GMT-05:00)"},{value:"America/Chihuahua",label:"America/Chihuahua (GMT-06:00)"},{value:"America/Ciudad_Juarez",label:"America/Ciudad_Juarez (GMT-06:00)"},{value:"America/Costa_Rica",label:"America/Costa_Rica (GMT-06:00)"},{value:"America/Creston",label:"America/Creston (GMT-07:00)"},{value:"America/Cuiaba",label:"America/Cuiaba (GMT-04:00)"},{value:"America/Curacao",label:"America/Curacao (GMT-04:00)"},{value:"America/Danmarkshavn",label:"America/Danmarkshavn (GMT+00:00)"},{value:"America/Dawson",label:"America/Dawson (GMT-07:00)"},{value:"America/Dawson_Creek",label:"America/Dawson_Creek (GMT-07:00)"},{value:"America/Denver",label:"America/Denver (GMT-06:00)"},{value:"America/Detroit",label:"America/Detroit (GMT-04:00)"},{value:"America/Dominica",label:"America/Dominica (GMT-04:00)"},{value:"America/Edmonton",label:"America/Edmonton (GMT-06:00)"},{value:"America/Eirunepe",label:"America/Eirunepe (GMT-05:00)"},{value:"America/El_Salvador",label:"America/El_Salvador (GMT-06:00)"},{value:"America/Fort_Nelson",label:"America/Fort_Nelson (GMT-07:00)"},{value:"America/Fortaleza",label:"America/Fortaleza (GMT-03:00)"},{value:"America/Glace_Bay",label:"America/Glace_Bay (GMT-03:00)"},{value:"America/Goose_Bay",label:"America/Goose_Bay (GMT-03:00)"},{value:"America/Grand_Turk",label:"America/Grand_Turk (GMT-04:00)"},{value:"America/Grenada",label:"America/Grenada (GMT-04:00)"},{value:"America/Guadeloupe",label:"America/Guadeloupe (GMT-04:00)"},{value:"America/Guatemala",label:"America/Guatemala (GMT-06:00)"},{value:"America/Guayaquil",label:"America/Guayaquil (GMT-05:00)"},{value:"America/Guyana",label:"America/Guyana (GMT-04:00)"},{value:"America/Halifax",label:"America/Halifax (GMT-03:00)"},{value:"America/Havana",label:"America/Havana (GMT-04:00)"},{value:"America/Hermosillo",label:"America/Hermosillo (GMT-07:00)"},{value:"America/Indiana/Indianapolis",label:"America/Indiana/Indianapolis (GMT-04:00)"},{value:"America/Indiana/Knox",label:"America/Indiana/Knox (GMT-05:00)"},{value:"America/Indiana/Marengo",label:"America/Indiana/Marengo (GMT-04:00)"},{value:"America/Indiana/Petersburg",label:"America/Indiana/Petersburg (GMT-04:00)"},{value:"America/Indiana/Vevay",label:"America/Indiana/Vevay (GMT-04:00)"},{value:"America/Indiana/Vincennes",label:"America/Indiana/Vincennes (GMT-04:00)"},{value:"America/Indiana/Winamac",label:"America/Indiana/Winamac (GMT-04:00)"},{value:"America/Inuvik",label:"America/Inuvik (GMT-06:00)"},{value:"America/Iqaluit",label:"America/Iqaluit (GMT-04:00)"},{value:"America/Jamaica",label:"America/Jamaica (GMT-05:00)"},{value:"America/Juneau",label:"America/Juneau (GMT-08:00)"},{value:"America/Kentucky/Louisville",label:"America/Kentucky/Louisville (GMT-04:00)"},{value:"America/Kentucky/Monticello",label:"America/Kentucky/Monticello (GMT-04:00)"},{value:"America/La_Paz",label:"America/La_Paz (GMT-04:00)"},{value:"America/Lima",label:"America/Lima (GMT-05:00)"},{value:"America/Los_Angeles",label:"America/Los_Angeles (GMT-07:00)"},{value:"America/Lower_Princes",label:"America/Lower_Princes (GMT-04:00)"},{value:"America/Maceio",label:"America/Maceio (GMT-03:00)"},{value:"America/Managua",label:"America/Managua (GMT-06:00)"},{value:"America/Manaus",label:"America/Manaus (GMT-04:00)"},{value:"America/Marigot",label:"America/Marigot (GMT-04:00)"},{value:"America/Martinique",label:"America/Martinique (GMT-04:00)"},{value:"America/Matamoros",label:"America/Matamoros (GMT-05:00)"},{value:"America/Mazatlan",label:"America/Mazatlan (GMT-06:00)"},{value:"America/Menominee",label:"America/Menominee (GMT-05:00)"},{value:"America/Merida",label:"America/Merida (GMT-05:00)"},{value:"America/Metlakatla",label:"America/Metlakatla (GMT-08:00)"},{value:"America/Mexico_City",label:"America/Mexico_City (GMT-05:00)"},{value:"America/Miquelon",label:"America/Miquelon (GMT-02:00)"},{value:"America/Moncton",label:"America/Moncton (GMT-03:00)"},{value:"America/Monterrey",label:"America/Monterrey (GMT-05:00)"},{value:"America/Montevideo",label:"America/Montevideo (GMT-03:00)"},{value:"America/Montserrat",label:"America/Montserrat (GMT-04:00)"},{value:"America/Nassau",label:"America/Nassau (GMT-04:00)"},{value:"America/New_York",label:"America/New_York (GMT-04:00)"},{value:"America/Nome",label:"America/Nome (GMT-08:00)"},{value:"America/Noronha",label:"America/Noronha (GMT-02:00)"},{value:"America/North_Dakota/Beulah",label:"America/North_Dakota/Beulah (GMT-05:00)"},{value:"America/North_Dakota/Center",label:"America/North_Dakota/Center (GMT-05:00)"},{value:"America/North_Dakota/New_Salem",label:"America/North_Dakota/New_Salem (GMT-05:00)"},{value:"America/Nuuk",label:"America/Nuuk (GMT-02:00)"},{value:"America/Ojinaga",label:"America/Ojinaga (GMT-06:00)"},{value:"America/Panama",label:"America/Panama (GMT-05:00)"},{value:"America/Paramaribo",label:"America/Paramaribo (GMT-03:00)"},{value:"America/Phoenix",label:"America/Phoenix (GMT-07:00)"},{value:"America/Port-au-Prince",label:"America/Port-au-Prince (GMT-04:00)"},{value:"America/Port_of_Spain",label:"America/Port_of_Spain (GMT-04:00)"},{value:"America/Puerto_Rico",label:"America/Puerto_Rico (GMT-04:00)"},{value:"America/Punta_Arenas",label:"America/Punta_Arenas (GMT-03:00)"},{value:"America/Rankin_Inlet",label:"America/Rankin_Inlet (GMT-05:00)"},{value:"America/Recife",label:"America/Recife (GMT-03:00)"},{value:"America/Regina",label:"America/Regina (GMT-06:00)"},{value:"America/Resolute",label:"America/Resolute (GMT-05:00)"},{value:"America/Rio_Branco",label:"America/Rio_Branco (GMT-05:00)"},{value:"America/Santarem",label:"America/Santarem (GMT-03:00)"},{value:"America/Santiago",label:"America/Santiago (GMT-04:00)"},{value:"America/Santo_Domingo",label:"America/Santo_Domingo (GMT-04:00)"},{value:"America/Sao_Paulo",label:"America/Sao_Paulo (GMT-03:00)"},{value:"America/Scoresbysund",label:"America/Scoresbysund (GMT+00:00)"},{value:"America/Sitka",label:"America/Sitka (GMT-08:00)"},{value:"America/St_Barthelemy",label:"America/St_Barthelemy (GMT-04:00)"},{value:"America/St_Johns",label:"America/St_Johns (GMT-02:30)"},{value:"America/St_Kitts",label:"America/St_Kitts (GMT-04:00)"},{value:"America/St_Lucia",label:"America/St_Lucia (GMT-04:00)"},{value:"America/St_Thomas",label:"America/St_Thomas (GMT-04:00)"},{value:"America/St_Vincent",label:"America/St_Vincent (GMT-04:00)"},{value:"America/Swift_Current",label:"America/Swift_Current (GMT-06:00)"},{value:"America/Tegucigalpa",label:"America/Tegucigalpa (GMT-06:00)"},{value:"America/Thule",label:"America/Thule (GMT-03:00)"},{value:"America/Tijuana",label:"America/Tijuana (GMT-07:00)"},{value:"America/Toronto",label:"America/Toronto (GMT-04:00)"},{value:"America/Tortola",label:"America/Tortola (GMT-04:00)"},{value:"America/Vancouver",label:"America/Vancouver (GMT-07:00)"},{value:"America/Whitehorse",label:"America/Whitehorse (GMT-07:00)"},{value:"America/Winnipeg",label:"America/Winnipeg (GMT-05:00)"},{value:"America/Yakutat",label:"America/Yakutat (GMT-08:00)"},{value:"America/Yellowknife",label:"America/Yellowknife (GMT-06:00)"},{value:"Antarctica/Casey",label:"Antarctica/Casey (GMT+11:00)"},{value:"Antarctica/Davis",label:"Antarctica/Davis (GMT+07:00)"},{value:"Antarctica/DumontDUrville",label:"Antarctica/DumontDUrville (GMT+10:00)"},{value:"Antarctica/Macquarie",label:"Antarctica/Macquarie (GMT+11:00)"},{value:"Antarctica/Mawson",label:"Antarctica/Mawson (GMT+05:00)"},{value:"Antarctica/Palmer",label:"Antarctica/Palmer (GMT-03:00)"},{value:"Antarctica/Rothera",label:"Antarctica/Rothera (GMT-03:00)"},{value:"Antarctica/Syowa",label:"Antarctica/Syowa (GMT+03:00)"},{value:"Antarctica/Troll",label:"Antarctica/Troll (GMT+00:00)"},{value:"Antarctica/Vostok",label:"Antarctica/Vostok (GMT+06:00)"},{value:"Asia/Almaty",label:"Asia/Almaty (GMT+05:00)"},{value:"Asia/Amman",label:"Asia/Amman (GMT+03:00)"},{value:"Asia/Anadyr",label:"Asia/Anadyr (GMT+12:00)"},{value:"Asia/Aqtau",label:"Asia/Aqtau (GMT+05:00)"},{value:"Asia/Aqtobe",label:"Asia/Aqtobe (GMT+05:00)"},{value:"Asia/Ashgabat",label:"Asia/Ashgabat (GMT+05:00)"},{value:"Asia/Atyrau",label:"Asia/Atyrau (GMT+05:00)"},{value:"Asia/Baghdad",label:"Asia/Baghdad (GMT+03:00)"},{value:"Asia/Baku",label:"Asia/Baku (GMT+04:00)"},{value:"Asia/Bangkok",label:"Asia/Bangkok (GMT+07:00)"},{value:"Asia/Barnaul",label:"Asia/Barnaul (GMT+07:00)"},{value:"Asia/Beirut",label:"Asia/Beirut (GMT+03:00)"},{value:"Asia/Bishkek",label:"Asia/Bishkek (GMT+06:00)"},{value:"Asia/Brunei",label:"Asia/Brunei (GMT+08:00)"},{value:"Asia/Chita",label:"Asia/Chita (GMT+09:00)"},{value:"Asia/Choibalsan",label:"Asia/Choibalsan (GMT+08:00)"},{value:"Asia/Colombo",label:"Asia/Colombo (GMT+05:30)"},{value:"Asia/Damascus",label:"Asia/Damascus (GMT+03:00)"},{value:"Asia/Dhaka",label:"Asia/Dhaka (GMT+06:00)"},{value:"Asia/Dili",label:"Asia/Dili (GMT+09:00)"},{value:"Asia/Dubai",label:"Asia/Dubai (GMT+04:00)"},{value:"Asia/Dushanbe",label:"Asia/Dushanbe (GMT+05:00)"},{value:"Asia/Famagusta",label:"Asia/Famagusta (GMT+03:00)"},{value:"Asia/Gaza",label:"Asia/Gaza (GMT+03:00)"},{value:"Asia/Hebron",label:"Asia/Hebron (GMT+03:00)"},{value:"Asia/Ho_Chi_Minh",label:"Asia/Ho_Chi_Minh (GMT+07:00)"},{value:"Asia/Hong_Kong",label:"Asia/Hong_Kong (GMT+08:00)"},{value:"Asia/Hovd",label:"Asia/Hovd (GMT+07:00)"},{value:"Asia/Irkutsk",label:"Asia/Irkutsk (GMT+08:00)"},{value:"Asia/Jakarta",label:"Asia/Jakarta (GMT+07:00)"},{value:"Asia/Jayapura",label:"Asia/Jayapura (GMT+09:00)"},{value:"Asia/Jerusalem",label:"Asia/Jerusalem (GMT+03:00)"},{value:"Asia/Kabul",label:"Asia/Kabul (GMT+04:30)"},{value:"Asia/Kamchatka",label:"Asia/Kamchatka (GMT+12:00)"},{value:"Asia/Karachi",label:"Asia/Karachi (GMT+05:00)"},{value:"Asia/Kathmandu",label:"Asia/Kathmandu (GMT+05:45)"},{value:"Asia/Khandyga",label:"Asia/Khandyga (GMT+09:00)"},{value:"Asia/Kolkata",label:"Asia/Kolkata (GMT+05:30)"},{value:"Asia/Krasnoyarsk",label:"Asia/Krasnoyarsk (GMT+07:00)"},{value:"Asia/Kuala_Lumpur",label:"Asia/Kuala_Lumpur (GMT+08:00)"},{value:"Asia/Kuching",label:"Asia/Kuching (GMT+08:00)"},{value:"Asia/Kuwait",label:"Asia/Kuwait (GMT+03:00)"},{value:"Asia/Macau",label:"Asia/Macau (GMT+08:00)"},{value:"Asia/Magadan",label:"Asia/Magadan (GMT+11:00)"},{value:"Asia/Makassar",label:"Asia/Makassar (GMT+08:00)"},{value:"Asia/Manila",label:"Asia/Manila (GMT+08:00)"},{value:"Asia/Muscat",label:"Asia/Muscat (GMT+04:00)"},{value:"Asia/Nicosia",label:"Asia/Nicosia (GMT+03:00)"},{value:"Asia/Novokuznetsk",label:"Asia/Novokuznetsk (GMT+07:00)"},{value:"Asia/Novosibirsk",label:"Asia/Novosibirsk (GMT+07:00)"},{value:"Asia/Omsk",label:"Asia/Omsk (GMT+06:00)"},{value:"Asia/Oral",label:"Asia/Oral (GMT+05:00)"},{value:"Asia/Phnom_Penh",label:"Asia/Phnom_Penh (GMT+07:00)"},{value:"Asia/Pontianak",label:"Asia/Pontianak (GMT+07:00)"},{value:"Asia/Pyongyang",label:"Asia/Pyongyang (GMT+09:00)"},{value:"Asia/Qatar",label:"Asia/Qatar (GMT+03:00)"},{value:"Asia/Qostanay",label:"Asia/Qostanay (GMT+05:00)"},{value:"Asia/Qyzylorda",label:"Asia/Qyzylorda (GMT+05:00)"},{value:"Asia/Riyadh",label:"Asia/Riyadh (GMT+03:00)"},{value:"Asia/Sakhalin",label:"Asia/Sakhalin (GMT+11:00)"},{value:"Asia/Samarkand",label:"Asia/Samarkand (GMT+05:00)"},{value:"Asia/Seoul",label:"Asia/Seoul (GMT+09:00)"},{value:"Asia/Shanghai",label:"Asia/Shanghai (GMT+08:00)"},{value:"Asia/Singapore",label:"Asia/Singapore (GMT+08:00)"},{value:"Asia/Srednekolymsk",label:"Asia/Srednekolymsk (GMT+11:00)"},{value:"Asia/Taipei",label:"Asia/Taipei (GMT+08:00)"},{value:"Asia/Tashkent",label:"Asia/Tashkent (GMT+05:00)"},{value:"Asia/Tbilisi",label:"Asia/Tbilisi (GMT+04:00)"},{value:"Asia/Tehran",label:"Asia/Tehran (GMT+03:30)"},{value:"Asia/Thimphu",label:"Asia/Thimphu (GMT+06:00)"},{value:"Asia/Tokyo",label:"Asia/Tokyo (GMT+09:00)"},{value:"Asia/Tomsk",label:"Asia/Tomsk (GMT+07:00)"},{value:"Asia/Ulaanbaatar",label:"Asia/Ulaanbaatar (GMT+08:00)"},{value:"Asia/Urumqi",label:"Asia/Urumqi (GMT+06:00)"},{value:"Asia/Ust-Nera",label:"Asia/Ust-Nera (GMT+10:00)"},{value:"Asia/Vladivostok",label:"Asia/Vladivostok (GMT+10:00)"},{value:"Asia/Yakutsk",label:"Asia/Yakutsk (GMT+09:00)"},{value:"Asia/Yangon",label:"Asia/Yangon (GMT+06:30)"},{value:"Asia/Yekaterinburg",label:"Asia/Yekaterinburg (GMT+05:00)"},{value:"Asia/Yerevan",label:"Asia/Yerevan (GMT+04:00)"},{value:"Atlantic/Azores",label:"Atlantic/Azores (GMT-01:00)"},{value:"Atlantic/Bermuda",label:"Atlantic/Bermuda (GMT-03:00)"},{value:"Atlantic/Canary",label:"Atlantic/Canary (GMT+00:00)"},{value:"Atlantic/Cape_Verde",label:"Atlantic/Cape_Verde (GMT-01:00)"},{value:"Atlantic/Faroe",label:"Atlantic/Faroe (GMT+00:00)"},{value:"Atlantic/Madeira",label:"Atlantic/Madeira (GMT+00:00)"},{value:"Atlantic/Reykjavik",label:"Atlantic/Reykjavik (GMT+00:00)"},{value:"Atlantic/South_Georgia",label:"Atlantic/South_Georgia (GMT-02:00)"},{value:"Atlantic/St_Helena",label:"Atlantic/St_Helena (GMT+00:00)"},{value:"Atlantic/Stanley",label:"Atlantic/Stanley (GMT-03:00)"},{value:"Australia/Adelaide",label:"Australia/Adelaide (GMT+09:30)"},{value:"Australia/Brisbane",label:"Australia/Brisbane (GMT+10:00)"},{value:"Australia/Broken_Hill",label:"Australia/Broken_Hill (GMT+09:30)"},{value:"Australia/Darwin",label:"Australia/Darwin (GMT+09:30)"},{value:"Australia/Eucla",label:"Australia/Eucla (GMT+08:45)"},{value:"Australia/Hobart",label:"Australia/Hobart (GMT+10:00)"},{value:"Australia/Lindeman",label:"Australia/Lindeman (GMT+10:00)"},{value:"Australia/Lord_Howe",label:"Australia/Lord_Howe (GMT+10:30)"},{value:"Australia/Melbourne",label:"Australia/Melbourne (GMT+10:00)"},{value:"Australia/Perth",label:"Australia/Perth (GMT+08:00)"},{value:"Australia/Sydney",label:"Australia/Sydney (GMT+10:00)"},{value:"Europe/Amsterdam",label:"Europe/Amsterdam (GMT+02:00)"},{value:"Europe/Andorra",label:"Europe/Andorra (GMT+02:00)"},{value:"Europe/Astrakhan",label:"Europe/Astrakhan (GMT+04:00)"},{value:"Europe/Athens",label:"Europe/Athens (GMT+03:00)"},{value:"Europe/Belgrade",label:"Europe/Belgrade (GMT+02:00)"},{value:"Europe/Berlin",label:"Europe/Berlin (GMT+02:00)"},{value:"Europe/Brussels",label:"Europe/Brussels (GMT+02:00)"},{value:"Europe/Bucharest",label:"Europe/Bucharest (GMT+03:00)"},{value:"Europe/Budapest",label:"Europe/Budapest (GMT+02:00)"},{value:"Europe/Chisinau",label:"Europe/Chisinau (GMT+03:00)"},{value:"Europe/Copenhagen",label:"Europe/Copenhagen (GMT+02:00)"},{value:"Europe/Dublin",label:"Europe/Dublin (GMT+01:00)"},{value:"Europe/Gibraltar",label:"Europe/Gibraltar (GMT+02:00)"},{value:"Europe/Helsinki",label:"Europe/Helsinki (GMT+03:00)"},{value:"Europe/Istanbul",label:"Europe/Istanbul (GMT+03:00)"},{value:"Europe/Kaliningrad",label:"Europe/Kaliningrad (GMT+02:00)"},{value:"Europe/Kirov",label:"Europe/Kirov (GMT+03:00)"},{value:"Europe/Kyiv",label:"Europe/Kyiv (GMT+03:00)"},{value:"Europe/Lisbon",label:"Europe/Lisbon (GMT+01:00)"},{value:"Europe/London",label:"Europe/London (GMT+01:00)"},{value:"Europe/Luxembourg",label:"Europe/Luxembourg (GMT+02:00)"},{value:"Europe/Madrid",label:"Europe/Madrid (GMT+02:00)"},{value:"Europe/Malta",label:"Europe/Malta (GMT+02:00)"},{value:"Europe/Minsk",label:"Europe/Minsk (GMT+03:00)"},{value:"Europe/Monaco",label:"Europe/Monaco (GMT+02:00)"},{value:"Europe/Moscow",label:"Europe/Moscow (GMT+03:00)"},{value:"Europe/Oslo",label:"Europe/Oslo (GMT+02:00)"},{value:"Europe/Paris",label:"Europe/Paris (GMT+02:00)"},{value:"Europe/Prague",label:"Europe/Prague (GMT+02:00)"},{value:"Europe/Riga",label:"Europe/Riga (GMT+03:00)"},{value:"Europe/Rome",label:"Europe/Rome (GMT+02:00)"},{value:"Europe/Samara",label:"Europe/Samara (GMT+04:00)"},{value:"Europe/San_Marino",label:"Europe/San_Marino (GMT+02:00)"},{value:"Europe/Sarajevo",label:"Europe/Sarajevo (GMT+02:00)"},{value:"Europe/Saratov",label:"Europe/Saratov (GMT+04:00)"},{value:"Europe/Simferopol",label:"Europe/Simferopol (GMT+03:00)"},{value:"Europe/Skopje",label:"Europe/Skopje (GMT+02:00)"},{value:"Europe/Sofia",label:"Europe/Sofia (GMT+03:00)"},{value:"Europe/Stockholm",label:"Europe/Stockholm (GMT+02:00)"},{value:"Europe/Tallinn",label:"Europe/Tallinn (GMT+03:00)"},{value:"Europe/Tirane",label:"Europe/Tirane (GMT+02:00)"},{value:"Europe/Ulyanovsk",label:"Europe/Ulyanovsk (GMT+04:00)"},{value:"Europe/Uzhgorod",label:"Europe/Uzhgorod (GMT+03:00)"},{value:"Europe/Vaduz",label:"Europe/Vaduz (GMT+02:00)"},{value:"Europe/Vatican",label:"Europe/Vatican (GMT+02:00)"},{value:"Europe/Vienna",label:"Europe/Vienna (GMT+02:00)"},{value:"Europe/Vilnius",label:"Europe/Vilnius (GMT+03:00)"},{value:"Europe/Volgograd",label:"Europe/Volgograd (GMT+03:00)"},{value:"Europe/Warsaw",label:"Europe/Warsaw (GMT+02:00)"},{value:"Europe/Zagreb",label:"Europe/Zagreb (GMT+02:00)"},{value:"Europe/Zaporozhye",label:"Europe/Zaporozhye (GMT+03:00)"},{value:"Europe/Zurich",label:"Europe/Zurich (GMT+02:00)"},{value:"Indian/Antananarivo",label:"Indian/Antananarivo (GMT+03:00)"},{value:"Indian/Chagos",label:"Indian/Chagos (GMT+06:00)"},{value:"Indian/Christmas",label:"Indian/Christmas (GMT+07:00)"},{value:"Indian/Cocos",label:"Indian/Cocos (GMT+06:30)"},{value:"Indian/Comoro",label:"Indian/Comoro (GMT+03:00)"},{value:"Indian/Kerguelen",label:"Indian/Kerguelen (GMT+05:00)"},{value:"Indian/Mahe",label:"Indian/Mahe (GMT+04:00)"},{value:"Indian/Maldives",label:"Indian/Maldives (GMT+05:00)"},{value:"Indian/Mauritius",label:"Indian/Mauritius (GMT+04:00)"},{value:"Indian/Mayotte",label:"Indian/Mayotte (GMT+03:00)"},{value:"Indian/Reunion",label:"Indian/Reunion (GMT+04:00)"},{value:"Pacific/Apia",label:"Pacific/Apia (GMT+13:00)"},{value:"Pacific/Auckland",label:"Pacific/Auckland (GMT+12:00)"},{value:"Pacific/Bougainville",label:"Pacific/Bougainville (GMT+11:00)"},{value:"Pacific/Chatham",label:"Pacific/Chatham (GMT+12:45)"},{value:"Pacific/Chuuk",label:"Pacific/Chuuk (GMT+10:00)"},{value:"Pacific/Easter",label:"Pacific/Easter (GMT-06:00)"},{value:"Pacific/Efate",label:"Pacific/Efate (GMT+11:00)"},{value:"Pacific/Fakaofo",label:"Pacific/Fakaofo (GMT+13:00)"},{value:"Pacific/Fiji",label:"Pacific/Fiji (GMT+12:00)"},{value:"Pacific/Funafuti",label:"Pacific/Funafuti (GMT+12:00)"},{value:"Pacific/Galapagos",label:"Pacific/Galapagos (GMT-06:00)"},{value:"Pacific/Gambier",label:"Pacific/Gambier (GMT-09:00)"},{value:"Pacific/Guadalcanal",label:"Pacific/Guadalcanal (GMT+11:00)"},{value:"Pacific/Guam",label:"Pacific/Guam (GMT+10:00)"},{value:"Pacific/Honolulu",label:"Pacific/Honolulu (GMT-10:00)"},{value:"Pacific/Kanton",label:"Pacific/Kanton (GMT+13:00)"},{value:"Pacific/Kiritimati",label:"Pacific/Kiritimati (GMT+14:00)"},{value:"Pacific/Kosrae",label:"Pacific/Kosrae (GMT+11:00)"},{value:"Pacific/Kwajalein",label:"Pacific/Kwajalein (GMT+12:00)"},{value:"Pacific/Majuro",label:"Pacific/Majuro (GMT+12:00)"},{value:"Pacific/Marquesas",label:"Pacific/Marquesas (GMT-09:30)"},{value:"Pacific/Midway",label:"Pacific/Midway (GMT-11:00)"},{value:"Pacific/Nauru",label:"Pacific/Nauru (GMT+12:00)"},{value:"Pacific/Niue",label:"Pacific/Niue (GMT-11:00)"},{value:"Pacific/Norfolk",label:"Pacific/Norfolk (GMT+11:00)"},{value:"Pacific/Noumea",label:"Pacific/Noumea (GMT+11:00)"},{value:"Pacific/Pago_Pago",label:"Pacific/Pago_Pago (GMT-11:00)"},{value:"Pacific/Palau",label:"Pacific/Palau (GMT+09:00)"},{value:"Pacific/Pitcairn",label:"Pacific/Pitcairn (GMT-08:00)"},{value:"Pacific/Pohnpei",label:"Pacific/Pohnpei (GMT+11:00)"},{value:"Pacific/Port_Moresby",label:"Pacific/Port_Moresby (GMT+10:00)"},{value:"Pacific/Rarotonga",label:"Pacific/Rarotonga (GMT-10:00)"},{value:"Pacific/Saipan",label:"Pacific/Saipan (GMT+10:00)"},{value:"Pacific/Tahiti",label:"Pacific/Tahiti (GMT-10:00)"},{value:"Pacific/Tarawa",label:"Pacific/Tarawa (GMT+12:00)"},{value:"Pacific/Tongatapu",label:"Pacific/Tongatapu (GMT+13:00)"},{value:"Pacific/Wake",label:"Pacific/Wake (GMT+12:00)"},{value:"Pacific/Wallis",label:"Pacific/Wallis (GMT+12:00)"}]),p=q({get:()=>c.modelValue,set:m=>{s("update:modelValue",m),s("change",m)}});return we(()=>{if((c.modelValue===null||c.modelValue===void 0)&&!c.disabled)try{const m=Intl.DateTimeFormat().resolvedOptions().timeZone;t.value.find(f=>f.value===m)?p.value=m:console.warn(`Detected timezone "${m}" is not in the predefined list.`)}catch(m){console.error("Error auto-detecting timezone:",m)}}),(m,y)=>(a(),i("div",Nu,[d(R,{for:n.label.toLowerCase().replace(/\s/g,"-"),value:n.label},null,8,["for","value"]),d(fe,{id:n.label.toLowerCase().replace(/\s/g,"-"),modelValue:p.value,"onUpdate:modelValue":y[0]||(y[0]=f=>p.value=f),options:t.value,valueKey:"value",labelKey:"label",placeholder:n.placeholder,disabled:n.disabled,required:n.required,class:"mt-1 block w-full"},null,8,["id","modelValue","options","placeholder","disabled","required"]),d(X,{message:n.error,class:"mt-2"},null,8,["message"])]))}},zu={key:0,class:"text-sm text-gray-600 mb-3"},Lu=["value"],Fu={__name:"UserDataPromptModal",props:{show:{type:Boolean,default:!1},configItem:{type:Object,required:!0}},emits:["close","submitted","error"],setup(n,{emit:g}){const c=n,s=$({value:""});se(()=>c.show,f=>{f&&(s.value={value:""})});const t=q(()=>{var f,u;return((u=(f=c.configItem)==null?void 0:f.api)==null?void 0:u.endpoint)||"/api/user/update-profile-field"}),p=q(()=>{var f,u;return((u=(f=c.configItem)==null?void 0:f.api)==null?void 0:u.method)||"post"}),m=f=>{var l,r,v,_,b;if((l=c.configItem)!=null&&l.toPayload)return c.configItem.toPayload(f.value);const u=((v=(r=c.configItem)==null?void 0:r.api)==null?void 0:v.fieldParam)||"field",o=((b=(_=c.configItem)==null?void 0:_.api)==null?void 0:b.valueParam)||"value";return{[u]:c.configItem.column,[o]:f.value}},y=q(()=>{var f;return((f=c.configItem)==null?void 0:f.title)||"Additional Information Required"});return(f,u)=>(a(),B(Ve,{show:n.show,title:y.value,"api-endpoint":t.value,"http-method":p.value,"form-data":s.value,"submit-button-text":"Save","success-message":"Saved successfully","format-data-for-api":m,onClose:u[3]||(u[3]=o=>f.$emit("close")),onSubmitted:u[4]||(u[4]=o=>f.$emit("submitted",o)),onError:u[5]||(u[5]=o=>f.$emit("error",o))},{default:h(({errors:o})=>{var l,r,v,_,b,V,P,T,k,I,D,F,W,G;return[(l=n.configItem)!=null&&l.description?(a(),i("p",zu,j(n.configItem.description),1)):x("",!0),e("div",null,[((v=(r=n.configItem)==null?void 0:r.input)==null?void 0:v.type)==="component"&&((b=(_=n.configItem)==null?void 0:_.input)==null?void 0:b.component)==="TimezoneSelect"?(a(),i(ee,{key:0},[d(Uu,{modelValue:s.value.value,"onUpdate:modelValue":u[0]||(u[0]=E=>s.value.value=E),required:!0},null,8,["modelValue"]),d(X,{message:(V=o==null?void 0:o.value)==null?void 0:V[0],class:"mt-2"},null,8,["message"])],64)):((T=(P=n.configItem)==null?void 0:P.input)==null?void 0:T.type)==="select"?(a(),i(ee,{key:1},[d(R,{value:((k=n.configItem)==null?void 0:k.label)||"Select an option"},null,8,["value"]),N(e("select",{"onUpdate:modelValue":u[1]||(u[1]=E=>s.value.value=E),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[u[6]||(u[6]=e("option",{disabled:"",value:""},"Please select",-1)),(a(!0),i(ee,null,re(((D=(I=n.configItem)==null?void 0:I.input)==null?void 0:D.options)||[],E=>(a(),i("option",{key:E.value||E,value:E.value||E},j(E.label||E),9,Lu))),128))],512),[[Qe,s.value.value]]),d(X,{message:(F=o==null?void 0:o.value)==null?void 0:F[0],class:"mt-2"},null,8,["message"])],64)):(a(),i(ee,{key:2},[d(R,{value:((W=n.configItem)==null?void 0:W.label)||"Value"},null,8,["value"]),d(be,{modelValue:s.value.value,"onUpdate:modelValue":u[2]||(u[2]=E=>s.value.value=E),class:"mt-1 block w-full"},null,8,["modelValue"]),d(X,{message:(G=o==null?void 0:o.value)==null?void 0:G[0],class:"mt-2"},null,8,["message"])],64))])]}),_:1},8,["show","title","api-endpoint","http-method","form-data"]))}},Ru=[{id:"users.timezone",model:"users",column:"timezone",title:"Set your timezone",description:"We could not detect your timezone during login. Please select your timezone to get correct schedule times.",input:{type:"component",component:"TimezoneSelect",props:{}},api:{endpoint:"/api/user/update-profile-field",method:"post",fieldParam:"field",valueParam:"value"},isMissing:n=>!(n!=null&&n.timezone),toPayload:n=>({field:"timezone",value:n})}],Ou={__name:"PromptOrchestrator",setup(n){const g=$(!1),c=$(null),s=$([]),t=()=>{const o=localStorage.getItem("authToken");o&&!oe.defaults.headers.common.Authorization&&(oe.defaults.headers.common.Authorization=`Bearer ${o}`)},p=async()=>{t();const{data:o}=await oe.get("/api/user");return o},m=o=>{const l=[];for(const r of Ru)try{(typeof r.isMissing=="function"?r.isMissing(o):!(o!=null&&o[r.column]))&&l.push(r)}catch(v){console.error("Error evaluating prompt config",r,v)}return l},y=()=>{if(s.value.length===0){c.value=null,g.value=!1;return}c.value=s.value.shift(),g.value=!0},f=async()=>{try{const o=await p();s.value=m(o),y()}catch(o){console.error("PromptOrchestrator initialization failed",o)}},u=async()=>{try{const o=await p();s.value=m(o)}catch{}y()};return we(()=>{f()}),(o,l)=>c.value?(a(),B(Fu,{key:0,show:g.value,"config-item":c.value,onClose:y,onSubmitted:u},null,8,["show","config-item"])):x("",!0)}},qu={key:0,class:"mb-4"},Wu={key:1,class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},Hu={class:"mb-6 flex space-x-4 border-b border-gray-100"},Ku={key:2,class:"space-y-4"},Ju={key:3},Yu={__name:"MeetingMinutesModal",props:{show:Boolean,projectId:Number,projects:{type:Array,default:()=>[]}},emits:["close","minutesAdded"],setup(n,{emit:g}){const c=n,s=g,t=$("separate"),p=$(!1),m=$([]),y=$([]),f=je({project_id:null,discussion:"",more_info:"",blockers:"",actions:"",full_minutes:"",attended_users:[],attended_clients:[]});se(()=>c.projectId,_=>{_&&(f.project_id=_)},{immediate:!0}),se(()=>c.show,_=>{_&&(f.project_id=c.projectId||null,f.discussion="",f.more_info="",f.blockers="",f.actions="",f.full_minutes="",f.attended_users=[],f.attended_clients=[],t.value="separate")});const u=async _=>{if(_){p.value=!0;try{const b=await window.axios.get(`/api/projects/${_}/sections/clients-users`);m.value=(b.data.users||[]).map(V=>({value:V.id,label:V.name})),y.value=(b.data.clients||[]).map(V=>({value:V.id,label:V.name}))}catch(b){console.error("Error fetching attendees:",b)}finally{p.value=!1}}},o=_=>{s("minutesAdded")},l=_=>{console.error("Error in MeetingMinutesModal submission:",_)},r=$("");se(()=>f.project_id,_=>{_?(r.value=`/api/projects/${_}/meeting-minutes`,u(_)):(r.value="",m.value=[],y.value=[])},{immediate:!0});const v=$([]);return se(()=>c.projects,_=>{v.value=_.map(b=>({value:b.id,label:b.name}))},{immediate:!0}),(_,b)=>(a(),B(Ve,{show:n.show,title:"Add Meeting Minutes","api-endpoint":r.value,"http-method":"post","form-data":f,"submit-button-text":"Submit Minutes","success-message":"Meeting minutes submitted successfully!",onClose:b[10]||(b[10]=V=>_.$emit("close")),onSubmitted:o,onError:l},{default:h(({errors:V})=>[n.projectId?x("",!0):(a(),i("div",qu,[d(R,{for:"project_id",value:"Select Project"}),d(fe,{modelValue:f.project_id,"onUpdate:modelValue":b[0]||(b[0]=P=>f.project_id=P),options:v.value,placeholder:"Select a project...",class:"mt-1 block w-full"},null,8,["modelValue","options"]),d(X,{message:V.project_id?V.project_id[0]:"",class:"mt-2"},null,8,["message"])])),f.project_id?(a(),i("div",Wu,[e("div",null,[d(R,{for:"attended_users",value:"Who attended (Internal)"}),d(et,{modelValue:f.attended_users,"onUpdate:modelValue":b[1]||(b[1]=P=>f.attended_users=P),options:m.value,"is-multi":!0,placeholder:"Select team members...",class:"mt-1",disabled:p.value},null,8,["modelValue","options","disabled"]),d(X,{message:V.attended_users?V.attended_users[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[d(R,{for:"attended_clients",value:"Client Attended (Optional)"}),d(et,{modelValue:f.attended_clients,"onUpdate:modelValue":b[2]||(b[2]=P=>f.attended_clients=P),options:y.value,"is-multi":!0,placeholder:"Select clients...",class:"mt-1",disabled:p.value},null,8,["modelValue","options","disabled"]),d(X,{message:V.attended_clients?V.attended_clients[0]:"",class:"mt-2"},null,8,["message"])])])):x("",!0),e("div",Hu,[e("button",{type:"button",onClick:b[3]||(b[3]=P=>t.value="separate"),class:H(["pb-2 px-1 text-sm font-medium transition-colors duration-200 border-b-2",t.value==="separate"?"text-indigo-600 border-indigo-600":"text-gray-500 border-transparent hover:text-gray-700"])}," Structured ",2),e("button",{type:"button",onClick:b[4]||(b[4]=P=>t.value="full"),class:H(["pb-2 px-1 text-sm font-medium transition-colors duration-200 border-b-2",t.value==="full"?"text-indigo-600 border-indigo-600":"text-gray-500 border-transparent hover:text-gray-700"])}," Paste Text ",2)]),t.value==="separate"?(a(),i("div",Ku,[e("div",null,[d(R,{for:"discussion",value:"Discussion"}),N(e("textarea",{id:"discussion",rows:"3",class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm","onUpdate:modelValue":b[5]||(b[5]=P=>f.discussion=P),placeholder:"What was discussed?"},null,512),[[ne,f.discussion]]),d(X,{message:V.discussion?V.discussion[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[d(R,{for:"more_info",value:"Require More Information"}),N(e("textarea",{id:"more_info",rows:"2",class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm","onUpdate:modelValue":b[6]||(b[6]=P=>f.more_info=P),placeholder:"Any information needed?"},null,512),[[ne,f.more_info]]),d(X,{message:V.more_info?V.more_info[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[d(R,{for:"blockers",value:"Blockers"}),N(e("textarea",{id:"blockers",rows:"2",class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm","onUpdate:modelValue":b[7]||(b[7]=P=>f.blockers=P),placeholder:"Any blockers?"},null,512),[[ne,f.blockers]]),d(X,{message:V.blockers?V.blockers[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[d(R,{for:"actions",value:"Actions"}),N(e("textarea",{id:"actions",rows:"3",class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm","onUpdate:modelValue":b[8]||(b[8]=P=>f.actions=P),placeholder:"Action items..."},null,512),[[ne,f.actions]]),d(X,{message:V.actions?V.actions[0]:"",class:"mt-2"},null,8,["message"])])])):(a(),i("div",Ju,[d(R,{for:"full_minutes",value:"Past All Meeting Minutes"}),N(e("textarea",{id:"full_minutes",rows:"12",class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm font-mono text-sm","onUpdate:modelValue":b[9]||(b[9]=P=>f.full_minutes=P),placeholder:"Paste all minutes here..."},null,512),[[ne,f.full_minutes]]),d(X,{message:V.full_minutes?V.full_minutes[0]:"",class:"mt-2"},null,8,["message"])]))]),_:1},8,["show","api-endpoint","form-data"]))}},Qu={class:"flex h-screen overflow-hidden"},Zu={class:"flex-1 flex flex-col overflow-hidden"},Xu={key:0,class:"bg-white shadow"},ed={class:"mx-auto max-w-7xl px-4 py-6 sm:px-6 lg:px-8"},td={class:"flex-1 overflow-y-auto"},Cd={__name:"AuthenticatedLayout",setup(n){const g=$(!1),c=$(!1),s=$(!1),t=$(!1),p=$(!1),m=$([]),y=$(!0),f=q(()=>We().props.id||null),{showNoticeModal:u,unreadNotices:o,fetchUnreadNotices:l,closeModal:r}=Du(),v=$(null),_=async()=>{const F=localStorage.getItem("authToken");if(F){window.axios.defaults.headers.common.Authorization=`Bearer ${F}`;try{await window.axios.get("/api/user")}catch(W){W.response&&W.response.status===401&&(console.log("Session expired, redirecting to login"),localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization,window.location.href="/login")}}else delete window.axios.defaults.headers.common.Authorization},b=()=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization},V=F=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization,window.location.href="/login"},P=async()=>{y.value=!0;try{const F=await window.axios.get("/api/projects-simplified");m.value=F.data}catch(F){console.error("Error fetching all projects for sidebar:",F),m.value=[]}finally{y.value=!1}},T=F=>{ra.visit(route("projects.show",F))},k=q(()=>qe.value.notifications.filter(F=>!F.isRead).length),I=F=>{console.log("Task updated globally.",F)},D=F=>{console.log("Task deleted globally.",F)};return we(()=>{_(),v.value&&oa(v.value),P(),ia(),wt(l),l()}),Pt(()=>{wt(null)}),(F,W)=>(a(),i("div",Qu,[d(Ba,{ref_key:"standardNotificationContainerRef",ref:v},null,512),d(Sa,{"sidebar-is-open":U(qe).show},null,8,["sidebar-is-open"]),d(xl),d(ei,{"all-projects":m.value,"active-project-id":f.value,onProjectSelected:T},null,8,["all-projects","active-project-id"]),e("div",Zu,[d(lr,{"unread-notification-count":k.value,onOpenCreateTaskModal:W[0]||(W[0]=G=>c.value=!0),onOpenAddResource:W[1]||(W[1]=G=>s.value=!0),onOpenNotificationsSidebar:U(xt),onOpenKudoModal:W[2]||(W[2]=G=>t.value=!0),onOpenMeetingMinutesModal:W[3]||(W[3]=G=>p.value=!0)},null,8,["unread-notification-count","onOpenNotificationsSidebar"]),d(mr,{"showing-navigation-dropdown":g.value,"unread-notification-count":k.value,onOpenCreateTaskModal:W[4]||(W[4]=G=>c.value=!0),onOpenAddResource:W[5]||(W[5]=G=>s.value=!0),onOpenNotificationsSidebar:U(xt),onLogoutSuccess:b,onLogoutError:V},null,8,["showing-navigation-dropdown","unread-notification-count","onOpenNotificationsSidebar"]),F.$slots.header?(a(),i("header",Xu,[e("div",ed,[$e(F.$slots,"header")])])):x("",!0),e("main",td,[$e(F.$slots,"default")]),d(Us,{show:c.value,onClose:W[6]||(W[6]=G=>c.value=!1),onSaved:W[7]||(W[7]=G=>c.value=!1)},null,8,["show"]),d(Hs,{"api-endpoint":"/api/shareable-resources",show:s.value,onClose:W[8]||(W[8]=G=>s.value=!1)},null,8,["show"]),d(Ao,{show:t.value,onClose:W[9]||(W[9]=G=>t.value=!1),onSubmitted:W[10]||(W[10]=G=>t.value=!1)},null,8,["show"]),d(Yu,{show:p.value,projects:m.value,onClose:W[11]||(W[11]=G=>p.value=!1),onMinutesAdded:W[12]||(W[12]=G=>p.value=!1)},null,8,["show","projects"])]),d(Bu,{onTaskUpdated:I,onTaskDeleted:D}),d(ho),d(va,{show:U(u),unreadNotices:U(o),onClose:U(r)},null,8,["show","unreadNotices","onClose"]),d(Ou)]))}};export{Hs as C,It as R,Et as T,Cd as _,Dl as a,bl as b,$d as c,Md as d,Vr as e,_d as f,zr as g,Ur as h,Nr as i,Br as j,Uu as k,Fr as l,At as m,wr as n,Ad as o,Er as p,Us as q,Ir as r,Pr as s,Td as t,Dr as u,Kr as v};
