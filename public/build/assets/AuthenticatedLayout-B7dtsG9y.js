import{A as Wa}from"./ApplicationLogo-CY9kt3Hl.js";import{B as st,J as Ot,s as B,r as A,i as g,o as d,b as o,f as ne,e as p,A as xe,K as Ye,a as M,p as z,T as Us,c as W,L as js,h as P,n as $e,w as de,d as Nt,g as S,t as I,F as le,j as fe,l as Ea,m as $,k as Pe,x as ke,M as Xt,G as La,I as Je,_ as at,N as Ua,O as ja,D as Vs,z as Pt,P as Bt,Q as Va,R as Mt,S as Fa,U as $s,V as Ha,W as za,X as es,Y as Ba,Z as Ga,$ as Za,a0 as qa,a1 as Gt,a2 as ot,a3 as Zt,q as Ka}from"./app-D6uJ9OU4.js";import{P as tt}from"./PrimaryButton-Dh3BDN2R.js";import{a as Fs,_ as Hs}from"./SecondaryButton-CXi8uMxN.js";import{_ as q}from"./InputLabel-DE8PJp-3.js";import{a as te,_ as Ae}from"./InputError-D-iagFLv.js";import{_ as Ja}from"./Checkbox-BD75YvYf.js";const Qa={class:"relative"},Os={__name:"Dropdown",props:{align:{type:String,default:"right"},width:{type:String,default:"48"},contentClasses:{type:String,default:"py-1 bg-white"}},setup(e){const t=e,s=i=>{n.value&&i.key==="Escape"&&(n.value=!1)};st(()=>document.addEventListener("keydown",s)),Ot(()=>document.removeEventListener("keydown",s));const a=B(()=>({48:"w-48"})[t.width.toString()]),r=B(()=>t.align==="left"?"ltr:origin-top-left rtl:origin-top-right start-0":t.align==="right"?"ltr:origin-top-right rtl:origin-top-left end-0":"origin-top"),n=A(!1);return(i,l)=>(d(),g("div",Qa,[o("div",{onClick:l[0]||(l[0]=v=>n.value=!n.value)},[xe(i.$slots,"trigger")]),ne(o("div",{class:"fixed inset-0 z-40",onClick:l[1]||(l[1]=v=>n.value=!1)},null,512),[[Ye,n.value]]),p(Us,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:M(()=>[ne(o("div",{class:z(["absolute z-50 mt-2 rounded-md shadow-lg",[a.value,r.value]]),style:{display:"none"},onClick:l[2]||(l[2]=v=>n.value=!1)},[o("div",{class:z(["rounded-md ring-1 ring-black ring-opacity-5",e.contentClasses])},[xe(i.$slots,"content")],2)],2),[[Ye,n.value]])]),_:3})]))}},ue={__name:"DropdownLink",props:{href:{type:String,required:!0},method:{type:String,default:"get"},as:{type:String,default:"a"}},setup(e){return(t,s)=>(d(),W(P($e),js({href:e.href,method:e.method,as:e.as},t.$attrs,{class:"block w-full px-4 py-2 text-start text-sm leading-5 text-gray-700 transition duration-150 ease-in-out hover:bg-gray-100 focus:bg-gray-100 focus:outline-none"}),{default:M(()=>[xe(t.$slots,"default")]),_:3},16,["href","method","as"]))}},Xa={__name:"NavLink",props:{href:{type:String,required:!0},active:{type:Boolean}},setup(e){const t=e,s=B(()=>t.active?"inline-flex items-center px-1 pt-1 border-b-2 border-indigo-400 text-sm font-medium leading-5 text-gray-900 focus:outline-none focus:border-indigo-700 transition duration-150 ease-in-out":"inline-flex items-center px-1 pt-1 border-b-2 border-transparent text-sm font-medium leading-5 text-gray-500 hover:text-gray-700 hover:border-gray-300 focus:outline-none focus:text-gray-700 focus:border-gray-300 transition duration-150 ease-in-out");return(a,r)=>(d(),W(P($e),{href:e.href,class:z(s.value)},{default:M(()=>[xe(a.$slots,"default")]),_:3},8,["href","class"]))}},re={__name:"ResponsiveNavLink",props:{href:{type:String,required:!0},active:{type:Boolean},method:{type:String,default:"get"},as:{type:String,default:"a"}},setup(e){const t=e,s=B(()=>t.active?"block w-full ps-3 pe-4 py-2 border-l-4 border-indigo-400 text-start text-base font-medium text-indigo-700 bg-indigo-50 focus:outline-none focus:text-indigo-800 focus:bg-indigo-100 focus:border-indigo-700 transition duration-150 ease-in-out":"block w-full ps-3 pe-4 py-2 border-l-4 border-transparent text-start text-base font-medium text-gray-600 hover:text-gray-800 hover:bg-gray-50 hover:border-gray-300 focus:outline-none focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300 transition duration-150 ease-in-out");return(a,r)=>(d(),W(P($e),js({href:e.href,method:e.method,as:e.as},a.$attrs,{class:s.value}),{default:M(()=>[xe(a.$slots,"default")]),_:3},16,["href","method","as","class"]))}},er={class:"p-6"},tr={class:"mt-6"},sr={key:0,class:"mb-4 p-4 bg-green-100 border border-green-400 text-green-700 rounded"},ar={key:1,class:"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded"},rr={class:"flex items-center mb-3"},nr=["id","onUpdate:modelValue"],ir=["for"],or={key:0,class:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800"},lr={key:0},dr={class:"mb-4"},ur={class:"flex items-center"},cr=["id","checked","onChange"],fr=["for"],hr={key:0,class:"mb-4"},mr=["id","onUpdate:modelValue"],vr={key:1,class:"mb-4"},yr={class:"flex-1"},gr=["id","onUpdate:modelValue"],pr={class:"flex-1"},_r=["id","onUpdate:modelValue"],wr={key:0,class:"flex items-end pb-1"},kr=["onClick"],br=["onClick"],xr={class:"mt-6 flex justify-end space-x-3"},Sr={key:0,class:"flex items-center"},Mr={key:1},Dr={__name:"AvailabilityModal",props:{show:Boolean,date:{type:String,default:()=>{const e=new Date;return e.setDate(e.getDate()+1),e.toISOString().split("T")[0]}},nextWeekDates:{type:Array,default:()=>[]},userId:{type:Number,default:null}},emits:["close","availability-saved"],setup(e,{emit:t}){const s=()=>{const C=localStorage.getItem("authToken");C&&!ke.defaults.headers.common.Authorization&&(ke.defaults.headers.common.Authorization=`Bearer ${C}`,console.log("Auth headers set in AvailabilityModal"))},a=e,r=t,n=A({}),i=A({}),l=A(!1),v=A(""),f=()=>{const C=[],b=new Date,u=new Date(b);u.setDate(b.getDate()+1);for(let c=0;c<7;c++){const h=new Date(u);h.setDate(u.getDate()+c);const T=h.toISOString().split("T")[0];C.push({value:T,label:h.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})}),n.value[T]={isSelected:!1,isAvailable:!0,reason:"",timeSlots:[{start_time:"",end_time:""}]}}return C},_=A([]);st(()=>{s(),a.nextWeekDates.length>0?(_.value=a.nextWeekDates,a.nextWeekDates.forEach(C=>{n.value[C.value]={isSelected:!1,isAvailable:!0,reason:"",timeSlots:[{start_time:"",end_time:""}]}})):_.value=f()});const k=async()=>{try{if(s(),_.value.length===0)return;const C=_.value[0].value,b=_.value[_.value.length-1].value,u=await ke.get("/api/availabilities",{params:{start_date:C,end_date:b,user_id:a.userId}});if(u.data&&u.data.availabilities){const c=u.data.availabilities;_.value.forEach(h=>{n.value[h.value]={isSelected:!1,isAvailable:!0,reason:"",timeSlots:[{start_time:"",end_time:""}]}}),c.forEach(h=>{const T=h.date.split("T")[0];n.value[T]&&(n.value[T].isSelected=!0,n.value[T].isAvailable=h.is_available,h.is_available?n.value[T].timeSlots=h.time_slots&&h.time_slots.length>0?[...h.time_slots]:[{start_time:"",end_time:""}]:n.value[T].reason=h.reason||"")})}}catch(C){console.error("Error fetching existing availabilities:",C),_.value.forEach(b=>{n.value[b.value]={isSelected:!1,isAvailable:!0,reason:"",timeSlots:[{start_time:"",end_time:""}]}})}};de(()=>a.show,async C=>{C&&(i.value={},v.value="",await k())},{immediate:!0});const O=C=>{n.value[C].timeSlots.push({start_time:"",end_time:""})},Q=(C,b)=>{n.value[C].timeSlots.length>1&&n.value[C].timeSlots.splice(b,1)},L=(C,b)=>{n.value[C].isAvailable=b,b?n.value[C].reason="":n.value[C].timeSlots=[{start_time:"",end_time:""}]},Y=async()=>{l.value=!0,i.value={},v.value="";const C=[];let b=!1;for(const u of _.value){const c=u.value,h=n.value[c];if(h.isSelected){let T={};if(h.isAvailable)if(h.timeSlots.some(R=>!R.start_time||!R.end_time))T.timeSlots="Please fill in all time slots.",b=!0;else for(const R of h.timeSlots){const Z=R.start_time.split(":").map(Number),j=R.end_time.split(":").map(Number);if(Z.length!==2||j.length!==2||isNaN(Z[0])||isNaN(Z[1])||isNaN(j[0])||isNaN(j[1])){T.timeSlots="Invalid time format. Please use HH:MM format.",b=!0;break}const m=Z[0]*60+Z[1],y=j[0]*60+j[1];if(m>=y){T.timeSlots="End time must be after start time.",b=!0;break}}else h.reason.trim()||(T.reason="Please provide a reason for unavailability.",b=!0);Object.keys(T).length>0&&(i.value[c]=T),Object.keys(T).length===0&&C.push({date:c,is_available:h.isAvailable,reason:h.isAvailable?null:h.reason,time_slots:h.isAvailable?h.timeSlots:null})}}if(b){l.value=!1,i.value.general="Please correct the errors in the highlighted dates.";return}if(C.length===0){i.value.general="Please select at least one day to set availability for.",l.value=!1;return}try{s();const u=await ke.post("/api/availabilities/batch",{availabilities:C});v.value="Availability saved successfully!";try{const c=await ke.get("/api/availability-prompt");localStorage.setItem("shouldBlockUser",c.data.should_block_user),localStorage.setItem("allWeekdaysCovered",c.data.all_weekdays_covered);const h=new CustomEvent("availability-status-updated",{detail:{shouldBlockUser:c.data.should_block_user,allWeekdaysCovered:c.data.all_weekdays_covered}});window.dispatchEvent(h),console.log("Availability status updated from modal:",{shouldBlockUser:c.data.should_block_user,allWeekdaysCovered:c.data.all_weekdays_covered})}catch(c){console.error("Error updating availability status:",c)}r("availability-saved",u.data.availabilities),setTimeout(()=>{r("close")},1500)}catch(u){console.error("Error saving availability:",u),u.response&&u.response.data&&u.response.data.errors?i.value.general=u.response.data.message||"An error occurred while saving your availability.":u.response&&u.response.status===409?(v.value=u.response.data.message,setTimeout(()=>{r("close")},1500)):i.value.general="An unexpected error occurred while saving your availability."}finally{l.value=!1}};return(C,b)=>(d(),W(Hs,{show:e.show,onClose:b[1]||(b[1]=u=>C.$emit("close")),"max-width":"xl"},{default:M(()=>[o("div",er,[b[6]||(b[6]=o("h2",{class:"text-lg font-medium text-gray-900"}," Submit Your Weekly Availability ",-1)),b[7]||(b[7]=o("p",{class:"mt-1 text-sm text-gray-600"}," Please select the dates you wish to set availability for and provide your details for each. ",-1)),o("div",tr,[o("form",{onSubmit:Nt(Y,["prevent"])},[v.value?(d(),g("div",sr,I(v.value),1)):S("",!0),i.value.general?(d(),g("div",ar,I(i.value.general),1)):S("",!0),(d(!0),g(le,null,fe(_.value,u=>{var c,h;return d(),g("div",{key:u.value,class:z(["mb-6 p-4 border rounded-lg shadow-sm",[n.value[u.value].isSelected?"border-indigo-300 bg-indigo-50":"border-gray-200",n.value[u.value].isSelected&&!i.value[u.value]?"border-l-4 border-l-indigo-500":""]])},[o("div",rr,[ne(o("input",{type:"checkbox",id:`select_date_${u.value}`,"onUpdate:modelValue":T=>n.value[u.value].isSelected=T,class:"rounded border-gray-300 text-indigo-600 shadow-sm focus:ring-indigo-500"},null,8,nr),[[Ea,n.value[u.value].isSelected]]),o("label",{for:`select_date_${u.value}`,class:"ml-2 block text-base font-medium text-gray-800"},[$(I(u.label)+" ",1),n.value[u.value].isSelected?(d(),g("span",or," Saved ")):S("",!0)],8,ir)]),n.value[u.value].isSelected?(d(),g("div",lr,[o("div",dr,[o("div",ur,[o("input",{type:"checkbox",id:`isAvailableToggle_${u.value}`,checked:n.value[u.value].isAvailable,onChange:T=>L(u.value,T.target.checked),class:"rounded border-gray-300 text-indigo-600 shadow-sm focus:ring-indigo-500"},null,40,cr),o("label",{for:`isAvailableToggle_${u.value}`,class:"ml-2 block text-sm text-gray-700"}," I am available on this day ",8,fr)])]),n.value[u.value].isAvailable?S("",!0):(d(),g("div",hr,[p(q,{for:`reason_${u.value}`,value:"Reason for Not Available"},null,8,["for"]),ne(o("textarea",{id:`reason_${u.value}`,"onUpdate:modelValue":T=>n.value[u.value].reason=T,rows:"2",class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",placeholder:"e.g., Out of office, Holiday, Meeting all day"},null,8,mr),[[Pe,n.value[u.value].reason]]),p(te,{message:(c=i.value[u.value])==null?void 0:c.reason,class:"mt-2"},null,8,["message"])])),n.value[u.value].isAvailable?(d(),g("div",vr,[p(q,{value:"Available Time Slots"}),p(te,{message:(h=i.value[u.value])==null?void 0:h.timeSlots,class:"mt-2"},null,8,["message"]),(d(!0),g(le,null,fe(n.value[u.value].timeSlots,(T,R)=>(d(),g("div",{key:R,class:"flex items-center space-x-2 mt-2"},[o("div",yr,[p(q,{for:`start_time_${u.value}_${R}`,value:"Start Time",class:"text-xs"},null,8,["for"]),ne(o("input",{id:`start_time_${u.value}_${R}`,type:"time","onUpdate:modelValue":Z=>T.start_time=Z,class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm"},null,8,gr),[[Pe,T.start_time]])]),o("div",pr,[p(q,{for:`end_time_${u.value}_${R}`,value:"End Time",class:"text-xs"},null,8,["for"]),ne(o("input",{id:`end_time_${u.value}_${R}`,type:"time","onUpdate:modelValue":Z=>T.end_time=Z,class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm"},null,8,_r),[[Pe,T.end_time]])]),n.value[u.value].timeSlots.length>1?(d(),g("div",wr,[o("button",{type:"button",onClick:Z=>Q(u.value,R),class:"p-2 text-red-600 hover:text-red-800"},b[2]||(b[2]=[o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[o("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm6 0a1 1 0 012 0v6a1 1 0 11-2 0V8z","clip-rule":"evenodd"})],-1)]),8,kr)])):S("",!0)]))),128)),o("button",{type:"button",onClick:T=>O(u.value),class:"mt-3 w-full flex items-center justify-center px-4 py-2 border border-dashed border-indigo-300 rounded-lg text-indigo-600 hover:bg-indigo-50 transition duration-150 ease-in-out"},b[3]||(b[3]=[o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[o("path",{"fill-rule":"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z","clip-rule":"evenodd"})],-1),$(" Add Another Time Slot ",-1)]),8,br)])):S("",!0)])):S("",!0)],2)}),128)),o("div",xr,[p(Fs,{onClick:b[0]||(b[0]=u=>C.$emit("close"))},{default:M(()=>b[4]||(b[4]=[$(" Cancel ",-1)])),_:1,__:[4]}),p(tt,{disabled:l.value,class:z({"opacity-50":l.value})},{default:M(()=>[l.value?(d(),g("span",Sr,b[5]||(b[5]=[o("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),$(" Saving... ",-1)]))):(d(),g("span",Mr,"Save Availability"))]),_:1},8,["disabled","class"])])],32)])])]),_:1},8,["show"]))}},Tr={key:0,class:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center"},Cr={class:"bg-white rounded-lg shadow-xl p-6 max-w-lg w-full mx-4"},Yr={class:"flex justify-center"},$r={__name:"AvailabilityBlocker",setup(e){const t=A(!1),s=A(!0),a=A(!1),r=A([]),n=B(()=>{var Y;return((Y=Xt().props.auth.user)==null?void 0:Y.id)||null}),i=()=>{const Y=localStorage.getItem("authToken");Y&&!ke.defaults.headers.common.Authorization&&(ke.defaults.headers.common.Authorization=`Bearer ${Y}`)},l=async()=>{s.value=!0;const Y=localStorage.getItem("shouldBlockUser"),C=localStorage.getItem("allWeekdaysCovered");if(Y==="true"&&C==="false")t.value=!0,await v();else try{i();const b=await ke.get("/api/availability-prompt");t.value=b.data.should_block_user&&!b.data.all_weekdays_covered,t.value&&await v()}catch(b){console.error("Error checking if user should be blocked:",b),t.value=!1}s.value=!1},v=async()=>{try{i();const Y=await ke.get("/api/availability-prompt");f(Y.data.next_week_start,Y.data.next_week_end)}catch(Y){console.error("Error fetching next week dates:",Y)}},f=(Y,C)=>{const b=[],u=new Date(Y),c=new Date(C),h=new Date(u);for(;h<=c;)b.push({value:h.toISOString().split("T")[0],label:h.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})}),h.setDate(h.getDate()+1);r.value=b},_=()=>{a.value=!0},k=()=>{l()},O=Y=>{t.value=Y.detail.shouldBlockUser&&!Y.detail.allWeekdaysCovered},Q=()=>{document.visibilityState==="visible"&&Je(()=>{l()})},L=Y=>{(Y.key==="shouldBlockUser"||Y.key==="allWeekdaysCovered")&&Je(()=>{l()})};return st(()=>{l(),window.addEventListener("availability-status-updated",O),document.addEventListener("visibilitychange",Q),window.addEventListener("storage",L)}),Ot(()=>{window.removeEventListener("availability-status-updated",O),document.removeEventListener("visibilitychange",Q),window.removeEventListener("storage",L)}),(Y,C)=>t.value&&!s.value?(d(),g("div",Tr,[o("div",Cr,[C[2]||(C[2]=La('<div class="flex items-center mb-4"><div class="flex-shrink-0 mr-3"><svg class="h-8 w-8 text-red-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg></div><h2 class="text-xl font-bold text-gray-900">Action Required</h2></div><p class="mb-6 text-gray-700"> You must submit your availability for all weekdays of next week before you can continue using the application. This is required for planning meetings and work schedules. </p>',2)),o("div",Yr,[p(tt,{onClick:_,class:"bg-red-600 hover:bg-red-700"},{default:M(()=>C[1]||(C[1]=[$(" Submit Availability Now ",-1)])),_:1,__:[1]})]),p(Dr,{show:a.value,"next-week-dates":r.value,date:r.value.length>0?r.value[0].value:"",userId:n.value,onClose:C[0]||(C[0]=b=>a.value=!1),onAvailabilitySaved:k},null,8,["show","next-week-dates","date","userId"])])])):S("",!0)}},Or={class:"p-6"},Nr={class:"flex justify-between items-center mb-4"},Pr={class:"text-lg font-medium text-gray-900"},Ar={key:0,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert"},Ir={class:"block sm:inline"},Rr={key:0,class:"mt-6 flex justify-end space-x-3"},Wr={__name:"BaseFormModal",props:{show:{type:Boolean,default:!1},title:{type:String,default:"Modal Title"},apiEndpoint:{type:String,required:!1},httpMethod:{type:String,default:"post",validator:e=>["post","put","patch","delete"].includes(e.toLowerCase())},formData:{type:Object,required:!0},submitButtonText:{type:String,default:"Save"},successMessage:{type:String,default:"Operation successful!"},formatDataForApi:{type:Function,default:e=>e},showFooter:{type:Boolean,default:!0}},emits:["close","submitted","error"],setup(e,{emit:t}){const s=e,a=t,r=A(!1),n=A({}),i=A("");de(()=>s.show,f=>{f&&(n.value={},i.value="",r.value=!1)});const l=async()=>{r.value=!0,n.value={},i.value="";try{const f=s.formatDataForApi(s.formData);let _;const k=s.httpMethod.toLowerCase();if(k==="post")_=await window.axios.post(s.apiEndpoint,f);else if(k==="put")_=await window.axios.put(s.apiEndpoint,f);else if(k==="patch")_=await window.axios.patch(s.apiEndpoint,f);else if(k==="delete")_=await window.axios.delete(s.apiEndpoint,{data:f});else throw new Error(`Unsupported HTTP method: ${s.httpMethod}`);Ua(s.successMessage),a("submitted",_.data),a("close")}catch(f){console.error("API submission error:",f),f.response?f.response.status===422?(n.value=f.response.data.errors,i.value="Please correct the errors in the form."):i.value=f.response.data.message||"An unexpected error occurred.":i.value="A network error occurred or the server is unreachable.",ja(i.value),a("error",f)}finally{r.value=!1}},v=()=>{a("close")};return(f,_)=>(d(),W(Hs,{show:e.show,onClose:v},{default:M(()=>[o("div",Or,[o("div",Nr,[o("h2",Pr,I(e.title),1),o("button",{onClick:v,class:"text-gray-400 hover:text-gray-500"},_[0]||(_[0]=[o("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),i.value?(d(),g("div",Ar,[o("span",Ir,I(i.value),1)])):S("",!0),o("form",{onSubmit:Nt(l,["prevent"])},[xe(f.$slots,"default",{errors:n.value},void 0,!0),e.showFooter?(d(),g("div",Rr,[p(Fs,{onClick:v,type:"button",disabled:r.value},{default:M(()=>_[1]||(_[1]=[$(" Cancel ",-1)])),_:1,__:[1]},8,["disabled"]),p(tt,{type:"submit",disabled:r.value,class:z({"opacity-75 cursor-not-allowed":r.value})},{default:M(()=>[$(I(r.value?"Submitting...":e.submitButtonText),1)]),_:1},8,["disabled","class"])])):S("",!0)],32)])]),_:3},8,["show"]))}},At=at(Wr,[["__scopeId","data-v-380ca613"]]),Er=["disabled"],Lr={class:"absolute z-50 mt-1 w-full rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5"},Ur={class:"p-2 border-b border-gray-200"},jr=["onClick"],Vr={key:0,class:"block px-4 py-2 text-sm text-gray-500"},Fr={__name:"SelectDropdown",props:{modelValue:{type:[String,Number,Object,null],default:null},options:{type:Array,default:()=>[]},placeholder:{type:String,default:"Select an option"},valueKey:{type:String,default:"value"},labelKey:{type:String,default:"label"},disabled:{type:Boolean,default:!1},required:{type:Boolean,default:!1},maxHeight:{type:String,default:"250px"},width:{type:String,default:"full"},labelClass:{type:String,default:"text-xs"}},emits:["update:modelValue","change"],setup(e,{emit:t}){const s=e,a=t,r=A(!1),n=A(""),i=A(null),l=A(null),v=B(()=>{if(!n.value)return s.options;const L=n.value.toLowerCase();return s.options.filter(Y=>Y[s.labelKey].toLowerCase().includes(L))}),f=L=>{i.value&&!i.value.contains(L.target)&&(r.value=!1,n.value="")},_=L=>{L.key==="Escape"&&r.value&&(r.value=!1,n.value="")};st(()=>{document.addEventListener("click",f),document.addEventListener("keydown",_)}),Ot(()=>{document.removeEventListener("click",f),document.removeEventListener("keydown",_)});const k=B(()=>{if(s.modelValue===null||s.modelValue===void 0||s.modelValue==="")return s.placeholder;const L=s.options.find(Y=>Y[s.valueKey]===s.modelValue);return L?L[s.labelKey]:s.placeholder}),O=L=>{a("update:modelValue",L[s.valueKey]),a("change",L[s.valueKey]),r.value=!1,n.value=""},Q=()=>{s.disabled||(r.value=!r.value,r.value&&Je(()=>{l.value&&l.value.focus()}))};return de(()=>s.modelValue,L=>{(L==null||L==="")&&(n.value="")}),(L,Y)=>(d(),g("div",{ref_key:"dropdownRef",ref:i,class:z(["relative",{"w-full":e.width==="full"}])},[o("button",{type:"button",onClick:Q,disabled:e.disabled,class:z(["border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full text-left px-3 py-2 text-gray-700 bg-white relative flex items-center justify-between",{"opacity-50 cursor-not-allowed":e.disabled}])},[o("span",{class:z({"text-gray-500":!s.modelValue})},I(k.value),3),Y[3]||(Y[3]=o("svg",{class:"h-4 w-4 text-gray-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[o("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1))],10,Er),ne(o("div",Lr,[o("div",Ur,[ne(o("input",{ref_key:"searchInputRef",ref:l,type:"text","onUpdate:modelValue":Y[0]||(Y[0]=C=>n.value=C),onInput:Y[1]||(Y[1]=C=>r.value=!0),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-sm",placeholder:"Search...",onClick:Y[2]||(Y[2]=Nt(()=>{},["stop"]))},null,544),[[Pe,n.value]])]),o("div",{class:"py-1 overflow-y-auto",style:Vs({maxHeight:e.maxHeight})},[(d(!0),g(le,null,fe(v.value,C=>(d(),g("div",{key:C[e.valueKey],onClick:b=>O(C),class:z(["block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 cursor-pointer",{"bg-gray-100":C[e.valueKey]===e.modelValue}])},I(C[e.labelKey]),11,jr))),128)),v.value.length===0?(d(),g("div",Vr," No options available ")):S("",!0)],4)],512),[[Ye,r.value]])],2))}},Ue=at(Fr,[["__scopeId","data-v-d2f1cfa0"]]),Hr={class:"space-y-4"},zr="Add New Milestone",Br="/api/milestones",Gr="post",Zr="Create Milestone",qr="Milestone created successfully!",Kr={__name:"MilestoneFormModal",props:{show:Boolean,projectId:Number},emits:["close","saved"],setup(e,{emit:t}){const s=e,a=t,r=Pt({name:"",description:"",completion_date:null,status:"Not Started",project_id:s.projectId}),n=["Not Started","In Progress","Completed","Overdue"];de(()=>s.show,v=>{v&&Object.assign(r,{name:"",description:"",completion_date:null,status:"Not Started",project_id:s.projectId})},{immediate:!0});const i=v=>{a("saved",v),a("close")},l=()=>{a("close")};return(v,f)=>(d(),W(At,{show:e.show,title:zr,"api-endpoint":Br,"http-method":Gr,"form-data":r,"submit-button-text":Zr,"success-message":qr,onClose:l,onSubmitted:i},{default:M(({errors:_})=>[o("div",Hr,[o("div",null,[p(q,{for:"milestone-name",value:"Milestone Name"}),p(Ae,{id:"milestone-name",modelValue:r.name,"onUpdate:modelValue":f[0]||(f[0]=k=>r.name=k),type:"text",class:"mt-1 block w-full",placeholder:"Enter milestone name",required:""},null,8,["modelValue"]),p(te,{message:_.name?_.name[0]:"",class:"mt-2"},null,8,["message"])]),o("div",null,[p(q,{for:"milestone-description",value:"Description"}),ne(o("textarea",{id:"milestone-description","onUpdate:modelValue":f[1]||(f[1]=k=>r.description=k),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",rows:"3",placeholder:"Enter milestone description"},null,512),[[Pe,r.description]]),p(te,{message:_.description?_.description[0]:"",class:"mt-2"},null,8,["message"])]),o("div",null,[p(q,{for:"milestone-completion-date",value:"Completion Date"}),p(Ae,{id:"milestone-completion-date",modelValue:r.completion_date,"onUpdate:modelValue":f[2]||(f[2]=k=>r.completion_date=k),type:"date",class:"mt-1 block w-full"},null,8,["modelValue"]),p(te,{message:_.completion_date?_.completion_date[0]:"",class:"mt-2"},null,8,["message"])]),o("div",null,[p(q,{for:"milestone-status",value:"Status"}),p(Ue,{id:"milestone-status",modelValue:r.status,"onUpdate:modelValue":f[3]||(f[3]=k=>r.status=k),options:n.map(k=>({value:k,label:k})),"value-key":"value","label-key":"label",placeholder:"Select status",class:"mt-1"},null,8,["modelValue","options"]),p(te,{message:_.status?_.status[0]:"",class:"mt-2"},null,8,["message"])])])]),_:1},8,["show","form-data"]))}},Jr={class:"space-y-4"},Qr={key:0},Xr={key:0,class:"text-sm text-gray-500"},en={key:0,class:"text-sm text-gray-500"},tn={key:0,class:"text-sm text-gray-500"},sn={class:"flex items-center gap-2 mt-1"},an={key:0,class:"text-sm text-gray-500"},rn=["disabled"],nn="Create New Task",on="/api/tasks",ln="post",dn="Create Task",un="Task created successfully!",cn={__name:"CreateTaskModal",props:{show:Boolean,projectId:{type:Number,default:null}},emits:["close","saved"],setup(e,{emit:t}){const s=e,a=t,r=Pt({name:"",description:"",assigned_to_user_id:null,due_date:null,status:"To Do",task_type_id:null,milestone_id:null,project_id:s.projectId}),n=["To Do","In Progress","Done","Blocked","Archived"],i=A([]),l=A([]),v=A([]),f=A([]),_=A(!0),k=A(!1),O=A(!1),Q=A(!1),L=A(!1);de(()=>s.show,async j=>{j&&(Object.assign(r,{name:"",description:"",assigned_to_user_id:null,due_date:null,status:"To Do",task_type_id:null,milestone_id:null,project_id:s.projectId}),s.projectId?await C(s.projectId):await Y())},{immediate:!0}),de(()=>r.project_id,async j=>{j?await C(j):(l.value=[],v.value=[],f.value=[])});const Y=async()=>{_.value=!0;try{const j=await window.axios.get("/api/projects-simplified");i.value=j.data.map(m=>({value:m.id,label:m.name}))}catch(j){console.error("Error fetching projects:",j),i.value=[]}finally{_.value=!1}},C=async j=>{if(j){k.value=!0,O.value=!0,Q.value=!0;try{const[m,y,ee]=await Promise.all([window.axios.get(`/api/projects/${j}/users`),window.axios.get("/api/task-types"),window.axios.get(`/api/projects/${j}/milestones`)]);l.value=m.data.map(se=>({value:se.id,label:se.name})),v.value=y.data.map(se=>({value:se.id,label:se.name})),f.value=ee.data.map(se=>({value:se.id,label:se.name}))}catch(m){console.error("Error fetching associated task data:",m),l.value=[],v.value=[],f.value=[]}finally{k.value=!1,O.value=!1,Q.value=!1}}},b=j=>{a("saved",j),a("close")},u=()=>{a("close")},c=()=>{r.project_id?L.value=!0:alert("Please select a project before adding a milestone.")},h=j=>{if(L.value=!1,j&&j.id&&j.name){const m={value:j.id,label:j.name};f.value.some(y=>y.value===m.value)||f.value.push(m),r.milestone_id=m.value}},T=B(()=>l.value),R=B(()=>v.value),Z=B(()=>f.value);return(j,m)=>(d(),g(le,null,[p(At,{show:e.show,title:nn,"api-endpoint":on,"http-method":ln,"form-data":r,"submit-button-text":dn,"success-message":un,onClose:u,onSubmitted:b},{default:M(({errors:y})=>[o("div",Jr,[e.projectId?S("",!0):(d(),g("div",Qr,[p(q,{for:"task-project",value:"Project"}),_.value?(d(),g("div",Xr,"Loading projects...")):(d(),W(Ue,{key:1,id:"task-project",modelValue:r.project_id,"onUpdate:modelValue":m[0]||(m[0]=ee=>r.project_id=ee),options:i.value,"value-key":"value","label-key":"label",placeholder:"Select a project",class:"mt-1",required:!0},null,8,["modelValue","options"])),p(te,{message:y.project_id?y.project_id[0]:"",class:"mt-2"},null,8,["message"])])),o("div",null,[p(q,{for:"task-name",value:"Task Name"}),p(Ae,{id:"task-name",modelValue:r.name,"onUpdate:modelValue":m[1]||(m[1]=ee=>r.name=ee),type:"text",class:"mt-1 block w-full",placeholder:"Enter task name",required:""},null,8,["modelValue"]),p(te,{message:y.name?y.name[0]:"",class:"mt-2"},null,8,["message"])]),o("div",null,[p(q,{for:"task-description",value:"Description"}),ne(o("textarea",{id:"task-description","onUpdate:modelValue":m[2]||(m[2]=ee=>r.description=ee),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",rows:"3",placeholder:"Enter task description"},null,512),[[Pe,r.description]]),p(te,{message:y.description?y.description[0]:"",class:"mt-2"},null,8,["message"])]),o("div",null,[p(q,{for:"task-status",value:"Status"}),p(Ue,{id:"task-status",modelValue:r.status,"onUpdate:modelValue":m[3]||(m[3]=ee=>r.status=ee),options:n.map(ee=>({value:ee,label:ee})),"value-key":"value","label-key":"label",placeholder:"Select status",class:"mt-1"},null,8,["modelValue","options"]),p(te,{message:y.status?y.status[0]:"",class:"mt-2"},null,8,["message"])]),o("div",null,[p(q,{for:"task-due-date",value:"Due Date"}),p(Ae,{id:"task-due-date",modelValue:r.due_date,"onUpdate:modelValue":m[4]||(m[4]=ee=>r.due_date=ee),type:"date",class:"mt-1 block w-full"},null,8,["modelValue"]),p(te,{message:y.due_date?y.due_date[0]:"",class:"mt-2"},null,8,["message"])]),o("div",null,[p(q,{for:"task-assigned-to",value:"Assigned To"}),k.value?(d(),g("div",en,"Loading users...")):(d(),W(Ue,{key:1,id:"task-assigned-to",modelValue:r.assigned_to_user_id,"onUpdate:modelValue":m[5]||(m[5]=ee=>r.assigned_to_user_id=ee),options:T.value,"value-key":"value","label-key":"label",placeholder:"Unassigned",class:"mt-1","allow-empty":!0},null,8,["modelValue","options"])),p(te,{message:y.assigned_to_user_id?y.assigned_to_user_id[0]:"",class:"mt-2"},null,8,["message"])]),o("div",null,[p(q,{for:"task-type",value:"Task Type"}),O.value?(d(),g("div",tn,"Loading task types...")):(d(),W(Ue,{key:1,id:"task-type",modelValue:r.task_type_id,"onUpdate:modelValue":m[6]||(m[6]=ee=>r.task_type_id=ee),options:R.value,"value-key":"value","label-key":"label",placeholder:"Select a task type",class:"mt-1","allow-empty":!0},null,8,["modelValue","options"])),p(te,{message:y.task_type_id?y.task_type_id[0]:"",class:"mt-2"},null,8,["message"])]),o("div",null,[p(q,{for:"task-milestone",value:"Milestone"}),o("div",sn,[Q.value?(d(),g("div",an,"Loading milestones...")):(d(),W(Ue,{key:1,id:"task-milestone",modelValue:r.milestone_id,"onUpdate:modelValue":m[7]||(m[7]=ee=>r.milestone_id=ee),options:Z.value,"value-key":"value","label-key":"label",placeholder:"No milestone",class:"flex-grow","allow-empty":!0,disabled:!r.project_id},null,8,["modelValue","options","disabled"])),o("button",{type:"button",onClick:c,disabled:!r.project_id||Q.value,class:"px-3 py-2 text-sm font-medium text-blue-600 bg-blue-50 rounded-md hover:bg-blue-100 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",title:"Add New Milestone"},m[9]||(m[9]=[o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4v16m8-8H4"})],-1)]),8,rn)]),p(te,{message:y.milestone_id?y.milestone_id[0]:"",class:"mt-2"},null,8,["message"])])])]),_:1},8,["show","form-data"]),p(Kr,{show:L.value,"project-id":r.project_id,onClose:m[8]||(m[8]=y=>L.value=!1),onSaved:h},null,8,["show","project-id"])],64))}},fn=(e,t)=>{let s;return(...a)=>{clearTimeout(s),s=setTimeout(()=>e(...a),t)}},hn={class:"relative"},mn={class:"flex flex-wrap items-center gap-2 mb-2 p-2 border border-gray-300 rounded-lg bg-white min-h-[44px] focus-within:border-indigo-500 focus-within:ring-1 focus-within:ring-indigo-500 transition-all duration-150"},vn=["onClick"],yn={key:0,class:"absolute z-20 w-full bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto mt-1 transform-gpu"},gn=["onClick"],pn={key:1,class:"px-4 py-2 text-sm text-gray-500"},_n={key:2,class:"px-4 py-2 text-sm text-gray-500"},wn={__name:"TagInput",props:{modelValue:{type:Array,default:()=>[]},label:{type:String,default:"Tags"},placeholder:{type:String,default:"Add tags..."},error:{type:String,default:""},initialTags:{type:Array,default:()=>[]},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:t}){const s=e,a=t,r=A(""),n=A([]),i=A([]),l=A(!1),v=A(null);function f(){a("update:modelValue",i.value.map(b=>b.id))}de(()=>s.initialTags,b=>{if(i.value=[],b&&b.length>0){const T=[],R=new Set;b.forEach(Z=>{R.has(Z.id)||(T.push(Z),R.add(Z.id))}),i.value.push(...T)}const u=b.map(T=>T.id),c=Array.isArray(s.modelValue)?s.modelValue:[];(u.length!==c.length||u.some(T=>!c.includes(T))||c.some(T=>!u.includes(T)))&&f()},{immediate:!0});const _=fn(async b=>{if(b.length<2){n.value=[],l.value=!1;return}try{const u=await ke.get(`/api/tags/search?query=${b}`);n.value=u.data,l.value=!0}catch(u){console.error("Error fetching tags:",u),n.value=[],l.value=!1}},300);de(r,b=>{s.disabled||_(b)});const k=b=>{i.value.some(u=>u.id===b.id)||(i.value.push(b),r.value="",n.value=[],l.value=!1,f()),Je(()=>v.value.focus())},O=()=>{if(s.disabled)return;const b=r.value.trim();if(!b)return;const u=n.value.find(h=>h.name.toLowerCase()===b.toLowerCase()),c=i.value.some(h=>h.name.toLowerCase()===b.toLowerCase());if(u)k(u);else if(c)r.value="",n.value=[],l.value=!1;else{const h={id:`new_${b.replace(/\s+/g,"-").toLowerCase()}_${Date.now()}`,name:b};i.value.push(h),r.value="",n.value=[],l.value=!1,f()}Je(()=>v.value.focus())},Q=b=>{s.disabled||(i.value=i.value.filter(u=>u.id!==b.id),f(),Je(()=>v.value.focus()))},L=()=>{s.disabled||r.value===""&&i.value.length>0&&Q(i.value[i.value.length-1])},Y=B(()=>n.value.filter(b=>!i.value.some(u=>u.id===b.id))),C=b=>{v.value&&!v.value.$el.contains(b.target)&&(l.value=!1,r.value="")};return st(()=>{document.addEventListener("click",C)}),Ot(()=>{document.removeEventListener("click",C)}),(b,u)=>(d(),g("div",hn,[p(q,{value:e.label,class:"mb-1"},null,8,["value"]),o("div",mn,[(d(!0),g(le,null,fe(i.value,c=>(d(),g("span",{key:c.id,class:"inline-flex items-center px-3 py-1 text-sm font-medium bg-indigo-100 text-indigo-800 rounded-full shadow-sm"},[$(I(c.name)+" ",1),e.disabled?S("",!0):(d(),g("button",{key:0,type:"button",onClick:h=>Q(c),class:"ml-2 -mr-1 text-indigo-500 hover:text-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 rounded-full p-0.5"},u[3]||(u[3]=[o("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,vn))]))),128)),p(Ae,{ref_key:"inputRef",ref:v,type:"text",placeholder:i.value.length===0?e.placeholder:"",modelValue:r.value,"onUpdate:modelValue":u[0]||(u[0]=c=>r.value=c),onFocus:u[1]||(u[1]=c=>l.value=!0),onKeydown:[Bt(Nt(O,["prevent"]),["enter"]),u[2]||(u[2]=Bt(c=>l.value=!1,["tab"])),Bt(L,["delete"])],class:"flex-grow min-w-[100px] border-none focus:ring-0 shadow-none p-0 bg-transparent text-gray-900",disabled:e.disabled},null,8,["placeholder","modelValue","onKeydown","disabled"])]),l.value&&(Y.value.length>0||r.value.length>=2||Y.value.length===0&&r.value.length<2)&&!e.disabled?(d(),g("div",yn,[(d(!0),g(le,null,fe(Y.value,c=>(d(),g("div",{key:c.id,onClick:h=>k(c),class:"px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 cursor-pointer transition-colors duration-100"},I(c.name),9,gn))),128)),!n.value.some(c=>c.name.toLowerCase()===r.value.toLowerCase())&&r.value.length>=2?(d(),g("div",{key:0,onClick:O,class:"px-4 py-2 text-sm text-indigo-700 bg-indigo-50 hover:bg-indigo-100 cursor-pointer border-t border-indigo-200 font-semibold transition-colors duration-100"},' Add new tag: "'+I(r.value)+'" ',1)):S("",!0),Y.value.length===0&&r.value.length<2?(d(),g("div",pn," Type at least 2 characters to search for tags. ")):S("",!0),Y.value.length===0&&r.value.length>=2&&!n.value.some(c=>c.name.toLowerCase()===r.value.toLowerCase())?(d(),g("div",_n,[u[4]||(u[4]=$(" No matching tags found. Press ",-1)),u[5]||(u[5]=o("span",{class:"font-semibold text-indigo-600"},"Enter",-1)),$(' to add "'+I(r.value)+'" as a new tag. ',1)])):S("",!0)])):S("",!0),p(te,{message:e.error,class:"mt-2"},null,8,["message"])]))}},kn=at(wn,[["__scopeId","data-v-4d528a4c"]]),bn={class:"space-y-4"},xn={class:"flex items-center mt-4"},Sn={__name:"CreateForm",props:{show:{type:Boolean,default:!1},apiEndpoint:{type:String,required:!0}},emits:["close","resourceCreated"],setup(e,{emit:t}){const s=e,a=t,r=Pt({title:"",description:"",url:"",type:"website",thumbnail_url:"",visible_to_client:!0,tags:[]}),n=B(()=>[{value:"website",label:"Website"},{value:"youtube",label:"YouTube Video"},{value:"document",label:"Document"},{value:"image",label:"Image"},{value:"other",label:"Other"}]),i=f=>f,l=f=>{a("resourceCreated",f),v()},v=()=>{r.title="",r.description="",r.url="",r.type="website",r.thumbnail_url="",r.visible_to_client=!0,r.tags=[],a("close")};return(f,_)=>(d(),W(At,{show:s.show,title:"Add New Shareable Resource",apiEndpoint:s.apiEndpoint,httpMethod:"post",formData:r,submitButtonText:"Create Resource",successMessage:"Shareable resource created successfully!",formatDataForApi:i,onSubmitted:l,onClose:v},{default:M(({errors:k})=>[o("div",bn,[o("div",null,[p(q,{for:"title",value:"Title",class:"mb-1"}),p(Ae,{id:"title",type:"text",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:r.title,"onUpdate:modelValue":_[0]||(_[0]=O=>r.title=O),required:""},null,8,["modelValue"]),p(te,{message:k.title?k.title[0]:"",class:"mt-2"},null,8,["message"])]),o("div",null,[p(q,{for:"url",value:"Resource URL",class:"mb-1"}),p(Ae,{id:"url",type:"url",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:r.url,"onUpdate:modelValue":_[1]||(_[1]=O=>r.url=O),required:""},null,8,["modelValue"]),p(te,{message:k.url?k.url[0]:"",class:"mt-2"},null,8,["message"])]),o("div",null,[p(q,{for:"type",value:"Resource Type",class:"mb-1"}),p(Ue,{id:"type",modelValue:r.type,"onUpdate:modelValue":_[2]||(_[2]=O=>r.type=O),options:n.value,valueKey:"value",labelKey:"label",placeholder:"Select Resource Type",required:"",class:"mt-1 block w-full"},null,8,["modelValue","options"]),p(te,{message:k.type?k.type[0]:"",class:"mt-2"},null,8,["message"])]),o("div",null,[p(q,{for:"thumbnail_url",value:"Thumbnail URL (Optional)",class:"mb-1"}),p(Ae,{id:"thumbnail_url",type:"url",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:r.thumbnail_url,"onUpdate:modelValue":_[3]||(_[3]=O=>r.thumbnail_url=O)},null,8,["modelValue"]),p(te,{message:k.thumbnail_url?k.thumbnail_url[0]:"",class:"mt-2"},null,8,["message"])]),o("div",null,[p(q,{for:"description",value:"Description (Optional)",class:"mb-1"}),ne(o("textarea",{id:"description",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-lg shadow-sm mt-1 block w-full","onUpdate:modelValue":_[4]||(_[4]=O=>r.description=O),rows:"3"},null,512),[[Pe,r.description]]),p(te,{message:k.description?k.description[0]:"",class:"mt-2"},null,8,["message"])]),o("div",null,[p(kn,{modelValue:r.tags,"onUpdate:modelValue":_[5]||(_[5]=O=>r.tags=O),label:"Associated Tags",placeholder:"Search or add tags",error:k.tags?k.tags[0]:""},null,8,["modelValue","error"])]),o("div",xn,[p(Ja,{id:"visible_to_client",checked:r.visible_to_client,"onUpdate:checked":_[6]||(_[6]=O=>r.visible_to_client=O)},null,8,["checked"]),p(q,{for:"visible_to_client",value:"Visible to Client",class:"ml-2"}),p(te,{message:k.visible_to_client?k.visible_to_client[0]:"",class:"mt-2"},null,8,["message"])])])]),_:1},8,["show","apiEndpoint","formData"]))}},Mn=at(Sn,[["__scopeId","data-v-3e3a6a9f"]]),Dn={key:0,class:"sidebar-wrapper"},Tn={class:"fixed inset-0 z-[100] flex pointer-events-none"},Cn={class:"flex items-center justify-between p-4 border-b border-gray-200 bg-white rounded-tl-xl sticky top-0 z-20"},Yn={class:"text-xl font-semibold text-gray-900"},$n={class:"flex-1 overflow-y-auto p-6 scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-gray-300 scrollbar-track-gray-100"},On={key:1,class:"p-4 border-t border-gray-200 bg-white sticky bottom-0 z-20"},Nn={__name:"RightSidebar",props:{show:{type:Boolean,default:!1},title:{type:String,default:"Details"},initialWidth:{type:Number,default:50},minWidth:{type:Number,default:30},maxWidth:{type:Number,default:90}},emits:["close","update:show"],setup(e,{emit:t}){const s=e,a=t,r=A(s.initialWidth),n=A(!1),i=k=>{n.value=!0,document.addEventListener("pointermove",l),document.addEventListener("pointerup",v)},l=k=>{if(!n.value)return;const O=window.innerWidth,L=(O-k.clientX)/O*100,Y=Math.max(s.minWidth,Math.min(s.maxWidth,L));r.value=Y},v=()=>{n.value=!1,document.removeEventListener("pointermove",l),document.removeEventListener("pointerup",v)};de(()=>s.show,k=>{k?document.body.style.overflow="hidden":document.body.style.overflow=""},{immediate:!0});const f=()=>{a("update:show",!1),a("close")},_=B(()=>window.innerWidth<768);return de(_,k=>{k&&s.show?r.value=100:!k&&s.show&&(r.value=s.initialWidth)},{immediate:!0}),de(()=>s.show,k=>{k&&(_.value?r.value=100:r.value=s.initialWidth)}),(k,O)=>(d(),W(Va,{to:"body"},[p(Us,{"enter-active-class":"transition ease-out duration-300 transform","enter-from-class":"translate-x-full","enter-to-class":"translate-x-0","leave-active-class":"transition ease-in duration-200 transform","leave-from-class":"translate-x-0","leave-to-class":"translate-x-full"},{default:M(()=>[e.show?(d(),g("div",Dn,[o("div",{class:"fixed inset-0 bg-gray-900 bg-opacity-50 transition-opacity z-[99]",onClick:f}),o("div",Tn,[o("div",{class:"relative ml-auto h-full bg-white shadow-xl flex flex-col rounded-l-xl pointer-events-auto",style:Vs({width:_.value?"100%":`${r.value}vw`})},[_.value?S("",!0):(d(),g("div",{key:0,class:"absolute left-0 top-0 h-full w-2 cursor-col-resize -ml-1 z-10",onPointerdown:i,title:"Drag to resize"},null,32)),o("div",Cn,[o("h3",Yn,I(e.title),1),o("button",{onClick:f,class:"text-gray-400 hover:text-gray-600 transition-colors"},O[0]||(O[0]=[o("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),o("div",$n,[xe(k.$slots,"content",{},void 0,!0)]),k.$slots.footer?(d(),g("div",On,[xe(k.$slots,"footer",{},void 0,!0)])):S("",!0)],4)])])):S("",!0)]),_:3})]))}},zs=at(Nn,[["__scopeId","data-v-2d864577"]]);//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var Bs;function x(){return Bs.apply(null,arguments)}function Pn(e){Bs=e}function pe(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function Be(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function F(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ls(e){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(e).length===0;var t;for(t in e)if(F(e,t))return!1;return!0}function ce(e){return e===void 0}function We(e){return typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]"}function yt(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function Gs(e,t){var s=[],a,r=e.length;for(a=0;a<r;++a)s.push(t(e[a],a));return s}function je(e,t){for(var s in t)F(t,s)&&(e[s]=t[s]);return F(t,"toString")&&(e.toString=t.toString),F(t,"valueOf")&&(e.valueOf=t.valueOf),e}function Me(e,t,s,a){return ya(e,t,s,a,!0).utc()}function An(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function E(e){return e._pf==null&&(e._pf=An()),e._pf}var ts;Array.prototype.some?ts=Array.prototype.some:ts=function(e){var t=Object(this),s=t.length>>>0,a;for(a=0;a<s;a++)if(a in t&&e.call(this,t[a],a,t))return!0;return!1};function ds(e){var t=null,s=!1,a=e._d&&!isNaN(e._d.getTime());if(a&&(t=E(e),s=ts.call(t.parsedDateParts,function(r){return r!=null}),a=t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&s),e._strict&&(a=a&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(e))e._isValid=a;else return a;return e._isValid}function It(e){var t=Me(NaN);return e!=null?je(E(t),e):E(t).userInvalidated=!0,t}var Ns=x.momentProperties=[],qt=!1;function us(e,t){var s,a,r,n=Ns.length;if(ce(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),ce(t._i)||(e._i=t._i),ce(t._f)||(e._f=t._f),ce(t._l)||(e._l=t._l),ce(t._strict)||(e._strict=t._strict),ce(t._tzm)||(e._tzm=t._tzm),ce(t._isUTC)||(e._isUTC=t._isUTC),ce(t._offset)||(e._offset=t._offset),ce(t._pf)||(e._pf=E(t)),ce(t._locale)||(e._locale=t._locale),n>0)for(s=0;s<n;s++)a=Ns[s],r=t[a],ce(r)||(e[a]=r);return e}function gt(e){us(this,e),this._d=new Date(e._d!=null?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),qt===!1&&(qt=!0,x.updateOffset(this),qt=!1)}function _e(e){return e instanceof gt||e!=null&&e._isAMomentObject!=null}function Zs(e){x.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+e)}function ve(e,t){var s=!0;return je(function(){if(x.deprecationHandler!=null&&x.deprecationHandler(null,e),s){var a=[],r,n,i,l=arguments.length;for(n=0;n<l;n++){if(r="",typeof arguments[n]=="object"){r+=`
[`+n+"] ";for(i in arguments[0])F(arguments[0],i)&&(r+=i+": "+arguments[0][i]+", ");r=r.slice(0,-2)}else r=arguments[n];a.push(r)}Zs(e+`
Arguments: `+Array.prototype.slice.call(a).join("")+`
`+new Error().stack),s=!1}return t.apply(this,arguments)},t)}var Ps={};function qs(e,t){x.deprecationHandler!=null&&x.deprecationHandler(e,t),Ps[e]||(Zs(t),Ps[e]=!0)}x.suppressDeprecationWarnings=!1;x.deprecationHandler=null;function De(e){return typeof Function<"u"&&e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function In(e){var t,s;for(s in e)F(e,s)&&(t=e[s],De(t)?this[s]=t:this["_"+s]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function ss(e,t){var s=je({},e),a;for(a in t)F(t,a)&&(Be(e[a])&&Be(t[a])?(s[a]={},je(s[a],e[a]),je(s[a],t[a])):t[a]!=null?s[a]=t[a]:delete s[a]);for(a in e)F(e,a)&&!F(t,a)&&Be(e[a])&&(s[a]=je({},s[a]));return s}function cs(e){e!=null&&this.set(e)}var as;Object.keys?as=Object.keys:as=function(e){var t,s=[];for(t in e)F(e,t)&&s.push(t);return s};var Rn={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function Wn(e,t,s){var a=this._calendar[e]||this._calendar.sameElse;return De(a)?a.call(t,s):a}function Se(e,t,s){var a=""+Math.abs(e),r=t-a.length,n=e>=0;return(n?s?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+a}var fs=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,wt=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Kt={},Qe={};function N(e,t,s,a){var r=a;typeof a=="string"&&(r=function(){return this[a]()}),e&&(Qe[e]=r),t&&(Qe[t[0]]=function(){return Se(r.apply(this,arguments),t[1],t[2])}),s&&(Qe[s]=function(){return this.localeData().ordinal(r.apply(this,arguments),e)})}function En(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function Ln(e){var t=e.match(fs),s,a;for(s=0,a=t.length;s<a;s++)Qe[t[s]]?t[s]=Qe[t[s]]:t[s]=En(t[s]);return function(r){var n="",i;for(i=0;i<a;i++)n+=De(t[i])?t[i].call(r,e):t[i];return n}}function bt(e,t){return e.isValid()?(t=Ks(t,e.localeData()),Kt[t]=Kt[t]||Ln(t),Kt[t](e)):e.localeData().invalidDate()}function Ks(e,t){var s=5;function a(r){return t.longDateFormat(r)||r}for(wt.lastIndex=0;s>=0&&wt.test(e);)e=e.replace(wt,a),wt.lastIndex=0,s-=1;return e}var Un={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function jn(e){var t=this._longDateFormat[e],s=this._longDateFormat[e.toUpperCase()];return t||!s?t:(this._longDateFormat[e]=s.match(fs).map(function(a){return a==="MMMM"||a==="MM"||a==="DD"||a==="dddd"?a.slice(1):a}).join(""),this._longDateFormat[e])}var Vn="Invalid date";function Fn(){return this._invalidDate}var Hn="%d",zn=/\d{1,2}/;function Bn(e){return this._ordinal.replace("%d",e)}var Gn={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function Zn(e,t,s,a){var r=this._relativeTime[s];return De(r)?r(e,t,s,a):r.replace(/%d/i,e)}function qn(e,t){var s=this._relativeTime[e>0?"future":"past"];return De(s)?s(t):s.replace(/%s/i,t)}var As={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function ye(e){return typeof e=="string"?As[e]||As[e.toLowerCase()]:void 0}function hs(e){var t={},s,a;for(a in e)F(e,a)&&(s=ye(a),s&&(t[s]=e[a]));return t}var Kn={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function Jn(e){var t=[],s;for(s in e)F(e,s)&&t.push({unit:s,priority:Kn[s]});return t.sort(function(a,r){return a.priority-r.priority}),t}var Js=/\d/,he=/\d\d/,Qs=/\d{3}/,ms=/\d{4}/,Rt=/[+-]?\d{6}/,J=/\d\d?/,Xs=/\d\d\d\d?/,ea=/\d\d\d\d\d\d?/,Wt=/\d{1,3}/,vs=/\d{1,4}/,Et=/[+-]?\d{1,6}/,rt=/\d+/,Lt=/[+-]?\d+/,Qn=/Z|[+-]\d\d:?\d\d/gi,Ut=/Z|[+-]\d\d(?::?\d\d)?/gi,Xn=/[+-]?\d+(\.\d{1,3})?/,pt=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,nt=/^[1-9]\d?/,ys=/^([1-9]\d|\d)/,Dt;Dt={};function D(e,t,s){Dt[e]=De(t)?t:function(a,r){return a&&s?s:t}}function ei(e,t){return F(Dt,e)?Dt[e](t._strict,t._locale):new RegExp(ti(e))}function ti(e){return Ie(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,s,a,r,n){return s||a||r||n}))}function Ie(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function me(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function U(e){var t=+e,s=0;return t!==0&&isFinite(t)&&(s=me(t)),s}var rs={};function G(e,t){var s,a=t,r;for(typeof e=="string"&&(e=[e]),We(t)&&(a=function(n,i){i[t]=U(n)}),r=e.length,s=0;s<r;s++)rs[e[s]]=a}function _t(e,t){G(e,function(s,a,r,n){r._w=r._w||{},t(s,r._w,r,n)})}function si(e,t,s){t!=null&&F(rs,e)&&rs[e](t,s._a,s,e)}function jt(e){return e%4===0&&e%100!==0||e%400===0}var oe=0,Oe=1,be=2,ie=3,ge=4,Ne=5,ze=6,ai=7,ri=8;N("Y",0,0,function(){var e=this.year();return e<=9999?Se(e,4):"+"+e});N(0,["YY",2],0,function(){return this.year()%100});N(0,["YYYY",4],0,"year");N(0,["YYYYY",5],0,"year");N(0,["YYYYYY",6,!0],0,"year");D("Y",Lt);D("YY",J,he);D("YYYY",vs,ms);D("YYYYY",Et,Rt);D("YYYYYY",Et,Rt);G(["YYYYY","YYYYYY"],oe);G("YYYY",function(e,t){t[oe]=e.length===2?x.parseTwoDigitYear(e):U(e)});G("YY",function(e,t){t[oe]=x.parseTwoDigitYear(e)});G("Y",function(e,t){t[oe]=parseInt(e,10)});function ct(e){return jt(e)?366:365}x.parseTwoDigitYear=function(e){return U(e)+(U(e)>68?1900:2e3)};var ta=it("FullYear",!0);function ni(){return jt(this.year())}function it(e,t){return function(s){return s!=null?(sa(this,e,s),x.updateOffset(this,t),this):ft(this,e)}}function ft(e,t){if(!e.isValid())return NaN;var s=e._d,a=e._isUTC;switch(t){case"Milliseconds":return a?s.getUTCMilliseconds():s.getMilliseconds();case"Seconds":return a?s.getUTCSeconds():s.getSeconds();case"Minutes":return a?s.getUTCMinutes():s.getMinutes();case"Hours":return a?s.getUTCHours():s.getHours();case"Date":return a?s.getUTCDate():s.getDate();case"Day":return a?s.getUTCDay():s.getDay();case"Month":return a?s.getUTCMonth():s.getMonth();case"FullYear":return a?s.getUTCFullYear():s.getFullYear();default:return NaN}}function sa(e,t,s){var a,r,n,i,l;if(!(!e.isValid()||isNaN(s))){switch(a=e._d,r=e._isUTC,t){case"Milliseconds":return void(r?a.setUTCMilliseconds(s):a.setMilliseconds(s));case"Seconds":return void(r?a.setUTCSeconds(s):a.setSeconds(s));case"Minutes":return void(r?a.setUTCMinutes(s):a.setMinutes(s));case"Hours":return void(r?a.setUTCHours(s):a.setHours(s));case"Date":return void(r?a.setUTCDate(s):a.setDate(s));case"FullYear":break;default:return}n=s,i=e.month(),l=e.date(),l=l===29&&i===1&&!jt(n)?28:l,r?a.setUTCFullYear(n,i,l):a.setFullYear(n,i,l)}}function ii(e){return e=ye(e),De(this[e])?this[e]():this}function oi(e,t){if(typeof e=="object"){e=hs(e);var s=Jn(e),a,r=s.length;for(a=0;a<r;a++)this[s[a].unit](e[s[a].unit])}else if(e=ye(e),De(this[e]))return this[e](t);return this}function li(e,t){return(e%t+t)%t}var ae;Array.prototype.indexOf?ae=Array.prototype.indexOf:ae=function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1};function gs(e,t){if(isNaN(e)||isNaN(t))return NaN;var s=li(t,12);return e+=(t-s)/12,s===1?jt(e)?29:28:31-s%7%2}N("M",["MM",2],"Mo",function(){return this.month()+1});N("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)});N("MMMM",0,0,function(e){return this.localeData().months(this,e)});D("M",J,nt);D("MM",J,he);D("MMM",function(e,t){return t.monthsShortRegex(e)});D("MMMM",function(e,t){return t.monthsRegex(e)});G(["M","MM"],function(e,t){t[Oe]=U(e)-1});G(["MMM","MMMM"],function(e,t,s,a){var r=s._locale.monthsParse(e,a,s._strict);r!=null?t[Oe]=r:E(s).invalidMonth=e});var di="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),aa="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),ra=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,ui=pt,ci=pt;function fi(e,t){return e?pe(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||ra).test(t)?"format":"standalone"][e.month()]:pe(this._months)?this._months:this._months.standalone}function hi(e,t){return e?pe(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[ra.test(t)?"format":"standalone"][e.month()]:pe(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function mi(e,t,s){var a,r,n,i=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],a=0;a<12;++a)n=Me([2e3,a]),this._shortMonthsParse[a]=this.monthsShort(n,"").toLocaleLowerCase(),this._longMonthsParse[a]=this.months(n,"").toLocaleLowerCase();return s?t==="MMM"?(r=ae.call(this._shortMonthsParse,i),r!==-1?r:null):(r=ae.call(this._longMonthsParse,i),r!==-1?r:null):t==="MMM"?(r=ae.call(this._shortMonthsParse,i),r!==-1?r:(r=ae.call(this._longMonthsParse,i),r!==-1?r:null)):(r=ae.call(this._longMonthsParse,i),r!==-1?r:(r=ae.call(this._shortMonthsParse,i),r!==-1?r:null))}function vi(e,t,s){var a,r,n;if(this._monthsParseExact)return mi.call(this,e,t,s);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),a=0;a<12;a++){if(r=Me([2e3,a]),s&&!this._longMonthsParse[a]&&(this._longMonthsParse[a]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[a]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),!s&&!this._monthsParse[a]&&(n="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[a]=new RegExp(n.replace(".",""),"i")),s&&t==="MMMM"&&this._longMonthsParse[a].test(e))return a;if(s&&t==="MMM"&&this._shortMonthsParse[a].test(e))return a;if(!s&&this._monthsParse[a].test(e))return a}}function na(e,t){if(!e.isValid())return e;if(typeof t=="string"){if(/^\d+$/.test(t))t=U(t);else if(t=e.localeData().monthsParse(t),!We(t))return e}var s=t,a=e.date();return a=a<29?a:Math.min(a,gs(e.year(),s)),e._isUTC?e._d.setUTCMonth(s,a):e._d.setMonth(s,a),e}function ia(e){return e!=null?(na(this,e),x.updateOffset(this,!0),this):ft(this,"Month")}function yi(){return gs(this.year(),this.month())}function gi(e){return this._monthsParseExact?(F(this,"_monthsRegex")||oa.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(F(this,"_monthsShortRegex")||(this._monthsShortRegex=ui),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function pi(e){return this._monthsParseExact?(F(this,"_monthsRegex")||oa.call(this),e?this._monthsStrictRegex:this._monthsRegex):(F(this,"_monthsRegex")||(this._monthsRegex=ci),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function oa(){function e(v,f){return f.length-v.length}var t=[],s=[],a=[],r,n,i,l;for(r=0;r<12;r++)n=Me([2e3,r]),i=Ie(this.monthsShort(n,"")),l=Ie(this.months(n,"")),t.push(i),s.push(l),a.push(l),a.push(i);t.sort(e),s.sort(e),a.sort(e),this._monthsRegex=new RegExp("^("+a.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+t.join("|")+")","i")}function _i(e,t,s,a,r,n,i){var l;return e<100&&e>=0?(l=new Date(e+400,t,s,a,r,n,i),isFinite(l.getFullYear())&&l.setFullYear(e)):l=new Date(e,t,s,a,r,n,i),l}function ht(e){var t,s;return e<100&&e>=0?(s=Array.prototype.slice.call(arguments),s[0]=e+400,t=new Date(Date.UTC.apply(null,s)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function Tt(e,t,s){var a=7+t-s,r=(7+ht(e,0,a).getUTCDay()-t)%7;return-r+a-1}function la(e,t,s,a,r){var n=(7+s-a)%7,i=Tt(e,a,r),l=1+7*(t-1)+n+i,v,f;return l<=0?(v=e-1,f=ct(v)+l):l>ct(e)?(v=e+1,f=l-ct(e)):(v=e,f=l),{year:v,dayOfYear:f}}function mt(e,t,s){var a=Tt(e.year(),t,s),r=Math.floor((e.dayOfYear()-a-1)/7)+1,n,i;return r<1?(i=e.year()-1,n=r+Re(i,t,s)):r>Re(e.year(),t,s)?(n=r-Re(e.year(),t,s),i=e.year()+1):(i=e.year(),n=r),{week:n,year:i}}function Re(e,t,s){var a=Tt(e,t,s),r=Tt(e+1,t,s);return(ct(e)-a+r)/7}N("w",["ww",2],"wo","week");N("W",["WW",2],"Wo","isoWeek");D("w",J,nt);D("ww",J,he);D("W",J,nt);D("WW",J,he);_t(["w","ww","W","WW"],function(e,t,s,a){t[a.substr(0,1)]=U(e)});function wi(e){return mt(e,this._week.dow,this._week.doy).week}var ki={dow:0,doy:6};function bi(){return this._week.dow}function xi(){return this._week.doy}function Si(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function Mi(e){var t=mt(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}N("d",0,"do","day");N("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)});N("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)});N("dddd",0,0,function(e){return this.localeData().weekdays(this,e)});N("e",0,0,"weekday");N("E",0,0,"isoWeekday");D("d",J);D("e",J);D("E",J);D("dd",function(e,t){return t.weekdaysMinRegex(e)});D("ddd",function(e,t){return t.weekdaysShortRegex(e)});D("dddd",function(e,t){return t.weekdaysRegex(e)});_t(["dd","ddd","dddd"],function(e,t,s,a){var r=s._locale.weekdaysParse(e,a,s._strict);r!=null?t.d=r:E(s).invalidWeekday=e});_t(["d","e","E"],function(e,t,s,a){t[a]=U(e)});function Di(e,t){return typeof e!="string"?e:isNaN(e)?(e=t.weekdaysParse(e),typeof e=="number"?e:null):parseInt(e,10)}function Ti(e,t){return typeof e=="string"?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function ps(e,t){return e.slice(t,7).concat(e.slice(0,t))}var Ci="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),da="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Yi="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),$i=pt,Oi=pt,Ni=pt;function Pi(e,t){var s=pe(this._weekdays)?this._weekdays:this._weekdays[e&&e!==!0&&this._weekdays.isFormat.test(t)?"format":"standalone"];return e===!0?ps(s,this._week.dow):e?s[e.day()]:s}function Ai(e){return e===!0?ps(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function Ii(e){return e===!0?ps(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function Ri(e,t,s){var a,r,n,i=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],a=0;a<7;++a)n=Me([2e3,1]).day(a),this._minWeekdaysParse[a]=this.weekdaysMin(n,"").toLocaleLowerCase(),this._shortWeekdaysParse[a]=this.weekdaysShort(n,"").toLocaleLowerCase(),this._weekdaysParse[a]=this.weekdays(n,"").toLocaleLowerCase();return s?t==="dddd"?(r=ae.call(this._weekdaysParse,i),r!==-1?r:null):t==="ddd"?(r=ae.call(this._shortWeekdaysParse,i),r!==-1?r:null):(r=ae.call(this._minWeekdaysParse,i),r!==-1?r:null):t==="dddd"?(r=ae.call(this._weekdaysParse,i),r!==-1||(r=ae.call(this._shortWeekdaysParse,i),r!==-1)?r:(r=ae.call(this._minWeekdaysParse,i),r!==-1?r:null)):t==="ddd"?(r=ae.call(this._shortWeekdaysParse,i),r!==-1||(r=ae.call(this._weekdaysParse,i),r!==-1)?r:(r=ae.call(this._minWeekdaysParse,i),r!==-1?r:null)):(r=ae.call(this._minWeekdaysParse,i),r!==-1||(r=ae.call(this._weekdaysParse,i),r!==-1)?r:(r=ae.call(this._shortWeekdaysParse,i),r!==-1?r:null))}function Wi(e,t,s){var a,r,n;if(this._weekdaysParseExact)return Ri.call(this,e,t,s);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),a=0;a<7;a++){if(r=Me([2e3,1]).day(a),s&&!this._fullWeekdaysParse[a]&&(this._fullWeekdaysParse[a]=new RegExp("^"+this.weekdays(r,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[a]=new RegExp("^"+this.weekdaysShort(r,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[a]=new RegExp("^"+this.weekdaysMin(r,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[a]||(n="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[a]=new RegExp(n.replace(".",""),"i")),s&&t==="dddd"&&this._fullWeekdaysParse[a].test(e))return a;if(s&&t==="ddd"&&this._shortWeekdaysParse[a].test(e))return a;if(s&&t==="dd"&&this._minWeekdaysParse[a].test(e))return a;if(!s&&this._weekdaysParse[a].test(e))return a}}function Ei(e){if(!this.isValid())return e!=null?this:NaN;var t=ft(this,"Day");return e!=null?(e=Di(e,this.localeData()),this.add(e-t,"d")):t}function Li(e){if(!this.isValid())return e!=null?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function Ui(e){if(!this.isValid())return e!=null?this:NaN;if(e!=null){var t=Ti(e,this.localeData());return this.day(this.day()%7?t:t-7)}else return this.day()||7}function ji(e){return this._weekdaysParseExact?(F(this,"_weekdaysRegex")||_s.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(F(this,"_weekdaysRegex")||(this._weekdaysRegex=$i),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function Vi(e){return this._weekdaysParseExact?(F(this,"_weekdaysRegex")||_s.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(F(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Oi),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Fi(e){return this._weekdaysParseExact?(F(this,"_weekdaysRegex")||_s.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(F(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Ni),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function _s(){function e(_,k){return k.length-_.length}var t=[],s=[],a=[],r=[],n,i,l,v,f;for(n=0;n<7;n++)i=Me([2e3,1]).day(n),l=Ie(this.weekdaysMin(i,"")),v=Ie(this.weekdaysShort(i,"")),f=Ie(this.weekdays(i,"")),t.push(l),s.push(v),a.push(f),r.push(l),r.push(v),r.push(f);t.sort(e),s.sort(e),a.sort(e),r.sort(e),this._weekdaysRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+t.join("|")+")","i")}function ws(){return this.hours()%12||12}function Hi(){return this.hours()||24}N("H",["HH",2],0,"hour");N("h",["hh",2],0,ws);N("k",["kk",2],0,Hi);N("hmm",0,0,function(){return""+ws.apply(this)+Se(this.minutes(),2)});N("hmmss",0,0,function(){return""+ws.apply(this)+Se(this.minutes(),2)+Se(this.seconds(),2)});N("Hmm",0,0,function(){return""+this.hours()+Se(this.minutes(),2)});N("Hmmss",0,0,function(){return""+this.hours()+Se(this.minutes(),2)+Se(this.seconds(),2)});function ua(e,t){N(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}ua("a",!0);ua("A",!1);function ca(e,t){return t._meridiemParse}D("a",ca);D("A",ca);D("H",J,ys);D("h",J,nt);D("k",J,nt);D("HH",J,he);D("hh",J,he);D("kk",J,he);D("hmm",Xs);D("hmmss",ea);D("Hmm",Xs);D("Hmmss",ea);G(["H","HH"],ie);G(["k","kk"],function(e,t,s){var a=U(e);t[ie]=a===24?0:a});G(["a","A"],function(e,t,s){s._isPm=s._locale.isPM(e),s._meridiem=e});G(["h","hh"],function(e,t,s){t[ie]=U(e),E(s).bigHour=!0});G("hmm",function(e,t,s){var a=e.length-2;t[ie]=U(e.substr(0,a)),t[ge]=U(e.substr(a)),E(s).bigHour=!0});G("hmmss",function(e,t,s){var a=e.length-4,r=e.length-2;t[ie]=U(e.substr(0,a)),t[ge]=U(e.substr(a,2)),t[Ne]=U(e.substr(r)),E(s).bigHour=!0});G("Hmm",function(e,t,s){var a=e.length-2;t[ie]=U(e.substr(0,a)),t[ge]=U(e.substr(a))});G("Hmmss",function(e,t,s){var a=e.length-4,r=e.length-2;t[ie]=U(e.substr(0,a)),t[ge]=U(e.substr(a,2)),t[Ne]=U(e.substr(r))});function zi(e){return(e+"").toLowerCase().charAt(0)==="p"}var Bi=/[ap]\.?m?\.?/i,Gi=it("Hours",!0);function Zi(e,t,s){return e>11?s?"pm":"PM":s?"am":"AM"}var fa={calendar:Rn,longDateFormat:Un,invalidDate:Vn,ordinal:Hn,dayOfMonthOrdinalParse:zn,relativeTime:Gn,months:di,monthsShort:aa,week:ki,weekdays:Ci,weekdaysMin:Yi,weekdaysShort:da,meridiemParse:Bi},X={},lt={},vt;function qi(e,t){var s,a=Math.min(e.length,t.length);for(s=0;s<a;s+=1)if(e[s]!==t[s])return s;return a}function Is(e){return e&&e.toLowerCase().replace("_","-")}function Ki(e){for(var t=0,s,a,r,n;t<e.length;){for(n=Is(e[t]).split("-"),s=n.length,a=Is(e[t+1]),a=a?a.split("-"):null;s>0;){if(r=Vt(n.slice(0,s).join("-")),r)return r;if(a&&a.length>=s&&qi(n,a)>=s-1)break;s--}t++}return vt}function Ji(e){return!!(e&&e.match("^[^/\\\\]*$"))}function Vt(e){var t=null,s;if(X[e]===void 0&&typeof module<"u"&&module&&module.exports&&Ji(e))try{t=vt._abbr,s=require,s("./locale/"+e),Fe(t)}catch{X[e]=null}return X[e]}function Fe(e,t){var s;return e&&(ce(t)?s=Ee(e):s=ks(e,t),s?vt=s:typeof console<"u"&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),vt._abbr}function ks(e,t){if(t!==null){var s,a=fa;if(t.abbr=e,X[e]!=null)qs("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),a=X[e]._config;else if(t.parentLocale!=null)if(X[t.parentLocale]!=null)a=X[t.parentLocale]._config;else if(s=Vt(t.parentLocale),s!=null)a=s._config;else return lt[t.parentLocale]||(lt[t.parentLocale]=[]),lt[t.parentLocale].push({name:e,config:t}),null;return X[e]=new cs(ss(a,t)),lt[e]&&lt[e].forEach(function(r){ks(r.name,r.config)}),Fe(e),X[e]}else return delete X[e],null}function Qi(e,t){if(t!=null){var s,a,r=fa;X[e]!=null&&X[e].parentLocale!=null?X[e].set(ss(X[e]._config,t)):(a=Vt(e),a!=null&&(r=a._config),t=ss(r,t),a==null&&(t.abbr=e),s=new cs(t),s.parentLocale=X[e],X[e]=s),Fe(e)}else X[e]!=null&&(X[e].parentLocale!=null?(X[e]=X[e].parentLocale,e===Fe()&&Fe(e)):X[e]!=null&&delete X[e]);return X[e]}function Ee(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return vt;if(!pe(e)){if(t=Vt(e),t)return t;e=[e]}return Ki(e)}function Xi(){return as(X)}function bs(e){var t,s=e._a;return s&&E(e).overflow===-2&&(t=s[Oe]<0||s[Oe]>11?Oe:s[be]<1||s[be]>gs(s[oe],s[Oe])?be:s[ie]<0||s[ie]>24||s[ie]===24&&(s[ge]!==0||s[Ne]!==0||s[ze]!==0)?ie:s[ge]<0||s[ge]>59?ge:s[Ne]<0||s[Ne]>59?Ne:s[ze]<0||s[ze]>999?ze:-1,E(e)._overflowDayOfYear&&(t<oe||t>be)&&(t=be),E(e)._overflowWeeks&&t===-1&&(t=ai),E(e)._overflowWeekday&&t===-1&&(t=ri),E(e).overflow=t),e}var eo=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,to=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,so=/Z|[+-]\d\d(?::?\d\d)?/,kt=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Jt=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],ao=/^\/?Date\((-?\d+)/i,ro=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,no={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function ha(e){var t,s,a=e._i,r=eo.exec(a)||to.exec(a),n,i,l,v,f=kt.length,_=Jt.length;if(r){for(E(e).iso=!0,t=0,s=f;t<s;t++)if(kt[t][1].exec(r[1])){i=kt[t][0],n=kt[t][2]!==!1;break}if(i==null){e._isValid=!1;return}if(r[3]){for(t=0,s=_;t<s;t++)if(Jt[t][1].exec(r[3])){l=(r[2]||" ")+Jt[t][0];break}if(l==null){e._isValid=!1;return}}if(!n&&l!=null){e._isValid=!1;return}if(r[4])if(so.exec(r[4]))v="Z";else{e._isValid=!1;return}e._f=i+(l||"")+(v||""),Ss(e)}else e._isValid=!1}function io(e,t,s,a,r,n){var i=[oo(e),aa.indexOf(t),parseInt(s,10),parseInt(a,10),parseInt(r,10)];return n&&i.push(parseInt(n,10)),i}function oo(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function lo(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function uo(e,t,s){if(e){var a=da.indexOf(e),r=new Date(t[0],t[1],t[2]).getDay();if(a!==r)return E(s).weekdayMismatch=!0,s._isValid=!1,!1}return!0}function co(e,t,s){if(e)return no[e];if(t)return 0;var a=parseInt(s,10),r=a%100,n=(a-r)/100;return n*60+r}function ma(e){var t=ro.exec(lo(e._i)),s;if(t){if(s=io(t[4],t[3],t[2],t[5],t[6],t[7]),!uo(t[1],s,e))return;e._a=s,e._tzm=co(t[8],t[9],t[10]),e._d=ht.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),E(e).rfc2822=!0}else e._isValid=!1}function fo(e){var t=ao.exec(e._i);if(t!==null){e._d=new Date(+t[1]);return}if(ha(e),e._isValid===!1)delete e._isValid;else return;if(ma(e),e._isValid===!1)delete e._isValid;else return;e._strict?e._isValid=!1:x.createFromInputFallback(e)}x.createFromInputFallback=ve("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});function qe(e,t,s){return e??t??s}function ho(e){var t=new Date(x.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function xs(e){var t,s,a=[],r,n,i;if(!e._d){for(r=ho(e),e._w&&e._a[be]==null&&e._a[Oe]==null&&mo(e),e._dayOfYear!=null&&(i=qe(e._a[oe],r[oe]),(e._dayOfYear>ct(i)||e._dayOfYear===0)&&(E(e)._overflowDayOfYear=!0),s=ht(i,0,e._dayOfYear),e._a[Oe]=s.getUTCMonth(),e._a[be]=s.getUTCDate()),t=0;t<3&&e._a[t]==null;++t)e._a[t]=a[t]=r[t];for(;t<7;t++)e._a[t]=a[t]=e._a[t]==null?t===2?1:0:e._a[t];e._a[ie]===24&&e._a[ge]===0&&e._a[Ne]===0&&e._a[ze]===0&&(e._nextDay=!0,e._a[ie]=0),e._d=(e._useUTC?ht:_i).apply(null,a),n=e._useUTC?e._d.getUTCDay():e._d.getDay(),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[ie]=24),e._w&&typeof e._w.d<"u"&&e._w.d!==n&&(E(e).weekdayMismatch=!0)}}function mo(e){var t,s,a,r,n,i,l,v,f;t=e._w,t.GG!=null||t.W!=null||t.E!=null?(n=1,i=4,s=qe(t.GG,e._a[oe],mt(K(),1,4).year),a=qe(t.W,1),r=qe(t.E,1),(r<1||r>7)&&(v=!0)):(n=e._locale._week.dow,i=e._locale._week.doy,f=mt(K(),n,i),s=qe(t.gg,e._a[oe],f.year),a=qe(t.w,f.week),t.d!=null?(r=t.d,(r<0||r>6)&&(v=!0)):t.e!=null?(r=t.e+n,(t.e<0||t.e>6)&&(v=!0)):r=n),a<1||a>Re(s,n,i)?E(e)._overflowWeeks=!0:v!=null?E(e)._overflowWeekday=!0:(l=la(s,a,r,n,i),e._a[oe]=l.year,e._dayOfYear=l.dayOfYear)}x.ISO_8601=function(){};x.RFC_2822=function(){};function Ss(e){if(e._f===x.ISO_8601){ha(e);return}if(e._f===x.RFC_2822){ma(e);return}e._a=[],E(e).empty=!0;var t=""+e._i,s,a,r,n,i,l=t.length,v=0,f,_;for(r=Ks(e._f,e._locale).match(fs)||[],_=r.length,s=0;s<_;s++)n=r[s],a=(t.match(ei(n,e))||[])[0],a&&(i=t.substr(0,t.indexOf(a)),i.length>0&&E(e).unusedInput.push(i),t=t.slice(t.indexOf(a)+a.length),v+=a.length),Qe[n]?(a?E(e).empty=!1:E(e).unusedTokens.push(n),si(n,a,e)):e._strict&&!a&&E(e).unusedTokens.push(n);E(e).charsLeftOver=l-v,t.length>0&&E(e).unusedInput.push(t),e._a[ie]<=12&&E(e).bigHour===!0&&e._a[ie]>0&&(E(e).bigHour=void 0),E(e).parsedDateParts=e._a.slice(0),E(e).meridiem=e._meridiem,e._a[ie]=vo(e._locale,e._a[ie],e._meridiem),f=E(e).era,f!==null&&(e._a[oe]=e._locale.erasConvertYear(f,e._a[oe])),xs(e),bs(e)}function vo(e,t,s){var a;return s==null?t:e.meridiemHour!=null?e.meridiemHour(t,s):(e.isPM!=null&&(a=e.isPM(s),a&&t<12&&(t+=12),!a&&t===12&&(t=0)),t)}function yo(e){var t,s,a,r,n,i,l=!1,v=e._f.length;if(v===0){E(e).invalidFormat=!0,e._d=new Date(NaN);return}for(r=0;r<v;r++)n=0,i=!1,t=us({},e),e._useUTC!=null&&(t._useUTC=e._useUTC),t._f=e._f[r],Ss(t),ds(t)&&(i=!0),n+=E(t).charsLeftOver,n+=E(t).unusedTokens.length*10,E(t).score=n,l?n<a&&(a=n,s=t):(a==null||n<a||i)&&(a=n,s=t,i&&(l=!0));je(e,s||t)}function go(e){if(!e._d){var t=hs(e._i),s=t.day===void 0?t.date:t.day;e._a=Gs([t.year,t.month,s,t.hour,t.minute,t.second,t.millisecond],function(a){return a&&parseInt(a,10)}),xs(e)}}function po(e){var t=new gt(bs(va(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function va(e){var t=e._i,s=e._f;return e._locale=e._locale||Ee(e._l),t===null||s===void 0&&t===""?It({nullInput:!0}):(typeof t=="string"&&(e._i=t=e._locale.preparse(t)),_e(t)?new gt(bs(t)):(yt(t)?e._d=t:pe(s)?yo(e):s?Ss(e):_o(e),ds(e)||(e._d=null),e))}function _o(e){var t=e._i;ce(t)?e._d=new Date(x.now()):yt(t)?e._d=new Date(t.valueOf()):typeof t=="string"?fo(e):pe(t)?(e._a=Gs(t.slice(0),function(s){return parseInt(s,10)}),xs(e)):Be(t)?go(e):We(t)?e._d=new Date(t):x.createFromInputFallback(e)}function ya(e,t,s,a,r){var n={};return(t===!0||t===!1)&&(a=t,t=void 0),(s===!0||s===!1)&&(a=s,s=void 0),(Be(e)&&ls(e)||pe(e)&&e.length===0)&&(e=void 0),n._isAMomentObject=!0,n._useUTC=n._isUTC=r,n._l=s,n._i=e,n._f=t,n._strict=a,po(n)}function K(e,t,s,a){return ya(e,t,s,a,!1)}var wo=ve("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=K.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:It()}),ko=ve("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=K.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:It()});function ga(e,t){var s,a;if(t.length===1&&pe(t[0])&&(t=t[0]),!t.length)return K();for(s=t[0],a=1;a<t.length;++a)(!t[a].isValid()||t[a][e](s))&&(s=t[a]);return s}function bo(){var e=[].slice.call(arguments,0);return ga("isBefore",e)}function xo(){var e=[].slice.call(arguments,0);return ga("isAfter",e)}var So=function(){return Date.now?Date.now():+new Date},dt=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Mo(e){var t,s=!1,a,r=dt.length;for(t in e)if(F(e,t)&&!(ae.call(dt,t)!==-1&&(e[t]==null||!isNaN(e[t]))))return!1;for(a=0;a<r;++a)if(e[dt[a]]){if(s)return!1;parseFloat(e[dt[a]])!==U(e[dt[a]])&&(s=!0)}return!0}function Do(){return this._isValid}function To(){return we(NaN)}function Ft(e){var t=hs(e),s=t.year||0,a=t.quarter||0,r=t.month||0,n=t.week||t.isoWeek||0,i=t.day||0,l=t.hour||0,v=t.minute||0,f=t.second||0,_=t.millisecond||0;this._isValid=Mo(t),this._milliseconds=+_+f*1e3+v*6e4+l*1e3*60*60,this._days=+i+n*7,this._months=+r+a*3+s*12,this._data={},this._locale=Ee(),this._bubble()}function xt(e){return e instanceof Ft}function ns(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function Co(e,t,s){var a=Math.min(e.length,t.length),r=Math.abs(e.length-t.length),n=0,i;for(i=0;i<a;i++)U(e[i])!==U(t[i])&&n++;return n+r}function pa(e,t){N(e,0,0,function(){var s=this.utcOffset(),a="+";return s<0&&(s=-s,a="-"),a+Se(~~(s/60),2)+t+Se(~~s%60,2)})}pa("Z",":");pa("ZZ","");D("Z",Ut);D("ZZ",Ut);G(["Z","ZZ"],function(e,t,s){s._useUTC=!0,s._tzm=Ms(Ut,e)});var Yo=/([\+\-]|\d\d)/gi;function Ms(e,t){var s=(t||"").match(e),a,r,n;return s===null?null:(a=s[s.length-1]||[],r=(a+"").match(Yo)||["-",0,0],n=+(r[1]*60)+U(r[2]),n===0?0:r[0]==="+"?n:-n)}function Ds(e,t){var s,a;return t._isUTC?(s=t.clone(),a=(_e(e)||yt(e)?e.valueOf():K(e).valueOf())-s.valueOf(),s._d.setTime(s._d.valueOf()+a),x.updateOffset(s,!1),s):K(e).local()}function is(e){return-Math.round(e._d.getTimezoneOffset())}x.updateOffset=function(){};function $o(e,t,s){var a=this._offset||0,r;if(!this.isValid())return e!=null?this:NaN;if(e!=null){if(typeof e=="string"){if(e=Ms(Ut,e),e===null)return this}else Math.abs(e)<16&&!s&&(e=e*60);return!this._isUTC&&t&&(r=is(this)),this._offset=e,this._isUTC=!0,r!=null&&this.add(r,"m"),a!==e&&(!t||this._changeInProgress?ka(this,we(e-a,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,x.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?a:is(this)}function Oo(e,t){return e!=null?(typeof e!="string"&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function No(e){return this.utcOffset(0,e)}function Po(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(is(this),"m")),this}function Ao(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var e=Ms(Qn,this._i);e!=null?this.utcOffset(e):this.utcOffset(0,!0)}return this}function Io(e){return this.isValid()?(e=e?K(e).utcOffset():0,(this.utcOffset()-e)%60===0):!1}function Ro(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Wo(){if(!ce(this._isDSTShifted))return this._isDSTShifted;var e={},t;return us(e,this),e=va(e),e._a?(t=e._isUTC?Me(e._a):K(e._a),this._isDSTShifted=this.isValid()&&Co(e._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function Eo(){return this.isValid()?!this._isUTC:!1}function Lo(){return this.isValid()?this._isUTC:!1}function _a(){return this.isValid()?this._isUTC&&this._offset===0:!1}var Uo=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,jo=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function we(e,t){var s=e,a=null,r,n,i;return xt(e)?s={ms:e._milliseconds,d:e._days,M:e._months}:We(e)||!isNaN(+e)?(s={},t?s[t]=+e:s.milliseconds=+e):(a=Uo.exec(e))?(r=a[1]==="-"?-1:1,s={y:0,d:U(a[be])*r,h:U(a[ie])*r,m:U(a[ge])*r,s:U(a[Ne])*r,ms:U(ns(a[ze]*1e3))*r}):(a=jo.exec(e))?(r=a[1]==="-"?-1:1,s={y:He(a[2],r),M:He(a[3],r),w:He(a[4],r),d:He(a[5],r),h:He(a[6],r),m:He(a[7],r),s:He(a[8],r)}):s==null?s={}:typeof s=="object"&&("from"in s||"to"in s)&&(i=Vo(K(s.from),K(s.to)),s={},s.ms=i.milliseconds,s.M=i.months),n=new Ft(s),xt(e)&&F(e,"_locale")&&(n._locale=e._locale),xt(e)&&F(e,"_isValid")&&(n._isValid=e._isValid),n}we.fn=Ft.prototype;we.invalid=To;function He(e,t){var s=e&&parseFloat(e.replace(",","."));return(isNaN(s)?0:s)*t}function Rs(e,t){var s={};return s.months=t.month()-e.month()+(t.year()-e.year())*12,e.clone().add(s.months,"M").isAfter(t)&&--s.months,s.milliseconds=+t-+e.clone().add(s.months,"M"),s}function Vo(e,t){var s;return e.isValid()&&t.isValid()?(t=Ds(t,e),e.isBefore(t)?s=Rs(e,t):(s=Rs(t,e),s.milliseconds=-s.milliseconds,s.months=-s.months),s):{milliseconds:0,months:0}}function wa(e,t){return function(s,a){var r,n;return a!==null&&!isNaN(+a)&&(qs(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),n=s,s=a,a=n),r=we(s,a),ka(this,r,e),this}}function ka(e,t,s,a){var r=t._milliseconds,n=ns(t._days),i=ns(t._months);e.isValid()&&(a=a??!0,i&&na(e,ft(e,"Month")+i*s),n&&sa(e,"Date",ft(e,"Date")+n*s),r&&e._d.setTime(e._d.valueOf()+r*s),a&&x.updateOffset(e,n||i))}var Fo=wa(1,"add"),Ho=wa(-1,"subtract");function ba(e){return typeof e=="string"||e instanceof String}function zo(e){return _e(e)||yt(e)||ba(e)||We(e)||Go(e)||Bo(e)||e===null||e===void 0}function Bo(e){var t=Be(e)&&!ls(e),s=!1,a=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],r,n,i=a.length;for(r=0;r<i;r+=1)n=a[r],s=s||F(e,n);return t&&s}function Go(e){var t=pe(e),s=!1;return t&&(s=e.filter(function(a){return!We(a)&&ba(e)}).length===0),t&&s}function Zo(e){var t=Be(e)&&!ls(e),s=!1,a=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],r,n;for(r=0;r<a.length;r+=1)n=a[r],s=s||F(e,n);return t&&s}function qo(e,t){var s=e.diff(t,"days",!0);return s<-6?"sameElse":s<-1?"lastWeek":s<0?"lastDay":s<1?"sameDay":s<2?"nextDay":s<7?"nextWeek":"sameElse"}function Ko(e,t){arguments.length===1&&(arguments[0]?zo(arguments[0])?(e=arguments[0],t=void 0):Zo(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var s=e||K(),a=Ds(s,this).startOf("day"),r=x.calendarFormat(this,a)||"sameElse",n=t&&(De(t[r])?t[r].call(this,s):t[r]);return this.format(n||this.localeData().calendar(r,this,K(s)))}function Jo(){return new gt(this)}function Qo(e,t){var s=_e(e)?e:K(e);return this.isValid()&&s.isValid()?(t=ye(t)||"millisecond",t==="millisecond"?this.valueOf()>s.valueOf():s.valueOf()<this.clone().startOf(t).valueOf()):!1}function Xo(e,t){var s=_e(e)?e:K(e);return this.isValid()&&s.isValid()?(t=ye(t)||"millisecond",t==="millisecond"?this.valueOf()<s.valueOf():this.clone().endOf(t).valueOf()<s.valueOf()):!1}function el(e,t,s,a){var r=_e(e)?e:K(e),n=_e(t)?t:K(t);return this.isValid()&&r.isValid()&&n.isValid()?(a=a||"()",(a[0]==="("?this.isAfter(r,s):!this.isBefore(r,s))&&(a[1]===")"?this.isBefore(n,s):!this.isAfter(n,s))):!1}function tl(e,t){var s=_e(e)?e:K(e),a;return this.isValid()&&s.isValid()?(t=ye(t)||"millisecond",t==="millisecond"?this.valueOf()===s.valueOf():(a=s.valueOf(),this.clone().startOf(t).valueOf()<=a&&a<=this.clone().endOf(t).valueOf())):!1}function sl(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function al(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function rl(e,t,s){var a,r,n;if(!this.isValid())return NaN;if(a=Ds(e,this),!a.isValid())return NaN;switch(r=(a.utcOffset()-this.utcOffset())*6e4,t=ye(t),t){case"year":n=St(this,a)/12;break;case"month":n=St(this,a);break;case"quarter":n=St(this,a)/3;break;case"second":n=(this-a)/1e3;break;case"minute":n=(this-a)/6e4;break;case"hour":n=(this-a)/36e5;break;case"day":n=(this-a-r)/864e5;break;case"week":n=(this-a-r)/6048e5;break;default:n=this-a}return s?n:me(n)}function St(e,t){if(e.date()<t.date())return-St(t,e);var s=(t.year()-e.year())*12+(t.month()-e.month()),a=e.clone().add(s,"months"),r,n;return t-a<0?(r=e.clone().add(s-1,"months"),n=(t-a)/(a-r)):(r=e.clone().add(s+1,"months"),n=(t-a)/(r-a)),-(s+n)||0}x.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";x.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function nl(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function il(e){if(!this.isValid())return null;var t=e!==!0,s=t?this.clone().utc():this;return s.year()<0||s.year()>9999?bt(s,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):De(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",bt(s,"Z")):bt(s,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function ol(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="",s,a,r,n;return this.isLocal()||(e=this.utcOffset()===0?"moment.utc":"moment.parseZone",t="Z"),s="["+e+'("]',a=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",r="-MM-DD[T]HH:mm:ss.SSS",n=t+'[")]',this.format(s+a+r+n)}function ll(e){e||(e=this.isUtc()?x.defaultFormatUtc:x.defaultFormat);var t=bt(this,e);return this.localeData().postformat(t)}function dl(e,t){return this.isValid()&&(_e(e)&&e.isValid()||K(e).isValid())?we({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function ul(e){return this.from(K(),e)}function cl(e,t){return this.isValid()&&(_e(e)&&e.isValid()||K(e).isValid())?we({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function fl(e){return this.to(K(),e)}function xa(e){var t;return e===void 0?this._locale._abbr:(t=Ee(e),t!=null&&(this._locale=t),this)}var Sa=ve("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===void 0?this.localeData():this.locale(e)});function Ma(){return this._locale}var Ct=1e3,Xe=60*Ct,Yt=60*Xe,Da=(365*400+97)*24*Yt;function et(e,t){return(e%t+t)%t}function Ta(e,t,s){return e<100&&e>=0?new Date(e+400,t,s)-Da:new Date(e,t,s).valueOf()}function Ca(e,t,s){return e<100&&e>=0?Date.UTC(e+400,t,s)-Da:Date.UTC(e,t,s)}function hl(e){var t,s;if(e=ye(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(s=this._isUTC?Ca:Ta,e){case"year":t=s(this.year(),0,1);break;case"quarter":t=s(this.year(),this.month()-this.month()%3,1);break;case"month":t=s(this.year(),this.month(),1);break;case"week":t=s(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=s(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=s(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=et(t+(this._isUTC?0:this.utcOffset()*Xe),Yt);break;case"minute":t=this._d.valueOf(),t-=et(t,Xe);break;case"second":t=this._d.valueOf(),t-=et(t,Ct);break}return this._d.setTime(t),x.updateOffset(this,!0),this}function ml(e){var t,s;if(e=ye(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(s=this._isUTC?Ca:Ta,e){case"year":t=s(this.year()+1,0,1)-1;break;case"quarter":t=s(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=s(this.year(),this.month()+1,1)-1;break;case"week":t=s(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=s(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=s(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=Yt-et(t+(this._isUTC?0:this.utcOffset()*Xe),Yt)-1;break;case"minute":t=this._d.valueOf(),t+=Xe-et(t,Xe)-1;break;case"second":t=this._d.valueOf(),t+=Ct-et(t,Ct)-1;break}return this._d.setTime(t),x.updateOffset(this,!0),this}function vl(){return this._d.valueOf()-(this._offset||0)*6e4}function yl(){return Math.floor(this.valueOf()/1e3)}function gl(){return new Date(this.valueOf())}function pl(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function _l(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function wl(){return this.isValid()?this.toISOString():null}function kl(){return ds(this)}function bl(){return je({},E(this))}function xl(){return E(this).overflow}function Sl(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}N("N",0,0,"eraAbbr");N("NN",0,0,"eraAbbr");N("NNN",0,0,"eraAbbr");N("NNNN",0,0,"eraName");N("NNNNN",0,0,"eraNarrow");N("y",["y",1],"yo","eraYear");N("y",["yy",2],0,"eraYear");N("y",["yyy",3],0,"eraYear");N("y",["yyyy",4],0,"eraYear");D("N",Ts);D("NN",Ts);D("NNN",Ts);D("NNNN",Il);D("NNNNN",Rl);G(["N","NN","NNN","NNNN","NNNNN"],function(e,t,s,a){var r=s._locale.erasParse(e,a,s._strict);r?E(s).era=r:E(s).invalidEra=e});D("y",rt);D("yy",rt);D("yyy",rt);D("yyyy",rt);D("yo",Wl);G(["y","yy","yyy","yyyy"],oe);G(["yo"],function(e,t,s,a){var r;s._locale._eraYearOrdinalRegex&&(r=e.match(s._locale._eraYearOrdinalRegex)),s._locale.eraYearOrdinalParse?t[oe]=s._locale.eraYearOrdinalParse(e,r):t[oe]=parseInt(e,10)});function Ml(e,t){var s,a,r,n=this._eras||Ee("en")._eras;for(s=0,a=n.length;s<a;++s){switch(typeof n[s].since){case"string":r=x(n[s].since).startOf("day"),n[s].since=r.valueOf();break}switch(typeof n[s].until){case"undefined":n[s].until=1/0;break;case"string":r=x(n[s].until).startOf("day").valueOf(),n[s].until=r.valueOf();break}}return n}function Dl(e,t,s){var a,r,n=this.eras(),i,l,v;for(e=e.toUpperCase(),a=0,r=n.length;a<r;++a)if(i=n[a].name.toUpperCase(),l=n[a].abbr.toUpperCase(),v=n[a].narrow.toUpperCase(),s)switch(t){case"N":case"NN":case"NNN":if(l===e)return n[a];break;case"NNNN":if(i===e)return n[a];break;case"NNNNN":if(v===e)return n[a];break}else if([i,l,v].indexOf(e)>=0)return n[a]}function Tl(e,t){var s=e.since<=e.until?1:-1;return t===void 0?x(e.since).year():x(e.since).year()+(t-e.offset)*s}function Cl(){var e,t,s,a=this.localeData().eras();for(e=0,t=a.length;e<t;++e)if(s=this.clone().startOf("day").valueOf(),a[e].since<=s&&s<=a[e].until||a[e].until<=s&&s<=a[e].since)return a[e].name;return""}function Yl(){var e,t,s,a=this.localeData().eras();for(e=0,t=a.length;e<t;++e)if(s=this.clone().startOf("day").valueOf(),a[e].since<=s&&s<=a[e].until||a[e].until<=s&&s<=a[e].since)return a[e].narrow;return""}function $l(){var e,t,s,a=this.localeData().eras();for(e=0,t=a.length;e<t;++e)if(s=this.clone().startOf("day").valueOf(),a[e].since<=s&&s<=a[e].until||a[e].until<=s&&s<=a[e].since)return a[e].abbr;return""}function Ol(){var e,t,s,a,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e)if(s=r[e].since<=r[e].until?1:-1,a=this.clone().startOf("day").valueOf(),r[e].since<=a&&a<=r[e].until||r[e].until<=a&&a<=r[e].since)return(this.year()-x(r[e].since).year())*s+r[e].offset;return this.year()}function Nl(e){return F(this,"_erasNameRegex")||Cs.call(this),e?this._erasNameRegex:this._erasRegex}function Pl(e){return F(this,"_erasAbbrRegex")||Cs.call(this),e?this._erasAbbrRegex:this._erasRegex}function Al(e){return F(this,"_erasNarrowRegex")||Cs.call(this),e?this._erasNarrowRegex:this._erasRegex}function Ts(e,t){return t.erasAbbrRegex(e)}function Il(e,t){return t.erasNameRegex(e)}function Rl(e,t){return t.erasNarrowRegex(e)}function Wl(e,t){return t._eraYearOrdinalRegex||rt}function Cs(){var e=[],t=[],s=[],a=[],r,n,i,l,v,f=this.eras();for(r=0,n=f.length;r<n;++r)i=Ie(f[r].name),l=Ie(f[r].abbr),v=Ie(f[r].narrow),t.push(i),e.push(l),s.push(v),a.push(i),a.push(l),a.push(v);this._erasRegex=new RegExp("^("+a.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+t.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+s.join("|")+")","i")}N(0,["gg",2],0,function(){return this.weekYear()%100});N(0,["GG",2],0,function(){return this.isoWeekYear()%100});function Ht(e,t){N(0,[e,e.length],0,t)}Ht("gggg","weekYear");Ht("ggggg","weekYear");Ht("GGGG","isoWeekYear");Ht("GGGGG","isoWeekYear");D("G",Lt);D("g",Lt);D("GG",J,he);D("gg",J,he);D("GGGG",vs,ms);D("gggg",vs,ms);D("GGGGG",Et,Rt);D("ggggg",Et,Rt);_t(["gggg","ggggg","GGGG","GGGGG"],function(e,t,s,a){t[a.substr(0,2)]=U(e)});_t(["gg","GG"],function(e,t,s,a){t[a]=x.parseTwoDigitYear(e)});function El(e){return Ya.call(this,e,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function Ll(e){return Ya.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function Ul(){return Re(this.year(),1,4)}function jl(){return Re(this.isoWeekYear(),1,4)}function Vl(){var e=this.localeData()._week;return Re(this.year(),e.dow,e.doy)}function Fl(){var e=this.localeData()._week;return Re(this.weekYear(),e.dow,e.doy)}function Ya(e,t,s,a,r){var n;return e==null?mt(this,a,r).year:(n=Re(e,a,r),t>n&&(t=n),Hl.call(this,e,t,s,a,r))}function Hl(e,t,s,a,r){var n=la(e,t,s,a,r),i=ht(n.year,0,n.dayOfYear);return this.year(i.getUTCFullYear()),this.month(i.getUTCMonth()),this.date(i.getUTCDate()),this}N("Q",0,"Qo","quarter");D("Q",Js);G("Q",function(e,t){t[Oe]=(U(e)-1)*3});function zl(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}N("D",["DD",2],"Do","date");D("D",J,nt);D("DD",J,he);D("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient});G(["D","DD"],be);G("Do",function(e,t){t[be]=U(e.match(J)[0])});var $a=it("Date",!0);N("DDD",["DDDD",3],"DDDo","dayOfYear");D("DDD",Wt);D("DDDD",Qs);G(["DDD","DDDD"],function(e,t,s){s._dayOfYear=U(e)});function Bl(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}N("m",["mm",2],0,"minute");D("m",J,ys);D("mm",J,he);G(["m","mm"],ge);var Gl=it("Minutes",!1);N("s",["ss",2],0,"second");D("s",J,ys);D("ss",J,he);G(["s","ss"],Ne);var Zl=it("Seconds",!1);N("S",0,0,function(){return~~(this.millisecond()/100)});N(0,["SS",2],0,function(){return~~(this.millisecond()/10)});N(0,["SSS",3],0,"millisecond");N(0,["SSSS",4],0,function(){return this.millisecond()*10});N(0,["SSSSS",5],0,function(){return this.millisecond()*100});N(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});N(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});N(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});N(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});D("S",Wt,Js);D("SS",Wt,he);D("SSS",Wt,Qs);var Ve,Oa;for(Ve="SSSS";Ve.length<=9;Ve+="S")D(Ve,rt);function ql(e,t){t[ze]=U(("0."+e)*1e3)}for(Ve="S";Ve.length<=9;Ve+="S")G(Ve,ql);Oa=it("Milliseconds",!1);N("z",0,0,"zoneAbbr");N("zz",0,0,"zoneName");function Kl(){return this._isUTC?"UTC":""}function Jl(){return this._isUTC?"Coordinated Universal Time":""}var w=gt.prototype;w.add=Fo;w.calendar=Ko;w.clone=Jo;w.diff=rl;w.endOf=ml;w.format=ll;w.from=dl;w.fromNow=ul;w.to=cl;w.toNow=fl;w.get=ii;w.invalidAt=xl;w.isAfter=Qo;w.isBefore=Xo;w.isBetween=el;w.isSame=tl;w.isSameOrAfter=sl;w.isSameOrBefore=al;w.isValid=kl;w.lang=Sa;w.locale=xa;w.localeData=Ma;w.max=ko;w.min=wo;w.parsingFlags=bl;w.set=oi;w.startOf=hl;w.subtract=Ho;w.toArray=pl;w.toObject=_l;w.toDate=gl;w.toISOString=il;w.inspect=ol;typeof Symbol<"u"&&Symbol.for!=null&&(w[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});w.toJSON=wl;w.toString=nl;w.unix=yl;w.valueOf=vl;w.creationData=Sl;w.eraName=Cl;w.eraNarrow=Yl;w.eraAbbr=$l;w.eraYear=Ol;w.year=ta;w.isLeapYear=ni;w.weekYear=El;w.isoWeekYear=Ll;w.quarter=w.quarters=zl;w.month=ia;w.daysInMonth=yi;w.week=w.weeks=Si;w.isoWeek=w.isoWeeks=Mi;w.weeksInYear=Vl;w.weeksInWeekYear=Fl;w.isoWeeksInYear=Ul;w.isoWeeksInISOWeekYear=jl;w.date=$a;w.day=w.days=Ei;w.weekday=Li;w.isoWeekday=Ui;w.dayOfYear=Bl;w.hour=w.hours=Gi;w.minute=w.minutes=Gl;w.second=w.seconds=Zl;w.millisecond=w.milliseconds=Oa;w.utcOffset=$o;w.utc=No;w.local=Po;w.parseZone=Ao;w.hasAlignedHourOffset=Io;w.isDST=Ro;w.isLocal=Eo;w.isUtcOffset=Lo;w.isUtc=_a;w.isUTC=_a;w.zoneAbbr=Kl;w.zoneName=Jl;w.dates=ve("dates accessor is deprecated. Use date instead.",$a);w.months=ve("months accessor is deprecated. Use month instead",ia);w.years=ve("years accessor is deprecated. Use year instead",ta);w.zone=ve("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Oo);w.isDSTShifted=ve("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Wo);function Ql(e){return K(e*1e3)}function Xl(){return K.apply(null,arguments).parseZone()}function Na(e){return e}var H=cs.prototype;H.calendar=Wn;H.longDateFormat=jn;H.invalidDate=Fn;H.ordinal=Bn;H.preparse=Na;H.postformat=Na;H.relativeTime=Zn;H.pastFuture=qn;H.set=In;H.eras=Ml;H.erasParse=Dl;H.erasConvertYear=Tl;H.erasAbbrRegex=Pl;H.erasNameRegex=Nl;H.erasNarrowRegex=Al;H.months=fi;H.monthsShort=hi;H.monthsParse=vi;H.monthsRegex=pi;H.monthsShortRegex=gi;H.week=wi;H.firstDayOfYear=xi;H.firstDayOfWeek=bi;H.weekdays=Pi;H.weekdaysMin=Ii;H.weekdaysShort=Ai;H.weekdaysParse=Wi;H.weekdaysRegex=ji;H.weekdaysShortRegex=Vi;H.weekdaysMinRegex=Fi;H.isPM=zi;H.meridiem=Zi;function $t(e,t,s,a){var r=Ee(),n=Me().set(a,t);return r[s](n,e)}function Pa(e,t,s){if(We(e)&&(t=e,e=void 0),e=e||"",t!=null)return $t(e,t,s,"month");var a,r=[];for(a=0;a<12;a++)r[a]=$t(e,a,s,"month");return r}function Ys(e,t,s,a){typeof e=="boolean"?(We(t)&&(s=t,t=void 0),t=t||""):(t=e,s=t,e=!1,We(t)&&(s=t,t=void 0),t=t||"");var r=Ee(),n=e?r._week.dow:0,i,l=[];if(s!=null)return $t(t,(s+n)%7,a,"day");for(i=0;i<7;i++)l[i]=$t(t,(i+n)%7,a,"day");return l}function ed(e,t){return Pa(e,t,"months")}function td(e,t){return Pa(e,t,"monthsShort")}function sd(e,t,s){return Ys(e,t,s,"weekdays")}function ad(e,t,s){return Ys(e,t,s,"weekdaysShort")}function rd(e,t,s){return Ys(e,t,s,"weekdaysMin")}Fe("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,s=U(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+s}});x.lang=ve("moment.lang is deprecated. Use moment.locale instead.",Fe);x.langData=ve("moment.langData is deprecated. Use moment.localeData instead.",Ee);var Te=Math.abs;function nd(){var e=this._data;return this._milliseconds=Te(this._milliseconds),this._days=Te(this._days),this._months=Te(this._months),e.milliseconds=Te(e.milliseconds),e.seconds=Te(e.seconds),e.minutes=Te(e.minutes),e.hours=Te(e.hours),e.months=Te(e.months),e.years=Te(e.years),this}function Aa(e,t,s,a){var r=we(t,s);return e._milliseconds+=a*r._milliseconds,e._days+=a*r._days,e._months+=a*r._months,e._bubble()}function id(e,t){return Aa(this,e,t,1)}function od(e,t){return Aa(this,e,t,-1)}function Ws(e){return e<0?Math.floor(e):Math.ceil(e)}function ld(){var e=this._milliseconds,t=this._days,s=this._months,a=this._data,r,n,i,l,v;return e>=0&&t>=0&&s>=0||e<=0&&t<=0&&s<=0||(e+=Ws(os(s)+t)*864e5,t=0,s=0),a.milliseconds=e%1e3,r=me(e/1e3),a.seconds=r%60,n=me(r/60),a.minutes=n%60,i=me(n/60),a.hours=i%24,t+=me(i/24),v=me(Ia(t)),s+=v,t-=Ws(os(v)),l=me(s/12),s%=12,a.days=t,a.months=s,a.years=l,this}function Ia(e){return e*4800/146097}function os(e){return e*146097/4800}function dd(e){if(!this.isValid())return NaN;var t,s,a=this._milliseconds;if(e=ye(e),e==="month"||e==="quarter"||e==="year")switch(t=this._days+a/864e5,s=this._months+Ia(t),e){case"month":return s;case"quarter":return s/3;case"year":return s/12}else switch(t=this._days+Math.round(os(this._months)),e){case"week":return t/7+a/6048e5;case"day":return t+a/864e5;case"hour":return t*24+a/36e5;case"minute":return t*1440+a/6e4;case"second":return t*86400+a/1e3;case"millisecond":return Math.floor(t*864e5)+a;default:throw new Error("Unknown unit "+e)}}function Le(e){return function(){return this.as(e)}}var Ra=Le("ms"),ud=Le("s"),cd=Le("m"),fd=Le("h"),hd=Le("d"),md=Le("w"),vd=Le("M"),yd=Le("Q"),gd=Le("y"),pd=Ra;function _d(){return we(this)}function wd(e){return e=ye(e),this.isValid()?this[e+"s"]():NaN}function Ge(e){return function(){return this.isValid()?this._data[e]:NaN}}var kd=Ge("milliseconds"),bd=Ge("seconds"),xd=Ge("minutes"),Sd=Ge("hours"),Md=Ge("days"),Dd=Ge("months"),Td=Ge("years");function Cd(){return me(this.days()/7)}var Ce=Math.round,Ke={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function Yd(e,t,s,a,r){return r.relativeTime(t||1,!!s,e,a)}function $d(e,t,s,a){var r=we(e).abs(),n=Ce(r.as("s")),i=Ce(r.as("m")),l=Ce(r.as("h")),v=Ce(r.as("d")),f=Ce(r.as("M")),_=Ce(r.as("w")),k=Ce(r.as("y")),O=n<=s.ss&&["s",n]||n<s.s&&["ss",n]||i<=1&&["m"]||i<s.m&&["mm",i]||l<=1&&["h"]||l<s.h&&["hh",l]||v<=1&&["d"]||v<s.d&&["dd",v];return s.w!=null&&(O=O||_<=1&&["w"]||_<s.w&&["ww",_]),O=O||f<=1&&["M"]||f<s.M&&["MM",f]||k<=1&&["y"]||["yy",k],O[2]=t,O[3]=+e>0,O[4]=a,Yd.apply(null,O)}function Od(e){return e===void 0?Ce:typeof e=="function"?(Ce=e,!0):!1}function Nd(e,t){return Ke[e]===void 0?!1:t===void 0?Ke[e]:(Ke[e]=t,e==="s"&&(Ke.ss=t-1),!0)}function Pd(e,t){if(!this.isValid())return this.localeData().invalidDate();var s=!1,a=Ke,r,n;return typeof e=="object"&&(t=e,e=!1),typeof e=="boolean"&&(s=e),typeof t=="object"&&(a=Object.assign({},Ke,t),t.s!=null&&t.ss==null&&(a.ss=t.s-1)),r=this.localeData(),n=$d(this,!s,a,r),s&&(n=r.pastFuture(+this,n)),r.postformat(n)}var Qt=Math.abs;function Ze(e){return(e>0)-(e<0)||+e}function zt(){if(!this.isValid())return this.localeData().invalidDate();var e=Qt(this._milliseconds)/1e3,t=Qt(this._days),s=Qt(this._months),a,r,n,i,l=this.asSeconds(),v,f,_,k;return l?(a=me(e/60),r=me(a/60),e%=60,a%=60,n=me(s/12),s%=12,i=e?e.toFixed(3).replace(/\.?0+$/,""):"",v=l<0?"-":"",f=Ze(this._months)!==Ze(l)?"-":"",_=Ze(this._days)!==Ze(l)?"-":"",k=Ze(this._milliseconds)!==Ze(l)?"-":"",v+"P"+(n?f+n+"Y":"")+(s?f+s+"M":"")+(t?_+t+"D":"")+(r||a||e?"T":"")+(r?k+r+"H":"")+(a?k+a+"M":"")+(e?k+i+"S":"")):"P0D"}var V=Ft.prototype;V.isValid=Do;V.abs=nd;V.add=id;V.subtract=od;V.as=dd;V.asMilliseconds=Ra;V.asSeconds=ud;V.asMinutes=cd;V.asHours=fd;V.asDays=hd;V.asWeeks=md;V.asMonths=vd;V.asQuarters=yd;V.asYears=gd;V.valueOf=pd;V._bubble=ld;V.clone=_d;V.get=wd;V.milliseconds=kd;V.seconds=bd;V.minutes=xd;V.hours=Sd;V.days=Md;V.weeks=Cd;V.months=Dd;V.years=Td;V.humanize=Pd;V.toISOString=zt;V.toString=zt;V.toJSON=zt;V.locale=xa;V.localeData=Ma;V.toIsoString=ve("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",zt);V.lang=Sa;N("X",0,0,"unix");N("x",0,0,"valueOf");D("x",Lt);D("X",Xn);G("X",function(e,t,s){s._d=new Date(parseFloat(e)*1e3)});G("x",function(e,t,s){s._d=new Date(U(e))});//! moment.js
x.version="2.30.1";Pn(K);x.fn=w;x.min=bo;x.max=xo;x.now=So;x.utc=Me;x.unix=Ql;x.months=ed;x.isDate=yt;x.locale=Fe;x.invalid=It;x.duration=we;x.isMoment=_e;x.weekdays=sd;x.parseZone=Xl;x.localeData=Ee;x.isDuration=xt;x.monthsShort=td;x.weekdaysMin=rd;x.defineLocale=ks;x.updateLocale=Qi;x.locales=Xi;x.weekdaysShort=ad;x.normalizeUnits=ye;x.relativeTimeRounding=Od;x.relativeTimeThreshold=Nd;x.calendarFormat=qo;x.prototype=w;x.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};const Ad={class:"space-y-4"},Id={key:0,class:"mb-4 p-3 bg-gray-100 rounded-md"},Rd={class:"text-sm font-medium text-gray-900"},Wd={class:"text-xs text-gray-500 mt-1"},Ed={class:"mb-4"},Ld="post",Ud="Add Note",jd="Note added successfully!",Vd={__name:"TaskNoteModal",props:{show:Boolean,taskForNote:Object},emits:["close","note-added"],setup(e,{emit:t}){const s=e,a=t,r=Pt({note:""}),n=B(()=>{var f;return`Add Note to Task: "${(f=s.taskForNote)==null?void 0:f.name}"`}),i=B(()=>{var f;return`/api/tasks/${(f=s.taskForNote)==null?void 0:f.id}/notes`});de(()=>s.show,f=>{f&&Object.assign(r,{note:""})},{immediate:!0});const l=f=>{a("note-added",f),a("close")},v=()=>{a("close")};return(f,_)=>(d(),W(At,{show:e.show,title:n.value,"api-endpoint":i.value,"http-method":Ld,"form-data":r,"submit-button-text":Ud,"success-message":jd,onClose:v,onSubmitted:l},{default:M(({errors:k})=>[o("div",Ad,[e.taskForNote?(d(),g("div",Id,[o("p",Rd,I(e.taskForNote.name),1),o("p",Wd,"Status: "+I(e.taskForNote.status),1)])):S("",!0),o("div",Ed,[p(q,{for:"task-note-content",value:"Note Content"}),ne(o("textarea",{id:"task-note-content","onUpdate:modelValue":_[0]||(_[0]=O=>r.note=O),class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full h-32",placeholder:"Enter your note...",required:""},null,512),[[Pe,r.note]]),p(te,{message:k.note?k.note[0]:"",class:"mt-2"},null,8,["message"])])])]),_:1},8,["show","title","api-endpoint","form-data"]))}},Fd={key:0,class:"text-center py-8 text-gray-500"},Hd={key:1,class:"text-center py-8 text-red-600"},zd={key:2,class:"space-y-6"},Bd={class:"bg-gray-50 p-4 rounded-lg shadow-sm"},Gd={class:"text-xl font-bold text-gray-900 mb-2"},Zd={class:"flex items-center space-x-2 text-sm text-gray-600 mb-4"},qd={key:0,class:"text-indigo-600 font-medium"},Kd={key:1,class:"text-purple-600 font-medium"},Jd={class:"text-gray-700 leading-relaxed"},Qd={class:"space-y-4 p-4 bg-white rounded-lg shadow-sm"},Xd={class:"flex items-center justify-between py-2 border-b border-gray-100"},eu={class:"flex-1 text-right"},tu={key:1,class:"flex items-center space-x-2"},su={class:"flex items-center justify-between py-2 border-b border-gray-100"},au={class:"flex-1 text-right"},ru={key:1,class:"flex items-center space-x-2"},nu={class:"flex items-center justify-between py-2 border-b border-gray-100"},iu={class:"text-gray-700"},ou={class:"bg-white p-4 rounded-lg shadow-sm"},lu={class:"flex justify-between items-center mb-4 border-b pb-2"},du={key:0,class:"space-y-3"},uu={class:"text-sm text-gray-700"},cu={class:"text-xs text-gray-500 mt-1"},fu={key:1,class:"text-gray-500 text-sm py-2"},hu={key:3,class:"text-center py-8 text-gray-500"},mu={__name:"TaskDetailSidebar",props:{taskId:{type:Number,required:!0},projectUsers:{type:Array,default:()=>[]}},emits:["close","task-updated","task-deleted"],setup(e,{emit:t}){const s=e,a=t,r=A(null),n=A(!0),i=A(""),l=A(!1),v=A(!1),f=A(null),_=A(null),k=A(!1),O=async()=>{n.value=!0,i.value="";try{const c=await window.axios.get(`/api/tasks/${s.taskId}`);r.value=c.data,f.value=r.value.assigned_to_id||null,_.value=r.value.due_date||null}catch(c){i.value="Failed to load task details.",console.error("Error fetching task details:",c)}finally{n.value=!1}};de(()=>s.taskId,c=>{c?O():r.value=null},{immediate:!0});const Q=B(()=>s.projectUsers.map(c=>({value:c.id,label:c.name}))),L=async()=>{if(!r.value||f.value===r.value.assigned_to_id){l.value=!1;return}try{const c=await window.axios.patch(`/api/tasks/${r.value.id}`,{assigned_to_user_id:f.value});r.value=c.data,a("task-updated",r.value)}catch(c){console.error("Error updating assigned user:",c),f.value=r.value.assigned_to_id,alert("Failed to update assigned user. Please try again.")}finally{l.value=!1}},Y=async()=>{if(!r.value||_.value===r.value.due_date){v.value=!1;return}try{const c=await window.axios.patch(`/api/tasks/${r.value.id}`,{due_date:_.value});r.value=c.data,a("task-updated",r.value)}catch(c){console.error("Error updating due date:",c),_.value=r.value.due_date,alert("Failed to update due date. Please try again.")}finally{v.value=!1}},C=()=>{k.value=!0},b=()=>{O(),k.value=!1},u=B(()=>r.value?{"bg-yellow-100 text-yellow-800":r.value.status==="To Do","bg-blue-100 text-blue-800":r.value.status==="In Progress","bg-green-100 text-green-800":r.value.status==="Done","bg-red-100 text-red-800":r.value.status==="Blocked","bg-gray-100 text-gray-800":r.value.status==="Archived"}:"");return(c,h)=>{var T,R,Z,j;return n.value?(d(),g("div",Fd," Loading task details... ")):i.value?(d(),g("div",Hd,I(i.value),1)):r.value?(d(),g("div",zd,[o("div",Bd,[o("h4",Gd,I(r.value.name),1),o("div",Zd,[o("span",{class:z(["px-2 py-1 rounded-full text-xs font-medium",u.value])},I(r.value.status),3),r.value.task_type?(d(),g("span",qd," | "+I((T=r.value.task_type)==null?void 0:T.name)+" | ",1)):S("",!0),h[7]||(h[7]=o("br",null,null,-1)),(R=r.value.milestone)!=null&&R.name?(d(),g("span",Kd,I((Z=r.value.milestone)==null?void 0:Z.name),1)):S("",!0)]),o("p",Jd,I(r.value.description||"No description provided."),1)]),o("div",Qd,[h[13]||(h[13]=o("h5",{class:"text-lg font-semibold text-gray-800 border-b pb-2 mb-4"},"Task Attributes",-1)),o("div",Xd,[p(q,{class:"min-w-[100px] text-gray-600"},{default:M(()=>h[8]||(h[8]=[$("Assigned To:",-1)])),_:1,__:[8]}),o("div",eu,[l.value?(d(),g("div",tu,[p(Ue,{id:"edit-assigned-to",modelValue:f.value,"onUpdate:modelValue":h[1]||(h[1]=m=>f.value=m),options:Q.value,"value-key":"value","label-key":"label",placeholder:"Unassigned",class:"mt-1 flex-1","allow-empty":!0},null,8,["modelValue","options"]),o("button",{onClick:L,class:"text-green-600 hover:text-green-800 text-sm font-medium"},"Save"),o("button",{onClick:h[2]||(h[2]=m=>l.value=!1),class:"text-gray-600 hover:text-gray-800 text-sm font-medium"},"Cancel")])):(d(),g("div",{key:0,onClick:h[0]||(h[0]=m=>l.value=!0),class:"cursor-pointer text-indigo-600 hover:text-indigo-800"},[$(I(((j=r.value.assigned_to)==null?void 0:j.name)||"Unassigned")+" ",1),h[9]||(h[9]=o("span",{class:"text-xs text-gray-400 ml-1"},"(Click to edit)",-1))]))])]),o("div",su,[p(q,{class:"min-w-[100px] text-gray-600"},{default:M(()=>h[10]||(h[10]=[$("Due Date:",-1)])),_:1,__:[10]}),o("div",au,[v.value?(d(),g("div",ru,[p(Ae,{id:"edit-due-date",modelValue:_.value,"onUpdate:modelValue":h[4]||(h[4]=m=>_.value=m),type:"date",class:"mt-1 flex-1"},null,8,["modelValue"]),o("button",{onClick:Y,class:"text-green-600 hover:text-green-800 text-sm font-medium"},"Save"),o("button",{onClick:h[5]||(h[5]=m=>v.value=!1),class:"text-gray-600 hover:text-gray-800 text-sm font-medium"},"Cancel")])):(d(),g("div",{key:0,onClick:h[3]||(h[3]=m=>v.value=!0),class:"cursor-pointer text-indigo-600 hover:text-indigo-800"},[$(I(r.value.due_date?P(x)(r.value.due_date).format("MMM D, YYYY"):"No Due Date")+" ",1),h[11]||(h[11]=o("span",{class:"text-xs text-gray-400 ml-1"},"(Click to edit)",-1))]))])]),o("div",nu,[p(q,{class:"min-w-[100px] text-gray-600"},{default:M(()=>h[12]||(h[12]=[$("Created:",-1)])),_:1,__:[12]}),o("span",iu,I(r.value.created_at?new Date(r.value.created_at).toLocaleDateString():"N/A"),1)])]),o("div",ou,[o("div",lu,[h[15]||(h[15]=o("h5",{class:"text-lg font-semibold text-gray-800"},"Notes",-1)),p(tt,{onClick:C,class:"bg-indigo-600 hover:bg-indigo-700 transition-colors"},{default:M(()=>h[14]||(h[14]=[$(" Add Note ",-1)])),_:1,__:[14]})]),r.value.notes&&r.value.notes.length>0?(d(),g("div",du,[(d(!0),g(le,null,fe(r.value.notes,m=>(d(),g("div",{key:m.id,class:"p-3 bg-gray-50 rounded-md"},[o("p",uu,I(m.content),1),o("p",cu," By "+I(m.creator_name||"Unknown")+" on "+I(new Date(m.created_at).toLocaleDateString()),1)]))),128))])):(d(),g("div",fu,"No notes for this task yet."))]),p(Vd,{show:k.value,"task-for-note":r.value,onClose:h[6]||(h[6]=m=>k.value=!1),onNoteAdded:b},null,8,["show","task-for-note"])])):(d(),g("div",hu," Select a task to view details. "))}}},vu={class:"flex border-b border-gray-200"},yu={key:0,class:"ml-2 px-2 py-1 text-xs font-bold bg-red-600 text-white rounded-full"},gu={class:"p-4 space-y-2 overflow-y-auto"},pu={key:0,class:"p-6 text-center text-gray-500"},_u={key:0},wu={key:1},ku=["onClick"],bu={class:"flex-1 min-w-0"},xu={class:"flex items-start justify-between gap-2 mb-1"},Su={class:"flex-1 min-w-0"},Mu={key:0,class:"text-base font-semibold text-gray-900 truncate"},Du={key:1,class:"text-xs text-gray-500"},Tu={key:0,class:"text-sm text-gray-600 mt-1 mb-2"},Cu={class:"flex items-center text-xs text-gray-500 font-medium"},Yu={key:0},$u={key:1,class:"mx-2"},Ou={key:2},Nu={__name:"NotificationsSidebar",setup(e){const t=B(()=>Mt.value.notifications),s=A("New"),a=B(()=>s.value==="New"?t.value.filter(l=>!l.isRead):t.value),r=async l=>{await Ha(l.view_id);const v=l.task_id||n(l.url),f=l.project_id||i(l.url);v&&f?(za(v,f),$s()):(console.warn("Could not open task sidebar. Falling back to opening URL in new tab."),l.url&&window.open(l.url,"_blank"))},n=l=>{const v=l.match(/\/task\/(\d+)/);return v?parseInt(v[1]):null},i=l=>{const v=l.match(/\/project\/(\d+)\//);return v?parseInt(v[1]):null};return(l,v)=>(d(),W(zs,{show:P(Mt).show,"onUpdate:show":P($s),title:"Notifications","initial-width":35,class:"z-[100]"},{content:M(()=>[o("div",vu,[o("button",{onClick:v[0]||(v[0]=f=>s.value="New"),class:z([{"border-blue-600 text-blue-600 font-semibold":s.value==="New","border-transparent text-gray-500 hover:text-gray-700":s.value!=="New"},"flex-1 py-4 px-1 text-center text-sm border-b-2 transition-colors duration-200"])},[v[2]||(v[2]=$(" New ",-1)),t.value.filter(f=>!f.isRead).length>0?(d(),g("span",yu,I(t.value.filter(f=>!f.isRead).length),1)):S("",!0)],2),o("button",{onClick:v[1]||(v[1]=f=>s.value="All"),class:z([{"border-blue-600 text-blue-600 font-semibold":s.value==="All","border-transparent text-gray-500 hover:text-gray-700":s.value!=="All"},"flex-1 py-4 px-1 text-center text-sm border-b-2 transition-colors duration-200"])}," All ",2)]),o("div",gu,[a.value.length===0?(d(),g("div",pu,[s.value==="New"?(d(),g("span",_u,"You have no new notifications.")):(d(),g("span",wu,"You have no notifications."))])):S("",!0),(d(!0),g(le,null,fe(a.value,f=>(d(),g("div",{key:f.id,class:z(["bg-white rounded-xl shadow-sm p-4 flex items-start space-x-4 border border-gray-200 transition-all duration-200 hover:shadow-md cursor-pointer",{"bg-gray-50":f.isRead}]),onClick:_=>r(f)},[o("div",bu,[o("div",xu,[o("div",Su,[f.title?(d(),g("h3",Mu,I(f.title),1)):S("",!0),f.project_name?(d(),g("p",Du,I(f.project_name),1)):S("",!0)])]),f.message?(d(),g("p",Tu,I(f.message),1)):S("",!0),o("div",Cu,[f.due_date?(d(),g("span",Yu,"Due: "+I(P(Fa)(f.due_date)),1)):S("",!0),f.due_date&&f.priority?(d(),g("span",$u,"•")):S("",!0),f.priority?(d(),g("span",Ou,"Priority: "+I(f.priority),1)):S("",!0)])])],10,ku))),128))])]),_:1},8,["show","onUpdate:show"]))}},Pu={class:"flex items-center p-4 h-16 border-b border-gray-700"},Au={key:0,class:"text-xl font-semibold flex-1 truncate"},Iu=["title"],Ru={key:0,class:"p-4 border-b border-gray-700"},Wu={class:"relative"},Eu={key:1,class:"flex-1 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-500 scrollbar-track-gray-700 p-4"},Lu={key:0,class:"mb-4"},Uu={class:"ml-2 mt-2 space-y-1"},ju=["onClick"],Vu={class:"text-sm font-medium text-gray-300 truncate"},Fu={class:"ml-4 mt-1 space-y-1"},Hu={class:"truncate"},zu={key:1,class:"mb-4"},Bu={class:"ml-2 mt-2 space-y-1"},Gu=["onClick"],Zu={class:"text-sm font-medium text-gray-300 truncate"},qu={class:"ml-4 mt-1 space-y-1"},Ku={class:"truncate"},Ju={key:2,class:"mb-4"},Qu={class:"ml-2 mt-2 space-y-1"},Xu={class:"truncate"},ec={key:3,class:"mb-4"},tc={class:"ml-2 mt-2 space-y-1"},sc={class:"truncate"},ac={key:4,class:"text-gray-400 text-sm text-center py-4"},rc={key:5,class:"text-gray-400 text-sm text-center py-4"},nc={key:2,class:"flex flex-col items-center pt-4 space-y-4"},ic={key:0,class:"text-gray-400 text-xs text-center px-2"},oc={__name:"LeftSidebar",props:{allProjects:{type:Array,default:()=>[]},activeProjectId:{type:Number,default:null}},emits:["project-selected"],setup(e,{emit:t}){const s=e,a=t,r=A(localStorage.getItem("leftSidebarCollapsed")!=="false"),n=A(""),i=A({}),l=B(()=>{const u=new Set;return s.allProjects.forEach(c=>{c.project_type&&u.add(c.project_type)}),Array.from(u).sort()}),v=B(()=>{const u=new Set;return s.allProjects.forEach(c=>{Array.isArray(c.tags)&&c.tags.forEach(h=>u.add(h))}),Array.from(u).sort()}),f=B(()=>{if(!n.value)return s.allProjects;const u=n.value.toLowerCase();return s.allProjects.filter(c=>{var h,T,R;return c.name.toLowerCase().includes(u)||((h=c.description)==null?void 0:h.toLowerCase().includes(u))||((T=c.project_type)==null?void 0:T.toLowerCase().includes(u))||Array.isArray(c.tags)&&c.tags.some(Z=>Z.toLowerCase().includes(u))||((R=c.status)==null?void 0:R.toLowerCase().includes(u))})}),_=B(()=>{const u={};f.value.forEach(c=>{c.project_type&&c.status==="active"&&(u[c.project_type]||(u[c.project_type]=[]),u[c.project_type].push(c))});for(const c in u)u[c].sort((h,T)=>h.name.localeCompare(T.name));return u}),k=B(()=>{const u={};f.value.forEach(c=>{Array.isArray(c.tags)&&c.tags.length>0&&c.tags.forEach(h=>{u[h]||(u[h]=[]),u[h].push(c)})});for(const c in u)u[c]=[...new Set(u[c])].sort((h,T)=>h.name.localeCompare(T.name));return u}),O=B(()=>f.value.filter(u=>u.status!=="active").sort((u,c)=>u.name.localeCompare(c.name))),Q=B(()=>f.value.filter(u=>!u.project_type&&(!Array.isArray(u.tags)||u.tags.length===0)).sort((u,c)=>u.name.localeCompare(c.name)));de(()=>s.allProjects,()=>{l.value.forEach(u=>{const c=`type-${u}`;i.value[c]===void 0&&(i.value[c]=!0)}),v.value.forEach(u=>{const c=`tag-${u}`;i.value[c]===void 0&&(i.value[c]=!0)}),i.value["main-types"]===void 0&&(i.value["main-types"]=!1),i.value["main-tags"]===void 0&&(i.value["main-tags"]=!1),i.value["inactive-projects"]===void 0&&(i.value["inactive-projects"]=!1),i.value.uncategorized===void 0&&(i.value.uncategorized=!1)},{immediate:!0}),de(r,u=>{localStorage.setItem("leftSidebarCollapsed",u)});const L=()=>{r.value=!r.value},Y=u=>{i.value[u]=!i.value[u]},C=u=>{a("project-selected",u)},b=()=>{n.value=""};return(u,c)=>(d(),g("div",{class:z({"w-64":!r.value,"w-16":r.value,"min-w-16":!0,"bg-gray-800 text-white flex flex-col transition-all duration-300 ease-in-out shrink-0 h-screen overflow-hidden":!0})},[o("div",Pu,[r.value?S("",!0):(d(),g("h2",Au,"Projects")),o("button",{onClick:L,class:"p-2 rounded-full hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500",title:r.value?"Expand Sidebar":"Collapse Sidebar"},[(d(),g("svg",{class:z(["w-6 h-6 text-gray-400 transform transition-transform duration-300",{"rotate-180":r.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},c[5]||(c[5]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"},null,-1)]),2))],8,Iu)]),r.value?S("",!0):(d(),g("div",Ru,[o("div",Wu,[ne(o("input",{type:"text","onUpdate:modelValue":c[0]||(c[0]=h=>n.value=h),placeholder:"Search all projects...",class:"w-full p-2 rounded-md bg-gray-700 border border-gray-600 text-white placeholder-gray-400 focus:ring-indigo-500 focus:border-indigo-500 text-sm"},null,512),[[Pe,n.value]]),n.value?(d(),g("button",{key:0,onClick:b,class:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-200",title:"Clear search"},c[6]||(c[6]=[o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))):S("",!0)])])),r.value?(d(),g("div",nc,[(d(!0),g(le,null,fe(s.allProjects,h=>(d(),W(P($e),{key:h.id,href:u.route("projects.show",h.id),onClick:T=>C(h.id),class:z({"w-10 h-10 rounded-full flex items-center justify-center text-xs font-bold transition-all duration-200":!0,"bg-indigo-600 text-white":h.id===e.activeProjectId,"bg-gray-700 text-gray-300 hover:bg-gray-600":h.id!==e.activeProjectId}),title:h.name},{default:M(()=>[$(I(h.name.charAt(0).toUpperCase()),1)]),_:2},1032,["href","onClick","class","title"]))),128)),e.allProjects.length===0?(d(),g("div",ic," No Projects ")):S("",!0)])):(d(),g("div",Eu,[Object.keys(_.value).length>0?(d(),g("div",Lu,[o("div",{class:"flex items-center justify-between cursor-pointer py-2 hover:bg-gray-700 rounded-md px-2",onClick:c[1]||(c[1]=h=>Y("main-types"))},[c[8]||(c[8]=o("h3",{class:"text-sm font-semibold text-gray-400"},"Active Projects by Type",-1)),(d(),g("svg",{class:z(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!i.value["main-types"]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},c[7]||(c[7]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))]),ne(o("div",Uu,[(d(!0),g(le,null,fe(_.value,(h,T)=>(d(),g("div",{key:T},[o("div",{class:"flex items-center justify-between cursor-pointer py-1 hover:bg-gray-700 rounded-md px-2",onClick:R=>Y(`type-${T}`)},[o("h4",Vu,I(T),1),(d(),g("svg",{class:z(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!i.value[`type-${T}`]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},c[9]||(c[9]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))],8,ju),ne(o("ul",Fu,[(d(!0),g(le,null,fe(h,R=>(d(),g("li",{key:R.id},[p(P($e),{href:u.route("projects.show",R.id),onClick:Z=>C(R.id),class:z({"block w-full text-left px-3 py-2 rounded-md transition-colors":!0,"bg-indigo-600 text-white":R.id===e.activeProjectId,"hover:bg-gray-700 text-gray-200":R.id!==e.activeProjectId,"font-bold":R.id===e.activeProjectId})},{default:M(()=>[o("span",Hu,I(R.name),1)]),_:2},1032,["href","onClick","class"])]))),128))],512),[[Ye,!i.value[`type-${T}`]]])]))),128))],512),[[Ye,!i.value["main-types"]]])])):S("",!0),Object.keys(k.value).length>0?(d(),g("div",zu,[o("div",{class:"flex items-center justify-between cursor-pointer py-2 hover:bg-gray-700 rounded-md px-2",onClick:c[2]||(c[2]=h=>Y("main-tags"))},[c[11]||(c[11]=o("h3",{class:"text-sm font-semibold text-gray-400"},"Projects by Tag",-1)),(d(),g("svg",{class:z(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!i.value["main-tags"]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},c[10]||(c[10]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))]),ne(o("div",Bu,[(d(!0),g(le,null,fe(k.value,(h,T)=>(d(),g("div",{key:T},[o("div",{class:"flex items-center justify-between cursor-pointer py-1 hover:bg-gray-700 rounded-md px-2",onClick:R=>Y(`tag-${T}`)},[o("h4",Zu,I(T),1),(d(),g("svg",{class:z(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!i.value[`tag-${T}`]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},c[12]||(c[12]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))],8,Gu),ne(o("ul",qu,[(d(!0),g(le,null,fe(h,R=>(d(),g("li",{key:R.id},[p(P($e),{href:u.route("projects.show",R.id),onClick:Z=>C(R.id),class:z({"block w-full text-left px-3 py-2 rounded-md transition-colors":!0,"bg-indigo-600 text-white":R.id===e.activeProjectId,"hover:bg-gray-700 text-gray-200":R.id!==e.activeProjectId,"font-bold":R.id===e.activeProjectId})},{default:M(()=>[o("span",Ku,I(R.name),1)]),_:2},1032,["href","onClick","class"])]))),128))],512),[[Ye,!i.value[`tag-${T}`]]])]))),128))],512),[[Ye,!i.value["main-tags"]]])])):S("",!0),O.value.length>0?(d(),g("div",Ju,[o("div",{class:"flex items-center justify-between cursor-pointer py-2 hover:bg-gray-700 rounded-md px-2",onClick:c[3]||(c[3]=h=>Y("inactive-projects"))},[c[14]||(c[14]=o("h3",{class:"text-sm font-semibold text-gray-400"},"Inactive Projects",-1)),(d(),g("svg",{class:z(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!i.value["inactive-projects"]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},c[13]||(c[13]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))]),ne(o("ul",Qu,[(d(!0),g(le,null,fe(O.value,h=>(d(),g("li",{key:h.id},[p(P($e),{href:u.route("projects.show",h.id),onClick:T=>C(h.id),class:z({"block w-full text-left px-3 py-2 rounded-md transition-colors":!0,"bg-indigo-600 text-white":h.id===e.activeProjectId,"hover:bg-gray-700 text-gray-200":h.id!==e.activeProjectId,"font-bold":h.id===e.activeProjectId})},{default:M(()=>[o("span",Xu,I(h.name)+" ("+I(h.status.replace("_"," "))+")",1)]),_:2},1032,["href","onClick","class"])]))),128))],512),[[Ye,!i.value["inactive-projects"]]])])):S("",!0),Q.value.length>0?(d(),g("div",ec,[o("div",{class:"flex items-center justify-between cursor-pointer py-2 hover:bg-gray-700 rounded-md px-2",onClick:c[4]||(c[4]=h=>Y("uncategorized"))},[c[16]||(c[16]=o("h3",{class:"text-sm font-semibold text-gray-400"},"Uncategorized",-1)),(d(),g("svg",{class:z(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!i.value.uncategorized}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},c[15]||(c[15]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))]),ne(o("ul",tc,[(d(!0),g(le,null,fe(Q.value,h=>(d(),g("li",{key:h.id},[p(P($e),{href:u.route("projects.show",h.id),onClick:T=>C(h.id),class:z({"block w-full text-left px-3 py-2 rounded-md transition-colors":!0,"bg-indigo-600 text-white":h.id===e.activeProjectId,"hover:bg-gray-700 text-gray-200":h.id!==e.activeProjectId,"font-bold":h.id===e.activeProjectId})},{default:M(()=>[o("span",sc,I(h.name),1)]),_:2},1032,["href","onClick","class"])]))),128))],512),[[Ye,!i.value.uncategorized]])])):S("",!0),f.value.length===0?(d(),g("div",ac," No projects found matching your search. ")):e.allProjects.length===0&&!n.value?(d(),g("div",rc," No projects available. ")):S("",!0)]))],2))}},lc=at(oc,[["__scopeId","data-v-417d431f"]]);/**
 * @license lucide-vue-next v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Es=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),dc=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,s,a)=>a?a.toUpperCase():s.toLowerCase()),uc=e=>{const t=dc(e);return t.charAt(0).toUpperCase()+t.slice(1)},cc=(...e)=>e.filter((t,s,a)=>!!t&&t.trim()!==""&&a.indexOf(t)===s).join(" ").trim(),Ls=e=>e==="";/**
 * @license lucide-vue-next v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ut={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};/**
 * @license lucide-vue-next v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fc=({name:e,iconNode:t,absoluteStrokeWidth:s,"absolute-stroke-width":a,strokeWidth:r,"stroke-width":n,size:i=ut.width,color:l=ut.stroke,...v},{slots:f})=>es("svg",{...ut,...v,width:i,height:i,stroke:l,"stroke-width":Ls(s)||Ls(a)||s===!0||a===!0?Number(r||n||ut["stroke-width"])*24/Number(i):r||n||ut["stroke-width"],class:cc("lucide",v.class,...e?[`lucide-${Es(uc(e))}-icon`,`lucide-${Es(e)}`]:["lucide-icon"])},[...t.map(_=>es(..._)),...f.default?[f.default()]:[]]);/**
 * @license lucide-vue-next v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hc=(e,t)=>(s,{slots:a,attrs:r})=>es(fc,{...r,...s,iconNode:t,name:e},a);/**
 * @license lucide-vue-next v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mc=hc("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]),vc={class:"flex h-screen overflow-hidden"},yc={class:"flex-1 flex flex-col overflow-hidden"},gc={class:"border-b border-gray-100 bg-white z-10 relative"},pc={class:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8"},_c={class:"flex h-16 justify-between"},wc={class:"flex"},kc={class:"flex shrink-0 items-center"},bc={class:"hidden space-x-8 sm:-my-px sm:ms-10 sm:flex"},xc={key:0,class:"hidden sm:flex sm:items-center"},Sc={class:"hidden sm:ms-6 sm:flex sm:items-center"},Mc={key:0,class:"absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-red-100 transform translate-x-1/2 -translate-y-1/2 bg-red-600 rounded-full"},Dc={class:"relative ms-3"},Tc={class:"inline-flex rounded-md"},Cc={type:"button",class:"inline-flex items-center rounded-md border border-transparent bg-white px-3 py-2 text-sm font-medium leading-4 text-gray-500 transition duration-150 ease-in-out hover:text-gray-700 focus:outline-none"},Yc={class:"-me-2 flex items-center sm:hidden"},$c={class:"h-6 w-6",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24"},Oc={class:"space-y-1 pb-3 pt-2"},Nc={key:0,class:"mt-3 space-y-1"},Pc={class:"border-t border-gray-200 pb-1 pt-4"},Ac={class:"px-4"},Ic={class:"text-base font-medium text-gray-800"},Rc={class:"text-sm font-medium text-gray-500"},Wc={class:"text-sm font-medium text-gray-500 capitalize"},Ec={class:"mt-3 space-y-1"},Lc={key:0,class:"bg-white shadow"},Uc={class:"mx-auto max-w-7xl px-4 py-6 sm:px-6 lg:px-8"},jc={class:"flex-1 overflow-y-auto"},qc={__name:"AuthenticatedLayout",setup(e){const t=A(!1),s=B(()=>Xt().props.auth.user);B(()=>{var m;return((m=s.value.role_data)==null?void 0:m.name)||""});const{canDo:a}=Ba(),r=a("manage_projects"),n=a("compose_emails"),i=a("approve_emails"),l=a("create_users"),v=a("manage_roles"),f=a("manage_task_types"),_=a("create_clients"),k=A(!1),O=A(!1),Q=A([]),L=A(!0),Y=B(()=>Xt().props.id||null),C=()=>{console.log("Task updated from sidebar. Refreshing project data if necessary.")},b=()=>{console.log("Task deleted from sidebar. Refreshing project data if necessary."),Zt()},u=async()=>{const m=localStorage.getItem("authToken");if(m){window.axios.defaults.headers.common.Authorization=`Bearer ${m}`;try{await window.axios.get("/api/user")}catch(y){y.response&&y.response.status===401&&(console.log("Session expired, redirecting to login"),localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization,window.location.href="/login")}}else delete window.axios.defaults.headers.common.Authorization},c=()=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),delete window.axios.defaults.headers.common.Authorization},h=m=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),delete window.axios.defaults.headers.common.Authorization,window.location.href="/login"},T=async()=>{L.value=!0;try{const m=await window.axios.get("/api/projects-simplified");Q.value=m.data}catch(m){console.error("Error fetching all projects for sidebar:",m),Q.value=[]}finally{L.value=!1}},R=m=>{Ka.visit(route("projects.show",m))},Z=A(null),j=B(()=>Mt.value.notifications.filter(m=>!m.isRead).length);return st(()=>{u(),Z.value&&Ga(Z.value),T(),Za()}),(m,y)=>{var ee;return d(),g("div",vc,[p(qa,{ref_key:"notificationContainerRef",ref:Z,"sidebar-is-open":P(Mt).show},null,8,["sidebar-is-open"]),p($r),p(lc,{"all-projects":Q.value,"active-project-id":Y.value,onProjectSelected:R},null,8,["all-projects","active-project-id"]),o("div",yc,[o("nav",gc,[o("div",pc,[o("div",_c,[o("div",wc,[o("div",kc,[p(P($e),{href:m.route("dashboard")},{default:M(()=>[p(Wa,{class:"block h-16 w-auto fill-current text-gray-800"})]),_:1},8,["href"])]),o("div",bc,[p(Xa,{href:m.route("dashboard"),active:m.route().current("dashboard")},{default:M(()=>y[9]||(y[9]=[$(" Dashboard ",-1)])),_:1,__:[9]},8,["href","active"]),P(v)?(d(),g("div",xc,[p(Os,{align:"right",width:"48"},{trigger:M(()=>y[10]||(y[10]=[o("span",{class:"inline-flex rounded-md"},[o("button",{type:"button",class:"inline-flex items-center rounded-md border border-transparent bg-white px-3 py-2 text-sm font-medium leading-4 text-gray-500 transition duration-150 ease-in-out hover:text-gray-700 focus:outline-none"},[$(" Admin "),o("svg",{class:"ms-2 -me-0.5 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[o("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])])],-1)])),content:M(()=>[P(r)?(d(),W(ue,{key:0,href:m.route("projects.index"),active:m.route().current("projects.index")},{default:M(()=>y[11]||(y[11]=[$(" Projects ",-1)])),_:1,__:[11]},8,["href","active"])):S("",!0),P(i)?(d(),W(ue,{key:1,href:m.route("emails.pending"),active:m.route().current("emails.pending")},{default:M(()=>y[12]||(y[12]=[$(" Approve Emails ",-1)])),_:1,__:[12]},8,["href","active"])):S("",!0),P(n)?(d(),W(ue,{key:2,href:m.route("emails.rejected"),active:m.route().current("emails.rejected")},{default:M(()=>y[13]||(y[13]=[$(" Rejected Emails ",-1)])),_:1,__:[13]},8,["href","active"])):S("",!0),P(l)?(d(),W(ue,{key:3,href:m.route("availability.index"),active:m.route().current("availability.index")},{default:M(()=>y[14]||(y[14]=[$(" Weekly Availability ",-1)])),_:1,__:[14]},8,["href","active"])):S("",!0),P(_)?(d(),W(ue,{key:4,href:m.route("clients.index"),active:m.route().current("clients.index")},{default:M(()=>y[15]||(y[15]=[$(" Clients ",-1)])),_:1,__:[15]},8,["href","active"])):S("",!0),P(l)?(d(),W(ue,{key:5,href:m.route("users.index"),active:m.route().current("users.index")},{default:M(()=>y[16]||(y[16]=[$(" Users ",-1)])),_:1,__:[16]},8,["href","active"])):S("",!0),P(f)?(d(),W(ue,{key:6,href:m.route("task-types.index"),active:m.route().current("task-types.index")},{default:M(()=>y[17]||(y[17]=[$(" Task Types ",-1)])),_:1,__:[17]},8,["href","active"])):S("",!0),P(a)("manage_bonus_configuration")?(d(),W(ue,{key:7,href:m.route("bonus-configuration.index"),active:m.route().current("bonus-configuration.index")},{default:M(()=>y[18]||(y[18]=[$(" Bonus Configuration ",-1)])),_:1,__:[18]},8,["href","active"])):S("",!0),P(a)("manage_email_templates")?(d(),W(ue,{key:8,href:m.route("email-templates.index"),active:m.route().current("email-templates.index")},{default:M(()=>y[19]||(y[19]=[$(" Email Templates ",-1)])),_:1,__:[19]},8,["href","active"])):S("",!0),P(a)("manage_placeholder_definitions")?(d(),W(ue,{key:9,href:m.route("placeholder-definitions.index"),active:m.route().current("placeholder-definitions.index")},{default:M(()=>y[20]||(y[20]=[$(" Placeholder Definitions ",-1)])),_:1,__:[20]},8,["href","active"])):S("",!0),P(a)("manage_roles")?(d(),W(ue,{key:10,href:m.route("admin.roles.index")},{default:M(()=>y[21]||(y[21]=[$(" Manage Roles ",-1)])),_:1,__:[21]},8,["href"])):S("",!0),P(a)("manage_permissions")?(d(),W(ue,{key:11,href:m.route("admin.permissions.index")},{default:M(()=>y[22]||(y[22]=[$(" Manage Permissions ",-1)])),_:1,__:[22]},8,["href"])):S("",!0)]),_:1})])):S("",!0)])]),o("div",Sc,[p(tt,{type:"button",onClick:y[0]||(y[0]=se=>k.value=!0),class:"mr-4 px-4 py-2 text-sm"},{default:M(()=>y[23]||(y[23]=[$(" Add Task ",-1)])),_:1,__:[23]}),p(tt,{type:"button",onClick:y[1]||(y[1]=se=>O.value=!0),class:"mr-4 px-4 py-2 text-sm"},{default:M(()=>y[24]||(y[24]=[$(" Add Resource ",-1)])),_:1,__:[24]}),o("button",{onClick:y[2]||(y[2]=(...se)=>P(Gt)&&P(Gt)(...se)),class:"relative flex-shrink-0 text-gray-400 hover:text-gray-600 p-1 rounded-full transition-colors duration-200 mr-4","aria-label":"View all notifications"},[p(P(mc),{class:"h-6 w-6"}),j.value>0?(d(),g("span",Mc,I(j.value),1)):S("",!0)]),o("div",Dc,[p(Os,{align:"right",width:"48"},{trigger:M(()=>{var se;return[o("span",Tc,[o("button",Cc,[$(I(s.value.name)+" ("+I((se=s.value.role_data)==null?void 0:se.name)+") ",1),y[25]||(y[25]=o("svg",{class:"ms-2 -me-0.5 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[o("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1))])])]}),content:M(()=>[p(ue,{href:m.route("profile.edit")},{default:M(()=>y[26]||(y[26]=[$(" Profile ",-1)])),_:1,__:[26]},8,["href"]),p(ue,{href:m.route("logout"),method:"post",as:"button",onSuccess:c,onError:h},{default:M(()=>y[27]||(y[27]=[$(" Log Out ",-1)])),_:1,__:[27]},8,["href"])]),_:1})])]),o("div",Yc,[o("button",{onClick:y[3]||(y[3]=se=>t.value=!t.value),class:"inline-flex items-center justify-center rounded-md p-2 text-gray-400 transition duration-150 ease-in-out hover:bg-gray-100 hover:text-gray-500 focus:bg-gray-100 focus:text-gray-500 focus:outline-none"},[(d(),g("svg",$c,[o("path",{class:z({hidden:t.value,"inline-flex":!t.value}),"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},null,2),o("path",{class:z({hidden:!t.value,"inline-flex":t.value}),"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,2)]))])])])]),o("div",{class:z([{block:t.value,hidden:!t.value},"sm:hidden"])},[o("div",Oc,[P(v)?(d(),g("div",Nc,[y[42]||(y[42]=o("div",{class:"px-4 font-medium text-base text-gray-800"},"Admin",-1)),p(re,{href:m.route("dashboard"),active:m.route().current("dashboard")},{default:M(()=>y[28]||(y[28]=[$(" Dashboard ",-1)])),_:1,__:[28]},8,["href","active"]),P(_)?(d(),W(re,{key:0,href:m.route("clients.index"),active:m.route().current("clients.index")},{default:M(()=>y[29]||(y[29]=[$(" Clients ",-1)])),_:1,__:[29]},8,["href","active"])):S("",!0),P(r)?(d(),W(re,{key:1,href:m.route("projects.index"),active:m.route().current("projects.index")},{default:M(()=>y[30]||(y[30]=[$(" Projects ",-1)])),_:1,__:[30]},8,["href","active"])):S("",!0),P(l)?(d(),W(re,{key:2,href:m.route("users.index"),active:m.route().current("users.index")},{default:M(()=>y[31]||(y[31]=[$(" Users ",-1)])),_:1,__:[31]},8,["href","active"])):S("",!0),P(n)?(d(),W(re,{key:3,href:m.route("emails.compose"),active:m.route().current("emails.compose")},{default:M(()=>y[32]||(y[32]=[$(" Compose Email ",-1)])),_:1,__:[32]},8,["href","active"])):S("",!0),P(i)?(d(),W(re,{key:4,href:m.route("emails.pending"),active:m.route().current("emails.pending")},{default:M(()=>y[33]||(y[33]=[$(" Approve Emails ",-1)])),_:1,__:[33]},8,["href","active"])):S("",!0),P(n)?(d(),W(re,{key:5,href:m.route("emails.rejected"),active:m.route().current("emails.rejected")},{default:M(()=>y[34]||(y[34]=[$(" Rejected Emails ",-1)])),_:1,__:[34]},8,["href","active"])):S("",!0),P(l)?(d(),W(re,{key:6,href:m.route("availability.index"),active:m.route().current("availability.index")},{default:M(()=>y[35]||(y[35]=[$(" Weekly Availability ",-1)])),_:1,__:[35]},8,["href","active"])):S("",!0),P(a)("manage_roles")?(d(),W(re,{key:7,href:m.route("admin.roles.index"),active:m.route().current("admin.roles.index")},{default:M(()=>y[36]||(y[36]=[$(" Manage Roles ",-1)])),_:1,__:[36]},8,["href","active"])):S("",!0),P(a)("manage_permissions")?(d(),W(re,{key:8,href:m.route("admin.permissions.index"),active:m.route().current("admin.permissions.index")},{default:M(()=>y[37]||(y[37]=[$(" Manage Permissions ",-1)])),_:1,__:[37]},8,["href","active"])):S("",!0),P(a)("manage_bonus_configuration")?(d(),W(re,{key:9,href:m.route("bonus-configuration.index"),active:m.route().current("bonus-configuration.index")},{default:M(()=>y[38]||(y[38]=[$(" Bonus Configuration ",-1)])),_:1,__:[38]},8,["href","active"])):S("",!0),P(f)?(d(),W(re,{key:10,href:m.route("task-types.index"),active:m.route().current("task-types.index")},{default:M(()=>y[39]||(y[39]=[$(" Task Types ",-1)])),_:1,__:[39]},8,["href","active"])):S("",!0),P(a)("manage_email_templates")?(d(),W(re,{key:11,href:m.route("email-templates.index"),active:m.route().current("email-templates.index")},{default:M(()=>y[40]||(y[40]=[$(" Email Templates ",-1)])),_:1,__:[40]},8,["href","active"])):S("",!0),P(a)("manage_placeholder_definitions")?(d(),W(re,{key:12,href:m.route("placeholder-definitions.index"),active:m.route().current("placeholder-definitions.index")},{default:M(()=>y[41]||(y[41]=[$(" Placeholder Definitions ",-1)])),_:1,__:[41]},8,["href","active"])):S("",!0)])):S("",!0)]),o("div",Pc,[o("div",Ac,[o("div",Ic,I(s.value.name),1),o("div",Rc,I(s.value.email),1),o("div",Wc,I((ee=s.value.role_data)==null?void 0:ee.name),1)]),o("div",Ec,[p(re,{as:"button",onClick:y[4]||(y[4]=se=>k.value=!0)},{default:M(()=>y[43]||(y[43]=[$(" Add Task ",-1)])),_:1,__:[43]}),p(re,{as:"button",onClick:y[5]||(y[5]=se=>O.value=!0)},{default:M(()=>y[44]||(y[44]=[$(" Add Resource ",-1)])),_:1,__:[44]}),p(re,{as:"button",onClick:P(Gt)},{default:M(()=>[$(" Notifications ("+I(j.value)+") ",1)]),_:1},8,["onClick"]),p(re,{href:m.route("profile.edit")},{default:M(()=>y[45]||(y[45]=[$(" Profile ",-1)])),_:1,__:[45]},8,["href"]),p(re,{href:m.route("logout"),method:"post",as:"button",onSuccess:c,onError:h},{default:M(()=>y[46]||(y[46]=[$(" Log Out ",-1)])),_:1,__:[46]},8,["href"])])])],2)]),m.$slots.header?(d(),g("header",Lc,[o("div",Uc,[xe(m.$slots,"header")])])):S("",!0),o("main",jc,[xe(m.$slots,"default")]),p(cn,{show:k.value,onClose:y[6]||(y[6]=se=>k.value=!1),onSaved:y[7]||(y[7]=se=>k.value=!1)},null,8,["show"]),p(Mn,{"api-endpoint":"/api/shareable-resources",show:O.value,onClose:y[8]||(y[8]=se=>O.value=!1)},null,8,["show"])]),p(zs,{show:P(ot).show,"onUpdate:show":P(Zt),title:P(ot).taskId?"Task Details":"Details",initialWidth:50},{content:M(()=>[P(ot).taskId?(d(),W(mu,{key:0,"task-id":P(ot).taskId,"project-id":P(ot).projectId,"project-users":[],onClose:P(Zt),onTaskUpdated:C,onTaskDeleted:b},null,8,["task-id","project-id","onClose"])):S("",!0)]),_:1},8,["show","onUpdate:show","title"]),p(Nu)])}}};export{At as B,Mn as C,zs as R,Ue as S,kn as T,qc as _,Dr as a,Kr as b,Vd as c,mu as d,cn as e,x as h};
