import{d as I}from"./vuedraggable.umd-B6Hdjrt2.js";import{u as A}from"./workflowStore-DZJsW282.js";import O from"./TriggerBlock-UVSflUQD.js";import N from"./AiPromptBlock-Bq4lZA6M.js";import T from"./ConditionBlock-CnfZPldJ.js";import _ from"./ActionBlock-CAF5nnRJ.js";import{P as v}from"./plus-Cqbd8Y22.js";import{r as P,B as $,g as w,o as n,w as C,a as d,i as b,b as e,d as p,m as R,u as g,a8 as j,j as B}from"./app-DbT8OS6U.js";import"./index-DwcGlpZZ.js";import"./createLucideIcon-CcTmroC8.js";import"./trash-2-TxAo_pPz.js";const D={class:"step-container"},M={key:0,class:"relative flex justify-center mt-4"},E={class:"w-1/2 pr-2"},z={class:"w-1/2 pl-2"},V={key:1,class:"h-12 w-full flex items-center justify-center relative"},q=["onClick"],G={key:0,class:"absolute z-20 top-10 p-2 bg-white border rounded-lg shadow-lg min-w-[180px]"},W=["onClick"],U=["onClick"],Y=["onClick"],F={key:0,class:"text-center"},H={key:0,class:"relative mt-2 z-20 inline-block"},J={class:"absolute p-2 bg-white border rounded-lg shadow-lg min-w-[180px] left-1/2 -translate-x-1/2"},lt=Object.assign({name:"StepRenderer"},{__name:"StepRenderer",props:{steps:{type:Array,required:!0},parentStep:{type:Object,required:!1,default:null},branch:{type:String,required:!1,default:null}},setup(i){const u=i,x=A(),a=P(null),k=r=>{var t;switch((t=r.step_type)==null?void 0:t.toUpperCase()){case"TRIGGER":return O;case"CONDITION":return T;case"ACTION":return _;case"AI_PROMPT":case"ACTION_AI_PROMPT":default:return N}},S=r=>x.selectStep(r),c=r=>{a.value=a.value===r?null:r},l=(r,t)=>{x.addStep({type:r,insertAfter:t,parentArray:u.steps,parentStep:u.parentStep,branch:u.branch}),a.value=null},h=()=>{console.log("Workflow structure changed")};return(r,t)=>{var y;const f=$("StepRenderer",!0);return n(),w(g(I),{list:i.steps,"item-key":"id",group:"workflow",handle:".drag-handle",animation:200,onEnd:h,class:B(["space-y-4",{"min-h-[80px] bg-gray-100/50 p-2 rounded-lg border-2 border-dashed":!((y=i.steps)!=null&&y.length)}])},{item:C(({element:s,index:o})=>[e("div",D,[(n(),w(j(k(s)),{step:s,onSelect:S},null,40,["step"])),s.step_type==="CONDITION"?(n(),d("div",M,[t[6]||(t[6]=e("div",{class:"absolute -top-4 left-1/2 w-0.5 h-4 bg-gray-300"},null,-1)),t[7]||(t[7]=e("div",{class:"absolute top-0 left-1/4 right-1/4 h-0.5 bg-gray-300"},null,-1)),t[8]||(t[8]=e("div",{class:"absolute top-0 left-1/4 w-0.5 h-4 bg-gray-300"},null,-1)),t[9]||(t[9]=e("div",{class:"absolute top-0 right-1/4 w-0.5 h-4 bg-gray-300"},null,-1)),e("div",E,[t[4]||(t[4]=e("div",{class:"text-center text-sm font-semibold text-green-600 mb-2"},"YES",-1)),p(f,{steps:s.yes_steps,parentStep:s,branch:"yes"},null,8,["steps","parentStep"])]),e("div",z,[t[5]||(t[5]=e("div",{class:"text-center text-sm font-semibold text-red-600 mb-2"},"NO",-1)),p(f,{steps:s.no_steps,parentStep:s,branch:"no"},null,8,["steps","parentStep"])])])):(n(),d("div",V,[t[12]||(t[12]=e("div",{class:"h-full w-0.5 bg-gray-300"},null,-1)),e("button",{onClick:m=>c(o),class:"absolute z-10 w-8 h-8 flex items-center justify-center bg-white border-2 rounded-full text-gray-400 hover:text-blue-600 hover:border-blue-500 transition-all"},[p(g(v),{class:"w-5 h-5"})],8,q),a.value===o?(n(),d("div",G,[t[10]||(t[10]=e("div",{class:"text-xs text-gray-400 px-2 pb-1 border-b mb-1"},"Standard",-1)),e("button",{onClick:m=>l("ACTION",o),class:"w-full text-left px-2 py-1 text-sm rounded-md text-gray-700 hover:bg-gray-100"},"Action",8,W),e("button",{onClick:m=>l("CONDITION",o),class:"w-full text-left px-2 py-1 text-sm rounded-md text-gray-700 hover:bg-gray-100"},"Condition",8,U),t[11]||(t[11]=e("div",{class:"text-xs text-gray-400 px-2 pb-1 border-b my-1"},"Advanced",-1)),e("button",{onClick:m=>l("AI_PROMPT",o),class:"w-full text-left px-2 py-1 text-sm rounded-md text-gray-700 hover:bg-gray-100"},"AI Prompt",8,Y)])):b("",!0)]))])]),footer:C(()=>{var s;return[(s=i.steps)!=null&&s.length?b("",!0):(n(),d("div",F,[e("button",{onClick:t[0]||(t[0]=o=>c(-1)),class:"w-full text-center py-4 text-xs text-gray-500 hover:text-blue-600"},[p(g(v),{class:"inline w-3 h-3"}),t[13]||(t[13]=R(" Add Step ",-1))]),a.value===-1?(n(),d("div",H,[e("div",J,[t[14]||(t[14]=e("div",{class:"text-xs text-gray-400 px-2 pb-1 border-b mb-1"},"Standard",-1)),e("button",{onClick:t[1]||(t[1]=o=>l("ACTION",-1)),class:"w-full text-left px-2 py-1 text-sm rounded-md text-gray-700 hover:bg-gray-100"},"Action"),e("button",{onClick:t[2]||(t[2]=o=>l("CONDITION",-1)),class:"w-full text-left px-2 py-1 text-sm rounded-md text-gray-700 hover:bg-gray-100"},"Condition"),t[15]||(t[15]=e("div",{class:"text-xs text-gray-400 px-2 pb-1 border-b my-1"},"Advanced",-1)),e("button",{onClick:t[3]||(t[3]=o=>l("AI_PROMPT",-1)),class:"w-full text-left px-2 py-1 text-sm rounded-md text-gray-700 hover:bg-gray-100"},"AI Prompt")])])):b("",!0)]))]}),_:1},8,["list","class"])}}});export{lt as default};
