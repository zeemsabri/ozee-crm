import{b as se,f as oe,_ as ae}from"./AuthenticatedLayout-Bt9Mv1IE.js";import{C as Z,e as F,r,a,i as j,o,b as e,d as h,aQ as z,p as M,aR as ee,c as N,t as p,w as B,m as U,E as q,f as G,Q as ne,j as O,F as P,n as R,V as le,l as H,u as Q,A as K,U as X,g as re,h as ie}from"./app-x8m_4hY2.js";import{_ as de,a as ue,b as ce}from"./TaskList--Pa4tlFZ.js";import"./BaseFormModal-O0v3sJbd.js";import{_ as W}from"./InputLabel-BQt1_ZvA.js";import{_ as I}from"./TextInput-DXxzU_mf.js";import{_ as Y}from"./PrimaryButton-w5tinKZZ.js";import"./Modal-Bkhz695K.js";import"./InputError-Db7L5aye.js";import"./SecondaryButton-1ofZEUh6.js";import"./index-fqzFiUEp.js";import"./SelectDropdown-ChnFxdu6.js";/* empty css                                                                       */import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./debounce-C-hnF4Z3.js";import"./ApplicationLogo-DRn8EdM-.js";import"./MultiSelectDropdown-DHJwlnnN.js";import"./createLucideIcon-BoPNbwuz.js";import"./plus-DaKXsK2I.js";import"./DangerButton-D3Oyd49i.js";import"./moment-BLMuvzoS.js";import"./NoticeboardModal-DcKBQalF.js";const me={key:0,class:"fixed inset-0 overflow-y-auto px-4 py-6 sm:px-0 z-50"},pe={class:"bg-white rounded-lg overflow-hidden shadow-xl transform transition-all sm:w-full sm:max-w-lg mx-auto"},ge={class:"px-6 py-4"},ve={class:"mt-4"},xe={class:"mb-4"},fe={class:"px-6 py-4 bg-gray-100 text-right"},ye=["disabled"],he={key:0},be={key:1},we={__name:"GoogleNotesModal",props:{show:Boolean,projectId:Number,spaceName:String},emits:["close","noteAdded"],setup(f,{emit:x}){const n=f,d=x,t=Z({space_name:"",note_text:"",thread_name:""});F(()=>n.projectId,s=>{s&&(t.project_id=s)},{immediate:!0}),F(()=>n.spaceName,s=>{s&&(t.space_name=s)},{immediate:!0}),F(()=>n.show,s=>{s&&(t.project_id=n.projectId,t.space_name=n.spaceName,t.note_text="",t.thread_name="")});const c=r(!1),g=async()=>{if(!t.note_text){z("Please enter a note");return}try{c.value=!0;const s=await M.post("/api/user/google-chat/notes",{space_name:t.space_name,note_text:t.note_text,thread_name:t.thread_name||null});s.data.success?(ee("Note added successfully!"),d("noteAdded"),d("close")):z(s.data.message||"Failed to add note")}catch(s){console.error("Error adding note:",s),s.response&&s.response.data.message?z(s.response.data.message):z("Failed to add note. Please try again."),s.response&&s.response.data.redirect_url&&(window.location.href=s.response.data.redirect_url)}finally{c.value=!1}};return(s,u)=>f.show?(o(),a("div",me,[e("div",{class:"fixed inset-0 transform transition-all",onClick:u[0]||(u[0]=v=>s.$emit("close"))},u[3]||(u[3]=[e("div",{class:"absolute inset-0 bg-gray-500 opacity-75"},null,-1)])),e("div",pe,[e("div",ge,[u[4]||(u[4]=e("div",{class:"text-lg font-medium text-gray-900"}," Add Note ",-1)),e("div",ve,[e("div",xe,[h(W,{for:"note_text",value:"Note Content"}),h(I,{id:"note_text",type:"text",class:"mt-1 block w-full",modelValue:t.note_text,"onUpdate:modelValue":u[1]||(u[1]=v=>t.note_text=v),required:""},null,8,["modelValue"])])])]),e("div",fe,[e("button",{type:"button",class:"inline-flex items-center px-4 py-2 bg-white border border-gray-300 rounded-md font-semibold text-xs text-gray-700 uppercase tracking-widest shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-25 transition ease-in-out duration-150 mr-2",onClick:u[2]||(u[2]=v=>s.$emit("close"))}," Cancel "),e("button",{type:"button",class:"inline-flex items-center px-4 py-2 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 focus:bg-gray-700 active:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition ease-in-out duration-150",onClick:g,disabled:c.value},[c.value?(o(),a("span",he,"Submitting...")):(o(),a("span",be,"Add Note"))],8,ye)])])])):j("",!0)}},_e={key:0,class:"fixed inset-0 overflow-y-auto px-4 py-6 sm:px-0 z-50"},ke={class:"bg-white rounded-lg overflow-hidden shadow-xl transform transition-all sm:w-full sm:max-w-lg mx-auto"},$e={class:"px-6 py-4"},Ce={class:"mt-4"},Te={class:"mb-4"},Se={class:"mb-4"},je={class:"mb-4"},De={class:"px-6 py-4 bg-gray-100 text-right"},Ae=["disabled"],Ne={key:0},Me={key:1},Ve={__name:"GoogleStandupModal",props:{show:Boolean,projectId:Number,spaceName:String},emits:["close","standupAdded"],setup(f,{emit:x}){const n=f,d=x,t=Z({space_name:"",yesterday:"",today:"",blockers:""});F(()=>n.projectId,s=>{s&&(t.project_id=s)},{immediate:!0}),F(()=>n.spaceName,s=>{s&&(t.space_name=s)},{immediate:!0}),F(()=>n.show,s=>{s&&(t.project_id=n.projectId,t.space_name=n.spaceName,t.yesterday="",t.today="",t.blockers="")});const c=r(!1),g=async()=>{if(!t.yesterday||!t.today){z("Please fill in the required fields");return}try{c.value=!0;const s=await M.post("/api/user/google-chat/standups",{space_name:t.space_name,yesterday:t.yesterday,today:t.today,blockers:t.blockers||""});s.data.success?(ee("Standup added successfully!"),d("standupAdded"),d("close")):z(s.data.message||"Failed to add standup")}catch(s){console.error("Error adding standup:",s),s.response&&s.response.data.message?z(s.response.data.message):z("Failed to add standup. Please try again."),s.response&&s.response.data.redirect_url&&(window.location.href=s.response.data.redirect_url)}finally{c.value=!1}};return(s,u)=>f.show?(o(),a("div",_e,[e("div",{class:"fixed inset-0 transform transition-all",onClick:u[0]||(u[0]=v=>s.$emit("close"))},u[5]||(u[5]=[e("div",{class:"absolute inset-0 bg-gray-500 opacity-75"},null,-1)])),e("div",ke,[e("div",$e,[u[6]||(u[6]=e("div",{class:"text-lg font-medium text-gray-900"}," Daily Standup ",-1)),e("div",Ce,[e("div",Te,[h(W,{for:"yesterday",value:"What did you work on yesterday?"}),h(I,{id:"yesterday",type:"text",class:"mt-1 block w-full",modelValue:t.yesterday,"onUpdate:modelValue":u[1]||(u[1]=v=>t.yesterday=v),required:""},null,8,["modelValue"])]),e("div",Se,[h(W,{for:"today",value:"What will you work on today?"}),h(I,{id:"today",type:"text",class:"mt-1 block w-full",modelValue:t.today,"onUpdate:modelValue":u[2]||(u[2]=v=>t.today=v),required:""},null,8,["modelValue"])]),e("div",je,[h(W,{for:"blockers",value:"Any blockers?"}),h(I,{id:"blockers",type:"text",class:"mt-1 block w-full",modelValue:t.blockers,"onUpdate:modelValue":u[3]||(u[3]=v=>t.blockers=v),placeholder:"None"},null,8,["modelValue"])])])]),e("div",De,[e("button",{type:"button",class:"inline-flex items-center px-4 py-2 bg-white border border-gray-300 rounded-md font-semibold text-xs text-gray-700 uppercase tracking-widest shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-25 transition ease-in-out duration-150 mr-2",onClick:u[4]||(u[4]=v=>s.$emit("close"))}," Cancel "),e("button",{type:"button",class:"inline-flex items-center px-4 py-2 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 focus:bg-gray-700 active:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition ease-in-out duration-150",onClick:g,disabled:c.value},[c.value?(o(),a("span",Ne,"Submitting...")):(o(),a("span",Me,"Submit Standup"))],8,Ae)])])])):j("",!0)}},Pe={key:0,class:"bg-amber-50 border-l-4 border-amber-500 p-4 mb-6 rounded-md shadow-md"},Ue={class:"flex items-center justify-between"},ze={class:"flex items-center"},Ee={class:"ml-3"},Le={class:"text-sm text-amber-800 font-medium"},Be={key:0},Ge={key:1},Fe={key:2},Ie={__name:"TaskNotificationPrompt",props:{overdueTasks:{type:Number,required:!0},dueTodayTasks:{type:Number,required:!0}},emits:["view-tasks"],setup(f,{emit:x}){const n=f,d=x,t=N(()=>n.overdueTasks+n.dueTodayTasks),c=N(()=>t.value>0),g=()=>{d("view-tasks")};return(s,u)=>c.value?(o(),a("div",Pe,[e("div",Ue,[e("div",ze,[u[0]||(u[0]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-6 w-6 text-amber-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1)),e("div",Ee,[e("p",Le,[f.overdueTasks>0&&f.dueTodayTasks>0?(o(),a("span",Be," You have "+p(f.overdueTasks)+" overdue "+p(f.overdueTasks===1?"task":"tasks")+" and "+p(f.dueTodayTasks)+" "+p(f.dueTodayTasks===1?"task":"tasks")+" due today. ",1)):f.overdueTasks>0?(o(),a("span",Ge," You have "+p(f.overdueTasks)+" overdue "+p(f.overdueTasks===1?"task":"tasks")+" that require your attention. ",1)):f.dueTodayTasks>0?(o(),a("span",Fe," You have "+p(f.dueTodayTasks)+" "+p(f.dueTodayTasks===1?"task":"tasks")+" due today. ",1)):j("",!0)])])]),e("div",null,[h(Y,{onClick:g,class:"px-4 py-2 text-sm bg-amber-600 hover:bg-amber-700 focus:ring-amber-500"},{default:B(()=>u[1]||(u[1]=[U(" View ",-1)])),_:1,__:[1]})])])])):j("",!0)}},Oe={class:"flex items-center justify-between flex-wrap gap-4"},We={class:"flex-shrink-0 flex items-center"},Re={key:0,class:"h-6 w-6 text-red-600",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},Ye={key:1,class:"h-6 w-6 text-indigo-600",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},qe={class:"flex-shrink-0 mt-3 sm:mt-0"},He={key:1,class:"text-center text-sm text-gray-500 py-4"},Qe={key:2,class:"text-center text-sm text-red-500 py-4"},Je={__name:"AvailabilityPrompt",setup(f){const x=r(!1),n=r(!0),d=r([]),t=r(!1),c=r(""),g=r(!1),s=r(!1),u=r(null),v=r(!1),w=N(()=>{var _;return((_=q().props.auth.user)==null?void 0:_.id)||null}),m=()=>{const _=localStorage.getItem("authToken");_&&!M.defaults.headers.common.Authorization&&(M.defaults.headers.common.Authorization=`Bearer ${_}`,console.log("Auth headers set in AvailabilityPrompt"))},i=async()=>{n.value=!0,c.value="";try{m();const _=await M.get("/api/availability-prompt");g.value=_.data.should_block_user,s.value=(_.data.all_next_weekdays_covered??_.data.all_weekdays_covered)||!1;const S=_.data.all_current_weekdays_covered??!0;u.value=_.data.current_day,v.value=_.data.is_thursday_to_saturday,x.value=_.data.should_show_prompt||v.value,x.value&&l(_.data.next_week_start,_.data.next_week_end),localStorage.setItem("shouldBlockUser",String(g.value)),localStorage.setItem("allNextWeekdaysCovered",String(s.value)),localStorage.setItem("allCurrentWeekdaysCovered",String(!!S)),localStorage.setItem("allWeekdaysCovered",String(s.value));const E=new CustomEvent("availability-status-updated",{detail:{shouldBlockUser:g.value,allNextWeekdaysCovered:s.value,allCurrentWeekdaysCovered:!!S}});window.dispatchEvent(E)}catch(_){console.error("Error checking availability prompt:",_),x.value=!1,_.response&&_.response.status===401?c.value="Authentication error. Please refresh the page or log in again.":c.value="Failed to load availability prompt status."}finally{n.value=!1}},l=(_,S)=>{const E=[],k=new Date(_),$=new Date(S);let A=new Date(k);for(;A<=$;)E.push({value:A.toISOString().split("T")[0],label:A.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})}),A.setDate(A.getDate()+1);d.value=E},y=()=>{t.value=!0},b=()=>{i()},C=()=>{document.visibilityState==="visible"&&R(()=>{i()})},T=_=>{(_.key==="shouldBlockUser"||_.key==="allNextWeekdaysCovered")&&R(()=>{i()})};return G(()=>{i(),document.addEventListener("visibilitychange",C),window.addEventListener("storage",T)}),ne(()=>{document.removeEventListener("visibilitychange",C),window.removeEventListener("storage",T)}),(_,S)=>(o(),a(P,null,[x.value&&!n.value&&!c.value?(o(),a("div",{key:0,class:O(["border-l-4 p-4 mb-6 rounded-md shadow-sm transition-all duration-300",g.value?"bg-red-50 border-red-500":"bg-indigo-50 border-indigo-500"])},[e("div",Oe,[e("div",We,[g.value?(o(),a("svg",Re,S[1]||(S[1]=[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"},null,-1)]))):(o(),a("svg",Ye,S[2]||(S[2]=[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"},null,-1)]))),e("p",{class:O(["ml-3 text-sm font-medium",g.value?"text-red-800":"text-indigo-800"])},[g.value?(o(),a(P,{key:0},[S[3]||(S[3]=e("span",{class:"font-bold"},"Action Required:",-1)),S[4]||(S[4]=e("span",null," You may need to submit availability for the current week (up to today) and for all weekdays of next week. ",-1))],64)):s.value?(o(),a(P,{key:2},[U(" Thank you for submitting your availability for next week! You can still update it if needed. ")],64)):(o(),a(P,{key:1},[U(" Please submit your availability for next week. If you missed last week's deadline, you may also need to submit for the current week. ")],64))],2)]),e("div",qe,[h(Y,{onClick:y,class:O(["whitespace-nowrap px-6 py-2 text-sm font-semibold rounded-md shadow-md",{"bg-red-600 hover:bg-red-700 focus:ring-red-500":g.value,"bg-indigo-600 hover:bg-indigo-700 focus:ring-indigo-500":!g.value&&!s.value,"bg-green-600 hover:bg-green-700 focus:ring-green-500":!g.value&&s.value}])},{default:B(()=>[U(p(s.value?"Update Availability":"Submit Availability"),1)]),_:1},8,["class"])])])],2)):n.value?(o(),a("div",He,"Loading availability prompt...")):c.value?(o(),a("div",Qe,p(c.value),1)):j("",!0),h(se,{show:t.value,"next-week-dates":d.value,date:d.value.length>0?d.value[0].value:"",userId:w.value,onClose:S[0]||(S[0]=E=>t.value=!1),onAvailabilitySaved:b},null,8,["show","next-week-dates","date","userId"])],64))}},Ke={key:0,class:"bg-white overflow-hidden shadow-sm sm:rounded-lg mb-6"},Xe={__name:"GoogleAccountPrompt",setup(f){const x=r(!1),n=r(!0),d=r(!0),t=async()=>{try{n.value=!0;const g=await M.get("/api/user/google-chat/check-credentials");x.value=g.data.has_credentials,d.value=!x.value,console.log("Google credentials check:",{hasGoogleCredentials:x.value,showPrompt:d.value})}catch(g){console.error("Error checking Google credentials:",g),z("Failed to check Google account status"),d.value=!0}finally{n.value=!1}},c=()=>{window.location.href="/user/google/redirect"};return G(()=>{t()}),(g,s)=>d.value?(o(),a("div",Ke,[e("div",{class:"p-6 bg-white border-b border-gray-200"},[e("div",{class:"flex items-center"},[s[0]||(s[0]=le('<div class="flex-shrink-0 bg-blue-100 rounded-md p-3"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div><div class="ml-4 flex-1"><h3 class="text-lg font-medium text-gray-900">Connect your Google account</h3><p class="mt-1 text-sm text-gray-600"> To use Google Chat features for notes and standups, you need to connect your Google account. </p></div>',2)),e("div",{class:"ml-4"},[e("button",{type:"button",onClick:c,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Connect Google Account ")])])])])):j("",!0)}},Ze={class:"md:col-span-2 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg shadow-xl p-8 text-white flex flex-col sm:flex-row items-center justify-between transition-all duration-300 hover:shadow-2xl"},et={class:"text-3xl font-bold mb-2"},tt={class:"mt-6 sm:mt-0 sm:ml-8 text-center sm:text-right"},st={class:"text-5xl font-extrabold"},ot={__name:"WelcomeCard",props:{projectCount:Number},setup(f){const x=N(()=>q().props.auth.user),n=f;return(d,t)=>(o(),a("div",Ze,[e("div",null,[e("h3",et,"Hello, "+p(x.value.name)+"!",1),t[0]||(t[0]=e("p",{class:"text-md opacity-90"},"Here's a quick overview of your activities and progress.",-1))]),e("div",tt,[e("p",st,p(n.projectCount),1),t[1]||(t[1]=e("p",{class:"text-sm opacity-90"},"Total Projects",-1))])]))}},at={class:"bg-white rounded-lg shadow-xl p-8 flex flex-col justify-between transition-all duration-300 hover:shadow-2xl"},nt={class:"flex items-center justify-between"},lt={class:"text-5xl font-extrabold text-indigo-600"},rt={__name:"PendingTasksCard",props:{"total-due-tasks":{type:Number,default:0}},setup(f){const x=f;return(n,d)=>(o(),a("div",at,[d[1]||(d[1]=e("h3",{class:"text-xl font-semibold text-gray-900 mb-4"},"Pending Tasks",-1)),e("div",nt,[e("p",lt,p(x["total-due-tasks"]),1),d[0]||(d[0]=e("svg",{class:"w-12 h-12 text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})],-1))]),d[2]||(d[2]=e("p",{class:"text-sm text-gray-600 mt-4"},"Tasks currently due across all your projects.",-1))]))}},it={class:"md:col-span-3 bg-white overflow-hidden shadow-xl sm:rounded-lg p-8 transition-all duration-300 hover:shadow-2xl"},dt={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-5 gap-4"},ut={class:"text-3xl font-bold text-amber-600 mb-2"},ct={class:"text-3xl font-bold text-red-600 mb-2"},mt={class:"bg-blue-50 rounded-lg p-4 flex flex-col items-center justify-center border border-blue-200 hover:shadow-md transition-all cursor-pointer"},pt={class:"text-3xl font-bold text-blue-600 mb-2"},gt={key:0,class:"text-3xl font-bold text-purple-600 mb-2 opacity-50"},vt={key:1,class:"text-3xl font-bold text-purple-600 mb-2"},xt={class:"bg-green-50 rounded-lg p-4 flex flex-col items-center justify-center border border-green-200 hover:shadow-md transition-all"},ft={key:0,class:"text-3xl font-bold text-green-600 mb-2 opacity-50"},yt={key:1,class:"text-3xl font-bold text-green-600 mb-2"},ht={__name:"DashboardOverviewCard",props:{dueTodayTasksCount:{type:Number,default:0},overdueTasksCount:{type:Number,default:0}},emits:["view-tasks","view-meetings"],setup(f,{emit:x}){const n=x,d=r(0),t=r(!0),c=r(0),g=r(0),s=r(!0);N(()=>q().props.auth.user);const u=async()=>{t.value=!0;try{const i=new Date().toISOString().split("T")[0],l=await M.get("/api/user/meetings",{params:{date:i}});d.value=l.data.length}catch(i){console.error("Error fetching meetings:",i)}finally{t.value=!1}},v=async()=>{s.value=!0;try{const i=await M.get("/api/user/standups");g.value=i.data.length}catch(i){console.error("Error fetching standups:",i)}finally{s.value=!1}},w=()=>{n("view-tasks")},m=()=>{n("view-meetings")};return G(()=>{u(),v()}),(i,l)=>(o(),a("div",it,[l[10]||(l[10]=e("h3",{class:"text-xl font-semibold text-gray-900 mb-6"},"Today's Overview",-1)),e("div",dt,[e("div",{class:"bg-amber-50 rounded-lg p-4 flex flex-col items-center justify-center border border-amber-200 hover:shadow-md transition-all cursor-pointer",onClick:w},[e("div",ut,p(f.dueTodayTasksCount),1),l[0]||(l[0]=e("div",{class:"text-sm text-gray-700 text-center"},"Tasks Due Today",-1)),l[1]||(l[1]=e("div",{class:"mt-2 text-xs text-amber-600 hover:underline"},"View Tasks",-1))]),e("div",{class:"bg-red-50 rounded-lg p-4 flex flex-col items-center justify-center border border-red-200 hover:shadow-md transition-all cursor-pointer",onClick:w},[e("div",ct,p(f.overdueTasksCount),1),l[2]||(l[2]=e("div",{class:"text-sm text-gray-700 text-center"},"Overdue Tasks",-1)),l[3]||(l[3]=e("div",{class:"mt-2 text-xs text-red-600 hover:underline"},"View Tasks",-1))]),e("div",mt,[e("div",pt,p(c.value),1),l[4]||(l[4]=e("div",{class:"text-sm text-gray-700 text-center"},"Unread Emails",-1)),l[5]||(l[5]=e("div",{class:"mt-2 text-xs text-blue-600 hover:underline"},"Coming Soon",-1))]),e("div",{class:"bg-purple-50 rounded-lg p-4 flex flex-col items-center justify-center border border-purple-200 hover:shadow-md transition-all cursor-pointer",onClick:m},[t.value?(o(),a("div",gt,"...")):(o(),a("div",vt,p(d.value),1)),l[6]||(l[6]=e("div",{class:"text-sm text-gray-700 text-center"},"Meetings Today",-1)),l[7]||(l[7]=e("div",{class:"mt-2 text-xs text-purple-600 hover:underline"},"View Meetings",-1))]),e("div",xt,[s.value?(o(),a("div",ft,"...")):(o(),a("div",yt,p(g.value),1)),l[8]||(l[8]=e("div",{class:"text-sm text-gray-700 text-center"},"Standups Today",-1)),l[9]||(l[9]=e("div",{class:"mt-2 text-xs text-green-600"},"Your Updates",-1))])])]))}},bt={class:"md:col-span-3 bg-white overflow-hidden shadow-xl sm:rounded-lg p-8 transition-all duration-300 hover:shadow-2xl"},wt={class:"mb-6 text-md text-gray-600"},_t={class:"font-semibold text-indigo-700"},kt={key:0,class:"text-center text-sm text-gray-500 py-6"},$t={key:1,class:"text-center text-sm text-red-500 py-6"},Ct={key:2,class:"text-center text-sm text-gray-500 py-6"},Tt={key:3,class:"grid grid-cols-2 sm:grid-cols-4 md:grid-cols-7 gap-4 mt-4"},St={class:"text-sm font-bold text-gray-800"},jt={class:"text-xs text-gray-600 mt-0.5"},Dt={class:"mt-3 text-center text-xs w-full"},At={key:0,class:"text-gray-600 leading-tight mt-1"},Nt={key:0,class:"text-gray-600 leading-tight mt-1 break-words"},Mt={key:2,class:"text-gray-500 font-medium"},Vt={__name:"WeeklyAvailabilityCard",setup(f){const x=N(()=>q().props.auth.user),n=r({availabilities:[],start_date:"",end_date:""}),d=r(!1),t=r(""),c=m=>m?new Date(m).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}):"",g=async()=>{d.value=!0,t.value="";try{const m=new Date,i=new Date(m);i.setDate(m.getDate()-m.getDay()+(m.getDay()===0?-6:1));const l=new Date(i);l.setDate(i.getDate()+6);const y=C=>C.toISOString().split("T")[0],b=await M.get("/api/availabilities",{params:{user_id:x.value.id,start_date:y(i),end_date:y(l)}});n.value=b.data}catch(m){t.value="Failed to load availability data",console.error("Error fetching weekly availability:",m)}finally{d.value=!1}},s=m=>["Mon","Tue","Wed","Thu","Fri","Sat","Sun"][m-1],u=m=>{const i=new Date(n.value.start_date);return i.setDate(i.getDate()+m-1),i.toLocaleDateString("en-US",{month:"short",day:"numeric"})},v=m=>{const i=new Date(n.value.start_date);i.setDate(i.getDate()+m-1);const l=i.toISOString().split("T")[0],y=n.value.availabilities.filter(T=>T.date.split("T")[0]===l);if(y.length===0)return{status:"not-set"};if(y.some(T=>!T.is_available)){const T=y.find(_=>!_.is_available);return{status:"unavailable",reason:(T==null?void 0:T.reason)||"Not specified"}}const C=[];return y.forEach(T=>{T.is_available&&T.time_slots&&Array.isArray(T.time_slots)&&T.time_slots.forEach(_=>{C.push(`${_.start_time} - ${_.end_time}`)})}),{status:"available",slots:C.length>0?C:["All Day"]}},w=m=>{const i=v(m);let l="";i.status==="available"?l="border-green-300 bg-green-50/50":i.status==="unavailable"?l="border-red-300 bg-red-50/50":l="border-gray-200 bg-gray-50";const y=new Date,b=new Date(n.value.start_date);return b.setDate(b.getDate()+m-1),y.toDateString()===b.toDateString()&&(l+=" ring-2 ring-indigo-500 ring-offset-2"),l};return G(()=>{g()}),(m,i)=>(o(),a("div",bt,[i[3]||(i[3]=e("h3",{class:"text-xl font-semibold text-gray-900 mb-4"},"Your Weekly Availability",-1)),e("p",wt,[i[0]||(i[0]=U(" Availability for: ",-1)),e("span",_t,p(n.value.start_date?c(n.value.start_date):"")+" to "+p(n.value.end_date?c(n.value.end_date):""),1)]),d.value?(o(),a("div",kt,"Loading availability data...")):t.value?(o(),a("div",$t,p(t.value),1)):!n.value.availabilities||n.value.availabilities.length===0?(o(),a("div",Ct," No availability data found for this week. ")):(o(),a("div",Tt,[(o(),a(P,null,H(7,l=>e("div",{key:"availability-day-"+l,class:O(["flex flex-col items-center justify-start p-4 border rounded-lg shadow-sm h-36 overflow-hidden text-clip relative group",w(l)])},[e("span",St,p(s(l)),1),e("span",jt,p(u(l)),1),e("div",Dt,[v(l).status==="available"?(o(),a(P,{key:0},[i[1]||(i[1]=e("p",{class:"text-green-700 font-bold"},"Available",-1)),v(l).slots.length>0?(o(),a("p",At,p(v(l).slots.join(", ")),1)):j("",!0)],64)):v(l).status==="unavailable"?(o(),a(P,{key:1},[i[2]||(i[2]=e("p",{class:"text-red-700 font-bold"},"Unavailable",-1)),v(l).reason?(o(),a("p",Nt," Reason: "+p(v(l).reason),1)):j("",!0)],64)):(o(),a("p",Mt,"Not Set"))])],2)),64))]))]))}},Pt={class:"md:col-span-3 bg-white overflow-hidden shadow-xl sm:rounded-lg p-8 transition-all duration-300 hover:shadow-2xl"},Ut={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6"},zt={key:0,class:"mt-4"},Et={class:"mb-6"},Lt={key:0,class:"text-center text-sm text-red-500 py-6"},Bt={key:1,class:"text-center text-sm text-gray-500 py-6"},Gt={key:2,class:"mt-3 overflow-x-auto rounded-lg border border-gray-200 shadow-sm relative"},Ft={key:0,class:"absolute inset-0 bg-white bg-opacity-75 flex items-center justify-center rounded-lg z-10"},It={class:"min-w-full divide-y divide-gray-200"},Ot={class:"bg-white divide-y divide-gray-200"},Wt={class:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900"},Rt={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-600"},Yt={class:"px-4 py-3 whitespace-nowrap text-sm"},qt={class:"px-4 py-3 whitespace-nowrap text-sm"},Ht={class:"flex space-x-2"},Qt={__name:"ProjectsCard",props:{projectCount:Number},emits:["open-notes-modal","open-standup-modal"],setup(f,{emit:x}){const n=x,d=r([]),t=r(!0),c=r(""),g=r(!1),s=r(""),u=N(()=>{if(!s.value)return d.value;const y=s.value.toLowerCase();return d.value.filter(b=>b.name.toLowerCase().includes(y)||b.user_role&&b.user_role.toLowerCase().includes(y)||b.status.toLowerCase().includes(y.replace(" ","_")))}),v=()=>{g.value=!g.value,g.value&&d.value.length===0&&w()},w=async()=>{t.value=!0,c.value="";try{const y=await M.get("/api/projects-simplified");d.value=y.data}catch(y){c.value="Failed to load projects",console.error("Error fetching projects:",y)}finally{t.value=!1}},m=y=>{switch(y){case"active":return"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 capitalize";case"pending":return"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 capitalize";case"on_hold":return"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 capitalize";default:return"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800 capitalize"}},i=y=>{n("open-notes-modal",y)},l=y=>{n("open-standup-modal",y)};return(y,b)=>(o(),a("div",Pt,[e("div",Ut,[b[1]||(b[1]=e("h3",{class:"text-xl font-semibold text-gray-900 mb-2 sm:mb-0"},"Your Projects",-1)),e("button",{onClick:v,class:"inline-flex justify-center items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition ease-in-out duration-150 w-48"},p(g.value?"Collapse Projects":"View My Projects ("+f.projectCount+")"),1)]),g.value?(o(),a("div",zt,[e("div",Et,[h(I,{modelValue:s.value,"onUpdate:modelValue":b[0]||(b[0]=C=>s.value=C),placeholder:"Search projects by name, role, or status...",class:"w-full",disabled:t.value},null,8,["modelValue","disabled"])]),c.value?(o(),a("div",Lt,p(c.value),1)):u.value.length===0&&!t.value?(o(),a("div",Bt,"No projects found matching your search.")):(o(),a("div",Gt,[t.value?(o(),a("div",Ft,b[2]||(b[2]=[e("svg",{class:"animate-spin h-8 w-8 text-indigo-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),e("span",{class:"ml-3 text-indigo-700"},"Loading projects...",-1)]))):j("",!0),e("table",It,[b[6]||(b[6]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Project Name"),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Your Role"),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",Ot,[(o(!0),a(P,null,H(u.value,C=>(o(),a("tr",{key:C.id,class:"hover:bg-gray-50 transition-colors duration-100"},[e("td",Wt,p(C.name),1),e("td",Rt,p(C.user_role||"N/A"),1),e("td",Yt,[e("span",{class:O(m(C.status))},p(C.status.replace("_"," ")),3)]),e("td",qt,[e("div",Ht,[h(Q(K),{href:`/projects/${C.id}`,class:"inline-flex items-center px-3 py-1 border border-transparent text-xs leading-4 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:border-indigo-700 focus:ring active:bg-indigo-700 transition ease-in-out duration-150"},{default:B(()=>b[3]||(b[3]=[U(" View ",-1)])),_:2,__:[3]},1032,["href"]),h(Y,{onClick:T=>i(C.id),class:"px-3 py-1 text-xs leading-4 bg-purple-600 hover:bg-purple-700"},{default:B(()=>b[4]||(b[4]=[U(" Notes ",-1)])),_:2,__:[4]},1032,["onClick"]),h(Y,{onClick:T=>l(C.id),class:"px-3 py-1 text-xs leading-4 bg-green-600 hover:bg-green-700"},{default:B(()=>b[5]||(b[5]=[U(" Standup ",-1)])),_:2,__:[5]},1032,["onClick"])])])]))),128))])])]))])):j("",!0)]))}},Jt={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6"},Kt={class:"flex space-x-4 mt-2"},Xt={class:"flex items-center"},Zt={class:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-red-100 text-red-800 font-medium text-xs mr-2"},es={class:"flex items-center"},ts={class:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-yellow-100 text-yellow-800 font-medium text-xs mr-2"},ss={class:"flex items-center"},os={class:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-green-100 text-green-800 font-medium text-xs mr-2"},as={class:"flex items-center space-x-4"},ns={key:0,class:"text-sm text-amber-600 font-medium"},ls={key:0,class:"mt-4"},rs={key:0,class:"text-center text-sm text-red-500 py-6"},is={key:1,class:"text-center text-sm text-gray-500 py-6"},ds={key:2,class:"relative"},us={key:0,class:"absolute inset-0 bg-white bg-opacity-75 flex items-center justify-center rounded-lg z-10"},cs={__name:"AssignedTasksCard",props:{},emits:["view-due-overdue-tasks","task-counts-updated"],setup(f,{expose:x,emit:n}){const d=n,t=r([]),c=r(!0),g=r(""),s=r(!1),u=r(""),v=r("all"),w=async()=>{c.value=!0,g.value="";try{t.value=await oe(),d("task-counts-updated",{overdue:C.value,dueToday:T.value})}catch(k){g.value="Failed to load assigned tasks",console.error("Error fetching assigned tasks:",k)}finally{c.value=!1}},m=N(()=>{if(!u.value)return t.value;const k=u.value.toLowerCase();return t.value.filter($=>{var A,L;return $.name.toLowerCase().includes(k)||((A=$.milestone)==null?void 0:A.name)&&$.milestone.name.toLowerCase().includes(k)||((L=$.project)==null?void 0:L.name)&&$.project.name.toLowerCase().includes(k)})}),i=N(()=>v.value==="due-overdue"?m.value.filter(k=>k.due_date&&new Date(k.due_date)<new Date||k.due_date&&new Date(k.due_date).toDateString()===new Date().toDateString()):m.value),l=()=>{s.value=!s.value,s.value&&t.value.length===0&&w()},y=async k=>{await w()},b=(k,$)=>{if($)X(k,$);else{const A=t.value.find(L=>L.id===k);A?X(k,A.project_id):console.error("Task not found and no projectId provided")}},C=N(()=>t.value.filter(k=>k.due_date&&new Date(k.due_date)<new Date).length),T=N(()=>t.value.filter(k=>k.due_date&&new Date(k.due_date).toDateString()===new Date().toDateString()).length),_=N(()=>t.value.filter(k=>k.status==="In Progress").length),S=r(null);return x({showDueOverdueTasksAndScroll:()=>{s.value=!0,v.value="due-overdue",t.value.length===0&&w(),R(()=>{S.value.scrollIntoView({behavior:"smooth"})})}}),G(()=>{w()}),(k,$)=>(o(),a("div",{ref_key:"assignedTasksRef",ref:S,class:"md:col-span-3 bg-white overflow-hidden shadow-xl sm:rounded-lg p-8 transition-all duration-300 hover:shadow-2xl"},[e("div",Jt,[e("div",null,[$[4]||($[4]=e("h3",{class:"text-xl font-semibold text-gray-900 mb-2"},"Your Assigned Tasks",-1)),e("div",Kt,[e("div",Xt,[e("span",Zt,p(C.value),1),$[1]||($[1]=e("span",{class:"text-sm text-gray-600"},"Overdue",-1))]),e("div",es,[e("span",ts,p(T.value),1),$[2]||($[2]=e("span",{class:"text-sm text-gray-600"},"Due Today",-1))]),e("div",ss,[e("span",os,p(_.value),1),$[3]||($[3]=e("span",{class:"text-sm text-gray-600"},"In Progress",-1))])])]),e("div",as,[s.value&&v.value==="due-overdue"?(o(),a("div",ns,[$[5]||($[5]=U(" Showing due and overdue tasks ",-1)),e("button",{onClick:$[0]||($[0]=A=>v.value="all"),class:"ml-2 text-blue-600 hover:text-blue-800 underline"}," Show all ")])):j("",!0),e("button",{onClick:l,class:"inline-flex justify-center items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-orange-600 hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 transition ease-in-out duration-150 w-48"},p(s.value?"Collapse Tasks":"View My Tasks ("+t.value.length+")"),1)])]),s.value?(o(),a("div",ls,[g.value?(o(),a("div",rs,p(g.value),1)):t.value.length===0&&!c.value?(o(),a("div",is,p(v.value==="due-overdue"?"No due or overdue tasks found.":"No assigned tasks found."),1)):(o(),a("div",ds,[c.value?(o(),a("div",us,$[6]||($[6]=[e("svg",{class:"animate-spin h-8 w-8 text-purple-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),e("span",{class:"ml-3 text-purple-700"},"Loading assigned tasks...",-1)]))):j("",!0),h(de,{tasks:i.value,"show-project-column":!0,onTaskUpdated:y,onOpenTaskDetail:b},null,8,["tasks"])]))])):j("",!0)],512))}},ms={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6"},ps={key:0,class:"mt-4"},gs={key:0,class:"text-center text-sm text-red-500 py-6"},vs={key:1,class:"text-center text-sm text-gray-500 py-6"},xs={key:2,class:"mt-3 overflow-x-auto rounded-lg border border-gray-200 shadow-sm relative"},fs={key:0,class:"absolute inset-0 bg-white bg-opacity-75 flex items-center justify-center rounded-lg z-10"},ys={class:"min-w-full divide-y divide-gray-200"},hs={class:"bg-white divide-y divide-gray-200"},bs={class:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900"},ws={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-600"},_s={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-600"},ks={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-600"},$s={class:"px-4 py-3 whitespace-nowrap text-sm"},Cs={class:"flex space-x-2"},Ts=["href"],Ss={__name:"UpcomingMeetingsCard",setup(f,{expose:x}){const n=r([]),d=r(!0),t=r(""),c=r(!1),g=r(null),s=async()=>{d.value=!0,t.value="";try{const w=await M.get("/api/user/meetings");n.value=w.data}catch(w){t.value="Failed to load upcoming meetings",console.error("Error fetching upcoming meetings:",w)}finally{d.value=!1}},u=()=>{c.value=!c.value};return x({showMeetingsAndScroll:()=>{c.value=!0,s(),R(()=>{g.value.scrollIntoView({behavior:"smooth"})})}}),G(()=>{s()}),(w,m)=>(o(),a("div",{ref_key:"meetingsRef",ref:g,class:"md:col-span-3 bg-white overflow-hidden shadow-xl sm:rounded-lg p-8 transition-all duration-300 hover:shadow-2xl"},[e("div",ms,[m[0]||(m[0]=e("h3",{class:"text-xl font-semibold text-gray-900 mb-2 sm:mb-0"},"Your Upcoming Meetings",-1)),e("button",{onClick:u,class:"inline-flex justify-center items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-purple-600 hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 transition ease-in-out duration-150 w-48"},p(c.value?"Collapse Meetings":"View Meetings ("+n.value.length+")"),1)]),c.value?(o(),a("div",ps,[t.value?(o(),a("div",gs,p(t.value),1)):n.value.length===0&&!d.value?(o(),a("div",vs," No upcoming meetings found. You'll see meetings here when you're invited to one. ")):(o(),a("div",xs,[d.value?(o(),a("div",fs,m[1]||(m[1]=[e("svg",{class:"animate-spin h-8 w-8 text-purple-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),e("span",{class:"ml-3 text-purple-700"},"Loading meetings...",-1)]))):j("",!0),e("table",ys,[m[3]||(m[3]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Meeting"),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Project"),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date & Time"),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Organizer"),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",hs,[(o(!0),a(P,null,H(n.value,i=>{var l,y;return o(),a("tr",{key:i.id,class:"hover:bg-gray-50 transition-colors duration-100"},[e("td",bs,p(i.summary),1),e("td",ws,p(((l=i.project)==null?void 0:l.name)||"N/A"),1),e("td",_s,p(new Date(i.start_time).toLocaleString()),1),e("td",ks,p(((y=i.creator)==null?void 0:y.name)||"N/A"),1),e("td",$s,[e("div",Cs,[i.google_meet_link?(o(),a("a",{key:0,href:i.google_meet_link,target:"_blank",class:"inline-flex items-center px-3 py-1 border border-transparent text-xs leading-4 font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:border-green-700 focus:ring active:bg-green-700 transition ease-in-out duration-150"}," Join Meeting ",8,Ts)):j("",!0),i.project_id?(o(),re(Q(K),{key:1,href:`/projects/${i.project_id}`,class:"inline-flex items-center px-3 py-1 border border-transparent text-xs leading-4 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:border-indigo-700 focus:ring active:bg-indigo-700 transition ease-in-out duration-150"},{default:B(()=>m[2]||(m[2]=[U(" View Project ",-1)])),_:2,__:[2]},1032,["href"])):j("",!0)])])])}),128))])])]))])):j("",!0)],512))}},js={class:"md:col-span-3 bg-white overflow-hidden shadow-xl sm:rounded-lg p-8 transition-all duration-300 hover:shadow-2xl"},Ds={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6"},As={key:0,class:"mt-4"},Ns={class:"mb-6"},Ms={key:0,class:"text-center text-sm text-red-500 py-6"},Vs={key:1,class:"text-center text-sm text-gray-500 py-6"},Ps={key:2,class:"mt-3 overflow-x-auto rounded-lg border border-gray-200 shadow-sm relative"},Us={key:0,class:"absolute inset-0 bg-white bg-opacity-75 flex items-center justify-center rounded-lg z-10"},zs={class:"min-w-full divide-y divide-gray-200"},Es={class:"bg-white divide-y divide-gray-200"},Ls={class:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900"},Bs={class:"px-4 py-3 whitespace-nowrap text-sm"},Gs={class:"px-4 py-3 whitespace-nowrap text-sm"},Fs={class:"px-4 py-3 whitespace-nowrap text-sm"},Is={class:"px-4 py-3 whitespace-nowrap text-sm"},Os={class:"flex space-x-2"},Ws={__name:"DueTasksBreakdownCard",setup(f){const x=r({total_due_tasks:0,projects:[]}),n=r(!0),d=r(""),t=r(!1),c=r(""),g=N(()=>{if(!c.value)return x.value.projects;const v=c.value.toLowerCase();return x.value.projects.filter(w=>w.name.toLowerCase().includes(v))}),s=async()=>{n.value=!0,d.value="";try{const v=await M.get("/api/task-statistics");x.value=v.data}catch(v){d.value="Failed to load task statistics",console.error("Error fetching task statistics:",v)}finally{n.value=!1}},u=()=>{t.value=!t.value,t.value&&x.value.projects.length===0&&s()};return G(()=>{s()}),(v,w)=>(o(),a("div",js,[e("div",Ds,[w[1]||(w[1]=e("h3",{class:"text-xl font-semibold text-gray-900 mb-2 sm:mb-0"},"Due Tasks Breakdown",-1)),e("button",{onClick:u,class:"inline-flex justify-center items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition ease-in-out duration-150 w-48"},p(t.value?"Collapse Tasks":"My Task Summary"),1)]),t.value?(o(),a("div",As,[e("div",Ns,[h(I,{modelValue:c.value,"onUpdate:modelValue":w[0]||(w[0]=m=>c.value=m),placeholder:"Search tasks by project name...",class:"w-full",disabled:n.value},null,8,["modelValue","disabled"])]),d.value?(o(),a("div",Ms,p(d.value),1)):g.value.length===0&&!n.value?(o(),a("div",Vs,"No due tasks found matching your search.")):(o(),a("div",Ps,[n.value?(o(),a("div",Us,w[2]||(w[2]=[e("svg",{class:"animate-spin h-8 w-8 text-blue-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),e("span",{class:"ml-3 text-blue-700"},"Loading tasks...",-1)]))):j("",!0),e("table",zs,[w[4]||(w[4]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Project Name"),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Total Due"),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Due Today"),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Assigned To Me"),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",Es,[(o(!0),a(P,null,H(g.value,m=>(o(),a("tr",{key:m.id,class:"hover:bg-gray-50 transition-colors duration-100"},[e("td",Ls,p(m.name),1),e("td",Bs,p(m.due_tasks),1),e("td",Gs,p(m.due_today),1),e("td",Fs,p(m.assigned_to_me),1),e("td",Is,[e("div",Os,[h(Q(K),{href:`/projects/${m.id}`,class:"inline-flex items-center px-3 py-1 border border-transparent text-xs leading-4 font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:border-blue-700 focus:ring active:bg-blue-700 transition ease-in-out duration-150"},{default:B(()=>w[3]||(w[3]=[U(" View Project ",-1)])),_:2,__:[3]},1032,["href"])])])]))),128))])])]))])):j("",!0)]))}},Rs={class:"md:col-span-3 bg-white overflow-hidden shadow-xl sm:rounded-lg p-8 transition-all duration-300 hover:shadow-2xl"},Ys={__name:"NoticeBoardCard",setup(f){return(x,n)=>(o(),a("div",Rs,n[0]||(n[0]=[e("h3",{class:"text-xl font-semibold text-gray-900 mb-4"},"Notice Board",-1),e("p",{class:"text-md text-gray-600"}," No new announcements at this time. Check back later for important updates! ",-1)])))}},qs={class:"py-12"},Hs={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},Qs={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},Js={class:"md:col-span-3"},Ks={class:"md:col-span-3"},wo={__name:"Dashboard",props:{projectCount:Number},setup(f){const x=r(!1),n=r(!0),d=r(!1),t=r(!1),c=r(null),g=r(null),s=r(!1),u=r(!1),v=r(null),w=r(null),m=async()=>{try{n.value=!0,console.log("Checking Google credentials...");const V=await M.get("/api/user/google-chat/check-credentials");console.log("Google credentials response:",V.data),x.value=V.data.has_credentials,console.log("hasGoogleCredentials set to:",x.value)}catch(V){console.error("Error checking Google credentials:",V),x.value=!1}finally{n.value=!1}},i=r(null),l=r(null),y=r(0),b=r(0),C=N(()=>y.value+b.value),T=({overdue:V,dueToday:D})=>{y.value=V,b.value=D};G(()=>{m()});const _=(V,D=null)=>{c.value=V,g.value=D,x.value&&D?t.value=!0:d.value=!0},S=()=>{},E=()=>{t.value=!1},k=(V,D=null)=>{v.value=V,w.value=D,x.value&&D?u.value=!0:s.value=!0},$=()=>{s.value=!1},A=()=>{u.value=!1},L=()=>{i.value&&i.value.showDueOverdueTasksAndScroll()},te=()=>{l.value&&l.value.showMeetingsAndScroll()};return(V,D)=>(o(),a(P,null,[h(Q(ie),{title:"Dashboard"}),h(ae,null,{default:B(()=>[e("div",qs,[e("div",Hs,[h(Ie,{"overdue-tasks":y.value,"due-today-tasks":b.value,onViewTasks:L},null,8,["overdue-tasks","due-today-tasks"]),e("div",Qs,[h(ot,{"project-count":f.projectCount},null,8,["project-count"]),h(rt,{"total-due-tasks":C.value,onCardClicked:L},null,8,["total-due-tasks"]),e("div",Js,[h(Je)]),e("div",Ks,[h(Xe)]),h(ht,{"due-today-tasks-count":b.value,"overdue-tasks-count":y.value,onViewTasks:L,onViewMeetings:te},null,8,["due-today-tasks-count","overdue-tasks-count"]),h(Vt),h(cs,{ref_key:"assignedTasksCardRef",ref:i,onTaskCountsUpdated:T},null,512),h(Qt,{"project-count":f.projectCount,onOpenNotesModal:_,onOpenStandupModal:k},null,8,["project-count"]),h(Ss,{ref_key:"upcomingMeetingsCardRef",ref:l,class:"upcoming-meetings-card"},null,512),h(Ws),h(Ys)])])]),h(ue,{show:d.value,"project-id":c.value,onClose:D[0]||(D[0]=J=>d.value=!1),onNoteAdded:S},null,8,["show","project-id"]),h(ce,{show:s.value,"project-id":v.value,onClose:D[1]||(D[1]=J=>s.value=!1),onStandupAdded:$},null,8,["show","project-id"]),h(we,{show:t.value,"project-id":c.value,"space-name":g.value,onClose:D[2]||(D[2]=J=>t.value=!1),onNoteAdded:E},null,8,["show","project-id","space-name"]),h(Ve,{show:u.value,"project-id":v.value,"space-name":w.value,onClose:D[3]||(D[3]=J=>u.value=!1),onStandupAdded:A},null,8,["show","project-id","space-name"])]),_:1})],64))}};export{wo as default};
