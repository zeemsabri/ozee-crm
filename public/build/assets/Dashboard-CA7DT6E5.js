import{a as se,f as oe,_ as ae}from"./AuthenticatedLayout-hOeIbYPy.js";import{z as Z,w as F,r,i as a,g as j,o,b as e,e as h,a6 as U,x as M,a7 as ee,s as N,t as p,a as L,m as V,P as q,B,J as ne,p as I,F as z,I as Y,G as le,j as H,h as Q,n as K,O as X,c as re,y as ie}from"./app-MrT8yjhE.js";import{_ as de,a as ue,b as ce}from"./TaskList-CmC4wHPI.js";import{_ as W}from"./InputLabel-DYl_itnJ.js";import{_ as O}from"./InputError-BJw9IJhk.js";import{P as R}from"./PrimaryButton-C8y5q46Y.js";import"./SecondaryButton-uqoPsgjF.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Checkbox-ApphtEpu.js";import"./ApplicationLogo-CtGT_kaQ.js";import"./DangerButton-BQMv6bdk.js";const me={key:0,class:"fixed inset-0 overflow-y-auto px-4 py-6 sm:px-0 z-50"},pe={class:"bg-white rounded-lg overflow-hidden shadow-xl transform transition-all sm:w-full sm:max-w-lg mx-auto"},ge={class:"px-6 py-4"},ve={class:"mt-4"},xe={class:"mb-4"},fe={class:"px-6 py-4 bg-gray-100 text-right"},ye=["disabled"],he={key:0},be={key:1},we={__name:"GoogleNotesModal",props:{show:Boolean,projectId:Number,spaceName:String},emits:["close","noteAdded"],setup(y,{emit:f}){const l=y,i=f,t=Z({space_name:"",note_text:"",thread_name:""});F(()=>l.projectId,s=>{s&&(t.project_id=s)},{immediate:!0}),F(()=>l.spaceName,s=>{s&&(t.space_name=s)},{immediate:!0}),F(()=>l.show,s=>{s&&(t.project_id=l.projectId,t.space_name=l.spaceName,t.note_text="",t.thread_name="")});const u=r(!1),g=async()=>{if(!t.note_text){U("Please enter a note");return}try{u.value=!0;const s=await M.post("/api/user/google-chat/notes",{space_name:t.space_name,note_text:t.note_text,thread_name:t.thread_name||null});s.data.success?(ee("Note added successfully!"),i("noteAdded"),i("close")):U(s.data.message||"Failed to add note")}catch(s){console.error("Error adding note:",s),s.response&&s.response.data.message?U(s.response.data.message):U("Failed to add note. Please try again."),s.response&&s.response.data.redirect_url&&(window.location.href=s.response.data.redirect_url)}finally{u.value=!1}};return(s,d)=>y.show?(o(),a("div",me,[e("div",{class:"fixed inset-0 transform transition-all",onClick:d[0]||(d[0]=v=>s.$emit("close"))},d[3]||(d[3]=[e("div",{class:"absolute inset-0 bg-gray-500 opacity-75"},null,-1)])),e("div",pe,[e("div",ge,[d[4]||(d[4]=e("div",{class:"text-lg font-medium text-gray-900"}," Add Note ",-1)),e("div",ve,[e("div",xe,[h(W,{for:"note_text",value:"Note Content"}),h(O,{id:"note_text",type:"text",class:"mt-1 block w-full",modelValue:t.note_text,"onUpdate:modelValue":d[1]||(d[1]=v=>t.note_text=v),required:""},null,8,["modelValue"])])])]),e("div",fe,[e("button",{type:"button",class:"inline-flex items-center px-4 py-2 bg-white border border-gray-300 rounded-md font-semibold text-xs text-gray-700 uppercase tracking-widest shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-25 transition ease-in-out duration-150 mr-2",onClick:d[2]||(d[2]=v=>s.$emit("close"))}," Cancel "),e("button",{type:"button",class:"inline-flex items-center px-4 py-2 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 focus:bg-gray-700 active:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition ease-in-out duration-150",onClick:g,disabled:u.value},[u.value?(o(),a("span",he,"Submitting...")):(o(),a("span",be,"Add Note"))],8,ye)])])])):j("",!0)}},_e={key:0,class:"fixed inset-0 overflow-y-auto px-4 py-6 sm:px-0 z-50"},ke={class:"bg-white rounded-lg overflow-hidden shadow-xl transform transition-all sm:w-full sm:max-w-lg mx-auto"},$e={class:"px-6 py-4"},Ce={class:"mt-4"},Te={class:"mb-4"},Se={class:"mb-4"},je={class:"mb-4"},De={class:"px-6 py-4 bg-gray-100 text-right"},Ae=["disabled"],Ne={key:0},Me={key:1},Ve={__name:"GoogleStandupModal",props:{show:Boolean,projectId:Number,spaceName:String},emits:["close","standupAdded"],setup(y,{emit:f}){const l=y,i=f,t=Z({space_name:"",yesterday:"",today:"",blockers:""});F(()=>l.projectId,s=>{s&&(t.project_id=s)},{immediate:!0}),F(()=>l.spaceName,s=>{s&&(t.space_name=s)},{immediate:!0}),F(()=>l.show,s=>{s&&(t.project_id=l.projectId,t.space_name=l.spaceName,t.yesterday="",t.today="",t.blockers="")});const u=r(!1),g=async()=>{if(!t.yesterday||!t.today){U("Please fill in the required fields");return}try{u.value=!0;const s=await M.post("/api/user/google-chat/standups",{space_name:t.space_name,yesterday:t.yesterday,today:t.today,blockers:t.blockers||""});s.data.success?(ee("Standup added successfully!"),i("standupAdded"),i("close")):U(s.data.message||"Failed to add standup")}catch(s){console.error("Error adding standup:",s),s.response&&s.response.data.message?U(s.response.data.message):U("Failed to add standup. Please try again."),s.response&&s.response.data.redirect_url&&(window.location.href=s.response.data.redirect_url)}finally{u.value=!1}};return(s,d)=>y.show?(o(),a("div",_e,[e("div",{class:"fixed inset-0 transform transition-all",onClick:d[0]||(d[0]=v=>s.$emit("close"))},d[5]||(d[5]=[e("div",{class:"absolute inset-0 bg-gray-500 opacity-75"},null,-1)])),e("div",ke,[e("div",$e,[d[6]||(d[6]=e("div",{class:"text-lg font-medium text-gray-900"}," Daily Standup ",-1)),e("div",Ce,[e("div",Te,[h(W,{for:"yesterday",value:"What did you work on yesterday?"}),h(O,{id:"yesterday",type:"text",class:"mt-1 block w-full",modelValue:t.yesterday,"onUpdate:modelValue":d[1]||(d[1]=v=>t.yesterday=v),required:""},null,8,["modelValue"])]),e("div",Se,[h(W,{for:"today",value:"What will you work on today?"}),h(O,{id:"today",type:"text",class:"mt-1 block w-full",modelValue:t.today,"onUpdate:modelValue":d[2]||(d[2]=v=>t.today=v),required:""},null,8,["modelValue"])]),e("div",je,[h(W,{for:"blockers",value:"Any blockers?"}),h(O,{id:"blockers",type:"text",class:"mt-1 block w-full",modelValue:t.blockers,"onUpdate:modelValue":d[3]||(d[3]=v=>t.blockers=v),placeholder:"None"},null,8,["modelValue"])])])]),e("div",De,[e("button",{type:"button",class:"inline-flex items-center px-4 py-2 bg-white border border-gray-300 rounded-md font-semibold text-xs text-gray-700 uppercase tracking-widest shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-25 transition ease-in-out duration-150 mr-2",onClick:d[4]||(d[4]=v=>s.$emit("close"))}," Cancel "),e("button",{type:"button",class:"inline-flex items-center px-4 py-2 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 focus:bg-gray-700 active:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition ease-in-out duration-150",onClick:g,disabled:u.value},[u.value?(o(),a("span",Ne,"Submitting...")):(o(),a("span",Me,"Submit Standup"))],8,Ae)])])])):j("",!0)}},Pe={key:0,class:"bg-amber-50 border-l-4 border-amber-500 p-4 mb-6 rounded-md shadow-md"},ze={class:"flex items-center justify-between"},Ue={class:"flex items-center"},Ee={class:"ml-3"},Le={class:"text-sm text-amber-800 font-medium"},Be={key:0},Ge={key:1},Fe={key:2},Oe={__name:"TaskNotificationPrompt",props:{overdueTasks:{type:Number,required:!0},dueTodayTasks:{type:Number,required:!0}},emits:["view-tasks"],setup(y,{emit:f}){const l=y,i=f,t=N(()=>l.overdueTasks+l.dueTodayTasks),u=N(()=>t.value>0),g=()=>{i("view-tasks")};return(s,d)=>u.value?(o(),a("div",Pe,[e("div",ze,[e("div",Ue,[d[0]||(d[0]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-6 w-6 text-amber-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1)),e("div",Ee,[e("p",Le,[y.overdueTasks>0&&y.dueTodayTasks>0?(o(),a("span",Be," You have "+p(y.overdueTasks)+" overdue "+p(y.overdueTasks===1?"task":"tasks")+" and "+p(y.dueTodayTasks)+" "+p(y.dueTodayTasks===1?"task":"tasks")+" due today. ",1)):y.overdueTasks>0?(o(),a("span",Ge," You have "+p(y.overdueTasks)+" overdue "+p(y.overdueTasks===1?"task":"tasks")+" that require your attention. ",1)):y.dueTodayTasks>0?(o(),a("span",Fe," You have "+p(y.dueTodayTasks)+" "+p(y.dueTodayTasks===1?"task":"tasks")+" due today. ",1)):j("",!0)])])]),e("div",null,[h(R,{onClick:g,class:"px-4 py-2 text-sm bg-amber-600 hover:bg-amber-700 focus:ring-amber-500"},{default:L(()=>d[1]||(d[1]=[V(" View ",-1)])),_:1,__:[1]})])])])):j("",!0)}},Ie={class:"flex items-center justify-between flex-wrap gap-4"},We={class:"flex-shrink-0 flex items-center"},Ye={key:0,class:"h-6 w-6 text-red-600",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},Re={key:1,class:"h-6 w-6 text-indigo-600",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},qe={class:"flex-shrink-0 mt-3 sm:mt-0"},He={key:1,class:"text-center text-sm text-gray-500 py-4"},Qe={key:2,class:"text-center text-sm text-red-500 py-4"},Je={__name:"AvailabilityPrompt",setup(y){const f=r(!1),l=r(!0),i=r([]),t=r(!1),u=r(""),g=r(!1),s=r(!1),d=r(null),v=r(!1),w=N(()=>{var _;return((_=q().props.auth.user)==null?void 0:_.id)||null}),m=()=>{const _=localStorage.getItem("authToken");_&&!M.defaults.headers.common.Authorization&&(M.defaults.headers.common.Authorization=`Bearer ${_}`,console.log("Auth headers set in AvailabilityPrompt"))},c=async()=>{l.value=!0,u.value="";try{m();const _=await M.get("/api/availability-prompt");f.value=_.data.should_show_prompt,g.value=_.data.should_block_user,s.value=_.data.all_next_weekdays_covered,d.value=_.data.current_day,v.value=_.data.is_thursday_to_saturday,f.value&&x(_.data.next_week_start,_.data.next_week_end),localStorage.setItem("shouldBlockUser",g.value),localStorage.setItem("allNextWeekdaysCovered",s.value);const S=new CustomEvent("availability-status-updated",{detail:{shouldBlockUser:g.value,allNextWeekdaysCovered:s.value}});window.dispatchEvent(S)}catch(_){console.error("Error checking availability prompt:",_),f.value=!1,_.response&&_.response.status===401?u.value="Authentication error. Please refresh the page or log in again.":u.value="Failed to load availability prompt status."}finally{l.value=!1}},x=(_,S)=>{const G=[],k=new Date(_),$=new Date(S);let A=new Date(k);for(;A<=$;)G.push({value:A.toISOString().split("T")[0],label:A.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})}),A.setDate(A.getDate()+1);i.value=G},n=()=>{t.value=!0},b=()=>{c()},C=()=>{document.visibilityState==="visible"&&Y(()=>{c()})},T=_=>{(_.key==="shouldBlockUser"||_.key==="allNextWeekdaysCovered")&&Y(()=>{c()})};return B(()=>{c(),document.addEventListener("visibilitychange",C),window.addEventListener("storage",T)}),ne(()=>{document.removeEventListener("visibilitychange",C),window.removeEventListener("storage",T)}),(_,S)=>(o(),a(z,null,[f.value&&!l.value&&!u.value?(o(),a("div",{key:0,class:I(["border-l-4 p-4 mb-6 rounded-md shadow-sm transition-all duration-300",g.value?"bg-red-50 border-red-500":"bg-indigo-50 border-indigo-500"])},[e("div",Ie,[e("div",We,[g.value?(o(),a("svg",Ye,S[1]||(S[1]=[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"},null,-1)]))):(o(),a("svg",Re,S[2]||(S[2]=[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"},null,-1)]))),e("p",{class:I(["ml-3 text-sm font-medium",g.value?"text-red-800":"text-indigo-800"])},[g.value?(o(),a(z,{key:0},[S[3]||(S[3]=e("span",{class:"font-bold"},"Action Required:",-1)),S[4]||(S[4]=V(" You must submit your availability for all weekdays of next week to unlock all features. ",-1))],64)):s.value?(o(),a(z,{key:2},[V(" Thank you for submitting your availability for next week! You can still update it if needed. ")],64)):(o(),a(z,{key:1},[V(" Please submit your availability for next week. This helps in planning meetings and work schedules. ")],64))],2)]),e("div",qe,[h(R,{onClick:n,class:I(["whitespace-nowrap px-6 py-2 text-sm font-semibold rounded-md shadow-md",{"bg-red-600 hover:bg-red-700 focus:ring-red-500":g.value,"bg-indigo-600 hover:bg-indigo-700 focus:ring-indigo-500":!g.value&&!s.value,"bg-green-600 hover:bg-green-700 focus:ring-green-500":!g.value&&s.value}])},{default:L(()=>[V(p(s.value?"Update Availability":"Submit Availability"),1)]),_:1},8,["class"])])])],2)):l.value?(o(),a("div",He,"Loading availability prompt...")):u.value?(o(),a("div",Qe,p(u.value),1)):j("",!0),h(se,{show:t.value,"next-week-dates":i.value,date:i.value.length>0?i.value[0].value:"",userId:w.value,onClose:S[0]||(S[0]=G=>t.value=!1),onAvailabilitySaved:b},null,8,["show","next-week-dates","date","userId"])],64))}},Ke={key:0,class:"bg-white overflow-hidden shadow-sm sm:rounded-lg mb-6"},Xe={__name:"GoogleAccountPrompt",setup(y){const f=r(!1),l=r(!0),i=r(!0),t=async()=>{try{l.value=!0;const g=await M.get("/api/user/google-chat/check-credentials");f.value=g.data.has_credentials,i.value=!f.value,console.log("Google credentials check:",{hasGoogleCredentials:f.value,showPrompt:i.value})}catch(g){console.error("Error checking Google credentials:",g),U("Failed to check Google account status"),i.value=!0}finally{l.value=!1}},u=()=>{window.location.href="/user/google/redirect"};return B(()=>{t()}),(g,s)=>i.value?(o(),a("div",Ke,[e("div",{class:"p-6 bg-white border-b border-gray-200"},[e("div",{class:"flex items-center"},[s[0]||(s[0]=le('<div class="flex-shrink-0 bg-blue-100 rounded-md p-3"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div><div class="ml-4 flex-1"><h3 class="text-lg font-medium text-gray-900">Connect your Google account</h3><p class="mt-1 text-sm text-gray-600"> To use Google Chat features for notes and standups, you need to connect your Google account. </p></div>',2)),e("div",{class:"ml-4"},[e("button",{type:"button",onClick:u,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Connect Google Account ")])])])])):j("",!0)}},Ze={class:"md:col-span-2 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg shadow-xl p-8 text-white flex flex-col sm:flex-row items-center justify-between transition-all duration-300 hover:shadow-2xl"},et={class:"text-3xl font-bold mb-2"},tt={class:"mt-6 sm:mt-0 sm:ml-8 text-center sm:text-right"},st={class:"text-5xl font-extrabold"},ot={__name:"WelcomeCard",props:{projectCount:Number},setup(y){const f=N(()=>q().props.auth.user),l=y;return(i,t)=>(o(),a("div",Ze,[e("div",null,[e("h3",et,"Hello, "+p(f.value.name)+"!",1),t[0]||(t[0]=e("p",{class:"text-md opacity-90"},"Here's a quick overview of your activities and progress.",-1))]),e("div",tt,[e("p",st,p(l.projectCount),1),t[1]||(t[1]=e("p",{class:"text-sm opacity-90"},"Total Projects",-1))])]))}},at={class:"bg-white rounded-lg shadow-xl p-8 flex flex-col justify-between transition-all duration-300 hover:shadow-2xl"},nt={class:"flex items-center justify-between"},lt={class:"text-5xl font-extrabold text-indigo-600"},rt={__name:"PendingTasksCard",props:{"total-due-tasks":{type:Number,default:0}},setup(y){const f=y;return(l,i)=>(o(),a("div",at,[i[1]||(i[1]=e("h3",{class:"text-xl font-semibold text-gray-900 mb-4"},"Pending Tasks",-1)),e("div",nt,[e("p",lt,p(f["total-due-tasks"]),1),i[0]||(i[0]=e("svg",{class:"w-12 h-12 text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})],-1))]),i[2]||(i[2]=e("p",{class:"text-sm text-gray-600 mt-4"},"Tasks currently due across all your projects.",-1))]))}},it={class:"md:col-span-3 bg-white overflow-hidden shadow-xl sm:rounded-lg p-8 transition-all duration-300 hover:shadow-2xl"},dt={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-5 gap-4"},ut={class:"text-3xl font-bold text-amber-600 mb-2"},ct={class:"text-3xl font-bold text-red-600 mb-2"},mt={class:"bg-blue-50 rounded-lg p-4 flex flex-col items-center justify-center border border-blue-200 hover:shadow-md transition-all cursor-pointer"},pt={class:"text-3xl font-bold text-blue-600 mb-2"},gt={key:0,class:"text-3xl font-bold text-purple-600 mb-2 opacity-50"},vt={key:1,class:"text-3xl font-bold text-purple-600 mb-2"},xt={class:"bg-green-50 rounded-lg p-4 flex flex-col items-center justify-center border border-green-200 hover:shadow-md transition-all"},ft={key:0,class:"text-3xl font-bold text-green-600 mb-2 opacity-50"},yt={key:1,class:"text-3xl font-bold text-green-600 mb-2"},ht={__name:"DashboardOverviewCard",props:{dueTodayTasksCount:{type:Number,default:0},overdueTasksCount:{type:Number,default:0}},emits:["view-tasks","view-meetings"],setup(y,{emit:f}){const l=f,i=r(0),t=r(!0),u=r(0),g=r(0),s=r(!0),d=N(()=>q().props.auth.user),v=async()=>{t.value=!0;try{const x=new Date().toISOString().split("T")[0],n=await M.get("/api/user/meetings",{params:{date:x}});i.value=n.data.length}catch(x){console.error("Error fetching meetings:",x)}finally{t.value=!1}},w=async()=>{s.value=!0;try{const x=new Date().toISOString().split("T")[0],n=await M.get("/api/project-notes",{params:{type:"standup",date:x,user_id:d.value.id}});g.value=n.data.length}catch(x){console.error("Error fetching standups:",x)}finally{s.value=!1}},m=()=>{l("view-tasks")},c=()=>{l("view-meetings")};return B(()=>{v(),w()}),(x,n)=>(o(),a("div",it,[n[10]||(n[10]=e("h3",{class:"text-xl font-semibold text-gray-900 mb-6"},"Today's Overview",-1)),e("div",dt,[e("div",{class:"bg-amber-50 rounded-lg p-4 flex flex-col items-center justify-center border border-amber-200 hover:shadow-md transition-all cursor-pointer",onClick:m},[e("div",ut,p(y.dueTodayTasksCount),1),n[0]||(n[0]=e("div",{class:"text-sm text-gray-700 text-center"},"Tasks Due Today",-1)),n[1]||(n[1]=e("div",{class:"mt-2 text-xs text-amber-600 hover:underline"},"View Tasks",-1))]),e("div",{class:"bg-red-50 rounded-lg p-4 flex flex-col items-center justify-center border border-red-200 hover:shadow-md transition-all cursor-pointer",onClick:m},[e("div",ct,p(y.overdueTasksCount),1),n[2]||(n[2]=e("div",{class:"text-sm text-gray-700 text-center"},"Overdue Tasks",-1)),n[3]||(n[3]=e("div",{class:"mt-2 text-xs text-red-600 hover:underline"},"View Tasks",-1))]),e("div",mt,[e("div",pt,p(u.value),1),n[4]||(n[4]=e("div",{class:"text-sm text-gray-700 text-center"},"Unread Emails",-1)),n[5]||(n[5]=e("div",{class:"mt-2 text-xs text-blue-600 hover:underline"},"Coming Soon",-1))]),e("div",{class:"bg-purple-50 rounded-lg p-4 flex flex-col items-center justify-center border border-purple-200 hover:shadow-md transition-all cursor-pointer",onClick:c},[t.value?(o(),a("div",gt,"...")):(o(),a("div",vt,p(i.value),1)),n[6]||(n[6]=e("div",{class:"text-sm text-gray-700 text-center"},"Meetings Today",-1)),n[7]||(n[7]=e("div",{class:"mt-2 text-xs text-purple-600 hover:underline"},"View Meetings",-1))]),e("div",xt,[s.value?(o(),a("div",ft,"...")):(o(),a("div",yt,p(g.value),1)),n[8]||(n[8]=e("div",{class:"text-sm text-gray-700 text-center"},"Standups Today",-1)),n[9]||(n[9]=e("div",{class:"mt-2 text-xs text-green-600"},"Your Updates",-1))])])]))}},bt={class:"md:col-span-3 bg-white overflow-hidden shadow-xl sm:rounded-lg p-8 transition-all duration-300 hover:shadow-2xl"},wt={class:"mb-6 text-md text-gray-600"},_t={class:"font-semibold text-indigo-700"},kt={key:0,class:"text-center text-sm text-gray-500 py-6"},$t={key:1,class:"text-center text-sm text-red-500 py-6"},Ct={key:2,class:"text-center text-sm text-gray-500 py-6"},Tt={key:3,class:"grid grid-cols-2 sm:grid-cols-4 md:grid-cols-7 gap-4 mt-4"},St={class:"text-sm font-bold text-gray-800"},jt={class:"text-xs text-gray-600 mt-0.5"},Dt={class:"mt-3 text-center text-xs w-full"},At={key:0,class:"text-gray-600 leading-tight mt-1"},Nt={key:0,class:"text-gray-600 leading-tight mt-1 break-words"},Mt={key:2,class:"text-gray-500 font-medium"},Vt={__name:"WeeklyAvailabilityCard",setup(y){const f=N(()=>q().props.auth.user),l=r({availabilities:[],start_date:"",end_date:""}),i=r(!1),t=r(""),u=m=>m?new Date(m).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}):"",g=async()=>{i.value=!0,t.value="";try{const m=new Date,c=new Date(m);c.setDate(m.getDate()-m.getDay()+(m.getDay()===0?-6:1));const x=new Date(c);x.setDate(c.getDate()+6);const n=C=>C.toISOString().split("T")[0],b=await M.get("/api/availabilities",{params:{user_id:f.value.id,start_date:n(c),end_date:n(x)}});l.value=b.data}catch(m){t.value="Failed to load availability data",console.error("Error fetching weekly availability:",m)}finally{i.value=!1}},s=m=>["Mon","Tue","Wed","Thu","Fri","Sat","Sun"][m-1],d=m=>{const c=new Date(l.value.start_date);return c.setDate(c.getDate()+m-1),c.toLocaleDateString("en-US",{month:"short",day:"numeric"})},v=m=>{const c=new Date(l.value.start_date);c.setDate(c.getDate()+m-1);const x=c.toISOString().split("T")[0],n=l.value.availabilities.filter(T=>T.date.split("T")[0]===x);if(n.length===0)return{status:"not-set"};if(n.some(T=>!T.is_available)){const T=n.find(_=>!_.is_available);return{status:"unavailable",reason:(T==null?void 0:T.reason)||"Not specified"}}const C=[];return n.forEach(T=>{T.is_available&&T.time_slots&&Array.isArray(T.time_slots)&&T.time_slots.forEach(_=>{C.push(`${_.start_time} - ${_.end_time}`)})}),{status:"available",slots:C.length>0?C:["All Day"]}},w=m=>{const c=v(m);let x="";c.status==="available"?x="border-green-300 bg-green-50/50":c.status==="unavailable"?x="border-red-300 bg-red-50/50":x="border-gray-200 bg-gray-50";const n=new Date,b=new Date(l.value.start_date);return b.setDate(b.getDate()+m-1),n.toDateString()===b.toDateString()&&(x+=" ring-2 ring-indigo-500 ring-offset-2"),x};return B(()=>{g()}),(m,c)=>(o(),a("div",bt,[c[3]||(c[3]=e("h3",{class:"text-xl font-semibold text-gray-900 mb-4"},"Your Weekly Availability",-1)),e("p",wt,[c[0]||(c[0]=V(" Availability for: ",-1)),e("span",_t,p(l.value.start_date?u(l.value.start_date):"")+" to "+p(l.value.end_date?u(l.value.end_date):""),1)]),i.value?(o(),a("div",kt,"Loading availability data...")):t.value?(o(),a("div",$t,p(t.value),1)):!l.value.availabilities||l.value.availabilities.length===0?(o(),a("div",Ct," No availability data found for this week. ")):(o(),a("div",Tt,[(o(),a(z,null,H(7,x=>e("div",{key:"availability-day-"+x,class:I(["flex flex-col items-center justify-start p-4 border rounded-lg shadow-sm h-36 overflow-hidden text-clip relative group",w(x)])},[e("span",St,p(s(x)),1),e("span",jt,p(d(x)),1),e("div",Dt,[v(x).status==="available"?(o(),a(z,{key:0},[c[1]||(c[1]=e("p",{class:"text-green-700 font-bold"},"Available",-1)),v(x).slots.length>0?(o(),a("p",At,p(v(x).slots.join(", ")),1)):j("",!0)],64)):v(x).status==="unavailable"?(o(),a(z,{key:1},[c[2]||(c[2]=e("p",{class:"text-red-700 font-bold"},"Unavailable",-1)),v(x).reason?(o(),a("p",Nt," Reason: "+p(v(x).reason),1)):j("",!0)],64)):(o(),a("p",Mt,"Not Set"))])],2)),64))]))]))}},Pt={class:"md:col-span-3 bg-white overflow-hidden shadow-xl sm:rounded-lg p-8 transition-all duration-300 hover:shadow-2xl"},zt={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6"},Ut={key:0,class:"mt-4"},Et={class:"mb-6"},Lt={key:0,class:"text-center text-sm text-red-500 py-6"},Bt={key:1,class:"text-center text-sm text-gray-500 py-6"},Gt={key:2,class:"mt-3 overflow-x-auto rounded-lg border border-gray-200 shadow-sm relative"},Ft={key:0,class:"absolute inset-0 bg-white bg-opacity-75 flex items-center justify-center rounded-lg z-10"},Ot={class:"min-w-full divide-y divide-gray-200"},It={class:"bg-white divide-y divide-gray-200"},Wt={class:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900"},Yt={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-600"},Rt={class:"px-4 py-3 whitespace-nowrap text-sm"},qt={class:"px-4 py-3 whitespace-nowrap text-sm"},Ht={class:"flex space-x-2"},Qt={__name:"ProjectsCard",props:{projectCount:Number},emits:["open-notes-modal","open-standup-modal"],setup(y,{emit:f}){const l=f,i=r([]),t=r(!0),u=r(""),g=r(!1),s=r(""),d=N(()=>{if(!s.value)return i.value;const n=s.value.toLowerCase();return i.value.filter(b=>b.name.toLowerCase().includes(n)||b.user_role&&b.user_role.toLowerCase().includes(n)||b.status.toLowerCase().includes(n.replace(" ","_")))}),v=()=>{g.value=!g.value,g.value&&i.value.length===0&&w()},w=async()=>{t.value=!0,u.value="";try{const n=await M.get("/api/projects-simplified");i.value=n.data}catch(n){u.value="Failed to load projects",console.error("Error fetching projects:",n)}finally{t.value=!1}},m=n=>{switch(n){case"active":return"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 capitalize";case"pending":return"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 capitalize";case"on_hold":return"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 capitalize";default:return"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800 capitalize"}},c=n=>{l("open-notes-modal",n)},x=n=>{l("open-standup-modal",n)};return(n,b)=>(o(),a("div",Pt,[e("div",zt,[b[1]||(b[1]=e("h3",{class:"text-xl font-semibold text-gray-900 mb-2 sm:mb-0"},"Your Projects",-1)),e("button",{onClick:v,class:"inline-flex justify-center items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition ease-in-out duration-150 w-48"},p(g.value?"Collapse Projects":"View My Projects ("+y.projectCount+")"),1)]),g.value?(o(),a("div",Ut,[e("div",Et,[h(O,{modelValue:s.value,"onUpdate:modelValue":b[0]||(b[0]=C=>s.value=C),placeholder:"Search projects by name, role, or status...",class:"w-full",disabled:t.value},null,8,["modelValue","disabled"])]),u.value?(o(),a("div",Lt,p(u.value),1)):d.value.length===0&&!t.value?(o(),a("div",Bt,"No projects found matching your search.")):(o(),a("div",Gt,[t.value?(o(),a("div",Ft,b[2]||(b[2]=[e("svg",{class:"animate-spin h-8 w-8 text-indigo-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),e("span",{class:"ml-3 text-indigo-700"},"Loading projects...",-1)]))):j("",!0),e("table",Ot,[b[6]||(b[6]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Project Name"),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Your Role"),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",It,[(o(!0),a(z,null,H(d.value,C=>(o(),a("tr",{key:C.id,class:"hover:bg-gray-50 transition-colors duration-100"},[e("td",Wt,p(C.name),1),e("td",Yt,p(C.user_role||"N/A"),1),e("td",Rt,[e("span",{class:I(m(C.status))},p(C.status.replace("_"," ")),3)]),e("td",qt,[e("div",Ht,[h(Q(K),{href:`/projects/${C.id}`,class:"inline-flex items-center px-3 py-1 border border-transparent text-xs leading-4 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:border-indigo-700 focus:ring active:bg-indigo-700 transition ease-in-out duration-150"},{default:L(()=>b[3]||(b[3]=[V(" View ",-1)])),_:2,__:[3]},1032,["href"]),h(R,{onClick:T=>c(C.id),class:"px-3 py-1 text-xs leading-4 bg-purple-600 hover:bg-purple-700"},{default:L(()=>b[4]||(b[4]=[V(" Notes ",-1)])),_:2,__:[4]},1032,["onClick"]),h(R,{onClick:T=>x(C.id),class:"px-3 py-1 text-xs leading-4 bg-green-600 hover:bg-green-700"},{default:L(()=>b[5]||(b[5]=[V(" Standup ",-1)])),_:2,__:[5]},1032,["onClick"])])])]))),128))])])]))])):j("",!0)]))}},Jt={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6"},Kt={class:"flex space-x-4 mt-2"},Xt={class:"flex items-center"},Zt={class:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-red-100 text-red-800 font-medium text-xs mr-2"},es={class:"flex items-center"},ts={class:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-yellow-100 text-yellow-800 font-medium text-xs mr-2"},ss={class:"flex items-center"},os={class:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-green-100 text-green-800 font-medium text-xs mr-2"},as={class:"flex items-center space-x-4"},ns={key:0,class:"text-sm text-amber-600 font-medium"},ls={key:0,class:"mt-4"},rs={key:0,class:"text-center text-sm text-red-500 py-6"},is={key:1,class:"text-center text-sm text-gray-500 py-6"},ds={key:2,class:"relative"},us={key:0,class:"absolute inset-0 bg-white bg-opacity-75 flex items-center justify-center rounded-lg z-10"},cs={__name:"AssignedTasksCard",props:{},emits:["view-due-overdue-tasks","task-counts-updated"],setup(y,{expose:f,emit:l}){const i=l,t=r([]),u=r(!0),g=r(""),s=r(!1),d=r(""),v=r("all"),w=async()=>{u.value=!0,g.value="";try{t.value=await oe(),i("task-counts-updated",{overdue:C.value,dueToday:T.value})}catch(k){g.value="Failed to load assigned tasks",console.error("Error fetching assigned tasks:",k)}finally{u.value=!1}},m=N(()=>{if(!d.value)return t.value;const k=d.value.toLowerCase();return t.value.filter($=>{var A,E;return $.name.toLowerCase().includes(k)||((A=$.milestone)==null?void 0:A.name)&&$.milestone.name.toLowerCase().includes(k)||((E=$.project)==null?void 0:E.name)&&$.project.name.toLowerCase().includes(k)})}),c=N(()=>v.value==="due-overdue"?m.value.filter(k=>k.due_date&&new Date(k.due_date)<new Date||k.due_date&&new Date(k.due_date).toDateString()===new Date().toDateString()):m.value),x=()=>{s.value=!s.value,s.value&&t.value.length===0&&w()},n=async k=>{await w()},b=(k,$)=>{if($)X(k,$);else{const A=t.value.find(E=>E.id===k);A?X(k,A.project_id):console.error("Task not found and no projectId provided")}},C=N(()=>t.value.filter(k=>k.due_date&&new Date(k.due_date)<new Date).length),T=N(()=>t.value.filter(k=>k.due_date&&new Date(k.due_date).toDateString()===new Date().toDateString()).length),_=N(()=>t.value.filter(k=>k.status==="In Progress").length),S=r(null);return f({showDueOverdueTasksAndScroll:()=>{s.value=!0,v.value="due-overdue",t.value.length===0&&w(),Y(()=>{S.value.scrollIntoView({behavior:"smooth"})})}}),B(()=>{w()}),(k,$)=>(o(),a("div",{ref_key:"assignedTasksRef",ref:S,class:"md:col-span-3 bg-white overflow-hidden shadow-xl sm:rounded-lg p-8 transition-all duration-300 hover:shadow-2xl"},[e("div",Jt,[e("div",null,[$[4]||($[4]=e("h3",{class:"text-xl font-semibold text-gray-900 mb-2"},"Your Assigned Tasks",-1)),e("div",Kt,[e("div",Xt,[e("span",Zt,p(C.value),1),$[1]||($[1]=e("span",{class:"text-sm text-gray-600"},"Overdue",-1))]),e("div",es,[e("span",ts,p(T.value),1),$[2]||($[2]=e("span",{class:"text-sm text-gray-600"},"Due Today",-1))]),e("div",ss,[e("span",os,p(_.value),1),$[3]||($[3]=e("span",{class:"text-sm text-gray-600"},"In Progress",-1))])])]),e("div",as,[s.value&&v.value==="due-overdue"?(o(),a("div",ns,[$[5]||($[5]=V(" Showing due and overdue tasks ",-1)),e("button",{onClick:$[0]||($[0]=A=>v.value="all"),class:"ml-2 text-blue-600 hover:text-blue-800 underline"}," Show all ")])):j("",!0),e("button",{onClick:x,class:"inline-flex justify-center items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-orange-600 hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 transition ease-in-out duration-150 w-48"},p(s.value?"Collapse Tasks":"View My Tasks ("+t.value.length+")"),1)])]),s.value?(o(),a("div",ls,[g.value?(o(),a("div",rs,p(g.value),1)):t.value.length===0&&!u.value?(o(),a("div",is,p(v.value==="due-overdue"?"No due or overdue tasks found.":"No assigned tasks found."),1)):(o(),a("div",ds,[u.value?(o(),a("div",us,$[6]||($[6]=[e("svg",{class:"animate-spin h-8 w-8 text-purple-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),e("span",{class:"ml-3 text-purple-700"},"Loading assigned tasks...",-1)]))):j("",!0),h(de,{tasks:c.value,"show-project-column":!0,onTaskUpdated:n,onOpenTaskDetail:b},null,8,["tasks"])]))])):j("",!0)],512))}},ms={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6"},ps={key:0,class:"mt-4"},gs={key:0,class:"text-center text-sm text-red-500 py-6"},vs={key:1,class:"text-center text-sm text-gray-500 py-6"},xs={key:2,class:"mt-3 overflow-x-auto rounded-lg border border-gray-200 shadow-sm relative"},fs={key:0,class:"absolute inset-0 bg-white bg-opacity-75 flex items-center justify-center rounded-lg z-10"},ys={class:"min-w-full divide-y divide-gray-200"},hs={class:"bg-white divide-y divide-gray-200"},bs={class:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900"},ws={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-600"},_s={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-600"},ks={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-600"},$s={class:"px-4 py-3 whitespace-nowrap text-sm"},Cs={class:"flex space-x-2"},Ts=["href"],Ss={__name:"UpcomingMeetingsCard",setup(y,{expose:f}){const l=r([]),i=r(!0),t=r(""),u=r(!1),g=r(null),s=async()=>{i.value=!0,t.value="";try{const w=await M.get("/api/user/meetings");l.value=w.data}catch(w){t.value="Failed to load upcoming meetings",console.error("Error fetching upcoming meetings:",w)}finally{i.value=!1}},d=()=>{u.value=!u.value};return f({showMeetingsAndScroll:()=>{u.value=!0,s(),Y(()=>{g.value.scrollIntoView({behavior:"smooth"})})}}),B(()=>{s()}),(w,m)=>(o(),a("div",{ref_key:"meetingsRef",ref:g,class:"md:col-span-3 bg-white overflow-hidden shadow-xl sm:rounded-lg p-8 transition-all duration-300 hover:shadow-2xl"},[e("div",ms,[m[0]||(m[0]=e("h3",{class:"text-xl font-semibold text-gray-900 mb-2 sm:mb-0"},"Your Upcoming Meetings",-1)),e("button",{onClick:d,class:"inline-flex justify-center items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-purple-600 hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 transition ease-in-out duration-150 w-48"},p(u.value?"Collapse Meetings":"View Meetings ("+l.value.length+")"),1)]),u.value?(o(),a("div",ps,[t.value?(o(),a("div",gs,p(t.value),1)):l.value.length===0&&!i.value?(o(),a("div",vs," No upcoming meetings found. You'll see meetings here when you're invited to one. ")):(o(),a("div",xs,[i.value?(o(),a("div",fs,m[1]||(m[1]=[e("svg",{class:"animate-spin h-8 w-8 text-purple-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),e("span",{class:"ml-3 text-purple-700"},"Loading meetings...",-1)]))):j("",!0),e("table",ys,[m[3]||(m[3]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Meeting"),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Project"),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date & Time"),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Organizer"),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",hs,[(o(!0),a(z,null,H(l.value,c=>{var x,n;return o(),a("tr",{key:c.id,class:"hover:bg-gray-50 transition-colors duration-100"},[e("td",bs,p(c.summary),1),e("td",ws,p(((x=c.project)==null?void 0:x.name)||"N/A"),1),e("td",_s,p(new Date(c.start_time).toLocaleString()),1),e("td",ks,p(((n=c.creator)==null?void 0:n.name)||"N/A"),1),e("td",$s,[e("div",Cs,[c.google_meet_link?(o(),a("a",{key:0,href:c.google_meet_link,target:"_blank",class:"inline-flex items-center px-3 py-1 border border-transparent text-xs leading-4 font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:border-green-700 focus:ring active:bg-green-700 transition ease-in-out duration-150"}," Join Meeting ",8,Ts)):j("",!0),c.project_id?(o(),re(Q(K),{key:1,href:`/projects/${c.project_id}`,class:"inline-flex items-center px-3 py-1 border border-transparent text-xs leading-4 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:border-indigo-700 focus:ring active:bg-indigo-700 transition ease-in-out duration-150"},{default:L(()=>m[2]||(m[2]=[V(" View Project ",-1)])),_:2,__:[2]},1032,["href"])):j("",!0)])])])}),128))])])]))])):j("",!0)],512))}},js={class:"md:col-span-3 bg-white overflow-hidden shadow-xl sm:rounded-lg p-8 transition-all duration-300 hover:shadow-2xl"},Ds={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6"},As={key:0,class:"mt-4"},Ns={class:"mb-6"},Ms={key:0,class:"text-center text-sm text-red-500 py-6"},Vs={key:1,class:"text-center text-sm text-gray-500 py-6"},Ps={key:2,class:"mt-3 overflow-x-auto rounded-lg border border-gray-200 shadow-sm relative"},zs={key:0,class:"absolute inset-0 bg-white bg-opacity-75 flex items-center justify-center rounded-lg z-10"},Us={class:"min-w-full divide-y divide-gray-200"},Es={class:"bg-white divide-y divide-gray-200"},Ls={class:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900"},Bs={class:"px-4 py-3 whitespace-nowrap text-sm"},Gs={class:"px-4 py-3 whitespace-nowrap text-sm"},Fs={class:"px-4 py-3 whitespace-nowrap text-sm"},Os={class:"px-4 py-3 whitespace-nowrap text-sm"},Is={class:"flex space-x-2"},Ws={__name:"DueTasksBreakdownCard",setup(y){const f=r({total_due_tasks:0,projects:[]}),l=r(!0),i=r(""),t=r(!1),u=r(""),g=N(()=>{if(!u.value)return f.value.projects;const v=u.value.toLowerCase();return f.value.projects.filter(w=>w.name.toLowerCase().includes(v))}),s=async()=>{l.value=!0,i.value="";try{const v=await M.get("/api/task-statistics");f.value=v.data}catch(v){i.value="Failed to load task statistics",console.error("Error fetching task statistics:",v)}finally{l.value=!1}},d=()=>{t.value=!t.value,t.value&&f.value.projects.length===0&&s()};return B(()=>{s()}),(v,w)=>(o(),a("div",js,[e("div",Ds,[w[1]||(w[1]=e("h3",{class:"text-xl font-semibold text-gray-900 mb-2 sm:mb-0"},"Due Tasks Breakdown",-1)),e("button",{onClick:d,class:"inline-flex justify-center items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition ease-in-out duration-150 w-48"},p(t.value?"Collapse Tasks":"My Task Summary"),1)]),t.value?(o(),a("div",As,[e("div",Ns,[h(O,{modelValue:u.value,"onUpdate:modelValue":w[0]||(w[0]=m=>u.value=m),placeholder:"Search tasks by project name...",class:"w-full",disabled:l.value},null,8,["modelValue","disabled"])]),i.value?(o(),a("div",Ms,p(i.value),1)):g.value.length===0&&!l.value?(o(),a("div",Vs,"No due tasks found matching your search.")):(o(),a("div",Ps,[l.value?(o(),a("div",zs,w[2]||(w[2]=[e("svg",{class:"animate-spin h-8 w-8 text-blue-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),e("span",{class:"ml-3 text-blue-700"},"Loading tasks...",-1)]))):j("",!0),e("table",Us,[w[4]||(w[4]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Project Name"),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Total Due"),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Due Today"),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Assigned To Me"),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",Es,[(o(!0),a(z,null,H(g.value,m=>(o(),a("tr",{key:m.id,class:"hover:bg-gray-50 transition-colors duration-100"},[e("td",Ls,p(m.name),1),e("td",Bs,p(m.due_tasks),1),e("td",Gs,p(m.due_today),1),e("td",Fs,p(m.assigned_to_me),1),e("td",Os,[e("div",Is,[h(Q(K),{href:`/projects/${m.id}`,class:"inline-flex items-center px-3 py-1 border border-transparent text-xs leading-4 font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:border-blue-700 focus:ring active:bg-blue-700 transition ease-in-out duration-150"},{default:L(()=>w[3]||(w[3]=[V(" View Project ",-1)])),_:2,__:[3]},1032,["href"])])])]))),128))])])]))])):j("",!0)]))}},Ys={class:"md:col-span-3 bg-white overflow-hidden shadow-xl sm:rounded-lg p-8 transition-all duration-300 hover:shadow-2xl"},Rs={__name:"NoticeBoardCard",setup(y){return(f,l)=>(o(),a("div",Ys,l[0]||(l[0]=[e("h3",{class:"text-xl font-semibold text-gray-900 mb-4"},"Notice Board",-1),e("p",{class:"text-md text-gray-600"}," No new announcements at this time. Check back later for important updates! ",-1)])))}},qs={class:"py-12"},Hs={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},Qs={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},Js={class:"md:col-span-3"},Ks={class:"md:col-span-3"},uo={__name:"Dashboard",props:{projectCount:Number},setup(y){const f=r(!1),l=r(!0),i=r(!1),t=r(!1),u=r(null),g=r(null),s=r(!1),d=r(!1),v=r(null),w=r(null),m=async()=>{try{l.value=!0,console.log("Checking Google credentials...");const P=await M.get("/api/user/google-chat/check-credentials");console.log("Google credentials response:",P.data),f.value=P.data.has_credentials,console.log("hasGoogleCredentials set to:",f.value)}catch(P){console.error("Error checking Google credentials:",P),f.value=!1}finally{l.value=!1}},c=r(null),x=r(null),n=r(0),b=r(0),C=N(()=>n.value+b.value),T=({overdue:P,dueToday:D})=>{n.value=P,b.value=D};B(()=>{m()});const _=(P,D=null)=>{u.value=P,g.value=D,f.value&&D?t.value=!0:i.value=!0},S=()=>{},G=()=>{t.value=!1},k=(P,D=null)=>{v.value=P,w.value=D,f.value&&D?d.value=!0:s.value=!0},$=()=>{s.value=!1},A=()=>{d.value=!1},E=()=>{c.value&&c.value.showDueOverdueTasksAndScroll()},te=()=>{x.value&&x.value.showMeetingsAndScroll()};return(P,D)=>(o(),a(z,null,[h(Q(ie),{title:"Dashboard"}),h(ae,null,{default:L(()=>[e("div",qs,[e("div",Hs,[h(Oe,{"overdue-tasks":n.value,"due-today-tasks":b.value,onViewTasks:E},null,8,["overdue-tasks","due-today-tasks"]),e("div",Qs,[h(ot,{"project-count":y.projectCount},null,8,["project-count"]),h(rt,{"total-due-tasks":C.value,onCardClicked:E},null,8,["total-due-tasks"]),e("div",Js,[h(Je)]),e("div",Ks,[h(Xe)]),h(ht,{"due-today-tasks-count":b.value,"overdue-tasks-count":n.value,onViewTasks:E,onViewMeetings:te},null,8,["due-today-tasks-count","overdue-tasks-count"]),h(Vt),h(cs,{ref_key:"assignedTasksCardRef",ref:c,onTaskCountsUpdated:T},null,512),h(Qt,{"project-count":y.projectCount,onOpenNotesModal:_,onOpenStandupModal:k},null,8,["project-count"]),h(Ss,{ref_key:"upcomingMeetingsCardRef",ref:x,class:"upcoming-meetings-card"},null,512),h(Ws),h(Rs)])])]),h(ue,{show:i.value,"project-id":u.value,onClose:D[0]||(D[0]=J=>i.value=!1),onNoteAdded:S},null,8,["show","project-id"]),h(ce,{show:s.value,"project-id":v.value,onClose:D[1]||(D[1]=J=>s.value=!1),onStandupAdded:$},null,8,["show","project-id"]),h(we,{show:t.value,"project-id":u.value,"space-name":g.value,onClose:D[2]||(D[2]=J=>t.value=!1),onNoteAdded:G},null,8,["show","project-id","space-name"]),h(Ve,{show:d.value,"project-id":v.value,"space-name":w.value,onClose:D[3]||(D[3]=J=>d.value=!1),onStandupAdded:A},null,8,["show","project-id","space-name"])]),_:1})],64))}};export{uo as default};
