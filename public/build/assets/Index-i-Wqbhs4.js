import{c as d,o as n,a as t,r as c,l as X,b as ft,e as u,u as p,h as vt,w as E,k as h,q as U,f,v as m,t as i,g as v,F as b,i as y,n as F,j as Y,y as J,K as Q,L as ht,H as bt,T as mt}from"./app-eI0EFZ77.js";import{r as yt,R as tt,a as _t,b as wt,_ as kt}from"./AuthenticatedLayout-DjbOQq0D.js";import{_ as Ct}from"./MultiSelectDropdown-6sWPUinI.js";import{r as et,_ as st,a as jt}from"./ChartComponent-DAFRT-1a.js";import{_ as $t}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as Mt}from"./ClockIcon-Dm8usXZS.js";import{r as Dt,a as Vt,b as Tt}from"./NoticeboardModal-BjFxzc4p.js";import{r as Et}from"./BriefcaseIcon-Bph8jzOT.js";import{r as Ut}from"./PlusIcon-DoOmaD34.js";import{r as ot}from"./ChevronDownIcon-DbOdvTqm.js";import{r as Ft}from"./CheckCircleIcon-D6Nz6q4U.js";import"./PrimaryButton-zCtcZ2bD.js";import"./Modal-1N0RsW_f.js";import"./InputLabel-BlMT5pzo.js";import"./InputError-CO91lndL.js";import"./SecondaryButton-DYaxTH7w.js";import"./index--4msDIV8.js";import"./BaseFormModal-CnsHYn1g.js";import"./TextInput-Y3a5LZcd.js";import"./SelectDropdown-C4kp13tV.js";/* empty css                                                                       */import"./debounce-C-hnF4Z3.js";import"./ApplicationLogo-C6zkIUTq.js";import"./createLucideIcon-DxsWhono.js";import"./plus-1U_S8590.js";import"./DangerButton-vEKWgJ4j.js";import"./moment-BLMuvzoS.js";import"./auto-BIBwKD9g.js";import"./chart-DUfl3Dpl.js";function Ht(H,g){return n(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"})])}function rt(H,g){return n(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m4.5 15.75 7.5-7.5 7.5 7.5"})])}function St(H,g){return n(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.72 13.829c-.24.03-.48.062-.72.096m.72-.096a42.415 42.415 0 0 1 10.56 0m-10.56 0L6.34 18m10.94-4.171c.24.03.48.062.72.096m-.72-.096L17.66 18m0 0 .229 2.523a1.125 1.125 0 0 1-1.12 1.227H7.231c-.662 0-1.18-.568-1.12-1.227L6.34 18m11.318 0h1.091A2.25 2.25 0 0 0 21 15.75V9.456c0-1.081-.768-2.015-1.837-2.175a48.055 48.055 0 0 0-1.913-.247M6.34 18H5.25A2.25 2.25 0 0 1 3 15.75V9.456c0-1.081.768-2.015 1.837-2.175a48.041 48.041 0 0 1 1.913-.247m10.5 0a48.536 48.536 0 0 0-10.5 0m10.5 0V3.375c0-.621-.504-1.125-1.125-1.125h-8.25c-.621 0-1.125.504-1.125 1.125v3.659M18 10.5h.008v.008H18V10.5Zm-3 0h.008v.008H15V10.5Z"})])}const Pt={class:"flex justify-between items-center print:hidden"},It={class:"py-8 bg-gray-50 min-h-screen print:bg-white print:py-0"},Lt={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 space-y-6"},At={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 print:hidden"},Nt={class:"grid grid-cols-1 md:grid-cols-5 gap-6 items-end"},Rt={class:"col-span-2"},Bt=["disabled"],zt={key:0,class:"grid grid-cols-2 md:grid-cols-4 gap-4"},Zt={class:"bg-white p-5 rounded-xl border border-gray-200 shadow-sm"},qt={class:"flex items-center justify-between mb-2"},Ot={class:"text-3xl font-black text-gray-900"},Gt={class:"bg-white p-5 rounded-xl border border-gray-200 shadow-sm"},Wt={class:"flex items-center justify-between mb-2"},Kt={class:"text-3xl font-black text-gray-900"},Xt={class:"bg-white p-5 rounded-xl border border-gray-200 shadow-sm"},Yt={class:"flex items-center justify-between mb-2"},Jt={class:"text-3xl font-black text-gray-900"},Qt={class:"bg-white p-5 rounded-xl border border-gray-200 shadow-sm"},te={class:"flex items-center justify-between mb-2"},ee={class:"text-3xl font-black text-red-600"},se={key:1,class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},oe={class:"lg:col-span-2 bg-white rounded-xl border border-gray-200 p-6 shadow-sm"},re={class:"text-sm font-bold text-gray-900 mb-6 flex items-center justify-between"},le={class:"flex items-center"},ae={class:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm"},ne={class:"text-sm font-bold text-gray-900 mb-6 flex items-center"},ie={key:2,class:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden"},de={class:"px-6 py-4 border-b border-gray-100 flex items-center justify-between bg-gray-50/30"},ue={class:"text-sm font-bold text-gray-900 flex items-center"},ce={class:"overflow-x-auto"},pe={class:"w-full text-sm text-left"},xe={class:"divide-y divide-gray-100"},ge={class:"px-6 py-4 font-bold text-gray-900"},fe={class:"px-6 py-4 text-right font-mono"},ve={class:"px-6 py-4 text-right"},he={class:"px-2 py-1 rounded bg-green-50 text-green-700 font-bold text-xs"},be={class:"px-6 py-4"},me={class:"w-full bg-gray-100 rounded-full h-1.5 overflow-hidden"},ye=["onClick"],_e={class:"flex items-center space-x-4"},we=["src"],ke={class:"font-bold text-gray-900"},Ce={class:"text-xs text-gray-500 uppercase tracking-widest font-bold"},je={class:"flex items-center space-x-6"},$e=["onClick"],Me={class:"text-right"},De={class:"text-2xl font-black text-indigo-600"},Ve={class:"p-0 overflow-x-auto border-t border-gray-100 rounded-b-xl relative z-20"},Te={class:"w-full text-sm text-left"},Ee={class:"bg-gray-50 text-gray-400 text-[10px] uppercase font-bold tracking-wider"},Ue={class:"px-4 py-3 text-right"},Fe={class:"flex items-center justify-end gap-1"},He={class:"divide-y divide-gray-200"},Se={class:"hover:bg-indigo-50/30 transition"},Pe=["onClick"],Ie={class:"px-4 py-4"},Le=["onClick"],Ae={class:"text-[10px] text-indigo-500 font-bold uppercase"},Ne={class:"px-4 py-4"},Re={class:"flex flex-col gap-1"},Be={class:"text-[10px] font-bold"},ze={key:0,class:"text-[8px] font-black uppercase bg-red-100 px-1 rounded"},Ze={class:"px-4 py-4 text-center"},qe={class:"inline-block relative"},Oe=["onMouseenter"],Ge={class:"px-4 py-4 text-right"},We=["onUpdate:modelValue","onChange"],Ke={class:"px-4 py-4 text-right"},Xe=["onUpdate:modelValue","onChange"],Ye={class:"px-4 py-4 text-right font-black text-gray-900"},Je={key:0,class:"bg-gray-50/50"},Qe={colspan:"7",class:"px-12 py-4"},ts={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},es={class:"text-[9px] font-bold text-gray-400 uppercase"},ss={class:"text-[11px] font-mono text-gray-600"},os={class:"text-xs font-black text-indigo-600"},rs={key:1,class:"text-xs text-gray-400 italic"},ls={key:0,class:"fixed inset-0 z-[100] flex items-center justify-center p-4"},as={class:"relative bg-white rounded-2xl shadow-2xl w-full max-w-lg overflow-hidden transition-all transform scale-100"},ns={class:"p-6 border-b border-gray-100 flex justify-between items-center"},is={class:"text-sm text-gray-500"},ds={class:"font-bold text-indigo-600"},us=["value"],cs={class:"grid grid-cols-2 gap-4"},ps={class:"mb-3 font-black border-b border-slate-700 pb-2 uppercase tracking-tighter text-indigo-300 flex items-center justify-between"},xs={class:"text-[9px] bg-slate-800 px-2 py-0.5 rounded text-slate-400"},gs={class:"max-h-60 overflow-y-auto space-y-2 custom-scrollbar pr-1"},fs={class:"shrink-0 mt-0.5 text-xs"},vs={__name:"Index",setup(H){const g=c([]),k=c({}),Z=c([]),q=c([]),C=c(!1),S=c([]),P=c(""),I=c(""),_=c({}),j=c({}),$=c(!1),x=c({user_id:null,user_name:"",name:"",project_id:"",hours:"",date:""}),M=c(!1),L=c(null),D=c(null),O=c([]),A=c(!1),V=c(null),N=c({top:0,left:0}),R=c(!1),lt=(o,e)=>{var r;if(!((r=o.subtasks)!=null&&r.length))return;const s=e.currentTarget.getBoundingClientRect();V.value=o,N.value={top:s.top+window.scrollY,left:s.left+s.width/2+window.scrollX},R.value=!0},at=()=>{R.value=!1},nt=o=>{_.value[o]=!_.value[o]},it=o=>{j.value[o]=!j.value[o]},dt=async o=>{if(!(!o||!o.task_id)){if(L.value=o.task_id,D.value=o.project_id||0,D.value)try{const e=await window.axios.get(`/api/projects/${D.value}/sections/clients-users`);O.value=e.data.users||[]}catch(e){console.error("Failed to fetch project users",e)}M.value=!0}},ut=o=>{x.value={user_id:o.user_id,user_name:o.user_name,name:"",project_id:"",hours:"",date:new Date().toISOString().split("T")[0]},$.value=!0},B=()=>{$.value=!1},ct=async()=>{if(!(!x.value.name||!x.value.hours))try{await window.axios.post("/api/tasks/manual-effort",{name:x.value.name,assigned_to_user_id:x.value.user_id,project_id:x.value.project_id||null,manual_effort_override:parseFloat(x.value.hours),date:x.value.date}),$.value=!1,z()}catch(o){console.error("Failed to create manual entry",o)}},pt=o=>{var e;for(let s of g.value){const r=s.tasks.findIndex(l=>l.task_id===o.id);if(r!==-1){const l=s.tasks[r];if(l.task_name=o.name,l.effort=o.effort,l.priority=o.priority,l.status=((e=o.status)==null?void 0:e.value)||o.status,l.due_date=o.due_date,l.subtasks=o.subtasks||[],l.subtasks.length>0){const a=l.subtasks.length,w=l.subtasks.filter(gt=>gt.status==="done").length;l.checklist=`${w}/${a}`}break}}},T=X(()=>{let o=0,e=0,s=0,r=0;return g.value.forEach(l=>{o+=parseFloat(l.total_hours||0),l.tasks.forEach(a=>{e+=parseInt(a.effort||0),a.status==="Done"&&s++,a.is_late&&r++})}),{totalHours:o.toFixed(1),velocity:e,completed:s,late:r}}),G=X(()=>{const o={};return g.value.forEach(e=>{e.tasks.forEach(s=>{const r=s.due_date||"N/A";if(s.status==="Done"&&(o[r]||(o[r]={hours:0,points:0}),o[r].points+=parseInt(s.effort||0)),(s.sessions||[]).forEach(l=>{const a=(l.start||"").split(" ")[0];a&&(o[a]||(o[a]={hours:0,points:0}),o[a].hours+=parseFloat(l.duration_seconds||0)/3600)}),s.manual_effort_override&&(!s.sessions||s.sessions.length===0)){const l=s.due_date||"Manual";o[l]||(o[l]={hours:0,points:0}),o[l].hours+=parseFloat(s.manual_effort_override)}})}),Object.keys(o).sort().reverse().map(e=>{const s=o[e],r=s.hours>0?(s.points/s.hours).toFixed(1):0;return{date:e,...s,efficiency:r}})}),z=async()=>{C.value=!0;try{const o=await window.axios.get("/api/productivity/report",{params:{user_ids:S.value.join(","),date_start:P.value,date_end:I.value}});g.value=o.data.reportData.details,k.value=o.data.reportData.charts,Z.value=o.data.users,q.value=o.data.projects,g.value.length===1&&(_.value[g.value[0].user_id]=!0)}catch(o){console.error(o)}finally{C.value=!1}},W=async(o,e,s,r)=>{if(s==="manual_effort_override"){const l=r===""||r===null?null:parseFloat(r);o.manual_effort_override=l,l!==null&&!isNaN(l)?o.used_seconds=l*3600:o.used_seconds=o.total_seconds||0;let a=0;e.tasks.forEach(w=>{a+=parseFloat(w.used_seconds||0)}),e.total_seconds=a,e.total_hours=(a/3600).toFixed(2)}else o[s]=r;try{await window.axios.post(`/api/tasks/${o.task_id}/productivity-meta`,{[s]:r})}catch(l){console.error("Persistence failed",l)}},K=o=>{if(o==null)return"0h";const e=Math.floor(Math.abs(o)/3600),s=Math.floor(Math.abs(o)%3600/60);return`${e}h ${s}m`};ft(()=>z());const xt=()=>window.print();return(o,e)=>(n(),d(b,null,[u(p(vt),{title:"Productivity Dashboard"}),u(kt,null,{header:E(()=>[t("div",Pt,[e[12]||(e[12]=t("h2",{class:"font-bold text-2xl text-gray-900 tracking-tight"},"Productivity Dashboard",-1)),t("button",{onClick:xt,class:"flex items-center px-4 py-2 bg-white border border-gray-300 rounded-lg text-sm font-semibold text-gray-700 hover:bg-gray-50 shadow-sm transition"},[u(p(St),{class:"h-4 w-4 mr-2"}),e[11]||(e[11]=v(" Export PDF ",-1))])])]),default:E(()=>[t("div",It,[t("div",Lt,[t("div",At,[t("div",Nt,[t("div",Rt,[e[13]||(e[13]=t("label",{class:"text-xs font-bold text-gray-500 uppercase mb-2 block"},"Team Members",-1)),u(Ct,{modelValue:S.value,"onUpdate:modelValue":e[0]||(e[0]=s=>S.value=s),options:Z.value,"is-multi":!0,placeholder:"Search team members..."},null,8,["modelValue","options"])]),t("div",null,[e[14]||(e[14]=t("label",{class:"text-xs font-bold text-gray-500 uppercase mb-2 block"},"Range Start",-1)),f(t("input",{type:"date","onUpdate:modelValue":e[1]||(e[1]=s=>P.value=s),class:"w-full rounded-lg border-gray-300 text-sm focus:ring-indigo-500"},null,512),[[m,P.value]])]),t("div",null,[e[15]||(e[15]=t("label",{class:"text-xs font-bold text-gray-500 uppercase mb-2 block"},"Range End",-1)),f(t("input",{type:"date","onUpdate:modelValue":e[2]||(e[2]=s=>I.value=s),class:"w-full rounded-lg border-gray-300 text-sm focus:ring-indigo-500"},null,512),[[m,I.value]])]),t("button",{onClick:z,disabled:C.value,class:"w-full bg-indigo-600 text-white font-bold py-2.5 rounded-lg hover:bg-indigo-700 transition disabled:opacity-50"},i(C.value?"Generating...":"Refresh Report"),9,Bt)])]),g.value.length?(n(),d("div",zt,[t("div",Zt,[t("div",qt,[u(p(Mt),{class:"h-6 w-6 text-indigo-500"}),e[16]||(e[16]=t("span",{class:"text-xs font-bold text-gray-400"},"Total Hours",-1))]),t("div",Ot,i(T.value.totalHours)+"h",1)]),t("div",Gt,[t("div",Wt,[u(p(et),{class:"h-6 w-6 text-green-500"}),e[17]||(e[17]=t("span",{class:"text-xs font-bold text-gray-400"},"Total Velocity",-1))]),t("div",Kt,i(T.value.velocity)+" pts",1)]),t("div",Xt,[t("div",Yt,[u(p(Dt),{class:"h-6 w-6 text-blue-500"}),e[18]||(e[18]=t("span",{class:"text-xs font-bold text-gray-400"},"Tasks Completed",-1))]),t("div",Jt,i(T.value.completed),1)]),t("div",Qt,[t("div",te,[u(p(Vt),{class:"h-6 w-6 text-red-500"}),e[19]||(e[19]=t("span",{class:"text-xs font-bold text-gray-400"},"Overdue Items",-1))]),t("div",ee,i(T.value.late),1)])])):h("",!0),k.value.daily_trend?(n(),d("div",se,[t("div",oe,[t("h3",re,[t("div",le,[u(p(et),{class:"h-4 w-4 mr-2 text-indigo-600"}),e[20]||(e[20]=v(" Activity vs Output Trend ",-1))]),e[21]||(e[21]=t("div",{class:"flex gap-4 text-[10px] font-bold uppercase tracking-wider"},[t("span",{class:"flex items-center gap-1"},[t("span",{class:"w-2 h-2 rounded-full bg-indigo-500"}),v(" Hours")]),t("span",{class:"flex items-center gap-1"},[t("span",{class:"w-2 h-2 rounded-full bg-green-500"}),v(" Points")])],-1))]),u(st,{data:k.value.daily_trend,type:"line",height:"250"},null,8,["data"])]),t("div",ae,[t("h3",ne,[u(p(Et),{class:"h-4 w-4 mr-2 text-green-600"}),e[22]||(e[22]=v(" Project Load ",-1))]),u(st,{data:k.value.project_dist,type:"pie",height:"250"},null,8,["data"])])])):h("",!0),G.value.length?(n(),d("div",ie,[t("div",de,[t("h3",ue,[u(p(Ht),{class:"h-4 w-4 mr-2 text-indigo-600"}),e[23]||(e[23]=v(" Daily Productivity Breakdown ",-1))])]),t("div",ce,[t("table",pe,[e[24]||(e[24]=t("thead",{class:"bg-gray-50/50 text-[10px] uppercase font-bold text-gray-500 tracking-wider"},[t("tr",null,[t("th",{class:"px-6 py-3"},"Date"),t("th",{class:"px-6 py-3 text-right"},"Hours Logged"),t("th",{class:"px-6 py-3 text-right"},"Points Done"),t("th",{class:"px-6 py-3 text-right"},"Efficiency (Pts/Hr)"),t("th",{class:"px-6 py-3 w-1/3"},"Velocity Meter")])],-1)),t("tbody",xe,[(n(!0),d(b,null,y(G.value,s=>(n(),d("tr",{key:s.date,class:"hover:bg-gray-50/50"},[t("td",ge,i(s.date),1),t("td",fe,i(s.hours.toFixed(1))+"h",1),t("td",ve,[t("span",he,i(s.points)+" pts",1)]),t("td",{class:F(["px-6 py-4 text-right font-black",s.efficiency>2?"text-green-600":"text-gray-500"])},i(s.efficiency),3),t("td",be,[t("div",me,[t("div",{class:"bg-indigo-500 h-full rounded-full transition-all duration-500",style:Y({width:Math.min(s.points*10,100)+"%"})},null,4)])])]))),128))])])])])):h("",!0),(n(!0),d(b,null,y(g.value,s=>(n(),d("div",{key:s.user_id,class:"bg-white rounded-xl border border-gray-200 shadow-sm"},[t("div",{onClick:r=>nt(s.user_id),class:"p-6 flex items-center justify-between bg-gray-50/50 cursor-pointer hover:bg-gray-100 transition print:cursor-default rounded-t-xl relative z-10"},[t("div",_e,[t("img",{src:s.avatar,class:"h-12 w-12 rounded-full border-2 border-white shadow-sm"},null,8,we),t("div",null,[t("h4",ke,i(s.user_name),1),t("p",Ce,i(s.tasks.length)+" Tasks Managed",1)])]),t("div",je,[t("button",{onClick:J(r=>ut(s),["stop"]),class:"p-2 rounded-full hover:bg-white text-gray-400 hover:text-indigo-600 transition print:hidden",title:"Add Manual Activity"},[u(p(Ut),{class:"h-5 w-5"})],8,$e),t("div",Me,[t("div",De,i(s.total_hours)+" hrs",1),e[25]||(e[25]=t("p",{class:"text-[10px] text-gray-400 font-bold uppercase"},"Total Charged",-1))]),(n(),U(Q(_.value[s.user_id]?p(rt):p(ot)),{class:"h-5 w-5 text-gray-400 print:hidden"}))])],8,ye),f(t("div",Ve,[t("table",Te,[t("thead",Ee,[t("tr",null,[e[27]||(e[27]=t("th",{class:"px-4 py-3 w-8"},null,-1)),e[28]||(e[28]=t("th",{class:"px-4 py-3"},"Task Detail",-1)),e[29]||(e[29]=t("th",{class:"px-4 py-3"},"Status / Due",-1)),e[30]||(e[30]=t("th",{class:"px-4 py-3 text-center"},"Checklist",-1)),t("th",Ue,[t("div",Fe,[e[26]||(e[26]=v(" Effort ",-1)),u(p(yt),{class:"h-3 w-3 cursor-pointer",onClick:e[3]||(e[3]=r=>A.value=!0)})])]),e[31]||(e[31]=t("th",{class:"px-4 py-3 text-right"},"Manual (Hrs)",-1)),e[32]||(e[32]=t("th",{class:"px-4 py-3 text-right"},"Total Time",-1))])]),t("tbody",He,[(n(!0),d(b,null,y(s.tasks,r=>{var l;return n(),d(b,{key:r.task_id},[t("tr",Se,[t("td",{class:"px-4 py-4 cursor-pointer text-gray-300 hover:text-indigo-600",onClick:a=>it(r.task_id)},[(n(),U(Q(j.value[r.task_id]?p(rt):p(ot)),{class:"h-4 w-4"}))],8,Pe),t("td",Ie,[t("div",{onClick:a=>dt(r),class:"font-bold text-gray-900 mb-0.5 cursor-pointer hover:text-indigo-600 hover:underline transition print:no-underline"},i(r.task_name),9,Le),t("div",Ae,i(r.project_name),1)]),t("td",Ne,[t("div",Re,[t("span",{class:F([{"bg-green-100 text-green-700":r.status==="Done","bg-yellow-100 text-yellow-700":r.status==="In Progress","bg-gray-100 text-gray-600":r.status==="To Do"},"px-2 py-0.5 rounded text-[9px] font-black uppercase w-fit"])},i(r.status),3),t("div",{class:F(["flex items-center gap-1",r.is_late?"text-red-500":"text-gray-400"])},[u(p(jt),{class:"h-3 w-3"}),t("span",Be,i(r.due_date||"No Date"),1),r.is_late?(n(),d("span",ze,"Late")):h("",!0)],2)])]),t("td",Ze,[t("div",qe,[t("span",{class:"inline-flex items-center px-2 py-1 rounded-full text-[10px] font-bold bg-gray-100 text-gray-600 cursor-pointer hover:bg-gray-200 transition",onMouseenter:a=>lt(r,a),onMouseleave:at},[u(p(Ft),{class:"h-3 w-3 mr-1"}),v(" "+i(r.checklist||"0/0"),1)],40,Oe)])]),t("td",Ge,[f(t("input",{type:"number","onUpdate:modelValue":a=>r.effort=a,onChange:a=>W(r,s,"effort",r.effort),class:"w-16 text-right border-0 bg-transparent focus:ring-1 focus:ring-indigo-200 rounded text-xs font-bold"},null,40,We),[[m,r.effort]])]),t("td",Ke,[f(t("input",{type:"number",step:"0.5","onUpdate:modelValue":a=>r.manual_effort_override=a,onChange:a=>W(r,s,"manual_effort_override",r.manual_effort_override),class:"w-16 text-right border-0 bg-transparent focus:ring-1 focus:ring-indigo-200 rounded text-xs font-bold"},null,40,Xe),[[m,r.manual_effort_override]])]),t("td",Ye,i(K(r.used_seconds)),1)]),j.value[r.task_id]?(n(),d("tr",Je,[t("td",Qe,[e[33]||(e[33]=t("div",{class:"text-[10px] font-black text-gray-400 uppercase mb-3 tracking-widest"},"Activity Session Logs",-1)),(l=r.sessions)!=null&&l.length?(n(),d("div",ts,[(n(!0),d(b,null,y(r.sessions,(a,w)=>(n(),d("div",{key:w,class:"bg-white p-3 rounded-lg border border-gray-100 shadow-sm flex items-center justify-between"},[t("div",null,[t("div",es,i(a.type==="ongoing"?"Running":"Recorded"),1),t("div",ss,i((a.start||"").split(" ")[1])+" - "+i(a.end==="Now"?"Now":(a.end||"").split(" ")[1]),1)]),t("div",os,i(K(a.duration_seconds)),1)]))),128))])):(n(),d("div",rs,"No activity logs tracked for this specific period."))])])):h("",!0)],64)}),128))])])],512),[[ht,_.value[s.user_id]]])]))),128))])]),u(tt,{show:A.value,"onUpdate:show":e[4]||(e[4]=s=>A.value=s),title:"Effort Estimation Guide",initialWidth:30},{content:E(()=>[u(_t)]),_:1},8,["show"]),u(tt,{show:M.value,"onUpdate:show":e[6]||(e[6]=s=>M.value=s),title:"Task Details",initialWidth:45},{content:E(()=>[L.value?(n(),U(wt,{key:0,"task-id":L.value,"project-id":D.value,"project-users":O.value,onClose:e[5]||(e[5]=s=>M.value=!1),onTaskUpdated:pt},null,8,["task-id","project-id","project-users"])):h("",!0)]),_:1},8,["show"]),$.value?(n(),d("div",ls,[t("div",{class:"absolute inset-0 bg-gray-900/60 backdrop-blur-sm",onClick:B}),t("div",as,[t("div",ns,[e[34]||(e[34]=t("h3",{class:"text-lg font-bold text-gray-900"},"Add Manual Activity",-1)),t("button",{onClick:B,class:"text-gray-400 hover:text-gray-600"},[u(p(Tt),{class:"h-6 w-6"})])]),t("form",{onSubmit:J(ct,["prevent"]),class:"p-6 space-y-4"},[t("p",is,[e[35]||(e[35]=v("Manual entry for: ",-1)),t("span",ds,i(x.value.user_name),1)]),t("div",null,[e[36]||(e[36]=t("label",{class:"block text-xs font-bold text-gray-500 uppercase mb-1"},"Task Title",-1)),f(t("input",{type:"text","onUpdate:modelValue":e[7]||(e[7]=s=>x.value.name=s),required:"",class:"w-full rounded-lg border-gray-300 focus:ring-indigo-500 text-sm",placeholder:"Work description..."},null,512),[[m,x.value.name]])]),t("div",null,[e[38]||(e[38]=t("label",{class:"block text-xs font-bold text-gray-500 uppercase mb-1"},"Project Link",-1)),f(t("select",{"onUpdate:modelValue":e[8]||(e[8]=s=>x.value.project_id=s),class:"w-full rounded-lg border-gray-300 focus:ring-indigo-500 text-sm"},[e[37]||(e[37]=t("option",{value:""},"General / Internal",-1)),(n(!0),d(b,null,y(q.value,s=>(n(),d("option",{key:s.value,value:s.value},i(s.label),9,us))),128))],512),[[bt,x.value.project_id]])]),t("div",cs,[t("div",null,[e[39]||(e[39]=t("label",{class:"block text-xs font-bold text-gray-500 uppercase mb-1"},"Date",-1)),f(t("input",{type:"date","onUpdate:modelValue":e[9]||(e[9]=s=>x.value.date=s),required:"",class:"w-full rounded-lg border-gray-300 focus:ring-indigo-500 text-sm"},null,512),[[m,x.value.date]])]),t("div",null,[e[40]||(e[40]=t("label",{class:"block text-xs font-bold text-gray-500 uppercase mb-1"},"Hours Logged",-1)),f(t("input",{type:"number",step:"0.1","onUpdate:modelValue":e[10]||(e[10]=s=>x.value.hours=s),required:"",class:"w-full rounded-lg border-gray-300 focus:ring-indigo-500 text-sm",placeholder:"e.g. 1.5"},null,512),[[m,x.value.hours]])])]),t("div",{class:"pt-4 flex gap-3"},[e[41]||(e[41]=t("button",{type:"submit",class:"flex-1 bg-indigo-600 text-white font-bold py-2.5 rounded-xl hover:bg-indigo-700 transition"},"Save Log",-1)),t("button",{type:"button",onClick:B,class:"px-6 py-2.5 border border-gray-200 text-gray-600 font-bold rounded-xl hover:bg-gray-50 transition"},"Cancel")])],32)])])):h("",!0),(n(),U(mt,{to:"body"},[R.value&&V.value?(n(),d("div",{key:0,class:"fixed z-[9999] w-64 bg-slate-900 text-white text-[11px] rounded-xl shadow-2xl p-4 border border-slate-700 pointer-events-none",style:Y({top:N.value.top-10+"px",left:N.value.left+"px",transform:"translate(-50%, -100%)"})},[t("div",ps,[e[42]||(e[42]=t("span",null,"Activity Checklist",-1)),t("span",xs,i(V.value.checklist),1)]),t("div",gs,[(n(!0),d(b,null,y(V.value.subtasks,(s,r)=>(n(),d("div",{key:r,class:"flex items-start gap-3 text-left"},[t("span",fs,i(s.status==="done"?"✅":"⬜"),1),t("span",{class:F(["leading-snug",{"text-slate-400 line-through":s.status==="done"}])},i(s.name),3)]))),128))]),e[43]||(e[43]=t("div",{class:"absolute top-full left-1/2 -translate-x-1/2 border-8 border-transparent border-t-slate-900"},null,-1))],4)):h("",!0)]))]),_:1})],64))}},Os=$t(vs,[["__scopeId","data-v-118cd077"]]);export{Os as default};
