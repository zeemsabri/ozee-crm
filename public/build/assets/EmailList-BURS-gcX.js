import{h as k}from"./moment-BLMuvzoS.js";import{r as P,a as C}from"./PaperAirplaneIcon-CLJIwg6Y.js";import{a as r,o as s,i as h,b as t,t as i,F as g,l as v,j as d,g as A,S as N,u as x}from"./app-C2DlCbPA.js";const j={class:"p-6"},B={key:0,class:"text-center py-8"},S={key:1,class:"text-center py-8 text-red-500"},_={key:2,class:"text-center py-8 text-gray-500"},$={key:3,class:"overflow-x-auto shadow rounded-lg"},z={class:"min-w-full divide-y divide-gray-200"},L={class:"bg-white divide-y divide-gray-200"},M=["onClick"],Y={class:"px-4 py-3 text-sm font-medium text-gray-900"},D={class:"flex items-center space-x-2"},E={class:"px-4 py-3 text-sm text-gray-500"},F={class:"px-4 py-3 text-sm"},R={key:1,class:"text-gray-500"},U={class:"px-4 py-3 text-sm text-gray-500"},V={class:"px-4 py-3 text-sm text-gray-500"},O={class:"px-4 py-3 text-sm text-gray-500"},T={class:"px-4 py-3 text-sm"},q={class:"px-4 py-3 text-sm text-gray-500"},G={key:4,class:"mt-4 flex justify-center"},H={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination"},I=["disabled"],J=["onClick"],K={key:1,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700"},Q=["disabled"],et={__name:"EmailList",props:{emails:{type:Array,default:()=>[]},loading:Boolean,error:String,pagination:Object},emits:["view-email","change-page","refresh","show-notification"],setup(a,{emit:f}){const u=f,l=o=>{u("change-page",o)},w=o=>!(o.type==="received"&&o.status==="pending_approval_received"&&!o.can_approve),b=()=>{u("show-notification",{message:"You do not have permission to view this email. Please contact the project administrator for assistance.",type:"warning"})};return(o,n)=>(s(),r("div",j,[a.loading?(s(),r("div",B,n[2]||(n[2]=[t("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-500 mx-auto"},null,-1),t("p",{class:"mt-2 text-sm text-gray-500"},"Loading emails...",-1)]))):a.error?(s(),r("div",S,i(a.error),1)):a.emails.length===0?(s(),r("div",_,n[3]||(n[3]=[t("p",null,"No emails found.",-1)]))):(s(),r("div",$,[t("table",z,[n[4]||(n[4]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Subject"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Type"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Read Status"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Sender"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Approved By"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Project"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date")])],-1)),t("tbody",L,[(s(!0),r(g,null,v(a.emails,e=>{var c,p,y,m;return s(),r("tr",{key:e.id,onClick:W=>w(e)?o.$emit("view-email",e):b(),class:"hover:bg-gray-50 cursor-pointer"},[t("td",Y,[t("div",D,[(s(),A(N(e.type==="sent"?x(P):x(C)),{class:"h-4 w-4"})),t("span",null,i(e.subject),1)])]),t("td",E,i(e.type),1),t("td",F,[e.type==="sent"?(s(),r("span",{key:0,class:d({"text-green-600":e.read_at,"text-red-600":!e.read_at})},i(e.read_at?"Read":"Unread"),3)):(s(),r("span",R," N/A "))]),t("td",U,i(((c=e.sender)==null?void 0:c.name)||"N/A"),1),t("td",V,i(((p=e.approver)==null?void 0:p.name)||"N/A"),1),t("td",O,i(((m=(y=e.conversation)==null?void 0:y.project)==null?void 0:m.name)||"N/A"),1),t("td",T,[t("span",{class:d({"px-2 py-1 rounded-full text-xs font-medium":!0,"bg-green-100 text-green-800":e.status==="sent","bg-yellow-100 text-yellow-800":e.status==="pending_approval"||e.status==="pending_approval_received","bg-blue-100 text-blue-800":e.status==="received"})},i(e.status?e.status.replace(/_/g," ").toUpperCase():"N/A"),3)]),t("td",q,i(e.created_at?x(k)(e.created_at).format("MMM D, YYYY h:mm A"):"N/A"),1)],8,M)}),128))])])])),a.pagination.lastPage>1?(s(),r("div",G,[t("nav",H,[t("button",{onClick:n[0]||(n[0]=e=>l(a.pagination.currentPage-1)),disabled:a.pagination.currentPage===1,class:d([a.pagination.currentPage===1?"cursor-not-allowed opacity-50":"hover:bg-gray-50","relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500"])},n[5]||(n[5]=[t("span",{class:"sr-only"},"Previous",-1),t("svg",{class:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[t("path",{"fill-rule":"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)]),10,I),(s(!0),r(g,null,v(a.pagination.lastPage,e=>(s(),r(g,{key:e},[e===1||e===a.pagination.lastPage||e>=a.pagination.currentPage-1&&e<=a.pagination.currentPage+1?(s(),r("button",{key:0,onClick:c=>l(e),class:d([e===a.pagination.currentPage?"z-10 bg-indigo-50 border-indigo-500 text-indigo-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50","relative inline-flex items-center px-4 py-2 border text-sm font-medium"])},i(e),11,J)):e===2&&a.pagination.currentPage>3||e===a.pagination.lastPage-1&&a.pagination.currentPage<a.pagination.lastPage-2?(s(),r("span",K," ... ")):h("",!0)],64))),128)),t("button",{onClick:n[1]||(n[1]=e=>l(a.pagination.currentPage+1)),disabled:a.pagination.currentPage===a.pagination.lastPage,class:d([a.pagination.currentPage===a.pagination.lastPage?"cursor-not-allowed opacity-50":"hover:bg-gray-50","relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500"])},n[6]||(n[6]=[t("span",{class:"sr-only"},"Next",-1),t("svg",{class:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[t("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1)]),10,Q)])])):h("",!0)]))}};export{et as default};
