import{B as Ae,l as Zt,T as Gt,m as Kt,n as Jt,o as Xt,j as Qt,q as es,_ as ts,t as ss}from"./AuthenticatedLayout-TjDPt_9V.js";import{i as r,o as i,b as e,ao as Ee,e as p,g as x,ap as Xe,a as z,A as le,m as Z,t as h,c as se,aq as ct,X as mt,p as ee,D as fe,F as J,j as te,T as ze,ar as Q,H as _t,S as qe,as,d as xe,r as b,z as Te,w as ce,s as N,B as _e,f as he,k as ke,v as Ze,h as H,G as ls,l as vt,at as pt,Z as xt,ae as is,$ as ns,_ as os,Q as kt,R as Qe,a8 as Oe,x as ht,P as rs,an as ds,a0 as us,al as cs,y as ms,ak as vs,O as ps,a1 as hs}from"./app-Bgd6iDAB.js";import{c as me,a as Ve,d as Be,f as je,b as gs,_ as fs}from"./ProjectForm-CSIh0mZR.js";import{_ as $e}from"./Modal-CD4V3PzR.js";import{P as ge}from"./PrimaryButton-kIXwQJMs.js";import{b as Dt,_ as Ct,a as Tt}from"./TaskList-CFDkBn3T.js";import{h as oe}from"./moment-BLMuvzoS.js";import{_ as K}from"./InputLabel-DQe11bRh.js";import{_ as pe}from"./TextInput-BVsxDbiC.js";import{_ as re}from"./InputError-CJ8kbWI8.js";import{O as et,b as ys,u as ws,_ as bs,E as _s,a as xs}from"./ComposeEmailModal-_J4aXrZ0.js";import{S as ye}from"./SelectDropdown-CRu9ReRj.js";import{_ as Ie}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as we}from"./SecondaryButton-CkynaBuf.js";import{r as ks,_ as Ds}from"./EmailList-DzPzQ505.js";import{_ as Cs}from"./EmailEditor-CAf5Vp4j.js";import"./Checkbox-CSPke42J.js";import"./ApplicationLogo-5PFqNgpE.js";import"./DangerButton-C46C-kxq.js";import"./ProjectTypeInput-Cj_Sq7Gf.js";function Ts(a,t){return i(),r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 1 0 0-16 8 8 0 0 0 0 16Zm3.857-9.809a.75.75 0 0 0-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 1 0-1.06 1.061l2.5 2.5a.75.75 0 0 0 1.137-.089l4-5.5Z","clip-rule":"evenodd"})])}function Ms(a,t){return i(),r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M5.22 8.22a.75.75 0 0 1 1.06 0L10 11.94l3.72-3.72a.75.75 0 1 1 1.06 1.06l-4.25 4.25a.75.75 0 0 1-1.06 0L5.22 9.28a.75.75 0 0 1 0-1.06Z","clip-rule":"evenodd"})])}function Es(a,t){return i(),r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M11.78 5.22a.75.75 0 0 1 0 1.06L8.06 10l3.72 3.72a.75.75 0 1 1-1.06 1.06l-4.25-4.25a.75.75 0 0 1 0-1.06l4.25-4.25a.75.75 0 0 1 1.06 0Z","clip-rule":"evenodd"})])}function js(a,t){return i(),r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M8.22 5.22a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 0 1 0 1.06l-4.25 4.25a.75.75 0 0 1-1.06-1.06L11.94 10 8.22 6.28a.75.75 0 0 1 0-1.06Z","clip-rule":"evenodd"})])}function $s(a,t){return i(),r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M9.47 6.47a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 1 1-1.06 1.06L10 8.06l-3.72 3.72a.75.75 0 0 1-1.06-1.06l4.25-4.25Z","clip-rule":"evenodd"})])}function Ss(a,t){return i(),r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{d:"M10.75 10.818v2.614A3.13 3.13 0 0 0 11.888 13c.482-.315.612-.648.612-.875 0-.227-.13-.56-.612-.875a3.13 3.13 0 0 0-1.138-.432ZM8.33 8.62c.053.055.115.11.184.164.208.16.46.284.736.363V6.603a2.45 2.45 0 0 0-.35.13c-.14.065-.27.143-.386.233-.377.292-.514.627-.514.909 0 .184.058.39.202.592.037.051.08.102.128.152Z"}),e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 1 1-16 0 8 8 0 0 1 16 0Zm-8-6a.75.75 0 0 1 .75.75v.316a3.78 3.78 0 0 1 1.653.713c.426.33.744.74.925 1.2a.75.75 0 0 1-1.395.55 1.35 1.35 0 0 0-.447-.563 2.187 2.187 0 0 0-.736-.363V9.3c.698.093 1.383.32 1.959.696.787.514 1.29 1.27 1.29 2.13 0 .86-.504 1.616-1.29 2.13-.576.377-1.261.603-1.96.696v.299a.75.75 0 1 1-1.5 0v-.3c-.697-.092-1.382-.318-1.958-.695-.482-.315-.857-.717-1.078-1.188a.75.75 0 1 1 1.359-.636c.08.173.245.376.54.569.313.205.706.353 1.138.432v-2.748a3.782 3.782 0 0 1-1.653-.713C6.9 9.433 6.5 8.681 6.5 7.875c0-.805.4-1.558 1.097-2.096a3.78 3.78 0 0 1 1.653-.713V4.75A.75.75 0 0 1 10 4Z","clip-rule":"evenodd"})])}function gt(a,t){return i(),r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{d:"M3 4a2 2 0 0 0-2 2v1.161l8.441 4.221a1.25 1.25 0 0 0 1.118 0L19 7.162V6a2 2 0 0 0-2-2H3Z"}),e("path",{d:"m19 8.839-7.77 3.885a2.75 2.75 0 0 1-2.46 0L1 8.839V14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8.839Z"})])}function Vs(a,t){return i(),r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{d:"M16.555 5.412a8.028 8.028 0 0 0-3.503-2.81 14.899 14.899 0 0 1 1.663 4.472 8.547 8.547 0 0 0 1.84-1.662ZM13.326 7.825a13.43 13.43 0 0 0-2.413-5.773 8.087 8.087 0 0 0-1.826 0 13.43 13.43 0 0 0-2.413 5.773A8.473 8.473 0 0 0 10 8.5c1.18 0 2.304-.24 3.326-.675ZM6.514 9.376A9.98 9.98 0 0 0 10 10c1.226 0 2.4-.22 3.486-.624a13.54 13.54 0 0 1-.351 3.759A13.54 13.54 0 0 1 10 13.5c-1.079 0-2.128-.127-3.134-.366a13.538 13.538 0 0 1-.352-3.758ZM5.285 7.074a14.9 14.9 0 0 1 1.663-4.471 8.028 8.028 0 0 0-3.503 2.81c.529.638 1.149 1.199 1.84 1.66ZM17.334 6.798a7.973 7.973 0 0 1 .614 4.115 13.47 13.47 0 0 1-3.178 1.72 15.093 15.093 0 0 0 .174-3.939 10.043 10.043 0 0 0 2.39-1.896ZM2.666 6.798a10.042 10.042 0 0 0 2.39 1.896 15.196 15.196 0 0 0 .174 3.94 13.472 13.472 0 0 1-3.178-1.72 7.973 7.973 0 0 1 .615-4.115ZM10 15c.898 0 1.778-.079 2.633-.23a13.473 13.473 0 0 1-1.72 3.178 8.099 8.099 0 0 1-1.826 0 13.47 13.47 0 0 1-1.72-3.178c.855.151 1.735.23 2.633.23ZM14.357 14.357a14.912 14.912 0 0 1-1.305 3.04 8.027 8.027 0 0 0 4.345-4.345c-.953.542-1.971.981-3.04 1.305ZM6.948 17.397a8.027 8.027 0 0 1-4.345-4.345c.953.542 1.971.981 3.04 1.305a14.912 14.912 0 0 0 1.305 3.04Z"})])}function As(a,t){return i(),r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{d:"m2.695 14.762-1.262 3.155a.5.5 0 0 0 .65.65l3.155-1.262a4 4 0 0 0 1.343-.886L17.5 5.501a2.121 2.121 0 0 0-3-3L3.58 13.419a4 4 0 0 0-.885 1.343Z"})])}function Os(a,t){return i(),r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M2 3.5A1.5 1.5 0 0 1 3.5 2h1.148a1.5 1.5 0 0 1 1.465 1.175l.716 3.223a1.5 1.5 0 0 1-1.052 1.767l-.933.267c-.41.117-.643.555-.48.95a11.542 11.542 0 0 0 6.254 6.254c.395.163.833-.07.95-.48l.267-.933a1.5 1.5 0 0 1 1.767-1.052l3.223.716A1.5 1.5 0 0 1 18 15.352V16.5a1.5 1.5 0 0 1-1.5 1.5H15c-1.149 0-2.263-.15-3.326-.43A13.022 13.022 0 0 1 2.43 8.326 13.019 13.019 0 0 1 2 5V3.5Z","clip-rule":"evenodd"})])}function Mt(a,t){return i(),r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{d:"M7 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6ZM14.5 9a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM1.615 16.428a1.224 1.224 0 0 1-.569-1.175 6.002 6.002 0 0 1 11.908 0c.058.467-.172.92-.57 1.174A9.953 9.953 0 0 1 7 18a9.953 9.953 0 0 1-5.385-1.572ZM14.5 16h-.106c.07-.297.088-.611.048-.933a7.47 7.47 0 0 0-1.588-3.755 4.502 4.502 0 0 1 5.874 2.636.818.818 0 0 1-.36.98A7.465 7.465 0 0 1 14.5 16Z"})])}function Is(a,t){return i(),r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 1 0 0-16 8 8 0 0 0 0 16ZM8.28 7.22a.75.75 0 0 0-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 1 0 1.06 1.06L10 11.06l1.72 1.72a.75.75 0 1 0 1.06-1.06L11.06 10l1.72-1.72a.75.75 0 0 0-1.06-1.06L10 8.94 8.28 7.22Z","clip-rule":"evenodd"})])}function Ls(a,t){return i(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5m-9-6h.008v.008H12v-.008ZM12 15h.008v.008H12V15Zm0 2.25h.008v.008H12v-.008ZM9.75 15h.008v.008H9.75V15Zm0 2.25h.008v.008H9.75v-.008ZM7.5 15h.008v.008H7.5V15Zm0 2.25h.008v.008H7.5v-.008Zm6.75-4.5h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V15Zm0 2.25h.008v.008h-.008v-.008Zm2.25-4.5h.008v.008H16.5v-.008Zm0 2.25h.008v.008H16.5V15Z"})])}function Ps(a,t){return i(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 0 1-.825-.242m9.345-8.334a2.126 2.126 0 0 0-.476-.095 48.64 48.64 0 0 0-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0 0 11.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155"})])}function Ns(a,t){return i(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m21 7.5-2.25-1.313M21 7.5v2.25m0-2.25-2.25 1.313M3 7.5l2.25-1.313M3 7.5l2.25 1.313M3 7.5v2.25m9 3 2.25-1.313M12 12.75l-2.25-1.313M12 12.75V15m0 6.75 2.25-1.313M12 21.75V19.5m0 2.25-2.25-1.313m0-16.875L12 2.25l2.25 1.313M21 14.25v2.25l-2.25 1.313m-13.5 0L3 16.5v-2.25"})])}function Us(a,t){return i(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 9.776c.112-.017.227-.026.344-.026h15.812c.117 0 .232.009.344.026m-16.5 0a2.25 2.25 0 0 0-1.883 2.542l.857 6a2.25 2.25 0 0 0 2.227 1.932H19.05a2.25 2.25 0 0 0 2.227-1.932l.857-6a2.25 2.25 0 0 0-1.883-2.542m-16.5 0V6A2.25 2.25 0 0 1 6 3.75h3.879a1.5 1.5 0 0 1 1.06.44l2.122 2.12a1.5 1.5 0 0 0 1.06.44H18A2.25 2.25 0 0 1 20.25 9v.776"})])}function Rs(a,t){return i(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 21a9.004 9.004 0 0 0 8.716-6.747M12 21a9.004 9.004 0 0 1-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 0 1 7.843 4.582M12 3a8.997 8.997 0 0 0-7.843 4.582m15.686 0A11.953 11.953 0 0 1 12 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0 1 21 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0 1 12 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 0 1 3 12c0-1.605.42-3.113 1.157-4.418"})])}function Fs(a,t){return i(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"})])}function Bs(a,t){return i(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"})])}function Hs(a,t){return i(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"})])}function Ws(a,t){return i(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7.217 10.907a2.25 2.25 0 1 0 0 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186 9.566-5.314m-9.566 7.5 9.566 5.314m0 0a2.25 2.25 0 1 0 3.935 2.186 2.25 2.25 0 0 0-3.935-2.186Zm0-12.814a2.25 2.25 0 1 0 3.933-2.185 2.25 2.25 0 0 0-3.933 2.185Z"})])}function Ys(a,t){return i(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"})])}var zs=Object.defineProperty,qs=(a,t,s)=>t in a?zs(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s,Ce=(a,t,s)=>qs(a,typeof t!="symbol"?t+"":t,s);const Zs=(a,t,s)=>{const n=a[t];return n?typeof n=="function"?n():Promise.resolve(n):new Promise((o,l)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(l.bind(null,new Error("Unknown variable dynamic import: "+t+(t.split("/").length!==s?". Note that variables only represent file names one level deep.":""))))})};let Ue,ft,yt,be,Re={},Se={};class Gs{constructor(t,s=!1){Ce(this,"texts",{}),Ce(this,"dateToMinutes",n=>n.getHours()*60+n.getMinutes()),be=this,this._texts=t,!s&&Date&&!Date.prototype.addDays&&this._initDatePrototypes()}_initDatePrototypes(){Date.prototype.addDays=function(t){return be.addDays(this,t)},Date.prototype.subtractDays=function(t){return be.subtractDays(this,t)},Date.prototype.addHours=function(t){return be.addHours(this,t)},Date.prototype.subtractHours=function(t){return be.subtractHours(this,t)},Date.prototype.addMinutes=function(t){return be.addMinutes(this,t)},Date.prototype.subtractMinutes=function(t){return be.subtractMinutes(this,t)},Date.prototype.getWeek=function(){return be.getWeek(this)},Date.prototype.isToday=function(){return be.isToday(this)},Date.prototype.isLeapYear=function(){return be.isLeapYear(this)},Date.prototype.format=function(t="YYYY-MM-DD"){return be.formatDate(this,t)},Date.prototype.formatTime=function(t="HH:mm"){return be.formatTime(this,t)}}removePrototypes(){delete Date.prototype.addDays,delete Date.prototype.subtractDays,delete Date.prototype.addHours,delete Date.prototype.subtractHours,delete Date.prototype.addMinutes,delete Date.prototype.subtractMinutes,delete Date.prototype.getWeek,delete Date.prototype.isToday,delete Date.prototype.isLeapYear,delete Date.prototype.format,delete Date.prototype.formatTime}updateTexts(t){this._texts=t}_todayFormatted(){return ft!==new Date().getDate()&&(Ue=new Date,ft=Ue.getDate(),yt=`${Ue.getFullYear()}-${Ue.getMonth()}-${Ue.getDate()}`),yt}addDays(t,s){const n=new Date(t.valueOf());return n.setDate(n.getDate()+s),n}subtractDays(t,s){const n=new Date(t.valueOf());return n.setDate(n.getDate()-s),n}addHours(t,s){const n=new Date(t.valueOf());return n.setHours(n.getHours()+s),n}subtractHours(t,s){const n=new Date(t.valueOf());return n.setHours(n.getHours()-s),n}addMinutes(t,s){const n=new Date(t.valueOf());return n.setMinutes(n.getMinutes()+s),n}subtractMinutes(t,s){const n=new Date(t.valueOf());return n.setMinutes(n.getMinutes()-s),n}getWeek(t){const s=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate())),n=s.getUTCDay()||7;s.setUTCDate(s.getUTCDate()+4-n);const o=new Date(Date.UTC(s.getUTCFullYear(),0,1));return Math.ceil(((s-o)/864e5+1)/7)}isToday(t){return`${t.getFullYear()}-${t.getMonth()}-${t.getDate()}`===this._todayFormatted()}isLeapYear(t){const s=t.getFullYear();return!(s%400)||s%100&&!(s%4)}getPreviousFirstDayOfWeek(t=null,s){const n=t&&new Date(t.valueOf())||new Date,o=s?7:6;return n.setDate(n.getDate()-(n.getDay()+o)%7),n}stringToDate(t){return t instanceof Date?t:(t.length===10&&(t+=" 00:00"),new Date(t.replace(/-/g,"/")))}countDays(t,s){typeof t=="string"&&(t=t.replace(/-/g,"/")),typeof s=="string"&&(s=s.replace(/-/g,"/")),t=new Date(t).setHours(0,0,0,0),s=new Date(s).setHours(0,0,1,0);const n=(new Date(s).getTimezoneOffset()-new Date(t).getTimezoneOffset())*60*1e3;return Math.ceil((s-t-n)/(24*3600*1e3))}datesInSameTimeStep(t,s,n){return Math.abs(t.getTime()-s.getTime())<=n*60*1e3}formatDate(t,s="YYYY-MM-DD",n=null){if(n||(n=this._texts),s||(s="YYYY-MM-DD"),s==="YYYY-MM-DD")return this.formatDateLite(t);Re={},Se={};const o={YYYY:()=>this._hydrateDateObject(t,n).YYYY,YY:()=>this._hydrateDateObject(t,n).YY(),M:()=>this._hydrateDateObject(t,n).M,MM:()=>this._hydrateDateObject(t,n).MM(),MMM:()=>this._hydrateDateObject(t,n).MMM(),MMMM:()=>this._hydrateDateObject(t,n).MMMM(),MMMMG:()=>this._hydrateDateObject(t,n).MMMMG(),D:()=>this._hydrateDateObject(t,n).D,DD:()=>this._hydrateDateObject(t,n).DD(),S:()=>this._hydrateDateObject(t,n).S(),d:()=>this._hydrateDateObject(t,n).d,dd:()=>this._hydrateDateObject(t,n).dd(),ddd:()=>this._hydrateDateObject(t,n).ddd(),dddd:()=>this._hydrateDateObject(t,n).dddd(),HH:()=>this._hydrateTimeObject(t,n).HH,H:()=>this._hydrateTimeObject(t,n).H,hh:()=>this._hydrateTimeObject(t,n).hh,h:()=>this._hydrateTimeObject(t,n).h,am:()=>this._hydrateTimeObject(t,n).am,AM:()=>this._hydrateTimeObject(t,n).AM,mm:()=>this._hydrateTimeObject(t,n).mm,m:()=>this._hydrateTimeObject(t,n).m};return s.replace(/(\{[a-zA-Z]+\}|[a-zA-Z]+)/g,(l,u)=>{const d=o[u.replace(/\{|\}/g,"")];return d!==void 0?d():u})}formatDateLite(t){const s=t.getMonth()+1,n=t.getDate();return`${t.getFullYear()}-${s<10?"0":""}${s}-${n<10?"0":""}${n}`}formatTime(t,s="HH:mm",n=null,o=!1){let l=!1;if(o){const[m,c,v]=[t.getHours(),t.getMinutes(),t.getSeconds()];m+c+v===141&&(l=!0)}if(t instanceof Date&&s==="HH:mm")return l?"24:00":this.formatTimeLite(t);Se={},n||(n=this._texts);const u=this._hydrateTimeObject(t,n),d=s.replace(/(\{[a-zA-Z]+\}|[a-zA-Z]+)/g,(m,c)=>{const v=u[c.replace(/\{|\}/g,"")];return v!==void 0?v:c});return l?d.replace("23:59","24:00"):d}formatTimeLite(t){const s=t.getHours(),n=t.getMinutes();return`${(s<10?"0":"")+s}:${(n<10?"0":"")+n}`}_nth(t){if(t>3&&t<21)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}}_hydrateDateObject(t,s){if(Re.D)return Re;const n=t.getFullYear(),o=t.getMonth()+1,l=t.getDate(),d=(t.getDay()-1+7)%7;return Re={YYYY:n,YY:()=>n.toString().substring(2),M:o,MM:()=>(o<10?"0":"")+o,MMM:()=>s.months[o-1].substring(0,3),MMMM:()=>s.months[o-1],MMMMG:()=>(s.monthsGenitive||s.months)[o-1],D:l,DD:()=>(l<10?"0":"")+l,S:()=>this._nth(l),d:d+1,dd:()=>s.weekDays[d][0],ddd:()=>s.weekDays[d].substr(0,3),dddd:()=>s.weekDays[d]},Re}_hydrateTimeObject(t,s){if(Se.am)return Se;let n,o;t instanceof Date?(n=t.getHours(),o=t.getMinutes()):(n=Math.floor(t/60),o=Math.floor(t%60));const l=n%12?n%12:12,u=(s||{am:"am",pm:"pm"})[n===24||n<12?"am":"pm"];return Se={H:n,h:l,HH:(n<10?"0":"")+n,hh:(l<10?"0":"")+l,am:u,AM:u.toUpperCase(),m:o,mm:(o<10?"0":"")+o},Se}}const Ks=1440;class Js{constructor(t){Ce(this,"_vuecal",null),Ce(this,"selectCell",(s=!1,n,o)=>{this._vuecal.$emit("cell-click",o?{date:n,split:o}:n),this._vuecal.clickToNavigate||s?this._vuecal.switchToNarrowerView():this._vuecal.dblclickToNavigate&&"ontouchstart"in window&&(this._vuecal.domEvents.dblTapACell.taps++,setTimeout(()=>this._vuecal.domEvents.dblTapACell.taps=0,this._vuecal.domEvents.dblTapACell.timeout),this._vuecal.domEvents.dblTapACell.taps>=2&&(this._vuecal.domEvents.dblTapACell.taps=0,this._vuecal.switchToNarrowerView(),this._vuecal.$emit("cell-dblclick",o?{date:n,split:o}:n)))}),Ce(this,"keyPressEnterCell",(s,n)=>{this._vuecal.$emit("cell-keypress-enter",n?{date:s,split:n}:s),this._vuecal.switchToNarrowerView()}),Ce(this,"getPosition",s=>{const{left:n,top:o}=this._vuecal.cellsEl.getBoundingClientRect(),{clientX:l,clientY:u}="ontouchstart"in window&&s.touches?s.touches[0]:s;return{x:l-n,y:u-o}}),Ce(this,"minutesAtCursor",s=>{let n=0,o={x:0,y:0};const{timeStep:l,timeCellHeight:u,timeFrom:d}=this._vuecal.$props;return typeof s=="number"?n=s:typeof s=="object"&&(o=this.getPosition(s),n=Math.round(o.y*l/parseInt(u)+d)),{minutes:Math.max(Math.min(n,Ks),0),cursorCoords:o}}),this._vuecal=t}}const Xs=2,Ke=1440;let de,ue,Je;class Qs{constructor(t,s){Ce(this,"_vuecal",null),Ce(this,"eventDefaults",{_eid:null,start:"",startTimeMinutes:0,end:"",endTimeMinutes:0,title:"",content:"",background:!1,allDay:!1,segments:null,repeat:null,daysCount:1,deletable:!0,deleting:!1,titleEditable:!0,resizable:!0,resizing:!1,draggable:!0,dragging:!1,draggingStatic:!1,focused:!1,class:""}),this._vuecal=t,de=s}createAnEvent(t,s,n){if(typeof t=="string"&&(t=de.stringToDate(t)),!(t instanceof Date))return!1;const o=de.dateToMinutes(t);s=s*1||Xs*60;const l=o+s,u=de.addMinutes(new Date(t),s);n.end&&(typeof n.end=="string"&&(n.end=de.stringToDate(n.end)),n.endTimeMinutes=de.dateToMinutes(n.end));const d={...this.eventDefaults,_eid:`${this._vuecal._.uid}_${this._vuecal.eventIdIncrement++}`,start:t,startTimeMinutes:o,end:u,endTimeMinutes:l,segments:null,...n};if(!(typeof this._vuecal.onEventCreate=="function"&&!this._vuecal.onEventCreate(d,()=>this.deleteAnEvent(d))))return d.startDateF!==d.endDateF&&(d.daysCount=de.countDays(d.start,d.end)),this._vuecal.mutableEvents.push(d),this._vuecal.addEventsToView([d]),this._vuecal.emitWithEvent("event-create",d),this._vuecal.$emit("event-change",{event:this._vuecal.cleanupEvent(d),originalEvent:null}),d}addEventSegment(t){t.segments||(t.segments={},t.segments[de.formatDateLite(t.start)]={start:t.start,startTimeMinutes:t.startTimeMinutes,endTimeMinutes:Ke,isFirstDay:!0,isLastDay:!1});const s=t.segments[de.formatDateLite(t.end)];s&&(s.isLastDay=!1,s.endTimeMinutes=Ke);const n=de.addDays(t.end,1),o=de.formatDateLite(n);return n.setHours(0,0,0,0),t.segments[o]={start:n,startTimeMinutes:0,endTimeMinutes:t.endTimeMinutes,isFirstDay:!1,isLastDay:!0},t.end=de.addMinutes(n,t.endTimeMinutes),t.daysCount=Object.keys(t.segments).length,o}removeEventSegment(t){let s=Object.keys(t.segments).length;if(s<=1)return de.formatDateLite(t.end);delete t.segments[de.formatDateLite(t.end)],s--;const n=de.subtractDays(t.end,1),o=de.formatDateLite(n),l=t.segments[o];return s?l&&(l.isLastDay=!0,l.endTimeMinutes=t.endTimeMinutes):t.segments=null,t.daysCount=s||1,t.end=n,o}createEventSegments(t,s,n){const o=s.getTime(),l=n.getTime();let u=t.start.getTime(),d=t.end.getTime(),m=!1,c,v,w;for(!t.end.getHours()&&!t.end.getMinutes()&&(d-=1e3),t.segments={},t.repeat?(c=o,v=Math.min(l,t.repeat.until?de.stringToDate(t.repeat.until).getTime():l)):(c=Math.max(o,u),v=Math.min(l,d));c<=v;){let _=!1;const V=de.addDays(new Date(c),1).setHours(0,0,0,0);let T,E,g,y;if(t.repeat){const C=new Date(c),R=de.formatDateLite(C);(m||t.occurrences&&t.occurrences[R])&&(m||(u=t.occurrences[R].start,w=new Date(u).setHours(0,0,0,0),d=t.occurrences[R].end),m=!0,_=!0),T=c===w,E=R===de.formatDateLite(new Date(d)),g=new Date(T?u:c),y=de.formatDateLite(g),E&&(m=!1)}else _=!0,T=c===u,E=v===d&&V>v,g=T?t.start:new Date(c),y=de.formatDateLite(T?t.start:g);_&&(t.segments[y]={start:g,startTimeMinutes:T?t.startTimeMinutes:0,endTimeMinutes:E?t.endTimeMinutes:Ke,isFirstDay:T,isLastDay:E}),c=V}return t}deleteAnEvent(t){this._vuecal.emitWithEvent("event-delete",t),this._vuecal.mutableEvents=this._vuecal.mutableEvents.filter(s=>s._eid!==t._eid),this._vuecal.view.events=this._vuecal.view.events.filter(s=>s._eid!==t._eid)}checkCellOverlappingEvents(t,s){Je=t.slice(0),ue={},t.forEach(o=>{Je.shift(),ue[o._eid]||(ue[o._eid]={overlaps:[],start:o.start,position:0}),ue[o._eid].position=0,Je.forEach(l=>{ue[l._eid]||(ue[l._eid]={overlaps:[],start:l.start,position:0});const u=this.eventInRange(l,o.start,o.end),d=s.overlapsPerTimeStep?de.datesInSameTimeStep(o.start,l.start,s.timeStep):1;if(!o.background&&!o.allDay&&!l.background&&!l.allDay&&u&&d)ue[o._eid].overlaps.push(l._eid),ue[o._eid].overlaps=[...new Set(ue[o._eid].overlaps)],ue[l._eid].overlaps.push(o._eid),ue[l._eid].overlaps=[...new Set(ue[l._eid].overlaps)],ue[l._eid].position++;else{let m,c;(m=(ue[o._eid]||{overlaps:[]}).overlaps.indexOf(l._eid))>-1&&ue[o._eid].overlaps.splice(m,1),(c=(ue[l._eid]||{overlaps:[]}).overlaps.indexOf(o._eid))>-1&&ue[l._eid].overlaps.splice(c,1),ue[l._eid].position--}})});let n=0;for(const o in ue){const l=ue[o],u=l.overlaps.map(d=>({id:d,start:ue[d].start}));u.push({id:o,start:l.start}),u.sort((d,m)=>d.start<m.start?-1:d.start>m.start?1:d.id>m.id?-1:1),l.position=u.findIndex(d=>d.id===o),n=Math.max(this.getOverlapsStreak(l,ue),n)}return[ue,n]}getOverlapsStreak(t,s={}){let n=t.overlaps.length+1,o=[];return t.overlaps.forEach(l=>{o.includes(l)||t.overlaps.filter(d=>d!==l).forEach(d=>{s[d].overlaps.includes(l)||o.push(d)})}),o=[...new Set(o)],n-=o.length,n}eventInRange(t,s,n){if(t.allDay||!this._vuecal.time){const u=new Date(t.start).setHours(0,0,0,0);return new Date(t.end).setHours(23,59,0,0)>=new Date(s).setHours(0,0,0,0)&&u<=new Date(n).setHours(0,0,0,0)}const o=t.start.getTime(),l=t.end.getTime();return o<n.getTime()&&l>s.getTime()}}const ea={class:"vuecal__flex vuecal__weekdays-headings"},ta=["onClick"],sa={class:"vuecal__flex weekday-label",grow:""},aa={class:"full"},la={class:"small"},ia={class:"xsmall"},na={key:0},oa={key:0,class:"vuecal__flex vuecal__split-days-headers",grow:""};function ra(a,t,s,n,o,l){return i(),r("div",ea,[(i(!0),r(J,null,te(l.headings,(u,d)=>(i(),r(J,{key:d},[u.hide?x("",!0):(i(),r("div",{key:0,class:ee(["vuecal__flex vuecal__heading",{today:u.today,clickable:l.cellHeadingsClickable}]),style:fe(l.weekdayCellStyles),onClick:m=>l.view.id==="week"&&l.selectCell(u.date,m),onDblclick:t[0]||(t[0]=m=>l.view.id==="week"&&l.vuecal.dblclickToNavigate&&s.switchToNarrowerView())},[p(ze,{name:`slide-fade--${s.transitionDirection}`,appear:l.vuecal.transitions},{default:z(()=>[(i(),r("div",{class:"vuecal__flex",column:"",key:l.vuecal.transitions?`${d}-${u.dayOfMonth}`:!1},[e("div",sa,[le(a.$slots,"weekday-heading",{heading:l.cleanupHeading(u),view:l.view},()=>[e("span",aa,h(u.full),1),e("span",la,h(u.small),1),e("span",ia,h(u.xsmall),1),u.dayOfMonth?(i(),r("span",na," "+h(u.dayOfMonth),1)):x("",!0)])]),l.vuecal.hasSplits&&l.vuecal.stickySplitLabels?(i(),r("div",oa,[(i(!0),r(J,null,te(l.vuecal.daySplits,(m,c)=>(i(),r("div",{class:ee(["day-split-header",m.class||!1]),key:c},[le(a.$slots,"split-label",{split:m,view:l.view},()=>[Z(h(m.label),1)])],2))),128))])):x("",!0)]))]),_:2},1032,["name","appear"])],46,ta))],64))),128))])}const Le=(a,t)=>{const s=a.__vccOpts||a;for(const[n,o]of t)s[n]=o;return s},da={inject:["vuecal","utils","view"],props:{transitionDirection:{type:String,default:"right"},weekDays:{type:Array,default:()=>[]},switchToNarrowerView:{type:Function,default:()=>{}}},methods:{selectCell(a,t){a.getTime()!==this.view.selectedDate.getTime()&&(this.view.selectedDate=a),this.utils.cell.selectCell(!1,a,t)},cleanupHeading:a=>({label:a.full,date:a.date,...a.today?{today:a.today}:{}})},computed:{headings(){if(!["month","week"].includes(this.view.id))return[];let a=!1;return this.weekDays.map((s,n)=>{const o=this.utils.date.addDays(this.view.startDate,this.vuecal.startWeekOnSunday&&this.vuecal.hideWeekends?n-1:n);return{hide:s.hide,full:s.label,small:s.short||s.label.substr(0,3),xsmall:s.short||s.label.substr(0,1),...this.view.id==="week"?{dayOfMonth:o.getDate(),date:o,today:!a&&this.utils.date.isToday(o)&&!a++}:{}}})},cellWidth(){return 100/(7-this.weekDays.reduce((a,t)=>a+t.hide,0))},weekdayCellStyles(){return{...this.vuecal.hideWeekdays.length?{width:`${this.cellWidth}%`}:{}}},cellHeadingsClickable(){return this.view.id==="week"&&(this.vuecal.clickToNavigate||this.vuecal.dblclickToNavigate)}}},Et=Le(da,[["render",ra]]),ua={class:"vuecal__header"},ca={key:0,class:"vuecal__flex vuecal__menu",role:"tablist","aria-label":"Calendar views navigation"},ma=["onDragenter","onDragleave","onClick","aria-label"],va={key:1,class:"vuecal__title-bar"},pa=["aria-label"],ha={class:"vuecal__flex vuecal__title",grow:""},ga=["aria-label"],fa={key:0,class:"vuecal__flex vuecal__split-days-headers"};function ya(a,t,s,n,o,l){const u=Ee("weekdays-headings");return i(),r("div",ua,[s.options.hideViewSelector?x("",!0):(i(),r("div",ca,[(i(!0),r(J,null,te(s.viewProps.views,(d,m)=>(i(),r(J,{key:m},[d.enabled?(i(),r("button",{key:0,class:ee(["vuecal__view-btn",{"vuecal__view-btn--active":l.view.id===m,"vuecal__view-btn--highlighted":a.highlightedControl===m}]),type:"button",onDragenter:c=>s.editEvents.drag&&l.dnd&&l.dnd.viewSelectorDragEnter(c,m,a.$data),onDragleave:c=>s.editEvents.drag&&l.dnd&&l.dnd.viewSelectorDragLeave(c,m,a.$data),onClick:c=>l.switchView(m,null,!0),"aria-label":`${d.label} view`},h(d.label),43,ma)):x("",!0)],64))),128))])),s.options.hideTitleBar?x("",!0):(i(),r("div",va,[e("button",{class:ee(["vuecal__arrow vuecal__arrow--prev",{"vuecal__arrow--highlighted":a.highlightedControl==="previous"}]),type:"button",onClick:t[0]||(t[0]=(...d)=>l.previous&&l.previous(...d)),onDragenter:t[1]||(t[1]=d=>s.editEvents.drag&&l.dnd&&l.dnd.viewSelectorDragEnter(d,"previous",a.$data)),onDragleave:t[2]||(t[2]=d=>s.editEvents.drag&&l.dnd&&l.dnd.viewSelectorDragLeave(d,"previous",a.$data)),"aria-label":`Previous ${l.view.id}`},[le(a.$slots,"arrow-prev")],42,pa),e("div",ha,[p(ze,{name:s.options.transitions?`slide-fade--${l.transitionDirection}`:""},{default:z(()=>[(i(),se(_t(l.broaderView?"button":"span"),{type:!!l.broaderView&&"button",key:`${l.view.id}${l.view.startDate.toString()}`,onClick:t[3]||(t[3]=d=>!!l.broaderView&&l.switchToBroaderView()),"aria-label":!!l.broaderView&&`Go to ${l.broaderView} view`},{default:z(()=>[le(a.$slots,"title")]),_:3},8,["type","aria-label"]))]),_:3},8,["name"])]),s.options.todayButton?(i(),r("button",{key:0,class:ee(["vuecal__today-btn",{"vuecal__today-btn--highlighted":a.highlightedControl==="today"}]),type:"button",onClick:t[4]||(t[4]=(...d)=>l.goToToday&&l.goToToday(...d)),onDragenter:t[5]||(t[5]=d=>s.editEvents.drag&&l.dnd&&l.dnd.viewSelectorDragEnter(d,"today",a.$data)),onDragleave:t[6]||(t[6]=d=>s.editEvents.drag&&l.dnd&&l.dnd.viewSelectorDragLeave(d,"today",a.$data)),"aria-label":"Today"},[le(a.$slots,"today-button")],34)):x("",!0),e("button",{class:ee(["vuecal__arrow vuecal__arrow--next",{"vuecal__arrow--highlighted":a.highlightedControl==="next"}]),type:"button",onClick:t[7]||(t[7]=(...d)=>l.next&&l.next(...d)),onDragenter:t[8]||(t[8]=d=>s.editEvents.drag&&l.dnd&&l.dnd.viewSelectorDragEnter(d,"next",a.$data)),onDragleave:t[9]||(t[9]=d=>s.editEvents.drag&&l.dnd&&l.dnd.viewSelectorDragLeave(d,"next",a.$data)),"aria-label":`Next ${l.view.id}`},[le(a.$slots,"arrow-next")],42,ga)])),s.viewProps.weekDaysInHeader?(i(),se(u,{key:2,"week-days":s.weekDays,"transition-direction":l.transitionDirection,"switch-to-narrower-view":s.switchToNarrowerView},Xe({_:2},[a.$slots["weekday-heading"]?{name:"weekday-heading",fn:z(({heading:d,view:m})=>[le(a.$slots,"weekday-heading",{heading:d,view:m})]),key:"0"}:void 0,a.$slots["split-label"]?{name:"split-label",fn:z(({split:d})=>[le(a.$slots,"split-label",{split:d,view:l.view})]),key:"1"}:void 0]),1032,["week-days","transition-direction","switch-to-narrower-view"])):x("",!0),p(ze,{name:`slide-fade--${l.transitionDirection}`},{default:z(()=>[l.showDaySplits?(i(),r("div",fa,[(i(!0),r(J,null,te(s.daySplits,(d,m)=>(i(),r("div",{class:ee(["day-split-header",d.class||!1]),key:m},[le(a.$slots,"split-label",{split:d,view:l.view.id},()=>[Z(h(d.label),1)])],2))),128))])):x("",!0)]),_:3},8,["name"])])}const wa={inject:["vuecal","previous","next","switchView","updateSelectedDate","modules","view"],components:{WeekdaysHeadings:Et},props:{options:{type:Object,default:()=>({})},editEvents:{type:Object,required:!0},hasSplits:{type:[Boolean,Number],default:!1},daySplits:{type:Array,default:()=>[]},viewProps:{type:Object,default:()=>({})},weekDays:{type:Array,default:()=>[]},switchToNarrowerView:{type:Function,default:()=>{}}},data:()=>({highlightedControl:null}),methods:{goToToday(){this.updateSelectedDate(new Date(new Date().setHours(0,0,0,0)))},switchToBroaderView(){this.transitionDirection="left",this.broaderView&&this.switchView(this.broaderView)}},computed:{transitionDirection:{get(){return this.vuecal.transitionDirection},set(a){this.vuecal.transitionDirection=a}},broaderView(){const{enabledViews:a}=this.vuecal;return a[a.indexOf(this.view.id)-1]},showDaySplits(){return this.view.id==="day"&&this.hasSplits&&this.options.stickySplitLabels&&!this.options.minSplitWidth},dnd(){return this.modules.dnd}}},ba=Le(wa,[["render",ya]]),_a=["draggable"];function xa(a,t,s,n,o,l){return i(),r("div",{class:ee(["vuecal__event",l.eventClasses]),style:fe(l.eventStyles),tabindex:"0",onFocus:t[4]||(t[4]=(...u)=>l.focusEvent&&l.focusEvent(...u)),onKeypress:t[5]||(t[5]=qe(xe((...u)=>l.onEnterKeypress&&l.onEnterKeypress(...u),["stop"]),["enter"])),onMouseenter:t[6]||(t[6]=(...u)=>l.onMouseEnter&&l.onMouseEnter(...u)),onMouseleave:t[7]||(t[7]=(...u)=>l.onMouseLeave&&l.onMouseLeave(...u)),onTouchstart:t[8]||(t[8]=xe((...u)=>l.onTouchStart&&l.onTouchStart(...u),["stop"])),onMousedown:t[9]||(t[9]=u=>l.onMouseDown(u)),onMouseup:t[10]||(t[10]=(...u)=>l.onMouseUp&&l.onMouseUp(...u)),onTouchend:t[11]||(t[11]=(...u)=>l.onMouseUp&&l.onMouseUp(...u)),onTouchmove:t[12]||(t[12]=(...u)=>l.onTouchMove&&l.onTouchMove(...u)),onDblclick:t[13]||(t[13]=(...u)=>l.onDblClick&&l.onDblClick(...u)),draggable:l.draggable,onDragstart:t[14]||(t[14]=u=>l.draggable&&l.onDragStart(u)),onDragend:t[15]||(t[15]=u=>l.draggable&&l.onDragEnd())},[l.vuecal.editEvents.delete&&s.event.deletable?(i(),r("div",{key:0,class:"vuecal__event-delete",onClick:t[0]||(t[0]=xe((...u)=>l.deleteEvent&&l.deleteEvent(...u),["stop"])),onTouchstart:t[1]||(t[1]=xe((...u)=>l.touchDeleteEvent&&l.touchDeleteEvent(...u),["stop"]))},h(l.vuecal.texts.deleteEvent),33)):x("",!0),le(a.$slots,"event",{event:s.event,view:l.view.id}),l.resizable?(i(),r("div",{key:1,class:"vuecal__event-resize-handle",contenteditable:"false",onMousedown:t[2]||(t[2]=xe((...u)=>l.onResizeHandleMouseDown&&l.onResizeHandleMouseDown(...u),["stop","prevent"])),onTouchstart:t[3]||(t[3]=xe((...u)=>l.onResizeHandleMouseDown&&l.onResizeHandleMouseDown(...u),["stop","prevent"]))},null,32)):x("",!0)],46,_a)}const ka={inject:["vuecal","utils","modules","view","domEvents","editEvents"],props:{cellFormattedDate:{type:String,default:""},event:{type:Object,default:()=>({})},cellEvents:{type:Array,default:()=>[]},overlaps:{type:Array,default:()=>[]},eventPosition:{type:Number,default:0},overlapsStreak:{type:Number,default:0},allDay:{type:Boolean,default:!1}},data:()=>({touch:{dragThreshold:30,startX:0,startY:0,dragged:!1}}),methods:{onMouseDown(a,t=!1){if("ontouchstart"in window&&!t)return!1;const{clickHoldAnEvent:s,focusAnEvent:n,resizeAnEvent:o,dragAnEvent:l}=this.domEvents;if(n._eid===this.event._eid&&s._eid===this.event._eid)return!0;this.focusEvent(),s._eid=null,this.vuecal.editEvents.delete&&this.event.deletable&&(s.timeoutId=setTimeout(()=>{!o._eid&&!l._eid&&(s._eid=this.event._eid,this.event.deleting=!0)},s.timeout))},onMouseUp(a){this.domEvents.focusAnEvent._eid===this.event._eid&&!this.touch.dragged&&(this.domEvents.focusAnEvent.mousedUp=!0),this.touch.dragged=!1},onMouseEnter(a){a.preventDefault(),this.vuecal.emitWithEvent("event-mouse-enter",this.event)},onMouseLeave(a){a.preventDefault(),this.vuecal.emitWithEvent("event-mouse-leave",this.event)},onTouchMove(a){if(typeof this.vuecal.onEventClick!="function")return;const{clientX:t,clientY:s}=a.touches[0],{startX:n,startY:o,dragThreshold:l}=this.touch;(Math.abs(t-n)>l||Math.abs(s-o)>l)&&(this.touch.dragged=!0)},onTouchStart(a){this.touch.startX=a.touches[0].clientX,this.touch.startY=a.touches[0].clientY,this.onMouseDown(a,!0)},onEnterKeypress(a){if(typeof this.vuecal.onEventClick=="function")return this.vuecal.onEventClick(this.event,a)},onDblClick(a){if(typeof this.vuecal.onEventDblclick=="function")return this.vuecal.onEventDblclick(this.event,a)},onDragStart(a){this.dnd&&this.dnd.eventDragStart(a,this.event)},onDragEnd(){this.dnd&&this.dnd.eventDragEnd(this.event)},onResizeHandleMouseDown(){this.focusEvent(),this.domEvents.dragAnEvent._eid=null,this.domEvents.resizeAnEvent=Object.assign(this.domEvents.resizeAnEvent,{_eid:this.event._eid,start:(this.segment||this.event).start,split:this.event.split||null,segment:!!this.segment&&this.utils.date.formatDateLite(this.segment.start),originalEnd:new Date((this.segment||this.event).end),originalEndTimeMinutes:this.event.endTimeMinutes}),this.event.resizing=!0},deleteEvent(a=!1){if("ontouchstart"in window&&!a)return!1;this.utils.event.deleteAnEvent(this.event)},touchDeleteEvent(a){this.deleteEvent(!0)},cancelDeleteEvent(){this.event.deleting=!1},focusEvent(){const{focusAnEvent:a}=this.domEvents,t=a._eid;if(t!==this.event._eid){if(t){const s=this.view.events.find(n=>n._eid===t);s&&(s.focused=!1)}this.vuecal.cancelDelete(),this.vuecal.emitWithEvent("event-focus",this.event),a._eid=this.event._eid,this.event.focused=!0}}},computed:{eventDimensions(){const{startTimeMinutes:a,endTimeMinutes:t}=this.segment||this.event;let s=a-this.vuecal.timeFrom;const n=Math.max(Math.round(s*this.vuecal.timeCellHeight/this.vuecal.timeStep),0);s=Math.min(t,this.vuecal.timeTo)-this.vuecal.timeFrom;const o=Math.round(s*this.vuecal.timeCellHeight/this.vuecal.timeStep),l=Math.max(o-n,5);return{top:n,height:l}},eventStyles(){if(this.event.allDay||!this.vuecal.time||!this.event.endTimeMinutes||this.view.id==="month"||this.allDay)return{};let a=100/Math.min(this.overlaps.length+1,this.overlapsStreak),t=100/(this.overlaps.length+1)*this.eventPosition;this.vuecal.minEventWidth&&a<this.vuecal.minEventWidth&&(a=this.vuecal.minEventWidth,t=(100-this.vuecal.minEventWidth)/this.overlaps.length*this.eventPosition);const{top:s,height:n}=this.eventDimensions;return{top:`${s}px`,height:`${n}px`,width:`${a}%`,left:this.event.left&&`${this.event.left}px`||`${t}%`}},eventClasses(){const{isFirstDay:a,isLastDay:t}=this.segment||{};return{[this.event.class]:!!this.event.class,"vuecal__event--focus":this.event.focused,"vuecal__event--resizing":this.event.resizing,"vuecal__event--background":this.event.background,"vuecal__event--deletable":this.event.deleting,"vuecal__event--all-day":this.event.allDay,"vuecal__event--dragging":!this.event.draggingStatic&&this.event.dragging,"vuecal__event--static":this.event.dragging&&this.event.draggingStatic,"vuecal__event--multiple-days":!!this.segment,"event-start":this.segment&&a&&!t,"event-middle":this.segment&&!a&&!t,"event-end":this.segment&&t&&!a}},segment(){return this.event.segments&&this.event.segments[this.cellFormattedDate]||null},draggable(){const{draggable:a,background:t,daysCount:s}=this.event;return this.vuecal.editEvents.drag&&a&&!t&&s===1},resizable(){const{editEvents:a,time:t}=this.vuecal;return a.resize&&this.event.resizable&&t&&!this.allDay&&(!this.segment||this.segment&&this.segment.isLastDay)&&this.view.id!=="month"},dnd(){return this.modules.dnd}}},Da=Le(ka,[["render",xa]]),Ca=["data-split","aria-label","onTouchstart","onMousedown","onDragover","onDrop"],Ta={key:0,class:"cell-time-labels"},Ma=["innerHTML"],Ea={key:2,class:"vuecal__cell-events"},ja=["title"];function $a(a,t,s,n,o,l){const u=Ee("event");return i(),se(as,{class:ee(["vuecal__cell",l.cellClasses]),name:`slide-fade--${l.transitionDirection}`,tag:"div",appear:s.options.transitions,style:fe(l.cellStyles)},{default:z(()=>[(i(!0),r(J,null,te(l.splitsCount?l.splits:1,(d,m)=>(i(),r("div",{class:ee(["vuecal__flex vuecal__cell-content",l.splitsCount&&l.splitClasses(d)]),key:s.options.transitions?`${l.view.id}-${s.data.content}-${m}`:m,"data-split":l.splitsCount?d.id:!1,column:"",tabindex:"0","aria-label":s.data.content,onFocus:t[0]||(t[0]=c=>l.onCellFocus(c)),onKeypress:t[1]||(t[1]=qe(c=>l.onCellkeyPressEnter(c),["enter"])),onTouchstart:c=>!l.isDisabled&&l.onCellTouchStart(c,l.splitsCount?d.id:null),onMousedown:c=>!l.isDisabled&&l.onCellMouseDown(c,l.splitsCount?d.id:null),onClick:t[2]||(t[2]=c=>!l.isDisabled&&l.onCellClick(c)),onDblclick:t[3]||(t[3]=c=>!l.isDisabled&&l.onCellDblClick(c)),onContextmenu:t[4]||(t[4]=c=>!l.isDisabled&&s.options.cellContextmenu&&l.onCellContextMenu(c)),onDragenter:t[5]||(t[5]=c=>!l.isDisabled&&s.editEvents.drag&&l.dnd&&l.dnd.cellDragEnter(c,a.$data,s.data.startDate)),onDragover:c=>!l.isDisabled&&s.editEvents.drag&&l.dnd&&l.dnd.cellDragOver(c,a.$data,s.data.startDate,l.splitsCount?d.id:null),onDragleave:t[6]||(t[6]=c=>!l.isDisabled&&s.editEvents.drag&&l.dnd&&l.dnd.cellDragLeave(c,a.$data,s.data.startDate)),onDrop:c=>!l.isDisabled&&s.editEvents.drag&&l.dnd&&l.dnd.cellDragDrop(c,a.$data,s.data.startDate,l.splitsCount?d.id:null)},[s.options.showTimeInCells&&s.options.time&&l.isWeekOrDayView&&!s.allDay?(i(),r("div",Ta,[(i(!0),r(J,null,te(l.vuecal.timeCells,(c,v)=>(i(),r("span",{class:"cell-time-label",key:v},h(c.label),1))),128))])):x("",!0),l.isWeekOrDayView&&!s.allDay&&l.specialHours.length?(i(!0),r(J,{key:1},te(l.specialHours,(c,v)=>(i(),r("div",{class:ee(["vuecal__special-hours",`vuecal__special-hours--day${c.day} ${c.class}`]),style:fe(`height: ${c.height}px;top: ${c.top}px`)},[c.label?(i(),r("div",{key:0,class:"special-hours-label",innerHTML:c.label},null,8,Ma)):x("",!0)],6))),256)):x("",!0),le(a.$slots,"cell-content",{events:l.events,selectCell:c=>l.selectCell(c,!0),split:l.splitsCount?d:!1}),l.eventsCount&&(l.isWeekOrDayView||l.view.id==="month"&&s.options.eventsOnMonthView)?(i(),r("div",Ea,[(i(!0),r(J,null,te(l.splitsCount?d.events:l.events,(c,v)=>(i(),se(u,{key:v,"cell-formatted-date":s.data.formattedDate,event:c,"all-day":s.allDay,"cell-events":l.splitsCount?d.events:l.events,overlaps:((l.splitsCount?d.overlaps[c._eid]:a.cellOverlaps[c._eid])||[]).overlaps,"event-position":((l.splitsCount?d.overlaps[c._eid]:a.cellOverlaps[c._eid])||[]).position,"overlaps-streak":l.splitsCount?d.overlapsStreak:a.cellOverlapsStreak},{event:z(({event:w,view:_})=>[le(a.$slots,"event",{view:_,event:w})]),_:2},1032,["cell-formatted-date","event","all-day","cell-events","overlaps","event-position","overlaps-streak"]))),128))])):x("",!0)],42,Ca))),128)),l.timelineVisible?(i(),r("div",{class:"vuecal__now-line",style:fe(`top: ${l.todaysTimePosition}px`),key:s.options.transitions?`${l.view.id}-now-line`:"now-line",title:l.utils.date.formatTime(l.vuecal.now)},null,12,ja)):x("",!0)]),_:3},8,["class","name","appear","style"])}const Sa={inject:["vuecal","utils","modules","view","domEvents"],components:{Event:Da},props:{options:{type:Object,default:()=>({})},editEvents:{type:Object,required:!0},data:{type:Object,required:!0},cellSplits:{type:Array,default:()=>[]},minTimestamp:{type:[Number,null],default:null},maxTimestamp:{type:[Number,null],default:null},cellWidth:{type:[Number,Boolean],default:!1},allDay:{type:Boolean,default:!1}},data:()=>({cellOverlaps:{},cellOverlapsStreak:1,timeAtCursor:null,highlighted:!1,highlightedSplit:null}),methods:{getSplitAtCursor({target:a}){let s=a.classList.contains("vuecal__cell-split")?a:this.vuecal.findAncestor(a,"vuecal__cell-split");return s&&(s=s.attributes["data-split"].value,parseInt(s).toString()===s.toString()&&(s=parseInt(s))),s||null},splitClasses(a){return{"vuecal__cell-split":!0,"vuecal__cell-split--highlighted":this.highlightedSplit===a.id,[a.class]:!!a.class}},checkCellOverlappingEvents(){this.options.time&&this.eventsCount&&!this.splitsCount&&(this.eventsCount===1?(this.cellOverlaps=[],this.cellOverlapsStreak=1):[this.cellOverlaps,this.cellOverlapsStreak]=this.utils.event.checkCellOverlappingEvents(this.events,this.options))},isDOMElementAnEvent(a){return this.vuecal.isDOMElementAnEvent(a)},selectCell(a,t=!1){const s=this.splitsCount?this.getSplitAtCursor(a):null;this.utils.cell.selectCell(t,this.timeAtCursor,s),this.timeAtCursor=null},onCellkeyPressEnter(a){this.isSelected||this.onCellFocus(a);const t=this.splitsCount?this.getSplitAtCursor(a):null;this.utils.cell.keyPressEnterCell(this.timeAtCursor,t),this.timeAtCursor=null},onCellFocus(a){if(!this.isSelected&&!this.isDisabled){this.isSelected=this.data.startDate;const t=this.splitsCount?this.getSplitAtCursor(a):null,s=this.timeAtCursor||this.data.startDate;this.vuecal.$emit("cell-focus",t?{date:s,split:t}:s)}},onCellMouseDown(a,t=null,s=!1){if("ontouchstart"in window&&!s)return!1;this.isSelected||this.onCellFocus(a);const{clickHoldACell:n,focusAnEvent:o}=this.domEvents;this.domEvents.cancelClickEventCreation=!1,n.eventCreated=!1,this.timeAtCursor=new Date(this.data.startDate);const{minutes:l,cursorCoords:{y:u}}=this.vuecal.minutesAtCursor(a);this.timeAtCursor.setMinutes(l);const d=this.isDOMElementAnEvent(a.target);!d&&o._eid&&((this.view.events.find(m=>m._eid===o._eid)||{}).focused=!1),this.editEvents.create&&!d&&this.setUpEventCreation(a,u)},setUpEventCreation(a,t){if(this.options.dragToCreateEvent&&["week","day"].includes(this.view.id)){const{dragCreateAnEvent:s}=this.domEvents;if(s.startCursorY=t,s.split=this.splitsCount?this.getSplitAtCursor(a):null,s.start=this.timeAtCursor,this.options.snapToTime){let n=this.timeAtCursor.getHours()*60+this.timeAtCursor.getMinutes();const o=n+this.options.snapToTime/2;n=o-o%this.options.snapToTime,s.start.setHours(0,n,0,0)}}else this.options.cellClickHold&&["month","week","day"].includes(this.view.id)&&this.setUpCellHoldTimer(a)},setUpCellHoldTimer(a){const{clickHoldACell:t}=this.domEvents;t.cellId=`${this.vuecal._.uid}_${this.data.formattedDate}`,t.split=this.splitsCount?this.getSplitAtCursor(a):null,t.timeoutId=setTimeout(()=>{if(t.cellId&&!this.domEvents.cancelClickEventCreation){const{_eid:s}=this.utils.event.createAnEvent(this.timeAtCursor,null,t.split?{split:t.split}:{});t.eventCreated=s}},t.timeout)},onCellTouchStart(a,t=null){this.onCellMouseDown(a,t,!0)},onCellClick(a){this.isDOMElementAnEvent(a.target)||this.selectCell(a)},onCellDblClick(a){const t=new Date(this.data.startDate);t.setMinutes(this.vuecal.minutesAtCursor(a).minutes);const s=this.splitsCount?this.getSplitAtCursor(a):null;this.vuecal.$emit("cell-dblclick",s?{date:t,split:s}:t),this.options.dblclickToNavigate&&this.vuecal.switchToNarrowerView()},onCellContextMenu(a){a.stopPropagation(),a.preventDefault();const t=new Date(this.data.startDate),{cursorCoords:s,minutes:n}=this.vuecal.minutesAtCursor(a);t.setMinutes(n);const o=this.splitsCount?this.getSplitAtCursor(a):null;this.vuecal.$emit("cell-contextmenu",{date:t,...s,...o||{},e:a})}},computed:{dnd(){return this.modules.dnd},nowInMinutes(){return this.utils.date.dateToMinutes(this.vuecal.now)},isBeforeMinDate(){return this.minTimestamp!==null&&this.minTimestamp>this.data.endDate.getTime()},isAfterMaxDate(){return this.maxTimestamp&&this.maxTimestamp<this.data.startDate.getTime()},isDisabled(){const{disableDays:a}=this.options,{isYearsOrYearView:t}=this.vuecal;return a.length&&a.includes(this.data.formattedDate)&&!t?!0:this.isBeforeMinDate||this.isAfterMaxDate},isSelected:{get(){let a=!1;const{selectedDate:t}=this.view;return this.view.id==="years"?a=t.getFullYear()===this.data.startDate.getFullYear():this.view.id==="year"?a=t.getFullYear()===this.data.startDate.getFullYear()&&t.getMonth()===this.data.startDate.getMonth():a=t.getTime()===this.data.startDate.getTime(),a},set(a){this.view.selectedDate=a,this.vuecal.$emit("update:selected-date",this.view.selectedDate)}},isWeekOrDayView(){return["week","day"].includes(this.view.id)},transitionDirection(){return this.vuecal.transitionDirection},specialHours(){return this.data.specialHours.map(a=>{let{from:t,to:s}=a;return t=Math.max(t,this.options.timeFrom),s=Math.min(s,this.options.timeTo),{...a,height:(s-t)*this.timeScale,top:(t-this.options.timeFrom)*this.timeScale}})},events(){const{startDate:a,endDate:t}=this.data;let s=[];if(!(["years","year"].includes(this.view.id)&&!this.options.eventsCountOnYearView)){if(s=this.view.events.slice(0),this.view.id==="month"&&s.push(...this.view.outOfScopeEvents),s=s.filter(n=>this.utils.event.eventInRange(n,a,t)),this.options.showAllDayEvents&&this.view.id!=="month"&&(s=s.filter(n=>!!n.allDay===this.allDay)),this.options.time&&this.isWeekOrDayView&&!this.allDay){const{timeFrom:n,timeTo:o}=this.options;s=s.filter(l=>{const u=l.daysCount>1&&l.segments[this.data.formattedDate]||{},d=l.daysCount===1&&l.startTimeMinutes<o&&l.endTimeMinutes>n,m=l.daysCount>1&&u.startTimeMinutes<o&&u.endTimeMinutes>n;return l.allDay||d||m||!1})}this.options.time&&this.isWeekOrDayView&&!(this.options.showAllDayEvents&&this.allDay)&&s.sort((n,o)=>n.start<o.start?-1:1),this.cellSplits.length||this.$nextTick(this.checkCellOverlappingEvents)}return s},eventsCount(){return this.events.length},splits(){return this.cellSplits.map((a,t)=>{const s=this.events.filter(l=>l.split===a.id),[n,o]=this.utils.event.checkCellOverlappingEvents(s.filter(l=>!l.background&&!l.allDay),this.options);return{...a,overlaps:n,overlapsStreak:o,events:s}})},splitsCount(){return this.splits.length},cellClasses(){return{[this.data.class]:!!this.data.class,"vuecal__cell--current":this.data.current,"vuecal__cell--today":this.data.today,"vuecal__cell--out-of-scope":this.data.outOfScope,"vuecal__cell--before-min":this.isDisabled&&this.isBeforeMinDate,"vuecal__cell--after-max":this.isDisabled&&this.isAfterMaxDate,"vuecal__cell--disabled":this.isDisabled,"vuecal__cell--selected":this.isSelected,"vuecal__cell--highlighted":this.highlighted,"vuecal__cell--has-splits":this.splitsCount,"vuecal__cell--has-events":this.eventsCount}},cellStyles(){return{...this.cellWidth?{width:`${this.cellWidth}%`}:{}}},timelineVisible(){const{time:a,timeTo:t}=this.options;return this.data.today&&this.isWeekOrDayView&&a&&!this.allDay&&this.nowInMinutes<=t},todaysTimePosition(){if(!this.data.today||!this.options.time)return;const a=this.nowInMinutes-this.options.timeFrom;return Math.round(a*this.timeScale)},timeScale(){return this.options.timeCellHeight/this.options.timeStep}}},jt=Le(Sa,[["render",$a]]),Va={key:0,class:"vuecal__all-day-text",style:{width:"3em"}};function Aa(a,t,s,n,o,l){const u=Ee("vuecal-cell");return i(),r("div",{class:"vuecal__flex vuecal__all-day",style:fe(s.cellOrSplitMinWidth&&{height:s.height})},[s.cellOrSplitMinWidth?x("",!0):(i(),r("div",Va,[e("span",null,h(s.label),1)])),e("div",{class:ee(["vuecal__flex vuecal__cells",`${l.view.id}-view`]),grow:"",style:fe(s.cellOrSplitMinWidth?`min-width: ${s.cellOrSplitMinWidth}px`:"")},[(i(!0),r(J,null,te(s.cells,(d,m)=>(i(),se(u,{key:m,options:s.options,"edit-events":l.editEvents,data:d,"all-day":!0,"cell-width":s.options.hideWeekdays.length&&(l.vuecal.isWeekView||l.vuecal.isMonthView)&&l.vuecal.cellWidth,"min-timestamp":s.options.minTimestamp,"max-timestamp":s.options.maxTimestamp,"cell-splits":s.daySplits},{event:z(({event:c,view:v})=>[le(a.$slots,"event",{view:v,event:c})]),_:2},1032,["options","edit-events","data","cell-width","min-timestamp","max-timestamp","cell-splits"]))),128))],6)],4)}const Oa={inject:["vuecal","view","editEvents"],components:{"vuecal-cell":jt},props:{options:{type:Object,required:!0},cells:{type:Array,required:!0},label:{type:String,required:!0},daySplits:{type:Array,default:()=>[]},shortEvents:{type:Boolean,default:!0},height:{type:String,default:""},cellOrSplitMinWidth:{type:Number,default:null}},computed:{hasCellOrSplitWidth(){return!!(this.options.minCellWidth||this.daySplits.length&&this.options.minSplitWidth)}}},Ia=Le(Oa,[["render",Aa]]),La=["lang"],Pa={class:"default"},Na={key:0,class:"vuecal__flex vuecal__body",grow:""},Ua=["onBlur","innerHTML"],Ra=["innerHTML"],Fa=["innerHTML"],Ba={class:"vuecal__flex",row:"",grow:""},Ha={key:0,class:"vuecal__time-column"},Wa={class:"vuecal__time-cell-label"},Ya={key:1,class:"vuecal__flex vuecal__week-numbers",column:""},za=["wrap","column"],qa=["onBlur","innerHTML"],Za=["innerHTML"],Ga=["innerHTML"],Ka=["wrap"],Ja=["innerHTML"],Xa=["innerHTML"],Qa={key:2,class:"vuecal__cell-events-count"},el={key:3,class:"vuecal__no-event"},tl=["onBlur","innerHTML"],sl=["innerHTML"],al={key:2,class:"vuecal__event-time"},ll={key:0},il={key:1,class:"days-to-end"},nl=["innerHTML"],ol={key:0,class:"vuecal__scrollbar-check"};function rl(a,t,s,n,o,l){const u=Ee("vuecal-header"),d=Ee("all-day-bar"),m=Ee("weekdays-headings"),c=Ee("vuecal-cell");return i(),r("div",{class:ee(["vuecal__flex vuecal",l.cssClasses]),column:"",ref:"vuecal",lang:s.locale},[p(u,{options:a.$props,"edit-events":l.editEvents,"view-props":{views:l.views,weekDaysInHeader:l.weekDaysInHeader},"week-days":l.weekDays,"has-splits":l.hasSplits,"day-splits":l.daySplits,"switch-to-narrower-view":l.switchToNarrowerView},Xe({"arrow-prev":z(()=>[le(a.$slots,"arrow-prev",{},()=>[t[0]||(t[0]=Z(" ")),t[1]||(t[1]=e("i",{class:"angle"},null,-1)),t[2]||(t[2]=Z(" "))])]),"arrow-next":z(()=>[le(a.$slots,"arrow-next",{},()=>[t[3]||(t[3]=Z(" ")),t[4]||(t[4]=e("i",{class:"angle"},null,-1)),t[5]||(t[5]=Z(" "))])]),"today-button":z(()=>[le(a.$slots,"today-button",{},()=>[e("span",Pa,h(o.texts.today),1)])]),title:z(()=>[le(a.$slots,"title",{title:l.viewTitle,view:o.view},()=>[Z(h(l.viewTitle),1)])]),_:2},[a.$slots["weekday-heading"]?{name:"weekday-heading",fn:z(({heading:v,view:w})=>[le(a.$slots,"weekday-heading",{heading:v,view:w})]),key:"0"}:void 0,a.$slots["split-label"]?{name:"split-label",fn:z(({split:v})=>[le(a.$slots,"split-label",{split:v,view:o.view.id})]),key:"1"}:void 0]),1032,["options","edit-events","view-props","week-days","has-splits","day-splits","switch-to-narrower-view"]),s.hideBody?x("",!0):(i(),r("div",Na,[p(ze,{name:`slide-fade--${o.transitionDirection}`,appear:s.transitions},{default:z(()=>[(i(),r("div",{class:"vuecal__flex",style:{"min-width":"100%"},key:s.transitions?o.view.id:!1,column:""},[s.showAllDayEvents&&l.hasTimeColumn&&(!l.cellOrSplitMinWidth||l.isDayView&&!s.minSplitWidth)?(i(),se(d,ct(mt({key:0},l.allDayBar)),{event:z(({event:v,view:w})=>[le(a.$slots,"event",{view:w,event:v},()=>[l.editEvents.title&&v.titleEditable?(i(),r("div",{key:0,class:"vuecal__event-title vuecal__event-title--edit",contenteditable:"",onBlur:_=>l.onEventTitleBlur(_,v),innerHTML:v.title},null,40,Ua)):v.title?(i(),r("div",{key:1,class:"vuecal__event-title",innerHTML:v.title},null,8,Ra)):x("",!0),v.content&&!l.hasShortEvents&&!l.isShortMonthView?(i(),r("div",{key:2,class:"vuecal__event-content",innerHTML:v.content},null,8,Fa)):x("",!0)])]),_:3},16)):x("",!0),e("div",{class:ee(["vuecal__bg",{vuecal__flex:!l.hasTimeColumn}]),column:""},[e("div",Ba,[l.hasTimeColumn?(i(),r("div",Ha,[s.showAllDayEvents&&l.cellOrSplitMinWidth&&!(l.isDayView&&!s.minSplitWidth)?(i(),r("div",{key:0,class:"vuecal__all-day-text",style:fe({height:l.allDayBar.height})},[e("span",null,h(o.texts.allDay),1)],4)):x("",!0),(i(!0),r(J,null,te(l.timeCells,(v,w)=>(i(),r("div",{class:"vuecal__time-cell",key:w,style:fe(`height: ${s.timeCellHeight}px`)},[le(a.$slots,"time-cell",{hours:v.hours,minutes:v.minutes},()=>[t[6]||(t[6]=e("span",{class:"vuecal__time-cell-line"},null,-1)),e("span",Wa,h(v.label),1)])],4))),128))])):x("",!0),s.showWeekNumbers&&l.isMonthView?(i(),r("div",Ya,[(i(),r(J,null,te(6,v=>e("div",{class:"vuecal__flex vuecal__week-number-cell",key:v,grow:""},[le(a.$slots,"week-number-cell",{week:l.getWeekNumber(v-1)},()=>[Z(h(l.getWeekNumber(v-1)),1)])])),64))])):x("",!0),e("div",{class:ee(["vuecal__flex vuecal__cells",`${o.view.id}-view`]),grow:"",wrap:!l.cellOrSplitMinWidth||!l.isWeekView,column:!!l.cellOrSplitMinWidth},[l.cellOrSplitMinWidth&&l.isWeekView?(i(),se(m,{key:0,"transition-direction":o.transitionDirection,"week-days":l.weekDays,"switch-to-narrower-view":l.switchToNarrowerView,style:fe(l.cellOrSplitMinWidth?`min-width: ${l.cellOrSplitMinWidth}px`:"")},Xe({_:2},[a.$slots["weekday-heading"]?{name:"weekday-heading",fn:z(({heading:v,view:w})=>[le(a.$slots,"weekday-heading",{heading:v,view:w})]),key:"0"}:void 0,a.$slots["split-label"]?{name:"split-label",fn:z(({split:v})=>[le(a.$slots,"split-label",{split:v,view:o.view.id})]),key:"1"}:void 0]),1032,["transition-direction","week-days","switch-to-narrower-view","style"])):l.hasSplits&&s.stickySplitLabels&&s.minSplitWidth?(i(),r("div",{key:1,class:"vuecal__flex vuecal__split-days-headers",style:fe(l.cellOrSplitMinWidth?`min-width: ${l.cellOrSplitMinWidth}px`:"")},[(i(!0),r(J,null,te(l.daySplits,(v,w)=>(i(),r("div",{class:ee(["day-split-header",v.class||!1]),key:w},[le(a.$slots,"split-label",{split:v,view:o.view.id},()=>[Z(h(v.label),1)])],2))),128))],4)):x("",!0),s.showAllDayEvents&&l.hasTimeColumn&&(l.isWeekView&&l.cellOrSplitMinWidth||l.isDayView&&l.hasSplits&&s.minSplitWidth)?(i(),se(d,ct(mt({key:2},l.allDayBar)),{event:z(({event:v,view:w})=>[le(a.$slots,"event",{view:w,event:v},()=>[l.editEvents.title&&v.titleEditable?(i(),r("div",{key:0,class:"vuecal__event-title vuecal__event-title--edit",contenteditable:"",onBlur:_=>l.onEventTitleBlur(_,v),innerHTML:v.title},null,40,qa)):v.title?(i(),r("div",{key:1,class:"vuecal__event-title",innerHTML:v.title},null,8,Za)):x("",!0),v.content&&!l.hasShortEvents&&!l.isShortMonthView?(i(),r("div",{key:2,class:"vuecal__event-content",innerHTML:v.content},null,8,Ga)):x("",!0)])]),_:3},16)):x("",!0),e("div",{class:"vuecal__flex",ref:v=>o.cellsEl=v,grow:"",wrap:!l.cellOrSplitMinWidth||!l.isWeekView,style:fe(l.cellOrSplitMinWidth?`min-width: ${l.cellOrSplitMinWidth}px`:"")},[(i(!0),r(J,null,te(l.viewCells,(v,w)=>(i(),se(c,{key:w,options:a.$props,"edit-events":l.editEvents,data:v,"cell-width":s.hideWeekdays.length&&(l.isWeekView||l.isMonthView)&&l.cellWidth,"min-timestamp":l.minTimestamp,"max-timestamp":l.maxTimestamp,"cell-splits":l.hasSplits&&l.daySplits||[]},{"cell-content":z(({events:_,split:V,selectCell:T})=>[le(a.$slots,"cell-content",{cell:v,view:o.view,goNarrower:T,events:_},()=>[V&&!s.stickySplitLabels?(i(),r("div",{key:0,class:"split-label",innerHTML:V.label},null,8,Ja)):x("",!0),v.content?(i(),r("div",{key:1,class:"vuecal__cell-date",innerHTML:v.content},null,8,Xa)):x("",!0),(l.isMonthView&&!s.eventsOnMonthView||l.isYearsOrYearView&&s.eventsCountOnYearView)&&_.length?(i(),r("div",Qa,[le(a.$slots,"events-count",{view:o.view,events:_},()=>[Z(h(_.length),1)])])):x("",!0),!l.cellOrSplitHasEvents(_,V)&&l.isWeekOrDayView?(i(),r("div",el,[le(a.$slots,"no-event",{},()=>[Z(h(o.texts.noEvent),1)])])):x("",!0)])]),event:z(({event:_,view:V})=>[le(a.$slots,"event",{view:V,event:_},()=>[l.editEvents.title&&_.titleEditable?(i(),r("div",{key:0,class:"vuecal__event-title vuecal__event-title--edit",contenteditable:"",onBlur:T=>l.onEventTitleBlur(T,_),innerHTML:_.title},null,40,tl)):_.title?(i(),r("div",{key:1,class:"vuecal__event-title",innerHTML:_.title},null,8,sl)):x("",!0),s.time&&!_.allDay&&!(l.isMonthView&&(_.allDay||s.showAllDayEvents==="short"))&&!l.isShortMonthView?(i(),r("div",al,[Z(h(o.utils.date.formatTime(_.start,l.TimeFormat)),1),_.endTimeMinutes?(i(),r("span",ll," - "+h(o.utils.date.formatTime(_.end,l.TimeFormat,null,!0)),1)):x("",!0),_.daysCount>1&&(_.segments[v.formattedDate]||{}).isFirstDay?(i(),r("small",il," +"+h(_.daysCount-1)+h((o.texts.day[0]||"").toLowerCase()),1)):x("",!0)])):x("",!0),_.content&&!(l.isMonthView&&_.allDay&&s.showAllDayEvents==="short")&&!l.isShortMonthView?(i(),r("div",{key:3,class:"vuecal__event-content",innerHTML:_.content},null,8,nl)):x("",!0)])]),"no-event":z(()=>[le(a.$slots,"no-event",{},()=>[Z(h(o.texts.noEvent),1)])]),_:2},1032,["options","edit-events","data","cell-width","min-timestamp","max-timestamp","cell-splits"]))),128))],12,Ka)],10,za)])],2)]))]),_:3},8,["name","appear"]),o.ready?x("",!0):(i(),r("div",ol,t[7]||(t[7]=[e("div",null,null,-1)])))]))],10,La)}const Fe=1440,Ye={weekDays:Array(7).fill(""),weekDaysShort:[],months:Array(12).fill(""),years:"",year:"",month:"",week:"",day:"",today:"",noEvent:"",allDay:"",deleteEvent:"",createEvent:"",dateFormat:"dddd MMMM D, YYYY",am:"am",pm:"pm"},wt=["years","year","month","week","day"],bt=new Gs(Ye),dl={name:"vue-cal",components:{"vuecal-cell":jt,"vuecal-header":ba,WeekdaysHeadings:Et,AllDayBar:Ia},provide(){return{vuecal:this,utils:this.utils,modules:this.modules,previous:this.previous,next:this.next,switchView:this.switchView,updateSelectedDate:this.updateSelectedDate,editEvents:this.editEvents,view:this.view,domEvents:this.domEvents}},props:{activeView:{type:String,default:"week"},allDayBarHeight:{type:[String,Number],default:"25px"},cellClickHold:{type:Boolean,default:!0},cellContextmenu:{type:Boolean,default:!1},clickToNavigate:{type:Boolean,default:!1},dblclickToNavigate:{type:Boolean,default:!0},disableDatePrototypes:{type:Boolean,default:!1},disableDays:{type:Array,default:()=>[]},disableViews:{type:Array,default:()=>[]},dragToCreateEvent:{type:Boolean,default:!0},dragToCreateThreshold:{type:Number,default:15},editableEvents:{type:[Boolean,Object],default:!1},events:{type:Array,default:()=>[]},eventsCountOnYearView:{type:Boolean,default:!1},eventsOnMonthView:{type:[Boolean,String],default:!1},hideBody:{type:Boolean,default:!1},hideTitleBar:{type:Boolean,default:!1},hideViewSelector:{type:Boolean,default:!1},hideWeekdays:{type:Array,default:()=>[]},hideWeekends:{type:Boolean,default:!1},locale:{type:[String,Object],default:"en"},maxDate:{type:[String,Date],default:""},minCellWidth:{type:Number,default:0},minDate:{type:[String,Date],default:""},minEventWidth:{type:Number,default:0},minSplitWidth:{type:Number,default:0},onEventClick:{type:[Function,null],default:null},onEventCreate:{type:[Function,null],default:null},onEventDblclick:{type:[Function,null],default:null},overlapsPerTimeStep:{type:Boolean,default:!1},resizeX:{type:Boolean,default:!1},selectedDate:{type:[String,Date],default:""},showAllDayEvents:{type:[Boolean,String],default:!1},showTimeInCells:{type:Boolean,default:!1},showWeekNumbers:{type:[Boolean,String],default:!1},snapToTime:{type:Number,default:0},small:{type:Boolean,default:!1},specialHours:{type:Object,default:()=>({})},splitDays:{type:Array,default:()=>[]},startWeekOnSunday:{type:Boolean,default:!1},stickySplitLabels:{type:Boolean,default:!1},time:{type:Boolean,default:!0},timeCellHeight:{type:Number,default:40},timeFormat:{type:String,default:""},timeFrom:{type:Number,default:0},timeStep:{type:Number,default:60},timeTo:{type:Number,default:Fe},todayButton:{type:Boolean,default:!1},transitions:{type:Boolean,default:!0},twelveHour:{type:Boolean,default:!1},watchRealTime:{type:Boolean,default:!1},xsmall:{type:Boolean,default:!1}},data(){return{ready:!1,texts:{...Ye},utils:{date:(this.disableDatePrototypes?bt.removePrototypes():!1)||bt,cell:null,event:null},modules:{dnd:null},cellsEl:null,view:{id:"",title:"",startDate:null,endDate:null,firstCellDate:null,lastCellDate:null,selectedDate:null,events:[]},eventIdIncrement:1,now:new Date,timeTickerIds:[null,null],domEvents:{resizeAnEvent:{_eid:null,start:null,split:null,segment:null,originalEndTimeMinutes:0,originalEnd:null,end:null,startCell:null,endCell:null},dragAnEvent:{_eid:null},dragCreateAnEvent:{startCursorY:null,start:null,split:null,event:null},focusAnEvent:{_eid:null,mousedUp:!1},clickHoldAnEvent:{_eid:null,timeout:1200,timeoutId:null},dblTapACell:{taps:0,timeout:500},clickHoldACell:{cellId:null,split:null,timeout:1200,timeoutId:null,eventCreated:!1},cancelClickEventCreation:!1},mutableEvents:[],transitionDirection:"right"}},methods:{async loadLocale(a){if(typeof this.locale=="object"){this.texts=Object.assign({},Ye,a),this.utils.date.updateTexts(this.texts);return}const t=await Zs(Object.assign({"./i18n/ar.json":()=>Q(()=>import("./ar.es-bitOgb9K.js"),[]),"./i18n/bg.json":()=>Q(()=>import("./bg.es-5tp0KQRo.js"),[]),"./i18n/bn.json":()=>Q(()=>import("./bn.es-C_qR0y0-.js"),[]),"./i18n/bs.json":()=>Q(()=>import("./bs.es-DduooXS8.js"),[]),"./i18n/ca.json":()=>Q(()=>import("./ca.es-DYDNDJFJ.js"),[]),"./i18n/cs.json":()=>Q(()=>import("./cs.es-CvnAvfoI.js"),[]),"./i18n/da.json":()=>Q(()=>import("./da.es-C_eJXDX3.js"),[]),"./i18n/de.json":()=>Q(()=>import("./de.es-Cp-R9E16.js"),[]),"./i18n/el.json":()=>Q(()=>import("./el.es-BZ44a1Tb.js"),[]),"./i18n/en.json":()=>Q(()=>import("./en.es-DwVNOttH.js"),[]),"./i18n/es.json":()=>Q(()=>import("./es.es-DO8PaQ_q.js"),[]),"./i18n/et.json":()=>Q(()=>import("./et.es-DdRIcUrz.js"),[]),"./i18n/fa.json":()=>Q(()=>import("./fa.es-XN0av8Tx.js"),[]),"./i18n/fi.json":()=>Q(()=>import("./fi.es-B0Iy6aas.js"),[]),"./i18n/fr.json":()=>Q(()=>import("./fr.es-B7WXlprl.js"),[]),"./i18n/he.json":()=>Q(()=>import("./he.es-BWEk5prp.js"),[]),"./i18n/hr.json":()=>Q(()=>import("./hr.es-B_iqHQyr.js"),[]),"./i18n/hu.json":()=>Q(()=>import("./hu.es-D_t4Ibxf.js"),[]),"./i18n/id.json":()=>Q(()=>import("./id.es-CzHAK-XV.js"),[]),"./i18n/is.json":()=>Q(()=>import("./is.es-DChRpym4.js"),[]),"./i18n/it.json":()=>Q(()=>import("./it.es-CquQA5xx.js"),[]),"./i18n/ja.json":()=>Q(()=>import("./ja.es-B19gsG6H.js"),[]),"./i18n/ka.json":()=>Q(()=>import("./ka.es-CuOe65jc.js"),[]),"./i18n/ko.json":()=>Q(()=>import("./ko.es-CsMl2USK.js"),[]),"./i18n/lt.json":()=>Q(()=>import("./lt.es-vqgjGyMx.js"),[]),"./i18n/mn.json":()=>Q(()=>import("./mn.es-BmdwFdas.js"),[]),"./i18n/nl.json":()=>Q(()=>import("./nl.es-CFxVMCWy.js"),[]),"./i18n/no.json":()=>Q(()=>import("./no.es-qRcuRMwl.js"),[]),"./i18n/pl.json":()=>Q(()=>import("./pl.es-BQ3a0ltx.js"),[]),"./i18n/pt-br.json":()=>Q(()=>import("./pt-br.es-U9bVHsgs.js"),[]),"./i18n/pt-pt.json":()=>Q(()=>import("./pt-pt.es-U9bVHsgs.js"),[]),"./i18n/ro.json":()=>Q(()=>import("./ro.es-ldjMjt3l.js"),[]),"./i18n/ru.json":()=>Q(()=>import("./ru.es-CS-QKsYL.js"),[]),"./i18n/sk.json":()=>Q(()=>import("./sk.es-CAe8sEvL.js"),[]),"./i18n/sl.json":()=>Q(()=>import("./sl.es-rdzOxu_X.js"),[]),"./i18n/sq.json":()=>Q(()=>import("./sq.es-BY5E06HI.js"),[]),"./i18n/sr.json":()=>Q(()=>import("./sr.es-QPseRVBy.js"),[]),"./i18n/sv.json":()=>Q(()=>import("./sv.es-BfPUYcV1.js"),[]),"./i18n/tr.json":()=>Q(()=>import("./tr.es-Cl6kz_IH.js"),[]),"./i18n/uk.json":()=>Q(()=>import("./uk.es-DBEtNQnZ.js"),[]),"./i18n/vi.json":()=>Q(()=>import("./vi.es-Bx2g_1jx.js"),[]),"./i18n/zh-cn.json":()=>Q(()=>import("./zh-cn.es-BWMmCH-R.js"),[]),"./i18n/zh-hk.json":()=>Q(()=>import("./zh-hk.es-DFZ0bKvi.js"),[])}),`./i18n/${a}.json`,3);this.texts=Object.assign({},Ye,t),this.utils.date.updateTexts(this.texts)},loadDragAndDrop(){Q(()=>import("./drag-and-drop.es-CbCm7IHa.js"),[]).then(a=>{const{DragAndDrop:t}=a;this.modules.dnd=new t(this)}).catch(()=>console.warn("Vue Cal: Missing drag & drop module."))},validateView(a){return wt.includes(a)||(console.error(`Vue Cal: invalid active-view parameter provided: "${a}".
A valid view must be one of: ${wt.join(", ")}.`),a="week"),this.enabledViews.includes(a)||(console.warn(`Vue Cal: the provided active-view "${a}" is disabled. Using the "${this.enabledViews[0]}" view instead.`),a=this.enabledViews[0]),a},switchToNarrowerView(a=null){this.transitionDirection="right";const t=this.enabledViews[this.enabledViews.indexOf(this.view.id)+1];t&&this.switchView(t,a)},switchView(a,t=null,s=!1){a=this.validateView(a);const n=this.utils.date,o=this.view.startDate&&this.view.startDate.getTime();if(this.transitions&&s){if(this.view.id===a)return;const d=this.enabledViews;this.transitionDirection=d.indexOf(this.view.id)>d.indexOf(a)?"left":"right"}const l=this.view.id;switch(this.view.events=[],this.view.id=a,this.view.firstCellDate=null,this.view.lastCellDate=null,t||(t=this.view.selectedDate||this.view.startDate),a){case"years":{this.view.startDate=new Date(Math.floor(t.getFullYear()/25)*25||2e3,0,1),this.view.endDate=new Date(this.view.startDate.getFullYear()+25,0,1),this.view.endDate.setSeconds(-1);break}case"year":{this.view.startDate=new Date(t.getFullYear(),0,1),this.view.endDate=new Date(t.getFullYear()+1,0,1),this.view.endDate.setSeconds(-1);break}case"month":{this.view.startDate=new Date(t.getFullYear(),t.getMonth(),1),this.view.endDate=new Date(t.getFullYear(),t.getMonth()+1,1),this.view.endDate.setSeconds(-1);let d=new Date(this.view.startDate);if(d.getDay()!==(this.startWeekOnSunday?0:1)&&(d=n.getPreviousFirstDayOfWeek(d,this.startWeekOnSunday)),this.view.firstCellDate=d,this.view.lastCellDate=n.addDays(d,41),this.view.lastCellDate.setHours(23,59,59,0),this.hideWeekends){if([0,6].includes(this.view.firstCellDate.getDay())){const m=this.view.firstCellDate.getDay()===6&&!this.startWeekOnSunday?2:1;this.view.firstCellDate=n.addDays(this.view.firstCellDate,m)}if([0,6].includes(this.view.startDate.getDay())){const m=this.view.startDate.getDay()===6?2:1;this.view.startDate=n.addDays(this.view.startDate,m)}if([0,6].includes(this.view.lastCellDate.getDay())){const m=this.view.lastCellDate.getDay()===0&&!this.startWeekOnSunday?2:1;this.view.lastCellDate=n.subtractDays(this.view.lastCellDate,m)}if([0,6].includes(this.view.endDate.getDay())){const m=this.view.endDate.getDay()===0?2:1;this.view.endDate=n.subtractDays(this.view.endDate,m)}}break}case"week":{t=n.getPreviousFirstDayOfWeek(t,this.startWeekOnSunday);const d=this.hideWeekends?5:7;this.view.startDate=this.hideWeekends&&this.startWeekOnSunday?n.addDays(t,1):t,this.view.startDate.setHours(0,0,0,0),this.view.endDate=n.addDays(t,d),this.view.endDate.setSeconds(-1);break}case"day":{this.view.startDate=t,this.view.startDate.setHours(0,0,0,0),this.view.endDate=new Date(t),this.view.endDate.setHours(23,59,59,0);break}}this.addEventsToView();const u=this.view.startDate&&this.view.startDate.getTime();if(!(l===a&&u===o)&&(this.$emit("update:activeView",a),this.ready)){const d=this.view.startDate,m={view:a,startDate:d,endDate:this.view.endDate,...this.isMonthView?{firstCellDate:this.view.firstCellDate,lastCellDate:this.view.lastCellDate,outOfScopeEvents:this.view.outOfScopeEvents.map(this.cleanupEvent)}:{},events:this.view.events.map(this.cleanupEvent),...this.isWeekView?{week:n.getWeek(this.startWeekOnSunday?n.addDays(d,1):d)}:{}};this.$emit("view-change",m)}},previous(){this.previousNext(!1)},next(){this.previousNext()},previousNext(a=!0){const t=this.utils.date;this.transitionDirection=a?"right":"left";const s=a?1:-1;let n=null;const{startDate:o,id:l}=this.view;switch(l){case"years":n=new Date(o.getFullYear()+25*s,0,1);break;case"year":n=new Date(o.getFullYear()+1*s,1,1);break;case"month":n=new Date(o.getFullYear(),o.getMonth()+1*s,1);break;case"week":n=t[a?"addDays":"subtractDays"](t.getPreviousFirstDayOfWeek(o,this.startWeekOnSunday),7);break;case"day":n=t[a?"addDays":"subtractDays"](o,1);const u=n.getDay(),d=this.startWeekOnSunday?u:(u||7)-1;if(this.weekDays[d].hide){const c=this.weekDays.map((w,_)=>({...w,i:_}));let v=0;a?([...c.slice(d),...c].find(w=>(v++,!w.hide)).i,v--):[...c,...c.slice(0,d)].reverse().find(w=>(v++,!w.hide)).i,n=t[a?"addDays":"subtractDays"](n,v)}break}n&&this.switchView(l,n)},addEventsToView(a=[]){const t=this.utils.event,{startDate:s,endDate:n,firstCellDate:o,lastCellDate:l}=this.view;if(a.length||(this.view.events=[]),a=a.length?a:[...this.mutableEvents],!a||this.isYearsOrYearView&&!this.eventsCountOnYearView)return;let u=a.filter(d=>t.eventInRange(d,s,n));!this.isYearsOrYearView&&!(this.isMonthView&&!this.eventsOnMonthView)&&(u=u.map(d=>d.daysCount>1?t.createEventSegments(d,o||s,l||n):d)),this.view.events.push(...u),this.isMonthView&&(this.view.outOfScopeEvents=[],a.forEach(d=>{(t.eventInRange(d,o,s)||t.eventInRange(d,n,l))&&(this.view.events.some(m=>m._eid===d._eid)||this.view.outOfScopeEvents.push(d))}))},findAncestor(a,t){for(;(a=a.parentElement)&&!a.classList.contains(t););return a},isDOMElementAnEvent(a){return a.classList.contains("vuecal__event")||this.findAncestor(a,"vuecal__event")},onMouseMove(a){const{resizeAnEvent:t,dragAnEvent:s,dragCreateAnEvent:n}=this.domEvents;t._eid===null&&s._eid===null&&!n.start||(a.preventDefault(),t._eid?this.eventResizing(a):this.dragToCreateEvent&&n.start&&this.eventDragCreation(a))},onMouseUp(a){const{focusAnEvent:t,resizeAnEvent:s,clickHoldAnEvent:n,clickHoldACell:o,dragCreateAnEvent:l}=this.domEvents,{_eid:u}=n,{_eid:d}=s;let m=!1;const{event:c,start:v}=l,w=this.isDOMElementAnEvent(a.target),_=t.mousedUp;if(t.mousedUp=!1,w&&(this.domEvents.cancelClickEventCreation=!0),o.eventCreated)return;if(d){const{originalEnd:T,originalEndTimeMinutes:E,endTimeMinutes:g}=s,y=this.view.events.find(C=>C._eid===s._eid);if(m=g&&g!==E,y&&y.end.getTime()!==T.getTime()){const C=this.mutableEvents.find($=>$._eid===s._eid);C.endTimeMinutes=y.endTimeMinutes,C.end=y.end;const R=this.cleanupEvent(y),W={...this.cleanupEvent(y),end:T,endTimeMinutes:y.originalEndTimeMinutes};this.$emit("event-duration-change",{event:R,oldDate:s.originalEnd,originalEvent:W}),this.$emit("event-change",{event:R,originalEvent:W})}y&&(y.resizing=!1),s._eid=null,s.start=null,s.split=null,s.segment=null,s.originalEndTimeMinutes=null,s.originalEnd=null,s.endTimeMinutes=null,s.startCell=null,s.endCell=null}else v&&(c&&(this.emitWithEvent("event-drag-create",c),l.event.resizing=!1),l.start=null,l.split=null,l.event=null);!w&&!d&&this.unfocusEvent(),n.timeoutId&&!u&&(clearTimeout(n.timeoutId),n.timeoutId=null),o.timeoutId&&(clearTimeout(o.timeoutId),o.timeoutId=null);const V=typeof this.onEventClick=="function";if(_&&!m&&!u&&!c&&V){let T=this.view.events.find(E=>E._eid===t._eid);return!T&&this.isMonthView&&(T=this.view.outOfScopeEvents.find(E=>E._eid===t._eid)),T&&this.onEventClick(T,a)}},onKeyUp(a){a.keyCode===27&&this.cancelDelete()},eventResizing(a){const{resizeAnEvent:t}=this.domEvents,s=this.view.events.find(c=>c._eid===t._eid)||{segments:{}},{minutes:n,cursorCoords:o}=this.minutesAtCursor(a),l=s.segments&&s.segments[t.segment],{date:u,event:d}=this.utils,m=Math.max(n,this.timeFrom+1,(l||s).startTimeMinutes+1);if(s.endTimeMinutes=t.endTimeMinutes=m,this.snapToTime){const c=s.endTimeMinutes+this.snapToTime/2;s.endTimeMinutes=c-c%this.snapToTime}if(l&&(l.endTimeMinutes=s.endTimeMinutes),s.end.setHours(0,s.endTimeMinutes,s.endTimeMinutes===Fe?-1:0,0),this.resizeX&&this.isWeekView){s.daysCount=u.countDays(s.start,s.end);const c=this.cellsEl,v=c.offsetWidth/c.childElementCount,w=Math.floor(o.x/v);if(t.startCell===null&&(t.startCell=w-(s.daysCount-1)),t.endCell!==w){t.endCell=w;const _=u.addDays(s.start,w-t.startCell),V=Math.max(u.countDays(s.start,_),1);if(V!==s.daysCount){let T=null;V>s.daysCount?T=d.addEventSegment(s):T=d.removeEventSegment(s),t.segment=T,s.endTimeMinutes+=.001}}}this.$emit("event-resizing",{_eid:s._eid,end:s.end,endTimeMinutes:s.endTimeMinutes})},eventDragCreation(a){const{dragCreateAnEvent:t}=this.domEvents,{start:s,startCursorY:n,split:o}=t,l=new Date(s),{minutes:u,cursorCoords:{y:d}}=this.minutesAtCursor(a);if(!(!t.event&&Math.abs(n-d)<this.dragToCreateThreshold))if(t.event){if(l.setHours(0,u,u===Fe?-1:0,0),this.snapToTime){let v=l.getHours()*60+l.getMinutes();const w=v+this.snapToTime/2;v=w-w%this.snapToTime,l.setHours(0,v,0,0)}const m=s<l,{event:c}=t;c.start=m?s:l,c.end=m?l:s,c.startTimeMinutes=c.start.getHours()*60+c.start.getMinutes(),c.endTimeMinutes=c.end.getHours()*60+c.end.getMinutes()}else{if(t.event=this.utils.event.createAnEvent(s,1,{split:o}),!t.event){t.start=null,t.split=null,t.event=null;return}t.event.resizing=!0}},unfocusEvent(){const{focusAnEvent:a,clickHoldAnEvent:t}=this.domEvents,s=this.view.events.find(n=>n._eid===(a._eid||t._eid));a._eid=null,t._eid=null,s&&(s.focused=!1,s.deleting=!1)},cancelDelete(){const{clickHoldAnEvent:a}=this.domEvents;if(a._eid){const t=this.view.events.find(s=>s._eid===a._eid);t&&(t.deleting=!1),a._eid=null,a.timeoutId=null}},onEventTitleBlur(a,t){if(t.title===a.target.innerHTML)return;const s=t.title;t.title=a.target.innerHTML;const n=this.cleanupEvent(t);this.$emit("event-title-change",{event:n,oldTitle:s}),this.$emit("event-change",{event:n,originalEvent:{...n,title:s}})},updateMutableEvents(){const a=this.utils.date;this.mutableEvents=[],this.events.forEach(t=>{const s=typeof t.start=="string"?a.stringToDate(t.start):t.start,n=a.formatDateLite(s),o=a.dateToMinutes(s);let l=null;typeof t.end=="string"&&t.end.includes("24:00")?(l=new Date(t.end.replace(" 24:00","")),l.setHours(23,59,59,0)):l=typeof t.end=="string"?a.stringToDate(t.end):t.end;let u=a.formatDateLite(l),d=a.dateToMinutes(l);(!d||d===Fe)&&(!this.time||typeof t.end=="string"&&t.end.length===10?l.setHours(23,59,59,0):l.setSeconds(l.getSeconds()-1),u=a.formatDateLite(l),d=Fe);const m=n!==u;t=Object.assign({...this.utils.event.eventDefaults},t,{_eid:`${this._.uid}_${this.eventIdIncrement++}`,segments:m?{}:null,start:s,startTimeMinutes:o,end:l,endTimeMinutes:d,daysCount:m?a.countDays(s,l):1,class:t.class}),this.mutableEvents.push(t)})},minutesAtCursor(a){return this.utils.cell.minutesAtCursor(a)},createEvent(a,t,s={}){return this.utils.event.createAnEvent(a,t,s)},cleanupEvent(a){return a={...a},["segments","deletable","deleting","titleEditable","resizable","resizing","draggable","dragging","draggingStatic","focused"].forEach(s=>{s in a&&delete a[s]}),a.repeat||delete a.repeat,a},emitWithEvent(a,t){this.$emit(a,this.cleanupEvent(t))},updateSelectedDate(a){if(a&&typeof a=="string"?a=this.utils.date.stringToDate(a):a=new Date(a),a&&a instanceof Date){const{selectedDate:t}=this.view;t&&(this.transitionDirection=t.getTime()>a.getTime()?"left":"right"),a.setHours(0,0,0,0),(!t||t.getTime()!==a.getTime())&&(this.view.selectedDate=a),this.switchView(this.view.id)}this.$emit("update:selected-date",this.view.selectedDate)},getWeekNumber(a){const t=this.utils.date,n=this.firstCellDateWeekNumber+a,o=this.startWeekOnSunday?1:0;return n>52?t.getWeek(t.addDays(this.view.firstCellDate,7*a+o)):n},timeTick(){this.now=new Date,this.timeTickerIds[1]=setTimeout(this.timeTick,60*1e3)},updateDateTexts(){this.utils.date.updateTexts(this.texts)},alignWithScrollbar(){if(document.getElementById("vuecal-align-with-scrollbar"))return;const a=this.$refs.vuecal.getElementsByClassName("vuecal__scrollbar-check")[0],t=a.offsetWidth-a.children[0].offsetWidth;if(t){const s=document.createElement("style");s.id="vuecal-align-with-scrollbar",s.type="text/css",s.innerHTML=`.vuecal--view-with-time .vuecal__weekdays-headings,.vuecal--view-with-time .vuecal__all-day {padding-right: ${t}px}`,document.head.appendChild(s)}},cellOrSplitHasEvents(a,t=null){return a.length&&(!t&&a.length||t&&a.some(s=>s.split===t.id))}},created(){this.utils.cell=new Js(this),this.utils.event=new Qs(this,this.utils.date),this.loadLocale(this.locale),this.editEvents.drag&&this.loadDragAndDrop(),this.updateMutableEvents(this.events),this.view.id=this.currentView,this.selectedDate?this.updateSelectedDate(this.selectedDate):(this.view.selectedDate=new Date,this.switchView(this.currentView)),this.time&&this.watchRealTime&&(this.timeTickerIds[0]=setTimeout(this.timeTick,(60-this.now.getSeconds())*1e3))},mounted(){const a=this.utils.date,t="ontouchstart"in window,{resize:s,drag:n,create:o,delete:l,title:u}=this.editEvents,d=this.onEventClick&&typeof this.onEventClick=="function";(s||n||o||l||u||d)&&window.addEventListener(t?"touchend":"mouseup",this.onMouseUp),(s||n||o&&this.dragToCreateEvent)&&window.addEventListener(t?"touchmove":"mousemove",this.onMouseMove,{passive:!1}),u&&window.addEventListener("keyup",this.onKeyUp),t&&(this.$refs.vuecal.oncontextmenu=function(v){v.preventDefault(),v.stopPropagation()}),this.hideBody||this.alignWithScrollbar();const m=this.view.startDate,c={view:this.view.id,startDate:m,endDate:this.view.endDate,...this.isMonthView?{firstCellDate:this.view.firstCellDate,lastCellDate:this.view.lastCellDate}:{},events:this.view.events.map(this.cleanupEvent),...this.isWeekView?{week:a.getWeek(this.startWeekOnSunday?a.addDays(m,1):m)}:{}};this.$emit("ready",c),this.ready=!0},beforeUnmount(){const a="ontouchstart"in window;window.removeEventListener(a?"touchmove":"mousemove",this.onMouseMove,{passive:!1}),window.removeEventListener(a?"touchend":"mouseup",this.onMouseUp),window.removeEventListener("keyup",this.onKeyUp),this.timeTickerIds[0]&&clearTimeout(this.timeTickerIds[0]),this.timeTickerIds[1]&&clearTimeout(this.timeTickerIds[1]),this.timeTickerIds=[null,null]},computed:{editEvents(){return this.editableEvents&&typeof this.editableEvents=="object"?{title:!!this.editableEvents.title,drag:!!this.editableEvents.drag,resize:!!this.editableEvents.resize,create:!!this.editableEvents.create,delete:!!this.editableEvents.delete}:{title:!!this.editableEvents,drag:!!this.editableEvents,resize:!!this.editableEvents,create:!!this.editableEvents,delete:!!this.editableEvents}},views(){return{years:{label:this.texts.years,enabled:!this.disableViews.includes("years")},year:{label:this.texts.year,enabled:!this.disableViews.includes("year")},month:{label:this.texts.month,enabled:!this.disableViews.includes("month")},week:{label:this.texts.week,enabled:!this.disableViews.includes("week")},day:{label:this.texts.day,enabled:!this.disableViews.includes("day")}}},currentView(){return this.validateView(this.activeView)},enabledViews(){return Object.keys(this.views).filter(a=>this.views[a].enabled)},hasTimeColumn(){return this.time&&this.isWeekOrDayView},isShortMonthView(){return this.isMonthView&&this.eventsOnMonthView==="short"},firstCellDateWeekNumber(){const a=this.utils.date,t=this.view.firstCellDate;return a.getWeek(this.startWeekOnSunday?a.addDays(t,1):t)},timeCells(){const a=[];for(let t=this.timeFrom,s=this.timeTo;t<s;t+=this.timeStep)a.push({hours:Math.floor(t/60),minutes:t%60,label:this.utils.date.formatTime(t,this.TimeFormat),value:t});return a},TimeFormat(){return this.timeFormat||(this.twelveHour?"h:mm{am}":"HH:mm")},daySplits(){return(this.splitDays.filter(a=>!a.hide)||[]).map((a,t)=>({...a,id:a.id||t+1}))},hasSplits(){return this.daySplits.length&&this.isWeekOrDayView},hasShortEvents(){return this.showAllDayEvents==="short"},cellOrSplitMinWidth(){let a=null;return this.hasSplits&&this.minSplitWidth?a=this.visibleDaysCount*this.minSplitWidth*this.daySplits.length:this.minCellWidth&&this.isWeekView&&(a=this.visibleDaysCount*this.minCellWidth),a},allDayBar(){let a=this.allDayBarHeight||null;return a&&!isNaN(a)&&(a+="px"),{cells:this.viewCells,options:this.$props,label:this.texts.allDay,shortEvents:this.hasShortEvents,daySplits:this.hasSplits&&this.daySplits||[],cellOrSplitMinWidth:this.cellOrSplitMinWidth,height:a}},minTimestamp(){let a=null;return this.minDate&&typeof this.minDate=="string"?a=this.utils.date.stringToDate(this.minDate):this.minDate&&this.minDate instanceof Date&&(a=this.minDate),a?a.getTime():null},maxTimestamp(){let a=null;return this.maxDate&&typeof this.maxDate=="string"?a=this.utils.date.stringToDate(this.maxDate):this.maxDate&&this.maxDate instanceof Date&&(a=this.maxDate),a?a.getTime():null},weekDays(){let{weekDays:a,weekDaysShort:t=[]}=this.texts;return a=a.slice(0).map((s,n)=>({label:s,...t.length?{short:t[n]}:{},hide:this.hideWeekends&&n>=5||this.hideWeekdays.length&&this.hideWeekdays.includes(n+1)})),this.startWeekOnSunday&&a.unshift(a.pop()),a},weekDaysInHeader(){return this.isMonthView||this.isWeekView&&!this.minCellWidth&&!(this.hasSplits&&this.minSplitWidth)},months(){return this.texts.months.map(a=>({label:a}))},specialDayHours(){return!this.specialHours||!Object.keys(this.specialHours).length?{}:Array(7).fill("").map((a,t)=>{let s=this.specialHours[t+1]||[];return Array.isArray(s)||(s=[s]),a=[],s.forEach(({from:n,to:o,class:l,label:u},d)=>{a[d]={day:t+1,from:[null,void 0].includes(n)?null:n*1,to:[null,void 0].includes(o)?null:o*1,class:l||"",label:u||""}}),a})},viewTitle(){const a=this.utils.date;let t="";const s=this.view.startDate,n=s.getFullYear(),o=s.getMonth();switch(this.view.id){case"years":{t=this.texts.years;break}case"year":{t=n;break}case"month":{t=`${this.months[o].label} ${n}`;break}case"week":{const l=this.view.endDate,u=s.getFullYear();let d=this.texts.months[s.getMonth()];this.xsmall&&(d=d.substring(0,3));let m=`${d} ${u}`;if(l.getMonth()!==s.getMonth()){const c=l.getFullYear();let v=this.texts.months[l.getMonth()];this.xsmall&&(v=v.substring(0,3)),u===c?m=`${d} - ${v} ${u}`:this.small?m=`${d.substring(0,3)} ${u} - ${v.substring(0,3)} ${c}`:m=`${d} ${u} - ${v} ${c}`}t=`${this.texts.week} ${a.getWeek(this.startWeekOnSunday?a.addDays(s,1):s)} (${m})`;break}case"day":{t=this.utils.date.formatDate(s,this.texts.dateFormat,this.texts);break}}return t},viewCells(){const a=this.utils.date;let t=[],s=null,n=!1;this.watchRealTime||(this.now=new Date);const o=this.now;switch(this.view.id){case"years":{s=this.view.startDate.getFullYear(),t=Array.apply(null,Array(25)).map((l,u)=>{const d=new Date(s+u,0,1),m=new Date(s+u+1,0,1);return m.setSeconds(-1),{startDate:d,formattedDate:a.formatDateLite(d),endDate:m,content:s+u,current:s+u===o.getFullYear()}});break}case"year":{s=this.view.startDate.getFullYear(),t=Array.apply(null,Array(12)).map((l,u)=>{const d=new Date(s,u,1),m=new Date(s,u+1,1);return m.setSeconds(-1),{startDate:d,formattedDate:a.formatDateLite(d),endDate:m,content:this.xsmall?this.months[u].label.substr(0,3):this.months[u].label,current:u===o.getMonth()&&s===o.getFullYear()}});break}case"month":{const l=this.view.startDate.getMonth(),u=new Date(this.view.firstCellDate);n=!1,t=Array.apply(null,Array(42)).map((d,m)=>{const c=a.addDays(u,m),v=new Date(c);v.setHours(23,59,59,0);const w=!n&&a.isToday(c)&&!n++;return{startDate:c,formattedDate:a.formatDateLite(c),endDate:v,content:c.getDate(),today:w,outOfScope:c.getMonth()!==l,class:`vuecal__cell--day${c.getDay()||7}`}}),(this.hideWeekends||this.hideWeekdays.length)&&(t=t.filter(d=>{const m=d.startDate.getDay()||7;return!(this.hideWeekends&&m>=6||this.hideWeekdays.length&&this.hideWeekdays.includes(m))}));break}case"week":{n=!1;const l=this.view.startDate,u=this.weekDays;t=u.map((d,m)=>{const c=a.addDays(l,this.startWeekOnSunday&&this.hideWeekends?m-1:m),v=new Date(c);v.setHours(23,59,59,0);const w=(c.getDay()||7)-1;return{startDate:c,formattedDate:a.formatDateLite(c),endDate:v,today:!n&&a.isToday(c)&&!n++,specialHours:this.specialDayHours[w]||[]}}).filter((d,m)=>!u[m].hide);break}case"day":{const l=this.view.startDate,u=new Date(this.view.startDate);u.setHours(23,59,59,0);const d=(l.getDay()||7)-1;t=[{startDate:l,formattedDate:a.formatDateLite(l),endDate:u,today:a.isToday(l),specialHours:this.specialDayHours[d]||[]}];break}}return t},visibleDaysCount(){return this.isDayView?1:7-this.weekDays.reduce((a,t)=>a+t.hide,0)},cellWidth(){return 100/this.visibleDaysCount},cssClasses(){const{resizeAnEvent:a,dragAnEvent:t,dragCreateAnEvent:s}=this.domEvents;return{[`vuecal--${this.view.id}-view`]:!0,[`vuecal--${this.locale}`]:this.locale,"vuecal--no-time":!this.time,"vuecal--view-with-time":this.hasTimeColumn,"vuecal--week-numbers":this.showWeekNumbers&&this.isMonthView,"vuecal--twelve-hour":this.twelveHour,"vuecal--click-to-navigate":this.clickToNavigate,"vuecal--hide-weekends":this.hideWeekends,"vuecal--split-days":this.hasSplits,"vuecal--sticky-split-labels":this.hasSplits&&this.stickySplitLabels,"vuecal--overflow-x":this.minCellWidth&&this.isWeekView||this.hasSplits&&this.minSplitWidth,"vuecal--small":this.small,"vuecal--xsmall":this.xsmall,"vuecal--resizing-event":a._eid,"vuecal--drag-creating-event":s.event,"vuecal--dragging-event":t._eid,"vuecal--events-on-month-view":this.eventsOnMonthView,"vuecal--short-events":this.isMonthView&&this.eventsOnMonthView==="short","vuecal--has-touch":typeof window<"u"&&"ontouchstart"in window}},isYearsOrYearView(){return["years","year"].includes(this.view.id)},isYearsView(){return this.view.id==="years"},isYearView(){return this.view.id==="year"},isMonthView(){return this.view.id==="month"},isWeekOrDayView(){return["week","day"].includes(this.view.id)},isWeekView(){return this.view.id==="week"},isDayView(){return this.view.id==="day"}},watch:{events:{handler(a,t){this.updateMutableEvents(a),this.addEventsToView()},deep:!0},locale(a){this.loadLocale(a)},selectedDate(a){this.updateSelectedDate(a)},activeView(a){this.switchView(a)}}},ul=Le(dl,[["render",rl]]),cl={class:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow"},ml={class:"flex justify-between items-center mb-4"},vl={class:"flex gap-3"},pl={class:"flex rounded-md shadow-sm mr-3"},hl={key:0,class:"mb-4 bg-gray-50 p-4 rounded-lg"},gl={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},fl=["value"],yl={class:"mt-1 relative rounded-md shadow-sm"},wl={key:1,class:"text-center text-gray-600 text-sm animate-pulse py-4"},bl={key:2,class:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md"},_l={key:3},xl={key:0,class:"space-y-4"},kl={key:0,class:"flex justify-between"},Dl={class:"flex-grow"},Cl={class:"text-sm text-red-500 italic"},Tl={class:"flex items-center mt-1"},Ml={class:"text-xs text-gray-500"},El={key:1},jl={class:"flex-grow"},$l={class:"flex justify-between items-center mb-3"},Sl={class:"text-sm text-gray-600 bg-blue-100 px-2 py-1 rounded-full"},Vl={class:"mb-3"},Al={class:"text-sm text-gray-700 ml-6"},Ol={class:"mb-3"},Il={class:"text-sm text-gray-700 ml-6"},Ll={class:"mb-2"},Pl={class:"text-sm text-gray-700 ml-6"},Nl={class:"flex items-center mt-3 pt-2 border-t border-blue-200"},Ul={class:"text-xs text-gray-500"},Rl={key:1,class:"text-gray-400 text-sm"},Fl={key:4,class:"mt-4"},Bl={class:"flex justify-between items-center mb-6"},Hl={class:"text-lg font-medium text-gray-900"},Wl=["innerHTML"],Yl=["innerHTML"],zl={key:0,class:"mt-1 text-xs p-1 rounded bg-red-50 border-l-2 border-red-500 text-red-700"},ql={class:"mt-6 bg-white rounded-lg shadow p-4"},Zl={key:0},Gl={class:"font-medium text-gray-800 mb-2"},Kl={class:"font-medium text-blue-800"},Jl={class:"text-sm text-gray-600 mt-1"},Xl={key:1,class:"text-gray-500 text-sm"},Ql={__name:"DailyStandups",props:{projectId:{type:Number,required:!0},users:{type:Array,default:()=>[]}},emits:["standupAdded"],setup(a,{emit:t}){const s=a,n=b("list"),o=b(!1),l=b(!1),u=b(""),d=b([]),m=b(""),c=Te({startDate:"",endDate:"",search:"",userId:""}),v=D=>{const k=oe(D);return k.isValid()?{start:k.clone().startOf("month").format("YYYY-MM-DD"),end:k.clone().endOf("month").format("YYYY-MM-DD")}:(console.warn("getMonthRange received an invalid input, defaulting to current date:",D),{start:oe().startOf("month").format("YYYY-MM-DD"),end:oe().endOf("month").format("YYYY-MM-DD")})};let w=null;const _=()=>{clearTimeout(w),w=setTimeout(()=>{T()},500)},V=async()=>{l.value=!0,u.value="";try{const D=new URLSearchParams;c.startDate&&D.append("start_date",c.startDate),c.endDate&&D.append("end_date",c.endDate),c.search&&D.append("search",c.search),c.userId&&D.append("user_id",String(c.userId));const k=D.toString(),S=`/api/projects/${s.projectId}/sections/notes?type=standup${k?`&${k}`:""}`,ae=await window.axios.get(S);d.value=ae.data.filter(ie=>ie.type==="standup")}catch(D){console.error("Error fetching project standups:",D),u.value="Failed to load standups. Please try again."}finally{l.value=!1}},T=()=>{V()},E=()=>{c.search="",c.userId="",c.startDate="",c.endDate="",V()},g=()=>{m.value=oe(m.value).subtract(1,"month").format("YYYY-MM-DD")},y=()=>{m.value=oe(m.value).add(1,"month").format("YYYY-MM-DD")};ce(()=>m.value,D=>{if(n.value==="calendar"&&D){const k=v(D);c.startDate=k.start,c.endDate=k.end,V()}}),ce(()=>n.value,D=>{D==="calendar"?(c.search="",c.userId="",m.value=v(new Date).start):(c.startDate="",c.endDate="",V())});const C=N(()=>(d.value||[]).map(D=>{var ae;if(!(D!=null&&D.created_at))return null;const k=oe(D.created_at);if(!k.isValid())return null;const S=Y(D.content);return{start:k.format("YYYY-MM-DD HH:mm"),end:k.format("YYYY-MM-DD HH:mm"),title:`${((ae=D.user)==null?void 0:ae.name)||"Unknown"} - Standup`,content:`Yesterday: ${S.yesterday}
Today: ${S.today}
Blockers: ${S.blockers}`,class:"standup-event",standupData:D}}).filter(Boolean));_e(()=>{V()});const R=N(()=>{if(!d.value)return[];let D=[...d.value];if(c.startDate&&(D=D.filter(k=>k.created_at&&oe(k.created_at).isSameOrAfter(c.startDate,"day"))),c.endDate&&(D=D.filter(k=>k.created_at&&oe(k.created_at).isSameOrBefore(c.endDate,"day"))),c.userId&&(D=D.filter(k=>k.user_id===parseInt(c.userId))),c.search){const k=c.search.toLowerCase();D=D.filter(S=>S.content&&S.content!=="[Encrypted content could not be decrypted]"&&S.content.toLowerCase().includes(k))}return D.sort((k,S)=>oe(S.created_at).valueOf()-oe(k.created_at).valueOf())}),W=D=>{const k=oe(D).day();return k>=1&&k<=5},$=D=>oe(D).isBefore(oe(),"day"),L=(D,k)=>oe(D).isSame(k,"day"),Y=D=>{var U,F,B,A;if(!D||typeof D!="string"||D==="[Encrypted content could not be decrypted]"||D.trim()==="")return{yesterday:"N/A",today:"N/A",blockers:"N/A",date:"N/A"};const k=((U=D.match(/\*\*Yesterday:\*\* ([^\n]+)/))==null?void 0:U[1].trim())||"Nothing",S=((F=D.match(/\*\*Today:\*\* ([^\n]+)/))==null?void 0:F[1].trim())||"Nothing",ae=((B=D.match(/\*\*Blockers:\*\* ([^\n]+)/))==null?void 0:B[1].trim())||"None",ie=((A=D.match(/\*\*Daily Standup - ([^*]+)\*\*/))==null?void 0:A[1].trim())||oe().format("L");return{yesterday:k,today:S,blockers:ae,date:ie}},M=N(()=>{const D={};return(d.value||[]).forEach(k=>{if(!(k!=null&&k.created_at))return;const S=oe(k.created_at).format("YYYY-MM-DD");D[S]||(D[S]=[]),D[S].push(k)}),D});return(D,k)=>(i(),r("div",cl,[e("div",ml,[k[11]||(k[11]=e("h4",{class:"text-lg font-semibold text-gray-900"},"Daily Standups",-1)),e("div",vl,[e("div",pl,[e("button",{type:"button",onClick:k[0]||(k[0]=S=>n.value="list"),class:ee([n.value==="list"?"bg-indigo-100 text-indigo-700":"bg-white text-gray-700 hover:text-gray-500","px-4 py-2 text-sm font-medium rounded-l-md border border-gray-300 focus:z-10 focus:outline-none focus:ring-1 focus:ring-indigo-500"])},k[8]||(k[8]=[e("span",{class:"flex items-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 10h16M4 14h16M4 18h16"})]),Z(" List ")],-1)]),2),e("button",{type:"button",onClick:k[1]||(k[1]=S=>n.value="calendar"),class:ee([n.value==="calendar"?"bg-indigo-100 text-indigo-700":"bg-white text-gray-700 hover:text-gray-500","px-4 py-2 text-sm font-medium rounded-r-md border border-gray-300 focus:z-10 focus:outline-none focus:ring-1 focus:ring-indigo-500"])},k[9]||(k[9]=[e("span",{class:"flex items-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})]),Z(" Calendar ")],-1)]),2)]),p(ge,{class:"bg-blue-600 hover:bg-blue-700 transition-colors",onClick:k[2]||(k[2]=S=>o.value=!0)},{default:z(()=>k[10]||(k[10]=[Z(" Submit Standup ",-1)])),_:1,__:[10]})])]),n.value==="list"?(i(),r("div",hl,[e("div",gl,[e("div",null,[k[12]||(k[12]=e("label",{for:"standupStartDate",class:"block text-sm font-medium text-gray-700 mb-1"},"From Date",-1)),he(e("input",{type:"date",id:"standupStartDate","onUpdate:modelValue":k[3]||(k[3]=S=>c.startDate=S),class:"mt-1 block w-full border-gray-300 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",onChange:T},null,544),[[ke,c.startDate]])]),e("div",null,[k[13]||(k[13]=e("label",{for:"standupEndDate",class:"block text-sm font-medium text-gray-700 mb-1"},"To Date",-1)),he(e("input",{type:"date",id:"standupEndDate","onUpdate:modelValue":k[4]||(k[4]=S=>c.endDate=S),class:"mt-1 block w-full border-gray-300 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",onChange:T},null,544),[[ke,c.endDate]])]),e("div",null,[k[15]||(k[15]=e("label",{for:"standupUserFilter",class:"block text-sm font-medium text-gray-700 mb-1"},"User",-1)),he(e("select",{id:"standupUserFilter","onUpdate:modelValue":k[5]||(k[5]=S=>c.userId=S),class:"mt-1 block w-full border-gray-300 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",onChange:T},[k[14]||(k[14]=e("option",{value:""},"All Users",-1)),(i(!0),r(J,null,te(s.users,S=>(i(),r("option",{key:S.id,value:S.id},h(S.name),9,fl))),128))],544),[[Ze,c.userId]])]),e("div",null,[k[17]||(k[17]=e("label",{for:"standupSearchFilter",class:"block text-sm font-medium text-gray-700 mb-1"},"Search Content",-1)),e("div",yl,[he(e("input",{type:"text",id:"standupSearchFilter","onUpdate:modelValue":k[6]||(k[6]=S=>c.search=S),class:"focus:ring-indigo-500 focus:border-indigo-500 block w-full pr-10 sm:text-sm border-gray-300 rounded-md",placeholder:"Search in standup content...",onInput:_},null,544),[[ke,c.search]]),k[16]||(k[16]=e("div",{class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})])],-1))])])]),e("div",{class:"mt-3 flex justify-end"},[e("button",{type:"button",class:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:E}," Reset Filters ")])])):x("",!0),l.value?(i(),r("div",wl,"Loading standups...")):u.value?(i(),r("div",bl,h(u.value),1)):n.value==="list"?(i(),r("div",_l,[R.value.length?(i(),r("div",xl,[(i(!0),r(J,null,te(R.value,S=>{var ae,ie;return i(),r("div",{key:S.id,class:"p-4 bg-blue-50 rounded-md shadow-sm hover:bg-blue-100 transition-colors border-l-4 border-blue-500"},[S.content==="[Encrypted content could not be decrypted]"?(i(),r("div",kl,[e("div",Dl,[e("p",Cl,[Z(h(S.content),1),k[18]||(k[18]=e("span",{class:"text-xs text-red-400 block mt-1"},"(There was an issue decrypting this standup. Please contact an administrator.)",-1))]),e("div",Tl,[e("p",Ml,"Submitted by "+h(((ae=S.user)==null?void 0:ae.name)||"Unknown")+" on "+h(H(oe)(S.created_at).format("L")),1)])])])):(i(),r("div",El,[e("div",jl,[e("div",$l,[k[19]||(k[19]=e("h3",{class:"text-md font-bold text-gray-800"},"Daily Standup",-1)),e("span",Sl,h(Y(S.content).date),1)]),e("div",Vl,[k[20]||(k[20]=e("div",{class:"flex items-center mb-1"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 text-blue-600 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("span",{class:"font-semibold text-sm text-gray-700"},"Yesterday:")],-1)),e("p",Al,h(Y(S.content).yesterday),1)]),e("div",Ol,[k[21]||(k[21]=e("div",{class:"flex items-center mb-1"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 text-green-600 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})]),e("span",{class:"font-semibold text-sm text-gray-700"},"Today:")],-1)),e("p",Il,h(Y(S.content).today),1)]),e("div",Ll,[k[22]||(k[22]=e("div",{class:"flex items-center mb-1"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 text-red-600 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})]),e("span",{class:"font-semibold text-sm text-gray-700"},"Blockers:")],-1)),e("p",Pl,h(Y(S.content).blockers),1)]),e("div",Nl,[e("p",Ul,"Submitted by "+h(((ie=S.user)==null?void 0:ie.name)||"Unknown")+" on "+h(H(oe)(S.created_at).format("L")),1)])])]))])}),128))])):(i(),r("p",Rl,"No daily standups found for the selected criteria."))])):n.value==="calendar"?(i(),r("div",Fl,[e("div",Bl,[e("button",{onClick:g,class:"p-2 rounded-full bg-gray-100 hover:bg-gray-200 transition-colors"},k[23]||(k[23]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])),e("h3",Hl,h(m.value?H(oe)(m.value).format("MMMM YYYY"):"Loading..."),1),e("button",{onClick:y,class:"p-2 rounded-full bg-gray-100 hover:bg-gray-200 transition-colors"},k[24]||(k[24]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)]))]),p(H(ul),{class:"vuecal--blue-theme","active-view":"month",events:C.value,"selected-date":m.value,"hide-title-bar":"","disable-views":["week","day","years","year"],twelveHour:!0,"time-from":480,"time-to":1200,"time-step":30,"events-on-month-view":"short"},{event:z(({event:S})=>[e("div",{class:"vuecal__event-title",innerHTML:S.title},null,8,Wl),e("div",{class:"vuecal__event-content",innerHTML:S.content},null,8,Yl)]),"cell-content":z(({view:S,date:ae})=>[S.id==="month"?(i(),r(J,{key:0},[ae&&W(ae)&&$(ae)&&!C.value.some(ie=>L(ie.start,ae))?(i(),r("div",zl," No standups ")):x("",!0)],64)):x("",!0)]),_:1},8,["events","selected-date"]),k[26]||(k[26]=ls('<div class="mt-4 flex items-center space-x-4 text-sm"><div class="flex items-center"><span class="inline-block w-3 h-3 bg-blue-50 border-l-2 border-blue-500 mr-1"></span><span>Standup submitted</span></div><div class="flex items-center"><span class="inline-block w-3 h-3 bg-red-50 border-l-2 border-red-500 mr-1"></span><span>Missing standup</span></div></div>',1)),e("div",ql,[k[25]||(k[25]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Standups Outside Current Month View",-1)),Object.entries(M.value).some(([S])=>!H(oe)(S).isSame(m.value,"month"))?(i(),r("div",Zl,[(i(!0),r(J,null,te(Object.entries(M.value).filter(([S])=>!H(oe)(S).isSame(m.value,"month")).sort((S,ae)=>H(oe)(S[0]).valueOf()-H(oe)(ae[0]).valueOf()),([S,ae])=>(i(),r("div",{key:S,class:"mb-4"},[e("div",Gl,h(H(oe)(S).format("dddd, MMMM Do YYYY")),1),(i(!0),r(J,null,te(ae,ie=>{var U;return i(),r("div",{key:ie.id,class:"p-2 mb-2 rounded bg-blue-50 border-l-2 border-blue-500"},[e("div",Kl,h(((U=ie.user)==null?void 0:U.name)||"Unknown"),1),e("div",Jl,h(H(oe)(ie.created_at).format("LT")),1)])}),128))]))),128))])):(i(),r("div",Xl,"No standups outside the current month view."))])])):x("",!0),p(Dt,{show:o.value,onClose:k[7]||(k[7]=S=>o.value=!1),onStandupAdded:V,projectId:a.projectId},null,8,["show","projectId"])]))}},ei={class:"grid grid-cols-1 md:grid-cols-2 gap-8 mt-6"},ti={class:"space-y-6"},si={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ai={class:"flex items-center"},li={class:"flex items-center"},ii={class:"space-y-6 bg-gray-50 p-6 rounded-lg shadow-inner border border-gray-200"},ni={class:"space-y-4"},oi={class:"text-gray-900 font-medium break-words"},ri={class:"text-gray-900"},di={key:0,class:"text-xs text-gray-500 mt-1"},ui={key:0},ci={class:"text-gray-900 whitespace-pre-wrap"},mi={key:1},vi={class:"flex flex-wrap gap-2"},pi={key:2},hi={class:"text-gray-900"},gi={class:"list-disc list-inside space-y-1 text-gray-900"},fi={key:0},yi={key:1},wi={key:2},bi={__name:"MeetingModal",props:{show:{type:Boolean,default:!1},projectId:{type:Number,required:!0},projectUsers:{type:Array,default:()=>[]},projectName:{type:String,default:"Project"}},emits:["close","saved"],setup(a,{emit:t}){const s=a,n=t,o=()=>Intl.DateTimeFormat().resolvedOptions().timeZone,l=["Africa/Cairo","Africa/Johannesburg","Africa/Lagos","America/Anchorage","America/Bogota","America/Chicago","America/Denver","America/Los_Angeles","America/Mexico_City","America/New_York","America/Phoenix","America/Sao_Paulo","America/Toronto","America/Vancouver","Asia/Dubai","Asia/Hong_Kong","Asia/Jerusalem","Asia/Kolkata","Asia/Seoul","Asia/Shanghai","Asia/Singapore","Asia/Tokyo","Australia/Melbourne","Australia/Perth","Australia/Sydney","Europe/Amsterdam","Europe/Berlin","Europe/Dublin","Europe/Istanbul","Europe/London","Europe/Madrid","Europe/Moscow","Europe/Paris","Europe/Rome","Pacific/Auckland","Pacific/Honolulu","UTC","GMT","Europe/Belfast","America/Adak","America/Boise","America/Detroit","America/Indianapolis","America/Juneau","America/Louisville","America/Menominee","America/Nome","America/Sitka","America/Yakutat","Asia/Karachi","Asia/Kolkata","Pacific/Auckland","Pacific/Chatham","Europe/Athens","Europe/Brussels","Europe/Budapest","Europe/Copenhagen","Europe/Helsinki","Europe/Lisbon","Europe/Oslo","Europe/Stockholm","Europe/Zurich","Europe/Vienna","Europe/Warsaw","Europe/Zurich","Europe/Sofia","Europe/Prague","Europe/Malta","Europe/Luxembourg","Europe/Kiev","Europe/Rome"].sort(),u=N(()=>l.map(W=>({value:W,label:W}))),d=N(()=>{const W=o(),$=l.includes(W);return console.log("DEBUG: Is detected timezone in list?",$,"Detected:",W),$?W:(console.log("DEBUG: Falling back to UTC for timezone as detected timezone not in list."),"UTC")}),m=Te({summary:"",description:"",start_datetime:"",end_datetime:"",attendee_user_ids:[],location:"",with_google_meet:!0,timezone:d.value,enable_recording:!1}),c=N({get(){return m.summary?`${m.summary} - ${s.projectName}`:""},set(W){const $=` - ${s.projectName}`;W.endsWith($)?m.summary=W.slice(0,-$.length):m.summary=W}}),v=()=>{m.summary="",m.description="",m.attendee_user_ids=[],m.location="",m.with_google_meet=!0,m.timezone=d.value,m.enable_recording=!1,_(),console.log("DEBUG: Form reset. Current timezone in form:",m.timezone)},w=W=>{const $=new Date(W),L=$.getFullYear(),Y=String($.getMonth()+1).padStart(2,"0"),M=String($.getDate()).padStart(2,"0"),D=String($.getHours()).padStart(2,"0"),k=String($.getMinutes()).padStart(2,"0");return`${L}-${Y}-${M}T${D}:${k}`},_=()=>{const W=new Date,$=new Date(W.getTime()+3600*1e3),L=new Date(W.getTime()+7200*1e3);m.start_datetime=w($),m.end_datetime=w(L),console.log("DEBUG: Default times set. Start:",m.start_datetime,"End:",m.end_datetime)};_(),ce(()=>s.show,W=>{W&&v()},{immediate:!0});const V=W=>W?(console.log(W),W.replace("T"," ")+":00"):"",T=W=>{const $={...W};return $.summary=c.value,$.start_datetime=V(W.start_datetime),$.end_datetime=V(W.end_datetime),console.log($),$},E=N(()=>`/api/projects/${s.projectId}/meetings`),g=W=>{n("saved",W)},y=W=>{console.error("DEBUG: MeetingModal submission error:",W)},C=N(()=>{if(!m.start_datetime||!m.end_datetime)return"";const W=new Date(m.start_datetime),$=new Date(m.end_datetime),L={weekday:"long",year:"numeric",month:"long",day:"numeric"},Y={hour:"2-digit",minute:"2-digit"},M=W.toLocaleDateString(void 0,L),D=W.toLocaleTimeString(void 0,Y),k=$.toLocaleTimeString(void 0,Y);return W.toDateString()===$.toDateString()?`${M}, ${D} - ${k}`:`${M} ${D} - ${$.toLocaleDateString(void 0,L)} ${k}`}),R=N(()=>s.projectUsers.filter(W=>m.attendee_user_ids.includes(W.id)).map(W=>W.name));return(W,$)=>(i(),se(Ae,{show:a.show,title:"Schedule a Meeting","api-endpoint":E.value,"http-method":"post","form-data":m,"format-data-for-api":T,"submit-button-text":"Schedule Meeting","success-message":"Meeting scheduled successfully!",onClose:$[9]||($[9]=L=>W.$emit("close")),onSubmitted:g,onError:y},{default:z(({errors:L})=>[e("div",ei,[e("div",ti,[e("div",null,[p(K,{for:"summary",value:"Meeting Title"}),$[10]||($[10]=e("p",{class:"mt-1 text-sm text-gray-500 mb-2"}," Enter a short, descriptive title for the meeting (e.g., Project Standup). The project name will be added automatically. ",-1)),p(pe,{id:"summary",modelValue:m.summary,"onUpdate:modelValue":$[0]||($[0]=Y=>m.summary=Y),type:"text",class:"mt-1 block w-full",placeholder:"e.g., Project Standup",required:""},null,8,["modelValue"]),p(re,{message:L.summary?L.summary[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[p(K,{for:"description",value:"Description"}),$[11]||($[11]=e("p",{class:"mt-1 text-sm text-gray-500 mb-2"}," Enter a short, descriptive agenda of the meeting. ",-1)),he(e("textarea",{id:"description","onUpdate:modelValue":$[1]||($[1]=Y=>m.description=Y),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",rows:"3",placeholder:"Meeting agenda and details..."},null,512),[[ke,m.description]]),p(re,{message:L.description?L.description[0]:"",class:"mt-2"},null,8,["message"])]),e("div",si,[e("div",null,[p(K,{for:"start_datetime",value:"Start Date & Time"}),p(pe,{id:"start_datetime",modelValue:m.start_datetime,"onUpdate:modelValue":$[2]||($[2]=Y=>m.start_datetime=Y),type:"datetime-local",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),p(re,{message:L.start_datetime?L.start_datetime[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[p(K,{for:"end_datetime",value:"End Date & Time"}),p(pe,{id:"end_datetime",modelValue:m.end_datetime,"onUpdate:modelValue":$[3]||($[3]=Y=>m.end_datetime=Y),type:"datetime-local",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),p(re,{message:L.end_datetime?L.end_datetime[0]:"",class:"mt-2"},null,8,["message"])])]),e("div",null,[p(K,{for:"attendees",value:"Attendees"}),p(et,{id:"attendees",modelValue:m.attendee_user_ids,"onUpdate:modelValue":$[4]||($[4]=Y=>m.attendee_user_ids=Y),options:s.projectUsers,"label-key":"name","track-by":"id",placeholder:"Select attendees",class:"mt-1"},null,8,["modelValue","options"]),$[12]||($[12]=e("p",{class:"mt-1 text-sm text-gray-500"}," Select project members to invite to this meeting ",-1)),p(re,{message:L.attendee_user_ids?L.attendee_user_ids[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[p(K,{for:"location",value:"Location (Optional)"}),p(pe,{id:"location",modelValue:m.location,"onUpdate:modelValue":$[5]||($[5]=Y=>m.location=Y),type:"text",class:"mt-1 block w-full",placeholder:"Office, Conference Room, etc."},null,8,["modelValue"]),p(re,{message:L.location?L.location[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[p(K,{for:"timezone",value:"Timezone"}),p(ye,{id:"timezone",modelValue:m.timezone,"onUpdate:modelValue":$[6]||($[6]=Y=>m.timezone=Y),options:u.value,"value-key":"value","label-key":"label",placeholder:"Select timezone",class:"mt-1"},null,8,["modelValue","options"]),$[13]||($[13]=e("p",{class:"mt-1 text-sm text-gray-500"}," Select your timezone for this meeting ",-1)),p(re,{message:L.timezone?L.timezone[0]:"",class:"mt-2"},null,8,["message"])]),e("div",ai,[he(e("input",{id:"with_google_meet","onUpdate:modelValue":$[7]||($[7]=Y=>m.with_google_meet=Y),type:"checkbox",class:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,512),[[vt,m.with_google_meet]]),$[14]||($[14]=e("label",{for:"with_google_meet",class:"ml-2 block text-sm text-gray-900"}," Create Google Meet video conference ",-1))]),e("div",li,[he(e("input",{id:"enable_recording","onUpdate:modelValue":$[8]||($[8]=Y=>m.enable_recording=Y),type:"checkbox",class:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,512),[[vt,m.enable_recording]]),$[15]||($[15]=e("label",{for:"enable_recording",class:"ml-2 block text-sm text-gray-900"}," Enable recording and transcript ",-1))])]),e("div",ii,[$[22]||($[22]=e("h4",{class:"text-xl font-bold text-gray-800"},"Meeting Preview",-1)),e("div",ni,[e("div",null,[$[16]||($[16]=e("h5",{class:"font-semibold text-sm text-gray-600 mb-1"},"Title",-1)),e("p",oi,h(c.value||"Untitled Meeting"),1)]),e("div",null,[$[17]||($[17]=e("h5",{class:"font-semibold text-sm text-gray-600 mb-1"},"Date & Time",-1)),e("p",ri,h(C.value||"No date and time selected."),1),m.timezone?(i(),r("p",di,"Timezone: "+h(m.timezone),1)):x("",!0)]),m.description?(i(),r("div",ui,[$[18]||($[18]=e("h5",{class:"font-semibold text-sm text-gray-600 mb-1"},"Description",-1)),e("p",ci,h(m.description),1)])):x("",!0),R.value.length>0?(i(),r("div",mi,[$[19]||($[19]=e("h5",{class:"font-semibold text-sm text-gray-600 mb-1"},"Attendees",-1)),e("div",vi,[(i(!0),r(J,null,te(R.value,Y=>(i(),r("span",{key:Y,class:"px-3 py-1 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800"},h(Y),1))),128))])])):x("",!0),m.location?(i(),r("div",pi,[$[20]||($[20]=e("h5",{class:"font-semibold text-sm text-gray-600 mb-1"},"Location",-1)),e("p",hi,h(m.location),1)])):x("",!0),e("div",null,[$[21]||($[21]=e("h5",{class:"font-semibold text-sm text-gray-600 mb-1"},"Options",-1)),e("ul",gi,[m.with_google_meet?(i(),r("li",fi,"Google Meet enabled")):x("",!0),m.enable_recording?(i(),r("li",yi,"Recording and transcript enabled")):x("",!0),!m.with_google_meet&&!m.enable_recording?(i(),r("li",wi,"No special options selected.")):x("",!0)])])])])])]),_:1},8,["show","api-endpoint","form-data"]))}},_i=Ie(bi,[["__scopeId","data-v-674b7e2a"]]),xi={class:"p-6"},ki={key:0,class:"mb-4 p-3 bg-green-100 text-green-800 rounded-md"},Di={key:1,class:"mb-4 p-3 bg-red-100 text-red-800 rounded-md"},Ci={class:"mb-4"},Ti=["value"],Mi={class:"mt-6 flex justify-end space-x-3"},Ei={__name:"ProjectMagicLinkModal",props:{show:{type:Boolean,default:!1},projectId:{type:Number,required:!0},projectClients:{type:Array,default:()=>[]}},emits:["close"],setup(a,{emit:t}){const s=a,n=t,o=b(!1),l=b(""),u=b(""),d=b(""),m=async()=>{var v,w;if(!l.value){d.value="Please select a client email";return}o.value=!0,u.value="",d.value="";try{const _=await window.axios.post(`/api/projects/${s.projectId}/magic-link`,{email:l.value});_.data.success?(u.value=_.data.message,l.value=""):d.value=_.data.message||"Failed to send magic link"}catch(_){console.error("Error sending magic link:",_),d.value=((w=(v=_.response)==null?void 0:v.data)==null?void 0:w.message)||"An error occurred while sending the magic link"}finally{o.value=!1}},c=()=>{l.value="",u.value="",d.value="",n("close")};return(v,w)=>(i(),se($e,{show:a.show,onClose:c},{default:z(()=>[e("div",xi,[e("div",{class:"flex justify-between items-center mb-4"},[w[2]||(w[2]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Send Magic Link to Client",-1)),e("button",{onClick:c,class:"text-gray-400 hover:text-gray-500"},w[1]||(w[1]=[e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),u.value?(i(),r("div",ki,h(u.value),1)):x("",!0),d.value?(i(),r("div",Di,h(d.value),1)):x("",!0),e("div",Ci,[p(K,{for:"client-email",value:"Select Client"}),he(e("select",{id:"client-email","onUpdate:modelValue":w[0]||(w[0]=_=>l.value=_),class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full"},[w[3]||(w[3]=e("option",{value:""},"Select a client",-1)),(i(!0),r(J,null,te(a.projectClients,_=>(i(),r("option",{key:_.id,value:_.email},h(_.name)+" ("+h(_.email)+") ",9,Ti))),128))],512),[[Ze,l.value]]),w[4]||(w[4]=e("p",{class:"mt-2 text-sm text-gray-500"}," The magic link will be sent to the selected client's email address. ",-1))]),e("div",Mi,[p(we,{onClick:c,type:"button"},{default:z(()=>w[5]||(w[5]=[Z(" Cancel ",-1)])),_:1,__:[5]}),p(ge,{onClick:m,disabled:o.value||!l.value,class:"bg-purple-600 hover:bg-purple-700"},{default:z(()=>[Z(h(o.value?"Sending...":"Send Magic Link"),1)]),_:1},8,["disabled"])])])]),_:1},8,["show"]))}},ji={class:"mt-6 space-y-6"},$i={class:"mt-2 flex space-x-4"},Si={class:"inline-flex items-center"},Vi={class:"inline-flex items-center"},Ai={key:0},Oi={key:1},Ii=["required"],Li={__name:"ResourceModal",props:{show:{type:Boolean,default:!1},projectId:{type:Number,required:!0},resource:{type:Object,default:null}},emits:["close","saved"],setup(a,{emit:t}){const s=a,n=t,o=b({name:"",type:"link",url:"",file:null,description:""}),l=b(null),u=N(()=>s.resource?`/api/projects/${s.projectId}/resources/${s.resource.id}`:`/api/projects/${s.projectId}/resources`),d=N(()=>s.resource?"put":"post"),m=N(()=>s.resource?"Update Resource":"Add Resource"),c=N(()=>s.resource?"Resource updated successfully!":"Resource added successfully!");ce(()=>s.show,T=>{T&&(s.resource?o.value={name:s.resource.name,type:s.resource.type,url:s.resource.type==="link"?s.resource.url:"",file:null,description:s.resource.description||""}:o.value={name:"",type:"link",url:"",file:null,description:""},l.value&&(l.value.value=""))},{immediate:!0});const v=T=>{o.value.file=T.target.files[0]||null},w=T=>{const E=new FormData;return E.append("name",T.name||""),E.append("type",T.type||"link"),E.append("description",T.description||""),T.type==="link"?E.append("url",T.url||""):T.type==="file"&&T.file&&E.append("file",T.file),(d.value==="put"||d.value==="patch")&&E.append("_method","PUT"),E},_=T=>{n("saved",T.resource)},V=()=>{n("close")};return(T,E)=>(i(),se(Ae,{show:a.show,title:a.resource?"Edit Resource":"Add Resource","api-endpoint":u.value,"http-method":d.value,"form-data":o.value,"submit-button-text":m.value,"success-message":c.value,"format-data-for-api":w,onClose:V,onSubmitted:_},{default:z(({errors:g})=>[e("div",ji,[e("div",null,[p(K,{for:"resource-type",value:"Resource Type"}),e("div",$i,[e("label",Si,[he(e("input",{type:"radio","onUpdate:modelValue":E[0]||(E[0]=y=>o.value.type=y),value:"link",class:"form-radio text-indigo-600"},null,512),[[pt,o.value.type]]),E[5]||(E[5]=e("span",{class:"ml-2 text-gray-700"},"Link",-1))]),e("label",Vi,[he(e("input",{type:"radio","onUpdate:modelValue":E[1]||(E[1]=y=>o.value.type=y),value:"file",class:"form-radio text-indigo-600"},null,512),[[pt,o.value.type]]),E[6]||(E[6]=e("span",{class:"ml-2 text-gray-700"},"File",-1))])])]),e("div",null,[p(K,{for:"resource-name",value:"Name"}),p(pe,{id:"resource-name",modelValue:o.value.name,"onUpdate:modelValue":E[2]||(E[2]=y=>o.value.name=y),type:"text",class:"mt-1 block w-full",placeholder:"Enter resource name",required:""},null,8,["modelValue"]),p(re,{message:g.name?g.name[0]:"",class:"mt-2"},null,8,["message"])]),o.value.type==="link"?(i(),r("div",Ai,[p(K,{for:"resource-url",value:"URL"}),p(pe,{id:"resource-url",modelValue:o.value.url,"onUpdate:modelValue":E[3]||(E[3]=y=>o.value.url=y),type:"url",class:"mt-1 block w-full",placeholder:"https://example.com",required:""},null,8,["modelValue"]),p(re,{message:g.url?g.url[0]:"",class:"mt-2"},null,8,["message"])])):x("",!0),o.value.type==="file"?(i(),r("div",Oi,[p(K,{for:"resource-file",value:"File"}),e("input",{id:"resource-file",ref_key:"fileInputRef",ref:l,type:"file",class:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100",onChange:v,required:!a.resource||o.value.type==="file"},null,40,Ii),p(re,{message:g.file?g.file[0]:"",class:"mt-2"},null,8,["message"])])):x("",!0),e("div",null,[p(K,{for:"resource-description",value:"Description (Optional)"}),he(e("textarea",{id:"resource-description","onUpdate:modelValue":E[4]||(E[4]=y=>o.value.description=y),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",rows:"3",placeholder:"Enter a description for this resource"},null,512),[[ke,o.value.description]]),p(re,{message:g.description?g.description[0]:"",class:"mt-2"},null,8,["message"])])])]),_:1},8,["show","title","api-endpoint","http-method","form-data","submit-button-text","success-message"]))}},Pi=Ie(Li,[["__scopeId","data-v-f508dda8"]]),Ni={class:"bg-white p-8 rounded-2xl shadow-xl border border-gray-200"},Ui={class:"flex flex-col lg:flex-row justify-between lg:items-center mb-6 border-b pb-4 border-gray-200"},Ri={class:"flex-1"},Fi={class:"text-3xl font-extrabold text-gray-900 tracking-tight"},Bi={class:"mt-2 flex flex-wrap items-center gap-x-4 gap-y-2 text-sm text-gray-500"},Hi={class:"text-gray-600 font-medium"},Wi={class:"flex items-center gap-2"},Yi=["href"],zi=["href"],qi=["href"],Zi={class:"mt-4 lg:mt-0 flex flex-wrap gap-2"},Gi={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"},Ki={class:"col-span-1 md:col-span-2"},Ji={class:"text-gray-600 text-base leading-relaxed"},Xi={class:"mt-6 flex flex-wrap gap-2 items-center"},Qi={class:"mt-6"},en={key:0,class:"text-gray-500 text-sm"},tn={key:1,class:"text-gray-400 text-sm"},sn={key:2,class:"flex flex-wrap gap-3 items-center"},an=["onClick"],ln={key:0,class:"resource-tooltip absolute left-1/2 bottom-full mb-2 w-64 z-10 -translate-x-1/2"},nn={class:"bg-white rounded-xl shadow-xl p-4 text-sm border border-gray-200"},on={class:"flex justify-between items-center mb-2"},rn={class:"font-bold text-gray-900"},dn={key:0,class:"text-gray-600 text-xs mb-2"},un=["href"],cn={class:"flex justify-end space-x-2 mt-2 pt-2 border-t border-gray-100"},mn=["onClick"],vn=["onClick"],pn={class:"col-span-1 border-l border-gray-200 pl-8"},hn={key:0,class:"text-gray-500 text-sm"},gn={key:1,class:"text-gray-500 text-sm"},fn={key:2,class:"space-y-3 max-h-[300px] overflow-y-auto"},yn={class:"font-medium text-gray-900 truncate"},wn={class:"text-sm text-gray-600"},bn={class:"flex space-x-2 mt-2"},_n=["href"],xn=["href"],kn={class:"p-6"},Dn={key:0,class:"mb-4 p-4 bg-green-50 border border-green-200 text-green-700 rounded-md"},Cn={key:1,class:"mb-4 p-4 bg-red-50 border border-red-200 text-red-700 rounded-md"},Tn={class:"mb-4"},Mn={key:0,class:"text-gray-500 text-sm mt-1"},En={key:1,class:"text-red-500 text-sm mt-1"},jn={class:"flex justify-end mt-6"},$n={__name:"ProjectGeneralInfoCard",props:{project:{type:Object,required:!0},projectId:{type:Number,required:!0},canManageProjects:{type:Boolean,required:!0},canEditProjects:{type:Boolean,required:!1},isSuperAdmin:{type:Boolean,required:!0}},emits:["openEditModal","openStandupModal","openMeetingModal","resourceSaved","openComposeModal"],setup(a,{emit:t}){const s=a,n=t,o=b(!1),l=b(null),u=b([]),d=b(!1),m=b(null),c=b(!1),v=b(!1),w=b(!1),_=b({client_ids:[]}),V=b({}),T=b(""),E=b([]),g=b(!1),y=b(""),C=b([]),R=b(!1),W=b("");xt(s.projectId);const $=()=>{try{W.value=Intl.DateTimeFormat().resolvedOptions().timeZone}catch(I){console.error("Error detecting user timezone:",I),W.value="UTC"}},L=async()=>{R.value=!0;try{const I=await window.axios.get(`/api/projects/${s.projectId}/meetings`);C.value=I.data}catch(I){console.error("Error fetching project meetings:",I)}finally{R.value=!1}},Y=I=>{if(!I)return"";try{const f={dateStyle:"medium",timeStyle:"short",timeZone:W.value};return new Date(I).toLocaleString(void 0,f)}catch(f){return console.error("Error formatting meeting time:",f),new Date(I).toLocaleString()}},M=async()=>{d.value=!0;try{const I=await window.axios.get(`/api/projects/${s.projectId}/resources`);I.data.success?u.value=I.data.resources:console.error("Failed to fetch resources:",I.data.message)}catch(I){console.error("Error fetching resources:",I)}finally{d.value=!1}},D=()=>{l.value=null,o.value=!0},k=I=>{l.value=I,o.value=!0},S=async I=>{if(confirm("Are you sure you want to delete this resource?"))try{const f=await window.axios.delete(`/api/projects/${s.projectId}/resources/${I}`);f.data.success?u.value=u.value.filter(j=>j.id!==I):console.error("Failed to delete resource:",f.data.message)}catch(f){console.error("Error deleting resource:",f)}},ae=I=>{if(l.value){const f=u.value.findIndex(j=>j.id===I.id);f!==-1&&(u.value[f]=I)}else u.value.push(I);n("resourceSaved",I)},ie=I=>{m.value=m.value===I?null:I},U=()=>{m.value=null},F=I=>{if(m.value!==null){const f=I.target.closest(".resource-tooltip"),j=I.target.closest(".resource-button");!f&&!j&&U()}};_e(()=>{M(),$(),L(),document.addEventListener("click",F)}),is(()=>{document.removeEventListener("click",F)});const B=async()=>{var I,f;g.value=!0,y.value="";try{const j=await window.axios.get(`/api/projects/${s.projectId}/sections/clients?type=clients`);E.value=j.data}catch(j){console.error("Failed to fetch project clients:",j),y.value=((f=(I=j.response)==null?void 0:I.data)==null?void 0:f.message)||"Failed to load client data."}finally{g.value=!1}},A=()=>{_.value.client_ids=[],V.value={},T.value="",v.value=!0,B()},G=()=>{c.value=!0,B()},ne=()=>{v.value=!1},De=async()=>{if(V.value={},T.value="",w.value=!0,!_.value.client_ids||_.value.client_ids.length===0){V.value={client_ids:["Please select a client."]},w.value=!1;return}try{const I=_.value.client_ids[0];if(!E.value.find(O=>O.id===I)){V.value={client_ids:["Selected client does not have a valid email."]},w.value=!1;return}const j=await window.axios.post(`/api/projects/${s.projectId}/magic-link`,{client_id:I});j.data.success&&(T.value=j.data.message,_.value.client_ids=[])}catch(I){I.response&&I.response.status===422?V.value=I.response.data.errors:I.response&&I.response.data.message?V.value={general:[I.response.data.message]}:V.value={general:["An unexpected error occurred. Please try again."]}}finally{w.value=!1}};return(I,f)=>{var j;return i(),r(J,null,[e("div",Ni,[e("div",Ui,[e("div",Ri,[e("h2",Fi,h(a.project.name),1),e("div",Bi,[e("span",{class:ee(["inline-flex items-center rounded-full px-3 py-0.5 text-xs font-semibold",{"bg-green-100 text-green-800":a.project.status==="active","bg-yellow-100 text-yellow-800":a.project.status==="on_hold","bg-blue-100 text-blue-800":a.project.status==="completed","bg-red-100 text-red-800":a.project.status==="archived"}])},h(((j=a.project.status)==null?void 0:j.replace("_"," ").toUpperCase())||"N/A"),3),f[11]||(f[11]=e("span",{class:"text-gray-600"},"|",-1)),e("span",Hi,h(a.project.project_type||"N/A"),1),f[12]||(f[12]=e("span",{class:"text-gray-600"},"|",-1)),e("div",Wi,[a.project.website?(i(),r("a",{key:0,href:a.project.website,target:"_blank",class:"flex items-center text-sm text-indigo-600 hover:text-indigo-800 transition-colors",title:"Visit Website"},[p(H(Rs),{class:"h-5 w-5 mr-1"}),f[8]||(f[8]=Z(" Website ",-1))],8,Yi)):x("",!0),a.project.social_media_link?(i(),r("a",{key:1,href:a.project.social_media_link,target:"_blank",class:"flex items-center text-sm text-indigo-600 hover:text-indigo-800 transition-colors",title:"Social Media"},[p(H(Ys),{class:"h-5 w-5 mr-1"}),f[9]||(f[9]=Z(" Socials ",-1))],8,zi)):x("",!0),a.project.google_drive_link?(i(),r("a",{key:2,href:a.project.google_drive_link,target:"_blank",class:"flex items-center text-sm text-indigo-600 hover:text-indigo-800 transition-colors",title:"Google Drive"},[p(H(Ns),{class:"h-5 w-5 mr-1"}),f[10]||(f[10]=Z(" Drive ",-1))],8,qi)):x("",!0)])])]),e("div",Zi,[a.canEditProjects||a.isSuperAdmin?(i(),se(ge,{key:0,onClick:f[0]||(f[0]=O=>I.$inertia.visit("/projects/"+a.projectId+"/edit")),class:"bg-indigo-600 hover:bg-indigo-700 transition-colors"},{default:z(()=>[p(H(Bs),{class:"h-5 w-5 mr-2"}),f[13]||(f[13]=Z(" Edit Project ",-1))]),_:1,__:[13]})):x("",!0),a.canManageProjects||a.isSuperAdmin?(i(),se(we,{key:1,onClick:f[1]||(f[1]=O=>n("openMeetingModal")),class:"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"},{default:z(()=>[p(H(Ls),{class:"h-5 w-5 mr-2"}),f[14]||(f[14]=Z(" Schedule Meeting ",-1))]),_:1,__:[14]})):x("",!0),p(we,{onClick:f[2]||(f[2]=O=>n("openStandupModal")),class:"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"},{default:z(()=>[p(H(Ps),{class:"h-5 w-5 mr-2"}),f[15]||(f[15]=Z(" Daily Standup ",-1))]),_:1,__:[15]})])]),e("div",Gi,[e("div",Ki,[e("p",Ji,h(a.project.description||"No description provided."),1),e("div",Xi,[e("button",{onClick:D,class:"flex items-center p-2 rounded-full text-indigo-600 bg-indigo-50 hover:bg-indigo-100 transition-colors",title:"Add Resource"},[p(H(Hs),{class:"h-5 w-5"}),f[16]||(f[16]=e("span",{class:"ml-1 text-sm font-medium"},"Add Resource",-1))]),e("button",{onClick:A,class:"flex items-center p-2 rounded-full text-green-600 bg-green-50 hover:bg-green-100 transition-colors",title:"Share Project"},[p(H(Ws),{class:"h-5 w-5"}),f[17]||(f[17]=e("span",{class:"ml-1 text-sm font-medium"},"Share",-1))]),e("button",{onClick:G,class:"flex items-center p-2 rounded-full text-blue-600 bg-blue-50 hover:bg-blue-100 transition-colors",title:"Compose Email"},[p(H(ks),{class:"h-5 w-5"}),f[18]||(f[18]=e("span",{class:"ml-1 text-sm font-medium"},"Compose Email",-1))])]),e("div",Qi,[f[22]||(f[22]=e("h5",{class:"text-sm font-semibold text-gray-500 uppercase tracking-wider mb-2"},"Dynamic Project Resources",-1)),d.value?(i(),r("div",en,"Loading resources...")):u.value.length===0?(i(),r("div",tn,"No dynamic resources have been added.")):(i(),r("div",sn,[(i(!0),r(J,null,te(u.value,O=>(i(),r("div",{key:O.id,class:"relative"},[e("button",{onClick:xe(ve=>ie(O.id),["prevent"]),class:"resource-button flex items-center p-2 bg-gray-100 rounded-full hover:bg-gray-200 transition-colors text-sm font-medium text-gray-700"},[p(H(Fs),{class:"h-4 w-4 mr-1"}),Z(" "+h(O.name),1)],8,an),m.value===O.id?(i(),r("div",ln,[e("div",nn,[e("div",on,[e("h4",rn,h(O.name),1),e("button",{onClick:xe(U,["prevent"]),class:"text-gray-400 hover:text-gray-600"},f[19]||(f[19]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),O.description?(i(),r("p",dn,h(O.description),1)):x("",!0),e("a",{href:O.url,target:"_blank",class:"mt-2 text-indigo-600 hover:text-indigo-800 text-sm font-medium flex items-center"},[p(H(Us),{class:"h-4 w-4 mr-1"}),f[20]||(f[20]=Z(" Open Resource ",-1))],8,un),e("div",cn,[e("button",{onClick:xe(ve=>k(O),["prevent"]),class:"p-1 text-gray-500 hover:text-indigo-600 transition-colors",title:"Edit"},[p(H(As),{class:"h-4 w-4"})],8,mn),e("button",{onClick:xe(ve=>S(O.id),["prevent"]),class:"p-1 text-gray-500 hover:text-red-600 transition-colors",title:"Delete"},[p(H(Zt),{class:"h-4 w-4"})],8,vn)])]),f[21]||(f[21]=e("div",{class:"absolute left-1/2 bottom-0 transform translate-y-1/2 -translate-x-1/2 rotate-45 w-4 h-4 bg-white border-r border-b border-gray-200"},null,-1))])):x("",!0)]))),128))]))])]),e("div",pn,[f[25]||(f[25]=e("h5",{class:"text-sm font-semibold text-gray-500 uppercase tracking-wider mb-2"},"Upcoming Meetings",-1)),R.value?(i(),r("div",hn," Loading meetings... ")):C.value.length===0?(i(),r("div",gn," No upcoming meetings scheduled. ")):(i(),r("div",fn,[(i(!0),r(J,null,te(C.value,O=>(i(),r("div",{key:O.id,class:"p-3 bg-gray-50 rounded-lg border border-gray-200 hover:bg-gray-100 transition-colors"},[e("h5",yn,h(O.summary),1),e("p",wn,h(Y(O.start_time)),1),e("div",bn,[e("a",{href:O.google_event_link,target:"_blank",class:"text-blue-600 hover:text-blue-800",title:"View in Google Calendar"},f[23]||(f[23]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)]),8,_n),O.google_meet_link?(i(),r("a",{key:0,href:O.google_meet_link,target:"_blank",class:"text-green-600 hover:text-green-800",title:"Join Google Meet"},f[24]||(f[24]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1)]),8,xn)):x("",!0)])]))),128))]))])])]),p(Pi,{show:o.value,"project-id":a.projectId,resource:l.value,onClose:f[3]||(f[3]=O=>o.value=!1),onSaved:ae},null,8,["show","project-id","resource"]),p($e,{show:v.value,onClose:ne},{default:z(()=>[e("div",kn,[f[28]||(f[28]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-4"}," Send Magic Link ",-1)),T.value?(i(),r("div",Dn,h(T.value),1)):x("",!0),V.value.general?(i(),r("div",Cn,h(V.value.general[0]),1)):x("",!0),e("form",{onSubmit:xe(De,["prevent"])},[e("div",Tn,[p(K,{for:"client",value:"Select Client"}),g.value?(i(),r("div",Mn,"Loading clients...")):y.value?(i(),r("div",En,h(y.value),1)):(i(),se(et,{key:2,id:"client",modelValue:_.value.client_ids,"onUpdate:modelValue":f[4]||(f[4]=O=>_.value.client_ids=O),options:E.value,placeholder:"Select a client","label-key":"name","track-by":"id",class:"mt-1"},null,8,["modelValue","options"])),p(re,{message:V.value.client_ids?V.value.client_ids[0]:"",class:"mt-2"},null,8,["message"]),f[26]||(f[26]=e("p",{class:"mt-2 text-sm text-gray-500"}," Select a client to send them a magic link for project access. ",-1))]),e("div",jn,[p(we,{onClick:ne,class:"mr-3"},{default:z(()=>f[27]||(f[27]=[Z(" Cancel ",-1)])),_:1,__:[27]}),p(ge,{type:"submit",class:"bg-purple-600 hover:bg-purple-700 transition-colors",disabled:w.value},{default:z(()=>[Z(h(w.value?"Sending...":"Send Magic Link"),1)]),_:1},8,["disabled"])])],32)])]),_:1},8,["show"]),p(ys,{show:c.value,title:"Compose New Email","api-endpoint":"/api/emails/templated","http-method":"post",clients:E.value,"submit-button-text":"Submit for Approval","success-message":"Email submitted for approval successfully!","project-id":a.projectId,onClose:f[5]||(f[5]=O=>c.value=!1),onSubmitted:f[6]||(f[6]=O=>c.value=!1),onError:f[7]||(f[7]=O=>console.error("Email submission error:",O))},null,8,["show","clients","project-id"])],64)}}},Sn=Ie($n,[["__scopeId","data-v-daf16b92"]]),Vn={class:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-6"},An={class:"bg-white p-4 rounded-xl shadow-md hover:shadow-lg transition-shadow"},On={class:"text-2xl font-bold text-indigo-600"},In={class:"bg-white p-4 rounded-xl shadow-md hover:shadow-lg transition-shadow"},Ln={class:"text-2xl font-bold text-indigo-600"},Pn={class:"bg-white p-4 rounded-xl shadow-md hover:shadow-lg transition-shadow"},Nn={class:"text-2xl font-bold text-indigo-600"},Un={class:"bg-white p-4 rounded-xl shadow-md hover:shadow-lg transition-shadow"},Rn={class:"text-2xl font-bold text-indigo-600"},Fn={__name:"ProjectStatsCards",props:{tasks:{type:Array,required:!0},emails:{type:Array,required:!0}},setup(a){const t=a,s=N(()=>t.tasks.filter(u=>u.status!=="Done").length),n=N(()=>t.emails.filter(u=>u.type==="received").length),o=N(()=>{const u=t.emails.filter(d=>d.status==="received"||d.type==="received");if(u.length>0){const d=[...u].sort((m,c)=>new Date(c.created_at)-new Date(m.created_at));return new Date(d[0].created_at).toLocaleDateString()}return"N/A"}),l=N(()=>{const u=t.tasks.filter(d=>d.status!=="Done");if(u.length>0){const d=u.filter(m=>m.due_date);if(d.length>0)return[...d].sort((c,v)=>new Date(c.due_date)-new Date(v.due_date))[0].due_date}return"N/A"});return(u,d)=>(i(),r("div",Vn,[e("div",An,[d[0]||(d[0]=e("h4",{class:"text-sm font-semibold text-gray-500 mb-1"},"Pending Tasks",-1)),e("p",On,h(s.value),1)]),e("div",In,[d[1]||(d[1]=e("h4",{class:"text-sm font-semibold text-gray-500 mb-1"},"Received Emails",-1)),e("p",Ln,h(n.value),1)]),e("div",Pn,[d[2]||(d[2]=e("h4",{class:"text-sm font-semibold text-gray-500 mb-1"},"Last Email Received",-1)),e("p",Nn,h(o.value),1)]),e("div",Un,[d[3]||(d[3]=e("h4",{class:"text-sm font-semibold text-gray-500 mb-1"},"Next Task Deadline",-1)),e("p",Rn,h(l.value),1)])]))}},Bn={class:"bg-white p-4 rounded-xl shadow-md mb-6"},Hn={class:"border-b border-gray-200"},Wn={__name:"ProjectTabsNavigation",props:{selectedTab:{type:String,default:null},canViewEmails:{type:Boolean,required:!0},canViewNotes:{type:Boolean,required:!0},canViewDeliverables:{type:Boolean,required:!0},canViewSeoReports:{type:Boolean,required:!0}},emits:["update:selectedTab"],setup(a,{expose:t,emit:s}){const n=b(null),o=a,l=s,u=N({get:()=>o.selectedTab,set:m=>l("update:selectedTab",m)});return t({scrollIntoView:m=>{n.value&&n.value.scrollIntoView(m)}}),(m,c)=>(i(),r("div",Bn,[e("div",Hn,[e("nav",{class:"-mb-px flex space-x-8 overflow-x-auto",ref_key:"navElement",ref:n},[e("button",{onClick:c[0]||(c[0]=v=>u.value=null),class:ee([u.value===null?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])}," Overview ",2),e("button",{onClick:c[1]||(c[1]=v=>u.value="tasks"),class:ee([u.value==="tasks"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])}," Project Tasks ",2),a.canViewEmails?(i(),r("button",{key:0,onClick:c[2]||(c[2]=v=>u.value="emails"),class:ee([u.value==="emails"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])}," Email Communication ",2)):x("",!0),a.canViewNotes?(i(),r("button",{key:1,onClick:c[3]||(c[3]=v=>u.value="notes"),class:ee([u.value==="notes"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])}," Notes ",2)):x("",!0),a.canViewNotes?(i(),r("button",{key:2,onClick:c[4]||(c[4]=v=>u.value="standups"),class:ee([u.value==="standups"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])}," Daily Standups ",2)):x("",!0),a.canViewDeliverables?(i(),r("button",{key:3,onClick:c[5]||(c[5]=v=>u.value="deliverables"),class:ee([u.value==="deliverables"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])}," Deliverables ",2)):x("",!0),a.canViewSeoReports?(i(),r("button",{key:4,onClick:c[6]||(c[6]=v=>u.value="seo-reports"),class:ee([u.value==="seo-reports"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])}," SEO Reports ",2)):x("",!0)],512)])]))}},Yn={class:"space-y-4"},zn={key:0,class:"text-sm text-gray-500"},qn={class:"flex justify-between items-center"},Zn={key:0,class:"text-sm text-gray-500"},Gn="put",Kn="Update Task",Jn="Task updated successfully!",Xn={__name:"EditTaskModal",props:{show:Boolean,projectId:Number,selectedTask:Object,projectUsers:Array,taskTypes:Array,milestones:Array,loadingTaskTypes:Boolean,loadingMilestones:Boolean},emits:["close","saved","open-add-milestone-modal"],setup(a,{emit:t}){const s=a,n=t,o=Te({name:"",description:"",assigned_to_user_id:null,due_date:null,status:"To Do",task_type_id:null,milestone_id:null,priority:"medium",tags:[],tags_data:[]}),l=["To Do","In Progress","Done","Blocked","Archived"],u=[{value:"low",label:"Low"},{value:"medium",label:"Medium"},{value:"high",label:"High"}],d=N(()=>"Edit Task"),m=N(()=>{var E;return`/api/tasks/${(E=s.selectedTask)==null?void 0:E.id}`});ce(()=>[s.show,s.selectedTask],([E,g],[y,C]=[])=>{var R;if(E&&g){let W=null;if(g.milestone){const M=s.milestones.find(D=>D.name===g.milestone);M&&(W=M.id)}else g.milestone_id&&(W=g.milestone_id);let $=null;if(g.task_type){const M=s.taskTypes.find(D=>D.name===g.task_type);M&&($=M.id)}else g.task_type_id&&($=g.task_type_id);let L=null;if(g.assigned_to&&g.assigned_to!=="Unassigned"){const M=(R=s.projectUsers)==null?void 0:R.find(D=>D.name===g.assigned_to);M&&(L=M.id)}else g.assigned_to_id&&(L=g.assigned_to_id);let Y=[];g.tags&&Array.isArray(g.tags)&&g.tags.length>0&&(typeof g.tags[0]=="string"?Y=g.tags.map(M=>({id:`new_${M.replace(/\s+/g,"-").toLowerCase()}_${Date.now()}`,name:M})):typeof g.tags[0]=="object"&&(Y=g.tags)),Object.assign(o,{name:g.title||"",description:g.description||"",assigned_to_user_id:L,due_date:g.due_date||null,status:g.status||"To Do",task_type_id:$,milestone_id:W,priority:g.priority||"medium",tags:Y.map(M=>M.id),tags_data:Y}),console.log("Task data loaded:",{taskId:g.id,title:g.title,originalTags:g.tags,processedTags:Y,formTags:o.tags,formTagsData:o.tags_data})}else E||Object.assign(o,{name:"",description:"",assigned_to_user_id:null,due_date:null,status:"To Do",task_type_id:null,milestone_id:null,priority:"medium",tags:[],tags_data:[]})},{immediate:!0});const c=E=>{n("saved",E),n("close")},v=()=>{n("open-add-milestone-modal")},w=()=>{n("close")},_=N(()=>s.projectUsers.map(E=>({value:E.id,label:E.name}))),V=N(()=>s.taskTypes.map(E=>({value:E.id,label:E.name}))),T=N(()=>s.milestones.map(E=>({value:E.id,label:E.name})));return(E,g)=>(i(),se(Ae,{show:a.show,title:d.value,"api-endpoint":m.value,"http-method":Gn,"form-data":o,"submit-button-text":Kn,"success-message":Jn,onClose:w,onSubmitted:c},{default:z(({errors:y})=>[e("div",Yn,[e("div",null,[p(K,{for:"task-name",value:"Task Name"}),p(pe,{id:"task-name",modelValue:o.name,"onUpdate:modelValue":g[0]||(g[0]=C=>o.name=C),type:"text",class:"mt-1 block w-full",placeholder:"Enter task name",required:""},null,8,["modelValue"]),p(re,{message:y.name?y.name[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[p(K,{for:"task-description",value:"Description"}),he(e("textarea",{id:"task-description","onUpdate:modelValue":g[1]||(g[1]=C=>o.description=C),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",rows:"3",placeholder:"Enter task description"},null,512),[[ke,o.description]]),p(re,{message:y.description?y.description[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[p(K,{for:"task-status",value:"Status"}),p(ye,{id:"task-status",modelValue:o.status,"onUpdate:modelValue":g[2]||(g[2]=C=>o.status=C),options:l.map(C=>({value:C,label:C})),"value-key":"value","label-key":"label",placeholder:"Select status",class:"mt-1"},null,8,["modelValue","options"]),p(re,{message:y.status?y.status[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[p(K,{for:"task-priority",value:"Priority"}),p(ye,{id:"task-priority",modelValue:o.priority,"onUpdate:modelValue":g[3]||(g[3]=C=>o.priority=C),options:u,"value-key":"value","label-key":"label",placeholder:"Select priority",class:"mt-1"},null,8,["modelValue"]),p(re,{message:y.priority?y.priority[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[p(K,{for:"task-due-date",value:"Due Date"}),p(pe,{id:"task-due-date",modelValue:o.due_date,"onUpdate:modelValue":g[4]||(g[4]=C=>o.due_date=C),type:"date",class:"mt-1 block w-full"},null,8,["modelValue"]),p(re,{message:y.due_date?y.due_date[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[p(K,{for:"task-assigned-to",value:"Assigned To"}),p(ye,{id:"task-assigned-to",modelValue:o.assigned_to_user_id,"onUpdate:modelValue":g[5]||(g[5]=C=>o.assigned_to_user_id=C),options:_.value,"value-key":"value","label-key":"label",placeholder:"Unassigned",class:"mt-1","allow-empty":!0},null,8,["modelValue","options"]),p(re,{message:y.assigned_to_user_id?y.assigned_to_user_id[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[p(K,{for:"task-type",value:"Task Type"}),a.loadingTaskTypes?(i(),r("div",zn,"Loading task types...")):(i(),se(ye,{key:1,id:"task-type",modelValue:o.task_type_id,"onUpdate:modelValue":g[6]||(g[6]=C=>o.task_type_id=C),options:V.value,"value-key":"value","label-key":"label",placeholder:"Select a task type",class:"mt-1","allow-empty":!0},null,8,["modelValue","options"])),p(re,{message:y.task_type_id?y.task_type_id[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[e("div",qn,[p(K,{for:"task-milestone",value:"Milestone"}),e("button",{type:"button",onClick:v,class:"text-sm text-indigo-600 hover:text-indigo-800"}," + Create New Milestone ")]),a.loadingMilestones?(i(),r("div",Zn,"Loading milestones...")):(i(),se(ye,{key:1,id:"task-milestone",modelValue:o.milestone_id,"onUpdate:modelValue":g[7]||(g[7]=C=>o.milestone_id=C),options:T.value,"value-key":"value","label-key":"label",placeholder:"No milestone",class:"mt-1","allow-empty":!0},null,8,["modelValue","options"])),p(re,{message:y.milestone_id?y.milestone_id[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[p(Gt,{modelValue:o.tags,"onUpdate:modelValue":g[8]||(g[8]=C=>o.tags=C),initialTags:o.tags_data,label:"Tags",placeholder:"Search or add tags",error:y.tags?y.tags[0]:""},null,8,["modelValue","initialTags","error"])])])]),_:1},8,["show","title","api-endpoint","form-data"]))}},Qn={class:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow"},eo={class:"flex justify-between items-center mb-4"},to={class:"flex gap-2"},so={key:0},ao={key:1},lo={class:"mb-6 overflow-x-auto"},io={key:0,class:"text-center text-gray-600 text-sm animate-pulse py-4"},no={key:1,class:"text-center py-4"},oo={key:2,class:"relative py-8"},ro={class:"relative flex justify-between"},uo={key:0,class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},co={key:1,class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},mo={key:2,class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},vo={key:3,class:"w-2 h-2 bg-white rounded-full"},po={class:"absolute -top-8 transform -translate-x-1/2 left-1/2 w-32"},ho=["title"],go={class:"absolute top-8 transform -translate-x-1/2 left-1/2"},fo={class:"text-xs text-gray-500 whitespace-nowrap"},yo={class:"mb-6 bg-gray-50 p-4 rounded-lg"},wo={class:"flex flex-wrap items-center gap-4"},bo={class:"flex-1 min-w-[200px]"},_o={class:"flex-1 min-w-[200px]"},xo={class:"flex-1 min-w-[200px]"},ko={class:"flex-1 min-w-[200px]"},Do={key:0,class:"mt-3 text-sm text-gray-600"},Co={key:0,class:"text-red-600 font-medium"},To={key:0,class:"text-center text-gray-600 text-sm animate-pulse py-4"},Mo={key:1,class:"text-center py-4"},Eo={class:"text-red-600 text-sm font-medium"},jo={key:2,class:"overflow-x-auto"},$o={key:3,class:"text-center py-4"},So={class:"p-6"},Vo={class:"mb-4"},Ao={class:"flex justify-end space-x-3"},Oo={__name:"ProjectTasksTab",props:{projectId:{type:Number,required:!0},projectUsers:{type:Array,default:()=>[]},canManageProjects:{type:Boolean,required:!0},tasksFilter:{type:String,default:"all"}},emits:["tasksUpdated","openTaskDetailSidebar","open-create-task-modal","filter-changed"],setup(a,{emit:t}){const s=a,n=t,o=b([]),l=b(!0),u=b(""),d=b(!1),m=b(null),c=b(!1),v=b(!1),w=b(null),_=b(!1),V=b(null),T=b(""),E=b([]),g=b([]),y=b(!1),C=b(!1),R=Te({status:"",assigned_to_user_id:null,milestone_id:null,due_date_range:""}),W=[{value:"",label:"All Statuses"},{value:"To Do",label:"To Do"},{value:"In Progress",label:"In Progress"},{value:"Done",label:"Done"},{value:"Blocked",label:"Blocked"},{value:"Archived",label:"Archived"}],$=N(()=>{const f=[{value:null,label:"All Users"},{value:-1,label:"Unassigned"}];return f.push(...s.projectUsers.map(j=>({value:j.id,label:j.name}))),f}),L=N(()=>{const f=[{value:null,label:"All Milestones"},{value:-1,label:"No Milestone"}];return f.push(...g.value.map(j=>({value:j.id,label:j.name}))),f}),Y=[{value:"",label:"All Dates"},{value:"today",label:"Due Today"},{value:"this_week",label:"Due This Week"},{value:"next_week",label:"Due Next Week"},{value:"overdue",label:"Overdue"},{value:"no_date",label:"No Due Date"}],M=N(()=>!g.value||!g.value.length?[]:[...g.value].sort((f,j)=>f.completion_date?j.completion_date?new Date(f.completion_date)-new Date(j.completion_date):-1:1)),D=N(()=>o.value.length?(console.log("ProjectTasksTab: Tasks array:",o.value),o.value.filter(f=>{if(R.status&&f.status!==R.status)return!1;if(R.assigned_to_user_id!==null){const j=parseInt(R.assigned_to_user_id);if(j===-1){if(f.assigned_to!=="Unassigned"&&f.assigned_to_id!==null)return!1}else if(f.assigned_to_id!==j)return!1}if(R.milestone_id!==null){const j=parseInt(R.milestone_id);if(j===-1){if(f.milestone_id)return!1}else if(f.milestone_id!==j)return!1}if(R.due_date_range){const j=new Date;j.setHours(0,0,0,0);const O=f.due_date?new Date(f.due_date):null;switch(R.due_date_range){case"today":if(!O||O.toDateString()!==j.toDateString())return!1;break;case"this_week":{if(!O)return!1;const ve=new Date(j);if(ve.setDate(j.getDate()+(6-j.getDay())),O<j||O>ve)return!1;break}case"next_week":{if(!O)return!1;const ve=new Date(j);ve.setDate(j.getDate()+(7-j.getDay()));const He=new Date(ve);if(He.setDate(ve.getDate()+6),O<ve||O>He)return!1;break}case"overdue":{if(!O||O>=j)return!1;break}case"no_date":{if(O)return!1;break}}}return!0})):[]),k=()=>{R.status="",R.assigned_to_user_id=null,R.milestone_id=null,R.due_date_range=""},S=async()=>{l.value=!0,u.value="";try{const f=await Xt(s.projectId);console.log("ProjectTasksTab: Raw API response from fetchProjectTasks:",f),o.value=f,n("tasksUpdated",o.value)}catch(f){u.value="Failed to load tasks data.",console.error("Error fetching project tasks:",f),f.response&&f.response.data&&f.response.data.message&&(u.value=f.response.data.message)}finally{l.value=!1}},ae=async f=>{await S()},ie=async()=>{y.value=!0;try{const f=await window.axios.get("/api/task-types");E.value=f.data}catch(f){console.error("Error fetching task types:",f)}finally{y.value=!1}},U=async()=>{C.value=!0;try{const f=await window.axios.get(`/api/projects/${s.projectId}/milestones`);g.value=f.data}catch(f){console.error("Error fetching milestones:",f)}finally{C.value=!1}},F=()=>{n("open-create-task-modal")},B=()=>{S()},A=f=>{console.log("ProjectTasksTab: Emitting openTaskDetailSidebar for taskId:",f,"projectId:",s.projectId),n("openTaskDetailSidebar",f,s.projectId,s.projectUsers)},G=()=>{c.value=!0},ne=f=>{g.value.push(f),S()},De=()=>{S()},I=async()=>{if(V.value){if(!T.value.trim()){ns("Please provide a reason for blocking the task");return}try{os("Blocking task..."),await window.axios.post(`/api/tasks/${V.value.id}/block`,{reason:T.value}),kt("Task blocked successfully"),_.value=!1,await S()}catch(f){console.error("Error blocking task:",f),Qe("Failed to block task. Please try again.")}}};return _e(()=>{S(),ie(),U()}),ce(()=>s.projectUsers,()=>{}),ce(()=>s.taskTypes,()=>{}),ce(()=>s.milestones,()=>{}),ce(()=>s.tasksFilter,f=>{f==="due-overdue"?(new Date().setHours(0,0,0,0),R.status="",R.assigned_to_user_id=null,R.milestone_id=null,R.due_date_range="overdue"):f==="all"&&(R.status="",R.assigned_to_user_id=null,R.milestone_id=null,R.due_date_range=""),n("filter-changed",f)}),(f,j)=>(i(),r("div",Qn,[e("div",eo,[j[11]||(j[11]=e("h4",{class:"text-lg font-semibold text-gray-900"},"Project Tasks",-1)),e("div",to,[p(we,{onClick:S,disabled:l.value,class:"text-indigo-600 hover:text-indigo-800"},{default:z(()=>[l.value?(i(),r("span",ao,"Loading...")):(i(),r("span",so,"Refresh"))]),_:1},8,["disabled"]),a.canManageProjects?(i(),se(ge,{key:0,class:"bg-indigo-600 hover:bg-indigo-700 transition-colors",onClick:F},{default:z(()=>j[10]||(j[10]=[Z(" Add Task ",-1)])),_:1,__:[10]})):x("",!0)])]),e("div",lo,[C.value?(i(),r("div",io," Loading milestones... ")):M.value.length?(i(),r("div",oo,[j[16]||(j[16]=e("div",{class:"absolute h-1 bg-gray-200 top-1/2 left-0 right-0 transform -translate-y-1/2"},null,-1)),e("div",ro,[(i(!0),r(J,null,te(M.value,(O,ve)=>(i(),r("div",{key:O.id,class:ee(["flex flex-col items-center relative z-10",{"ml-4":ve===0,"mr-4":ve===M.value.length-1}])},[e("div",{class:ee(["w-6 h-6 rounded-full shadow-lg flex items-center justify-center",{"bg-gray-300":O.status==="Not Started","bg-blue-500":O.status==="In Progress","bg-green-500":O.status==="Completed","bg-red-500":O.status==="Overdue"}])},[O.status==="Completed"?(i(),r("svg",uo,j[13]||(j[13]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)]))):O.status==="In Progress"?(i(),r("svg",co,j[14]||(j[14]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"},null,-1)]))):O.status==="Overdue"?(i(),r("svg",mo,j[15]||(j[15]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)]))):(i(),r("span",vo))],2),e("div",po,[e("p",{class:"text-xs font-medium text-gray-700 text-center truncate",title:O.name},h(O.name),9,ho)]),e("div",go,[e("p",fo,h(O.completion_date?new Date(O.completion_date).toLocaleDateString():"No date"),1)])],2))),128))])])):(i(),r("div",no,j[12]||(j[12]=[e("p",{class:"text-gray-400 text-sm"},"No milestones found for this project.",-1)])))]),e("div",yo,[e("div",wo,[e("div",bo,[p(K,{for:"status-filter",value:"Status"}),p(ye,{id:"status-filter",modelValue:R.status,"onUpdate:modelValue":j[0]||(j[0]=O=>R.status=O),options:W,"value-key":"value","label-key":"label",placeholder:"All Statuses",class:"mt-1"},null,8,["modelValue"])]),e("div",_o,[p(K,{for:"assigned-filter",value:"Assigned To"}),p(ye,{id:"assigned-filter",modelValue:R.assigned_to_user_id,"onUpdate:modelValue":j[1]||(j[1]=O=>R.assigned_to_user_id=O),options:$.value,"value-key":"value","label-key":"label",placeholder:"All Users",class:"mt-1"},null,8,["modelValue","options"])]),e("div",xo,[p(K,{for:"milestone-filter",value:"Milestone"}),p(ye,{id:"milestone-filter",modelValue:R.milestone_id,"onUpdate:modelValue":j[2]||(j[2]=O=>R.milestone_id=O),options:L.value,"value-key":"value","label-key":"label",placeholder:"All Milestones",class:"mt-1"},null,8,["modelValue","options"])]),e("div",ko,[p(K,{for:"due-date-filter",value:"Due Date"}),p(ye,{id:"due-date-filter",modelValue:R.due_date_range,"onUpdate:modelValue":j[3]||(j[3]=O=>R.due_date_range=O),options:Y,"value-key":"value","label-key":"label",placeholder:"All Dates",class:"mt-1"},null,8,["modelValue"])]),e("div",{class:"flex items-end"},[e("button",{type:"button",onClick:k,class:"px-3 py-2 text-sm text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-md transition-colors"}," Clear Filters ")])]),Object.values(R).some(O=>O!==null&&O!=="")?(i(),r("div",Do,[e("p",null,[Z(" Showing "+h(D.value.length)+" of "+h(o.value.length)+" tasks ",1),D.value.length===0?(i(),r("span",Co," (No tasks match the current filters) ")):x("",!0)])])):x("",!0)]),l.value?(i(),r("div",To," Loading tasks... ")):u.value?(i(),r("div",Mo,[e("p",Eo,h(u.value),1)])):o.value.length?(i(),r("div",jo,[p(Ct,{tasks:D.value,"project-id":a.projectId,"show-project-column":!1,onTaskUpdated:ae,onOpenTaskDetail:A},null,8,["tasks","project-id"])])):(i(),r("div",$o,j[17]||(j[17]=[e("p",{class:"text-gray-400 text-sm"},"No tasks found for this project.",-1),e("p",{class:"text-gray-500 text-sm mt-2"},' Click the "Add Task" button to create a new task. ',-1)]))),p(Xn,{show:d.value,"project-id":a.projectId,"selected-task":m.value,"project-users":a.projectUsers,"task-types":E.value,milestones:g.value,"loading-task-types":y.value,"loading-milestones":C.value,onClose:j[4]||(j[4]=O=>d.value=!1),onSaved:B,onOpenAddMilestoneModal:G},null,8,["show","project-id","selected-task","project-users","task-types","milestones","loading-task-types","loading-milestones"]),p(Kt,{show:c.value,"project-id":a.projectId,onClose:j[5]||(j[5]=O=>c.value=!1),onSaved:ne},null,8,["show","project-id"]),p(Jt,{show:v.value,"task-for-note":w.value,onClose:j[6]||(j[6]=O=>v.value=!1),onNoteAdded:De},null,8,["show","task-for-note"]),p($e,{show:_.value,onClose:j[9]||(j[9]=O=>_.value=!1)},{default:z(()=>[e("div",So,[j[21]||(j[21]=e("h2",{class:"text-lg font-medium text-gray-900 mb-4"}," Block Task ",-1)),e("div",Vo,[j[18]||(j[18]=e("p",{class:"text-sm text-gray-600 mb-2"}," Please provide a reason for blocking this task: ",-1)),he(e("textarea",{"onUpdate:modelValue":j[7]||(j[7]=O=>T.value=O),class:"w-full rounded-md shadow-sm border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",rows:"3",placeholder:"Enter reason for blocking..."},null,512),[[ke,T.value]])]),e("div",Ao,[p(we,{onClick:j[8]||(j[8]=O=>_.value=!1)},{default:z(()=>j[19]||(j[19]=[Z(" Cancel ",-1)])),_:1,__:[19]}),p(ge,{onClick:I,disabled:!T.value.trim(),class:"bg-red-600 hover:bg-red-700"},{default:z(()=>j[20]||(j[20]=[Z(" Block Task ",-1)])),_:1,__:[20]},8,["disabled"])])])]),_:1},8,["show"])]))}};function Io(a){const t=Oe();return{userSignature:N(()=>{const n=t.value&&t.value.name?t.value.name:"",o=a.name??"",l="+61 456 639 389",u="ozeeweb.com.au",d="#1a73e8",m="#fbbc05",c="#1a202c",v="#4a5568",w="#e5e7eb",_="#f9fafb",V=`${window.location.origin}/logo.png`,T=`https://img.icons8.com/ios-filled/20/${d.substring(1)}/facebook-new.png`,E=`https://img.icons8.com/ios-filled/20/${d.substring(1)}/twitter.png`,g=`https://img.icons8.com/ios-filled/20/${d.substring(1)}/linkedin.png`,y=`https://img.icons8.com/ios-filled/20/${d.substring(1)}/instagram-new.png`;return`
            <div style="font-family: 'Inter', sans-serif; padding: 20px; border: 1px solid ${w}; margin-top: 30px; background-color: ${_}; border-radius: 8px; overflow: hidden; box-shadow: 0 0 0 3px ${m};">
                <table role="presentation" cellspacing="0" cellpadding="0" width="100%">
                    <tr>
                        <td style="vertical-align: middle;">
                            <p style="margin: 0; font-size: 18px; color: ${c};">Best Regards</p>
                            <p style="margin: 0; font-size: 18px; font-weight: bold; color: ${c};">${n}</p>
                            <p style="margin: 5px 0 5px 0; font-size: 14px; color: ${v};">${o}</p>
                            <p style="margin: 0 0 15px 0; font-size: 12px; color: ${v};">
                                Your website and social media are like your home, first impressions matter!
                            </p>
                            <table role="presentation" cellspacing="0" cellpadding="0">
                                <tr>
                                    <td style="padding-right: 15px;">
                                        <p style="margin: 0; font-size: 13px; color: ${v};">📞 ${l}</p>
                                        <p style="margin: 5px 0 0 0; font-size: 13px; color: ${v};">🌐 <a href="https://${u}" target="_blank" style="color: ${d}; text-decoration: none;">${u}</a></p>
                                    </td>
                                </tr>
                            </table>
                            <div style="margin-top: 15px; text-align: left;">
                                <a href="https://www.facebook.com/yourprofile" target="_blank" style="display: inline-block; margin-right: 8px; color: ${d}; text-decoration: none;">
                                    <img src="${T}" alt="Facebook" style="vertical-align: middle;">
                                </a>
                                <a href="https://twitter.com/yourhandle" target="_blank" style="display: inline-block; margin-right: 8px; color: ${d}; text-decoration: none;">
                                    <img src="${E}" alt="Twitter" style="vertical-align: middle;">
                                </a>
                                <a href="https://www.linkedin.com/in/yourprofile" target="_blank" style="display: inline-block; margin-right: 8px; color: ${d}; text-decoration: none;">
                                    <img src="${g}" alt="LinkedIn" style="vertical-align: middle;">
                                </a>
                                <a href="https://www.instagram.com/yourprofile" target="_blank" style="display: inline-block; margin-right: 8px; color: ${d}; text-decoration: none;">
                                    <img src="${y}" alt="Instagram" style="vertical-align: middle;">
                                </a>
                            </div>
                        </td>
                        <td style="padding-left: 20px; vertical-align: middle; width: 120px; text-align: right;">
                            <img src="${V}" alt="Company Logo" width="100" style="display: block; border-radius: 8px; margin-left: auto;">
                        </td>
                    </tr>
                </table>

                <p style="margin-top: 25px; font-size: 12px; color: ${v}; text-align: center;">
                    Powered by MMS IT & Web Solutions PTY Ltd.
                </p>
                <p style="margin-top: 10px; font-style: italic; color: ${v}; text-align: center; font-size: 13px;">
                    Please consider the environment before printing this email.
                </p>
                <p style="margin-top: 10px; text-align: center; font-size: 13px;">
                    How did I do? <a href="https://www.example.com/review" target="_blank" style="color: ${d}; text-decoration: none; font-weight: bold;">Leave a review!</a>
                </p>
            </div>
        `})}}const Lo={class:"mb-4"},Po={key:0,class:"text-gray-500 text-sm"},No={key:1,class:"text-red-500 text-sm"},Uo={class:"mb-4"},Ro={class:"mb-6"},Fo={class:"mb-2 flex justify-end space-x-2"},Bo={class:"mb-4"},Ho={key:0,class:"mt-2"},Wo={class:"text-gray-700 text-base mb-2"},Yo=["innerHTML"],zo={class:"p-6"},qo={key:0,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert"},Zo={class:"block sm:inline"},Go={class:"mb-4"},Ko={class:"mb-6"},Jo={class:"flex justify-end space-x-3"},Xo={class:"p-6"},Qo={key:0,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert"},er={class:"block sm:inline"},tr={class:"mb-4"},sr={class:"mb-6"},ar={class:"flex justify-end space-x-3"},lr={__name:"ComponseEmailModal",props:{show:{type:Boolean,default:!1},projectId:{type:Number,required:!0},userProjectRole:{type:Object,required:!0}},emits:["close","submitted","error"],setup(a,{emit:t}){const s=a,n=t,o=Te({project_id:s.projectId,client_ids:[],subject:"",body:"",status:"pending_approval"}),l=b([]),u=b(!0),d=b(""),m=b(!1),c=b(""),v=b(""),w=b(""),_=b(!1),V=b(""),T=b("bullet"),E=b(""),g=b("full_name"),y=b(""),C=b([{value:"full_name",label:"Full Name"},{value:"first_name",label:"First Name"},{value:"last_name",label:"Last Name"},{value:"custom",label:"Custom"}]),{userSignature:R}=Io(N(()=>s.userProjectRole)),W=N(()=>o.body||""),{processedHtmlBody:$}=ws(W),L=N(()=>{if(o.client_ids&&o.client_ids.length>0){const B=o.client_ids[0],A=l.value.find(G=>G.id===B);if(A){const G=A.name.split(" ").filter(I=>I.length>0),ne=G.length>0?G[0]:"",De=G.length>1?G[G.length-1]:"";switch(g.value){case"full_name":return`Hi ${A.name},`;case"first_name":return`Hi ${ne},`;case"last_name":return`Hi ${De},`;case"custom":return`Hi ${y.value.trim()||"there"},`;default:return`Hi ${A.name},`}}}return"Hi there,"});ce(()=>s.show,B=>{B&&(Object.assign(o,{project_id:s.projectId,client_ids:[],subject:"",body:"",status:"pending_approval"}),g.value="full_name",y.value="",d.value="",F())},{immediate:!0});const Y=B=>{const A={...B};return A.client_ids&&Array.isArray(A.client_ids)&&(A.client_ids=A.client_ids.map(G=>({id:G}))),A.body=$.value,A.greeting_name=L.value,A.custom_greeting_name=y.value.trim(),A.first_client_id=o.client_ids&&o.client_ids.length>0?o.client_ids[0]:null,A},M=()=>{n("close")},D=B=>{n("submitted",B)},k=B=>{n("error",B)},S=()=>{c.value="",v.value="",w.value="",m.value=!0},ae=()=>{if(!c.value.trim()){w.value="Link text cannot be empty.";return}let B=v.value.trim();!B.startsWith("http://")&&!B.startsWith("https://")&&(B="http://"+B);try{new URL(B)}catch{w.value="Please enter a valid URL (e.g., https://example.com or www.example.com).";return}const A=`[${c.value.trim()}] {${B}}`;o.body+=A,m.value=!1,c.value="",v.value="",w.value=""},ie=()=>{V.value="",T.value="bullet",E.value="",_.value=!0},U=()=>{const B=V.value.split(`
`).map(ne=>ne.trim()).filter(ne=>ne!=="");if(B.length===0){E.value="Please enter at least one list item.";return}const A=T.value==="bullet"?"ul":"ol";let G=`<${A}>`;B.forEach(ne=>{G+=`<li>${ne}</li>`}),G+=`</${A}>`,o.body+=G,_.value=!1,V.value="",E.value=""},F=async()=>{var B,A;u.value=!0,d.value=null;try{const G=await window.axios.get(`/api/projects/${s.projectId}/sections/clients?type=clients`);l.value=G.data}catch(G){console.error("Failed to fetch project clients:",G),d.value=((A=(B=G.response)==null?void 0:B.data)==null?void 0:A.message)||"Failed to load client data."}finally{u.value=!1}};return _e(()=>{}),(B,A)=>(i(),r(J,null,[p(Ae,{show:a.show,title:"Compose New Email","api-endpoint":"/api/emails","http-method":"post","form-data":o,"submit-button-text":"Submit for Approval","success-message":"Email submitted for approval successfully!","format-data-for-api":Y,onClose:M,onSubmitted:D,onError:k,"max-width":"3xl"},{default:z(({errors:G})=>[e("div",Lo,[p(K,{for:"client_ids",value:"To (Clients)"}),u.value?(i(),r("div",Po,"Loading clients...")):d.value?(i(),r("div",No,h(d.value),1)):(i(),se(et,{key:2,modelValue:o.client_ids,"onUpdate:modelValue":A[0]||(A[0]=ne=>o.client_ids=ne),options:l.value,placeholder:"Select one or more clients","label-key":"name","value-key":"id"},null,8,["modelValue","options"])),p(re,{message:G.client_ids?G.client_ids[0]:"",class:"mt-2"},null,8,["message"])]),e("div",Uo,[p(K,{for:"subject",value:"Subject"}),p(pe,{id:"subject",type:"text",class:"mt-1 block w-full",modelValue:o.subject,"onUpdate:modelValue":A[1]||(A[1]=ne=>o.subject=ne),required:""},null,8,["modelValue"]),p(re,{message:G.subject?G.subject[0]:"",class:"mt-2"},null,8,["message"])]),e("div",Ro,[e("div",Fo,[p(we,{type:"button",onClick:ie},{default:z(()=>A[13]||(A[13]=[Z(" Insert List ",-1)])),_:1,__:[13]}),p(we,{type:"button",onClick:S},{default:z(()=>A[14]||(A[14]=[Z(" Insert Link ",-1)])),_:1,__:[14]})]),e("div",Bo,[p(K,{for:"greeting_type",value:"Address Client By"}),p(ye,{id:"greeting_type",modelValue:g.value,"onUpdate:modelValue":A[2]||(A[2]=ne=>g.value=ne),options:C.value,"value-key":"value","label-key":"label",class:"mt-1 block w-full"},null,8,["modelValue","options"]),g.value==="custom"?(i(),r("div",Ho,[p(K,{for:"custom_greeting_name",value:"Custom Name"}),p(pe,{id:"custom_greeting_name",type:"text",class:"mt-1 block w-full",modelValue:y.value,"onUpdate:modelValue":A[3]||(A[3]=ne=>y.value=ne),placeholder:"e.g., Azaan"},null,8,["modelValue"])])):x("",!0)]),e("p",Wo,h(L.value),1),p(K,{for:"body",value:"Email Body",class:"sr-only"}),p(Cs,{id:"body",modelValue:o.body,"onUpdate:modelValue":A[4]||(A[4]=ne=>o.body=ne),placeholder:"Compose your email here...",height:"300px"},null,8,["modelValue"]),p(re,{message:G.body?G.body[0]:"",class:"mt-2"},null,8,["message"])]),H(R)?(i(),r("div",{key:0,class:"unselectable-signature",innerHTML:H(R)},null,8,Yo)):x("",!0)]),_:1},8,["show","form-data"]),p($e,{show:m.value,onClose:A[8]||(A[8]=G=>m.value=!1),"max-width":"md"},{default:z(()=>[e("div",zo,[A[17]||(A[17]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Insert Link",-1)),w.value?(i(),r("div",qo,[e("span",Zo,h(w.value),1)])):x("",!0),e("div",Go,[p(K,{for:"link_text",value:"Link Text"}),p(pe,{id:"link_text",type:"text",class:"mt-1 block w-full",modelValue:c.value,"onUpdate:modelValue":A[5]||(A[5]=G=>c.value=G),onKeyup:qe(ae,["enter"])},null,8,["modelValue"])]),e("div",Ko,[p(K,{for:"link_url",value:"URL"}),p(pe,{id:"link_url",type:"text",class:"mt-1 block w-full",modelValue:v.value,"onUpdate:modelValue":A[6]||(A[6]=G=>v.value=G),placeholder:"e.g., https://www.example.com",onKeyup:qe(ae,["enter"])},null,8,["modelValue"])]),e("div",Jo,[p(we,{onClick:A[7]||(A[7]=G=>m.value=!1)},{default:z(()=>A[15]||(A[15]=[Z("Cancel",-1)])),_:1,__:[15]}),p(ge,{onClick:ae},{default:z(()=>A[16]||(A[16]=[Z("Insert",-1)])),_:1,__:[16]})])])]),_:1},8,["show"]),p($e,{show:_.value,onClose:A[12]||(A[12]=G=>_.value=!1),"max-width":"md"},{default:z(()=>[e("div",Xo,[A[21]||(A[21]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Insert List",-1)),E.value?(i(),r("div",Qo,[e("span",er,h(E.value),1)])):x("",!0),e("div",tr,[p(K,{for:"list_items",value:"List Items (one per line)"}),he(e("textarea",{id:"list_items",rows:"6",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full","onUpdate:modelValue":A[9]||(A[9]=G=>V.value=G),placeholder:"Enter each list item on a new line"},null,512),[[ke,V.value]])]),e("div",sr,[p(K,{for:"list_type",value:"List Type"}),he(e("select",{id:"list_type",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full","onUpdate:modelValue":A[10]||(A[10]=G=>T.value=G)},A[18]||(A[18]=[e("option",{value:"bullet"},"Bulleted List",-1),e("option",{value:"numbered"},"Numbered List",-1)]),512),[[Ze,T.value]])]),e("div",ar,[p(we,{onClick:A[11]||(A[11]=G=>_.value=!1)},{default:z(()=>A[19]||(A[19]=[Z("Cancel",-1)])),_:1,__:[19]}),p(ge,{onClick:U},{default:z(()=>A[20]||(A[20]=[Z("Insert List",-1)])),_:1,__:[20]})])])]),_:1},8,["show"])],64))}},$t=Ie(lr,[["__scopeId","data-v-70bf1503"]]),ir={key:0,class:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow"},nr={class:"flex justify-between items-center mb-4"},or={key:0,class:"flex gap-3"},rr={key:1,class:"mt-2 bg-red-100 border border-red-400 text-red-700 px-4 py-2 rounded relative",role:"alert"},dr={class:"block sm:inline"},ur={class:"mb-4 bg-gray-50 p-4 rounded-lg"},cr={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},mr={class:"mt-1 relative rounded-md shadow-sm"},vr={__name:"ProjectEmailsTab",props:{projectId:{type:Number,required:!0},canViewEmails:{type:Boolean,required:!0},canComposeEmails:{type:Boolean,required:!0},canApproveEmails:{type:Boolean,required:!0},userProjectRole:{type:Object,required:!0},openCompose:{type:Boolean,required:!1,default:!1}},emits:["emailsUpdated","resetOpenCompose"],setup(a,{emit:t}){const s=a,n=t,o=b([]),l=b(!0),u=b(""),d=b(null),m=b(!1),c=b(!1),v=b(""),w=b(""),_=b("post"),V=b(""),T=b(""),E=b(!1),g=b(!1),y=b(null),C=b(""),R=b(""),W=b(""),$=b(null);Oe();const L=Te({type:"",startDate:"",endDate:"",search:""});let Y=null;const M=()=>{S()},D=()=>{L.type="",L.startDate="",L.endDate="",L.search="",S()},k=()=>{clearTimeout(Y),Y=setTimeout(()=>{M()},500)},S=async()=>{l.value=!0,u.value="";try{const I=new URLSearchParams;L.type&&I.append("type",L.type),L.startDate&&I.append("start_date",L.startDate),L.endDate&&I.append("end_date",L.endDate),L.search&&I.append("search",L.search);const f=I.toString(),j=`/api/projects/${s.projectId}/emails-simplified${f?`?${f}`:""}`,O=await window.axios.get(j);o.value=O.data,n("emailsUpdated",o.value)}catch(I){u.value="Failed to load email data.",console.error("Error fetching project emails:",I)}finally{l.value=!1}},ae=async I=>{d.value=null,m.value=!0;try{const f=await window.axios.get(`/api/emails/${I.id}`);d.value={...I,subject:f.data.subject,body:f.data.body_html}}catch(f){console.error("Failed to fetch full email details:",f),d.value={subject:"Error",body:"Failed to load email content.",created_at:new Date().toISOString(),status:"error",sender:{name:"System"}}}},ie=async I=>{try{console.log("Opening email editor for email ID:",I.id),d.value=I;const j=(await window.axios.get(`/api/emails/${I.id}/edit-content`)).data;j.template_id?(console.log("Opening template-based email editor for email ID:",I.id),y.value=I.id,C.value=`/api/emails/${I.id}/edit-and-approve`,R.value="Approve & Send",W.value="Email updated and approved successfully!",$.value=j.client_id,g.value=!0,m.value=!1):(v.value="Edit and Approve Email",w.value=`/api/emails/${I.id}/edit-and-approve`,_.value="post",V.value="Approve & Send",T.value="Email updated and approved successfully!",c.value=!0,m.value=!1)}catch(f){console.error("Failed to determine email type:",f),u.value="Failed to load email for editing."}},U=I=>{d.value=I,v.value="Reject Email",w.value=`/api/emails/${I.id}/reject`,_.value="post",V.value="Reject Email",T.value="Email rejected successfully!",c.value=!0,m.value=!1},F=async I=>{console.log("Form submitted successfully:",I),await S(),c.value=!1},B=()=>{c.value=!1},A=()=>{E.value=!1,n("resetOpenCompose")},G=async I=>{console.log("Compose email submitted successfully:",I),await S(),E.value=!1,n("resetOpenCompose")},ne=()=>{g.value=!1},De=async I=>{console.log("Template email edited and submitted successfully:",I),await S(),g.value=!1};return ce(()=>s.openCompose,I=>{console.log("Watcher triggered: openCompose changed to",I),I&&(console.log("Opening compose email modal"),E.value=!0)}),_e(()=>{s.canViewEmails&&S(),s.openCompose&&(E.value=!0)}),(I,f)=>{var j;return a.canViewEmails?(i(),r("div",ir,[e("div",nr,[f[10]||(f[10]=e("h4",{class:"text-lg font-semibold text-gray-900"},"Email Communication",-1)),a.canComposeEmails?(i(),r("div",or,[p(ge,{class:"bg-indigo-600 hover:bg-indigo-700 transition-colors",onClick:f[0]||(f[0]=O=>E.value=!0)},{default:z(()=>f[9]||(f[9]=[Z(" Compose Email ",-1)])),_:1,__:[9]})])):x("",!0),u.value?(i(),r("div",rr,[e("span",dr,h(u.value),1)])):x("",!0)]),e("div",ur,[e("div",cr,[e("div",null,[p(K,{for:"typeFilter",value:"Type"}),he(e("select",{id:"typeFilter","onUpdate:modelValue":f[1]||(f[1]=O=>L.type=O),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",onChange:M},f[11]||(f[11]=[e("option",{value:""},"All Types",-1),e("option",{value:"sent"},"Sent",-1),e("option",{value:"received"},"Received",-1)]),544),[[Ze,L.type]])]),e("div",null,[p(K,{for:"startDate",value:"From Date"}),p(pe,{type:"date",id:"startDate",modelValue:L.startDate,"onUpdate:modelValue":f[2]||(f[2]=O=>L.startDate=O),class:"mt-1 block w-full",onChange:M},null,8,["modelValue"])]),e("div",null,[p(K,{for:"endDate",value:"To Date"}),p(pe,{type:"date",id:"endDate",modelValue:L.endDate,"onUpdate:modelValue":f[3]||(f[3]=O=>L.endDate=O),class:"mt-1 block w-full",onChange:M},null,8,["modelValue"])]),e("div",null,[p(K,{for:"searchFilter",value:"Search Content"}),e("div",mr,[p(pe,{type:"text",id:"searchFilter",modelValue:L.search,"onUpdate:modelValue":f[4]||(f[4]=O=>L.search=O),class:"block w-full pr-10",placeholder:"Search in email content...",onInput:k},null,8,["modelValue"]),f[12]||(f[12]=e("div",{class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})])],-1))])])]),e("div",{class:"mt-3 flex justify-end"},[e("button",{type:"button",class:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:D}," Reset Filters ")])]),p(Ds,{emails:o.value,loading:l.value,error:u.value,onView:ae},null,8,["emails","loading","error"]),p(bs,{show:m.value,email:d.value,"can-approve-emails":a.canApproveEmails,onClose:f[5]||(f[5]=O=>m.value=!1),onEdit:ie,onReject:U},null,8,["show","email","can-approve-emails"]),p($t,{show:E.value,"project-id":a.projectId,"user-project-role":a.userProjectRole,onClose:A,onSubmitted:G,onError:f[6]||(f[6]=O=>console.error("ComposeEmailModal error:",O))},null,8,["show","project-id","user-project-role"]),p(_s,{show:c.value,title:v.value,"api-endpoint":w.value,"http-method":_.value,"submit-button-text":V.value,"success-message":T.value,"email-id":(j=d.value)==null?void 0:j.id,"project-id":a.projectId,onClose:B,onSubmitted:F,onError:f[7]||(f[7]=O=>console.error("EmailActionModal error:",O)),onFetchEmails:S},null,8,["show","title","api-endpoint","http-method","submit-button-text","success-message","email-id","project-id"]),p(xs,{show:g.value,title:"Edit Template Email","api-endpoint":C.value,"http-method":"post","submit-button-text":R.value,"success-message":W.value,"email-id":y.value,"project-id":a.projectId,"client-id":$.value,onClose:ne,onSubmitted:De,onError:f[8]||(f[8]=O=>console.error("EditTemplateEmailModal error:",O))},null,8,["show","api-endpoint","submit-button-text","success-message","email-id","project-id","client-id"])])):x("",!0)}}},pr={key:0,class:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow"},hr={class:"flex justify-between items-center mb-4"},gr={class:"flex gap-3"},fr={class:"mb-4 bg-gray-50 p-4 rounded-lg"},yr={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},wr={class:"mt-1 relative rounded-md shadow-sm"},br={class:"mb-8 p-4 bg-blue-50 rounded-md"},_r={class:"flex items-center"},xr={class:"text-sm text-blue-800"},kr={key:0,class:"text-center text-gray-600 text-sm animate-pulse py-4"},Dr={key:1,class:"text-center text-red-600 text-sm font-medium py-4"},Cr={key:2,class:"space-y-4"},Tr={class:"flex justify-between"},Mr={class:"flex-grow"},Er={key:0,class:"text-xs text-red-400 block mt-1"},jr={class:"flex items-center mt-1"},$r={class:"text-xs text-gray-500"},Sr={key:0,class:"ml-2 px-2 py-0.5 bg-indigo-100 text-indigo-800 text-xs rounded-full"},Vr={key:0},Ar={key:3,class:"text-gray-400 text-sm"},Or={class:"p-6"},Ir={class:"flex justify-between items-center mb-4"},Lr={key:0,class:"mb-4 p-3 bg-gray-100 rounded-md"},Pr={class:"text-sm text-gray-700"},Nr={class:"text-xs text-gray-500 mt-1"},Ur={key:1,class:"mb-4"},Rr={key:0,class:"text-center py-4"},Fr={key:1,class:"space-y-3 max-h-60 overflow-y-auto"},Br={class:"text-sm text-gray-700"},Hr={class:"text-xs text-gray-500 mt-1"},Wr={key:2,class:"text-center py-3"},Yr={key:2,class:"mb-4"},zr={key:0,class:"mt-2 text-sm text-red-600"},qr={key:3,class:"mt-6 flex justify-end"},Zr={__name:"ProjectNotesTab",props:{projectId:{type:Number,required:!0},googleChatId:{type:String,default:null},canViewNotes:{type:Boolean,required:!0},canAddNotes:{type:Boolean,required:!0}},emits:["notesUpdated"],setup(a,{emit:t}){const s=a,n=t,o=b([]),l=b(!0),u=b(""),d=b(!1),m=b(!1),c=b(null),v=b(""),w=b(""),_=b([]),V=b(!1),T=Te({startDate:"",endDate:"",search:""});let E=null;const g=async()=>{l.value=!0,u.value="";try{const Y=new URLSearchParams;T.startDate&&Y.append("start_date",T.startDate),T.endDate&&Y.append("end_date",T.endDate),T.search&&Y.append("search",T.search);const M=Y.toString(),D=`/api/projects/${s.projectId}/notes${M?`?${M}`:""}`,k=await window.axios.get(D);o.value=k.data,n("notesUpdated",o.value)}catch(Y){u.value="Failed to load notes data.",console.error("Error fetching project notes:",Y)}finally{l.value=!1}},y=()=>{d.value=!0},C=async Y=>{c.value=Y,v.value="",w.value="",_.value=[],V.value=!0,m.value=!0;try{const M=await window.axios.get(`/api/projects/${s.projectId}/notes/${Y.id}/replies`);M.data.success?_.value=M.data.replies:console.error("Failed to fetch replies:",M.data.message)}catch(M){console.error("Error fetching replies:",M)}finally{V.value=!1}},R=async()=>{var Y,M;if(!c.value||!v.value.trim()){w.value="Reply content is required";return}w.value="";try{const D=await window.axios.post(`/api/projects/${s.projectId}/notes/${c.value.id}/reply`,{content:v.value});if(D.data.success){v.value="",V.value=!0;const k=await window.axios.get(`/api/projects/${s.projectId}/notes/${c.value.id}/replies`);k.data.success&&(_.value=k.data.replies),V.value=!1,await g()}else w.value=D.data.message||"Failed to send reply"}catch(D){console.error("Error sending reply:",D),w.value=((M=(Y=D.response)==null?void 0:Y.data)==null?void 0:M.message)||"An error occurred while sending the reply"}},W=()=>{g()},$=()=>{T.startDate="",T.endDate="",T.search="",g()},L=()=>{clearTimeout(E),E=setTimeout(()=>{W()},500)};return _e(()=>{s.canViewNotes&&g()}),(Y,M)=>a.canViewNotes?(i(),r("div",pr,[e("div",hr,[M[10]||(M[10]=e("h4",{class:"text-lg font-semibold text-gray-900"},"Project Notes",-1)),e("div",gr,[a.canAddNotes?(i(),se(ge,{key:0,class:"bg-indigo-600 hover:bg-indigo-700 transition-colors",onClick:y},{default:z(()=>M[9]||(M[9]=[Z(" Add Note ",-1)])),_:1,__:[9]})):x("",!0)])]),e("div",fr,[e("div",yr,[e("div",null,[p(K,{for:"noteStartDate",value:"From Date"}),p(pe,{type:"date",id:"noteStartDate",modelValue:T.startDate,"onUpdate:modelValue":M[0]||(M[0]=D=>T.startDate=D),class:"mt-1 block w-full",onChange:W},null,8,["modelValue"])]),e("div",null,[p(K,{for:"noteEndDate",value:"To Date"}),p(pe,{type:"date",id:"noteEndDate",modelValue:T.endDate,"onUpdate:modelValue":M[1]||(M[1]=D=>T.endDate=D),class:"mt-1 block w-full",onChange:W},null,8,["modelValue"])]),e("div",null,[p(K,{for:"noteSearchFilter",value:"Search Content"}),e("div",wr,[p(pe,{type:"text",id:"noteSearchFilter",modelValue:T.search,"onUpdate:modelValue":M[2]||(M[2]=D=>T.search=D),class:"block w-full pr-10",placeholder:"Search in note content...",onInput:L},null,8,["modelValue"]),M[11]||(M[11]=e("div",{class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})])],-1))])])]),e("div",{class:"mt-3 flex justify-end"},[e("button",{type:"button",class:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:$}," Reset Filters ")])]),e("div",br,[e("div",_r,[M[13]||(M[13]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-blue-600 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("p",xr,[M[12]||(M[12]=Z(" Daily Standups are now available in their own dedicated tab. ",-1)),e("button",{onClick:M[3]||(M[3]=D=>Y.$emit("changeTab","standups")),class:"text-blue-600 hover:text-blue-800 font-medium underline"}," Click here to view Daily Standups ")])])]),e("div",null,[M[15]||(M[15]=e("h5",{class:"text-md font-semibold text-gray-900 mb-4 border-b pb-2"},"Notes",-1)),l.value?(i(),r("div",kr," Loading notes... ")):u.value?(i(),r("div",Dr,h(u.value),1)):o.value.length?(i(),r("div",Cr,[(i(!0),r(J,null,te(o.value,D=>{var k;return i(),r("div",{key:D.id,class:"p-4 bg-gray-50 rounded-md shadow-sm hover:bg-gray-100 transition-colors"},[e("div",Tr,[e("div",Mr,[e("p",{class:ee(["text-sm",{"text-gray-700":D.content!=="[Encrypted content could not be decrypted]","text-red-500 italic":D.content==="[Encrypted content could not be decrypted]"}])},[Z(h(D.content)+" ",1),D.content==="[Encrypted content could not be decrypted]"?(i(),r("span",Er," (There was an issue decrypting this note. Please contact an administrator.) ")):x("",!0)],2),e("div",jr,[e("p",$r,"Added by "+h(((k=D.user)==null?void 0:k.name)||"Unknown")+" on "+h(new Date(D.created_at).toLocaleDateString()),1),D.reply_count>0?(i(),r("span",Sr,h(D.reply_count)+" "+h(D.reply_count===1?"reply":"replies"),1)):x("",!0)])]),a.googleChatId&&D.chat_message_id?(i(),r("div",Vr,[p(we,{class:"text-sm text-indigo-600 hover:text-indigo-800",onClick:S=>C(D)},{default:z(()=>M[14]||(M[14]=[Z(" View ",-1)])),_:2,__:[14]},1032,["onClick"])])):x("",!0)])])}),128))])):(i(),r("p",Ar,"No notes available."))]),p(Tt,{show:d.value,"project-id":a.projectId,onClose:M[4]||(M[4]=D=>d.value=!1),onNoteAdded:g},null,8,["show","project-id"]),p($e,{show:m.value,onClose:M[8]||(M[8]=D=>m.value=!1)},{default:z(()=>{var D;return[e("div",Or,[e("div",Ir,[M[17]||(M[17]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Reply to Note",-1)),e("button",{onClick:M[5]||(M[5]=k=>m.value=!1),class:"text-gray-400 hover:text-gray-500"},M[16]||(M[16]=[e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),c.value?(i(),r("div",Lr,[e("p",Pr,h(c.value.content),1),e("p",Nr,"Added by "+h(((D=c.value.user)==null?void 0:D.name)||"Unknown")+" on "+h(new Date(c.value.created_at).toLocaleDateString()),1)])):x("",!0),c.value?(i(),r("div",Ur,[M[20]||(M[20]=e("h4",{class:"text-sm font-medium text-gray-700 mb-2"},"Replies",-1)),V.value?(i(),r("div",Rr,M[18]||(M[18]=[e("p",{class:"text-gray-500 text-sm"},"Loading replies...",-1)]))):_.value.length?(i(),r("div",Fr,[(i(!0),r(J,null,te(_.value,k=>{var S;return i(),r("div",{key:k.id,class:"p-2 bg-gray-50 rounded border-l-2 border-indigo-300"},[e("p",Br,h(k.content),1),e("p",Hr,"Replied by "+h(((S=k.user)==null?void 0:S.name)||"Unknown")+" on "+h(new Date(k.created_at).toLocaleDateString()),1)])}),128))])):(i(),r("div",Wr,M[19]||(M[19]=[e("p",{class:"text-gray-500 text-sm"},"No replies yet. Be the first to reply!",-1)])))])):x("",!0),a.canAddNotes?(i(),r("div",Yr,[p(K,{for:"reply-content",value:"Your Reply"}),he(e("textarea",{id:"reply-content","onUpdate:modelValue":M[6]||(M[6]=k=>v.value=k),class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full h-32",placeholder:"Enter your reply..."},null,512),[[ke,v.value]]),w.value?(i(),r("p",zr,h(w.value),1)):x("",!0)])):x("",!0),a.canAddNotes?(i(),r("div",qr,[p(we,{onClick:M[7]||(M[7]=k=>m.value=!1),class:"mr-2"},{default:z(()=>M[21]||(M[21]=[Z("Cancel",-1)])),_:1,__:[21]}),p(ge,{onClick:R},{default:z(()=>M[22]||(M[22]=[Z("Send Reply",-1)])),_:1,__:[22]})])):x("",!0)])]}),_:1},8,["show"])])):x("",!0)}},Gr={class:"w-full"},Kr={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},Jr={key:1,class:"text-red-600 text-sm py-2 text-center"},Xr={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},Qr={class:"p-4 bg-blue-100 rounded-lg shadow-sm transition-shadow hover:shadow-lg"},ed={class:"text-2xl font-bold text-blue-900 mt-1"},td={class:"p-4 bg-green-100 rounded-lg shadow-sm transition-shadow hover:shadow-lg"},sd={class:"text-2xl font-bold text-green-900 mt-1"},ad={class:"p-4 bg-red-100 rounded-lg shadow-sm transition-shadow hover:shadow-lg"},ld={class:"text-2xl font-bold mt-1"},id={key:3,class:"space-y-2 text-sm text-gray-700 mt-6 pt-4 border-t border-gray-200"},nd={key:0},od={class:"text-gray-900 whitespace-pre-wrap"},rd={key:4,class:"text-gray-400 text-sm mt-4 text-center"},dd={__name:"ProjectFinancialsCard",props:{projectId:{type:Number,required:!0},canViewProjectServicesAndPayments:{type:Boolean,default:!1},canViewProjectTransactions:{type:Boolean,default:!1}},setup(a){const t=a,s=b(null),n=b([]),o=b(!0),l=b(null),u=Be,d=N(()=>{var V;if(!me.value||Object.keys(me.value).length===0)return 0;const _=parseFloat(((V=s.value)==null?void 0:V.total_amount)||0);return Ve(_,"USD",u.value)}),m=N(()=>!n.value.length||!me.value||Object.keys(me.value).length===0?0:n.value.filter(_=>_.type==="expense").reduce((_,V)=>_+Ve(parseFloat(V.amount||0),V.currency,u.value),0)),c=N(()=>!n.value.length||!me.value||Object.keys(me.value).length===0?0:n.value.filter(_=>_.type==="income").reduce((_,V)=>_+Ve(parseFloat(V.amount||0),V.currency,u.value),0)),v=N(()=>c.value-m.value),w=async()=>{var _,V;if(o.value=!0,l.value=null,n.value=[],!me.value||Object.keys(me.value).length===0){l.value="Currency rates not loaded. Please try again.",o.value=!1;return}if(!t.canViewProjectServicesAndPayments&&!t.canViewProjectTransactions){l.value="You don't have permission to view project financials.",o.value=!1;return}try{if(t.canViewProjectServicesAndPayments){const T=await window.axios.get(`/api/projects/${t.projectId}/sections/services-payment`);s.value=T.data}else s.value=null;if(t.canViewProjectTransactions){const T=await window.axios.get(`/api/projects/${t.projectId}/sections/transactions`);n.value=T.data}else n.value=[]}catch(T){console.error("Failed to fetch project financials:",T),l.value=((V=(_=T.response)==null?void 0:_.data)==null?void 0:V.message)||"Failed to load financial data."}finally{o.value=!1}};return ce([()=>t.canViewProjectServicesAndPayments,()=>t.canViewProjectTransactions,u,me],(_,V)=>{t.projectId&&me.value&&Object.keys(me.value).length>0?w():t.projectId||(o.value=!0,l.value=null)},{immediate:!0,deep:!0}),(_,V)=>{var T,E;return i(),r("div",Gr,[o.value?(i(),r("div",Kr,[(i(),r(J,null,te(4,g=>e("div",{key:g,class:"p-4 bg-gray-100 rounded-lg animate-pulse h-24"},V[0]||(V[0]=[e("div",{class:"h-4 bg-gray-200 rounded w-1/2 mb-3"},null,-1),e("div",{class:"h-6 bg-gray-200 rounded w-3/4"},null,-1)]))),64))])):l.value?(i(),r("div",Jr,[e("p",null,h(l.value),1)])):(i(),r("div",Xr,[e("div",Qr,[V[1]||(V[1]=e("p",{class:"text-sm font-medium text-blue-800"},"Contract Value",-1)),e("p",ed,h(H(je)(d.value,H(u).value)),1)]),e("div",td,[V[2]||(V[2]=e("p",{class:"text-sm font-medium text-green-800"},"Total Income",-1)),e("p",sd,h(H(je)(c.value,H(u))),1)]),e("div",ad,[V[3]||(V[3]=e("p",{class:"text-sm font-medium text-red-800"},"Total Expenses",-1)),e("p",ld,h(H(je)(m.value,H(u))),1)]),e("div",{class:ee(["p-4 rounded-lg shadow-sm transition-shadow hover:shadow-lg",{"bg-green-100":v.value>=0,"bg-red-100":v.value<0}])},[e("p",{class:ee(["text-sm font-medium",{"text-green-800":v.value>=0,"text-red-800":v.value<0}])},"Profit/Loss",2),e("p",{class:ee(["text-2xl font-bold mt-1",{"text-green-900":v.value>=0,"text-red-900":v.value<0}])},h(H(je)(v.value,H(u))),3)],2)])),!o.value&&!l.value&&((T=s.value)!=null&&T.contract_details)?(i(),r("dl",id,[(E=s.value)!=null&&E.contract_details?(i(),r("div",nd,[V[4]||(V[4]=e("dt",{class:"font-medium w-full block mt-2"},"Contract Details:",-1)),e("dd",od,h(s.value.contract_details),1)])):x("",!0)])):x("",!0),!o.value&&!l.value&&!s.value&&!n.value.length?(i(),r("p",rd," No financial information available. ")):x("",!0)])}}},ud={class:"bg-white p-4 rounded-xl shadow-md transition-shadow hover:shadow-lg flex flex-col h-full"},cd={key:0,class:"flex-1 flex items-center justify-center"},md={key:1,class:"flex-1 flex items-center justify-center text-red-600 text-xs text-center"},vd={key:2,class:"flex-1 flex flex-col overflow-hidden"},pd={key:0,class:"flex-1 overflow-y-auto"},hd={class:"p-2 bg-gray-50 rounded-lg flex items-center space-x-2"},gd={class:"flex-shrink-0 bg-indigo-500 rounded-full h-8 w-8 flex items-center justify-center text-white font-medium text-xs"},fd={class:"flex-1"},yd={class:"text-sm font-semibold text-gray-900 truncate"},wd={class:"text-xs text-gray-500 flex items-center mt-0.5"},bd={key:0,class:"flex items-center space-x-1 mr-2"},_d={key:1,class:"flex items-center space-x-1"},xd=["href"],kd={key:0,class:"mt-3"},Dd={class:"space-y-1"},Cd={class:"flex items-center space-x-2"},Td={class:"flex-shrink-0 bg-gray-300 rounded-full h-6 w-6 flex items-center justify-center text-white font-medium text-xs"},Md={class:"text-xs font-semibold text-gray-900"},Ed={key:0,class:"text-xs text-gray-500"},jd=["href"],$d={key:1,class:"text-gray-400 text-xs flex-1 flex items-center justify-center text-center"},Sd={__name:"ProjectClientsCard",props:{projectId:{type:Number,required:!0},canViewClientContacts:{type:Boolean,default:!1}},setup(a){const t=a,s=b([]),n=b(!0),o=b(null),l=async()=>{var u,d;if(n.value=!0,o.value=null,!t.canViewClientContacts){o.value="You don't have permission to view project clients.",n.value=!1;return}try{const m=await window.axios.get(`/api/projects/${t.projectId}/sections/clients?type=clients`);s.value=m.data}catch(m){console.error("Failed to fetch project clients:",m),o.value=((d=(u=m.response)==null?void 0:u.data)==null?void 0:d.message)||"Failed to load client data."}finally{n.value=!1}};return _e(()=>{l()}),ce(()=>t.canViewClientContacts,()=>{l()}),(u,d)=>(i(),r("div",ud,[d[3]||(d[3]=e("h4",{class:"text-sm font-semibold text-gray-900 mb-3"},"Project Clients",-1)),n.value?(i(),r("div",cd,d[0]||(d[0]=[e("div",{class:"space-y-2 w-full"},[e("div",{class:"h-3 bg-gray-200 rounded animate-pulse w-3/4 mx-auto"}),e("div",{class:"h-3 bg-gray-200 rounded animate-pulse w-2/3 mx-auto"})],-1)]))):o.value?(i(),r("div",md,[e("p",null,h(o.value),1)])):(i(),r("div",vd,[s.value.length?(i(),r("div",pd,[(i(!0),r(J,null,te(s.value,m=>(i(),r("div",{key:m.id,class:"space-y-3"},[e("div",hd,[e("div",gd,h(m.name.charAt(0).toUpperCase()),1),e("div",fd,[e("p",yd,h(m.name),1),e("p",wd,[m.email?(i(),r("span",bd,[p(H(gt),{class:"h-3 w-3"}),e("span",null,h(m.email),1)])):x("",!0),m.phone?(i(),r("span",_d,[p(H(Os),{class:"h-3 w-3"}),e("span",null,h(m.phone),1)])):x("",!0)])]),m.website?(i(),r("a",{key:0,href:m.website,target:"_blank",class:"text-indigo-600 hover:text-indigo-800 transition-colors"},[p(H(Vs),{class:"h-5 w-5"})],8,xd)):x("",!0)]),m.contacts&&m.contacts.length?(i(),r("div",kd,[d[1]||(d[1]=e("p",{class:"text-xs font-semibold text-gray-500 uppercase mb-2 ml-2"},"Client Contacts",-1)),e("ul",Dd,[(i(!0),r(J,null,te(m.contacts,c=>(i(),r("li",{key:c.id,class:"flex items-center justify-between p-2 bg-gray-100 rounded-lg"},[e("div",Cd,[e("div",Td,h(c.name.charAt(0).toUpperCase()),1),e("div",null,[e("p",Md,h(c.name),1),c.role?(i(),r("p",Ed,h(c.role),1)):x("",!0)])]),c.email?(i(),r("a",{key:0,href:"mailto:"+c.email,class:"text-gray-400 hover:text-indigo-600 transition-colors",title:"Email Contact"},[p(H(gt),{class:"h-4 w-4"})],8,jd)):x("",!0)]))),128))])])):x("",!0)]))),128))])):(i(),r("p",$d,d[2]||(d[2]=[Z(" No clients assigned. ",-1),e("br",null,null,-1),Z(" To view this card, please assign a client to the project. ",-1)])))]))]))}},Vd={class:"bg-white p-4 rounded-xl shadow-md transition-shadow hover:shadow-lg flex flex-col h-full"},Ad={key:0,class:"flex-1 flex items-center justify-center"},Od={key:1,class:"flex-1 flex items-center justify-center text-red-600 text-xs text-center"},Id={key:2,class:"flex-1 flex flex-col overflow-hidden"},Ld={class:"flex items-center space-x-2 text-gray-500 mb-3"},Pd={class:"text-xs font-semibold"},Nd={key:0,class:"space-y-2 text-sm text-gray-700 flex-1 overflow-y-auto pr-2",style:{"max-height":"250px"}},Ud={class:"flex items-center space-x-2"},Rd={class:"flex-shrink-0 bg-indigo-500 rounded-full h-8 w-8 flex items-center justify-center text-white font-medium text-xs"},Fd={class:"flex-1"},Bd={class:"text-gray-900 text-sm"},Hd={class:"text-xs text-gray-500"},Wd={class:"flex-shrink-0 flex items-center space-x-2 ml-auto"},Yd={class:"text-xs text-gray-500"},zd={key:1,class:"text-gray-400 text-xs flex-1 flex items-center justify-center"},qd={__name:"ProjectTeamCard",props:{projectId:{type:Number,required:!0},canViewUsers:{type:Boolean,default:!1}},setup(a){const t=a,s=Oe(),n=b([]),o=b(!0),l=b(null),u=async()=>{var c,v;if(o.value=!0,l.value=null,!t.canViewUsers){l.value="You don't have permission to view project team members.",o.value=!1,n.value=[];return}try{const w=await window.axios.get(`/api/projects/${t.projectId}/sections/users`);n.value=w.data.users||[]}catch(w){console.error("Failed to fetch project users:",w),l.value=((v=(c=w.response)==null?void 0:c.data)==null?void 0:v.message)||"Failed to load team data."}finally{o.value=!1}},d=c=>{if(!c.availabilities||c.availabilities.length===0)return"No availability submitted.";const v=c.availabilities[0];return v.is_available?v.time_slots&&v.time_slots.length>0?`Available: ${v.time_slots.map(_=>`${_.start_time}-${_.end_time}`).join(", ")}`:"Available: No specific slots.":`Not available: ${v.reason||"N/A"}`},m=c=>!c.availabilities||c.availabilities.length===0?null:c.availabilities[0].is_available?Ts:Is;return _e(()=>{u()}),ce([()=>t.canViewUsers,()=>s.value,()=>t.projectId],()=>{u()},{deep:!0}),(c,v)=>(i(),r("div",Vd,[v[1]||(v[1]=e("h4",{class:"text-sm font-semibold text-gray-900 mb-3"},"Project Team",-1)),o.value?(i(),r("div",Ad,v[0]||(v[0]=[e("div",{class:"space-y-2 w-full"},[e("div",{class:"h-3 bg-gray-200 rounded animate-pulse w-3/4 mx-auto"}),e("div",{class:"h-3 bg-gray-200 rounded animate-pulse w-2/3 mx-auto"})],-1)]))):l.value?(i(),r("div",Od,[e("p",null,h(l.value),1)])):(i(),r("div",Id,[e("div",Ld,[p(H(Mt),{class:"h-5 w-5"}),e("span",Pd,h(n.value.length)+" Member(s)",1)]),n.value.length?(i(),r("ul",Nd,[(i(!0),r(J,null,te(n.value,w=>{var _;return i(),r("li",{key:w.id,class:"p-2 bg-gray-50 rounded-lg border border-gray-200 hover:bg-gray-100 transition-colors"},[e("div",Ud,[e("div",Rd,h(w.name.charAt(0).toUpperCase()),1),e("div",Fd,[e("strong",Bd,h(w.name),1),e("p",Hd,h(((_=w.pivot)==null?void 0:_.role)||"N/A"),1)]),e("div",Wd,[e("span",Yd,h(d(w)),1),m(w)?(i(),se(_t(m(w)),{key:0,class:ee({"h-5 w-5":!0,"text-green-500":w.availabilities&&w.availabilities.length>0&&w.availabilities[0].is_available,"text-red-500":w.availabilities&&w.availabilities.length>0&&!w.availabilities[0].is_available})},null,8,["class"])):x("",!0)])])])}),128))])):(i(),r("p",zd,"No team members assigned."))]))]))}},Zd={class:"bg-white p-4 rounded-xl shadow-md transition-shadow hover:shadow-lg flex flex-col h-full"},Gd={class:"flex items-center space-x-2 mb-3"},Kd={key:0,class:"flex-1 flex items-center justify-center"},Jd={key:1,class:"flex-1 flex items-center justify-center text-red-600 text-xs text-center"},Xd={key:2,class:"flex-1 flex flex-col overflow-hidden"},Qd={key:0,class:"space-y-2 text-xs"},eu={class:"flex items-center space-x-2 text-gray-500 mb-3"},tu={class:"text-xs font-semibold"},su={class:"flex flex-col p-2 bg-green-50 rounded-lg"},au={class:"text-gray-900 font-bold mt-1"},lu={class:"flex flex-col p-2 bg-blue-50 rounded-lg"},iu={class:"text-gray-900 font-bold mt-1"},nu={class:"flex flex-col p-2 bg-indigo-50 rounded-lg"},ou={class:"text-gray-900 font-bold mt-1"},ru={class:"mt-4 pt-2 border-t border-gray-200"},du={class:"flex justify-between items-center text-xs text-gray-500 font-medium mb-1"},uu={class:"w-full bg-gray-200 rounded-full h-1.5"},cu={key:1,class:"flex-1 flex items-center justify-center text-gray-400 text-xs text-center"},mu={key:0},vu={key:1},pu={key:2,class:"mt-4 text-right"},hu={__name:"UserFinancialCard",props:{projectId:{type:Number,required:!0}},emits:["viewUserTransactions"],setup(a,{emit:t}){const s=a,n=t,o=Oe(),l=b(!0),u=b(null),d=b([]),m=Be,c=async()=>{var g,y;if(l.value=!0,u.value=null,!o.value||!o.value.id||!s.projectId){d.value=[],l.value=!1;return}if(!me.value||Object.keys(me.value).length===0){u.value="Currency rates not loaded. Please try again.",l.value=!1;return}try{const C=await window.axios.get(`/api/projects/${s.projectId}/sections/transactions?user_id=${o.value.id}`);d.value=C.data}catch(C){console.error("Failed to fetch user transactions for UserFinancialsCard:",C),u.value=((y=(g=C.response)==null?void 0:g.data)==null?void 0:y.message)||"Failed to load your financial data.",d.value=[]}finally{l.value=!1}},v=N(()=>!o.value||!o.value.id||!d.value.length||!me.value||Object.keys(me.value).length===0?0:d.value.filter(y=>y.type==="expense").reduce((y,C)=>y+Ve(parseFloat(C.amount||0),C.currency,m.value),0)),w=N(()=>!o.value||!o.value.id||!d.value.length||!me.value||Object.keys(me.value).length===0?0:d.value.filter(y=>y.type==="bonus").reduce((y,C)=>y+Ve(parseFloat(C.amount||0),C.currency,m.value),0)),_=N(()=>!o.value||!o.value.id||!d.value.length||!me.value||Object.keys(me.value).length===0?0:d.value.filter(y=>(y.type==="expense"||y.type==="bonus")&&y.is_paid===1).reduce((y,C)=>y+Ve(parseFloat(C.amount||0),C.currency,m.value),0)),V=N(()=>o.value&&(v.value>0||w.value>0||_.value>0)),T=N(()=>{const g=v.value+w.value;return g===0?0:Math.round(_.value/g*100)});_e(()=>{c()}),ce([()=>o.value,()=>s.projectId,m,me],()=>{c()},{deep:!0});const E=()=>{n("viewUserTransactions")};return(g,y)=>(i(),r("div",Zd,[e("div",Gd,[p(H(Ss),{class:"h-5 w-5 text-gray-500"}),y[0]||(y[0]=e("h4",{class:"text-sm font-semibold text-gray-900"},"Your Financials",-1))]),l.value?(i(),r("div",Kd,y[1]||(y[1]=[e("div",{class:"space-y-2 w-full"},[e("div",{class:"h-3 bg-gray-200 rounded animate-pulse w-full"}),e("div",{class:"h-3 bg-gray-200 rounded animate-pulse w-5/6"})],-1)]))):u.value?(i(),r("div",Jd,[e("p",null,h(u.value),1)])):(i(),r("div",Xd,[V.value?(i(),r("div",Qd,[e("div",eu,[p(H(Mt),{class:"h-5 w-5"}),e("span",tu,h(d.value.length)+" Transactions(s)",1)]),e("div",su,[y[2]||(y[2]=e("span",{class:"font-medium text-green-700"},"Agreed Amount",-1)),e("span",au,h(H(je)(v.value,H(m))),1)]),e("div",lu,[y[3]||(y[3]=e("span",{class:"font-medium text-blue-700"},"Bonus Amount",-1)),e("span",iu,h(H(je)(w.value,H(m))),1)]),e("div",nu,[y[4]||(y[4]=e("span",{class:"font-medium text-indigo-700"},"Received Amount",-1)),e("span",ou,h(H(je)(_.value,H(m))),1)]),e("div",ru,[e("div",du,[y[5]||(y[5]=e("span",null,"Paid Progress",-1)),e("span",null,h(T.value)+"%",1)]),e("div",uu,[e("div",{class:"bg-indigo-600 h-1.5 rounded-full",style:fe({width:T.value+"%"})},null,4)])])])):(i(),r("div",cu,[H(o)?(i(),r("p",vu," No financial data available for you on this project. ")):(i(),r("p",mu," Sign in to view your financials. "))])),H(o)?(i(),r("div",pu,[p(ge,{onClick:E,class:"text-xs"},{default:z(()=>y[6]||(y[6]=[Z(" View Transactions ",-1)])),_:1,__:[6]})])):x("",!0)]))]))}},gu={class:"p-4"},fu={key:0,class:"text-center text-gray-600"},yu={key:1,class:"text-red-600 text-sm py-2"},wu={key:2,class:"text-gray-500 text-center py-4"},bu={key:3,class:"overflow-x-auto"},_u={class:"min-w-full divide-y divide-gray-200"},xu={class:"bg-white divide-y divide-gray-200"},ku={class:"px-4 py-3 text-sm text-gray-900"},Du={class:"px-4 py-3 text-sm text-gray-700"},Cu={class:"px-4 py-3 text-sm text-right text-gray-900"},Tu={class:"px-4 py-3 text-sm"},Mu={class:"px-4 py-3 text-sm text-gray-700"},Eu={__name:"UserTransactionsModal",props:{show:{type:Boolean,default:!1},projectId:{type:Number,required:!0},projectName:{type:String,required:!1}},emits:["close"],setup(a,{emit:t}){const s=a,n=Oe(),o=b(!0),l=b(null),u=b([]);b("PKR");const d=(c,v="USD")=>isNaN(c)||c==null?"0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:v,minimumFractionDigits:2,maximumFractionDigits:2}).format(c),m=async()=>{var c,v;if(o.value=!0,l.value=null,u.value=[],!n.value||!n.value.id||!s.projectId){l.value="User not authenticated or project ID missing.",o.value=!1;return}try{const w=await window.axios.get(`/api/projects/${s.projectId}/sections/transactions?user_id=${n.value.id}`);u.value=w.data}catch(w){console.error("Failed to fetch user-specific transactions for modal:",w),l.value=((v=(c=w.response)==null?void 0:c.data)==null?void 0:v.message)||"Failed to load transactions."}finally{o.value=!1}};return ce(()=>s.show,c=>{c&&m()},{immediate:!1}),ce([()=>{var c;return(c=n.value)==null?void 0:c.id},()=>s.projectId],(c,v)=>{s.show&&m()},{deep:!0}),N(()=>`Your Transactions for Project ${s.projectId}`),(c,v)=>(i(),se(Ae,{show:a.show,title:"Transactions for: "+a.projectName,"show-footer":!1,onClose:v[0]||(v[0]=w=>c.$emit("close")),"hide-submit-button":!0,"hide-cancel-button":!0,"api-endpoint":null,"form-data":"{}"},{default:z(({errors:w})=>[e("div",gu,[o.value?(i(),r("div",fu,v[1]||(v[1]=[e("div",{class:"space-y-3"},[e("div",{class:"h-4 bg-gray-200 rounded animate-pulse w-full"}),e("div",{class:"h-4 bg-gray-200 rounded animate-pulse w-5/6"}),e("div",{class:"h-4 bg-gray-200 rounded animate-pulse w-full"}),e("div",{class:"h-4 bg-gray-200 rounded animate-pulse w-2/3"})],-1)]))):l.value?(i(),r("div",yu,[e("p",null,h(l.value),1)])):u.value.length===0?(i(),r("div",wu," No transactions found for you on this project. ")):(i(),r("div",bu,[e("table",_u,[v[2]||(v[2]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Description"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Type"),e("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Amount"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date")])],-1)),e("tbody",xu,[(i(!0),r(J,null,te(u.value,_=>(i(),r("tr",{key:_.id,class:"hover:bg-gray-50 transition-colors"},[e("td",ku,h(_.description),1),e("td",Du,h(_.type),1),e("td",Cu,h(d(_.amount,_.currency)),1),e("td",Tu,[e("span",{class:ee({"px-2 py-1 rounded-full text-xs font-medium":!0,"bg-green-100 text-green-800":_.is_paid===1,"bg-yellow-100 text-yellow-800":_.is_paid===0})},h(_.is_paid===1?"Paid":"Unpaid"),3)]),e("td",Mu,h(new Date(_.created_at).toLocaleDateString()),1)]))),128))])])]))])]),_:1},8,["show","title"]))}},ju={class:"p-6 bg-white rounded-lg shadow-md min-h-[calc(100vh-6rem)]"},$u={class:"flex justify-between items-center mb-4"},Su={class:"mb-6 bg-gray-50 p-4 rounded-lg"},Vu={class:"flex items-center gap-4"},Au={class:"flex-1 min-w-[200px]"},Ou={key:0,class:"text-red-600 text-sm mt-2"},Iu={key:1,class:"text-gray-600 text-sm mt-2 animate-pulse"},Lu={key:2,class:"text-gray-500 text-sm mt-2"},Pu={class:"mt-6"},Nu={class:"flex justify-between items-center mb-3"},Uu={class:"text-md font-medium text-gray-800"},Ru={key:0},Fu={key:1},Bu={key:0,class:"text-center text-gray-600 text-sm animate-pulse py-8"},Hu={key:1,class:"text-center py-8"},Wu={class:"text-red-600 text-sm font-medium"},Yu={key:2,class:"text-center py-8"},zu={class:"text-red-600 text-sm font-medium"},qu={key:3,class:"space-y-8"},Zu={class:"bg-gray-50 p-6 rounded-lg shadow-sm grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},Gu={class:"flex flex-col items-center p-3 bg-white rounded-md shadow-xs"},Ku={class:"text-lg font-semibold text-gray-900"},Ju={class:"flex flex-col items-center p-3 bg-white rounded-md shadow-xs"},Xu={class:"text-lg font-semibold text-gray-900"},Qu={class:"flex flex-col items-center p-3 bg-white rounded-md shadow-xs"},ec={class:"text-lg font-semibold text-gray-900"},tc={class:"flex flex-col items-center p-3 bg-white rounded-md shadow-xs"},sc={class:"text-lg font-semibold text-gray-900"},ac={class:"flex flex-col items-center p-3 bg-white rounded-md shadow-xs"},lc={class:"text-lg font-semibold text-gray-900"},ic={class:"flex flex-col items-center p-3 bg-white rounded-md shadow-xs"},nc={class:"text-lg font-semibold text-gray-900"},oc={class:"flex flex-col items-center p-3 bg-white rounded-md shadow-xs"},rc={class:"text-lg font-semibold text-gray-900"},dc={class:"bg-white p-6 rounded-lg shadow-sm"},uc={class:"overflow-x-auto max-h-60"},cc={class:"min-w-full divide-y divide-gray-200"},mc={class:"bg-white divide-y divide-gray-200"},vc={class:"px-4 py-3 text-sm text-gray-900"},pc={class:"px-4 py-3 text-sm text-gray-700"},hc={class:"px-4 py-3 text-sm text-gray-700"},gc={key:0,class:"text-gray-500 text-sm py-2"},fc={class:"bg-white p-6 rounded-lg shadow-sm"},yc={class:"overflow-x-auto max-h-60"},wc={class:"min-w-full divide-y divide-gray-200"},bc={class:"bg-white divide-y divide-gray-200"},_c={class:"px-4 py-3 text-sm text-gray-900"},xc={class:"px-4 py-3 text-sm text-gray-700"},kc={class:"px-4 py-3 text-sm text-gray-700"},Dc={class:"px-4 py-3 text-sm text-gray-700"},Cc={class:"px-4 py-3 text-sm text-gray-700"},Tc={key:0,class:"text-gray-500 text-sm py-2"},Mc={class:"bg-white p-6 rounded-lg shadow-sm"},Ec={class:"overflow-x-auto max-h-60"},jc={class:"min-w-full divide-y divide-gray-200"},$c={class:"bg-white divide-y divide-gray-200"},Sc={class:"px-4 py-3 text-sm text-gray-900"},Vc={class:"px-4 py-3 text-sm text-gray-700"},Ac={key:0,class:"text-gray-500 text-sm py-2"},Oc={class:"bg-white p-6 rounded-lg shadow-sm"},Ic={class:"overflow-x-auto"},Lc={class:"min-w-full divide-y divide-gray-200"},Pc={class:"bg-white divide-y divide-gray-200"},Nc={class:"px-4 py-3 text-sm text-gray-900"},Uc={class:"px-4 py-3 text-sm text-gray-700"},Rc={key:0,class:"text-gray-500 text-sm py-2"},Fc={class:"bg-white p-6 rounded-lg shadow-sm"},Bc={class:"overflow-x-auto"},Hc={class:"min-w-full divide-y divide-gray-200"},Wc={class:"bg-white divide-y divide-gray-200"},Yc={class:"px-4 py-3 text-sm text-gray-900"},zc={class:"px-4 py-3 text-sm text-gray-700"},qc={key:0,class:"text-gray-500 text-sm py-2"},Zc={class:"bg-white p-6 rounded-lg shadow-sm"},Gc={class:"overflow-x-auto max-h-60"},Kc={class:"min-w-full divide-y divide-gray-200"},Jc={class:"bg-white divide-y divide-gray-200"},Xc={class:"px-4 py-3 text-sm text-gray-900"},Qc={class:"px-4 py-3 text-sm text-gray-700"},em={key:0,class:"text-gray-500 text-sm py-2"},tm={class:"bg-white p-6 rounded-lg shadow-sm grid grid-cols-1 md:grid-cols-2 gap-6"},sm={key:0,class:"space-y-2"},am={class:"font-medium"},lm={key:1,class:"text-gray-500 text-sm py-2"},im={key:0,class:"space-y-2"},nm={class:"font-medium"},om={key:1,class:"text-gray-500 text-sm py-2"},rm={key:4,class:"text-center py-8 text-gray-500"},dm={__name:"SeoReportTab",props:{projectId:{type:[String,Number],required:!0},canCreateSeoReports:{type:Boolean,default:!1}},emits:["openCreateSeoReportModal"],setup(a,{emit:t}){const s=a,n=t,o=b([]),l=b(""),u=b(null),d=b(!0),m=b(!1),c=b(null),v=b(null),w=b(null),_=async()=>{d.value=!0,c.value=null;try{const U=await window.axios.get(`/api/projects/${s.projectId}/seo-reports/available-months`);o.value=U.data.map(F=>({value:F,label:new Date(F+"-01").toLocaleString("en-US",{year:"numeric",month:"long"})})),o.value.length>0&&(l.value=o.value[0].value)}catch(U){console.error("Error fetching available months:",U),c.value="Failed to load available report months."}finally{d.value=!1}},V=U=>{const B=["clientName","reportingPeriod","authorityScoreValue","totalClicksValue","totalImpressionsValue","averagePositionValue","totalBacklinksValue","clicksImpressions","trafficSources","deviceUsage","countryPerformance","coreVitals","topQueries","keywordRankings","backlinks","zeroClickKeywords"].filter(A=>!(A in U));return B.length>0?`Report data is missing expected top-level keys: ${B.join(", ")}. Please ensure the JSON structure is correct.`:!U.clicksImpressions||!Array.isArray(U.clicksImpressions.labels)||!Array.isArray(U.clicksImpressions.clicks)?"clicksImpressions data is malformed.":!U.trafficSources||!Array.isArray(U.trafficSources.labels)||!Array.isArray(U.trafficSources.sessions)?"trafficSources data is malformed.":null},T=async()=>{if(!l.value){u.value=null,w.value=null;return}m.value=!0,v.value=null,w.value=null;try{const F=(await window.axios.get(`/api/projects/${s.projectId}/seo-reports/${l.value}`)).data,B=V(F);B?(w.value=B,u.value=null):u.value=F}catch(U){console.error("Error fetching SEO report:",U),v.value="Failed to load SEO report for the selected month.",u.value=null,w.value=null}finally{m.value=!1}},E=(U=null)=>{n("openCreateSeoReportModal",U)},g=N(()=>{var U;return((U=u.value)==null?void 0:U.clientName)||"N/A"}),y=N(()=>{var U;return((U=u.value)==null?void 0:U.reportingPeriod)||"N/A"}),C=N(()=>{var U;return((U=u.value)==null?void 0:U.authorityScoreValue)||"N/A"}),R=N(()=>{var U;return((U=u.value)==null?void 0:U.totalClicksValue)||"N/A"}),W=N(()=>{var U;return((U=u.value)==null?void 0:U.totalImpressionsValue)||"N/A"}),$=N(()=>{var U;return((U=u.value)==null?void 0:U.averagePositionValue)||"N/A"}),L=N(()=>{var U;return((U=u.value)==null?void 0:U.totalBacklinksValue)||"N/A"}),Y=N(()=>{var U;return((U=u.value)==null?void 0:U.clicksImpressions)||{labels:[],clicks:[],impressions:[]}}),M=N(()=>{var U;return((U=u.value)==null?void 0:U.trafficSources)||{labels:[],sessions:[],colors:[]}}),D=N(()=>{var U;return((U=u.value)==null?void 0:U.deviceUsage)||{labels:[],clicks:[],colors:[]}}),k=N(()=>{var U;return((U=u.value)==null?void 0:U.countryPerformance)||{labels:[],clicks:[]}}),S=N(()=>{var U;return((U=u.value)==null?void 0:U.coreVitals)||{mobile:{},desktop:{}}}),ae=N(()=>{var U;return((U=u.value)==null?void 0:U.topQueries)||[]}),ie=N(()=>{var U;return((U=u.value)==null?void 0:U.keywordRankings)||[]});return _e(()=>{_()}),ce(()=>s.projectId,()=>{_()}),ce(l,U=>{U?T():(u.value=null,w.value=null)}),(U,F)=>(i(),r("div",ju,[e("div",$u,[F[4]||(F[4]=e("h4",{class:"text-lg font-semibold text-gray-900"},"SEO Reports",-1)),a.canCreateSeoReports?(i(),se(ge,{key:0,onClick:F[0]||(F[0]=B=>E()),class:"bg-indigo-600 hover:bg-indigo-700 transition-colors"},{default:z(()=>F[3]||(F[3]=[Z(" Add New Report ",-1)])),_:1,__:[3]})):x("",!0)]),e("div",Su,[e("div",Vu,[e("div",Au,[p(K,{for:"seo-report-month-filter",value:"Select Report Month"}),p(ye,{id:"seo-report-month-filter",modelValue:l.value,"onUpdate:modelValue":F[1]||(F[1]=B=>l.value=B),options:o.value,"value-key":"value","label-key":"label",placeholder:"Select a month",disabled:d.value||o.value.length===0,class:"mt-1"},null,8,["modelValue","options","disabled"])])]),c.value?(i(),r("div",Ou,h(c.value),1)):x("",!0),d.value?(i(),r("div",Iu,"Loading available months...")):x("",!0),!d.value&&o.value.length===0?(i(),r("div",Lu,"No SEO reports available for this project.")):x("",!0)]),e("div",Pu,[e("div",Nu,[e("h5",Uu,[l.value?(i(),r("span",Ru,"Report for "+h(new Date(l.value+"-01").toLocaleString("en-US",{year:"numeric",month:"long"})),1)):(i(),r("span",Fu,"Select a month to view report"))]),a.canCreateSeoReports&&u.value&&l.value?(i(),se(ge,{key:0,onClick:F[2]||(F[2]=B=>E({report_date:l.value,data:JSON.stringify(u.value,null,2)})),class:"bg-blue-500 hover:bg-blue-600 transition-colors text-sm py-1 px-3"},{default:z(()=>F[5]||(F[5]=[Z(" Edit Report ",-1)])),_:1,__:[5]})):x("",!0)]),m.value?(i(),r("div",Bu," Loading SEO report data... ")):v.value?(i(),r("div",Hu,[e("p",Wu,h(v.value),1)])):w.value?(i(),r("div",Yu,[e("p",zu,"Data Structure Error: "+h(w.value),1),F[6]||(F[6]=e("p",{class:"text-gray-500 text-sm mt-2"},"Please ensure the JSON data conforms to the expected format.",-1))])):u.value?(i(),r("div",qu,[e("div",Zu,[e("div",Gu,[F[7]||(F[7]=e("p",{class:"text-sm text-gray-500"},"Client Name",-1)),e("p",Ku,h(g.value),1)]),e("div",Ju,[F[8]||(F[8]=e("p",{class:"text-sm text-gray-500"},"Reporting Period",-1)),e("p",Xu,h(y.value),1)]),e("div",Qu,[F[9]||(F[9]=e("p",{class:"text-sm text-gray-500"},"Authority Score",-1)),e("p",ec,h(C.value),1)]),e("div",tc,[F[10]||(F[10]=e("p",{class:"text-sm text-gray-500"},"Total Clicks",-1)),e("p",sc,h(R.value),1)]),e("div",ac,[F[11]||(F[11]=e("p",{class:"text-sm text-gray-500"},"Total Impressions",-1)),e("p",lc,h(W.value),1)]),e("div",ic,[F[12]||(F[12]=e("p",{class:"text-sm text-gray-500"},"Average Position",-1)),e("p",nc,h($.value),1)]),e("div",oc,[F[13]||(F[13]=e("p",{class:"text-sm text-gray-500"},"Total Backlinks",-1)),e("p",rc,h(L.value),1)])]),e("div",dc,[F[15]||(F[15]=e("h5",{class:"text-lg font-semibold text-gray-800 border-b pb-2 mb-4"},"Clicks & Impressions Trend",-1)),e("div",uc,[e("table",cc,[F[14]||(F[14]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Clicks"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Impressions")])],-1)),e("tbody",mc,[(i(!0),r(J,null,te(Y.value.labels,(B,A)=>(i(),r("tr",{key:A},[e("td",vc,h(B),1),e("td",pc,h(Y.value.clicks[A]),1),e("td",hc,h(Y.value.impressions[A]),1)]))),128))])])]),Y.value.labels.length?x("",!0):(i(),r("p",gc,"No clicks and impressions data available."))]),e("div",fc,[F[17]||(F[17]=e("h5",{class:"text-lg font-semibold text-gray-800 border-b pb-2 mb-4"},"Top Queries",-1)),e("div",yc,[e("table",wc,[F[16]||(F[16]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Query"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Clicks"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Impressions"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"CTR"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Position")])],-1)),e("tbody",bc,[(i(!0),r(J,null,te(ae.value,B=>(i(),r("tr",{key:B.query},[e("td",_c,h(B.query),1),e("td",xc,h(B.clicks),1),e("td",kc,h(B.impressions),1),e("td",Dc,h(B.ctr)+"%",1),e("td",Cc,h(B.position),1)]))),128))])])]),ae.value.length?x("",!0):(i(),r("p",Tc,"No top queries data available."))]),e("div",Mc,[F[19]||(F[19]=e("h5",{class:"text-lg font-semibold text-gray-800 border-b pb-2 mb-4"},"Keyword Rankings",-1)),e("div",Ec,[e("table",jc,[F[18]||(F[18]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Keyword"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Ranking")])],-1)),e("tbody",$c,[(i(!0),r(J,null,te(ie.value,B=>(i(),r("tr",{key:B.keyword},[e("td",Sc,h(B.keyword),1),e("td",Vc,h(B.ranking),1)]))),128))])])]),ie.value.length?x("",!0):(i(),r("p",Ac,"No keyword rankings data available."))]),e("div",Oc,[F[21]||(F[21]=e("h5",{class:"text-lg font-semibold text-gray-800 border-b pb-2 mb-4"},"Traffic Sources",-1)),e("div",Ic,[e("table",Lc,[F[20]||(F[20]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Source"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Sessions")])],-1)),e("tbody",Pc,[(i(!0),r(J,null,te(M.value.labels,(B,A)=>(i(),r("tr",{key:B},[e("td",Nc,h(B),1),e("td",Uc,h(M.value.sessions[A]),1)]))),128))])])]),M.value.labels.length?x("",!0):(i(),r("p",Rc,"No traffic sources data available."))]),e("div",Fc,[F[23]||(F[23]=e("h5",{class:"text-lg font-semibold text-gray-800 border-b pb-2 mb-4"},"Device Usage",-1)),e("div",Bc,[e("table",Hc,[F[22]||(F[22]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Device"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Clicks")])],-1)),e("tbody",Wc,[(i(!0),r(J,null,te(D.value.labels,(B,A)=>(i(),r("tr",{key:B},[e("td",Yc,h(B),1),e("td",zc,h(D.value.clicks[A]),1)]))),128))])])]),D.value.labels.length?x("",!0):(i(),r("p",qc,"No device usage data available."))]),e("div",Zc,[F[25]||(F[25]=e("h5",{class:"text-lg font-semibold text-gray-800 border-b pb-2 mb-4"},"Country Performance (Top 10)",-1)),e("div",Gc,[e("table",Kc,[F[24]||(F[24]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Country"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Clicks")])],-1)),e("tbody",Jc,[(i(!0),r(J,null,te(k.value.labels,B=>(i(),r("tr",{key:B},[e("td",Xc,h(B),1),e("td",Qc,h(k.value.clicks[k.value.labels.indexOf(B)]),1)]))),128))])])]),k.value.labels.length?x("",!0):(i(),r("p",em,"No country performance data available."))]),e("div",tm,[e("div",null,[F[26]||(F[26]=e("h5",{class:"text-lg font-semibold text-gray-800 border-b pb-2 mb-4"},"Core Vitals (Mobile)",-1)),S.value.mobile&&S.value.mobile.labels&&S.value.mobile.labels.length?(i(),r("div",sm,[(i(!0),r(J,null,te(S.value.mobile.labels,(B,A)=>(i(),r("div",{key:B,class:"flex justify-between items-center text-sm text-gray-700"},[e("span",null,h(B)+":",1),e("span",am,h(S.value.mobile.scores[A]),1)]))),128))])):(i(),r("p",lm,"No mobile core vitals data available."))]),e("div",null,[F[27]||(F[27]=e("h5",{class:"text-lg font-semibold text-gray-800 border-b pb-2 mb-4"},"Core Vitals (Desktop)",-1)),S.value.desktop&&S.value.desktop.labels&&S.value.desktop.labels.length?(i(),r("div",im,[(i(!0),r(J,null,te(S.value.desktop.labels,(B,A)=>(i(),r("div",{key:B,class:"flex justify-between items-center text-sm text-gray-700"},[e("span",null,h(B)+":",1),e("span",nm,h(S.value.desktop.scores[A]),1)]))),128))])):(i(),r("p",om,"No desktop core vitals data available."))])])])):(i(),r("div",rm," No report data to display. Please select a month from the dropdown. "))])]))}},um=Ie(dm,[["__scopeId","data-v-37cb2f02"]]),cm={class:"space-y-4"},mm={key:0,class:"text-xs text-gray-500 mt-1 text-red-500"},vm=["onBlur"],pm={__name:"CreateSeoReportModal",props:{show:{type:Boolean,default:!1},projectId:{type:[String,Number],required:!0},initialData:{type:Object,default:null}},emits:["close","saved"],setup(a,{emit:t}){const s=a,n=t,o=Te({report_date:"",data:""}),l=b(null);ce(()=>[s.show,s.initialData],([g,y])=>{g&&(y?Object.assign(o,{report_date:y.report_date||"",data:y.data||""}):Object.assign(o,{report_date:"",data:""}))},{immediate:!0});const u=g=>{let y=g.data;try{y=JSON.stringify(JSON.parse(g.data))}catch{console.warn("Provided data is not valid JSON, sending as plain string. Backend should validate.")}return{report_date:g.report_date,data:y}},d=N(()=>s.initialData?"Edit SEO Report":"Create New SEO Report"),m=N(()=>`/api/projects/${s.projectId}/seo-reports`),c=N(()=>"post"),v=N(()=>s.initialData?"Update Report":"Create Report"),w=N(()=>s.initialData?"SEO Report updated successfully!":"SEO Report created successfully!"),_=g=>{n("saved",g),n("close")},V=()=>{n("close")},T=()=>{try{const g=JSON.parse(o.data);o.data=JSON.stringify(g,null,2)}catch(g){console.error("Invalid JSON for pretty print:",g)}},E=g=>{if(o.data)try{JSON.parse(o.data),g.data&&g.data[0]==="The data field must be a valid JSON string."&&(g.data=[])}catch{(!g.data||g.data.length===0)&&(g.data=["The data field must be a valid JSON string."])}};return(g,y)=>(i(),se(Ae,{show:a.show,title:d.value,"api-endpoint":m.value,"http-method":c.value,"form-data":o,"submit-button-text":v.value,"success-message":w.value,"format-data-for-api":u,onClose:V,onSubmitted:_},{default:z(({errors:C})=>[e("div",cm,[e("div",null,[p(K,{for:"report_date",value:"Report Month (YYYY-MM)"}),p(pe,{id:"report_date",modelValue:o.report_date,"onUpdate:modelValue":y[0]||(y[0]=R=>o.report_date=R),type:"text",class:"mt-1 block w-full",placeholder:"e.g., 2025-07",required:"",autofocus:"",pattern:"\\d{4}-\\d{2}",title:"Please enter a date in YYYY-MM format (e.g., 2025-07)",disabled:!!a.initialData},null,8,["modelValue","disabled"]),p(re,{message:C.report_date?C.report_date[0]:"",class:"mt-2"},null,8,["message"]),y[2]||(y[2]=e("p",{class:"text-xs text-gray-500 mt-1"},"Enter the report month in YYYY-MM format (e.g., 2025-07).",-1)),a.initialData?(i(),r("p",mm,"Note: Report month cannot be changed when editing.")):x("",!0)]),e("div",null,[p(K,{for:"report_data",value:"Report Data (JSON)"}),he(e("textarea",{id:"report_data",ref_key:"jsonInputRef",ref:l,"onUpdate:modelValue":y[1]||(y[1]=R=>o.data=R),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 font-mono",rows:"10",placeholder:'Enter JSON data for the report, e.g., {"keywords_ranked": 150, "traffic": 1200, "rankings": {"keyword1": 5, "keyword2": 12}}',required:"",onBlur:R=>E(C)},null,40,vm),[[ke,o.data]]),p(re,{message:C.data?C.data[0]:"",class:"mt-2"},null,8,["message"]),e("div",{class:"flex justify-end mt-2"},[e("button",{type:"button",onClick:T,class:"text-sm text-indigo-600 hover:text-indigo-800 font-medium"}," Format JSON ")])])])]),_:1},8,["show","title","api-endpoint","http-method","form-data","submit-button-text","success-message"]))}},hm={key:0,class:"bg-amber-50 border-l-4 border-amber-500 p-4 mb-6 rounded-md shadow-md"},gm={class:"flex items-center justify-between"},fm={class:"flex items-center"},ym={class:"ml-3"},wm={class:"text-sm text-amber-800 font-medium"},bm={key:0},_m={key:1},xm={key:2},km={__name:"ProjectTaskNotificationPrompt",props:{overdueTasks:{type:Number,required:!0},dueTodayTasks:{type:Number,required:!0}},emits:["view-tasks"],setup(a,{emit:t}){const s=a,n=t,o=N(()=>s.overdueTasks+s.dueTodayTasks),l=N(()=>o.value>0),u=()=>{n("view-tasks")};return(d,m)=>l.value?(i(),r("div",hm,[e("div",gm,[e("div",fm,[m[0]||(m[0]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-6 w-6 text-amber-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1)),e("div",ym,[e("p",wm,[a.overdueTasks>0&&a.dueTodayTasks>0?(i(),r("span",bm," This project has "+h(a.overdueTasks)+" overdue "+h(a.overdueTasks===1?"task":"tasks")+" and "+h(a.dueTodayTasks)+" "+h(a.dueTodayTasks===1?"task":"tasks")+" due today. ",1)):a.overdueTasks>0?(i(),r("span",_m," This project has "+h(a.overdueTasks)+" overdue "+h(a.overdueTasks===1?"task":"tasks")+" that require attention. ",1)):a.dueTodayTasks>0?(i(),r("span",xm," This project has "+h(a.dueTodayTasks)+" "+h(a.dueTodayTasks===1?"task":"tasks")+" due today. ",1)):x("",!0)])])]),e("div",null,[p(ge,{onClick:u,class:"px-4 py-2 text-sm bg-amber-600 hover:bg-amber-700 focus:ring-amber-500"},{default:z(()=>m[1]||(m[1]=[Z(" View ",-1)])),_:1,__:[1]})])])])):x("",!0)}},Dm={key:0,class:"bg-white rounded-xl shadow-lg border border-gray-200 h-full flex flex-col relative"},Cm={key:2,class:"h-full flex flex-col"},Tm={class:"flex items-center justify-between p-4 sm:p-6 border-b border-gray-200"},Mm={class:"flex px-4 sm:px-6 border-b border-gray-200"},Em={class:"flex-1 overflow-y-auto p-4 sm:p-6"},jm={key:0,class:"flex justify-center py-8"},$m={key:1,class:"bg-gray-50 p-4 sm:p-6 rounded-lg text-center text-sm"},Sm={class:"text-gray-600"},Vm={key:2,class:"space-y-3 sm:space-y-4"},Am=["onClick"],Om={class:"flex items-center space-x-2 sm:space-x-3"},Im={class:"p-1 rounded-full text-gray-500 hover:bg-gray-200 transition-colors"},Lm={class:"text-sm sm:text-base font-medium text-gray-900"},Pm={class:"flex items-center space-x-2"},Nm={key:0,class:"text-xs font-medium text-gray-600"},Um={key:0,class:"mt-3 pl-6 sm:mt-4 sm:pl-8"},Rm={key:0,class:"text-xs sm:text-sm text-gray-600 mb-2"},Fm={class:"mt-2 flex items-center space-x-2 text-xs text-gray-500"},Bm={key:0,class:"text-gray-700"},Hm={key:1,class:"text-gray-700"},Wm={__name:"ProjectDeliverablesOverviewCard",props:{projectId:{type:[Number,String],required:!0},canViewProjectDeliverables:{type:Boolean,default:!0},isCollapsed:{type:Boolean,default:!1}},emits:["update:isCollapsed"],setup(a,{emit:t}){const s=a,n=t,o=b(s.isCollapsed);ce(()=>s.isCollapsed,g=>{o.value=g});const l=b([]),u=b(!0),d=b("in-progress"),m=b({}),c=N(()=>d.value==="in-progress"?l.value.filter(g=>g.status!=="completed"&&g.status!=="cancelled"):l.value.filter(g=>g.status==="completed"||g.status==="cancelled")),v=async()=>{if(s.canViewProjectDeliverables){u.value=!0;try{const g=await ht.get(`/api/projects/${s.projectId}/project-deliverables`);l.value=g.data}catch(g){console.error("Error fetching deliverables:",g),Qe("Failed to load project deliverables.")}finally{u.value=!1}}};_e(()=>{v()});const w=g=>{m.value[g]=!m.value[g]},_=g=>g?new Date(g).toLocaleDateString():"N/A",V=g=>!g||g.length===0?0:g.filter(y=>y.completed).length,T=(g,y)=>{const C=l.value.find(R=>R.id===g.id);C&&(C.details.checklist[y.index].completed=y.completed);try{const R={...g,details:{...g.details,checklist:C.details.checklist}};ht.put(`/api/project-deliverables/${g.id}`,R),kt("Checklist item updated!")}catch(R){console.error("Error updating checklist item:",R),Qe("Failed to update checklist item"),C&&(C.details.checklist[y.index].completed=!y.completed)}},E=()=>{o.value=!o.value,n("update:isCollapsed",o.value)};return(g,y)=>a.canViewProjectDeliverables?(i(),r("div",Dm,[o.value?(i(),r("div",{key:0,onClick:E,class:"flex lg:hidden items-center p-4 cursor-pointer"},[y[2]||(y[2]=e("span",{class:"text-gray-600 font-bold text-lg flex-1"},"Project Deliverables",-1)),p(H(Es),{class:"h-5 w-5 text-gray-500"})])):x("",!0),o.value?(i(),r("div",{key:1,onClick:E,class:"hidden lg:flex items-center justify-center cursor-pointer p-2 h-full"},y[3]||(y[3]=[e("span",{class:"text-gray-600 font-bold text-lg",style:{"writing-mode":"vertical-rl","text-orientation":"mixed"}}," Project Deliverables ",-1)]))):(i(),r("div",Cm,[e("div",Tm,[y[4]||(y[4]=e("h3",{class:"text-lg sm:text-xl font-bold text-gray-900"},"Project Deliverables",-1)),e("button",{onClick:E,class:"p-1 rounded-full text-gray-500 hover:bg-gray-200 transition-colors"},[p(H(js),{class:"h-5 w-5"})])]),e("div",Mm,[e("button",{onClick:y[0]||(y[0]=C=>d.value="in-progress"),class:ee({"py-2 px-3 text-sm font-medium":!0,"text-indigo-600 border-b-2 border-indigo-600":d.value==="in-progress","text-gray-500 hover:text-gray-700":d.value!=="in-progress"})}," In Progress ",2),e("button",{onClick:y[1]||(y[1]=C=>d.value="completed"),class:ee({"py-2 px-3 text-sm font-medium":!0,"text-indigo-600 border-b-2 border-indigo-600":d.value==="completed","text-gray-500 hover:text-gray-700":d.value!=="completed"})}," Completed ",2)]),e("div",Em,[u.value?(i(),r("div",jm,y[5]||(y[5]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"},null,-1)]))):c.value.length===0?(i(),r("div",$m,[e("p",Sm,"No "+h(d.value)+" deliverables found.",1)])):(i(),r("div",Vm,[(i(!0),r(J,null,te(c.value,C=>{var R,W,$;return i(),r("div",{key:C.id,class:"bg-gray-50 border border-gray-200 rounded-lg p-3 sm:p-4 shadow-sm hover:shadow-md transition-all duration-300"},[e("div",{class:"flex items-center justify-between cursor-pointer",onClick:L=>w(C.id)},[e("div",Om,[e("button",Im,[m.value[C.id]?(i(),se(H($s),{key:1,class:"h-4 w-4 sm:h-5 sm:w-5"})):(i(),se(H(Ms),{key:0,class:"h-4 w-4 sm:h-5 sm:w-5"}))]),e("div",null,[e("h4",Lm,h(C.name),1)])]),e("div",Pm,[((W=(R=C.details)==null?void 0:R.checklist)==null?void 0:W.length)>0?(i(),r("span",Nm,h(V(C.details.checklist))+" / "+h(C.details.checklist.length),1)):x("",!0),e("span",{class:ee({"font-medium py-0.5 px-2 rounded-full text-white text-xs":!0,"bg-yellow-500":C.status==="pending","bg-blue-500":C.status==="in_progress","bg-green-500":C.status==="completed","bg-red-500":C.status==="cancelled"})},h(C.status.replace("_"," ").toUpperCase()),3)])],8,Am),m.value[C.id]?(i(),r("div",Um,[C.description?(i(),r("p",Rm,h(C.description),1)):x("",!0),e("div",Fm,[C.milestone?(i(),r("span",Bm,[y[6]||(y[6]=e("span",{class:"font-semibold"},"Milestone:",-1)),Z(" "+h(C.milestone.name),1)])):x("",!0),C.due_date?(i(),r("span",Hm,[y[7]||(y[7]=e("span",{class:"font-semibold"},"Due:",-1)),Z(" "+h(_(C.due_date)),1)])):x("",!0)]),($=C.details)!=null&&$.checklist&&C.details.checklist.length>0?(i(),se(Qt,{key:1,items:C.details.checklist,"api-endpoint":`/api/project-deliverables/${C.id}`,title:null,"payload-transformer":L=>({details:{...C.details,checklist:L}}),onItemToggled:L=>T(C,L),density:"tight","container-class":"p-0 border-0 bg-transparent text-sm","title-class":"hidden"},null,8,["items","api-endpoint","payload-transformer","onItemToggled"])):x("",!0)])):x("",!0)])}),128))]))])]))])):x("",!0)}},Ym={class:"py-8 max-w-full mx-auto px-4 sm:px-6 lg:px-8"},zm={key:0,class:"flex items-center justify-center min-h-[50vh]"},qm={key:1,class:"text-center text-red-600 text-lg font-medium"},Zm={key:2,class:"space-y-8"},Gm={class:"flex flex-col lg:flex-row gap-6"},Km={class:"flex-1 space-y-6"},Jm={class:"flex justify-end items-center"},Xm={class:"flex h-full w-full"},Qm={key:1,class:"transition-all duration-300 w-full relative"},ev={class:"grid grid-cols-3 gap-4"},tv={key:0},sv={key:0,class:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow mb-6"},av={class:"flex justify-between items-center mb-4"},lv={key:1,class:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow mb-6"},iv={class:"flex justify-between items-center mb-4"},nv={key:2,class:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow mb-6"},ov={class:"flex justify-between items-center mb-4"},rv={key:0,class:"text-gray-400 text-sm"},dv={key:1,class:"overflow-x-auto"},uv={class:"min-w-full divide-y divide-gray-200"},cv={class:"bg-white divide-y divide-gray-200"},mv={class:"px-4 py-3 text-sm text-gray-900"},vv={class:"px-4 py-3 text-sm text-gray-700"},pv={class:"px-4 py-3 text-sm text-gray-700"},hv={class:"px-4 py-3 text-sm text-gray-700"},gv={class:"px-4 py-3 text-sm text-gray-700"},fv={class:"px-4 py-3 text-right"},yv={key:3,class:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow mb-6"},wv={class:"flex justify-between items-center mb-4"},bv={class:"flex items-center gap-4"},_v={key:0},xv={key:0,class:"space-y-4"},kv={class:"flex justify-between"},Dv={class:"flex-grow"},Cv={key:0,class:"text-xs text-red-400 block mt-1"},Tv={class:"flex items-center mt-1"},Mv={class:"text-xs text-gray-500"},Ev={key:0,class:"ml-2 px-2 py-0.5 bg-indigo-100 text-indigo-800 text-xs rounded-full"},jv={key:0},$v={key:1,class:"text-gray-400 text-sm"},Sv={__name:"Show",setup(a){const t=Oe(),s=rs().props.id,n=b({clients:[],users:[],notes:[],transactions:[],documents:[],meetings:[],tasks:[],emails:[],deliverables:[]}),o=b(!1),l=b(!1),u=b(25),d=b(!1),m=b(!0),c=b(""),v=b(!1),w=b(!1),_=b(!1),V=b(!1),T=b(!1),E=b(!1),g=b(!1),y=b(!1),C=b(!1),R=b(null),W=[{value:"active",label:"Active"},{value:"completed",label:"Completed"},{value:"on_hold",label:"On Hold"},{value:"archived",label:"Archived"}],$=b(null),L=b(null),Y=ds(n),{canDo:M,canView:D}=xt(s),k=N(()=>{var X,P;return((P=(X=t.value)==null?void 0:X.role_data)==null?void 0:P.slug)==="super-admin"}),S=N(()=>M("manage_projects").value||k.value),ae=N(()=>M("edit_projects").value||k.value),ie=N(()=>D("emails").value),U=N(()=>M("compose_emails").value),F=N(()=>M("approve_emails").value),B=N(()=>D("project_notes").value),A=N(()=>M("add_project_notes").value),G=N(()=>D("deliverables").value);N(()=>M("create_deliverables").value);const ne=N(()=>D("seo_reports").value),De=N(()=>M("create_seo_reports").value),I=N(()=>D("client_contacts").value);N(()=>D("users").value);const f=N(()=>D("project_financial",Y).value),j=N(()=>D("project_transactions").value);N(()=>D("client_financial").value);const O=[{value:"PKR",label:"PKR"},{value:"AUD",label:"AUD"},{value:"INR",label:"INR"},{value:"USD",label:"USD"},{value:"EUR",label:"EUR"},{value:"GBP",label:"GBP"}],ve=b([]),He=b(null),We=b(null),Ge=b("all"),tt=async()=>{try{ve.value=await ss(s)}catch(X){console.error("Error fetching due and overdue tasks:",X)}},St=()=>{L.value="tasks",Ge.value="due-overdue",setTimeout(()=>{We.value&&We.value.scrollIntoView&&We.value.scrollIntoView({behavior:"smooth"})},100)},Vt=async()=>{await tt()},st=N(()=>n.value.notes?[...n.value.notes].filter(X=>X.type!=="standup").sort((X,P)=>new Date(P.created_at)-new Date(X.created_at)).slice(0,3):[]),at=b([]),lt=async()=>{try{const X=await window.axios.get(`/api/projects/${s}/emails-simplified`,{params:{limit:5}});at.value=X.data}catch(X){console.error("Error fetching latest emails:",X)}},Me=async()=>{m.value=!0,c.value="";try{const X=await window.axios.get(`/api/projects/${s}`);n.value=X.data,console.log("Full project data received (Show.vue main fetch):",n.value),o.value=n.value.deliverables&&n.value.deliverables.length>0,l.value=!o.value,await tt(),ie.value&&await lt()}catch(X){c.value="Failed to load project data.",console.error("Error fetching project data:",X),X.response&&(X.response.status===401||X.response.status===403)&&(c.value="You are not authorized to view this project or your session expired. Please log in.")}finally{m.value=!1}},At=X=>{n.value=X,v.value=!1,Me()},Ot=X=>{n.value.tasks=X},It=X=>{n.value.emails=X,ie.value&&lt()},it=X=>{n.value.notes=X},Lt=()=>{$.value&&$.value.fetchMeetings()},nt=()=>{Me()},Pt=X=>{L.value=X,hs()},Nt=()=>{E.value=!0},Ut=()=>{g.value=!0,L.value="emails"},Rt=async()=>{g.value=!1,await Me()},Ft=()=>{g.value=!1},ot=()=>{l.value=!l.value},Bt=X=>{d.value=!0,document.addEventListener("mousemove",rt),document.addEventListener("mouseup",dt),X.preventDefault()},rt=X=>{if(!d.value)return;const P=document.documentElement.clientWidth,Pe=Math.min(Math.max(10,(1-X.clientX/P)*100),50);u.value=Pe},dt=()=>{d.value=!1,document.removeEventListener("mousemove",rt),document.removeEventListener("mouseup",dt),localStorage.setItem(`project_${s}_deliverables_width`,u.value)},ut=(X,P)=>{ps(X,P||s,n.value.users)};ce(us,(X,P)=>{P.taskId&&!X.taskId&&Me()},{deep:!0});const Ht=()=>{y.value=!0},Wt=()=>{y.value=!1,Me()},Yt=(X=null)=>{R.value=X,C.value=!0},zt=()=>{C.value=!1};return _e(async()=>{console.log("Show.vue mounted, fetching initial data...");try{await cs(s),console.log("Project permissions fetched (includes global)")}catch(P){console.error(`Error fetching permissions for project ${s}:`,P)}const X=localStorage.getItem(`project_${s}_deliverables_width`);X!==null&&(u.value=parseFloat(X)),await gs(),await Me()}),(X,P)=>(i(),r(J,null,[p(H(ms),{title:n.value.name||"Project Details"},null,8,["title"]),p(ts,null,{default:z(()=>{var Pe;return[e("div",Ym,[m.value?(i(),r("div",zm,P[24]||(P[24]=[e("div",{class:"flex flex-col items-center space-y-4"},[e("svg",{class:"animate-spin h-16 w-16 text-indigo-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]),e("p",{class:"text-lg text-gray-600 font-medium"},"Loading project details...")],-1)]))):c.value?(i(),r("div",qm,h(c.value),1)):(i(),r("div",Zm,[e("div",Gm,[e("div",Km,[p(Sn,{project:n.value,"project-id":H(s),"can-manage-projects":S.value,"is-super-admin":k.value,"can-edit-projects":ae.value,onOpenEditModal:P[0]||(P[0]=q=>v.value=!0),onOpenStandupModal:P[1]||(P[1]=q=>_.value=!0),onOpenMeetingModal:P[2]||(P[2]=q=>w.value=!0),onOpenMagicLinkModal:P[3]||(P[3]=q=>T.value=!0),onResourceSaved:Me,onOpenComposeModal:Ut},null,8,["project","project-id","can-manage-projects","is-super-admin","can-edit-projects"]),p(Fn,{tasks:n.value.tasks||[],emails:n.value.emails||[]},null,8,["tasks","emails"]),e("div",Jm,[p(ye,{id:"display-currency-switcher",modelValue:H(Be),"onUpdate:modelValue":P[4]||(P[4]=q=>vs(Be)?Be.value=q:null),options:O,"value-key":"value","label-key":"label",class:"w-20",containerClasses:"max-w-[150px]"},null,8,["modelValue"])]),f.value&&j.value?(i(),se(dd,{key:0,"project-id":H(s),"can-view-project-services-and-payments":f.value,"can-view-project-transactions":j.value},null,8,["project-id","can-view-project-services-and-payments","can-view-project-transactions"])):x("",!0)]),G.value?(i(),r("div",{key:0,class:ee(["relative transition-all duration-300",{"w-full lg:flex-none":!l.value,"w-16":l.value}]),style:fe(l.value?"":`width: ${u.value}%`)},[e("div",Xm,[l.value?(i(),r("div",{key:0,class:"w-16 h-full flex items-center justify-center bg-white rounded-xl shadow-lg border border-gray-200 cursor-pointer transition-all duration-300 transform hover:scale-105",onClick:ot},P[25]||(P[25]=[e("span",{class:"font-bold text-gray-500 text-sm",style:{"writing-mode":"vertical-rl","text-orientation":"sideways"}},"Project Deliverables",-1)]))):(i(),r("div",Qm,[e("div",{class:ee(["absolute left-0 top-0 bottom-0 w-1 cursor-col-resize hover:bg-indigo-500 hover:w-1.5 z-10 transition-all",{"bg-indigo-500 w-1.5":d.value,"bg-gray-300":!d.value}]),onMousedown:Bt,title:"Drag to adjust width"},null,34),p(Wm,{"project-id":H(s),"can-view-project-deliverables":G.value,"is-collapsed":l.value,"onUpdate:isCollapsed":ot},null,8,["project-id","can-view-project-deliverables","is-collapsed"])]))])],6)):x("",!0)]),e("div",ev,[I.value?(i(),se(Sd,{key:0,"project-id":H(s),"can-view-client-contacts":I.value},null,8,["project-id","can-view-client-contacts"])):x("",!0),p(qd,{"project-id":H(s),"can-view-users":!0},null,8,["project-id"]),p(hu,{"project-id":H(s),onViewUserTransactions:Nt},null,8,["project-id"])]),p(Wn,{ref_key:"navigationRef",ref:We,selectedTab:L.value,"onUpdate:selectedTab":P[5]||(P[5]=q=>L.value=q),"can-view-emails":ie.value,"can-view-notes":B.value,"can-view-deliverables":G.value,"can-view-seo-reports":ne.value},null,8,["selectedTab","can-view-emails","can-view-notes","can-view-deliverables","can-view-seo-reports"]),L.value===null?(i(),r("div",tv,[p(km,{"overdue-tasks":ve.value.filter(q=>new Date(q.due_date)<new Date).length,"due-today-tasks":ve.value.filter(q=>new Date(q.due_date).toDateString()===new Date().toDateString()).length,onViewTasks:St},null,8,["overdue-tasks","due-today-tasks"]),ve.value.length>0?(i(),r("div",sv,[e("div",av,[P[26]||(P[26]=e("h4",{class:"text-lg font-semibold text-gray-900"},"Due & Overdue Tasks",-1)),e("button",{onClick:P[6]||(P[6]=q=>L.value="tasks"),class:"text-sm text-indigo-600 hover:text-indigo-800 font-medium"}," View All Tasks → ")]),p(Ct,{tasks:ve.value,"project-id":H(s),"show-project-column":!1,onTaskUpdated:Vt,onOpenTaskDetail:ut},null,8,["tasks","project-id"])])):(i(),r("div",lv,[e("div",iv,[P[27]||(P[27]=e("h4",{class:"text-lg font-semibold text-gray-900"},"Due & Overdue Tasks",-1)),e("button",{onClick:P[7]||(P[7]=q=>L.value="tasks"),class:"text-sm text-indigo-600 hover:text-indigo-800 font-medium"}," View All Tasks → ")]),P[28]||(P[28]=e("p",{class:"text-gray-400 text-sm"},"No due or overdue tasks.",-1))])),ie.value?(i(),r("div",nv,[e("div",ov,[P[29]||(P[29]=e("h4",{class:"text-lg font-semibold text-gray-900"},"Latest Emails",-1)),e("button",{onClick:P[8]||(P[8]=q=>L.value="emails"),class:"text-sm text-indigo-600 hover:text-indigo-800 font-medium"}," View All Emails → ")]),(Pe=n.value.emails)!=null&&Pe.length?(i(),r("div",dv,[e("table",uv,[P[31]||(P[31]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Subject"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"From"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Type"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),e("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",cv,[(i(!0),r(J,null,te(at.value,q=>{var Ne;return i(),r("tr",{key:q.id,class:"hover:bg-gray-50 transition-colors"},[e("td",mv,h(q.subject),1),e("td",vv,h(((Ne=q.sender)==null?void 0:Ne.name)||"N/A"),1),e("td",pv,h(new Date(q.created_at).toLocaleDateString()),1),e("td",hv,[e("span",{class:ee({"px-2 py-1 rounded-full text-xs font-medium":!0,"bg-blue-100 text-blue-800":q.type==="sent","bg-purple-100 text-purple-800":q.type==="received"})},h(q.type?q.type.toUpperCase():"N/A"),3)]),e("td",gv,[e("span",{class:ee({"px-2 py-1 rounded-full text-xs font-medium":!0,"bg-green-100 text-green-800":q.status==="sent","bg-yellow-100 text-yellow-800":q.status==="pending_approval","bg-blue-200 text-blue-900":q.status==="pending_approval_received","bg-red-100 text-red-800":q.status==="rejected","bg-gray-100 text-gray-800":q.status==="draft"})},h(q.status.replace("_"," ").toUpperCase()),3)]),e("td",fv,[p(we,{class:"text-indigo-600 hover:text-indigo-800",onClick:qt=>X.viewEmail(q)},{default:z(()=>P[30]||(P[30]=[Z(" View ",-1)])),_:2,__:[30]},1032,["onClick"])])])}),128))])])])):(i(),r("div",rv,"No email communication found."))])):x("",!0),B.value?(i(),r("div",yv,[e("div",wv,[P[33]||(P[33]=e("h4",{class:"text-lg font-semibold text-gray-900"},"Latest Notes",-1)),e("div",bv,[e("button",{onClick:P[9]||(P[9]=q=>L.value="notes"),class:"text-sm text-indigo-600 hover:text-indigo-800 font-medium"}," View All Notes → "),A.value?(i(),r("div",_v,[p(ge,{class:"bg-indigo-600 hover:bg-indigo-700 transition-colors",onClick:P[10]||(P[10]=q=>V.value=!0)},{default:z(()=>P[32]||(P[32]=[Z(" Add Note ",-1)])),_:1,__:[32]})])):x("",!0)])]),st.value.length?(i(),r("div",xv,[(i(!0),r(J,null,te(st.value,q=>{var Ne;return i(),r("div",{key:q.id,class:"p-4 bg-gray-50 rounded-md shadow-sm hover:bg-gray-100 transition-colors"},[e("div",kv,[e("div",Dv,[e("p",{class:ee(["text-sm",{"text-gray-700":q.content!=="[Encrypted content could not be decrypted]","text-red-500 italic":q.content==="[Encrypted content could not be decrypted]"}])},[Z(h(q.content)+" ",1),q.content==="[Encrypted content could not be decrypted]"?(i(),r("span",Cv," (There was an issue decrypting this note. Please contact an administrator.) ")):x("",!0)],2),e("div",Tv,[e("p",Mv,"Added by "+h(((Ne=q.user)==null?void 0:Ne.name)||"Unknown")+" on "+h(new Date(q.created_at).toLocaleDateString()),1),q.reply_count>0?(i(),r("span",Ev,h(q.reply_count)+" "+h(q.reply_count===1?"reply":"replies"),1)):x("",!0)])]),B.value&&q.chat_message_id&&n.value.google_chat_id?(i(),r("div",jv,[e("button",{onClick:P[11]||(P[11]=qt=>L.value="notes"),class:"text-sm text-indigo-600 hover:text-indigo-800 font-medium"}," View ")])):x("",!0)])])}),128))])):(i(),r("p",$v,"No notes available."))])):x("",!0)])):x("",!0),L.value==="tasks"?(i(),se(Oo,{key:1,ref_key:"tasksTabRef",ref:He,"project-id":H(s),"project-users":n.value.users||[],"can-manage-projects":S.value,"tasks-filter":Ge.value,onTasksUpdated:Ot,onOpenTaskDetailSidebar:ut,onOpenCreateTaskModal:Ht,onFilterChanged:P[12]||(P[12]=q=>Ge.value=q)},null,8,["project-id","project-users","can-manage-projects","tasks-filter"])):x("",!0),L.value==="emails"?(i(),se(vr,{key:2,"project-id":H(s),"can-view-emails":ie.value,"can-compose-emails":U.value,"can-approve-emails":F.value,"user-project-role":H(Y),"open-compose":g.value,onEmailsUpdated:It,onResetOpenCompose:P[13]||(P[13]=q=>g.value=!1)},null,8,["project-id","can-view-emails","can-compose-emails","can-approve-emails","user-project-role","open-compose"])):x("",!0),L.value==="standups"?(i(),se(Ql,{key:3,projectId:H(s),users:n.value.users||[],onStandupAdded:nt},null,8,["projectId","users"])):x("",!0),L.value==="notes"?(i(),se(Zr,{key:4,"project-id":H(s),"google-chat-id":n.value.google_chat_id,"can-view-notes":B.value,"can-add-notes":A.value,onNotesUpdated:it,onChangeTab:Pt},null,8,["project-id","google-chat-id","can-view-notes","can-add-notes"])):x("",!0),L.value==="seo-reports"?(i(),se(um,{key:5,"project-id":H(s),"can-create-seo-reports":De.value,onOpenCreateSeoReportModal:Yt},null,8,["project-id","can-create-seo-reports"])):x("",!0)]))]),p($e,{show:v.value,onClose:P[15]||(P[15]=q=>v.value=!1)},{default:z(()=>[p(fs,{show:v.value,project:n.value,statusOptions:W,clientRoleOptions:[],userRoleOptions:[],paymentTypeOptions:[],onClose:P[14]||(P[14]=q=>v.value=!1),onSubmit:At},null,8,["show","project"])]),_:1},8,["show"]),p(_i,{show:w.value,"project-name":n.value.name,onClose:P[16]||(P[16]=q=>w.value=!1),onSaved:Lt,projectId:H(s),projectUsers:n.value.users||[]},null,8,["show","project-name","projectId","projectUsers"]),p(Dt,{show:_.value,onClose:P[17]||(P[17]=q=>_.value=!1),onStandupAdded:nt,projectId:H(s)},null,8,["show","projectId"]),p(Tt,{show:V.value,"project-id":H(s),onClose:P[18]||(P[18]=q=>V.value=!1),onNoteAdded:it},null,8,["show","project-id"]),p(Ei,{show:T.value,"project-id":H(s),"project-clients":n.value.clients||[],onClose:P[19]||(P[19]=q=>T.value=!1)},null,8,["show","project-id","project-clients"]),p(Eu,{show:E.value,"project-id":H(s),"project-name":n.value.name,onClose:P[20]||(P[20]=q=>E.value=!1)},null,8,["show","project-id","project-name"]),p($t,{show:g.value,"project-id":H(s),"user-project-role":H(Y),onClose:Ft,onSubmitted:Rt,onError:P[21]||(P[21]=q=>console.error("Error composing email:",q))},null,8,["show","project-id","user-project-role"]),p(es,{show:y.value,"project-id":H(s),onClose:P[22]||(P[22]=q=>y.value=!1),onSaved:Wt},null,8,["show","project-id"]),p(pm,{"project-id":H(s),show:C.value,"initial-data":R.value,onClose:P[23]||(P[23]=q=>C.value=!1),onSaved:zt},null,8,["project-id","show","initial-data"])]}),_:1})],64))}},Xv=Ie(Sv,[["__scopeId","data-v-6509872d"]]);export{Xv as default};
