import{s as hi,_ as mi}from"./AuthenticatedLayout-5IrcaVwl.js";import{r as Y,B as ft,i as c,o as u,b as l,F as G,j as J,g as D,t as y,m as W,z as rt,w as xt,c as ye,a as V,d as De,e as p,n as K,_ as ot,$ as _s,A as se,a0 as Ks,a1 as Xs,a2 as $e,W as Jt,a3 as U,M as vi,V as ha,a4 as fi,s as ge,f as ne,k as Be,v as Oe,h as ve,C as ma,q as Qs,a5 as ea,T as Cs,L as pi,R as yi,D as gi,a6 as wi,a7 as _i,y as bi}from"./app-5XIxlQRT.js";import{_ as ki}from"./ProjectForm-e3IQcSGa.js";import{a as Me,_ as je}from"./SecondaryButton-IrvFUaBQ.js";import{P as _e}from"./PrimaryButton-VeWY_asK.js";import{_ as B,a as we}from"./InputError-DiO2mYQB.js";import{_ as pe}from"./TextInput-Cubg2ClS.js";import{s as va}from"./vue-multiselect-DSpLbftp.js";import{_ as fa}from"./NotesModal-_ugNOjHu.js";import{_ as pa}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{R as ta}from"./RichTextEditor-8DigGmwX.js";import"./ApplicationLogo-BZ6bAGov.js";import"./Checkbox-Bv0W1gXP.js";const Di={class:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow mb-6"},xi={key:0,class:"text-sm text-gray-500"},Mi={key:1,class:"text-sm text-gray-500"},Si={key:2,class:"space-y-3"},Ti={class:"flex justify-between items-start"},Ci={class:"font-medium text-gray-900"},Ei={class:"text-sm text-gray-600"},Oi={key:0,class:"text-sm text-gray-600 mt-1"},ji={class:"flex space-x-2"},Yi=["href"],Ai=["href"],Vi=["onClick"],$i={__name:"ProjectMeetingsList",props:{projectId:{type:Number,required:!0}},setup(e,{expose:t}){const s=e,a=Y([]),n=Y(!1),i=Y(""),r=()=>{try{i.value=Intl.DateTimeFormat().resolvedOptions().timeZone}catch(g){console.error("Error detecting user timezone:",g),i.value="UTC"}},o=(g,f=null,S=!1)=>{if(!g)return"";try{if(S||g.endsWith("Z")){if(f&&f===i.value){const P={dateStyle:"medium",timeStyle:"short"};return new Date(g).toLocaleString(void 0,P)}const E={dateStyle:"medium",timeStyle:"short",timeZone:f||i.value};return new Date(g).toLocaleString(void 0,E)}else{if(f&&f===i.value){const P={dateStyle:"medium",timeStyle:"short"};return new Date(g).toLocaleString(void 0,P)}const E={dateStyle:"medium",timeStyle:"short",timeZone:f||i.value};return new Date(g).toLocaleString(void 0,E)}}catch(E){return console.error("Error formatting meeting time:",E),new Date(g).toLocaleString()}},h=(g,f=null,S=!1)=>{if(!g)return"";try{if(S||g.endsWith("Z")){if(f&&f===i.value){const P={timeStyle:"short"};return new Date(g).toLocaleTimeString(void 0,P)}const E={timeStyle:"short",timeZone:f||i.value};return new Date(g).toLocaleTimeString(void 0,E)}else{if(f&&f===i.value){const P={timeStyle:"short"};return new Date(g).toLocaleTimeString(void 0,P)}const E={timeStyle:"short",timeZone:f||i.value};return new Date(g).toLocaleTimeString(void 0,E)}}catch(E){return console.error("Error formatting meeting time (time only):",E),new Date(g).toLocaleTimeString()}},d=async()=>{n.value=!0;try{const g=await window.axios.get(`/api/projects/${s.projectId}/meetings`);a.value=g.data}catch(g){console.error("Error fetching project meetings:",g)}finally{n.value=!1}},v=async g=>{if(confirm("Are you sure you want to delete this meeting?"))try{await window.axios.delete(`/api/projects/${s.projectId}/meetings/${g}`),await d()}catch(f){console.error("Error deleting meeting:",f),alert("Failed to delete meeting. Please try again.")}};return t({fetchMeetings:d}),ft(()=>{r(),d()}),(g,f)=>(u(),c("div",Di,[f[4]||(f[4]=l("h4",{class:"text-md font-semibold text-gray-900 mb-2"},"Upcoming Meetings",-1)),n.value?(u(),c("div",xi," Loading meetings... ")):a.value.length===0?(u(),c("div",Mi," No upcoming meetings scheduled. ")):(u(),c("div",Si,[(u(!0),c(G,null,J(a.value,S=>(u(),c("div",{key:S.id,class:"p-3 bg-gray-50 rounded-lg border border-gray-200 hover:bg-gray-100 transition-colors"},[l("div",Ti,[l("div",null,[l("h5",Ci,y(S.summary),1),l("p",Ei,y(o(S.start_time,S.timezone,S.is_utc))+" - "+y(h(S.end_time,S.timezone,S.is_utc)),1),S.location?(u(),c("p",Oi,[f[0]||(f[0]=l("span",{class:"font-medium"},"Location:",-1)),W(" "+y(S.location),1)])):D("",!0)]),l("div",ji,[l("a",{href:S.google_event_link,target:"_blank",class:"text-blue-600 hover:text-blue-800",title:"View in Google Calendar"},f[1]||(f[1]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)]),8,Yi),S.google_meet_link?(u(),c("a",{key:0,href:S.google_meet_link,target:"_blank",class:"text-green-600 hover:text-green-800",title:"Join Google Meet"},f[2]||(f[2]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1)]),8,Ai)):D("",!0),l("button",{onClick:E=>v(S.google_event_id),class:"text-red-600 hover:text-red-800",title:"Delete Meeting"},f[3]||(f[3]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,Vi)])])]))),128))]))]))}},Ni={class:"p-6"},Li={key:0,class:"text-red-600 text-sm mb-4"},Wi={class:"mb-4"},Pi={class:"mb-4"},Ii={class:"mb-4"},Fi={class:"mt-6 flex justify-end"},ya={__name:"StandupModal",props:{show:Boolean,projectId:Number},emits:["close","standupAdded"],setup(e,{emit:t}){const s=e,a=t,n=rt({project_id:null,yesterday:"",today:"",blockers:""}),i=Y({}),r=Y(""),o=Y(!1);xt(()=>s.projectId,d=>{d&&(n.project_id=d)},{immediate:!0}),xt(()=>s.show,d=>{d&&(n.project_id=s.projectId,n.yesterday="",n.today="",n.blockers="",i.value={},r.value="",o.value=!1)});const h=async()=>{i.value={},r.value="",o.value=!0;try{const d=`
**Daily Standup**

**Yesterday:** ${n.yesterday}

**Today:** ${n.today}

**Blockers:** ${n.blockers||"None"}
`.trim();await window.axios.post(`/api/projects/${n.project_id}/standup`,{content:d,yesterday:n.yesterday,today:n.today,blockers:n.blockers}),hi("Standup submitted successfully!"),a("standupAdded"),a("close")}catch(d){d.response&&d.response.status===422?i.value=d.response.data.errors:d.response&&d.response.data.message?(r.value=d.response.data.message,d(d.response.data.message)):(r.value="Failed to submit standup.",d("Failed to submit standup."),console.error("Error submitting standup:",d))}finally{o.value=!1}};return(d,v)=>(u(),ye(je,{show:e.show,onClose:v[4]||(v[4]=g=>d.$emit("close"))},{default:V(()=>[l("div",Ni,[v[6]||(v[6]=l("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Daily Standup",-1)),r.value?(u(),c("div",Li,y(r.value),1)):D("",!0),l("form",{onSubmit:De(h,["prevent"])},[l("div",Wi,[p(B,{for:"yesterday",value:"What did you work on yesterday?"}),p(pe,{id:"yesterday",type:"text",class:"mt-1 block w-full",modelValue:n.yesterday,"onUpdate:modelValue":v[0]||(v[0]=g=>n.yesterday=g),required:""},null,8,["modelValue"]),p(we,{message:i.value.yesterday?i.value.yesterday[0]:"",class:"mt-2"},null,8,["message"])]),l("div",Pi,[p(B,{for:"today",value:"What will you work on today?"}),p(pe,{id:"today",type:"text",class:"mt-1 block w-full",modelValue:n.today,"onUpdate:modelValue":v[1]||(v[1]=g=>n.today=g),required:""},null,8,["modelValue"]),p(we,{message:i.value.today?i.value.today[0]:"",class:"mt-2"},null,8,["message"])]),l("div",Ii,[p(B,{for:"blockers",value:"Any blockers?"}),p(pe,{id:"blockers",type:"text",class:"mt-1 block w-full",modelValue:n.blockers,"onUpdate:modelValue":v[2]||(v[2]=g=>n.blockers=g),placeholder:"None"},null,8,["modelValue"]),p(we,{message:i.value.blockers?i.value.blockers[0]:"",class:"mt-2"},null,8,["message"])]),l("div",Fi,[p(Me,{onClick:v[3]||(v[3]=g=>d.$emit("close")),disabled:o.value},{default:V(()=>v[5]||(v[5]=[W("Cancel",-1)])),_:1,__:[5]},8,["disabled"]),p(_e,{class:K(["ms-3",{"opacity-75 cursor-not-allowed":o.value}]),type:"submit",disabled:o.value},{default:V(()=>[W(y(o.value?"Submitting...":"Submit Standup"),1)]),_:1},8,["disabled","class"])])],32)])]),_:1},8,["show"]))}};var Ri=Object.defineProperty,Hi=(e,t,s)=>t in e?Ri(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,Ke=(e,t,s)=>Hi(e,typeof t!="symbol"?t+"":t,s);const Ui=(e,t,s)=>{const a=e[t];return a?typeof a=="function"?a():Promise.resolve(a):new Promise((n,i)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(i.bind(null,new Error("Unknown variable dynamic import: "+t+(t.split("/").length!==s?". Note that variables only represent file names one level deep.":""))))})};let Ot,sa,aa,Ae,jt={},yt={};class Bi{constructor(t,s=!1){Ke(this,"texts",{}),Ke(this,"dateToMinutes",a=>a.getHours()*60+a.getMinutes()),Ae=this,this._texts=t,!s&&Date&&!Date.prototype.addDays&&this._initDatePrototypes()}_initDatePrototypes(){Date.prototype.addDays=function(t){return Ae.addDays(this,t)},Date.prototype.subtractDays=function(t){return Ae.subtractDays(this,t)},Date.prototype.addHours=function(t){return Ae.addHours(this,t)},Date.prototype.subtractHours=function(t){return Ae.subtractHours(this,t)},Date.prototype.addMinutes=function(t){return Ae.addMinutes(this,t)},Date.prototype.subtractMinutes=function(t){return Ae.subtractMinutes(this,t)},Date.prototype.getWeek=function(){return Ae.getWeek(this)},Date.prototype.isToday=function(){return Ae.isToday(this)},Date.prototype.isLeapYear=function(){return Ae.isLeapYear(this)},Date.prototype.format=function(t="YYYY-MM-DD"){return Ae.formatDate(this,t)},Date.prototype.formatTime=function(t="HH:mm"){return Ae.formatTime(this,t)}}removePrototypes(){delete Date.prototype.addDays,delete Date.prototype.subtractDays,delete Date.prototype.addHours,delete Date.prototype.subtractHours,delete Date.prototype.addMinutes,delete Date.prototype.subtractMinutes,delete Date.prototype.getWeek,delete Date.prototype.isToday,delete Date.prototype.isLeapYear,delete Date.prototype.format,delete Date.prototype.formatTime}updateTexts(t){this._texts=t}_todayFormatted(){return sa!==new Date().getDate()&&(Ot=new Date,sa=Ot.getDate(),aa=`${Ot.getFullYear()}-${Ot.getMonth()}-${Ot.getDate()}`),aa}addDays(t,s){const a=new Date(t.valueOf());return a.setDate(a.getDate()+s),a}subtractDays(t,s){const a=new Date(t.valueOf());return a.setDate(a.getDate()-s),a}addHours(t,s){const a=new Date(t.valueOf());return a.setHours(a.getHours()+s),a}subtractHours(t,s){const a=new Date(t.valueOf());return a.setHours(a.getHours()-s),a}addMinutes(t,s){const a=new Date(t.valueOf());return a.setMinutes(a.getMinutes()+s),a}subtractMinutes(t,s){const a=new Date(t.valueOf());return a.setMinutes(a.getMinutes()-s),a}getWeek(t){const s=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate())),a=s.getUTCDay()||7;s.setUTCDate(s.getUTCDate()+4-a);const n=new Date(Date.UTC(s.getUTCFullYear(),0,1));return Math.ceil(((s-n)/864e5+1)/7)}isToday(t){return`${t.getFullYear()}-${t.getMonth()}-${t.getDate()}`===this._todayFormatted()}isLeapYear(t){const s=t.getFullYear();return!(s%400)||s%100&&!(s%4)}getPreviousFirstDayOfWeek(t=null,s){const a=t&&new Date(t.valueOf())||new Date,n=s?7:6;return a.setDate(a.getDate()-(a.getDay()+n)%7),a}stringToDate(t){return t instanceof Date?t:(t.length===10&&(t+=" 00:00"),new Date(t.replace(/-/g,"/")))}countDays(t,s){typeof t=="string"&&(t=t.replace(/-/g,"/")),typeof s=="string"&&(s=s.replace(/-/g,"/")),t=new Date(t).setHours(0,0,0,0),s=new Date(s).setHours(0,0,1,0);const a=(new Date(s).getTimezoneOffset()-new Date(t).getTimezoneOffset())*60*1e3;return Math.ceil((s-t-a)/(24*3600*1e3))}datesInSameTimeStep(t,s,a){return Math.abs(t.getTime()-s.getTime())<=a*60*1e3}formatDate(t,s="YYYY-MM-DD",a=null){if(a||(a=this._texts),s||(s="YYYY-MM-DD"),s==="YYYY-MM-DD")return this.formatDateLite(t);jt={},yt={};const n={YYYY:()=>this._hydrateDateObject(t,a).YYYY,YY:()=>this._hydrateDateObject(t,a).YY(),M:()=>this._hydrateDateObject(t,a).M,MM:()=>this._hydrateDateObject(t,a).MM(),MMM:()=>this._hydrateDateObject(t,a).MMM(),MMMM:()=>this._hydrateDateObject(t,a).MMMM(),MMMMG:()=>this._hydrateDateObject(t,a).MMMMG(),D:()=>this._hydrateDateObject(t,a).D,DD:()=>this._hydrateDateObject(t,a).DD(),S:()=>this._hydrateDateObject(t,a).S(),d:()=>this._hydrateDateObject(t,a).d,dd:()=>this._hydrateDateObject(t,a).dd(),ddd:()=>this._hydrateDateObject(t,a).ddd(),dddd:()=>this._hydrateDateObject(t,a).dddd(),HH:()=>this._hydrateTimeObject(t,a).HH,H:()=>this._hydrateTimeObject(t,a).H,hh:()=>this._hydrateTimeObject(t,a).hh,h:()=>this._hydrateTimeObject(t,a).h,am:()=>this._hydrateTimeObject(t,a).am,AM:()=>this._hydrateTimeObject(t,a).AM,mm:()=>this._hydrateTimeObject(t,a).mm,m:()=>this._hydrateTimeObject(t,a).m};return s.replace(/(\{[a-zA-Z]+\}|[a-zA-Z]+)/g,(i,r)=>{const o=n[r.replace(/\{|\}/g,"")];return o!==void 0?o():r})}formatDateLite(t){const s=t.getMonth()+1,a=t.getDate();return`${t.getFullYear()}-${s<10?"0":""}${s}-${a<10?"0":""}${a}`}formatTime(t,s="HH:mm",a=null,n=!1){let i=!1;if(n){const[h,d,v]=[t.getHours(),t.getMinutes(),t.getSeconds()];h+d+v===141&&(i=!0)}if(t instanceof Date&&s==="HH:mm")return i?"24:00":this.formatTimeLite(t);yt={},a||(a=this._texts);const r=this._hydrateTimeObject(t,a),o=s.replace(/(\{[a-zA-Z]+\}|[a-zA-Z]+)/g,(h,d)=>{const v=r[d.replace(/\{|\}/g,"")];return v!==void 0?v:d});return i?o.replace("23:59","24:00"):o}formatTimeLite(t){const s=t.getHours(),a=t.getMinutes();return`${(s<10?"0":"")+s}:${(a<10?"0":"")+a}`}_nth(t){if(t>3&&t<21)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}}_hydrateDateObject(t,s){if(jt.D)return jt;const a=t.getFullYear(),n=t.getMonth()+1,i=t.getDate(),o=(t.getDay()-1+7)%7;return jt={YYYY:a,YY:()=>a.toString().substring(2),M:n,MM:()=>(n<10?"0":"")+n,MMM:()=>s.months[n-1].substring(0,3),MMMM:()=>s.months[n-1],MMMMG:()=>(s.monthsGenitive||s.months)[n-1],D:i,DD:()=>(i<10?"0":"")+i,S:()=>this._nth(i),d:o+1,dd:()=>s.weekDays[o][0],ddd:()=>s.weekDays[o].substr(0,3),dddd:()=>s.weekDays[o]},jt}_hydrateTimeObject(t,s){if(yt.am)return yt;let a,n;t instanceof Date?(a=t.getHours(),n=t.getMinutes()):(a=Math.floor(t/60),n=Math.floor(t%60));const i=a%12?a%12:12,r=(s||{am:"am",pm:"pm"})[a===24||a<12?"am":"pm"];return yt={H:a,h:i,HH:(a<10?"0":"")+a,hh:(i<10?"0":"")+i,am:r,AM:r.toUpperCase(),m:n,mm:(n<10?"0":"")+n},yt}}const zi=1440;class Gi{constructor(t){Ke(this,"_vuecal",null),Ke(this,"selectCell",(s=!1,a,n)=>{this._vuecal.$emit("cell-click",n?{date:a,split:n}:a),this._vuecal.clickToNavigate||s?this._vuecal.switchToNarrowerView():this._vuecal.dblclickToNavigate&&"ontouchstart"in window&&(this._vuecal.domEvents.dblTapACell.taps++,setTimeout(()=>this._vuecal.domEvents.dblTapACell.taps=0,this._vuecal.domEvents.dblTapACell.timeout),this._vuecal.domEvents.dblTapACell.taps>=2&&(this._vuecal.domEvents.dblTapACell.taps=0,this._vuecal.switchToNarrowerView(),this._vuecal.$emit("cell-dblclick",n?{date:a,split:n}:a)))}),Ke(this,"keyPressEnterCell",(s,a)=>{this._vuecal.$emit("cell-keypress-enter",a?{date:s,split:a}:s),this._vuecal.switchToNarrowerView()}),Ke(this,"getPosition",s=>{const{left:a,top:n}=this._vuecal.cellsEl.getBoundingClientRect(),{clientX:i,clientY:r}="ontouchstart"in window&&s.touches?s.touches[0]:s;return{x:i-a,y:r-n}}),Ke(this,"minutesAtCursor",s=>{let a=0,n={x:0,y:0};const{timeStep:i,timeCellHeight:r,timeFrom:o}=this._vuecal.$props;return typeof s=="number"?a=s:typeof s=="object"&&(n=this.getPosition(s),a=Math.round(n.y*i/parseInt(r)+o)),{minutes:Math.max(Math.min(a,zi),0),cursorCoords:n}}),this._vuecal=t}}const qi=2,vs=1440;let he,me,fs;class Zi{constructor(t,s){Ke(this,"_vuecal",null),Ke(this,"eventDefaults",{_eid:null,start:"",startTimeMinutes:0,end:"",endTimeMinutes:0,title:"",content:"",background:!1,allDay:!1,segments:null,repeat:null,daysCount:1,deletable:!0,deleting:!1,titleEditable:!0,resizable:!0,resizing:!1,draggable:!0,dragging:!1,draggingStatic:!1,focused:!1,class:""}),this._vuecal=t,he=s}createAnEvent(t,s,a){if(typeof t=="string"&&(t=he.stringToDate(t)),!(t instanceof Date))return!1;const n=he.dateToMinutes(t);s=s*1||qi*60;const i=n+s,r=he.addMinutes(new Date(t),s);a.end&&(typeof a.end=="string"&&(a.end=he.stringToDate(a.end)),a.endTimeMinutes=he.dateToMinutes(a.end));const o={...this.eventDefaults,_eid:`${this._vuecal._.uid}_${this._vuecal.eventIdIncrement++}`,start:t,startTimeMinutes:n,end:r,endTimeMinutes:i,segments:null,...a};if(!(typeof this._vuecal.onEventCreate=="function"&&!this._vuecal.onEventCreate(o,()=>this.deleteAnEvent(o))))return o.startDateF!==o.endDateF&&(o.daysCount=he.countDays(o.start,o.end)),this._vuecal.mutableEvents.push(o),this._vuecal.addEventsToView([o]),this._vuecal.emitWithEvent("event-create",o),this._vuecal.$emit("event-change",{event:this._vuecal.cleanupEvent(o),originalEvent:null}),o}addEventSegment(t){t.segments||(t.segments={},t.segments[he.formatDateLite(t.start)]={start:t.start,startTimeMinutes:t.startTimeMinutes,endTimeMinutes:vs,isFirstDay:!0,isLastDay:!1});const s=t.segments[he.formatDateLite(t.end)];s&&(s.isLastDay=!1,s.endTimeMinutes=vs);const a=he.addDays(t.end,1),n=he.formatDateLite(a);return a.setHours(0,0,0,0),t.segments[n]={start:a,startTimeMinutes:0,endTimeMinutes:t.endTimeMinutes,isFirstDay:!1,isLastDay:!0},t.end=he.addMinutes(a,t.endTimeMinutes),t.daysCount=Object.keys(t.segments).length,n}removeEventSegment(t){let s=Object.keys(t.segments).length;if(s<=1)return he.formatDateLite(t.end);delete t.segments[he.formatDateLite(t.end)],s--;const a=he.subtractDays(t.end,1),n=he.formatDateLite(a),i=t.segments[n];return s?i&&(i.isLastDay=!0,i.endTimeMinutes=t.endTimeMinutes):t.segments=null,t.daysCount=s||1,t.end=a,n}createEventSegments(t,s,a){const n=s.getTime(),i=a.getTime();let r=t.start.getTime(),o=t.end.getTime(),h=!1,d,v,g;for(!t.end.getHours()&&!t.end.getMinutes()&&(o-=1e3),t.segments={},t.repeat?(d=n,v=Math.min(i,t.repeat.until?he.stringToDate(t.repeat.until).getTime():i)):(d=Math.max(n,r),v=Math.min(i,o));d<=v;){let f=!1;const S=he.addDays(new Date(d),1).setHours(0,0,0,0);let E,P,Q,C;if(t.repeat){const _=new Date(d),A=he.formatDateLite(_);(h||t.occurrences&&t.occurrences[A])&&(h||(r=t.occurrences[A].start,g=new Date(r).setHours(0,0,0,0),o=t.occurrences[A].end),h=!0,f=!0),E=d===g,P=A===he.formatDateLite(new Date(o)),Q=new Date(E?r:d),C=he.formatDateLite(Q),P&&(h=!1)}else f=!0,E=d===r,P=v===o&&S>v,Q=E?t.start:new Date(d),C=he.formatDateLite(E?t.start:Q);f&&(t.segments[C]={start:Q,startTimeMinutes:E?t.startTimeMinutes:0,endTimeMinutes:P?t.endTimeMinutes:vs,isFirstDay:E,isLastDay:P}),d=S}return t}deleteAnEvent(t){this._vuecal.emitWithEvent("event-delete",t),this._vuecal.mutableEvents=this._vuecal.mutableEvents.filter(s=>s._eid!==t._eid),this._vuecal.view.events=this._vuecal.view.events.filter(s=>s._eid!==t._eid)}checkCellOverlappingEvents(t,s){fs=t.slice(0),me={},t.forEach(n=>{fs.shift(),me[n._eid]||(me[n._eid]={overlaps:[],start:n.start,position:0}),me[n._eid].position=0,fs.forEach(i=>{me[i._eid]||(me[i._eid]={overlaps:[],start:i.start,position:0});const r=this.eventInRange(i,n.start,n.end),o=s.overlapsPerTimeStep?he.datesInSameTimeStep(n.start,i.start,s.timeStep):1;if(!n.background&&!n.allDay&&!i.background&&!i.allDay&&r&&o)me[n._eid].overlaps.push(i._eid),me[n._eid].overlaps=[...new Set(me[n._eid].overlaps)],me[i._eid].overlaps.push(n._eid),me[i._eid].overlaps=[...new Set(me[i._eid].overlaps)],me[i._eid].position++;else{let h,d;(h=(me[n._eid]||{overlaps:[]}).overlaps.indexOf(i._eid))>-1&&me[n._eid].overlaps.splice(h,1),(d=(me[i._eid]||{overlaps:[]}).overlaps.indexOf(n._eid))>-1&&me[i._eid].overlaps.splice(d,1),me[i._eid].position--}})});let a=0;for(const n in me){const i=me[n],r=i.overlaps.map(o=>({id:o,start:me[o].start}));r.push({id:n,start:i.start}),r.sort((o,h)=>o.start<h.start?-1:o.start>h.start?1:o.id>h.id?-1:1),i.position=r.findIndex(o=>o.id===n),a=Math.max(this.getOverlapsStreak(i,me),a)}return[me,a]}getOverlapsStreak(t,s={}){let a=t.overlaps.length+1,n=[];return t.overlaps.forEach(i=>{n.includes(i)||t.overlaps.filter(o=>o!==i).forEach(o=>{s[o].overlaps.includes(i)||n.push(o)})}),n=[...new Set(n)],a-=n.length,a}eventInRange(t,s,a){if(t.allDay||!this._vuecal.time){const r=new Date(t.start).setHours(0,0,0,0);return new Date(t.end).setHours(23,59,0,0)>=new Date(s).setHours(0,0,0,0)&&r<=new Date(a).setHours(0,0,0,0)}const n=t.start.getTime(),i=t.end.getTime();return n<a.getTime()&&i>s.getTime()}}const Ji={class:"vuecal__flex vuecal__weekdays-headings"},Ki=["onClick"],Xi={class:"vuecal__flex weekday-label",grow:""},Qi={class:"full"},en={class:"small"},tn={class:"xsmall"},sn={key:0},an={key:0,class:"vuecal__flex vuecal__split-days-headers",grow:""};function nn(e,t,s,a,n,i){return u(),c("div",Ji,[(u(!0),c(G,null,J(i.headings,(r,o)=>(u(),c(G,{key:o},[r.hide?D("",!0):(u(),c("div",{key:0,class:K(["vuecal__flex vuecal__heading",{today:r.today,clickable:i.cellHeadingsClickable}]),style:$e(i.weekdayCellStyles),onClick:h=>i.view.id==="week"&&i.selectCell(r.date,h),onDblclick:t[0]||(t[0]=h=>i.view.id==="week"&&i.vuecal.dblclickToNavigate&&s.switchToNarrowerView())},[p(Jt,{name:`slide-fade--${s.transitionDirection}`,appear:i.vuecal.transitions},{default:V(()=>[(u(),c("div",{class:"vuecal__flex",column:"",key:i.vuecal.transitions?`${o}-${r.dayOfMonth}`:!1},[l("div",Xi,[se(e.$slots,"weekday-heading",{heading:i.cleanupHeading(r),view:i.view},()=>[l("span",Qi,y(r.full),1),l("span",en,y(r.small),1),l("span",tn,y(r.xsmall),1),r.dayOfMonth?(u(),c("span",sn," "+y(r.dayOfMonth),1)):D("",!0)])]),i.vuecal.hasSplits&&i.vuecal.stickySplitLabels?(u(),c("div",an,[(u(!0),c(G,null,J(i.vuecal.daySplits,(h,d)=>(u(),c("div",{class:K(["day-split-header",h.class||!1]),key:d},[se(e.$slots,"split-label",{split:h,view:i.view},()=>[W(y(h.label),1)])],2))),128))])):D("",!0)]))]),_:2},1032,["name","appear"])],46,Ki))],64))),128))])}const Mt=(e,t)=>{const s=e.__vccOpts||e;for(const[a,n]of t)s[a]=n;return s},ln={inject:["vuecal","utils","view"],props:{transitionDirection:{type:String,default:"right"},weekDays:{type:Array,default:()=>[]},switchToNarrowerView:{type:Function,default:()=>{}}},methods:{selectCell(e,t){e.getTime()!==this.view.selectedDate.getTime()&&(this.view.selectedDate=e),this.utils.cell.selectCell(!1,e,t)},cleanupHeading:e=>({label:e.full,date:e.date,...e.today?{today:e.today}:{}})},computed:{headings(){if(!["month","week"].includes(this.view.id))return[];let e=!1;return this.weekDays.map((s,a)=>{const n=this.utils.date.addDays(this.view.startDate,this.vuecal.startWeekOnSunday&&this.vuecal.hideWeekends?a-1:a);return{hide:s.hide,full:s.label,small:s.short||s.label.substr(0,3),xsmall:s.short||s.label.substr(0,1),...this.view.id==="week"?{dayOfMonth:n.getDate(),date:n,today:!e&&this.utils.date.isToday(n)&&!e++}:{}}})},cellWidth(){return 100/(7-this.weekDays.reduce((e,t)=>e+t.hide,0))},weekdayCellStyles(){return{...this.vuecal.hideWeekdays.length?{width:`${this.cellWidth}%`}:{}}},cellHeadingsClickable(){return this.view.id==="week"&&(this.vuecal.clickToNavigate||this.vuecal.dblclickToNavigate)}}},ga=Mt(ln,[["render",nn]]),rn={class:"vuecal__header"},on={key:0,class:"vuecal__flex vuecal__menu",role:"tablist","aria-label":"Calendar views navigation"},dn=["onDragenter","onDragleave","onClick","aria-label"],un={key:1,class:"vuecal__title-bar"},cn=["aria-label"],hn={class:"vuecal__flex vuecal__title",grow:""},mn=["aria-label"],vn={key:0,class:"vuecal__flex vuecal__split-days-headers"};function fn(e,t,s,a,n,i){const r=ot("weekdays-headings");return u(),c("div",rn,[s.options.hideViewSelector?D("",!0):(u(),c("div",on,[(u(!0),c(G,null,J(s.viewProps.views,(o,h)=>(u(),c(G,{key:h},[o.enabled?(u(),c("button",{key:0,class:K(["vuecal__view-btn",{"vuecal__view-btn--active":i.view.id===h,"vuecal__view-btn--highlighted":e.highlightedControl===h}]),type:"button",onDragenter:d=>s.editEvents.drag&&i.dnd&&i.dnd.viewSelectorDragEnter(d,h,e.$data),onDragleave:d=>s.editEvents.drag&&i.dnd&&i.dnd.viewSelectorDragLeave(d,h,e.$data),onClick:d=>i.switchView(h,null,!0),"aria-label":`${o.label} view`},y(o.label),43,dn)):D("",!0)],64))),128))])),s.options.hideTitleBar?D("",!0):(u(),c("div",un,[l("button",{class:K(["vuecal__arrow vuecal__arrow--prev",{"vuecal__arrow--highlighted":e.highlightedControl==="previous"}]),type:"button",onClick:t[0]||(t[0]=(...o)=>i.previous&&i.previous(...o)),onDragenter:t[1]||(t[1]=o=>s.editEvents.drag&&i.dnd&&i.dnd.viewSelectorDragEnter(o,"previous",e.$data)),onDragleave:t[2]||(t[2]=o=>s.editEvents.drag&&i.dnd&&i.dnd.viewSelectorDragLeave(o,"previous",e.$data)),"aria-label":`Previous ${i.view.id}`},[se(e.$slots,"arrow-prev")],42,cn),l("div",hn,[p(Jt,{name:s.options.transitions?`slide-fade--${i.transitionDirection}`:""},{default:V(()=>[(u(),ye(vi(i.broaderView?"button":"span"),{type:!!i.broaderView&&"button",key:`${i.view.id}${i.view.startDate.toString()}`,onClick:t[3]||(t[3]=o=>!!i.broaderView&&i.switchToBroaderView()),"aria-label":!!i.broaderView&&`Go to ${i.broaderView} view`},{default:V(()=>[se(e.$slots,"title")]),_:3},8,["type","aria-label"]))]),_:3},8,["name"])]),s.options.todayButton?(u(),c("button",{key:0,class:K(["vuecal__today-btn",{"vuecal__today-btn--highlighted":e.highlightedControl==="today"}]),type:"button",onClick:t[4]||(t[4]=(...o)=>i.goToToday&&i.goToToday(...o)),onDragenter:t[5]||(t[5]=o=>s.editEvents.drag&&i.dnd&&i.dnd.viewSelectorDragEnter(o,"today",e.$data)),onDragleave:t[6]||(t[6]=o=>s.editEvents.drag&&i.dnd&&i.dnd.viewSelectorDragLeave(o,"today",e.$data)),"aria-label":"Today"},[se(e.$slots,"today-button")],34)):D("",!0),l("button",{class:K(["vuecal__arrow vuecal__arrow--next",{"vuecal__arrow--highlighted":e.highlightedControl==="next"}]),type:"button",onClick:t[7]||(t[7]=(...o)=>i.next&&i.next(...o)),onDragenter:t[8]||(t[8]=o=>s.editEvents.drag&&i.dnd&&i.dnd.viewSelectorDragEnter(o,"next",e.$data)),onDragleave:t[9]||(t[9]=o=>s.editEvents.drag&&i.dnd&&i.dnd.viewSelectorDragLeave(o,"next",e.$data)),"aria-label":`Next ${i.view.id}`},[se(e.$slots,"arrow-next")],42,mn)])),s.viewProps.weekDaysInHeader?(u(),ye(r,{key:2,"week-days":s.weekDays,"transition-direction":i.transitionDirection,"switch-to-narrower-view":s.switchToNarrowerView},_s({_:2},[e.$slots["weekday-heading"]?{name:"weekday-heading",fn:V(({heading:o,view:h})=>[se(e.$slots,"weekday-heading",{heading:o,view:h})]),key:"0"}:void 0,e.$slots["split-label"]?{name:"split-label",fn:V(({split:o})=>[se(e.$slots,"split-label",{split:o,view:i.view})]),key:"1"}:void 0]),1032,["week-days","transition-direction","switch-to-narrower-view"])):D("",!0),p(Jt,{name:`slide-fade--${i.transitionDirection}`},{default:V(()=>[i.showDaySplits?(u(),c("div",vn,[(u(!0),c(G,null,J(s.daySplits,(o,h)=>(u(),c("div",{class:K(["day-split-header",o.class||!1]),key:h},[se(e.$slots,"split-label",{split:o,view:i.view.id},()=>[W(y(o.label),1)])],2))),128))])):D("",!0)]),_:3},8,["name"])])}const pn={inject:["vuecal","previous","next","switchView","updateSelectedDate","modules","view"],components:{WeekdaysHeadings:ga},props:{options:{type:Object,default:()=>({})},editEvents:{type:Object,required:!0},hasSplits:{type:[Boolean,Number],default:!1},daySplits:{type:Array,default:()=>[]},viewProps:{type:Object,default:()=>({})},weekDays:{type:Array,default:()=>[]},switchToNarrowerView:{type:Function,default:()=>{}}},data:()=>({highlightedControl:null}),methods:{goToToday(){this.updateSelectedDate(new Date(new Date().setHours(0,0,0,0)))},switchToBroaderView(){this.transitionDirection="left",this.broaderView&&this.switchView(this.broaderView)}},computed:{transitionDirection:{get(){return this.vuecal.transitionDirection},set(e){this.vuecal.transitionDirection=e}},broaderView(){const{enabledViews:e}=this.vuecal;return e[e.indexOf(this.view.id)-1]},showDaySplits(){return this.view.id==="day"&&this.hasSplits&&this.options.stickySplitLabels&&!this.options.minSplitWidth},dnd(){return this.modules.dnd}}},yn=Mt(pn,[["render",fn]]),gn=["draggable"];function wn(e,t,s,a,n,i){return u(),c("div",{class:K(["vuecal__event",i.eventClasses]),style:$e(i.eventStyles),tabindex:"0",onFocus:t[4]||(t[4]=(...r)=>i.focusEvent&&i.focusEvent(...r)),onKeypress:t[5]||(t[5]=ha(De((...r)=>i.onEnterKeypress&&i.onEnterKeypress(...r),["stop"]),["enter"])),onMouseenter:t[6]||(t[6]=(...r)=>i.onMouseEnter&&i.onMouseEnter(...r)),onMouseleave:t[7]||(t[7]=(...r)=>i.onMouseLeave&&i.onMouseLeave(...r)),onTouchstart:t[8]||(t[8]=De((...r)=>i.onTouchStart&&i.onTouchStart(...r),["stop"])),onMousedown:t[9]||(t[9]=r=>i.onMouseDown(r)),onMouseup:t[10]||(t[10]=(...r)=>i.onMouseUp&&i.onMouseUp(...r)),onTouchend:t[11]||(t[11]=(...r)=>i.onMouseUp&&i.onMouseUp(...r)),onTouchmove:t[12]||(t[12]=(...r)=>i.onTouchMove&&i.onTouchMove(...r)),onDblclick:t[13]||(t[13]=(...r)=>i.onDblClick&&i.onDblClick(...r)),draggable:i.draggable,onDragstart:t[14]||(t[14]=r=>i.draggable&&i.onDragStart(r)),onDragend:t[15]||(t[15]=r=>i.draggable&&i.onDragEnd())},[i.vuecal.editEvents.delete&&s.event.deletable?(u(),c("div",{key:0,class:"vuecal__event-delete",onClick:t[0]||(t[0]=De((...r)=>i.deleteEvent&&i.deleteEvent(...r),["stop"])),onTouchstart:t[1]||(t[1]=De((...r)=>i.touchDeleteEvent&&i.touchDeleteEvent(...r),["stop"]))},y(i.vuecal.texts.deleteEvent),33)):D("",!0),se(e.$slots,"event",{event:s.event,view:i.view.id}),i.resizable?(u(),c("div",{key:1,class:"vuecal__event-resize-handle",contenteditable:"false",onMousedown:t[2]||(t[2]=De((...r)=>i.onResizeHandleMouseDown&&i.onResizeHandleMouseDown(...r),["stop","prevent"])),onTouchstart:t[3]||(t[3]=De((...r)=>i.onResizeHandleMouseDown&&i.onResizeHandleMouseDown(...r),["stop","prevent"]))},null,32)):D("",!0)],46,gn)}const _n={inject:["vuecal","utils","modules","view","domEvents","editEvents"],props:{cellFormattedDate:{type:String,default:""},event:{type:Object,default:()=>({})},cellEvents:{type:Array,default:()=>[]},overlaps:{type:Array,default:()=>[]},eventPosition:{type:Number,default:0},overlapsStreak:{type:Number,default:0},allDay:{type:Boolean,default:!1}},data:()=>({touch:{dragThreshold:30,startX:0,startY:0,dragged:!1}}),methods:{onMouseDown(e,t=!1){if("ontouchstart"in window&&!t)return!1;const{clickHoldAnEvent:s,focusAnEvent:a,resizeAnEvent:n,dragAnEvent:i}=this.domEvents;if(a._eid===this.event._eid&&s._eid===this.event._eid)return!0;this.focusEvent(),s._eid=null,this.vuecal.editEvents.delete&&this.event.deletable&&(s.timeoutId=setTimeout(()=>{!n._eid&&!i._eid&&(s._eid=this.event._eid,this.event.deleting=!0)},s.timeout))},onMouseUp(e){this.domEvents.focusAnEvent._eid===this.event._eid&&!this.touch.dragged&&(this.domEvents.focusAnEvent.mousedUp=!0),this.touch.dragged=!1},onMouseEnter(e){e.preventDefault(),this.vuecal.emitWithEvent("event-mouse-enter",this.event)},onMouseLeave(e){e.preventDefault(),this.vuecal.emitWithEvent("event-mouse-leave",this.event)},onTouchMove(e){if(typeof this.vuecal.onEventClick!="function")return;const{clientX:t,clientY:s}=e.touches[0],{startX:a,startY:n,dragThreshold:i}=this.touch;(Math.abs(t-a)>i||Math.abs(s-n)>i)&&(this.touch.dragged=!0)},onTouchStart(e){this.touch.startX=e.touches[0].clientX,this.touch.startY=e.touches[0].clientY,this.onMouseDown(e,!0)},onEnterKeypress(e){if(typeof this.vuecal.onEventClick=="function")return this.vuecal.onEventClick(this.event,e)},onDblClick(e){if(typeof this.vuecal.onEventDblclick=="function")return this.vuecal.onEventDblclick(this.event,e)},onDragStart(e){this.dnd&&this.dnd.eventDragStart(e,this.event)},onDragEnd(){this.dnd&&this.dnd.eventDragEnd(this.event)},onResizeHandleMouseDown(){this.focusEvent(),this.domEvents.dragAnEvent._eid=null,this.domEvents.resizeAnEvent=Object.assign(this.domEvents.resizeAnEvent,{_eid:this.event._eid,start:(this.segment||this.event).start,split:this.event.split||null,segment:!!this.segment&&this.utils.date.formatDateLite(this.segment.start),originalEnd:new Date((this.segment||this.event).end),originalEndTimeMinutes:this.event.endTimeMinutes}),this.event.resizing=!0},deleteEvent(e=!1){if("ontouchstart"in window&&!e)return!1;this.utils.event.deleteAnEvent(this.event)},touchDeleteEvent(e){this.deleteEvent(!0)},cancelDeleteEvent(){this.event.deleting=!1},focusEvent(){const{focusAnEvent:e}=this.domEvents,t=e._eid;if(t!==this.event._eid){if(t){const s=this.view.events.find(a=>a._eid===t);s&&(s.focused=!1)}this.vuecal.cancelDelete(),this.vuecal.emitWithEvent("event-focus",this.event),e._eid=this.event._eid,this.event.focused=!0}}},computed:{eventDimensions(){const{startTimeMinutes:e,endTimeMinutes:t}=this.segment||this.event;let s=e-this.vuecal.timeFrom;const a=Math.max(Math.round(s*this.vuecal.timeCellHeight/this.vuecal.timeStep),0);s=Math.min(t,this.vuecal.timeTo)-this.vuecal.timeFrom;const n=Math.round(s*this.vuecal.timeCellHeight/this.vuecal.timeStep),i=Math.max(n-a,5);return{top:a,height:i}},eventStyles(){if(this.event.allDay||!this.vuecal.time||!this.event.endTimeMinutes||this.view.id==="month"||this.allDay)return{};let e=100/Math.min(this.overlaps.length+1,this.overlapsStreak),t=100/(this.overlaps.length+1)*this.eventPosition;this.vuecal.minEventWidth&&e<this.vuecal.minEventWidth&&(e=this.vuecal.minEventWidth,t=(100-this.vuecal.minEventWidth)/this.overlaps.length*this.eventPosition);const{top:s,height:a}=this.eventDimensions;return{top:`${s}px`,height:`${a}px`,width:`${e}%`,left:this.event.left&&`${this.event.left}px`||`${t}%`}},eventClasses(){const{isFirstDay:e,isLastDay:t}=this.segment||{};return{[this.event.class]:!!this.event.class,"vuecal__event--focus":this.event.focused,"vuecal__event--resizing":this.event.resizing,"vuecal__event--background":this.event.background,"vuecal__event--deletable":this.event.deleting,"vuecal__event--all-day":this.event.allDay,"vuecal__event--dragging":!this.event.draggingStatic&&this.event.dragging,"vuecal__event--static":this.event.dragging&&this.event.draggingStatic,"vuecal__event--multiple-days":!!this.segment,"event-start":this.segment&&e&&!t,"event-middle":this.segment&&!e&&!t,"event-end":this.segment&&t&&!e}},segment(){return this.event.segments&&this.event.segments[this.cellFormattedDate]||null},draggable(){const{draggable:e,background:t,daysCount:s}=this.event;return this.vuecal.editEvents.drag&&e&&!t&&s===1},resizable(){const{editEvents:e,time:t}=this.vuecal;return e.resize&&this.event.resizable&&t&&!this.allDay&&(!this.segment||this.segment&&this.segment.isLastDay)&&this.view.id!=="month"},dnd(){return this.modules.dnd}}},bn=Mt(_n,[["render",wn]]),kn=["data-split","aria-label","onTouchstart","onMousedown","onDragover","onDrop"],Dn={key:0,class:"cell-time-labels"},xn=["innerHTML"],Mn={key:2,class:"vuecal__cell-events"},Sn=["title"];function Tn(e,t,s,a,n,i){const r=ot("event");return u(),ye(fi,{class:K(["vuecal__cell",i.cellClasses]),name:`slide-fade--${i.transitionDirection}`,tag:"div",appear:s.options.transitions,style:$e(i.cellStyles)},{default:V(()=>[(u(!0),c(G,null,J(i.splitsCount?i.splits:1,(o,h)=>(u(),c("div",{class:K(["vuecal__flex vuecal__cell-content",i.splitsCount&&i.splitClasses(o)]),key:s.options.transitions?`${i.view.id}-${s.data.content}-${h}`:h,"data-split":i.splitsCount?o.id:!1,column:"",tabindex:"0","aria-label":s.data.content,onFocus:t[0]||(t[0]=d=>i.onCellFocus(d)),onKeypress:t[1]||(t[1]=ha(d=>i.onCellkeyPressEnter(d),["enter"])),onTouchstart:d=>!i.isDisabled&&i.onCellTouchStart(d,i.splitsCount?o.id:null),onMousedown:d=>!i.isDisabled&&i.onCellMouseDown(d,i.splitsCount?o.id:null),onClick:t[2]||(t[2]=d=>!i.isDisabled&&i.onCellClick(d)),onDblclick:t[3]||(t[3]=d=>!i.isDisabled&&i.onCellDblClick(d)),onContextmenu:t[4]||(t[4]=d=>!i.isDisabled&&s.options.cellContextmenu&&i.onCellContextMenu(d)),onDragenter:t[5]||(t[5]=d=>!i.isDisabled&&s.editEvents.drag&&i.dnd&&i.dnd.cellDragEnter(d,e.$data,s.data.startDate)),onDragover:d=>!i.isDisabled&&s.editEvents.drag&&i.dnd&&i.dnd.cellDragOver(d,e.$data,s.data.startDate,i.splitsCount?o.id:null),onDragleave:t[6]||(t[6]=d=>!i.isDisabled&&s.editEvents.drag&&i.dnd&&i.dnd.cellDragLeave(d,e.$data,s.data.startDate)),onDrop:d=>!i.isDisabled&&s.editEvents.drag&&i.dnd&&i.dnd.cellDragDrop(d,e.$data,s.data.startDate,i.splitsCount?o.id:null)},[s.options.showTimeInCells&&s.options.time&&i.isWeekOrDayView&&!s.allDay?(u(),c("div",Dn,[(u(!0),c(G,null,J(i.vuecal.timeCells,(d,v)=>(u(),c("span",{class:"cell-time-label",key:v},y(d.label),1))),128))])):D("",!0),i.isWeekOrDayView&&!s.allDay&&i.specialHours.length?(u(!0),c(G,{key:1},J(i.specialHours,(d,v)=>(u(),c("div",{class:K(["vuecal__special-hours",`vuecal__special-hours--day${d.day} ${d.class}`]),style:$e(`height: ${d.height}px;top: ${d.top}px`)},[d.label?(u(),c("div",{key:0,class:"special-hours-label",innerHTML:d.label},null,8,xn)):D("",!0)],6))),256)):D("",!0),se(e.$slots,"cell-content",{events:i.events,selectCell:d=>i.selectCell(d,!0),split:i.splitsCount?o:!1}),i.eventsCount&&(i.isWeekOrDayView||i.view.id==="month"&&s.options.eventsOnMonthView)?(u(),c("div",Mn,[(u(!0),c(G,null,J(i.splitsCount?o.events:i.events,(d,v)=>(u(),ye(r,{key:v,"cell-formatted-date":s.data.formattedDate,event:d,"all-day":s.allDay,"cell-events":i.splitsCount?o.events:i.events,overlaps:((i.splitsCount?o.overlaps[d._eid]:e.cellOverlaps[d._eid])||[]).overlaps,"event-position":((i.splitsCount?o.overlaps[d._eid]:e.cellOverlaps[d._eid])||[]).position,"overlaps-streak":i.splitsCount?o.overlapsStreak:e.cellOverlapsStreak},{event:V(({event:g,view:f})=>[se(e.$slots,"event",{view:f,event:g})]),_:2},1032,["cell-formatted-date","event","all-day","cell-events","overlaps","event-position","overlaps-streak"]))),128))])):D("",!0)],42,kn))),128)),i.timelineVisible?(u(),c("div",{class:"vuecal__now-line",style:$e(`top: ${i.todaysTimePosition}px`),key:s.options.transitions?`${i.view.id}-now-line`:"now-line",title:i.utils.date.formatTime(i.vuecal.now)},null,12,Sn)):D("",!0)]),_:3},8,["class","name","appear","style"])}const Cn={inject:["vuecal","utils","modules","view","domEvents"],components:{Event:bn},props:{options:{type:Object,default:()=>({})},editEvents:{type:Object,required:!0},data:{type:Object,required:!0},cellSplits:{type:Array,default:()=>[]},minTimestamp:{type:[Number,null],default:null},maxTimestamp:{type:[Number,null],default:null},cellWidth:{type:[Number,Boolean],default:!1},allDay:{type:Boolean,default:!1}},data:()=>({cellOverlaps:{},cellOverlapsStreak:1,timeAtCursor:null,highlighted:!1,highlightedSplit:null}),methods:{getSplitAtCursor({target:e}){let s=e.classList.contains("vuecal__cell-split")?e:this.vuecal.findAncestor(e,"vuecal__cell-split");return s&&(s=s.attributes["data-split"].value,parseInt(s).toString()===s.toString()&&(s=parseInt(s))),s||null},splitClasses(e){return{"vuecal__cell-split":!0,"vuecal__cell-split--highlighted":this.highlightedSplit===e.id,[e.class]:!!e.class}},checkCellOverlappingEvents(){this.options.time&&this.eventsCount&&!this.splitsCount&&(this.eventsCount===1?(this.cellOverlaps=[],this.cellOverlapsStreak=1):[this.cellOverlaps,this.cellOverlapsStreak]=this.utils.event.checkCellOverlappingEvents(this.events,this.options))},isDOMElementAnEvent(e){return this.vuecal.isDOMElementAnEvent(e)},selectCell(e,t=!1){const s=this.splitsCount?this.getSplitAtCursor(e):null;this.utils.cell.selectCell(t,this.timeAtCursor,s),this.timeAtCursor=null},onCellkeyPressEnter(e){this.isSelected||this.onCellFocus(e);const t=this.splitsCount?this.getSplitAtCursor(e):null;this.utils.cell.keyPressEnterCell(this.timeAtCursor,t),this.timeAtCursor=null},onCellFocus(e){if(!this.isSelected&&!this.isDisabled){this.isSelected=this.data.startDate;const t=this.splitsCount?this.getSplitAtCursor(e):null,s=this.timeAtCursor||this.data.startDate;this.vuecal.$emit("cell-focus",t?{date:s,split:t}:s)}},onCellMouseDown(e,t=null,s=!1){if("ontouchstart"in window&&!s)return!1;this.isSelected||this.onCellFocus(e);const{clickHoldACell:a,focusAnEvent:n}=this.domEvents;this.domEvents.cancelClickEventCreation=!1,a.eventCreated=!1,this.timeAtCursor=new Date(this.data.startDate);const{minutes:i,cursorCoords:{y:r}}=this.vuecal.minutesAtCursor(e);this.timeAtCursor.setMinutes(i);const o=this.isDOMElementAnEvent(e.target);!o&&n._eid&&((this.view.events.find(h=>h._eid===n._eid)||{}).focused=!1),this.editEvents.create&&!o&&this.setUpEventCreation(e,r)},setUpEventCreation(e,t){if(this.options.dragToCreateEvent&&["week","day"].includes(this.view.id)){const{dragCreateAnEvent:s}=this.domEvents;if(s.startCursorY=t,s.split=this.splitsCount?this.getSplitAtCursor(e):null,s.start=this.timeAtCursor,this.options.snapToTime){let a=this.timeAtCursor.getHours()*60+this.timeAtCursor.getMinutes();const n=a+this.options.snapToTime/2;a=n-n%this.options.snapToTime,s.start.setHours(0,a,0,0)}}else this.options.cellClickHold&&["month","week","day"].includes(this.view.id)&&this.setUpCellHoldTimer(e)},setUpCellHoldTimer(e){const{clickHoldACell:t}=this.domEvents;t.cellId=`${this.vuecal._.uid}_${this.data.formattedDate}`,t.split=this.splitsCount?this.getSplitAtCursor(e):null,t.timeoutId=setTimeout(()=>{if(t.cellId&&!this.domEvents.cancelClickEventCreation){const{_eid:s}=this.utils.event.createAnEvent(this.timeAtCursor,null,t.split?{split:t.split}:{});t.eventCreated=s}},t.timeout)},onCellTouchStart(e,t=null){this.onCellMouseDown(e,t,!0)},onCellClick(e){this.isDOMElementAnEvent(e.target)||this.selectCell(e)},onCellDblClick(e){const t=new Date(this.data.startDate);t.setMinutes(this.vuecal.minutesAtCursor(e).minutes);const s=this.splitsCount?this.getSplitAtCursor(e):null;this.vuecal.$emit("cell-dblclick",s?{date:t,split:s}:t),this.options.dblclickToNavigate&&this.vuecal.switchToNarrowerView()},onCellContextMenu(e){e.stopPropagation(),e.preventDefault();const t=new Date(this.data.startDate),{cursorCoords:s,minutes:a}=this.vuecal.minutesAtCursor(e);t.setMinutes(a);const n=this.splitsCount?this.getSplitAtCursor(e):null;this.vuecal.$emit("cell-contextmenu",{date:t,...s,...n||{},e})}},computed:{dnd(){return this.modules.dnd},nowInMinutes(){return this.utils.date.dateToMinutes(this.vuecal.now)},isBeforeMinDate(){return this.minTimestamp!==null&&this.minTimestamp>this.data.endDate.getTime()},isAfterMaxDate(){return this.maxTimestamp&&this.maxTimestamp<this.data.startDate.getTime()},isDisabled(){const{disableDays:e}=this.options,{isYearsOrYearView:t}=this.vuecal;return e.length&&e.includes(this.data.formattedDate)&&!t?!0:this.isBeforeMinDate||this.isAfterMaxDate},isSelected:{get(){let e=!1;const{selectedDate:t}=this.view;return this.view.id==="years"?e=t.getFullYear()===this.data.startDate.getFullYear():this.view.id==="year"?e=t.getFullYear()===this.data.startDate.getFullYear()&&t.getMonth()===this.data.startDate.getMonth():e=t.getTime()===this.data.startDate.getTime(),e},set(e){this.view.selectedDate=e,this.vuecal.$emit("update:selected-date",this.view.selectedDate)}},isWeekOrDayView(){return["week","day"].includes(this.view.id)},transitionDirection(){return this.vuecal.transitionDirection},specialHours(){return this.data.specialHours.map(e=>{let{from:t,to:s}=e;return t=Math.max(t,this.options.timeFrom),s=Math.min(s,this.options.timeTo),{...e,height:(s-t)*this.timeScale,top:(t-this.options.timeFrom)*this.timeScale}})},events(){const{startDate:e,endDate:t}=this.data;let s=[];if(!(["years","year"].includes(this.view.id)&&!this.options.eventsCountOnYearView)){if(s=this.view.events.slice(0),this.view.id==="month"&&s.push(...this.view.outOfScopeEvents),s=s.filter(a=>this.utils.event.eventInRange(a,e,t)),this.options.showAllDayEvents&&this.view.id!=="month"&&(s=s.filter(a=>!!a.allDay===this.allDay)),this.options.time&&this.isWeekOrDayView&&!this.allDay){const{timeFrom:a,timeTo:n}=this.options;s=s.filter(i=>{const r=i.daysCount>1&&i.segments[this.data.formattedDate]||{},o=i.daysCount===1&&i.startTimeMinutes<n&&i.endTimeMinutes>a,h=i.daysCount>1&&r.startTimeMinutes<n&&r.endTimeMinutes>a;return i.allDay||o||h||!1})}this.options.time&&this.isWeekOrDayView&&!(this.options.showAllDayEvents&&this.allDay)&&s.sort((a,n)=>a.start<n.start?-1:1),this.cellSplits.length||this.$nextTick(this.checkCellOverlappingEvents)}return s},eventsCount(){return this.events.length},splits(){return this.cellSplits.map((e,t)=>{const s=this.events.filter(i=>i.split===e.id),[a,n]=this.utils.event.checkCellOverlappingEvents(s.filter(i=>!i.background&&!i.allDay),this.options);return{...e,overlaps:a,overlapsStreak:n,events:s}})},splitsCount(){return this.splits.length},cellClasses(){return{[this.data.class]:!!this.data.class,"vuecal__cell--current":this.data.current,"vuecal__cell--today":this.data.today,"vuecal__cell--out-of-scope":this.data.outOfScope,"vuecal__cell--before-min":this.isDisabled&&this.isBeforeMinDate,"vuecal__cell--after-max":this.isDisabled&&this.isAfterMaxDate,"vuecal__cell--disabled":this.isDisabled,"vuecal__cell--selected":this.isSelected,"vuecal__cell--highlighted":this.highlighted,"vuecal__cell--has-splits":this.splitsCount,"vuecal__cell--has-events":this.eventsCount}},cellStyles(){return{...this.cellWidth?{width:`${this.cellWidth}%`}:{}}},timelineVisible(){const{time:e,timeTo:t}=this.options;return this.data.today&&this.isWeekOrDayView&&e&&!this.allDay&&this.nowInMinutes<=t},todaysTimePosition(){if(!this.data.today||!this.options.time)return;const e=this.nowInMinutes-this.options.timeFrom;return Math.round(e*this.timeScale)},timeScale(){return this.options.timeCellHeight/this.options.timeStep}}},wa=Mt(Cn,[["render",Tn]]),En={key:0,class:"vuecal__all-day-text",style:{width:"3em"}};function On(e,t,s,a,n,i){const r=ot("vuecal-cell");return u(),c("div",{class:"vuecal__flex vuecal__all-day",style:$e(s.cellOrSplitMinWidth&&{height:s.height})},[s.cellOrSplitMinWidth?D("",!0):(u(),c("div",En,[l("span",null,y(s.label),1)])),l("div",{class:K(["vuecal__flex vuecal__cells",`${i.view.id}-view`]),grow:"",style:$e(s.cellOrSplitMinWidth?`min-width: ${s.cellOrSplitMinWidth}px`:"")},[(u(!0),c(G,null,J(s.cells,(o,h)=>(u(),ye(r,{key:h,options:s.options,"edit-events":i.editEvents,data:o,"all-day":!0,"cell-width":s.options.hideWeekdays.length&&(i.vuecal.isWeekView||i.vuecal.isMonthView)&&i.vuecal.cellWidth,"min-timestamp":s.options.minTimestamp,"max-timestamp":s.options.maxTimestamp,"cell-splits":s.daySplits},{event:V(({event:d,view:v})=>[se(e.$slots,"event",{view:v,event:d})]),_:2},1032,["options","edit-events","data","cell-width","min-timestamp","max-timestamp","cell-splits"]))),128))],6)],4)}const jn={inject:["vuecal","view","editEvents"],components:{"vuecal-cell":wa},props:{options:{type:Object,required:!0},cells:{type:Array,required:!0},label:{type:String,required:!0},daySplits:{type:Array,default:()=>[]},shortEvents:{type:Boolean,default:!0},height:{type:String,default:""},cellOrSplitMinWidth:{type:Number,default:null}},computed:{hasCellOrSplitWidth(){return!!(this.options.minCellWidth||this.daySplits.length&&this.options.minSplitWidth)}}},Yn=Mt(jn,[["render",On]]),An=["lang"],Vn={class:"default"},$n={key:0,class:"vuecal__flex vuecal__body",grow:""},Nn=["onBlur","innerHTML"],Ln=["innerHTML"],Wn=["innerHTML"],Pn={class:"vuecal__flex",row:"",grow:""},In={key:0,class:"vuecal__time-column"},Fn={class:"vuecal__time-cell-label"},Rn={key:1,class:"vuecal__flex vuecal__week-numbers",column:""},Hn=["wrap","column"],Un=["onBlur","innerHTML"],Bn=["innerHTML"],zn=["innerHTML"],Gn=["wrap"],qn=["innerHTML"],Zn=["innerHTML"],Jn={key:2,class:"vuecal__cell-events-count"},Kn={key:3,class:"vuecal__no-event"},Xn=["onBlur","innerHTML"],Qn=["innerHTML"],el={key:2,class:"vuecal__event-time"},tl={key:0},sl={key:1,class:"days-to-end"},al=["innerHTML"],il={key:0,class:"vuecal__scrollbar-check"};function nl(e,t,s,a,n,i){const r=ot("vuecal-header"),o=ot("all-day-bar"),h=ot("weekdays-headings"),d=ot("vuecal-cell");return u(),c("div",{class:K(["vuecal__flex vuecal",i.cssClasses]),column:"",ref:"vuecal",lang:s.locale},[p(r,{options:e.$props,"edit-events":i.editEvents,"view-props":{views:i.views,weekDaysInHeader:i.weekDaysInHeader},"week-days":i.weekDays,"has-splits":i.hasSplits,"day-splits":i.daySplits,"switch-to-narrower-view":i.switchToNarrowerView},_s({"arrow-prev":V(()=>[se(e.$slots,"arrow-prev",{},()=>[t[0]||(t[0]=W(" ")),t[1]||(t[1]=l("i",{class:"angle"},null,-1)),t[2]||(t[2]=W(" "))])]),"arrow-next":V(()=>[se(e.$slots,"arrow-next",{},()=>[t[3]||(t[3]=W(" ")),t[4]||(t[4]=l("i",{class:"angle"},null,-1)),t[5]||(t[5]=W(" "))])]),"today-button":V(()=>[se(e.$slots,"today-button",{},()=>[l("span",Vn,y(n.texts.today),1)])]),title:V(()=>[se(e.$slots,"title",{title:i.viewTitle,view:n.view},()=>[W(y(i.viewTitle),1)])]),_:2},[e.$slots["weekday-heading"]?{name:"weekday-heading",fn:V(({heading:v,view:g})=>[se(e.$slots,"weekday-heading",{heading:v,view:g})]),key:"0"}:void 0,e.$slots["split-label"]?{name:"split-label",fn:V(({split:v})=>[se(e.$slots,"split-label",{split:v,view:n.view.id})]),key:"1"}:void 0]),1032,["options","edit-events","view-props","week-days","has-splits","day-splits","switch-to-narrower-view"]),s.hideBody?D("",!0):(u(),c("div",$n,[p(Jt,{name:`slide-fade--${n.transitionDirection}`,appear:s.transitions},{default:V(()=>[(u(),c("div",{class:"vuecal__flex",style:{"min-width":"100%"},key:s.transitions?n.view.id:!1,column:""},[s.showAllDayEvents&&i.hasTimeColumn&&(!i.cellOrSplitMinWidth||i.isDayView&&!s.minSplitWidth)?(u(),ye(o,Ks(Xs({key:0},i.allDayBar)),{event:V(({event:v,view:g})=>[se(e.$slots,"event",{view:g,event:v},()=>[i.editEvents.title&&v.titleEditable?(u(),c("div",{key:0,class:"vuecal__event-title vuecal__event-title--edit",contenteditable:"",onBlur:f=>i.onEventTitleBlur(f,v),innerHTML:v.title},null,40,Nn)):v.title?(u(),c("div",{key:1,class:"vuecal__event-title",innerHTML:v.title},null,8,Ln)):D("",!0),v.content&&!i.hasShortEvents&&!i.isShortMonthView?(u(),c("div",{key:2,class:"vuecal__event-content",innerHTML:v.content},null,8,Wn)):D("",!0)])]),_:3},16)):D("",!0),l("div",{class:K(["vuecal__bg",{vuecal__flex:!i.hasTimeColumn}]),column:""},[l("div",Pn,[i.hasTimeColumn?(u(),c("div",In,[s.showAllDayEvents&&i.cellOrSplitMinWidth&&!(i.isDayView&&!s.minSplitWidth)?(u(),c("div",{key:0,class:"vuecal__all-day-text",style:$e({height:i.allDayBar.height})},[l("span",null,y(n.texts.allDay),1)],4)):D("",!0),(u(!0),c(G,null,J(i.timeCells,(v,g)=>(u(),c("div",{class:"vuecal__time-cell",key:g,style:$e(`height: ${s.timeCellHeight}px`)},[se(e.$slots,"time-cell",{hours:v.hours,minutes:v.minutes},()=>[t[6]||(t[6]=l("span",{class:"vuecal__time-cell-line"},null,-1)),l("span",Fn,y(v.label),1)])],4))),128))])):D("",!0),s.showWeekNumbers&&i.isMonthView?(u(),c("div",Rn,[(u(),c(G,null,J(6,v=>l("div",{class:"vuecal__flex vuecal__week-number-cell",key:v,grow:""},[se(e.$slots,"week-number-cell",{week:i.getWeekNumber(v-1)},()=>[W(y(i.getWeekNumber(v-1)),1)])])),64))])):D("",!0),l("div",{class:K(["vuecal__flex vuecal__cells",`${n.view.id}-view`]),grow:"",wrap:!i.cellOrSplitMinWidth||!i.isWeekView,column:!!i.cellOrSplitMinWidth},[i.cellOrSplitMinWidth&&i.isWeekView?(u(),ye(h,{key:0,"transition-direction":n.transitionDirection,"week-days":i.weekDays,"switch-to-narrower-view":i.switchToNarrowerView,style:$e(i.cellOrSplitMinWidth?`min-width: ${i.cellOrSplitMinWidth}px`:"")},_s({_:2},[e.$slots["weekday-heading"]?{name:"weekday-heading",fn:V(({heading:v,view:g})=>[se(e.$slots,"weekday-heading",{heading:v,view:g})]),key:"0"}:void 0,e.$slots["split-label"]?{name:"split-label",fn:V(({split:v})=>[se(e.$slots,"split-label",{split:v,view:n.view.id})]),key:"1"}:void 0]),1032,["transition-direction","week-days","switch-to-narrower-view","style"])):i.hasSplits&&s.stickySplitLabels&&s.minSplitWidth?(u(),c("div",{key:1,class:"vuecal__flex vuecal__split-days-headers",style:$e(i.cellOrSplitMinWidth?`min-width: ${i.cellOrSplitMinWidth}px`:"")},[(u(!0),c(G,null,J(i.daySplits,(v,g)=>(u(),c("div",{class:K(["day-split-header",v.class||!1]),key:g},[se(e.$slots,"split-label",{split:v,view:n.view.id},()=>[W(y(v.label),1)])],2))),128))],4)):D("",!0),s.showAllDayEvents&&i.hasTimeColumn&&(i.isWeekView&&i.cellOrSplitMinWidth||i.isDayView&&i.hasSplits&&s.minSplitWidth)?(u(),ye(o,Ks(Xs({key:2},i.allDayBar)),{event:V(({event:v,view:g})=>[se(e.$slots,"event",{view:g,event:v},()=>[i.editEvents.title&&v.titleEditable?(u(),c("div",{key:0,class:"vuecal__event-title vuecal__event-title--edit",contenteditable:"",onBlur:f=>i.onEventTitleBlur(f,v),innerHTML:v.title},null,40,Un)):v.title?(u(),c("div",{key:1,class:"vuecal__event-title",innerHTML:v.title},null,8,Bn)):D("",!0),v.content&&!i.hasShortEvents&&!i.isShortMonthView?(u(),c("div",{key:2,class:"vuecal__event-content",innerHTML:v.content},null,8,zn)):D("",!0)])]),_:3},16)):D("",!0),l("div",{class:"vuecal__flex",ref:v=>n.cellsEl=v,grow:"",wrap:!i.cellOrSplitMinWidth||!i.isWeekView,style:$e(i.cellOrSplitMinWidth?`min-width: ${i.cellOrSplitMinWidth}px`:"")},[(u(!0),c(G,null,J(i.viewCells,(v,g)=>(u(),ye(d,{key:g,options:e.$props,"edit-events":i.editEvents,data:v,"cell-width":s.hideWeekdays.length&&(i.isWeekView||i.isMonthView)&&i.cellWidth,"min-timestamp":i.minTimestamp,"max-timestamp":i.maxTimestamp,"cell-splits":i.hasSplits&&i.daySplits||[]},{"cell-content":V(({events:f,split:S,selectCell:E})=>[se(e.$slots,"cell-content",{cell:v,view:n.view,goNarrower:E,events:f},()=>[S&&!s.stickySplitLabels?(u(),c("div",{key:0,class:"split-label",innerHTML:S.label},null,8,qn)):D("",!0),v.content?(u(),c("div",{key:1,class:"vuecal__cell-date",innerHTML:v.content},null,8,Zn)):D("",!0),(i.isMonthView&&!s.eventsOnMonthView||i.isYearsOrYearView&&s.eventsCountOnYearView)&&f.length?(u(),c("div",Jn,[se(e.$slots,"events-count",{view:n.view,events:f},()=>[W(y(f.length),1)])])):D("",!0),!i.cellOrSplitHasEvents(f,S)&&i.isWeekOrDayView?(u(),c("div",Kn,[se(e.$slots,"no-event",{},()=>[W(y(n.texts.noEvent),1)])])):D("",!0)])]),event:V(({event:f,view:S})=>[se(e.$slots,"event",{view:S,event:f},()=>[i.editEvents.title&&f.titleEditable?(u(),c("div",{key:0,class:"vuecal__event-title vuecal__event-title--edit",contenteditable:"",onBlur:E=>i.onEventTitleBlur(E,f),innerHTML:f.title},null,40,Xn)):f.title?(u(),c("div",{key:1,class:"vuecal__event-title",innerHTML:f.title},null,8,Qn)):D("",!0),s.time&&!f.allDay&&!(i.isMonthView&&(f.allDay||s.showAllDayEvents==="short"))&&!i.isShortMonthView?(u(),c("div",el,[W(y(n.utils.date.formatTime(f.start,i.TimeFormat)),1),f.endTimeMinutes?(u(),c("span",tl," - "+y(n.utils.date.formatTime(f.end,i.TimeFormat,null,!0)),1)):D("",!0),f.daysCount>1&&(f.segments[v.formattedDate]||{}).isFirstDay?(u(),c("small",sl," +"+y(f.daysCount-1)+y((n.texts.day[0]||"").toLowerCase()),1)):D("",!0)])):D("",!0),f.content&&!(i.isMonthView&&f.allDay&&s.showAllDayEvents==="short")&&!i.isShortMonthView?(u(),c("div",{key:3,class:"vuecal__event-content",innerHTML:f.content},null,8,al)):D("",!0)])]),"no-event":V(()=>[se(e.$slots,"no-event",{},()=>[W(y(n.texts.noEvent),1)])]),_:2},1032,["options","edit-events","data","cell-width","min-timestamp","max-timestamp","cell-splits"]))),128))],12,Gn)],10,Hn)])],2)]))]),_:3},8,["name","appear"]),n.ready?D("",!0):(u(),c("div",il,t[7]||(t[7]=[l("div",null,null,-1)])))]))],10,An)}const Yt=1440,zt={weekDays:Array(7).fill(""),weekDaysShort:[],months:Array(12).fill(""),years:"",year:"",month:"",week:"",day:"",today:"",noEvent:"",allDay:"",deleteEvent:"",createEvent:"",dateFormat:"dddd MMMM D, YYYY",am:"am",pm:"pm"},ia=["years","year","month","week","day"],na=new Bi(zt),ll={name:"vue-cal",components:{"vuecal-cell":wa,"vuecal-header":yn,WeekdaysHeadings:ga,AllDayBar:Yn},provide(){return{vuecal:this,utils:this.utils,modules:this.modules,previous:this.previous,next:this.next,switchView:this.switchView,updateSelectedDate:this.updateSelectedDate,editEvents:this.editEvents,view:this.view,domEvents:this.domEvents}},props:{activeView:{type:String,default:"week"},allDayBarHeight:{type:[String,Number],default:"25px"},cellClickHold:{type:Boolean,default:!0},cellContextmenu:{type:Boolean,default:!1},clickToNavigate:{type:Boolean,default:!1},dblclickToNavigate:{type:Boolean,default:!0},disableDatePrototypes:{type:Boolean,default:!1},disableDays:{type:Array,default:()=>[]},disableViews:{type:Array,default:()=>[]},dragToCreateEvent:{type:Boolean,default:!0},dragToCreateThreshold:{type:Number,default:15},editableEvents:{type:[Boolean,Object],default:!1},events:{type:Array,default:()=>[]},eventsCountOnYearView:{type:Boolean,default:!1},eventsOnMonthView:{type:[Boolean,String],default:!1},hideBody:{type:Boolean,default:!1},hideTitleBar:{type:Boolean,default:!1},hideViewSelector:{type:Boolean,default:!1},hideWeekdays:{type:Array,default:()=>[]},hideWeekends:{type:Boolean,default:!1},locale:{type:[String,Object],default:"en"},maxDate:{type:[String,Date],default:""},minCellWidth:{type:Number,default:0},minDate:{type:[String,Date],default:""},minEventWidth:{type:Number,default:0},minSplitWidth:{type:Number,default:0},onEventClick:{type:[Function,null],default:null},onEventCreate:{type:[Function,null],default:null},onEventDblclick:{type:[Function,null],default:null},overlapsPerTimeStep:{type:Boolean,default:!1},resizeX:{type:Boolean,default:!1},selectedDate:{type:[String,Date],default:""},showAllDayEvents:{type:[Boolean,String],default:!1},showTimeInCells:{type:Boolean,default:!1},showWeekNumbers:{type:[Boolean,String],default:!1},snapToTime:{type:Number,default:0},small:{type:Boolean,default:!1},specialHours:{type:Object,default:()=>({})},splitDays:{type:Array,default:()=>[]},startWeekOnSunday:{type:Boolean,default:!1},stickySplitLabels:{type:Boolean,default:!1},time:{type:Boolean,default:!0},timeCellHeight:{type:Number,default:40},timeFormat:{type:String,default:""},timeFrom:{type:Number,default:0},timeStep:{type:Number,default:60},timeTo:{type:Number,default:Yt},todayButton:{type:Boolean,default:!1},transitions:{type:Boolean,default:!0},twelveHour:{type:Boolean,default:!1},watchRealTime:{type:Boolean,default:!1},xsmall:{type:Boolean,default:!1}},data(){return{ready:!1,texts:{...zt},utils:{date:(this.disableDatePrototypes?na.removePrototypes():!1)||na,cell:null,event:null},modules:{dnd:null},cellsEl:null,view:{id:"",title:"",startDate:null,endDate:null,firstCellDate:null,lastCellDate:null,selectedDate:null,events:[]},eventIdIncrement:1,now:new Date,timeTickerIds:[null,null],domEvents:{resizeAnEvent:{_eid:null,start:null,split:null,segment:null,originalEndTimeMinutes:0,originalEnd:null,end:null,startCell:null,endCell:null},dragAnEvent:{_eid:null},dragCreateAnEvent:{startCursorY:null,start:null,split:null,event:null},focusAnEvent:{_eid:null,mousedUp:!1},clickHoldAnEvent:{_eid:null,timeout:1200,timeoutId:null},dblTapACell:{taps:0,timeout:500},clickHoldACell:{cellId:null,split:null,timeout:1200,timeoutId:null,eventCreated:!1},cancelClickEventCreation:!1},mutableEvents:[],transitionDirection:"right"}},methods:{async loadLocale(e){if(typeof this.locale=="object"){this.texts=Object.assign({},zt,e),this.utils.date.updateTexts(this.texts);return}const t=await Ui(Object.assign({"./i18n/ar.json":()=>U(()=>import("./ar.es-bitOgb9K.js"),[]),"./i18n/bg.json":()=>U(()=>import("./bg.es-5tp0KQRo.js"),[]),"./i18n/bn.json":()=>U(()=>import("./bn.es-C_qR0y0-.js"),[]),"./i18n/bs.json":()=>U(()=>import("./bs.es-DduooXS8.js"),[]),"./i18n/ca.json":()=>U(()=>import("./ca.es-DYDNDJFJ.js"),[]),"./i18n/cs.json":()=>U(()=>import("./cs.es-CvnAvfoI.js"),[]),"./i18n/da.json":()=>U(()=>import("./da.es-C_eJXDX3.js"),[]),"./i18n/de.json":()=>U(()=>import("./de.es-Cp-R9E16.js"),[]),"./i18n/el.json":()=>U(()=>import("./el.es-BZ44a1Tb.js"),[]),"./i18n/en.json":()=>U(()=>import("./en.es-DwVNOttH.js"),[]),"./i18n/es.json":()=>U(()=>import("./es.es-DO8PaQ_q.js"),[]),"./i18n/et.json":()=>U(()=>import("./et.es-DdRIcUrz.js"),[]),"./i18n/fa.json":()=>U(()=>import("./fa.es-XN0av8Tx.js"),[]),"./i18n/fi.json":()=>U(()=>import("./fi.es-B0Iy6aas.js"),[]),"./i18n/fr.json":()=>U(()=>import("./fr.es-B7WXlprl.js"),[]),"./i18n/he.json":()=>U(()=>import("./he.es-BWEk5prp.js"),[]),"./i18n/hr.json":()=>U(()=>import("./hr.es-B_iqHQyr.js"),[]),"./i18n/hu.json":()=>U(()=>import("./hu.es-D_t4Ibxf.js"),[]),"./i18n/id.json":()=>U(()=>import("./id.es-CzHAK-XV.js"),[]),"./i18n/is.json":()=>U(()=>import("./is.es-DChRpym4.js"),[]),"./i18n/it.json":()=>U(()=>import("./it.es-CquQA5xx.js"),[]),"./i18n/ja.json":()=>U(()=>import("./ja.es-B19gsG6H.js"),[]),"./i18n/ka.json":()=>U(()=>import("./ka.es-CuOe65jc.js"),[]),"./i18n/ko.json":()=>U(()=>import("./ko.es-CsMl2USK.js"),[]),"./i18n/lt.json":()=>U(()=>import("./lt.es-vqgjGyMx.js"),[]),"./i18n/mn.json":()=>U(()=>import("./mn.es-BmdwFdas.js"),[]),"./i18n/nl.json":()=>U(()=>import("./nl.es-CFxVMCWy.js"),[]),"./i18n/no.json":()=>U(()=>import("./no.es-qRcuRMwl.js"),[]),"./i18n/pl.json":()=>U(()=>import("./pl.es-BQ3a0ltx.js"),[]),"./i18n/pt-br.json":()=>U(()=>import("./pt-br.es-U9bVHsgs.js"),[]),"./i18n/pt-pt.json":()=>U(()=>import("./pt-pt.es-U9bVHsgs.js"),[]),"./i18n/ro.json":()=>U(()=>import("./ro.es-ldjMjt3l.js"),[]),"./i18n/ru.json":()=>U(()=>import("./ru.es-CS-QKsYL.js"),[]),"./i18n/sk.json":()=>U(()=>import("./sk.es-CAe8sEvL.js"),[]),"./i18n/sl.json":()=>U(()=>import("./sl.es-rdzOxu_X.js"),[]),"./i18n/sq.json":()=>U(()=>import("./sq.es-BY5E06HI.js"),[]),"./i18n/sr.json":()=>U(()=>import("./sr.es-QPseRVBy.js"),[]),"./i18n/sv.json":()=>U(()=>import("./sv.es-BfPUYcV1.js"),[]),"./i18n/tr.json":()=>U(()=>import("./tr.es-Cl6kz_IH.js"),[]),"./i18n/uk.json":()=>U(()=>import("./uk.es-DBEtNQnZ.js"),[]),"./i18n/vi.json":()=>U(()=>import("./vi.es-Bx2g_1jx.js"),[]),"./i18n/zh-cn.json":()=>U(()=>import("./zh-cn.es-BWMmCH-R.js"),[]),"./i18n/zh-hk.json":()=>U(()=>import("./zh-hk.es-DFZ0bKvi.js"),[])}),`./i18n/${e}.json`,3);this.texts=Object.assign({},zt,t),this.utils.date.updateTexts(this.texts)},loadDragAndDrop(){U(()=>import("./drag-and-drop.es-CbCm7IHa.js"),[]).then(e=>{const{DragAndDrop:t}=e;this.modules.dnd=new t(this)}).catch(()=>console.warn("Vue Cal: Missing drag & drop module."))},validateView(e){return ia.includes(e)||(console.error(`Vue Cal: invalid active-view parameter provided: "${e}".
A valid view must be one of: ${ia.join(", ")}.`),e="week"),this.enabledViews.includes(e)||(console.warn(`Vue Cal: the provided active-view "${e}" is disabled. Using the "${this.enabledViews[0]}" view instead.`),e=this.enabledViews[0]),e},switchToNarrowerView(e=null){this.transitionDirection="right";const t=this.enabledViews[this.enabledViews.indexOf(this.view.id)+1];t&&this.switchView(t,e)},switchView(e,t=null,s=!1){e=this.validateView(e);const a=this.utils.date,n=this.view.startDate&&this.view.startDate.getTime();if(this.transitions&&s){if(this.view.id===e)return;const o=this.enabledViews;this.transitionDirection=o.indexOf(this.view.id)>o.indexOf(e)?"left":"right"}const i=this.view.id;switch(this.view.events=[],this.view.id=e,this.view.firstCellDate=null,this.view.lastCellDate=null,t||(t=this.view.selectedDate||this.view.startDate),e){case"years":{this.view.startDate=new Date(Math.floor(t.getFullYear()/25)*25||2e3,0,1),this.view.endDate=new Date(this.view.startDate.getFullYear()+25,0,1),this.view.endDate.setSeconds(-1);break}case"year":{this.view.startDate=new Date(t.getFullYear(),0,1),this.view.endDate=new Date(t.getFullYear()+1,0,1),this.view.endDate.setSeconds(-1);break}case"month":{this.view.startDate=new Date(t.getFullYear(),t.getMonth(),1),this.view.endDate=new Date(t.getFullYear(),t.getMonth()+1,1),this.view.endDate.setSeconds(-1);let o=new Date(this.view.startDate);if(o.getDay()!==(this.startWeekOnSunday?0:1)&&(o=a.getPreviousFirstDayOfWeek(o,this.startWeekOnSunday)),this.view.firstCellDate=o,this.view.lastCellDate=a.addDays(o,41),this.view.lastCellDate.setHours(23,59,59,0),this.hideWeekends){if([0,6].includes(this.view.firstCellDate.getDay())){const h=this.view.firstCellDate.getDay()===6&&!this.startWeekOnSunday?2:1;this.view.firstCellDate=a.addDays(this.view.firstCellDate,h)}if([0,6].includes(this.view.startDate.getDay())){const h=this.view.startDate.getDay()===6?2:1;this.view.startDate=a.addDays(this.view.startDate,h)}if([0,6].includes(this.view.lastCellDate.getDay())){const h=this.view.lastCellDate.getDay()===0&&!this.startWeekOnSunday?2:1;this.view.lastCellDate=a.subtractDays(this.view.lastCellDate,h)}if([0,6].includes(this.view.endDate.getDay())){const h=this.view.endDate.getDay()===0?2:1;this.view.endDate=a.subtractDays(this.view.endDate,h)}}break}case"week":{t=a.getPreviousFirstDayOfWeek(t,this.startWeekOnSunday);const o=this.hideWeekends?5:7;this.view.startDate=this.hideWeekends&&this.startWeekOnSunday?a.addDays(t,1):t,this.view.startDate.setHours(0,0,0,0),this.view.endDate=a.addDays(t,o),this.view.endDate.setSeconds(-1);break}case"day":{this.view.startDate=t,this.view.startDate.setHours(0,0,0,0),this.view.endDate=new Date(t),this.view.endDate.setHours(23,59,59,0);break}}this.addEventsToView();const r=this.view.startDate&&this.view.startDate.getTime();if(!(i===e&&r===n)&&(this.$emit("update:activeView",e),this.ready)){const o=this.view.startDate,h={view:e,startDate:o,endDate:this.view.endDate,...this.isMonthView?{firstCellDate:this.view.firstCellDate,lastCellDate:this.view.lastCellDate,outOfScopeEvents:this.view.outOfScopeEvents.map(this.cleanupEvent)}:{},events:this.view.events.map(this.cleanupEvent),...this.isWeekView?{week:a.getWeek(this.startWeekOnSunday?a.addDays(o,1):o)}:{}};this.$emit("view-change",h)}},previous(){this.previousNext(!1)},next(){this.previousNext()},previousNext(e=!0){const t=this.utils.date;this.transitionDirection=e?"right":"left";const s=e?1:-1;let a=null;const{startDate:n,id:i}=this.view;switch(i){case"years":a=new Date(n.getFullYear()+25*s,0,1);break;case"year":a=new Date(n.getFullYear()+1*s,1,1);break;case"month":a=new Date(n.getFullYear(),n.getMonth()+1*s,1);break;case"week":a=t[e?"addDays":"subtractDays"](t.getPreviousFirstDayOfWeek(n,this.startWeekOnSunday),7);break;case"day":a=t[e?"addDays":"subtractDays"](n,1);const r=a.getDay(),o=this.startWeekOnSunday?r:(r||7)-1;if(this.weekDays[o].hide){const d=this.weekDays.map((g,f)=>({...g,i:f}));let v=0;e?([...d.slice(o),...d].find(g=>(v++,!g.hide)).i,v--):[...d,...d.slice(0,o)].reverse().find(g=>(v++,!g.hide)).i,a=t[e?"addDays":"subtractDays"](a,v)}break}a&&this.switchView(i,a)},addEventsToView(e=[]){const t=this.utils.event,{startDate:s,endDate:a,firstCellDate:n,lastCellDate:i}=this.view;if(e.length||(this.view.events=[]),e=e.length?e:[...this.mutableEvents],!e||this.isYearsOrYearView&&!this.eventsCountOnYearView)return;let r=e.filter(o=>t.eventInRange(o,s,a));!this.isYearsOrYearView&&!(this.isMonthView&&!this.eventsOnMonthView)&&(r=r.map(o=>o.daysCount>1?t.createEventSegments(o,n||s,i||a):o)),this.view.events.push(...r),this.isMonthView&&(this.view.outOfScopeEvents=[],e.forEach(o=>{(t.eventInRange(o,n,s)||t.eventInRange(o,a,i))&&(this.view.events.some(h=>h._eid===o._eid)||this.view.outOfScopeEvents.push(o))}))},findAncestor(e,t){for(;(e=e.parentElement)&&!e.classList.contains(t););return e},isDOMElementAnEvent(e){return e.classList.contains("vuecal__event")||this.findAncestor(e,"vuecal__event")},onMouseMove(e){const{resizeAnEvent:t,dragAnEvent:s,dragCreateAnEvent:a}=this.domEvents;t._eid===null&&s._eid===null&&!a.start||(e.preventDefault(),t._eid?this.eventResizing(e):this.dragToCreateEvent&&a.start&&this.eventDragCreation(e))},onMouseUp(e){const{focusAnEvent:t,resizeAnEvent:s,clickHoldAnEvent:a,clickHoldACell:n,dragCreateAnEvent:i}=this.domEvents,{_eid:r}=a,{_eid:o}=s;let h=!1;const{event:d,start:v}=i,g=this.isDOMElementAnEvent(e.target),f=t.mousedUp;if(t.mousedUp=!1,g&&(this.domEvents.cancelClickEventCreation=!0),n.eventCreated)return;if(o){const{originalEnd:E,originalEndTimeMinutes:P,endTimeMinutes:Q}=s,C=this.view.events.find(_=>_._eid===s._eid);if(h=Q&&Q!==P,C&&C.end.getTime()!==E.getTime()){const _=this.mutableEvents.find(le=>le._eid===s._eid);_.endTimeMinutes=C.endTimeMinutes,_.end=C.end;const A=this.cleanupEvent(C),R={...this.cleanupEvent(C),end:E,endTimeMinutes:C.originalEndTimeMinutes};this.$emit("event-duration-change",{event:A,oldDate:s.originalEnd,originalEvent:R}),this.$emit("event-change",{event:A,originalEvent:R})}C&&(C.resizing=!1),s._eid=null,s.start=null,s.split=null,s.segment=null,s.originalEndTimeMinutes=null,s.originalEnd=null,s.endTimeMinutes=null,s.startCell=null,s.endCell=null}else v&&(d&&(this.emitWithEvent("event-drag-create",d),i.event.resizing=!1),i.start=null,i.split=null,i.event=null);!g&&!o&&this.unfocusEvent(),a.timeoutId&&!r&&(clearTimeout(a.timeoutId),a.timeoutId=null),n.timeoutId&&(clearTimeout(n.timeoutId),n.timeoutId=null);const S=typeof this.onEventClick=="function";if(f&&!h&&!r&&!d&&S){let E=this.view.events.find(P=>P._eid===t._eid);return!E&&this.isMonthView&&(E=this.view.outOfScopeEvents.find(P=>P._eid===t._eid)),E&&this.onEventClick(E,e)}},onKeyUp(e){e.keyCode===27&&this.cancelDelete()},eventResizing(e){const{resizeAnEvent:t}=this.domEvents,s=this.view.events.find(d=>d._eid===t._eid)||{segments:{}},{minutes:a,cursorCoords:n}=this.minutesAtCursor(e),i=s.segments&&s.segments[t.segment],{date:r,event:o}=this.utils,h=Math.max(a,this.timeFrom+1,(i||s).startTimeMinutes+1);if(s.endTimeMinutes=t.endTimeMinutes=h,this.snapToTime){const d=s.endTimeMinutes+this.snapToTime/2;s.endTimeMinutes=d-d%this.snapToTime}if(i&&(i.endTimeMinutes=s.endTimeMinutes),s.end.setHours(0,s.endTimeMinutes,s.endTimeMinutes===Yt?-1:0,0),this.resizeX&&this.isWeekView){s.daysCount=r.countDays(s.start,s.end);const d=this.cellsEl,v=d.offsetWidth/d.childElementCount,g=Math.floor(n.x/v);if(t.startCell===null&&(t.startCell=g-(s.daysCount-1)),t.endCell!==g){t.endCell=g;const f=r.addDays(s.start,g-t.startCell),S=Math.max(r.countDays(s.start,f),1);if(S!==s.daysCount){let E=null;S>s.daysCount?E=o.addEventSegment(s):E=o.removeEventSegment(s),t.segment=E,s.endTimeMinutes+=.001}}}this.$emit("event-resizing",{_eid:s._eid,end:s.end,endTimeMinutes:s.endTimeMinutes})},eventDragCreation(e){const{dragCreateAnEvent:t}=this.domEvents,{start:s,startCursorY:a,split:n}=t,i=new Date(s),{minutes:r,cursorCoords:{y:o}}=this.minutesAtCursor(e);if(!(!t.event&&Math.abs(a-o)<this.dragToCreateThreshold))if(t.event){if(i.setHours(0,r,r===Yt?-1:0,0),this.snapToTime){let v=i.getHours()*60+i.getMinutes();const g=v+this.snapToTime/2;v=g-g%this.snapToTime,i.setHours(0,v,0,0)}const h=s<i,{event:d}=t;d.start=h?s:i,d.end=h?i:s,d.startTimeMinutes=d.start.getHours()*60+d.start.getMinutes(),d.endTimeMinutes=d.end.getHours()*60+d.end.getMinutes()}else{if(t.event=this.utils.event.createAnEvent(s,1,{split:n}),!t.event){t.start=null,t.split=null,t.event=null;return}t.event.resizing=!0}},unfocusEvent(){const{focusAnEvent:e,clickHoldAnEvent:t}=this.domEvents,s=this.view.events.find(a=>a._eid===(e._eid||t._eid));e._eid=null,t._eid=null,s&&(s.focused=!1,s.deleting=!1)},cancelDelete(){const{clickHoldAnEvent:e}=this.domEvents;if(e._eid){const t=this.view.events.find(s=>s._eid===e._eid);t&&(t.deleting=!1),e._eid=null,e.timeoutId=null}},onEventTitleBlur(e,t){if(t.title===e.target.innerHTML)return;const s=t.title;t.title=e.target.innerHTML;const a=this.cleanupEvent(t);this.$emit("event-title-change",{event:a,oldTitle:s}),this.$emit("event-change",{event:a,originalEvent:{...a,title:s}})},updateMutableEvents(){const e=this.utils.date;this.mutableEvents=[],this.events.forEach(t=>{const s=typeof t.start=="string"?e.stringToDate(t.start):t.start,a=e.formatDateLite(s),n=e.dateToMinutes(s);let i=null;typeof t.end=="string"&&t.end.includes("24:00")?(i=new Date(t.end.replace(" 24:00","")),i.setHours(23,59,59,0)):i=typeof t.end=="string"?e.stringToDate(t.end):t.end;let r=e.formatDateLite(i),o=e.dateToMinutes(i);(!o||o===Yt)&&(!this.time||typeof t.end=="string"&&t.end.length===10?i.setHours(23,59,59,0):i.setSeconds(i.getSeconds()-1),r=e.formatDateLite(i),o=Yt);const h=a!==r;t=Object.assign({...this.utils.event.eventDefaults},t,{_eid:`${this._.uid}_${this.eventIdIncrement++}`,segments:h?{}:null,start:s,startTimeMinutes:n,end:i,endTimeMinutes:o,daysCount:h?e.countDays(s,i):1,class:t.class}),this.mutableEvents.push(t)})},minutesAtCursor(e){return this.utils.cell.minutesAtCursor(e)},createEvent(e,t,s={}){return this.utils.event.createAnEvent(e,t,s)},cleanupEvent(e){return e={...e},["segments","deletable","deleting","titleEditable","resizable","resizing","draggable","dragging","draggingStatic","focused"].forEach(s=>{s in e&&delete e[s]}),e.repeat||delete e.repeat,e},emitWithEvent(e,t){this.$emit(e,this.cleanupEvent(t))},updateSelectedDate(e){if(e&&typeof e=="string"?e=this.utils.date.stringToDate(e):e=new Date(e),e&&e instanceof Date){const{selectedDate:t}=this.view;t&&(this.transitionDirection=t.getTime()>e.getTime()?"left":"right"),e.setHours(0,0,0,0),(!t||t.getTime()!==e.getTime())&&(this.view.selectedDate=e),this.switchView(this.view.id)}this.$emit("update:selected-date",this.view.selectedDate)},getWeekNumber(e){const t=this.utils.date,a=this.firstCellDateWeekNumber+e,n=this.startWeekOnSunday?1:0;return a>52?t.getWeek(t.addDays(this.view.firstCellDate,7*e+n)):a},timeTick(){this.now=new Date,this.timeTickerIds[1]=setTimeout(this.timeTick,60*1e3)},updateDateTexts(){this.utils.date.updateTexts(this.texts)},alignWithScrollbar(){if(document.getElementById("vuecal-align-with-scrollbar"))return;const e=this.$refs.vuecal.getElementsByClassName("vuecal__scrollbar-check")[0],t=e.offsetWidth-e.children[0].offsetWidth;if(t){const s=document.createElement("style");s.id="vuecal-align-with-scrollbar",s.type="text/css",s.innerHTML=`.vuecal--view-with-time .vuecal__weekdays-headings,.vuecal--view-with-time .vuecal__all-day {padding-right: ${t}px}`,document.head.appendChild(s)}},cellOrSplitHasEvents(e,t=null){return e.length&&(!t&&e.length||t&&e.some(s=>s.split===t.id))}},created(){this.utils.cell=new Gi(this),this.utils.event=new Zi(this,this.utils.date),this.loadLocale(this.locale),this.editEvents.drag&&this.loadDragAndDrop(),this.updateMutableEvents(this.events),this.view.id=this.currentView,this.selectedDate?this.updateSelectedDate(this.selectedDate):(this.view.selectedDate=new Date,this.switchView(this.currentView)),this.time&&this.watchRealTime&&(this.timeTickerIds[0]=setTimeout(this.timeTick,(60-this.now.getSeconds())*1e3))},mounted(){const e=this.utils.date,t="ontouchstart"in window,{resize:s,drag:a,create:n,delete:i,title:r}=this.editEvents,o=this.onEventClick&&typeof this.onEventClick=="function";(s||a||n||i||r||o)&&window.addEventListener(t?"touchend":"mouseup",this.onMouseUp),(s||a||n&&this.dragToCreateEvent)&&window.addEventListener(t?"touchmove":"mousemove",this.onMouseMove,{passive:!1}),r&&window.addEventListener("keyup",this.onKeyUp),t&&(this.$refs.vuecal.oncontextmenu=function(v){v.preventDefault(),v.stopPropagation()}),this.hideBody||this.alignWithScrollbar();const h=this.view.startDate,d={view:this.view.id,startDate:h,endDate:this.view.endDate,...this.isMonthView?{firstCellDate:this.view.firstCellDate,lastCellDate:this.view.lastCellDate}:{},events:this.view.events.map(this.cleanupEvent),...this.isWeekView?{week:e.getWeek(this.startWeekOnSunday?e.addDays(h,1):h)}:{}};this.$emit("ready",d),this.ready=!0},beforeUnmount(){const e="ontouchstart"in window;window.removeEventListener(e?"touchmove":"mousemove",this.onMouseMove,{passive:!1}),window.removeEventListener(e?"touchend":"mouseup",this.onMouseUp),window.removeEventListener("keyup",this.onKeyUp),this.timeTickerIds[0]&&clearTimeout(this.timeTickerIds[0]),this.timeTickerIds[1]&&clearTimeout(this.timeTickerIds[1]),this.timeTickerIds=[null,null]},computed:{editEvents(){return this.editableEvents&&typeof this.editableEvents=="object"?{title:!!this.editableEvents.title,drag:!!this.editableEvents.drag,resize:!!this.editableEvents.resize,create:!!this.editableEvents.create,delete:!!this.editableEvents.delete}:{title:!!this.editableEvents,drag:!!this.editableEvents,resize:!!this.editableEvents,create:!!this.editableEvents,delete:!!this.editableEvents}},views(){return{years:{label:this.texts.years,enabled:!this.disableViews.includes("years")},year:{label:this.texts.year,enabled:!this.disableViews.includes("year")},month:{label:this.texts.month,enabled:!this.disableViews.includes("month")},week:{label:this.texts.week,enabled:!this.disableViews.includes("week")},day:{label:this.texts.day,enabled:!this.disableViews.includes("day")}}},currentView(){return this.validateView(this.activeView)},enabledViews(){return Object.keys(this.views).filter(e=>this.views[e].enabled)},hasTimeColumn(){return this.time&&this.isWeekOrDayView},isShortMonthView(){return this.isMonthView&&this.eventsOnMonthView==="short"},firstCellDateWeekNumber(){const e=this.utils.date,t=this.view.firstCellDate;return e.getWeek(this.startWeekOnSunday?e.addDays(t,1):t)},timeCells(){const e=[];for(let t=this.timeFrom,s=this.timeTo;t<s;t+=this.timeStep)e.push({hours:Math.floor(t/60),minutes:t%60,label:this.utils.date.formatTime(t,this.TimeFormat),value:t});return e},TimeFormat(){return this.timeFormat||(this.twelveHour?"h:mm{am}":"HH:mm")},daySplits(){return(this.splitDays.filter(e=>!e.hide)||[]).map((e,t)=>({...e,id:e.id||t+1}))},hasSplits(){return this.daySplits.length&&this.isWeekOrDayView},hasShortEvents(){return this.showAllDayEvents==="short"},cellOrSplitMinWidth(){let e=null;return this.hasSplits&&this.minSplitWidth?e=this.visibleDaysCount*this.minSplitWidth*this.daySplits.length:this.minCellWidth&&this.isWeekView&&(e=this.visibleDaysCount*this.minCellWidth),e},allDayBar(){let e=this.allDayBarHeight||null;return e&&!isNaN(e)&&(e+="px"),{cells:this.viewCells,options:this.$props,label:this.texts.allDay,shortEvents:this.hasShortEvents,daySplits:this.hasSplits&&this.daySplits||[],cellOrSplitMinWidth:this.cellOrSplitMinWidth,height:e}},minTimestamp(){let e=null;return this.minDate&&typeof this.minDate=="string"?e=this.utils.date.stringToDate(this.minDate):this.minDate&&this.minDate instanceof Date&&(e=this.minDate),e?e.getTime():null},maxTimestamp(){let e=null;return this.maxDate&&typeof this.maxDate=="string"?e=this.utils.date.stringToDate(this.maxDate):this.maxDate&&this.maxDate instanceof Date&&(e=this.maxDate),e?e.getTime():null},weekDays(){let{weekDays:e,weekDaysShort:t=[]}=this.texts;return e=e.slice(0).map((s,a)=>({label:s,...t.length?{short:t[a]}:{},hide:this.hideWeekends&&a>=5||this.hideWeekdays.length&&this.hideWeekdays.includes(a+1)})),this.startWeekOnSunday&&e.unshift(e.pop()),e},weekDaysInHeader(){return this.isMonthView||this.isWeekView&&!this.minCellWidth&&!(this.hasSplits&&this.minSplitWidth)},months(){return this.texts.months.map(e=>({label:e}))},specialDayHours(){return!this.specialHours||!Object.keys(this.specialHours).length?{}:Array(7).fill("").map((e,t)=>{let s=this.specialHours[t+1]||[];return Array.isArray(s)||(s=[s]),e=[],s.forEach(({from:a,to:n,class:i,label:r},o)=>{e[o]={day:t+1,from:[null,void 0].includes(a)?null:a*1,to:[null,void 0].includes(n)?null:n*1,class:i||"",label:r||""}}),e})},viewTitle(){const e=this.utils.date;let t="";const s=this.view.startDate,a=s.getFullYear(),n=s.getMonth();switch(this.view.id){case"years":{t=this.texts.years;break}case"year":{t=a;break}case"month":{t=`${this.months[n].label} ${a}`;break}case"week":{const i=this.view.endDate,r=s.getFullYear();let o=this.texts.months[s.getMonth()];this.xsmall&&(o=o.substring(0,3));let h=`${o} ${r}`;if(i.getMonth()!==s.getMonth()){const d=i.getFullYear();let v=this.texts.months[i.getMonth()];this.xsmall&&(v=v.substring(0,3)),r===d?h=`${o} - ${v} ${r}`:this.small?h=`${o.substring(0,3)} ${r} - ${v.substring(0,3)} ${d}`:h=`${o} ${r} - ${v} ${d}`}t=`${this.texts.week} ${e.getWeek(this.startWeekOnSunday?e.addDays(s,1):s)} (${h})`;break}case"day":{t=this.utils.date.formatDate(s,this.texts.dateFormat,this.texts);break}}return t},viewCells(){const e=this.utils.date;let t=[],s=null,a=!1;this.watchRealTime||(this.now=new Date);const n=this.now;switch(this.view.id){case"years":{s=this.view.startDate.getFullYear(),t=Array.apply(null,Array(25)).map((i,r)=>{const o=new Date(s+r,0,1),h=new Date(s+r+1,0,1);return h.setSeconds(-1),{startDate:o,formattedDate:e.formatDateLite(o),endDate:h,content:s+r,current:s+r===n.getFullYear()}});break}case"year":{s=this.view.startDate.getFullYear(),t=Array.apply(null,Array(12)).map((i,r)=>{const o=new Date(s,r,1),h=new Date(s,r+1,1);return h.setSeconds(-1),{startDate:o,formattedDate:e.formatDateLite(o),endDate:h,content:this.xsmall?this.months[r].label.substr(0,3):this.months[r].label,current:r===n.getMonth()&&s===n.getFullYear()}});break}case"month":{const i=this.view.startDate.getMonth(),r=new Date(this.view.firstCellDate);a=!1,t=Array.apply(null,Array(42)).map((o,h)=>{const d=e.addDays(r,h),v=new Date(d);v.setHours(23,59,59,0);const g=!a&&e.isToday(d)&&!a++;return{startDate:d,formattedDate:e.formatDateLite(d),endDate:v,content:d.getDate(),today:g,outOfScope:d.getMonth()!==i,class:`vuecal__cell--day${d.getDay()||7}`}}),(this.hideWeekends||this.hideWeekdays.length)&&(t=t.filter(o=>{const h=o.startDate.getDay()||7;return!(this.hideWeekends&&h>=6||this.hideWeekdays.length&&this.hideWeekdays.includes(h))}));break}case"week":{a=!1;const i=this.view.startDate,r=this.weekDays;t=r.map((o,h)=>{const d=e.addDays(i,this.startWeekOnSunday&&this.hideWeekends?h-1:h),v=new Date(d);v.setHours(23,59,59,0);const g=(d.getDay()||7)-1;return{startDate:d,formattedDate:e.formatDateLite(d),endDate:v,today:!a&&e.isToday(d)&&!a++,specialHours:this.specialDayHours[g]||[]}}).filter((o,h)=>!r[h].hide);break}case"day":{const i=this.view.startDate,r=new Date(this.view.startDate);r.setHours(23,59,59,0);const o=(i.getDay()||7)-1;t=[{startDate:i,formattedDate:e.formatDateLite(i),endDate:r,today:e.isToday(i),specialHours:this.specialDayHours[o]||[]}];break}}return t},visibleDaysCount(){return this.isDayView?1:7-this.weekDays.reduce((e,t)=>e+t.hide,0)},cellWidth(){return 100/this.visibleDaysCount},cssClasses(){const{resizeAnEvent:e,dragAnEvent:t,dragCreateAnEvent:s}=this.domEvents;return{[`vuecal--${this.view.id}-view`]:!0,[`vuecal--${this.locale}`]:this.locale,"vuecal--no-time":!this.time,"vuecal--view-with-time":this.hasTimeColumn,"vuecal--week-numbers":this.showWeekNumbers&&this.isMonthView,"vuecal--twelve-hour":this.twelveHour,"vuecal--click-to-navigate":this.clickToNavigate,"vuecal--hide-weekends":this.hideWeekends,"vuecal--split-days":this.hasSplits,"vuecal--sticky-split-labels":this.hasSplits&&this.stickySplitLabels,"vuecal--overflow-x":this.minCellWidth&&this.isWeekView||this.hasSplits&&this.minSplitWidth,"vuecal--small":this.small,"vuecal--xsmall":this.xsmall,"vuecal--resizing-event":e._eid,"vuecal--drag-creating-event":s.event,"vuecal--dragging-event":t._eid,"vuecal--events-on-month-view":this.eventsOnMonthView,"vuecal--short-events":this.isMonthView&&this.eventsOnMonthView==="short","vuecal--has-touch":typeof window<"u"&&"ontouchstart"in window}},isYearsOrYearView(){return["years","year"].includes(this.view.id)},isYearsView(){return this.view.id==="years"},isYearView(){return this.view.id==="year"},isMonthView(){return this.view.id==="month"},isWeekOrDayView(){return["week","day"].includes(this.view.id)},isWeekView(){return this.view.id==="week"},isDayView(){return this.view.id==="day"}},watch:{events:{handler(e,t){this.updateMutableEvents(e),this.addEventsToView()},deep:!0},locale(e){this.loadLocale(e)},selectedDate(e){this.updateSelectedDate(e)},activeView(e){this.switchView(e)}}},rl=Mt(ll,[["render",nl]]);//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var _a;function M(){return _a.apply(null,arguments)}function ol(e){_a=e}function Fe(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function vt(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function ee(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Es(e){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(e).length===0;var t;for(t in e)if(ee(e,t))return!1;return!0}function Te(e){return e===void 0}function st(e){return typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]"}function It(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function ba(e,t){var s=[],a,n=e.length;for(a=0;a<n;++a)s.push(t(e[a],a));return s}function dt(e,t){for(var s in t)ee(t,s)&&(e[s]=t[s]);return ee(t,"toString")&&(e.toString=t.toString),ee(t,"valueOf")&&(e.valueOf=t.valueOf),e}function Ge(e,t,s,a){return Ua(e,t,s,a,!0).utc()}function dl(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function z(e){return e._pf==null&&(e._pf=dl()),e._pf}var bs;Array.prototype.some?bs=Array.prototype.some:bs=function(e){var t=Object(this),s=t.length>>>0,a;for(a=0;a<s;a++)if(a in t&&e.call(this,t[a],a,t))return!0;return!1};function Os(e){var t=null,s=!1,a=e._d&&!isNaN(e._d.getTime());if(a&&(t=z(e),s=bs.call(t.parsedDateParts,function(n){return n!=null}),a=t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&s),e._strict&&(a=a&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(e))e._isValid=a;else return a;return e._isValid}function ss(e){var t=Ge(NaN);return e!=null?dt(z(t),e):z(t).userInvalidated=!0,t}var la=M.momentProperties=[],ps=!1;function js(e,t){var s,a,n,i=la.length;if(Te(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),Te(t._i)||(e._i=t._i),Te(t._f)||(e._f=t._f),Te(t._l)||(e._l=t._l),Te(t._strict)||(e._strict=t._strict),Te(t._tzm)||(e._tzm=t._tzm),Te(t._isUTC)||(e._isUTC=t._isUTC),Te(t._offset)||(e._offset=t._offset),Te(t._pf)||(e._pf=z(t)),Te(t._locale)||(e._locale=t._locale),i>0)for(s=0;s<i;s++)a=la[s],n=t[a],Te(n)||(e[a]=n);return e}function Ft(e){js(this,e),this._d=new Date(e._d!=null?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),ps===!1&&(ps=!0,M.updateOffset(this),ps=!1)}function Re(e){return e instanceof Ft||e!=null&&e._isAMomentObject!=null}function ka(e){M.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+e)}function Ne(e,t){var s=!0;return dt(function(){if(M.deprecationHandler!=null&&M.deprecationHandler(null,e),s){var a=[],n,i,r,o=arguments.length;for(i=0;i<o;i++){if(n="",typeof arguments[i]=="object"){n+=`
[`+i+"] ";for(r in arguments[0])ee(arguments[0],r)&&(n+=r+": "+arguments[0][r]+", ");n=n.slice(0,-2)}else n=arguments[i];a.push(n)}ka(e+`
Arguments: `+Array.prototype.slice.call(a).join("")+`
`+new Error().stack),s=!1}return t.apply(this,arguments)},t)}var ra={};function Da(e,t){M.deprecationHandler!=null&&M.deprecationHandler(e,t),ra[e]||(ka(t),ra[e]=!0)}M.suppressDeprecationWarnings=!1;M.deprecationHandler=null;function qe(e){return typeof Function<"u"&&e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function ul(e){var t,s;for(s in e)ee(e,s)&&(t=e[s],qe(t)?this[s]=t:this["_"+s]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function ks(e,t){var s=dt({},e),a;for(a in t)ee(t,a)&&(vt(e[a])&&vt(t[a])?(s[a]={},dt(s[a],e[a]),dt(s[a],t[a])):t[a]!=null?s[a]=t[a]:delete s[a]);for(a in e)ee(e,a)&&!ee(t,a)&&vt(e[a])&&(s[a]=dt({},s[a]));return s}function Ys(e){e!=null&&this.set(e)}var Ds;Object.keys?Ds=Object.keys:Ds=function(e){var t,s=[];for(t in e)ee(e,t)&&s.push(t);return s};var cl={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function hl(e,t,s){var a=this._calendar[e]||this._calendar.sameElse;return qe(a)?a.call(t,s):a}function ze(e,t,s){var a=""+Math.abs(e),n=t-a.length,i=e>=0;return(i?s?"+":"":"-")+Math.pow(10,Math.max(0,n)).toString().substr(1)+a}var As=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Ut=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,ys={},bt={};function F(e,t,s,a){var n=a;typeof a=="string"&&(n=function(){return this[a]()}),e&&(bt[e]=n),t&&(bt[t[0]]=function(){return ze(n.apply(this,arguments),t[1],t[2])}),s&&(bt[s]=function(){return this.localeData().ordinal(n.apply(this,arguments),e)})}function ml(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function vl(e){var t=e.match(As),s,a;for(s=0,a=t.length;s<a;s++)bt[t[s]]?t[s]=bt[t[s]]:t[s]=ml(t[s]);return function(n){var i="",r;for(r=0;r<a;r++)i+=qe(t[r])?t[r].call(n,e):t[r];return i}}function Gt(e,t){return e.isValid()?(t=xa(t,e.localeData()),ys[t]=ys[t]||vl(t),ys[t](e)):e.localeData().invalidDate()}function xa(e,t){var s=5;function a(n){return t.longDateFormat(n)||n}for(Ut.lastIndex=0;s>=0&&Ut.test(e);)e=e.replace(Ut,a),Ut.lastIndex=0,s-=1;return e}var fl={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function pl(e){var t=this._longDateFormat[e],s=this._longDateFormat[e.toUpperCase()];return t||!s?t:(this._longDateFormat[e]=s.match(As).map(function(a){return a==="MMMM"||a==="MM"||a==="DD"||a==="dddd"?a.slice(1):a}).join(""),this._longDateFormat[e])}var yl="Invalid date";function gl(){return this._invalidDate}var wl="%d",_l=/\d{1,2}/;function bl(e){return this._ordinal.replace("%d",e)}var kl={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function Dl(e,t,s,a){var n=this._relativeTime[s];return qe(n)?n(e,t,s,a):n.replace(/%d/i,e)}function xl(e,t){var s=this._relativeTime[e>0?"future":"past"];return qe(s)?s(t):s.replace(/%s/i,t)}var oa={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function Le(e){return typeof e=="string"?oa[e]||oa[e.toLowerCase()]:void 0}function Vs(e){var t={},s,a;for(a in e)ee(e,a)&&(s=Le(a),s&&(t[s]=e[a]));return t}var Ml={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function Sl(e){var t=[],s;for(s in e)ee(e,s)&&t.push({unit:s,priority:Ml[s]});return t.sort(function(a,n){return a.priority-n.priority}),t}var Ma=/\d/,Ye=/\d\d/,Sa=/\d{3}/,$s=/\d{4}/,as=/[+-]?\d{6}/,oe=/\d\d?/,Ta=/\d\d\d\d?/,Ca=/\d\d\d\d\d\d?/,is=/\d{1,3}/,Ns=/\d{1,4}/,ns=/[+-]?\d{1,6}/,St=/\d+/,ls=/[+-]?\d+/,Tl=/Z|[+-]\d\d:?\d\d/gi,rs=/Z|[+-]\d\d(?::?\d\d)?/gi,Cl=/[+-]?\d+(\.\d{1,3})?/,Rt=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Tt=/^[1-9]\d?/,Ls=/^([1-9]\d|\d)/,Kt;Kt={};function L(e,t,s){Kt[e]=qe(t)?t:function(a,n){return a&&s?s:t}}function El(e,t){return ee(Kt,e)?Kt[e](t._strict,t._locale):new RegExp(Ol(e))}function Ol(e){return et(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,s,a,n,i){return s||a||n||i}))}function et(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Ve(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function Z(e){var t=+e,s=0;return t!==0&&isFinite(t)&&(s=Ve(t)),s}var xs={};function ae(e,t){var s,a=t,n;for(typeof e=="string"&&(e=[e]),st(t)&&(a=function(i,r){r[t]=Z(i)}),n=e.length,s=0;s<n;s++)xs[e[s]]=a}function Ht(e,t){ae(e,function(s,a,n,i){n._w=n._w||{},t(s,n._w,n,i)})}function jl(e,t,s){t!=null&&ee(xs,e)&&xs[e](t,s._a,s,e)}function os(e){return e%4===0&&e%100!==0||e%400===0}var xe=0,Xe=1,Ue=2,be=3,Ie=4,Qe=5,mt=6,Yl=7,Al=8;F("Y",0,0,function(){var e=this.year();return e<=9999?ze(e,4):"+"+e});F(0,["YY",2],0,function(){return this.year()%100});F(0,["YYYY",4],0,"year");F(0,["YYYYY",5],0,"year");F(0,["YYYYYY",6,!0],0,"year");L("Y",ls);L("YY",oe,Ye);L("YYYY",Ns,$s);L("YYYYY",ns,as);L("YYYYYY",ns,as);ae(["YYYYY","YYYYYY"],xe);ae("YYYY",function(e,t){t[xe]=e.length===2?M.parseTwoDigitYear(e):Z(e)});ae("YY",function(e,t){t[xe]=M.parseTwoDigitYear(e)});ae("Y",function(e,t){t[xe]=parseInt(e,10)});function $t(e){return os(e)?366:365}M.parseTwoDigitYear=function(e){return Z(e)+(Z(e)>68?1900:2e3)};var Ea=Ct("FullYear",!0);function Vl(){return os(this.year())}function Ct(e,t){return function(s){return s!=null?(Oa(this,e,s),M.updateOffset(this,t),this):Nt(this,e)}}function Nt(e,t){if(!e.isValid())return NaN;var s=e._d,a=e._isUTC;switch(t){case"Milliseconds":return a?s.getUTCMilliseconds():s.getMilliseconds();case"Seconds":return a?s.getUTCSeconds():s.getSeconds();case"Minutes":return a?s.getUTCMinutes():s.getMinutes();case"Hours":return a?s.getUTCHours():s.getHours();case"Date":return a?s.getUTCDate():s.getDate();case"Day":return a?s.getUTCDay():s.getDay();case"Month":return a?s.getUTCMonth():s.getMonth();case"FullYear":return a?s.getUTCFullYear():s.getFullYear();default:return NaN}}function Oa(e,t,s){var a,n,i,r,o;if(!(!e.isValid()||isNaN(s))){switch(a=e._d,n=e._isUTC,t){case"Milliseconds":return void(n?a.setUTCMilliseconds(s):a.setMilliseconds(s));case"Seconds":return void(n?a.setUTCSeconds(s):a.setSeconds(s));case"Minutes":return void(n?a.setUTCMinutes(s):a.setMinutes(s));case"Hours":return void(n?a.setUTCHours(s):a.setHours(s));case"Date":return void(n?a.setUTCDate(s):a.setDate(s));case"FullYear":break;default:return}i=s,r=e.month(),o=e.date(),o=o===29&&r===1&&!os(i)?28:o,n?a.setUTCFullYear(i,r,o):a.setFullYear(i,r,o)}}function $l(e){return e=Le(e),qe(this[e])?this[e]():this}function Nl(e,t){if(typeof e=="object"){e=Vs(e);var s=Sl(e),a,n=s.length;for(a=0;a<n;a++)this[s[a].unit](e[s[a].unit])}else if(e=Le(e),qe(this[e]))return this[e](t);return this}function Ll(e,t){return(e%t+t)%t}var fe;Array.prototype.indexOf?fe=Array.prototype.indexOf:fe=function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1};function Ws(e,t){if(isNaN(e)||isNaN(t))return NaN;var s=Ll(t,12);return e+=(t-s)/12,s===1?os(e)?29:28:31-s%7%2}F("M",["MM",2],"Mo",function(){return this.month()+1});F("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)});F("MMMM",0,0,function(e){return this.localeData().months(this,e)});L("M",oe,Tt);L("MM",oe,Ye);L("MMM",function(e,t){return t.monthsShortRegex(e)});L("MMMM",function(e,t){return t.monthsRegex(e)});ae(["M","MM"],function(e,t){t[Xe]=Z(e)-1});ae(["MMM","MMMM"],function(e,t,s,a){var n=s._locale.monthsParse(e,a,s._strict);n!=null?t[Xe]=n:z(s).invalidMonth=e});var Wl="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ja="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Ya=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Pl=Rt,Il=Rt;function Fl(e,t){return e?Fe(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||Ya).test(t)?"format":"standalone"][e.month()]:Fe(this._months)?this._months:this._months.standalone}function Rl(e,t){return e?Fe(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Ya.test(t)?"format":"standalone"][e.month()]:Fe(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function Hl(e,t,s){var a,n,i,r=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],a=0;a<12;++a)i=Ge([2e3,a]),this._shortMonthsParse[a]=this.monthsShort(i,"").toLocaleLowerCase(),this._longMonthsParse[a]=this.months(i,"").toLocaleLowerCase();return s?t==="MMM"?(n=fe.call(this._shortMonthsParse,r),n!==-1?n:null):(n=fe.call(this._longMonthsParse,r),n!==-1?n:null):t==="MMM"?(n=fe.call(this._shortMonthsParse,r),n!==-1?n:(n=fe.call(this._longMonthsParse,r),n!==-1?n:null)):(n=fe.call(this._longMonthsParse,r),n!==-1?n:(n=fe.call(this._shortMonthsParse,r),n!==-1?n:null))}function Ul(e,t,s){var a,n,i;if(this._monthsParseExact)return Hl.call(this,e,t,s);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),a=0;a<12;a++){if(n=Ge([2e3,a]),s&&!this._longMonthsParse[a]&&(this._longMonthsParse[a]=new RegExp("^"+this.months(n,"").replace(".","")+"$","i"),this._shortMonthsParse[a]=new RegExp("^"+this.monthsShort(n,"").replace(".","")+"$","i")),!s&&!this._monthsParse[a]&&(i="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[a]=new RegExp(i.replace(".",""),"i")),s&&t==="MMMM"&&this._longMonthsParse[a].test(e))return a;if(s&&t==="MMM"&&this._shortMonthsParse[a].test(e))return a;if(!s&&this._monthsParse[a].test(e))return a}}function Aa(e,t){if(!e.isValid())return e;if(typeof t=="string"){if(/^\d+$/.test(t))t=Z(t);else if(t=e.localeData().monthsParse(t),!st(t))return e}var s=t,a=e.date();return a=a<29?a:Math.min(a,Ws(e.year(),s)),e._isUTC?e._d.setUTCMonth(s,a):e._d.setMonth(s,a),e}function Va(e){return e!=null?(Aa(this,e),M.updateOffset(this,!0),this):Nt(this,"Month")}function Bl(){return Ws(this.year(),this.month())}function zl(e){return this._monthsParseExact?(ee(this,"_monthsRegex")||$a.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(ee(this,"_monthsShortRegex")||(this._monthsShortRegex=Pl),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function Gl(e){return this._monthsParseExact?(ee(this,"_monthsRegex")||$a.call(this),e?this._monthsStrictRegex:this._monthsRegex):(ee(this,"_monthsRegex")||(this._monthsRegex=Il),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function $a(){function e(h,d){return d.length-h.length}var t=[],s=[],a=[],n,i,r,o;for(n=0;n<12;n++)i=Ge([2e3,n]),r=et(this.monthsShort(i,"")),o=et(this.months(i,"")),t.push(r),s.push(o),a.push(o),a.push(r);t.sort(e),s.sort(e),a.sort(e),this._monthsRegex=new RegExp("^("+a.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+t.join("|")+")","i")}function ql(e,t,s,a,n,i,r){var o;return e<100&&e>=0?(o=new Date(e+400,t,s,a,n,i,r),isFinite(o.getFullYear())&&o.setFullYear(e)):o=new Date(e,t,s,a,n,i,r),o}function Lt(e){var t,s;return e<100&&e>=0?(s=Array.prototype.slice.call(arguments),s[0]=e+400,t=new Date(Date.UTC.apply(null,s)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function Xt(e,t,s){var a=7+t-s,n=(7+Lt(e,0,a).getUTCDay()-t)%7;return-n+a-1}function Na(e,t,s,a,n){var i=(7+s-a)%7,r=Xt(e,a,n),o=1+7*(t-1)+i+r,h,d;return o<=0?(h=e-1,d=$t(h)+o):o>$t(e)?(h=e+1,d=o-$t(e)):(h=e,d=o),{year:h,dayOfYear:d}}function Wt(e,t,s){var a=Xt(e.year(),t,s),n=Math.floor((e.dayOfYear()-a-1)/7)+1,i,r;return n<1?(r=e.year()-1,i=n+tt(r,t,s)):n>tt(e.year(),t,s)?(i=n-tt(e.year(),t,s),r=e.year()+1):(r=e.year(),i=n),{week:i,year:r}}function tt(e,t,s){var a=Xt(e,t,s),n=Xt(e+1,t,s);return($t(e)-a+n)/7}F("w",["ww",2],"wo","week");F("W",["WW",2],"Wo","isoWeek");L("w",oe,Tt);L("ww",oe,Ye);L("W",oe,Tt);L("WW",oe,Ye);Ht(["w","ww","W","WW"],function(e,t,s,a){t[a.substr(0,1)]=Z(e)});function Zl(e){return Wt(e,this._week.dow,this._week.doy).week}var Jl={dow:0,doy:6};function Kl(){return this._week.dow}function Xl(){return this._week.doy}function Ql(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function er(e){var t=Wt(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}F("d",0,"do","day");F("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)});F("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)});F("dddd",0,0,function(e){return this.localeData().weekdays(this,e)});F("e",0,0,"weekday");F("E",0,0,"isoWeekday");L("d",oe);L("e",oe);L("E",oe);L("dd",function(e,t){return t.weekdaysMinRegex(e)});L("ddd",function(e,t){return t.weekdaysShortRegex(e)});L("dddd",function(e,t){return t.weekdaysRegex(e)});Ht(["dd","ddd","dddd"],function(e,t,s,a){var n=s._locale.weekdaysParse(e,a,s._strict);n!=null?t.d=n:z(s).invalidWeekday=e});Ht(["d","e","E"],function(e,t,s,a){t[a]=Z(e)});function tr(e,t){return typeof e!="string"?e:isNaN(e)?(e=t.weekdaysParse(e),typeof e=="number"?e:null):parseInt(e,10)}function sr(e,t){return typeof e=="string"?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function Ps(e,t){return e.slice(t,7).concat(e.slice(0,t))}var ar="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),La="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),ir="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),nr=Rt,lr=Rt,rr=Rt;function or(e,t){var s=Fe(this._weekdays)?this._weekdays:this._weekdays[e&&e!==!0&&this._weekdays.isFormat.test(t)?"format":"standalone"];return e===!0?Ps(s,this._week.dow):e?s[e.day()]:s}function dr(e){return e===!0?Ps(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function ur(e){return e===!0?Ps(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function cr(e,t,s){var a,n,i,r=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],a=0;a<7;++a)i=Ge([2e3,1]).day(a),this._minWeekdaysParse[a]=this.weekdaysMin(i,"").toLocaleLowerCase(),this._shortWeekdaysParse[a]=this.weekdaysShort(i,"").toLocaleLowerCase(),this._weekdaysParse[a]=this.weekdays(i,"").toLocaleLowerCase();return s?t==="dddd"?(n=fe.call(this._weekdaysParse,r),n!==-1?n:null):t==="ddd"?(n=fe.call(this._shortWeekdaysParse,r),n!==-1?n:null):(n=fe.call(this._minWeekdaysParse,r),n!==-1?n:null):t==="dddd"?(n=fe.call(this._weekdaysParse,r),n!==-1||(n=fe.call(this._shortWeekdaysParse,r),n!==-1)?n:(n=fe.call(this._minWeekdaysParse,r),n!==-1?n:null)):t==="ddd"?(n=fe.call(this._shortWeekdaysParse,r),n!==-1||(n=fe.call(this._weekdaysParse,r),n!==-1)?n:(n=fe.call(this._minWeekdaysParse,r),n!==-1?n:null)):(n=fe.call(this._minWeekdaysParse,r),n!==-1||(n=fe.call(this._weekdaysParse,r),n!==-1)?n:(n=fe.call(this._shortWeekdaysParse,r),n!==-1?n:null))}function hr(e,t,s){var a,n,i;if(this._weekdaysParseExact)return cr.call(this,e,t,s);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),a=0;a<7;a++){if(n=Ge([2e3,1]).day(a),s&&!this._fullWeekdaysParse[a]&&(this._fullWeekdaysParse[a]=new RegExp("^"+this.weekdays(n,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[a]=new RegExp("^"+this.weekdaysShort(n,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[a]=new RegExp("^"+this.weekdaysMin(n,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[a]||(i="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[a]=new RegExp(i.replace(".",""),"i")),s&&t==="dddd"&&this._fullWeekdaysParse[a].test(e))return a;if(s&&t==="ddd"&&this._shortWeekdaysParse[a].test(e))return a;if(s&&t==="dd"&&this._minWeekdaysParse[a].test(e))return a;if(!s&&this._weekdaysParse[a].test(e))return a}}function mr(e){if(!this.isValid())return e!=null?this:NaN;var t=Nt(this,"Day");return e!=null?(e=tr(e,this.localeData()),this.add(e-t,"d")):t}function vr(e){if(!this.isValid())return e!=null?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function fr(e){if(!this.isValid())return e!=null?this:NaN;if(e!=null){var t=sr(e,this.localeData());return this.day(this.day()%7?t:t-7)}else return this.day()||7}function pr(e){return this._weekdaysParseExact?(ee(this,"_weekdaysRegex")||Is.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(ee(this,"_weekdaysRegex")||(this._weekdaysRegex=nr),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function yr(e){return this._weekdaysParseExact?(ee(this,"_weekdaysRegex")||Is.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(ee(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=lr),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function gr(e){return this._weekdaysParseExact?(ee(this,"_weekdaysRegex")||Is.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(ee(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=rr),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Is(){function e(v,g){return g.length-v.length}var t=[],s=[],a=[],n=[],i,r,o,h,d;for(i=0;i<7;i++)r=Ge([2e3,1]).day(i),o=et(this.weekdaysMin(r,"")),h=et(this.weekdaysShort(r,"")),d=et(this.weekdays(r,"")),t.push(o),s.push(h),a.push(d),n.push(o),n.push(h),n.push(d);t.sort(e),s.sort(e),a.sort(e),n.sort(e),this._weekdaysRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+t.join("|")+")","i")}function Fs(){return this.hours()%12||12}function wr(){return this.hours()||24}F("H",["HH",2],0,"hour");F("h",["hh",2],0,Fs);F("k",["kk",2],0,wr);F("hmm",0,0,function(){return""+Fs.apply(this)+ze(this.minutes(),2)});F("hmmss",0,0,function(){return""+Fs.apply(this)+ze(this.minutes(),2)+ze(this.seconds(),2)});F("Hmm",0,0,function(){return""+this.hours()+ze(this.minutes(),2)});F("Hmmss",0,0,function(){return""+this.hours()+ze(this.minutes(),2)+ze(this.seconds(),2)});function Wa(e,t){F(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}Wa("a",!0);Wa("A",!1);function Pa(e,t){return t._meridiemParse}L("a",Pa);L("A",Pa);L("H",oe,Ls);L("h",oe,Tt);L("k",oe,Tt);L("HH",oe,Ye);L("hh",oe,Ye);L("kk",oe,Ye);L("hmm",Ta);L("hmmss",Ca);L("Hmm",Ta);L("Hmmss",Ca);ae(["H","HH"],be);ae(["k","kk"],function(e,t,s){var a=Z(e);t[be]=a===24?0:a});ae(["a","A"],function(e,t,s){s._isPm=s._locale.isPM(e),s._meridiem=e});ae(["h","hh"],function(e,t,s){t[be]=Z(e),z(s).bigHour=!0});ae("hmm",function(e,t,s){var a=e.length-2;t[be]=Z(e.substr(0,a)),t[Ie]=Z(e.substr(a)),z(s).bigHour=!0});ae("hmmss",function(e,t,s){var a=e.length-4,n=e.length-2;t[be]=Z(e.substr(0,a)),t[Ie]=Z(e.substr(a,2)),t[Qe]=Z(e.substr(n)),z(s).bigHour=!0});ae("Hmm",function(e,t,s){var a=e.length-2;t[be]=Z(e.substr(0,a)),t[Ie]=Z(e.substr(a))});ae("Hmmss",function(e,t,s){var a=e.length-4,n=e.length-2;t[be]=Z(e.substr(0,a)),t[Ie]=Z(e.substr(a,2)),t[Qe]=Z(e.substr(n))});function _r(e){return(e+"").toLowerCase().charAt(0)==="p"}var br=/[ap]\.?m?\.?/i,kr=Ct("Hours",!0);function Dr(e,t,s){return e>11?s?"pm":"PM":s?"am":"AM"}var Ia={calendar:cl,longDateFormat:fl,invalidDate:yl,ordinal:wl,dayOfMonthOrdinalParse:_l,relativeTime:kl,months:Wl,monthsShort:ja,week:Jl,weekdays:ar,weekdaysMin:ir,weekdaysShort:La,meridiemParse:br},ce={},At={},Pt;function xr(e,t){var s,a=Math.min(e.length,t.length);for(s=0;s<a;s+=1)if(e[s]!==t[s])return s;return a}function da(e){return e&&e.toLowerCase().replace("_","-")}function Mr(e){for(var t=0,s,a,n,i;t<e.length;){for(i=da(e[t]).split("-"),s=i.length,a=da(e[t+1]),a=a?a.split("-"):null;s>0;){if(n=ds(i.slice(0,s).join("-")),n)return n;if(a&&a.length>=s&&xr(i,a)>=s-1)break;s--}t++}return Pt}function Sr(e){return!!(e&&e.match("^[^/\\\\]*$"))}function ds(e){var t=null,s;if(ce[e]===void 0&&typeof module<"u"&&module&&module.exports&&Sr(e))try{t=Pt._abbr,s=require,s("./locale/"+e),ct(t)}catch{ce[e]=null}return ce[e]}function ct(e,t){var s;return e&&(Te(t)?s=at(e):s=Rs(e,t),s?Pt=s:typeof console<"u"&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),Pt._abbr}function Rs(e,t){if(t!==null){var s,a=Ia;if(t.abbr=e,ce[e]!=null)Da("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),a=ce[e]._config;else if(t.parentLocale!=null)if(ce[t.parentLocale]!=null)a=ce[t.parentLocale]._config;else if(s=ds(t.parentLocale),s!=null)a=s._config;else return At[t.parentLocale]||(At[t.parentLocale]=[]),At[t.parentLocale].push({name:e,config:t}),null;return ce[e]=new Ys(ks(a,t)),At[e]&&At[e].forEach(function(n){Rs(n.name,n.config)}),ct(e),ce[e]}else return delete ce[e],null}function Tr(e,t){if(t!=null){var s,a,n=Ia;ce[e]!=null&&ce[e].parentLocale!=null?ce[e].set(ks(ce[e]._config,t)):(a=ds(e),a!=null&&(n=a._config),t=ks(n,t),a==null&&(t.abbr=e),s=new Ys(t),s.parentLocale=ce[e],ce[e]=s),ct(e)}else ce[e]!=null&&(ce[e].parentLocale!=null?(ce[e]=ce[e].parentLocale,e===ct()&&ct(e)):ce[e]!=null&&delete ce[e]);return ce[e]}function at(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Pt;if(!Fe(e)){if(t=ds(e),t)return t;e=[e]}return Mr(e)}function Cr(){return Ds(ce)}function Hs(e){var t,s=e._a;return s&&z(e).overflow===-2&&(t=s[Xe]<0||s[Xe]>11?Xe:s[Ue]<1||s[Ue]>Ws(s[xe],s[Xe])?Ue:s[be]<0||s[be]>24||s[be]===24&&(s[Ie]!==0||s[Qe]!==0||s[mt]!==0)?be:s[Ie]<0||s[Ie]>59?Ie:s[Qe]<0||s[Qe]>59?Qe:s[mt]<0||s[mt]>999?mt:-1,z(e)._overflowDayOfYear&&(t<xe||t>Ue)&&(t=Ue),z(e)._overflowWeeks&&t===-1&&(t=Yl),z(e)._overflowWeekday&&t===-1&&(t=Al),z(e).overflow=t),e}var Er=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Or=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,jr=/Z|[+-]\d\d(?::?\d\d)?/,Bt=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],gs=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Yr=/^\/?Date\((-?\d+)/i,Ar=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Vr={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Fa(e){var t,s,a=e._i,n=Er.exec(a)||Or.exec(a),i,r,o,h,d=Bt.length,v=gs.length;if(n){for(z(e).iso=!0,t=0,s=d;t<s;t++)if(Bt[t][1].exec(n[1])){r=Bt[t][0],i=Bt[t][2]!==!1;break}if(r==null){e._isValid=!1;return}if(n[3]){for(t=0,s=v;t<s;t++)if(gs[t][1].exec(n[3])){o=(n[2]||" ")+gs[t][0];break}if(o==null){e._isValid=!1;return}}if(!i&&o!=null){e._isValid=!1;return}if(n[4])if(jr.exec(n[4]))h="Z";else{e._isValid=!1;return}e._f=r+(o||"")+(h||""),Bs(e)}else e._isValid=!1}function $r(e,t,s,a,n,i){var r=[Nr(e),ja.indexOf(t),parseInt(s,10),parseInt(a,10),parseInt(n,10)];return i&&r.push(parseInt(i,10)),r}function Nr(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function Lr(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Wr(e,t,s){if(e){var a=La.indexOf(e),n=new Date(t[0],t[1],t[2]).getDay();if(a!==n)return z(s).weekdayMismatch=!0,s._isValid=!1,!1}return!0}function Pr(e,t,s){if(e)return Vr[e];if(t)return 0;var a=parseInt(s,10),n=a%100,i=(a-n)/100;return i*60+n}function Ra(e){var t=Ar.exec(Lr(e._i)),s;if(t){if(s=$r(t[4],t[3],t[2],t[5],t[6],t[7]),!Wr(t[1],s,e))return;e._a=s,e._tzm=Pr(t[8],t[9],t[10]),e._d=Lt.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),z(e).rfc2822=!0}else e._isValid=!1}function Ir(e){var t=Yr.exec(e._i);if(t!==null){e._d=new Date(+t[1]);return}if(Fa(e),e._isValid===!1)delete e._isValid;else return;if(Ra(e),e._isValid===!1)delete e._isValid;else return;e._strict?e._isValid=!1:M.createFromInputFallback(e)}M.createFromInputFallback=Ne("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});function wt(e,t,s){return e??t??s}function Fr(e){var t=new Date(M.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function Us(e){var t,s,a=[],n,i,r;if(!e._d){for(n=Fr(e),e._w&&e._a[Ue]==null&&e._a[Xe]==null&&Rr(e),e._dayOfYear!=null&&(r=wt(e._a[xe],n[xe]),(e._dayOfYear>$t(r)||e._dayOfYear===0)&&(z(e)._overflowDayOfYear=!0),s=Lt(r,0,e._dayOfYear),e._a[Xe]=s.getUTCMonth(),e._a[Ue]=s.getUTCDate()),t=0;t<3&&e._a[t]==null;++t)e._a[t]=a[t]=n[t];for(;t<7;t++)e._a[t]=a[t]=e._a[t]==null?t===2?1:0:e._a[t];e._a[be]===24&&e._a[Ie]===0&&e._a[Qe]===0&&e._a[mt]===0&&(e._nextDay=!0,e._a[be]=0),e._d=(e._useUTC?Lt:ql).apply(null,a),i=e._useUTC?e._d.getUTCDay():e._d.getDay(),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[be]=24),e._w&&typeof e._w.d<"u"&&e._w.d!==i&&(z(e).weekdayMismatch=!0)}}function Rr(e){var t,s,a,n,i,r,o,h,d;t=e._w,t.GG!=null||t.W!=null||t.E!=null?(i=1,r=4,s=wt(t.GG,e._a[xe],Wt(re(),1,4).year),a=wt(t.W,1),n=wt(t.E,1),(n<1||n>7)&&(h=!0)):(i=e._locale._week.dow,r=e._locale._week.doy,d=Wt(re(),i,r),s=wt(t.gg,e._a[xe],d.year),a=wt(t.w,d.week),t.d!=null?(n=t.d,(n<0||n>6)&&(h=!0)):t.e!=null?(n=t.e+i,(t.e<0||t.e>6)&&(h=!0)):n=i),a<1||a>tt(s,i,r)?z(e)._overflowWeeks=!0:h!=null?z(e)._overflowWeekday=!0:(o=Na(s,a,n,i,r),e._a[xe]=o.year,e._dayOfYear=o.dayOfYear)}M.ISO_8601=function(){};M.RFC_2822=function(){};function Bs(e){if(e._f===M.ISO_8601){Fa(e);return}if(e._f===M.RFC_2822){Ra(e);return}e._a=[],z(e).empty=!0;var t=""+e._i,s,a,n,i,r,o=t.length,h=0,d,v;for(n=xa(e._f,e._locale).match(As)||[],v=n.length,s=0;s<v;s++)i=n[s],a=(t.match(El(i,e))||[])[0],a&&(r=t.substr(0,t.indexOf(a)),r.length>0&&z(e).unusedInput.push(r),t=t.slice(t.indexOf(a)+a.length),h+=a.length),bt[i]?(a?z(e).empty=!1:z(e).unusedTokens.push(i),jl(i,a,e)):e._strict&&!a&&z(e).unusedTokens.push(i);z(e).charsLeftOver=o-h,t.length>0&&z(e).unusedInput.push(t),e._a[be]<=12&&z(e).bigHour===!0&&e._a[be]>0&&(z(e).bigHour=void 0),z(e).parsedDateParts=e._a.slice(0),z(e).meridiem=e._meridiem,e._a[be]=Hr(e._locale,e._a[be],e._meridiem),d=z(e).era,d!==null&&(e._a[xe]=e._locale.erasConvertYear(d,e._a[xe])),Us(e),Hs(e)}function Hr(e,t,s){var a;return s==null?t:e.meridiemHour!=null?e.meridiemHour(t,s):(e.isPM!=null&&(a=e.isPM(s),a&&t<12&&(t+=12),!a&&t===12&&(t=0)),t)}function Ur(e){var t,s,a,n,i,r,o=!1,h=e._f.length;if(h===0){z(e).invalidFormat=!0,e._d=new Date(NaN);return}for(n=0;n<h;n++)i=0,r=!1,t=js({},e),e._useUTC!=null&&(t._useUTC=e._useUTC),t._f=e._f[n],Bs(t),Os(t)&&(r=!0),i+=z(t).charsLeftOver,i+=z(t).unusedTokens.length*10,z(t).score=i,o?i<a&&(a=i,s=t):(a==null||i<a||r)&&(a=i,s=t,r&&(o=!0));dt(e,s||t)}function Br(e){if(!e._d){var t=Vs(e._i),s=t.day===void 0?t.date:t.day;e._a=ba([t.year,t.month,s,t.hour,t.minute,t.second,t.millisecond],function(a){return a&&parseInt(a,10)}),Us(e)}}function zr(e){var t=new Ft(Hs(Ha(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function Ha(e){var t=e._i,s=e._f;return e._locale=e._locale||at(e._l),t===null||s===void 0&&t===""?ss({nullInput:!0}):(typeof t=="string"&&(e._i=t=e._locale.preparse(t)),Re(t)?new Ft(Hs(t)):(It(t)?e._d=t:Fe(s)?Ur(e):s?Bs(e):Gr(e),Os(e)||(e._d=null),e))}function Gr(e){var t=e._i;Te(t)?e._d=new Date(M.now()):It(t)?e._d=new Date(t.valueOf()):typeof t=="string"?Ir(e):Fe(t)?(e._a=ba(t.slice(0),function(s){return parseInt(s,10)}),Us(e)):vt(t)?Br(e):st(t)?e._d=new Date(t):M.createFromInputFallback(e)}function Ua(e,t,s,a,n){var i={};return(t===!0||t===!1)&&(a=t,t=void 0),(s===!0||s===!1)&&(a=s,s=void 0),(vt(e)&&Es(e)||Fe(e)&&e.length===0)&&(e=void 0),i._isAMomentObject=!0,i._useUTC=i._isUTC=n,i._l=s,i._i=e,i._f=t,i._strict=a,zr(i)}function re(e,t,s,a){return Ua(e,t,s,a,!1)}var qr=Ne("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=re.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:ss()}),Zr=Ne("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=re.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:ss()});function Ba(e,t){var s,a;if(t.length===1&&Fe(t[0])&&(t=t[0]),!t.length)return re();for(s=t[0],a=1;a<t.length;++a)(!t[a].isValid()||t[a][e](s))&&(s=t[a]);return s}function Jr(){var e=[].slice.call(arguments,0);return Ba("isBefore",e)}function Kr(){var e=[].slice.call(arguments,0);return Ba("isAfter",e)}var Xr=function(){return Date.now?Date.now():+new Date},Vt=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Qr(e){var t,s=!1,a,n=Vt.length;for(t in e)if(ee(e,t)&&!(fe.call(Vt,t)!==-1&&(e[t]==null||!isNaN(e[t]))))return!1;for(a=0;a<n;++a)if(e[Vt[a]]){if(s)return!1;parseFloat(e[Vt[a]])!==Z(e[Vt[a]])&&(s=!0)}return!0}function eo(){return this._isValid}function to(){return He(NaN)}function us(e){var t=Vs(e),s=t.year||0,a=t.quarter||0,n=t.month||0,i=t.week||t.isoWeek||0,r=t.day||0,o=t.hour||0,h=t.minute||0,d=t.second||0,v=t.millisecond||0;this._isValid=Qr(t),this._milliseconds=+v+d*1e3+h*6e4+o*1e3*60*60,this._days=+r+i*7,this._months=+n+a*3+s*12,this._data={},this._locale=at(),this._bubble()}function qt(e){return e instanceof us}function Ms(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function so(e,t,s){var a=Math.min(e.length,t.length),n=Math.abs(e.length-t.length),i=0,r;for(r=0;r<a;r++)Z(e[r])!==Z(t[r])&&i++;return i+n}function za(e,t){F(e,0,0,function(){var s=this.utcOffset(),a="+";return s<0&&(s=-s,a="-"),a+ze(~~(s/60),2)+t+ze(~~s%60,2)})}za("Z",":");za("ZZ","");L("Z",rs);L("ZZ",rs);ae(["Z","ZZ"],function(e,t,s){s._useUTC=!0,s._tzm=zs(rs,e)});var ao=/([\+\-]|\d\d)/gi;function zs(e,t){var s=(t||"").match(e),a,n,i;return s===null?null:(a=s[s.length-1]||[],n=(a+"").match(ao)||["-",0,0],i=+(n[1]*60)+Z(n[2]),i===0?0:n[0]==="+"?i:-i)}function Gs(e,t){var s,a;return t._isUTC?(s=t.clone(),a=(Re(e)||It(e)?e.valueOf():re(e).valueOf())-s.valueOf(),s._d.setTime(s._d.valueOf()+a),M.updateOffset(s,!1),s):re(e).local()}function Ss(e){return-Math.round(e._d.getTimezoneOffset())}M.updateOffset=function(){};function io(e,t,s){var a=this._offset||0,n;if(!this.isValid())return e!=null?this:NaN;if(e!=null){if(typeof e=="string"){if(e=zs(rs,e),e===null)return this}else Math.abs(e)<16&&!s&&(e=e*60);return!this._isUTC&&t&&(n=Ss(this)),this._offset=e,this._isUTC=!0,n!=null&&this.add(n,"m"),a!==e&&(!t||this._changeInProgress?Za(this,He(e-a,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,M.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?a:Ss(this)}function no(e,t){return e!=null?(typeof e!="string"&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function lo(e){return this.utcOffset(0,e)}function ro(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Ss(this),"m")),this}function oo(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var e=zs(Tl,this._i);e!=null?this.utcOffset(e):this.utcOffset(0,!0)}return this}function uo(e){return this.isValid()?(e=e?re(e).utcOffset():0,(this.utcOffset()-e)%60===0):!1}function co(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function ho(){if(!Te(this._isDSTShifted))return this._isDSTShifted;var e={},t;return js(e,this),e=Ha(e),e._a?(t=e._isUTC?Ge(e._a):re(e._a),this._isDSTShifted=this.isValid()&&so(e._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function mo(){return this.isValid()?!this._isUTC:!1}function vo(){return this.isValid()?this._isUTC:!1}function Ga(){return this.isValid()?this._isUTC&&this._offset===0:!1}var fo=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,po=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function He(e,t){var s=e,a=null,n,i,r;return qt(e)?s={ms:e._milliseconds,d:e._days,M:e._months}:st(e)||!isNaN(+e)?(s={},t?s[t]=+e:s.milliseconds=+e):(a=fo.exec(e))?(n=a[1]==="-"?-1:1,s={y:0,d:Z(a[Ue])*n,h:Z(a[be])*n,m:Z(a[Ie])*n,s:Z(a[Qe])*n,ms:Z(Ms(a[mt]*1e3))*n}):(a=po.exec(e))?(n=a[1]==="-"?-1:1,s={y:ht(a[2],n),M:ht(a[3],n),w:ht(a[4],n),d:ht(a[5],n),h:ht(a[6],n),m:ht(a[7],n),s:ht(a[8],n)}):s==null?s={}:typeof s=="object"&&("from"in s||"to"in s)&&(r=yo(re(s.from),re(s.to)),s={},s.ms=r.milliseconds,s.M=r.months),i=new us(s),qt(e)&&ee(e,"_locale")&&(i._locale=e._locale),qt(e)&&ee(e,"_isValid")&&(i._isValid=e._isValid),i}He.fn=us.prototype;He.invalid=to;function ht(e,t){var s=e&&parseFloat(e.replace(",","."));return(isNaN(s)?0:s)*t}function ua(e,t){var s={};return s.months=t.month()-e.month()+(t.year()-e.year())*12,e.clone().add(s.months,"M").isAfter(t)&&--s.months,s.milliseconds=+t-+e.clone().add(s.months,"M"),s}function yo(e,t){var s;return e.isValid()&&t.isValid()?(t=Gs(t,e),e.isBefore(t)?s=ua(e,t):(s=ua(t,e),s.milliseconds=-s.milliseconds,s.months=-s.months),s):{milliseconds:0,months:0}}function qa(e,t){return function(s,a){var n,i;return a!==null&&!isNaN(+a)&&(Da(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=s,s=a,a=i),n=He(s,a),Za(this,n,e),this}}function Za(e,t,s,a){var n=t._milliseconds,i=Ms(t._days),r=Ms(t._months);e.isValid()&&(a=a??!0,r&&Aa(e,Nt(e,"Month")+r*s),i&&Oa(e,"Date",Nt(e,"Date")+i*s),n&&e._d.setTime(e._d.valueOf()+n*s),a&&M.updateOffset(e,i||r))}var go=qa(1,"add"),wo=qa(-1,"subtract");function Ja(e){return typeof e=="string"||e instanceof String}function _o(e){return Re(e)||It(e)||Ja(e)||st(e)||ko(e)||bo(e)||e===null||e===void 0}function bo(e){var t=vt(e)&&!Es(e),s=!1,a=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],n,i,r=a.length;for(n=0;n<r;n+=1)i=a[n],s=s||ee(e,i);return t&&s}function ko(e){var t=Fe(e),s=!1;return t&&(s=e.filter(function(a){return!st(a)&&Ja(e)}).length===0),t&&s}function Do(e){var t=vt(e)&&!Es(e),s=!1,a=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],n,i;for(n=0;n<a.length;n+=1)i=a[n],s=s||ee(e,i);return t&&s}function xo(e,t){var s=e.diff(t,"days",!0);return s<-6?"sameElse":s<-1?"lastWeek":s<0?"lastDay":s<1?"sameDay":s<2?"nextDay":s<7?"nextWeek":"sameElse"}function Mo(e,t){arguments.length===1&&(arguments[0]?_o(arguments[0])?(e=arguments[0],t=void 0):Do(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var s=e||re(),a=Gs(s,this).startOf("day"),n=M.calendarFormat(this,a)||"sameElse",i=t&&(qe(t[n])?t[n].call(this,s):t[n]);return this.format(i||this.localeData().calendar(n,this,re(s)))}function So(){return new Ft(this)}function To(e,t){var s=Re(e)?e:re(e);return this.isValid()&&s.isValid()?(t=Le(t)||"millisecond",t==="millisecond"?this.valueOf()>s.valueOf():s.valueOf()<this.clone().startOf(t).valueOf()):!1}function Co(e,t){var s=Re(e)?e:re(e);return this.isValid()&&s.isValid()?(t=Le(t)||"millisecond",t==="millisecond"?this.valueOf()<s.valueOf():this.clone().endOf(t).valueOf()<s.valueOf()):!1}function Eo(e,t,s,a){var n=Re(e)?e:re(e),i=Re(t)?t:re(t);return this.isValid()&&n.isValid()&&i.isValid()?(a=a||"()",(a[0]==="("?this.isAfter(n,s):!this.isBefore(n,s))&&(a[1]===")"?this.isBefore(i,s):!this.isAfter(i,s))):!1}function Oo(e,t){var s=Re(e)?e:re(e),a;return this.isValid()&&s.isValid()?(t=Le(t)||"millisecond",t==="millisecond"?this.valueOf()===s.valueOf():(a=s.valueOf(),this.clone().startOf(t).valueOf()<=a&&a<=this.clone().endOf(t).valueOf())):!1}function jo(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function Yo(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function Ao(e,t,s){var a,n,i;if(!this.isValid())return NaN;if(a=Gs(e,this),!a.isValid())return NaN;switch(n=(a.utcOffset()-this.utcOffset())*6e4,t=Le(t),t){case"year":i=Zt(this,a)/12;break;case"month":i=Zt(this,a);break;case"quarter":i=Zt(this,a)/3;break;case"second":i=(this-a)/1e3;break;case"minute":i=(this-a)/6e4;break;case"hour":i=(this-a)/36e5;break;case"day":i=(this-a-n)/864e5;break;case"week":i=(this-a-n)/6048e5;break;default:i=this-a}return s?i:Ve(i)}function Zt(e,t){if(e.date()<t.date())return-Zt(t,e);var s=(t.year()-e.year())*12+(t.month()-e.month()),a=e.clone().add(s,"months"),n,i;return t-a<0?(n=e.clone().add(s-1,"months"),i=(t-a)/(a-n)):(n=e.clone().add(s+1,"months"),i=(t-a)/(n-a)),-(s+i)||0}M.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";M.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function Vo(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function $o(e){if(!this.isValid())return null;var t=e!==!0,s=t?this.clone().utc():this;return s.year()<0||s.year()>9999?Gt(s,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):qe(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",Gt(s,"Z")):Gt(s,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function No(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="",s,a,n,i;return this.isLocal()||(e=this.utcOffset()===0?"moment.utc":"moment.parseZone",t="Z"),s="["+e+'("]',a=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n="-MM-DD[T]HH:mm:ss.SSS",i=t+'[")]',this.format(s+a+n+i)}function Lo(e){e||(e=this.isUtc()?M.defaultFormatUtc:M.defaultFormat);var t=Gt(this,e);return this.localeData().postformat(t)}function Wo(e,t){return this.isValid()&&(Re(e)&&e.isValid()||re(e).isValid())?He({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function Po(e){return this.from(re(),e)}function Io(e,t){return this.isValid()&&(Re(e)&&e.isValid()||re(e).isValid())?He({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function Fo(e){return this.to(re(),e)}function Ka(e){var t;return e===void 0?this._locale._abbr:(t=at(e),t!=null&&(this._locale=t),this)}var Xa=Ne("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===void 0?this.localeData():this.locale(e)});function Qa(){return this._locale}var Qt=1e3,kt=60*Qt,es=60*kt,ei=(365*400+97)*24*es;function Dt(e,t){return(e%t+t)%t}function ti(e,t,s){return e<100&&e>=0?new Date(e+400,t,s)-ei:new Date(e,t,s).valueOf()}function si(e,t,s){return e<100&&e>=0?Date.UTC(e+400,t,s)-ei:Date.UTC(e,t,s)}function Ro(e){var t,s;if(e=Le(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(s=this._isUTC?si:ti,e){case"year":t=s(this.year(),0,1);break;case"quarter":t=s(this.year(),this.month()-this.month()%3,1);break;case"month":t=s(this.year(),this.month(),1);break;case"week":t=s(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=s(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=s(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=Dt(t+(this._isUTC?0:this.utcOffset()*kt),es);break;case"minute":t=this._d.valueOf(),t-=Dt(t,kt);break;case"second":t=this._d.valueOf(),t-=Dt(t,Qt);break}return this._d.setTime(t),M.updateOffset(this,!0),this}function Ho(e){var t,s;if(e=Le(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(s=this._isUTC?si:ti,e){case"year":t=s(this.year()+1,0,1)-1;break;case"quarter":t=s(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=s(this.year(),this.month()+1,1)-1;break;case"week":t=s(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=s(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=s(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=es-Dt(t+(this._isUTC?0:this.utcOffset()*kt),es)-1;break;case"minute":t=this._d.valueOf(),t+=kt-Dt(t,kt)-1;break;case"second":t=this._d.valueOf(),t+=Qt-Dt(t,Qt)-1;break}return this._d.setTime(t),M.updateOffset(this,!0),this}function Uo(){return this._d.valueOf()-(this._offset||0)*6e4}function Bo(){return Math.floor(this.valueOf()/1e3)}function zo(){return new Date(this.valueOf())}function Go(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function qo(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function Zo(){return this.isValid()?this.toISOString():null}function Jo(){return Os(this)}function Ko(){return dt({},z(this))}function Xo(){return z(this).overflow}function Qo(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}F("N",0,0,"eraAbbr");F("NN",0,0,"eraAbbr");F("NNN",0,0,"eraAbbr");F("NNNN",0,0,"eraName");F("NNNNN",0,0,"eraNarrow");F("y",["y",1],"yo","eraYear");F("y",["yy",2],0,"eraYear");F("y",["yyy",3],0,"eraYear");F("y",["yyyy",4],0,"eraYear");L("N",qs);L("NN",qs);L("NNN",qs);L("NNNN",ud);L("NNNNN",cd);ae(["N","NN","NNN","NNNN","NNNNN"],function(e,t,s,a){var n=s._locale.erasParse(e,a,s._strict);n?z(s).era=n:z(s).invalidEra=e});L("y",St);L("yy",St);L("yyy",St);L("yyyy",St);L("yo",hd);ae(["y","yy","yyy","yyyy"],xe);ae(["yo"],function(e,t,s,a){var n;s._locale._eraYearOrdinalRegex&&(n=e.match(s._locale._eraYearOrdinalRegex)),s._locale.eraYearOrdinalParse?t[xe]=s._locale.eraYearOrdinalParse(e,n):t[xe]=parseInt(e,10)});function ed(e,t){var s,a,n,i=this._eras||at("en")._eras;for(s=0,a=i.length;s<a;++s){switch(typeof i[s].since){case"string":n=M(i[s].since).startOf("day"),i[s].since=n.valueOf();break}switch(typeof i[s].until){case"undefined":i[s].until=1/0;break;case"string":n=M(i[s].until).startOf("day").valueOf(),i[s].until=n.valueOf();break}}return i}function td(e,t,s){var a,n,i=this.eras(),r,o,h;for(e=e.toUpperCase(),a=0,n=i.length;a<n;++a)if(r=i[a].name.toUpperCase(),o=i[a].abbr.toUpperCase(),h=i[a].narrow.toUpperCase(),s)switch(t){case"N":case"NN":case"NNN":if(o===e)return i[a];break;case"NNNN":if(r===e)return i[a];break;case"NNNNN":if(h===e)return i[a];break}else if([r,o,h].indexOf(e)>=0)return i[a]}function sd(e,t){var s=e.since<=e.until?1:-1;return t===void 0?M(e.since).year():M(e.since).year()+(t-e.offset)*s}function ad(){var e,t,s,a=this.localeData().eras();for(e=0,t=a.length;e<t;++e)if(s=this.clone().startOf("day").valueOf(),a[e].since<=s&&s<=a[e].until||a[e].until<=s&&s<=a[e].since)return a[e].name;return""}function id(){var e,t,s,a=this.localeData().eras();for(e=0,t=a.length;e<t;++e)if(s=this.clone().startOf("day").valueOf(),a[e].since<=s&&s<=a[e].until||a[e].until<=s&&s<=a[e].since)return a[e].narrow;return""}function nd(){var e,t,s,a=this.localeData().eras();for(e=0,t=a.length;e<t;++e)if(s=this.clone().startOf("day").valueOf(),a[e].since<=s&&s<=a[e].until||a[e].until<=s&&s<=a[e].since)return a[e].abbr;return""}function ld(){var e,t,s,a,n=this.localeData().eras();for(e=0,t=n.length;e<t;++e)if(s=n[e].since<=n[e].until?1:-1,a=this.clone().startOf("day").valueOf(),n[e].since<=a&&a<=n[e].until||n[e].until<=a&&a<=n[e].since)return(this.year()-M(n[e].since).year())*s+n[e].offset;return this.year()}function rd(e){return ee(this,"_erasNameRegex")||Zs.call(this),e?this._erasNameRegex:this._erasRegex}function od(e){return ee(this,"_erasAbbrRegex")||Zs.call(this),e?this._erasAbbrRegex:this._erasRegex}function dd(e){return ee(this,"_erasNarrowRegex")||Zs.call(this),e?this._erasNarrowRegex:this._erasRegex}function qs(e,t){return t.erasAbbrRegex(e)}function ud(e,t){return t.erasNameRegex(e)}function cd(e,t){return t.erasNarrowRegex(e)}function hd(e,t){return t._eraYearOrdinalRegex||St}function Zs(){var e=[],t=[],s=[],a=[],n,i,r,o,h,d=this.eras();for(n=0,i=d.length;n<i;++n)r=et(d[n].name),o=et(d[n].abbr),h=et(d[n].narrow),t.push(r),e.push(o),s.push(h),a.push(r),a.push(o),a.push(h);this._erasRegex=new RegExp("^("+a.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+t.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+s.join("|")+")","i")}F(0,["gg",2],0,function(){return this.weekYear()%100});F(0,["GG",2],0,function(){return this.isoWeekYear()%100});function cs(e,t){F(0,[e,e.length],0,t)}cs("gggg","weekYear");cs("ggggg","weekYear");cs("GGGG","isoWeekYear");cs("GGGGG","isoWeekYear");L("G",ls);L("g",ls);L("GG",oe,Ye);L("gg",oe,Ye);L("GGGG",Ns,$s);L("gggg",Ns,$s);L("GGGGG",ns,as);L("ggggg",ns,as);Ht(["gggg","ggggg","GGGG","GGGGG"],function(e,t,s,a){t[a.substr(0,2)]=Z(e)});Ht(["gg","GG"],function(e,t,s,a){t[a]=M.parseTwoDigitYear(e)});function md(e){return ai.call(this,e,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function vd(e){return ai.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function fd(){return tt(this.year(),1,4)}function pd(){return tt(this.isoWeekYear(),1,4)}function yd(){var e=this.localeData()._week;return tt(this.year(),e.dow,e.doy)}function gd(){var e=this.localeData()._week;return tt(this.weekYear(),e.dow,e.doy)}function ai(e,t,s,a,n){var i;return e==null?Wt(this,a,n).year:(i=tt(e,a,n),t>i&&(t=i),wd.call(this,e,t,s,a,n))}function wd(e,t,s,a,n){var i=Na(e,t,s,a,n),r=Lt(i.year,0,i.dayOfYear);return this.year(r.getUTCFullYear()),this.month(r.getUTCMonth()),this.date(r.getUTCDate()),this}F("Q",0,"Qo","quarter");L("Q",Ma);ae("Q",function(e,t){t[Xe]=(Z(e)-1)*3});function _d(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}F("D",["DD",2],"Do","date");L("D",oe,Tt);L("DD",oe,Ye);L("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient});ae(["D","DD"],Ue);ae("Do",function(e,t){t[Ue]=Z(e.match(oe)[0])});var ii=Ct("Date",!0);F("DDD",["DDDD",3],"DDDo","dayOfYear");L("DDD",is);L("DDDD",Sa);ae(["DDD","DDDD"],function(e,t,s){s._dayOfYear=Z(e)});function bd(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}F("m",["mm",2],0,"minute");L("m",oe,Ls);L("mm",oe,Ye);ae(["m","mm"],Ie);var kd=Ct("Minutes",!1);F("s",["ss",2],0,"second");L("s",oe,Ls);L("ss",oe,Ye);ae(["s","ss"],Qe);var Dd=Ct("Seconds",!1);F("S",0,0,function(){return~~(this.millisecond()/100)});F(0,["SS",2],0,function(){return~~(this.millisecond()/10)});F(0,["SSS",3],0,"millisecond");F(0,["SSSS",4],0,function(){return this.millisecond()*10});F(0,["SSSSS",5],0,function(){return this.millisecond()*100});F(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});F(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});F(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});F(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});L("S",is,Ma);L("SS",is,Ye);L("SSS",is,Sa);var ut,ni;for(ut="SSSS";ut.length<=9;ut+="S")L(ut,St);function xd(e,t){t[mt]=Z(("0."+e)*1e3)}for(ut="S";ut.length<=9;ut+="S")ae(ut,xd);ni=Ct("Milliseconds",!1);F("z",0,0,"zoneAbbr");F("zz",0,0,"zoneName");function Md(){return this._isUTC?"UTC":""}function Sd(){return this._isUTC?"Coordinated Universal Time":""}var T=Ft.prototype;T.add=go;T.calendar=Mo;T.clone=So;T.diff=Ao;T.endOf=Ho;T.format=Lo;T.from=Wo;T.fromNow=Po;T.to=Io;T.toNow=Fo;T.get=$l;T.invalidAt=Xo;T.isAfter=To;T.isBefore=Co;T.isBetween=Eo;T.isSame=Oo;T.isSameOrAfter=jo;T.isSameOrBefore=Yo;T.isValid=Jo;T.lang=Xa;T.locale=Ka;T.localeData=Qa;T.max=Zr;T.min=qr;T.parsingFlags=Ko;T.set=Nl;T.startOf=Ro;T.subtract=wo;T.toArray=Go;T.toObject=qo;T.toDate=zo;T.toISOString=$o;T.inspect=No;typeof Symbol<"u"&&Symbol.for!=null&&(T[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});T.toJSON=Zo;T.toString=Vo;T.unix=Bo;T.valueOf=Uo;T.creationData=Qo;T.eraName=ad;T.eraNarrow=id;T.eraAbbr=nd;T.eraYear=ld;T.year=Ea;T.isLeapYear=Vl;T.weekYear=md;T.isoWeekYear=vd;T.quarter=T.quarters=_d;T.month=Va;T.daysInMonth=Bl;T.week=T.weeks=Ql;T.isoWeek=T.isoWeeks=er;T.weeksInYear=yd;T.weeksInWeekYear=gd;T.isoWeeksInYear=fd;T.isoWeeksInISOWeekYear=pd;T.date=ii;T.day=T.days=mr;T.weekday=vr;T.isoWeekday=fr;T.dayOfYear=bd;T.hour=T.hours=kr;T.minute=T.minutes=kd;T.second=T.seconds=Dd;T.millisecond=T.milliseconds=ni;T.utcOffset=io;T.utc=lo;T.local=ro;T.parseZone=oo;T.hasAlignedHourOffset=uo;T.isDST=co;T.isLocal=mo;T.isUtcOffset=vo;T.isUtc=Ga;T.isUTC=Ga;T.zoneAbbr=Md;T.zoneName=Sd;T.dates=Ne("dates accessor is deprecated. Use date instead.",ii);T.months=Ne("months accessor is deprecated. Use month instead",Va);T.years=Ne("years accessor is deprecated. Use year instead",Ea);T.zone=Ne("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",no);T.isDSTShifted=Ne("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",ho);function Td(e){return re(e*1e3)}function Cd(){return re.apply(null,arguments).parseZone()}function li(e){return e}var te=Ys.prototype;te.calendar=hl;te.longDateFormat=pl;te.invalidDate=gl;te.ordinal=bl;te.preparse=li;te.postformat=li;te.relativeTime=Dl;te.pastFuture=xl;te.set=ul;te.eras=ed;te.erasParse=td;te.erasConvertYear=sd;te.erasAbbrRegex=od;te.erasNameRegex=rd;te.erasNarrowRegex=dd;te.months=Fl;te.monthsShort=Rl;te.monthsParse=Ul;te.monthsRegex=Gl;te.monthsShortRegex=zl;te.week=Zl;te.firstDayOfYear=Xl;te.firstDayOfWeek=Kl;te.weekdays=or;te.weekdaysMin=ur;te.weekdaysShort=dr;te.weekdaysParse=hr;te.weekdaysRegex=pr;te.weekdaysShortRegex=yr;te.weekdaysMinRegex=gr;te.isPM=_r;te.meridiem=Dr;function ts(e,t,s,a){var n=at(),i=Ge().set(a,t);return n[s](i,e)}function ri(e,t,s){if(st(e)&&(t=e,e=void 0),e=e||"",t!=null)return ts(e,t,s,"month");var a,n=[];for(a=0;a<12;a++)n[a]=ts(e,a,s,"month");return n}function Js(e,t,s,a){typeof e=="boolean"?(st(t)&&(s=t,t=void 0),t=t||""):(t=e,s=t,e=!1,st(t)&&(s=t,t=void 0),t=t||"");var n=at(),i=e?n._week.dow:0,r,o=[];if(s!=null)return ts(t,(s+i)%7,a,"day");for(r=0;r<7;r++)o[r]=ts(t,(r+i)%7,a,"day");return o}function Ed(e,t){return ri(e,t,"months")}function Od(e,t){return ri(e,t,"monthsShort")}function jd(e,t,s){return Js(e,t,s,"weekdays")}function Yd(e,t,s){return Js(e,t,s,"weekdaysShort")}function Ad(e,t,s){return Js(e,t,s,"weekdaysMin")}ct("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,s=Z(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+s}});M.lang=Ne("moment.lang is deprecated. Use moment.locale instead.",ct);M.langData=Ne("moment.langData is deprecated. Use moment.localeData instead.",at);var Ze=Math.abs;function Vd(){var e=this._data;return this._milliseconds=Ze(this._milliseconds),this._days=Ze(this._days),this._months=Ze(this._months),e.milliseconds=Ze(e.milliseconds),e.seconds=Ze(e.seconds),e.minutes=Ze(e.minutes),e.hours=Ze(e.hours),e.months=Ze(e.months),e.years=Ze(e.years),this}function oi(e,t,s,a){var n=He(t,s);return e._milliseconds+=a*n._milliseconds,e._days+=a*n._days,e._months+=a*n._months,e._bubble()}function $d(e,t){return oi(this,e,t,1)}function Nd(e,t){return oi(this,e,t,-1)}function ca(e){return e<0?Math.floor(e):Math.ceil(e)}function Ld(){var e=this._milliseconds,t=this._days,s=this._months,a=this._data,n,i,r,o,h;return e>=0&&t>=0&&s>=0||e<=0&&t<=0&&s<=0||(e+=ca(Ts(s)+t)*864e5,t=0,s=0),a.milliseconds=e%1e3,n=Ve(e/1e3),a.seconds=n%60,i=Ve(n/60),a.minutes=i%60,r=Ve(i/60),a.hours=r%24,t+=Ve(r/24),h=Ve(di(t)),s+=h,t-=ca(Ts(h)),o=Ve(s/12),s%=12,a.days=t,a.months=s,a.years=o,this}function di(e){return e*4800/146097}function Ts(e){return e*146097/4800}function Wd(e){if(!this.isValid())return NaN;var t,s,a=this._milliseconds;if(e=Le(e),e==="month"||e==="quarter"||e==="year")switch(t=this._days+a/864e5,s=this._months+di(t),e){case"month":return s;case"quarter":return s/3;case"year":return s/12}else switch(t=this._days+Math.round(Ts(this._months)),e){case"week":return t/7+a/6048e5;case"day":return t+a/864e5;case"hour":return t*24+a/36e5;case"minute":return t*1440+a/6e4;case"second":return t*86400+a/1e3;case"millisecond":return Math.floor(t*864e5)+a;default:throw new Error("Unknown unit "+e)}}function it(e){return function(){return this.as(e)}}var ui=it("ms"),Pd=it("s"),Id=it("m"),Fd=it("h"),Rd=it("d"),Hd=it("w"),Ud=it("M"),Bd=it("Q"),zd=it("y"),Gd=ui;function qd(){return He(this)}function Zd(e){return e=Le(e),this.isValid()?this[e+"s"]():NaN}function pt(e){return function(){return this.isValid()?this._data[e]:NaN}}var Jd=pt("milliseconds"),Kd=pt("seconds"),Xd=pt("minutes"),Qd=pt("hours"),eu=pt("days"),tu=pt("months"),su=pt("years");function au(){return Ve(this.days()/7)}var Je=Math.round,_t={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function iu(e,t,s,a,n){return n.relativeTime(t||1,!!s,e,a)}function nu(e,t,s,a){var n=He(e).abs(),i=Je(n.as("s")),r=Je(n.as("m")),o=Je(n.as("h")),h=Je(n.as("d")),d=Je(n.as("M")),v=Je(n.as("w")),g=Je(n.as("y")),f=i<=s.ss&&["s",i]||i<s.s&&["ss",i]||r<=1&&["m"]||r<s.m&&["mm",r]||o<=1&&["h"]||o<s.h&&["hh",o]||h<=1&&["d"]||h<s.d&&["dd",h];return s.w!=null&&(f=f||v<=1&&["w"]||v<s.w&&["ww",v]),f=f||d<=1&&["M"]||d<s.M&&["MM",d]||g<=1&&["y"]||["yy",g],f[2]=t,f[3]=+e>0,f[4]=a,iu.apply(null,f)}function lu(e){return e===void 0?Je:typeof e=="function"?(Je=e,!0):!1}function ru(e,t){return _t[e]===void 0?!1:t===void 0?_t[e]:(_t[e]=t,e==="s"&&(_t.ss=t-1),!0)}function ou(e,t){if(!this.isValid())return this.localeData().invalidDate();var s=!1,a=_t,n,i;return typeof e=="object"&&(t=e,e=!1),typeof e=="boolean"&&(s=e),typeof t=="object"&&(a=Object.assign({},_t,t),t.s!=null&&t.ss==null&&(a.ss=t.s-1)),n=this.localeData(),i=nu(this,!s,a,n),s&&(i=n.pastFuture(+this,i)),n.postformat(i)}var ws=Math.abs;function gt(e){return(e>0)-(e<0)||+e}function hs(){if(!this.isValid())return this.localeData().invalidDate();var e=ws(this._milliseconds)/1e3,t=ws(this._days),s=ws(this._months),a,n,i,r,o=this.asSeconds(),h,d,v,g;return o?(a=Ve(e/60),n=Ve(a/60),e%=60,a%=60,i=Ve(s/12),s%=12,r=e?e.toFixed(3).replace(/\.?0+$/,""):"",h=o<0?"-":"",d=gt(this._months)!==gt(o)?"-":"",v=gt(this._days)!==gt(o)?"-":"",g=gt(this._milliseconds)!==gt(o)?"-":"",h+"P"+(i?d+i+"Y":"")+(s?d+s+"M":"")+(t?v+t+"D":"")+(n||a||e?"T":"")+(n?g+n+"H":"")+(a?g+a+"M":"")+(e?g+r+"S":"")):"P0D"}var X=us.prototype;X.isValid=eo;X.abs=Vd;X.add=$d;X.subtract=Nd;X.as=Wd;X.asMilliseconds=ui;X.asSeconds=Pd;X.asMinutes=Id;X.asHours=Fd;X.asDays=Rd;X.asWeeks=Hd;X.asMonths=Ud;X.asQuarters=Bd;X.asYears=zd;X.valueOf=Gd;X._bubble=Ld;X.clone=qd;X.get=Zd;X.milliseconds=Jd;X.seconds=Kd;X.minutes=Xd;X.hours=Qd;X.days=eu;X.weeks=au;X.months=tu;X.years=su;X.humanize=ou;X.toISOString=hs;X.toString=hs;X.toJSON=hs;X.locale=Ka;X.localeData=Qa;X.toIsoString=Ne("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",hs);X.lang=Xa;F("X",0,0,"unix");F("x",0,0,"valueOf");L("x",ls);L("X",Cl);ae("X",function(e,t,s){s._d=new Date(parseFloat(e)*1e3)});ae("x",function(e,t,s){s._d=new Date(Z(e))});//! moment.js
M.version="2.30.1";ol(re);M.fn=T;M.min=Jr;M.max=Kr;M.now=Xr;M.utc=Ge;M.unix=Td;M.months=Ed;M.isDate=It;M.locale=ct;M.invalid=ss;M.duration=He;M.isMoment=Re;M.weekdays=jd;M.parseZone=Cd;M.localeData=at;M.isDuration=qt;M.monthsShort=Od;M.weekdaysMin=Ad;M.defineLocale=Rs;M.updateLocale=Tr;M.locales=Cr;M.weekdaysShort=Yd;M.normalizeUnits=Le;M.relativeTimeRounding=lu;M.relativeTimeThreshold=ru;M.calendarFormat=xo;M.prototype=T;M.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};const du={class:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow"},uu={class:"flex justify-between items-center mb-4"},cu={class:"flex gap-3"},hu={class:"flex rounded-md shadow-sm mr-3"},mu={key:0,class:"mb-4 bg-gray-50 p-4 rounded-lg"},vu={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},fu=["value"],pu={class:"mt-1 relative rounded-md shadow-sm"},yu={key:1,class:"text-center text-gray-600 text-sm animate-pulse py-4"},gu={key:2,class:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md"},wu={key:3},_u={key:0,class:"space-y-4"},bu={key:0,class:"flex justify-between"},ku={class:"flex-grow"},Du={class:"text-sm text-red-500 italic"},xu={class:"flex items-center mt-1"},Mu={class:"text-xs text-gray-500"},Su={key:1},Tu={class:"flex-grow"},Cu={class:"flex justify-between items-center mb-3"},Eu={class:"text-sm text-gray-600 bg-blue-100 px-2 py-1 rounded-full"},Ou={class:"mb-3"},ju={class:"text-sm text-gray-700 ml-6"},Yu={class:"mb-3"},Au={class:"text-sm text-gray-700 ml-6"},Vu={class:"mb-2"},$u={class:"text-sm text-gray-700 ml-6"},Nu={class:"flex items-center mt-3 pt-2 border-t border-blue-200"},Lu={class:"text-xs text-gray-500"},Wu={key:1,class:"text-gray-400 text-sm"},Pu={key:4,class:"mt-4"},Iu={class:"flex justify-between items-center mb-6"},Fu={class:"text-lg font-medium text-gray-900"},Ru=["innerHTML"],Hu=["innerHTML"],Uu={key:0,class:"mt-1 text-xs p-1 rounded bg-red-50 border-l-2 border-red-500 text-red-700"},Bu={class:"mt-6 bg-white rounded-lg shadow p-4"},zu={key:0},Gu={class:"font-medium text-gray-800 mb-2"},qu={class:"font-medium text-blue-800"},Zu={class:"text-sm text-gray-600 mt-1"},Ju={key:1,class:"text-gray-500 text-sm"},Ku={__name:"DailyStandups",props:{projectId:{type:Number,required:!0},users:{type:Array,default:()=>[]}},emits:["standupAdded"],setup(e,{emit:t}){const s=e,a=Y("list"),n=Y(!1),i=Y(!1),r=Y(""),o=Y([]),h=Y(""),d=rt({startDate:"",endDate:"",search:"",userId:""}),v=x=>{const k=M(x);return k.isValid()?{start:k.clone().startOf("month").format("YYYY-MM-DD"),end:k.clone().endOf("month").format("YYYY-MM-DD")}:(console.warn("getMonthRange received an invalid input, defaulting to current date:",x),{start:M().startOf("month").format("YYYY-MM-DD"),end:M().endOf("month").format("YYYY-MM-DD")})};let g=null;const f=()=>{clearTimeout(g),g=setTimeout(()=>{E()},500)},S=async()=>{i.value=!0,r.value="";try{const x=new URLSearchParams;d.startDate&&x.append("start_date",d.startDate),d.endDate&&x.append("end_date",d.endDate),d.search&&x.append("search",d.search),d.userId&&x.append("user_id",String(d.userId));const k=x.toString(),N=`/api/projects/${s.projectId}/sections/notes?type=standup${k?`&${k}`:""}`,de=await window.axios.get(N);o.value=de.data.filter(ue=>ue.type==="standup")}catch(x){console.error("Error fetching project standups:",x),r.value="Failed to load standups. Please try again."}finally{i.value=!1}},E=()=>{S()},P=()=>{d.search="",d.userId="",d.startDate="",d.endDate="",S()},Q=()=>{h.value=M(h.value).subtract(1,"month").format("YYYY-MM-DD")},C=()=>{h.value=M(h.value).add(1,"month").format("YYYY-MM-DD")};xt(()=>h.value,x=>{if(a.value==="calendar"&&x){const k=v(x);d.startDate=k.start,d.endDate=k.end,S()}}),xt(()=>a.value,x=>{x==="calendar"?(d.search="",d.userId="",h.value=v(new Date).start):(d.startDate="",d.endDate="",S())});const _=ge(()=>(o.value||[]).map(x=>{var de;if(!(x!=null&&x.created_at))return null;const k=M(x.created_at);if(!k.isValid())return null;const N=q(x.content);return{start:k.format("YYYY-MM-DD HH:mm"),end:k.format("YYYY-MM-DD HH:mm"),title:`${((de=x.user)==null?void 0:de.name)||"Unknown"} - Standup`,content:`Yesterday: ${N.yesterday}
Today: ${N.today}
Blockers: ${N.blockers}`,class:"standup-event",standupData:x}}).filter(Boolean));ft(()=>{S()});const A=ge(()=>{if(!o.value)return[];let x=[...o.value];if(d.startDate&&(x=x.filter(k=>k.created_at&&M(k.created_at).isSameOrAfter(d.startDate,"day"))),d.endDate&&(x=x.filter(k=>k.created_at&&M(k.created_at).isSameOrBefore(d.endDate,"day"))),d.userId&&(x=x.filter(k=>k.user_id===parseInt(d.userId))),d.search){const k=d.search.toLowerCase();x=x.filter(N=>N.content&&N.content!=="[Encrypted content could not be decrypted]"&&N.content.toLowerCase().includes(k))}return x.sort((k,N)=>M(N.created_at).valueOf()-M(k.created_at).valueOf())}),R=x=>{const k=M(x).day();return k>=1&&k<=5},le=x=>M(x).isBefore(M(),"day"),ke=(x,k)=>M(x).isSame(k,"day"),q=x=>{var Ce,We,nt,j;if(!x||typeof x!="string"||x==="[Encrypted content could not be decrypted]"||x.trim()==="")return{yesterday:"N/A",today:"N/A",blockers:"N/A",date:"N/A"};const k=((Ce=x.match(/\*\*Yesterday:\*\* ([^\n]+)/))==null?void 0:Ce[1].trim())||"Nothing",N=((We=x.match(/\*\*Today:\*\* ([^\n]+)/))==null?void 0:We[1].trim())||"Nothing",de=((nt=x.match(/\*\*Blockers:\*\* ([^\n]+)/))==null?void 0:nt[1].trim())||"None",ue=((j=x.match(/\*\*Daily Standup - ([^*]+)\*\*/))==null?void 0:j[1].trim())||M().format("L");return{yesterday:k,today:N,blockers:de,date:ue}},O=ge(()=>{const x={};return(o.value||[]).forEach(k=>{if(!(k!=null&&k.created_at))return;const N=M(k.created_at).format("YYYY-MM-DD");x[N]||(x[N]=[]),x[N].push(k)}),x});return(x,k)=>(u(),c("div",du,[l("div",uu,[k[11]||(k[11]=l("h4",{class:"text-lg font-semibold text-gray-900"},"Daily Standups",-1)),l("div",cu,[l("div",hu,[l("button",{type:"button",onClick:k[0]||(k[0]=N=>a.value="list"),class:K([a.value==="list"?"bg-indigo-100 text-indigo-700":"bg-white text-gray-700 hover:text-gray-500","px-4 py-2 text-sm font-medium rounded-l-md border border-gray-300 focus:z-10 focus:outline-none focus:ring-1 focus:ring-indigo-500"])},k[8]||(k[8]=[l("span",{class:"flex items-center"},[l("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 10h16M4 14h16M4 18h16"})]),W(" List ")],-1)]),2),l("button",{type:"button",onClick:k[1]||(k[1]=N=>a.value="calendar"),class:K([a.value==="calendar"?"bg-indigo-100 text-indigo-700":"bg-white text-gray-700 hover:text-gray-500","px-4 py-2 text-sm font-medium rounded-r-md border border-gray-300 focus:z-10 focus:outline-none focus:ring-1 focus:ring-indigo-500"])},k[9]||(k[9]=[l("span",{class:"flex items-center"},[l("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})]),W(" Calendar ")],-1)]),2)]),p(_e,{class:"bg-blue-600 hover:bg-blue-700 transition-colors",onClick:k[2]||(k[2]=N=>n.value=!0)},{default:V(()=>k[10]||(k[10]=[W(" Submit Standup ",-1)])),_:1,__:[10]})])]),a.value==="list"?(u(),c("div",mu,[l("div",vu,[l("div",null,[k[12]||(k[12]=l("label",{for:"standupStartDate",class:"block text-sm font-medium text-gray-700 mb-1"},"From Date",-1)),ne(l("input",{type:"date",id:"standupStartDate","onUpdate:modelValue":k[3]||(k[3]=N=>d.startDate=N),class:"mt-1 block w-full border-gray-300 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",onChange:E},null,544),[[Be,d.startDate]])]),l("div",null,[k[13]||(k[13]=l("label",{for:"standupEndDate",class:"block text-sm font-medium text-gray-700 mb-1"},"To Date",-1)),ne(l("input",{type:"date",id:"standupEndDate","onUpdate:modelValue":k[4]||(k[4]=N=>d.endDate=N),class:"mt-1 block w-full border-gray-300 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",onChange:E},null,544),[[Be,d.endDate]])]),l("div",null,[k[15]||(k[15]=l("label",{for:"standupUserFilter",class:"block text-sm font-medium text-gray-700 mb-1"},"User",-1)),ne(l("select",{id:"standupUserFilter","onUpdate:modelValue":k[5]||(k[5]=N=>d.userId=N),class:"mt-1 block w-full border-gray-300 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",onChange:E},[k[14]||(k[14]=l("option",{value:""},"All Users",-1)),(u(!0),c(G,null,J(s.users,N=>(u(),c("option",{key:N.id,value:N.id},y(N.name),9,fu))),128))],544),[[Oe,d.userId]])]),l("div",null,[k[17]||(k[17]=l("label",{for:"standupSearchFilter",class:"block text-sm font-medium text-gray-700 mb-1"},"Search Content",-1)),l("div",pu,[ne(l("input",{type:"text",id:"standupSearchFilter","onUpdate:modelValue":k[6]||(k[6]=N=>d.search=N),class:"focus:ring-indigo-500 focus:border-indigo-500 block w-full pr-10 sm:text-sm border-gray-300 rounded-md",placeholder:"Search in standup content...",onInput:f},null,544),[[Be,d.search]]),k[16]||(k[16]=l("div",{class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},[l("svg",{class:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[l("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})])],-1))])])]),l("div",{class:"mt-3 flex justify-end"},[l("button",{type:"button",class:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:P}," Reset Filters ")])])):D("",!0),i.value?(u(),c("div",yu,"Loading standups...")):r.value?(u(),c("div",gu,y(r.value),1)):a.value==="list"?(u(),c("div",wu,[A.value.length?(u(),c("div",_u,[(u(!0),c(G,null,J(A.value,N=>{var de,ue;return u(),c("div",{key:N.id,class:"p-4 bg-blue-50 rounded-md shadow-sm hover:bg-blue-100 transition-colors border-l-4 border-blue-500"},[N.content==="[Encrypted content could not be decrypted]"?(u(),c("div",bu,[l("div",ku,[l("p",Du,[W(y(N.content),1),k[18]||(k[18]=l("span",{class:"text-xs text-red-400 block mt-1"},"(There was an issue decrypting this standup. Please contact an administrator.)",-1))]),l("div",xu,[l("p",Mu,"Submitted by "+y(((de=N.user)==null?void 0:de.name)||"Unknown")+" on "+y(ve(M)(N.created_at).format("L")),1)])])])):(u(),c("div",Su,[l("div",Tu,[l("div",Cu,[k[19]||(k[19]=l("h3",{class:"text-md font-bold text-gray-800"},"Daily Standup",-1)),l("span",Eu,y(q(N.content).date),1)]),l("div",Ou,[k[20]||(k[20]=l("div",{class:"flex items-center mb-1"},[l("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 text-blue-600 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})]),l("span",{class:"font-semibold text-sm text-gray-700"},"Yesterday:")],-1)),l("p",ju,y(q(N.content).yesterday),1)]),l("div",Yu,[k[21]||(k[21]=l("div",{class:"flex items-center mb-1"},[l("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 text-green-600 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})]),l("span",{class:"font-semibold text-sm text-gray-700"},"Today:")],-1)),l("p",Au,y(q(N.content).today),1)]),l("div",Vu,[k[22]||(k[22]=l("div",{class:"flex items-center mb-1"},[l("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 text-red-600 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})]),l("span",{class:"font-semibold text-sm text-gray-700"},"Blockers:")],-1)),l("p",$u,y(q(N.content).blockers),1)]),l("div",Nu,[l("p",Lu,"Submitted by "+y(((ue=N.user)==null?void 0:ue.name)||"Unknown")+" on "+y(ve(M)(N.created_at).format("L")),1)])])]))])}),128))])):(u(),c("p",Wu,"No daily standups found for the selected criteria."))])):a.value==="calendar"?(u(),c("div",Pu,[l("div",Iu,[l("button",{onClick:Q,class:"p-2 rounded-full bg-gray-100 hover:bg-gray-200 transition-colors"},k[23]||(k[23]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])),l("h3",Fu,y(h.value?ve(M)(h.value).format("MMMM YYYY"):"Loading..."),1),l("button",{onClick:C,class:"p-2 rounded-full bg-gray-100 hover:bg-gray-200 transition-colors"},k[24]||(k[24]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)]))]),p(ve(rl),{class:"vuecal--blue-theme","active-view":"month",events:_.value,"selected-date":h.value,"hide-weekends":"","hide-title-bar":"","disable-views":["week","day","years","year"],twelveHour:!0,"time-from":480,"time-to":1200,"time-step":30,"events-on-month-view":"short"},{event:V(({event:N})=>[l("div",{class:"vuecal__event-title",innerHTML:N.title},null,8,Ru),l("div",{class:"vuecal__event-content",innerHTML:N.content},null,8,Hu)]),"cell-content":V(({view:N,date:de})=>[N.id==="month"?(u(),c(G,{key:0},[de&&R(de)&&le(de)&&!_.value.some(ue=>ke(ue.start,de))?(u(),c("div",Uu," No standups ")):D("",!0)],64)):D("",!0)]),_:1},8,["events","selected-date"]),k[26]||(k[26]=ma('<div class="mt-4 flex items-center space-x-4 text-sm"><div class="flex items-center"><span class="inline-block w-3 h-3 bg-blue-50 border-l-2 border-blue-500 mr-1"></span><span>Standup submitted</span></div><div class="flex items-center"><span class="inline-block w-3 h-3 bg-red-50 border-l-2 border-red-500 mr-1"></span><span>Missing standup</span></div></div>',1)),l("div",Bu,[k[25]||(k[25]=l("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Standups Outside Current Month View",-1)),Object.entries(O.value).some(([N])=>!ve(M)(N).isSame(h.value,"month"))?(u(),c("div",zu,[(u(!0),c(G,null,J(Object.entries(O.value).filter(([N])=>!ve(M)(N).isSame(h.value,"month")).sort((N,de)=>ve(M)(N[0]).valueOf()-ve(M)(de[0]).valueOf()),([N,de])=>(u(),c("div",{key:N,class:"mb-4"},[l("div",Gu,y(ve(M)(N).format("dddd, MMMM Do YYYY")),1),(u(!0),c(G,null,J(de,ue=>{var Ce;return u(),c("div",{key:ue.id,class:"p-2 mb-2 rounded bg-blue-50 border-l-2 border-blue-500"},[l("div",qu,y(((Ce=ue.user)==null?void 0:Ce.name)||"Unknown"),1),l("div",Zu,y(ve(M)(ue.created_at).format("LT")),1)])}),128))]))),128))])):(u(),c("div",Ju,"No standups outside the current month view."))])])):D("",!0),p(ya,{show:n.value,onClose:k[7]||(k[7]=N=>n.value=!1),onStandupAdded:S,projectId:e.projectId},null,8,["show","projectId"])]))}},Xu={class:"p-6"},Qu={class:"mt-6 space-y-6"},ec={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},tc=["value"],sc={class:"flex items-center"},ac={class:"flex items-center"},ic={key:0,class:"text-sm text-red-600"},nc={class:"flex justify-end mt-6 space-x-3"},lc={__name:"MeetingModal",props:{show:{type:Boolean,default:!1},projectId:{type:Number,required:!0},projectUsers:{type:Array,default:()=>[]}},emits:["close","saved"],setup(e,{emit:t}){const s=e,a=t,n=()=>Intl.DateTimeFormat().resolvedOptions().timeZone,i=Y(["Africa/Cairo","Africa/Johannesburg","Africa/Lagos","America/Anchorage","America/Bogota","America/Chicago","America/Denver","America/Los_Angeles","America/Mexico_City","America/New_York","America/Phoenix","America/Sao_Paulo","America/Toronto","America/Vancouver","Asia/Dubai","Asia/Hong_Kong","Asia/Jerusalem","Asia/Kolkata","Asia/Seoul","Asia/Shanghai","Asia/Singapore","Asia/Tokyo","Australia/Melbourne","Australia/Perth","Australia/Sydney","Europe/Amsterdam","Europe/Berlin","Europe/Dublin","Europe/Istanbul","Europe/London","Europe/Madrid","Europe/Moscow","Europe/Paris","Europe/Rome","Pacific/Auckland","Pacific/Honolulu","UTC"]),r=Y(n()),o=Y({summary:"",description:"",start_datetime:"",end_datetime:"",attendee_user_ids:[],location:"",with_google_meet:!0,timezone:r.value,enable_recording:!1}),h=Y({}),d=Y(!1),v=Y("");xt(()=>s.show,C=>{C||S()});const g=C=>{const _=new Date(C),A=_.getFullYear(),R=String(_.getMonth()+1).padStart(2,"0"),le=String(_.getDate()).padStart(2,"0"),ke=String(_.getHours()).padStart(2,"0"),q=String(_.getMinutes()).padStart(2,"0");return`${A}-${R}-${le}T${ke}:${q}`},f=()=>{const C=new Date,_=new Date(C.getTime()+3600*1e3),A=new Date(C.getTime()+7200*1e3);o.value.start_datetime=g(_),o.value.end_datetime=g(A)},S=()=>{o.value={summary:"",description:"",start_datetime:"",end_datetime:"",attendee_user_ids:[],location:"",with_google_meet:!0,timezone:r.value,enable_recording:!1},f(),h.value={},v.value="",d.value=!1};f();const E=C=>C?C.replace("T"," ")+":00":"",P=async()=>{d.value=!0,h.value={},v.value="";try{const C={...o.value};C.start_datetime=E(C.start_datetime),C.end_datetime=E(C.end_datetime);const _=await window.axios.post(`/api/projects/${s.projectId}/meetings`,C);a("saved",_.data),a("close")}catch(C){d.value=!1,C.response?C.response.status===422?h.value=C.response.data.errors:v.value=C.response.data.message||"An error occurred while creating the meeting.":(v.value="An unexpected error occurred. Please try again.",console.error("Error creating meeting:",C))}},Q=()=>{a("close")};return(C,_)=>(u(),ye(je,{show:e.show,onClose:Q,"max-width":"2xl"},{default:V(()=>[l("div",Xu,[_[15]||(_[15]=l("h2",{class:"text-lg font-medium text-gray-900"}," Schedule a Meeting ",-1)),l("div",Qu,[l("div",null,[p(B,{for:"summary",value:"Meeting Title"}),p(pe,{id:"summary",modelValue:o.value.summary,"onUpdate:modelValue":_[0]||(_[0]=A=>o.value.summary=A),type:"text",class:"mt-1 block w-full",placeholder:"Project Status Meeting",required:""},null,8,["modelValue"]),p(we,{message:h.value.summary?h.value.summary[0]:"",class:"mt-2"},null,8,["message"])]),l("div",null,[p(B,{for:"description",value:"Description"}),ne(l("textarea",{id:"description","onUpdate:modelValue":_[1]||(_[1]=A=>o.value.description=A),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",rows:"3",placeholder:"Meeting agenda and details..."},null,512),[[Be,o.value.description]]),p(we,{message:h.value.description?h.value.description[0]:"",class:"mt-2"},null,8,["message"])]),l("div",ec,[l("div",null,[p(B,{for:"start_datetime",value:"Start Date & Time"}),p(pe,{id:"start_datetime",modelValue:o.value.start_datetime,"onUpdate:modelValue":_[2]||(_[2]=A=>o.value.start_datetime=A),type:"datetime-local",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),p(we,{message:h.value.start_datetime?h.value.start_datetime[0]:"",class:"mt-2"},null,8,["message"])]),l("div",null,[p(B,{for:"end_datetime",value:"End Date & Time"}),p(pe,{id:"end_datetime",modelValue:o.value.end_datetime,"onUpdate:modelValue":_[3]||(_[3]=A=>o.value.end_datetime=A),type:"datetime-local",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),p(we,{message:h.value.end_datetime?h.value.end_datetime[0]:"",class:"mt-2"},null,8,["message"])])]),l("div",null,[p(B,{for:"attendees",value:"Attendees"}),p(ve(va),{id:"attendees",modelValue:o.value.attendee_user_ids,"onUpdate:modelValue":_[4]||(_[4]=A=>o.value.attendee_user_ids=A),options:s.projectUsers.map(A=>A.id),"custom-label":A=>{const R=s.projectUsers.find(le=>le.id===A);return R?`${R.name} (${R.email})`:""},placeholder:"Select attendees",multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,"show-labels":!1,class:"mt-1"},null,8,["modelValue","options","custom-label"]),_[9]||(_[9]=l("p",{class:"mt-1 text-sm text-gray-500"}," Select project members to invite to this meeting ",-1)),p(we,{message:h.value.attendee_user_ids?h.value.attendee_user_ids[0]:"",class:"mt-2"},null,8,["message"])]),l("div",null,[p(B,{for:"location",value:"Location (Optional)"}),p(pe,{id:"location",modelValue:o.value.location,"onUpdate:modelValue":_[5]||(_[5]=A=>o.value.location=A),type:"text",class:"mt-1 block w-full",placeholder:"Office, Conference Room, etc."},null,8,["modelValue"]),p(we,{message:h.value.location?h.value.location[0]:"",class:"mt-2"},null,8,["message"])]),l("div",null,[p(B,{for:"timezone",value:"Timezone"}),ne(l("select",{id:"timezone","onUpdate:modelValue":_[6]||(_[6]=A=>o.value.timezone=A),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[(u(!0),c(G,null,J(i.value,A=>(u(),c("option",{key:A,value:A},y(A),9,tc))),128))],512),[[Oe,o.value.timezone]]),_[10]||(_[10]=l("p",{class:"mt-1 text-sm text-gray-500"}," Select your timezone for this meeting ",-1)),p(we,{message:h.value.timezone?h.value.timezone[0]:"",class:"mt-2"},null,8,["message"])]),l("div",sc,[ne(l("input",{id:"with_google_meet","onUpdate:modelValue":_[7]||(_[7]=A=>o.value.with_google_meet=A),type:"checkbox",class:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,512),[[Qs,o.value.with_google_meet]]),_[11]||(_[11]=l("label",{for:"with_google_meet",class:"ml-2 block text-sm text-gray-900"}," Create Google Meet video conference ",-1))]),l("div",ac,[ne(l("input",{id:"enable_recording","onUpdate:modelValue":_[8]||(_[8]=A=>o.value.enable_recording=A),type:"checkbox",class:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,512),[[Qs,o.value.enable_recording]]),_[12]||(_[12]=l("label",{for:"enable_recording",class:"ml-2 block text-sm text-gray-900"}," Enable recording and transcript ",-1))]),v.value?(u(),c("div",ic,y(v.value),1)):D("",!0),l("div",nc,[p(Me,{onClick:Q},{default:V(()=>_[13]||(_[13]=[W(" Cancel ",-1)])),_:1,__:[13]}),p(_e,{onClick:P,class:K({"opacity-25":d.value}),disabled:d.value},{default:V(()=>_[14]||(_[14]=[W(" Schedule Meeting ",-1)])),_:1,__:[14]},8,["class","disabled"])])])])]),_:1},8,["show"]))}},rc={class:"p-6"},oc={key:0,class:"mb-4 p-3 bg-green-100 text-green-800 rounded-md"},dc={key:1,class:"mb-4 p-3 bg-red-100 text-red-800 rounded-md"},uc={class:"mb-4"},cc=["value"],hc={class:"mt-6 flex justify-end space-x-3"},mc={__name:"ProjectMagicLinkModal",props:{show:{type:Boolean,default:!1},projectId:{type:Number,required:!0},projectClients:{type:Array,default:()=>[]}},emits:["close"],setup(e,{emit:t}){const s=e,a=t,n=Y(!1),i=Y(""),r=Y(""),o=Y(""),h=async()=>{var v,g;if(!i.value){o.value="Please select a client email";return}n.value=!0,r.value="",o.value="";try{const f=await window.axios.post(`/api/projects/${s.projectId}/magic-link`,{email:i.value});f.data.success?(r.value=f.data.message,i.value=""):o.value=f.data.message||"Failed to send magic link"}catch(f){console.error("Error sending magic link:",f),o.value=((g=(v=f.response)==null?void 0:v.data)==null?void 0:g.message)||"An error occurred while sending the magic link"}finally{n.value=!1}},d=()=>{i.value="",r.value="",o.value="",a("close")};return(v,g)=>(u(),ye(je,{show:e.show,onClose:d},{default:V(()=>[l("div",rc,[l("div",{class:"flex justify-between items-center mb-4"},[g[2]||(g[2]=l("h3",{class:"text-lg font-semibold text-gray-900"},"Send Magic Link to Client",-1)),l("button",{onClick:d,class:"text-gray-400 hover:text-gray-500"},g[1]||(g[1]=[l("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),r.value?(u(),c("div",oc,y(r.value),1)):D("",!0),o.value?(u(),c("div",dc,y(o.value),1)):D("",!0),l("div",uc,[p(B,{for:"client-email",value:"Select Client"}),ne(l("select",{id:"client-email","onUpdate:modelValue":g[0]||(g[0]=f=>i.value=f),class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full"},[g[3]||(g[3]=l("option",{value:""},"Select a client",-1)),(u(!0),c(G,null,J(e.projectClients,f=>(u(),c("option",{key:f.id,value:f.email},y(f.name)+" ("+y(f.email)+") ",9,cc))),128))],512),[[Oe,i.value]]),g[4]||(g[4]=l("p",{class:"mt-2 text-sm text-gray-500"}," The magic link will be sent to the selected client's email address. ",-1))]),l("div",hc,[p(Me,{onClick:d,type:"button"},{default:V(()=>g[5]||(g[5]=[W(" Cancel ",-1)])),_:1,__:[5]}),p(_e,{onClick:h,disabled:n.value||!i.value,class:"bg-purple-600 hover:bg-purple-700"},{default:V(()=>[W(y(n.value?"Sending...":"Send Magic Link"),1)]),_:1},8,["disabled"])])])]),_:1},8,["show"]))}},vc={class:"p-6"},fc={class:"text-lg font-medium text-gray-900"},pc={class:"mt-6 space-y-6"},yc={class:"mt-2 flex space-x-4"},gc={class:"inline-flex items-center"},wc={class:"inline-flex items-center"},_c={key:0},bc={key:1},kc={key:2,class:"text-red-600 text-sm"},Dc={class:"flex justify-end space-x-3"},xc={__name:"ResourceModal",props:{show:{type:Boolean,default:!1},projectId:{type:Number,required:!0},resource:{type:Object,default:null}},emits:["close","saved"],setup(e,{emit:t}){const s=e,a=t,n=Y({name:"",type:"link",url:"",file:null,description:""}),i=Y({}),r=Y(!1),o=Y(null);xt(()=>s.show,g=>{g&&(s.resource?n.value={name:s.resource.name,type:s.resource.type,url:s.resource.type==="link"?s.resource.url:"",file:null,description:s.resource.description||""}:n.value={name:"",type:"link",url:"",file:null,description:""},i.value={})});const h=g=>{n.value.file=g.target.files[0]||null},d=async()=>{var g,f;r.value=!0,i.value={};try{const S=new FormData;S.append("name",n.value.name),S.append("type",n.value.type),S.append("description",n.value.description),n.value.type==="link"?S.append("url",n.value.url):n.value.file&&S.append("file",n.value.file);let E;s.resource?E=await window.axios.put(`/api/projects/${s.projectId}/resources/${s.resource.id}`,S,{headers:{"Content-Type":"multipart/form-data"}}):E=await window.axios.post(`/api/projects/${s.projectId}/resources`,S,{headers:{"Content-Type":"multipart/form-data"}}),E.data.success?(a("saved",E.data.resource),a("close")):console.error("Error saving resource:",E.data.message)}catch(S){console.error("Error saving resource:",S),S.response&&S.response.data&&S.response.data.errors?i.value=S.response.data.errors:i.value={general:[((f=(g=S.response)==null?void 0:g.data)==null?void 0:f.message)||"An error occurred while saving the resource."]}}finally{r.value=!1}},v=()=>{a("close")};return(g,f)=>(u(),ye(je,{show:e.show,onClose:v,"max-width":"md"},{default:V(()=>[l("div",vc,[l("h2",fc,y(e.resource?"Edit Resource":"Add Resource"),1),l("div",pc,[l("div",null,[p(B,{for:"resource-type",value:"Resource Type"}),l("div",yc,[l("label",gc,[ne(l("input",{type:"radio","onUpdate:modelValue":f[0]||(f[0]=S=>n.value.type=S),value:"link",class:"form-radio text-indigo-600"},null,512),[[ea,n.value.type]]),f[5]||(f[5]=l("span",{class:"ml-2"},"Link",-1))]),l("label",wc,[ne(l("input",{type:"radio","onUpdate:modelValue":f[1]||(f[1]=S=>n.value.type=S),value:"file",class:"form-radio text-indigo-600"},null,512),[[ea,n.value.type]]),f[6]||(f[6]=l("span",{class:"ml-2"},"File",-1))])])]),l("div",null,[p(B,{for:"resource-name",value:"Name"}),p(pe,{id:"resource-name",modelValue:n.value.name,"onUpdate:modelValue":f[2]||(f[2]=S=>n.value.name=S),type:"text",class:"mt-1 block w-full",placeholder:"Enter resource name"},null,8,["modelValue"]),p(we,{message:i.value.name?i.value.name[0]:"",class:"mt-2"},null,8,["message"])]),n.value.type==="link"?(u(),c("div",_c,[p(B,{for:"resource-url",value:"URL"}),p(pe,{id:"resource-url",modelValue:n.value.url,"onUpdate:modelValue":f[3]||(f[3]=S=>n.value.url=S),type:"url",class:"mt-1 block w-full",placeholder:"https://example.com"},null,8,["modelValue"]),p(we,{message:i.value.url?i.value.url[0]:"",class:"mt-2"},null,8,["message"])])):D("",!0),n.value.type==="file"?(u(),c("div",bc,[p(B,{for:"resource-file",value:"File"}),l("input",{id:"resource-file",ref_key:"fileInputRef",ref:o,type:"file",class:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100",onChange:h},null,544),p(we,{message:i.value.file?i.value.file[0]:"",class:"mt-2"},null,8,["message"])])):D("",!0),l("div",null,[p(B,{for:"resource-description",value:"Description (Optional)"}),ne(l("textarea",{id:"resource-description","onUpdate:modelValue":f[4]||(f[4]=S=>n.value.description=S),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",rows:"3",placeholder:"Enter a description for this resource"},null,512),[[Be,n.value.description]]),p(we,{message:i.value.description?i.value.description[0]:"",class:"mt-2"},null,8,["message"])]),i.value.general?(u(),c("div",kc,y(i.value.general[0]),1)):D("",!0),l("div",Dc,[p(Me,{onClick:v},{default:V(()=>f[7]||(f[7]=[W(" Cancel ",-1)])),_:1,__:[7]}),p(_e,{onClick:d,disabled:r.value},{default:V(()=>[W(y(r.value?"Saving...":e.resource?"Update":"Add"),1)]),_:1},8,["disabled"])])])])]),_:1},8,["show"]))}},Mc={class:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow mb-6"},Sc={class:"flex justify-between items-center mb-4"},Tc={class:"flex gap-3"},Cc={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ec={class:"text-2xl font-bold text-gray-900 tracking-tight mb-2"},Oc={class:"text-gray-600 text-base"},jc={class:"space-y-3 text-sm text-gray-700"},Yc={class:"flex flex-wrap gap-2 mt-2 items-center"},Ac=["href"],Vc=["href"],$c=["href"],Nc={key:3,class:"text-gray-500 text-sm"},Lc={class:"relative"},Wc=["onClick"],Pc={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Ic={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Fc={key:0,class:"resource-tooltip absolute left-0 bottom-full mb-2 w-48 z-10"},Rc={class:"bg-white rounded-md shadow-lg p-3 text-sm border border-gray-200"},Hc={class:"flex justify-between items-center mb-2"},Uc={class:"font-medium text-gray-900"},Bc={key:0,class:"text-gray-600 text-xs mb-2"},zc={class:"flex justify-between mt-2 pt-2 border-t border-gray-100"},Gc=["href"],qc={class:"flex space-x-2"},Zc=["onClick"],Jc=["onClick"],Kc={__name:"ProjectGeneralInfoCard",props:{project:{type:Object,required:!0},projectId:{type:Number,required:!0},canManageProjects:{type:Boolean,required:!0},isSuperAdmin:{type:Boolean,required:!0}},emits:["openEditModal","openStandupModal","openMeetingModal","openMagicLinkModal","resourceSaved"],setup(e,{emit:t}){const s=e,a=t,n=Y(!1),i=Y(null),r=Y([]),o=Y(!1),h=Y(null);Cs(s.projectId);const d=async()=>{o.value=!0;try{const C=await window.axios.get(`/api/projects/${s.projectId}/resources`);C.data.success?r.value=C.data.resources:console.error("Failed to fetch resources:",C.data.message)}catch(C){console.error("Error fetching resources:",C)}finally{o.value=!1}},v=()=>{i.value=null,n.value=!0},g=C=>{i.value=C,n.value=!0},f=async C=>{if(confirm("Are you sure you want to delete this resource?"))try{const _=await window.axios.delete(`/api/projects/${s.projectId}/resources/${C}`);_.data.success?r.value=r.value.filter(A=>A.id!==C):console.error("Failed to delete resource:",_.data.message)}catch(_){console.error("Error deleting resource:",_)}},S=C=>{if(i.value){const _=r.value.findIndex(A=>A.id===C.id);_!==-1&&(r.value[_]=C)}else r.value.push(C);a("resourceSaved",C)},E=C=>{h.value=h.value===C?null:C},P=()=>{h.value=null},Q=C=>{if(h.value!==null){const _=C.target.closest(".resource-tooltip"),A=C.target.closest(".resource-button");!_&&!A&&P()}};return ft(()=>{d(),document.addEventListener("click",Q)}),pi(()=>{document.removeEventListener("click",Q)}),(C,_)=>{var A;return u(),c(G,null,[l("div",Mc,[l("div",Sc,[_[7]||(_[7]=l("h4",{class:"text-lg font-semibold text-gray-900"},"General Information",-1)),l("div",Tc,[p(_e,{class:"bg-blue-600 hover:bg-blue-700 transition-colors",onClick:_[0]||(_[0]=R=>a("openStandupModal"))},{default:V(()=>_[4]||(_[4]=[W(" Daily Standup ",-1)])),_:1,__:[4]}),e.canManageProjects||e.isSuperAdmin?(u(),ye(_e,{key:0,class:"bg-indigo-600 hover:bg-indigo-700 transition-colors",onClick:_[1]||(_[1]=R=>a("openEditModal"))},{default:V(()=>_[5]||(_[5]=[W(" Edit Project ",-1)])),_:1,__:[5]})):D("",!0),e.canManageProjects||e.isSuperAdmin?(u(),ye(_e,{key:1,class:"bg-green-600 hover:bg-green-700 transition-colors",onClick:_[2]||(_[2]=R=>a("openMeetingModal"))},{default:V(()=>_[6]||(_[6]=[W(" Schedule Meeting ",-1)])),_:1,__:[6]})):D("",!0)])]),l("div",Cc,[l("div",null,[l("h3",Ec,y(e.project.name),1),l("p",Oc,y(e.project.description||"No description provided"),1)]),l("div",jc,[l("p",null,[_[8]||(_[8]=l("strong",{class:"text-gray-900"},"Status:",-1)),W(" "+y(((A=e.project.status)==null?void 0:A.replace("_"," ").toUpperCase())||"N/A"),1)]),l("p",null,[_[9]||(_[9]=l("strong",{class:"text-gray-900"},"Project Type:",-1)),W(" "+y(e.project.project_type||"N/A"),1)]),l("p",null,[_[10]||(_[10]=l("strong",{class:"text-gray-900"},"Source:",-1)),W(" "+y(e.project.source||"N/A"),1)]),l("div",Yc,[l("button",{onClick:v,class:"p-2 bg-gray-100 rounded-full hover:bg-gray-200 transition-colors",title:"Add Resource"},_[11]||(_[11]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])),e.project.website?(u(),c("a",{key:0,href:e.project.website,target:"_blank",class:"p-2 bg-gray-100 rounded-full hover:bg-gray-200 transition-colors",title:"Visit Website"},_[12]||(_[12]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"})],-1)]),8,Ac)):D("",!0),e.project.social_media_link?(u(),c("a",{key:1,href:e.project.social_media_link,target:"_blank",class:"p-2 bg-gray-100 rounded-full hover:bg-gray-200 transition-colors",title:"Social Media"},_[13]||(_[13]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})],-1)]),8,Vc)):D("",!0),e.project.google_drive_link?(u(),c("a",{key:2,href:e.project.google_drive_link,target:"_blank",class:"p-2 bg-gray-100 rounded-full hover:bg-gray-200 transition-colors",title:"Google Drive"},_[14]||(_[14]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)]),8,$c)):D("",!0),o.value?(u(),c("div",Nc," Loading resources... ")):(u(!0),c(G,{key:4},J(r.value,R=>(u(),c("div",{key:R.id,class:"relative"},[l("div",Lc,[l("button",{onClick:De(le=>E(R.id),["prevent"]),class:"resource-button p-2 bg-gray-100 rounded-full hover:bg-gray-200 transition-colors block"},[R.type==="link"?(u(),c("svg",Pc,_[15]||(_[15]=[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101"},null,-1),l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.172 13.828a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.102 1.101"},null,-1)]))):(u(),c("svg",Ic,_[16]||(_[16]=[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"},null,-1)])))],8,Wc),h.value===R.id?(u(),c("div",Fc,[l("div",Rc,[l("div",Hc,[l("h4",Uc,y(R.name),1),l("button",{onClick:De(P,["prevent"]),class:"text-gray-400 hover:text-gray-600"},_[17]||(_[17]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),R.description?(u(),c("p",Bc,y(R.description),1)):D("",!0),l("div",zc,[l("a",{href:R.url,target:"_blank",class:"text-xs text-indigo-600 hover:text-indigo-800"}," Open Link ",8,Gc),l("div",qc,[l("button",{onClick:De(le=>g(R),["prevent"]),class:"p-1 text-gray-500 hover:text-indigo-600",title:"Edit"},_[18]||(_[18]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,Zc),l("button",{onClick:De(le=>f(R.id),["prevent"]),class:"p-1 text-gray-500 hover:text-red-600",title:"Delete"},_[19]||(_[19]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,Jc)])])]),_[20]||(_[20]=l("div",{class:"absolute left-5 bottom-0 transform translate-y-1/2 rotate-45 w-2 h-2 bg-white border-r border-b border-gray-200"},null,-1))])):D("",!0)])]))),128))])])])]),p(xc,{show:n.value,"project-id":e.projectId,resource:i.value,onClose:_[3]||(_[3]=R=>n.value=!1),onSaved:S},null,8,["show","project-id","resource"])],64)}}},Xc=pa(Kc,[["__scopeId","data-v-1ac5e65f"]]),Qc={class:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-6"},eh={class:"bg-white p-4 rounded-xl shadow-md hover:shadow-lg transition-shadow"},th={class:"text-2xl font-bold text-indigo-600"},sh={class:"bg-white p-4 rounded-xl shadow-md hover:shadow-lg transition-shadow"},ah={class:"text-2xl font-bold text-indigo-600"},ih={class:"bg-white p-4 rounded-xl shadow-md hover:shadow-lg transition-shadow"},nh={class:"text-2xl font-bold text-indigo-600"},lh={class:"bg-white p-4 rounded-xl shadow-md hover:shadow-lg transition-shadow"},rh={class:"text-2xl font-bold text-indigo-600"},oh={__name:"ProjectStatsCards",props:{tasks:{type:Array,required:!0},emails:{type:Array,required:!0}},setup(e){const t=e,s=ge(()=>t.tasks.filter(r=>r.status!=="Done").length),a=ge(()=>t.emails.filter(r=>r.type==="received").length),n=ge(()=>{const r=t.emails.filter(o=>o.status==="received"||o.type==="received");if(r.length>0){const o=[...r].sort((h,d)=>new Date(d.created_at)-new Date(h.created_at));return new Date(o[0].created_at).toLocaleDateString()}return"N/A"}),i=ge(()=>{const r=t.tasks.filter(o=>o.status!=="Done");if(r.length>0){const o=r.filter(h=>h.due_date);if(o.length>0)return[...o].sort((d,v)=>new Date(d.due_date)-new Date(v.due_date))[0].due_date}return"N/A"});return(r,o)=>(u(),c("div",Qc,[l("div",eh,[o[0]||(o[0]=l("h4",{class:"text-sm font-semibold text-gray-500 mb-1"},"Pending Tasks",-1)),l("p",th,y(s.value),1)]),l("div",sh,[o[1]||(o[1]=l("h4",{class:"text-sm font-semibold text-gray-500 mb-1"},"Received Emails",-1)),l("p",ah,y(a.value),1)]),l("div",ih,[o[2]||(o[2]=l("h4",{class:"text-sm font-semibold text-gray-500 mb-1"},"Last Email Received",-1)),l("p",nh,y(n.value),1)]),l("div",lh,[o[3]||(o[3]=l("h4",{class:"text-sm font-semibold text-gray-500 mb-1"},"Next Task Deadline",-1)),l("p",rh,y(i.value),1)])]))}},dh={class:"bg-white p-4 rounded-xl shadow-md mb-6"},uh={class:"border-b border-gray-200"},ch={class:"-mb-px flex space-x-8 overflow-x-auto"},hh={__name:"ProjectTabsNavigation",props:{selectedTab:{type:String,default:null},canViewEmails:{type:Boolean,required:!0},canViewNotes:{type:Boolean,required:!0}},emits:["update:selectedTab"],setup(e,{emit:t}){const s=e,a=t,n=ge({get:()=>s.selectedTab,set:i=>a("update:selectedTab",i)});return(i,r)=>(u(),c("div",dh,[l("div",uh,[l("nav",ch,[l("button",{onClick:r[0]||(r[0]=o=>n.value=null),class:K([n.value===null?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])}," Overview ",2),l("button",{onClick:r[1]||(r[1]=o=>n.value="tasks"),class:K([n.value==="tasks"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])}," Project Tasks ",2),e.canViewEmails?(u(),c("button",{key:0,onClick:r[2]||(r[2]=o=>n.value="emails"),class:K([n.value==="emails"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])}," Email Communication ",2)):D("",!0),e.canViewNotes?(u(),c("button",{key:1,onClick:r[3]||(r[3]=o=>n.value="notes"),class:K([n.value==="notes"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])}," Notes ",2)):D("",!0),e.canViewNotes?(u(),c("button",{key:2,onClick:r[4]||(r[4]=o=>n.value="standups"),class:K([n.value==="standups"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])}," Daily Standups ",2)):D("",!0)])])]))}},mh={class:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow"},vh={class:"flex justify-between items-center mb-4"},fh={class:"flex gap-2"},ph={key:0},yh={key:1},gh={class:"mb-6 overflow-x-auto"},wh={key:0,class:"text-center text-gray-600 text-sm animate-pulse py-4"},_h={key:1,class:"text-center py-4"},bh={key:2,class:"relative py-8"},kh={class:"relative flex justify-between"},Dh={key:0,class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},xh={key:1,class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Mh={key:2,class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Sh={key:3,class:"w-2 h-2 bg-white rounded-full"},Th={class:"absolute -top-8 transform -translate-x-1/2 left-1/2 w-32"},Ch=["title"],Eh={class:"absolute top-8 transform -translate-x-1/2 left-1/2"},Oh={class:"text-xs text-gray-500 whitespace-nowrap"},jh={class:"mb-6 bg-gray-50 p-4 rounded-lg"},Yh={class:"flex flex-wrap items-center gap-4"},Ah={class:"flex-1 min-w-[200px]"},Vh={class:"flex-1 min-w-[200px]"},$h=["value"],Nh={class:"flex-1 min-w-[200px]"},Lh=["value"],Wh={class:"flex-1 min-w-[200px]"},Ph=["value"],Ih={key:0,class:"mt-3 text-sm text-gray-600"},Fh={key:0,class:"text-red-600 font-medium"},Rh={key:0,class:"text-center text-gray-600 text-sm animate-pulse py-4"},Hh={key:1,class:"text-center py-4"},Uh={class:"text-red-600 text-sm font-medium"},Bh={key:2,class:"overflow-x-auto"},zh={class:"min-w-full divide-y divide-gray-200"},Gh={class:"bg-white divide-y divide-gray-200"},qh={class:"px-4 py-3 text-sm text-gray-900"},Zh={class:"px-4 py-3 text-sm text-gray-700"},Jh={class:"px-4 py-3 text-sm text-gray-700"},Kh={class:"px-4 py-3 text-sm text-gray-700"},Xh={class:"px-4 py-3 text-sm text-gray-700"},Qh={class:"px-4 py-3 text-right"},em={class:"flex justify-end space-x-2"},tm=["onClick"],sm=["onClick"],am=["onClick"],im=["onClick"],nm={key:3,class:"text-center py-4"},lm={class:"p-6"},rm={class:"flex justify-between items-center mb-4"},om={class:"text-lg font-semibold text-gray-900"},dm={key:0,class:"mt-1 text-sm text-red-600"},um={key:0,class:"mt-1 text-sm text-red-600"},cm={key:0,class:"mt-1 text-sm text-red-600"},hm={key:0,class:"mt-1 text-sm text-red-600"},mm=["value"],vm={key:0,class:"mt-1 text-sm text-red-600"},fm={key:0,class:"text-sm text-gray-500"},pm=["value"],ym={key:2,class:"mt-1 text-sm text-red-600"},gm={class:"flex justify-between items-center"},wm={key:0,class:"text-sm text-gray-500"},_m=["value"],bm={key:2,class:"mt-1 text-sm text-red-600"},km={class:"mt-6 flex justify-end space-x-3"},Dm={class:"p-6"},xm={class:"flex justify-between items-center mb-4"},Mm={key:0,class:"mt-1 text-sm text-red-600"},Sm={key:0,class:"mt-1 text-sm text-red-600"},Tm={key:0,class:"mt-1 text-sm text-red-600"},Cm={key:0,class:"mt-1 text-sm text-red-600"},Em={class:"mt-6 flex justify-end space-x-3"},Om={class:"p-6"},jm={class:"flex justify-between items-center mb-4"},Ym={key:0,class:"mb-4 p-3 bg-gray-100 rounded-md"},Am={class:"text-sm font-medium text-gray-900"},Vm={class:"text-xs text-gray-500 mt-1"},$m={class:"mb-4"},Nm={key:0,class:"mt-2 text-sm text-red-600"},Lm={class:"mt-6 flex justify-end"},Wm={__name:"ProjectTasksTab",props:{projectId:{type:Number,required:!0},projectUsers:{type:Array,default:()=>[]},canManageProjects:{type:Boolean,required:!0}},emits:["tasksUpdated"],setup(e,{emit:t}){const s=e,a=t,n=Y([]),i=Y(!0),r=Y(""),o=Y(!1),h=Y(null),d=Y({name:"",description:"",assigned_to_user_id:null,due_date:null,status:"To Do",task_type_id:null,milestone_id:null,tags:[]}),v=Y({}),g=Y([]),f=Y([]),S=Y(!1),E=Y(!1),P=rt({status:"",assigned_to_user_id:"",milestone_id:"",due_date_range:""}),Q=[{value:"",label:"All Dates"},{value:"today",label:"Due Today"},{value:"this_week",label:"Due This Week"},{value:"next_week",label:"Due Next Week"},{value:"overdue",label:"Overdue"},{value:"no_date",label:"No Due Date"}],C=Y(!1),_=Y(null),A=Y(""),R=Y(""),le=Y(!1),ke=Y(!1),q=Y({name:"",description:"",completion_date:null,status:"Not Started",project_id:s.projectId}),O=Y({}),x=Y(!1);Cs(s.projectId);const k=ge(()=>!f.value||!f.value.length?[]:[...f.value].sort(($,w)=>$.completion_date?w.completion_date?new Date($.completion_date)-new Date(w.completion_date):-1:1)),N=ge(()=>n.value.length?n.value.filter($=>{var w;if(P.status&&$.status!==P.status)return!1;if(P.assigned_to_user_id){const b=parseInt(P.assigned_to_user_id);if(b===-1){if($.assigned_to!=="Unassigned")return!1}else{const ie=(w=s.projectUsers)==null?void 0:w.find(Se=>Se.id===b);if(ie&&$.assigned_to!==ie.name)return!1}}if(P.milestone_id){const b=parseInt(P.milestone_id);if(b===-1){if($.milestone)return!1}else{const ie=f.value.find(Se=>Se.id===b);if(ie&&$.milestone!==ie.name&&$.milestone_id!==b)return!1}}if(P.due_date_range){const b=new Date;b.setHours(0,0,0,0);const ie=$.due_date?new Date($.due_date):null;switch(P.due_date_range){case"today":if(!ie||ie.toDateString()!==b.toDateString())return!1;break;case"this_week":{if(!ie)return!1;const Se=new Date(b);if(Se.setDate(b.getDate()+(6-b.getDay())),ie<b||ie>Se)return!1;break}case"next_week":{if(!ie)return!1;const Se=new Date(b);Se.setDate(b.getDate()+(7-b.getDay()));const Pe=new Date(Se);if(Pe.setDate(Se.getDate()+6),ie<Se||ie>Pe)return!1;break}case"overdue":{if(!ie||ie>=b)return!1;break}case"no_date":{if(ie)return!1;break}}}return!0}):[]),de=()=>{P.status="",P.assigned_to_user_id="",P.milestone_id="",P.due_date_range=""},ue=async()=>{i.value=!0,r.value="";try{const $=await window.axios.get(`/api/projects/${s.projectId}/tasks`);n.value=$.data,a("tasksUpdated",n.value)}catch($){r.value="Failed to load tasks data.",console.error("Error fetching project tasks:",$),$.response&&$.response.data&&$.response.data.message&&(r.value=$.response.data.message)}finally{i.value=!1}},Ce=async()=>{S.value=!0;try{const $=await window.axios.get("/api/task-types");g.value=$.data}catch($){console.error("Error fetching task types:",$)}finally{S.value=!1}},We=async()=>{E.value=!0;try{const $=await window.axios.get(`/api/projects/${s.projectId}/milestones`);f.value=$.data}catch($){console.error("Error fetching milestones:",$)}finally{E.value=!1}},nt=()=>{q.value={name:"",description:"",completion_date:null,status:"Not Started",project_id:s.projectId},O.value={},ke.value=!0},j=async()=>{O.value={},x.value=!0;try{const $=await window.axios.post("/api/milestones",q.value);f.value.push($.data),d.value.milestone_id=$.data.id,ke.value=!1,alert("Milestone created successfully!")}catch($){console.error("Error creating milestone:",$),$.response&&$.response.data&&$.response.data.errors?O.value=$.response.data.errors:alert("Failed to create milestone. Please try again.")}finally{x.value=!1}},m=async()=>{h.value=null,d.value={name:"",description:"",assigned_to_user_id:null,due_date:null,status:"To Do",task_type_id:null,milestone_id:null,tags:[]},v.value={},g.value.length===0&&await Ce(),f.value.length===0&&await We(),o.value=!0},I=async $=>{var Se;h.value=$,g.value.length===0&&await Ce(),f.value.length===0&&await We();let w=null;if($.milestone){const Pe=f.value.find(Et=>Et.name===$.milestone);Pe&&(w=Pe.id)}let b=null;if($.task_type){const Pe=g.value.find(Et=>Et.name===$.task_type);Pe&&(b=Pe.id)}let ie=null;if($.assigned_to&&$.assigned_to!=="Unassigned"){const Pe=(Se=s.projectUsers)==null?void 0:Se.find(Et=>Et.name===$.assigned_to);Pe&&(ie=Pe.id)}d.value={name:$.title,description:$.description||"",assigned_to_user_id:ie||$.assigned_to_id||null,due_date:$.due_date||null,status:$.status,task_type_id:b||$.task_type_id||null,milestone_id:w,tags:$.tags||[]},v.value={},o.value=!0},Ee=async $=>{try{await window.axios.post(`/api/tasks/${$.id}/complete`),await ue()}catch(w){console.error("Error marking task as completed:",w),alert("Failed to mark task as completed. Please try again.")}},H=async $=>{try{await window.axios.post(`/api/tasks/${$.id}/start`),await ue()}catch(w){console.error("Error starting task:",w),alert("Failed to start task. Please try again.")}},lt=$=>{_.value=$,A.value="",R.value="",C.value=!0},ms=async()=>{if(!A.value.trim()){R.value="Note content is required";return}R.value="",le.value=!0;try{await window.axios.post(`/api/tasks/${_.value.id}/notes`,{note:A.value}),C.value=!1,A.value="",_.value=null,await ue(),alert("Note added successfully!")}catch($){console.error("Error adding note to task:",$),$.response&&$.response.data&&$.response.data.message?R.value=$.response.data.message:R.value="Failed to add note. Please try again."}finally{le.value=!1}},ci=async()=>{v.value={};try{let $;h.value?$=await window.axios.put(`/api/tasks/${h.value.id}`,d.value):$=await window.axios.post("/api/tasks",{...d.value,milestone_id:d.value.milestone_id||null}),o.value=!1,await ue()}catch($){console.error("Error submitting task form:",$),$.response&&$.response.data&&$.response.data.errors?v.value=$.response.data.errors:alert("Failed to save task. Please try again.")}};return ft(()=>{ue(),Ce(),We()}),($,w)=>(u(),c("div",mh,[l("div",vh,[w[26]||(w[26]=l("h4",{class:"text-lg font-semibold text-gray-900"},"Project Tasks",-1)),l("div",fh,[p(Me,{onClick:ue,disabled:i.value,class:"text-indigo-600 hover:text-indigo-800"},{default:V(()=>[i.value?(u(),c("span",yh,"Loading...")):(u(),c("span",ph,"Refresh"))]),_:1},8,["disabled"]),e.canManageProjects?(u(),ye(_e,{key:0,class:"bg-indigo-600 hover:bg-indigo-700 transition-colors",onClick:m},{default:V(()=>w[25]||(w[25]=[W(" Add Task ",-1)])),_:1,__:[25]})):D("",!0)])]),l("div",gh,[E.value?(u(),c("div",wh," Loading milestones... ")):k.value.length?(u(),c("div",bh,[w[31]||(w[31]=l("div",{class:"absolute h-1 bg-gray-200 top-1/2 left-0 right-0 transform -translate-y-1/2"},null,-1)),l("div",kh,[(u(!0),c(G,null,J(k.value,(b,ie)=>(u(),c("div",{key:b.id,class:K(["flex flex-col items-center relative z-10",{"ml-4":ie===0,"mr-4":ie===k.value.length-1}])},[l("div",{class:K(["w-6 h-6 rounded-full shadow-lg flex items-center justify-center",{"bg-gray-300":b.status==="Not Started","bg-blue-500":b.status==="In Progress","bg-green-500":b.status==="Completed","bg-red-500":b.status==="Overdue"}])},[b.status==="Completed"?(u(),c("svg",Dh,w[28]||(w[28]=[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)]))):b.status==="In Progress"?(u(),c("svg",xh,w[29]||(w[29]=[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"},null,-1)]))):b.status==="Overdue"?(u(),c("svg",Mh,w[30]||(w[30]=[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)]))):(u(),c("span",Sh))],2),l("div",Th,[l("p",{class:"text-xs font-medium text-gray-700 text-center truncate",title:b.name},y(b.name),9,Ch)]),l("div",Eh,[l("p",Oh,y(b.completion_date?new Date(b.completion_date).toLocaleDateString():"No date"),1)])],2))),128))])])):(u(),c("div",_h,w[27]||(w[27]=[l("p",{class:"text-gray-400 text-sm"},"No milestones found for this project.",-1)])))]),l("div",jh,[l("div",Yh,[l("div",Ah,[w[33]||(w[33]=l("label",{for:"status-filter",class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),ne(l("select",{id:"status-filter","onUpdate:modelValue":w[0]||(w[0]=b=>P.status=b),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-sm"},w[32]||(w[32]=[ma('<option value="">All Statuses</option><option value="To Do">To Do</option><option value="In Progress">In Progress</option><option value="Done">Done</option><option value="Blocked">Blocked</option><option value="Archived">Archived</option>',6)]),512),[[Oe,P.status]])]),l("div",Vh,[w[36]||(w[36]=l("label",{for:"assigned-filter",class:"block text-sm font-medium text-gray-700 mb-1"},"Assigned To",-1)),ne(l("select",{id:"assigned-filter","onUpdate:modelValue":w[1]||(w[1]=b=>P.assigned_to_user_id=b),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-sm"},[w[34]||(w[34]=l("option",{value:""},"All Users",-1)),w[35]||(w[35]=l("option",{value:"-1"},"Unassigned",-1)),(u(!0),c(G,null,J(e.projectUsers,b=>(u(),c("option",{key:b.id,value:b.id},y(b.name),9,$h))),128))],512),[[Oe,P.assigned_to_user_id]])]),l("div",Nh,[w[39]||(w[39]=l("label",{for:"milestone-filter",class:"block text-sm font-medium text-gray-700 mb-1"},"Milestone",-1)),ne(l("select",{id:"milestone-filter","onUpdate:modelValue":w[2]||(w[2]=b=>P.milestone_id=b),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-sm"},[w[37]||(w[37]=l("option",{value:""},"All Milestones",-1)),w[38]||(w[38]=l("option",{value:"-1"},"No Milestone",-1)),(u(!0),c(G,null,J(f.value,b=>(u(),c("option",{key:b.id,value:b.id},y(b.name),9,Lh))),128))],512),[[Oe,P.milestone_id]])]),l("div",Wh,[w[40]||(w[40]=l("label",{for:"due-date-filter",class:"block text-sm font-medium text-gray-700 mb-1"},"Due Date",-1)),ne(l("select",{id:"due-date-filter","onUpdate:modelValue":w[3]||(w[3]=b=>P.due_date_range=b),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-sm"},[(u(),c(G,null,J(Q,b=>l("option",{key:b.value,value:b.value},y(b.label),9,Ph)),64))],512),[[Oe,P.due_date_range]])]),l("div",{class:"flex items-end"},[l("button",{onClick:de,class:"px-3 py-2 text-sm text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-md transition-colors"}," Clear Filters ")])]),Object.values(P).some(b=>b!=="")?(u(),c("div",Ih,[l("p",null,[W(" Showing "+y(N.value.length)+" of "+y(n.value.length)+" tasks ",1),N.value.length===0?(u(),c("span",Fh," (No tasks match the current filters) ")):D("",!0)])])):D("",!0)]),i.value?(u(),c("div",Rh," Loading tasks... ")):r.value?(u(),c("div",Hh,[l("p",Uh,y(r.value),1)])):n.value.length?(u(),c("div",Bh,[l("table",zh,[w[41]||(w[41]=l("thead",{class:"bg-gray-50"},[l("tr",null,[l("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Title"),l("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),l("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Assigned To"),l("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Due Date"),l("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Milestone"),l("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),l("tbody",Gh,[(u(!0),c(G,null,J(N.value,b=>(u(),c("tr",{key:b.id,class:"hover:bg-gray-50 transition-colors"},[l("td",qh,y(b.title),1),l("td",Zh,[l("span",{class:K({"px-2 py-1 rounded-full text-xs font-medium":!0,"bg-yellow-100 text-yellow-800":b.status==="To Do","bg-blue-100 text-blue-800":b.status==="In Progress","bg-green-100 text-green-800":b.status==="Done","bg-red-100 text-red-800":b.status==="Blocked","bg-gray-100 text-gray-800":b.status==="Archived"})},y(b.status),3)]),l("td",Jh,y(b.assigned_to),1),l("td",Kh,y(b.due_date?b.due_date:"N/A"),1),l("td",Xh,y(b.milestone||"N/A"),1),l("td",Qh,[l("div",em,[l("button",{onClick:ie=>I(b),class:"text-indigo-600 hover:text-indigo-800 text-sm font-medium"}," Edit ",8,tm),l("button",{onClick:ie=>lt(b),class:"text-blue-600 hover:text-blue-800 text-sm font-medium"}," Add Note ",8,sm),b.status==="To Do"?(u(),c("button",{key:0,onClick:ie=>H(b),class:"text-blue-600 hover:text-blue-800 text-sm font-medium"}," Start ",8,am)):D("",!0),b.status!=="Done"?(u(),c("button",{key:1,onClick:ie=>Ee(b),class:"text-green-600 hover:text-green-800 text-sm font-medium"}," Complete ",8,im)):D("",!0)])])]))),128))])])])):(u(),c("div",nm,w[42]||(w[42]=[l("p",{class:"text-gray-400 text-sm"},"No tasks found for this project.",-1),l("p",{class:"text-gray-500 text-sm mt-2"},' Click the "Add Task" button to create a new task. ',-1)]))),p(je,{show:o.value,onClose:w[13]||(w[13]=b=>o.value=!1)},{default:V(()=>[l("div",lm,[l("div",rm,[l("h3",om,y(h.value?"Edit Task":"Add New Task"),1),l("button",{onClick:w[4]||(w[4]=b=>o.value=!1),class:"text-gray-400 hover:text-gray-500"},w[43]||(w[43]=[l("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),l("form",{onSubmit:De(ci,["prevent"]),class:"space-y-4"},[l("div",null,[p(B,{for:"task-name",value:"Task Name"}),p(pe,{id:"task-name",modelValue:d.value.name,"onUpdate:modelValue":w[5]||(w[5]=b=>d.value.name=b),type:"text",class:"mt-1 block w-full",placeholder:"Enter task name"},null,8,["modelValue"]),v.value.name?(u(),c("p",dm,y(v.value.name[0]),1)):D("",!0)]),l("div",null,[p(B,{for:"task-description",value:"Description"}),ne(l("textarea",{id:"task-description","onUpdate:modelValue":w[6]||(w[6]=b=>d.value.description=b),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",rows:"3",placeholder:"Enter task description"},null,512),[[Be,d.value.description]]),v.value.description?(u(),c("p",um,y(v.value.description[0]),1)):D("",!0)]),l("div",null,[p(B,{for:"task-status",value:"Status"}),ne(l("select",{id:"task-status","onUpdate:modelValue":w[7]||(w[7]=b=>d.value.status=b),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},w[44]||(w[44]=[l("option",{value:"To Do"},"To Do",-1),l("option",{value:"In Progress"},"In Progress",-1),l("option",{value:"Done"},"Done",-1),l("option",{value:"Blocked"},"Blocked",-1),l("option",{value:"Archived"},"Archived",-1)]),512),[[Oe,d.value.status]]),v.value.status?(u(),c("p",cm,y(v.value.status[0]),1)):D("",!0)]),l("div",null,[p(B,{for:"task-due-date",value:"Due Date"}),p(pe,{id:"task-due-date",modelValue:d.value.due_date,"onUpdate:modelValue":w[8]||(w[8]=b=>d.value.due_date=b),type:"date",class:"mt-1 block w-full"},null,8,["modelValue"]),v.value.due_date?(u(),c("p",hm,y(v.value.due_date[0]),1)):D("",!0)]),l("div",null,[p(B,{for:"task-assigned-to",value:"Assigned To"}),ne(l("select",{id:"task-assigned-to","onUpdate:modelValue":w[9]||(w[9]=b=>d.value.assigned_to_user_id=b),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[w[45]||(w[45]=l("option",{value:null},"Unassigned",-1)),(u(!0),c(G,null,J(e.projectUsers,b=>(u(),c("option",{key:b.id,value:b.id},y(b.name),9,mm))),128))],512),[[Oe,d.value.assigned_to_user_id]]),v.value.assigned_to_user_id?(u(),c("p",vm,y(v.value.assigned_to_user_id[0]),1)):D("",!0)]),l("div",null,[p(B,{for:"task-type",value:"Task Type"}),S.value?(u(),c("div",fm,"Loading task types...")):ne((u(),c("select",{key:1,id:"task-type","onUpdate:modelValue":w[10]||(w[10]=b=>d.value.task_type_id=b),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[w[46]||(w[46]=l("option",{value:null},"Select a task type",-1)),(u(!0),c(G,null,J(g.value,b=>(u(),c("option",{key:b.id,value:b.id},y(b.name),9,pm))),128))],512)),[[Oe,d.value.task_type_id]]),v.value.task_type_id?(u(),c("p",ym,y(v.value.task_type_id[0]),1)):D("",!0)]),l("div",null,[l("div",gm,[p(B,{for:"task-milestone",value:"Milestone"}),l("button",{type:"button",onClick:nt,class:"text-sm text-indigo-600 hover:text-indigo-800"}," + Create New Milestone ")]),E.value?(u(),c("div",wm,"Loading milestones...")):ne((u(),c("select",{key:1,id:"task-milestone","onUpdate:modelValue":w[11]||(w[11]=b=>d.value.milestone_id=b),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[w[47]||(w[47]=l("option",{value:null},"No milestone",-1)),(u(!0),c(G,null,J(f.value,b=>(u(),c("option",{key:b.id,value:b.id},y(b.name),9,_m))),128))],512)),[[Oe,d.value.milestone_id]]),v.value.milestone_id?(u(),c("p",bm,y(v.value.milestone_id[0]),1)):D("",!0)]),l("div",km,[p(Me,{onClick:w[12]||(w[12]=b=>o.value=!1)},{default:V(()=>w[48]||(w[48]=[W("Cancel",-1)])),_:1,__:[48]}),p(_e,{type:"submit",disabled:S.value||E.value},{default:V(()=>[W(y(h.value?"Update Task":"Create Task"),1)]),_:1},8,["disabled"])])],32)])]),_:1},8,["show"]),p(je,{show:ke.value,onClose:w[20]||(w[20]=b=>ke.value=!1)},{default:V(()=>[l("div",Dm,[l("div",xm,[w[50]||(w[50]=l("h3",{class:"text-lg font-semibold text-gray-900"},"Add New Milestone",-1)),l("button",{onClick:w[14]||(w[14]=b=>ke.value=!1),class:"text-gray-400 hover:text-gray-500"},w[49]||(w[49]=[l("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),l("form",{onSubmit:De(j,["prevent"]),class:"space-y-4"},[l("div",null,[p(B,{for:"milestone-name",value:"Milestone Name"}),p(pe,{id:"milestone-name",modelValue:q.value.name,"onUpdate:modelValue":w[15]||(w[15]=b=>q.value.name=b),type:"text",class:"mt-1 block w-full",placeholder:"Enter milestone name"},null,8,["modelValue"]),O.value.name?(u(),c("p",Mm,y(O.value.name[0]),1)):D("",!0)]),l("div",null,[p(B,{for:"milestone-description",value:"Description"}),ne(l("textarea",{id:"milestone-description","onUpdate:modelValue":w[16]||(w[16]=b=>q.value.description=b),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",rows:"3",placeholder:"Enter milestone description"},null,512),[[Be,q.value.description]]),O.value.description?(u(),c("p",Sm,y(O.value.description[0]),1)):D("",!0)]),l("div",null,[p(B,{for:"milestone-completion-date",value:"Completion Date"}),p(pe,{id:"milestone-completion-date",modelValue:q.value.completion_date,"onUpdate:modelValue":w[17]||(w[17]=b=>q.value.completion_date=b),type:"date",class:"mt-1 block w-full"},null,8,["modelValue"]),O.value.completion_date?(u(),c("p",Tm,y(O.value.completion_date[0]),1)):D("",!0)]),l("div",null,[p(B,{for:"milestone-status",value:"Status"}),ne(l("select",{id:"milestone-status","onUpdate:modelValue":w[18]||(w[18]=b=>q.value.status=b),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},w[51]||(w[51]=[l("option",{value:"Not Started"},"Not Started",-1),l("option",{value:"In Progress"},"In Progress",-1),l("option",{value:"Completed"},"Completed",-1),l("option",{value:"Overdue"},"Overdue",-1)]),512),[[Oe,q.value.status]]),O.value.status?(u(),c("p",Cm,y(O.value.status[0]),1)):D("",!0)]),l("div",Em,[p(Me,{onClick:w[19]||(w[19]=b=>ke.value=!1),type:"button"},{default:V(()=>w[52]||(w[52]=[W("Cancel",-1)])),_:1,__:[52]}),p(_e,{type:"submit",disabled:x.value},{default:V(()=>[W(y(x.value?"Creating...":"Create Milestone"),1)]),_:1},8,["disabled"])])],32)])]),_:1},8,["show"]),p(je,{show:C.value,onClose:w[24]||(w[24]=b=>C.value=!1)},{default:V(()=>[l("div",Om,[l("div",jm,[w[54]||(w[54]=l("h3",{class:"text-lg font-semibold text-gray-900"},"Add Note to Task",-1)),l("button",{onClick:w[21]||(w[21]=b=>C.value=!1),class:"text-gray-400 hover:text-gray-500"},w[53]||(w[53]=[l("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),_.value?(u(),c("div",Ym,[l("p",Am,y(_.value.title),1),l("p",Vm,"Status: "+y(_.value.status),1)])):D("",!0),l("div",$m,[p(B,{for:"task-note-content",value:"Note Content"}),ne(l("textarea",{id:"task-note-content","onUpdate:modelValue":w[22]||(w[22]=b=>A.value=b),class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full h-32",placeholder:"Enter your note..."},null,512),[[Be,A.value]]),R.value?(u(),c("p",Nm,y(R.value),1)):D("",!0)]),l("div",Lm,[p(Me,{onClick:w[23]||(w[23]=b=>C.value=!1),class:"mr-2"},{default:V(()=>w[55]||(w[55]=[W("Cancel",-1)])),_:1,__:[55]}),p(_e,{onClick:ms,disabled:le.value},{default:V(()=>[W(y(le.value?"Adding...":"Add Note"),1)]),_:1},8,["disabled"])])])]),_:1},8,["show"])]))}},Pm={key:0,class:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow"},Im={class:"flex justify-between items-center mb-4"},Fm={key:0,class:"flex gap-3"},Rm={key:1,class:"mt-2 bg-green-100 border border-green-400 text-green-700 px-4 py-2 rounded relative",role:"alert"},Hm={class:"block sm:inline"},Um={class:"mb-4 bg-gray-50 p-4 rounded-lg"},Bm={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},zm={class:"mt-1 relative rounded-md shadow-sm"},Gm={key:0,class:"text-center text-gray-600 text-sm animate-pulse py-4"},qm={key:1,class:"text-center text-red-600 text-sm font-medium py-4"},Zm={key:2,class:"overflow-x-auto"},Jm={class:"min-w-full divide-y divide-gray-200"},Km={class:"bg-white divide-y divide-gray-200"},Xm={class:"px-4 py-3 text-sm text-gray-900"},Qm={class:"px-4 py-3 text-sm text-gray-700"},ev={class:"px-4 py-3 text-sm text-gray-700"},tv={class:"px-4 py-3 text-sm text-gray-700"},sv={class:"px-4 py-3 text-sm text-gray-700"},av={class:"px-4 py-3 text-right"},iv={key:3,class:"text-gray-400 text-sm"},nv={class:"p-6"},lv={class:"flex justify-between items-center mb-4"},rv={key:0,class:"space-y-4"},ov={class:"border-b pb-4"},dv={class:"text-xl font-medium text-gray-900 mb-2"},uv={class:"grid grid-cols-2 gap-4 text-sm"},cv={class:"text-gray-600"},hv={class:"text-gray-900"},mv={class:"text-gray-600 mt-1"},vv={class:"text-gray-600"},fv={class:"text-gray-900"},pv={class:"prose max-w-none"},yv=["innerHTML"],gv={key:0,class:"mt-4 p-4 bg-red-50 rounded-md"},wv={class:"text-red-700"},_v={key:1,class:"mt-4 text-sm text-gray-600"},bv={key:0},kv={key:2,class:"mt-6 flex justify-end space-x-2"},Dv={class:"p-6"},xv={class:"flex justify-between items-center mb-4"},Mv={key:0,class:"space-y-4"},Sv={key:0,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert"},Tv={class:"block sm:inline"},Cv={class:"mb-4"},Ev={class:"mb-6"},Ov={class:"mt-6 flex justify-end space-x-2"},jv={class:"p-6"},Yv={class:"flex justify-between items-center mb-4"},Av={key:0,class:"space-y-4"},Vv={key:0,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert"},$v={class:"block sm:inline"},Nv={class:"mb-6"},Lv={class:"mt-6 flex justify-end space-x-2"},Wv={class:"p-6"},Pv={class:"flex justify-between items-center mb-4"},Iv={key:0,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert"},Fv={class:"block sm:inline"},Rv={class:"mb-4"},Hv={class:"mb-4"},Uv={class:"mb-6"},Bv={class:"flex items-center justify-end"},zv={__name:"ProjectEmailsTab",props:{projectId:{type:Number,required:!0},projectClients:{type:Array,default:()=>[]},canViewEmails:{type:Boolean,required:!0},canComposeEmails:{type:Boolean,required:!0},canApproveEmails:{type:Boolean,required:!0}},emits:["emailsUpdated"],setup(e,{emit:t}){const s=e,a=t,n=Y([]),i=Y(!0),r=Y(""),o=Y(null),h=Y(!1),d=rt({type:"",startDate:"",endDate:"",search:""});let v=null;const g=Y(!1),f=Y(!1),S=rt({subject:"",body:""}),E=Y({}),P=rt({rejection_reason:""}),Q=Y({}),C=Y(""),_=Y(!1),A=rt({project_id:s.projectId,client_ids:[],subject:"",body:""}),R=Y({}),le=()=>{O()},ke=()=>{d.type="",d.startDate="",d.endDate="",d.search="",O()},q=()=>{clearTimeout(v),v=setTimeout(()=>{le()},500)},O=async()=>{i.value=!0,r.value="";try{const j=new URLSearchParams;d.type&&j.append("type",d.type),d.startDate&&j.append("start_date",d.startDate),d.endDate&&j.append("end_date",d.endDate),d.search&&j.append("search",d.search);const m=j.toString(),I=`/api/projects/${s.projectId}/emails-simplified${m?`?${m}`:""}`,Ee=await window.axios.get(I);n.value=Ee.data,a("emailsUpdated",n.value)}catch(j){r.value="Failed to load email data.",console.error("Error fetching project emails:",j)}finally{i.value=!1}},x=j=>{o.value=j,h.value=!0},k=async j=>{C.value="",r.value="";try{await window.axios.post(`/api/emails/${j.id}/approve`),C.value="Email approved successfully!",await O(),h.value=!1}catch(m){m.response&&m.response.data.message?r.value=m.response.data.message:(r.value="Failed to approve email.",console.error("Error approving email:",m))}},N=j=>{o.value=j,S.subject=j.subject,S.body=j.body,E.value={},g.value=!0,h.value=!1},de=async()=>{E.value={},r.value="",C.value="";try{const j={subject:S.subject,body:S.body};await window.axios.post(`/api/emails/${o.value.id}/edit-and-approve`,j),C.value="Email updated and approved successfully!",g.value=!1,await O()}catch(j){j.response&&j.response.status===422?E.value=j.response.data.errors:j.response&&j.response.data.message?r.value=j.response.data.message:(r.value="Failed to update and approve email.",console.error("Error updating and approving email:",j))}},ue=j=>{o.value=j,P.rejection_reason="",Q.value={},f.value=!0,h.value=!1},Ce=async()=>{Q.value={},r.value="",C.value="";try{await window.axios.post(`/api/emails/${o.value.id}/reject`,{rejection_reason:P.rejection_reason}),C.value="Email rejected successfully!",P.rejection_reason="",f.value=!1,await O()}catch(j){j.response&&j.response.status===422?Q.value=j.response.data.errors:j.response&&j.response.data.message?r.value=j.response.data.message:(r.value="Failed to reject email.",console.error("Error rejecting email:",j))}},We=()=>{A.project_id=s.projectId,A.client_ids=[],A.subject="",A.body="",R.value={},C.value="",_.value=!0},nt=async()=>{if(R.value={},r.value="",C.value="",!A.client_ids||A.client_ids.length===0){R.client_ids=["Please select at least one client."];return}try{const j=A.client_ids.map(I=>({id:typeof I=="object"&&I!==null?I.id:I})),m={project_id:A.project_id,client_ids:j,subject:A.subject,body:A.body,status:"pending_approval"};await window.axios.post("/api/emails",m),C.value="Email submitted for approval successfully!",A.client_ids=[],A.subject="",A.body="",R.value={},_.value=!1,await O()}catch(j){j.response&&j.response.status===422?R.value=j.response.data.errors:j.response&&j.response.data.message?r.value=j.response.data.message:(r.value="Failed to submit email. An unexpected error occurred.",console.error("Error submitting email:",j))}};return ft(()=>{s.canViewEmails&&O()}),(j,m)=>e.canViewEmails?(u(),c("div",Pm,[l("div",Im,[m[25]||(m[25]=l("h4",{class:"text-lg font-semibold text-gray-900"},"Email Communication",-1)),e.canComposeEmails?(u(),c("div",Fm,[p(_e,{class:"bg-indigo-600 hover:bg-indigo-700 transition-colors",onClick:We},{default:V(()=>m[24]||(m[24]=[W(" Compose Email ",-1)])),_:1,__:[24]})])):D("",!0),C.value?(u(),c("div",Rm,[l("span",Hm,y(C.value),1)])):D("",!0)]),l("div",Um,[l("div",Bm,[l("div",null,[p(B,{for:"typeFilter",value:"Type"}),ne(l("select",{id:"typeFilter","onUpdate:modelValue":m[0]||(m[0]=I=>d.type=I),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",onChange:le},m[26]||(m[26]=[l("option",{value:""},"All Types",-1),l("option",{value:"sent"},"Sent",-1),l("option",{value:"received"},"Received",-1)]),544),[[Oe,d.type]])]),l("div",null,[p(B,{for:"startDate",value:"From Date"}),p(pe,{type:"date",id:"startDate",modelValue:d.startDate,"onUpdate:modelValue":m[1]||(m[1]=I=>d.startDate=I),class:"mt-1 block w-full",onChange:le},null,8,["modelValue"])]),l("div",null,[p(B,{for:"endDate",value:"To Date"}),p(pe,{type:"date",id:"endDate",modelValue:d.endDate,"onUpdate:modelValue":m[2]||(m[2]=I=>d.endDate=I),class:"mt-1 block w-full",onChange:le},null,8,["modelValue"])]),l("div",null,[p(B,{for:"searchFilter",value:"Search Content"}),l("div",zm,[p(pe,{type:"text",id:"searchFilter",modelValue:d.search,"onUpdate:modelValue":m[3]||(m[3]=I=>d.search=I),class:"block w-full pr-10",placeholder:"Search in email content...",onInput:q},null,8,["modelValue"]),m[27]||(m[27]=l("div",{class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},[l("svg",{class:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[l("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})])],-1))])])]),l("div",{class:"mt-3 flex justify-end"},[l("button",{type:"button",class:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:ke}," Reset Filters ")])]),i.value?(u(),c("div",Gm," Loading email data... ")):r.value?(u(),c("div",qm,y(r.value),1)):n.value.length?(u(),c("div",Zm,[l("table",Jm,[m[29]||(m[29]=l("thead",{class:"bg-gray-50"},[l("tr",null,[l("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Subject"),l("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"From"),l("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date"),l("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Type"),l("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),l("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),l("tbody",Km,[(u(!0),c(G,null,J(n.value,I=>{var Ee;return u(),c("tr",{key:I.id,class:"hover:bg-gray-50 transition-colors"},[l("td",Xm,y(I.subject),1),l("td",Qm,y(((Ee=I.sender)==null?void 0:Ee.name)||"N/A"),1),l("td",ev,y(new Date(I.created_at).toLocaleDateString()),1),l("td",tv,[l("span",{class:K({"px-2 py-1 rounded-full text-xs font-medium":!0,"bg-blue-100 text-blue-800":I.type==="sent","bg-purple-100 text-purple-800":I.type==="received"})},y(I.type?I.type.toUpperCase():"N/A"),3)]),l("td",sv,[l("span",{class:K({"px-2 py-1 rounded-full text-xs font-medium":!0,"bg-green-100 text-green-800":I.status==="sent","bg-yellow-100 text-yellow-800":I.status==="pending_approval","bg-red-100 text-red-800":I.status==="rejected","bg-gray-100 text-gray-800":I.status==="draft"})},y(I.status.replace("_"," ").toUpperCase()),3)]),l("td",av,[p(Me,{class:"text-indigo-600 hover:text-indigo-800",onClick:H=>x(I)},{default:V(()=>m[28]||(m[28]=[W(" View ",-1)])),_:2,__:[28]},1032,["onClick"])])])}),128))])])])):(u(),c("p",iv,"No email communication found.")),p(je,{show:h.value,onClose:m[8]||(m[8]=I=>h.value=!1)},{default:V(()=>{var I;return[l("div",nv,[l("div",lv,[m[31]||(m[31]=l("h3",{class:"text-lg font-semibold text-gray-900"},"Email Details",-1)),l("button",{onClick:m[4]||(m[4]=Ee=>h.value=!1),class:"text-gray-400 hover:text-gray-500"},m[30]||(m[30]=[l("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),o.value?(u(),c("div",rv,[l("div",ov,[l("h4",dv,y(o.value.subject),1),l("div",uv,[l("div",null,[l("p",cv,[m[32]||(m[32]=W("From: ",-1)),l("span",hv,y(((I=o.value.sender)==null?void 0:I.name)||"N/A"),1)]),l("p",mv,[m[33]||(m[33]=W("Status: ",-1)),l("span",{class:K({"px-2 py-1 rounded-full text-xs font-medium":!0,"bg-green-100 text-green-800":o.value.status==="sent","bg-yellow-100 text-yellow-800":o.value.status==="pending_approval","bg-red-100 text-red-800":o.value.status==="rejected","bg-gray-100 text-gray-800":o.value.status==="draft"})},y(o.value.status.replace("_"," ").toUpperCase()),3)])]),l("div",null,[l("p",vv,[m[34]||(m[34]=W("Date: ",-1)),l("span",fv,y(new Date(o.value.created_at).toLocaleString()),1)])])])]),l("div",pv,[l("div",{innerHTML:o.value.body},null,8,yv)]),o.value.rejection_reason?(u(),c("div",gv,[m[35]||(m[35]=l("h5",{class:"font-medium text-red-800"},"Rejection Reason:",-1)),l("p",wv,y(o.value.rejection_reason),1)])):D("",!0),o.value.approver?(u(),c("div",_v,[l("p",null,"Approved/Rejected by: "+y(o.value.approver.name),1),o.value.sent_at?(u(),c("p",bv,"Sent at: "+y(new Date(o.value.sent_at).toLocaleString()),1)):D("",!0)])):D("",!0),o.value.status==="pending_approval"&&e.canApproveEmails?(u(),c("div",kv,[p(_e,{onClick:m[5]||(m[5]=Ee=>k(o.value)),class:"bg-green-600 hover:bg-green-700"},{default:V(()=>m[36]||(m[36]=[W("Approve",-1)])),_:1,__:[36]}),p(_e,{onClick:m[6]||(m[6]=Ee=>N(o.value)),class:"bg-blue-600 hover:bg-blue-700"},{default:V(()=>m[37]||(m[37]=[W("Edit & Approve",-1)])),_:1,__:[37]}),p(Me,{onClick:m[7]||(m[7]=Ee=>ue(o.value)),class:"text-red-600 hover:text-red-800"},{default:V(()=>m[38]||(m[38]=[W("Reject",-1)])),_:1,__:[38]})])):D("",!0)])):D("",!0)])]}),_:1},8,["show"]),p(je,{show:g.value,onClose:m[13]||(m[13]=I=>g.value=!1),"max-width":"3xl"},{default:V(()=>[l("div",Dv,[l("div",xv,[m[40]||(m[40]=l("h3",{class:"text-lg font-semibold text-gray-900"},"Edit and Approve Email",-1)),l("button",{onClick:m[9]||(m[9]=I=>g.value=!1),class:"text-gray-400 hover:text-gray-500"},m[39]||(m[39]=[l("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),o.value?(u(),c("div",Mv,[l("form",{onSubmit:De(de,["prevent"])},[r.value?(u(),c("div",Sv,[l("span",Tv,y(r.value),1)])):D("",!0),l("div",Cv,[p(B,{for:"subject",value:"Subject"}),p(pe,{id:"subject",type:"text",class:"mt-1 block w-full",modelValue:S.subject,"onUpdate:modelValue":m[10]||(m[10]=I=>S.subject=I),required:""},null,8,["modelValue"]),p(we,{message:E.value.subject?E.value.subject[0]:"",class:"mt-2"},null,8,["message"])]),l("div",Ev,[p(B,{for:"body",value:"Email Body"}),p(ta,{id:"body",modelValue:S.body,"onUpdate:modelValue":m[11]||(m[11]=I=>S.body=I),placeholder:"Edit your email here...",height:"300px"},null,8,["modelValue"]),p(we,{message:E.value.body?E.value.body[0]:"",class:"mt-2"},null,8,["message"])]),l("div",Ov,[p(Me,{onClick:m[12]||(m[12]=I=>g.value=!1)},{default:V(()=>m[41]||(m[41]=[W("Cancel",-1)])),_:1,__:[41]}),p(_e,{type:"submit",class:"bg-green-600 hover:bg-green-700"},{default:V(()=>m[42]||(m[42]=[W("Save & Approve",-1)])),_:1,__:[42]})])],32)])):D("",!0)])]),_:1},8,["show"]),p(je,{show:f.value,onClose:m[17]||(m[17]=I=>f.value=!1),"max-width":"2xl"},{default:V(()=>[l("div",jv,[l("div",Yv,[m[44]||(m[44]=l("h3",{class:"text-lg font-semibold text-gray-900"},"Reject Email",-1)),l("button",{onClick:m[14]||(m[14]=I=>f.value=!1),class:"text-gray-400 hover:text-gray-500"},m[43]||(m[43]=[l("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),o.value?(u(),c("div",Av,[l("form",{onSubmit:De(Ce,["prevent"])},[r.value?(u(),c("div",Vv,[l("span",$v,y(r.value),1)])):D("",!0),l("div",Nv,[p(B,{for:"rejection_reason",value:"Rejection Reason"}),ne(l("textarea",{id:"rejection_reason",rows:"5",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full","onUpdate:modelValue":m[15]||(m[15]=I=>P.rejection_reason=I),required:"",placeholder:"Please provide a reason for rejecting this email (minimum 10 characters)"},null,512),[[Be,P.rejection_reason]]),p(we,{message:Q.value.rejection_reason?Q.value.rejection_reason[0]:"",class:"mt-2"},null,8,["message"])]),l("div",Lv,[p(Me,{onClick:m[16]||(m[16]=I=>f.value=!1)},{default:V(()=>m[45]||(m[45]=[W("Cancel",-1)])),_:1,__:[45]}),p(_e,{type:"submit",class:"bg-red-600 hover:bg-red-700"},{default:V(()=>m[46]||(m[46]=[W("Reject Email",-1)])),_:1,__:[46]})])],32)])):D("",!0)])]),_:1},8,["show"]),p(je,{show:_.value,onClose:m[23]||(m[23]=I=>_.value=!1),"max-width":"3xl"},{default:V(()=>[l("div",Wv,[l("div",Pv,[m[48]||(m[48]=l("h3",{class:"text-lg font-semibold text-gray-900"},"Compose New Email",-1)),l("button",{onClick:m[18]||(m[18]=I=>_.value=!1),class:"text-gray-400 hover:text-gray-500"},m[47]||(m[47]=[l("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),l("form",{onSubmit:De(nt,["prevent"])},[r.value?(u(),c("div",Iv,[l("span",Fv,y(r.value),1)])):D("",!0),l("div",Rv,[p(B,{for:"client_ids",value:"To (Clients)"}),p(ve(va),{modelValue:A.client_ids,"onUpdate:modelValue":m[19]||(m[19]=I=>A.client_ids=I),options:e.projectClients||[],multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,placeholder:"Select one or more clients",label:"name","track-by":"id",searchable:!0,"allow-empty":!0,id:"composeEmailClientSelect","select-group-z-index":9999},null,8,["modelValue","options"]),p(we,{message:R.value.client_ids?R.value.client_ids[0]:"",class:"mt-2"},null,8,["message"])]),l("div",Hv,[p(B,{for:"subject",value:"Subject"}),p(pe,{id:"subject",type:"text",class:"mt-1 block w-full",modelValue:A.subject,"onUpdate:modelValue":m[20]||(m[20]=I=>A.subject=I),required:""},null,8,["modelValue"]),p(we,{message:R.value.subject?R.value.subject[0]:"",class:"mt-2"},null,8,["message"])]),l("div",Uv,[p(B,{for:"body",value:"Email Body"}),p(ta,{id:"body",modelValue:A.body,"onUpdate:modelValue":m[21]||(m[21]=I=>A.body=I),placeholder:"Compose your email here...",height:"300px"},null,8,["modelValue"]),p(we,{message:R.value.body?R.value.body[0]:"",class:"mt-2"},null,8,["message"])]),l("div",Bv,[p(Me,{onClick:m[22]||(m[22]=I=>_.value=!1),class:"mr-2"},{default:V(()=>m[49]||(m[49]=[W("Cancel",-1)])),_:1,__:[49]}),p(_e,{type:"submit"},{default:V(()=>m[50]||(m[50]=[W("Submit for Approval",-1)])),_:1,__:[50]})])],32)])]),_:1},8,["show"])])):D("",!0)}},Gv={key:0,class:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow"},qv={class:"flex justify-between items-center mb-4"},Zv={class:"flex gap-3"},Jv={class:"mb-4 bg-gray-50 p-4 rounded-lg"},Kv={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Xv={class:"mt-1 relative rounded-md shadow-sm"},Qv={class:"mb-8 p-4 bg-blue-50 rounded-md"},ef={class:"flex items-center"},tf={class:"text-sm text-blue-800"},sf={key:0,class:"text-center text-gray-600 text-sm animate-pulse py-4"},af={key:1,class:"text-center text-red-600 text-sm font-medium py-4"},nf={key:2,class:"space-y-4"},lf={class:"flex justify-between"},rf={class:"flex-grow"},of={key:0,class:"text-xs text-red-400 block mt-1"},df={class:"flex items-center mt-1"},uf={class:"text-xs text-gray-500"},cf={key:0,class:"ml-2 px-2 py-0.5 bg-indigo-100 text-indigo-800 text-xs rounded-full"},hf={key:0},mf={key:3,class:"text-gray-400 text-sm"},vf={class:"p-6"},ff={class:"flex justify-between items-center mb-4"},pf={key:0,class:"mb-4 p-3 bg-gray-100 rounded-md"},yf={class:"text-sm text-gray-700"},gf={class:"text-xs text-gray-500 mt-1"},wf={key:1,class:"mb-4"},_f={key:0,class:"text-center py-4"},bf={key:1,class:"space-y-3 max-h-60 overflow-y-auto"},kf={class:"text-sm text-gray-700"},Df={class:"text-xs text-gray-500 mt-1"},xf={key:2,class:"text-center py-3"},Mf={key:2,class:"mb-4"},Sf={key:0,class:"mt-2 text-sm text-red-600"},Tf={key:3,class:"mt-6 flex justify-end"},Cf={__name:"ProjectNotesTab",props:{projectId:{type:Number,required:!0},googleChatId:{type:String,default:null},canViewNotes:{type:Boolean,required:!0},canAddNotes:{type:Boolean,required:!0}},emits:["notesUpdated"],setup(e,{emit:t}){const s=e,a=t,n=Y([]),i=Y(!0),r=Y(""),o=Y(!1),h=Y(!1),d=Y(null),v=Y(""),g=Y(""),f=Y([]),S=Y(!1),E=rt({startDate:"",endDate:"",search:""});let P=null;const Q=async()=>{i.value=!0,r.value="";try{const q=new URLSearchParams;E.startDate&&q.append("start_date",E.startDate),E.endDate&&q.append("end_date",E.endDate),E.search&&q.append("search",E.search);const O=q.toString(),x=`/api/projects/${s.projectId}/notes${O?`?${O}`:""}`,k=await window.axios.get(x);n.value=k.data,a("notesUpdated",n.value)}catch(q){r.value="Failed to load notes data.",console.error("Error fetching project notes:",q)}finally{i.value=!1}},C=()=>{o.value=!0},_=async q=>{d.value=q,v.value="",g.value="",f.value=[],S.value=!0,h.value=!0;try{const O=await window.axios.get(`/api/projects/${s.projectId}/notes/${q.id}/replies`);O.data.success?f.value=O.data.replies:console.error("Failed to fetch replies:",O.data.message)}catch(O){console.error("Error fetching replies:",O)}finally{S.value=!1}},A=async()=>{var q,O;if(!d.value||!v.value.trim()){g.value="Reply content is required";return}g.value="";try{const x=await window.axios.post(`/api/projects/${s.projectId}/notes/${d.value.id}/reply`,{content:v.value});if(x.data.success){v.value="",S.value=!0;const k=await window.axios.get(`/api/projects/${s.projectId}/notes/${d.value.id}/replies`);k.data.success&&(f.value=k.data.replies),S.value=!1,await Q()}else g.value=x.data.message||"Failed to send reply"}catch(x){console.error("Error sending reply:",x),g.value=((O=(q=x.response)==null?void 0:q.data)==null?void 0:O.message)||"An error occurred while sending the reply"}},R=()=>{Q()},le=()=>{E.startDate="",E.endDate="",E.search="",Q()},ke=()=>{clearTimeout(P),P=setTimeout(()=>{R()},500)};return ft(()=>{s.canViewNotes&&Q()}),(q,O)=>e.canViewNotes?(u(),c("div",Gv,[l("div",qv,[O[10]||(O[10]=l("h4",{class:"text-lg font-semibold text-gray-900"},"Project Notes",-1)),l("div",Zv,[e.canAddNotes?(u(),ye(_e,{key:0,class:"bg-indigo-600 hover:bg-indigo-700 transition-colors",onClick:C},{default:V(()=>O[9]||(O[9]=[W(" Add Note ",-1)])),_:1,__:[9]})):D("",!0)])]),l("div",Jv,[l("div",Kv,[l("div",null,[p(B,{for:"noteStartDate",value:"From Date"}),p(pe,{type:"date",id:"noteStartDate",modelValue:E.startDate,"onUpdate:modelValue":O[0]||(O[0]=x=>E.startDate=x),class:"mt-1 block w-full",onChange:R},null,8,["modelValue"])]),l("div",null,[p(B,{for:"noteEndDate",value:"To Date"}),p(pe,{type:"date",id:"noteEndDate",modelValue:E.endDate,"onUpdate:modelValue":O[1]||(O[1]=x=>E.endDate=x),class:"mt-1 block w-full",onChange:R},null,8,["modelValue"])]),l("div",null,[p(B,{for:"noteSearchFilter",value:"Search Content"}),l("div",Xv,[p(pe,{type:"text",id:"noteSearchFilter",modelValue:E.search,"onUpdate:modelValue":O[2]||(O[2]=x=>E.search=x),class:"block w-full pr-10",placeholder:"Search in note content...",onInput:ke},null,8,["modelValue"]),O[11]||(O[11]=l("div",{class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},[l("svg",{class:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[l("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})])],-1))])])]),l("div",{class:"mt-3 flex justify-end"},[l("button",{type:"button",class:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:le}," Reset Filters ")])]),l("div",Qv,[l("div",ef,[O[13]||(O[13]=l("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-blue-600 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),l("p",tf,[O[12]||(O[12]=W(" Daily Standups are now available in their own dedicated tab. ",-1)),l("button",{onClick:O[3]||(O[3]=x=>q.$emit("changeTab","standups")),class:"text-blue-600 hover:text-blue-800 font-medium underline"}," Click here to view Daily Standups ")])])]),l("div",null,[O[15]||(O[15]=l("h5",{class:"text-md font-semibold text-gray-900 mb-4 border-b pb-2"},"Notes",-1)),i.value?(u(),c("div",sf," Loading notes... ")):r.value?(u(),c("div",af,y(r.value),1)):n.value.length?(u(),c("div",nf,[(u(!0),c(G,null,J(n.value,x=>{var k;return u(),c("div",{key:x.id,class:"p-4 bg-gray-50 rounded-md shadow-sm hover:bg-gray-100 transition-colors"},[l("div",lf,[l("div",rf,[l("p",{class:K(["text-sm",{"text-gray-700":x.content!=="[Encrypted content could not be decrypted]","text-red-500 italic":x.content==="[Encrypted content could not be decrypted]"}])},[W(y(x.content)+" ",1),x.content==="[Encrypted content could not be decrypted]"?(u(),c("span",of," (There was an issue decrypting this note. Please contact an administrator.) ")):D("",!0)],2),l("div",df,[l("p",uf,"Added by "+y(((k=x.user)==null?void 0:k.name)||"Unknown")+" on "+y(new Date(x.created_at).toLocaleDateString()),1),x.reply_count>0?(u(),c("span",cf,y(x.reply_count)+" "+y(x.reply_count===1?"reply":"replies"),1)):D("",!0)])]),e.googleChatId&&x.chat_message_id?(u(),c("div",hf,[p(Me,{class:"text-sm text-indigo-600 hover:text-indigo-800",onClick:N=>_(x)},{default:V(()=>O[14]||(O[14]=[W(" View ",-1)])),_:2,__:[14]},1032,["onClick"])])):D("",!0)])])}),128))])):(u(),c("p",mf,"No notes available."))]),p(fa,{show:o.value,"project-id":e.projectId,onClose:O[4]||(O[4]=x=>o.value=!1),onNoteAdded:Q},null,8,["show","project-id"]),p(je,{show:h.value,onClose:O[8]||(O[8]=x=>h.value=!1)},{default:V(()=>{var x;return[l("div",vf,[l("div",ff,[O[17]||(O[17]=l("h3",{class:"text-lg font-semibold text-gray-900"},"Reply to Note",-1)),l("button",{onClick:O[5]||(O[5]=k=>h.value=!1),class:"text-gray-400 hover:text-gray-500"},O[16]||(O[16]=[l("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),d.value?(u(),c("div",pf,[l("p",yf,y(d.value.content),1),l("p",gf,"Added by "+y(((x=d.value.user)==null?void 0:x.name)||"Unknown")+" on "+y(new Date(d.value.created_at).toLocaleDateString()),1)])):D("",!0),d.value?(u(),c("div",wf,[O[20]||(O[20]=l("h4",{class:"text-sm font-medium text-gray-700 mb-2"},"Replies",-1)),S.value?(u(),c("div",_f,O[18]||(O[18]=[l("p",{class:"text-gray-500 text-sm"},"Loading replies...",-1)]))):f.value.length?(u(),c("div",bf,[(u(!0),c(G,null,J(f.value,k=>{var N;return u(),c("div",{key:k.id,class:"p-2 bg-gray-50 rounded border-l-2 border-indigo-300"},[l("p",kf,y(k.content),1),l("p",Df,"Replied by "+y(((N=k.user)==null?void 0:N.name)||"Unknown")+" on "+y(new Date(k.created_at).toLocaleDateString()),1)])}),128))])):(u(),c("div",xf,O[19]||(O[19]=[l("p",{class:"text-gray-500 text-sm"},"No replies yet. Be the first to reply!",-1)])))])):D("",!0),e.canAddNotes?(u(),c("div",Mf,[p(B,{for:"reply-content",value:"Your Reply"}),ne(l("textarea",{id:"reply-content","onUpdate:modelValue":O[6]||(O[6]=k=>v.value=k),class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full h-32",placeholder:"Enter your reply..."},null,512),[[Be,v.value]]),g.value?(u(),c("p",Sf,y(g.value),1)):D("",!0)])):D("",!0),e.canAddNotes?(u(),c("div",Tf,[p(Me,{onClick:O[7]||(O[7]=k=>h.value=!1),class:"mr-2"},{default:V(()=>O[21]||(O[21]=[W("Cancel",-1)])),_:1,__:[21]}),p(_e,{onClick:A},{default:V(()=>O[22]||(O[22]=[W("Send Reply",-1)])),_:1,__:[22]})])):D("",!0)])]}),_:1},8,["show"])])):D("",!0)}},Ef={class:"py-8 max-w-full mx-auto px-4 sm:px-6 lg:px-8"},Of={key:0,class:"text-center text-gray-600 text-lg animate-pulse"},jf={key:1,class:"text-center text-red-600 text-lg font-medium"},Yf={key:2,class:"space-y-8"},Af={key:0},Vf={key:0,class:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow mb-6"},$f={class:"flex justify-between items-center mb-4"},Nf={class:"overflow-x-auto"},Lf={class:"min-w-full divide-y divide-gray-200"},Wf={class:"bg-white divide-y divide-gray-200"},Pf={class:"px-4 py-3 text-sm text-gray-900"},If={class:"px-4 py-3 text-sm text-gray-700"},Ff={class:"px-4 py-3 text-sm text-gray-700"},Rf={class:"px-4 py-3 text-right"},Hf={key:1,class:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow mb-6"},Uf={class:"flex justify-between items-center mb-4"},Bf={key:2,class:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow mb-6"},zf={class:"flex justify-between items-center mb-4"},Gf={key:0,class:"text-gray-400 text-sm"},qf={key:1,class:"overflow-x-auto"},Zf={class:"min-w-full divide-y divide-gray-200"},Jf={class:"bg-white divide-y divide-gray-200"},Kf={class:"px-4 py-3 text-sm text-gray-900"},Xf={class:"px-4 py-3 text-sm text-gray-700"},Qf={class:"px-4 py-3 text-sm text-gray-700"},e0={class:"px-4 py-3 text-right"},t0={key:3,class:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow mb-6"},s0={class:"flex justify-between items-center mb-4"},a0={class:"flex items-center gap-4"},i0={key:0},n0={key:0,class:"space-y-4"},l0={class:"flex justify-between"},r0={class:"flex-grow"},o0={key:0,class:"text-xs text-red-400 block mt-1"},d0={class:"flex items-center mt-1"},u0={class:"text-xs text-gray-500"},c0={key:0,class:"ml-2 px-2 py-0.5 bg-indigo-100 text-indigo-800 text-xs rounded-full"},h0={key:0},m0={key:1,class:"text-gray-400 text-sm"},v0={__name:"Show",setup(e){const t=yi(),s=gi().props.id,a=Y({clients:[],users:[],notes:[],transactions:[],documents:[],meetings:[]}),n=Y(!0),i=Y(""),r=Y(!1),o=Y(!1),h=Y(!1),d=Y(!1),v=Y(!1),g=Y(null),f=Y(null);wi(a);const{canDo:S,canView:E}=Cs(s),P=ge(()=>{var j,m;return((m=(j=t.value)==null?void 0:j.role_data)==null?void 0:m.slug)==="super-admin"}),Q=ge(()=>S("manage_projects").value||P.value),C=ge(()=>E("emails").value),_=ge(()=>S("compose_emails").value),A=ge(()=>S("approve_emails").value),R=ge(()=>E("project_notes").value),le=ge(()=>S("add_project_notes").value),ke=ge(()=>{if(!a.value.tasks)return[];const j=new Date;return j.setHours(0,0,0,0),a.value.tasks.filter(m=>m.due_date?new Date(m.due_date).toDateString()===j.toDateString():!1)}),q=ge(()=>a.value.notes?[...a.value.notes].filter(j=>j.type!=="standup").sort((j,m)=>new Date(m.created_at)-new Date(j.created_at)).slice(0,3):[]),O=ge(()=>a.value.emails?[...a.value.emails].sort((j,m)=>new Date(m.created_at)-new Date(j.created_at)).slice(0,3):[]),x=async()=>{n.value=!0,i.value="";try{const j=await window.axios.get(`/api/projects/${s}`);a.value=j.data,console.log("Full project data received:",a.value)}catch(j){i.value="Failed to load project data.",console.error("Error fetching project data:",j),j.response&&(j.response.status===401||j.response.status===403)&&(i.value="You are not authorized to view this project or your session expired. Please log in.")}finally{n.value=!1}},k=j=>{a.value=j,r.value=!1,alert("Project updated successfully!"),x()},N=j=>{a.value.tasks=j},de=j=>{a.value.emails=j},ue=j=>{a.value.notes=j},Ce=()=>{g.value&&g.value.fetchMeetings()},We=()=>{x()},nt=j=>{f.value=j};return ft(async()=>{console.log("Show.vue mounted, fetching initial data...");try{await _i(s),console.log("Project permissions fetched (includes global)")}catch(j){console.error(`Error fetching permissions for project ${s}:`,j)}await x()}),(j,m)=>{const I=ot("PrimaryButton");return u(),c(G,null,[p(ve(bi),{title:a.value.name||"Project Details"},null,8,["title"]),p(mi,null,{default:V(()=>{var Ee;return[l("div",Ef,[n.value?(u(),c("div",Of," Loading project details... ")):i.value?(u(),c("div",jf,y(i.value),1)):(u(),c("div",Yf,[p(Xc,{project:a.value,"project-id":ve(s),"can-manage-projects":Q.value,"is-super-admin":P.value,onOpenEditModal:m[0]||(m[0]=H=>r.value=!0),onOpenStandupModal:m[1]||(m[1]=H=>h.value=!0),onOpenMeetingModal:m[2]||(m[2]=H=>o.value=!0),onOpenMagicLinkModal:m[3]||(m[3]=H=>v.value=!0),onResourceSaved:x},null,8,["project","project-id","can-manage-projects","is-super-admin"]),p($i,{"project-id":ve(s),ref_key:"meetingsListComponent",ref:g},null,8,["project-id"]),p(oh,{tasks:a.value.tasks||[],emails:a.value.emails||[]},null,8,["tasks","emails"]),p(hh,{selectedTab:f.value,"onUpdate:selectedTab":m[4]||(m[4]=H=>f.value=H),"can-view-emails":C.value,"can-view-notes":R.value},null,8,["selectedTab","can-view-emails","can-view-notes"]),f.value===null?(u(),c("div",Af,[ke.value.length>0?(u(),c("div",Vf,[l("div",$f,[m[19]||(m[19]=l("h4",{class:"text-lg font-semibold text-gray-900"},"Tasks Due Today",-1)),l("button",{onClick:m[5]||(m[5]=H=>f.value="tasks"),class:"text-sm text-indigo-600 hover:text-indigo-800 font-medium"}," View All Tasks → ")]),l("div",Nf,[l("table",Lf,[m[20]||(m[20]=l("thead",{class:"bg-gray-50"},[l("tr",null,[l("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Title"),l("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),l("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Assigned To"),l("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),l("tbody",Wf,[(u(!0),c(G,null,J(ke.value,H=>(u(),c("tr",{key:H.id,class:"hover:bg-gray-50 transition-colors"},[l("td",Pf,y(H.title),1),l("td",If,[l("span",{class:K({"px-2 py-1 rounded-full text-xs font-medium":!0,"bg-yellow-100 text-yellow-800":H.status==="To Do","bg-blue-100 text-blue-800":H.status==="In Progress","bg-green-100 text-green-800":H.status==="Done","bg-red-100 text-red-800":H.status==="Blocked","bg-gray-100 text-gray-800":H.status==="Archived"})},y(H.status),3)]),l("td",Ff,y(H.assigned_to),1),l("td",Rf,[l("button",{onClick:m[6]||(m[6]=lt=>f.value="tasks"),class:"text-indigo-600 hover:text-indigo-800 text-sm font-medium"}," View/Edit ")])]))),128))])])])])):(u(),c("div",Hf,[l("div",Uf,[m[21]||(m[21]=l("h4",{class:"text-lg font-semibold text-gray-900"},"Tasks Due Today",-1)),l("button",{onClick:m[7]||(m[7]=H=>f.value="tasks"),class:"text-sm text-indigo-600 hover:text-indigo-800 font-medium"}," View All Tasks → ")]),m[22]||(m[22]=l("p",{class:"text-gray-400 text-sm"},"No tasks due today.",-1))])),C.value?(u(),c("div",Bf,[l("div",zf,[m[23]||(m[23]=l("h4",{class:"text-lg font-semibold text-gray-900"},"Latest Emails",-1)),l("button",{onClick:m[8]||(m[8]=H=>f.value="emails"),class:"text-sm text-indigo-600 hover:text-indigo-800 font-medium"}," View All Emails → ")]),(Ee=a.value.emails)!=null&&Ee.length?(u(),c("div",qf,[l("table",Zf,[m[24]||(m[24]=l("thead",{class:"bg-gray-50"},[l("tr",null,[l("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Subject"),l("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"From"),l("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date"),l("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),l("tbody",Jf,[(u(!0),c(G,null,J(O.value,H=>{var lt;return u(),c("tr",{key:H.id,class:"hover:bg-gray-50 transition-colors"},[l("td",Kf,y(H.subject),1),l("td",Xf,y(((lt=H.sender)==null?void 0:lt.name)||"N/A"),1),l("td",Qf,y(new Date(H.created_at).toLocaleDateString()),1),l("td",e0,[l("button",{onClick:m[9]||(m[9]=ms=>f.value="emails"),class:"text-indigo-600 hover:text-indigo-800 text-sm font-medium"}," View ")])])}),128))])])])):(u(),c("div",Gf,"No email communication found."))])):D("",!0),R.value?(u(),c("div",t0,[l("div",s0,[m[26]||(m[26]=l("h4",{class:"text-lg font-semibold text-gray-900"},"Latest Notes",-1)),l("div",a0,[l("button",{onClick:m[10]||(m[10]=H=>f.value="notes"),class:"text-sm text-indigo-600 hover:text-indigo-800 font-medium"}," View All Notes → "),le.value?(u(),c("div",i0,[p(I,{class:"bg-indigo-600 hover:bg-indigo-700 transition-colors",onClick:m[11]||(m[11]=H=>d.value=!0)},{default:V(()=>m[25]||(m[25]=[W(" Add Note ",-1)])),_:1,__:[25]})])):D("",!0)])]),q.value.length?(u(),c("div",n0,[(u(!0),c(G,null,J(q.value,H=>{var lt;return u(),c("div",{key:H.id,class:"p-4 bg-gray-50 rounded-md shadow-sm hover:bg-gray-100 transition-colors"},[l("div",l0,[l("div",r0,[l("p",{class:K(["text-sm",{"text-gray-700":H.content!=="[Encrypted content could not be decrypted]","text-red-500 italic":H.content==="[Encrypted content could not be decrypted]"}])},[W(y(H.content)+" ",1),H.content==="[Encrypted content could not be decrypted]"?(u(),c("span",o0," (There was an issue decrypting this note. Please contact an administrator.) ")):D("",!0)],2),l("div",d0,[l("p",u0,"Added by "+y(((lt=H.user)==null?void 0:lt.name)||"Unknown")+" on "+y(new Date(H.created_at).toLocaleDateString()),1),H.reply_count>0?(u(),c("span",c0,y(H.reply_count)+" "+y(H.reply_count===1?"reply":"replies"),1)):D("",!0)])]),R.value&&H.chat_message_id&&a.value.google_chat_id?(u(),c("div",h0,[l("button",{onClick:m[12]||(m[12]=ms=>f.value="notes"),class:"text-sm text-indigo-600 hover:text-indigo-800"}," View ")])):D("",!0)])])}),128))])):(u(),c("p",m0,"No notes available."))])):D("",!0)])):D("",!0),f.value==="tasks"?(u(),ye(Wm,{key:1,"project-id":ve(s),"project-users":a.value.users||[],"can-manage-projects":Q.value,onTasksUpdated:N},null,8,["project-id","project-users","can-manage-projects"])):D("",!0),f.value==="emails"?(u(),ye(zv,{key:2,"project-id":ve(s),"project-clients":a.value.clients||[],"can-view-emails":C.value,"can-compose-emails":_.value,"can-approve-emails":A.value,onEmailsUpdated:de},null,8,["project-id","project-clients","can-view-emails","can-compose-emails","can-approve-emails"])):D("",!0),f.value==="standups"?(u(),ye(Ku,{key:3,projectId:ve(s),users:a.value.users||[],onStandupAdded:We},null,8,["projectId","users"])):D("",!0),f.value==="notes"?(u(),ye(Cf,{key:4,"project-id":ve(s),"google-chat-id":a.value.google_chat_id,"can-view-notes":R.value,"can-add-notes":le.value,onNotesUpdated:ue,onChangeTab:nt},null,8,["project-id","google-chat-id","can-view-notes","can-add-notes"])):D("",!0)]))]),p(je,{show:r.value,onClose:m[14]||(m[14]=H=>r.value=!1)},{default:V(()=>[p(ki,{show:r.value,project:a.value,statusOptions:[],departmentOptions:[],sourceOptions:[],clientRoleOptions:[],userRoleOptions:[],paymentTypeOptions:[],onClose:m[13]||(m[13]=H=>r.value=!1),onSubmit:k},null,8,["show","project"])]),_:1},8,["show"]),p(lc,{show:o.value,onClose:m[15]||(m[15]=H=>o.value=!1),onSaved:Ce,projectId:ve(s),projectUsers:a.value.users||[]},null,8,["show","projectId","projectUsers"]),p(ya,{show:h.value,onClose:m[16]||(m[16]=H=>h.value=!1),onStandupAdded:We,projectId:ve(s)},null,8,["show","projectId"]),p(fa,{show:d.value,"project-id":ve(s),onClose:m[17]||(m[17]=H=>d.value=!1),onNoteAdded:ue},null,8,["show","project-id"]),p(mc,{show:v.value,"project-id":ve(s),"project-clients":a.value.clients||[],onClose:m[18]||(m[18]=H=>v.value=!1)},null,8,["show","project-id","project-clients"])]}),_:1})],64)}}},C0=pa(v0,[["__scopeId","data-v-72a33701"]]);export{C0 as default};
