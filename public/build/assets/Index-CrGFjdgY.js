import{c as d,o as i,a as t,r as c,l as K,b as ft,e as u,u as p,h as vt,w as V,k as b,q as U,f,v as m,t as n,g as v,F as h,i as y,n as F,j as X,y as Y,K as J,L as bt,H as ht,T as mt}from"./app-BWTxZZDy.js";import{r as yt,a as _t,b as wt,_ as kt}from"./AuthenticatedLayout-BMPCQPv1.js";import{_ as Ct}from"./MultiSelectDropdown-Clvs2N0y.js";import{r as Q,_ as tt}from"./ChartComponent-CP7RF9Na.js";import{R as et}from"./RightSidebar-SqaNTBDP.js";import{_ as jt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as $t}from"./ClockIcon-8Lbw11xt.js";import{r as Dt,a as Mt,b as Tt}from"./NoticeboardModal-DTW0kpEY.js";import{r as Et}from"./BriefcaseIcon-BbP1d6j1.js";import{r as Vt}from"./PlusIcon-Bmn3jLdq.js";import{r as st,a as Ut}from"./PrinterIcon-f80raAek.js";import{r as ot}from"./ChevronDownIcon-pzgR3djb.js";import{r as Ft}from"./CalendarIcon-2Z-0OCBW.js";import{r as St}from"./CheckCircleIcon-Dv9AuwUV.js";import"./PrimaryButton-BzIltyHC.js";import"./Modal-DhzQz1HA.js";import"./InputLabel-BQibQid6.js";import"./InputError-CvLO1Qua.js";import"./SecondaryButton-BkrXt0yv.js";import"./index-BgGJTKOW.js";import"./BaseFormModal-BUVfnO--.js";import"./TextInput--vAmjZn0.js";import"./SelectDropdown-OjIlWwqk.js";/* empty css                                                                       */import"./debounce-C-hnF4Z3.js";import"./ApplicationLogo-he3qmFdk.js";import"./createLucideIcon-oq7di1Il.js";import"./plus-DNukUt4O.js";import"./DangerButton-D_i8NBBl.js";import"./moment-BLMuvzoS.js";import"./taskState-CZv-z7Oy.js";import"./x-Dr1vY3Z0.js";import"./auto-BIBwKD9g.js";import"./chart-DUfl3Dpl.js";function Pt(rt,g){return i(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"})])}const Ht={class:"flex justify-between items-center print:hidden"},It={class:"py-8 bg-gray-50 min-h-screen print:bg-white print:py-0"},Nt={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 space-y-6"},Rt={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 print:hidden"},At={class:"grid grid-cols-1 md:grid-cols-5 gap-6 items-end"},Lt={class:"col-span-2"},Bt=["disabled"],zt={key:0,class:"grid grid-cols-2 md:grid-cols-4 gap-4"},qt={class:"bg-white p-5 rounded-xl border border-gray-200 shadow-sm"},Ot={class:"flex items-center justify-between mb-2"},Gt={class:"text-3xl font-black text-gray-900"},Wt={class:"bg-white p-5 rounded-xl border border-gray-200 shadow-sm"},Zt={class:"flex items-center justify-between mb-2"},Kt={class:"text-3xl font-black text-gray-900"},Xt={class:"bg-white p-5 rounded-xl border border-gray-200 shadow-sm"},Yt={class:"flex items-center justify-between mb-2"},Jt={class:"text-3xl font-black text-gray-900"},Qt={class:"bg-white p-5 rounded-xl border border-gray-200 shadow-sm"},te={class:"flex items-center justify-between mb-2"},ee={class:"text-3xl font-black text-red-600"},se={key:1,class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},oe={class:"lg:col-span-2 bg-white rounded-xl border border-gray-200 p-6 shadow-sm"},re={class:"text-sm font-bold text-gray-900 mb-6 flex items-center justify-between"},le={class:"flex items-center"},ae={class:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm"},ne={class:"text-sm font-bold text-gray-900 mb-6 flex items-center"},ie={key:2,class:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden"},de={class:"px-6 py-4 border-b border-gray-100 flex items-center justify-between bg-gray-50/30"},ue={class:"text-sm font-bold text-gray-900 flex items-center"},ce={class:"overflow-x-auto"},pe={class:"w-full text-sm text-left"},xe={class:"divide-y divide-gray-100"},ge={class:"px-6 py-4 font-bold text-gray-900"},fe={class:"px-6 py-4 text-right font-mono"},ve={class:"px-6 py-4 text-right"},be={class:"px-2 py-1 rounded bg-green-50 text-green-700 font-bold text-xs"},he={class:"px-6 py-4"},me={class:"w-full bg-gray-100 rounded-full h-1.5 overflow-hidden"},ye=["onClick"],_e={class:"flex items-center space-x-4"},we=["src"],ke={class:"font-bold text-gray-900"},Ce={class:"text-xs text-gray-500 uppercase tracking-widest font-bold"},je={class:"flex items-center space-x-6"},$e=["onClick"],De={class:"text-right"},Me={class:"text-2xl font-black text-indigo-600"},Te={class:"p-0 overflow-x-auto border-t border-gray-100 rounded-b-xl relative z-20"},Ee={class:"w-full text-sm text-left"},Ve={class:"bg-gray-50 text-gray-400 text-[10px] uppercase font-bold tracking-wider"},Ue={class:"px-4 py-3 text-right"},Fe={class:"flex items-center justify-end gap-1"},Se={class:"divide-y divide-gray-200"},Pe={class:"hover:bg-indigo-50/30 transition"},He=["onClick"],Ie={class:"px-4 py-4"},Ne=["onClick"],Re={class:"text-[10px] text-indigo-500 font-bold uppercase"},Ae={class:"px-4 py-4"},Le={class:"flex flex-col gap-1"},Be={class:"text-[10px] font-bold"},ze={key:0,class:"text-[8px] font-black uppercase bg-red-100 px-1 rounded"},qe={class:"px-4 py-4 text-center"},Oe={class:"inline-block relative"},Ge=["onMouseenter"],We={class:"px-4 py-4 text-right"},Ze=["onUpdate:modelValue","onChange"],Ke={class:"px-4 py-4 text-right"},Xe=["onUpdate:modelValue","onChange"],Ye={class:"px-4 py-4 text-right font-black text-gray-900"},Je={key:0,class:"bg-gray-50/50"},Qe={colspan:"7",class:"px-12 py-4"},ts={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},es={class:"text-[9px] font-bold text-gray-400 uppercase"},ss={class:"text-[11px] font-mono text-gray-600"},os={class:"text-xs font-black text-indigo-600"},rs={key:1,class:"text-xs text-gray-400 italic"},ls={key:0,class:"fixed inset-0 z-[100] flex items-center justify-center p-4"},as={class:"relative bg-white rounded-2xl shadow-2xl w-full max-w-lg overflow-hidden transition-all transform scale-100"},ns={class:"p-6 border-b border-gray-100 flex justify-between items-center"},is={class:"text-sm text-gray-500"},ds={class:"font-bold text-indigo-600"},us=["value"],cs={class:"grid grid-cols-2 gap-4"},ps={class:"mb-3 font-black border-b border-slate-700 pb-2 uppercase tracking-tighter text-indigo-300 flex items-center justify-between"},xs={class:"text-[9px] bg-slate-800 px-2 py-0.5 rounded text-slate-400"},gs={class:"max-h-60 overflow-y-auto space-y-2 custom-scrollbar pr-1"},fs={class:"shrink-0 mt-0.5 text-xs"},vs={__name:"Index",setup(rt){const g=c([]),k=c({}),z=c([]),q=c([]),C=c(!1),S=c([]),P=c(""),H=c(""),_=c({}),j=c({}),$=c(!1),x=c({user_id:null,user_name:"",name:"",project_id:"",hours:"",date:""}),D=c(!1),I=c(null),M=c(null),O=c([]),N=c(!1),T=c(null),R=c({top:0,left:0}),A=c(!1),lt=(o,e)=>{var r;if(!((r=o.subtasks)!=null&&r.length))return;const s=e.currentTarget.getBoundingClientRect();T.value=o,R.value={top:s.top+window.scrollY,left:s.left+s.width/2+window.scrollX},A.value=!0},at=()=>{A.value=!1},nt=o=>{_.value[o]=!_.value[o]},it=o=>{j.value[o]=!j.value[o]},dt=async o=>{if(!(!o||!o.task_id)){if(I.value=o.task_id,M.value=o.project_id||0,M.value)try{const e=await window.axios.get(`/api/projects/${M.value}/sections/clients-users`);O.value=e.data.users||[]}catch(e){console.error("Failed to fetch project users",e)}D.value=!0}},ut=o=>{x.value={user_id:o.user_id,user_name:o.user_name,name:"",project_id:"",hours:"",date:new Date().toISOString().split("T")[0]},$.value=!0},L=()=>{$.value=!1},ct=async()=>{if(!(!x.value.name||!x.value.hours))try{await window.axios.post("/api/tasks/manual-effort",{name:x.value.name,assigned_to_user_id:x.value.user_id,project_id:x.value.project_id||null,manual_effort_override:parseFloat(x.value.hours),date:x.value.date}),$.value=!1,B()}catch(o){console.error("Failed to create manual entry",o)}},pt=o=>{var e;for(let s of g.value){const r=s.tasks.findIndex(l=>l.task_id===o.id);if(r!==-1){const l=s.tasks[r];if(l.task_name=o.name,l.effort=o.effort,l.priority=o.priority,l.status=((e=o.status)==null?void 0:e.value)||o.status,l.due_date=o.due_date,l.subtasks=o.subtasks||[],l.subtasks.length>0){const a=l.subtasks.length,w=l.subtasks.filter(gt=>gt.status==="done").length;l.checklist=`${w}/${a}`}break}}},E=K(()=>{let o=0,e=0,s=0,r=0;return g.value.forEach(l=>{o+=parseFloat(l.total_hours||0),l.tasks.forEach(a=>{e+=parseInt(a.effort||0),a.status==="Done"&&s++,a.is_late&&r++})}),{totalHours:o.toFixed(1),velocity:e,completed:s,late:r}}),G=K(()=>{const o={};return g.value.forEach(e=>{e.tasks.forEach(s=>{const r=s.due_date||"N/A";if(s.status==="Done"&&(o[r]||(o[r]={hours:0,points:0}),o[r].points+=parseInt(s.effort||0)),(s.sessions||[]).forEach(l=>{const a=(l.start||"").split(" ")[0];a&&(o[a]||(o[a]={hours:0,points:0}),o[a].hours+=parseFloat(l.duration_seconds||0)/3600)}),s.manual_effort_override&&(!s.sessions||s.sessions.length===0)){const l=s.due_date||"Manual";o[l]||(o[l]={hours:0,points:0}),o[l].hours+=parseFloat(s.manual_effort_override)}})}),Object.keys(o).sort().reverse().map(e=>{const s=o[e],r=s.hours>0?(s.points/s.hours).toFixed(1):0;return{date:e,...s,efficiency:r}})}),B=async()=>{C.value=!0;try{const o=await window.axios.get("/api/productivity/report",{params:{user_ids:S.value.join(","),date_start:P.value,date_end:H.value}});g.value=o.data.reportData.details,k.value=o.data.reportData.charts,z.value=o.data.users,q.value=o.data.projects,g.value.length===1&&(_.value[g.value[0].user_id]=!0)}catch(o){console.error(o)}finally{C.value=!1}},W=async(o,e,s,r)=>{if(s==="manual_effort_override"){const l=r===""||r===null?null:parseFloat(r);o.manual_effort_override=l,l!==null&&!isNaN(l)?o.used_seconds=l*3600:o.used_seconds=o.total_seconds||0;let a=0;e.tasks.forEach(w=>{a+=parseFloat(w.used_seconds||0)}),e.total_seconds=a,e.total_hours=(a/3600).toFixed(2)}else o[s]=r;try{await window.axios.post(`/api/tasks/${o.task_id}/productivity-meta`,{[s]:r})}catch(l){console.error("Persistence failed",l)}},Z=o=>{if(o==null)return"0h";const e=Math.floor(Math.abs(o)/3600),s=Math.floor(Math.abs(o)%3600/60);return`${e}h ${s}m`};ft(()=>B());const xt=()=>window.print();return(o,e)=>(i(),d(h,null,[u(p(vt),{title:"Productivity Dashboard"}),u(kt,null,{header:V(()=>[t("div",Ht,[e[12]||(e[12]=t("h2",{class:"font-bold text-2xl text-gray-900 tracking-tight"},"Productivity Dashboard",-1)),t("button",{onClick:xt,class:"flex items-center px-4 py-2 bg-white border border-gray-300 rounded-lg text-sm font-semibold text-gray-700 hover:bg-gray-50 shadow-sm transition"},[u(p(Ut),{class:"h-4 w-4 mr-2"}),e[11]||(e[11]=v(" Export PDF ",-1))])])]),default:V(()=>[t("div",It,[t("div",Nt,[t("div",Rt,[t("div",At,[t("div",Lt,[e[13]||(e[13]=t("label",{class:"text-xs font-bold text-gray-500 uppercase mb-2 block"},"Team Members",-1)),u(Ct,{modelValue:S.value,"onUpdate:modelValue":e[0]||(e[0]=s=>S.value=s),options:z.value,"is-multi":!0,placeholder:"Search team members..."},null,8,["modelValue","options"])]),t("div",null,[e[14]||(e[14]=t("label",{class:"text-xs font-bold text-gray-500 uppercase mb-2 block"},"Range Start",-1)),f(t("input",{type:"date","onUpdate:modelValue":e[1]||(e[1]=s=>P.value=s),class:"w-full rounded-lg border-gray-300 text-sm focus:ring-indigo-500"},null,512),[[m,P.value]])]),t("div",null,[e[15]||(e[15]=t("label",{class:"text-xs font-bold text-gray-500 uppercase mb-2 block"},"Range End",-1)),f(t("input",{type:"date","onUpdate:modelValue":e[2]||(e[2]=s=>H.value=s),class:"w-full rounded-lg border-gray-300 text-sm focus:ring-indigo-500"},null,512),[[m,H.value]])]),t("button",{onClick:B,disabled:C.value,class:"w-full bg-indigo-600 text-white font-bold py-2.5 rounded-lg hover:bg-indigo-700 transition disabled:opacity-50"},n(C.value?"Generating...":"Refresh Report"),9,Bt)])]),g.value.length?(i(),d("div",zt,[t("div",qt,[t("div",Ot,[u(p($t),{class:"h-6 w-6 text-indigo-500"}),e[16]||(e[16]=t("span",{class:"text-xs font-bold text-gray-400"},"Total Hours",-1))]),t("div",Gt,n(E.value.totalHours)+"h",1)]),t("div",Wt,[t("div",Zt,[u(p(Q),{class:"h-6 w-6 text-green-500"}),e[17]||(e[17]=t("span",{class:"text-xs font-bold text-gray-400"},"Total Velocity",-1))]),t("div",Kt,n(E.value.velocity)+" pts",1)]),t("div",Xt,[t("div",Yt,[u(p(Dt),{class:"h-6 w-6 text-blue-500"}),e[18]||(e[18]=t("span",{class:"text-xs font-bold text-gray-400"},"Tasks Completed",-1))]),t("div",Jt,n(E.value.completed),1)]),t("div",Qt,[t("div",te,[u(p(Mt),{class:"h-6 w-6 text-red-500"}),e[19]||(e[19]=t("span",{class:"text-xs font-bold text-gray-400"},"Overdue Items",-1))]),t("div",ee,n(E.value.late),1)])])):b("",!0),k.value.daily_trend?(i(),d("div",se,[t("div",oe,[t("h3",re,[t("div",le,[u(p(Q),{class:"h-4 w-4 mr-2 text-indigo-600"}),e[20]||(e[20]=v(" Activity vs Output Trend ",-1))]),e[21]||(e[21]=t("div",{class:"flex gap-4 text-[10px] font-bold uppercase tracking-wider"},[t("span",{class:"flex items-center gap-1"},[t("span",{class:"w-2 h-2 rounded-full bg-indigo-500"}),v(" Hours")]),t("span",{class:"flex items-center gap-1"},[t("span",{class:"w-2 h-2 rounded-full bg-green-500"}),v(" Points")])],-1))]),u(tt,{data:k.value.daily_trend,type:"line",height:"250"},null,8,["data"])]),t("div",ae,[t("h3",ne,[u(p(Et),{class:"h-4 w-4 mr-2 text-green-600"}),e[22]||(e[22]=v(" Project Load ",-1))]),u(tt,{data:k.value.project_dist,type:"pie",height:"250"},null,8,["data"])])])):b("",!0),G.value.length?(i(),d("div",ie,[t("div",de,[t("h3",ue,[u(p(Pt),{class:"h-4 w-4 mr-2 text-indigo-600"}),e[23]||(e[23]=v(" Daily Productivity Breakdown ",-1))])]),t("div",ce,[t("table",pe,[e[24]||(e[24]=t("thead",{class:"bg-gray-50/50 text-[10px] uppercase font-bold text-gray-500 tracking-wider"},[t("tr",null,[t("th",{class:"px-6 py-3"},"Date"),t("th",{class:"px-6 py-3 text-right"},"Hours Logged"),t("th",{class:"px-6 py-3 text-right"},"Points Done"),t("th",{class:"px-6 py-3 text-right"},"Efficiency (Pts/Hr)"),t("th",{class:"px-6 py-3 w-1/3"},"Velocity Meter")])],-1)),t("tbody",xe,[(i(!0),d(h,null,y(G.value,s=>(i(),d("tr",{key:s.date,class:"hover:bg-gray-50/50"},[t("td",ge,n(s.date),1),t("td",fe,n(s.hours.toFixed(1))+"h",1),t("td",ve,[t("span",be,n(s.points)+" pts",1)]),t("td",{class:F(["px-6 py-4 text-right font-black",s.efficiency>2?"text-green-600":"text-gray-500"])},n(s.efficiency),3),t("td",he,[t("div",me,[t("div",{class:"bg-indigo-500 h-full rounded-full transition-all duration-500",style:X({width:Math.min(s.points*10,100)+"%"})},null,4)])])]))),128))])])])])):b("",!0),(i(!0),d(h,null,y(g.value,s=>(i(),d("div",{key:s.user_id,class:"bg-white rounded-xl border border-gray-200 shadow-sm"},[t("div",{onClick:r=>nt(s.user_id),class:"p-6 flex items-center justify-between bg-gray-50/50 cursor-pointer hover:bg-gray-100 transition print:cursor-default rounded-t-xl relative z-10"},[t("div",_e,[t("img",{src:s.avatar,class:"h-12 w-12 rounded-full border-2 border-white shadow-sm"},null,8,we),t("div",null,[t("h4",ke,n(s.user_name),1),t("p",Ce,n(s.tasks.length)+" Tasks Managed",1)])]),t("div",je,[t("button",{onClick:Y(r=>ut(s),["stop"]),class:"p-2 rounded-full hover:bg-white text-gray-400 hover:text-indigo-600 transition print:hidden",title:"Add Manual Activity"},[u(p(Vt),{class:"h-5 w-5"})],8,$e),t("div",De,[t("div",Me,n(s.total_hours)+" hrs",1),e[25]||(e[25]=t("p",{class:"text-[10px] text-gray-400 font-bold uppercase"},"Total Charged",-1))]),(i(),U(J(_.value[s.user_id]?p(st):p(ot)),{class:"h-5 w-5 text-gray-400 print:hidden"}))])],8,ye),f(t("div",Te,[t("table",Ee,[t("thead",Ve,[t("tr",null,[e[27]||(e[27]=t("th",{class:"px-4 py-3 w-8"},null,-1)),e[28]||(e[28]=t("th",{class:"px-4 py-3"},"Task Detail",-1)),e[29]||(e[29]=t("th",{class:"px-4 py-3"},"Status / Due",-1)),e[30]||(e[30]=t("th",{class:"px-4 py-3 text-center"},"Checklist",-1)),t("th",Ue,[t("div",Fe,[e[26]||(e[26]=v(" Effort ",-1)),u(p(yt),{class:"h-3 w-3 cursor-pointer",onClick:e[3]||(e[3]=r=>N.value=!0)})])]),e[31]||(e[31]=t("th",{class:"px-4 py-3 text-right"},"Manual (Hrs)",-1)),e[32]||(e[32]=t("th",{class:"px-4 py-3 text-right"},"Total Time",-1))])]),t("tbody",Se,[(i(!0),d(h,null,y(s.tasks,r=>{var l;return i(),d(h,{key:r.task_id},[t("tr",Pe,[t("td",{class:"px-4 py-4 cursor-pointer text-gray-300 hover:text-indigo-600",onClick:a=>it(r.task_id)},[(i(),U(J(j.value[r.task_id]?p(st):p(ot)),{class:"h-4 w-4"}))],8,He),t("td",Ie,[t("div",{onClick:a=>dt(r),class:"font-bold text-gray-900 mb-0.5 cursor-pointer hover:text-indigo-600 hover:underline transition print:no-underline"},n(r.task_name),9,Ne),t("div",Re,n(r.project_name),1)]),t("td",Ae,[t("div",Le,[t("span",{class:F([{"bg-green-100 text-green-700":r.status==="Done","bg-yellow-100 text-yellow-700":r.status==="In Progress","bg-gray-100 text-gray-600":r.status==="To Do"},"px-2 py-0.5 rounded text-[9px] font-black uppercase w-fit"])},n(r.status),3),t("div",{class:F(["flex items-center gap-1",r.is_late?"text-red-500":"text-gray-400"])},[u(p(Ft),{class:"h-3 w-3"}),t("span",Be,n(r.due_date||"No Date"),1),r.is_late?(i(),d("span",ze,"Late")):b("",!0)],2)])]),t("td",qe,[t("div",Oe,[t("span",{class:"inline-flex items-center px-2 py-1 rounded-full text-[10px] font-bold bg-gray-100 text-gray-600 cursor-pointer hover:bg-gray-200 transition",onMouseenter:a=>lt(r,a),onMouseleave:at},[u(p(St),{class:"h-3 w-3 mr-1"}),v(" "+n(r.checklist||"0/0"),1)],40,Ge)])]),t("td",We,[f(t("input",{type:"number","onUpdate:modelValue":a=>r.effort=a,onChange:a=>W(r,s,"effort",r.effort),class:"w-16 text-right border-0 bg-transparent focus:ring-1 focus:ring-indigo-200 rounded text-xs font-bold"},null,40,Ze),[[m,r.effort]])]),t("td",Ke,[f(t("input",{type:"number",step:"0.5","onUpdate:modelValue":a=>r.manual_effort_override=a,onChange:a=>W(r,s,"manual_effort_override",r.manual_effort_override),class:"w-16 text-right border-0 bg-transparent focus:ring-1 focus:ring-indigo-200 rounded text-xs font-bold"},null,40,Xe),[[m,r.manual_effort_override]])]),t("td",Ye,n(Z(r.used_seconds)),1)]),j.value[r.task_id]?(i(),d("tr",Je,[t("td",Qe,[e[33]||(e[33]=t("div",{class:"text-[10px] font-black text-gray-400 uppercase mb-3 tracking-widest"},"Activity Session Logs",-1)),(l=r.sessions)!=null&&l.length?(i(),d("div",ts,[(i(!0),d(h,null,y(r.sessions,(a,w)=>(i(),d("div",{key:w,class:"bg-white p-3 rounded-lg border border-gray-100 shadow-sm flex items-center justify-between"},[t("div",null,[t("div",es,n(a.type==="ongoing"?"Running":"Recorded"),1),t("div",ss,n((a.start||"").split(" ")[1])+" - "+n(a.end==="Now"?"Now":(a.end||"").split(" ")[1]),1)]),t("div",os,n(Z(a.duration_seconds)),1)]))),128))])):(i(),d("div",rs,"No activity logs tracked for this specific period."))])])):b("",!0)],64)}),128))])])],512),[[bt,_.value[s.user_id]]])]))),128))])]),u(et,{show:N.value,"onUpdate:show":e[4]||(e[4]=s=>N.value=s),title:"Effort Estimation Guide",initialWidth:30},{content:V(()=>[u(_t)]),_:1},8,["show"]),u(et,{show:D.value,"onUpdate:show":e[6]||(e[6]=s=>D.value=s),title:"Task Details",initialWidth:45},{content:V(()=>[I.value?(i(),U(wt,{key:0,"task-id":I.value,"project-id":M.value,"project-users":O.value,onClose:e[5]||(e[5]=s=>D.value=!1),onTaskUpdated:pt},null,8,["task-id","project-id","project-users"])):b("",!0)]),_:1},8,["show"]),$.value?(i(),d("div",ls,[t("div",{class:"absolute inset-0 bg-gray-900/60 backdrop-blur-sm",onClick:L}),t("div",as,[t("div",ns,[e[34]||(e[34]=t("h3",{class:"text-lg font-bold text-gray-900"},"Add Manual Activity",-1)),t("button",{onClick:L,class:"text-gray-400 hover:text-gray-600"},[u(p(Tt),{class:"h-6 w-6"})])]),t("form",{onSubmit:Y(ct,["prevent"]),class:"p-6 space-y-4"},[t("p",is,[e[35]||(e[35]=v("Manual entry for: ",-1)),t("span",ds,n(x.value.user_name),1)]),t("div",null,[e[36]||(e[36]=t("label",{class:"block text-xs font-bold text-gray-500 uppercase mb-1"},"Task Title",-1)),f(t("input",{type:"text","onUpdate:modelValue":e[7]||(e[7]=s=>x.value.name=s),required:"",class:"w-full rounded-lg border-gray-300 focus:ring-indigo-500 text-sm",placeholder:"Work description..."},null,512),[[m,x.value.name]])]),t("div",null,[e[38]||(e[38]=t("label",{class:"block text-xs font-bold text-gray-500 uppercase mb-1"},"Project Link",-1)),f(t("select",{"onUpdate:modelValue":e[8]||(e[8]=s=>x.value.project_id=s),class:"w-full rounded-lg border-gray-300 focus:ring-indigo-500 text-sm"},[e[37]||(e[37]=t("option",{value:""},"General / Internal",-1)),(i(!0),d(h,null,y(q.value,s=>(i(),d("option",{key:s.value,value:s.value},n(s.label),9,us))),128))],512),[[ht,x.value.project_id]])]),t("div",cs,[t("div",null,[e[39]||(e[39]=t("label",{class:"block text-xs font-bold text-gray-500 uppercase mb-1"},"Date",-1)),f(t("input",{type:"date","onUpdate:modelValue":e[9]||(e[9]=s=>x.value.date=s),required:"",class:"w-full rounded-lg border-gray-300 focus:ring-indigo-500 text-sm"},null,512),[[m,x.value.date]])]),t("div",null,[e[40]||(e[40]=t("label",{class:"block text-xs font-bold text-gray-500 uppercase mb-1"},"Hours Logged",-1)),f(t("input",{type:"number",step:"0.1","onUpdate:modelValue":e[10]||(e[10]=s=>x.value.hours=s),required:"",class:"w-full rounded-lg border-gray-300 focus:ring-indigo-500 text-sm",placeholder:"e.g. 1.5"},null,512),[[m,x.value.hours]])])]),t("div",{class:"pt-4 flex gap-3"},[e[41]||(e[41]=t("button",{type:"submit",class:"flex-1 bg-indigo-600 text-white font-bold py-2.5 rounded-xl hover:bg-indigo-700 transition"},"Save Log",-1)),t("button",{type:"button",onClick:L,class:"px-6 py-2.5 border border-gray-200 text-gray-600 font-bold rounded-xl hover:bg-gray-50 transition"},"Cancel")])],32)])])):b("",!0),(i(),U(mt,{to:"body"},[A.value&&T.value?(i(),d("div",{key:0,class:"fixed z-[9999] w-64 bg-slate-900 text-white text-[11px] rounded-xl shadow-2xl p-4 border border-slate-700 pointer-events-none",style:X({top:R.value.top-10+"px",left:R.value.left+"px",transform:"translate(-50%, -100%)"})},[t("div",ps,[e[42]||(e[42]=t("span",null,"Activity Checklist",-1)),t("span",xs,n(T.value.checklist),1)]),t("div",gs,[(i(!0),d(h,null,y(T.value.subtasks,(s,r)=>(i(),d("div",{key:r,class:"flex items-start gap-3 text-left"},[t("span",fs,n(s.status==="done"?"✅":"⬜"),1),t("span",{class:F(["leading-snug",{"text-slate-400 line-through":s.status==="done"}])},n(s.name),3)]))),128))]),e[43]||(e[43]=t("div",{class:"absolute top-full left-1/2 -translate-x-1/2 border-8 border-transparent border-t-slate-900"},null,-1))],4)):b("",!0)]))]),_:1})],64))}},Ys=jt(vs,[["__scopeId","data-v-118cd077"]]);export{Ys as default};
