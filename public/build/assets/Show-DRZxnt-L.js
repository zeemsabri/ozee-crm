import{B as Vt,z as B,C as Ft,L as Lt,r as c,M as Ot,p as k,D as Bt,s as Fe,A as It,N as Wt,h as l,o as a,e as d,u as Le,q as Ht,a as p,b as t,t as n,g as u,k as v,F as E,i as D,c as Gt,n as re,f as C,v as V,d as he,j as F}from"./app-5D5n9o1Q.js";import{_ as qt}from"./AuthenticatedLayout-BgxwBjNf.js";import{P as M}from"./PrimaryButton-BLRlwwuZ.js";import{a as P,_ as L}from"./SecondaryButton-DptR73yl.js";import{_ as zt}from"./ProjectForm-DcGd_cTs.js";import{_ as Qt}from"./NotesModal-I2G-6hal.js";import{_ as ie,a as Ge}from"./TextInput-DiKue60S.js";import{_ as de}from"./InputError-CRa9oDAN.js";import{R as qe}from"./RichTextEditor-Dm9e8eFz.js";import{s as Yt}from"./vue-multiselect-BsFfqiwr.js";import{_ as Jt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-BDyO1mDp.js";import"./Checkbox-BKL4dpOn.js";const Kt={class:"py-8 max-w-full mx-auto px-4 sm:px-6 lg:px-8"},Xt={key:0,class:"text-center text-gray-600 text-lg animate-pulse"},Zt={key:1,class:"text-center text-red-600 text-lg font-medium"},es={key:2,class:"space-y-8"},ts={class:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow mb-6"},ss={class:"flex justify-between items-center mb-4"},os={key:0,class:"flex gap-3"},as={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ls={class:"text-2xl font-bold text-gray-900 tracking-tight mb-2"},ns={class:"text-gray-600 text-base"},rs={class:"space-y-3 text-sm text-gray-700"},is={class:"flex space-x-4 mt-2"},ds=["href"],us=["href"],cs=["href"],vs={class:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-6"},ps={class:"bg-white p-4 rounded-xl shadow-md hover:shadow-lg transition-shadow"},ms={class:"text-2xl font-bold text-indigo-600"},gs={class:"bg-white p-4 rounded-xl shadow-md hover:shadow-lg transition-shadow"},fs={class:"text-2xl font-bold text-indigo-600"},ys={class:"bg-white p-4 rounded-xl shadow-md hover:shadow-lg transition-shadow"},xs={class:"text-2xl font-bold text-indigo-600"},_s={class:"bg-white p-4 rounded-xl shadow-md hover:shadow-lg transition-shadow"},bs={class:"text-2xl font-bold text-indigo-600"},ws={class:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-6"},ks={key:0,class:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow"},hs={class:"space-y-3 text-sm text-gray-700"},js={key:0},Cs={class:"mt-2 space-y-2"},Es=["onClick"],Ds={class:"font-medium text-gray-800"},Ms={class:"text-indigo-600"},Ns={class:"text-gray-500"},$s={key:0},As={key:1},Ts={key:0,class:"p-3 bg-white"},Ps={class:"text-sm text-gray-700"},Ss={key:0,class:"mt-2"},Rs={class:"list-disc ml-5 mt-1 text-xs text-gray-600"},Us={key:1,class:"text-gray-400"},Vs={key:1,class:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow"},Fs={key:0,class:"space-y-3 text-sm text-gray-700"},Ls={class:"text-gray-900"},Os=["href"],Bs={key:1,class:"text-gray-400 text-sm"},Is={class:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow"},Ws={key:0,class:"space-y-3 text-sm text-gray-700"},Hs={class:"text-gray-900"},Gs=["href"],qs={key:1,class:"text-gray-400 text-sm"},zs={class:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow"},Qs={class:"flex justify-between items-center mb-4"},Ys={class:"flex gap-2"},Js={key:0},Ks={key:1},Xs={class:"mb-6 overflow-x-auto"},Zs={key:0,class:"text-center text-gray-600 text-sm animate-pulse py-4"},eo={key:1,class:"text-center py-4"},to={key:2,class:"relative py-8"},so={class:"relative flex justify-between"},oo={key:0,class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ao={key:1,class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},lo={key:2,class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},no={key:3,class:"w-2 h-2 bg-white rounded-full"},ro={class:"absolute -top-8 transform -translate-x-1/2 left-1/2 w-32"},io=["title"],uo={class:"absolute top-8 transform -translate-x-1/2 left-1/2"},co={class:"text-xs text-gray-500 whitespace-nowrap"},vo={class:"mb-6 bg-gray-50 p-4 rounded-lg"},po={class:"flex flex-wrap items-center gap-4"},mo={class:"flex-1 min-w-[200px]"},go={class:"flex-1 min-w-[200px]"},fo=["value"],yo={class:"flex-1 min-w-[200px]"},xo=["value"],_o={class:"flex-1 min-w-[200px]"},bo=["value"],wo={key:0,class:"mt-3 text-sm text-gray-600"},ko={key:0,class:"text-red-600 font-medium"},ho={key:0,class:"text-center text-gray-600 text-sm animate-pulse py-4"},jo={key:1,class:"text-center py-4"},Co={class:"text-red-600 text-sm font-medium"},Eo={key:2,class:"overflow-x-auto"},Do={class:"min-w-full divide-y divide-gray-200"},Mo={class:"bg-white divide-y divide-gray-200"},No={class:"px-4 py-3 text-sm text-gray-900"},$o={class:"px-4 py-3 text-sm text-gray-700"},Ao={class:"px-4 py-3 text-sm text-gray-700"},To={class:"px-4 py-3 text-sm text-gray-700"},Po={class:"px-4 py-3 text-sm text-gray-700"},So={class:"px-4 py-3 text-right"},Ro={class:"flex justify-end space-x-2"},Uo=["onClick"],Vo=["onClick"],Fo=["onClick"],Lo=["onClick"],Oo={key:3,class:"text-center py-4"},Bo={key:0,class:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow"},Io={class:"flex justify-between items-center mb-4"},Wo={key:0,class:"flex gap-3"},Ho={key:1,class:"mt-2 bg-green-100 border border-green-400 text-green-700 px-4 py-2 rounded relative",role:"alert"},Go={class:"block sm:inline"},qo={key:0,class:"text-center text-gray-600 text-sm animate-pulse py-4"},zo={key:1,class:"text-center text-red-600 text-sm font-medium py-4"},Qo={key:2,class:"overflow-x-auto"},Yo={class:"min-w-full divide-y divide-gray-200"},Jo={class:"bg-white divide-y divide-gray-200"},Ko={class:"px-4 py-3 text-sm text-gray-900"},Xo={class:"px-4 py-3 text-sm text-gray-700"},Zo={class:"px-4 py-3 text-sm text-gray-700"},ea={class:"px-4 py-3 text-sm text-gray-700"},ta={class:"px-4 py-3 text-right"},sa={key:3,class:"text-gray-400 text-sm"},oa={key:1,class:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow"},aa={class:"flex justify-between items-center mb-4"},la={key:0},na={key:0,class:"space-y-4"},ra={class:"flex justify-between"},ia={class:"flex-grow"},da={key:0,class:"text-xs text-red-400 block mt-1"},ua={class:"flex items-center mt-1"},ca={class:"text-xs text-gray-500"},va={key:0,class:"ml-2 px-2 py-0.5 bg-indigo-100 text-indigo-800 text-xs rounded-full"},pa={key:0},ma={key:1,class:"text-gray-400 text-sm"},ga={class:"p-6"},fa={class:"flex justify-between items-center mb-4"},ya={key:0,class:"space-y-4"},xa={class:"border-b pb-4"},_a={class:"text-xl font-medium text-gray-900 mb-2"},ba={class:"grid grid-cols-2 gap-4 text-sm"},wa={class:"text-gray-600"},ka={class:"text-gray-900"},ha={class:"text-gray-600 mt-1"},ja={class:"text-gray-600"},Ca={class:"text-gray-900"},Ea={class:"prose max-w-none"},Da=["innerHTML"],Ma={key:0,class:"mt-4 p-4 bg-red-50 rounded-md"},Na={class:"text-red-700"},$a={key:1,class:"mt-4 text-sm text-gray-600"},Aa={key:0},Ta={key:2,class:"mt-6 flex justify-end space-x-2"},Pa={class:"p-6"},Sa={class:"flex justify-between items-center mb-4"},Ra={key:0,class:"space-y-4"},Ua={key:0,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert"},Va={class:"block sm:inline"},Fa={class:"mb-4"},La={class:"mb-6"},Oa={class:"mt-6 flex justify-end space-x-2"},Ba={class:"p-6"},Ia={class:"flex justify-between items-center mb-4"},Wa={key:0,class:"space-y-4"},Ha={key:0,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert"},Ga={class:"block sm:inline"},qa={class:"mb-6"},za={class:"mt-6 flex justify-end space-x-2"},Qa={class:"p-6"},Ya={class:"flex justify-between items-center mb-4"},Ja={key:0,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert"},Ka={class:"block sm:inline"},Xa={class:"mb-4"},Za={class:"multiselect__tag"},el=["onClick"],tl={class:"mb-4"},sl={class:"mb-6"},ol={class:"flex items-center justify-end"},al={class:"p-6"},ll={class:"flex justify-between items-center mb-4"},nl={key:0,class:"mb-4 p-3 bg-gray-100 rounded-md"},rl={class:"text-sm text-gray-700"},il={class:"text-xs text-gray-500 mt-1"},dl={key:1,class:"mb-4"},ul={key:0,class:"text-center py-4"},cl={key:1,class:"space-y-3 max-h-60 overflow-y-auto"},vl={class:"text-sm text-gray-700"},pl={class:"text-xs text-gray-500 mt-1"},ml={key:2,class:"text-center py-3"},gl={key:2,class:"mb-4"},fl={key:0,class:"mt-2 text-sm text-red-600"},yl={key:3,class:"mt-6 flex justify-end"},xl={class:"p-6"},_l={class:"flex justify-between items-center mb-4"},bl={class:"text-lg font-semibold text-gray-900"},wl={key:0,class:"mt-1 text-sm text-red-600"},kl={key:0,class:"mt-1 text-sm text-red-600"},hl={key:0,class:"mt-1 text-sm text-red-600"},jl={key:0,class:"mt-1 text-sm text-red-600"},Cl=["value"],El={key:0,class:"mt-1 text-sm text-red-600"},Dl={key:0,class:"text-sm text-gray-500"},Ml=["value"],Nl={key:2,class:"mt-1 text-sm text-red-600"},$l={key:0,class:"text-sm text-gray-500"},Al=["value"],Tl={key:2,class:"mt-1 text-sm text-red-600"},Pl={class:"mt-6 flex justify-end space-x-3"},Sl={class:"p-6"},Rl={class:"flex justify-between items-center mb-4"},Ul={key:0,class:"mt-1 text-sm text-red-600"},Vl={key:0,class:"mt-1 text-sm text-red-600"},Fl={key:0,class:"mt-1 text-sm text-red-600"},Ll={key:0,class:"mt-1 text-sm text-red-600"},Ol={class:"mt-6 flex justify-end space-x-3"},Bl={class:"p-6"},Il={class:"flex justify-between items-center mb-4"},Wl={key:0,class:"mb-4 p-3 bg-gray-100 rounded-md"},Hl={class:"text-sm font-medium text-gray-900"},Gl={class:"text-xs text-gray-500 mt-1"},ql={class:"mb-4"},zl={key:0,class:"mt-2 text-sm text-red-600"},Ql={class:"mt-6 flex justify-end"},Yl={__name:"Show",setup(Jl){const g=Vt(),$e=B().props.id,{permissions:ze,loading:Qe,error:Ye}=Ft(),{permissions:Je,loading:Ke,error:Xe}=Lt($e),i=c({}),Ze=c([]),et=c([]),Ae=c(!0),ue=c(""),Y=c(!1),Te=c(!1),ce=c(!1),R=c(null),J=c(""),I=c(""),ve=c([]),pe=c(!1),je=c(null),tt=()=>{Te.value=!0},st=async o=>{R.value=o,J.value="",I.value="",ve.value=[],pe.value=!0,ce.value=!0;try{const e=await window.axios.get(`/api/projects/${i.value.id}/notes/${o.id}/replies`);e.data.success?ve.value=e.data.replies:console.error("Failed to fetch replies:",e.data.message)}catch(e){console.error("Error fetching replies:",e)}finally{pe.value=!1}},ot=async()=>{var o,e;if(!R.value||!J.value.trim()){I.value="Reply content is required";return}I.value="";try{const s=await window.axios.post(`/api/projects/${i.value.id}/notes/${R.value.id}/reply`,{content:J.value});if(s.data.success){J.value="";try{pe.value=!0;const r=await window.axios.get(`/api/projects/${i.value.id}/notes/${R.value.id}/replies`);r.data.success&&(ve.value=r.data.replies)}catch(r){console.error("Error fetching updated replies:",r)}finally{pe.value=!1}await Ee()}else I.value=s.data.message||"Failed to send reply"}catch(s){console.error("Error sending reply:",s),I.value=((e=(o=s.response)==null?void 0:o.data)==null?void 0:e.message)||"An error occurred while sending the reply"}},at=[{value:"active",label:"Active"},{value:"completed",label:"Completed"},{value:"on_hold",label:"On Hold"},{value:"archived",label:"Archived"}],lt=[{value:"Website Designing",label:"Website Designing"},{value:"SEO",label:"SEO"},{value:"Social Media",label:"Social Media"},{value:"Content Writing",label:"Content Writing"},{value:"Graphic Design",label:"Graphic Design"}],nt=[{value:"UpWork",label:"UpWork"},{value:"Direct",label:"Direct Client"},{value:"Wix Marketplace",label:"Wix Marketplace"},{value:"Referral",label:"Referral"}],rt=[{value:"Primary",label:"Primary"},{value:"Accountant",label:"Accountant"},{value:"Other",label:"Other"}],it=[{value:"Manager",label:"Manager"},{value:"Developer",label:"Developer"},{value:"QA",label:"QA"},{value:"Other",label:"Other"}],dt=[{value:"one_off",label:"One-Off"},{value:"monthly",label:"Monthly"}],x=Ot(i),Oe=k(()=>!!x.value),Be=k(()=>{if(!x.value)return!1;const o=x.value.name,e=x.value.slug;return o==="Manager"||o==="Project Manager"||e==="manager"||e==="project-manager"}),{canDo:me,canView:W}=Bt($e),H=k(()=>g.value?g.value.role_data&&g.value.role_data.slug==="super-admin"||g.value.role==="super_admin"||g.value.role==="super-admin":!1);k(()=>g.value?g.value.role_data&&g.value.role_data.slug==="manager"||g.value.role==="manager"||g.value.role==="manager-role"||g.value.role==="manager_role"||Be.value:!1),k(()=>!g.value||Oe.value&&!Be.value?!1:g.value.role_data&&g.value.role_data.slug==="employee"||g.value.role==="employee"||g.value.role==="employee-role"),k(()=>!g.value||Oe.value?!1:g.value.role_data&&g.value.role_data.slug==="contractor"||g.value.role==="contractor"||g.value.role==="contractor-role");const Ce=k(()=>{console.log("userProjectRole in canManageProjects:",x.value);const o=x.value&&x.value.permissions&&x.value.permissions.some(w=>w.slug==="manage_projects");console.log("Has project-specific manage_projects permission:",o);const e=g.value&&g.value.global_permissions&&g.value.global_permissions.some(w=>w.slug==="manage_projects");console.log("Has global manage_projects permission:",e);const s=g.value&&g.value.role&&g.value.role.permissions&&g.value.role.permissions.some(w=>w.slug==="manage_projects");console.log("Has role manage_projects permission:",s);const r=me("manage_projects",x).value;console.log("canDo result for manage_projects:",r);const m=r||H.value;return console.log("Final canManageProjects result:",m),m}),Ie=k(()=>W("project_financial",x).value||H.value),ut=k(()=>W("project_transactions",x).value||H.value),ct=k(()=>W("client_contacts",x).value||H.value),vt=k(()=>W("client_financial",x).value||H.value);k(()=>W("users",x).value||H.value);const pt=k(()=>W("emails",x).value||!1),mt=k(()=>me("compose_emails",x).value||!1),gt=k(()=>me("approve_emails",x).value||!1),We=k(()=>W("project_notes",x).value||!1),He=k(()=>me("project_notes",x).value||!1),Ee=async()=>{Ae.value=!0,ue.value="";try{const o=B().props.id;console.log("Fetching project data for ID:",o);const e=await window.axios.get(`/api/projects/${o}/sections/basic`);console.log("Basic project data received:",e.data),i.value=e.data;try{const s=await window.axios.get(`/api/projects/${o}/sections/clients-users`);if(console.log("Clients and users data received:",s.data),s.data.clients&&(i.value.clients=s.data.clients),s.data.users){if(i.value.users=s.data.users,console.log("Project users:",i.value.users.length),i.value.users.length>0){const r=i.value.users[0];console.log("First user structure:",{id:r.id,name:r.name,hasPivot:!!r.pivot,pivotData:r.pivot?{hasRoleId:!!r.pivot.role_id,hasRoleData:!!r.pivot.role_data,roleDataStructure:r.pivot.role_data}:"No pivot data"});const m=i.value.users.find(w=>w.id===g.value.id);console.log("Current user in project:",m?{name:m.name,hasPivot:!!m.pivot,pivotData:m.pivot?{hasRoleId:!!m.pivot.role_id,hasRoleData:!!m.pivot.role_data,roleDataStructure:m.pivot.role_data}:"No pivot data"}:"Not found")}}else console.log("No users array in project data")}catch(s){console.error("Error fetching clients and users:",s)}if(Ie.value)try{const s=await window.axios.get(`/api/projects/${o}/sections/services-payment`);console.log("Financial data received:",s.data),i.value.services=s.data.services,i.value.service_details=s.data.service_details,i.value.total_amount=s.data.total_amount,i.value.payment_type=s.data.payment_type}catch(s){console.error("Error fetching financial information:",s)}if(ut.value)try{const s=await window.axios.get(`/api/projects/${o}/sections/transactions`);console.log("Transactions data received:",s.data),i.value.transactions=s.data}catch(s){console.error("Error fetching transactions:",s)}try{const s=await window.axios.get(`/api/projects/${o}/sections/documents`);console.log("Documents data received:",s.data),i.value.documents=s.data}catch(s){console.error("Error fetching documents:",s)}if(vt.value)try{const s=await window.axios.get(`/api/projects/${o}/contract-details`);console.log("Contract details received:",s.data),i.value.contract_details=s.data}catch(s){console.error("Error fetching contract details:",s)}try{const s=await window.axios.get(`/api/projects/${o}/sections/notes`);console.log("Notes data received:",s.data),i.value.notes=s.data}catch(s){console.error("Error fetching notes:",s)}if(console.log("Project value after assignment:",i.value),console.log("userProjectRole after project set:",x.value),Ce.value){console.log("User can manage projects, fetching additional data");const s=await window.axios.get("/api/clients");Ze.value=s.data;const r=await window.axios.get("/api/users");et.value=r.data.filter(m=>m.role==="contractor")}else console.log("User cannot manage projects, skipping additional data fetch")}catch(o){ue.value="Failed to load project data.",console.error("Error fetching project data:",o),o.response&&(o.response.status===401||o.response.status===403)&&(ue.value="You are not authorized to view this project or your session expired. Please log in.")}finally{Ae.value=!1}},ft=()=>{Y.value=!0},yt=o=>{i.value=o,Y.value=!1,alert("Project updated successfully!"),Ee()},U=c([]),ge=c(!1),fe=c(""),G=c(!1),K=c(null),_=c({name:"",description:"",assigned_to_user_id:null,due_date:null,status:"To Do",task_type_id:null,milestone_id:null,tags:[]}),h=c({}),ye=c([]),N=c([]),De=c(!1),xe=c(!1),j=c({status:"",assigned_to_user_id:"",milestone_id:"",due_date_range:""}),xt=[{value:"",label:"All Dates"},{value:"today",label:"Due Today"},{value:"this_week",label:"Due This Week"},{value:"next_week",label:"Due Next Week"},{value:"overdue",label:"Overdue"},{value:"no_date",label:"No Due Date"}],Pe=k(()=>!N.value||!N.value.length?[]:[...N.value].sort((o,e)=>o.completion_date?e.completion_date?new Date(o.completion_date)-new Date(e.completion_date):-1:1)),Se=k(()=>U.value.length?U.value.filter(o=>{var e;if(j.value.status&&o.status!==j.value.status)return!1;if(j.value.assigned_to_user_id){const s=parseInt(j.value.assigned_to_user_id);if(s===-1){if(o.assigned_to!=="Unassigned")return!1}else{const r=(e=i.value.users)==null?void 0:e.find(m=>m.id===s);if(r&&o.assigned_to!==r.name)return!1}}if(j.value.milestone_id){const s=parseInt(j.value.milestone_id);if(s===-1){if(o.milestone)return!1}else{const r=N.value.find(m=>m.id===s);if(r&&o.milestone!==r.name&&o.milestone_id!==s)return!1}}if(j.value.due_date_range){const s=new Date;s.setHours(0,0,0,0);const r=o.due_date?new Date(o.due_date):null;switch(j.value.due_date_range){case"today":if(!r||r.toDateString()!==s.toDateString())return!1;break;case"this_week":{if(!r)return!1;const m=new Date(s);if(m.setDate(s.getDate()+(6-s.getDay())),r<s||r>m)return!1;break}case"next_week":{if(!r)return!1;const m=new Date(s);m.setDate(s.getDate()+(7-s.getDay()));const w=new Date(m);if(w.setDate(m.getDate()+6),r<m||r>w)return!1;break}case"overdue":{if(!r||r>=s)return!1;break}case"no_date":{if(r)return!1;break}}}return!0}):[]),_t=()=>{j.value={status:"",assigned_to_user_id:"",milestone_id:"",due_date_range:""}},X=c(!1),Z=c(null),ee=c(""),q=c(""),Me=c(!1),te=c(!1),S=c({name:"",description:"",completion_date:null,status:"Not Started",project_id:B().props.id}),$=c({}),Ne=c(!1),se=async()=>{ge.value=!0,fe.value="";try{const o=B().props.id,e=await window.axios.get(`/api/projects/${o}/tasks`);U.value=e.data,console.log("Tasks fetched:",U.value)}catch(o){fe.value="Failed to load tasks data.",console.error("Error fetching project tasks:",o),o.response&&o.response.data&&o.response.data.message&&(fe.value=o.response.data.message)}finally{ge.value=!1}},Re=async()=>{De.value=!0;try{const o=await window.axios.get("/api/task-types");ye.value=o.data}catch(o){console.error("Error fetching task types:",o)}finally{De.value=!1}},Ue=async()=>{xe.value=!0;try{const o=B().props.id,e=await window.axios.get(`/api/projects/${o}/milestones`);N.value=e.data}catch(o){console.error("Error fetching milestones:",o)}finally{xe.value=!1}},bt=()=>{S.value={name:"",description:"",completion_date:null,status:"Not Started",project_id:B().props.id},$.value={},te.value=!0},wt=async()=>{$.value={},Ne.value=!0;try{const o=await window.axios.post("/api/milestones",S.value);N.value.push(o.data),_.value.milestone_id=o.data.id,te.value=!1,alert("Milestone created successfully!")}catch(o){console.error("Error creating milestone:",o),o.response&&o.response.data&&o.response.data.errors?$.value=o.response.data.errors:alert("Failed to create milestone. Please try again.")}finally{Ne.value=!1}},kt=async()=>{K.value=null,_.value={name:"",description:"",assigned_to_user_id:null,due_date:null,status:"To Do",task_type_id:null,milestone_id:null,tags:[]},h.value={},ye.value.length===0&&await Re(),N.value.length===0&&await Ue(),G.value=!0},ht=async o=>{var m;K.value=o,ye.value.length===0&&await Re(),N.value.length===0&&await Ue();let e=null;if(o.milestone){const w=N.value.find(ke=>ke.name===o.milestone);w&&(e=w.id)}let s=null;if(o.task_type){const w=ye.value.find(ke=>ke.name===o.task_type);w&&(s=w.id)}let r=null;if(o.assigned_to&&o.assigned_to!=="Unassigned"){const w=(m=i.value.users)==null?void 0:m.find(ke=>ke.name===o.assigned_to);w&&(r=w.id)}_.value={name:o.title,description:o.description||"",assigned_to_user_id:r||o.assigned_to_id||null,due_date:o.due_date||null,status:o.status,task_type_id:s||o.task_type_id||null,milestone_id:e,tags:o.tags||[]},h.value={},G.value=!0},jt=async o=>{try{await window.axios.post(`/api/tasks/${o.id}/complete`),await se()}catch(e){console.error("Error marking task as completed:",e),alert("Failed to mark task as completed. Please try again.")}},Ct=async o=>{try{await window.axios.post(`/api/tasks/${o.id}/start`),await se()}catch(e){console.error("Error starting task:",e),alert("Failed to start task. Please try again.")}},Et=o=>{Z.value=o,ee.value="",q.value="",X.value=!0},Dt=async()=>{if(!ee.value.trim()){q.value="Note content is required";return}q.value="",Me.value=!0;try{await window.axios.post(`/api/tasks/${Z.value.id}/notes`,{note:ee.value}),X.value=!1,ee.value="",Z.value=null,await se(),alert("Note added successfully!")}catch(o){console.error("Error adding note to task:",o),o.response&&o.response.data&&o.response.data.message?q.value=o.response.data.message:q.value="Failed to add note. Please try again."}finally{Me.value=!1}},Mt=async()=>{h.value={};try{let o;K.value?o=await window.axios.put(`/api/tasks/${K.value.id}`,_.value):o=await window.axios.post("/api/tasks",{..._.value,milestone_id:_.value.milestone_id||null}),G.value=!1,await se()}catch(o){console.error("Error submitting task form:",o),o.response&&o.response.data&&o.response.data.errors?h.value=o.response.data.errors:alert("Failed to save task. Please try again.")}},oe=c([]),Ve=c(!1),y=c(""),f=c(null),z=c(!1),ae=c(!1),le=c(!1),O=Fe({subject:"",body:""}),Q=c({}),_e=Fe({rejection_reason:""}),be=c({}),A=c(""),ne=c(!1),b=Fe({project_id:"",client_ids:[],subject:"",body:""}),T=c({}),we=async()=>{Ve.value=!0,y.value="";try{const o=B().props.id,e=await window.axios.get(`/api/projects/${o}/emails-simplified`);oe.value=e.data}catch(o){y.value="Failed to load email data.",console.error("Error fetching project emails:",o)}finally{Ve.value=!1}},Nt=o=>{f.value=o,z.value=!0},$t=async o=>{A.value="",y.value="";try{await window.axios.post(`/api/emails/${o.id}/approve`),A.value="Email approved successfully!",await we(),z.value=!1}catch(e){e.response&&e.response.data.message?y.value=e.response.data.message:(y.value="Failed to approve email.",console.error("Error approving email:",e))}},At=o=>{f.value=o,O.subject=o.subject,O.body=o.body,Q.value={},ae.value=!0,z.value=!1},Tt=async()=>{Q.value={},y.value="",A.value="";try{const o={subject:O.subject,body:O.body};await window.axios.post(`/api/emails/${f.value.id}/edit-and-approve`,o),A.value="Email updated and approved successfully!",ae.value=!1,await we()}catch(o){o.response&&o.response.status===422?Q.value=o.response.data.errors:o.response&&o.response.data.message?y.value=o.response.data.message:(y.value="Failed to update and approve email.",console.error("Error updating and approving email:",o))}},Pt=o=>{f.value=o,_e.rejection_reason="",be.value={},le.value=!0,z.value=!1},St=async()=>{be.value={},y.value="",A.value="";try{await window.axios.post(`/api/emails/${f.value.id}/reject`,{rejection_reason:_e.rejection_reason}),A.value="Email rejected successfully!",_e.rejection_reason="",le.value=!1,await we()}catch(o){o.response&&o.response.status===422?be.value=o.response.data.errors:o.response&&o.response.data.message?y.value=o.response.data.message:(y.value="Failed to reject email.",console.error("Error rejecting email:",o))}},Rt=()=>{b.project_id=i.value.id,b.client_ids=[],b.subject="",b.body="",T.value={},A.value="",ne.value=!0},Ut=async()=>{if(T.value={},y.value="",A.value="",!b.client_ids||b.client_ids.length===0){T.value.client_ids=["Please select at least one client."];return}try{const o=b.client_ids.map(s=>typeof s=="object"&&s!==null?{id:s.id}:{id:s}),e={project_id:b.project_id,client_ids:o,subject:b.subject,body:b.body,status:"pending_approval"};await window.axios.post("/api/emails",e),A.value="Email submitted for approval successfully!",b.client_ids=[],b.subject="",b.body="",T.value={},ne.value=!1,await we()}catch(o){o.response&&o.response.status===422?T.value=o.response.data.errors:o.response&&o.response.data.message?y.value=o.response.data.message:(y.value="Failed to submit email. An unexpected error occurred.",console.error("Error submitting email:",o))}};return It(async()=>{console.log("Component mounted, fetching data...");try{const o=B().props.id,e=await Wt(o);console.log("Project permissions fetched (includes global):",e)}catch(o){console.error(`Error fetching permissions for project ${$e}:`,o)}await Ee(),await we(),await se();try{await Re(),await Ue(),console.log("Task types and milestones fetched successfully")}catch(o){console.error("Error fetching task types or milestones:",o)}console.log("All data loaded, permission status:"),console.log("- Global permissions:",ze.value),console.log("- Global permissions loading:",Qe.value),console.log("- Global permissions error:",Ye.value),console.log("- Project permissions:",Je.value),console.log("- Project permissions loading:",Ke.value),console.log("- Project permissions error:",Xe.value),console.log("- User project role:",x.value),console.log("- Can manage projects:",Ce.value)}),(o,e)=>(a(),l(E,null,[d(Le(Ht),{title:i.value.name||"Project Details"},null,8,["title"]),d(qt,null,{default:p(()=>[t("div",Kt,[Ae.value?(a(),l("div",Xt," Loading project details... ")):ue.value?(a(),l("div",Zt,n(ue.value),1)):(a(),l("div",es,[t("div",ts,[t("div",ss,[e[53]||(e[53]=t("h4",{class:"text-lg font-semibold text-gray-900"},"General Information",-1)),Ce.value||H.value?(a(),l("div",os,[d(M,{class:"bg-indigo-600 hover:bg-indigo-700 transition-colors",onClick:ft},{default:p(()=>e[52]||(e[52]=[v(" Edit Project ")])),_:1,__:[52]})])):u("",!0)]),t("div",as,[t("div",null,[t("h3",ls,n(i.value.name),1),t("p",ns,n(i.value.description||"No description provided"),1)]),t("div",rs,[t("p",null,[e[54]||(e[54]=t("strong",{class:"text-gray-900"},"Status:",-1)),v(" "+n(i.value.status.replace("_"," ").toUpperCase()),1)]),t("p",null,[e[55]||(e[55]=t("strong",{class:"text-gray-900"},"Project Type:",-1)),v(" "+n(i.value.project_type||"N/A"),1)]),t("p",null,[e[56]||(e[56]=t("strong",{class:"text-gray-900"},"Source:",-1)),v(" "+n(i.value.source||"N/A"),1)]),t("div",is,[i.value.website?(a(),l("a",{key:0,href:i.value.website,target:"_blank",class:"p-2 bg-gray-100 rounded-full hover:bg-gray-200 transition-colors",title:"Visit Website"},e[57]||(e[57]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"})],-1)]),8,ds)):u("",!0),i.value.social_media_link?(a(),l("a",{key:1,href:i.value.social_media_link,target:"_blank",class:"p-2 bg-gray-100 rounded-full hover:bg-gray-200 transition-colors",title:"Social Media"},e[58]||(e[58]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})],-1)]),8,us)):u("",!0),i.value.google_drive_link?(a(),l("a",{key:2,href:i.value.google_drive_link,target:"_blank",class:"p-2 bg-gray-100 rounded-full hover:bg-gray-200 transition-colors",title:"Google Drive"},e[59]||(e[59]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)]),8,cs)):u("",!0)])])])]),t("div",vs,[t("div",ps,[e[60]||(e[60]=t("h4",{class:"text-sm font-semibold text-gray-500 mb-1"},"Pending Tasks",-1)),t("p",ms,n(U.value.filter(s=>s.status!=="Done").length),1)]),t("div",gs,[e[61]||(e[61]=t("h4",{class:"text-sm font-semibold text-gray-500 mb-1"},"Unread Emails",-1)),t("p",fs,n(oe.value.filter(s=>s.status==="Received").length),1)]),t("div",ys,[e[62]||(e[62]=t("h4",{class:"text-sm font-semibold text-gray-500 mb-1"},"Last Email Received",-1)),t("p",xs,n(oe.value.filter(s=>s.status==="Received").length?oe.value.filter(s=>s.status==="Received")[0].date:"N/A"),1)]),t("div",_s,[e[63]||(e[63]=t("h4",{class:"text-sm font-semibold text-gray-500 mb-1"},"Next Task Deadline",-1)),t("p",bs,n(U.value.filter(s=>s.status!=="Completed").length?U.value.filter(s=>s.status!=="Completed").sort((s,r)=>new Date(s.due_date)-new Date(r.due_date))[0].due_date:"N/A"),1)])]),t("div",ws,[Ie.value?(a(),l("div",ks,[e[70]||(e[70]=t("h4",{class:"text-lg font-semibold text-gray-900 mb-4"},"Financial Information",-1)),t("div",hs,[t("p",null,[e[64]||(e[64]=t("strong",{class:"text-gray-900"},"Total Amount:",-1)),v(" $"+n(i.value.total_amount||"0.00"),1)]),t("p",null,[e[65]||(e[65]=t("strong",{class:"text-gray-900"},"Payment Type:",-1)),v(" "+n(i.value.payment_type.replace("_"," ").toUpperCase()),1)]),i.value.service_details&&i.value.service_details.length?(a(),l("div",js,[e[69]||(e[69]=t("strong",{class:"text-gray-900"},"Service Details:",-1)),t("div",Cs,[(a(!0),l(E,null,D(i.value.service_details,s=>(a(),l("div",{key:s.service_id,class:"border border-gray-200 rounded-lg overflow-hidden"},[t("button",{onClick:r=>je.value=je.value===s.service_id?null:s.service_id,class:"w-full flex justify-between items-center p-3 bg-gray-50 hover:bg-gray-100 transition-colors text-left"},[t("div",Ds,[v(n(s.service_id)+": ",1),t("span",Ms,"$"+n(s.amount),1)]),t("span",Ns,[je.value===s.service_id?(a(),l("span",$s,"▼")):(a(),l("span",As,"▶"))])],8,Es),je.value===s.service_id?(a(),l("div",Ts,[t("div",Ps,[t("p",null,[e[66]||(e[66]=t("strong",null,"Frequency:",-1)),v(" "+n(s.frequency),1)]),t("p",null,[e[67]||(e[67]=t("strong",null,"Start Date:",-1)),v(" "+n(s.start_date||"N/A"),1)]),s.payment_breakdown?(a(),l("div",Ss,[e[68]||(e[68]=t("p",{class:"font-medium text-gray-600"},"Payment Breakdown:",-1)),t("ul",Rs,[Array.isArray(s.payment_breakdown)?(a(!0),l(E,{key:1},D(s.payment_breakdown,(r,m)=>(a(),l("li",{key:m},n(r.label)+": "+n(r.percentage)+"% ",1))),128)):(a(),l(E,{key:0},[t("li",null,"First: "+n(s.payment_breakdown.first)+"%",1),t("li",null,"Second: "+n(s.payment_breakdown.second)+"%",1),t("li",null,"Third: "+n(s.payment_breakdown.third)+"%",1)],64))])])):u("",!0)])])):u("",!0)]))),128))])])):(a(),l("p",Us,"No service details available."))])])):u("",!0),ct.value?(a(),l("div",Vs,[e[72]||(e[72]=t("h4",{class:"text-lg font-semibold text-gray-900 mb-4"},"Clients",-1)),i.value.clients&&i.value.clients.length?(a(),l("div",Fs,[(a(!0),l(E,null,D(i.value.clients,s=>(a(),l("div",{key:s.id,class:"border-l-4 border-indigo-500 pl-3"},[t("p",null,[t("strong",Ls,n(s.name),1)]),t("p",null,[e[71]||(e[71]=v("Email: ")),t("a",{href:`mailto:${s.email}`,class:"text-indigo-600 hover:underline"},n(s.email),9,Os)]),t("p",null,"Phone: "+n(s.phone||"N/A"),1),t("p",null,"Address: "+n(s.address||"N/A"),1)]))),128))])):(a(),l("p",Bs,"No clients assigned."))])):u("",!0),t("div",Is,[e[74]||(e[74]=t("h4",{class:"text-lg font-semibold text-gray-900 mb-4"},"Assigned Team",-1)),i.value.users&&i.value.users.length?(a(),l("div",Ws,[(a(!0),l(E,null,D(i.value.users,s=>(a(),l("div",{key:s.id,class:"border-l-4 border-blue-500 pl-3"},[t("p",null,[t("strong",Hs,n(s.name),1),v(" ("+n(s.pivot.role)+")",1)]),t("p",null,[e[73]||(e[73]=v("Email: ")),t("a",{href:`mailto:${s.email}`,class:"text-indigo-600 hover:underline"},n(s.email),9,Gs)])]))),128))])):(a(),l("p",qs,"No team members assigned."))])]),t("div",zs,[t("div",Qs,[e[76]||(e[76]=t("h4",{class:"text-lg font-semibold text-gray-900"},"Project Tasks",-1)),t("div",Ys,[d(P,{onClick:se,disabled:ge.value,class:"text-indigo-600 hover:text-indigo-800"},{default:p(()=>[ge.value?(a(),l("span",Ks,"Loading...")):(a(),l("span",Js,"Refresh"))]),_:1},8,["disabled"]),Ce.value?(a(),Gt(M,{key:0,class:"bg-indigo-600 hover:bg-indigo-700 transition-colors",onClick:kt},{default:p(()=>e[75]||(e[75]=[v(" Add Task ")])),_:1,__:[75]})):u("",!0)])]),t("div",Xs,[xe.value?(a(),l("div",Zs," Loading milestones... ")):Pe.value.length?(a(),l("div",to,[e[81]||(e[81]=t("div",{class:"absolute h-1 bg-gray-200 top-1/2 left-0 right-0 transform -translate-y-1/2"},null,-1)),t("div",so,[(a(!0),l(E,null,D(Pe.value,(s,r)=>(a(),l("div",{key:s.id,class:re(["flex flex-col items-center relative z-10",{"ml-4":r===0,"mr-4":r===Pe.value.length-1}])},[t("div",{class:re(["w-6 h-6 rounded-full shadow-lg flex items-center justify-center",{"bg-gray-300":s.status==="Not Started","bg-blue-500":s.status==="In Progress","bg-green-500":s.status==="Completed","bg-red-500":s.status==="Overdue"}])},[s.status==="Completed"?(a(),l("svg",oo,e[78]||(e[78]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)]))):s.status==="In Progress"?(a(),l("svg",ao,e[79]||(e[79]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"},null,-1)]))):s.status==="Overdue"?(a(),l("svg",lo,e[80]||(e[80]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)]))):(a(),l("span",no))],2),t("div",ro,[t("p",{class:"text-xs font-medium text-gray-700 text-center truncate",title:s.name},n(s.name),9,io)]),t("div",uo,[t("p",co,n(s.completion_date?new Date(s.completion_date).toLocaleDateString():"No date"),1)])],2))),128))])])):(a(),l("div",eo,e[77]||(e[77]=[t("p",{class:"text-gray-400 text-sm"},"No milestones found for this project.",-1)])))]),t("div",vo,[t("div",po,[t("div",mo,[e[83]||(e[83]=t("label",{for:"status-filter",class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),C(t("select",{id:"status-filter","onUpdate:modelValue":e[0]||(e[0]=s=>j.value.status=s),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-sm"},e[82]||(e[82]=[t("option",{value:""},"All Statuses",-1),t("option",{value:"To Do"},"To Do",-1),t("option",{value:"In Progress"},"In Progress",-1),t("option",{value:"Done"},"Done",-1),t("option",{value:"Blocked"},"Blocked",-1),t("option",{value:"Archived"},"Archived",-1)]),512),[[V,j.value.status]])]),t("div",go,[e[86]||(e[86]=t("label",{for:"assigned-filter",class:"block text-sm font-medium text-gray-700 mb-1"},"Assigned To",-1)),C(t("select",{id:"assigned-filter","onUpdate:modelValue":e[1]||(e[1]=s=>j.value.assigned_to_user_id=s),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-sm"},[e[84]||(e[84]=t("option",{value:""},"All Users",-1)),e[85]||(e[85]=t("option",{value:"-1"},"Unassigned",-1)),(a(!0),l(E,null,D(i.value.users,s=>(a(),l("option",{key:s.id,value:s.id},n(s.name),9,fo))),128))],512),[[V,j.value.assigned_to_user_id]])]),t("div",yo,[e[89]||(e[89]=t("label",{for:"milestone-filter",class:"block text-sm font-medium text-gray-700 mb-1"},"Milestone",-1)),C(t("select",{id:"milestone-filter","onUpdate:modelValue":e[2]||(e[2]=s=>j.value.milestone_id=s),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-sm"},[e[87]||(e[87]=t("option",{value:""},"All Milestones",-1)),e[88]||(e[88]=t("option",{value:"-1"},"No Milestone",-1)),(a(!0),l(E,null,D(N.value,s=>(a(),l("option",{key:s.id,value:s.id},n(s.name),9,xo))),128))],512),[[V,j.value.milestone_id]])]),t("div",_o,[e[90]||(e[90]=t("label",{for:"due-date-filter",class:"block text-sm font-medium text-gray-700 mb-1"},"Due Date",-1)),C(t("select",{id:"due-date-filter","onUpdate:modelValue":e[3]||(e[3]=s=>j.value.due_date_range=s),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-sm"},[(a(),l(E,null,D(xt,s=>t("option",{key:s.value,value:s.value},n(s.label),9,bo)),64))],512),[[V,j.value.due_date_range]])]),t("div",{class:"flex items-end"},[t("button",{onClick:_t,class:"px-3 py-2 text-sm text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-md transition-colors"}," Clear Filters ")])]),Object.values(j.value).some(s=>s!=="")?(a(),l("div",wo,[t("p",null,[v(" Showing "+n(Se.value.length)+" of "+n(U.value.length)+" tasks ",1),Se.value.length===0?(a(),l("span",ko," (No tasks match the current filters) ")):u("",!0)])])):u("",!0)]),ge.value?(a(),l("div",ho," Loading tasks... ")):fe.value?(a(),l("div",jo,[t("p",Co,n(fe.value),1)])):U.value.length?(a(),l("div",Eo,[t("table",Do,[e[91]||(e[91]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Title"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Assigned To"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Due Date"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Milestone"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),t("tbody",Mo,[(a(!0),l(E,null,D(Se.value,s=>(a(),l("tr",{key:s.id,class:"hover:bg-gray-50 transition-colors"},[t("td",No,n(s.title),1),t("td",$o,[t("span",{class:re({"px-2 py-1 rounded-full text-xs font-medium":!0,"bg-yellow-100 text-yellow-800":s.status==="To Do","bg-blue-100 text-blue-800":s.status==="In Progress","bg-green-100 text-green-800":s.status==="Done","bg-red-100 text-red-800":s.status==="Blocked","bg-gray-100 text-gray-800":s.status==="Archived"})},n(s.status),3)]),t("td",Ao,n(s.assigned_to),1),t("td",To,n(s.due_date?s.due_date:"N/A"),1),t("td",Po,n(s.milestone||"N/A"),1),t("td",So,[t("div",Ro,[t("button",{onClick:r=>ht(s),class:"text-indigo-600 hover:text-indigo-800 text-sm font-medium"}," Edit ",8,Uo),t("button",{onClick:r=>Et(s),class:"text-blue-600 hover:text-blue-800 text-sm font-medium"}," Add Note ",8,Vo),s.status==="To Do"?(a(),l("button",{key:0,onClick:r=>Ct(s),class:"text-blue-600 hover:text-blue-800 text-sm font-medium"}," Start ",8,Fo)):u("",!0),s.status!=="Done"?(a(),l("button",{key:1,onClick:r=>jt(s),class:"text-green-600 hover:text-green-800 text-sm font-medium"}," Complete ",8,Lo)):u("",!0)])])]))),128))])])])):(a(),l("div",Oo,e[92]||(e[92]=[t("p",{class:"text-gray-400 text-sm"},"No tasks found for this project.",-1),t("p",{class:"text-gray-500 text-sm mt-2"},' Click the "Add Task" button to create a new task. ',-1)])))]),pt.value?(a(),l("div",Bo,[t("div",Io,[e[94]||(e[94]=t("h4",{class:"text-lg font-semibold text-gray-900"},"Email Communication",-1)),mt.value?(a(),l("div",Wo,[d(M,{class:"bg-indigo-600 hover:bg-indigo-700 transition-colors",onClick:Rt},{default:p(()=>e[93]||(e[93]=[v(" Compose Email ")])),_:1,__:[93]})])):u("",!0),A.value?(a(),l("div",Ho,[t("span",Go,n(A.value),1)])):u("",!0)]),Ve.value?(a(),l("div",qo," Loading email data... ")):y.value?(a(),l("div",zo,n(y.value),1)):oe.value.length?(a(),l("div",Qo,[t("table",Yo,[e[96]||(e[96]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Subject"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"From"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),t("tbody",Jo,[(a(!0),l(E,null,D(oe.value,s=>{var r;return a(),l("tr",{key:s.id,class:"hover:bg-gray-50 transition-colors"},[t("td",Ko,n(s.subject),1),t("td",Xo,n(((r=s.sender)==null?void 0:r.name)||"N/A"),1),t("td",Zo,n(new Date(s.created_at).toLocaleDateString()),1),t("td",ea,[t("span",{class:re({"px-2 py-1 rounded-full text-xs font-medium":!0,"bg-green-100 text-green-800":s.status==="sent","bg-yellow-100 text-yellow-800":s.status==="pending_approval","bg-red-100 text-red-800":s.status==="rejected","bg-gray-100 text-gray-800":s.status==="draft"})},n(s.status.replace("_"," ").toUpperCase()),3)]),t("td",ta,[d(P,{class:"text-indigo-600 hover:text-indigo-800",onClick:m=>Nt(s)},{default:p(()=>e[95]||(e[95]=[v(" View ")])),_:2,__:[95]},1032,["onClick"])])])}),128))])])])):(a(),l("p",sa,"No email communication found."))])):u("",!0),We.value?(a(),l("div",oa,[t("div",aa,[e[98]||(e[98]=t("h4",{class:"text-lg font-semibold text-gray-900"},"Notes",-1)),Le(me)("add_project_notes").value?(a(),l("div",la,[d(M,{class:"bg-indigo-600 hover:bg-indigo-700 transition-colors",onClick:tt},{default:p(()=>e[97]||(e[97]=[v(" Add Note ")])),_:1,__:[97]})])):u("",!0)]),i.value.notes&&i.value.notes.length?(a(),l("div",na,[(a(!0),l(E,null,D(i.value.notes,s=>{var r;return a(),l("div",{key:s.id,class:"p-4 bg-gray-50 rounded-md shadow-sm hover:bg-gray-100 transition-colors"},[t("div",ra,[t("div",ia,[t("p",{class:re(["text-sm",{"text-gray-700":s.content!=="[Encrypted content could not be decrypted]","text-red-500 italic":s.content==="[Encrypted content could not be decrypted]"}])},[v(n(s.content)+" ",1),s.content==="[Encrypted content could not be decrypted]"?(a(),l("span",da," (There was an issue decrypting this note. Please contact an administrator.) ")):u("",!0)],2),t("div",ua,[t("p",ca,"Added by "+n(((r=s.user)==null?void 0:r.name)||"Unknown")+" on "+n(new Date(s.created_at).toLocaleDateString()),1),s.reply_count>0?(a(),l("span",va,n(s.reply_count)+" "+n(s.reply_count===1?"reply":"replies"),1)):u("",!0)])]),We.value&&s.chat_message_id&&i.value.google_chat_id?(a(),l("div",pa,[d(P,{class:"text-sm text-indigo-600 hover:text-indigo-800",onClick:m=>st(s)},{default:p(()=>e[99]||(e[99]=[v(" View ")])),_:2,__:[99]},1032,["onClick"])])):u("",!0)])])}),128))])):(a(),l("p",ma,"No notes available."))])):u("",!0)]))]),d(L,{show:Y.value,onClose:e[5]||(e[5]=s=>Y.value=!1)},{default:p(()=>[d(zt,{show:Y.value,project:i.value,statusOptions:at,departmentOptions:lt,sourceOptions:nt,clientRoleOptions:rt,userRoleOptions:it,paymentTypeOptions:dt,onClose:e[4]||(e[4]=s=>Y.value=!1),onSubmit:yt},null,8,["show","project"])]),_:1},8,["show"]),d(L,{show:z.value,onClose:e[10]||(e[10]=s=>z.value=!1)},{default:p(()=>{var s;return[t("div",ga,[t("div",fa,[e[101]||(e[101]=t("h3",{class:"text-lg font-semibold text-gray-900"},"Email Details",-1)),t("button",{onClick:e[6]||(e[6]=r=>z.value=!1),class:"text-gray-400 hover:text-gray-500"},e[100]||(e[100]=[t("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),f.value?(a(),l("div",ya,[t("div",xa,[t("h4",_a,n(f.value.subject),1),t("div",ba,[t("div",null,[t("p",wa,[e[102]||(e[102]=v("From: ")),t("span",ka,n(((s=f.value.sender)==null?void 0:s.name)||"N/A"),1)]),t("p",ha,[e[103]||(e[103]=v("Status: ")),t("span",{class:re({"px-2 py-1 rounded-full text-xs font-medium":!0,"bg-green-100 text-green-800":f.value.status==="sent","bg-yellow-100 text-yellow-800":f.value.status==="pending_approval","bg-red-100 text-red-800":f.value.status==="rejected","bg-gray-100 text-gray-800":f.value.status==="draft"})},n(f.value.status.replace("_"," ").toUpperCase()),3)])]),t("div",null,[t("p",ja,[e[104]||(e[104]=v("Date: ")),t("span",Ca,n(new Date(f.value.created_at).toLocaleString()),1)])])])]),t("div",Ea,[t("div",{innerHTML:f.value.body},null,8,Da)]),f.value.rejection_reason?(a(),l("div",Ma,[e[105]||(e[105]=t("h5",{class:"font-medium text-red-800"},"Rejection Reason:",-1)),t("p",Na,n(f.value.rejection_reason),1)])):u("",!0),f.value.approver?(a(),l("div",$a,[t("p",null,"Approved/Rejected by: "+n(f.value.approver.name),1),f.value.sent_at?(a(),l("p",Aa,"Sent at: "+n(new Date(f.value.sent_at).toLocaleString()),1)):u("",!0)])):u("",!0),f.value.status==="pending_approval"&&gt.value?(a(),l("div",Ta,[d(M,{onClick:e[7]||(e[7]=r=>$t(f.value)),class:"bg-green-600 hover:bg-green-700"},{default:p(()=>e[106]||(e[106]=[v(" Approve ")])),_:1,__:[106]}),d(M,{onClick:e[8]||(e[8]=r=>At(f.value)),class:"bg-blue-600 hover:bg-blue-700"},{default:p(()=>e[107]||(e[107]=[v(" Edit & Approve ")])),_:1,__:[107]}),d(P,{onClick:e[9]||(e[9]=r=>Pt(f.value)),class:"text-red-600 hover:text-red-800"},{default:p(()=>e[108]||(e[108]=[v(" Reject ")])),_:1,__:[108]})])):u("",!0)])):u("",!0)])]}),_:1},8,["show"]),d(Qt,{show:Te.value,"project-id":i.value.id,onClose:e[11]||(e[11]=s=>Te.value=!1),onNoteAdded:Ee},null,8,["show","project-id"]),d(L,{show:ae.value,onClose:e[16]||(e[16]=s=>ae.value=!1),"max-width":"3xl"},{default:p(()=>[t("div",Pa,[t("div",Sa,[e[110]||(e[110]=t("h3",{class:"text-lg font-semibold text-gray-900"},"Edit and Approve Email",-1)),t("button",{onClick:e[12]||(e[12]=s=>ae.value=!1),class:"text-gray-400 hover:text-gray-500"},e[109]||(e[109]=[t("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),f.value?(a(),l("div",Ra,[t("form",{onSubmit:he(Tt,["prevent"])},[y.value?(a(),l("div",Ua,[t("span",Va,n(y.value),1)])):u("",!0),t("div",Fa,[d(ie,{for:"subject",value:"Subject"}),d(Ge,{id:"subject",type:"text",class:"mt-1 block w-full",modelValue:O.subject,"onUpdate:modelValue":e[13]||(e[13]=s=>O.subject=s),required:""},null,8,["modelValue"]),d(de,{message:Q.value.subject?Q.value.subject[0]:"",class:"mt-2"},null,8,["message"])]),t("div",La,[d(ie,{for:"body",value:"Email Body"}),d(qe,{id:"body",modelValue:O.body,"onUpdate:modelValue":e[14]||(e[14]=s=>O.body=s),placeholder:"Edit your email here...",height:"300px"},null,8,["modelValue"]),d(de,{message:Q.value.body?Q.value.body[0]:"",class:"mt-2"},null,8,["message"])]),t("div",Oa,[d(P,{onClick:e[15]||(e[15]=s=>ae.value=!1)},{default:p(()=>e[111]||(e[111]=[v("Cancel")])),_:1,__:[111]}),d(M,{type:"submit",class:"bg-green-600 hover:bg-green-700"},{default:p(()=>e[112]||(e[112]=[v("Save & Approve")])),_:1,__:[112]})])],32)])):u("",!0)])]),_:1},8,["show"]),d(L,{show:le.value,onClose:e[20]||(e[20]=s=>le.value=!1),"max-width":"2xl"},{default:p(()=>[t("div",Ba,[t("div",Ia,[e[114]||(e[114]=t("h3",{class:"text-lg font-semibold text-gray-900"},"Reject Email",-1)),t("button",{onClick:e[17]||(e[17]=s=>le.value=!1),class:"text-gray-400 hover:text-gray-500"},e[113]||(e[113]=[t("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),f.value?(a(),l("div",Wa,[t("form",{onSubmit:he(St,["prevent"])},[y.value?(a(),l("div",Ha,[t("span",Ga,n(y.value),1)])):u("",!0),t("div",qa,[d(ie,{for:"rejection_reason",value:"Rejection Reason"}),C(t("textarea",{id:"rejection_reason",rows:"5",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full","onUpdate:modelValue":e[18]||(e[18]=s=>_e.rejection_reason=s),required:"",placeholder:"Please provide a reason for rejecting this email (minimum 10 characters)"},null,512),[[F,_e.rejection_reason]]),d(de,{message:be.value.rejection_reason?be.value.rejection_reason[0]:"",class:"mt-2"},null,8,["message"])]),t("div",za,[d(P,{onClick:e[19]||(e[19]=s=>le.value=!1)},{default:p(()=>e[115]||(e[115]=[v("Cancel")])),_:1,__:[115]}),d(M,{type:"submit",class:"bg-red-600 hover:bg-red-700"},{default:p(()=>e[116]||(e[116]=[v("Reject Email")])),_:1,__:[116]})])],32)])):u("",!0)])]),_:1},8,["show"]),d(L,{show:ne.value,onClose:e[26]||(e[26]=s=>ne.value=!1),"max-width":"3xl"},{default:p(()=>[t("div",Qa,[t("div",Ya,[e[118]||(e[118]=t("h3",{class:"text-lg font-semibold text-gray-900"},"Compose New Email",-1)),t("button",{onClick:e[21]||(e[21]=s=>ne.value=!1),class:"text-gray-400 hover:text-gray-500"},e[117]||(e[117]=[t("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),t("form",{onSubmit:he(Ut,["prevent"])},[y.value?(a(),l("div",Ja,[t("span",Ka,n(y.value),1)])):u("",!0),t("div",Xa,[d(ie,{for:"client_ids",value:"To (Clients)"}),d(Le(Yt),{id:"client_ids",modelValue:b.client_ids,"onUpdate:modelValue":e[22]||(e[22]=s=>b.client_ids=s),options:i.value.clients||[],multiple:!0,"close-on-select":!0,"clear-on-select":!1,"preserve-search":!0,placeholder:"Select one or more clients",label:"name","track-by":"id",searchable:!0,"allow-empty":!0},{option:p(({option:s})=>[v(n(s.name),1)]),tag:p(({option:s,remove:r})=>[t("span",Za,[v(n(s.name)+" ",1),t("i",{class:"multiselect__tag-icon",onClick:m=>r(s)},null,8,el)])]),_:1},8,["modelValue","options"]),d(de,{message:T.value.client_ids?T.value.client_ids[0]:"",class:"mt-2"},null,8,["message"])]),t("div",tl,[d(ie,{for:"subject",value:"Subject"}),d(Ge,{id:"subject",type:"text",class:"mt-1 block w-full",modelValue:b.subject,"onUpdate:modelValue":e[23]||(e[23]=s=>b.subject=s),required:""},null,8,["modelValue"]),d(de,{message:T.value.subject?T.value.subject[0]:"",class:"mt-2"},null,8,["message"])]),t("div",sl,[d(ie,{for:"body",value:"Email Body"}),d(qe,{id:"body",modelValue:b.body,"onUpdate:modelValue":e[24]||(e[24]=s=>b.body=s),placeholder:"Compose your email here...",height:"300px"},null,8,["modelValue"]),d(de,{message:T.value.body?T.value.body[0]:"",class:"mt-2"},null,8,["message"])]),t("div",ol,[d(P,{onClick:e[25]||(e[25]=s=>ne.value=!1),class:"mr-2"},{default:p(()=>e[119]||(e[119]=[v("Cancel")])),_:1,__:[119]}),d(M,{type:"submit"},{default:p(()=>e[120]||(e[120]=[v("Submit for Approval")])),_:1,__:[120]})])],32)])]),_:1},8,["show"]),d(L,{show:ce.value,onClose:e[30]||(e[30]=s=>ce.value=!1)},{default:p(()=>{var s;return[t("div",al,[t("div",ll,[e[122]||(e[122]=t("h3",{class:"text-lg font-semibold text-gray-900"},"Reply to Note",-1)),t("button",{onClick:e[27]||(e[27]=r=>ce.value=!1),class:"text-gray-400 hover:text-gray-500"},e[121]||(e[121]=[t("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),R.value?(a(),l("div",nl,[t("p",rl,n(R.value.content),1),t("p",il,"Added by "+n(((s=R.value.user)==null?void 0:s.name)||"Unknown")+" on "+n(new Date(R.value.created_at).toLocaleDateString()),1)])):u("",!0),R.value?(a(),l("div",dl,[e[125]||(e[125]=t("h4",{class:"text-sm font-medium text-gray-700 mb-2"},"Replies",-1)),pe.value?(a(),l("div",ul,e[123]||(e[123]=[t("p",{class:"text-gray-500 text-sm"},"Loading replies...",-1)]))):ve.value.length?(a(),l("div",cl,[(a(!0),l(E,null,D(ve.value,r=>{var m;return a(),l("div",{key:r.id,class:"p-2 bg-gray-50 rounded border-l-2 border-indigo-300"},[t("p",vl,n(r.content),1),t("p",pl,"Replied by "+n(((m=r.user)==null?void 0:m.name)||"Unknown")+" on "+n(new Date(r.created_at).toLocaleDateString()),1)])}),128))])):(a(),l("div",ml,e[124]||(e[124]=[t("p",{class:"text-gray-500 text-sm"},"No replies yet. Be the first to reply!",-1)])))])):u("",!0),He.value?(a(),l("div",gl,[e[126]||(e[126]=t("label",{for:"reply-content",class:"block text-sm font-medium text-gray-700 mb-1"},"Your Reply",-1)),C(t("textarea",{id:"reply-content","onUpdate:modelValue":e[28]||(e[28]=r=>J.value=r),class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full h-32",placeholder:"Enter your reply..."},null,512),[[F,J.value]]),I.value?(a(),l("p",fl,n(I.value),1)):u("",!0)])):u("",!0),He.value?(a(),l("div",yl,[d(P,{onClick:e[29]||(e[29]=r=>ce.value=!1),class:"mr-2"},{default:p(()=>e[127]||(e[127]=[v("Cancel")])),_:1,__:[127]}),d(M,{onClick:ot},{default:p(()=>e[128]||(e[128]=[v("Send Reply")])),_:1,__:[128]})])):u("",!0)])]}),_:1},8,["show"]),d(L,{show:G.value,onClose:e[40]||(e[40]=s=>G.value=!1)},{default:p(()=>[t("div",xl,[t("div",_l,[t("h3",bl,n(K.value?"Edit Task":"Add New Task"),1),t("button",{onClick:e[31]||(e[31]=s=>G.value=!1),class:"text-gray-400 hover:text-gray-500"},e[129]||(e[129]=[t("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),t("form",{onSubmit:he(Mt,["prevent"]),class:"space-y-4"},[t("div",null,[e[130]||(e[130]=t("label",{for:"task-name",class:"block text-sm font-medium text-gray-700"},"Task Name",-1)),C(t("input",{id:"task-name","onUpdate:modelValue":e[32]||(e[32]=s=>_.value.name=s),type:"text",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",placeholder:"Enter task name"},null,512),[[F,_.value.name]]),h.value.name?(a(),l("p",wl,n(h.value.name[0]),1)):u("",!0)]),t("div",null,[e[131]||(e[131]=t("label",{for:"task-description",class:"block text-sm font-medium text-gray-700"},"Description",-1)),C(t("textarea",{id:"task-description","onUpdate:modelValue":e[33]||(e[33]=s=>_.value.description=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",rows:"3",placeholder:"Enter task description"},null,512),[[F,_.value.description]]),h.value.description?(a(),l("p",kl,n(h.value.description[0]),1)):u("",!0)]),t("div",null,[e[133]||(e[133]=t("label",{for:"task-status",class:"block text-sm font-medium text-gray-700"},"Status",-1)),C(t("select",{id:"task-status","onUpdate:modelValue":e[34]||(e[34]=s=>_.value.status=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},e[132]||(e[132]=[t("option",{value:"To Do"},"To Do",-1),t("option",{value:"In Progress"},"In Progress",-1),t("option",{value:"Done"},"Done",-1),t("option",{value:"Blocked"},"Blocked",-1),t("option",{value:"Archived"},"Archived",-1)]),512),[[V,_.value.status]]),h.value.status?(a(),l("p",hl,n(h.value.status[0]),1)):u("",!0)]),t("div",null,[e[134]||(e[134]=t("label",{for:"task-due-date",class:"block text-sm font-medium text-gray-700"},"Due Date",-1)),C(t("input",{id:"task-due-date","onUpdate:modelValue":e[35]||(e[35]=s=>_.value.due_date=s),type:"date",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[F,_.value.due_date]]),h.value.due_date?(a(),l("p",jl,n(h.value.due_date[0]),1)):u("",!0)]),t("div",null,[e[136]||(e[136]=t("label",{for:"task-assigned-to",class:"block text-sm font-medium text-gray-700"},"Assigned To",-1)),C(t("select",{id:"task-assigned-to","onUpdate:modelValue":e[36]||(e[36]=s=>_.value.assigned_to_user_id=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[e[135]||(e[135]=t("option",{value:null},"Unassigned",-1)),(a(!0),l(E,null,D(i.value.users,s=>(a(),l("option",{key:s.id,value:s.id},n(s.name),9,Cl))),128))],512),[[V,_.value.assigned_to_user_id]]),h.value.assigned_to_user_id?(a(),l("p",El,n(h.value.assigned_to_user_id[0]),1)):u("",!0)]),t("div",null,[e[138]||(e[138]=t("label",{for:"task-type",class:"block text-sm font-medium text-gray-700"},"Task Type",-1)),De.value?(a(),l("div",Dl,"Loading task types...")):C((a(),l("select",{key:1,id:"task-type","onUpdate:modelValue":e[37]||(e[37]=s=>_.value.task_type_id=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[e[137]||(e[137]=t("option",{value:null},"Select a task type",-1)),(a(!0),l(E,null,D(ye.value,s=>(a(),l("option",{key:s.id,value:s.id},n(s.name),9,Ml))),128))],512)),[[V,_.value.task_type_id]]),h.value.task_type_id?(a(),l("p",Nl,n(h.value.task_type_id[0]),1)):u("",!0)]),t("div",null,[t("div",{class:"flex justify-between items-center"},[e[139]||(e[139]=t("label",{for:"task-milestone",class:"block text-sm font-medium text-gray-700"},"Milestone",-1)),t("button",{type:"button",onClick:bt,class:"text-sm text-indigo-600 hover:text-indigo-800"}," + Create New Milestone ")]),xe.value?(a(),l("div",$l,"Loading milestones...")):C((a(),l("select",{key:1,id:"task-milestone","onUpdate:modelValue":e[38]||(e[38]=s=>_.value.milestone_id=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[e[140]||(e[140]=t("option",{value:null},"No milestone",-1)),(a(!0),l(E,null,D(N.value,s=>(a(),l("option",{key:s.id,value:s.id},n(s.name),9,Al))),128))],512)),[[V,_.value.milestone_id]]),h.value.milestone_id?(a(),l("p",Tl,n(h.value.milestone_id[0]),1)):u("",!0)]),t("div",Pl,[d(P,{onClick:e[39]||(e[39]=s=>G.value=!1)},{default:p(()=>e[141]||(e[141]=[v(" Cancel ")])),_:1,__:[141]}),d(M,{type:"submit",disabled:De.value||xe.value},{default:p(()=>[v(n(K.value?"Update Task":"Create Task"),1)]),_:1},8,["disabled"])])],32)])]),_:1},8,["show"]),d(L,{show:te.value,onClose:e[47]||(e[47]=s=>te.value=!1)},{default:p(()=>[t("div",Sl,[t("div",Rl,[e[143]||(e[143]=t("h3",{class:"text-lg font-semibold text-gray-900"},"Add New Milestone",-1)),t("button",{onClick:e[41]||(e[41]=s=>te.value=!1),class:"text-gray-400 hover:text-gray-500"},e[142]||(e[142]=[t("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),t("form",{onSubmit:he(wt,["prevent"]),class:"space-y-4"},[t("div",null,[e[144]||(e[144]=t("label",{for:"milestone-name",class:"block text-sm font-medium text-gray-700"},"Milestone Name",-1)),C(t("input",{id:"milestone-name","onUpdate:modelValue":e[42]||(e[42]=s=>S.value.name=s),type:"text",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",placeholder:"Enter milestone name"},null,512),[[F,S.value.name]]),$.value.name?(a(),l("p",Ul,n($.value.name[0]),1)):u("",!0)]),t("div",null,[e[145]||(e[145]=t("label",{for:"milestone-description",class:"block text-sm font-medium text-gray-700"},"Description",-1)),C(t("textarea",{id:"milestone-description","onUpdate:modelValue":e[43]||(e[43]=s=>S.value.description=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",rows:"3",placeholder:"Enter milestone description"},null,512),[[F,S.value.description]]),$.value.description?(a(),l("p",Vl,n($.value.description[0]),1)):u("",!0)]),t("div",null,[e[146]||(e[146]=t("label",{for:"milestone-completion-date",class:"block text-sm font-medium text-gray-700"},"Completion Date",-1)),C(t("input",{id:"milestone-completion-date","onUpdate:modelValue":e[44]||(e[44]=s=>S.value.completion_date=s),type:"date",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[F,S.value.completion_date]]),$.value.completion_date?(a(),l("p",Fl,n($.value.completion_date[0]),1)):u("",!0)]),t("div",null,[e[148]||(e[148]=t("label",{for:"milestone-status",class:"block text-sm font-medium text-gray-700"},"Status",-1)),C(t("select",{id:"milestone-status","onUpdate:modelValue":e[45]||(e[45]=s=>S.value.status=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},e[147]||(e[147]=[t("option",{value:"Not Started"},"Not Started",-1),t("option",{value:"In Progress"},"In Progress",-1),t("option",{value:"Completed"},"Completed",-1),t("option",{value:"Overdue"},"Overdue",-1)]),512),[[V,S.value.status]]),$.value.status?(a(),l("p",Ll,n($.value.status[0]),1)):u("",!0)]),t("div",Ol,[d(P,{onClick:e[46]||(e[46]=s=>te.value=!1),type:"button"},{default:p(()=>e[149]||(e[149]=[v(" Cancel ")])),_:1,__:[149]}),d(M,{type:"submit",disabled:Ne.value},{default:p(()=>[v(n(Ne.value?"Creating...":"Create Milestone"),1)]),_:1},8,["disabled"])])],32)])]),_:1},8,["show"]),d(L,{show:X.value,onClose:e[51]||(e[51]=s=>X.value=!1)},{default:p(()=>[t("div",Bl,[t("div",Il,[e[151]||(e[151]=t("h3",{class:"text-lg font-semibold text-gray-900"},"Add Note to Task",-1)),t("button",{onClick:e[48]||(e[48]=s=>X.value=!1),class:"text-gray-400 hover:text-gray-500"},e[150]||(e[150]=[t("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),Z.value?(a(),l("div",Wl,[t("p",Hl,n(Z.value.title),1),t("p",Gl,"Status: "+n(Z.value.status),1)])):u("",!0),t("div",ql,[e[152]||(e[152]=t("label",{for:"task-note-content",class:"block text-sm font-medium text-gray-700 mb-1"},"Note Content",-1)),C(t("textarea",{id:"task-note-content","onUpdate:modelValue":e[49]||(e[49]=s=>ee.value=s),class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full h-32",placeholder:"Enter your note..."},null,512),[[F,ee.value]]),q.value?(a(),l("p",zl,n(q.value),1)):u("",!0)]),t("div",Ql,[d(P,{onClick:e[50]||(e[50]=s=>X.value=!1),class:"mr-2"},{default:p(()=>e[153]||(e[153]=[v("Cancel")])),_:1,__:[153]}),d(M,{onClick:Dt,disabled:Me.value},{default:p(()=>[v(n(Me.value?"Adding...":"Add Note"),1)]),_:1},8,["disabled"])])])]),_:1},8,["show"])]),_:1})],64))}},cn=Jt(Yl,[["__scopeId","data-v-6d7563a9"]]);export{cn as default};
