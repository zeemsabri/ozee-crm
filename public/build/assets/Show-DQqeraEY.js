import{r as c,w as ct,c as Se,o as a,a as m,b as e,h as l,g as u,e as r,f as w,j as H,u as Fe,F,i as I,t as n,v as ne,l as Ct,k as v,n as Y,s as Re,d as Be,z as Mt,D as ps,A as ue,E as gs,M as ys,m as S,N as xs,G as fs,O as bs,q as _s}from"./app-Cq3jf0JG.js";import{s as ws,_ as hs}from"./AuthenticatedLayout-BtBID5En.js";import{P}from"./PrimaryButton-DeU3tpPn.js";import{a as Z,_ as re}from"./SecondaryButton-DnFcUaWD.js";import{_ as ks}from"./ProjectForm-BC9jm_-m.js";import{_ as js}from"./NotesModal-Co9HXjKY.js";import{_ as W,a as q}from"./InputError-Dzy8YfWP.js";import{_ as ce}from"./TextInput-Ctpb8Vgz.js";import{s as $t}from"./vue-multiselect-By8OPokx.js";import{R as St}from"./RichTextEditor-CEXoEZD1.js";import{_ as Ds}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-B_RBsjdL.js";import"./Checkbox-wniu4RRu.js";const Cs={class:"p-6"},Ss={class:"mt-6 space-y-6"},Ms={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},$s=["value"],Es={class:"flex items-center"},As={class:"flex items-center"},Ts={key:0,class:"text-sm text-red-600"},Vs={class:"flex justify-end mt-6 space-x-3"},Ns={__name:"MeetingModal",props:{show:{type:Boolean,default:!1},projectId:{type:Number,required:!0},projectUsers:{type:Array,default:()=>[]}},emits:["close","saved"],setup(me,{emit:f}){const z=me,Q=f,k=()=>Intl.DateTimeFormat().resolvedOptions().timeZone,M=c(["Africa/Cairo","Africa/Johannesburg","Africa/Lagos","America/Anchorage","America/Bogota","America/Chicago","America/Denver","America/Los_Angeles","America/Mexico_City","America/New_York","America/Phoenix","America/Sao_Paulo","America/Toronto","America/Vancouver","Asia/Dubai","Asia/Hong_Kong","Asia/Jerusalem","Asia/Kolkata","Asia/Seoul","Asia/Shanghai","Asia/Singapore","Asia/Tokyo","Australia/Melbourne","Australia/Perth","Australia/Sydney","Europe/Amsterdam","Europe/Berlin","Europe/Dublin","Europe/Istanbul","Europe/London","Europe/Madrid","Europe/Moscow","Europe/Paris","Europe/Rome","Pacific/Auckland","Pacific/Honolulu","UTC"]),J=c(k()),b=c({summary:"",description:"",start_datetime:"",end_datetime:"",attendee_user_ids:[],location:"",with_google_meet:!0,timezone:J.value,enable_recording:!1}),E=c({}),d=c(!1),C=c("");ct(()=>z.show,D=>{D||j()});const x=D=>{const g=new Date(D),y=g.getFullYear(),X=String(g.getMonth()+1).padStart(2,"0"),ee=String(g.getDate()).padStart(2,"0"),xe=String(g.getHours()).padStart(2,"0"),fe=String(g.getMinutes()).padStart(2,"0");return`${y}-${X}-${ee}T${xe}:${fe}`},_=()=>{const D=new Date,g=new Date(D.getTime()+60*60*1e3),y=new Date(D.getTime()+2*60*60*1e3);b.value.start_datetime=x(g),b.value.end_datetime=x(y)},j=()=>{b.value={summary:"",description:"",start_datetime:"",end_datetime:"",attendee_user_ids:[],location:"",with_google_meet:!0,timezone:J.value,enable_recording:!1},_(),E.value={},C.value="",d.value=!1};_();const A=D=>D?D.replace("T"," ")+":00":"",K=async()=>{d.value=!0,E.value={},C.value="";try{const D={...b.value};D.start_datetime=A(D.start_datetime),D.end_datetime=A(D.end_datetime);const g=await window.axios.post(`/api/projects/${z.projectId}/meetings`,D);Q("saved",g.data),Q("close")}catch(D){d.value=!1,D.response?D.response.status===422?E.value=D.response.data.errors:C.value=D.response.data.message||"An error occurred while creating the meeting.":(C.value="An unexpected error occurred. Please try again.",console.error("Error creating meeting:",D))}},ve=()=>{Q("close")};return(D,g)=>(a(),Se(re,{show:me.show,onClose:ve,"max-width":"2xl"},{default:m(()=>[e("div",Cs,[g[15]||(g[15]=e("h2",{class:"text-lg font-medium text-gray-900"}," Schedule a Meeting ",-1)),e("div",Ss,[e("div",null,[r(W,{for:"summary",value:"Meeting Title"}),r(ce,{id:"summary",modelValue:b.value.summary,"onUpdate:modelValue":g[0]||(g[0]=y=>b.value.summary=y),type:"text",class:"mt-1 block w-full",placeholder:"Project Status Meeting",required:""},null,8,["modelValue"]),r(q,{message:E.value.summary?E.value.summary[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[r(W,{for:"description",value:"Description"}),w(e("textarea",{id:"description","onUpdate:modelValue":g[1]||(g[1]=y=>b.value.description=y),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",rows:"3",placeholder:"Meeting agenda and details..."},null,512),[[H,b.value.description]]),r(q,{message:E.value.description?E.value.description[0]:"",class:"mt-2"},null,8,["message"])]),e("div",Ms,[e("div",null,[r(W,{for:"start_datetime",value:"Start Date & Time"}),r(ce,{id:"start_datetime",modelValue:b.value.start_datetime,"onUpdate:modelValue":g[2]||(g[2]=y=>b.value.start_datetime=y),type:"datetime-local",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),r(q,{message:E.value.start_datetime?E.value.start_datetime[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[r(W,{for:"end_datetime",value:"End Date & Time"}),r(ce,{id:"end_datetime",modelValue:b.value.end_datetime,"onUpdate:modelValue":g[3]||(g[3]=y=>b.value.end_datetime=y),type:"datetime-local",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),r(q,{message:E.value.end_datetime?E.value.end_datetime[0]:"",class:"mt-2"},null,8,["message"])])]),e("div",null,[r(W,{for:"attendees",value:"Attendees"}),r(Fe($t),{id:"attendees",modelValue:b.value.attendee_user_ids,"onUpdate:modelValue":g[4]||(g[4]=y=>b.value.attendee_user_ids=y),options:z.projectUsers.map(y=>y.id),"custom-label":y=>{const X=z.projectUsers.find(ee=>ee.id===y);return X?`${X.name} (${X.email})`:""},placeholder:"Select attendees",multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,"show-labels":!1,class:"mt-1"},null,8,["modelValue","options","custom-label"]),g[9]||(g[9]=e("p",{class:"mt-1 text-sm text-gray-500"}," Select project members to invite to this meeting ",-1)),r(q,{message:E.value.attendee_user_ids?E.value.attendee_user_ids[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[r(W,{for:"location",value:"Location (Optional)"}),r(ce,{id:"location",modelValue:b.value.location,"onUpdate:modelValue":g[5]||(g[5]=y=>b.value.location=y),type:"text",class:"mt-1 block w-full",placeholder:"Office, Conference Room, etc."},null,8,["modelValue"]),r(q,{message:E.value.location?E.value.location[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[r(W,{for:"timezone",value:"Timezone"}),w(e("select",{id:"timezone","onUpdate:modelValue":g[6]||(g[6]=y=>b.value.timezone=y),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[(a(!0),l(F,null,I(M.value,y=>(a(),l("option",{key:y,value:y},n(y),9,$s))),128))],512),[[ne,b.value.timezone]]),g[10]||(g[10]=e("p",{class:"mt-1 text-sm text-gray-500"}," Select your timezone for this meeting ",-1)),r(q,{message:E.value.timezone?E.value.timezone[0]:"",class:"mt-2"},null,8,["message"])]),e("div",Es,[w(e("input",{id:"with_google_meet","onUpdate:modelValue":g[7]||(g[7]=y=>b.value.with_google_meet=y),type:"checkbox",class:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,512),[[Ct,b.value.with_google_meet]]),g[11]||(g[11]=e("label",{for:"with_google_meet",class:"ml-2 block text-sm text-gray-900"}," Create Google Meet video conference ",-1))]),e("div",As,[w(e("input",{id:"enable_recording","onUpdate:modelValue":g[8]||(g[8]=y=>b.value.enable_recording=y),type:"checkbox",class:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,512),[[Ct,b.value.enable_recording]]),g[12]||(g[12]=e("label",{for:"enable_recording",class:"ml-2 block text-sm text-gray-900"}," Enable recording and transcript ",-1))]),C.value?(a(),l("div",Ts,n(C.value),1)):u("",!0),e("div",Vs,[r(Z,{onClick:ve},{default:m(()=>g[13]||(g[13]=[v(" Cancel ")])),_:1,__:[13]}),r(P,{onClick:K,class:Y({"opacity-25":d.value}),disabled:d.value},{default:m(()=>g[14]||(g[14]=[v(" Schedule Meeting ")])),_:1,__:[14]},8,["class","disabled"])])])])]),_:1},8,["show"]))}},Us={class:"p-6"},Ps={key:0,class:"text-red-600 text-sm mb-4"},Ls={class:"mb-4"},Fs={class:"mb-4"},Rs={class:"mb-4"},Bs={class:"mt-6 flex justify-end"},Is={__name:"StandupModal",props:{show:Boolean,projectId:Number},emits:["close","standupAdded"],setup(me,{emit:f}){const z=me,Q=f,k=Re({project_id:null,yesterday:"",today:"",blockers:""}),M=c({}),J=c(""),b=c(!1);ct(()=>z.projectId,d=>{d&&(k.project_id=d)},{immediate:!0}),ct(()=>z.show,d=>{d&&(k.project_id=z.projectId,k.yesterday="",k.today="",k.blockers="",M.value={},J.value="",b.value=!1)});const E=async()=>{M.value={},J.value="",b.value=!0;try{const d=`
**Daily Standup**

**Yesterday:** ${k.yesterday}

**Today:** ${k.today}

**Blockers:** ${k.blockers||"None"}
`.trim();await window.axios.post(`/api/projects/${k.project_id}/standup`,{content:d,yesterday:k.yesterday,today:k.today,blockers:k.blockers}),ws("Standup submitted successfully!"),Q("standupAdded"),Q("close")}catch(d){d.response&&d.response.status===422?M.value=d.response.data.errors:d.response&&d.response.data.message?(J.value=d.response.data.message,d(d.response.data.message)):(J.value="Failed to submit standup.",d("Failed to submit standup."),console.error("Error submitting standup:",d))}finally{b.value=!1}};return(d,C)=>(a(),Se(re,{show:me.show,onClose:C[4]||(C[4]=x=>d.$emit("close"))},{default:m(()=>[e("div",Us,[C[6]||(C[6]=e("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Daily Standup",-1)),J.value?(a(),l("div",Ps,n(J.value),1)):u("",!0),e("form",{onSubmit:Be(E,["prevent"])},[e("div",Ls,[r(W,{for:"yesterday",value:"What did you work on yesterday?"}),r(ce,{id:"yesterday",type:"text",class:"mt-1 block w-full",modelValue:k.yesterday,"onUpdate:modelValue":C[0]||(C[0]=x=>k.yesterday=x),required:""},null,8,["modelValue"]),r(q,{message:M.value.yesterday?M.value.yesterday[0]:"",class:"mt-2"},null,8,["message"])]),e("div",Fs,[r(W,{for:"today",value:"What will you work on today?"}),r(ce,{id:"today",type:"text",class:"mt-1 block w-full",modelValue:k.today,"onUpdate:modelValue":C[1]||(C[1]=x=>k.today=x),required:""},null,8,["modelValue"]),r(q,{message:M.value.today?M.value.today[0]:"",class:"mt-2"},null,8,["message"])]),e("div",Rs,[r(W,{for:"blockers",value:"Any blockers?"}),r(ce,{id:"blockers",type:"text",class:"mt-1 block w-full",modelValue:k.blockers,"onUpdate:modelValue":C[2]||(C[2]=x=>k.blockers=x),placeholder:"None"},null,8,["modelValue"]),r(q,{message:M.value.blockers?M.value.blockers[0]:"",class:"mt-2"},null,8,["message"])]),e("div",Bs,[r(Z,{onClick:C[3]||(C[3]=x=>d.$emit("close")),disabled:b.value},{default:m(()=>C[5]||(C[5]=[v("Cancel")])),_:1,__:[5]},8,["disabled"]),r(P,{class:Y(["ms-3",{"opacity-75 cursor-not-allowed":b.value}]),type:"submit",disabled:b.value},{default:m(()=>[v(n(b.value?"Submitting...":"Submit Standup"),1)]),_:1},8,["disabled","class"])])],32)])]),_:1},8,["show"]))}},Os={class:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow mb-6"},zs={key:0,class:"text-sm text-gray-500"},Hs={key:1,class:"text-sm text-gray-500"},Ws={key:2,class:"space-y-3"},qs={class:"flex justify-between items-start"},Gs={class:"font-medium text-gray-900"},Ys={class:"text-sm text-gray-600"},Zs={key:0,class:"text-sm text-gray-600 mt-1"},Js={class:"flex space-x-2"},Ks=["href"],Qs=["href"],Xs=["onClick"],eo={__name:"ProjectMeetingsList",props:{projectId:{type:Number,required:!0}},setup(me,{expose:f}){const z=me,Q=c([]),k=c(!1),M=c(""),J=()=>{try{M.value=Intl.DateTimeFormat().resolvedOptions().timeZone}catch(x){console.error("Error detecting user timezone:",x),M.value="UTC"}},b=(x,_=null,j=!1)=>{if(!x)return"";try{if(j||x.endsWith("Z")){if(_&&_===M.value){const K={dateStyle:"medium",timeStyle:"short"};return new Date(x).toLocaleString(void 0,K)}const A={dateStyle:"medium",timeStyle:"short",timeZone:_||M.value};return new Date(x).toLocaleString(void 0,A)}else{if(_&&_===M.value){const K={dateStyle:"medium",timeStyle:"short"};return new Date(x).toLocaleString(void 0,K)}const A={dateStyle:"medium",timeStyle:"short",timeZone:_||M.value};return new Date(x).toLocaleString(void 0,A)}}catch(A){return console.error("Error formatting meeting time:",A),new Date(x).toLocaleString()}},E=(x,_=null,j=!1)=>{if(!x)return"";try{if(j||x.endsWith("Z")){if(_&&_===M.value){const K={timeStyle:"short"};return new Date(x).toLocaleTimeString(void 0,K)}const A={timeStyle:"short",timeZone:_||M.value};return new Date(x).toLocaleTimeString(void 0,A)}else{if(_&&_===M.value){const K={timeStyle:"short"};return new Date(x).toLocaleTimeString(void 0,K)}const A={timeStyle:"short",timeZone:_||M.value};return new Date(x).toLocaleTimeString(void 0,A)}}catch(A){return console.error("Error formatting meeting time (time only):",A),new Date(x).toLocaleTimeString()}},d=async()=>{k.value=!0;try{const x=await window.axios.get(`/api/projects/${z.projectId}/meetings`);Q.value=x.data}catch(x){console.error("Error fetching project meetings:",x)}finally{k.value=!1}},C=async x=>{if(confirm("Are you sure you want to delete this meeting?"))try{await window.axios.delete(`/api/projects/${z.projectId}/meetings/${x}`),await d()}catch(_){console.error("Error deleting meeting:",_),alert("Failed to delete meeting. Please try again.")}};return f({fetchMeetings:d}),Mt(()=>{J(),d()}),(x,_)=>(a(),l("div",Os,[_[4]||(_[4]=e("h4",{class:"text-md font-semibold text-gray-900 mb-2"},"Upcoming Meetings",-1)),k.value?(a(),l("div",zs," Loading meetings... ")):Q.value.length===0?(a(),l("div",Hs," No upcoming meetings scheduled. ")):(a(),l("div",Ws,[(a(!0),l(F,null,I(Q.value,j=>(a(),l("div",{key:j.id,class:"p-3 bg-gray-50 rounded-lg border border-gray-200 hover:bg-gray-100 transition-colors"},[e("div",qs,[e("div",null,[e("h5",Gs,n(j.summary),1),e("p",Ys,n(b(j.start_time,j.timezone,j.is_utc))+" - "+n(E(j.end_time,j.timezone,j.is_utc)),1),j.location?(a(),l("p",Zs,[_[0]||(_[0]=e("span",{class:"font-medium"},"Location:",-1)),v(" "+n(j.location),1)])):u("",!0)]),e("div",Js,[e("a",{href:j.google_event_link,target:"_blank",class:"text-blue-600 hover:text-blue-800",title:"View in Google Calendar"},_[1]||(_[1]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)]),8,Ks),j.google_meet_link?(a(),l("a",{key:0,href:j.google_meet_link,target:"_blank",class:"text-green-600 hover:text-green-800",title:"Join Google Meet"},_[2]||(_[2]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1)]),8,Qs)):u("",!0),e("button",{onClick:A=>C(j.google_event_id),class:"text-red-600 hover:text-red-800",title:"Delete Meeting"},_[3]||(_[3]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,Xs)])])]))),128))]))]))}},to={class:"py-8 max-w-full mx-auto px-4 sm:px-6 lg:px-8"},so={key:0,class:"text-center text-gray-600 text-lg animate-pulse"},oo={key:1,class:"text-center text-red-600 text-lg font-medium"},ao={key:2,class:"space-y-8"},lo={class:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow mb-6"},no={class:"flex justify-between items-center mb-4"},ro={class:"flex gap-3"},io={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},uo={class:"text-2xl font-bold text-gray-900 tracking-tight mb-2"},co={class:"text-gray-600 text-base"},mo={class:"space-y-3 text-sm text-gray-700"},vo={class:"flex space-x-4 mt-2"},po=["href"],go=["href"],yo=["href"],xo={class:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-6"},fo={class:"bg-white p-4 rounded-xl shadow-md hover:shadow-lg transition-shadow"},bo={class:"text-2xl font-bold text-indigo-600"},_o={class:"bg-white p-4 rounded-xl shadow-md hover:shadow-lg transition-shadow"},wo={class:"text-2xl font-bold text-indigo-600"},ho={class:"bg-white p-4 rounded-xl shadow-md hover:shadow-lg transition-shadow"},ko={class:"text-2xl font-bold text-indigo-600"},jo={class:"bg-white p-4 rounded-xl shadow-md hover:shadow-lg transition-shadow"},Do={class:"text-2xl font-bold text-indigo-600"},Co={class:"bg-white p-4 rounded-xl shadow-md mb-6"},So={class:"border-b border-gray-200"},Mo={class:"-mb-px flex space-x-8"},$o={key:0},Eo={key:0,class:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow mb-6"},Ao={class:"flex justify-between items-center mb-4"},To={class:"overflow-x-auto"},Vo={class:"min-w-full divide-y divide-gray-200"},No={class:"bg-white divide-y divide-gray-200"},Uo={class:"px-4 py-3 text-sm text-gray-900"},Po={class:"px-4 py-3 text-sm text-gray-700"},Lo={class:"px-4 py-3 text-sm text-gray-700"},Fo={class:"px-4 py-3 text-right"},Ro={class:"flex justify-end space-x-2"},Bo=["onClick"],Io=["onClick"],Oo={key:1,class:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow mb-6"},zo={class:"flex justify-between items-center mb-4"},Ho={key:2,class:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow mb-6"},Wo={class:"flex justify-between items-center mb-4"},qo={key:0,class:"text-center text-gray-600 text-sm animate-pulse py-4"},Go={key:1,class:"text-center text-red-600 text-sm font-medium py-4"},Yo={key:2,class:"overflow-x-auto"},Zo={class:"min-w-full divide-y divide-gray-200"},Jo={class:"bg-white divide-y divide-gray-200"},Ko={class:"px-4 py-3 text-sm text-gray-900"},Qo={class:"px-4 py-3 text-sm text-gray-700"},Xo={class:"px-4 py-3 text-sm text-gray-700"},ea={class:"px-4 py-3 text-right"},ta={key:3,class:"text-gray-400 text-sm"},sa={key:3,class:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow mb-6"},oa={class:"flex justify-between items-center mb-4"},aa={class:"flex items-center gap-4"},la={key:0},na={key:0,class:"space-y-4"},ra={class:"flex justify-between"},ia={class:"flex-grow"},da={key:0,class:"text-xs text-red-400 block mt-1"},ua={class:"flex items-center mt-1"},ca={class:"text-xs text-gray-500"},ma={key:0,class:"ml-2 px-2 py-0.5 bg-indigo-100 text-indigo-800 text-xs rounded-full"},va={key:0},pa={key:1,class:"text-gray-400 text-sm"},ga={key:4,class:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow mb-6"},ya={class:"flex justify-between items-center mb-4"},xa={class:"flex items-center gap-4"},fa={key:0},ba={class:"space-y-4"},_a={key:0,class:"flex justify-between"},wa={class:"flex-grow"},ha={class:"text-sm text-red-500 italic"},ka={class:"flex items-center mt-1"},ja={class:"text-xs text-gray-500"},Da={key:1},Ca={class:"flex-grow"},Sa={class:"flex justify-between items-center mb-3"},Ma={class:"text-sm text-gray-600 bg-blue-100 px-2 py-1 rounded-full"},$a={class:"mb-3"},Ea={class:"text-sm text-gray-700 ml-6"},Aa={class:"mb-3"},Ta={class:"text-sm text-gray-700 ml-6"},Va={class:"mb-2"},Na={class:"text-sm text-gray-700 ml-6"},Ua={class:"flex items-center mt-3 pt-2 border-t border-blue-200"},Pa={class:"text-xs text-gray-500"},La={key:1,class:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow"},Fa={class:"flex justify-between items-center mb-4"},Ra={class:"flex gap-2"},Ba={key:0},Ia={key:1},Oa={class:"mb-6 overflow-x-auto"},za={key:0,class:"text-center text-gray-600 text-sm animate-pulse py-4"},Ha={key:1,class:"text-center py-4"},Wa={key:2,class:"relative py-8"},qa={class:"relative flex justify-between"},Ga={key:0,class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ya={key:1,class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Za={key:2,class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ja={key:3,class:"w-2 h-2 bg-white rounded-full"},Ka={class:"absolute -top-8 transform -translate-x-1/2 left-1/2 w-32"},Qa=["title"],Xa={class:"absolute top-8 transform -translate-x-1/2 left-1/2"},el={class:"text-xs text-gray-500 whitespace-nowrap"},tl={class:"mb-6 bg-gray-50 p-4 rounded-lg"},sl={class:"flex flex-wrap items-center gap-4"},ol={class:"flex-1 min-w-[200px]"},al={class:"flex-1 min-w-[200px]"},ll=["value"],nl={class:"flex-1 min-w-[200px]"},rl=["value"],il={class:"flex-1 min-w-[200px]"},dl=["value"],ul={key:0,class:"mt-3 text-sm text-gray-600"},cl={key:0,class:"text-red-600 font-medium"},ml={key:0,class:"text-center text-gray-600 text-sm animate-pulse py-4"},vl={key:1,class:"text-center py-4"},pl={class:"text-red-600 text-sm font-medium"},gl={key:2,class:"overflow-x-auto"},yl={class:"min-w-full divide-y divide-gray-200"},xl={class:"bg-white divide-y divide-gray-200"},fl={class:"px-4 py-3 text-sm text-gray-900"},bl={class:"px-4 py-3 text-sm text-gray-700"},_l={class:"px-4 py-3 text-sm text-gray-700"},wl={class:"px-4 py-3 text-sm text-gray-700"},hl={class:"px-4 py-3 text-sm text-gray-700"},kl={class:"px-4 py-3 text-right"},jl={class:"flex justify-end space-x-2"},Dl=["onClick"],Cl=["onClick"],Sl=["onClick"],Ml=["onClick"],$l={key:3,class:"text-center py-4"},El={key:2,class:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow"},Al={class:"flex justify-between items-center mb-4"},Tl={key:0,class:"flex gap-3"},Vl={key:1,class:"mt-2 bg-green-100 border border-green-400 text-green-700 px-4 py-2 rounded relative",role:"alert"},Nl={class:"block sm:inline"},Ul={class:"mb-4 bg-gray-50 p-4 rounded-lg"},Pl={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Ll={class:"mt-1 relative rounded-md shadow-sm"},Fl={key:0,class:"text-center text-gray-600 text-sm animate-pulse py-4"},Rl={key:1,class:"text-center text-red-600 text-sm font-medium py-4"},Bl={key:2,class:"overflow-x-auto"},Il={class:"min-w-full divide-y divide-gray-200"},Ol={class:"bg-white divide-y divide-gray-200"},zl={class:"px-4 py-3 text-sm text-gray-900"},Hl={class:"px-4 py-3 text-sm text-gray-700"},Wl={class:"px-4 py-3 text-sm text-gray-700"},ql={class:"px-4 py-3 text-sm text-gray-700"},Gl={class:"px-4 py-3 text-sm text-gray-700"},Yl={class:"px-4 py-3 text-right"},Zl={key:3,class:"text-gray-400 text-sm"},Jl={key:3,class:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow"},Kl={class:"flex justify-between items-center mb-4"},Ql={class:"flex gap-3"},Xl={class:"mb-4 bg-gray-50 p-4 rounded-lg"},en={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},tn={class:"mt-1 relative rounded-md shadow-sm"},sn={key:0,class:"mb-8"},on={class:"space-y-4"},an={key:0,class:"flex justify-between"},ln={class:"flex-grow"},nn={class:"text-sm text-red-500 italic"},rn={class:"flex items-center mt-1"},dn={class:"text-xs text-gray-500"},un={key:1},cn={class:"flex-grow"},mn={class:"flex justify-between items-center mb-3"},vn={class:"text-sm text-gray-600 bg-blue-100 px-2 py-1 rounded-full"},pn={class:"mb-3"},gn={class:"text-sm text-gray-700 ml-6"},yn={class:"mb-3"},xn={class:"text-sm text-gray-700 ml-6"},fn={class:"mb-2"},bn={class:"text-sm text-gray-700 ml-6"},_n={class:"flex items-center mt-3 pt-2 border-t border-blue-200"},wn={class:"text-xs text-gray-500"},hn={key:0,class:"space-y-4"},kn={class:"flex justify-between"},jn={class:"flex-grow"},Dn={key:0,class:"text-xs text-red-400 block mt-1"},Cn={class:"flex items-center mt-1"},Sn={class:"text-xs text-gray-500"},Mn={key:0,class:"ml-2 px-2 py-0.5 bg-indigo-100 text-indigo-800 text-xs rounded-full"},$n={key:0},En={key:1,class:"text-gray-400 text-sm"},An={class:"p-6"},Tn={class:"flex justify-between items-center mb-4"},Vn={key:0,class:"space-y-4"},Nn={class:"border-b pb-4"},Un={class:"text-xl font-medium text-gray-900 mb-2"},Pn={class:"grid grid-cols-2 gap-4 text-sm"},Ln={class:"text-gray-600"},Fn={class:"text-gray-900"},Rn={class:"text-gray-600 mt-1"},Bn={class:"text-gray-600"},In={class:"text-gray-900"},On={class:"prose max-w-none"},zn=["innerHTML"],Hn={key:0,class:"mt-4 p-4 bg-red-50 rounded-md"},Wn={class:"text-red-700"},qn={key:1,class:"mt-4 text-sm text-gray-600"},Gn={key:0},Yn={key:2,class:"mt-6 flex justify-end space-x-2"},Zn={class:"p-6"},Jn={class:"flex justify-between items-center mb-4"},Kn={key:0,class:"space-y-4"},Qn={key:0,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert"},Xn={class:"block sm:inline"},er={class:"mb-4"},tr={class:"mb-6"},sr={class:"mt-6 flex justify-end space-x-2"},or={class:"p-6"},ar={class:"flex justify-between items-center mb-4"},lr={key:0,class:"space-y-4"},nr={key:0,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert"},rr={class:"block sm:inline"},ir={class:"mb-6"},dr={class:"mt-6 flex justify-end space-x-2"},ur={class:"p-6"},cr={class:"flex justify-between items-center mb-4"},mr={key:0,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert"},vr={class:"block sm:inline"},pr={class:"mb-4"},gr={class:"multiselect__tag"},yr=["onClick"],xr={class:"mb-4"},fr={class:"mb-6"},br={class:"flex items-center justify-end"},_r={class:"p-6"},wr={class:"flex justify-between items-center mb-4"},hr={key:0,class:"mb-4 p-3 bg-gray-100 rounded-md"},kr={class:"text-sm text-gray-700"},jr={class:"text-xs text-gray-500 mt-1"},Dr={key:1,class:"mb-4"},Cr={key:0,class:"text-center py-4"},Sr={key:1,class:"space-y-3 max-h-60 overflow-y-auto"},Mr={class:"text-sm text-gray-700"},$r={class:"text-xs text-gray-500 mt-1"},Er={key:2,class:"text-center py-3"},Ar={key:2,class:"mb-4"},Tr={key:0,class:"mt-2 text-sm text-red-600"},Vr={key:3,class:"mt-6 flex justify-end"},Nr={class:"p-6"},Ur={class:"flex justify-between items-center mb-4"},Pr={class:"text-lg font-semibold text-gray-900"},Lr={key:0,class:"mt-1 text-sm text-red-600"},Fr={key:0,class:"mt-1 text-sm text-red-600"},Rr={key:0,class:"mt-1 text-sm text-red-600"},Br={key:0,class:"mt-1 text-sm text-red-600"},Ir=["value"],Or={key:0,class:"mt-1 text-sm text-red-600"},zr={key:0,class:"text-sm text-gray-500"},Hr=["value"],Wr={key:2,class:"mt-1 text-sm text-red-600"},qr={key:0,class:"text-sm text-gray-500"},Gr=["value"],Yr={key:2,class:"mt-1 text-sm text-red-600"},Zr={class:"mt-6 flex justify-end space-x-3"},Jr={class:"p-6"},Kr={class:"flex justify-between items-center mb-4"},Qr={key:0,class:"mt-1 text-sm text-red-600"},Xr={key:0,class:"mt-1 text-sm text-red-600"},ei={key:0,class:"mt-1 text-sm text-red-600"},ti={key:0,class:"mt-1 text-sm text-red-600"},si={class:"mt-6 flex justify-end space-x-3"},oi={class:"p-6"},ai={class:"flex justify-between items-center mb-4"},li={key:0,class:"mb-4 p-3 bg-gray-100 rounded-md"},ni={class:"text-sm font-medium text-gray-900"},ri={class:"text-xs text-gray-500 mt-1"},ii={class:"mb-4"},di={key:0,class:"mt-2 text-sm text-red-600"},ui={class:"mt-6 flex justify-end"},ci={__name:"Show",setup(me){const f=ps(),z=ue().props.id,{permissions:Q,loading:k,error:M}=gs(),{permissions:J,loading:b,error:E}=ys(z),d=c({}),C=c([]),x=c([]),_=c(!0),j=c(""),A=c(!1),K=c(!1),ve=c(!1),D=c(!1),g=c(!1),y=c(null),X=c(""),ee=c(""),xe=c([]),fe=c(!1),ot=c(null);c(null);const O=c(null),Ze=S(()=>d.value.notes?d.value.notes.filter(o=>o.type==="note"||!o.type):[]),Ie=S(()=>d.value.notes?d.value.notes.filter(o=>o.type==="standup"):[]),mt=S(()=>Ze.value?[...Ze.value].slice(0,3):[]),Et=S(()=>Ie.value?[...Ie.value].slice(0,3):[]),pe=o=>{if(!o||o==="[Encrypted content could not be decrypted]")return{title:"Daily Standup",date:new Date().toLocaleDateString(),yesterday:"N/A",today:"N/A",blockers:"N/A",isDecrypted:!1};const t=o.match(/\*\*Daily Standup - ([^*]+)\*\*/),s=t?t[1].trim():new Date().toLocaleDateString(),i=o.match(/\*\*Yesterday:\*\* ([^\n]+)/),p=i?i[1].trim():"Nothing",T=o.match(/\*\*Today:\*\* ([^\n]+)/),Ce=T?T[1].trim():"Nothing",Dt=o.match(/\*\*Blockers:\*\* ([^\n]+)/),vs=Dt?Dt[1].trim():"None";return{title:"Daily Standup",date:s,yesterday:p,today:Ce,blockers:vs,isDecrypted:!0}},vt=S(()=>ge.value?[...ge.value].slice(0,3):[]),pt=S(()=>{if(!te.value)return[];const o=new Date;return o.setHours(0,0,0,0),te.value.filter(t=>t.due_date?new Date(t.due_date).toDateString()===o.toDateString():!1)}),gt=()=>{K.value=!0},yt=async o=>{y.value=o,X.value="",ee.value="",xe.value=[],fe.value=!0,ve.value=!0;try{const t=await window.axios.get(`/api/projects/${d.value.id}/notes/${o.id}/replies`);t.data.success?xe.value=t.data.replies:console.error("Failed to fetch replies:",t.data.message)}catch(t){console.error("Error fetching replies:",t)}finally{fe.value=!1}},At=async()=>{var o,t;if(!y.value||!X.value.trim()){ee.value="Reply content is required";return}ee.value="";try{const s=await window.axios.post(`/api/projects/${d.value.id}/notes/${y.value.id}/reply`,{content:X.value});if(s.data.success){X.value="";try{fe.value=!0;const i=await window.axios.get(`/api/projects/${d.value.id}/notes/${y.value.id}/replies`);i.data.success&&(xe.value=i.data.replies)}catch(i){console.error("Error fetching updated replies:",i)}finally{fe.value=!1}await Ke()}else ee.value=s.data.message||"Failed to send reply"}catch(s){console.error("Error sending reply:",s),ee.value=((t=(o=s.response)==null?void 0:o.data)==null?void 0:t.message)||"An error occurred while sending the reply"}},Tt=[{value:"active",label:"Active"},{value:"completed",label:"Completed"},{value:"on_hold",label:"On Hold"},{value:"archived",label:"Archived"}],Vt=[{value:"Website Designing",label:"Website Designing"},{value:"SEO",label:"SEO"},{value:"Social Media",label:"Social Media"},{value:"Content Writing",label:"Content Writing"},{value:"Graphic Design",label:"Graphic Design"}],Nt=[{value:"UpWork",label:"UpWork"},{value:"Direct",label:"Direct Client"},{value:"Wix Marketplace",label:"Wix Marketplace"},{value:"Referral",label:"Referral"}],Ut=[{value:"Primary",label:"Primary"},{value:"Accountant",label:"Accountant"},{value:"Other",label:"Other"}],Pt=[{value:"Manager",label:"Manager"},{value:"Developer",label:"Developer"},{value:"QA",label:"QA"},{value:"Other",label:"Other"}],Lt=[{value:"one_off",label:"One-Off"},{value:"monthly",label:"Monthly"}],V=xs(d),xt=S(()=>!!V.value),ft=S(()=>{if(!V.value)return!1;const o=V.value.name,t=V.value.slug;return o==="Manager"||o==="Project Manager"||t==="manager"||t==="project-manager"}),{canDo:Me,canView:be}=fs(z),ie=S(()=>f.value?f.value.role_data&&f.value.role_data.slug==="super-admin"||f.value.role==="super_admin"||f.value.role==="super-admin":!1);S(()=>f.value?f.value.role_data&&f.value.role_data.slug==="manager"||f.value.role==="manager"||f.value.role==="manager-role"||f.value.role==="manager_role"||ft.value:!1),S(()=>!f.value||xt.value&&!ft.value?!1:f.value.role_data&&f.value.role_data.slug==="employee"||f.value.role==="employee"||f.value.role==="employee-role"),S(()=>!f.value||xt.value?!1:f.value.role_data&&f.value.role_data.slug==="contractor"||f.value.role==="contractor"||f.value.role==="contractor-role");const _e=S(()=>{console.log("userProjectRole in canManageProjects:",V.value);const o=V.value&&V.value.permissions&&V.value.permissions.some(T=>T.slug==="manage_projects");console.log("Has project-specific manage_projects permission:",o);const t=f.value&&f.value.global_permissions&&f.value.global_permissions.some(T=>T.slug==="manage_projects");console.log("Has global manage_projects permission:",t);const s=f.value&&f.value.role&&f.value.role.permissions&&f.value.role.permissions.some(T=>T.slug==="manage_projects");console.log("Has role manage_projects permission:",s);const i=Me("manage_projects",V).value;console.log("canDo result for manage_projects:",i);const p=i||ie.value;return console.log("Final canManageProjects result:",p),p}),Ft=S(()=>be("project_financial",V).value||ie.value),Rt=S(()=>be("project_transactions",V).value||ie.value);S(()=>be("client_contacts",V).value||ie.value);const Bt=S(()=>be("client_financial",V).value||ie.value);S(()=>be("users",V).value||ie.value);const at=S(()=>be("emails",V).value||!1),It=S(()=>Me("compose_emails",V).value||!1),Ot=S(()=>Me("approve_emails",V).value||!1),Oe=S(()=>be("project_notes",V).value||!1),bt=S(()=>Me("project_notes",V).value||!1),G=Re({startDate:"",endDate:"",search:""}),Je=async()=>{try{const o=ue().props.id,t=new URLSearchParams;G.startDate&&t.append("start_date",G.startDate),G.endDate&&t.append("end_date",G.endDate),G.search&&t.append("search",G.search);const s=t.toString(),i=`/api/projects/${o}/sections/notes${s?`?${s}`:""}`,p=await window.axios.get(i);d.value.notes=p.data}catch(o){console.error("Error fetching project notes:",o)}},lt=()=>{Je()},zt=()=>{G.startDate="",G.endDate="",G.search="",Je()};let _t=null;const Ht=()=>{clearTimeout(_t),_t=setTimeout(()=>{lt()},500)},Ke=async()=>{_.value=!0,j.value="";try{const o=ue().props.id;console.log("Fetching project data for ID:",o);const t=await window.axios.get(`/api/projects/${o}/sections/basic`);console.log("Basic project data received:",t.data),d.value=t.data;try{const s=await window.axios.get(`/api/projects/${o}/sections/clients-users`);if(console.log("Clients and users data received:",s.data),s.data.clients&&(d.value.clients=s.data.clients),s.data.users){if(d.value.users=s.data.users,console.log("Project users:",d.value.users.length),d.value.users.length>0){const i=d.value.users[0];console.log("First user structure:",{id:i.id,name:i.name,hasPivot:!!i.pivot,pivotData:i.pivot?{hasRoleId:!!i.pivot.role_id,hasRoleData:!!i.pivot.role_data,roleDataStructure:i.pivot.role_data}:"No pivot data"});const p=d.value.users.find(T=>T.id===f.value.id);console.log("Current user in project:",p?{name:p.name,hasPivot:!!p.pivot,pivotData:p.pivot?{hasRoleId:!!p.pivot.role_id,hasRoleData:!!p.pivot.role_data,roleDataStructure:p.pivot.role_data}:"No pivot data"}:"Not found")}}else console.log("No users array in project data")}catch(s){console.error("Error fetching clients and users:",s)}if(Ft.value)try{const s=await window.axios.get(`/api/projects/${o}/sections/services-payment`);console.log("Financial data received:",s.data),d.value.services=s.data.services,d.value.service_details=s.data.service_details,d.value.total_amount=s.data.total_amount,d.value.payment_type=s.data.payment_type}catch(s){console.error("Error fetching financial information:",s)}if(Rt.value)try{const s=await window.axios.get(`/api/projects/${o}/sections/transactions`);console.log("Transactions data received:",s.data),d.value.transactions=s.data}catch(s){console.error("Error fetching transactions:",s)}try{const s=await window.axios.get(`/api/projects/${o}/sections/documents`);console.log("Documents data received:",s.data),d.value.documents=s.data}catch(s){console.error("Error fetching documents:",s)}if(Bt.value)try{const s=await window.axios.get(`/api/projects/${o}/contract-details`);console.log("Contract details received:",s.data),d.value.contract_details=s.data}catch(s){console.error("Error fetching contract details:",s)}if(console.log("Project value after assignment:",d.value),console.log("userProjectRole after project set:",V.value),_e.value){console.log("User can manage projects, fetching additional data");const s=await window.axios.get("/api/clients");C.value=s.data;const i=await window.axios.get("/api/users");x.value=i.data.filter(p=>p.role==="contractor")}else console.log("User cannot manage projects, skipping additional data fetch")}catch(o){j.value="Failed to load project data.",console.error("Error fetching project data:",o),o.response&&(o.response.status===401||o.response.status===403)&&(j.value="You are not authorized to view this project or your session expired. Please log in.")}finally{_.value=!1}},Wt=()=>{A.value=!0},qt=o=>{d.value=o,A.value=!1,alert("Project updated successfully!"),Ke()},te=c([]),ze=c(!1),He=c(""),we=c(!1),$e=c(null),N=c({name:"",description:"",assigned_to_user_id:null,due_date:null,status:"To Do",task_type_id:null,milestone_id:null,tags:[]}),R=c({}),We=c([]),se=c([]),Qe=c(!1),qe=c(!1),B=c({status:"",assigned_to_user_id:"",milestone_id:"",due_date_range:""}),Gt=[{value:"",label:"All Dates"},{value:"today",label:"Due Today"},{value:"this_week",label:"Due This Week"},{value:"next_week",label:"Due Next Week"},{value:"overdue",label:"Overdue"},{value:"no_date",label:"No Due Date"}],nt=S(()=>!se.value||!se.value.length?[]:[...se.value].sort((o,t)=>o.completion_date?t.completion_date?new Date(o.completion_date)-new Date(t.completion_date):-1:1)),rt=S(()=>te.value.length?te.value.filter(o=>{var t;if(B.value.status&&o.status!==B.value.status)return!1;if(B.value.assigned_to_user_id){const s=parseInt(B.value.assigned_to_user_id);if(s===-1){if(o.assigned_to!=="Unassigned")return!1}else{const i=(t=d.value.users)==null?void 0:t.find(p=>p.id===s);if(i&&o.assigned_to!==i.name)return!1}}if(B.value.milestone_id){const s=parseInt(B.value.milestone_id);if(s===-1){if(o.milestone)return!1}else{const i=se.value.find(p=>p.id===s);if(i&&o.milestone!==i.name&&o.milestone_id!==s)return!1}}if(B.value.due_date_range){const s=new Date;s.setHours(0,0,0,0);const i=o.due_date?new Date(o.due_date):null;switch(B.value.due_date_range){case"today":if(!i||i.toDateString()!==s.toDateString())return!1;break;case"this_week":{if(!i)return!1;const p=new Date(s);if(p.setDate(s.getDate()+(6-s.getDay())),i<s||i>p)return!1;break}case"next_week":{if(!i)return!1;const p=new Date(s);p.setDate(s.getDate()+(7-s.getDay()));const T=new Date(p);if(T.setDate(p.getDate()+6),i<p||i>T)return!1;break}case"overdue":{if(!i||i>=s)return!1;break}case"no_date":{if(i)return!1;break}}}return!0}):[]),Yt=()=>{B.value={status:"",assigned_to_user_id:"",milestone_id:"",due_date_range:""}},Ee=c(!1),Ae=c(null),Te=c(""),he=c(""),Xe=c(!1),Ve=c(!1),de=c({name:"",description:"",completion_date:null,status:"Not Started",project_id:ue().props.id}),oe=c({}),et=c(!1),Ne=async()=>{ze.value=!0,He.value="";try{const o=ue().props.id,t=await window.axios.get(`/api/projects/${o}/tasks`);te.value=t.data,console.log("Tasks fetched:",te.value)}catch(o){He.value="Failed to load tasks data.",console.error("Error fetching project tasks:",o),o.response&&o.response.data&&o.response.data.message&&(He.value=o.response.data.message)}finally{ze.value=!1}},it=async()=>{Qe.value=!0;try{const o=await window.axios.get("/api/task-types");We.value=o.data}catch(o){console.error("Error fetching task types:",o)}finally{Qe.value=!1}},dt=async()=>{qe.value=!0;try{const o=ue().props.id,t=await window.axios.get(`/api/projects/${o}/milestones`);se.value=t.data}catch(o){console.error("Error fetching milestones:",o)}finally{qe.value=!1}},Zt=()=>{de.value={name:"",description:"",completion_date:null,status:"Not Started",project_id:ue().props.id},oe.value={},Ve.value=!0},Jt=async()=>{oe.value={},et.value=!0;try{const o=await window.axios.post("/api/milestones",de.value);se.value.push(o.data),N.value.milestone_id=o.data.id,Ve.value=!1,alert("Milestone created successfully!")}catch(o){console.error("Error creating milestone:",o),o.response&&o.response.data&&o.response.data.errors?oe.value=o.response.data.errors:alert("Failed to create milestone. Please try again.")}finally{et.value=!1}},Kt=async()=>{$e.value=null,N.value={name:"",description:"",assigned_to_user_id:null,due_date:null,status:"To Do",task_type_id:null,milestone_id:null,tags:[]},R.value={},We.value.length===0&&await it(),se.value.length===0&&await dt(),we.value=!0},wt=async o=>{var p;$e.value=o,We.value.length===0&&await it(),se.value.length===0&&await dt();let t=null;if(o.milestone){const T=se.value.find(Ce=>Ce.name===o.milestone);T&&(t=T.id)}let s=null;if(o.task_type){const T=We.value.find(Ce=>Ce.name===o.task_type);T&&(s=T.id)}let i=null;if(o.assigned_to&&o.assigned_to!=="Unassigned"){const T=(p=d.value.users)==null?void 0:p.find(Ce=>Ce.name===o.assigned_to);T&&(i=T.id)}N.value={name:o.title,description:o.description||"",assigned_to_user_id:i||o.assigned_to_id||null,due_date:o.due_date||null,status:o.status,task_type_id:s||o.task_type_id||null,milestone_id:t,tags:o.tags||[]},R.value={},we.value=!0},Qt=async o=>{try{await window.axios.post(`/api/tasks/${o.id}/complete`),await Ne()}catch(t){console.error("Error marking task as completed:",t),alert("Failed to mark task as completed. Please try again.")}},Xt=async o=>{try{await window.axios.post(`/api/tasks/${o.id}/start`),await Ne()}catch(t){console.error("Error starting task:",t),alert("Failed to start task. Please try again.")}},ht=o=>{Ae.value=o,Te.value="",he.value="",Ee.value=!0},es=async()=>{if(!Te.value.trim()){he.value="Note content is required";return}he.value="",Xe.value=!0;try{await window.axios.post(`/api/tasks/${Ae.value.id}/notes`,{note:Te.value}),Ee.value=!1,Te.value="",Ae.value=null,await Ne(),alert("Note added successfully!")}catch(o){console.error("Error adding note to task:",o),o.response&&o.response.data&&o.response.data.message?he.value=o.response.data.message:he.value="Failed to add note. Please try again."}finally{Xe.value=!1}},ts=async()=>{R.value={};try{let o;$e.value?o=await window.axios.put(`/api/tasks/${$e.value.id}`,N.value):o=await window.axios.post("/api/tasks",{...N.value,milestone_id:N.value.milestone_id||null}),we.value=!1,await Ne()}catch(o){console.error("Error submitting task form:",o),o.response&&o.response.data&&o.response.data.errors?R.value=o.response.data.errors:alert("Failed to save task. Please try again.")}},ge=c([]),tt=c(!1),$=c(""),h=c(null),ke=c(!1),U=Re({type:"",startDate:"",endDate:"",search:""});let kt=null;const st=()=>{De()},ss=()=>{U.type="",U.startDate="",U.endDate="",U.search="",De()},os=()=>{clearTimeout(kt),kt=setTimeout(()=>{st()},500)},Ue=c(!1),Pe=c(!1),ye=Re({subject:"",body:""}),je=c({}),Ge=Re({rejection_reason:""}),Ye=c({}),ae=c(""),Le=c(!1),L=Re({project_id:"",client_ids:[],subject:"",body:""}),le=c({}),De=async()=>{tt.value=!0,$.value="";try{const o=ue().props.id,t=new URLSearchParams;U.type&&t.append("type",U.type),U.startDate&&t.append("start_date",U.startDate),U.endDate&&t.append("end_date",U.endDate),U.search&&t.append("search",U.search);const s=t.toString(),i=`/api/projects/${o}/emails-simplified${s?`?${s}`:""}`,p=await window.axios.get(i);ge.value=p.data}catch(o){$.value="Failed to load email data.",console.error("Error fetching project emails:",o)}finally{tt.value=!1}},as=()=>{D.value=!0},ut=()=>{g.value=!0},ls=o=>{ot.value&&ot.value.fetchMeetings()},jt=o=>{h.value=o,ke.value=!0},ns=async o=>{ae.value="",$.value="";try{await window.axios.post(`/api/emails/${o.id}/approve`),ae.value="Email approved successfully!",await De(),ke.value=!1}catch(t){t.response&&t.response.data.message?$.value=t.response.data.message:($.value="Failed to approve email.",console.error("Error approving email:",t))}},rs=o=>{h.value=o,ye.subject=o.subject,ye.body=o.body,je.value={},Ue.value=!0,ke.value=!1},is=async()=>{je.value={},$.value="",ae.value="";try{const o={subject:ye.subject,body:ye.body};await window.axios.post(`/api/emails/${h.value.id}/edit-and-approve`,o),ae.value="Email updated and approved successfully!",Ue.value=!1,await De()}catch(o){o.response&&o.response.status===422?je.value=o.response.data.errors:o.response&&o.response.data.message?$.value=o.response.data.message:($.value="Failed to update and approve email.",console.error("Error updating and approving email:",o))}},ds=o=>{h.value=o,Ge.rejection_reason="",Ye.value={},Pe.value=!0,ke.value=!1},us=async()=>{Ye.value={},$.value="",ae.value="";try{await window.axios.post(`/api/emails/${h.value.id}/reject`,{rejection_reason:Ge.rejection_reason}),ae.value="Email rejected successfully!",Ge.rejection_reason="",Pe.value=!1,await De()}catch(o){o.response&&o.response.status===422?Ye.value=o.response.data.errors:o.response&&o.response.data.message?$.value=o.response.data.message:($.value="Failed to reject email.",console.error("Error rejecting email:",o))}},cs=()=>{L.project_id=d.value.id,L.client_ids=[],L.subject="",L.body="",le.value={},ae.value="",Le.value=!0},ms=async()=>{if(le.value={},$.value="",ae.value="",!L.client_ids||L.client_ids.length===0){le.value.client_ids=["Please select at least one client."];return}try{const o=L.client_ids.map(s=>typeof s=="object"&&s!==null?{id:s.id}:{id:s}),t={project_id:L.project_id,client_ids:o,subject:L.subject,body:L.body,status:"pending_approval"};await window.axios.post("/api/emails",t),ae.value="Email submitted for approval successfully!",L.client_ids=[],L.subject="",L.body="",le.value={},Le.value=!1,await De()}catch(o){o.response&&o.response.status===422?le.value=o.response.data.errors:o.response&&o.response.data.message?$.value=o.response.data.message:($.value="Failed to submit email. An unexpected error occurred.",console.error("Error submitting email:",o))}};return Mt(async()=>{console.log("Component mounted, fetching data...");try{const o=ue().props.id,t=await bs(o);console.log("Project permissions fetched (includes global):",t)}catch(o){console.error(`Error fetching permissions for project ${z}:`,o)}await Ke(),await Je(),await De(),await Ne();try{await it(),await dt(),console.log("Task types and milestones fetched successfully")}catch(o){console.error("Error fetching task types or milestones:",o)}console.log("All data loaded, permission status:"),console.log("- Global permissions:",Q.value),console.log("- Global permissions loading:",k.value),console.log("- Global permissions error:",M.value),console.log("- Project permissions:",J.value),console.log("- Project permissions loading:",b.value),console.log("- Project permissions error:",E.value),console.log("- User project role:",V.value),console.log("- Can manage projects:",_e.value)}),(o,t)=>(a(),l(F,null,[r(Fe(_s),{title:d.value.name||"Project Details"},null,8,["title"]),r(hs,null,{default:m(()=>[e("div",to,[_.value?(a(),l("div",so," Loading project details... ")):j.value?(a(),l("div",oo,n(j.value),1)):(a(),l("div",ao,[e("div",lo,[e("div",no,[t[73]||(t[73]=e("h4",{class:"text-lg font-semibold text-gray-900"},"General Information",-1)),e("div",ro,[r(P,{class:"bg-blue-600 hover:bg-blue-700 transition-colors mr-2",onClick:ut},{default:m(()=>t[70]||(t[70]=[v(" Daily Standup ")])),_:1,__:[70]}),_e.value||ie.value?(a(),Se(P,{key:0,class:"bg-indigo-600 hover:bg-indigo-700 transition-colors mr-2",onClick:Wt},{default:m(()=>t[71]||(t[71]=[v(" Edit Project ")])),_:1,__:[71]})):u("",!0),_e.value||ie.value?(a(),Se(P,{key:1,class:"bg-green-600 hover:bg-green-700 transition-colors",onClick:as},{default:m(()=>t[72]||(t[72]=[v(" Schedule Meeting ")])),_:1,__:[72]})):u("",!0)])]),e("div",io,[e("div",null,[e("h3",uo,n(d.value.name),1),e("p",co,n(d.value.description||"No description provided"),1)]),e("div",mo,[e("p",null,[t[74]||(t[74]=e("strong",{class:"text-gray-900"},"Status:",-1)),v(" "+n(d.value.status.replace("_"," ").toUpperCase()),1)]),e("p",null,[t[75]||(t[75]=e("strong",{class:"text-gray-900"},"Project Type:",-1)),v(" "+n(d.value.project_type||"N/A"),1)]),e("p",null,[t[76]||(t[76]=e("strong",{class:"text-gray-900"},"Source:",-1)),v(" "+n(d.value.source||"N/A"),1)]),e("div",vo,[d.value.website?(a(),l("a",{key:0,href:d.value.website,target:"_blank",class:"p-2 bg-gray-100 rounded-full hover:bg-gray-200 transition-colors",title:"Visit Website"},t[77]||(t[77]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"})],-1)]),8,po)):u("",!0),d.value.social_media_link?(a(),l("a",{key:1,href:d.value.social_media_link,target:"_blank",class:"p-2 bg-gray-100 rounded-full hover:bg-gray-200 transition-colors",title:"Social Media"},t[78]||(t[78]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})],-1)]),8,go)):u("",!0),d.value.google_drive_link?(a(),l("a",{key:2,href:d.value.google_drive_link,target:"_blank",class:"p-2 bg-gray-100 rounded-full hover:bg-gray-200 transition-colors",title:"Google Drive"},t[79]||(t[79]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)]),8,yo)):u("",!0)])])])]),r(eo,{"project-id":Fe(z),ref_key:"meetingsListComponent",ref:ot},null,8,["project-id"]),e("div",xo,[e("div",fo,[t[80]||(t[80]=e("h4",{class:"text-sm font-semibold text-gray-500 mb-1"},"Pending Tasks",-1)),e("p",bo,n(te.value.filter(s=>s.status!=="Done").length),1)]),e("div",_o,[t[81]||(t[81]=e("h4",{class:"text-sm font-semibold text-gray-500 mb-1"},"Received Emails",-1)),e("p",wo,n(ge.value.filter(s=>s.type==="received").length),1)]),e("div",ho,[t[82]||(t[82]=e("h4",{class:"text-sm font-semibold text-gray-500 mb-1"},"Last Email Received",-1)),e("p",ko,n(ge.value.filter(s=>s.status==="Received").length?ge.value.filter(s=>s.status==="Received")[0].date:"N/A"),1)]),e("div",jo,[t[83]||(t[83]=e("h4",{class:"text-sm font-semibold text-gray-500 mb-1"},"Next Task Deadline",-1)),e("p",Do,n(te.value.filter(s=>s.status!=="Completed").length?te.value.filter(s=>s.status!=="Completed").sort((s,i)=>new Date(s.due_date)-new Date(i.due_date))[0].due_date:"N/A"),1)])]),e("div",Co,[e("div",So,[e("nav",Mo,[e("button",{onClick:t[0]||(t[0]=s=>O.value=null),class:Y([O.value===null?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])}," Overview ",2),e("button",{onClick:t[1]||(t[1]=s=>O.value="tasks"),class:Y([O.value==="tasks"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])}," Project Tasks ",2),at.value?(a(),l("button",{key:0,onClick:t[2]||(t[2]=s=>O.value="emails"),class:Y([O.value==="emails"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])}," Email Communication ",2)):u("",!0),Oe.value?(a(),l("button",{key:1,onClick:t[3]||(t[3]=s=>O.value="notes"),class:Y([O.value==="notes"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])}," Notes ",2)):u("",!0)])])]),O.value===null?(a(),l("div",$o,[pt.value.length>0?(a(),l("div",Eo,[e("div",Ao,[t[84]||(t[84]=e("h4",{class:"text-lg font-semibold text-gray-900"},"Tasks Due Today",-1)),e("button",{onClick:t[4]||(t[4]=s=>O.value="tasks"),class:"text-sm text-indigo-600 hover:text-indigo-800 font-medium"}," View All Tasks  ")]),e("div",To,[e("table",Vo,[t[85]||(t[85]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Title"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Assigned To"),e("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",No,[(a(!0),l(F,null,I(pt.value,s=>(a(),l("tr",{key:s.id,class:"hover:bg-gray-50 transition-colors"},[e("td",Uo,n(s.title),1),e("td",Po,[e("span",{class:Y({"px-2 py-1 rounded-full text-xs font-medium":!0,"bg-yellow-100 text-yellow-800":s.status==="To Do","bg-blue-100 text-blue-800":s.status==="In Progress","bg-green-100 text-green-800":s.status==="Done","bg-red-100 text-red-800":s.status==="Blocked","bg-gray-100 text-gray-800":s.status==="Archived"})},n(s.status),3)]),e("td",Lo,n(s.assigned_to),1),e("td",Fo,[e("div",Ro,[e("button",{onClick:i=>wt(s),class:"text-indigo-600 hover:text-indigo-800 text-sm font-medium"}," Edit ",8,Bo),e("button",{onClick:i=>ht(s),class:"text-blue-600 hover:text-blue-800 text-sm font-medium"}," Add Note ",8,Io)])])]))),128))])])])])):(a(),l("div",Oo,[e("div",zo,[t[86]||(t[86]=e("h4",{class:"text-lg font-semibold text-gray-900"},"Tasks Due Today",-1)),e("button",{onClick:t[5]||(t[5]=s=>O.value="tasks"),class:"text-sm text-indigo-600 hover:text-indigo-800 font-medium"}," View All Tasks  ")]),t[87]||(t[87]=e("p",{class:"text-gray-400 text-sm"},"No tasks due today.",-1))])),at.value?(a(),l("div",Ho,[e("div",Wo,[t[88]||(t[88]=e("h4",{class:"text-lg font-semibold text-gray-900"},"Latest Emails",-1)),e("button",{onClick:t[6]||(t[6]=s=>O.value="emails"),class:"text-sm text-indigo-600 hover:text-indigo-800 font-medium"}," View All Emails  ")]),tt.value?(a(),l("div",qo," Loading email data... ")):$.value?(a(),l("div",Go,n($.value),1)):vt.value.length?(a(),l("div",Yo,[e("table",Zo,[t[90]||(t[90]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Subject"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"From"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date"),e("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",Jo,[(a(!0),l(F,null,I(vt.value,s=>{var i;return a(),l("tr",{key:s.id,class:"hover:bg-gray-50 transition-colors"},[e("td",Ko,n(s.subject),1),e("td",Qo,n(((i=s.sender)==null?void 0:i.name)||"N/A"),1),e("td",Xo,n(new Date(s.created_at).toLocaleDateString()),1),e("td",ea,[r(Z,{class:"text-indigo-600 hover:text-indigo-800",onClick:p=>jt(s)},{default:m(()=>t[89]||(t[89]=[v(" View ")])),_:2,__:[89]},1032,["onClick"])])])}),128))])])])):(a(),l("p",ta,"No email communication found."))])):u("",!0),Oe.value?(a(),l("div",sa,[e("div",oa,[t[92]||(t[92]=e("h4",{class:"text-lg font-semibold text-gray-900"},"Latest Notes",-1)),e("div",aa,[e("button",{onClick:t[7]||(t[7]=s=>O.value="notes"),class:"text-sm text-indigo-600 hover:text-indigo-800 font-medium"}," View All Notes  "),Fe(Me)("add_project_notes").value?(a(),l("div",la,[r(P,{class:"bg-indigo-600 hover:bg-indigo-700 transition-colors",onClick:gt},{default:m(()=>t[91]||(t[91]=[v(" Add Note ")])),_:1,__:[91]})])):u("",!0)])]),mt.value.length?(a(),l("div",na,[(a(!0),l(F,null,I(mt.value,s=>{var i;return a(),l("div",{key:s.id,class:"p-4 bg-gray-50 rounded-md shadow-sm hover:bg-gray-100 transition-colors"},[e("div",ra,[e("div",ia,[e("p",{class:Y(["text-sm",{"text-gray-700":s.content!=="[Encrypted content could not be decrypted]","text-red-500 italic":s.content==="[Encrypted content could not be decrypted]"}])},[v(n(s.content)+" ",1),s.content==="[Encrypted content could not be decrypted]"?(a(),l("span",da," (There was an issue decrypting this note. Please contact an administrator.) ")):u("",!0)],2),e("div",ua,[e("p",ca,"Added by "+n(((i=s.user)==null?void 0:i.name)||"Unknown")+" on "+n(new Date(s.created_at).toLocaleDateString()),1),s.reply_count>0?(a(),l("span",ma,n(s.reply_count)+" "+n(s.reply_count===1?"reply":"replies"),1)):u("",!0)])]),Oe.value&&s.chat_message_id&&d.value.google_chat_id?(a(),l("div",va,[r(Z,{class:"text-sm text-indigo-600 hover:text-indigo-800",onClick:p=>yt(s)},{default:m(()=>t[93]||(t[93]=[v(" View ")])),_:2,__:[93]},1032,["onClick"])])):u("",!0)])])}),128))])):(a(),l("p",pa,"No notes available."))])):u("",!0),Oe.value&&Ie.value.length>0?(a(),l("div",ga,[e("div",ya,[t[95]||(t[95]=e("h4",{class:"text-lg font-semibold text-gray-900"},"Daily Standups",-1)),e("div",xa,[e("button",{onClick:t[8]||(t[8]=s=>O.value="notes"),class:"text-sm text-indigo-600 hover:text-indigo-800 font-medium"}," View All Standups  "),_e.value||ie.value?(a(),l("div",fa,[r(P,{class:"bg-blue-600 hover:bg-blue-700 transition-colors",onClick:ut},{default:m(()=>t[94]||(t[94]=[v(" Submit Standup ")])),_:1,__:[94]})])):u("",!0)])]),e("div",ba,[(a(!0),l(F,null,I(Et.value,s=>{var i,p;return a(),l("div",{key:s.id,class:"p-4 bg-blue-50 rounded-md shadow-sm hover:bg-blue-100 transition-colors border-l-4 border-blue-500"},[s.content==="[Encrypted content could not be decrypted]"?(a(),l("div",_a,[e("div",wa,[e("p",ha,[v(n(s.content)+" ",1),t[96]||(t[96]=e("span",{class:"text-xs text-red-400 block mt-1"}," (There was an issue decrypting this standup. Please contact an administrator.) ",-1))]),e("div",ka,[e("p",ja,"Submitted by "+n(((i=s.user)==null?void 0:i.name)||"Unknown")+" on "+n(new Date(s.created_at).toLocaleDateString()),1)])])])):(a(),l("div",Da,[e("div",Ca,[e("div",Sa,[t[97]||(t[97]=e("h3",{class:"text-md font-bold text-gray-800"},"Daily Standup",-1)),e("span",Ma,n(pe(s.content).date),1)]),e("div",$a,[t[98]||(t[98]=e("div",{class:"flex items-center mb-1"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 text-blue-600 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("span",{class:"font-semibold text-sm text-gray-700"},"Yesterday:")],-1)),e("p",Ea,n(pe(s.content).yesterday),1)]),e("div",Aa,[t[99]||(t[99]=e("div",{class:"flex items-center mb-1"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 text-green-600 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})]),e("span",{class:"font-semibold text-sm text-gray-700"},"Today:")],-1)),e("p",Ta,n(pe(s.content).today),1)]),e("div",Va,[t[100]||(t[100]=e("div",{class:"flex items-center mb-1"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 text-red-600 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})]),e("span",{class:"font-semibold text-sm text-gray-700"},"Blockers:")],-1)),e("p",Na,n(pe(s.content).blockers),1)]),e("div",Ua,[e("p",Pa,"Submitted by "+n(((p=s.user)==null?void 0:p.name)||"Unknown")+" on "+n(new Date(s.created_at).toLocaleDateString()),1)])])]))])}),128))])])):u("",!0)])):u("",!0),O.value==="tasks"?(a(),l("div",La,[e("div",Fa,[t[102]||(t[102]=e("h4",{class:"text-lg font-semibold text-gray-900"},"Project Tasks",-1)),e("div",Ra,[r(Z,{onClick:Ne,disabled:ze.value,class:"text-indigo-600 hover:text-indigo-800"},{default:m(()=>[ze.value?(a(),l("span",Ia,"Loading...")):(a(),l("span",Ba,"Refresh"))]),_:1},8,["disabled"]),_e.value?(a(),Se(P,{key:0,class:"bg-indigo-600 hover:bg-indigo-700 transition-colors",onClick:Kt},{default:m(()=>t[101]||(t[101]=[v(" Add Task ")])),_:1,__:[101]})):u("",!0)])]),e("div",Oa,[qe.value?(a(),l("div",za," Loading milestones... ")):nt.value.length?(a(),l("div",Wa,[t[107]||(t[107]=e("div",{class:"absolute h-1 bg-gray-200 top-1/2 left-0 right-0 transform -translate-y-1/2"},null,-1)),e("div",qa,[(a(!0),l(F,null,I(nt.value,(s,i)=>(a(),l("div",{key:s.id,class:Y(["flex flex-col items-center relative z-10",{"ml-4":i===0,"mr-4":i===nt.value.length-1}])},[e("div",{class:Y(["w-6 h-6 rounded-full shadow-lg flex items-center justify-center",{"bg-gray-300":s.status==="Not Started","bg-blue-500":s.status==="In Progress","bg-green-500":s.status==="Completed","bg-red-500":s.status==="Overdue"}])},[s.status==="Completed"?(a(),l("svg",Ga,t[104]||(t[104]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)]))):s.status==="In Progress"?(a(),l("svg",Ya,t[105]||(t[105]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"},null,-1)]))):s.status==="Overdue"?(a(),l("svg",Za,t[106]||(t[106]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)]))):(a(),l("span",Ja))],2),e("div",Ka,[e("p",{class:"text-xs font-medium text-gray-700 text-center truncate",title:s.name},n(s.name),9,Qa)]),e("div",Xa,[e("p",el,n(s.completion_date?new Date(s.completion_date).toLocaleDateString():"No date"),1)])],2))),128))])])):(a(),l("div",Ha,t[103]||(t[103]=[e("p",{class:"text-gray-400 text-sm"},"No milestones found for this project.",-1)])))]),e("div",tl,[e("div",sl,[e("div",ol,[t[109]||(t[109]=e("label",{for:"status-filter",class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),w(e("select",{id:"status-filter","onUpdate:modelValue":t[9]||(t[9]=s=>B.value.status=s),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-sm"},t[108]||(t[108]=[e("option",{value:""},"All Statuses",-1),e("option",{value:"To Do"},"To Do",-1),e("option",{value:"In Progress"},"In Progress",-1),e("option",{value:"Done"},"Done",-1),e("option",{value:"Blocked"},"Blocked",-1),e("option",{value:"Archived"},"Archived",-1)]),512),[[ne,B.value.status]])]),e("div",al,[t[112]||(t[112]=e("label",{for:"assigned-filter",class:"block text-sm font-medium text-gray-700 mb-1"},"Assigned To",-1)),w(e("select",{id:"assigned-filter","onUpdate:modelValue":t[10]||(t[10]=s=>B.value.assigned_to_user_id=s),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-sm"},[t[110]||(t[110]=e("option",{value:""},"All Users",-1)),t[111]||(t[111]=e("option",{value:"-1"},"Unassigned",-1)),(a(!0),l(F,null,I(d.value.users,s=>(a(),l("option",{key:s.id,value:s.id},n(s.name),9,ll))),128))],512),[[ne,B.value.assigned_to_user_id]])]),e("div",nl,[t[115]||(t[115]=e("label",{for:"milestone-filter",class:"block text-sm font-medium text-gray-700 mb-1"},"Milestone",-1)),w(e("select",{id:"milestone-filter","onUpdate:modelValue":t[11]||(t[11]=s=>B.value.milestone_id=s),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-sm"},[t[113]||(t[113]=e("option",{value:""},"All Milestones",-1)),t[114]||(t[114]=e("option",{value:"-1"},"No Milestone",-1)),(a(!0),l(F,null,I(se.value,s=>(a(),l("option",{key:s.id,value:s.id},n(s.name),9,rl))),128))],512),[[ne,B.value.milestone_id]])]),e("div",il,[t[116]||(t[116]=e("label",{for:"due-date-filter",class:"block text-sm font-medium text-gray-700 mb-1"},"Due Date",-1)),w(e("select",{id:"due-date-filter","onUpdate:modelValue":t[12]||(t[12]=s=>B.value.due_date_range=s),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-sm"},[(a(),l(F,null,I(Gt,s=>e("option",{key:s.value,value:s.value},n(s.label),9,dl)),64))],512),[[ne,B.value.due_date_range]])]),e("div",{class:"flex items-end"},[e("button",{onClick:Yt,class:"px-3 py-2 text-sm text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-md transition-colors"}," Clear Filters ")])]),Object.values(B.value).some(s=>s!=="")?(a(),l("div",ul,[e("p",null,[v(" Showing "+n(rt.value.length)+" of "+n(te.value.length)+" tasks ",1),rt.value.length===0?(a(),l("span",cl," (No tasks match the current filters) ")):u("",!0)])])):u("",!0)]),ze.value?(a(),l("div",ml," Loading tasks... ")):He.value?(a(),l("div",vl,[e("p",pl,n(He.value),1)])):te.value.length?(a(),l("div",gl,[e("table",yl,[t[117]||(t[117]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Title"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Assigned To"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Due Date"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Milestone"),e("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",xl,[(a(!0),l(F,null,I(rt.value,s=>(a(),l("tr",{key:s.id,class:"hover:bg-gray-50 transition-colors"},[e("td",fl,n(s.title),1),e("td",bl,[e("span",{class:Y({"px-2 py-1 rounded-full text-xs font-medium":!0,"bg-yellow-100 text-yellow-800":s.status==="To Do","bg-blue-100 text-blue-800":s.status==="In Progress","bg-green-100 text-green-800":s.status==="Done","bg-red-100 text-red-800":s.status==="Blocked","bg-gray-100 text-gray-800":s.status==="Archived"})},n(s.status),3)]),e("td",_l,n(s.assigned_to),1),e("td",wl,n(s.due_date?s.due_date:"N/A"),1),e("td",hl,n(s.milestone||"N/A"),1),e("td",kl,[e("div",jl,[e("button",{onClick:i=>wt(s),class:"text-indigo-600 hover:text-indigo-800 text-sm font-medium"}," Edit ",8,Dl),e("button",{onClick:i=>ht(s),class:"text-blue-600 hover:text-blue-800 text-sm font-medium"}," Add Note ",8,Cl),s.status==="To Do"?(a(),l("button",{key:0,onClick:i=>Xt(s),class:"text-blue-600 hover:text-blue-800 text-sm font-medium"}," Start ",8,Sl)):u("",!0),s.status!=="Done"?(a(),l("button",{key:1,onClick:i=>Qt(s),class:"text-green-600 hover:text-green-800 text-sm font-medium"}," Complete ",8,Ml)):u("",!0)])])]))),128))])])])):(a(),l("div",$l,t[118]||(t[118]=[e("p",{class:"text-gray-400 text-sm"},"No tasks found for this project.",-1),e("p",{class:"text-gray-500 text-sm mt-2"},' Click the "Add Task" button to create a new task. ',-1)])))])):u("",!0),at.value&&O.value==="emails"?(a(),l("div",El,[e("div",Al,[t[120]||(t[120]=e("h4",{class:"text-lg font-semibold text-gray-900"},"Email Communication",-1)),It.value?(a(),l("div",Tl,[r(P,{class:"bg-indigo-600 hover:bg-indigo-700 transition-colors",onClick:cs},{default:m(()=>t[119]||(t[119]=[v(" Compose Email ")])),_:1,__:[119]})])):u("",!0),ae.value?(a(),l("div",Vl,[e("span",Nl,n(ae.value),1)])):u("",!0)]),e("div",Ul,[e("div",Pl,[e("div",null,[t[122]||(t[122]=e("label",{for:"typeFilter",class:"block text-sm font-medium text-gray-700 mb-1"},"Type",-1)),w(e("select",{id:"typeFilter","onUpdate:modelValue":t[13]||(t[13]=s=>U.type=s),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",onChange:st},t[121]||(t[121]=[e("option",{value:""},"All Types",-1),e("option",{value:"sent"},"Sent",-1),e("option",{value:"received"},"Received",-1)]),544),[[ne,U.type]])]),e("div",null,[t[123]||(t[123]=e("label",{for:"startDate",class:"block text-sm font-medium text-gray-700 mb-1"},"From Date",-1)),w(e("input",{type:"date",id:"startDate","onUpdate:modelValue":t[14]||(t[14]=s=>U.startDate=s),class:"mt-1 block w-full border-gray-300 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",onChange:st},null,544),[[H,U.startDate]])]),e("div",null,[t[124]||(t[124]=e("label",{for:"endDate",class:"block text-sm font-medium text-gray-700 mb-1"},"To Date",-1)),w(e("input",{type:"date",id:"endDate","onUpdate:modelValue":t[15]||(t[15]=s=>U.endDate=s),class:"mt-1 block w-full border-gray-300 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",onChange:st},null,544),[[H,U.endDate]])]),e("div",null,[t[126]||(t[126]=e("label",{for:"searchFilter",class:"block text-sm font-medium text-gray-700 mb-1"},"Search Content",-1)),e("div",Ll,[w(e("input",{type:"text",id:"searchFilter","onUpdate:modelValue":t[16]||(t[16]=s=>U.search=s),class:"focus:ring-indigo-500 focus:border-indigo-500 block w-full pr-10 sm:text-sm border-gray-300 rounded-md",placeholder:"Search in email content...",onInput:os},null,544),[[H,U.search]]),t[125]||(t[125]=e("div",{class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})])],-1))])])]),e("div",{class:"mt-3 flex justify-end"},[e("button",{type:"button",class:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:ss}," Reset Filters ")])]),tt.value?(a(),l("div",Fl," Loading email data... ")):$.value?(a(),l("div",Rl,n($.value),1)):ge.value.length?(a(),l("div",Bl,[e("table",Il,[t[128]||(t[128]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Subject"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"From"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Type"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),e("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",Ol,[(a(!0),l(F,null,I(ge.value,s=>{var i;return a(),l("tr",{key:s.id,class:"hover:bg-gray-50 transition-colors"},[e("td",zl,n(s.subject),1),e("td",Hl,n(((i=s.sender)==null?void 0:i.name)||"N/A"),1),e("td",Wl,n(new Date(s.created_at).toLocaleDateString()),1),e("td",ql,[e("span",{class:Y({"px-2 py-1 rounded-full text-xs font-medium":!0,"bg-blue-100 text-blue-800":s.type==="sent","bg-purple-100 text-purple-800":s.type==="received"})},n(s.type?s.type.toUpperCase():"N/A"),3)]),e("td",Gl,[e("span",{class:Y({"px-2 py-1 rounded-full text-xs font-medium":!0,"bg-green-100 text-green-800":s.status==="sent","bg-yellow-100 text-yellow-800":s.status==="pending_approval","bg-red-100 text-red-800":s.status==="rejected","bg-gray-100 text-gray-800":s.status==="draft"})},n(s.status.replace("_"," ").toUpperCase()),3)]),e("td",Yl,[r(Z,{class:"text-indigo-600 hover:text-indigo-800",onClick:p=>jt(s)},{default:m(()=>t[127]||(t[127]=[v(" View ")])),_:2,__:[127]},1032,["onClick"])])])}),128))])])])):(a(),l("p",Zl,"No email communication found."))])):u("",!0),Oe.value&&O.value==="notes"?(a(),l("div",Jl,[e("div",Kl,[t[131]||(t[131]=e("h4",{class:"text-lg font-semibold text-gray-900"},"Project Notes",-1)),e("div",Ql,[_e.value||ie.value?(a(),Se(P,{key:0,class:"bg-blue-600 hover:bg-blue-700 transition-colors",onClick:ut},{default:m(()=>t[129]||(t[129]=[v(" Submit Standup ")])),_:1,__:[129]})):u("",!0),Fe(Me)("add_project_notes").value?(a(),Se(P,{key:1,class:"bg-indigo-600 hover:bg-indigo-700 transition-colors",onClick:gt},{default:m(()=>t[130]||(t[130]=[v(" Add Note ")])),_:1,__:[130]})):u("",!0)])]),e("div",Xl,[e("div",en,[e("div",null,[t[132]||(t[132]=e("label",{for:"noteStartDate",class:"block text-sm font-medium text-gray-700 mb-1"},"From Date",-1)),w(e("input",{type:"date",id:"noteStartDate","onUpdate:modelValue":t[17]||(t[17]=s=>G.startDate=s),class:"mt-1 block w-full border-gray-300 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",onChange:lt},null,544),[[H,G.startDate]])]),e("div",null,[t[133]||(t[133]=e("label",{for:"noteEndDate",class:"block text-sm font-medium text-gray-700 mb-1"},"To Date",-1)),w(e("input",{type:"date",id:"noteEndDate","onUpdate:modelValue":t[18]||(t[18]=s=>G.endDate=s),class:"mt-1 block w-full border-gray-300 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",onChange:lt},null,544),[[H,G.endDate]])]),e("div",null,[t[135]||(t[135]=e("label",{for:"noteSearchFilter",class:"block text-sm font-medium text-gray-700 mb-1"},"Search Content",-1)),e("div",tn,[w(e("input",{type:"text",id:"noteSearchFilter","onUpdate:modelValue":t[19]||(t[19]=s=>G.search=s),class:"focus:ring-indigo-500 focus:border-indigo-500 block w-full pr-10 sm:text-sm border-gray-300 rounded-md",placeholder:"Search in note content...",onInput:Ht},null,544),[[H,G.search]]),t[134]||(t[134]=e("div",{class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})])],-1))])])]),e("div",{class:"mt-3 flex justify-end"},[e("button",{type:"button",class:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:zt}," Reset Filters ")])]),Ie.value.length>0?(a(),l("div",sn,[t[141]||(t[141]=e("h5",{class:"text-md font-semibold text-gray-900 mb-4 border-b pb-2"},"Daily Standups",-1)),e("div",on,[(a(!0),l(F,null,I(Ie.value,s=>{var i,p;return a(),l("div",{key:s.id,class:"p-4 bg-blue-50 rounded-md shadow-sm hover:bg-blue-100 transition-colors border-l-4 border-blue-500"},[s.content==="[Encrypted content could not be decrypted]"?(a(),l("div",an,[e("div",ln,[e("p",nn,[v(n(s.content)+" ",1),t[136]||(t[136]=e("span",{class:"text-xs text-red-400 block mt-1"}," (There was an issue decrypting this standup. Please contact an administrator.) ",-1))]),e("div",rn,[e("p",dn,"Submitted by "+n(((i=s.user)==null?void 0:i.name)||"Unknown")+" on "+n(new Date(s.created_at).toLocaleDateString()),1)])])])):(a(),l("div",un,[e("div",cn,[e("div",mn,[t[137]||(t[137]=e("h3",{class:"text-md font-bold text-gray-800"},"Daily Standup",-1)),e("span",vn,n(pe(s.content).date),1)]),e("div",pn,[t[138]||(t[138]=e("div",{class:"flex items-center mb-1"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 text-blue-600 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("span",{class:"font-semibold text-sm text-gray-700"},"Yesterday:")],-1)),e("p",gn,n(pe(s.content).yesterday),1)]),e("div",yn,[t[139]||(t[139]=e("div",{class:"flex items-center mb-1"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 text-green-600 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})]),e("span",{class:"font-semibold text-sm text-gray-700"},"Today:")],-1)),e("p",xn,n(pe(s.content).today),1)]),e("div",fn,[t[140]||(t[140]=e("div",{class:"flex items-center mb-1"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 text-red-600 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})]),e("span",{class:"font-semibold text-sm text-gray-700"},"Blockers:")],-1)),e("p",bn,n(pe(s.content).blockers),1)]),e("div",_n,[e("p",wn,"Submitted by "+n(((p=s.user)==null?void 0:p.name)||"Unknown")+" on "+n(new Date(s.created_at).toLocaleDateString()),1)])])]))])}),128))])])):u("",!0),e("div",null,[t[143]||(t[143]=e("h5",{class:"text-md font-semibold text-gray-900 mb-4 border-b pb-2"},"Notes",-1)),Ze.value.length?(a(),l("div",hn,[(a(!0),l(F,null,I(Ze.value,s=>{var i;return a(),l("div",{key:s.id,class:"p-4 bg-gray-50 rounded-md shadow-sm hover:bg-gray-100 transition-colors"},[e("div",kn,[e("div",jn,[e("p",{class:Y(["text-sm",{"text-gray-700":s.content!=="[Encrypted content could not be decrypted]","text-red-500 italic":s.content==="[Encrypted content could not be decrypted]"}])},[v(n(s.content)+" ",1),s.content==="[Encrypted content could not be decrypted]"?(a(),l("span",Dn," (There was an issue decrypting this note. Please contact an administrator.) ")):u("",!0)],2),e("div",Cn,[e("p",Sn,"Added by "+n(((i=s.user)==null?void 0:i.name)||"Unknown")+" on "+n(new Date(s.created_at).toLocaleDateString()),1),s.reply_count>0?(a(),l("span",Mn,n(s.reply_count)+" "+n(s.reply_count===1?"reply":"replies"),1)):u("",!0)])]),s.chat_message_id&&d.value.google_chat_id?(a(),l("div",$n,[r(Z,{class:"text-sm text-indigo-600 hover:text-indigo-800",onClick:p=>yt(s)},{default:m(()=>t[142]||(t[142]=[v(" View ")])),_:2,__:[142]},1032,["onClick"])])):u("",!0)])])}),128))])):(a(),l("p",En,"No notes available."))])])):u("",!0)]))]),r(re,{show:A.value,onClose:t[21]||(t[21]=s=>A.value=!1)},{default:m(()=>[r(ks,{show:A.value,project:d.value,statusOptions:Tt,departmentOptions:Vt,sourceOptions:Nt,clientRoleOptions:Ut,userRoleOptions:Pt,paymentTypeOptions:Lt,onClose:t[20]||(t[20]=s=>A.value=!1),onSubmit:qt},null,8,["show","project"])]),_:1},8,["show"]),r(re,{show:ke.value,onClose:t[26]||(t[26]=s=>ke.value=!1)},{default:m(()=>{var s;return[e("div",An,[e("div",Tn,[t[145]||(t[145]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Email Details",-1)),e("button",{onClick:t[22]||(t[22]=i=>ke.value=!1),class:"text-gray-400 hover:text-gray-500"},t[144]||(t[144]=[e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),h.value?(a(),l("div",Vn,[e("div",Nn,[e("h4",Un,n(h.value.subject),1),e("div",Pn,[e("div",null,[e("p",Ln,[t[146]||(t[146]=v("From: ")),e("span",Fn,n(((s=h.value.sender)==null?void 0:s.name)||"N/A"),1)]),e("p",Rn,[t[147]||(t[147]=v("Status: ")),e("span",{class:Y({"px-2 py-1 rounded-full text-xs font-medium":!0,"bg-green-100 text-green-800":h.value.status==="sent","bg-yellow-100 text-yellow-800":h.value.status==="pending_approval","bg-red-100 text-red-800":h.value.status==="rejected","bg-gray-100 text-gray-800":h.value.status==="draft"})},n(h.value.status.replace("_"," ").toUpperCase()),3)])]),e("div",null,[e("p",Bn,[t[148]||(t[148]=v("Date: ")),e("span",In,n(new Date(h.value.created_at).toLocaleString()),1)])])])]),e("div",On,[e("div",{innerHTML:h.value.body},null,8,zn)]),h.value.rejection_reason?(a(),l("div",Hn,[t[149]||(t[149]=e("h5",{class:"font-medium text-red-800"},"Rejection Reason:",-1)),e("p",Wn,n(h.value.rejection_reason),1)])):u("",!0),h.value.approver?(a(),l("div",qn,[e("p",null,"Approved/Rejected by: "+n(h.value.approver.name),1),h.value.sent_at?(a(),l("p",Gn,"Sent at: "+n(new Date(h.value.sent_at).toLocaleString()),1)):u("",!0)])):u("",!0),h.value.status==="pending_approval"&&Ot.value?(a(),l("div",Yn,[r(P,{onClick:t[23]||(t[23]=i=>ns(h.value)),class:"bg-green-600 hover:bg-green-700"},{default:m(()=>t[150]||(t[150]=[v(" Approve ")])),_:1,__:[150]}),r(P,{onClick:t[24]||(t[24]=i=>rs(h.value)),class:"bg-blue-600 hover:bg-blue-700"},{default:m(()=>t[151]||(t[151]=[v(" Edit & Approve ")])),_:1,__:[151]}),r(Z,{onClick:t[25]||(t[25]=i=>ds(h.value)),class:"text-red-600 hover:text-red-800"},{default:m(()=>t[152]||(t[152]=[v(" Reject ")])),_:1,__:[152]})])):u("",!0)])):u("",!0)])]}),_:1},8,["show"]),r(js,{show:K.value,"project-id":d.value.id,onClose:t[27]||(t[27]=s=>K.value=!1),onNoteAdded:Ke},null,8,["show","project-id"]),r(re,{show:Ue.value,onClose:t[32]||(t[32]=s=>Ue.value=!1),"max-width":"3xl"},{default:m(()=>[e("div",Zn,[e("div",Jn,[t[154]||(t[154]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Edit and Approve Email",-1)),e("button",{onClick:t[28]||(t[28]=s=>Ue.value=!1),class:"text-gray-400 hover:text-gray-500"},t[153]||(t[153]=[e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),h.value?(a(),l("div",Kn,[e("form",{onSubmit:Be(is,["prevent"])},[$.value?(a(),l("div",Qn,[e("span",Xn,n($.value),1)])):u("",!0),e("div",er,[r(W,{for:"subject",value:"Subject"}),r(ce,{id:"subject",type:"text",class:"mt-1 block w-full",modelValue:ye.subject,"onUpdate:modelValue":t[29]||(t[29]=s=>ye.subject=s),required:""},null,8,["modelValue"]),r(q,{message:je.value.subject?je.value.subject[0]:"",class:"mt-2"},null,8,["message"])]),e("div",tr,[r(W,{for:"body",value:"Email Body"}),r(St,{id:"body",modelValue:ye.body,"onUpdate:modelValue":t[30]||(t[30]=s=>ye.body=s),placeholder:"Edit your email here...",height:"300px"},null,8,["modelValue"]),r(q,{message:je.value.body?je.value.body[0]:"",class:"mt-2"},null,8,["message"])]),e("div",sr,[r(Z,{onClick:t[31]||(t[31]=s=>Ue.value=!1)},{default:m(()=>t[155]||(t[155]=[v("Cancel")])),_:1,__:[155]}),r(P,{type:"submit",class:"bg-green-600 hover:bg-green-700"},{default:m(()=>t[156]||(t[156]=[v("Save & Approve")])),_:1,__:[156]})])],32)])):u("",!0)])]),_:1},8,["show"]),r(re,{show:Pe.value,onClose:t[36]||(t[36]=s=>Pe.value=!1),"max-width":"2xl"},{default:m(()=>[e("div",or,[e("div",ar,[t[158]||(t[158]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Reject Email",-1)),e("button",{onClick:t[33]||(t[33]=s=>Pe.value=!1),class:"text-gray-400 hover:text-gray-500"},t[157]||(t[157]=[e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),h.value?(a(),l("div",lr,[e("form",{onSubmit:Be(us,["prevent"])},[$.value?(a(),l("div",nr,[e("span",rr,n($.value),1)])):u("",!0),e("div",ir,[r(W,{for:"rejection_reason",value:"Rejection Reason"}),w(e("textarea",{id:"rejection_reason",rows:"5",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full","onUpdate:modelValue":t[34]||(t[34]=s=>Ge.rejection_reason=s),required:"",placeholder:"Please provide a reason for rejecting this email (minimum 10 characters)"},null,512),[[H,Ge.rejection_reason]]),r(q,{message:Ye.value.rejection_reason?Ye.value.rejection_reason[0]:"",class:"mt-2"},null,8,["message"])]),e("div",dr,[r(Z,{onClick:t[35]||(t[35]=s=>Pe.value=!1)},{default:m(()=>t[159]||(t[159]=[v("Cancel")])),_:1,__:[159]}),r(P,{type:"submit",class:"bg-red-600 hover:bg-red-700"},{default:m(()=>t[160]||(t[160]=[v("Reject Email")])),_:1,__:[160]})])],32)])):u("",!0)])]),_:1},8,["show"]),r(re,{show:Le.value,onClose:t[42]||(t[42]=s=>Le.value=!1),"max-width":"3xl"},{default:m(()=>[e("div",ur,[e("div",cr,[t[162]||(t[162]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Compose New Email",-1)),e("button",{onClick:t[37]||(t[37]=s=>Le.value=!1),class:"text-gray-400 hover:text-gray-500"},t[161]||(t[161]=[e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("form",{onSubmit:Be(ms,["prevent"])},[$.value?(a(),l("div",mr,[e("span",vr,n($.value),1)])):u("",!0),e("div",pr,[r(W,{for:"client_ids",value:"To (Clients)"}),r(Fe($t),{id:"client_ids",modelValue:L.client_ids,"onUpdate:modelValue":t[38]||(t[38]=s=>L.client_ids=s),options:d.value.clients||[],multiple:!0,"close-on-select":!0,"clear-on-select":!1,"preserve-search":!0,placeholder:"Select one or more clients",label:"name","track-by":"id",searchable:!0,"allow-empty":!0},{option:m(({option:s})=>[v(n(s.name),1)]),tag:m(({option:s,remove:i})=>[e("span",gr,[v(n(s.name)+" ",1),e("i",{class:"multiselect__tag-icon",onClick:p=>i(s)},null,8,yr)])]),_:1},8,["modelValue","options"]),r(q,{message:le.value.client_ids?le.value.client_ids[0]:"",class:"mt-2"},null,8,["message"])]),e("div",xr,[r(W,{for:"subject",value:"Subject"}),r(ce,{id:"subject",type:"text",class:"mt-1 block w-full",modelValue:L.subject,"onUpdate:modelValue":t[39]||(t[39]=s=>L.subject=s),required:""},null,8,["modelValue"]),r(q,{message:le.value.subject?le.value.subject[0]:"",class:"mt-2"},null,8,["message"])]),e("div",fr,[r(W,{for:"body",value:"Email Body"}),r(St,{id:"body",modelValue:L.body,"onUpdate:modelValue":t[40]||(t[40]=s=>L.body=s),placeholder:"Compose your email here...",height:"300px"},null,8,["modelValue"]),r(q,{message:le.value.body?le.value.body[0]:"",class:"mt-2"},null,8,["message"])]),e("div",br,[r(Z,{onClick:t[41]||(t[41]=s=>Le.value=!1),class:"mr-2"},{default:m(()=>t[163]||(t[163]=[v("Cancel")])),_:1,__:[163]}),r(P,{type:"submit"},{default:m(()=>t[164]||(t[164]=[v("Submit for Approval")])),_:1,__:[164]})])],32)])]),_:1},8,["show"]),r(re,{show:ve.value,onClose:t[46]||(t[46]=s=>ve.value=!1)},{default:m(()=>{var s;return[e("div",_r,[e("div",wr,[t[166]||(t[166]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Reply to Note",-1)),e("button",{onClick:t[43]||(t[43]=i=>ve.value=!1),class:"text-gray-400 hover:text-gray-500"},t[165]||(t[165]=[e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),y.value?(a(),l("div",hr,[e("p",kr,n(y.value.content),1),e("p",jr,"Added by "+n(((s=y.value.user)==null?void 0:s.name)||"Unknown")+" on "+n(new Date(y.value.created_at).toLocaleDateString()),1)])):u("",!0),y.value?(a(),l("div",Dr,[t[169]||(t[169]=e("h4",{class:"text-sm font-medium text-gray-700 mb-2"},"Replies",-1)),fe.value?(a(),l("div",Cr,t[167]||(t[167]=[e("p",{class:"text-gray-500 text-sm"},"Loading replies...",-1)]))):xe.value.length?(a(),l("div",Sr,[(a(!0),l(F,null,I(xe.value,i=>{var p;return a(),l("div",{key:i.id,class:"p-2 bg-gray-50 rounded border-l-2 border-indigo-300"},[e("p",Mr,n(i.content),1),e("p",$r,"Replied by "+n(((p=i.user)==null?void 0:p.name)||"Unknown")+" on "+n(new Date(i.created_at).toLocaleDateString()),1)])}),128))])):(a(),l("div",Er,t[168]||(t[168]=[e("p",{class:"text-gray-500 text-sm"},"No replies yet. Be the first to reply!",-1)])))])):u("",!0),bt.value?(a(),l("div",Ar,[t[170]||(t[170]=e("label",{for:"reply-content",class:"block text-sm font-medium text-gray-700 mb-1"},"Your Reply",-1)),w(e("textarea",{id:"reply-content","onUpdate:modelValue":t[44]||(t[44]=i=>X.value=i),class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full h-32",placeholder:"Enter your reply..."},null,512),[[H,X.value]]),ee.value?(a(),l("p",Tr,n(ee.value),1)):u("",!0)])):u("",!0),bt.value?(a(),l("div",Vr,[r(Z,{onClick:t[45]||(t[45]=i=>ve.value=!1),class:"mr-2"},{default:m(()=>t[171]||(t[171]=[v("Cancel")])),_:1,__:[171]}),r(P,{onClick:At},{default:m(()=>t[172]||(t[172]=[v("Send Reply")])),_:1,__:[172]})])):u("",!0)])]}),_:1},8,["show"]),r(re,{show:we.value,onClose:t[56]||(t[56]=s=>we.value=!1)},{default:m(()=>[e("div",Nr,[e("div",Ur,[e("h3",Pr,n($e.value?"Edit Task":"Add New Task"),1),e("button",{onClick:t[47]||(t[47]=s=>we.value=!1),class:"text-gray-400 hover:text-gray-500"},t[173]||(t[173]=[e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("form",{onSubmit:Be(ts,["prevent"]),class:"space-y-4"},[e("div",null,[t[174]||(t[174]=e("label",{for:"task-name",class:"block text-sm font-medium text-gray-700"},"Task Name",-1)),w(e("input",{id:"task-name","onUpdate:modelValue":t[48]||(t[48]=s=>N.value.name=s),type:"text",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",placeholder:"Enter task name"},null,512),[[H,N.value.name]]),R.value.name?(a(),l("p",Lr,n(R.value.name[0]),1)):u("",!0)]),e("div",null,[t[175]||(t[175]=e("label",{for:"task-description",class:"block text-sm font-medium text-gray-700"},"Description",-1)),w(e("textarea",{id:"task-description","onUpdate:modelValue":t[49]||(t[49]=s=>N.value.description=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",rows:"3",placeholder:"Enter task description"},null,512),[[H,N.value.description]]),R.value.description?(a(),l("p",Fr,n(R.value.description[0]),1)):u("",!0)]),e("div",null,[t[177]||(t[177]=e("label",{for:"task-status",class:"block text-sm font-medium text-gray-700"},"Status",-1)),w(e("select",{id:"task-status","onUpdate:modelValue":t[50]||(t[50]=s=>N.value.status=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},t[176]||(t[176]=[e("option",{value:"To Do"},"To Do",-1),e("option",{value:"In Progress"},"In Progress",-1),e("option",{value:"Done"},"Done",-1),e("option",{value:"Blocked"},"Blocked",-1),e("option",{value:"Archived"},"Archived",-1)]),512),[[ne,N.value.status]]),R.value.status?(a(),l("p",Rr,n(R.value.status[0]),1)):u("",!0)]),e("div",null,[t[178]||(t[178]=e("label",{for:"task-due-date",class:"block text-sm font-medium text-gray-700"},"Due Date",-1)),w(e("input",{id:"task-due-date","onUpdate:modelValue":t[51]||(t[51]=s=>N.value.due_date=s),type:"date",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[H,N.value.due_date]]),R.value.due_date?(a(),l("p",Br,n(R.value.due_date[0]),1)):u("",!0)]),e("div",null,[t[180]||(t[180]=e("label",{for:"task-assigned-to",class:"block text-sm font-medium text-gray-700"},"Assigned To",-1)),w(e("select",{id:"task-assigned-to","onUpdate:modelValue":t[52]||(t[52]=s=>N.value.assigned_to_user_id=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[t[179]||(t[179]=e("option",{value:null},"Unassigned",-1)),(a(!0),l(F,null,I(d.value.users,s=>(a(),l("option",{key:s.id,value:s.id},n(s.name),9,Ir))),128))],512),[[ne,N.value.assigned_to_user_id]]),R.value.assigned_to_user_id?(a(),l("p",Or,n(R.value.assigned_to_user_id[0]),1)):u("",!0)]),e("div",null,[t[182]||(t[182]=e("label",{for:"task-type",class:"block text-sm font-medium text-gray-700"},"Task Type",-1)),Qe.value?(a(),l("div",zr,"Loading task types...")):w((a(),l("select",{key:1,id:"task-type","onUpdate:modelValue":t[53]||(t[53]=s=>N.value.task_type_id=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[t[181]||(t[181]=e("option",{value:null},"Select a task type",-1)),(a(!0),l(F,null,I(We.value,s=>(a(),l("option",{key:s.id,value:s.id},n(s.name),9,Hr))),128))],512)),[[ne,N.value.task_type_id]]),R.value.task_type_id?(a(),l("p",Wr,n(R.value.task_type_id[0]),1)):u("",!0)]),e("div",null,[e("div",{class:"flex justify-between items-center"},[t[183]||(t[183]=e("label",{for:"task-milestone",class:"block text-sm font-medium text-gray-700"},"Milestone",-1)),e("button",{type:"button",onClick:Zt,class:"text-sm text-indigo-600 hover:text-indigo-800"}," + Create New Milestone ")]),qe.value?(a(),l("div",qr,"Loading milestones...")):w((a(),l("select",{key:1,id:"task-milestone","onUpdate:modelValue":t[54]||(t[54]=s=>N.value.milestone_id=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[t[184]||(t[184]=e("option",{value:null},"No milestone",-1)),(a(!0),l(F,null,I(se.value,s=>(a(),l("option",{key:s.id,value:s.id},n(s.name),9,Gr))),128))],512)),[[ne,N.value.milestone_id]]),R.value.milestone_id?(a(),l("p",Yr,n(R.value.milestone_id[0]),1)):u("",!0)]),e("div",Zr,[r(Z,{onClick:t[55]||(t[55]=s=>we.value=!1)},{default:m(()=>t[185]||(t[185]=[v(" Cancel ")])),_:1,__:[185]}),r(P,{type:"submit",disabled:Qe.value||qe.value},{default:m(()=>[v(n($e.value?"Update Task":"Create Task"),1)]),_:1},8,["disabled"])])],32)])]),_:1},8,["show"]),r(re,{show:Ve.value,onClose:t[63]||(t[63]=s=>Ve.value=!1)},{default:m(()=>[e("div",Jr,[e("div",Kr,[t[187]||(t[187]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Add New Milestone",-1)),e("button",{onClick:t[57]||(t[57]=s=>Ve.value=!1),class:"text-gray-400 hover:text-gray-500"},t[186]||(t[186]=[e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("form",{onSubmit:Be(Jt,["prevent"]),class:"space-y-4"},[e("div",null,[t[188]||(t[188]=e("label",{for:"milestone-name",class:"block text-sm font-medium text-gray-700"},"Milestone Name",-1)),w(e("input",{id:"milestone-name","onUpdate:modelValue":t[58]||(t[58]=s=>de.value.name=s),type:"text",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",placeholder:"Enter milestone name"},null,512),[[H,de.value.name]]),oe.value.name?(a(),l("p",Qr,n(oe.value.name[0]),1)):u("",!0)]),e("div",null,[t[189]||(t[189]=e("label",{for:"milestone-description",class:"block text-sm font-medium text-gray-700"},"Description",-1)),w(e("textarea",{id:"milestone-description","onUpdate:modelValue":t[59]||(t[59]=s=>de.value.description=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",rows:"3",placeholder:"Enter milestone description"},null,512),[[H,de.value.description]]),oe.value.description?(a(),l("p",Xr,n(oe.value.description[0]),1)):u("",!0)]),e("div",null,[t[190]||(t[190]=e("label",{for:"milestone-completion-date",class:"block text-sm font-medium text-gray-700"},"Completion Date",-1)),w(e("input",{id:"milestone-completion-date","onUpdate:modelValue":t[60]||(t[60]=s=>de.value.completion_date=s),type:"date",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[H,de.value.completion_date]]),oe.value.completion_date?(a(),l("p",ei,n(oe.value.completion_date[0]),1)):u("",!0)]),e("div",null,[t[192]||(t[192]=e("label",{for:"milestone-status",class:"block text-sm font-medium text-gray-700"},"Status",-1)),w(e("select",{id:"milestone-status","onUpdate:modelValue":t[61]||(t[61]=s=>de.value.status=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},t[191]||(t[191]=[e("option",{value:"Not Started"},"Not Started",-1),e("option",{value:"In Progress"},"In Progress",-1),e("option",{value:"Completed"},"Completed",-1),e("option",{value:"Overdue"},"Overdue",-1)]),512),[[ne,de.value.status]]),oe.value.status?(a(),l("p",ti,n(oe.value.status[0]),1)):u("",!0)]),e("div",si,[r(Z,{onClick:t[62]||(t[62]=s=>Ve.value=!1),type:"button"},{default:m(()=>t[193]||(t[193]=[v(" Cancel ")])),_:1,__:[193]}),r(P,{type:"submit",disabled:et.value},{default:m(()=>[v(n(et.value?"Creating...":"Create Milestone"),1)]),_:1},8,["disabled"])])],32)])]),_:1},8,["show"]),r(re,{show:Ee.value,onClose:t[67]||(t[67]=s=>Ee.value=!1)},{default:m(()=>[e("div",oi,[e("div",ai,[t[195]||(t[195]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Add Note to Task",-1)),e("button",{onClick:t[64]||(t[64]=s=>Ee.value=!1),class:"text-gray-400 hover:text-gray-500"},t[194]||(t[194]=[e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),Ae.value?(a(),l("div",li,[e("p",ni,n(Ae.value.title),1),e("p",ri,"Status: "+n(Ae.value.status),1)])):u("",!0),e("div",ii,[t[196]||(t[196]=e("label",{for:"task-note-content",class:"block text-sm font-medium text-gray-700 mb-1"},"Note Content",-1)),w(e("textarea",{id:"task-note-content","onUpdate:modelValue":t[65]||(t[65]=s=>Te.value=s),class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full h-32",placeholder:"Enter your note..."},null,512),[[H,Te.value]]),he.value?(a(),l("p",di,n(he.value),1)):u("",!0)]),e("div",ui,[r(Z,{onClick:t[66]||(t[66]=s=>Ee.value=!1),class:"mr-2"},{default:m(()=>t[197]||(t[197]=[v("Cancel")])),_:1,__:[197]}),r(P,{onClick:es,disabled:Xe.value},{default:m(()=>[v(n(Xe.value?"Adding...":"Add Note"),1)]),_:1},8,["disabled"])])])]),_:1},8,["show"]),r(Ns,{show:D.value,onClose:t[68]||(t[68]=s=>D.value=!1),onSaved:ls,projectId:d.value.id,projectUsers:d.value.users||[]},null,8,["show","projectId","projectUsers"]),r(Is,{show:g.value,onClose:t[69]||(t[69]=s=>g.value=!1),onStandupAdded:Je,projectId:d.value.id},null,8,["show","projectId"])]),_:1})],64))}},Di=Ds(ci,[["__scopeId","data-v-4b61e581"]]);export{Di as default};
