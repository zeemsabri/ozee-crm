import{S as Ve,B as vt,b as Ii,_ as Ni}from"./AuthenticatedLayout-BNm4r3GJ.js";import{r as w,B as ze,i as m,o as u,b as l,F as te,j as oe,g as S,t as y,m as W,ad as pt,e as f,ae as Cs,a as V,A as de,c as ue,af as ca,K as ma,n as ie,D as Ae,T as Rt,ag as ee,G as Pi,a4 as Et,ah as Wi,d as Ne,z as Re,w as ke,s as B,f as Me,k as Ye,v as qt,h as X,M as Fi,_ as ot,ai as Ui,q as ha,aj as va,P as Ma,$ as Ri,U as jt,a5 as Hi,L as Bi,aa as zi,ab as Gi,y as qi,a8 as Zi}from"./app-TPbKwKr-.js";import{c as Ce,a as Mt,d as Ft,f as yt,b as Ki,_ as Ji}from"./ProjectForm-CDjcnlN3.js";import{a as je,_ as nt}from"./SecondaryButton-DWMgY1ah.js";import{P as Te}from"./PrimaryButton-C8YMwuXN.js";import{_ as Sa}from"./StandupModal-D8QXfUhS.js";import{_ as z,a as be,b as ve}from"./InputError-BWrM8WDG.js";import{_ as Ta}from"./NotesModal-A5LYRFUE.js";import{_ as Ca}from"./EmailEditor-C7911_1I.js";import"./ApplicationLogo-DBLB3mjB.js";import"./Checkbox-D2Pmg4oQ.js";const Xi={class:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow mb-6"},Qi={key:0,class:"text-sm text-gray-500"},en={key:1,class:"text-sm text-gray-500"},tn={key:2,class:"space-y-3"},sn={class:"flex justify-between items-start"},an={class:"font-medium text-gray-900"},nn={class:"text-sm text-gray-600"},ln={key:0,class:"text-sm text-gray-600 mt-1"},on={class:"flex space-x-2"},rn=["href"],dn=["href"],un=["onClick"],cn={__name:"ProjectMeetingsList",props:{projectId:{type:Number,required:!0}},setup(e,{expose:t}){const s=e,a=w([]),i=w(!1),n=w(""),o=()=>{try{n.value=Intl.DateTimeFormat().resolvedOptions().timeZone}catch(v){console.error("Error detecting user timezone:",v),n.value="UTC"}},r=(v,p=null,_=!1)=>{if(!v)return"";try{if(_||v.endsWith("Z")){if(p&&p===n.value){const k={dateStyle:"medium",timeStyle:"short"};return new Date(v).toLocaleString(void 0,k)}const g={dateStyle:"medium",timeStyle:"short",timeZone:p||n.value};return new Date(v).toLocaleString(void 0,g)}else{if(p&&p===n.value){const k={dateStyle:"medium",timeStyle:"short"};return new Date(v).toLocaleString(void 0,k)}const g={dateStyle:"medium",timeStyle:"short",timeZone:p||n.value};return new Date(v).toLocaleString(void 0,g)}}catch(g){return console.error("Error formatting meeting time:",g),new Date(v).toLocaleString()}},c=(v,p=null,_=!1)=>{if(!v)return"";try{if(_||v.endsWith("Z")){if(p&&p===n.value){const k={timeStyle:"short"};return new Date(v).toLocaleTimeString(void 0,k)}const g={timeStyle:"short",timeZone:p||n.value};return new Date(v).toLocaleTimeString(void 0,g)}else{if(p&&p===n.value){const k={timeStyle:"short"};return new Date(v).toLocaleTimeString(void 0,k)}const g={timeStyle:"short",timeZone:p||n.value};return new Date(v).toLocaleTimeString(void 0,g)}}catch(g){return console.error("Error formatting meeting time (time only):",g),new Date(v).toLocaleTimeString()}},d=async()=>{i.value=!0;try{const v=await window.axios.get(`/api/projects/${s.projectId}/meetings`);a.value=v.data}catch(v){console.error("Error fetching project meetings:",v)}finally{i.value=!1}},h=async v=>{if(confirm("Are you sure you want to delete this meeting?"))try{await window.axios.delete(`/api/projects/${s.projectId}/meetings/${v}`),await d()}catch(p){console.error("Error deleting meeting:",p),alert("Failed to delete meeting. Please try again.")}};return t({fetchMeetings:d}),ze(()=>{o(),d()}),(v,p)=>(u(),m("div",Xi,[p[4]||(p[4]=l("h4",{class:"text-md font-semibold text-gray-900 mb-2"},"Upcoming Meetings",-1)),i.value?(u(),m("div",Qi," Loading meetings... ")):a.value.length===0?(u(),m("div",en," No upcoming meetings scheduled. ")):(u(),m("div",tn,[(u(!0),m(te,null,oe(a.value,_=>(u(),m("div",{key:_.id,class:"p-3 bg-gray-50 rounded-lg border border-gray-200 hover:bg-gray-100 transition-colors"},[l("div",sn,[l("div",null,[l("h5",an,y(_.summary),1),l("p",nn,y(r(_.start_time,_.timezone,_.is_utc))+" - "+y(c(_.end_time,_.timezone,_.is_utc)),1),_.location?(u(),m("p",ln,[p[0]||(p[0]=l("span",{class:"font-medium"},"Location:",-1)),W(" "+y(_.location),1)])):S("",!0)]),l("div",on,[l("a",{href:_.google_event_link,target:"_blank",class:"text-blue-600 hover:text-blue-800",title:"View in Google Calendar"},p[1]||(p[1]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)]),8,rn),_.google_meet_link?(u(),m("a",{key:0,href:_.google_meet_link,target:"_blank",class:"text-green-600 hover:text-green-800",title:"Join Google Meet"},p[2]||(p[2]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1)]),8,dn)):S("",!0),l("button",{onClick:g=>h(_.google_event_id),class:"text-red-600 hover:text-red-800",title:"Delete Meeting"},p[3]||(p[3]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,un)])])]))),128))]))]))}};var mn=Object.defineProperty,hn=(e,t,s)=>t in e?mn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,et=(e,t,s)=>hn(e,typeof t!="symbol"?t+"":t,s);const vn=(e,t,s)=>{const a=e[t];return a?typeof a=="function"?a():Promise.resolve(a):new Promise((i,n)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(n.bind(null,new Error("Unknown variable dynamic import: "+t+(t.split("/").length!==s?". Note that variables only represent file names one level deep.":""))))})};let Lt,fa,pa,Ie,It={},bt={};class fn{constructor(t,s=!1){et(this,"texts",{}),et(this,"dateToMinutes",a=>a.getHours()*60+a.getMinutes()),Ie=this,this._texts=t,!s&&Date&&!Date.prototype.addDays&&this._initDatePrototypes()}_initDatePrototypes(){Date.prototype.addDays=function(t){return Ie.addDays(this,t)},Date.prototype.subtractDays=function(t){return Ie.subtractDays(this,t)},Date.prototype.addHours=function(t){return Ie.addHours(this,t)},Date.prototype.subtractHours=function(t){return Ie.subtractHours(this,t)},Date.prototype.addMinutes=function(t){return Ie.addMinutes(this,t)},Date.prototype.subtractMinutes=function(t){return Ie.subtractMinutes(this,t)},Date.prototype.getWeek=function(){return Ie.getWeek(this)},Date.prototype.isToday=function(){return Ie.isToday(this)},Date.prototype.isLeapYear=function(){return Ie.isLeapYear(this)},Date.prototype.format=function(t="YYYY-MM-DD"){return Ie.formatDate(this,t)},Date.prototype.formatTime=function(t="HH:mm"){return Ie.formatTime(this,t)}}removePrototypes(){delete Date.prototype.addDays,delete Date.prototype.subtractDays,delete Date.prototype.addHours,delete Date.prototype.subtractHours,delete Date.prototype.addMinutes,delete Date.prototype.subtractMinutes,delete Date.prototype.getWeek,delete Date.prototype.isToday,delete Date.prototype.isLeapYear,delete Date.prototype.format,delete Date.prototype.formatTime}updateTexts(t){this._texts=t}_todayFormatted(){return fa!==new Date().getDate()&&(Lt=new Date,fa=Lt.getDate(),pa=`${Lt.getFullYear()}-${Lt.getMonth()}-${Lt.getDate()}`),pa}addDays(t,s){const a=new Date(t.valueOf());return a.setDate(a.getDate()+s),a}subtractDays(t,s){const a=new Date(t.valueOf());return a.setDate(a.getDate()-s),a}addHours(t,s){const a=new Date(t.valueOf());return a.setHours(a.getHours()+s),a}subtractHours(t,s){const a=new Date(t.valueOf());return a.setHours(a.getHours()-s),a}addMinutes(t,s){const a=new Date(t.valueOf());return a.setMinutes(a.getMinutes()+s),a}subtractMinutes(t,s){const a=new Date(t.valueOf());return a.setMinutes(a.getMinutes()-s),a}getWeek(t){const s=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate())),a=s.getUTCDay()||7;s.setUTCDate(s.getUTCDate()+4-a);const i=new Date(Date.UTC(s.getUTCFullYear(),0,1));return Math.ceil(((s-i)/864e5+1)/7)}isToday(t){return`${t.getFullYear()}-${t.getMonth()}-${t.getDate()}`===this._todayFormatted()}isLeapYear(t){const s=t.getFullYear();return!(s%400)||s%100&&!(s%4)}getPreviousFirstDayOfWeek(t=null,s){const a=t&&new Date(t.valueOf())||new Date,i=s?7:6;return a.setDate(a.getDate()-(a.getDay()+i)%7),a}stringToDate(t){return t instanceof Date?t:(t.length===10&&(t+=" 00:00"),new Date(t.replace(/-/g,"/")))}countDays(t,s){typeof t=="string"&&(t=t.replace(/-/g,"/")),typeof s=="string"&&(s=s.replace(/-/g,"/")),t=new Date(t).setHours(0,0,0,0),s=new Date(s).setHours(0,0,1,0);const a=(new Date(s).getTimezoneOffset()-new Date(t).getTimezoneOffset())*60*1e3;return Math.ceil((s-t-a)/(24*3600*1e3))}datesInSameTimeStep(t,s,a){return Math.abs(t.getTime()-s.getTime())<=a*60*1e3}formatDate(t,s="YYYY-MM-DD",a=null){if(a||(a=this._texts),s||(s="YYYY-MM-DD"),s==="YYYY-MM-DD")return this.formatDateLite(t);It={},bt={};const i={YYYY:()=>this._hydrateDateObject(t,a).YYYY,YY:()=>this._hydrateDateObject(t,a).YY(),M:()=>this._hydrateDateObject(t,a).M,MM:()=>this._hydrateDateObject(t,a).MM(),MMM:()=>this._hydrateDateObject(t,a).MMM(),MMMM:()=>this._hydrateDateObject(t,a).MMMM(),MMMMG:()=>this._hydrateDateObject(t,a).MMMMG(),D:()=>this._hydrateDateObject(t,a).D,DD:()=>this._hydrateDateObject(t,a).DD(),S:()=>this._hydrateDateObject(t,a).S(),d:()=>this._hydrateDateObject(t,a).d,dd:()=>this._hydrateDateObject(t,a).dd(),ddd:()=>this._hydrateDateObject(t,a).ddd(),dddd:()=>this._hydrateDateObject(t,a).dddd(),HH:()=>this._hydrateTimeObject(t,a).HH,H:()=>this._hydrateTimeObject(t,a).H,hh:()=>this._hydrateTimeObject(t,a).hh,h:()=>this._hydrateTimeObject(t,a).h,am:()=>this._hydrateTimeObject(t,a).am,AM:()=>this._hydrateTimeObject(t,a).AM,mm:()=>this._hydrateTimeObject(t,a).mm,m:()=>this._hydrateTimeObject(t,a).m};return s.replace(/(\{[a-zA-Z]+\}|[a-zA-Z]+)/g,(n,o)=>{const r=i[o.replace(/\{|\}/g,"")];return r!==void 0?r():o})}formatDateLite(t){const s=t.getMonth()+1,a=t.getDate();return`${t.getFullYear()}-${s<10?"0":""}${s}-${a<10?"0":""}${a}`}formatTime(t,s="HH:mm",a=null,i=!1){let n=!1;if(i){const[c,d,h]=[t.getHours(),t.getMinutes(),t.getSeconds()];c+d+h===141&&(n=!0)}if(t instanceof Date&&s==="HH:mm")return n?"24:00":this.formatTimeLite(t);bt={},a||(a=this._texts);const o=this._hydrateTimeObject(t,a),r=s.replace(/(\{[a-zA-Z]+\}|[a-zA-Z]+)/g,(c,d)=>{const h=o[d.replace(/\{|\}/g,"")];return h!==void 0?h:d});return n?r.replace("23:59","24:00"):r}formatTimeLite(t){const s=t.getHours(),a=t.getMinutes();return`${(s<10?"0":"")+s}:${(a<10?"0":"")+a}`}_nth(t){if(t>3&&t<21)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}}_hydrateDateObject(t,s){if(It.D)return It;const a=t.getFullYear(),i=t.getMonth()+1,n=t.getDate(),r=(t.getDay()-1+7)%7;return It={YYYY:a,YY:()=>a.toString().substring(2),M:i,MM:()=>(i<10?"0":"")+i,MMM:()=>s.months[i-1].substring(0,3),MMMM:()=>s.months[i-1],MMMMG:()=>(s.monthsGenitive||s.months)[i-1],D:n,DD:()=>(n<10?"0":"")+n,S:()=>this._nth(n),d:r+1,dd:()=>s.weekDays[r][0],ddd:()=>s.weekDays[r].substr(0,3),dddd:()=>s.weekDays[r]},It}_hydrateTimeObject(t,s){if(bt.am)return bt;let a,i;t instanceof Date?(a=t.getHours(),i=t.getMinutes()):(a=Math.floor(t/60),i=Math.floor(t%60));const n=a%12?a%12:12,o=(s||{am:"am",pm:"pm"})[a===24||a<12?"am":"pm"];return bt={H:a,h:n,HH:(a<10?"0":"")+a,hh:(n<10?"0":"")+n,am:o,AM:o.toUpperCase(),m:i,mm:(i<10?"0":"")+i},bt}}const pn=1440;class yn{constructor(t){et(this,"_vuecal",null),et(this,"selectCell",(s=!1,a,i)=>{this._vuecal.$emit("cell-click",i?{date:a,split:i}:a),this._vuecal.clickToNavigate||s?this._vuecal.switchToNarrowerView():this._vuecal.dblclickToNavigate&&"ontouchstart"in window&&(this._vuecal.domEvents.dblTapACell.taps++,setTimeout(()=>this._vuecal.domEvents.dblTapACell.taps=0,this._vuecal.domEvents.dblTapACell.timeout),this._vuecal.domEvents.dblTapACell.taps>=2&&(this._vuecal.domEvents.dblTapACell.taps=0,this._vuecal.switchToNarrowerView(),this._vuecal.$emit("cell-dblclick",i?{date:a,split:i}:a)))}),et(this,"keyPressEnterCell",(s,a)=>{this._vuecal.$emit("cell-keypress-enter",a?{date:s,split:a}:s),this._vuecal.switchToNarrowerView()}),et(this,"getPosition",s=>{const{left:a,top:i}=this._vuecal.cellsEl.getBoundingClientRect(),{clientX:n,clientY:o}="ontouchstart"in window&&s.touches?s.touches[0]:s;return{x:n-a,y:o-i}}),et(this,"minutesAtCursor",s=>{let a=0,i={x:0,y:0};const{timeStep:n,timeCellHeight:o,timeFrom:r}=this._vuecal.$props;return typeof s=="number"?a=s:typeof s=="object"&&(i=this.getPosition(s),a=Math.round(i.y*n/parseInt(o)+r)),{minutes:Math.max(Math.min(a,pn),0),cursorCoords:i}}),this._vuecal=t}}const gn=2,ks=1440;let xe,De,xs;class wn{constructor(t,s){et(this,"_vuecal",null),et(this,"eventDefaults",{_eid:null,start:"",startTimeMinutes:0,end:"",endTimeMinutes:0,title:"",content:"",background:!1,allDay:!1,segments:null,repeat:null,daysCount:1,deletable:!0,deleting:!1,titleEditable:!0,resizable:!0,resizing:!1,draggable:!0,dragging:!1,draggingStatic:!1,focused:!1,class:""}),this._vuecal=t,xe=s}createAnEvent(t,s,a){if(typeof t=="string"&&(t=xe.stringToDate(t)),!(t instanceof Date))return!1;const i=xe.dateToMinutes(t);s=s*1||gn*60;const n=i+s,o=xe.addMinutes(new Date(t),s);a.end&&(typeof a.end=="string"&&(a.end=xe.stringToDate(a.end)),a.endTimeMinutes=xe.dateToMinutes(a.end));const r={...this.eventDefaults,_eid:`${this._vuecal._.uid}_${this._vuecal.eventIdIncrement++}`,start:t,startTimeMinutes:i,end:o,endTimeMinutes:n,segments:null,...a};if(!(typeof this._vuecal.onEventCreate=="function"&&!this._vuecal.onEventCreate(r,()=>this.deleteAnEvent(r))))return r.startDateF!==r.endDateF&&(r.daysCount=xe.countDays(r.start,r.end)),this._vuecal.mutableEvents.push(r),this._vuecal.addEventsToView([r]),this._vuecal.emitWithEvent("event-create",r),this._vuecal.$emit("event-change",{event:this._vuecal.cleanupEvent(r),originalEvent:null}),r}addEventSegment(t){t.segments||(t.segments={},t.segments[xe.formatDateLite(t.start)]={start:t.start,startTimeMinutes:t.startTimeMinutes,endTimeMinutes:ks,isFirstDay:!0,isLastDay:!1});const s=t.segments[xe.formatDateLite(t.end)];s&&(s.isLastDay=!1,s.endTimeMinutes=ks);const a=xe.addDays(t.end,1),i=xe.formatDateLite(a);return a.setHours(0,0,0,0),t.segments[i]={start:a,startTimeMinutes:0,endTimeMinutes:t.endTimeMinutes,isFirstDay:!1,isLastDay:!0},t.end=xe.addMinutes(a,t.endTimeMinutes),t.daysCount=Object.keys(t.segments).length,i}removeEventSegment(t){let s=Object.keys(t.segments).length;if(s<=1)return xe.formatDateLite(t.end);delete t.segments[xe.formatDateLite(t.end)],s--;const a=xe.subtractDays(t.end,1),i=xe.formatDateLite(a),n=t.segments[i];return s?n&&(n.isLastDay=!0,n.endTimeMinutes=t.endTimeMinutes):t.segments=null,t.daysCount=s||1,t.end=a,i}createEventSegments(t,s,a){const i=s.getTime(),n=a.getTime();let o=t.start.getTime(),r=t.end.getTime(),c=!1,d,h,v;for(!t.end.getHours()&&!t.end.getMinutes()&&(r-=1e3),t.segments={},t.repeat?(d=i,h=Math.min(n,t.repeat.until?xe.stringToDate(t.repeat.until).getTime():n)):(d=Math.max(i,o),h=Math.min(n,r));d<=h;){let p=!1;const _=xe.addDays(new Date(d),1).setHours(0,0,0,0);let g,k,D,x;if(t.repeat){const N=new Date(d),P=xe.formatDateLite(N);(c||t.occurrences&&t.occurrences[P])&&(c||(o=t.occurrences[P].start,v=new Date(o).setHours(0,0,0,0),r=t.occurrences[P].end),c=!0,p=!0),g=d===v,k=P===xe.formatDateLite(new Date(r)),D=new Date(g?o:d),x=xe.formatDateLite(D),k&&(c=!1)}else p=!0,g=d===o,k=h===r&&_>h,D=g?t.start:new Date(d),x=xe.formatDateLite(g?t.start:D);p&&(t.segments[x]={start:D,startTimeMinutes:g?t.startTimeMinutes:0,endTimeMinutes:k?t.endTimeMinutes:ks,isFirstDay:g,isLastDay:k}),d=_}return t}deleteAnEvent(t){this._vuecal.emitWithEvent("event-delete",t),this._vuecal.mutableEvents=this._vuecal.mutableEvents.filter(s=>s._eid!==t._eid),this._vuecal.view.events=this._vuecal.view.events.filter(s=>s._eid!==t._eid)}checkCellOverlappingEvents(t,s){xs=t.slice(0),De={},t.forEach(i=>{xs.shift(),De[i._eid]||(De[i._eid]={overlaps:[],start:i.start,position:0}),De[i._eid].position=0,xs.forEach(n=>{De[n._eid]||(De[n._eid]={overlaps:[],start:n.start,position:0});const o=this.eventInRange(n,i.start,i.end),r=s.overlapsPerTimeStep?xe.datesInSameTimeStep(i.start,n.start,s.timeStep):1;if(!i.background&&!i.allDay&&!n.background&&!n.allDay&&o&&r)De[i._eid].overlaps.push(n._eid),De[i._eid].overlaps=[...new Set(De[i._eid].overlaps)],De[n._eid].overlaps.push(i._eid),De[n._eid].overlaps=[...new Set(De[n._eid].overlaps)],De[n._eid].position++;else{let c,d;(c=(De[i._eid]||{overlaps:[]}).overlaps.indexOf(n._eid))>-1&&De[i._eid].overlaps.splice(c,1),(d=(De[n._eid]||{overlaps:[]}).overlaps.indexOf(i._eid))>-1&&De[n._eid].overlaps.splice(d,1),De[n._eid].position--}})});let a=0;for(const i in De){const n=De[i],o=n.overlaps.map(r=>({id:r,start:De[r].start}));o.push({id:i,start:n.start}),o.sort((r,c)=>r.start<c.start?-1:r.start>c.start?1:r.id>c.id?-1:1),n.position=o.findIndex(r=>r.id===i),a=Math.max(this.getOverlapsStreak(n,De),a)}return[De,a]}getOverlapsStreak(t,s={}){let a=t.overlaps.length+1,i=[];return t.overlaps.forEach(n=>{i.includes(n)||t.overlaps.filter(r=>r!==n).forEach(r=>{s[r].overlaps.includes(n)||i.push(r)})}),i=[...new Set(i)],a-=i.length,a}eventInRange(t,s,a){if(t.allDay||!this._vuecal.time){const o=new Date(t.start).setHours(0,0,0,0);return new Date(t.end).setHours(23,59,0,0)>=new Date(s).setHours(0,0,0,0)&&o<=new Date(a).setHours(0,0,0,0)}const i=t.start.getTime(),n=t.end.getTime();return i<a.getTime()&&n>s.getTime()}}const _n={class:"vuecal__flex vuecal__weekdays-headings"},bn=["onClick"],kn={class:"vuecal__flex weekday-label",grow:""},xn={class:"full"},Dn={class:"small"},Mn={class:"xsmall"},Sn={key:0},Tn={key:0,class:"vuecal__flex vuecal__split-days-headers",grow:""};function Cn(e,t,s,a,i,n){return u(),m("div",_n,[(u(!0),m(te,null,oe(n.headings,(o,r)=>(u(),m(te,{key:r},[o.hide?S("",!0):(u(),m("div",{key:0,class:ie(["vuecal__flex vuecal__heading",{today:o.today,clickable:n.cellHeadingsClickable}]),style:Ae(n.weekdayCellStyles),onClick:c=>n.view.id==="week"&&n.selectCell(o.date,c),onDblclick:t[0]||(t[0]=c=>n.view.id==="week"&&n.vuecal.dblclickToNavigate&&s.switchToNarrowerView())},[f(Rt,{name:`slide-fade--${s.transitionDirection}`,appear:n.vuecal.transitions},{default:V(()=>[(u(),m("div",{class:"vuecal__flex",column:"",key:n.vuecal.transitions?`${r}-${o.dayOfMonth}`:!1},[l("div",kn,[de(e.$slots,"weekday-heading",{heading:n.cleanupHeading(o),view:n.view},()=>[l("span",xn,y(o.full),1),l("span",Dn,y(o.small),1),l("span",Mn,y(o.xsmall),1),o.dayOfMonth?(u(),m("span",Sn," "+y(o.dayOfMonth),1)):S("",!0)])]),n.vuecal.hasSplits&&n.vuecal.stickySplitLabels?(u(),m("div",Tn,[(u(!0),m(te,null,oe(n.vuecal.daySplits,(c,d)=>(u(),m("div",{class:ie(["day-split-header",c.class||!1]),key:d},[de(e.$slots,"split-label",{split:c,view:n.view},()=>[W(y(c.label),1)])],2))),128))])):S("",!0)]))]),_:2},1032,["name","appear"])],46,bn))],64))),128))])}const $t=(e,t)=>{const s=e.__vccOpts||e;for(const[a,i]of t)s[a]=i;return s},En={inject:["vuecal","utils","view"],props:{transitionDirection:{type:String,default:"right"},weekDays:{type:Array,default:()=>[]},switchToNarrowerView:{type:Function,default:()=>{}}},methods:{selectCell(e,t){e.getTime()!==this.view.selectedDate.getTime()&&(this.view.selectedDate=e),this.utils.cell.selectCell(!1,e,t)},cleanupHeading:e=>({label:e.full,date:e.date,...e.today?{today:e.today}:{}})},computed:{headings(){if(!["month","week"].includes(this.view.id))return[];let e=!1;return this.weekDays.map((s,a)=>{const i=this.utils.date.addDays(this.view.startDate,this.vuecal.startWeekOnSunday&&this.vuecal.hideWeekends?a-1:a);return{hide:s.hide,full:s.label,small:s.short||s.label.substr(0,3),xsmall:s.short||s.label.substr(0,1),...this.view.id==="week"?{dayOfMonth:i.getDate(),date:i,today:!e&&this.utils.date.isToday(i)&&!e++}:{}}})},cellWidth(){return 100/(7-this.weekDays.reduce((e,t)=>e+t.hide,0))},weekdayCellStyles(){return{...this.vuecal.hideWeekdays.length?{width:`${this.cellWidth}%`}:{}}},cellHeadingsClickable(){return this.view.id==="week"&&(this.vuecal.clickToNavigate||this.vuecal.dblclickToNavigate)}}},Ea=$t(En,[["render",Cn]]),jn={class:"vuecal__header"},$n={key:0,class:"vuecal__flex vuecal__menu",role:"tablist","aria-label":"Calendar views navigation"},On=["onDragenter","onDragleave","onClick","aria-label"],An={key:1,class:"vuecal__title-bar"},Vn=["aria-label"],Yn={class:"vuecal__flex vuecal__title",grow:""},Ln=["aria-label"],In={key:0,class:"vuecal__flex vuecal__split-days-headers"};function Nn(e,t,s,a,i,n){const o=pt("weekdays-headings");return u(),m("div",jn,[s.options.hideViewSelector?S("",!0):(u(),m("div",$n,[(u(!0),m(te,null,oe(s.viewProps.views,(r,c)=>(u(),m(te,{key:c},[r.enabled?(u(),m("button",{key:0,class:ie(["vuecal__view-btn",{"vuecal__view-btn--active":n.view.id===c,"vuecal__view-btn--highlighted":e.highlightedControl===c}]),type:"button",onDragenter:d=>s.editEvents.drag&&n.dnd&&n.dnd.viewSelectorDragEnter(d,c,e.$data),onDragleave:d=>s.editEvents.drag&&n.dnd&&n.dnd.viewSelectorDragLeave(d,c,e.$data),onClick:d=>n.switchView(c,null,!0),"aria-label":`${r.label} view`},y(r.label),43,On)):S("",!0)],64))),128))])),s.options.hideTitleBar?S("",!0):(u(),m("div",An,[l("button",{class:ie(["vuecal__arrow vuecal__arrow--prev",{"vuecal__arrow--highlighted":e.highlightedControl==="previous"}]),type:"button",onClick:t[0]||(t[0]=(...r)=>n.previous&&n.previous(...r)),onDragenter:t[1]||(t[1]=r=>s.editEvents.drag&&n.dnd&&n.dnd.viewSelectorDragEnter(r,"previous",e.$data)),onDragleave:t[2]||(t[2]=r=>s.editEvents.drag&&n.dnd&&n.dnd.viewSelectorDragLeave(r,"previous",e.$data)),"aria-label":`Previous ${n.view.id}`},[de(e.$slots,"arrow-prev")],42,Vn),l("div",Yn,[f(Rt,{name:s.options.transitions?`slide-fade--${n.transitionDirection}`:""},{default:V(()=>[(u(),ue(Pi(n.broaderView?"button":"span"),{type:!!n.broaderView&&"button",key:`${n.view.id}${n.view.startDate.toString()}`,onClick:t[3]||(t[3]=r=>!!n.broaderView&&n.switchToBroaderView()),"aria-label":!!n.broaderView&&`Go to ${n.broaderView} view`},{default:V(()=>[de(e.$slots,"title")]),_:3},8,["type","aria-label"]))]),_:3},8,["name"])]),s.options.todayButton?(u(),m("button",{key:0,class:ie(["vuecal__today-btn",{"vuecal__today-btn--highlighted":e.highlightedControl==="today"}]),type:"button",onClick:t[4]||(t[4]=(...r)=>n.goToToday&&n.goToToday(...r)),onDragenter:t[5]||(t[5]=r=>s.editEvents.drag&&n.dnd&&n.dnd.viewSelectorDragEnter(r,"today",e.$data)),onDragleave:t[6]||(t[6]=r=>s.editEvents.drag&&n.dnd&&n.dnd.viewSelectorDragLeave(r,"today",e.$data)),"aria-label":"Today"},[de(e.$slots,"today-button")],34)):S("",!0),l("button",{class:ie(["vuecal__arrow vuecal__arrow--next",{"vuecal__arrow--highlighted":e.highlightedControl==="next"}]),type:"button",onClick:t[7]||(t[7]=(...r)=>n.next&&n.next(...r)),onDragenter:t[8]||(t[8]=r=>s.editEvents.drag&&n.dnd&&n.dnd.viewSelectorDragEnter(r,"next",e.$data)),onDragleave:t[9]||(t[9]=r=>s.editEvents.drag&&n.dnd&&n.dnd.viewSelectorDragLeave(r,"next",e.$data)),"aria-label":`Next ${n.view.id}`},[de(e.$slots,"arrow-next")],42,Ln)])),s.viewProps.weekDaysInHeader?(u(),ue(o,{key:2,"week-days":s.weekDays,"transition-direction":n.transitionDirection,"switch-to-narrower-view":s.switchToNarrowerView},Cs({_:2},[e.$slots["weekday-heading"]?{name:"weekday-heading",fn:V(({heading:r,view:c})=>[de(e.$slots,"weekday-heading",{heading:r,view:c})]),key:"0"}:void 0,e.$slots["split-label"]?{name:"split-label",fn:V(({split:r})=>[de(e.$slots,"split-label",{split:r,view:n.view})]),key:"1"}:void 0]),1032,["week-days","transition-direction","switch-to-narrower-view"])):S("",!0),f(Rt,{name:`slide-fade--${n.transitionDirection}`},{default:V(()=>[n.showDaySplits?(u(),m("div",In,[(u(!0),m(te,null,oe(s.daySplits,(r,c)=>(u(),m("div",{class:ie(["day-split-header",r.class||!1]),key:c},[de(e.$slots,"split-label",{split:r,view:n.view.id},()=>[W(y(r.label),1)])],2))),128))])):S("",!0)]),_:3},8,["name"])])}const Pn={inject:["vuecal","previous","next","switchView","updateSelectedDate","modules","view"],components:{WeekdaysHeadings:Ea},props:{options:{type:Object,default:()=>({})},editEvents:{type:Object,required:!0},hasSplits:{type:[Boolean,Number],default:!1},daySplits:{type:Array,default:()=>[]},viewProps:{type:Object,default:()=>({})},weekDays:{type:Array,default:()=>[]},switchToNarrowerView:{type:Function,default:()=>{}}},data:()=>({highlightedControl:null}),methods:{goToToday(){this.updateSelectedDate(new Date(new Date().setHours(0,0,0,0)))},switchToBroaderView(){this.transitionDirection="left",this.broaderView&&this.switchView(this.broaderView)}},computed:{transitionDirection:{get(){return this.vuecal.transitionDirection},set(e){this.vuecal.transitionDirection=e}},broaderView(){const{enabledViews:e}=this.vuecal;return e[e.indexOf(this.view.id)-1]},showDaySplits(){return this.view.id==="day"&&this.hasSplits&&this.options.stickySplitLabels&&!this.options.minSplitWidth},dnd(){return this.modules.dnd}}},Wn=$t(Pn,[["render",Nn]]),Fn=["draggable"];function Un(e,t,s,a,i,n){return u(),m("div",{class:ie(["vuecal__event",n.eventClasses]),style:Ae(n.eventStyles),tabindex:"0",onFocus:t[4]||(t[4]=(...o)=>n.focusEvent&&n.focusEvent(...o)),onKeypress:t[5]||(t[5]=Et(Ne((...o)=>n.onEnterKeypress&&n.onEnterKeypress(...o),["stop"]),["enter"])),onMouseenter:t[6]||(t[6]=(...o)=>n.onMouseEnter&&n.onMouseEnter(...o)),onMouseleave:t[7]||(t[7]=(...o)=>n.onMouseLeave&&n.onMouseLeave(...o)),onTouchstart:t[8]||(t[8]=Ne((...o)=>n.onTouchStart&&n.onTouchStart(...o),["stop"])),onMousedown:t[9]||(t[9]=o=>n.onMouseDown(o)),onMouseup:t[10]||(t[10]=(...o)=>n.onMouseUp&&n.onMouseUp(...o)),onTouchend:t[11]||(t[11]=(...o)=>n.onMouseUp&&n.onMouseUp(...o)),onTouchmove:t[12]||(t[12]=(...o)=>n.onTouchMove&&n.onTouchMove(...o)),onDblclick:t[13]||(t[13]=(...o)=>n.onDblClick&&n.onDblClick(...o)),draggable:n.draggable,onDragstart:t[14]||(t[14]=o=>n.draggable&&n.onDragStart(o)),onDragend:t[15]||(t[15]=o=>n.draggable&&n.onDragEnd())},[n.vuecal.editEvents.delete&&s.event.deletable?(u(),m("div",{key:0,class:"vuecal__event-delete",onClick:t[0]||(t[0]=Ne((...o)=>n.deleteEvent&&n.deleteEvent(...o),["stop"])),onTouchstart:t[1]||(t[1]=Ne((...o)=>n.touchDeleteEvent&&n.touchDeleteEvent(...o),["stop"]))},y(n.vuecal.texts.deleteEvent),33)):S("",!0),de(e.$slots,"event",{event:s.event,view:n.view.id}),n.resizable?(u(),m("div",{key:1,class:"vuecal__event-resize-handle",contenteditable:"false",onMousedown:t[2]||(t[2]=Ne((...o)=>n.onResizeHandleMouseDown&&n.onResizeHandleMouseDown(...o),["stop","prevent"])),onTouchstart:t[3]||(t[3]=Ne((...o)=>n.onResizeHandleMouseDown&&n.onResizeHandleMouseDown(...o),["stop","prevent"]))},null,32)):S("",!0)],46,Fn)}const Rn={inject:["vuecal","utils","modules","view","domEvents","editEvents"],props:{cellFormattedDate:{type:String,default:""},event:{type:Object,default:()=>({})},cellEvents:{type:Array,default:()=>[]},overlaps:{type:Array,default:()=>[]},eventPosition:{type:Number,default:0},overlapsStreak:{type:Number,default:0},allDay:{type:Boolean,default:!1}},data:()=>({touch:{dragThreshold:30,startX:0,startY:0,dragged:!1}}),methods:{onMouseDown(e,t=!1){if("ontouchstart"in window&&!t)return!1;const{clickHoldAnEvent:s,focusAnEvent:a,resizeAnEvent:i,dragAnEvent:n}=this.domEvents;if(a._eid===this.event._eid&&s._eid===this.event._eid)return!0;this.focusEvent(),s._eid=null,this.vuecal.editEvents.delete&&this.event.deletable&&(s.timeoutId=setTimeout(()=>{!i._eid&&!n._eid&&(s._eid=this.event._eid,this.event.deleting=!0)},s.timeout))},onMouseUp(e){this.domEvents.focusAnEvent._eid===this.event._eid&&!this.touch.dragged&&(this.domEvents.focusAnEvent.mousedUp=!0),this.touch.dragged=!1},onMouseEnter(e){e.preventDefault(),this.vuecal.emitWithEvent("event-mouse-enter",this.event)},onMouseLeave(e){e.preventDefault(),this.vuecal.emitWithEvent("event-mouse-leave",this.event)},onTouchMove(e){if(typeof this.vuecal.onEventClick!="function")return;const{clientX:t,clientY:s}=e.touches[0],{startX:a,startY:i,dragThreshold:n}=this.touch;(Math.abs(t-a)>n||Math.abs(s-i)>n)&&(this.touch.dragged=!0)},onTouchStart(e){this.touch.startX=e.touches[0].clientX,this.touch.startY=e.touches[0].clientY,this.onMouseDown(e,!0)},onEnterKeypress(e){if(typeof this.vuecal.onEventClick=="function")return this.vuecal.onEventClick(this.event,e)},onDblClick(e){if(typeof this.vuecal.onEventDblclick=="function")return this.vuecal.onEventDblclick(this.event,e)},onDragStart(e){this.dnd&&this.dnd.eventDragStart(e,this.event)},onDragEnd(){this.dnd&&this.dnd.eventDragEnd(this.event)},onResizeHandleMouseDown(){this.focusEvent(),this.domEvents.dragAnEvent._eid=null,this.domEvents.resizeAnEvent=Object.assign(this.domEvents.resizeAnEvent,{_eid:this.event._eid,start:(this.segment||this.event).start,split:this.event.split||null,segment:!!this.segment&&this.utils.date.formatDateLite(this.segment.start),originalEnd:new Date((this.segment||this.event).end),originalEndTimeMinutes:this.event.endTimeMinutes}),this.event.resizing=!0},deleteEvent(e=!1){if("ontouchstart"in window&&!e)return!1;this.utils.event.deleteAnEvent(this.event)},touchDeleteEvent(e){this.deleteEvent(!0)},cancelDeleteEvent(){this.event.deleting=!1},focusEvent(){const{focusAnEvent:e}=this.domEvents,t=e._eid;if(t!==this.event._eid){if(t){const s=this.view.events.find(a=>a._eid===t);s&&(s.focused=!1)}this.vuecal.cancelDelete(),this.vuecal.emitWithEvent("event-focus",this.event),e._eid=this.event._eid,this.event.focused=!0}}},computed:{eventDimensions(){const{startTimeMinutes:e,endTimeMinutes:t}=this.segment||this.event;let s=e-this.vuecal.timeFrom;const a=Math.max(Math.round(s*this.vuecal.timeCellHeight/this.vuecal.timeStep),0);s=Math.min(t,this.vuecal.timeTo)-this.vuecal.timeFrom;const i=Math.round(s*this.vuecal.timeCellHeight/this.vuecal.timeStep),n=Math.max(i-a,5);return{top:a,height:n}},eventStyles(){if(this.event.allDay||!this.vuecal.time||!this.event.endTimeMinutes||this.view.id==="month"||this.allDay)return{};let e=100/Math.min(this.overlaps.length+1,this.overlapsStreak),t=100/(this.overlaps.length+1)*this.eventPosition;this.vuecal.minEventWidth&&e<this.vuecal.minEventWidth&&(e=this.vuecal.minEventWidth,t=(100-this.vuecal.minEventWidth)/this.overlaps.length*this.eventPosition);const{top:s,height:a}=this.eventDimensions;return{top:`${s}px`,height:`${a}px`,width:`${e}%`,left:this.event.left&&`${this.event.left}px`||`${t}%`}},eventClasses(){const{isFirstDay:e,isLastDay:t}=this.segment||{};return{[this.event.class]:!!this.event.class,"vuecal__event--focus":this.event.focused,"vuecal__event--resizing":this.event.resizing,"vuecal__event--background":this.event.background,"vuecal__event--deletable":this.event.deleting,"vuecal__event--all-day":this.event.allDay,"vuecal__event--dragging":!this.event.draggingStatic&&this.event.dragging,"vuecal__event--static":this.event.dragging&&this.event.draggingStatic,"vuecal__event--multiple-days":!!this.segment,"event-start":this.segment&&e&&!t,"event-middle":this.segment&&!e&&!t,"event-end":this.segment&&t&&!e}},segment(){return this.event.segments&&this.event.segments[this.cellFormattedDate]||null},draggable(){const{draggable:e,background:t,daysCount:s}=this.event;return this.vuecal.editEvents.drag&&e&&!t&&s===1},resizable(){const{editEvents:e,time:t}=this.vuecal;return e.resize&&this.event.resizable&&t&&!this.allDay&&(!this.segment||this.segment&&this.segment.isLastDay)&&this.view.id!=="month"},dnd(){return this.modules.dnd}}},Hn=$t(Rn,[["render",Un]]),Bn=["data-split","aria-label","onTouchstart","onMousedown","onDragover","onDrop"],zn={key:0,class:"cell-time-labels"},Gn=["innerHTML"],qn={key:2,class:"vuecal__cell-events"},Zn=["title"];function Kn(e,t,s,a,i,n){const o=pt("event");return u(),ue(Wi,{class:ie(["vuecal__cell",n.cellClasses]),name:`slide-fade--${n.transitionDirection}`,tag:"div",appear:s.options.transitions,style:Ae(n.cellStyles)},{default:V(()=>[(u(!0),m(te,null,oe(n.splitsCount?n.splits:1,(r,c)=>(u(),m("div",{class:ie(["vuecal__flex vuecal__cell-content",n.splitsCount&&n.splitClasses(r)]),key:s.options.transitions?`${n.view.id}-${s.data.content}-${c}`:c,"data-split":n.splitsCount?r.id:!1,column:"",tabindex:"0","aria-label":s.data.content,onFocus:t[0]||(t[0]=d=>n.onCellFocus(d)),onKeypress:t[1]||(t[1]=Et(d=>n.onCellkeyPressEnter(d),["enter"])),onTouchstart:d=>!n.isDisabled&&n.onCellTouchStart(d,n.splitsCount?r.id:null),onMousedown:d=>!n.isDisabled&&n.onCellMouseDown(d,n.splitsCount?r.id:null),onClick:t[2]||(t[2]=d=>!n.isDisabled&&n.onCellClick(d)),onDblclick:t[3]||(t[3]=d=>!n.isDisabled&&n.onCellDblClick(d)),onContextmenu:t[4]||(t[4]=d=>!n.isDisabled&&s.options.cellContextmenu&&n.onCellContextMenu(d)),onDragenter:t[5]||(t[5]=d=>!n.isDisabled&&s.editEvents.drag&&n.dnd&&n.dnd.cellDragEnter(d,e.$data,s.data.startDate)),onDragover:d=>!n.isDisabled&&s.editEvents.drag&&n.dnd&&n.dnd.cellDragOver(d,e.$data,s.data.startDate,n.splitsCount?r.id:null),onDragleave:t[6]||(t[6]=d=>!n.isDisabled&&s.editEvents.drag&&n.dnd&&n.dnd.cellDragLeave(d,e.$data,s.data.startDate)),onDrop:d=>!n.isDisabled&&s.editEvents.drag&&n.dnd&&n.dnd.cellDragDrop(d,e.$data,s.data.startDate,n.splitsCount?r.id:null)},[s.options.showTimeInCells&&s.options.time&&n.isWeekOrDayView&&!s.allDay?(u(),m("div",zn,[(u(!0),m(te,null,oe(n.vuecal.timeCells,(d,h)=>(u(),m("span",{class:"cell-time-label",key:h},y(d.label),1))),128))])):S("",!0),n.isWeekOrDayView&&!s.allDay&&n.specialHours.length?(u(!0),m(te,{key:1},oe(n.specialHours,(d,h)=>(u(),m("div",{class:ie(["vuecal__special-hours",`vuecal__special-hours--day${d.day} ${d.class}`]),style:Ae(`height: ${d.height}px;top: ${d.top}px`)},[d.label?(u(),m("div",{key:0,class:"special-hours-label",innerHTML:d.label},null,8,Gn)):S("",!0)],6))),256)):S("",!0),de(e.$slots,"cell-content",{events:n.events,selectCell:d=>n.selectCell(d,!0),split:n.splitsCount?r:!1}),n.eventsCount&&(n.isWeekOrDayView||n.view.id==="month"&&s.options.eventsOnMonthView)?(u(),m("div",qn,[(u(!0),m(te,null,oe(n.splitsCount?r.events:n.events,(d,h)=>(u(),ue(o,{key:h,"cell-formatted-date":s.data.formattedDate,event:d,"all-day":s.allDay,"cell-events":n.splitsCount?r.events:n.events,overlaps:((n.splitsCount?r.overlaps[d._eid]:e.cellOverlaps[d._eid])||[]).overlaps,"event-position":((n.splitsCount?r.overlaps[d._eid]:e.cellOverlaps[d._eid])||[]).position,"overlaps-streak":n.splitsCount?r.overlapsStreak:e.cellOverlapsStreak},{event:V(({event:v,view:p})=>[de(e.$slots,"event",{view:p,event:v})]),_:2},1032,["cell-formatted-date","event","all-day","cell-events","overlaps","event-position","overlaps-streak"]))),128))])):S("",!0)],42,Bn))),128)),n.timelineVisible?(u(),m("div",{class:"vuecal__now-line",style:Ae(`top: ${n.todaysTimePosition}px`),key:s.options.transitions?`${n.view.id}-now-line`:"now-line",title:n.utils.date.formatTime(n.vuecal.now)},null,12,Zn)):S("",!0)]),_:3},8,["class","name","appear","style"])}const Jn={inject:["vuecal","utils","modules","view","domEvents"],components:{Event:Hn},props:{options:{type:Object,default:()=>({})},editEvents:{type:Object,required:!0},data:{type:Object,required:!0},cellSplits:{type:Array,default:()=>[]},minTimestamp:{type:[Number,null],default:null},maxTimestamp:{type:[Number,null],default:null},cellWidth:{type:[Number,Boolean],default:!1},allDay:{type:Boolean,default:!1}},data:()=>({cellOverlaps:{},cellOverlapsStreak:1,timeAtCursor:null,highlighted:!1,highlightedSplit:null}),methods:{getSplitAtCursor({target:e}){let s=e.classList.contains("vuecal__cell-split")?e:this.vuecal.findAncestor(e,"vuecal__cell-split");return s&&(s=s.attributes["data-split"].value,parseInt(s).toString()===s.toString()&&(s=parseInt(s))),s||null},splitClasses(e){return{"vuecal__cell-split":!0,"vuecal__cell-split--highlighted":this.highlightedSplit===e.id,[e.class]:!!e.class}},checkCellOverlappingEvents(){this.options.time&&this.eventsCount&&!this.splitsCount&&(this.eventsCount===1?(this.cellOverlaps=[],this.cellOverlapsStreak=1):[this.cellOverlaps,this.cellOverlapsStreak]=this.utils.event.checkCellOverlappingEvents(this.events,this.options))},isDOMElementAnEvent(e){return this.vuecal.isDOMElementAnEvent(e)},selectCell(e,t=!1){const s=this.splitsCount?this.getSplitAtCursor(e):null;this.utils.cell.selectCell(t,this.timeAtCursor,s),this.timeAtCursor=null},onCellkeyPressEnter(e){this.isSelected||this.onCellFocus(e);const t=this.splitsCount?this.getSplitAtCursor(e):null;this.utils.cell.keyPressEnterCell(this.timeAtCursor,t),this.timeAtCursor=null},onCellFocus(e){if(!this.isSelected&&!this.isDisabled){this.isSelected=this.data.startDate;const t=this.splitsCount?this.getSplitAtCursor(e):null,s=this.timeAtCursor||this.data.startDate;this.vuecal.$emit("cell-focus",t?{date:s,split:t}:s)}},onCellMouseDown(e,t=null,s=!1){if("ontouchstart"in window&&!s)return!1;this.isSelected||this.onCellFocus(e);const{clickHoldACell:a,focusAnEvent:i}=this.domEvents;this.domEvents.cancelClickEventCreation=!1,a.eventCreated=!1,this.timeAtCursor=new Date(this.data.startDate);const{minutes:n,cursorCoords:{y:o}}=this.vuecal.minutesAtCursor(e);this.timeAtCursor.setMinutes(n);const r=this.isDOMElementAnEvent(e.target);!r&&i._eid&&((this.view.events.find(c=>c._eid===i._eid)||{}).focused=!1),this.editEvents.create&&!r&&this.setUpEventCreation(e,o)},setUpEventCreation(e,t){if(this.options.dragToCreateEvent&&["week","day"].includes(this.view.id)){const{dragCreateAnEvent:s}=this.domEvents;if(s.startCursorY=t,s.split=this.splitsCount?this.getSplitAtCursor(e):null,s.start=this.timeAtCursor,this.options.snapToTime){let a=this.timeAtCursor.getHours()*60+this.timeAtCursor.getMinutes();const i=a+this.options.snapToTime/2;a=i-i%this.options.snapToTime,s.start.setHours(0,a,0,0)}}else this.options.cellClickHold&&["month","week","day"].includes(this.view.id)&&this.setUpCellHoldTimer(e)},setUpCellHoldTimer(e){const{clickHoldACell:t}=this.domEvents;t.cellId=`${this.vuecal._.uid}_${this.data.formattedDate}`,t.split=this.splitsCount?this.getSplitAtCursor(e):null,t.timeoutId=setTimeout(()=>{if(t.cellId&&!this.domEvents.cancelClickEventCreation){const{_eid:s}=this.utils.event.createAnEvent(this.timeAtCursor,null,t.split?{split:t.split}:{});t.eventCreated=s}},t.timeout)},onCellTouchStart(e,t=null){this.onCellMouseDown(e,t,!0)},onCellClick(e){this.isDOMElementAnEvent(e.target)||this.selectCell(e)},onCellDblClick(e){const t=new Date(this.data.startDate);t.setMinutes(this.vuecal.minutesAtCursor(e).minutes);const s=this.splitsCount?this.getSplitAtCursor(e):null;this.vuecal.$emit("cell-dblclick",s?{date:t,split:s}:t),this.options.dblclickToNavigate&&this.vuecal.switchToNarrowerView()},onCellContextMenu(e){e.stopPropagation(),e.preventDefault();const t=new Date(this.data.startDate),{cursorCoords:s,minutes:a}=this.vuecal.minutesAtCursor(e);t.setMinutes(a);const i=this.splitsCount?this.getSplitAtCursor(e):null;this.vuecal.$emit("cell-contextmenu",{date:t,...s,...i||{},e})}},computed:{dnd(){return this.modules.dnd},nowInMinutes(){return this.utils.date.dateToMinutes(this.vuecal.now)},isBeforeMinDate(){return this.minTimestamp!==null&&this.minTimestamp>this.data.endDate.getTime()},isAfterMaxDate(){return this.maxTimestamp&&this.maxTimestamp<this.data.startDate.getTime()},isDisabled(){const{disableDays:e}=this.options,{isYearsOrYearView:t}=this.vuecal;return e.length&&e.includes(this.data.formattedDate)&&!t?!0:this.isBeforeMinDate||this.isAfterMaxDate},isSelected:{get(){let e=!1;const{selectedDate:t}=this.view;return this.view.id==="years"?e=t.getFullYear()===this.data.startDate.getFullYear():this.view.id==="year"?e=t.getFullYear()===this.data.startDate.getFullYear()&&t.getMonth()===this.data.startDate.getMonth():e=t.getTime()===this.data.startDate.getTime(),e},set(e){this.view.selectedDate=e,this.vuecal.$emit("update:selected-date",this.view.selectedDate)}},isWeekOrDayView(){return["week","day"].includes(this.view.id)},transitionDirection(){return this.vuecal.transitionDirection},specialHours(){return this.data.specialHours.map(e=>{let{from:t,to:s}=e;return t=Math.max(t,this.options.timeFrom),s=Math.min(s,this.options.timeTo),{...e,height:(s-t)*this.timeScale,top:(t-this.options.timeFrom)*this.timeScale}})},events(){const{startDate:e,endDate:t}=this.data;let s=[];if(!(["years","year"].includes(this.view.id)&&!this.options.eventsCountOnYearView)){if(s=this.view.events.slice(0),this.view.id==="month"&&s.push(...this.view.outOfScopeEvents),s=s.filter(a=>this.utils.event.eventInRange(a,e,t)),this.options.showAllDayEvents&&this.view.id!=="month"&&(s=s.filter(a=>!!a.allDay===this.allDay)),this.options.time&&this.isWeekOrDayView&&!this.allDay){const{timeFrom:a,timeTo:i}=this.options;s=s.filter(n=>{const o=n.daysCount>1&&n.segments[this.data.formattedDate]||{},r=n.daysCount===1&&n.startTimeMinutes<i&&n.endTimeMinutes>a,c=n.daysCount>1&&o.startTimeMinutes<i&&o.endTimeMinutes>a;return n.allDay||r||c||!1})}this.options.time&&this.isWeekOrDayView&&!(this.options.showAllDayEvents&&this.allDay)&&s.sort((a,i)=>a.start<i.start?-1:1),this.cellSplits.length||this.$nextTick(this.checkCellOverlappingEvents)}return s},eventsCount(){return this.events.length},splits(){return this.cellSplits.map((e,t)=>{const s=this.events.filter(n=>n.split===e.id),[a,i]=this.utils.event.checkCellOverlappingEvents(s.filter(n=>!n.background&&!n.allDay),this.options);return{...e,overlaps:a,overlapsStreak:i,events:s}})},splitsCount(){return this.splits.length},cellClasses(){return{[this.data.class]:!!this.data.class,"vuecal__cell--current":this.data.current,"vuecal__cell--today":this.data.today,"vuecal__cell--out-of-scope":this.data.outOfScope,"vuecal__cell--before-min":this.isDisabled&&this.isBeforeMinDate,"vuecal__cell--after-max":this.isDisabled&&this.isAfterMaxDate,"vuecal__cell--disabled":this.isDisabled,"vuecal__cell--selected":this.isSelected,"vuecal__cell--highlighted":this.highlighted,"vuecal__cell--has-splits":this.splitsCount,"vuecal__cell--has-events":this.eventsCount}},cellStyles(){return{...this.cellWidth?{width:`${this.cellWidth}%`}:{}}},timelineVisible(){const{time:e,timeTo:t}=this.options;return this.data.today&&this.isWeekOrDayView&&e&&!this.allDay&&this.nowInMinutes<=t},todaysTimePosition(){if(!this.data.today||!this.options.time)return;const e=this.nowInMinutes-this.options.timeFrom;return Math.round(e*this.timeScale)},timeScale(){return this.options.timeCellHeight/this.options.timeStep}}},ja=$t(Jn,[["render",Kn]]),Xn={key:0,class:"vuecal__all-day-text",style:{width:"3em"}};function Qn(e,t,s,a,i,n){const o=pt("vuecal-cell");return u(),m("div",{class:"vuecal__flex vuecal__all-day",style:Ae(s.cellOrSplitMinWidth&&{height:s.height})},[s.cellOrSplitMinWidth?S("",!0):(u(),m("div",Xn,[l("span",null,y(s.label),1)])),l("div",{class:ie(["vuecal__flex vuecal__cells",`${n.view.id}-view`]),grow:"",style:Ae(s.cellOrSplitMinWidth?`min-width: ${s.cellOrSplitMinWidth}px`:"")},[(u(!0),m(te,null,oe(s.cells,(r,c)=>(u(),ue(o,{key:c,options:s.options,"edit-events":n.editEvents,data:r,"all-day":!0,"cell-width":s.options.hideWeekdays.length&&(n.vuecal.isWeekView||n.vuecal.isMonthView)&&n.vuecal.cellWidth,"min-timestamp":s.options.minTimestamp,"max-timestamp":s.options.maxTimestamp,"cell-splits":s.daySplits},{event:V(({event:d,view:h})=>[de(e.$slots,"event",{view:h,event:d})]),_:2},1032,["options","edit-events","data","cell-width","min-timestamp","max-timestamp","cell-splits"]))),128))],6)],4)}const el={inject:["vuecal","view","editEvents"],components:{"vuecal-cell":ja},props:{options:{type:Object,required:!0},cells:{type:Array,required:!0},label:{type:String,required:!0},daySplits:{type:Array,default:()=>[]},shortEvents:{type:Boolean,default:!0},height:{type:String,default:""},cellOrSplitMinWidth:{type:Number,default:null}},computed:{hasCellOrSplitWidth(){return!!(this.options.minCellWidth||this.daySplits.length&&this.options.minSplitWidth)}}},tl=$t(el,[["render",Qn]]),sl=["lang"],al={class:"default"},il={key:0,class:"vuecal__flex vuecal__body",grow:""},nl=["onBlur","innerHTML"],ll=["innerHTML"],ol=["innerHTML"],rl={class:"vuecal__flex",row:"",grow:""},dl={key:0,class:"vuecal__time-column"},ul={class:"vuecal__time-cell-label"},cl={key:1,class:"vuecal__flex vuecal__week-numbers",column:""},ml=["wrap","column"],hl=["onBlur","innerHTML"],vl=["innerHTML"],fl=["innerHTML"],pl=["wrap"],yl=["innerHTML"],gl=["innerHTML"],wl={key:2,class:"vuecal__cell-events-count"},_l={key:3,class:"vuecal__no-event"},bl=["onBlur","innerHTML"],kl=["innerHTML"],xl={key:2,class:"vuecal__event-time"},Dl={key:0},Ml={key:1,class:"days-to-end"},Sl=["innerHTML"],Tl={key:0,class:"vuecal__scrollbar-check"};function Cl(e,t,s,a,i,n){const o=pt("vuecal-header"),r=pt("all-day-bar"),c=pt("weekdays-headings"),d=pt("vuecal-cell");return u(),m("div",{class:ie(["vuecal__flex vuecal",n.cssClasses]),column:"",ref:"vuecal",lang:s.locale},[f(o,{options:e.$props,"edit-events":n.editEvents,"view-props":{views:n.views,weekDaysInHeader:n.weekDaysInHeader},"week-days":n.weekDays,"has-splits":n.hasSplits,"day-splits":n.daySplits,"switch-to-narrower-view":n.switchToNarrowerView},Cs({"arrow-prev":V(()=>[de(e.$slots,"arrow-prev",{},()=>[t[0]||(t[0]=W(" ")),t[1]||(t[1]=l("i",{class:"angle"},null,-1)),t[2]||(t[2]=W(" "))])]),"arrow-next":V(()=>[de(e.$slots,"arrow-next",{},()=>[t[3]||(t[3]=W(" ")),t[4]||(t[4]=l("i",{class:"angle"},null,-1)),t[5]||(t[5]=W(" "))])]),"today-button":V(()=>[de(e.$slots,"today-button",{},()=>[l("span",al,y(i.texts.today),1)])]),title:V(()=>[de(e.$slots,"title",{title:n.viewTitle,view:i.view},()=>[W(y(n.viewTitle),1)])]),_:2},[e.$slots["weekday-heading"]?{name:"weekday-heading",fn:V(({heading:h,view:v})=>[de(e.$slots,"weekday-heading",{heading:h,view:v})]),key:"0"}:void 0,e.$slots["split-label"]?{name:"split-label",fn:V(({split:h})=>[de(e.$slots,"split-label",{split:h,view:i.view.id})]),key:"1"}:void 0]),1032,["options","edit-events","view-props","week-days","has-splits","day-splits","switch-to-narrower-view"]),s.hideBody?S("",!0):(u(),m("div",il,[f(Rt,{name:`slide-fade--${i.transitionDirection}`,appear:s.transitions},{default:V(()=>[(u(),m("div",{class:"vuecal__flex",style:{"min-width":"100%"},key:s.transitions?i.view.id:!1,column:""},[s.showAllDayEvents&&n.hasTimeColumn&&(!n.cellOrSplitMinWidth||n.isDayView&&!s.minSplitWidth)?(u(),ue(r,ca(ma({key:0},n.allDayBar)),{event:V(({event:h,view:v})=>[de(e.$slots,"event",{view:v,event:h},()=>[n.editEvents.title&&h.titleEditable?(u(),m("div",{key:0,class:"vuecal__event-title vuecal__event-title--edit",contenteditable:"",onBlur:p=>n.onEventTitleBlur(p,h),innerHTML:h.title},null,40,nl)):h.title?(u(),m("div",{key:1,class:"vuecal__event-title",innerHTML:h.title},null,8,ll)):S("",!0),h.content&&!n.hasShortEvents&&!n.isShortMonthView?(u(),m("div",{key:2,class:"vuecal__event-content",innerHTML:h.content},null,8,ol)):S("",!0)])]),_:3},16)):S("",!0),l("div",{class:ie(["vuecal__bg",{vuecal__flex:!n.hasTimeColumn}]),column:""},[l("div",rl,[n.hasTimeColumn?(u(),m("div",dl,[s.showAllDayEvents&&n.cellOrSplitMinWidth&&!(n.isDayView&&!s.minSplitWidth)?(u(),m("div",{key:0,class:"vuecal__all-day-text",style:Ae({height:n.allDayBar.height})},[l("span",null,y(i.texts.allDay),1)],4)):S("",!0),(u(!0),m(te,null,oe(n.timeCells,(h,v)=>(u(),m("div",{class:"vuecal__time-cell",key:v,style:Ae(`height: ${s.timeCellHeight}px`)},[de(e.$slots,"time-cell",{hours:h.hours,minutes:h.minutes},()=>[t[6]||(t[6]=l("span",{class:"vuecal__time-cell-line"},null,-1)),l("span",ul,y(h.label),1)])],4))),128))])):S("",!0),s.showWeekNumbers&&n.isMonthView?(u(),m("div",cl,[(u(),m(te,null,oe(6,h=>l("div",{class:"vuecal__flex vuecal__week-number-cell",key:h,grow:""},[de(e.$slots,"week-number-cell",{week:n.getWeekNumber(h-1)},()=>[W(y(n.getWeekNumber(h-1)),1)])])),64))])):S("",!0),l("div",{class:ie(["vuecal__flex vuecal__cells",`${i.view.id}-view`]),grow:"",wrap:!n.cellOrSplitMinWidth||!n.isWeekView,column:!!n.cellOrSplitMinWidth},[n.cellOrSplitMinWidth&&n.isWeekView?(u(),ue(c,{key:0,"transition-direction":i.transitionDirection,"week-days":n.weekDays,"switch-to-narrower-view":n.switchToNarrowerView,style:Ae(n.cellOrSplitMinWidth?`min-width: ${n.cellOrSplitMinWidth}px`:"")},Cs({_:2},[e.$slots["weekday-heading"]?{name:"weekday-heading",fn:V(({heading:h,view:v})=>[de(e.$slots,"weekday-heading",{heading:h,view:v})]),key:"0"}:void 0,e.$slots["split-label"]?{name:"split-label",fn:V(({split:h})=>[de(e.$slots,"split-label",{split:h,view:i.view.id})]),key:"1"}:void 0]),1032,["transition-direction","week-days","switch-to-narrower-view","style"])):n.hasSplits&&s.stickySplitLabels&&s.minSplitWidth?(u(),m("div",{key:1,class:"vuecal__flex vuecal__split-days-headers",style:Ae(n.cellOrSplitMinWidth?`min-width: ${n.cellOrSplitMinWidth}px`:"")},[(u(!0),m(te,null,oe(n.daySplits,(h,v)=>(u(),m("div",{class:ie(["day-split-header",h.class||!1]),key:v},[de(e.$slots,"split-label",{split:h,view:i.view.id},()=>[W(y(h.label),1)])],2))),128))],4)):S("",!0),s.showAllDayEvents&&n.hasTimeColumn&&(n.isWeekView&&n.cellOrSplitMinWidth||n.isDayView&&n.hasSplits&&s.minSplitWidth)?(u(),ue(r,ca(ma({key:2},n.allDayBar)),{event:V(({event:h,view:v})=>[de(e.$slots,"event",{view:v,event:h},()=>[n.editEvents.title&&h.titleEditable?(u(),m("div",{key:0,class:"vuecal__event-title vuecal__event-title--edit",contenteditable:"",onBlur:p=>n.onEventTitleBlur(p,h),innerHTML:h.title},null,40,hl)):h.title?(u(),m("div",{key:1,class:"vuecal__event-title",innerHTML:h.title},null,8,vl)):S("",!0),h.content&&!n.hasShortEvents&&!n.isShortMonthView?(u(),m("div",{key:2,class:"vuecal__event-content",innerHTML:h.content},null,8,fl)):S("",!0)])]),_:3},16)):S("",!0),l("div",{class:"vuecal__flex",ref:h=>i.cellsEl=h,grow:"",wrap:!n.cellOrSplitMinWidth||!n.isWeekView,style:Ae(n.cellOrSplitMinWidth?`min-width: ${n.cellOrSplitMinWidth}px`:"")},[(u(!0),m(te,null,oe(n.viewCells,(h,v)=>(u(),ue(d,{key:v,options:e.$props,"edit-events":n.editEvents,data:h,"cell-width":s.hideWeekdays.length&&(n.isWeekView||n.isMonthView)&&n.cellWidth,"min-timestamp":n.minTimestamp,"max-timestamp":n.maxTimestamp,"cell-splits":n.hasSplits&&n.daySplits||[]},{"cell-content":V(({events:p,split:_,selectCell:g})=>[de(e.$slots,"cell-content",{cell:h,view:i.view,goNarrower:g,events:p},()=>[_&&!s.stickySplitLabels?(u(),m("div",{key:0,class:"split-label",innerHTML:_.label},null,8,yl)):S("",!0),h.content?(u(),m("div",{key:1,class:"vuecal__cell-date",innerHTML:h.content},null,8,gl)):S("",!0),(n.isMonthView&&!s.eventsOnMonthView||n.isYearsOrYearView&&s.eventsCountOnYearView)&&p.length?(u(),m("div",wl,[de(e.$slots,"events-count",{view:i.view,events:p},()=>[W(y(p.length),1)])])):S("",!0),!n.cellOrSplitHasEvents(p,_)&&n.isWeekOrDayView?(u(),m("div",_l,[de(e.$slots,"no-event",{},()=>[W(y(i.texts.noEvent),1)])])):S("",!0)])]),event:V(({event:p,view:_})=>[de(e.$slots,"event",{view:_,event:p},()=>[n.editEvents.title&&p.titleEditable?(u(),m("div",{key:0,class:"vuecal__event-title vuecal__event-title--edit",contenteditable:"",onBlur:g=>n.onEventTitleBlur(g,p),innerHTML:p.title},null,40,bl)):p.title?(u(),m("div",{key:1,class:"vuecal__event-title",innerHTML:p.title},null,8,kl)):S("",!0),s.time&&!p.allDay&&!(n.isMonthView&&(p.allDay||s.showAllDayEvents==="short"))&&!n.isShortMonthView?(u(),m("div",xl,[W(y(i.utils.date.formatTime(p.start,n.TimeFormat)),1),p.endTimeMinutes?(u(),m("span",Dl," - "+y(i.utils.date.formatTime(p.end,n.TimeFormat,null,!0)),1)):S("",!0),p.daysCount>1&&(p.segments[h.formattedDate]||{}).isFirstDay?(u(),m("small",Ml," +"+y(p.daysCount-1)+y((i.texts.day[0]||"").toLowerCase()),1)):S("",!0)])):S("",!0),p.content&&!(n.isMonthView&&p.allDay&&s.showAllDayEvents==="short")&&!n.isShortMonthView?(u(),m("div",{key:3,class:"vuecal__event-content",innerHTML:p.content},null,8,Sl)):S("",!0)])]),"no-event":V(()=>[de(e.$slots,"no-event",{},()=>[W(y(i.texts.noEvent),1)])]),_:2},1032,["options","edit-events","data","cell-width","min-timestamp","max-timestamp","cell-splits"]))),128))],12,pl)],10,ml)])],2)]))]),_:3},8,["name","appear"]),i.ready?S("",!0):(u(),m("div",Tl,t[7]||(t[7]=[l("div",null,null,-1)])))]))],10,sl)}const Nt=1440,ss={weekDays:Array(7).fill(""),weekDaysShort:[],months:Array(12).fill(""),years:"",year:"",month:"",week:"",day:"",today:"",noEvent:"",allDay:"",deleteEvent:"",createEvent:"",dateFormat:"dddd MMMM D, YYYY",am:"am",pm:"pm"},ya=["years","year","month","week","day"],ga=new fn(ss),El={name:"vue-cal",components:{"vuecal-cell":ja,"vuecal-header":Wn,WeekdaysHeadings:Ea,AllDayBar:tl},provide(){return{vuecal:this,utils:this.utils,modules:this.modules,previous:this.previous,next:this.next,switchView:this.switchView,updateSelectedDate:this.updateSelectedDate,editEvents:this.editEvents,view:this.view,domEvents:this.domEvents}},props:{activeView:{type:String,default:"week"},allDayBarHeight:{type:[String,Number],default:"25px"},cellClickHold:{type:Boolean,default:!0},cellContextmenu:{type:Boolean,default:!1},clickToNavigate:{type:Boolean,default:!1},dblclickToNavigate:{type:Boolean,default:!0},disableDatePrototypes:{type:Boolean,default:!1},disableDays:{type:Array,default:()=>[]},disableViews:{type:Array,default:()=>[]},dragToCreateEvent:{type:Boolean,default:!0},dragToCreateThreshold:{type:Number,default:15},editableEvents:{type:[Boolean,Object],default:!1},events:{type:Array,default:()=>[]},eventsCountOnYearView:{type:Boolean,default:!1},eventsOnMonthView:{type:[Boolean,String],default:!1},hideBody:{type:Boolean,default:!1},hideTitleBar:{type:Boolean,default:!1},hideViewSelector:{type:Boolean,default:!1},hideWeekdays:{type:Array,default:()=>[]},hideWeekends:{type:Boolean,default:!1},locale:{type:[String,Object],default:"en"},maxDate:{type:[String,Date],default:""},minCellWidth:{type:Number,default:0},minDate:{type:[String,Date],default:""},minEventWidth:{type:Number,default:0},minSplitWidth:{type:Number,default:0},onEventClick:{type:[Function,null],default:null},onEventCreate:{type:[Function,null],default:null},onEventDblclick:{type:[Function,null],default:null},overlapsPerTimeStep:{type:Boolean,default:!1},resizeX:{type:Boolean,default:!1},selectedDate:{type:[String,Date],default:""},showAllDayEvents:{type:[Boolean,String],default:!1},showTimeInCells:{type:Boolean,default:!1},showWeekNumbers:{type:[Boolean,String],default:!1},snapToTime:{type:Number,default:0},small:{type:Boolean,default:!1},specialHours:{type:Object,default:()=>({})},splitDays:{type:Array,default:()=>[]},startWeekOnSunday:{type:Boolean,default:!1},stickySplitLabels:{type:Boolean,default:!1},time:{type:Boolean,default:!0},timeCellHeight:{type:Number,default:40},timeFormat:{type:String,default:""},timeFrom:{type:Number,default:0},timeStep:{type:Number,default:60},timeTo:{type:Number,default:Nt},todayButton:{type:Boolean,default:!1},transitions:{type:Boolean,default:!0},twelveHour:{type:Boolean,default:!1},watchRealTime:{type:Boolean,default:!1},xsmall:{type:Boolean,default:!1}},data(){return{ready:!1,texts:{...ss},utils:{date:(this.disableDatePrototypes?ga.removePrototypes():!1)||ga,cell:null,event:null},modules:{dnd:null},cellsEl:null,view:{id:"",title:"",startDate:null,endDate:null,firstCellDate:null,lastCellDate:null,selectedDate:null,events:[]},eventIdIncrement:1,now:new Date,timeTickerIds:[null,null],domEvents:{resizeAnEvent:{_eid:null,start:null,split:null,segment:null,originalEndTimeMinutes:0,originalEnd:null,end:null,startCell:null,endCell:null},dragAnEvent:{_eid:null},dragCreateAnEvent:{startCursorY:null,start:null,split:null,event:null},focusAnEvent:{_eid:null,mousedUp:!1},clickHoldAnEvent:{_eid:null,timeout:1200,timeoutId:null},dblTapACell:{taps:0,timeout:500},clickHoldACell:{cellId:null,split:null,timeout:1200,timeoutId:null,eventCreated:!1},cancelClickEventCreation:!1},mutableEvents:[],transitionDirection:"right"}},methods:{async loadLocale(e){if(typeof this.locale=="object"){this.texts=Object.assign({},ss,e),this.utils.date.updateTexts(this.texts);return}const t=await vn(Object.assign({"./i18n/ar.json":()=>ee(()=>import("./ar.es-bitOgb9K.js"),[]),"./i18n/bg.json":()=>ee(()=>import("./bg.es-5tp0KQRo.js"),[]),"./i18n/bn.json":()=>ee(()=>import("./bn.es-C_qR0y0-.js"),[]),"./i18n/bs.json":()=>ee(()=>import("./bs.es-DduooXS8.js"),[]),"./i18n/ca.json":()=>ee(()=>import("./ca.es-DYDNDJFJ.js"),[]),"./i18n/cs.json":()=>ee(()=>import("./cs.es-CvnAvfoI.js"),[]),"./i18n/da.json":()=>ee(()=>import("./da.es-C_eJXDX3.js"),[]),"./i18n/de.json":()=>ee(()=>import("./de.es-Cp-R9E16.js"),[]),"./i18n/el.json":()=>ee(()=>import("./el.es-BZ44a1Tb.js"),[]),"./i18n/en.json":()=>ee(()=>import("./en.es-DwVNOttH.js"),[]),"./i18n/es.json":()=>ee(()=>import("./es.es-DO8PaQ_q.js"),[]),"./i18n/et.json":()=>ee(()=>import("./et.es-DdRIcUrz.js"),[]),"./i18n/fa.json":()=>ee(()=>import("./fa.es-XN0av8Tx.js"),[]),"./i18n/fi.json":()=>ee(()=>import("./fi.es-B0Iy6aas.js"),[]),"./i18n/fr.json":()=>ee(()=>import("./fr.es-B7WXlprl.js"),[]),"./i18n/he.json":()=>ee(()=>import("./he.es-BWEk5prp.js"),[]),"./i18n/hr.json":()=>ee(()=>import("./hr.es-B_iqHQyr.js"),[]),"./i18n/hu.json":()=>ee(()=>import("./hu.es-D_t4Ibxf.js"),[]),"./i18n/id.json":()=>ee(()=>import("./id.es-CzHAK-XV.js"),[]),"./i18n/is.json":()=>ee(()=>import("./is.es-DChRpym4.js"),[]),"./i18n/it.json":()=>ee(()=>import("./it.es-CquQA5xx.js"),[]),"./i18n/ja.json":()=>ee(()=>import("./ja.es-B19gsG6H.js"),[]),"./i18n/ka.json":()=>ee(()=>import("./ka.es-CuOe65jc.js"),[]),"./i18n/ko.json":()=>ee(()=>import("./ko.es-CsMl2USK.js"),[]),"./i18n/lt.json":()=>ee(()=>import("./lt.es-vqgjGyMx.js"),[]),"./i18n/mn.json":()=>ee(()=>import("./mn.es-BmdwFdas.js"),[]),"./i18n/nl.json":()=>ee(()=>import("./nl.es-CFxVMCWy.js"),[]),"./i18n/no.json":()=>ee(()=>import("./no.es-qRcuRMwl.js"),[]),"./i18n/pl.json":()=>ee(()=>import("./pl.es-BQ3a0ltx.js"),[]),"./i18n/pt-br.json":()=>ee(()=>import("./pt-br.es-U9bVHsgs.js"),[]),"./i18n/pt-pt.json":()=>ee(()=>import("./pt-pt.es-U9bVHsgs.js"),[]),"./i18n/ro.json":()=>ee(()=>import("./ro.es-ldjMjt3l.js"),[]),"./i18n/ru.json":()=>ee(()=>import("./ru.es-CS-QKsYL.js"),[]),"./i18n/sk.json":()=>ee(()=>import("./sk.es-CAe8sEvL.js"),[]),"./i18n/sl.json":()=>ee(()=>import("./sl.es-rdzOxu_X.js"),[]),"./i18n/sq.json":()=>ee(()=>import("./sq.es-BY5E06HI.js"),[]),"./i18n/sr.json":()=>ee(()=>import("./sr.es-QPseRVBy.js"),[]),"./i18n/sv.json":()=>ee(()=>import("./sv.es-BfPUYcV1.js"),[]),"./i18n/tr.json":()=>ee(()=>import("./tr.es-Cl6kz_IH.js"),[]),"./i18n/uk.json":()=>ee(()=>import("./uk.es-DBEtNQnZ.js"),[]),"./i18n/vi.json":()=>ee(()=>import("./vi.es-Bx2g_1jx.js"),[]),"./i18n/zh-cn.json":()=>ee(()=>import("./zh-cn.es-BWMmCH-R.js"),[]),"./i18n/zh-hk.json":()=>ee(()=>import("./zh-hk.es-DFZ0bKvi.js"),[])}),`./i18n/${e}.json`,3);this.texts=Object.assign({},ss,t),this.utils.date.updateTexts(this.texts)},loadDragAndDrop(){ee(()=>import("./drag-and-drop.es-CbCm7IHa.js"),[]).then(e=>{const{DragAndDrop:t}=e;this.modules.dnd=new t(this)}).catch(()=>console.warn("Vue Cal: Missing drag & drop module."))},validateView(e){return ya.includes(e)||(console.error(`Vue Cal: invalid active-view parameter provided: "${e}".
A valid view must be one of: ${ya.join(", ")}.`),e="week"),this.enabledViews.includes(e)||(console.warn(`Vue Cal: the provided active-view "${e}" is disabled. Using the "${this.enabledViews[0]}" view instead.`),e=this.enabledViews[0]),e},switchToNarrowerView(e=null){this.transitionDirection="right";const t=this.enabledViews[this.enabledViews.indexOf(this.view.id)+1];t&&this.switchView(t,e)},switchView(e,t=null,s=!1){e=this.validateView(e);const a=this.utils.date,i=this.view.startDate&&this.view.startDate.getTime();if(this.transitions&&s){if(this.view.id===e)return;const r=this.enabledViews;this.transitionDirection=r.indexOf(this.view.id)>r.indexOf(e)?"left":"right"}const n=this.view.id;switch(this.view.events=[],this.view.id=e,this.view.firstCellDate=null,this.view.lastCellDate=null,t||(t=this.view.selectedDate||this.view.startDate),e){case"years":{this.view.startDate=new Date(Math.floor(t.getFullYear()/25)*25||2e3,0,1),this.view.endDate=new Date(this.view.startDate.getFullYear()+25,0,1),this.view.endDate.setSeconds(-1);break}case"year":{this.view.startDate=new Date(t.getFullYear(),0,1),this.view.endDate=new Date(t.getFullYear()+1,0,1),this.view.endDate.setSeconds(-1);break}case"month":{this.view.startDate=new Date(t.getFullYear(),t.getMonth(),1),this.view.endDate=new Date(t.getFullYear(),t.getMonth()+1,1),this.view.endDate.setSeconds(-1);let r=new Date(this.view.startDate);if(r.getDay()!==(this.startWeekOnSunday?0:1)&&(r=a.getPreviousFirstDayOfWeek(r,this.startWeekOnSunday)),this.view.firstCellDate=r,this.view.lastCellDate=a.addDays(r,41),this.view.lastCellDate.setHours(23,59,59,0),this.hideWeekends){if([0,6].includes(this.view.firstCellDate.getDay())){const c=this.view.firstCellDate.getDay()===6&&!this.startWeekOnSunday?2:1;this.view.firstCellDate=a.addDays(this.view.firstCellDate,c)}if([0,6].includes(this.view.startDate.getDay())){const c=this.view.startDate.getDay()===6?2:1;this.view.startDate=a.addDays(this.view.startDate,c)}if([0,6].includes(this.view.lastCellDate.getDay())){const c=this.view.lastCellDate.getDay()===0&&!this.startWeekOnSunday?2:1;this.view.lastCellDate=a.subtractDays(this.view.lastCellDate,c)}if([0,6].includes(this.view.endDate.getDay())){const c=this.view.endDate.getDay()===0?2:1;this.view.endDate=a.subtractDays(this.view.endDate,c)}}break}case"week":{t=a.getPreviousFirstDayOfWeek(t,this.startWeekOnSunday);const r=this.hideWeekends?5:7;this.view.startDate=this.hideWeekends&&this.startWeekOnSunday?a.addDays(t,1):t,this.view.startDate.setHours(0,0,0,0),this.view.endDate=a.addDays(t,r),this.view.endDate.setSeconds(-1);break}case"day":{this.view.startDate=t,this.view.startDate.setHours(0,0,0,0),this.view.endDate=new Date(t),this.view.endDate.setHours(23,59,59,0);break}}this.addEventsToView();const o=this.view.startDate&&this.view.startDate.getTime();if(!(n===e&&o===i)&&(this.$emit("update:activeView",e),this.ready)){const r=this.view.startDate,c={view:e,startDate:r,endDate:this.view.endDate,...this.isMonthView?{firstCellDate:this.view.firstCellDate,lastCellDate:this.view.lastCellDate,outOfScopeEvents:this.view.outOfScopeEvents.map(this.cleanupEvent)}:{},events:this.view.events.map(this.cleanupEvent),...this.isWeekView?{week:a.getWeek(this.startWeekOnSunday?a.addDays(r,1):r)}:{}};this.$emit("view-change",c)}},previous(){this.previousNext(!1)},next(){this.previousNext()},previousNext(e=!0){const t=this.utils.date;this.transitionDirection=e?"right":"left";const s=e?1:-1;let a=null;const{startDate:i,id:n}=this.view;switch(n){case"years":a=new Date(i.getFullYear()+25*s,0,1);break;case"year":a=new Date(i.getFullYear()+1*s,1,1);break;case"month":a=new Date(i.getFullYear(),i.getMonth()+1*s,1);break;case"week":a=t[e?"addDays":"subtractDays"](t.getPreviousFirstDayOfWeek(i,this.startWeekOnSunday),7);break;case"day":a=t[e?"addDays":"subtractDays"](i,1);const o=a.getDay(),r=this.startWeekOnSunday?o:(o||7)-1;if(this.weekDays[r].hide){const d=this.weekDays.map((v,p)=>({...v,i:p}));let h=0;e?([...d.slice(r),...d].find(v=>(h++,!v.hide)).i,h--):[...d,...d.slice(0,r)].reverse().find(v=>(h++,!v.hide)).i,a=t[e?"addDays":"subtractDays"](a,h)}break}a&&this.switchView(n,a)},addEventsToView(e=[]){const t=this.utils.event,{startDate:s,endDate:a,firstCellDate:i,lastCellDate:n}=this.view;if(e.length||(this.view.events=[]),e=e.length?e:[...this.mutableEvents],!e||this.isYearsOrYearView&&!this.eventsCountOnYearView)return;let o=e.filter(r=>t.eventInRange(r,s,a));!this.isYearsOrYearView&&!(this.isMonthView&&!this.eventsOnMonthView)&&(o=o.map(r=>r.daysCount>1?t.createEventSegments(r,i||s,n||a):r)),this.view.events.push(...o),this.isMonthView&&(this.view.outOfScopeEvents=[],e.forEach(r=>{(t.eventInRange(r,i,s)||t.eventInRange(r,a,n))&&(this.view.events.some(c=>c._eid===r._eid)||this.view.outOfScopeEvents.push(r))}))},findAncestor(e,t){for(;(e=e.parentElement)&&!e.classList.contains(t););return e},isDOMElementAnEvent(e){return e.classList.contains("vuecal__event")||this.findAncestor(e,"vuecal__event")},onMouseMove(e){const{resizeAnEvent:t,dragAnEvent:s,dragCreateAnEvent:a}=this.domEvents;t._eid===null&&s._eid===null&&!a.start||(e.preventDefault(),t._eid?this.eventResizing(e):this.dragToCreateEvent&&a.start&&this.eventDragCreation(e))},onMouseUp(e){const{focusAnEvent:t,resizeAnEvent:s,clickHoldAnEvent:a,clickHoldACell:i,dragCreateAnEvent:n}=this.domEvents,{_eid:o}=a,{_eid:r}=s;let c=!1;const{event:d,start:h}=n,v=this.isDOMElementAnEvent(e.target),p=t.mousedUp;if(t.mousedUp=!1,v&&(this.domEvents.cancelClickEventCreation=!0),i.eventCreated)return;if(r){const{originalEnd:g,originalEndTimeMinutes:k,endTimeMinutes:D}=s,x=this.view.events.find(N=>N._eid===s._eid);if(c=D&&D!==k,x&&x.end.getTime()!==g.getTime()){const N=this.mutableEvents.find(he=>he._eid===s._eid);N.endTimeMinutes=x.endTimeMinutes,N.end=x.end;const P=this.cleanupEvent(x),$={...this.cleanupEvent(x),end:g,endTimeMinutes:x.originalEndTimeMinutes};this.$emit("event-duration-change",{event:P,oldDate:s.originalEnd,originalEvent:$}),this.$emit("event-change",{event:P,originalEvent:$})}x&&(x.resizing=!1),s._eid=null,s.start=null,s.split=null,s.segment=null,s.originalEndTimeMinutes=null,s.originalEnd=null,s.endTimeMinutes=null,s.startCell=null,s.endCell=null}else h&&(d&&(this.emitWithEvent("event-drag-create",d),n.event.resizing=!1),n.start=null,n.split=null,n.event=null);!v&&!r&&this.unfocusEvent(),a.timeoutId&&!o&&(clearTimeout(a.timeoutId),a.timeoutId=null),i.timeoutId&&(clearTimeout(i.timeoutId),i.timeoutId=null);const _=typeof this.onEventClick=="function";if(p&&!c&&!o&&!d&&_){let g=this.view.events.find(k=>k._eid===t._eid);return!g&&this.isMonthView&&(g=this.view.outOfScopeEvents.find(k=>k._eid===t._eid)),g&&this.onEventClick(g,e)}},onKeyUp(e){e.keyCode===27&&this.cancelDelete()},eventResizing(e){const{resizeAnEvent:t}=this.domEvents,s=this.view.events.find(d=>d._eid===t._eid)||{segments:{}},{minutes:a,cursorCoords:i}=this.minutesAtCursor(e),n=s.segments&&s.segments[t.segment],{date:o,event:r}=this.utils,c=Math.max(a,this.timeFrom+1,(n||s).startTimeMinutes+1);if(s.endTimeMinutes=t.endTimeMinutes=c,this.snapToTime){const d=s.endTimeMinutes+this.snapToTime/2;s.endTimeMinutes=d-d%this.snapToTime}if(n&&(n.endTimeMinutes=s.endTimeMinutes),s.end.setHours(0,s.endTimeMinutes,s.endTimeMinutes===Nt?-1:0,0),this.resizeX&&this.isWeekView){s.daysCount=o.countDays(s.start,s.end);const d=this.cellsEl,h=d.offsetWidth/d.childElementCount,v=Math.floor(i.x/h);if(t.startCell===null&&(t.startCell=v-(s.daysCount-1)),t.endCell!==v){t.endCell=v;const p=o.addDays(s.start,v-t.startCell),_=Math.max(o.countDays(s.start,p),1);if(_!==s.daysCount){let g=null;_>s.daysCount?g=r.addEventSegment(s):g=r.removeEventSegment(s),t.segment=g,s.endTimeMinutes+=.001}}}this.$emit("event-resizing",{_eid:s._eid,end:s.end,endTimeMinutes:s.endTimeMinutes})},eventDragCreation(e){const{dragCreateAnEvent:t}=this.domEvents,{start:s,startCursorY:a,split:i}=t,n=new Date(s),{minutes:o,cursorCoords:{y:r}}=this.minutesAtCursor(e);if(!(!t.event&&Math.abs(a-r)<this.dragToCreateThreshold))if(t.event){if(n.setHours(0,o,o===Nt?-1:0,0),this.snapToTime){let h=n.getHours()*60+n.getMinutes();const v=h+this.snapToTime/2;h=v-v%this.snapToTime,n.setHours(0,h,0,0)}const c=s<n,{event:d}=t;d.start=c?s:n,d.end=c?n:s,d.startTimeMinutes=d.start.getHours()*60+d.start.getMinutes(),d.endTimeMinutes=d.end.getHours()*60+d.end.getMinutes()}else{if(t.event=this.utils.event.createAnEvent(s,1,{split:i}),!t.event){t.start=null,t.split=null,t.event=null;return}t.event.resizing=!0}},unfocusEvent(){const{focusAnEvent:e,clickHoldAnEvent:t}=this.domEvents,s=this.view.events.find(a=>a._eid===(e._eid||t._eid));e._eid=null,t._eid=null,s&&(s.focused=!1,s.deleting=!1)},cancelDelete(){const{clickHoldAnEvent:e}=this.domEvents;if(e._eid){const t=this.view.events.find(s=>s._eid===e._eid);t&&(t.deleting=!1),e._eid=null,e.timeoutId=null}},onEventTitleBlur(e,t){if(t.title===e.target.innerHTML)return;const s=t.title;t.title=e.target.innerHTML;const a=this.cleanupEvent(t);this.$emit("event-title-change",{event:a,oldTitle:s}),this.$emit("event-change",{event:a,originalEvent:{...a,title:s}})},updateMutableEvents(){const e=this.utils.date;this.mutableEvents=[],this.events.forEach(t=>{const s=typeof t.start=="string"?e.stringToDate(t.start):t.start,a=e.formatDateLite(s),i=e.dateToMinutes(s);let n=null;typeof t.end=="string"&&t.end.includes("24:00")?(n=new Date(t.end.replace(" 24:00","")),n.setHours(23,59,59,0)):n=typeof t.end=="string"?e.stringToDate(t.end):t.end;let o=e.formatDateLite(n),r=e.dateToMinutes(n);(!r||r===Nt)&&(!this.time||typeof t.end=="string"&&t.end.length===10?n.setHours(23,59,59,0):n.setSeconds(n.getSeconds()-1),o=e.formatDateLite(n),r=Nt);const c=a!==o;t=Object.assign({...this.utils.event.eventDefaults},t,{_eid:`${this._.uid}_${this.eventIdIncrement++}`,segments:c?{}:null,start:s,startTimeMinutes:i,end:n,endTimeMinutes:r,daysCount:c?e.countDays(s,n):1,class:t.class}),this.mutableEvents.push(t)})},minutesAtCursor(e){return this.utils.cell.minutesAtCursor(e)},createEvent(e,t,s={}){return this.utils.event.createAnEvent(e,t,s)},cleanupEvent(e){return e={...e},["segments","deletable","deleting","titleEditable","resizable","resizing","draggable","dragging","draggingStatic","focused"].forEach(s=>{s in e&&delete e[s]}),e.repeat||delete e.repeat,e},emitWithEvent(e,t){this.$emit(e,this.cleanupEvent(t))},updateSelectedDate(e){if(e&&typeof e=="string"?e=this.utils.date.stringToDate(e):e=new Date(e),e&&e instanceof Date){const{selectedDate:t}=this.view;t&&(this.transitionDirection=t.getTime()>e.getTime()?"left":"right"),e.setHours(0,0,0,0),(!t||t.getTime()!==e.getTime())&&(this.view.selectedDate=e),this.switchView(this.view.id)}this.$emit("update:selected-date",this.view.selectedDate)},getWeekNumber(e){const t=this.utils.date,a=this.firstCellDateWeekNumber+e,i=this.startWeekOnSunday?1:0;return a>52?t.getWeek(t.addDays(this.view.firstCellDate,7*e+i)):a},timeTick(){this.now=new Date,this.timeTickerIds[1]=setTimeout(this.timeTick,60*1e3)},updateDateTexts(){this.utils.date.updateTexts(this.texts)},alignWithScrollbar(){if(document.getElementById("vuecal-align-with-scrollbar"))return;const e=this.$refs.vuecal.getElementsByClassName("vuecal__scrollbar-check")[0],t=e.offsetWidth-e.children[0].offsetWidth;if(t){const s=document.createElement("style");s.id="vuecal-align-with-scrollbar",s.type="text/css",s.innerHTML=`.vuecal--view-with-time .vuecal__weekdays-headings,.vuecal--view-with-time .vuecal__all-day {padding-right: ${t}px}`,document.head.appendChild(s)}},cellOrSplitHasEvents(e,t=null){return e.length&&(!t&&e.length||t&&e.some(s=>s.split===t.id))}},created(){this.utils.cell=new yn(this),this.utils.event=new wn(this,this.utils.date),this.loadLocale(this.locale),this.editEvents.drag&&this.loadDragAndDrop(),this.updateMutableEvents(this.events),this.view.id=this.currentView,this.selectedDate?this.updateSelectedDate(this.selectedDate):(this.view.selectedDate=new Date,this.switchView(this.currentView)),this.time&&this.watchRealTime&&(this.timeTickerIds[0]=setTimeout(this.timeTick,(60-this.now.getSeconds())*1e3))},mounted(){const e=this.utils.date,t="ontouchstart"in window,{resize:s,drag:a,create:i,delete:n,title:o}=this.editEvents,r=this.onEventClick&&typeof this.onEventClick=="function";(s||a||i||n||o||r)&&window.addEventListener(t?"touchend":"mouseup",this.onMouseUp),(s||a||i&&this.dragToCreateEvent)&&window.addEventListener(t?"touchmove":"mousemove",this.onMouseMove,{passive:!1}),o&&window.addEventListener("keyup",this.onKeyUp),t&&(this.$refs.vuecal.oncontextmenu=function(h){h.preventDefault(),h.stopPropagation()}),this.hideBody||this.alignWithScrollbar();const c=this.view.startDate,d={view:this.view.id,startDate:c,endDate:this.view.endDate,...this.isMonthView?{firstCellDate:this.view.firstCellDate,lastCellDate:this.view.lastCellDate}:{},events:this.view.events.map(this.cleanupEvent),...this.isWeekView?{week:e.getWeek(this.startWeekOnSunday?e.addDays(c,1):c)}:{}};this.$emit("ready",d),this.ready=!0},beforeUnmount(){const e="ontouchstart"in window;window.removeEventListener(e?"touchmove":"mousemove",this.onMouseMove,{passive:!1}),window.removeEventListener(e?"touchend":"mouseup",this.onMouseUp),window.removeEventListener("keyup",this.onKeyUp),this.timeTickerIds[0]&&clearTimeout(this.timeTickerIds[0]),this.timeTickerIds[1]&&clearTimeout(this.timeTickerIds[1]),this.timeTickerIds=[null,null]},computed:{editEvents(){return this.editableEvents&&typeof this.editableEvents=="object"?{title:!!this.editableEvents.title,drag:!!this.editableEvents.drag,resize:!!this.editableEvents.resize,create:!!this.editableEvents.create,delete:!!this.editableEvents.delete}:{title:!!this.editableEvents,drag:!!this.editableEvents,resize:!!this.editableEvents,create:!!this.editableEvents,delete:!!this.editableEvents}},views(){return{years:{label:this.texts.years,enabled:!this.disableViews.includes("years")},year:{label:this.texts.year,enabled:!this.disableViews.includes("year")},month:{label:this.texts.month,enabled:!this.disableViews.includes("month")},week:{label:this.texts.week,enabled:!this.disableViews.includes("week")},day:{label:this.texts.day,enabled:!this.disableViews.includes("day")}}},currentView(){return this.validateView(this.activeView)},enabledViews(){return Object.keys(this.views).filter(e=>this.views[e].enabled)},hasTimeColumn(){return this.time&&this.isWeekOrDayView},isShortMonthView(){return this.isMonthView&&this.eventsOnMonthView==="short"},firstCellDateWeekNumber(){const e=this.utils.date,t=this.view.firstCellDate;return e.getWeek(this.startWeekOnSunday?e.addDays(t,1):t)},timeCells(){const e=[];for(let t=this.timeFrom,s=this.timeTo;t<s;t+=this.timeStep)e.push({hours:Math.floor(t/60),minutes:t%60,label:this.utils.date.formatTime(t,this.TimeFormat),value:t});return e},TimeFormat(){return this.timeFormat||(this.twelveHour?"h:mm{am}":"HH:mm")},daySplits(){return(this.splitDays.filter(e=>!e.hide)||[]).map((e,t)=>({...e,id:e.id||t+1}))},hasSplits(){return this.daySplits.length&&this.isWeekOrDayView},hasShortEvents(){return this.showAllDayEvents==="short"},cellOrSplitMinWidth(){let e=null;return this.hasSplits&&this.minSplitWidth?e=this.visibleDaysCount*this.minSplitWidth*this.daySplits.length:this.minCellWidth&&this.isWeekView&&(e=this.visibleDaysCount*this.minCellWidth),e},allDayBar(){let e=this.allDayBarHeight||null;return e&&!isNaN(e)&&(e+="px"),{cells:this.viewCells,options:this.$props,label:this.texts.allDay,shortEvents:this.hasShortEvents,daySplits:this.hasSplits&&this.daySplits||[],cellOrSplitMinWidth:this.cellOrSplitMinWidth,height:e}},minTimestamp(){let e=null;return this.minDate&&typeof this.minDate=="string"?e=this.utils.date.stringToDate(this.minDate):this.minDate&&this.minDate instanceof Date&&(e=this.minDate),e?e.getTime():null},maxTimestamp(){let e=null;return this.maxDate&&typeof this.maxDate=="string"?e=this.utils.date.stringToDate(this.maxDate):this.maxDate&&this.maxDate instanceof Date&&(e=this.maxDate),e?e.getTime():null},weekDays(){let{weekDays:e,weekDaysShort:t=[]}=this.texts;return e=e.slice(0).map((s,a)=>({label:s,...t.length?{short:t[a]}:{},hide:this.hideWeekends&&a>=5||this.hideWeekdays.length&&this.hideWeekdays.includes(a+1)})),this.startWeekOnSunday&&e.unshift(e.pop()),e},weekDaysInHeader(){return this.isMonthView||this.isWeekView&&!this.minCellWidth&&!(this.hasSplits&&this.minSplitWidth)},months(){return this.texts.months.map(e=>({label:e}))},specialDayHours(){return!this.specialHours||!Object.keys(this.specialHours).length?{}:Array(7).fill("").map((e,t)=>{let s=this.specialHours[t+1]||[];return Array.isArray(s)||(s=[s]),e=[],s.forEach(({from:a,to:i,class:n,label:o},r)=>{e[r]={day:t+1,from:[null,void 0].includes(a)?null:a*1,to:[null,void 0].includes(i)?null:i*1,class:n||"",label:o||""}}),e})},viewTitle(){const e=this.utils.date;let t="";const s=this.view.startDate,a=s.getFullYear(),i=s.getMonth();switch(this.view.id){case"years":{t=this.texts.years;break}case"year":{t=a;break}case"month":{t=`${this.months[i].label} ${a}`;break}case"week":{const n=this.view.endDate,o=s.getFullYear();let r=this.texts.months[s.getMonth()];this.xsmall&&(r=r.substring(0,3));let c=`${r} ${o}`;if(n.getMonth()!==s.getMonth()){const d=n.getFullYear();let h=this.texts.months[n.getMonth()];this.xsmall&&(h=h.substring(0,3)),o===d?c=`${r} - ${h} ${o}`:this.small?c=`${r.substring(0,3)} ${o} - ${h.substring(0,3)} ${d}`:c=`${r} ${o} - ${h} ${d}`}t=`${this.texts.week} ${e.getWeek(this.startWeekOnSunday?e.addDays(s,1):s)} (${c})`;break}case"day":{t=this.utils.date.formatDate(s,this.texts.dateFormat,this.texts);break}}return t},viewCells(){const e=this.utils.date;let t=[],s=null,a=!1;this.watchRealTime||(this.now=new Date);const i=this.now;switch(this.view.id){case"years":{s=this.view.startDate.getFullYear(),t=Array.apply(null,Array(25)).map((n,o)=>{const r=new Date(s+o,0,1),c=new Date(s+o+1,0,1);return c.setSeconds(-1),{startDate:r,formattedDate:e.formatDateLite(r),endDate:c,content:s+o,current:s+o===i.getFullYear()}});break}case"year":{s=this.view.startDate.getFullYear(),t=Array.apply(null,Array(12)).map((n,o)=>{const r=new Date(s,o,1),c=new Date(s,o+1,1);return c.setSeconds(-1),{startDate:r,formattedDate:e.formatDateLite(r),endDate:c,content:this.xsmall?this.months[o].label.substr(0,3):this.months[o].label,current:o===i.getMonth()&&s===i.getFullYear()}});break}case"month":{const n=this.view.startDate.getMonth(),o=new Date(this.view.firstCellDate);a=!1,t=Array.apply(null,Array(42)).map((r,c)=>{const d=e.addDays(o,c),h=new Date(d);h.setHours(23,59,59,0);const v=!a&&e.isToday(d)&&!a++;return{startDate:d,formattedDate:e.formatDateLite(d),endDate:h,content:d.getDate(),today:v,outOfScope:d.getMonth()!==n,class:`vuecal__cell--day${d.getDay()||7}`}}),(this.hideWeekends||this.hideWeekdays.length)&&(t=t.filter(r=>{const c=r.startDate.getDay()||7;return!(this.hideWeekends&&c>=6||this.hideWeekdays.length&&this.hideWeekdays.includes(c))}));break}case"week":{a=!1;const n=this.view.startDate,o=this.weekDays;t=o.map((r,c)=>{const d=e.addDays(n,this.startWeekOnSunday&&this.hideWeekends?c-1:c),h=new Date(d);h.setHours(23,59,59,0);const v=(d.getDay()||7)-1;return{startDate:d,formattedDate:e.formatDateLite(d),endDate:h,today:!a&&e.isToday(d)&&!a++,specialHours:this.specialDayHours[v]||[]}}).filter((r,c)=>!o[c].hide);break}case"day":{const n=this.view.startDate,o=new Date(this.view.startDate);o.setHours(23,59,59,0);const r=(n.getDay()||7)-1;t=[{startDate:n,formattedDate:e.formatDateLite(n),endDate:o,today:e.isToday(n),specialHours:this.specialDayHours[r]||[]}];break}}return t},visibleDaysCount(){return this.isDayView?1:7-this.weekDays.reduce((e,t)=>e+t.hide,0)},cellWidth(){return 100/this.visibleDaysCount},cssClasses(){const{resizeAnEvent:e,dragAnEvent:t,dragCreateAnEvent:s}=this.domEvents;return{[`vuecal--${this.view.id}-view`]:!0,[`vuecal--${this.locale}`]:this.locale,"vuecal--no-time":!this.time,"vuecal--view-with-time":this.hasTimeColumn,"vuecal--week-numbers":this.showWeekNumbers&&this.isMonthView,"vuecal--twelve-hour":this.twelveHour,"vuecal--click-to-navigate":this.clickToNavigate,"vuecal--hide-weekends":this.hideWeekends,"vuecal--split-days":this.hasSplits,"vuecal--sticky-split-labels":this.hasSplits&&this.stickySplitLabels,"vuecal--overflow-x":this.minCellWidth&&this.isWeekView||this.hasSplits&&this.minSplitWidth,"vuecal--small":this.small,"vuecal--xsmall":this.xsmall,"vuecal--resizing-event":e._eid,"vuecal--drag-creating-event":s.event,"vuecal--dragging-event":t._eid,"vuecal--events-on-month-view":this.eventsOnMonthView,"vuecal--short-events":this.isMonthView&&this.eventsOnMonthView==="short","vuecal--has-touch":typeof window<"u"&&"ontouchstart"in window}},isYearsOrYearView(){return["years","year"].includes(this.view.id)},isYearsView(){return this.view.id==="years"},isYearView(){return this.view.id==="year"},isMonthView(){return this.view.id==="month"},isWeekOrDayView(){return["week","day"].includes(this.view.id)},isWeekView(){return this.view.id==="week"},isDayView(){return this.view.id==="day"}},watch:{events:{handler(e,t){this.updateMutableEvents(e),this.addEventsToView()},deep:!0},locale(e){this.loadLocale(e)},selectedDate(e){this.updateSelectedDate(e)},activeView(e){this.switchView(e)}}},jl=$t(El,[["render",Cl]]);//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var $a;function j(){return $a.apply(null,arguments)}function $l(e){$a=e}function He(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function wt(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function ce(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Ls(e){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(e).length===0;var t;for(t in e)if(ce(e,t))return!1;return!0}function Oe(e){return e===void 0}function lt(e){return typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]"}function Zt(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function Oa(e,t){var s=[],a,i=e.length;for(a=0;a<i;++a)s.push(t(e[a],a));return s}function ct(e,t){for(var s in t)ce(t,s)&&(e[s]=t[s]);return ce(t,"toString")&&(e.toString=t.toString),ce(t,"valueOf")&&(e.valueOf=t.valueOf),e}function Ke(e,t,s,a){return ti(e,t,s,a,!0).utc()}function Ol(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function se(e){return e._pf==null&&(e._pf=Ol()),e._pf}var Es;Array.prototype.some?Es=Array.prototype.some:Es=function(e){var t=Object(this),s=t.length>>>0,a;for(a=0;a<s;a++)if(a in t&&e.call(this,t[a],a,t))return!0;return!1};function Is(e){var t=null,s=!1,a=e._d&&!isNaN(e._d.getTime());if(a&&(t=se(e),s=Es.call(t.parsedDateParts,function(i){return i!=null}),a=t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&s),e._strict&&(a=a&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(e))e._isValid=a;else return a;return e._isValid}function cs(e){var t=Ke(NaN);return e!=null?ct(se(t),e):se(t).userInvalidated=!0,t}var wa=j.momentProperties=[],Ds=!1;function Ns(e,t){var s,a,i,n=wa.length;if(Oe(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),Oe(t._i)||(e._i=t._i),Oe(t._f)||(e._f=t._f),Oe(t._l)||(e._l=t._l),Oe(t._strict)||(e._strict=t._strict),Oe(t._tzm)||(e._tzm=t._tzm),Oe(t._isUTC)||(e._isUTC=t._isUTC),Oe(t._offset)||(e._offset=t._offset),Oe(t._pf)||(e._pf=se(t)),Oe(t._locale)||(e._locale=t._locale),n>0)for(s=0;s<n;s++)a=wa[s],i=t[a],Oe(i)||(e[a]=i);return e}function Kt(e){Ns(this,e),this._d=new Date(e._d!=null?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),Ds===!1&&(Ds=!0,j.updateOffset(this),Ds=!1)}function Be(e){return e instanceof Kt||e!=null&&e._isAMomentObject!=null}function Aa(e){j.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+e)}function We(e,t){var s=!0;return ct(function(){if(j.deprecationHandler!=null&&j.deprecationHandler(null,e),s){var a=[],i,n,o,r=arguments.length;for(n=0;n<r;n++){if(i="",typeof arguments[n]=="object"){i+=`
[`+n+"] ";for(o in arguments[0])ce(arguments[0],o)&&(i+=o+": "+arguments[0][o]+", ");i=i.slice(0,-2)}else i=arguments[n];a.push(i)}Aa(e+`
Arguments: `+Array.prototype.slice.call(a).join("")+`
`+new Error().stack),s=!1}return t.apply(this,arguments)},t)}var _a={};function Va(e,t){j.deprecationHandler!=null&&j.deprecationHandler(e,t),_a[e]||(Aa(t),_a[e]=!0)}j.suppressDeprecationWarnings=!1;j.deprecationHandler=null;function Je(e){return typeof Function<"u"&&e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function Al(e){var t,s;for(s in e)ce(e,s)&&(t=e[s],Je(t)?this[s]=t:this["_"+s]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function js(e,t){var s=ct({},e),a;for(a in t)ce(t,a)&&(wt(e[a])&&wt(t[a])?(s[a]={},ct(s[a],e[a]),ct(s[a],t[a])):t[a]!=null?s[a]=t[a]:delete s[a]);for(a in e)ce(e,a)&&!ce(t,a)&&wt(e[a])&&(s[a]=ct({},s[a]));return s}function Ps(e){e!=null&&this.set(e)}var $s;Object.keys?$s=Object.keys:$s=function(e){var t,s=[];for(t in e)ce(e,t)&&s.push(t);return s};var Vl={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function Yl(e,t,s){var a=this._calendar[e]||this._calendar.sameElse;return Je(a)?a.call(t,s):a}function Ze(e,t,s){var a=""+Math.abs(e),i=t-a.length,n=e>=0;return(n?s?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+a}var Ws=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,es=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Ms={},St={};function q(e,t,s,a){var i=a;typeof a=="string"&&(i=function(){return this[a]()}),e&&(St[e]=i),t&&(St[t[0]]=function(){return Ze(i.apply(this,arguments),t[1],t[2])}),s&&(St[s]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function Ll(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function Il(e){var t=e.match(Ws),s,a;for(s=0,a=t.length;s<a;s++)St[t[s]]?t[s]=St[t[s]]:t[s]=Ll(t[s]);return function(i){var n="",o;for(o=0;o<a;o++)n+=Je(t[o])?t[o].call(i,e):t[o];return n}}function as(e,t){return e.isValid()?(t=Ya(t,e.localeData()),Ms[t]=Ms[t]||Il(t),Ms[t](e)):e.localeData().invalidDate()}function Ya(e,t){var s=5;function a(i){return t.longDateFormat(i)||i}for(es.lastIndex=0;s>=0&&es.test(e);)e=e.replace(es,a),es.lastIndex=0,s-=1;return e}var Nl={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function Pl(e){var t=this._longDateFormat[e],s=this._longDateFormat[e.toUpperCase()];return t||!s?t:(this._longDateFormat[e]=s.match(Ws).map(function(a){return a==="MMMM"||a==="MM"||a==="DD"||a==="dddd"?a.slice(1):a}).join(""),this._longDateFormat[e])}var Wl="Invalid date";function Fl(){return this._invalidDate}var Ul="%d",Rl=/\d{1,2}/;function Hl(e){return this._ordinal.replace("%d",e)}var Bl={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function zl(e,t,s,a){var i=this._relativeTime[s];return Je(i)?i(e,t,s,a):i.replace(/%d/i,e)}function Gl(e,t){var s=this._relativeTime[e>0?"future":"past"];return Je(s)?s(t):s.replace(/%s/i,t)}var ba={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function Fe(e){return typeof e=="string"?ba[e]||ba[e.toLowerCase()]:void 0}function Fs(e){var t={},s,a;for(a in e)ce(e,a)&&(s=Fe(a),s&&(t[s]=e[a]));return t}var ql={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function Zl(e){var t=[],s;for(s in e)ce(e,s)&&t.push({unit:s,priority:ql[s]});return t.sort(function(a,i){return a.priority-i.priority}),t}var La=/\d/,Le=/\d\d/,Ia=/\d{3}/,Us=/\d{4}/,ms=/[+-]?\d{6}/,ye=/\d\d?/,Na=/\d\d\d\d?/,Pa=/\d\d\d\d\d\d?/,hs=/\d{1,3}/,Rs=/\d{1,4}/,vs=/[+-]?\d{1,6}/,Ot=/\d+/,fs=/[+-]?\d+/,Kl=/Z|[+-]\d\d:?\d\d/gi,ps=/Z|[+-]\d\d(?::?\d\d)?/gi,Jl=/[+-]?\d+(\.\d{1,3})?/,Jt=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,At=/^[1-9]\d?/,Hs=/^([1-9]\d|\d)/,ls;ls={};function U(e,t,s){ls[e]=Je(t)?t:function(a,i){return a&&s?s:t}}function Xl(e,t){return ce(ls,e)?ls[e](t._strict,t._locale):new RegExp(Ql(e))}function Ql(e){return at(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,s,a,i,n){return s||a||i||n}))}function at(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Pe(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function le(e){var t=+e,s=0;return t!==0&&isFinite(t)&&(s=Pe(t)),s}var Os={};function fe(e,t){var s,a=t,i;for(typeof e=="string"&&(e=[e]),lt(t)&&(a=function(n,o){o[t]=le(n)}),i=e.length,s=0;s<i;s++)Os[e[s]]=a}function Xt(e,t){fe(e,function(s,a,i,n){i._w=i._w||{},t(s,i._w,i,n)})}function eo(e,t,s){t!=null&&ce(Os,e)&&Os[e](t,s._a,s,e)}function ys(e){return e%4===0&&e%100!==0||e%400===0}var $e=0,tt=1,qe=2,Ee=3,Ue=4,st=5,gt=6,to=7,so=8;q("Y",0,0,function(){var e=this.year();return e<=9999?Ze(e,4):"+"+e});q(0,["YY",2],0,function(){return this.year()%100});q(0,["YYYY",4],0,"year");q(0,["YYYYY",5],0,"year");q(0,["YYYYYY",6,!0],0,"year");U("Y",fs);U("YY",ye,Le);U("YYYY",Rs,Us);U("YYYYY",vs,ms);U("YYYYYY",vs,ms);fe(["YYYYY","YYYYYY"],$e);fe("YYYY",function(e,t){t[$e]=e.length===2?j.parseTwoDigitYear(e):le(e)});fe("YY",function(e,t){t[$e]=j.parseTwoDigitYear(e)});fe("Y",function(e,t){t[$e]=parseInt(e,10)});function Ut(e){return ys(e)?366:365}j.parseTwoDigitYear=function(e){return le(e)+(le(e)>68?1900:2e3)};var Wa=Vt("FullYear",!0);function ao(){return ys(this.year())}function Vt(e,t){return function(s){return s!=null?(Fa(this,e,s),j.updateOffset(this,t),this):Ht(this,e)}}function Ht(e,t){if(!e.isValid())return NaN;var s=e._d,a=e._isUTC;switch(t){case"Milliseconds":return a?s.getUTCMilliseconds():s.getMilliseconds();case"Seconds":return a?s.getUTCSeconds():s.getSeconds();case"Minutes":return a?s.getUTCMinutes():s.getMinutes();case"Hours":return a?s.getUTCHours():s.getHours();case"Date":return a?s.getUTCDate():s.getDate();case"Day":return a?s.getUTCDay():s.getDay();case"Month":return a?s.getUTCMonth():s.getMonth();case"FullYear":return a?s.getUTCFullYear():s.getFullYear();default:return NaN}}function Fa(e,t,s){var a,i,n,o,r;if(!(!e.isValid()||isNaN(s))){switch(a=e._d,i=e._isUTC,t){case"Milliseconds":return void(i?a.setUTCMilliseconds(s):a.setMilliseconds(s));case"Seconds":return void(i?a.setUTCSeconds(s):a.setSeconds(s));case"Minutes":return void(i?a.setUTCMinutes(s):a.setMinutes(s));case"Hours":return void(i?a.setUTCHours(s):a.setHours(s));case"Date":return void(i?a.setUTCDate(s):a.setDate(s));case"FullYear":break;default:return}n=s,o=e.month(),r=e.date(),r=r===29&&o===1&&!ys(n)?28:r,i?a.setUTCFullYear(n,o,r):a.setFullYear(n,o,r)}}function io(e){return e=Fe(e),Je(this[e])?this[e]():this}function no(e,t){if(typeof e=="object"){e=Fs(e);var s=Zl(e),a,i=s.length;for(a=0;a<i;a++)this[s[a].unit](e[s[a].unit])}else if(e=Fe(e),Je(this[e]))return this[e](t);return this}function lo(e,t){return(e%t+t)%t}var Se;Array.prototype.indexOf?Se=Array.prototype.indexOf:Se=function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1};function Bs(e,t){if(isNaN(e)||isNaN(t))return NaN;var s=lo(t,12);return e+=(t-s)/12,s===1?ys(e)?29:28:31-s%7%2}q("M",["MM",2],"Mo",function(){return this.month()+1});q("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)});q("MMMM",0,0,function(e){return this.localeData().months(this,e)});U("M",ye,At);U("MM",ye,Le);U("MMM",function(e,t){return t.monthsShortRegex(e)});U("MMMM",function(e,t){return t.monthsRegex(e)});fe(["M","MM"],function(e,t){t[tt]=le(e)-1});fe(["MMM","MMMM"],function(e,t,s,a){var i=s._locale.monthsParse(e,a,s._strict);i!=null?t[tt]=i:se(s).invalidMonth=e});var oo="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Ua="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Ra=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,ro=Jt,uo=Jt;function co(e,t){return e?He(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||Ra).test(t)?"format":"standalone"][e.month()]:He(this._months)?this._months:this._months.standalone}function mo(e,t){return e?He(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Ra.test(t)?"format":"standalone"][e.month()]:He(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function ho(e,t,s){var a,i,n,o=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],a=0;a<12;++a)n=Ke([2e3,a]),this._shortMonthsParse[a]=this.monthsShort(n,"").toLocaleLowerCase(),this._longMonthsParse[a]=this.months(n,"").toLocaleLowerCase();return s?t==="MMM"?(i=Se.call(this._shortMonthsParse,o),i!==-1?i:null):(i=Se.call(this._longMonthsParse,o),i!==-1?i:null):t==="MMM"?(i=Se.call(this._shortMonthsParse,o),i!==-1?i:(i=Se.call(this._longMonthsParse,o),i!==-1?i:null)):(i=Se.call(this._longMonthsParse,o),i!==-1?i:(i=Se.call(this._shortMonthsParse,o),i!==-1?i:null))}function vo(e,t,s){var a,i,n;if(this._monthsParseExact)return ho.call(this,e,t,s);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),a=0;a<12;a++){if(i=Ke([2e3,a]),s&&!this._longMonthsParse[a]&&(this._longMonthsParse[a]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[a]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),!s&&!this._monthsParse[a]&&(n="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[a]=new RegExp(n.replace(".",""),"i")),s&&t==="MMMM"&&this._longMonthsParse[a].test(e))return a;if(s&&t==="MMM"&&this._shortMonthsParse[a].test(e))return a;if(!s&&this._monthsParse[a].test(e))return a}}function Ha(e,t){if(!e.isValid())return e;if(typeof t=="string"){if(/^\d+$/.test(t))t=le(t);else if(t=e.localeData().monthsParse(t),!lt(t))return e}var s=t,a=e.date();return a=a<29?a:Math.min(a,Bs(e.year(),s)),e._isUTC?e._d.setUTCMonth(s,a):e._d.setMonth(s,a),e}function Ba(e){return e!=null?(Ha(this,e),j.updateOffset(this,!0),this):Ht(this,"Month")}function fo(){return Bs(this.year(),this.month())}function po(e){return this._monthsParseExact?(ce(this,"_monthsRegex")||za.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(ce(this,"_monthsShortRegex")||(this._monthsShortRegex=ro),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function yo(e){return this._monthsParseExact?(ce(this,"_monthsRegex")||za.call(this),e?this._monthsStrictRegex:this._monthsRegex):(ce(this,"_monthsRegex")||(this._monthsRegex=uo),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function za(){function e(c,d){return d.length-c.length}var t=[],s=[],a=[],i,n,o,r;for(i=0;i<12;i++)n=Ke([2e3,i]),o=at(this.monthsShort(n,"")),r=at(this.months(n,"")),t.push(o),s.push(r),a.push(r),a.push(o);t.sort(e),s.sort(e),a.sort(e),this._monthsRegex=new RegExp("^("+a.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+t.join("|")+")","i")}function go(e,t,s,a,i,n,o){var r;return e<100&&e>=0?(r=new Date(e+400,t,s,a,i,n,o),isFinite(r.getFullYear())&&r.setFullYear(e)):r=new Date(e,t,s,a,i,n,o),r}function Bt(e){var t,s;return e<100&&e>=0?(s=Array.prototype.slice.call(arguments),s[0]=e+400,t=new Date(Date.UTC.apply(null,s)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function os(e,t,s){var a=7+t-s,i=(7+Bt(e,0,a).getUTCDay()-t)%7;return-i+a-1}function Ga(e,t,s,a,i){var n=(7+s-a)%7,o=os(e,a,i),r=1+7*(t-1)+n+o,c,d;return r<=0?(c=e-1,d=Ut(c)+r):r>Ut(e)?(c=e+1,d=r-Ut(e)):(c=e,d=r),{year:c,dayOfYear:d}}function zt(e,t,s){var a=os(e.year(),t,s),i=Math.floor((e.dayOfYear()-a-1)/7)+1,n,o;return i<1?(o=e.year()-1,n=i+it(o,t,s)):i>it(e.year(),t,s)?(n=i-it(e.year(),t,s),o=e.year()+1):(o=e.year(),n=i),{week:n,year:o}}function it(e,t,s){var a=os(e,t,s),i=os(e+1,t,s);return(Ut(e)-a+i)/7}q("w",["ww",2],"wo","week");q("W",["WW",2],"Wo","isoWeek");U("w",ye,At);U("ww",ye,Le);U("W",ye,At);U("WW",ye,Le);Xt(["w","ww","W","WW"],function(e,t,s,a){t[a.substr(0,1)]=le(e)});function wo(e){return zt(e,this._week.dow,this._week.doy).week}var _o={dow:0,doy:6};function bo(){return this._week.dow}function ko(){return this._week.doy}function xo(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function Do(e){var t=zt(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}q("d",0,"do","day");q("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)});q("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)});q("dddd",0,0,function(e){return this.localeData().weekdays(this,e)});q("e",0,0,"weekday");q("E",0,0,"isoWeekday");U("d",ye);U("e",ye);U("E",ye);U("dd",function(e,t){return t.weekdaysMinRegex(e)});U("ddd",function(e,t){return t.weekdaysShortRegex(e)});U("dddd",function(e,t){return t.weekdaysRegex(e)});Xt(["dd","ddd","dddd"],function(e,t,s,a){var i=s._locale.weekdaysParse(e,a,s._strict);i!=null?t.d=i:se(s).invalidWeekday=e});Xt(["d","e","E"],function(e,t,s,a){t[a]=le(e)});function Mo(e,t){return typeof e!="string"?e:isNaN(e)?(e=t.weekdaysParse(e),typeof e=="number"?e:null):parseInt(e,10)}function So(e,t){return typeof e=="string"?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function zs(e,t){return e.slice(t,7).concat(e.slice(0,t))}var To="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),qa="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Co="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Eo=Jt,jo=Jt,$o=Jt;function Oo(e,t){var s=He(this._weekdays)?this._weekdays:this._weekdays[e&&e!==!0&&this._weekdays.isFormat.test(t)?"format":"standalone"];return e===!0?zs(s,this._week.dow):e?s[e.day()]:s}function Ao(e){return e===!0?zs(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function Vo(e){return e===!0?zs(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function Yo(e,t,s){var a,i,n,o=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],a=0;a<7;++a)n=Ke([2e3,1]).day(a),this._minWeekdaysParse[a]=this.weekdaysMin(n,"").toLocaleLowerCase(),this._shortWeekdaysParse[a]=this.weekdaysShort(n,"").toLocaleLowerCase(),this._weekdaysParse[a]=this.weekdays(n,"").toLocaleLowerCase();return s?t==="dddd"?(i=Se.call(this._weekdaysParse,o),i!==-1?i:null):t==="ddd"?(i=Se.call(this._shortWeekdaysParse,o),i!==-1?i:null):(i=Se.call(this._minWeekdaysParse,o),i!==-1?i:null):t==="dddd"?(i=Se.call(this._weekdaysParse,o),i!==-1||(i=Se.call(this._shortWeekdaysParse,o),i!==-1)?i:(i=Se.call(this._minWeekdaysParse,o),i!==-1?i:null)):t==="ddd"?(i=Se.call(this._shortWeekdaysParse,o),i!==-1||(i=Se.call(this._weekdaysParse,o),i!==-1)?i:(i=Se.call(this._minWeekdaysParse,o),i!==-1?i:null)):(i=Se.call(this._minWeekdaysParse,o),i!==-1||(i=Se.call(this._weekdaysParse,o),i!==-1)?i:(i=Se.call(this._shortWeekdaysParse,o),i!==-1?i:null))}function Lo(e,t,s){var a,i,n;if(this._weekdaysParseExact)return Yo.call(this,e,t,s);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),a=0;a<7;a++){if(i=Ke([2e3,1]).day(a),s&&!this._fullWeekdaysParse[a]&&(this._fullWeekdaysParse[a]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[a]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[a]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[a]||(n="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[a]=new RegExp(n.replace(".",""),"i")),s&&t==="dddd"&&this._fullWeekdaysParse[a].test(e))return a;if(s&&t==="ddd"&&this._shortWeekdaysParse[a].test(e))return a;if(s&&t==="dd"&&this._minWeekdaysParse[a].test(e))return a;if(!s&&this._weekdaysParse[a].test(e))return a}}function Io(e){if(!this.isValid())return e!=null?this:NaN;var t=Ht(this,"Day");return e!=null?(e=Mo(e,this.localeData()),this.add(e-t,"d")):t}function No(e){if(!this.isValid())return e!=null?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function Po(e){if(!this.isValid())return e!=null?this:NaN;if(e!=null){var t=So(e,this.localeData());return this.day(this.day()%7?t:t-7)}else return this.day()||7}function Wo(e){return this._weekdaysParseExact?(ce(this,"_weekdaysRegex")||Gs.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(ce(this,"_weekdaysRegex")||(this._weekdaysRegex=Eo),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function Fo(e){return this._weekdaysParseExact?(ce(this,"_weekdaysRegex")||Gs.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(ce(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=jo),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Uo(e){return this._weekdaysParseExact?(ce(this,"_weekdaysRegex")||Gs.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(ce(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=$o),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Gs(){function e(h,v){return v.length-h.length}var t=[],s=[],a=[],i=[],n,o,r,c,d;for(n=0;n<7;n++)o=Ke([2e3,1]).day(n),r=at(this.weekdaysMin(o,"")),c=at(this.weekdaysShort(o,"")),d=at(this.weekdays(o,"")),t.push(r),s.push(c),a.push(d),i.push(r),i.push(c),i.push(d);t.sort(e),s.sort(e),a.sort(e),i.sort(e),this._weekdaysRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+t.join("|")+")","i")}function qs(){return this.hours()%12||12}function Ro(){return this.hours()||24}q("H",["HH",2],0,"hour");q("h",["hh",2],0,qs);q("k",["kk",2],0,Ro);q("hmm",0,0,function(){return""+qs.apply(this)+Ze(this.minutes(),2)});q("hmmss",0,0,function(){return""+qs.apply(this)+Ze(this.minutes(),2)+Ze(this.seconds(),2)});q("Hmm",0,0,function(){return""+this.hours()+Ze(this.minutes(),2)});q("Hmmss",0,0,function(){return""+this.hours()+Ze(this.minutes(),2)+Ze(this.seconds(),2)});function Za(e,t){q(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}Za("a",!0);Za("A",!1);function Ka(e,t){return t._meridiemParse}U("a",Ka);U("A",Ka);U("H",ye,Hs);U("h",ye,At);U("k",ye,At);U("HH",ye,Le);U("hh",ye,Le);U("kk",ye,Le);U("hmm",Na);U("hmmss",Pa);U("Hmm",Na);U("Hmmss",Pa);fe(["H","HH"],Ee);fe(["k","kk"],function(e,t,s){var a=le(e);t[Ee]=a===24?0:a});fe(["a","A"],function(e,t,s){s._isPm=s._locale.isPM(e),s._meridiem=e});fe(["h","hh"],function(e,t,s){t[Ee]=le(e),se(s).bigHour=!0});fe("hmm",function(e,t,s){var a=e.length-2;t[Ee]=le(e.substr(0,a)),t[Ue]=le(e.substr(a)),se(s).bigHour=!0});fe("hmmss",function(e,t,s){var a=e.length-4,i=e.length-2;t[Ee]=le(e.substr(0,a)),t[Ue]=le(e.substr(a,2)),t[st]=le(e.substr(i)),se(s).bigHour=!0});fe("Hmm",function(e,t,s){var a=e.length-2;t[Ee]=le(e.substr(0,a)),t[Ue]=le(e.substr(a))});fe("Hmmss",function(e,t,s){var a=e.length-4,i=e.length-2;t[Ee]=le(e.substr(0,a)),t[Ue]=le(e.substr(a,2)),t[st]=le(e.substr(i))});function Ho(e){return(e+"").toLowerCase().charAt(0)==="p"}var Bo=/[ap]\.?m?\.?/i,zo=Vt("Hours",!0);function Go(e,t,s){return e>11?s?"pm":"PM":s?"am":"AM"}var Ja={calendar:Vl,longDateFormat:Nl,invalidDate:Wl,ordinal:Ul,dayOfMonthOrdinalParse:Rl,relativeTime:Bl,months:oo,monthsShort:Ua,week:_o,weekdays:To,weekdaysMin:Co,weekdaysShort:qa,meridiemParse:Bo},_e={},Pt={},Gt;function qo(e,t){var s,a=Math.min(e.length,t.length);for(s=0;s<a;s+=1)if(e[s]!==t[s])return s;return a}function ka(e){return e&&e.toLowerCase().replace("_","-")}function Zo(e){for(var t=0,s,a,i,n;t<e.length;){for(n=ka(e[t]).split("-"),s=n.length,a=ka(e[t+1]),a=a?a.split("-"):null;s>0;){if(i=gs(n.slice(0,s).join("-")),i)return i;if(a&&a.length>=s&&qo(n,a)>=s-1)break;s--}t++}return Gt}function Ko(e){return!!(e&&e.match("^[^/\\\\]*$"))}function gs(e){var t=null,s;if(_e[e]===void 0&&typeof module<"u"&&module&&module.exports&&Ko(e))try{t=Gt._abbr,s=require,s("./locale/"+e),ht(t)}catch{_e[e]=null}return _e[e]}function ht(e,t){var s;return e&&(Oe(t)?s=rt(e):s=Zs(e,t),s?Gt=s:typeof console<"u"&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),Gt._abbr}function Zs(e,t){if(t!==null){var s,a=Ja;if(t.abbr=e,_e[e]!=null)Va("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),a=_e[e]._config;else if(t.parentLocale!=null)if(_e[t.parentLocale]!=null)a=_e[t.parentLocale]._config;else if(s=gs(t.parentLocale),s!=null)a=s._config;else return Pt[t.parentLocale]||(Pt[t.parentLocale]=[]),Pt[t.parentLocale].push({name:e,config:t}),null;return _e[e]=new Ps(js(a,t)),Pt[e]&&Pt[e].forEach(function(i){Zs(i.name,i.config)}),ht(e),_e[e]}else return delete _e[e],null}function Jo(e,t){if(t!=null){var s,a,i=Ja;_e[e]!=null&&_e[e].parentLocale!=null?_e[e].set(js(_e[e]._config,t)):(a=gs(e),a!=null&&(i=a._config),t=js(i,t),a==null&&(t.abbr=e),s=new Ps(t),s.parentLocale=_e[e],_e[e]=s),ht(e)}else _e[e]!=null&&(_e[e].parentLocale!=null?(_e[e]=_e[e].parentLocale,e===ht()&&ht(e)):_e[e]!=null&&delete _e[e]);return _e[e]}function rt(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Gt;if(!He(e)){if(t=gs(e),t)return t;e=[e]}return Zo(e)}function Xo(){return $s(_e)}function Ks(e){var t,s=e._a;return s&&se(e).overflow===-2&&(t=s[tt]<0||s[tt]>11?tt:s[qe]<1||s[qe]>Bs(s[$e],s[tt])?qe:s[Ee]<0||s[Ee]>24||s[Ee]===24&&(s[Ue]!==0||s[st]!==0||s[gt]!==0)?Ee:s[Ue]<0||s[Ue]>59?Ue:s[st]<0||s[st]>59?st:s[gt]<0||s[gt]>999?gt:-1,se(e)._overflowDayOfYear&&(t<$e||t>qe)&&(t=qe),se(e)._overflowWeeks&&t===-1&&(t=to),se(e)._overflowWeekday&&t===-1&&(t=so),se(e).overflow=t),e}var Qo=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,er=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,tr=/Z|[+-]\d\d(?::?\d\d)?/,ts=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Ss=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],sr=/^\/?Date\((-?\d+)/i,ar=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,ir={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Xa(e){var t,s,a=e._i,i=Qo.exec(a)||er.exec(a),n,o,r,c,d=ts.length,h=Ss.length;if(i){for(se(e).iso=!0,t=0,s=d;t<s;t++)if(ts[t][1].exec(i[1])){o=ts[t][0],n=ts[t][2]!==!1;break}if(o==null){e._isValid=!1;return}if(i[3]){for(t=0,s=h;t<s;t++)if(Ss[t][1].exec(i[3])){r=(i[2]||" ")+Ss[t][0];break}if(r==null){e._isValid=!1;return}}if(!n&&r!=null){e._isValid=!1;return}if(i[4])if(tr.exec(i[4]))c="Z";else{e._isValid=!1;return}e._f=o+(r||"")+(c||""),Xs(e)}else e._isValid=!1}function nr(e,t,s,a,i,n){var o=[lr(e),Ua.indexOf(t),parseInt(s,10),parseInt(a,10),parseInt(i,10)];return n&&o.push(parseInt(n,10)),o}function lr(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function or(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function rr(e,t,s){if(e){var a=qa.indexOf(e),i=new Date(t[0],t[1],t[2]).getDay();if(a!==i)return se(s).weekdayMismatch=!0,s._isValid=!1,!1}return!0}function dr(e,t,s){if(e)return ir[e];if(t)return 0;var a=parseInt(s,10),i=a%100,n=(a-i)/100;return n*60+i}function Qa(e){var t=ar.exec(or(e._i)),s;if(t){if(s=nr(t[4],t[3],t[2],t[5],t[6],t[7]),!rr(t[1],s,e))return;e._a=s,e._tzm=dr(t[8],t[9],t[10]),e._d=Bt.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),se(e).rfc2822=!0}else e._isValid=!1}function ur(e){var t=sr.exec(e._i);if(t!==null){e._d=new Date(+t[1]);return}if(Xa(e),e._isValid===!1)delete e._isValid;else return;if(Qa(e),e._isValid===!1)delete e._isValid;else return;e._strict?e._isValid=!1:j.createFromInputFallback(e)}j.createFromInputFallback=We("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});function xt(e,t,s){return e??t??s}function cr(e){var t=new Date(j.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function Js(e){var t,s,a=[],i,n,o;if(!e._d){for(i=cr(e),e._w&&e._a[qe]==null&&e._a[tt]==null&&mr(e),e._dayOfYear!=null&&(o=xt(e._a[$e],i[$e]),(e._dayOfYear>Ut(o)||e._dayOfYear===0)&&(se(e)._overflowDayOfYear=!0),s=Bt(o,0,e._dayOfYear),e._a[tt]=s.getUTCMonth(),e._a[qe]=s.getUTCDate()),t=0;t<3&&e._a[t]==null;++t)e._a[t]=a[t]=i[t];for(;t<7;t++)e._a[t]=a[t]=e._a[t]==null?t===2?1:0:e._a[t];e._a[Ee]===24&&e._a[Ue]===0&&e._a[st]===0&&e._a[gt]===0&&(e._nextDay=!0,e._a[Ee]=0),e._d=(e._useUTC?Bt:go).apply(null,a),n=e._useUTC?e._d.getUTCDay():e._d.getDay(),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Ee]=24),e._w&&typeof e._w.d<"u"&&e._w.d!==n&&(se(e).weekdayMismatch=!0)}}function mr(e){var t,s,a,i,n,o,r,c,d;t=e._w,t.GG!=null||t.W!=null||t.E!=null?(n=1,o=4,s=xt(t.GG,e._a[$e],zt(pe(),1,4).year),a=xt(t.W,1),i=xt(t.E,1),(i<1||i>7)&&(c=!0)):(n=e._locale._week.dow,o=e._locale._week.doy,d=zt(pe(),n,o),s=xt(t.gg,e._a[$e],d.year),a=xt(t.w,d.week),t.d!=null?(i=t.d,(i<0||i>6)&&(c=!0)):t.e!=null?(i=t.e+n,(t.e<0||t.e>6)&&(c=!0)):i=n),a<1||a>it(s,n,o)?se(e)._overflowWeeks=!0:c!=null?se(e)._overflowWeekday=!0:(r=Ga(s,a,i,n,o),e._a[$e]=r.year,e._dayOfYear=r.dayOfYear)}j.ISO_8601=function(){};j.RFC_2822=function(){};function Xs(e){if(e._f===j.ISO_8601){Xa(e);return}if(e._f===j.RFC_2822){Qa(e);return}e._a=[],se(e).empty=!0;var t=""+e._i,s,a,i,n,o,r=t.length,c=0,d,h;for(i=Ya(e._f,e._locale).match(Ws)||[],h=i.length,s=0;s<h;s++)n=i[s],a=(t.match(Xl(n,e))||[])[0],a&&(o=t.substr(0,t.indexOf(a)),o.length>0&&se(e).unusedInput.push(o),t=t.slice(t.indexOf(a)+a.length),c+=a.length),St[n]?(a?se(e).empty=!1:se(e).unusedTokens.push(n),eo(n,a,e)):e._strict&&!a&&se(e).unusedTokens.push(n);se(e).charsLeftOver=r-c,t.length>0&&se(e).unusedInput.push(t),e._a[Ee]<=12&&se(e).bigHour===!0&&e._a[Ee]>0&&(se(e).bigHour=void 0),se(e).parsedDateParts=e._a.slice(0),se(e).meridiem=e._meridiem,e._a[Ee]=hr(e._locale,e._a[Ee],e._meridiem),d=se(e).era,d!==null&&(e._a[$e]=e._locale.erasConvertYear(d,e._a[$e])),Js(e),Ks(e)}function hr(e,t,s){var a;return s==null?t:e.meridiemHour!=null?e.meridiemHour(t,s):(e.isPM!=null&&(a=e.isPM(s),a&&t<12&&(t+=12),!a&&t===12&&(t=0)),t)}function vr(e){var t,s,a,i,n,o,r=!1,c=e._f.length;if(c===0){se(e).invalidFormat=!0,e._d=new Date(NaN);return}for(i=0;i<c;i++)n=0,o=!1,t=Ns({},e),e._useUTC!=null&&(t._useUTC=e._useUTC),t._f=e._f[i],Xs(t),Is(t)&&(o=!0),n+=se(t).charsLeftOver,n+=se(t).unusedTokens.length*10,se(t).score=n,r?n<a&&(a=n,s=t):(a==null||n<a||o)&&(a=n,s=t,o&&(r=!0));ct(e,s||t)}function fr(e){if(!e._d){var t=Fs(e._i),s=t.day===void 0?t.date:t.day;e._a=Oa([t.year,t.month,s,t.hour,t.minute,t.second,t.millisecond],function(a){return a&&parseInt(a,10)}),Js(e)}}function pr(e){var t=new Kt(Ks(ei(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function ei(e){var t=e._i,s=e._f;return e._locale=e._locale||rt(e._l),t===null||s===void 0&&t===""?cs({nullInput:!0}):(typeof t=="string"&&(e._i=t=e._locale.preparse(t)),Be(t)?new Kt(Ks(t)):(Zt(t)?e._d=t:He(s)?vr(e):s?Xs(e):yr(e),Is(e)||(e._d=null),e))}function yr(e){var t=e._i;Oe(t)?e._d=new Date(j.now()):Zt(t)?e._d=new Date(t.valueOf()):typeof t=="string"?ur(e):He(t)?(e._a=Oa(t.slice(0),function(s){return parseInt(s,10)}),Js(e)):wt(t)?fr(e):lt(t)?e._d=new Date(t):j.createFromInputFallback(e)}function ti(e,t,s,a,i){var n={};return(t===!0||t===!1)&&(a=t,t=void 0),(s===!0||s===!1)&&(a=s,s=void 0),(wt(e)&&Ls(e)||He(e)&&e.length===0)&&(e=void 0),n._isAMomentObject=!0,n._useUTC=n._isUTC=i,n._l=s,n._i=e,n._f=t,n._strict=a,pr(n)}function pe(e,t,s,a){return ti(e,t,s,a,!1)}var gr=We("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=pe.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:cs()}),wr=We("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=pe.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:cs()});function si(e,t){var s,a;if(t.length===1&&He(t[0])&&(t=t[0]),!t.length)return pe();for(s=t[0],a=1;a<t.length;++a)(!t[a].isValid()||t[a][e](s))&&(s=t[a]);return s}function _r(){var e=[].slice.call(arguments,0);return si("isBefore",e)}function br(){var e=[].slice.call(arguments,0);return si("isAfter",e)}var kr=function(){return Date.now?Date.now():+new Date},Wt=["year","quarter","month","week","day","hour","minute","second","millisecond"];function xr(e){var t,s=!1,a,i=Wt.length;for(t in e)if(ce(e,t)&&!(Se.call(Wt,t)!==-1&&(e[t]==null||!isNaN(e[t]))))return!1;for(a=0;a<i;++a)if(e[Wt[a]]){if(s)return!1;parseFloat(e[Wt[a]])!==le(e[Wt[a]])&&(s=!0)}return!0}function Dr(){return this._isValid}function Mr(){return Ge(NaN)}function ws(e){var t=Fs(e),s=t.year||0,a=t.quarter||0,i=t.month||0,n=t.week||t.isoWeek||0,o=t.day||0,r=t.hour||0,c=t.minute||0,d=t.second||0,h=t.millisecond||0;this._isValid=xr(t),this._milliseconds=+h+d*1e3+c*6e4+r*1e3*60*60,this._days=+o+n*7,this._months=+i+a*3+s*12,this._data={},this._locale=rt(),this._bubble()}function is(e){return e instanceof ws}function As(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function Sr(e,t,s){var a=Math.min(e.length,t.length),i=Math.abs(e.length-t.length),n=0,o;for(o=0;o<a;o++)le(e[o])!==le(t[o])&&n++;return n+i}function ai(e,t){q(e,0,0,function(){var s=this.utcOffset(),a="+";return s<0&&(s=-s,a="-"),a+Ze(~~(s/60),2)+t+Ze(~~s%60,2)})}ai("Z",":");ai("ZZ","");U("Z",ps);U("ZZ",ps);fe(["Z","ZZ"],function(e,t,s){s._useUTC=!0,s._tzm=Qs(ps,e)});var Tr=/([\+\-]|\d\d)/gi;function Qs(e,t){var s=(t||"").match(e),a,i,n;return s===null?null:(a=s[s.length-1]||[],i=(a+"").match(Tr)||["-",0,0],n=+(i[1]*60)+le(i[2]),n===0?0:i[0]==="+"?n:-n)}function ea(e,t){var s,a;return t._isUTC?(s=t.clone(),a=(Be(e)||Zt(e)?e.valueOf():pe(e).valueOf())-s.valueOf(),s._d.setTime(s._d.valueOf()+a),j.updateOffset(s,!1),s):pe(e).local()}function Vs(e){return-Math.round(e._d.getTimezoneOffset())}j.updateOffset=function(){};function Cr(e,t,s){var a=this._offset||0,i;if(!this.isValid())return e!=null?this:NaN;if(e!=null){if(typeof e=="string"){if(e=Qs(ps,e),e===null)return this}else Math.abs(e)<16&&!s&&(e=e*60);return!this._isUTC&&t&&(i=Vs(this)),this._offset=e,this._isUTC=!0,i!=null&&this.add(i,"m"),a!==e&&(!t||this._changeInProgress?li(this,Ge(e-a,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,j.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?a:Vs(this)}function Er(e,t){return e!=null?(typeof e!="string"&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function jr(e){return this.utcOffset(0,e)}function $r(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Vs(this),"m")),this}function Or(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var e=Qs(Kl,this._i);e!=null?this.utcOffset(e):this.utcOffset(0,!0)}return this}function Ar(e){return this.isValid()?(e=e?pe(e).utcOffset():0,(this.utcOffset()-e)%60===0):!1}function Vr(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Yr(){if(!Oe(this._isDSTShifted))return this._isDSTShifted;var e={},t;return Ns(e,this),e=ei(e),e._a?(t=e._isUTC?Ke(e._a):pe(e._a),this._isDSTShifted=this.isValid()&&Sr(e._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function Lr(){return this.isValid()?!this._isUTC:!1}function Ir(){return this.isValid()?this._isUTC:!1}function ii(){return this.isValid()?this._isUTC&&this._offset===0:!1}var Nr=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Pr=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Ge(e,t){var s=e,a=null,i,n,o;return is(e)?s={ms:e._milliseconds,d:e._days,M:e._months}:lt(e)||!isNaN(+e)?(s={},t?s[t]=+e:s.milliseconds=+e):(a=Nr.exec(e))?(i=a[1]==="-"?-1:1,s={y:0,d:le(a[qe])*i,h:le(a[Ee])*i,m:le(a[Ue])*i,s:le(a[st])*i,ms:le(As(a[gt]*1e3))*i}):(a=Pr.exec(e))?(i=a[1]==="-"?-1:1,s={y:ft(a[2],i),M:ft(a[3],i),w:ft(a[4],i),d:ft(a[5],i),h:ft(a[6],i),m:ft(a[7],i),s:ft(a[8],i)}):s==null?s={}:typeof s=="object"&&("from"in s||"to"in s)&&(o=Wr(pe(s.from),pe(s.to)),s={},s.ms=o.milliseconds,s.M=o.months),n=new ws(s),is(e)&&ce(e,"_locale")&&(n._locale=e._locale),is(e)&&ce(e,"_isValid")&&(n._isValid=e._isValid),n}Ge.fn=ws.prototype;Ge.invalid=Mr;function ft(e,t){var s=e&&parseFloat(e.replace(",","."));return(isNaN(s)?0:s)*t}function xa(e,t){var s={};return s.months=t.month()-e.month()+(t.year()-e.year())*12,e.clone().add(s.months,"M").isAfter(t)&&--s.months,s.milliseconds=+t-+e.clone().add(s.months,"M"),s}function Wr(e,t){var s;return e.isValid()&&t.isValid()?(t=ea(t,e),e.isBefore(t)?s=xa(e,t):(s=xa(t,e),s.milliseconds=-s.milliseconds,s.months=-s.months),s):{milliseconds:0,months:0}}function ni(e,t){return function(s,a){var i,n;return a!==null&&!isNaN(+a)&&(Va(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),n=s,s=a,a=n),i=Ge(s,a),li(this,i,e),this}}function li(e,t,s,a){var i=t._milliseconds,n=As(t._days),o=As(t._months);e.isValid()&&(a=a??!0,o&&Ha(e,Ht(e,"Month")+o*s),n&&Fa(e,"Date",Ht(e,"Date")+n*s),i&&e._d.setTime(e._d.valueOf()+i*s),a&&j.updateOffset(e,n||o))}var Fr=ni(1,"add"),Ur=ni(-1,"subtract");function oi(e){return typeof e=="string"||e instanceof String}function Rr(e){return Be(e)||Zt(e)||oi(e)||lt(e)||Br(e)||Hr(e)||e===null||e===void 0}function Hr(e){var t=wt(e)&&!Ls(e),s=!1,a=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],i,n,o=a.length;for(i=0;i<o;i+=1)n=a[i],s=s||ce(e,n);return t&&s}function Br(e){var t=He(e),s=!1;return t&&(s=e.filter(function(a){return!lt(a)&&oi(e)}).length===0),t&&s}function zr(e){var t=wt(e)&&!Ls(e),s=!1,a=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],i,n;for(i=0;i<a.length;i+=1)n=a[i],s=s||ce(e,n);return t&&s}function Gr(e,t){var s=e.diff(t,"days",!0);return s<-6?"sameElse":s<-1?"lastWeek":s<0?"lastDay":s<1?"sameDay":s<2?"nextDay":s<7?"nextWeek":"sameElse"}function qr(e,t){arguments.length===1&&(arguments[0]?Rr(arguments[0])?(e=arguments[0],t=void 0):zr(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var s=e||pe(),a=ea(s,this).startOf("day"),i=j.calendarFormat(this,a)||"sameElse",n=t&&(Je(t[i])?t[i].call(this,s):t[i]);return this.format(n||this.localeData().calendar(i,this,pe(s)))}function Zr(){return new Kt(this)}function Kr(e,t){var s=Be(e)?e:pe(e);return this.isValid()&&s.isValid()?(t=Fe(t)||"millisecond",t==="millisecond"?this.valueOf()>s.valueOf():s.valueOf()<this.clone().startOf(t).valueOf()):!1}function Jr(e,t){var s=Be(e)?e:pe(e);return this.isValid()&&s.isValid()?(t=Fe(t)||"millisecond",t==="millisecond"?this.valueOf()<s.valueOf():this.clone().endOf(t).valueOf()<s.valueOf()):!1}function Xr(e,t,s,a){var i=Be(e)?e:pe(e),n=Be(t)?t:pe(t);return this.isValid()&&i.isValid()&&n.isValid()?(a=a||"()",(a[0]==="("?this.isAfter(i,s):!this.isBefore(i,s))&&(a[1]===")"?this.isBefore(n,s):!this.isAfter(n,s))):!1}function Qr(e,t){var s=Be(e)?e:pe(e),a;return this.isValid()&&s.isValid()?(t=Fe(t)||"millisecond",t==="millisecond"?this.valueOf()===s.valueOf():(a=s.valueOf(),this.clone().startOf(t).valueOf()<=a&&a<=this.clone().endOf(t).valueOf())):!1}function ed(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function td(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function sd(e,t,s){var a,i,n;if(!this.isValid())return NaN;if(a=ea(e,this),!a.isValid())return NaN;switch(i=(a.utcOffset()-this.utcOffset())*6e4,t=Fe(t),t){case"year":n=ns(this,a)/12;break;case"month":n=ns(this,a);break;case"quarter":n=ns(this,a)/3;break;case"second":n=(this-a)/1e3;break;case"minute":n=(this-a)/6e4;break;case"hour":n=(this-a)/36e5;break;case"day":n=(this-a-i)/864e5;break;case"week":n=(this-a-i)/6048e5;break;default:n=this-a}return s?n:Pe(n)}function ns(e,t){if(e.date()<t.date())return-ns(t,e);var s=(t.year()-e.year())*12+(t.month()-e.month()),a=e.clone().add(s,"months"),i,n;return t-a<0?(i=e.clone().add(s-1,"months"),n=(t-a)/(a-i)):(i=e.clone().add(s+1,"months"),n=(t-a)/(i-a)),-(s+n)||0}j.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";j.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function ad(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function id(e){if(!this.isValid())return null;var t=e!==!0,s=t?this.clone().utc():this;return s.year()<0||s.year()>9999?as(s,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):Je(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",as(s,"Z")):as(s,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function nd(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="",s,a,i,n;return this.isLocal()||(e=this.utcOffset()===0?"moment.utc":"moment.parseZone",t="Z"),s="["+e+'("]',a=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",i="-MM-DD[T]HH:mm:ss.SSS",n=t+'[")]',this.format(s+a+i+n)}function ld(e){e||(e=this.isUtc()?j.defaultFormatUtc:j.defaultFormat);var t=as(this,e);return this.localeData().postformat(t)}function od(e,t){return this.isValid()&&(Be(e)&&e.isValid()||pe(e).isValid())?Ge({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function rd(e){return this.from(pe(),e)}function dd(e,t){return this.isValid()&&(Be(e)&&e.isValid()||pe(e).isValid())?Ge({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function ud(e){return this.to(pe(),e)}function ri(e){var t;return e===void 0?this._locale._abbr:(t=rt(e),t!=null&&(this._locale=t),this)}var di=We("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===void 0?this.localeData():this.locale(e)});function ui(){return this._locale}var rs=1e3,Tt=60*rs,ds=60*Tt,ci=(365*400+97)*24*ds;function Ct(e,t){return(e%t+t)%t}function mi(e,t,s){return e<100&&e>=0?new Date(e+400,t,s)-ci:new Date(e,t,s).valueOf()}function hi(e,t,s){return e<100&&e>=0?Date.UTC(e+400,t,s)-ci:Date.UTC(e,t,s)}function cd(e){var t,s;if(e=Fe(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(s=this._isUTC?hi:mi,e){case"year":t=s(this.year(),0,1);break;case"quarter":t=s(this.year(),this.month()-this.month()%3,1);break;case"month":t=s(this.year(),this.month(),1);break;case"week":t=s(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=s(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=s(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=Ct(t+(this._isUTC?0:this.utcOffset()*Tt),ds);break;case"minute":t=this._d.valueOf(),t-=Ct(t,Tt);break;case"second":t=this._d.valueOf(),t-=Ct(t,rs);break}return this._d.setTime(t),j.updateOffset(this,!0),this}function md(e){var t,s;if(e=Fe(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(s=this._isUTC?hi:mi,e){case"year":t=s(this.year()+1,0,1)-1;break;case"quarter":t=s(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=s(this.year(),this.month()+1,1)-1;break;case"week":t=s(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=s(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=s(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=ds-Ct(t+(this._isUTC?0:this.utcOffset()*Tt),ds)-1;break;case"minute":t=this._d.valueOf(),t+=Tt-Ct(t,Tt)-1;break;case"second":t=this._d.valueOf(),t+=rs-Ct(t,rs)-1;break}return this._d.setTime(t),j.updateOffset(this,!0),this}function hd(){return this._d.valueOf()-(this._offset||0)*6e4}function vd(){return Math.floor(this.valueOf()/1e3)}function fd(){return new Date(this.valueOf())}function pd(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function yd(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function gd(){return this.isValid()?this.toISOString():null}function wd(){return Is(this)}function _d(){return ct({},se(this))}function bd(){return se(this).overflow}function kd(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}q("N",0,0,"eraAbbr");q("NN",0,0,"eraAbbr");q("NNN",0,0,"eraAbbr");q("NNNN",0,0,"eraName");q("NNNNN",0,0,"eraNarrow");q("y",["y",1],"yo","eraYear");q("y",["yy",2],0,"eraYear");q("y",["yyy",3],0,"eraYear");q("y",["yyyy",4],0,"eraYear");U("N",ta);U("NN",ta);U("NNN",ta);U("NNNN",Ad);U("NNNNN",Vd);fe(["N","NN","NNN","NNNN","NNNNN"],function(e,t,s,a){var i=s._locale.erasParse(e,a,s._strict);i?se(s).era=i:se(s).invalidEra=e});U("y",Ot);U("yy",Ot);U("yyy",Ot);U("yyyy",Ot);U("yo",Yd);fe(["y","yy","yyy","yyyy"],$e);fe(["yo"],function(e,t,s,a){var i;s._locale._eraYearOrdinalRegex&&(i=e.match(s._locale._eraYearOrdinalRegex)),s._locale.eraYearOrdinalParse?t[$e]=s._locale.eraYearOrdinalParse(e,i):t[$e]=parseInt(e,10)});function xd(e,t){var s,a,i,n=this._eras||rt("en")._eras;for(s=0,a=n.length;s<a;++s){switch(typeof n[s].since){case"string":i=j(n[s].since).startOf("day"),n[s].since=i.valueOf();break}switch(typeof n[s].until){case"undefined":n[s].until=1/0;break;case"string":i=j(n[s].until).startOf("day").valueOf(),n[s].until=i.valueOf();break}}return n}function Dd(e,t,s){var a,i,n=this.eras(),o,r,c;for(e=e.toUpperCase(),a=0,i=n.length;a<i;++a)if(o=n[a].name.toUpperCase(),r=n[a].abbr.toUpperCase(),c=n[a].narrow.toUpperCase(),s)switch(t){case"N":case"NN":case"NNN":if(r===e)return n[a];break;case"NNNN":if(o===e)return n[a];break;case"NNNNN":if(c===e)return n[a];break}else if([o,r,c].indexOf(e)>=0)return n[a]}function Md(e,t){var s=e.since<=e.until?1:-1;return t===void 0?j(e.since).year():j(e.since).year()+(t-e.offset)*s}function Sd(){var e,t,s,a=this.localeData().eras();for(e=0,t=a.length;e<t;++e)if(s=this.clone().startOf("day").valueOf(),a[e].since<=s&&s<=a[e].until||a[e].until<=s&&s<=a[e].since)return a[e].name;return""}function Td(){var e,t,s,a=this.localeData().eras();for(e=0,t=a.length;e<t;++e)if(s=this.clone().startOf("day").valueOf(),a[e].since<=s&&s<=a[e].until||a[e].until<=s&&s<=a[e].since)return a[e].narrow;return""}function Cd(){var e,t,s,a=this.localeData().eras();for(e=0,t=a.length;e<t;++e)if(s=this.clone().startOf("day").valueOf(),a[e].since<=s&&s<=a[e].until||a[e].until<=s&&s<=a[e].since)return a[e].abbr;return""}function Ed(){var e,t,s,a,i=this.localeData().eras();for(e=0,t=i.length;e<t;++e)if(s=i[e].since<=i[e].until?1:-1,a=this.clone().startOf("day").valueOf(),i[e].since<=a&&a<=i[e].until||i[e].until<=a&&a<=i[e].since)return(this.year()-j(i[e].since).year())*s+i[e].offset;return this.year()}function jd(e){return ce(this,"_erasNameRegex")||sa.call(this),e?this._erasNameRegex:this._erasRegex}function $d(e){return ce(this,"_erasAbbrRegex")||sa.call(this),e?this._erasAbbrRegex:this._erasRegex}function Od(e){return ce(this,"_erasNarrowRegex")||sa.call(this),e?this._erasNarrowRegex:this._erasRegex}function ta(e,t){return t.erasAbbrRegex(e)}function Ad(e,t){return t.erasNameRegex(e)}function Vd(e,t){return t.erasNarrowRegex(e)}function Yd(e,t){return t._eraYearOrdinalRegex||Ot}function sa(){var e=[],t=[],s=[],a=[],i,n,o,r,c,d=this.eras();for(i=0,n=d.length;i<n;++i)o=at(d[i].name),r=at(d[i].abbr),c=at(d[i].narrow),t.push(o),e.push(r),s.push(c),a.push(o),a.push(r),a.push(c);this._erasRegex=new RegExp("^("+a.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+t.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+s.join("|")+")","i")}q(0,["gg",2],0,function(){return this.weekYear()%100});q(0,["GG",2],0,function(){return this.isoWeekYear()%100});function _s(e,t){q(0,[e,e.length],0,t)}_s("gggg","weekYear");_s("ggggg","weekYear");_s("GGGG","isoWeekYear");_s("GGGGG","isoWeekYear");U("G",fs);U("g",fs);U("GG",ye,Le);U("gg",ye,Le);U("GGGG",Rs,Us);U("gggg",Rs,Us);U("GGGGG",vs,ms);U("ggggg",vs,ms);Xt(["gggg","ggggg","GGGG","GGGGG"],function(e,t,s,a){t[a.substr(0,2)]=le(e)});Xt(["gg","GG"],function(e,t,s,a){t[a]=j.parseTwoDigitYear(e)});function Ld(e){return vi.call(this,e,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function Id(e){return vi.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function Nd(){return it(this.year(),1,4)}function Pd(){return it(this.isoWeekYear(),1,4)}function Wd(){var e=this.localeData()._week;return it(this.year(),e.dow,e.doy)}function Fd(){var e=this.localeData()._week;return it(this.weekYear(),e.dow,e.doy)}function vi(e,t,s,a,i){var n;return e==null?zt(this,a,i).year:(n=it(e,a,i),t>n&&(t=n),Ud.call(this,e,t,s,a,i))}function Ud(e,t,s,a,i){var n=Ga(e,t,s,a,i),o=Bt(n.year,0,n.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}q("Q",0,"Qo","quarter");U("Q",La);fe("Q",function(e,t){t[tt]=(le(e)-1)*3});function Rd(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}q("D",["DD",2],"Do","date");U("D",ye,At);U("DD",ye,Le);U("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient});fe(["D","DD"],qe);fe("Do",function(e,t){t[qe]=le(e.match(ye)[0])});var fi=Vt("Date",!0);q("DDD",["DDDD",3],"DDDo","dayOfYear");U("DDD",hs);U("DDDD",Ia);fe(["DDD","DDDD"],function(e,t,s){s._dayOfYear=le(e)});function Hd(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}q("m",["mm",2],0,"minute");U("m",ye,Hs);U("mm",ye,Le);fe(["m","mm"],Ue);var Bd=Vt("Minutes",!1);q("s",["ss",2],0,"second");U("s",ye,Hs);U("ss",ye,Le);fe(["s","ss"],st);var zd=Vt("Seconds",!1);q("S",0,0,function(){return~~(this.millisecond()/100)});q(0,["SS",2],0,function(){return~~(this.millisecond()/10)});q(0,["SSS",3],0,"millisecond");q(0,["SSSS",4],0,function(){return this.millisecond()*10});q(0,["SSSSS",5],0,function(){return this.millisecond()*100});q(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});q(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});q(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});q(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});U("S",hs,La);U("SS",hs,Le);U("SSS",hs,Ia);var mt,pi;for(mt="SSSS";mt.length<=9;mt+="S")U(mt,Ot);function Gd(e,t){t[gt]=le(("0."+e)*1e3)}for(mt="S";mt.length<=9;mt+="S")fe(mt,Gd);pi=Vt("Milliseconds",!1);q("z",0,0,"zoneAbbr");q("zz",0,0,"zoneName");function qd(){return this._isUTC?"UTC":""}function Zd(){return this._isUTC?"Coordinated Universal Time":""}var O=Kt.prototype;O.add=Fr;O.calendar=qr;O.clone=Zr;O.diff=sd;O.endOf=md;O.format=ld;O.from=od;O.fromNow=rd;O.to=dd;O.toNow=ud;O.get=io;O.invalidAt=bd;O.isAfter=Kr;O.isBefore=Jr;O.isBetween=Xr;O.isSame=Qr;O.isSameOrAfter=ed;O.isSameOrBefore=td;O.isValid=wd;O.lang=di;O.locale=ri;O.localeData=ui;O.max=wr;O.min=gr;O.parsingFlags=_d;O.set=no;O.startOf=cd;O.subtract=Ur;O.toArray=pd;O.toObject=yd;O.toDate=fd;O.toISOString=id;O.inspect=nd;typeof Symbol<"u"&&Symbol.for!=null&&(O[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});O.toJSON=gd;O.toString=ad;O.unix=vd;O.valueOf=hd;O.creationData=kd;O.eraName=Sd;O.eraNarrow=Td;O.eraAbbr=Cd;O.eraYear=Ed;O.year=Wa;O.isLeapYear=ao;O.weekYear=Ld;O.isoWeekYear=Id;O.quarter=O.quarters=Rd;O.month=Ba;O.daysInMonth=fo;O.week=O.weeks=xo;O.isoWeek=O.isoWeeks=Do;O.weeksInYear=Wd;O.weeksInWeekYear=Fd;O.isoWeeksInYear=Nd;O.isoWeeksInISOWeekYear=Pd;O.date=fi;O.day=O.days=Io;O.weekday=No;O.isoWeekday=Po;O.dayOfYear=Hd;O.hour=O.hours=zo;O.minute=O.minutes=Bd;O.second=O.seconds=zd;O.millisecond=O.milliseconds=pi;O.utcOffset=Cr;O.utc=jr;O.local=$r;O.parseZone=Or;O.hasAlignedHourOffset=Ar;O.isDST=Vr;O.isLocal=Lr;O.isUtcOffset=Ir;O.isUtc=ii;O.isUTC=ii;O.zoneAbbr=qd;O.zoneName=Zd;O.dates=We("dates accessor is deprecated. Use date instead.",fi);O.months=We("months accessor is deprecated. Use month instead",Ba);O.years=We("years accessor is deprecated. Use year instead",Wa);O.zone=We("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Er);O.isDSTShifted=We("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Yr);function Kd(e){return pe(e*1e3)}function Jd(){return pe.apply(null,arguments).parseZone()}function yi(e){return e}var me=Ps.prototype;me.calendar=Yl;me.longDateFormat=Pl;me.invalidDate=Fl;me.ordinal=Hl;me.preparse=yi;me.postformat=yi;me.relativeTime=zl;me.pastFuture=Gl;me.set=Al;me.eras=xd;me.erasParse=Dd;me.erasConvertYear=Md;me.erasAbbrRegex=$d;me.erasNameRegex=jd;me.erasNarrowRegex=Od;me.months=co;me.monthsShort=mo;me.monthsParse=vo;me.monthsRegex=yo;me.monthsShortRegex=po;me.week=wo;me.firstDayOfYear=ko;me.firstDayOfWeek=bo;me.weekdays=Oo;me.weekdaysMin=Vo;me.weekdaysShort=Ao;me.weekdaysParse=Lo;me.weekdaysRegex=Wo;me.weekdaysShortRegex=Fo;me.weekdaysMinRegex=Uo;me.isPM=Ho;me.meridiem=Go;function us(e,t,s,a){var i=rt(),n=Ke().set(a,t);return i[s](n,e)}function gi(e,t,s){if(lt(e)&&(t=e,e=void 0),e=e||"",t!=null)return us(e,t,s,"month");var a,i=[];for(a=0;a<12;a++)i[a]=us(e,a,s,"month");return i}function aa(e,t,s,a){typeof e=="boolean"?(lt(t)&&(s=t,t=void 0),t=t||""):(t=e,s=t,e=!1,lt(t)&&(s=t,t=void 0),t=t||"");var i=rt(),n=e?i._week.dow:0,o,r=[];if(s!=null)return us(t,(s+n)%7,a,"day");for(o=0;o<7;o++)r[o]=us(t,(o+n)%7,a,"day");return r}function Xd(e,t){return gi(e,t,"months")}function Qd(e,t){return gi(e,t,"monthsShort")}function eu(e,t,s){return aa(e,t,s,"weekdays")}function tu(e,t,s){return aa(e,t,s,"weekdaysShort")}function su(e,t,s){return aa(e,t,s,"weekdaysMin")}ht("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,s=le(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+s}});j.lang=We("moment.lang is deprecated. Use moment.locale instead.",ht);j.langData=We("moment.langData is deprecated. Use moment.localeData instead.",rt);var Xe=Math.abs;function au(){var e=this._data;return this._milliseconds=Xe(this._milliseconds),this._days=Xe(this._days),this._months=Xe(this._months),e.milliseconds=Xe(e.milliseconds),e.seconds=Xe(e.seconds),e.minutes=Xe(e.minutes),e.hours=Xe(e.hours),e.months=Xe(e.months),e.years=Xe(e.years),this}function wi(e,t,s,a){var i=Ge(t,s);return e._milliseconds+=a*i._milliseconds,e._days+=a*i._days,e._months+=a*i._months,e._bubble()}function iu(e,t){return wi(this,e,t,1)}function nu(e,t){return wi(this,e,t,-1)}function Da(e){return e<0?Math.floor(e):Math.ceil(e)}function lu(){var e=this._milliseconds,t=this._days,s=this._months,a=this._data,i,n,o,r,c;return e>=0&&t>=0&&s>=0||e<=0&&t<=0&&s<=0||(e+=Da(Ys(s)+t)*864e5,t=0,s=0),a.milliseconds=e%1e3,i=Pe(e/1e3),a.seconds=i%60,n=Pe(i/60),a.minutes=n%60,o=Pe(n/60),a.hours=o%24,t+=Pe(o/24),c=Pe(_i(t)),s+=c,t-=Da(Ys(c)),r=Pe(s/12),s%=12,a.days=t,a.months=s,a.years=r,this}function _i(e){return e*4800/146097}function Ys(e){return e*146097/4800}function ou(e){if(!this.isValid())return NaN;var t,s,a=this._milliseconds;if(e=Fe(e),e==="month"||e==="quarter"||e==="year")switch(t=this._days+a/864e5,s=this._months+_i(t),e){case"month":return s;case"quarter":return s/3;case"year":return s/12}else switch(t=this._days+Math.round(Ys(this._months)),e){case"week":return t/7+a/6048e5;case"day":return t+a/864e5;case"hour":return t*24+a/36e5;case"minute":return t*1440+a/6e4;case"second":return t*86400+a/1e3;case"millisecond":return Math.floor(t*864e5)+a;default:throw new Error("Unknown unit "+e)}}function dt(e){return function(){return this.as(e)}}var bi=dt("ms"),ru=dt("s"),du=dt("m"),uu=dt("h"),cu=dt("d"),mu=dt("w"),hu=dt("M"),vu=dt("Q"),fu=dt("y"),pu=bi;function yu(){return Ge(this)}function gu(e){return e=Fe(e),this.isValid()?this[e+"s"]():NaN}function _t(e){return function(){return this.isValid()?this._data[e]:NaN}}var wu=_t("milliseconds"),_u=_t("seconds"),bu=_t("minutes"),ku=_t("hours"),xu=_t("days"),Du=_t("months"),Mu=_t("years");function Su(){return Pe(this.days()/7)}var Qe=Math.round,Dt={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function Tu(e,t,s,a,i){return i.relativeTime(t||1,!!s,e,a)}function Cu(e,t,s,a){var i=Ge(e).abs(),n=Qe(i.as("s")),o=Qe(i.as("m")),r=Qe(i.as("h")),c=Qe(i.as("d")),d=Qe(i.as("M")),h=Qe(i.as("w")),v=Qe(i.as("y")),p=n<=s.ss&&["s",n]||n<s.s&&["ss",n]||o<=1&&["m"]||o<s.m&&["mm",o]||r<=1&&["h"]||r<s.h&&["hh",r]||c<=1&&["d"]||c<s.d&&["dd",c];return s.w!=null&&(p=p||h<=1&&["w"]||h<s.w&&["ww",h]),p=p||d<=1&&["M"]||d<s.M&&["MM",d]||v<=1&&["y"]||["yy",v],p[2]=t,p[3]=+e>0,p[4]=a,Tu.apply(null,p)}function Eu(e){return e===void 0?Qe:typeof e=="function"?(Qe=e,!0):!1}function ju(e,t){return Dt[e]===void 0?!1:t===void 0?Dt[e]:(Dt[e]=t,e==="s"&&(Dt.ss=t-1),!0)}function $u(e,t){if(!this.isValid())return this.localeData().invalidDate();var s=!1,a=Dt,i,n;return typeof e=="object"&&(t=e,e=!1),typeof e=="boolean"&&(s=e),typeof t=="object"&&(a=Object.assign({},Dt,t),t.s!=null&&t.ss==null&&(a.ss=t.s-1)),i=this.localeData(),n=Cu(this,!s,a,i),s&&(n=i.pastFuture(+this,n)),i.postformat(n)}var Ts=Math.abs;function kt(e){return(e>0)-(e<0)||+e}function bs(){if(!this.isValid())return this.localeData().invalidDate();var e=Ts(this._milliseconds)/1e3,t=Ts(this._days),s=Ts(this._months),a,i,n,o,r=this.asSeconds(),c,d,h,v;return r?(a=Pe(e/60),i=Pe(a/60),e%=60,a%=60,n=Pe(s/12),s%=12,o=e?e.toFixed(3).replace(/\.?0+$/,""):"",c=r<0?"-":"",d=kt(this._months)!==kt(r)?"-":"",h=kt(this._days)!==kt(r)?"-":"",v=kt(this._milliseconds)!==kt(r)?"-":"",c+"P"+(n?d+n+"Y":"")+(s?d+s+"M":"")+(t?h+t+"D":"")+(i||a||e?"T":"")+(i?v+i+"H":"")+(a?v+a+"M":"")+(e?v+o+"S":"")):"P0D"}var re=ws.prototype;re.isValid=Dr;re.abs=au;re.add=iu;re.subtract=nu;re.as=ou;re.asMilliseconds=bi;re.asSeconds=ru;re.asMinutes=du;re.asHours=uu;re.asDays=cu;re.asWeeks=mu;re.asMonths=hu;re.asQuarters=vu;re.asYears=fu;re.valueOf=pu;re._bubble=lu;re.clone=yu;re.get=gu;re.milliseconds=wu;re.seconds=_u;re.minutes=bu;re.hours=ku;re.days=xu;re.weeks=Su;re.months=Du;re.years=Mu;re.humanize=$u;re.toISOString=bs;re.toString=bs;re.toJSON=bs;re.locale=ri;re.localeData=ui;re.toIsoString=We("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",bs);re.lang=di;q("X",0,0,"unix");q("x",0,0,"valueOf");U("x",fs);U("X",Jl);fe("X",function(e,t,s){s._d=new Date(parseFloat(e)*1e3)});fe("x",function(e,t,s){s._d=new Date(le(e))});//! moment.js
j.version="2.30.1";$l(pe);j.fn=O;j.min=_r;j.max=br;j.now=kr;j.utc=Ke;j.unix=Kd;j.months=Xd;j.isDate=Zt;j.locale=ht;j.invalid=cs;j.duration=Ge;j.isMoment=Be;j.weekdays=eu;j.parseZone=Jd;j.localeData=rt;j.isDuration=is;j.monthsShort=Qd;j.weekdaysMin=su;j.defineLocale=Zs;j.updateLocale=Jo;j.locales=Xo;j.weekdaysShort=tu;j.normalizeUnits=Fe;j.relativeTimeRounding=Eu;j.relativeTimeThreshold=ju;j.calendarFormat=Gr;j.prototype=O;j.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};const Ou={class:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow"},Au={class:"flex justify-between items-center mb-4"},Vu={class:"flex gap-3"},Yu={class:"flex rounded-md shadow-sm mr-3"},Lu={key:0,class:"mb-4 bg-gray-50 p-4 rounded-lg"},Iu={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Nu=["value"],Pu={class:"mt-1 relative rounded-md shadow-sm"},Wu={key:1,class:"text-center text-gray-600 text-sm animate-pulse py-4"},Fu={key:2,class:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md"},Uu={key:3},Ru={key:0,class:"space-y-4"},Hu={key:0,class:"flex justify-between"},Bu={class:"flex-grow"},zu={class:"text-sm text-red-500 italic"},Gu={class:"flex items-center mt-1"},qu={class:"text-xs text-gray-500"},Zu={key:1},Ku={class:"flex-grow"},Ju={class:"flex justify-between items-center mb-3"},Xu={class:"text-sm text-gray-600 bg-blue-100 px-2 py-1 rounded-full"},Qu={class:"mb-3"},ec={class:"text-sm text-gray-700 ml-6"},tc={class:"mb-3"},sc={class:"text-sm text-gray-700 ml-6"},ac={class:"mb-2"},ic={class:"text-sm text-gray-700 ml-6"},nc={class:"flex items-center mt-3 pt-2 border-t border-blue-200"},lc={class:"text-xs text-gray-500"},oc={key:1,class:"text-gray-400 text-sm"},rc={key:4,class:"mt-4"},dc={class:"flex justify-between items-center mb-6"},uc={class:"text-lg font-medium text-gray-900"},cc=["innerHTML"],mc=["innerHTML"],hc={key:0,class:"mt-1 text-xs p-1 rounded bg-red-50 border-l-2 border-red-500 text-red-700"},vc={class:"mt-6 bg-white rounded-lg shadow p-4"},fc={key:0},pc={class:"font-medium text-gray-800 mb-2"},yc={class:"font-medium text-blue-800"},gc={class:"text-sm text-gray-600 mt-1"},wc={key:1,class:"text-gray-500 text-sm"},_c={__name:"DailyStandups",props:{projectId:{type:Number,required:!0},users:{type:Array,default:()=>[]}},emits:["standupAdded"],setup(e,{emit:t}){const s=e,a=w("list"),i=w(!1),n=w(!1),o=w(""),r=w([]),c=w(""),d=Re({startDate:"",endDate:"",search:"",userId:""}),h=T=>{const b=j(T);return b.isValid()?{start:b.clone().startOf("month").format("YYYY-MM-DD"),end:b.clone().endOf("month").format("YYYY-MM-DD")}:(console.warn("getMonthRange received an invalid input, defaulting to current date:",T),{start:j().startOf("month").format("YYYY-MM-DD"),end:j().endOf("month").format("YYYY-MM-DD")})};let v=null;const p=()=>{clearTimeout(v),v=setTimeout(()=>{g()},500)},_=async()=>{n.value=!0,o.value="";try{const T=new URLSearchParams;d.startDate&&T.append("start_date",d.startDate),d.endDate&&T.append("end_date",d.endDate),d.search&&T.append("search",d.search),d.userId&&T.append("user_id",String(d.userId));const b=T.toString(),E=`/api/projects/${s.projectId}/sections/notes?type=standup${b?`&${b}`:""}`,Y=await window.axios.get(E);r.value=Y.data.filter(L=>L.type==="standup")}catch(T){console.error("Error fetching project standups:",T),o.value="Failed to load standups. Please try again."}finally{n.value=!1}},g=()=>{_()},k=()=>{d.search="",d.userId="",d.startDate="",d.endDate="",_()},D=()=>{c.value=j(c.value).subtract(1,"month").format("YYYY-MM-DD")},x=()=>{c.value=j(c.value).add(1,"month").format("YYYY-MM-DD")};ke(()=>c.value,T=>{if(a.value==="calendar"&&T){const b=h(T);d.startDate=b.start,d.endDate=b.end,_()}}),ke(()=>a.value,T=>{T==="calendar"?(d.search="",d.userId="",c.value=h(new Date).start):(d.startDate="",d.endDate="",_())});const N=B(()=>(r.value||[]).map(T=>{var Y;if(!(T!=null&&T.created_at))return null;const b=j(T.created_at);if(!b.isValid())return null;const E=K(T.content);return{start:b.format("YYYY-MM-DD HH:mm"),end:b.format("YYYY-MM-DD HH:mm"),title:`${((Y=T.user)==null?void 0:Y.name)||"Unknown"} - Standup`,content:`Yesterday: ${E.yesterday}
Today: ${E.today}
Blockers: ${E.blockers}`,class:"standup-event",standupData:T}}).filter(Boolean));ze(()=>{_()});const P=B(()=>{if(!r.value)return[];let T=[...r.value];if(d.startDate&&(T=T.filter(b=>b.created_at&&j(b.created_at).isSameOrAfter(d.startDate,"day"))),d.endDate&&(T=T.filter(b=>b.created_at&&j(b.created_at).isSameOrBefore(d.endDate,"day"))),d.userId&&(T=T.filter(b=>b.user_id===parseInt(d.userId))),d.search){const b=d.search.toLowerCase();T=T.filter(E=>E.content&&E.content!=="[Encrypted content could not be decrypted]"&&E.content.toLowerCase().includes(b))}return T.sort((b,E)=>j(E.created_at).valueOf()-j(b.created_at).valueOf())}),$=T=>{const b=j(T).day();return b>=1&&b<=5},he=T=>j(T).isBefore(j(),"day"),ae=(T,b)=>j(T).isSame(b,"day"),K=T=>{var M,I,G,C;if(!T||typeof T!="string"||T==="[Encrypted content could not be decrypted]"||T.trim()==="")return{yesterday:"N/A",today:"N/A",blockers:"N/A",date:"N/A"};const b=((M=T.match(/\*\*Yesterday:\*\* ([^\n]+)/))==null?void 0:M[1].trim())||"Nothing",E=((I=T.match(/\*\*Today:\*\* ([^\n]+)/))==null?void 0:I[1].trim())||"Nothing",Y=((G=T.match(/\*\*Blockers:\*\* ([^\n]+)/))==null?void 0:G[1].trim())||"None",L=((C=T.match(/\*\*Daily Standup - ([^*]+)\*\*/))==null?void 0:C[1].trim())||j().format("L");return{yesterday:b,today:E,blockers:Y,date:L}},A=B(()=>{const T={};return(r.value||[]).forEach(b=>{if(!(b!=null&&b.created_at))return;const E=j(b.created_at).format("YYYY-MM-DD");T[E]||(T[E]=[]),T[E].push(b)}),T});return(T,b)=>(u(),m("div",Ou,[l("div",Au,[b[11]||(b[11]=l("h4",{class:"text-lg font-semibold text-gray-900"},"Daily Standups",-1)),l("div",Vu,[l("div",Yu,[l("button",{type:"button",onClick:b[0]||(b[0]=E=>a.value="list"),class:ie([a.value==="list"?"bg-indigo-100 text-indigo-700":"bg-white text-gray-700 hover:text-gray-500","px-4 py-2 text-sm font-medium rounded-l-md border border-gray-300 focus:z-10 focus:outline-none focus:ring-1 focus:ring-indigo-500"])},b[8]||(b[8]=[l("span",{class:"flex items-center"},[l("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 10h16M4 14h16M4 18h16"})]),W(" List ")],-1)]),2),l("button",{type:"button",onClick:b[1]||(b[1]=E=>a.value="calendar"),class:ie([a.value==="calendar"?"bg-indigo-100 text-indigo-700":"bg-white text-gray-700 hover:text-gray-500","px-4 py-2 text-sm font-medium rounded-r-md border border-gray-300 focus:z-10 focus:outline-none focus:ring-1 focus:ring-indigo-500"])},b[9]||(b[9]=[l("span",{class:"flex items-center"},[l("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})]),W(" Calendar ")],-1)]),2)]),f(Te,{class:"bg-blue-600 hover:bg-blue-700 transition-colors",onClick:b[2]||(b[2]=E=>i.value=!0)},{default:V(()=>b[10]||(b[10]=[W(" Submit Standup ",-1)])),_:1,__:[10]})])]),a.value==="list"?(u(),m("div",Lu,[l("div",Iu,[l("div",null,[b[12]||(b[12]=l("label",{for:"standupStartDate",class:"block text-sm font-medium text-gray-700 mb-1"},"From Date",-1)),Me(l("input",{type:"date",id:"standupStartDate","onUpdate:modelValue":b[3]||(b[3]=E=>d.startDate=E),class:"mt-1 block w-full border-gray-300 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",onChange:g},null,544),[[Ye,d.startDate]])]),l("div",null,[b[13]||(b[13]=l("label",{for:"standupEndDate",class:"block text-sm font-medium text-gray-700 mb-1"},"To Date",-1)),Me(l("input",{type:"date",id:"standupEndDate","onUpdate:modelValue":b[4]||(b[4]=E=>d.endDate=E),class:"mt-1 block w-full border-gray-300 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",onChange:g},null,544),[[Ye,d.endDate]])]),l("div",null,[b[15]||(b[15]=l("label",{for:"standupUserFilter",class:"block text-sm font-medium text-gray-700 mb-1"},"User",-1)),Me(l("select",{id:"standupUserFilter","onUpdate:modelValue":b[5]||(b[5]=E=>d.userId=E),class:"mt-1 block w-full border-gray-300 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",onChange:g},[b[14]||(b[14]=l("option",{value:""},"All Users",-1)),(u(!0),m(te,null,oe(s.users,E=>(u(),m("option",{key:E.id,value:E.id},y(E.name),9,Nu))),128))],544),[[qt,d.userId]])]),l("div",null,[b[17]||(b[17]=l("label",{for:"standupSearchFilter",class:"block text-sm font-medium text-gray-700 mb-1"},"Search Content",-1)),l("div",Pu,[Me(l("input",{type:"text",id:"standupSearchFilter","onUpdate:modelValue":b[6]||(b[6]=E=>d.search=E),class:"focus:ring-indigo-500 focus:border-indigo-500 block w-full pr-10 sm:text-sm border-gray-300 rounded-md",placeholder:"Search in standup content...",onInput:p},null,544),[[Ye,d.search]]),b[16]||(b[16]=l("div",{class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},[l("svg",{class:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[l("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})])],-1))])])]),l("div",{class:"mt-3 flex justify-end"},[l("button",{type:"button",class:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:k}," Reset Filters ")])])):S("",!0),n.value?(u(),m("div",Wu,"Loading standups...")):o.value?(u(),m("div",Fu,y(o.value),1)):a.value==="list"?(u(),m("div",Uu,[P.value.length?(u(),m("div",Ru,[(u(!0),m(te,null,oe(P.value,E=>{var Y,L;return u(),m("div",{key:E.id,class:"p-4 bg-blue-50 rounded-md shadow-sm hover:bg-blue-100 transition-colors border-l-4 border-blue-500"},[E.content==="[Encrypted content could not be decrypted]"?(u(),m("div",Hu,[l("div",Bu,[l("p",zu,[W(y(E.content),1),b[18]||(b[18]=l("span",{class:"text-xs text-red-400 block mt-1"},"(There was an issue decrypting this standup. Please contact an administrator.)",-1))]),l("div",Gu,[l("p",qu,"Submitted by "+y(((Y=E.user)==null?void 0:Y.name)||"Unknown")+" on "+y(X(j)(E.created_at).format("L")),1)])])])):(u(),m("div",Zu,[l("div",Ku,[l("div",Ju,[b[19]||(b[19]=l("h3",{class:"text-md font-bold text-gray-800"},"Daily Standup",-1)),l("span",Xu,y(K(E.content).date),1)]),l("div",Qu,[b[20]||(b[20]=l("div",{class:"flex items-center mb-1"},[l("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 text-blue-600 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})]),l("span",{class:"font-semibold text-sm text-gray-700"},"Yesterday:")],-1)),l("p",ec,y(K(E.content).yesterday),1)]),l("div",tc,[b[21]||(b[21]=l("div",{class:"flex items-center mb-1"},[l("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 text-green-600 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})]),l("span",{class:"font-semibold text-sm text-gray-700"},"Today:")],-1)),l("p",sc,y(K(E.content).today),1)]),l("div",ac,[b[22]||(b[22]=l("div",{class:"flex items-center mb-1"},[l("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 text-red-600 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})]),l("span",{class:"font-semibold text-sm text-gray-700"},"Blockers:")],-1)),l("p",ic,y(K(E.content).blockers),1)]),l("div",nc,[l("p",lc,"Submitted by "+y(((L=E.user)==null?void 0:L.name)||"Unknown")+" on "+y(X(j)(E.created_at).format("L")),1)])])]))])}),128))])):(u(),m("p",oc,"No daily standups found for the selected criteria."))])):a.value==="calendar"?(u(),m("div",rc,[l("div",dc,[l("button",{onClick:D,class:"p-2 rounded-full bg-gray-100 hover:bg-gray-200 transition-colors"},b[23]||(b[23]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])),l("h3",uc,y(c.value?X(j)(c.value).format("MMMM YYYY"):"Loading..."),1),l("button",{onClick:x,class:"p-2 rounded-full bg-gray-100 hover:bg-gray-200 transition-colors"},b[24]||(b[24]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)]))]),f(X(jl),{class:"vuecal--blue-theme","active-view":"month",events:N.value,"selected-date":c.value,"hide-title-bar":"","disable-views":["week","day","years","year"],twelveHour:!0,"time-from":480,"time-to":1200,"time-step":30,"events-on-month-view":"short"},{event:V(({event:E})=>[l("div",{class:"vuecal__event-title",innerHTML:E.title},null,8,cc),l("div",{class:"vuecal__event-content",innerHTML:E.content},null,8,mc)]),"cell-content":V(({view:E,date:Y})=>[E.id==="month"?(u(),m(te,{key:0},[Y&&$(Y)&&he(Y)&&!N.value.some(L=>ae(L.start,Y))?(u(),m("div",hc," No standups ")):S("",!0)],64)):S("",!0)]),_:1},8,["events","selected-date"]),b[26]||(b[26]=Fi('<div class="mt-4 flex items-center space-x-4 text-sm"><div class="flex items-center"><span class="inline-block w-3 h-3 bg-blue-50 border-l-2 border-blue-500 mr-1"></span><span>Standup submitted</span></div><div class="flex items-center"><span class="inline-block w-3 h-3 bg-red-50 border-l-2 border-red-500 mr-1"></span><span>Missing standup</span></div></div>',1)),l("div",vc,[b[25]||(b[25]=l("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Standups Outside Current Month View",-1)),Object.entries(A.value).some(([E])=>!X(j)(E).isSame(c.value,"month"))?(u(),m("div",fc,[(u(!0),m(te,null,oe(Object.entries(A.value).filter(([E])=>!X(j)(E).isSame(c.value,"month")).sort((E,Y)=>X(j)(E[0]).valueOf()-X(j)(Y[0]).valueOf()),([E,Y])=>(u(),m("div",{key:E,class:"mb-4"},[l("div",pc,y(X(j)(E).format("dddd, MMMM Do YYYY")),1),(u(!0),m(te,null,oe(Y,L=>{var M;return u(),m("div",{key:L.id,class:"p-2 mb-2 rounded bg-blue-50 border-l-2 border-blue-500"},[l("div",yc,y(((M=L.user)==null?void 0:M.name)||"Unknown"),1),l("div",gc,y(X(j)(L.created_at).format("LT")),1)])}),128))]))),128))])):(u(),m("div",wc,"No standups outside the current month view."))])])):S("",!0),f(Sa,{show:i.value,onClose:b[7]||(b[7]=E=>i.value=!1),onStandupAdded:_,projectId:e.projectId},null,8,["show","projectId"])]))}},bc={class:"relative"},kc={key:0,class:"text-gray-400 text-sm"},xc=["onClick"],Dc=["placeholder"],Mc={key:0,class:"absolute z-50 w-full bg-white border border-gray-300 rounded-md shadow-lg mt-1 max-h-60 overflow-y-auto"},Sc={class:"py-1"},Tc={key:0,class:"px-4 py-2 text-gray-500 text-sm"},Cc=["onClick"],Ec={__name:"CustomMultiSelect",props:{modelValue:{type:Array,default:()=>[]},options:{type:Array,default:()=>[],required:!0},placeholder:{type:String,default:"Select items"},labelKey:{type:String,default:"name"},trackBy:{type:String,default:"id"}},emits:["update:modelValue"],setup(e,{emit:t}){const s=e,a=t,i=w(!1),n=w(""),o=B(()=>{if(!n.value)return s.options;const h=n.value.toLowerCase();return s.options.filter(v=>v[s.labelKey].toLowerCase().includes(h))});ke(()=>s.modelValue,h=>{},{deep:!0});const r=h=>{const v=[...s.modelValue],p=v.findIndex(_=>_===h[s.trackBy]);p===-1?v.push(h[s.trackBy]):v.splice(p,1),a("update:modelValue",v),n.value=""},c=h=>{const v=s.options.find(p=>p[s.trackBy]===h);return v?v[s.labelKey]:""},d=h=>s.modelValue.includes(h);return(h,v)=>{const p=Ui("click-outside");return Me((u(),m("div",bc,[l("div",{class:"flex flex-wrap items-center w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm cursor-pointer min-h-[38px] bg-white focus-within:border-indigo-500 focus-within:ring-indigo-500",onClick:v[2]||(v[2]=_=>i.value=!i.value)},[e.modelValue.length===0&&!n.value?(u(),m("span",kc,y(e.placeholder),1)):S("",!0),(u(!0),m(te,null,oe(e.modelValue,_=>(u(),m("div",{key:_,class:"inline-flex items-center bg-indigo-100 text-indigo-800 text-xs font-medium px-2.5 py-0.5 rounded mr-2 mb-1"},[W(y(c(_))+" ",1),l("button",{type:"button",onClick:Ne(g=>r(e.options.find(k=>k[e.trackBy]===_)),["stop"]),class:"ml-1 text-indigo-800 hover:text-indigo-900 focus:outline-none"},v[3]||(v[3]=[l("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,xc)]))),128)),Me(l("input",{type:"text","onUpdate:modelValue":v[0]||(v[0]=_=>n.value=_),onInput:v[1]||(v[1]=_=>i.value=!0),class:"flex-grow border-none focus:ring-0 p-0 text-sm placeholder-gray-400 bg-transparent outline-none",placeholder:e.modelValue.length===0?"Search...":""},null,40,Dc),[[Ye,n.value]])]),i.value?(u(),m("div",Mc,[l("ul",Sc,[o.value.length===0?(u(),m("li",Tc,"No items found.")):S("",!0),(u(!0),m(te,null,oe(o.value,_=>(u(),m("li",{key:_[e.trackBy],class:ie(["px-4 py-2 cursor-pointer hover:bg-gray-100 text-sm",{"bg-indigo-50 text-indigo-900":d(_[e.trackBy])}]),onClick:g=>r(_)},y(_[e.labelKey]),11,Cc))),128))])])):S("",!0)])),[[p,()=>i.value=!1]])}}},ia=ot(Ec,[["__scopeId","data-v-5326f069"]]),jc={class:"mt-6 space-y-6"},$c={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Oc={class:"flex items-center"},Ac={class:"flex items-center"},Vc={__name:"MeetingModal",props:{show:{type:Boolean,default:!1},projectId:{type:Number,required:!0},projectUsers:{type:Array,default:()=>[]}},emits:["close","saved"],setup(e,{emit:t}){const s=e,a=t,i=()=>Intl.DateTimeFormat().resolvedOptions().timeZone,n=["Africa/Cairo","Africa/Johannesburg","Africa/Lagos","America/Anchorage","America/Bogota","America/Chicago","America/Denver","America/Los_Angeles","America/Mexico_City","America/New_York","America/Phoenix","America/Sao_Paulo","America/Toronto","America/Vancouver","Asia/Dubai","Asia/Hong_Kong","Asia/Jerusalem","Asia/Kolkata","Asia/Seoul","Asia/Shanghai","Asia/Singapore","Asia/Tokyo","Australia/Melbourne","Australia/Perth","Australia/Sydney","Europe/Amsterdam","Europe/Berlin","Europe/Dublin","Europe/Istanbul","Europe/London","Europe/Madrid","Europe/Moscow","Europe/Paris","Europe/Rome","Pacific/Auckland","Pacific/Honolulu","UTC","GMT","Europe/Belfast","America/Adak","America/Boise","America/Detroit","America/Indianapolis","America/Juneau","America/Louisville","America/Menominee","America/Nome","America/Sitka","America/Yakutat","Asia/Karachi","Asia/Kolkata","Pacific/Auckland","Pacific/Chatham","Europe/Athens","Europe/Brussels","Europe/Budapest","Europe/Copenhagen","Europe/Helsinki","Europe/Lisbon","Europe/Oslo","Europe/Stockholm","Europe/Zurich","Europe/Vienna","Europe/Warsaw","Europe/Zurich","Europe/Sofia","Europe/Prague","Europe/Malta","Europe/Luxembourg","Europe/Kiev","Europe/Rome"].sort(),o=B(()=>n.map(x=>({value:x,label:x}))),r=B(()=>{const x=i(),N=n.includes(x);return console.log("DEBUG: Is detected timezone in list?",N,"Detected:",x),N?x:(console.log("DEBUG: Falling back to UTC for timezone as detected timezone not in list."),"UTC")}),c=Re({summary:"",description:"",start_datetime:"",end_datetime:"",attendee_user_ids:[],location:"",with_google_meet:!0,timezone:r.value,enable_recording:!1}),d=()=>{c.summary="",c.description="",c.attendee_user_ids=[],c.location="",c.with_google_meet=!0,c.timezone=r.value,c.enable_recording=!1,v(),console.log("DEBUG: Form reset. Current timezone in form:",c.timezone)},h=x=>{const N=new Date(x),P=N.getFullYear(),$=String(N.getMonth()+1).padStart(2,"0"),he=String(N.getDate()).padStart(2,"0"),ae=String(N.getHours()).padStart(2,"0"),K=String(N.getMinutes()).padStart(2,"0");return`${P}-${$}-${he}T${ae}:${K}`},v=()=>{const x=new Date,N=new Date(x.getTime()+3600*1e3),P=new Date(x.getTime()+7200*1e3);c.start_datetime=h(N),c.end_datetime=h(P),console.log("DEBUG: Default times set. Start:",c.start_datetime,"End:",c.end_datetime)};v(),ke(()=>s.show,x=>{x&&d()},{immediate:!0});const p=x=>x?(console.log(x),x.replace("T"," ")+":00"):"",_=x=>{const N={...x};return N.start_datetime=p(x.start_datetime),N.end_datetime=p(x.end_datetime),console.log(N),N},g=B(()=>`/api/projects/${s.projectId}/meetings`),k=x=>{a("saved",x)},D=x=>{console.error("DEBUG: MeetingModal submission error:",x)};return(x,N)=>(u(),ue(vt,{show:e.show,title:"Schedule a Meeting","api-endpoint":g.value,"http-method":"post","form-data":c,"format-data-for-api":_,"submit-button-text":"Schedule Meeting","success-message":"Meeting scheduled successfully!",onClose:N[9]||(N[9]=P=>x.$emit("close")),onSubmitted:k,onError:D},{default:V(({errors:P})=>[l("div",jc,[l("div",null,[f(z,{for:"summary",value:"Meeting Title"}),f(be,{id:"summary",modelValue:c.summary,"onUpdate:modelValue":N[0]||(N[0]=$=>c.summary=$),type:"text",class:"mt-1 block w-full",placeholder:"Project Status Meeting",required:""},null,8,["modelValue"]),f(ve,{message:P.summary?P.summary[0]:"",class:"mt-2"},null,8,["message"])]),l("div",null,[f(z,{for:"description",value:"Description"}),Me(l("textarea",{id:"description","onUpdate:modelValue":N[1]||(N[1]=$=>c.description=$),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",rows:"3",placeholder:"Meeting agenda and details..."},null,512),[[Ye,c.description]]),f(ve,{message:P.description?P.description[0]:"",class:"mt-2"},null,8,["message"])]),l("div",$c,[l("div",null,[f(z,{for:"start_datetime",value:"Start Date & Time"}),f(be,{id:"start_datetime",modelValue:c.start_datetime,"onUpdate:modelValue":N[2]||(N[2]=$=>c.start_datetime=$),type:"datetime-local",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),f(ve,{message:P.start_datetime?P.start_datetime[0]:"",class:"mt-2"},null,8,["message"])]),l("div",null,[f(z,{for:"end_datetime",value:"End Date & Time"}),f(be,{id:"end_datetime",modelValue:c.end_datetime,"onUpdate:modelValue":N[3]||(N[3]=$=>c.end_datetime=$),type:"datetime-local",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),f(ve,{message:P.end_datetime?P.end_datetime[0]:"",class:"mt-2"},null,8,["message"])])]),l("div",null,[f(z,{for:"attendees",value:"Attendees"}),f(ia,{id:"attendees",modelValue:c.attendee_user_ids,"onUpdate:modelValue":N[4]||(N[4]=$=>c.attendee_user_ids=$),options:s.projectUsers,"label-key":"name","track-by":"id",placeholder:"Select attendees",class:"mt-1"},null,8,["modelValue","options"]),N[10]||(N[10]=l("p",{class:"mt-1 text-sm text-gray-500"}," Select project members to invite to this meeting ",-1)),f(ve,{message:P.attendee_user_ids?P.attendee_user_ids[0]:"",class:"mt-2"},null,8,["message"])]),l("div",null,[f(z,{for:"location",value:"Location (Optional)"}),f(be,{id:"location",modelValue:c.location,"onUpdate:modelValue":N[5]||(N[5]=$=>c.location=$),type:"text",class:"mt-1 block w-full",placeholder:"Office, Conference Room, etc."},null,8,["modelValue"]),f(ve,{message:P.location?P.location[0]:"",class:"mt-2"},null,8,["message"])]),l("div",null,[f(z,{for:"timezone",value:"Timezone"}),f(Ve,{id:"timezone",modelValue:c.timezone,"onUpdate:modelValue":N[6]||(N[6]=$=>c.timezone=$),options:o.value,"value-key":"value","label-key":"label",placeholder:"Select timezone",class:"mt-1"},null,8,["modelValue","options"]),N[11]||(N[11]=l("p",{class:"mt-1 text-sm text-gray-500"}," Select your timezone for this meeting ",-1)),f(ve,{message:P.timezone?P.timezone[0]:"",class:"mt-2"},null,8,["message"])]),l("div",Oc,[Me(l("input",{id:"with_google_meet","onUpdate:modelValue":N[7]||(N[7]=$=>c.with_google_meet=$),type:"checkbox",class:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,512),[[ha,c.with_google_meet]]),N[12]||(N[12]=l("label",{for:"with_google_meet",class:"ml-2 block text-sm text-gray-900"}," Create Google Meet video conference ",-1))]),l("div",Ac,[Me(l("input",{id:"enable_recording","onUpdate:modelValue":N[8]||(N[8]=$=>c.enable_recording=$),type:"checkbox",class:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,512),[[ha,c.enable_recording]]),N[13]||(N[13]=l("label",{for:"enable_recording",class:"ml-2 block text-sm text-gray-900"}," Enable recording and transcript ",-1))])])]),_:1},8,["show","api-endpoint","form-data"]))}},Yc=ot(Vc,[["__scopeId","data-v-4e53a3e5"]]),Lc={class:"p-6"},Ic={key:0,class:"mb-4 p-3 bg-green-100 text-green-800 rounded-md"},Nc={key:1,class:"mb-4 p-3 bg-red-100 text-red-800 rounded-md"},Pc={class:"mb-4"},Wc=["value"],Fc={class:"mt-6 flex justify-end space-x-3"},Uc={__name:"ProjectMagicLinkModal",props:{show:{type:Boolean,default:!1},projectId:{type:Number,required:!0},projectClients:{type:Array,default:()=>[]}},emits:["close"],setup(e,{emit:t}){const s=e,a=t,i=w(!1),n=w(""),o=w(""),r=w(""),c=async()=>{var h,v;if(!n.value){r.value="Please select a client email";return}i.value=!0,o.value="",r.value="";try{const p=await window.axios.post(`/api/projects/${s.projectId}/magic-link`,{email:n.value});p.data.success?(o.value=p.data.message,n.value=""):r.value=p.data.message||"Failed to send magic link"}catch(p){console.error("Error sending magic link:",p),r.value=((v=(h=p.response)==null?void 0:h.data)==null?void 0:v.message)||"An error occurred while sending the magic link"}finally{i.value=!1}},d=()=>{n.value="",o.value="",r.value="",a("close")};return(h,v)=>(u(),ue(nt,{show:e.show,onClose:d},{default:V(()=>[l("div",Lc,[l("div",{class:"flex justify-between items-center mb-4"},[v[2]||(v[2]=l("h3",{class:"text-lg font-semibold text-gray-900"},"Send Magic Link to Client",-1)),l("button",{onClick:d,class:"text-gray-400 hover:text-gray-500"},v[1]||(v[1]=[l("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),o.value?(u(),m("div",Ic,y(o.value),1)):S("",!0),r.value?(u(),m("div",Nc,y(r.value),1)):S("",!0),l("div",Pc,[f(z,{for:"client-email",value:"Select Client"}),Me(l("select",{id:"client-email","onUpdate:modelValue":v[0]||(v[0]=p=>n.value=p),class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full"},[v[3]||(v[3]=l("option",{value:""},"Select a client",-1)),(u(!0),m(te,null,oe(e.projectClients,p=>(u(),m("option",{key:p.id,value:p.email},y(p.name)+" ("+y(p.email)+") ",9,Wc))),128))],512),[[qt,n.value]]),v[4]||(v[4]=l("p",{class:"mt-2 text-sm text-gray-500"}," The magic link will be sent to the selected client's email address. ",-1))]),l("div",Fc,[f(je,{onClick:d,type:"button"},{default:V(()=>v[5]||(v[5]=[W(" Cancel ",-1)])),_:1,__:[5]}),f(Te,{onClick:c,disabled:i.value||!n.value,class:"bg-purple-600 hover:bg-purple-700"},{default:V(()=>[W(y(i.value?"Sending...":"Send Magic Link"),1)]),_:1},8,["disabled"])])])]),_:1},8,["show"]))}},Rc={class:"mt-6 space-y-6"},Hc={class:"mt-2 flex space-x-4"},Bc={class:"inline-flex items-center"},zc={class:"inline-flex items-center"},Gc={key:0},qc={key:1},Zc=["required"],Kc={__name:"ResourceModal",props:{show:{type:Boolean,default:!1},projectId:{type:Number,required:!0},resource:{type:Object,default:null}},emits:["close","saved"],setup(e,{emit:t}){const s=e,a=t,i=w({name:"",type:"link",url:"",file:null,description:""}),n=w(null),o=B(()=>s.resource?`/api/projects/${s.projectId}/resources/${s.resource.id}`:`/api/projects/${s.projectId}/resources`),r=B(()=>s.resource?"put":"post"),c=B(()=>s.resource?"Update Resource":"Add Resource"),d=B(()=>s.resource?"Resource updated successfully!":"Resource added successfully!");ke(()=>s.show,g=>{g&&(s.resource?i.value={name:s.resource.name,type:s.resource.type,url:s.resource.type==="link"?s.resource.url:"",file:null,description:s.resource.description||""}:i.value={name:"",type:"link",url:"",file:null,description:""},n.value&&(n.value.value=""))},{immediate:!0});const h=g=>{i.value.file=g.target.files[0]||null},v=g=>{const k=new FormData;return k.append("name",g.name||""),k.append("type",g.type||"link"),k.append("description",g.description||""),g.type==="link"?k.append("url",g.url||""):g.type==="file"&&g.file&&k.append("file",g.file),(r.value==="put"||r.value==="patch")&&k.append("_method","PUT"),k},p=g=>{a("saved",g.resource)},_=()=>{a("close")};return(g,k)=>(u(),ue(vt,{show:e.show,title:e.resource?"Edit Resource":"Add Resource","api-endpoint":o.value,"http-method":r.value,"form-data":i.value,"submit-button-text":c.value,"success-message":d.value,"format-data-for-api":v,onClose:_,onSubmitted:p},{default:V(({errors:D})=>[l("div",Rc,[l("div",null,[f(z,{for:"resource-type",value:"Resource Type"}),l("div",Hc,[l("label",Bc,[Me(l("input",{type:"radio","onUpdate:modelValue":k[0]||(k[0]=x=>i.value.type=x),value:"link",class:"form-radio text-indigo-600"},null,512),[[va,i.value.type]]),k[5]||(k[5]=l("span",{class:"ml-2 text-gray-700"},"Link",-1))]),l("label",zc,[Me(l("input",{type:"radio","onUpdate:modelValue":k[1]||(k[1]=x=>i.value.type=x),value:"file",class:"form-radio text-indigo-600"},null,512),[[va,i.value.type]]),k[6]||(k[6]=l("span",{class:"ml-2 text-gray-700"},"File",-1))])])]),l("div",null,[f(z,{for:"resource-name",value:"Name"}),f(be,{id:"resource-name",modelValue:i.value.name,"onUpdate:modelValue":k[2]||(k[2]=x=>i.value.name=x),type:"text",class:"mt-1 block w-full",placeholder:"Enter resource name",required:""},null,8,["modelValue"]),f(ve,{message:D.name?D.name[0]:"",class:"mt-2"},null,8,["message"])]),i.value.type==="link"?(u(),m("div",Gc,[f(z,{for:"resource-url",value:"URL"}),f(be,{id:"resource-url",modelValue:i.value.url,"onUpdate:modelValue":k[3]||(k[3]=x=>i.value.url=x),type:"url",class:"mt-1 block w-full",placeholder:"https://example.com",required:""},null,8,["modelValue"]),f(ve,{message:D.url?D.url[0]:"",class:"mt-2"},null,8,["message"])])):S("",!0),i.value.type==="file"?(u(),m("div",qc,[f(z,{for:"resource-file",value:"File"}),l("input",{id:"resource-file",ref_key:"fileInputRef",ref:n,type:"file",class:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100",onChange:h,required:!e.resource||i.value.type==="file"},null,40,Zc),f(ve,{message:D.file?D.file[0]:"",class:"mt-2"},null,8,["message"])])):S("",!0),l("div",null,[f(z,{for:"resource-description",value:"Description (Optional)"}),Me(l("textarea",{id:"resource-description","onUpdate:modelValue":k[4]||(k[4]=x=>i.value.description=x),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",rows:"3",placeholder:"Enter a description for this resource"},null,512),[[Ye,i.value.description]]),f(ve,{message:D.description?D.description[0]:"",class:"mt-2"},null,8,["message"])])])]),_:1},8,["show","title","api-endpoint","http-method","form-data","submit-button-text","success-message"]))}},Jc=ot(Kc,[["__scopeId","data-v-f508dda8"]]),Xc={class:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow mb-6"},Qc={class:"flex justify-between items-center mb-4"},em={class:"flex gap-3"},tm={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},sm={class:"text-2xl font-bold text-gray-900 tracking-tight mb-2"},am={class:"text-gray-600 text-base"},im={class:"space-y-3 text-sm text-gray-700"},nm={class:"flex flex-wrap gap-2 mt-2 items-center"},lm=["href"],om=["href"],rm=["href"],dm={key:3,class:"text-gray-500 text-sm"},um={class:"relative"},cm=["onClick"],mm={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},hm={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},vm={key:0,class:"resource-tooltip absolute left-0 bottom-full mb-2 w-48 z-10"},fm={class:"bg-white rounded-md shadow-lg p-3 text-sm border border-gray-200"},pm={class:"flex justify-between items-center mb-2"},ym={class:"font-medium text-gray-900"},gm={key:0,class:"text-gray-600 text-xs mb-2"},wm={class:"flex justify-between mt-2 pt-2 border-t border-gray-100"},_m=["href"],bm={class:"flex space-x-2"},km=["onClick"],xm=["onClick"],Dm={class:"p-6"},Mm={key:0,class:"mb-4 p-4 bg-green-50 border border-green-200 text-green-700 rounded-md"},Sm={key:1,class:"mb-4 p-4 bg-red-50 border border-red-200 text-red-700 rounded-md"},Tm={class:"mb-4"},Cm={key:0,class:"text-gray-500 text-sm mt-1"},Em={key:1,class:"text-red-500 text-sm mt-1"},jm={class:"flex justify-end mt-6"},$m={__name:"ProjectGeneralInfoCard",props:{project:{type:Object,required:!0},projectId:{type:Number,required:!0},canManageProjects:{type:Boolean,required:!0},isSuperAdmin:{type:Boolean,required:!0}},emits:["openEditModal","openStandupModal","openMeetingModal","resourceSaved","openComposeModal"],setup(e,{emit:t}){const s=e,a=t,i=w(!1),n=w(null),o=w([]),r=w(!1),c=w(null),d=w(!1),h=w(!1),v=w({client_ids:[]}),p=w({}),_=w(""),g=w([]),k=w(!1),D=w("");Ma(s.projectId);const x=async()=>{r.value=!0;try{const L=await window.axios.get(`/api/projects/${s.projectId}/resources`);L.data.success?o.value=L.data.resources:console.error("Failed to fetch resources:",L.data.message)}catch(L){console.error("Error fetching resources:",L)}finally{r.value=!1}},N=()=>{n.value=null,i.value=!0},P=L=>{n.value=L,i.value=!0},$=async L=>{if(confirm("Are you sure you want to delete this resource?"))try{const M=await window.axios.delete(`/api/projects/${s.projectId}/resources/${L}`);M.data.success?o.value=o.value.filter(I=>I.id!==L):console.error("Failed to delete resource:",M.data.message)}catch(M){console.error("Error deleting resource:",M)}},he=L=>{if(n.value){const M=o.value.findIndex(I=>I.id===L.id);M!==-1&&(o.value[M]=L)}else o.value.push(L);a("resourceSaved",L)},ae=L=>{c.value=c.value===L?null:L},K=()=>{c.value=null},A=L=>{if(c.value!==null){const M=L.target.closest(".resource-tooltip"),I=L.target.closest(".resource-button");!M&&!I&&K()}};ze(()=>{x(),document.addEventListener("click",A)}),Ri(()=>{document.removeEventListener("click",A)});const T=async()=>{var L,M;k.value=!0,D.value="";try{const I=await window.axios.get(`/api/projects/${s.projectId}/sections/clients?type=clients`);console.log(I),g.value=I.data}catch(I){console.error("Failed to fetch project clients:",I),D.value=((M=(L=I.response)==null?void 0:L.data)==null?void 0:M.message)||"Failed to load client data."}finally{k.value=!1}},b=()=>{v.value.client_ids=[],p.value={},_.value="",d.value=!0,T()},E=()=>{d.value=!1},Y=async()=>{if(p.value={},_.value="",h.value=!0,!v.value.client_ids||v.value.client_ids.length===0){p.value={client_ids:["Please select a client."]},h.value=!1;return}try{const L=v.value.client_ids[0];if(!g.value.find(G=>G.id===L)){p.value={client_ids:["Selected client does not have a valid email."]},h.value=!1;return}const I=await window.axios.post(`/api/projects/${s.projectId}/magic-link`,{client_id:L});I.data.success&&(_.value=I.data.message,v.value.client_ids=[])}catch(L){L.response&&L.response.status===422?p.value=L.response.data.errors:L.response&&L.response.data.message?p.value={general:[L.response.data.message]}:p.value={general:["An unexpected error occurred. Please try again."]}}finally{h.value=!1}};return(L,M)=>{var I;return u(),m(te,null,[l("div",Xc,[l("div",Qc,[M[10]||(M[10]=l("h4",{class:"text-lg font-semibold text-gray-900"},"General Information",-1)),l("div",em,[f(Te,{class:"bg-blue-600 hover:bg-blue-700 transition-colors",onClick:M[0]||(M[0]=G=>a("openStandupModal"))},{default:V(()=>M[6]||(M[6]=[W(" Daily Standup ",-1)])),_:1,__:[6]}),e.canManageProjects||e.isSuperAdmin?(u(),ue(Te,{key:0,class:"bg-indigo-600 hover:bg-indigo-700 transition-colors",onClick:M[1]||(M[1]=G=>a("openEditModal"))},{default:V(()=>M[7]||(M[7]=[W(" Edit Project ",-1)])),_:1,__:[7]})):S("",!0),e.canManageProjects||e.isSuperAdmin?(u(),ue(Te,{key:1,class:"bg-green-600 hover:bg-green-700 transition-colors",onClick:M[2]||(M[2]=G=>a("openMeetingModal"))},{default:V(()=>M[8]||(M[8]=[W(" Schedule Meeting ",-1)])),_:1,__:[8]})):S("",!0),e.canManageProjects||e.isSuperAdmin?(u(),ue(Te,{key:2,class:"bg-blue-400 hover:bg-blue-600 transition-colors",onClick:M[3]||(M[3]=G=>a("openComposeModal"))},{default:V(()=>M[9]||(M[9]=[W(" Compose Email ",-1)])),_:1,__:[9]})):S("",!0),e.canManageProjects?(u(),ue(Te,{key:3,class:"bg-purple-600 hover:bg-purple-700 transition-colors",onClick:b,disabled:h.value},{default:V(()=>[W(y(h.value?"Sending...":"Send Magic Link"),1)]),_:1},8,["disabled"])):S("",!0)])]),l("div",tm,[l("div",null,[l("h3",sm,y(e.project.name),1),l("p",am,y(e.project.description||"No description provided"),1)]),l("div",im,[l("p",null,[M[11]||(M[11]=l("strong",{class:"text-gray-900"},"Status:",-1)),W(" "+y(((I=e.project.status)==null?void 0:I.replace("_"," ").toUpperCase())||"N/A"),1)]),l("p",null,[M[12]||(M[12]=l("strong",{class:"text-gray-900"},"Project Type:",-1)),W(" "+y(e.project.project_type||"N/A"),1)]),l("p",null,[M[13]||(M[13]=l("strong",{class:"text-gray-900"},"Source:",-1)),W(" "+y(e.project.source||"N/A"),1)]),l("div",nm,[l("button",{onClick:N,class:"p-2 bg-gray-100 rounded-full hover:bg-gray-200 transition-colors",title:"Add Resource"},M[14]||(M[14]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])),e.project.website?(u(),m("a",{key:0,href:e.project.website,target:"_blank",class:"p-2 bg-gray-100 rounded-full hover:bg-gray-200 transition-colors",title:"Visit Website"},M[15]||(M[15]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"})],-1)]),8,lm)):S("",!0),e.project.social_media_link?(u(),m("a",{key:1,href:e.project.social_media_link,target:"_blank",class:"p-2 bg-gray-100 rounded-full hover:bg-gray-200 transition-colors",title:"Social Media"},M[16]||(M[16]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})],-1)]),8,om)):S("",!0),e.project.google_drive_link?(u(),m("a",{key:2,href:e.project.google_drive_link,target:"_blank",class:"p-2 bg-gray-100 rounded-full hover:bg-gray-200 transition-colors",title:"Google Drive"},M[17]||(M[17]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)]),8,rm)):S("",!0),r.value?(u(),m("div",dm," Loading resources... ")):(u(!0),m(te,{key:4},oe(o.value,G=>(u(),m("div",{key:G.id,class:"relative"},[l("div",um,[l("button",{onClick:Ne(C=>ae(G.id),["prevent"]),class:"resource-button p-2 bg-gray-100 rounded-full hover:bg-gray-200 transition-colors block"},[G.type==="link"?(u(),m("svg",mm,M[18]||(M[18]=[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101"},null,-1),l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.172 13.828a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.102 1.101"},null,-1)]))):(u(),m("svg",hm,M[19]||(M[19]=[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"},null,-1)])))],8,cm),c.value===G.id?(u(),m("div",vm,[l("div",fm,[l("div",pm,[l("h4",ym,y(G.name),1),l("button",{onClick:Ne(K,["prevent"]),class:"text-gray-400 hover:text-gray-600"},M[20]||(M[20]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),G.description?(u(),m("p",gm,y(G.description),1)):S("",!0),l("div",wm,[l("a",{href:G.url,target:"_blank",class:"text-xs text-indigo-600 hover:text-indigo-800"}," Open Link ",8,_m),l("div",bm,[l("button",{onClick:Ne(C=>P(G),["prevent"]),class:"p-1 text-gray-500 hover:text-indigo-600",title:"Edit"},M[21]||(M[21]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,km),l("button",{onClick:Ne(C=>$(G.id),["prevent"]),class:"p-1 text-gray-500 hover:text-red-600",title:"Delete"},M[22]||(M[22]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,xm)])])]),M[23]||(M[23]=l("div",{class:"absolute left-5 bottom-0 transform translate-y-1/2 rotate-45 w-2 h-2 bg-white border-r border-b border-gray-200"},null,-1))])):S("",!0)])]))),128))])])])]),f(Jc,{show:i.value,"project-id":e.projectId,resource:n.value,onClose:M[4]||(M[4]=G=>i.value=!1),onSaved:he},null,8,["show","project-id","resource"]),f(nt,{show:d.value,onClose:E},{default:V(()=>[l("div",Dm,[M[26]||(M[26]=l("h2",{class:"text-lg font-medium text-gray-900 mb-4"}," Send Magic Link ",-1)),_.value?(u(),m("div",Mm,y(_.value),1)):S("",!0),p.value.general?(u(),m("div",Sm,y(p.value.general[0]),1)):S("",!0),l("form",{onSubmit:Ne(Y,["prevent"])},[l("div",Tm,[f(z,{for:"client",value:"Select Client"}),k.value?(u(),m("div",Cm,"Loading clients...")):D.value?(u(),m("div",Em,y(D.value),1)):(u(),ue(ia,{key:2,id:"client",modelValue:v.value.client_ids,"onUpdate:modelValue":M[5]||(M[5]=G=>v.value.client_ids=G),options:g.value,placeholder:"Select a client","label-key":"name","track-by":"id",class:"mt-1"},null,8,["modelValue","options"])),f(ve,{message:p.value.client_ids?p.value.client_ids[0]:"",class:"mt-2"},null,8,["message"]),M[24]||(M[24]=l("p",{class:"mt-2 text-sm text-gray-500"}," Select a client to send them a magic link for project access. ",-1))]),l("div",jm,[f(je,{onClick:E,class:"mr-3"},{default:V(()=>M[25]||(M[25]=[W(" Cancel ",-1)])),_:1,__:[25]}),f(Te,{type:"submit",class:"bg-purple-600 hover:bg-purple-700 transition-colors",disabled:h.value},{default:V(()=>[W(y(h.value?"Sending...":"Send Magic Link"),1)]),_:1},8,["disabled"])])],32)])]),_:1},8,["show"])],64)}}},Om=ot($m,[["__scopeId","data-v-2ff32021"]]),Am={class:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-6"},Vm={class:"bg-white p-4 rounded-xl shadow-md hover:shadow-lg transition-shadow"},Ym={class:"text-2xl font-bold text-indigo-600"},Lm={class:"bg-white p-4 rounded-xl shadow-md hover:shadow-lg transition-shadow"},Im={class:"text-2xl font-bold text-indigo-600"},Nm={class:"bg-white p-4 rounded-xl shadow-md hover:shadow-lg transition-shadow"},Pm={class:"text-2xl font-bold text-indigo-600"},Wm={class:"bg-white p-4 rounded-xl shadow-md hover:shadow-lg transition-shadow"},Fm={class:"text-2xl font-bold text-indigo-600"},Um={__name:"ProjectStatsCards",props:{tasks:{type:Array,required:!0},emails:{type:Array,required:!0}},setup(e){const t=e,s=B(()=>t.tasks.filter(o=>o.status!=="Done").length),a=B(()=>t.emails.filter(o=>o.type==="received").length),i=B(()=>{const o=t.emails.filter(r=>r.status==="received"||r.type==="received");if(o.length>0){const r=[...o].sort((c,d)=>new Date(d.created_at)-new Date(c.created_at));return new Date(r[0].created_at).toLocaleDateString()}return"N/A"}),n=B(()=>{const o=t.tasks.filter(r=>r.status!=="Done");if(o.length>0){const r=o.filter(c=>c.due_date);if(r.length>0)return[...r].sort((d,h)=>new Date(d.due_date)-new Date(h.due_date))[0].due_date}return"N/A"});return(o,r)=>(u(),m("div",Am,[l("div",Vm,[r[0]||(r[0]=l("h4",{class:"text-sm font-semibold text-gray-500 mb-1"},"Pending Tasks",-1)),l("p",Ym,y(s.value),1)]),l("div",Lm,[r[1]||(r[1]=l("h4",{class:"text-sm font-semibold text-gray-500 mb-1"},"Received Emails",-1)),l("p",Im,y(a.value),1)]),l("div",Nm,[r[2]||(r[2]=l("h4",{class:"text-sm font-semibold text-gray-500 mb-1"},"Last Email Received",-1)),l("p",Pm,y(i.value),1)]),l("div",Wm,[r[3]||(r[3]=l("h4",{class:"text-sm font-semibold text-gray-500 mb-1"},"Next Task Deadline",-1)),l("p",Fm,y(n.value),1)])]))}},Rm={class:"bg-white p-4 rounded-xl shadow-md mb-6"},Hm={class:"border-b border-gray-200"},Bm={class:"-mb-px flex space-x-8 overflow-x-auto"},zm={__name:"ProjectTabsNavigation",props:{selectedTab:{type:String,default:null},canViewEmails:{type:Boolean,required:!0},canViewNotes:{type:Boolean,required:!0}},emits:["update:selectedTab"],setup(e,{emit:t}){const s=e,a=t,i=B({get:()=>s.selectedTab,set:n=>a("update:selectedTab",n)});return(n,o)=>(u(),m("div",Rm,[l("div",Hm,[l("nav",Bm,[l("button",{onClick:o[0]||(o[0]=r=>i.value=null),class:ie([i.value===null?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])}," Overview ",2),l("button",{onClick:o[1]||(o[1]=r=>i.value="tasks"),class:ie([i.value==="tasks"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])}," Project Tasks ",2),e.canViewEmails?(u(),m("button",{key:0,onClick:o[2]||(o[2]=r=>i.value="emails"),class:ie([i.value==="emails"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])}," Email Communication ",2)):S("",!0),e.canViewNotes?(u(),m("button",{key:1,onClick:o[3]||(o[3]=r=>i.value="notes"),class:ie([i.value==="notes"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])}," Notes ",2)):S("",!0),e.canViewNotes?(u(),m("button",{key:2,onClick:o[4]||(o[4]=r=>i.value="standups"),class:ie([i.value==="standups"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])}," Daily Standups ",2)):S("",!0)])])]))}},Gm={class:"space-y-4"},qm={key:0,class:"text-sm text-gray-500"},Zm={class:"flex justify-between items-center"},Km={key:0,class:"text-sm text-gray-500"},Jm="put",Xm="Update Task",Qm="Task updated successfully!",eh={__name:"EditTaskModal",props:{show:Boolean,projectId:Number,selectedTask:Object,projectUsers:Array,taskTypes:Array,milestones:Array,loadingTaskTypes:Boolean,loadingMilestones:Boolean},emits:["close","saved","open-add-milestone-modal"],setup(e,{emit:t}){const s=e,a=t,i=Re({name:"",description:"",assigned_to_user_id:null,due_date:null,status:"To Do",task_type_id:null,milestone_id:null}),n=["To Do","In Progress","Done","Blocked","Archived"],o=B(()=>"Edit Task"),r=B(()=>{var g;return`/api/tasks/${(g=s.selectedTask)==null?void 0:g.id}`});ke(()=>[s.show,s.selectedTask],([g,k],[D,x]=[])=>{var N;if(g&&k){let P=null;if(k.milestone){const ae=s.milestones.find(K=>K.name===k.milestone);ae&&(P=ae.id)}else k.milestone_id&&(P=k.milestone_id);let $=null;if(k.task_type){const ae=s.taskTypes.find(K=>K.name===k.task_type);ae&&($=ae.id)}else k.task_type_id&&($=k.task_type_id);let he=null;if(k.assigned_to&&k.assigned_to!=="Unassigned"){const ae=(N=s.projectUsers)==null?void 0:N.find(K=>K.name===k.assigned_to);ae&&(he=ae.id)}else k.assigned_to_id&&(he=k.assigned_to_id);Object.assign(i,{name:k.title,description:k.description||"",assigned_to_user_id:he,due_date:k.due_date||null,status:k.status,task_type_id:$,milestone_id:P})}else g||Object.assign(i,{name:"",description:"",assigned_to_user_id:null,due_date:null,status:"To Do",task_type_id:null,milestone_id:null})},{immediate:!0});const c=g=>{a("saved",g),a("close")},d=()=>{a("open-add-milestone-modal")},h=()=>{a("close")},v=B(()=>s.projectUsers.map(g=>({value:g.id,label:g.name}))),p=B(()=>s.taskTypes.map(g=>({value:g.id,label:g.name}))),_=B(()=>s.milestones.map(g=>({value:g.id,label:g.name})));return(g,k)=>(u(),ue(vt,{show:e.show,title:o.value,"api-endpoint":r.value,"http-method":Jm,"form-data":i,"submit-button-text":Xm,"success-message":Qm,onClose:h,onSubmitted:c},{default:V(({errors:D})=>[l("div",Gm,[l("div",null,[f(z,{for:"task-name",value:"Task Name"}),f(be,{id:"task-name",modelValue:i.name,"onUpdate:modelValue":k[0]||(k[0]=x=>i.name=x),type:"text",class:"mt-1 block w-full",placeholder:"Enter task name",required:""},null,8,["modelValue"]),f(ve,{message:D.name?D.name[0]:"",class:"mt-2"},null,8,["message"])]),l("div",null,[f(z,{for:"task-description",value:"Description"}),Me(l("textarea",{id:"task-description","onUpdate:modelValue":k[1]||(k[1]=x=>i.description=x),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",rows:"3",placeholder:"Enter task description"},null,512),[[Ye,i.description]]),f(ve,{message:D.description?D.description[0]:"",class:"mt-2"},null,8,["message"])]),l("div",null,[f(z,{for:"task-status",value:"Status"}),f(Ve,{id:"task-status",modelValue:i.status,"onUpdate:modelValue":k[2]||(k[2]=x=>i.status=x),options:n.map(x=>({value:x,label:x})),"value-key":"value","label-key":"label",placeholder:"Select status",class:"mt-1"},null,8,["modelValue","options"]),f(ve,{message:D.status?D.status[0]:"",class:"mt-2"},null,8,["message"])]),l("div",null,[f(z,{for:"task-due-date",value:"Due Date"}),f(be,{id:"task-due-date",modelValue:i.due_date,"onUpdate:modelValue":k[3]||(k[3]=x=>i.due_date=x),type:"date",class:"mt-1 block w-full"},null,8,["modelValue"]),f(ve,{message:D.due_date?D.due_date[0]:"",class:"mt-2"},null,8,["message"])]),l("div",null,[f(z,{for:"task-assigned-to",value:"Assigned To"}),f(Ve,{id:"task-assigned-to",modelValue:i.assigned_to_user_id,"onUpdate:modelValue":k[4]||(k[4]=x=>i.assigned_to_user_id=x),options:v.value,"value-key":"value","label-key":"label",placeholder:"Unassigned",class:"mt-1","allow-empty":!0},null,8,["modelValue","options"]),f(ve,{message:D.assigned_to_user_id?D.assigned_to_user_id[0]:"",class:"mt-2"},null,8,["message"])]),l("div",null,[f(z,{for:"task-type",value:"Task Type"}),e.loadingTaskTypes?(u(),m("div",qm,"Loading task types...")):(u(),ue(Ve,{key:1,id:"task-type",modelValue:i.task_type_id,"onUpdate:modelValue":k[5]||(k[5]=x=>i.task_type_id=x),options:p.value,"value-key":"value","label-key":"label",placeholder:"Select a task type",class:"mt-1","allow-empty":!0},null,8,["modelValue","options"])),f(ve,{message:D.task_type_id?D.task_type_id[0]:"",class:"mt-2"},null,8,["message"])]),l("div",null,[l("div",Zm,[f(z,{for:"task-milestone",value:"Milestone"}),l("button",{type:"button",onClick:d,class:"text-sm text-indigo-600 hover:text-indigo-800"}," + Create New Milestone ")]),e.loadingMilestones?(u(),m("div",Km,"Loading milestones...")):(u(),ue(Ve,{key:1,id:"task-milestone",modelValue:i.milestone_id,"onUpdate:modelValue":k[6]||(k[6]=x=>i.milestone_id=x),options:_.value,"value-key":"value","label-key":"label",placeholder:"No milestone",class:"mt-1","allow-empty":!0},null,8,["modelValue","options"])),f(ve,{message:D.milestone_id?D.milestone_id[0]:"",class:"mt-2"},null,8,["message"])])])]),_:1},8,["show","title","api-endpoint","form-data"]))}},th={class:"space-y-4"},sh="Add New Milestone",ah="/api/milestones",ih="post",nh="Create Milestone",lh="Milestone created successfully!",oh={__name:"MilestoneFormModal",props:{show:Boolean,projectId:Number},emits:["close","saved"],setup(e,{emit:t}){const s=e,a=t,i=Re({name:"",description:"",completion_date:null,status:"Not Started",project_id:s.projectId}),n=["Not Started","In Progress","Completed","Overdue"];ke(()=>s.show,c=>{c&&Object.assign(i,{name:"",description:"",completion_date:null,status:"Not Started",project_id:s.projectId})},{immediate:!0});const o=c=>{a("saved",c),a("close")},r=()=>{a("close")};return(c,d)=>(u(),ue(vt,{show:e.show,title:sh,"api-endpoint":ah,"http-method":ih,"form-data":i,"submit-button-text":nh,"success-message":lh,onClose:r,onSubmitted:o},{default:V(({errors:h})=>[l("div",th,[l("div",null,[f(z,{for:"milestone-name",value:"Milestone Name"}),f(be,{id:"milestone-name",modelValue:i.name,"onUpdate:modelValue":d[0]||(d[0]=v=>i.name=v),type:"text",class:"mt-1 block w-full",placeholder:"Enter milestone name",required:""},null,8,["modelValue"]),f(ve,{message:h.name?h.name[0]:"",class:"mt-2"},null,8,["message"])]),l("div",null,[f(z,{for:"milestone-description",value:"Description"}),Me(l("textarea",{id:"milestone-description","onUpdate:modelValue":d[1]||(d[1]=v=>i.description=v),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",rows:"3",placeholder:"Enter milestone description"},null,512),[[Ye,i.description]]),f(ve,{message:h.description?h.description[0]:"",class:"mt-2"},null,8,["message"])]),l("div",null,[f(z,{for:"milestone-completion-date",value:"Completion Date"}),f(be,{id:"milestone-completion-date",modelValue:i.completion_date,"onUpdate:modelValue":d[2]||(d[2]=v=>i.completion_date=v),type:"date",class:"mt-1 block w-full"},null,8,["modelValue"]),f(ve,{message:h.completion_date?h.completion_date[0]:"",class:"mt-2"},null,8,["message"])]),l("div",null,[f(z,{for:"milestone-status",value:"Status"}),f(Ve,{id:"milestone-status",modelValue:i.status,"onUpdate:modelValue":d[3]||(d[3]=v=>i.status=v),options:n.map(v=>({value:v,label:v})),"value-key":"value","label-key":"label",placeholder:"Select status",class:"mt-1"},null,8,["modelValue","options"]),f(ve,{message:h.status?h.status[0]:"",class:"mt-2"},null,8,["message"])])])]),_:1},8,["show","form-data"]))}},rh={class:"space-y-4"},dh={key:0,class:"mb-4 p-3 bg-gray-100 rounded-md"},uh={class:"text-sm font-medium text-gray-900"},ch={class:"text-xs text-gray-500 mt-1"},mh={class:"mb-4"},hh="post",vh="Add Note",fh="Note added successfully!",ki={__name:"TaskNoteModal",props:{show:Boolean,taskForNote:Object},emits:["close","note-added"],setup(e,{emit:t}){const s=e,a=t,i=Re({note:""}),n=B(()=>{var d;return`Add Note to Task: "${(d=s.taskForNote)==null?void 0:d.name}"`}),o=B(()=>{var d;return`/api/tasks/${(d=s.taskForNote)==null?void 0:d.id}/notes`});ke(()=>s.show,d=>{d&&Object.assign(i,{note:""})},{immediate:!0});const r=d=>{a("note-added",d),a("close")},c=()=>{a("close")};return(d,h)=>(u(),ue(vt,{show:e.show,title:n.value,"api-endpoint":o.value,"http-method":hh,"form-data":i,"submit-button-text":vh,"success-message":fh,onClose:c,onSubmitted:r},{default:V(({errors:v})=>[l("div",rh,[e.taskForNote?(u(),m("div",dh,[l("p",uh,y(e.taskForNote.name),1),l("p",ch,"Status: "+y(e.taskForNote.status),1)])):S("",!0),l("div",mh,[f(z,{for:"task-note-content",value:"Note Content"}),Me(l("textarea",{id:"task-note-content","onUpdate:modelValue":h[0]||(h[0]=p=>i.note=p),class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full h-32",placeholder:"Enter your note...",required:""},null,512),[[Ye,i.note]]),f(ve,{message:v.note?v.note[0]:"",class:"mt-2"},null,8,["message"])])])]),_:1},8,["show","title","api-endpoint","form-data"]))}},ph={class:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow"},yh={class:"flex justify-between items-center mb-4"},gh={class:"flex gap-2"},wh={key:0},_h={key:1},bh={class:"mb-6 overflow-x-auto"},kh={key:0,class:"text-center text-gray-600 text-sm animate-pulse py-4"},xh={key:1,class:"text-center py-4"},Dh={key:2,class:"relative py-8"},Mh={class:"relative flex justify-between"},Sh={key:0,class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Th={key:1,class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ch={key:2,class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Eh={key:3,class:"w-2 h-2 bg-white rounded-full"},jh={class:"absolute -top-8 transform -translate-x-1/2 left-1/2 w-32"},$h=["title"],Oh={class:"absolute top-8 transform -translate-x-1/2 left-1/2"},Ah={class:"text-xs text-gray-500 whitespace-nowrap"},Vh={class:"mb-6 bg-gray-50 p-4 rounded-lg"},Yh={class:"flex flex-wrap items-center gap-4"},Lh={class:"flex-1 min-w-[200px]"},Ih={class:"flex-1 min-w-[200px]"},Nh={class:"flex-1 min-w-[200px]"},Ph={class:"flex-1 min-w-[200px]"},Wh={key:0,class:"mt-3 text-sm text-gray-600"},Fh={key:0,class:"text-red-600 font-medium"},Uh={key:0,class:"text-center text-gray-600 text-sm animate-pulse py-4"},Rh={key:1,class:"text-center py-4"},Hh={class:"text-red-600 text-sm font-medium"},Bh={key:2,class:"overflow-x-auto"},zh={class:"min-w-full divide-y divide-gray-200"},Gh={class:"bg-white divide-y divide-gray-200"},qh={class:"px-4 py-3 text-sm text-gray-900"},Zh={class:"px-4 py-3 text-sm text-gray-700"},Kh={class:"px-4 py-3 text-sm text-gray-700"},Jh={class:"px-4 py-3 text-sm text-gray-700"},Xh={class:"px-4 py-3 text-sm text-gray-700"},Qh={class:"px-4 py-3 text-right"},ev={class:"flex justify-end space-x-2"},tv=["onClick"],sv=["onClick"],av=["onClick"],iv=["onClick"],nv=["onClick"],lv={key:3,class:"text-center py-4"},ov={__name:"ProjectTasksTab",props:{projectId:{type:Number,required:!0},projectUsers:{type:Array,default:()=>[]},canManageProjects:{type:Boolean,required:!0}},emits:["tasksUpdated","openTaskDetailSidebar","open-create-task-modal"],setup(e,{emit:t}){const s=e,a=t,i=w([]),n=w(!0),o=w(""),r=w(!1),c=w(null),d=w(!1),h=w(!1),v=w(null),p=w([]),_=w([]),g=w(!1),k=w(!1),D=Re({status:"",assigned_to_user_id:null,milestone_id:null,due_date_range:""}),x=[{value:"",label:"All Statuses"},{value:"To Do",label:"To Do"},{value:"In Progress",label:"In Progress"},{value:"Done",label:"Done"},{value:"Blocked",label:"Blocked"},{value:"Archived",label:"Archived"}],N=B(()=>{const J=[{value:null,label:"All Users"},{value:-1,label:"Unassigned"}];return J.push(...s.projectUsers.map(R=>({value:R.id,label:R.name}))),J}),P=B(()=>{const J=[{value:null,label:"All Milestones"},{value:-1,label:"No Milestone"}];return J.push(..._.value.map(R=>({value:R.id,label:R.name}))),J}),$=[{value:"",label:"All Dates"},{value:"today",label:"Due Today"},{value:"this_week",label:"Due This Week"},{value:"next_week",label:"Due Next Week"},{value:"overdue",label:"Overdue"},{value:"no_date",label:"No Due Date"}],he=B(()=>!_.value||!_.value.length?[]:[..._.value].sort((J,R)=>J.completion_date?R.completion_date?new Date(J.completion_date)-new Date(R.completion_date):-1:1)),ae=B(()=>i.value.length?i.value.filter(J=>{if(D.status&&J.status!==D.status)return!1;if(D.assigned_to_user_id!==null){const R=parseInt(D.assigned_to_user_id);if(R===-1){if(J.assigned_to!=="Unassigned"&&J.assigned_to_id!==null)return!1}else if(J.assigned_to_id!==R)return!1}if(D.milestone_id!==null){const R=parseInt(D.milestone_id);if(R===-1){if(J.milestone_id)return!1}else if(J.milestone_id!==R)return!1}if(D.due_date_range){const R=new Date;R.setHours(0,0,0,0);const H=J.due_date?new Date(J.due_date):null;switch(D.due_date_range){case"today":if(!H||H.toDateString()!==R.toDateString())return!1;break;case"this_week":{if(!H)return!1;const we=new Date(R);if(we.setDate(R.getDate()+(6-R.getDay())),H<R||H>we)return!1;break}case"next_week":{if(!H)return!1;const we=new Date(R);we.setDate(R.getDate()+(7-R.getDay()));const Qt=new Date(we);if(Qt.setDate(we.getDate()+6),H<we||H>Qt)return!1;break}case"overdue":{if(!H||H>=R)return!1;break}case"no_date":{if(H)return!1;break}}}return!0}):[]),K=()=>{D.status="",D.assigned_to_user_id=null,D.milestone_id=null,D.due_date_range=""},A=async()=>{n.value=!0,o.value="";try{const J=await window.axios.get(`/api/projects/${s.projectId}/tasks`);i.value=J.data,a("tasksUpdated",i.value)}catch(J){o.value="Failed to load tasks data.",console.error("Error fetching project tasks:",J),J.response&&J.response.data&&J.response.data.message&&(o.value=J.response.data.message)}finally{n.value=!1}},T=async()=>{g.value=!0;try{const J=await window.axios.get("/api/task-types");p.value=J.data}catch(J){console.error("Error fetching task types:",J)}finally{g.value=!1}},b=async()=>{k.value=!0;try{const J=await window.axios.get(`/api/projects/${s.projectId}/milestones`);_.value=J.data}catch(J){console.error("Error fetching milestones:",J)}finally{k.value=!1}},E=()=>{a("open-create-task-modal")},Y=async J=>{c.value=J,await T(),await b(),r.value=!0},L=()=>{A()},M=J=>{console.log("ProjectTasksTab: Emitting open-task-detail-sidebar for taskId:",J.id),a("openTaskDetailSidebar",J.id)},I=()=>{d.value=!0},G=J=>{_.value.push(J),A()},C=J=>{v.value=J,h.value=!0},Q=()=>{A()},ge=async J=>{try{await window.axios.post(`/api/tasks/${J.id}/complete`),await A()}catch(R){console.error("Error marking task as completed:",R),alert("Failed to mark task as completed. Please try again.")}},Yt=async J=>{try{await window.axios.post(`/api/tasks/${J.id}/start`),await A()}catch(R){console.error("Error starting task:",R),alert("Failed to start task. Please try again.")}};return ze(()=>{A(),T(),b()}),ke(()=>s.projectUsers,()=>{}),ke(()=>s.taskTypes,()=>{}),ke(()=>s.milestones,()=>{}),(J,R)=>(u(),m("div",ph,[l("div",yh,[R[8]||(R[8]=l("h4",{class:"text-lg font-semibold text-gray-900"},"Project Tasks",-1)),l("div",gh,[f(je,{onClick:A,disabled:n.value,class:"text-indigo-600 hover:text-indigo-800"},{default:V(()=>[n.value?(u(),m("span",_h,"Loading...")):(u(),m("span",wh,"Refresh"))]),_:1},8,["disabled"]),e.canManageProjects?(u(),ue(Te,{key:0,class:"bg-indigo-600 hover:bg-indigo-700 transition-colors",onClick:E},{default:V(()=>R[7]||(R[7]=[W(" Add Task ",-1)])),_:1,__:[7]})):S("",!0)])]),l("div",bh,[k.value?(u(),m("div",kh," Loading milestones... ")):he.value.length?(u(),m("div",Dh,[R[13]||(R[13]=l("div",{class:"absolute h-1 bg-gray-200 top-1/2 left-0 right-0 transform -translate-y-1/2"},null,-1)),l("div",Mh,[(u(!0),m(te,null,oe(he.value,(H,we)=>(u(),m("div",{key:H.id,class:ie(["flex flex-col items-center relative z-10",{"ml-4":we===0,"mr-4":we===he.value.length-1}])},[l("div",{class:ie(["w-6 h-6 rounded-full shadow-lg flex items-center justify-center",{"bg-gray-300":H.status==="Not Started","bg-blue-500":H.status==="In Progress","bg-green-500":H.status==="Completed","bg-red-500":H.status==="Overdue"}])},[H.status==="Completed"?(u(),m("svg",Sh,R[10]||(R[10]=[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)]))):H.status==="In Progress"?(u(),m("svg",Th,R[11]||(R[11]=[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"},null,-1)]))):H.status==="Overdue"?(u(),m("svg",Ch,R[12]||(R[12]=[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)]))):(u(),m("span",Eh))],2),l("div",jh,[l("p",{class:"text-xs font-medium text-gray-700 text-center truncate",title:H.name},y(H.name),9,$h)]),l("div",Oh,[l("p",Ah,y(H.completion_date?new Date(H.completion_date).toLocaleDateString():"No date"),1)])],2))),128))])])):(u(),m("div",xh,R[9]||(R[9]=[l("p",{class:"text-gray-400 text-sm"},"No milestones found for this project.",-1)])))]),l("div",Vh,[l("div",Yh,[l("div",Lh,[f(z,{for:"status-filter",value:"Status"}),f(Ve,{id:"status-filter",modelValue:D.status,"onUpdate:modelValue":R[0]||(R[0]=H=>D.status=H),options:x,"value-key":"value","label-key":"label",placeholder:"All Statuses",class:"mt-1"},null,8,["modelValue"])]),l("div",Ih,[f(z,{for:"assigned-filter",value:"Assigned To"}),f(Ve,{id:"assigned-filter",modelValue:D.assigned_to_user_id,"onUpdate:modelValue":R[1]||(R[1]=H=>D.assigned_to_user_id=H),options:N.value,"value-key":"value","label-key":"label",placeholder:"All Users",class:"mt-1"},null,8,["modelValue","options"])]),l("div",Nh,[f(z,{for:"milestone-filter",value:"Milestone"}),f(Ve,{id:"milestone-filter",modelValue:D.milestone_id,"onUpdate:modelValue":R[2]||(R[2]=H=>D.milestone_id=H),options:P.value,"value-key":"value","label-key":"label",placeholder:"All Milestones",class:"mt-1"},null,8,["modelValue","options"])]),l("div",Ph,[f(z,{for:"due-date-filter",value:"Due Date"}),f(Ve,{id:"due-date-filter",modelValue:D.due_date_range,"onUpdate:modelValue":R[3]||(R[3]=H=>D.due_date_range=H),options:$,"value-key":"value","label-key":"label",placeholder:"All Dates",class:"mt-1"},null,8,["modelValue"])]),l("div",{class:"flex items-end"},[l("button",{type:"button",onClick:K,class:"px-3 py-2 text-sm text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-md transition-colors"}," Clear Filters ")])]),Object.values(D).some(H=>H!==null&&H!=="")?(u(),m("div",Wh,[l("p",null,[W(" Showing "+y(ae.value.length)+" of "+y(i.value.length)+" tasks ",1),ae.value.length===0?(u(),m("span",Fh," (No tasks match the current filters) ")):S("",!0)])])):S("",!0)]),n.value?(u(),m("div",Uh," Loading tasks... ")):o.value?(u(),m("div",Rh,[l("p",Hh,y(o.value),1)])):i.value.length?(u(),m("div",Bh,[l("table",zh,[R[14]||(R[14]=l("thead",{class:"bg-gray-50"},[l("tr",null,[l("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Title"),l("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),l("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Assigned To"),l("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Due Date"),l("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Milestone"),l("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),l("tbody",Gh,[(u(!0),m(te,null,oe(ae.value,H=>(u(),m("tr",{key:H.id,class:"hover:bg-gray-50 transition-colors"},[l("td",qh,y(H.title),1),l("td",Zh,[l("span",{class:ie({"px-2 py-1 rounded-full text-xs font-medium":!0,"bg-yellow-100 text-yellow-800":H.status==="To Do","bg-blue-100 text-blue-800":H.status==="In Progress","bg-green-100 text-green-800":H.status==="Done","bg-red-100 text-red-800":H.status==="Blocked","bg-gray-100 text-gray-800":H.status==="Archived"})},y(H.status),3)]),l("td",Kh,y(H.assigned_to),1),l("td",Jh,y(H.due_date?H.due_date:"N/A"),1),l("td",Xh,y(H.milestone||"N/A"),1),l("td",Qh,[l("div",ev,[l("button",{onClick:we=>M(H),class:"text-purple-600 hover:text-purple-800 text-sm font-medium"}," View ",8,tv),l("button",{onClick:we=>Y(H),class:"text-indigo-600 hover:text-indigo-800 text-sm font-medium"}," Edit ",8,sv),l("button",{onClick:we=>C(H),class:"text-blue-600 hover:text-blue-800 text-sm font-medium"}," Add Note ",8,av),H.status==="To Do"?(u(),m("button",{key:0,onClick:we=>Yt(H),class:"text-blue-600 hover:text-blue-800 text-sm font-medium"}," Start ",8,iv)):S("",!0),H.status!=="Done"?(u(),m("button",{key:1,onClick:we=>ge(H),class:"text-green-600 hover:text-green-800 text-sm font-medium"}," Complete ",8,nv)):S("",!0)])])]))),128))])])])):(u(),m("div",lv,R[15]||(R[15]=[l("p",{class:"text-gray-400 text-sm"},"No tasks found for this project.",-1),l("p",{class:"text-gray-500 text-sm mt-2"},' Click the "Add Task" button to create a new task. ',-1)]))),f(eh,{show:r.value,"project-id":e.projectId,"selected-task":c.value,"project-users":e.projectUsers,"task-types":p.value,milestones:_.value,"loading-task-types":g.value,"loading-milestones":k.value,onClose:R[4]||(R[4]=H=>r.value=!1),onSaved:L,onOpenAddMilestoneModal:I},null,8,["show","project-id","selected-task","project-users","task-types","milestones","loading-task-types","loading-milestones"]),f(oh,{show:d.value,"project-id":e.projectId,onClose:R[5]||(R[5]=H=>d.value=!1),onSaved:G},null,8,["show","project-id"]),f(ki,{show:h.value,"task-for-note":v.value,onClose:R[6]||(R[6]=H=>h.value=!1),onNoteAdded:Q},null,8,["show","task-for-note"])]))}};function xi(e){const t=i=>{const n=/\[([^\]]+?)\][\s\u00A0]*\{([^}]+?)\}/g;return i.replace(n,(o,r,c)=>{let d=c.trim();return!d.startsWith("http://")&&!d.startsWith("https://")&&(d=`https://${d}`),`<a href="${d}" target="_blank" style="color: #1a73e8; text-decoration: underline;">${r.trim()}</a>`})},s=i=>{const n=/<(ul|ol)>(.*?)<\/(ul|ol)>/gs;return i.replace(n,(o,r,c)=>{const d=r,h=d==="ul"?"list-style-type: disc;":"list-style-type: decimal;",v=/<li>(.*?)<\/li>/gs,p=c.replace(v,(_,g)=>`<li style="margin-bottom: 5px; font-family: 'Inter', sans-serif; font-size: 16px; line-height: 1.6; color: #1a202c;">${g}</li>`);return`<${d} style="margin: 0; padding: 0 0 0 20px; ${h}">${p}</${d}>`})};return{processedHtmlBody:B(()=>{let i=e.value;return i=t(i),i=s(i),i})}}const rv={key:0},dv={class:"mb-4"},uv={class:"mb-6"},cv={class:"mb-2 flex justify-end space-x-2"},mv={class:"mb-2 flex justify-end space-x-2"},hv={key:1},vv={class:"mb-6"},fv={class:"p-6"},pv={key:0,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert"},yv={class:"block sm:inline"},gv={class:"mb-4"},wv={class:"mb-6"},_v={class:"flex justify-end space-x-3"},bv={class:"p-6"},kv={key:0,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert"},xv={class:"block sm:inline"},Dv={class:"mb-4"},Mv={class:"mb-6"},Sv={class:"flex justify-end space-x-3"},Tv={__name:"EmailActionModal",props:{show:{type:Boolean,default:!1},title:{type:String,required:!0},apiEndpoint:{type:String,required:!0},httpMethod:{type:String,default:"post"},initialFormData:{type:Object,default:()=>({})},submitButtonText:{type:String,default:"Save"},successMessage:{type:String,default:"Operation successful!"},emailId:{type:Number,required:!1},projectId:{type:Number,required:!0}},emits:["close","submitted","error","fetchEmails"],setup(e,{emit:t}){const s=e,a=t,i=Re({}),n=w(!1),o=w(""),r=w(""),c=w(""),d=w(!1),h=w(""),v=w("bullet"),p=w(""),_=B(()=>i.body||""),{processedHtmlBody:g}=xi(_);ke(()=>s.show,E=>{if(E){for(const Y in i)delete i[Y];Object.assign(i,JSON.parse(JSON.stringify(s.initialFormData)))}},{immediate:!0});const k=E=>{const Y={...E};return s.title==="Edit and Approve Email"&&(Y.body=g.value),Y},D=()=>{a("close")},x=E=>{a("submitted",E)},N=E=>{a("error",E)},P=()=>{o.value="",r.value="",c.value="",n.value=!0},$=()=>{if(!o.value.trim()){c.value="Link text cannot be empty.";return}let E=r.value.trim();!E.startsWith("http://")&&!E.startsWith("https://")&&(E="http://"+E);try{new URL(E)}catch{c.value="Please enter a valid URL (e.g., https://example.com or www.example.com).";return}const Y=`[${o.value.trim()}] {${E}}`;i.body+=Y,n.value=!1,o.value="",r.value="",c.value=""},he=()=>{h.value="",v.value="bullet",p.value="",d.value=!0},ae=()=>{const E=h.value.split(`
`).map(M=>M.trim()).filter(M=>M!=="");if(E.length===0){p.value="Please enter at least one list item.";return}const Y=v.value==="bullet"?"ul":"ol";let L=`<${Y}>`;E.forEach(M=>{L+=`<li>${M}</li>`}),L+=`</${Y}>`,i.body+=L,d.value=!1,h.value="",p.value=""},K=w({}),A=w(!1),T=async()=>{A.value=!0;try{await window.axios.post(`/api/emails/${s.emailId}/update`,{subject:i.subject,body:i.body}),typeof success=="function"?success("Email approved successfully!"):console.log("Email approved successfully!"),A.value=!1}catch(E){A.value=!1,E.response&&E.response.data.message?K.value=E.response.data.message:(K.value="Failed to approve email.",console.error("Error approving email directly:",E)),typeof E=="function"&&E(K.value)}},b=()=>{if(s.emailId){const E=`/emails/${s.emailId}/preview`;window.open(E,"_blank")}else console.warn("Cannot preview email: Email ID not available.")};return(E,Y)=>(u(),m(te,null,[f(vt,{show:e.show,title:e.title,"api-endpoint":e.apiEndpoint,"http-method":e.httpMethod,"form-data":i,"submit-button-text":e.submitButtonText,"success-message":e.successMessage,"format-data-for-api":k,onClose:D,onSubmitted:x,onError:N,"max-width":"3xl"},{default:V(({errors:L})=>[e.title==="Edit and Approve Email"?(u(),m("div",rv,[l("div",dv,[f(z,{for:"edit_subject",value:"Subject"}),f(be,{id:"edit_subject",type:"text",class:"mt-1 block w-full",modelValue:i.subject,"onUpdate:modelValue":Y[0]||(Y[0]=M=>i.subject=M),required:""},null,8,["modelValue"]),f(ve,{message:L.subject?L.subject[0]:"",class:"mt-2"},null,8,["message"])]),l("div",uv,[l("div",cv,[f(je,{type:"button",onClick:he},{default:V(()=>Y[11]||(Y[11]=[W(" Insert List ",-1)])),_:1,__:[11]}),f(je,{type:"button",onClick:P},{default:V(()=>Y[12]||(Y[12]=[W(" Insert Link ",-1)])),_:1,__:[12]})]),f(z,{for:"edit_body",value:"Email Body",class:"sr-only"}),f(Ca,{id:"edit_body",modelValue:i.body,"onUpdate:modelValue":Y[1]||(Y[1]=M=>i.body=M),placeholder:"Edit your email here...",height:"300px"},null,8,["modelValue"]),f(ve,{message:L.body?L.body[0]:"",class:"mt-2"},null,8,["message"])]),l("div",mv,[f(Te,{type:"button",disabled:A.value,onClick:T},{default:V(()=>[W(y(A.value?"Saving...":"Save"),1)]),_:1},8,["disabled"]),f(je,{type:"button",onClick:b},{default:V(()=>Y[13]||(Y[13]=[W(" Preview Email ",-1)])),_:1,__:[13]})])])):e.title==="Reject Email"?(u(),m("div",hv,[l("div",vv,[f(z,{for:"rejection_reason",value:"Rejection Reason"}),Me(l("textarea",{id:"rejection_reason",rows:"5",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full","onUpdate:modelValue":Y[2]||(Y[2]=M=>i.rejection_reason=M),required:"",placeholder:"Please provide a reason for rejecting this email (minimum 10 characters)"},null,512),[[Ye,i.rejection_reason]]),f(ve,{message:L.rejection_reason?L.rejection_reason[0]:"",class:"mt-2"},null,8,["message"])])])):S("",!0)]),_:1},8,["show","title","api-endpoint","http-method","form-data","submit-button-text","success-message"]),f(nt,{show:n.value,onClose:Y[6]||(Y[6]=L=>n.value=!1),"max-width":"md"},{default:V(()=>[l("div",fv,[Y[16]||(Y[16]=l("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Insert Link",-1)),c.value?(u(),m("div",pv,[l("span",yv,y(c.value),1)])):S("",!0),l("div",gv,[f(z,{for:"link_text",value:"Link Text"}),f(be,{id:"link_text",type:"text",class:"mt-1 block w-full",modelValue:o.value,"onUpdate:modelValue":Y[3]||(Y[3]=L=>o.value=L),onKeyup:Et($,["enter"])},null,8,["modelValue"])]),l("div",wv,[f(z,{for:"link_url",value:"URL"}),f(be,{id:"link_url",type:"text",class:"mt-1 block w-full",modelValue:r.value,"onUpdate:modelValue":Y[4]||(Y[4]=L=>r.value=L),placeholder:"e.g., https://www.example.com",onKeyup:Et($,["enter"])},null,8,["modelValue"])]),l("div",_v,[f(je,{onClick:Y[5]||(Y[5]=L=>n.value=!1)},{default:V(()=>Y[14]||(Y[14]=[W("Cancel",-1)])),_:1,__:[14]}),f(Te,{onClick:$},{default:V(()=>Y[15]||(Y[15]=[W("Insert",-1)])),_:1,__:[15]})])])]),_:1},8,["show"]),f(nt,{show:d.value,onClose:Y[10]||(Y[10]=L=>d.value=!1),"max-width":"md"},{default:V(()=>[l("div",bv,[Y[20]||(Y[20]=l("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Insert List",-1)),p.value?(u(),m("div",kv,[l("span",xv,y(p.value),1)])):S("",!0),l("div",Dv,[f(z,{for:"list_items",value:"List Items (one per line)"}),Me(l("textarea",{id:"list_items",rows:"6",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full","onUpdate:modelValue":Y[7]||(Y[7]=L=>h.value=L),placeholder:"Enter each list item on a new line"},null,512),[[Ye,h.value]])]),l("div",Mv,[f(z,{for:"list_type",value:"List Type"}),Me(l("select",{id:"list_type",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full","onUpdate:modelValue":Y[8]||(Y[8]=L=>v.value=L)},Y[17]||(Y[17]=[l("option",{value:"bullet"},"Bulleted List",-1),l("option",{value:"numbered"},"Numbered List",-1)]),512),[[qt,v.value]])]),l("div",Sv,[f(je,{onClick:Y[9]||(Y[9]=L=>d.value=!1)},{default:V(()=>Y[18]||(Y[18]=[W("Cancel",-1)])),_:1,__:[18]}),f(Te,{onClick:ae},{default:V(()=>Y[19]||(Y[19]=[W("Insert List",-1)])),_:1,__:[19]})])])]),_:1},8,["show"])],64))}},Cv=ot(Tv,[["__scopeId","data-v-53db9e10"]]);function Ev(e){const t=jt();return{userSignature:B(()=>{const a=t.value&&t.value.name?t.value.name:"",i=e.name??"",n="+61 456 639 389",o="ozeeweb.com.au",r="#1a73e8",c="#fbbc05",d="#1a202c",h="#4a5568",v="#e5e7eb",p="#f9fafb",_=`${window.location.origin}/logo.png`,g=`https://img.icons8.com/ios-filled/20/${r.substring(1)}/facebook-new.png`,k=`https://img.icons8.com/ios-filled/20/${r.substring(1)}/twitter.png`,D=`https://img.icons8.com/ios-filled/20/${r.substring(1)}/linkedin.png`,x=`https://img.icons8.com/ios-filled/20/${r.substring(1)}/instagram-new.png`;return`
            <div style="font-family: 'Inter', sans-serif; padding: 20px; border: 1px solid ${v}; margin-top: 30px; background-color: ${p}; border-radius: 8px; overflow: hidden; box-shadow: 0 0 0 3px ${c};">
                <table role="presentation" cellspacing="0" cellpadding="0" width="100%">
                    <tr>
                        <td style="vertical-align: middle;">
                            <p style="margin: 0; font-size: 18px; color: ${d};">Best Regards</p>
                            <p style="margin: 0; font-size: 18px; font-weight: bold; color: ${d};">${a}</p>
                            <p style="margin: 5px 0 5px 0; font-size: 14px; color: ${h};">${i}</p>
                            <p style="margin: 0 0 15px 0; font-size: 12px; color: ${h};">
                                Your website and social media are like your home, first impressions matter!
                            </p>
                            <table role="presentation" cellspacing="0" cellpadding="0">
                                <tr>
                                    <td style="padding-right: 15px;">
                                        <p style="margin: 0; font-size: 13px; color: ${h};">📞 ${n}</p>
                                        <p style="margin: 5px 0 0 0; font-size: 13px; color: ${h};">🌐 <a href="https://${o}" target="_blank" style="color: ${r}; text-decoration: none;">${o}</a></p>
                                    </td>
                                </tr>
                            </table>
                            <div style="margin-top: 15px; text-align: left;">
                                <a href="https://www.facebook.com/yourprofile" target="_blank" style="display: inline-block; margin-right: 8px; color: ${r}; text-decoration: none;">
                                    <img src="${g}" alt="Facebook" style="vertical-align: middle;">
                                </a>
                                <a href="https://twitter.com/yourhandle" target="_blank" style="display: inline-block; margin-right: 8px; color: ${r}; text-decoration: none;">
                                    <img src="${k}" alt="Twitter" style="vertical-align: middle;">
                                </a>
                                <a href="https://www.linkedin.com/in/yourprofile" target="_blank" style="display: inline-block; margin-right: 8px; color: ${r}; text-decoration: none;">
                                    <img src="${D}" alt="LinkedIn" style="vertical-align: middle;">
                                </a>
                                <a href="https://www.instagram.com/yourprofile" target="_blank" style="display: inline-block; margin-right: 8px; color: ${r}; text-decoration: none;">
                                    <img src="${x}" alt="Instagram" style="vertical-align: middle;">
                                </a>
                            </div>
                        </td>
                        <td style="padding-left: 20px; vertical-align: middle; width: 120px; text-align: right;">
                            <img src="${_}" alt="Company Logo" width="100" style="display: block; border-radius: 8px; margin-left: auto;">
                        </td>
                    </tr>
                </table>

                <p style="margin-top: 25px; font-size: 12px; color: ${h}; text-align: center;">
                    Powered by MMS IT & Web Solutions PTY Ltd.
                </p>
                <p style="margin-top: 10px; font-style: italic; color: ${h}; text-align: center; font-size: 13px;">
                    Please consider the environment before printing this email.
                </p>
                <p style="margin-top: 10px; text-align: center; font-size: 13px;">
                    How did I do? <a href="https://www.example.com/review" target="_blank" style="color: ${r}; text-decoration: none; font-weight: bold;">Leave a review!</a>
                </p>
            </div>
        `})}}const jv={class:"mb-4"},$v={key:0,class:"text-gray-500 text-sm"},Ov={key:1,class:"text-red-500 text-sm"},Av={class:"mb-4"},Vv={class:"mb-6"},Yv={class:"mb-2 flex justify-end space-x-2"},Lv={class:"mb-4"},Iv={key:0,class:"mt-2"},Nv={class:"text-gray-700 text-base mb-2"},Pv=["innerHTML"],Wv={class:"p-6"},Fv={key:0,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert"},Uv={class:"block sm:inline"},Rv={class:"mb-4"},Hv={class:"mb-6"},Bv={class:"flex justify-end space-x-3"},zv={class:"p-6"},Gv={key:0,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert"},qv={class:"block sm:inline"},Zv={class:"mb-4"},Kv={class:"mb-6"},Jv={class:"flex justify-end space-x-3"},Xv={__name:"ComponseEmailModal",props:{show:{type:Boolean,default:!1},projectId:{type:Number,required:!0},userProjectRole:{type:Object,required:!0}},emits:["close","submitted","error"],setup(e,{emit:t}){const s=e,a=t,i=Re({project_id:s.projectId,client_ids:[],subject:"",body:"",status:"pending_approval"}),n=w([]),o=w(!0),r=w(""),c=w(!1),d=w(""),h=w(""),v=w(""),p=w(!1),_=w(""),g=w("bullet"),k=w(""),D=w("full_name"),x=w(""),N=w([{value:"full_name",label:"Full Name"},{value:"first_name",label:"First Name"},{value:"last_name",label:"Last Name"},{value:"custom",label:"Custom"}]),{userSignature:P}=Ev(B(()=>s.userProjectRole)),$=B(()=>i.body||""),{processedHtmlBody:he}=xi($),ae=B(()=>{if(i.client_ids&&i.client_ids.length>0){const G=i.client_ids[0],C=n.value.find(Q=>Q.id===G);if(C){const Q=C.name.split(" ").filter(J=>J.length>0),ge=Q.length>0?Q[0]:"",Yt=Q.length>1?Q[Q.length-1]:"";switch(D.value){case"full_name":return`Hi ${C.name},`;case"first_name":return`Hi ${ge},`;case"last_name":return`Hi ${Yt},`;case"custom":return`Hi ${x.value.trim()||"there"},`;default:return`Hi ${C.name},`}}}return"Hi there,"});ke(()=>s.show,G=>{G&&(Object.assign(i,{project_id:s.projectId,client_ids:[],subject:"",body:"",status:"pending_approval"}),D.value="full_name",x.value="",r.value="",I())},{immediate:!0});const K=G=>{const C={...G};return C.client_ids&&Array.isArray(C.client_ids)&&(C.client_ids=C.client_ids.map(Q=>({id:Q}))),C.body=he.value,C.greeting_name=ae.value,C.custom_greeting_name=x.value.trim(),C.first_client_id=i.client_ids&&i.client_ids.length>0?i.client_ids[0]:null,C},A=()=>{a("close")},T=G=>{a("submitted",G)},b=G=>{a("error",G)},E=()=>{d.value="",h.value="",v.value="",c.value=!0},Y=()=>{if(!d.value.trim()){v.value="Link text cannot be empty.";return}let G=h.value.trim();!G.startsWith("http://")&&!G.startsWith("https://")&&(G="http://"+G);try{new URL(G)}catch{v.value="Please enter a valid URL (e.g., https://example.com or www.example.com).";return}const C=`[${d.value.trim()}] {${G}}`;i.body+=C,c.value=!1,d.value="",h.value="",v.value=""},L=()=>{_.value="",g.value="bullet",k.value="",p.value=!0},M=()=>{const G=_.value.split(`
`).map(ge=>ge.trim()).filter(ge=>ge!=="");if(G.length===0){k.value="Please enter at least one list item.";return}const C=g.value==="bullet"?"ul":"ol";let Q=`<${C}>`;G.forEach(ge=>{Q+=`<li>${ge}</li>`}),Q+=`</${C}>`,i.body+=Q,p.value=!1,_.value="",k.value=""},I=async()=>{var G,C;o.value=!0,r.value=null;try{const Q=await window.axios.get(`/api/projects/${s.projectId}/sections/clients?type=clients`);n.value=Q.data}catch(Q){console.error("Failed to fetch project clients:",Q),r.value=((C=(G=Q.response)==null?void 0:G.data)==null?void 0:C.message)||"Failed to load client data."}finally{o.value=!1}};return ze(()=>{}),(G,C)=>(u(),m(te,null,[f(vt,{show:e.show,title:"Compose New Email","api-endpoint":"/api/emails","http-method":"post","form-data":i,"submit-button-text":"Submit for Approval","success-message":"Email submitted for approval successfully!","format-data-for-api":K,onClose:A,onSubmitted:T,onError:b,"max-width":"3xl"},{default:V(({errors:Q})=>[l("div",jv,[f(z,{for:"client_ids",value:"To (Clients)"}),o.value?(u(),m("div",$v,"Loading clients...")):r.value?(u(),m("div",Ov,y(r.value),1)):(u(),ue(ia,{key:2,modelValue:i.client_ids,"onUpdate:modelValue":C[0]||(C[0]=ge=>i.client_ids=ge),options:n.value,placeholder:"Select one or more clients","label-key":"name","value-key":"id"},null,8,["modelValue","options"])),f(ve,{message:Q.client_ids?Q.client_ids[0]:"",class:"mt-2"},null,8,["message"])]),l("div",Av,[f(z,{for:"subject",value:"Subject"}),f(be,{id:"subject",type:"text",class:"mt-1 block w-full",modelValue:i.subject,"onUpdate:modelValue":C[1]||(C[1]=ge=>i.subject=ge),required:""},null,8,["modelValue"]),f(ve,{message:Q.subject?Q.subject[0]:"",class:"mt-2"},null,8,["message"])]),l("div",Vv,[l("div",Yv,[f(je,{type:"button",onClick:L},{default:V(()=>C[13]||(C[13]=[W(" Insert List ",-1)])),_:1,__:[13]}),f(je,{type:"button",onClick:E},{default:V(()=>C[14]||(C[14]=[W(" Insert Link ",-1)])),_:1,__:[14]})]),l("div",Lv,[f(z,{for:"greeting_type",value:"Address Client By"}),f(Ve,{id:"greeting_type",modelValue:D.value,"onUpdate:modelValue":C[2]||(C[2]=ge=>D.value=ge),options:N.value,"value-key":"value","label-key":"label",class:"mt-1 block w-full"},null,8,["modelValue","options"]),D.value==="custom"?(u(),m("div",Iv,[f(z,{for:"custom_greeting_name",value:"Custom Name"}),f(be,{id:"custom_greeting_name",type:"text",class:"mt-1 block w-full",modelValue:x.value,"onUpdate:modelValue":C[3]||(C[3]=ge=>x.value=ge),placeholder:"e.g., Azaan"},null,8,["modelValue"])])):S("",!0)]),l("p",Nv,y(ae.value),1),f(z,{for:"body",value:"Email Body",class:"sr-only"}),f(Ca,{id:"body",modelValue:i.body,"onUpdate:modelValue":C[4]||(C[4]=ge=>i.body=ge),placeholder:"Compose your email here...",height:"300px"},null,8,["modelValue"]),f(ve,{message:Q.body?Q.body[0]:"",class:"mt-2"},null,8,["message"])]),X(P)?(u(),m("div",{key:0,class:"unselectable-signature",innerHTML:X(P)},null,8,Pv)):S("",!0)]),_:1},8,["show","form-data"]),f(nt,{show:c.value,onClose:C[8]||(C[8]=Q=>c.value=!1),"max-width":"md"},{default:V(()=>[l("div",Wv,[C[17]||(C[17]=l("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Insert Link",-1)),v.value?(u(),m("div",Fv,[l("span",Uv,y(v.value),1)])):S("",!0),l("div",Rv,[f(z,{for:"link_text",value:"Link Text"}),f(be,{id:"link_text",type:"text",class:"mt-1 block w-full",modelValue:d.value,"onUpdate:modelValue":C[5]||(C[5]=Q=>d.value=Q),onKeyup:Et(Y,["enter"])},null,8,["modelValue"])]),l("div",Hv,[f(z,{for:"link_url",value:"URL"}),f(be,{id:"link_url",type:"text",class:"mt-1 block w-full",modelValue:h.value,"onUpdate:modelValue":C[6]||(C[6]=Q=>h.value=Q),placeholder:"e.g., https://www.example.com",onKeyup:Et(Y,["enter"])},null,8,["modelValue"])]),l("div",Bv,[f(je,{onClick:C[7]||(C[7]=Q=>c.value=!1)},{default:V(()=>C[15]||(C[15]=[W("Cancel",-1)])),_:1,__:[15]}),f(Te,{onClick:Y},{default:V(()=>C[16]||(C[16]=[W("Insert",-1)])),_:1,__:[16]})])])]),_:1},8,["show"]),f(nt,{show:p.value,onClose:C[12]||(C[12]=Q=>p.value=!1),"max-width":"md"},{default:V(()=>[l("div",zv,[C[21]||(C[21]=l("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Insert List",-1)),k.value?(u(),m("div",Gv,[l("span",qv,y(k.value),1)])):S("",!0),l("div",Zv,[f(z,{for:"list_items",value:"List Items (one per line)"}),Me(l("textarea",{id:"list_items",rows:"6",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full","onUpdate:modelValue":C[9]||(C[9]=Q=>_.value=Q),placeholder:"Enter each list item on a new line"},null,512),[[Ye,_.value]])]),l("div",Kv,[f(z,{for:"list_type",value:"List Type"}),Me(l("select",{id:"list_type",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full","onUpdate:modelValue":C[10]||(C[10]=Q=>g.value=Q)},C[18]||(C[18]=[l("option",{value:"bullet"},"Bulleted List",-1),l("option",{value:"numbered"},"Numbered List",-1)]),512),[[qt,g.value]])]),l("div",Jv,[f(je,{onClick:C[11]||(C[11]=Q=>p.value=!1)},{default:V(()=>C[19]||(C[19]=[W("Cancel",-1)])),_:1,__:[19]}),f(Te,{onClick:M},{default:V(()=>C[20]||(C[20]=[W("Insert List",-1)])),_:1,__:[20]})])])]),_:1},8,["show"])],64))}},Di=ot(Xv,[["__scopeId","data-v-70bf1503"]]),Qv={key:0,class:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow"},ef={class:"flex justify-between items-center mb-4"},tf={key:0,class:"flex gap-3"},sf={key:1,class:"mt-2 bg-red-100 border border-red-400 text-red-700 px-4 py-2 rounded relative",role:"alert"},af={class:"block sm:inline"},nf={class:"mb-4 bg-gray-50 p-4 rounded-lg"},lf={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},of={class:"mt-1 relative rounded-md shadow-sm"},rf={key:0,class:"text-center text-gray-600 text-sm animate-pulse py-4"},df={key:1,class:"text-center text-red-600 text-sm font-medium py-4"},uf={key:2,class:"overflow-x-auto"},cf={class:"min-w-full divide-y divide-gray-200"},mf={class:"bg-white divide-y divide-gray-200"},hf={class:"px-4 py-3 text-sm text-gray-900"},vf={class:"px-4 py-3 text-sm text-gray-700"},ff={class:"px-4 py-3 text-sm text-gray-700"},pf={class:"px-4 py-3 text-sm text-gray-700"},yf={class:"px-4 py-3 text-sm text-gray-700"},gf={class:"px-4 py-3 text-right"},wf={key:3,class:"text-gray-400 text-sm"},_f={class:"p-6"},bf={class:"flex justify-between items-center mb-4"},kf={key:0,class:"space-y-4"},xf={class:"border-b pb-4"},Df={class:"text-xl font-medium text-gray-900 mb-2"},Mf={class:"grid grid-cols-2 gap-4 text-sm"},Sf={class:"text-gray-600"},Tf={class:"text-gray-900"},Cf={class:"text-gray-600 mt-1"},Ef={class:"text-gray-600"},jf={class:"text-gray-900"},$f={class:"prose max-w-none"},Of=["innerHTML"],Af={key:0,class:"mt-4 p-4 bg-red-50 rounded-md"},Vf={class:"text-red-700"},Yf={key:1,class:"mt-4 text-sm text-gray-600"},Lf={key:0},If={key:2,class:"mt-6 flex justify-end space-x-2"},Nf={__name:"ProjectEmailsTab",props:{projectId:{type:Number,required:!0},canViewEmails:{type:Boolean,required:!0},canComposeEmails:{type:Boolean,required:!0},canApproveEmails:{type:Boolean,required:!0},userProjectRole:{type:Object,required:!0},openCompose:{type:Boolean,required:!1,default:!1}},emits:["emailsUpdated","resetOpenCompose"],setup(e,{emit:t}){const s=e,a=t,i=w([]),n=w(!0),o=w(""),r=w(null),c=w(!1),d=w(!1),h=w(""),v=w(""),p=w("post"),_=w(""),g=w(""),k=Re({}),D=w(!1);jt();const x=Re({type:"",startDate:"",endDate:"",search:""});let N=null;const P=()=>{ae()},$=()=>{x.type="",x.startDate="",x.endDate="",x.search="",ae()},he=()=>{clearTimeout(N),N=setTimeout(()=>{P()},500)},ae=async()=>{n.value=!0,o.value="";try{const M=new URLSearchParams;x.type&&M.append("type",x.type),x.startDate&&M.append("start_date",x.startDate),x.endDate&&M.append("end_date",x.endDate),x.search&&M.append("search",x.search);const I=M.toString(),G=`/api/projects/${s.projectId}/emails-simplified${I?`?${I}`:""}`,C=await window.axios.get(G);i.value=C.data,a("emailsUpdated",i.value)}catch(M){o.value="Failed to load email data.",console.error("Error fetching project emails:",M)}finally{n.value=!1}},K=M=>{r.value=M,c.value=!0},A=M=>{r.value=M,h.value="Edit and Approve Email",v.value=`/api/emails/${M.id}/edit-and-approve`,p.value="post",_.value="Approve & Send",g.value="Email updated and approved successfully!";let I=M.body||"";Object.assign(k,{subject:M.subject,body:I}),d.value=!0,c.value=!1},T=M=>{r.value=M,h.value="Reject Email",v.value=`/api/emails/${M.id}/reject`,p.value="post",_.value="Reject Email",g.value="Email rejected successfully!",Object.assign(k,{rejection_reason:""}),d.value=!0,c.value=!1},b=async M=>{console.log("Form submitted successfully:",M),await ae(),d.value=!1},E=()=>{d.value=!1},Y=()=>{D.value=!1,a("resetOpenCompose")},L=async M=>{console.log("Compose email submitted successfully:",M),await ae(),D.value=!1,a("resetOpenCompose")};return ke(()=>s.openCompose,M=>{console.log("Watcher triggered: openCompose changed to",M),M&&(console.log("Opening compose email modal"),D.value=!0)}),ze(()=>{s.canViewEmails&&ae(),s.openCompose&&(D.value=!0)}),(M,I)=>{var G;return e.canViewEmails?(u(),m("div",Qv,[l("div",ef,[I[12]||(I[12]=l("h4",{class:"text-lg font-semibold text-gray-900"},"Email Communication",-1)),e.canComposeEmails?(u(),m("div",tf,[f(Te,{class:"bg-indigo-600 hover:bg-indigo-700 transition-colors",onClick:I[0]||(I[0]=C=>D.value=!0)},{default:V(()=>I[11]||(I[11]=[W(" Compose Email ",-1)])),_:1,__:[11]})])):S("",!0),o.value?(u(),m("div",sf,[l("span",af,y(o.value),1)])):S("",!0)]),l("div",nf,[l("div",lf,[l("div",null,[f(z,{for:"typeFilter",value:"Type"}),Me(l("select",{id:"typeFilter","onUpdate:modelValue":I[1]||(I[1]=C=>x.type=C),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",onChange:P},I[13]||(I[13]=[l("option",{value:""},"All Types",-1),l("option",{value:"sent"},"Sent",-1),l("option",{value:"received"},"Received",-1)]),544),[[qt,x.type]])]),l("div",null,[f(z,{for:"startDate",value:"From Date"}),f(be,{type:"date",id:"startDate",modelValue:x.startDate,"onUpdate:modelValue":I[2]||(I[2]=C=>x.startDate=C),class:"mt-1 block w-full",onChange:P},null,8,["modelValue"])]),l("div",null,[f(z,{for:"endDate",value:"To Date"}),f(be,{type:"date",id:"endDate",modelValue:x.endDate,"onUpdate:modelValue":I[3]||(I[3]=C=>x.endDate=C),class:"mt-1 block w-full",onChange:P},null,8,["modelValue"])]),l("div",null,[f(z,{for:"searchFilter",value:"Search Content"}),l("div",of,[f(be,{type:"text",id:"searchFilter",modelValue:x.search,"onUpdate:modelValue":I[4]||(I[4]=C=>x.search=C),class:"block w-full pr-10",placeholder:"Search in email content...",onInput:he},null,8,["modelValue"]),I[14]||(I[14]=l("div",{class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},[l("svg",{class:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[l("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})])],-1))])])]),l("div",{class:"mt-3 flex justify-end"},[l("button",{type:"button",class:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:$}," Reset Filters ")])]),n.value?(u(),m("div",rf," Loading email data... ")):o.value?(u(),m("div",df,y(o.value),1)):i.value.length?(u(),m("div",uf,[l("table",cf,[I[16]||(I[16]=l("thead",{class:"bg-gray-50"},[l("tr",null,[l("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Subject"),l("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"From"),l("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date"),l("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Type"),l("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),l("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),l("tbody",mf,[(u(!0),m(te,null,oe(i.value,C=>{var Q;return u(),m("tr",{key:C.id,class:"hover:bg-gray-50 transition-colors"},[l("td",hf,y(C.subject),1),l("td",vf,y(((Q=C.sender)==null?void 0:Q.name)||"N/A"),1),l("td",ff,y(new Date(C.created_at).toLocaleDateString()),1),l("td",pf,[l("span",{class:ie({"px-2 py-1 rounded-full text-xs font-medium":!0,"bg-blue-100 text-blue-800":C.type==="sent","bg-purple-100 text-purple-800":C.type==="received"})},y(C.type?C.type.toUpperCase():"N/A"),3)]),l("td",yf,[l("span",{class:ie({"px-2 py-1 rounded-full text-xs font-medium":!0,"bg-green-100 text-green-800":C.status==="sent","bg-yellow-100 text-yellow-800":C.status==="pending_approval","bg-blue-200 text-blue-900":C.status==="pending_approval_received","bg-red-100 text-red-800":C.status==="rejected","bg-gray-100 text-gray-800":C.status==="draft"})},y(C.status.replace("_"," ").toUpperCase()),3)]),l("td",gf,[f(je,{class:"text-indigo-600 hover:text-indigo-800",onClick:ge=>K(C)},{default:V(()=>I[15]||(I[15]=[W(" View ",-1)])),_:2,__:[15]},1032,["onClick"])])])}),128))])])])):(u(),m("p",wf,"No email communication found.")),f(nt,{show:c.value,onClose:I[8]||(I[8]=C=>c.value=!1)},{default:V(()=>{var C;return[l("div",_f,[l("div",bf,[I[18]||(I[18]=l("h3",{class:"text-lg font-semibold text-gray-900"},"Email Details",-1)),l("button",{onClick:I[5]||(I[5]=Q=>c.value=!1),class:"text-gray-400 hover:text-gray-500"},I[17]||(I[17]=[l("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),r.value?(u(),m("div",kf,[l("div",xf,[l("h4",Df,y(r.value.subject),1),l("div",Mf,[l("div",null,[l("p",Sf,[I[19]||(I[19]=W("From: ",-1)),l("span",Tf,y(((C=r.value.sender)==null?void 0:C.name)||"N/A"),1)]),l("p",Cf,[I[20]||(I[20]=W("Status: ",-1)),l("span",{class:ie({"px-2 py-1 rounded-full text-xs font-medium":!0,"bg-green-100 text-green-800":r.value.status==="sent","bg-yellow-100 text-yellow-800":r.value.status==="pending_approval","bg-red-100 text-red-800":r.value.status==="rejected","bg-gray-100 text-gray-800":r.value.status==="draft"})},y(r.value.status.replace("_"," ").toUpperCase()),3)])]),l("div",null,[l("p",Ef,[I[21]||(I[21]=W("Date: ",-1)),l("span",jf,y(new Date(r.value.created_at).toLocaleString()),1)])])])]),l("div",$f,[l("div",{innerHTML:r.value.body},null,8,Of)]),r.value.rejection_reason?(u(),m("div",Af,[I[22]||(I[22]=l("h5",{class:"font-medium text-red-800"},"Rejection Reason:",-1)),l("p",Vf,y(r.value.rejection_reason),1)])):S("",!0),r.value.approver?(u(),m("div",Yf,[l("p",null,"Approved/Rejected by: "+y(r.value.approver.name),1),r.value.sent_at?(u(),m("p",Lf,"Sent at: "+y(new Date(r.value.sent_at).toLocaleString()),1)):S("",!0)])):S("",!0),(r.value.status==="pending_approval"||r.value.status==="pending_approval_received")&&e.canApproveEmails?(u(),m("div",If,[f(Te,{onClick:I[6]||(I[6]=Q=>A(r.value)),class:"bg-blue-600 hover:bg-blue-700"},{default:V(()=>I[23]||(I[23]=[W("Edit & Approve",-1)])),_:1,__:[23]}),f(je,{onClick:I[7]||(I[7]=Q=>T(r.value)),class:"text-red-600 hover:text-red-800"},{default:V(()=>I[24]||(I[24]=[W("Reject",-1)])),_:1,__:[24]})])):S("",!0)])):S("",!0)])]}),_:1},8,["show"]),f(Di,{show:D.value,"project-id":e.projectId,"user-project-role":e.userProjectRole,onClose:Y,onSubmitted:L,onError:I[9]||(I[9]=C=>console.error("ComposeEmailModal error:",C))},null,8,["show","project-id","user-project-role"]),f(Cv,{show:d.value,title:h.value,"api-endpoint":v.value,"http-method":p.value,"initial-form-data":k,"submit-button-text":_.value,"success-message":g.value,"email-id":(G=r.value)==null?void 0:G.id,"project-id":e.projectId,onClose:E,onSubmitted:b,onError:I[10]||(I[10]=C=>console.error("EmailActionModal error:",C))},null,8,["show","title","api-endpoint","http-method","initial-form-data","submit-button-text","success-message","email-id","project-id"])])):S("",!0)}}},Pf={key:0,class:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow"},Wf={class:"flex justify-between items-center mb-4"},Ff={class:"flex gap-3"},Uf={class:"mb-4 bg-gray-50 p-4 rounded-lg"},Rf={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Hf={class:"mt-1 relative rounded-md shadow-sm"},Bf={class:"mb-8 p-4 bg-blue-50 rounded-md"},zf={class:"flex items-center"},Gf={class:"text-sm text-blue-800"},qf={key:0,class:"text-center text-gray-600 text-sm animate-pulse py-4"},Zf={key:1,class:"text-center text-red-600 text-sm font-medium py-4"},Kf={key:2,class:"space-y-4"},Jf={class:"flex justify-between"},Xf={class:"flex-grow"},Qf={key:0,class:"text-xs text-red-400 block mt-1"},ep={class:"flex items-center mt-1"},tp={class:"text-xs text-gray-500"},sp={key:0,class:"ml-2 px-2 py-0.5 bg-indigo-100 text-indigo-800 text-xs rounded-full"},ap={key:0},ip={key:3,class:"text-gray-400 text-sm"},np={class:"p-6"},lp={class:"flex justify-between items-center mb-4"},op={key:0,class:"mb-4 p-3 bg-gray-100 rounded-md"},rp={class:"text-sm text-gray-700"},dp={class:"text-xs text-gray-500 mt-1"},up={key:1,class:"mb-4"},cp={key:0,class:"text-center py-4"},mp={key:1,class:"space-y-3 max-h-60 overflow-y-auto"},hp={class:"text-sm text-gray-700"},vp={class:"text-xs text-gray-500 mt-1"},fp={key:2,class:"text-center py-3"},pp={key:2,class:"mb-4"},yp={key:0,class:"mt-2 text-sm text-red-600"},gp={key:3,class:"mt-6 flex justify-end"},wp={__name:"ProjectNotesTab",props:{projectId:{type:Number,required:!0},googleChatId:{type:String,default:null},canViewNotes:{type:Boolean,required:!0},canAddNotes:{type:Boolean,required:!0}},emits:["notesUpdated"],setup(e,{emit:t}){const s=e,a=t,i=w([]),n=w(!0),o=w(""),r=w(!1),c=w(!1),d=w(null),h=w(""),v=w(""),p=w([]),_=w(!1),g=Re({startDate:"",endDate:"",search:""});let k=null;const D=async()=>{n.value=!0,o.value="";try{const K=new URLSearchParams;g.startDate&&K.append("start_date",g.startDate),g.endDate&&K.append("end_date",g.endDate),g.search&&K.append("search",g.search);const A=K.toString(),T=`/api/projects/${s.projectId}/notes${A?`?${A}`:""}`,b=await window.axios.get(T);i.value=b.data,a("notesUpdated",i.value)}catch(K){o.value="Failed to load notes data.",console.error("Error fetching project notes:",K)}finally{n.value=!1}},x=()=>{r.value=!0},N=async K=>{d.value=K,h.value="",v.value="",p.value=[],_.value=!0,c.value=!0;try{const A=await window.axios.get(`/api/projects/${s.projectId}/notes/${K.id}/replies`);A.data.success?p.value=A.data.replies:console.error("Failed to fetch replies:",A.data.message)}catch(A){console.error("Error fetching replies:",A)}finally{_.value=!1}},P=async()=>{var K,A;if(!d.value||!h.value.trim()){v.value="Reply content is required";return}v.value="";try{const T=await window.axios.post(`/api/projects/${s.projectId}/notes/${d.value.id}/reply`,{content:h.value});if(T.data.success){h.value="",_.value=!0;const b=await window.axios.get(`/api/projects/${s.projectId}/notes/${d.value.id}/replies`);b.data.success&&(p.value=b.data.replies),_.value=!1,await D()}else v.value=T.data.message||"Failed to send reply"}catch(T){console.error("Error sending reply:",T),v.value=((A=(K=T.response)==null?void 0:K.data)==null?void 0:A.message)||"An error occurred while sending the reply"}},$=()=>{D()},he=()=>{g.startDate="",g.endDate="",g.search="",D()},ae=()=>{clearTimeout(k),k=setTimeout(()=>{$()},500)};return ze(()=>{s.canViewNotes&&D()}),(K,A)=>e.canViewNotes?(u(),m("div",Pf,[l("div",Wf,[A[10]||(A[10]=l("h4",{class:"text-lg font-semibold text-gray-900"},"Project Notes",-1)),l("div",Ff,[e.canAddNotes?(u(),ue(Te,{key:0,class:"bg-indigo-600 hover:bg-indigo-700 transition-colors",onClick:x},{default:V(()=>A[9]||(A[9]=[W(" Add Note ",-1)])),_:1,__:[9]})):S("",!0)])]),l("div",Uf,[l("div",Rf,[l("div",null,[f(z,{for:"noteStartDate",value:"From Date"}),f(be,{type:"date",id:"noteStartDate",modelValue:g.startDate,"onUpdate:modelValue":A[0]||(A[0]=T=>g.startDate=T),class:"mt-1 block w-full",onChange:$},null,8,["modelValue"])]),l("div",null,[f(z,{for:"noteEndDate",value:"To Date"}),f(be,{type:"date",id:"noteEndDate",modelValue:g.endDate,"onUpdate:modelValue":A[1]||(A[1]=T=>g.endDate=T),class:"mt-1 block w-full",onChange:$},null,8,["modelValue"])]),l("div",null,[f(z,{for:"noteSearchFilter",value:"Search Content"}),l("div",Hf,[f(be,{type:"text",id:"noteSearchFilter",modelValue:g.search,"onUpdate:modelValue":A[2]||(A[2]=T=>g.search=T),class:"block w-full pr-10",placeholder:"Search in note content...",onInput:ae},null,8,["modelValue"]),A[11]||(A[11]=l("div",{class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},[l("svg",{class:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[l("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})])],-1))])])]),l("div",{class:"mt-3 flex justify-end"},[l("button",{type:"button",class:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:he}," Reset Filters ")])]),l("div",Bf,[l("div",zf,[A[13]||(A[13]=l("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-blue-600 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),l("p",Gf,[A[12]||(A[12]=W(" Daily Standups are now available in their own dedicated tab. ",-1)),l("button",{onClick:A[3]||(A[3]=T=>K.$emit("changeTab","standups")),class:"text-blue-600 hover:text-blue-800 font-medium underline"}," Click here to view Daily Standups ")])])]),l("div",null,[A[15]||(A[15]=l("h5",{class:"text-md font-semibold text-gray-900 mb-4 border-b pb-2"},"Notes",-1)),n.value?(u(),m("div",qf," Loading notes... ")):o.value?(u(),m("div",Zf,y(o.value),1)):i.value.length?(u(),m("div",Kf,[(u(!0),m(te,null,oe(i.value,T=>{var b;return u(),m("div",{key:T.id,class:"p-4 bg-gray-50 rounded-md shadow-sm hover:bg-gray-100 transition-colors"},[l("div",Jf,[l("div",Xf,[l("p",{class:ie(["text-sm",{"text-gray-700":T.content!=="[Encrypted content could not be decrypted]","text-red-500 italic":T.content==="[Encrypted content could not be decrypted]"}])},[W(y(T.content)+" ",1),T.content==="[Encrypted content could not be decrypted]"?(u(),m("span",Qf," (There was an issue decrypting this note. Please contact an administrator.) ")):S("",!0)],2),l("div",ep,[l("p",tp,"Added by "+y(((b=T.user)==null?void 0:b.name)||"Unknown")+" on "+y(new Date(T.created_at).toLocaleDateString()),1),T.reply_count>0?(u(),m("span",sp,y(T.reply_count)+" "+y(T.reply_count===1?"reply":"replies"),1)):S("",!0)])]),e.googleChatId&&T.chat_message_id?(u(),m("div",ap,[f(je,{class:"text-sm text-indigo-600 hover:text-indigo-800",onClick:E=>N(T)},{default:V(()=>A[14]||(A[14]=[W(" View ",-1)])),_:2,__:[14]},1032,["onClick"])])):S("",!0)])])}),128))])):(u(),m("p",ip,"No notes available."))]),f(Ta,{show:r.value,"project-id":e.projectId,onClose:A[4]||(A[4]=T=>r.value=!1),onNoteAdded:D},null,8,["show","project-id"]),f(nt,{show:c.value,onClose:A[8]||(A[8]=T=>c.value=!1)},{default:V(()=>{var T;return[l("div",np,[l("div",lp,[A[17]||(A[17]=l("h3",{class:"text-lg font-semibold text-gray-900"},"Reply to Note",-1)),l("button",{onClick:A[5]||(A[5]=b=>c.value=!1),class:"text-gray-400 hover:text-gray-500"},A[16]||(A[16]=[l("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),d.value?(u(),m("div",op,[l("p",rp,y(d.value.content),1),l("p",dp,"Added by "+y(((T=d.value.user)==null?void 0:T.name)||"Unknown")+" on "+y(new Date(d.value.created_at).toLocaleDateString()),1)])):S("",!0),d.value?(u(),m("div",up,[A[20]||(A[20]=l("h4",{class:"text-sm font-medium text-gray-700 mb-2"},"Replies",-1)),_.value?(u(),m("div",cp,A[18]||(A[18]=[l("p",{class:"text-gray-500 text-sm"},"Loading replies...",-1)]))):p.value.length?(u(),m("div",mp,[(u(!0),m(te,null,oe(p.value,b=>{var E;return u(),m("div",{key:b.id,class:"p-2 bg-gray-50 rounded border-l-2 border-indigo-300"},[l("p",hp,y(b.content),1),l("p",vp,"Replied by "+y(((E=b.user)==null?void 0:E.name)||"Unknown")+" on "+y(new Date(b.created_at).toLocaleDateString()),1)])}),128))])):(u(),m("div",fp,A[19]||(A[19]=[l("p",{class:"text-gray-500 text-sm"},"No replies yet. Be the first to reply!",-1)])))])):S("",!0),e.canAddNotes?(u(),m("div",pp,[f(z,{for:"reply-content",value:"Your Reply"}),Me(l("textarea",{id:"reply-content","onUpdate:modelValue":A[6]||(A[6]=b=>h.value=b),class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full h-32",placeholder:"Enter your reply..."},null,512),[[Ye,h.value]]),v.value?(u(),m("p",yp,y(v.value),1)):S("",!0)])):S("",!0),e.canAddNotes?(u(),m("div",gp,[f(je,{onClick:A[7]||(A[7]=b=>c.value=!1),class:"mr-2"},{default:V(()=>A[21]||(A[21]=[W("Cancel",-1)])),_:1,__:[21]}),f(Te,{onClick:P},{default:V(()=>A[22]||(A[22]=[W("Send Reply",-1)])),_:1,__:[22]})])):S("",!0)])]}),_:1},8,["show"])])):S("",!0)}},_p={class:"w-full"},bp={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},kp={key:1,class:"text-red-600 text-sm py-2 text-center"},xp={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},Dp={class:"p-4 bg-blue-100 rounded-lg shadow-sm transition-shadow hover:shadow-lg"},Mp={class:"text-2xl font-bold text-blue-900 mt-1"},Sp={class:"p-4 bg-green-100 rounded-lg shadow-sm transition-shadow hover:shadow-lg"},Tp={class:"text-2xl font-bold text-green-900 mt-1"},Cp={class:"p-4 bg-red-100 rounded-lg shadow-sm transition-shadow hover:shadow-lg"},Ep={class:"text-2xl font-bold mt-1"},jp={key:3,class:"space-y-2 text-sm text-gray-700 mt-6 pt-4 border-t border-gray-200"},$p={key:0},Op={class:"text-gray-900 whitespace-pre-wrap"},Ap={key:4,class:"text-gray-400 text-sm mt-4 text-center"},Vp={__name:"ProjectFinancialsCard",props:{projectId:{type:Number,required:!0},canViewProjectServicesAndPayments:{type:Boolean,default:!1},canViewProjectTransactions:{type:Boolean,default:!1}},setup(e){const t=e,s=w(null),a=w([]),i=w(!0),n=w(null),o=Ft,r=B(()=>{var _;if(!Ce.value||Object.keys(Ce.value).length===0)return 0;const p=parseFloat(((_=s.value)==null?void 0:_.total_amount)||0);return Mt(p,"USD",o.value)}),c=B(()=>!a.value.length||!Ce.value||Object.keys(Ce.value).length===0?0:a.value.filter(p=>p.type==="expense").reduce((p,_)=>p+Mt(parseFloat(_.amount||0),_.currency,o.value),0)),d=B(()=>!a.value.length||!Ce.value||Object.keys(Ce.value).length===0?0:a.value.filter(p=>p.type==="income").reduce((p,_)=>p+Mt(parseFloat(_.amount||0),_.currency,o.value),0)),h=B(()=>d.value-c.value),v=async()=>{var p,_;if(i.value=!0,n.value=null,a.value=[],!Ce.value||Object.keys(Ce.value).length===0){n.value="Currency rates not loaded. Please try again.",i.value=!1;return}if(!t.canViewProjectServicesAndPayments&&!t.canViewProjectTransactions){n.value="You don't have permission to view project financials.",i.value=!1;return}try{if(t.canViewProjectServicesAndPayments){const g=await window.axios.get(`/api/projects/${t.projectId}/sections/services-payment`);s.value=g.data}else s.value=null;if(t.canViewProjectTransactions){const g=await window.axios.get(`/api/projects/${t.projectId}/sections/transactions`);a.value=g.data}else a.value=[]}catch(g){console.error("Failed to fetch project financials:",g),n.value=((_=(p=g.response)==null?void 0:p.data)==null?void 0:_.message)||"Failed to load financial data."}finally{i.value=!1}};return ke([()=>t.canViewProjectServicesAndPayments,()=>t.canViewProjectTransactions,o,Ce],(p,_)=>{t.projectId&&Ce.value&&Object.keys(Ce.value).length>0?v():t.projectId||(i.value=!0,n.value=null)},{immediate:!0,deep:!0}),(p,_)=>{var g,k;return u(),m("div",_p,[i.value?(u(),m("div",bp,[(u(),m(te,null,oe(4,D=>l("div",{key:D,class:"p-4 bg-gray-100 rounded-lg animate-pulse h-24"},_[0]||(_[0]=[l("div",{class:"h-4 bg-gray-200 rounded w-1/2 mb-3"},null,-1),l("div",{class:"h-6 bg-gray-200 rounded w-3/4"},null,-1)]))),64))])):n.value?(u(),m("div",kp,[l("p",null,y(n.value),1)])):(u(),m("div",xp,[l("div",Dp,[_[1]||(_[1]=l("p",{class:"text-sm font-medium text-blue-800"},"Contract Value",-1)),l("p",Mp,y(X(yt)(r.value,X(o).value)),1)]),l("div",Sp,[_[2]||(_[2]=l("p",{class:"text-sm font-medium text-green-800"},"Total Income",-1)),l("p",Tp,y(X(yt)(d.value,X(o))),1)]),l("div",Cp,[_[3]||(_[3]=l("p",{class:"text-sm font-medium text-red-800"},"Total Expenses",-1)),l("p",Ep,y(X(yt)(c.value,X(o))),1)]),l("div",{class:ie(["p-4 rounded-lg shadow-sm transition-shadow hover:shadow-lg",{"bg-green-100":h.value>=0,"bg-red-100":h.value<0}])},[l("p",{class:ie(["text-sm font-medium",{"text-green-800":h.value>=0,"text-red-800":h.value<0}])},"Profit/Loss",2),l("p",{class:ie(["text-2xl font-bold mt-1",{"text-green-900":h.value>=0,"text-red-900":h.value<0}])},y(X(yt)(h.value,X(o))),3)],2)])),!i.value&&!n.value&&((g=s.value)!=null&&g.contract_details)?(u(),m("dl",jp,[(k=s.value)!=null&&k.contract_details?(u(),m("div",$p,[_[4]||(_[4]=l("dt",{class:"font-medium w-full block mt-2"},"Contract Details:",-1)),l("dd",Op,y(s.value.contract_details),1)])):S("",!0)])):S("",!0),!i.value&&!n.value&&!s.value&&!a.value.length?(u(),m("p",Ap," No financial information available. ")):S("",!0)])}}},Yp={class:"bg-white p-6 rounded-xl shadow-md transition-shadow hover:shadow-lg"},Lp={key:0},Ip={key:1,class:"text-red-600 text-sm py-2"},Np={key:2,class:"space-y-1 text-sm text-gray-700"},Pp={key:0},Wp={key:3,class:"text-gray-400 text-sm"},Fp={__name:"ProjectClientsCard",props:{projectId:{type:Number,required:!0},canViewClientContacts:{type:Boolean,default:!1}},setup(e){const t=e,s=w([]),a=w(!0),i=w(null),n=async()=>{var o,r;if(a.value=!0,i.value=null,!t.canViewClientContacts){i.value="You don't have permission to view project clients.",a.value=!1;return}try{const c=await window.axios.get(`/api/projects/${t.projectId}/sections/clients?type=clients`);s.value=c.data}catch(c){console.error("Failed to fetch project clients:",c),i.value=((r=(o=c.response)==null?void 0:o.data)==null?void 0:r.message)||"Failed to load client data."}finally{a.value=!1}};return ze(()=>{n()}),ke(()=>t.canViewClientContacts,()=>{n()}),(o,r)=>(u(),m("div",Yp,[r[1]||(r[1]=l("h4",{class:"text-lg font-semibold text-gray-900 mb-4"},"Project Clients",-1)),a.value?(u(),m("div",Lp,r[0]||(r[0]=[l("div",{class:"space-y-3"},[l("div",{class:"h-4 bg-gray-200 rounded animate-pulse w-3/4"}),l("div",{class:"h-4 bg-gray-200 rounded animate-pulse w-2/3"}),l("div",{class:"h-4 bg-gray-200 rounded animate-pulse w-1/2"})],-1)]))):i.value?(u(),m("div",Ip,[l("p",null,y(i.value),1)])):s.value.length?(u(),m("ul",Np,[(u(!0),m(te,null,oe(s.value,c=>(u(),m("li",{key:c.id},[W(y(c.name)+" ",1),c.email?(u(),m("span",Pp,"("+y(c.email)+")",1)):S("",!0)]))),128))])):(u(),m("p",Wp,"No clients assigned."))]))}},Up={class:"bg-white p-6 rounded-xl shadow-md transition-shadow hover:shadow-lg"},Rp={key:0},Hp={key:1,class:"text-red-600 text-sm py-2"},Bp={key:2},zp={key:0,class:"space-y-2 text-sm text-gray-700 mb-4"},Gp={class:"font-medium"},qp={class:"text-xs text-gray-500 mt-1"},Zp={key:1,class:"text-gray-400 text-sm mb-4"},Kp={__name:"ProjectTeamCard",props:{projectId:{type:Number,required:!0},canViewUsers:{type:Boolean,default:!1}},setup(e){const t=e,s=jt(),a=w([]),i=w(!0),n=w(null),o=async()=>{var c,d;if(i.value=!0,n.value=null,!t.canViewUsers){n.value="You don't have permission to view project team members.",i.value=!1,a.value=[];return}try{const h=await window.axios.get(`/api/projects/${t.projectId}/sections/users`);a.value=h.data.users||[],console.log("Fetched team users:",a.value)}catch(h){console.error("Failed to fetch project users:",h),n.value=((d=(c=h.response)==null?void 0:c.data)==null?void 0:d.message)||"Failed to load team data."}finally{i.value=!1}},r=c=>{if(!c.availabilities||c.availabilities.length===0)return"No availability submitted for today.";const d=c.availabilities[0];return d.is_available?d.time_slots&&d.time_slots.length>0?`${d.time_slots.map(v=>`${v.start_time}-${v.end_time}`).join(", ")}`:"No specific slots provided.":`Not available today: ${d.reason||"No reason provided"}`};return ze(()=>{o()}),ke([()=>t.canViewUsers,()=>s.value,()=>t.projectId],()=>{o()},{deep:!0}),(c,d)=>(u(),m("div",Up,[d[3]||(d[3]=l("h4",{class:"text-lg font-semibold text-gray-900 mb-4"},"Project Team",-1)),i.value?(u(),m("div",Rp,d[0]||(d[0]=[l("div",{class:"space-y-3"},[l("div",{class:"h-4 bg-gray-200 rounded animate-pulse w-3/4"}),l("div",{class:"h-4 bg-gray-200 rounded animate-pulse w-2/3"}),l("div",{class:"h-4 bg-gray-200 rounded animate-pulse w-1/2"})],-1)]))):n.value?(u(),m("div",Hp,[l("p",null,y(n.value),1)])):(u(),m("div",Bp,[a.value.length?(u(),m("ul",zp,[(u(!0),m(te,null,oe(a.value,h=>{var v;return u(),m("li",{key:h.id,class:"border-b pb-2 last:border-b-0"},[l("div",null,[l("strong",null,y(h.name),1),d[1]||(d[1]=W(" (Role: ",-1)),l("span",Gp,y(((v=h.pivot)==null?void 0:v.role)||"N/A"),1),d[2]||(d[2]=W(") ",-1))]),l("div",qp," Today's Availability: "+y(r(h)),1)])}),128))])):(u(),m("p",Zp,"No team members assigned."))]))]))}},Jp={class:"bg-white p-6 rounded-xl shadow-md transition-shadow hover:shadow-lg"},Xp={key:0,class:"space-y-3"},Qp={key:1,class:"text-red-600 text-sm py-2 text-center"},e0={key:2},t0={class:"space-y-1 text-sm text-gray-700"},s0={key:0},a0={class:"inline-block text-gray-900"},i0={class:"inline-block text-gray-900"},n0={class:"inline-block text-gray-900"},l0={key:1},o0={key:0,class:"text-gray-400 text-sm"},r0={key:1,class:"text-gray-400 text-sm"},d0={key:0,class:"mt-4 text-right"},u0={__name:"UserFinancialCard",props:{projectId:{type:Number,required:!0}},emits:["viewUserTransactions"],setup(e,{emit:t}){const s=e,a=t,i=jt(),n=w(!0),o=w(null),r=w([]),c=Ft,d=async()=>{var k,D;if(n.value=!0,o.value=null,!i.value||!i.value.id||!s.projectId){r.value=[],n.value=!1;return}if(!Ce.value||Object.keys(Ce.value).length===0){o.value="Currency rates not loaded. Please try again.",n.value=!1;return}try{const x=await window.axios.get(`/api/projects/${s.projectId}/sections/transactions?user_id=${i.value.id}`);r.value=x.data,console.log("User-specific transactions:",r.value)}catch(x){console.error("Failed to fetch user transactions for UserFinancialsCard:",x),o.value=((D=(k=x.response)==null?void 0:k.data)==null?void 0:D.message)||"Failed to load your financial data.",r.value=[]}finally{n.value=!1}},h=B(()=>!i.value||!i.value.id||!r.value.length||!Ce.value||Object.keys(Ce.value).length===0?0:r.value.filter(D=>D.type==="expense").reduce((D,x)=>D+Mt(parseFloat(x.amount||0),x.currency,c.value),0)),v=B(()=>!i.value||!i.value.id||!r.value.length||!Ce.value||Object.keys(Ce.value).length===0?0:r.value.filter(D=>D.type==="bonus").reduce((D,x)=>D+Mt(parseFloat(x.amount||0),x.currency,c.value),0)),p=B(()=>!i.value||!i.value.id||!r.value.length||!Ce.value||Object.keys(Ce.value).length===0?0:r.value.filter(D=>(D.type==="expense"||D.type==="bonus")&&D.is_paid===1).reduce((D,x)=>D+Mt(parseFloat(x.amount||0),x.currency,c.value),0)),_=B(()=>i.value&&(h.value>0||v.value>0||p.value>0));ze(()=>{d()}),ke([()=>i.value,()=>s.projectId,c,Ce],()=>{d()},{deep:!0});const g=()=>{a("viewUserTransactions")};return(k,D)=>(u(),m("div",Jp,[D[5]||(D[5]=l("h4",{class:"text-lg font-semibold text-gray-900 mb-4"},"Your Financials",-1)),n.value?(u(),m("div",Xp,D[0]||(D[0]=[l("div",{class:"h-4 bg-gray-200 rounded animate-pulse w-full"},null,-1),l("div",{class:"h-4 bg-gray-200 rounded animate-pulse w-5/6"},null,-1),l("div",{class:"h-4 bg-gray-200 rounded animate-pulse w-3/4"},null,-1)]))):o.value?(u(),m("div",Qp,[l("p",null,y(o.value),1)])):(u(),m("div",e0,[l("dl",t0,[_.value?(u(),m("div",s0,[l("div",null,[D[1]||(D[1]=l("dt",{class:"font-medium inline-block w-32"},"Agreed Amount:",-1)),l("dd",a0,y(X(yt)(h.value,X(c))),1)]),l("div",null,[D[2]||(D[2]=l("dt",{class:"font-medium inline-block w-32"},"Bonus Amount:",-1)),l("dd",i0,y(X(yt)(v.value,X(c))),1)]),l("div",null,[D[3]||(D[3]=l("dt",{class:"font-medium inline-block w-32"},"Received Amount:",-1)),l("dd",n0,y(X(yt)(p.value,X(c))),1)])])):(u(),m("div",l0,[X(i)?(u(),m("p",r0," Your financials for this project are not available or you're not assigned. ")):(u(),m("p",o0," Sign in to view your specific financials. "))]))]),X(i)?(u(),m("div",d0,[f(Te,{onClick:g},{default:V(()=>D[4]||(D[4]=[W(" View Transactions ",-1)])),_:1,__:[4]})])):S("",!0)]))]))}},c0=ot(u0,[["__scopeId","data-v-34bab241"]]),m0={class:"p-4"},h0={key:0,class:"text-center text-gray-600"},v0={key:1,class:"text-red-600 text-sm py-2"},f0={key:2,class:"text-gray-500 text-center py-4"},p0={key:3,class:"overflow-x-auto"},y0={class:"min-w-full divide-y divide-gray-200"},g0={class:"bg-white divide-y divide-gray-200"},w0={class:"px-4 py-3 text-sm text-gray-900"},_0={class:"px-4 py-3 text-sm text-gray-700"},b0={class:"px-4 py-3 text-sm text-right text-gray-900"},k0={class:"px-4 py-3 text-sm"},x0={class:"px-4 py-3 text-sm text-gray-700"},D0={__name:"UserTransactionsModal",props:{show:{type:Boolean,default:!1},projectId:{type:Number,required:!0},projectName:{type:String,required:!1}},emits:["close"],setup(e,{emit:t}){const s=e,a=jt(),i=w(!0),n=w(null),o=w([]);w("PKR");const r=(d,h="USD")=>isNaN(d)||d==null?"0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:h,minimumFractionDigits:2,maximumFractionDigits:2}).format(d),c=async()=>{var d,h;if(i.value=!0,n.value=null,o.value=[],!a.value||!a.value.id||!s.projectId){n.value="User not authenticated or project ID missing.",i.value=!1;return}try{const v=await window.axios.get(`/api/projects/${s.projectId}/sections/transactions?user_id=${a.value.id}`);o.value=v.data}catch(v){console.error("Failed to fetch user-specific transactions for modal:",v),n.value=((h=(d=v.response)==null?void 0:d.data)==null?void 0:h.message)||"Failed to load transactions."}finally{i.value=!1}};return ke(()=>s.show,d=>{d&&c()},{immediate:!1}),ke([()=>{var d;return(d=a.value)==null?void 0:d.id},()=>s.projectId],(d,h)=>{s.show&&c()},{deep:!0}),B(()=>`Your Transactions for Project ${s.projectId}`),(d,h)=>(u(),ue(vt,{show:e.show,title:"Transactions for: "+e.projectName,"show-footer":!1,onClose:h[0]||(h[0]=v=>d.$emit("close")),"hide-submit-button":!0,"hide-cancel-button":!0,"api-endpoint":null,"form-data":"{}"},{default:V(({errors:v})=>[l("div",m0,[i.value?(u(),m("div",h0,h[1]||(h[1]=[l("div",{class:"space-y-3"},[l("div",{class:"h-4 bg-gray-200 rounded animate-pulse w-full"}),l("div",{class:"h-4 bg-gray-200 rounded animate-pulse w-5/6"}),l("div",{class:"h-4 bg-gray-200 rounded animate-pulse w-full"}),l("div",{class:"h-4 bg-gray-200 rounded animate-pulse w-2/3"})],-1)]))):n.value?(u(),m("div",v0,[l("p",null,y(n.value),1)])):o.value.length===0?(u(),m("div",f0," No transactions found for you on this project. ")):(u(),m("div",p0,[l("table",y0,[h[2]||(h[2]=l("thead",{class:"bg-gray-50"},[l("tr",null,[l("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Description"),l("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Type"),l("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Amount"),l("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),l("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date")])],-1)),l("tbody",g0,[(u(!0),m(te,null,oe(o.value,p=>(u(),m("tr",{key:p.id,class:"hover:bg-gray-50 transition-colors"},[l("td",w0,y(p.description),1),l("td",_0,y(p.type),1),l("td",b0,y(r(p.amount,p.currency)),1),l("td",k0,[l("span",{class:ie({"px-2 py-1 rounded-full text-xs font-medium":!0,"bg-green-100 text-green-800":p.is_paid===1,"bg-yellow-100 text-yellow-800":p.is_paid===0})},y(p.is_paid===1?"Paid":"Unpaid"),3)]),l("td",x0,y(new Date(p.created_at).toLocaleDateString()),1)]))),128))])])]))])]),_:1},8,["show","title"]))}},M0={class:"flex items-center justify-between p-4 border-b border-gray-200 bg-white rounded-tl-xl sticky top-0 z-20"},S0={class:"text-xl font-semibold text-gray-900"},T0={class:"flex-1 overflow-y-auto p-6 scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-gray-300 scrollbar-track-gray-100"},C0={key:1,class:"p-4 border-t border-gray-200 bg-white sticky bottom-0 z-20"},E0={__name:"RightSidebar",props:{show:{type:Boolean,default:!1},title:{type:String,default:"Details"},initialWidth:{type:Number,default:50},minWidth:{type:Number,default:30},maxWidth:{type:Number,default:90}},emits:["close","update:show"],setup(e,{emit:t}){const s=e,a=t,i=w(s.initialWidth),n=w(!1),o=v=>{n.value=!0,document.addEventListener("pointermove",r),document.addEventListener("pointerup",c)},r=v=>{if(!n.value)return;const p=window.innerWidth,g=(p-v.clientX)/p*100,k=Math.max(s.minWidth,Math.min(s.maxWidth,g));i.value=k},c=()=>{n.value=!1,document.removeEventListener("pointermove",r),document.removeEventListener("pointerup",c)};ke(()=>s.show,v=>{v?document.body.style.overflow="hidden":document.body.style.overflow=""},{immediate:!0});const d=()=>{a("update:show",!1),a("close")},h=B(()=>window.innerWidth<768);return ke(h,v=>{v&&s.show?i.value=100:!v&&s.show&&(i.value=s.initialWidth)},{immediate:!0}),ke(()=>s.show,v=>{v&&(h.value?i.value=100:i.value=s.initialWidth)}),(v,p)=>(u(),ue(Hi,{to:"body"},[f(Rt,{"enter-active-class":"transition ease-out duration-300 transform","enter-from-class":"translate-x-full","enter-to-class":"translate-x-0","leave-active-class":"transition ease-in duration-200 transform","leave-from-class":"translate-x-0","leave-to-class":"translate-x-full"},{default:V(()=>[e.show?(u(),m("div",{key:0,class:ie(["fixed inset-0 z-50 flex",{"pointer-events-none":!e.show}])},[l("div",{class:"relative ml-auto h-full bg-white shadow-xl flex flex-col rounded-l-xl",style:Ae({width:h.value?"100%":`${i.value}vw`})},[h.value?S("",!0):(u(),m("div",{key:0,class:"absolute left-0 top-0 h-full w-2 cursor-col-resize -ml-1 z-10",onPointerdown:o,title:"Drag to resize"},null,32)),l("div",M0,[l("h3",S0,y(e.title),1),l("button",{onClick:d,class:"text-gray-400 hover:text-gray-600 transition-colors"},p[0]||(p[0]=[l("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),l("div",T0,[de(v.$slots,"content",{},void 0,!0)]),v.$slots.footer?(u(),m("div",C0,[de(v.$slots,"footer",{},void 0,!0)])):S("",!0)],4)],2)):S("",!0)]),_:3})]))}},j0=ot(E0,[["__scopeId","data-v-2a0ea880"]]),$0={key:0,class:"text-center py-8 text-gray-500"},O0={key:1,class:"text-center py-8 text-red-600"},A0={key:2,class:"space-y-6"},V0={class:"bg-gray-50 p-4 rounded-lg shadow-sm"},Y0={class:"text-xl font-bold text-gray-900 mb-2"},L0={class:"flex items-center space-x-2 text-sm text-gray-600 mb-4"},I0={key:0,class:"text-indigo-600 font-medium"},N0={key:1,class:"text-purple-600 font-medium"},P0={class:"text-gray-700 leading-relaxed"},W0={class:"space-y-4 p-4 bg-white rounded-lg shadow-sm"},F0={class:"flex items-center justify-between py-2 border-b border-gray-100"},U0={class:"flex-1 text-right"},R0={key:1,class:"flex items-center space-x-2"},H0={class:"flex items-center justify-between py-2 border-b border-gray-100"},B0={class:"flex-1 text-right"},z0={key:1,class:"flex items-center space-x-2"},G0={class:"flex items-center justify-between py-2 border-b border-gray-100"},q0={class:"text-gray-700"},Z0={class:"bg-white p-4 rounded-lg shadow-sm"},K0={class:"flex justify-between items-center mb-4 border-b pb-2"},J0={key:0,class:"space-y-3"},X0={class:"text-sm text-gray-700"},Q0={class:"text-xs text-gray-500 mt-1"},ey={key:1,class:"text-gray-500 text-sm py-2"},ty={key:3,class:"text-center py-8 text-gray-500"},sy={__name:"TaskDetailSidebar",props:{taskId:{type:Number,required:!0},projectUsers:{type:Array,default:()=>[]}},emits:["close","task-updated","task-deleted"],setup(e,{emit:t}){const s=e,a=t,i=w(null),n=w(!0),o=w(""),r=w(!1),c=w(!1),d=w(null),h=w(null),v=w(!1),p=async()=>{n.value=!0,o.value="";try{const P=await window.axios.get(`/api/tasks/${s.taskId}`);i.value=P.data,d.value=i.value.assigned_to_id||null,h.value=i.value.due_date||null}catch(P){o.value="Failed to load task details.",console.error("Error fetching task details:",P)}finally{n.value=!1}};ke(()=>s.taskId,P=>{P?p():i.value=null},{immediate:!0});const _=B(()=>s.projectUsers.map(P=>({value:P.id,label:P.name}))),g=async()=>{if(!i.value||d.value===i.value.assigned_to_id){r.value=!1;return}try{const P=await window.axios.patch(`/api/tasks/${i.value.id}`,{assigned_to_user_id:d.value});i.value=P.data,a("task-updated",i.value)}catch(P){console.error("Error updating assigned user:",P),d.value=i.value.assigned_to_id,alert("Failed to update assigned user. Please try again.")}finally{r.value=!1}},k=async()=>{if(!i.value||h.value===i.value.due_date){c.value=!1;return}try{const P=await window.axios.patch(`/api/tasks/${i.value.id}`,{due_date:h.value});i.value=P.data,a("task-updated",i.value)}catch(P){console.error("Error updating due date:",P),h.value=i.value.due_date,alert("Failed to update due date. Please try again.")}finally{c.value=!1}},D=()=>{v.value=!0},x=()=>{p(),v.value=!1},N=B(()=>i.value?{"bg-yellow-100 text-yellow-800":i.value.status==="To Do","bg-blue-100 text-blue-800":i.value.status==="In Progress","bg-green-100 text-green-800":i.value.status==="Done","bg-red-100 text-red-800":i.value.status==="Blocked","bg-gray-100 text-gray-800":i.value.status==="Archived"}:"");return(P,$)=>{var he,ae,K,A;return n.value?(u(),m("div",$0," Loading task details... ")):o.value?(u(),m("div",O0,y(o.value),1)):i.value?(u(),m("div",A0,[l("div",V0,[l("h4",Y0,y(i.value.name),1),l("div",L0,[l("span",{class:ie(["px-2 py-1 rounded-full text-xs font-medium",N.value])},y(i.value.status),3),i.value.task_type?(u(),m("span",I0," | "+y((he=i.value.task_type)==null?void 0:he.name)+" | ",1)):S("",!0),$[7]||($[7]=l("br",null,null,-1)),(ae=i.value.milestone)!=null&&ae.name?(u(),m("span",N0,y((K=i.value.milestone)==null?void 0:K.name),1)):S("",!0)]),l("p",P0,y(i.value.description||"No description provided."),1)]),l("div",W0,[$[13]||($[13]=l("h5",{class:"text-lg font-semibold text-gray-800 border-b pb-2 mb-4"},"Task Attributes",-1)),l("div",F0,[f(z,{class:"min-w-[100px] text-gray-600"},{default:V(()=>$[8]||($[8]=[W("Assigned To:",-1)])),_:1,__:[8]}),l("div",U0,[r.value?(u(),m("div",R0,[f(Ve,{id:"edit-assigned-to",modelValue:d.value,"onUpdate:modelValue":$[1]||($[1]=T=>d.value=T),options:_.value,"value-key":"value","label-key":"label",placeholder:"Unassigned",class:"mt-1 flex-1","allow-empty":!0},null,8,["modelValue","options"]),l("button",{onClick:g,class:"text-green-600 hover:text-green-800 text-sm font-medium"},"Save"),l("button",{onClick:$[2]||($[2]=T=>r.value=!1),class:"text-gray-600 hover:text-gray-800 text-sm font-medium"},"Cancel")])):(u(),m("div",{key:0,onClick:$[0]||($[0]=T=>r.value=!0),class:"cursor-pointer text-indigo-600 hover:text-indigo-800"},[W(y(((A=i.value.assigned_to)==null?void 0:A.name)||"Unassigned")+" ",1),$[9]||($[9]=l("span",{class:"text-xs text-gray-400 ml-1"},"(Click to edit)",-1))]))])]),l("div",H0,[f(z,{class:"min-w-[100px] text-gray-600"},{default:V(()=>$[10]||($[10]=[W("Due Date:",-1)])),_:1,__:[10]}),l("div",B0,[c.value?(u(),m("div",z0,[f(be,{id:"edit-due-date",modelValue:h.value,"onUpdate:modelValue":$[4]||($[4]=T=>h.value=T),type:"date",class:"mt-1 flex-1"},null,8,["modelValue"]),l("button",{onClick:k,class:"text-green-600 hover:text-green-800 text-sm font-medium"},"Save"),l("button",{onClick:$[5]||($[5]=T=>c.value=!1),class:"text-gray-600 hover:text-gray-800 text-sm font-medium"},"Cancel")])):(u(),m("div",{key:0,onClick:$[3]||($[3]=T=>c.value=!0),class:"cursor-pointer text-indigo-600 hover:text-indigo-800"},[W(y(i.value.due_date?X(j)(i.value.due_date).format("MMM D, YYYY"):"No Due Date")+" ",1),$[11]||($[11]=l("span",{class:"text-xs text-gray-400 ml-1"},"(Click to edit)",-1))]))])]),l("div",G0,[f(z,{class:"min-w-[100px] text-gray-600"},{default:V(()=>$[12]||($[12]=[W("Created:",-1)])),_:1,__:[12]}),l("span",q0,y(i.value.created_at?new Date(i.value.created_at).toLocaleDateString():"N/A"),1)])]),l("div",Z0,[l("div",K0,[$[15]||($[15]=l("h5",{class:"text-lg font-semibold text-gray-800"},"Notes",-1)),f(Te,{onClick:D,class:"bg-indigo-600 hover:bg-indigo-700 transition-colors"},{default:V(()=>$[14]||($[14]=[W(" Add Note ",-1)])),_:1,__:[14]})]),i.value.notes&&i.value.notes.length>0?(u(),m("div",J0,[(u(!0),m(te,null,oe(i.value.notes,T=>(u(),m("div",{key:T.id,class:"p-3 bg-gray-50 rounded-md"},[l("p",X0,y(T.content),1),l("p",Q0," By "+y(T.creator_name||"Unknown")+" on "+y(new Date(T.created_at).toLocaleDateString()),1)]))),128))])):(u(),m("div",ey,"No notes for this task yet."))]),f(ki,{show:v.value,"task-for-note":i.value,onClose:$[6]||($[6]=T=>v.value=!1),onNoteAdded:x},null,8,["show","task-for-note"])])):(u(),m("div",ty," Select a task to view details. "))}}},ay={class:"py-8 max-w-full mx-auto px-4 sm:px-6 lg:px-8"},iy={key:0,class:"text-center text-gray-600 text-lg animate-pulse"},ny={key:1,class:"text-center text-red-600 text-lg font-medium"},ly={key:2,class:"space-y-8"},oy={class:"flex justify-end items-center mb-5"},ry={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},dy={key:1},uy={key:0,class:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow mb-6"},cy={class:"flex justify-between items-center mb-4"},my={class:"overflow-x-auto"},hy={class:"min-w-full divide-y divide-gray-200"},vy={class:"bg-white divide-y divide-gray-200"},fy={class:"px-4 py-3 text-sm text-gray-900"},py={class:"px-4 py-3 text-sm text-gray-700"},yy={class:"px-4 py-3 text-sm text-gray-700"},gy={class:"px-4 py-3 text-right"},wy=["onClick"],_y={key:1,class:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow mb-6"},by={class:"flex justify-between items-center mb-4"},ky={key:2,class:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow mb-6"},xy={class:"flex justify-between items-center mb-4"},Dy={key:0,class:"text-gray-400 text-sm"},My={key:1,class:"overflow-x-auto"},Sy={class:"min-w-full divide-y divide-gray-200"},Ty={class:"bg-white divide-y divide-gray-200"},Cy={class:"px-4 py-3 text-sm text-gray-900"},Ey={class:"px-4 py-3 text-sm text-gray-700"},jy={class:"px-4 py-3 text-sm text-gray-700"},$y={class:"px-4 py-3 text-right"},Oy={key:3,class:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow mb-6"},Ay={class:"flex justify-between items-center mb-4"},Vy={class:"flex items-center gap-4"},Yy={key:0},Ly={key:0,class:"space-y-4"},Iy={class:"flex justify-between"},Ny={class:"flex-grow"},Py={key:0,class:"text-xs text-red-400 block mt-1"},Wy={class:"flex items-center mt-1"},Fy={class:"text-xs text-gray-500"},Uy={key:0,class:"ml-2 px-2 py-0.5 bg-indigo-100 text-indigo-800 text-xs rounded-full"},Ry={key:0},Hy={key:1,class:"text-gray-400 text-sm"},By={__name:"Show",setup(e){const t=jt(),s=Bi().props.id,a=w({clients:[],users:[],notes:[],transactions:[],documents:[],meetings:[],tasks:[],emails:[]}),i=w(!0),n=w(""),o=w(!1),r=w(!1),c=w(!1),d=w(!1),h=w(!1),v=w(!1),p=w(!1),_=w(!1),g=w(null),k=w(!1),D=[{value:"active",label:"Active"},{value:"completed",label:"Completed"},{value:"on_hold",label:"On Hold"},{value:"archived",label:"Archived"}],x=[{value:"Website Designing",label:"Website Designing"},{value:"SEO",label:"SEO"},{value:"Social Media",label:"Social Media"},{value:"Content Writing",label:"Content Writing"},{value:"Graphic Design",label:"Graphic Design"}],N=[{value:"UpWork",label:"UpWork"},{value:"Direct",label:"Direct Client"},{value:"Wix Marketplace",label:"Wix Marketplace"},{value:"Referral",label:"Referral"}],P=w(null),$=w(null),he=zi(a),{canDo:ae,canView:K}=Ma(s),A=B(()=>{var ne,F;return((F=(ne=t.value)==null?void 0:ne.role_data)==null?void 0:F.slug)==="super-admin"}),T=B(()=>ae("manage_projects").value||A.value),b=B(()=>K("emails").value),E=B(()=>ae("compose_emails").value),Y=B(()=>ae("approve_emails").value),L=B(()=>K("project_notes").value),M=B(()=>ae("add_project_notes").value),I=B(()=>K("client_contacts").value);B(()=>K("users").value);const G=B(()=>K("project_financial",he).value),C=B(()=>K("project_transactions").value);B(()=>K("client_financial").value);const Q=[{value:"PKR",label:"PKR"},{value:"AUD",label:"AUD"},{value:"INR",label:"INR"},{value:"USD",label:"USD"},{value:"EUR",label:"EUR"},{value:"GBP",label:"GBP"}],ge=w([]),Yt=async()=>{try{const ne=await window.axios.get(`/api/projects/${s}/due-and-overdue-tasks`);ge.value=ne.data}catch(ne){console.error("Error fetching due and overdue tasks:",ne)}},J=B(()=>a.value.notes?[...a.value.notes].filter(ne=>ne.type!=="standup").sort((ne,F)=>new Date(F.created_at)-new Date(ne.created_at)).slice(0,3):[]),R=w([]),H=async()=>{try{const ne=await window.axios.get(`/api/projects/${s}/emails-simplified`,{params:{limit:5}});R.value=ne.data}catch(ne){console.error("Error fetching latest emails:",ne)}},we=async()=>{i.value=!0,n.value="";try{const ne=await window.axios.get(`/api/projects/${s}`);a.value=ne.data,console.log("Full project data received (Show.vue main fetch):",a.value),await Yt()}catch(ne){n.value="Failed to load project data.",console.error("Error fetching project data:",ne),ne.response&&(ne.response.status===401||ne.response.status===403)&&(n.value="You are not authorized to view this project or your session expired. Please log in.")}finally{i.value=!1}},Qt=ne=>{a.value=ne,o.value=!1,we()},Mi=ne=>{a.value.tasks=ne},Si=ne=>{a.value.emails=ne,b.value&&H()},na=ne=>{a.value.notes=ne},Ti=()=>{P.value&&P.value.fetchMeetings()},la=()=>{we()},Ci=ne=>{$.value=ne},Ei=()=>{v.value=!0},ji=()=>{p.value=!0,$.value="emails"},$i=async()=>{p.value=!1,await we(),b.value&&await H()},Oi=()=>{p.value=!1},oa=ne=>{console.log("hit"),g.value=ne,_.value=!0},ra=()=>{_.value=!1,g.value=null},Ai=()=>{we()},Vi=ne=>{a.value.tasks=a.value.tasks.filter(F=>F.id!==ne),we(),ra()},Yi=()=>{k.value=!0},Li=()=>{k.value=!1,we()};return ze(async()=>{console.log("Show.vue mounted, fetching initial data...");try{await Gi(s),console.log("Project permissions fetched (includes global)")}catch(ne){console.error(`Error fetching permissions for project ${s}:`,ne)}await Ki(),await we(),b.value&&await H()}),(ne,F)=>(u(),m(te,null,[f(X(qi),{title:a.value.name||"Project Details"},null,8,["title"]),f(Ni,null,{default:V(()=>{var da;return[l("div",ay,[i.value?(u(),m("div",iy," Loading project details... ")):n.value?(u(),m("div",ny,y(n.value),1)):(u(),m("div",ly,[f(Om,{project:a.value,"project-id":X(s),"can-manage-projects":T.value,"is-super-admin":A.value,onOpenEditModal:F[0]||(F[0]=Z=>o.value=!0),onOpenStandupModal:F[1]||(F[1]=Z=>c.value=!0),onOpenMeetingModal:F[2]||(F[2]=Z=>r.value=!0),onOpenMagicLinkModal:F[3]||(F[3]=Z=>h.value=!0),onResourceSaved:we,onOpenComposeModal:ji},null,8,["project","project-id","can-manage-projects","is-super-admin"]),f(cn,{"project-id":X(s),ref_key:"meetingsListComponent",ref:P},null,8,["project-id"]),f(Um,{tasks:a.value.tasks||[],emails:a.value.emails||[]},null,8,["tasks","emails"]),l("div",oy,[f(Ve,{id:"display-currency-switcher",modelValue:X(Ft),"onUpdate:modelValue":F[4]||(F[4]=Z=>Zi(Ft)?Ft.value=Z:null),options:Q,"value-key":"value","label-key":"label",class:"w-20",containerClasses:"max-w-[150px]"},null,8,["modelValue"])]),G.value&&C.value?(u(),ue(Vp,{key:0,"project-id":X(s),"can-view-project-services-and-payments":G.value,"can-view-project-transactions":C.value},null,8,["project-id","can-view-project-services-and-payments","can-view-project-transactions"])):S("",!0),l("div",ry,[I.value?(u(),ue(Fp,{key:0,"project-id":X(s),"can-view-client-contacts":I.value},null,8,["project-id","can-view-client-contacts"])):S("",!0),f(Kp,{"project-id":X(s),"can-view-users":!0},null,8,["project-id"]),f(c0,{"project-id":X(s),onViewUserTransactions:Ei},null,8,["project-id"])]),f(zm,{selectedTab:$.value,"onUpdate:selectedTab":F[5]||(F[5]=Z=>$.value=Z),"can-view-emails":b.value,"can-view-notes":L.value},null,8,["selectedTab","can-view-emails","can-view-notes"]),$.value===null?(u(),m("div",dy,[ge.value.length>0?(u(),m("div",uy,[l("div",cy,[F[24]||(F[24]=l("h4",{class:"text-lg font-semibold text-gray-900"},"Due & Overdue Tasks",-1)),l("button",{onClick:F[6]||(F[6]=Z=>$.value="tasks"),class:"text-sm text-indigo-600 hover:text-indigo-800 font-medium"}," View All Tasks → ")]),l("div",my,[l("table",hy,[F[25]||(F[25]=l("thead",{class:"bg-gray-50"},[l("tr",null,[l("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Title"),l("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),l("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Assigned To"),l("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),l("tbody",vy,[(u(!0),m(te,null,oe(ge.value,Z=>{var ut;return u(),m("tr",{key:Z.id,class:"hover:bg-gray-50 transition-colors"},[l("td",fy,y(Z.name),1),l("td",py,[l("span",{class:ie({"px-2 py-1 rounded-full text-xs font-medium":!0,"bg-yellow-100 text-yellow-800":Z.status==="To Do","bg-blue-100 text-blue-800":Z.status==="In Progress","bg-green-100 text-green-800":Z.status==="Done","bg-red-100 text-red-800":Z.status==="Blocked","bg-gray-100 text-gray-800":Z.status==="Archived"})},y(Z.status),3)]),l("td",yy,y((ut=Z.assigned_to)==null?void 0:ut.name),1),l("td",gy,[l("button",{onClick:ua=>oa(Z.id),class:"text-indigo-600 hover:text-indigo-800 text-sm font-medium"}," View/Edit ",8,wy)])])}),128))])])])])):(u(),m("div",_y,[l("div",by,[F[26]||(F[26]=l("h4",{class:"text-lg font-semibold text-gray-900"},"Due & Overdue Tasks",-1)),l("button",{onClick:F[7]||(F[7]=Z=>$.value="tasks"),class:"text-sm text-indigo-600 hover:text-indigo-800 font-medium"}," View All Tasks → ")]),F[27]||(F[27]=l("p",{class:"text-gray-400 text-sm"},"No due or overdue tasks.",-1))])),b.value?(u(),m("div",ky,[l("div",xy,[F[28]||(F[28]=l("h4",{class:"text-lg font-semibold text-gray-900"},"Latest Emails",-1)),l("button",{onClick:F[8]||(F[8]=Z=>$.value="emails"),class:"text-sm text-indigo-600 hover:text-indigo-800 font-medium"}," View All Emails → ")]),(da=a.value.emails)!=null&&da.length?(u(),m("div",My,[l("table",Sy,[F[29]||(F[29]=l("thead",{class:"bg-gray-50"},[l("tr",null,[l("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Subject"),l("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"From"),l("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date"),l("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),l("tbody",Ty,[(u(!0),m(te,null,oe(R.value,Z=>{var ut;return u(),m("tr",{key:Z.id,class:"hover:bg-gray-50 transition-colors"},[l("td",Cy,y(Z.subject),1),l("td",Ey,y(((ut=Z.sender)==null?void 0:ut.name)||"N/A"),1),l("td",jy,y(new Date(Z.created_at).toLocaleDateString()),1),l("td",$y,[l("button",{onClick:F[9]||(F[9]=ua=>$.value="emails"),class:"text-indigo-600 hover:text-indigo-800 text-sm font-medium"}," View ")])])}),128))])])])):(u(),m("div",Dy,"No email communication found."))])):S("",!0),L.value?(u(),m("div",Oy,[l("div",Ay,[F[31]||(F[31]=l("h4",{class:"text-lg font-semibold text-gray-900"},"Latest Notes",-1)),l("div",Vy,[l("button",{onClick:F[10]||(F[10]=Z=>$.value="notes"),class:"text-sm text-indigo-600 hover:text-indigo-800 font-medium"}," View All Notes → "),M.value?(u(),m("div",Yy,[f(Te,{class:"bg-indigo-600 hover:bg-indigo-700 transition-colors",onClick:F[11]||(F[11]=Z=>d.value=!0)},{default:V(()=>F[30]||(F[30]=[W(" Add Note ",-1)])),_:1,__:[30]})])):S("",!0)])]),J.value.length?(u(),m("div",Ly,[(u(!0),m(te,null,oe(J.value,Z=>{var ut;return u(),m("div",{key:Z.id,class:"p-4 bg-gray-50 rounded-md shadow-sm hover:bg-gray-100 transition-colors"},[l("div",Iy,[l("div",Ny,[l("p",{class:ie(["text-sm",{"text-gray-700":Z.content!=="[Encrypted content could not be decrypted]","text-red-500 italic":Z.content==="[Encrypted content could not be decrypted]"}])},[W(y(Z.content)+" ",1),Z.content==="[Encrypted content could not be decrypted]"?(u(),m("span",Py," (There was an issue decrypting this note. Please contact an administrator.) ")):S("",!0)],2),l("div",Wy,[l("p",Fy,"Added by "+y(((ut=Z.user)==null?void 0:ut.name)||"Unknown")+" on "+y(new Date(Z.created_at).toLocaleDateString()),1),Z.reply_count>0?(u(),m("span",Uy,y(Z.reply_count)+" "+y(Z.reply_count===1?"reply":"replies"),1)):S("",!0)])]),L.value&&Z.chat_message_id&&a.value.google_chat_id?(u(),m("div",Ry,[l("button",{onClick:F[12]||(F[12]=ua=>$.value="notes"),class:"text-sm text-indigo-600 hover:text-indigo-800 font-medium"}," View ")])):S("",!0)])])}),128))])):(u(),m("p",Hy,"No notes available."))])):S("",!0)])):S("",!0),$.value==="tasks"?(u(),ue(ov,{key:2,"project-id":X(s),"project-users":a.value.users||[],"can-manage-projects":T.value,onTasksUpdated:Mi,onOpenTaskDetailSidebar:oa,onOpenCreateTaskModal:Yi},null,8,["project-id","project-users","can-manage-projects"])):S("",!0),$.value==="emails"?(u(),ue(Nf,{key:3,"project-id":X(s),"can-view-emails":b.value,"can-compose-emails":E.value,"can-approve-emails":Y.value,"user-project-role":X(he),"open-compose":p.value,onEmailsUpdated:Si,onResetOpenCompose:F[13]||(F[13]=Z=>p.value=!1)},null,8,["project-id","can-view-emails","can-compose-emails","can-approve-emails","user-project-role","open-compose"])):S("",!0),$.value==="standups"?(u(),ue(_c,{key:4,projectId:X(s),users:a.value.users||[],onStandupAdded:la},null,8,["projectId","users"])):S("",!0),$.value==="notes"?(u(),ue(wp,{key:5,"project-id":X(s),"google-chat-id":a.value.google_chat_id,"can-view-notes":L.value,"can-add-notes":M.value,onNotesUpdated:na,onChangeTab:Ci},null,8,["project-id","google-chat-id","can-view-notes","can-add-notes"])):S("",!0)]))]),f(nt,{show:o.value,onClose:F[15]||(F[15]=Z=>o.value=!1)},{default:V(()=>[f(Ji,{show:o.value,project:a.value,statusOptions:D,departmentOptions:x,sourceOptions:N,clientRoleOptions:[],userRoleOptions:[],paymentTypeOptions:[],onClose:F[14]||(F[14]=Z=>o.value=!1),onSubmit:Qt},null,8,["show","project"])]),_:1},8,["show"]),f(Yc,{show:r.value,onClose:F[16]||(F[16]=Z=>r.value=!1),onSaved:Ti,projectId:X(s),projectUsers:a.value.users||[]},null,8,["show","projectId","projectUsers"]),f(Sa,{show:c.value,onClose:F[17]||(F[17]=Z=>c.value=!1),onStandupAdded:la,projectId:X(s)},null,8,["show","projectId"]),f(Ta,{show:d.value,"project-id":X(s),onClose:F[18]||(F[18]=Z=>d.value=!1),onNoteAdded:na},null,8,["show","project-id"]),f(Uc,{show:h.value,"project-id":X(s),"project-clients":a.value.clients||[],onClose:F[19]||(F[19]=Z=>h.value=!1)},null,8,["show","project-id","project-clients"]),f(D0,{show:v.value,"project-id":X(s),"project-name":a.value.name,onClose:F[20]||(F[20]=Z=>v.value=!1)},null,8,["show","project-id","project-name"]),f(Di,{show:p.value,"project-id":X(s),"user-project-role":X(he),onClose:Oi,onSubmitted:$i,onError:F[21]||(F[21]=Z=>console.error("Error composing email:",Z))},null,8,["show","project-id","user-project-role"]),f(j0,{show:_.value,"onUpdate:show":F[22]||(F[22]=Z=>_.value=Z),title:"Task Details",initialWidth:50},{content:V(()=>[f(sy,{"task-id":g.value,"project-users":a.value.users||[],onClose:ra,onTaskUpdated:Ai,onTaskDeleted:Vi},null,8,["task-id","project-users"])]),_:1},8,["show"]),f(Ii,{show:k.value,"project-id":X(s),onClose:F[23]||(F[23]=Z=>k.value=!1),onSaved:Li},null,8,["show","project-id"])]}),_:1})],64))}},ag=ot(By,[["__scopeId","data-v-e6ace2aa"]]);export{ag as default};
