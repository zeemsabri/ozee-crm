import{_ as M}from"./AuthenticatedLayout-CRUn8Mjb.js";import{r as y,d as j,c as b,o as w,f as i,u as e,h as D,w as p,a as o,l as R,t as d,i as S,F as T}from"./app-Cac_F2Ek.js";import{_ as U}from"./PrimaryButton-s0LLA_zq.js";import{u as q,_ as I}from"./LeadFormModal-BohRtver.js";import Q from"./LeadsFilters-BImP5b-m.js";import z from"./LeadKanban-CoeNTApk.js";import"./Modal-BUM9gTnU.js";import"./InputLabel-CIRpkHDv.js";import"./InputError-T9J3K9xW.js";import"./SecondaryButton-dXnWi67E.js";import"./index-RTdmJsaA.js";import"./BaseFormModal-C6iKL--z.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./TextInput-BkFkKbbu.js";import"./SelectDropdown-BAh_w6Vu.js";/* empty css                                                                       */import"./debounce-C-hnF4Z3.js";import"./RightSidebar-BvOdp4CA.js";import"./ApplicationLogo-D6QW-2w9.js";import"./MultiSelectDropdown-B6HIbSdJ.js";import"./createLucideIcon-B6FE2Bwl.js";import"./plus-iZJD0OsM.js";import"./DangerButton-DcCT0gAs.js";import"./moment-BLMuvzoS.js";import"./taskState-BCtt1CuX.js";import"./NoticeboardModal-BDWIF9rK.js";import"./x-Bx6otA2x.js";import"./LeadCard-DJ3dW2j7.js";import"./KanbanBoard-Df4kJ6d6.js";const G={class:"flex items-center justify-between"},H={class:"py-6 min-h-screen w-full"},J={class:"w-full px-4 sm:px-6 lg:px-8"},K={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},W={class:"p-6 text-gray-900"},X={key:0,class:"mb-4 text-red-600"},Y={class:"mt-4 flex items-center justify-between"},Z={class:"text-sm text-gray-600"},ee={class:"flex gap-2"},te=["disabled"],se=["disabled"],Oe={__name:"Index",props:{sourceOptions:{type:Array,default:()=>[]}},setup(h){const m=h,c=[{label:"New",value:"new"},{label:"Contacted",value:"contacted"},{label:"Qualified",value:"qualified"},{label:"Converted",value:"converted"},{label:"Lost",value:"lost"}],{leads:L,leadsByStatus:C,loading:f,generalError:v,filters:$,users:_,fetchUsers:N,fetchLeads:n,resetFilters:k,deleteLead:F,updateLead:P,currentPage:a,lastPage:g,total:B,changePage:x}=q(),r=y(!1),u=y(null),E=()=>{u.value=null,r.value=!0},O=l=>{u.value=l,r.value=!0},V=async({id:l,status:t})=>{try{const s=L.value.find(A=>A.id===l);if(s&&s.status===t)return;await P(l,{status:t})}catch(s){console.error("Failed to move lead",s)}};return j(async()=>{await N(),await n()}),(l,t)=>(w(),b(T,null,[i(e(D),{title:"Leads"}),i(M,null,{header:p(()=>[o("div",G,[t[8]||(t[8]=o("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Admin / Leads",-1)),i(U,{onClick:E},{default:p(()=>t[7]||(t[7]=[S("New Lead",-1)])),_:1,__:[7]})])]),default:p(()=>[o("div",H,[o("div",J,[o("div",K,[o("div",W,[e(v)?(w(),b("div",X,d(e(v)),1)):R("",!0),i(Q,{filters:e($),"source-options":m.sourceOptions,"status-options":c,users:e(_),loading:e(f),onApply:t[0]||(t[0]=()=>{a.value=1,e(n)()}),onReset:e(k)},null,8,["filters","source-options","users","loading","onReset"]),i(z,{"leads-by-status":e(C),loading:e(f),onEdit:O,onDelete:t[1]||(t[1]=s=>e(F)(s.id)),onMove:V},null,8,["leads-by-status","loading"]),o("div",Y,[o("div",Z,"Page "+d(e(a))+" of "+d(e(g))+" â€” Total "+d(e(B)),1),o("div",ee,[o("button",{class:"px-3 py-1.5 text-sm bg-gray-100 rounded disabled:opacity-50",disabled:e(a)<=1,onClick:t[2]||(t[2]=s=>e(x)(e(a)-1))},"Previous",8,te),o("button",{class:"px-3 py-1.5 text-sm bg-gray-100 rounded disabled:opacity-50",disabled:e(a)>=e(g),onClick:t[3]||(t[3]=s=>e(x)(e(a)+1))},"Next",8,se)])])])])])]),i(I,{show:r.value,lead:u.value,users:e(_),"source-options":m.sourceOptions,"status-options":c,onClose:t[4]||(t[4]=s=>r.value=!1),onLeadCreated:t[5]||(t[5]=s=>e(n)()),onLeadUpdated:t[6]||(t[6]=s=>e(n)())},null,8,["show","lead","users","source-options"])]),_:1})],64))}};export{Oe as default};
