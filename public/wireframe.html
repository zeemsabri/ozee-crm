<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wireframe Pro (Multi-select)</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React and ReactDOM CDNs -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
    <!-- Babel Standalone for JSX compilation in the browser (Correct Version) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc; /* slate-50 */
        }
        /* Custom scrollbar for a modern look */
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: #f1f5f9; }
        ::-webkit-scrollbar-thumb { background: #94a3b8; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #64748b; }

        /* Style for the canvas grid background */
        .grid-background {
            background-image:
                linear-gradient(to right, #e2e8f0 1px, transparent 1px),
                linear-gradient(to bottom, #e2e8f0 1px, transparent 1px);
            background-size: 20px 20px;
        }
        /* Prevents default browser context menu and text selection */
        .canvas-container {
            -webkit-touch-callout: none; -webkit-user-select: none;
            -khtml-user-select: none; -moz-user-select: none;
            -ms-user-select: none; user-select: none;
        }
    </style>
</head>
<body>
<div id="root"></div>

<script type="text/babel">
    const { useState, useEffect, useRef, useCallback, useMemo, useReducer } = React;

    // --- ICONS (Expanded Library) ---
    const ICONS = {
        chevronLeft: <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="15 18 9 12 15 6"></polyline></svg>,
        chevronRight: <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg>,
        hero: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect width="18" height="10" x="3" y="11" rx="2"/><path d="m7 11-4 4"/><path d="M21 11.1c.33.34.66.68 1 1"/><path d="m21 16-4-4"/><path d="M3 21h18"/><path d="M12 3v8"/></svg>,
        image: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect width="18" height="18" x="3" y="3" rx="2"/><circle cx="9" cy="9" r="2"/><path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"/></svg>,
        text: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M17 6.1H3"/><path d="M21 12.1H3"/><path d="M15.1 18.1H3"/></svg>,
        button: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect width="18" height="10" x="3" y="7" rx="2"/><path d="M8 12h8"/></svg>,
        input: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect width="20" height="8" x="2" y="10" rx="2"/><path d="M8 14h.01"/></svg>,
        navbar: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect width="20" height="6" x="2" y="4" rx="1"/><path d="M6 8h.01"/><path d="M10 8h.01"/><path d="M14 8h.01"/></svg>,
        trash: <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M3 6h18"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"/><path d="M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></svg>,
        copy: <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></svg>,
        upload: <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" x2="12" y1="3" y2="15"/></svg>,
        download: <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" x2="12" y1="15" y2="3"/></svg>,
        container: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect></svg>,
        heading: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M6 12h12M6 5v14m12-14v14"/></svg>,
        hr: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="3" y1="12" x2="21" y2="12"></line></svg>,
        textarea: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M3 12h18M3 7h18M3 17h12"/></svg>,
        checkbox: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="9 11 12 14 22 4"></polyline><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"></path></svg>,
        radio: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"></circle><circle cx="12" cy="12" r="4"></circle></svg>,
        select: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="3" y="4" width="18" height="6" rx="2"></rect><path d="m6 8 6 6 6-6"></path></svg>,
        card: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="2" y="5" width="20" height="14" rx="2"></rect><path d="M2 10h20"></path></svg>,
        table: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="3" y1="9" x2="21" y2="9"></line><line x1="3" y1="15" x2="21" y2="15"></line><line x1="12" y1="3" x2="12" y2="21"></line></svg>,
        modal: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="5" y="3" width="14" height="18" rx="2"></rect><path d="M9 7h6"></path><path d="M9 11h6"></path><path d="M9 15h4"></path></svg>,
        avatar: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="8" r="5"></circle><path d="M20 21a8 8 0 0 0-16 0"></path></svg>,
        link: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.72"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.72-1.72"></path></svg>,
        label: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.432 0l6.568-6.568a2.426 2.426 0 0 0 0-3.432L12.586 2.586z"></path><circle cx="8.5" cy="8.5" r="1.5"></circle></svg>,
        footer: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="2" y="18" width="20" height="4" rx="1"></rect><path d="M6 20h.01"/><path d="M10 20h.01"/><path d="M14 20h.01"/></svg>,
        sidebar: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="9" y1="3" x2="9" y2="21"></line></svg>,
        accordion: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="3" y="4" width="18" height="4" rx="1"></rect><rect x="3" y="10" width="18" height="4" rx="1"></rect><rect x="3" y="16" width="18" height="4" rx="1"></rect><path d="m7 7 2 2 2-2"></path></svg>,
        tabs: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M22 7V5a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2"></path><path d="M2 11h20"></path><path d="M6 7h4v4H6z"></path></svg>,
    };

    // --- COMPONENT DEFINITIONS (Expanded & Categorized) ---
    const COMPONENT_DEFS = {
        // --- Layout ---
        Container: { category: 'Layout', name: "Container", icon: ICONS.container, default: { size: { width: 400, height: 200 }, content: {} }, render: () => <div className="h-full w-full bg-slate-100 border-2 border-dashed border-slate-400 rounded-lg"></div> },
        Hr: { category: 'Layout', name: "H-Rule", icon: ICONS.hr, default: { size: { width: 400, height: 20 }, content: {} }, render: () => <div className="flex items-center justify-center h-full w-full"><div className="h-0.5 w-full bg-slate-400"></div></div> },
        Navbar: { category: 'Navigation', name: "Header", icon: ICONS.navbar, default: { size: { width: 800, height: 60 }, content: { logo: "Logo", links: "Home, About, Contact" } }, render: ({ content }) => ( <div className="flex items-center justify-between h-full w-full bg-slate-100 rounded-lg text-sm font-medium border-2 border-dashed border-slate-400 px-4"> <div className="font-bold text-slate-800">{content.logo}</div> <div className="flex gap-4 text-slate-600"> {content.links.split(',').map(link => <span key={link}>{link.trim()}</span>)} </div> </div> ) },
        Footer: { category: 'Navigation', name: "Footer", icon: ICONS.footer, default: { size: { width: 800, height: 50 }, content: { text: "© 2025 Company, Inc. All rights reserved." } }, render: ({ content }) => <div className="flex items-center justify-center h-full w-full bg-slate-200 rounded-lg text-xs text-slate-600 border-2 border-dashed border-slate-400">{content.text}</div> },
        Sidebar: { category: 'Navigation', name: "Sidebar", icon: ICONS.sidebar, default: { size: { width: 200, height: 500 }, content: { items: "Dashboard,Analytics,Reports" } }, render: ({ content }) => <div className="h-full w-full bg-slate-100 border-2 border-dashed border-slate-400 rounded-lg p-4"><h4 className="font-bold mb-4">Menu</h4><ul className="space-y-2">{content.items.split(',').map(item=><li key={item} className="text-sm text-slate-700">{item.trim()}</li>)}</ul></div> },

        // --- Typography ---
        Heading: { category: 'Typography', name: "Heading", icon: ICONS.heading, default: { size: { width: 300, height: 50 }, content: { text: "Main Heading" } }, render: ({ content }) => <div className="flex items-center h-full"><h1 className="text-2xl font-bold text-slate-800 truncate">{content.text}</h1></div> },
        Text: { category: 'Typography', name: "Paragraph", icon: ICONS.text, default: { size: { width: 300, height: 100 }, content: { text: "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua." } }, render: ({ content }) => <div className="p-2"><p className="text-sm text-slate-700">{content.text}</p></div> },
        Label: { category: 'Typography', name: "Label", icon: ICONS.label, default: { size: { width: 80, height: 24 }, content: { text: "Field Label" } }, render: ({ content }) => <div className="flex items-center"><label className="text-sm font-medium text-slate-700">{content.text}</label></div> },
        Link: { category: 'Typography', name: "Link", icon: ICONS.link, default: { size: { width: 100, height: 24 }, content: { text: "Clickable Link" } }, render: ({ content }) => <div className="flex items-center"><a href="#" onClick={e=>e.preventDefault()} className="text-sm text-blue-600 underline hover:text-blue-800">{content.text}</a></div> },

        // --- Forms & Input ---
        Form: { category: 'Forms', name: "Form", icon: ICONS.container, default: { size: { width: 350, height: 250 }, content: {} }, render: () => <div className="h-full w-full bg-slate-100 border-2 border-dashed border-slate-400 rounded-lg p-4 flex flex-col gap-4"><div className="h-10 w-full bg-white rounded border-2 border-dashed border-slate-300"></div><div className="h-10 w-full bg-white rounded border-2 border-dashed border-slate-300"></div><div className="h-10 w-24 bg-slate-800 rounded self-start"></div></div> },
        Input: { category: 'Forms', name: "Input", icon: ICONS.input, default: { size: { width: 240, height: 40 }, content: { placeholder: "Enter text..." } }, render: ({ content }) => <div className="flex items-center h-full w-full bg-white rounded-md text-sm text-slate-500 border-2 border-dashed border-slate-400 px-3">{content.placeholder}</div> },
        Textarea: { category: 'Forms', name: "Text Area", icon: ICONS.textarea, default: { size: { width: 240, height: 80 }, content: { placeholder: "Enter more text..." } }, render: ({ content }) => <div className="h-full w-full bg-white rounded-md text-sm text-slate-500 border-2 border-dashed border-slate-400 p-3">{content.placeholder}</div> },
        Button: { category: 'Forms', name: "Button", icon: ICONS.button, default: { size: { width: 120, height: 40 }, content: { text: "Click Me" } }, render: ({ content }) => <div className="flex items-center justify-center h-full w-full bg-slate-800 text-white rounded-md text-sm font-semibold">{content.text}</div> },
        Checkbox: { category: 'Forms', name: "Checkbox", icon: ICONS.checkbox, default: { size: { width: 120, height: 24 }, content: { label: "Option" } }, render: ({ content }) => <div className="flex items-center gap-2"><div className="w-5 h-5 border-2 border-slate-400 rounded"></div><span className="text-sm text-slate-700">{content.label}</span></div> },
        Radio: { category: 'Forms', name: "Radio", icon: ICONS.radio, default: { size: { width: 120, height: 24 }, content: { label: "Choice" } }, render: ({ content }) => <div className="flex items-center gap-2"><div className="w-5 h-5 border-2 border-slate-400 rounded-full"></div><span className="text-sm text-slate-700">{content.label}</span></div> },
        Select: { category: 'Forms', name: "Select", icon: ICONS.select, default: { size: { width: 180, height: 40 }, content: { text: "Choose an option" } }, render: ({ content }) => <div className="flex items-center justify-between h-full w-full bg-white rounded-md text-sm text-slate-700 border-2 border-dashed border-slate-400 px-3"><span>{content.text}</span><svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M19 9l-7 7-7-7"></path></svg></div> },

        // --- Content Display ---
        Image: { category: 'Content', name: "Image", icon: ICONS.image, default: { size: { width: 300, height: 200 }, content: { alt: "Placeholder Image" } }, render: ({ content }) => ( <div className="flex items-center justify-center h-full w-full p-4 border-2 border-dashed border-slate-400 bg-slate-100 rounded-lg text-slate-500 font-sans text-sm"> <div className="text-center"> {ICONS.image} <span className="mt-2 block">{content.alt}</span> </div> </div> ) },
        Avatar: { category: 'Content', name: "Avatar", icon: ICONS.avatar, default: { size: { width: 80, height: 80 }, content: {} }, render: () => <div className="h-full w-full bg-slate-200 border-2 border-dashed border-slate-400 rounded-full flex items-center justify-center text-slate-400">{ICONS.avatar}</div> },
        Card: { category: 'Content', name: "Card", icon: ICONS.card, default: { size: { width: 250, height: 300 }, content: { title: "Card Title", text: "Some quick example text to build on the card title." } }, render: ({ content }) => <div className="h-full w-full bg-white border-2 border-dashed border-slate-400 rounded-lg shadow-sm p-4 flex flex-col"><div className="h-32 bg-slate-200 rounded mb-4"></div><h4 className="font-bold text-slate-800 mb-1">{content.title}</h4><p className="text-xs text-slate-600 flex-grow">{content.text}</p></div> },
        Table: { category: 'Content', name: "Table", icon: ICONS.table, default: { size: { width: 500, height: 200 }, content: { headers: "Col 1,Col 2,Col 3", rows: "Val A,Val B,Val C\nVal D,Val E,Val F" } }, render: ({ content }) => <div className="h-full w-full border-2 border-dashed border-slate-400 rounded-lg p-2 text-xs"><table className="w-full"><thead><tr className="border-b-2 border-dashed border-slate-400">{content.headers.split(',').map(h=><th key={h} className="p-1 text-left font-bold">{h.trim()}</th>)}</tr></thead><tbody>{content.rows.split('\n').map((row, i)=><tr key={i} className="border-b border-dashed border-slate-300">{row.split(',').map((cell, j)=><td key={j} className="p-1">{cell.trim()}</td>)}</tr>)}</tbody></table></div> },

        // --- Feedback & Overlays ---
        Modal: { category: 'Feedback', name: "Modal", icon: ICONS.modal, default: { size: { width: 400, height: 250 }, content: { title: "Modal Title", text: "This is the modal body text." } }, render: ({ content }) => <div className="h-full w-full bg-white border-2 border-dashed border-slate-400 rounded-lg shadow-lg p-4 flex flex-col"><h4 className="font-bold text-slate-800 mb-2 pb-2 border-b-2 border-dashed border-slate-300">{content.title}</h4><p className="text-sm text-slate-600 py-2 flex-grow">{content.text}</p><div className="flex justify-end gap-2 pt-2 border-t-2 border-dashed border-slate-300"><div className="px-3 py-1 bg-slate-200 rounded text-sm">Close</div><div className="px-3 py-1 bg-slate-800 text-white rounded text-sm">Save</div></div></div> },
        Accordion: { category: 'Feedback', name: "Accordion", icon: ICONS.accordion, default: { size: { width: 400, height: 150 }, content: { item1: "First Item", item2: "Second Item" } }, render: ({ content }) => <div className="h-full w-full border-2 border-dashed border-slate-400 rounded-lg p-2 space-y-2"><div className="bg-slate-100 rounded p-2 text-sm font-semibold">{content.item1}</div><div className="bg-slate-100 rounded p-2 text-sm font-semibold">{content.item2}</div></div> },
        Tabs: { category: 'Feedback', name: "Tabs", icon: ICONS.tabs, default: { size: { width: 400, height: 150 }, content: { tabs: "Tab 1, Tab 2, Tab 3"} }, render: ({content}) => <div className="h-full w-full"><div className="flex border-b-2 border-dashed border-slate-400">{content.tabs.split(',').map((tab, i)=><div key={i} className={`text-sm py-1 px-3 ${i===0 ? 'font-bold border-b-2 border-slate-800' : 'text-slate-600'}`}>{tab.trim()}</div>)}</div><div className="p-4 text-sm text-slate-600">Tab content area.</div></div>},

        // --- Advanced Structures ---
        HeroSection: { category: 'Structures', name: "Hero Section", icon: ICONS.hero, default: { size: { width: 600, height: 250 }, content: { heading: "Welcome to Our Site", subheading: "Your amazing subtitle goes here.", buttonText: "Learn More" } }, render: ({ content }) => ( <div className="flex flex-col items-center justify-center h-full p-6 text-center bg-slate-100 border-2 border-dashed border-slate-400 rounded-lg"> <h3 className="text-2xl font-bold text-slate-800">{content.heading}</h3> <p className="text-md text-slate-600 mt-2">{content.subheading}</p> <div className="mt-4 px-4 py-2 bg-slate-800 text-white rounded-md text-sm font-semibold">{content.buttonText}</div> </div> ) },
        Testimonial: { category: 'Structures', name: "Testimonial", icon: ICONS.avatar, default: { size: { width: 400, height: 150 }, content: { quote: "This is the best product I have ever used!", author: "Jane Doe, CEO" } }, render: ({ content }) => <div className="h-full w-full flex items-center gap-4 p-4 bg-slate-100 rounded-lg border-2 border-dashed border-slate-400"><div className="w-16 h-16 bg-slate-300 rounded-full flex-shrink-0"></div><div><p className="text-sm italic text-slate-700">"{content.quote}"</p><p className="text-sm font-semibold text-slate-800 mt-2">- {content.author}</p></div></div> },
    };

    function getInitialState() {
        try {
            const savedState = localStorage.getItem('wireframeState');
            if (savedState) {
                const parsed = JSON.parse(savedState);
                if (parsed && Array.isArray(parsed.components) && parsed.canvasSize) {
                    // Ensure selectedIds is an array for older states
                    return { ...parsed, selectedIds: Array.isArray(parsed.selectedIds) ? parsed.selectedIds : [] };
                }
            }
        } catch (e) { console.error("Failed to load state from localStorage", e); }
        // Default state with multi-select support
        return {
            components: [],
            selectedIds: [],
            canvasSize: { width: 1280, height: 720 }
        };
    }

    // --- STATE MANAGEMENT (with Undo/Redo) ---
    const stateReducer = (state, action) => {
        switch (action.type) {
            case 'SET_STATE': {
                const { newStateFn, isTransient } = action.payload;
                const currentState = state.history[state.historyIndex];
                const newState = newStateFn(currentState);

                if (isTransient) {
                    const newHistory = [...state.history];
                    newHistory[state.historyIndex] = newState;
                    return { ...state, history: newHistory };
                } else {
                    const newHistory = state.history.slice(0, state.historyIndex + 1);
                    newHistory.push(newState);
                    return { history: newHistory, historyIndex: newHistory.length - 1 };
                }
            }
            case 'UNDO':
                return { ...state, historyIndex: Math.max(0, state.historyIndex - 1) };
            case 'REDO':
                return { ...state, historyIndex: Math.min(state.history.length - 1, state.historyIndex + 1) };
            default:
                return state;
        }
    };

    function useWireframeState() {
        const [state, dispatch] = useReducer(stateReducer, {
            history: [getInitialState()],
            historyIndex: 0
        });

        const currentFrame = state.history[state.historyIndex];
        const canUndo = state.historyIndex > 0;
        const canRedo = state.historyIndex < state.history.length - 1;

        const setState = useCallback((newStateFn, isTransient = false) => {
            dispatch({ type: 'SET_STATE', payload: { newStateFn, isTransient } });
        }, []);
        const undo = useCallback(() => { if(canUndo) dispatch({ type: 'UNDO' }) }, [canUndo]);
        const redo = useCallback(() => { if(canRedo) dispatch({ type: 'REDO' }) }, [canRedo]);

        useEffect(() => {
            if (currentFrame) {
                localStorage.setItem('wireframeState', JSON.stringify(currentFrame));
            }
        }, [currentFrame]);

        return { state: currentFrame, setState, undo, redo, canUndo, canRedo };
    }

    // --- UI COMPONENTS ---
    const ComponentPalette = ({ onAddComponent }) => {
        const categorizedComponents = useMemo(() => {
            return Object.entries(COMPONENT_DEFS).reduce((acc, [type, def]) => {
                const category = def.category || 'Misc';
                if (!acc[category]) { acc[category] = []; }
                acc[category].push({ type, ...def });
                return acc;
            }, {});
        }, []);
        return (
            <div className="p-4 space-y-4">
                {Object.entries(categorizedComponents).map(([category, components]) => (
                    <div key={category}>
                        <h3 className="text-sm font-semibold text-slate-500 mb-2 px-2">{category}</h3>
                        <div className="grid grid-cols-2 gap-2">
                            {components.map(({ type, name, icon }) => (
                                <button key={type} onClick={() => onAddComponent(type)} className="flex flex-col items-center justify-center p-2 rounded-lg text-slate-600 hover:bg-slate-200 hover:text-slate-800 transition-colors duration-150 text-center" title={`Add ${name}`}>
                                    <div className="w-8 h-8 flex items-center justify-center">{icon}</div>
                                    <span className="text-xs mt-1">{name}</span>
                                </button>
                            ))}
                        </div>
                    </div>
                ))}
            </div>
        );
    };

    const PropertiesPanel = ({ components, selectedIds, onUpdate, onUpdateCanvas }) => {
        const selectedComponents = components.filter(c => selectedIds.includes(c.id));

        if (selectedIds.length === 0) {
            return ( <div className="p-4"> <h3 className="text-sm font-semibold text-slate-500 mb-3 px-2">Canvas</h3> <div className="space-y-3"> <PropertyInput label="Width" value={onUpdateCanvas.size.width} onChange={v => onUpdateCanvas.setSize({ ...onUpdateCanvas.size, width: v })} /> <PropertyInput label="Height" value={onUpdateCanvas.size.height} onChange={v => onUpdateCanvas.setSize({ ...onUpdateCanvas.size, height: v })} /> </div> </div> );
        }
        if (selectedIds.length > 1) {
            return <div className="p-4 text-center text-sm text-slate-500"> <h3 className="font-semibold mb-2">{selectedIds.length} items selected</h3> <p>Edit common properties here, or select a single item to see all properties.</p> </div>;
        }

        const component = selectedComponents[0];
        const componentDef = COMPONENT_DEFS[component.type];
        if (!componentDef) return null;

        const handleContentChange = (key, value) => { onUpdate(component.id, { content: { ...component.content, [key]: value } }); };
        const handleSizeChange = (key, value) => { onUpdate(component.id, { size: { ...component.size, [key]: value } }); }

        return ( <div className="p-4"> <h3 className="text-sm font-semibold text-slate-500 mb-3 px-2">Properties: {componentDef.name}</h3> <div className="space-y-4"> <div> <h4 className="text-xs font-bold uppercase text-slate-400 mb-2">Content</h4> <div className="space-y-3"> {Object.entries(component.content).map(([key, value]) => ( <PropertyInput key={key} label={key} value={value} onChange={v => handleContentChange(key, v)} /> ))} </div> </div> <div> <h4 className="text-xs font-bold uppercase text-slate-400 mb-2">Layout</h4> <div className="grid grid-cols-2 gap-3"> <PropertyInput label="Width" value={component.size.width} onChange={v => handleSizeChange('width', v)} /> <PropertyInput label="Height" value={component.size.height} onChange={v => handleSizeChange('height', v)} /> <PropertyInput label="X" value={component.position.x} readOnly /> <PropertyInput label="Y" value={component.position.y} readOnly /> </div> </div> </div> </div> );
    };

    const PropertyInput = ({ label, value, onChange, readOnly = false }) => {
        const isNumber = typeof value === 'number' && !readOnly;
        const displayValue = useMemo(() => (value === null || value === undefined) ? '' : String(value), [value]);

        const handleChange = (e) => {
            const stringValue = e.target.value;
            onChange(isNumber ? (parseFloat(stringValue) || 0) : stringValue);
        };
        const commonProps = { value: displayValue, onChange: handleChange, readOnly, className: "w-full px-2 py-1.5 bg-slate-200 border border-transparent rounded-md text-sm text-slate-800 focus:bg-white focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 transition-all font-mono text-xs" };
        return ( <div> <label className="block text-xs font-medium text-slate-500 capitalize mb-1">{label}</label> {displayValue.includes('\n') || displayValue.length > 30 ? ( <textarea {...commonProps} rows={Math.max(2, displayValue.split('\n').length)} className={`${commonProps.className} resize-y leading-relaxed`} /> ) : ( <input {...commonProps} type={isNumber ? "number" : "text"} /> ) } </div> );
    };

    const WireframeComponent = ({ data, isSelected, onMouseDown, onResizeStart }) => {
        const componentDef = COMPONENT_DEFS[data.type];
        if (!componentDef) return null;
        const resizeHandlePositions = { 'top-left': 'cursor-nwse-resize', 'top-right': 'cursor-nesw-resize', 'bottom-left': 'cursor-nesw-resize', 'bottom-right': 'cursor-nwse-resize' };

        return (
            <div
                style={{ transform: `translate(${data.position.x}px, ${data.position.y}px)`, width: data.size.width, height: data.size.height }}
                className="absolute group"
                onMouseDown={e => onMouseDown(e, data.id)}
                data-component-id={data.id}
            >
                <div className={`relative w-full h-full transition-all duration-100 ${isSelected ? 'outline outline-2 outline-blue-500 outline-offset-2' : ''}`}>
                    {componentDef.render(data)}
                </div>
                {isSelected && Object.entries(resizeHandlePositions).map(([dir, cursor]) => (
                    <div
                        key={dir}
                        data-resize-handle="true"
                        className={`absolute w-3 h-3 bg-blue-500 border-2 border-white rounded-full -translate-x-1/2 -translate-y-1/2 ${cursor} ${dir.replace('-',' ')}`}
                        onMouseDown={e => onResizeStart(e, data.id, dir)}
                        style={{ top: dir.includes('top') ? '0%' : '100%', left: dir.includes('left') ? '0%' : '100%' }}
                    />
                ))}
            </div>
        );
    };

    const ContextMenu = ({ menu, onAction }) => { if (!menu.visible) return null; return ( <div style={{ top: menu.y, left: menu.x }} className="absolute z-50 w-36 bg-white rounded-md shadow-lg border border-slate-200 py-1"> <button onClick={() => onAction('duplicate')} className="w-full flex items-center gap-2 px-3 py-1.5 text-sm text-slate-700 hover:bg-slate-100">{ICONS.copy} Duplicate</button> <button onClick={() => onAction('delete')} className="w-full flex items-center gap-2 px-3 py-1.5 text-sm text-red-600 hover:bg-red-50">{ICONS.trash} Delete</button> </div> ); };

    const TopBar = ({ onUndo, onRedo, canUndo, canRedo, onExport, onImport }) => ( <div className="h-14 bg-white border-b border-slate-200 flex items-center justify-between px-4 shadow-sm flex-shrink-0 z-20"> <h1 className="text-lg font-bold text-slate-800">Wireframe Pro</h1> <div className="flex items-center gap-2"> <button disabled={!canUndo} onClick={onUndo} className="px-3 py-1.5 text-sm font-semibold text-slate-700 bg-white border border-slate-300 rounded-md shadow-sm hover:bg-slate-50 disabled:opacity-50">Undo</button> <button disabled={!canRedo} onClick={onRedo} className="px-3 py-1.5 text-sm font-semibold text-slate-700 bg-white border border-slate-300 rounded-md shadow-sm hover:bg-slate-50 disabled:opacity-50">Redo</button> </div> <div className="flex items-center gap-2"> <button onClick={onImport} className="flex items-center gap-2 px-3 py-1.5 text-sm font-semibold text-slate-700 bg-white border border-slate-300 rounded-md shadow-sm hover:bg-slate-50">{ICONS.upload} Import</button> <button onClick={onExport} className="flex items-center gap-2 px-3 py-1.5 text-sm font-semibold text-white bg-slate-800 rounded-md shadow-sm hover:bg-slate-700">{ICONS.download} Export</button> </div> </div> );

    // --- MAIN APP ---
    function App() {
        const { state, setState, undo, redo, canUndo, canRedo } = useWireframeState();
        const [isLeftSidebarCollapsed, setIsLeftSidebarCollapsed] = useState(false);
        const [isRightSidebarCollapsed, setIsRightSidebarCollapsed] = useState(false);
        const [marquee, setMarquee] = useState(null);
        const canvasRef = useRef(null);
        const interactionRef = useRef({});
        const [contextMenu, setContextMenu] = useState({ visible: false, x: 0, y: 0, ids: [] });

        if (!state) return <div>Loading...</div>;
        const { components, selectedIds, canvasSize } = state;
        const GRID_SIZE = 20;

        // Component Actions
        const addComponent = useCallback((type) => { const def = COMPONENT_DEFS[type]; if (!def) return; const newId = crypto.randomUUID(); setState(s => ({ ...s, components: [...s.components, { id: newId, type, position: { x: 100, y: 100 }, ...def.default }], selectedIds: [newId] })); }, [setState]);
        const updateComponent = useCallback((id, updates, isTransient = false) => { setState(s => ({ ...s, components: s.components.map(c => c.id === id ? { ...c, ...updates } : c) }), isTransient); }, [setState]);
        const deleteComponents = useCallback((ids) => { setState(s => ({ ...s, components: s.components.filter(c => !ids.includes(c.id)), selectedIds: [] })); }, [setState]);
        const duplicateComponents = useCallback((ids) => { const sourceComps = components.filter(c => ids.includes(c.id)); if (sourceComps.length === 0) return; const newComps = sourceComps.map(c => ({...c, id: crypto.randomUUID(), position: {x: c.position.x + GRID_SIZE, y: c.position.y + GRID_SIZE }})); const newIds = newComps.map(c => c.id); setState(s => ({...s, components: [...s.components, ...newComps], selectedIds: newIds })); }, [components, setState]);

        const handleMouseDown = useCallback((e) => {
            // *** FIX: If click is on a resize handle, do nothing. Let the handle's own onMouseDown take over. ***
            if (e.target.dataset.resizeHandle === 'true') {
                return;
            }

            e.preventDefault(); e.stopPropagation();
            const canvasRect = canvasRef.current.getBoundingClientRect();
            const startPos = { x: e.clientX, y: e.clientY };
            const startPosCanvas = { x: e.clientX - canvasRect.left, y: e.clientY - canvasRect.top };
            interactionRef.current = { startPos };

            const targetId = e.target.closest('[data-component-id]')?.dataset.componentId;

            if (e.button === 2) { // Right click
                const ids = selectedIds.includes(targetId) ? selectedIds : (targetId ? [targetId] : []);
                if (targetId && !selectedIds.includes(targetId)) {
                    setState(s => ({...s, selectedIds: [targetId]}));
                }
                setContextMenu({ visible: true, x: e.clientX, y: e.clientY, ids });
                return;
            } else {
                setContextMenu(m => m.visible ? { visible: false } : m);
            }

            // Component Drag
            if (targetId) {
                interactionRef.current.type = 'drag';
                const newSelectedIds = e.shiftKey ? (selectedIds.includes(targetId) ? selectedIds.filter(id => id !== targetId) : [...selectedIds, targetId]) : (selectedIds.includes(targetId) ? selectedIds : [targetId]);
                setState(s => ({ ...s, selectedIds: newSelectedIds }), true);

                interactionRef.current.offsets = components.filter(c => newSelectedIds.includes(c.id)).map(c => ({ id: c.id, dx: startPosCanvas.x - c.position.x, dy: startPosCanvas.y - c.position.y }));
            }
            // Marquee Selection
            else {
                interactionRef.current.type = 'marquee';
                setMarquee({ x: startPos.x, y: startPos.y, width: 0, height: 0 });
                if (!e.shiftKey) setState(s => ({ ...s, selectedIds: [] }), true);
            }

            const handleMouseMove = (me) => {
                const { type, startPos, offsets } = interactionRef.current;

                if (type === 'drag') {
                    const currentPosCanvas = { x: me.clientX - canvasRect.left, y: me.clientY - canvasRect.top };
                    setState(s => ({ ...s, components: s.components.map(c => { const offset = offsets.find(o => o.id === c.id); if (!offset) return c; return { ...c, position: { x: Math.round((currentPosCanvas.x - offset.dx)/GRID_SIZE)*GRID_SIZE, y: Math.round((currentPosCanvas.y - offset.dy)/GRID_SIZE)*GRID_SIZE } }; }) }), true);
                } else if (type === 'marquee') {
                    const x = Math.min(startPos.x, me.clientX);
                    const y = Math.min(startPos.y, me.clientY);
                    const width = Math.abs(startPos.x - me.clientX);
                    const height = Math.abs(startPos.y - me.clientY);
                    setMarquee({ x, y, width, height });
                }
            };

            const handleMouseUp = (ue) => {
                const { type, startPos } = interactionRef.current;
                if (type === 'marquee') {
                    const marqueeRect = {
                        minX: Math.min(startPos.x, ue.clientX) - canvasRect.left,
                        maxX: Math.max(startPos.x, ue.clientX) - canvasRect.left,
                        minY: Math.min(startPos.y, ue.clientY) - canvasRect.top,
                        maxY: Math.max(startPos.y, ue.clientY) - canvasRect.top,
                    };

                    const hits = components.filter(c => {
                        const compRect = { x1: c.position.x, y1: c.position.y, x2: c.position.x + c.size.width, y2: c.position.y + c.size.height };
                        return !(compRect.x2 < marqueeRect.minX || compRect.x1 > marqueeRect.maxX || compRect.y2 < marqueeRect.minY || compRect.y1 > marqueeRect.maxY);
                    }).map(c => c.id);

                    setState(s => ({ ...s, selectedIds: [...new Set([...s.selectedIds, ...hits])] }));
                    setMarquee(null);
                }

                if(type) setState(s => ({...s}), false); // Finalize transient state
                interactionRef.current = {};
                window.removeEventListener('mousemove', handleMouseMove);
                window.removeEventListener('mouseup', handleMouseUp);
            };

            window.addEventListener('mousemove', handleMouseMove);
            window.addEventListener('mouseup', handleMouseUp);

        }, [setState, components, selectedIds]);

        const handleResizeStart = useCallback((e, id, direction) => {
            e.stopPropagation(); // Stop event from bubbling up to the component or canvas handlers
            const component = components.find(c => c.id === id);
            if (!component) return;

            interactionRef.current = {
                type: 'resize',
                id,
                direction,
                startPos: { x: e.clientX, y: e.clientY },
                initialRect: { ...component.position, ...component.size }
            };

            const handleMouseMove = (me) => {
                const { id, direction, startPos, initialRect } = interactionRef.current;
                if (!id) return;
                const dx = me.clientX - startPos.x; const dy = me.clientY - startPos.y;
                let { x, y, width, height } = initialRect;

                if (direction.includes('right')) width = initialRect.width + dx;
                if (direction.includes('left')) { width = initialRect.width - dx; x = initialRect.x + dx; }
                if (direction.includes('bottom')) height = initialRect.height + dy;
                if (direction.includes('top')) { height = initialRect.height - dy; y = initialRect.y + dy; }

                width = Math.max(GRID_SIZE * 2, Math.round(width / GRID_SIZE) * GRID_SIZE);
                height = Math.max(GRID_SIZE * 2, Math.round(height / GRID_SIZE) * GRID_SIZE);
                x = Math.round(x / GRID_SIZE) * GRID_SIZE;
                y = Math.round(y / GRID_SIZE) * GRID_SIZE;

                setState(s => ({...s, components: s.components.map(c => c.id === id ? {...c, position: {x, y}, size: {width, height}} : c) }), true);
            }

            const handleMouseUp = () => {
                if (interactionRef.current.type === 'resize') {
                    setState(s => ({...s}), false); // Finalize transient state
                }
                interactionRef.current = {};
                window.removeEventListener('mousemove', handleMouseMove);
                window.removeEventListener('mouseup', handleMouseUp);
            }
            window.addEventListener('mousemove', handleMouseMove);
            window.addEventListener('mouseup', handleMouseUp);
        }, [components, setState]);

        const handleContextAction = useCallback((action) => { const { ids } = contextMenu; if (ids.length === 0) return; if (action === 'delete') deleteComponents(ids); if (action === 'duplicate') duplicateComponents(ids); setContextMenu({ visible: false }); }, [contextMenu, deleteComponents, duplicateComponents]);

        const handleKeyDown = useCallback((e) => { if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') return; if (selectedIds.length > 0 && (e.key === 'Delete' || e.key === 'Backspace')) { e.preventDefault(); deleteComponents(selectedIds); } if ((e.metaKey || e.ctrlKey) && e.key === 'z') { e.preventDefault(); undo(); } if ((e.metaKey || e.ctrlKey) && (e.key === 'y' || (e.key === 'Z' && e.shiftKey))) { e.preventDefault(); redo(); } if ((e.metaKey || e.ctrlKey) && e.key === 'd') { e.preventDefault(); if(selectedIds.length > 0) duplicateComponents(selectedIds); } }, [selectedIds, deleteComponents, duplicateComponents, undo, redo]);
        const handleExport = useCallback(() => { const jsonString = JSON.stringify(state, null, 2); const blob = new Blob([jsonString], { type: 'application/json' }); const a = document.createElement('a'); a.href = URL.createObjectURL(blob); a.download = `wireframe-export.json`; a.click(); URL.revokeObjectURL(a.href); }, [state]);
        const handleImport = useCallback(() => { const input = document.createElement('input'); input.type = 'file'; input.accept = 'application/json'; input.onchange = e => { const file = e.target.files[0]; if (!file) return; const reader = new FileReader(); reader.onload = (event) => { try { const importedState = JSON.parse(event.target.result); if (importedState.components && importedState.canvasSize) { setState(() => ({...importedState, selectedIds:[]})); } else { alert('Invalid wireframe file.'); } } catch (err) { alert('Error reading file.'); } }; reader.readAsText(file); }; input.click(); }, [setState]);

        useEffect(() => { window.addEventListener('keydown', handleKeyDown); return () => window.removeEventListener('keydown', handleKeyDown); }, [handleKeyDown]);
        useEffect(() => { const canvasEl = canvasRef.current; if(canvasEl) { canvasEl.addEventListener('mousedown', handleMouseDown); return () => canvasEl.removeEventListener('mousedown', handleMouseDown); } }, [handleMouseDown]);

        return (
            <div className="h-screen w-screen flex flex-col bg-slate-50 overflow-hidden">
                <TopBar onUndo={undo} onRedo={redo} canUndo={canUndo} canRedo={canRedo} onExport={handleExport} onImport={handleImport} />
                <div className="flex flex-grow min-h-0">
                    {/* Left Sidebar */}
                    <aside className={`relative bg-white border-r border-slate-200 flex-shrink-0 transition-all duration-300 ease-in-out z-10 ${isLeftSidebarCollapsed ? 'w-0' : 'w-60'}`}>
                        <button onClick={() => setIsLeftSidebarCollapsed(!isLeftSidebarCollapsed)} className="absolute top-1/2 -right-4 z-10 w-8 h-8 flex items-center justify-center bg-white border border-slate-300 rounded-full shadow-md hover:bg-slate-100 transition-colors -translate-y-1/2"> {isLeftSidebarCollapsed ? ICONS.chevronRight : ICONS.chevronLeft} </button>
                        <div className={`transition-opacity duration-200 overflow-y-auto h-full ${isLeftSidebarCollapsed ? 'opacity-0' : 'opacity-100'}`}> {!isLeftSidebarCollapsed && <ComponentPalette onAddComponent={addComponent} />} </div>
                    </aside>

                    {/* Main Canvas Area */}
                    <main className="flex-grow bg-slate-200 overflow-auto" onContextMenu={e => e.preventDefault()}>
                        <div ref={canvasRef} className="relative m-8 shadow-lg bg-white canvas-container" style={{ width: canvasSize.width, height: canvasSize.height }}>
                            <div className="absolute inset-0 grid-background"></div>
                            {components.map(component => ( <WireframeComponent key={component.id} data={component} isSelected={selectedIds.includes(component.id)} onMouseDown={()=>{}} onResizeStart={handleResizeStart} /> ))}
                        </div>
                        {marquee && <div className="absolute border border-blue-500 bg-blue-500 bg-opacity-20 pointer-events-none" style={{ left: marquee.x, top: marquee.y, width: marquee.width, height: marquee.height, zIndex: 99 }}></div>}
                        <ContextMenu menu={contextMenu} onAction={handleContextAction} />
                    </main>

                    {/* Right Sidebar */}
                    <aside className={`relative bg-white border-l border-slate-200 flex-shrink-0 transition-all duration-300 ease-in-out z-10 ${isRightSidebarCollapsed ? 'w-0' : 'w-72'}`}>
                        <button onClick={() => setIsRightSidebarCollapsed(!isRightSidebarCollapsed)} className="absolute top-1/2 -left-4 z-10 w-8 h-8 flex items-center justify-center bg-white border border-slate-300 rounded-full shadow-md hover:bg-slate-100 transition-colors -translate-y-1/2"> {isRightSidebarCollapsed ? ICONS.chevronLeft : ICONS.chevronRight} </button>
                        <div className={`transition-opacity duration-200 overflow-y-auto h-full ${isRightSidebarCollapsed ? 'opacity-0' : 'opacity-100'}`}> {!isRightSidebarCollapsed && <PropertiesPanel components={components} selectedIds={selectedIds} onUpdate={updateComponent} onUpdateCanvas={{ size: canvasSize, setSize: (newSize) => setState(s => ({...s, canvasSize: newSize })) }} />} </div>
                    </aside>
                </div>
            </div>
        );
    }

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);

</script>
</body>
</html>
