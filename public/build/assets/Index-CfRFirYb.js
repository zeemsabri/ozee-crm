import{r,f as L,e as V,c as U,g as O,o,w as D,b as e,a as l,i as c,j as A,v as M,x as E,F as g,l as v,z as I,t as i,m as z,s as q,G,J as $,N as J}from"./app-CAFAb1eF.js";import{_ as K}from"./AuthenticatedLayout-BkgTs1s1.js";import"./PrimaryButton-B0IQlqda.js";import"./Modal-CDN04Q2S.js";import"./InputLabel-7v3_eWB1.js";import"./InputError-I39UKt8R.js";import"./SecondaryButton-B0qjAY1S.js";import"./index-D_i0B-3M.js";import"./BaseFormModal-dq60iOty.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./TextInput-LBlrGUfM.js";import"./SelectDropdown-VugtsDkb.js";/* empty css                                                                       */import"./debounce-C-hnF4Z3.js";import"./ApplicationLogo-BVOiNkKZ.js";import"./createLucideIcon-Bh9soDj0.js";import"./plus-zE9ixXKo.js";import"./DangerButton-enh6BrPK.js";import"./moment-BLMuvzoS.js";import"./NoticeboardModal-BQYDwu5O.js";const Q={class:"p-4 sm:p-6 lg:p-8"},W={class:"flex flex-col sm:flex-row items-start sm:items-center sm:justify-between mb-8"},X={class:"mt-4 sm:mt-0 flex items-center space-x-2"},Y={class:"inline-flex rounded-md shadow-sm"},Z={class:"flex gap-8"},ee={class:"w-64 hidden lg:block"},te={class:"space-y-6"},se={class:"mt-1 relative"},oe={class:"mt-2 space-y-2"},le=["id","value"],ae=["for"],re={key:0},ie={class:"flex-1"},de={key:0},ne={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6"},ue={key:1,class:"text-center py-12"},ce={class:"text-red-600 font-semibold"},pe={key:2,class:"text-center py-20 border-2 border-dashed rounded-lg"},ge={key:3},ve={key:0,class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6"},me={class:"p-5 flex-grow"},xe={class:"font-bold text-lg text-gray-800 truncate"},ye=["href"],fe={class:"text-xs text-gray-500 uppercase mt-3 mb-2 font-semibold"},he={class:"flex flex-wrap gap-1.5"},be={key:0,class:"text-gray-400 text-sm italic"},we={class:"border-t p-3 bg-gray-50 flex justify-end"},_e=["onClick"],ke={key:1,class:"overflow-x-auto rounded-lg border"},Ce={class:"min-w-full divide-y divide-gray-200"},je={class:"bg-white divide-y divide-gray-200"},Me={class:"px-6 py-4 font-medium text-gray-900"},ze={class:"px-6 py-4 text-gray-500"},$e={class:"px-6 py-4 text-indigo-600"},Pe=["href"],Fe={class:"px-6 py-4"},Te={class:"flex flex-wrap gap-1"},Ve={key:0,class:"text-gray-400 text-sm italic"},Ae={class:"px-6 py-4 text-right"},Be=["onClick"],Ne={class:"flex items-center justify-between mt-6"},Re={class:"text-sm text-gray-600"},Se={class:"font-medium"},He={class:"font-medium"},Le={class:"space-x-2"},Ue=["disabled"],Oe=["disabled"],De={class:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md"},Ee={class:"text-sm text-gray-500 mb-4"},Ie=["value"],qe={class:"flex justify-end gap-3 mt-6"},Ge=["disabled"],vt={__name:"Index",setup(Je){const m=r([]),_=r(!0),f=r(null),x=r("grid"),d=r({search:"",types:[]}),p=r(1),k=r(12),P=r(0),w=r([]),C=r([]),h=r(null),b=r(!1),y=r(null);async function j(){_.value=!0,f.value=null;try{const a={visible_to_team:!0,q:d.value.search||void 0,types:d.value.types.length?d.value.types:void 0,per_page:k.value,page:p.value},{data:t}=await window.axios.get("/api/shareable-resources",{params:a});m.value=t.data||[],P.value=t.total||0}catch(a){console.error("Failed to load team resources",a),f.value="Failed to load team resources",$(f.value)}finally{_.value=!1}}async function B(){try{const{data:a}=await window.axios.get("/api/options/shareable_resource_types");w.value=Array.isArray(a)?a:[]}catch{w.value=[]}}async function N(){try{const{data:a}=await window.axios.get("/api/projects-simplified");C.value=Array.isArray(a)?a:[]}catch{C.value=[]}}L(()=>{B(),N(),j()}),V(d,j,{deep:!0}),V([p,k],j);function F(a,t){var s;const n=w.value.find(u=>u.value===a);return((s=n==null?void 0:n.allow)==null?void 0:s.includes(t))??!1}function T(a){h.value=a,y.value=null,b.value=!0}async function R(){var a,t;if(!h.value||!y.value)return $("Please select a project");try{await window.axios.post(`/api/shareable-resources/${h.value.id}/copy-to-project`,{project_id:y.value}),J("Resource copied to project successfully."),b.value=!1,h.value=null}catch(n){console.error(n),$(((t=(a=n==null?void 0:n.response)==null?void 0:a.data)==null?void 0:t.message)||"Failed to copy resource.")}}function S(){d.value.search="",d.value.types=[]}const H=U(()=>d.value.search!==""||d.value.types.length>0);return(a,t)=>(o(),O(K,null,{default:D(()=>{var n;return[e("div",Q,[e("header",W,[t[12]||(t[12]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900"},"Team Resources"),e("p",{class:"mt-1 text-sm text-gray-500"},"Browse, search, and manage shared resources for your team.")],-1)),e("div",X,[e("div",Y,[e("button",{onClick:t[0]||(t[0]=s=>x.value="grid"),class:A(["px-3 py-2 rounded-l-md border border-gray-300",x.value==="grid"?"bg-indigo-600 text-white":"bg-white text-gray-500 hover:bg-gray-50"])},t[9]||(t[9]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM13 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2h-2z"})],-1)]),2),e("button",{onClick:t[1]||(t[1]=s=>x.value="list"),class:A(["px-3 py-2 -ml-px rounded-r-md border border-gray-300",x.value==="list"?"bg-indigo-600 text-white":"bg-white text-gray-500 hover:bg-gray-50"])},t[10]||(t[10]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"})],-1)]),2)]),t[11]||(t[11]=e("button",{class:"px-4 py-2 bg-indigo-600 text-white font-semibold rounded-md shadow-sm hover:bg-indigo-700"}," Add Resource ",-1))])]),e("div",Z,[e("aside",ee,[t[16]||(t[16]=e("h2",{class:"text-lg font-semibold text-gray-800 mb-4"},"Filter Options",-1)),e("div",te,[e("div",null,[t[14]||(t[14]=e("label",{for:"search",class:"block text-sm font-medium text-gray-700"},"Search",-1)),e("div",se,[M(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>d.value.search=s),id:"search",type:"text",placeholder:"Search by title, url...",class:"w-full border-gray-300 rounded-md shadow-sm pl-10"},null,512),[[E,d.value.search]]),t[13]||(t[13]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})])],-1))])]),e("div",null,[t[15]||(t[15]=e("h3",{class:"text-sm font-medium text-gray-700"},"Type",-1)),e("div",oe,[(o(!0),l(g,null,v(w.value,s=>(o(),l("div",{key:s.value,class:"flex items-center"},[M(e("input",{id:`type-${s.value}`,value:s.value,"onUpdate:modelValue":t[3]||(t[3]=u=>d.value.types=u),type:"checkbox",class:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"},null,8,le),[[I,d.value.types]]),e("label",{for:`type-${s.value}`,class:"ml-3 text-sm text-gray-600"},i(s.label),9,ae)]))),128))])]),H.value?(o(),l("div",re,[e("button",{onClick:S,class:"w-full text-sm text-indigo-600 hover:text-indigo-800"},"Clear all filters")])):c("",!0)])]),e("main",ie,[_.value?(o(),l("div",de,[e("div",ne,[(o(),l(g,null,v(6,s=>e("div",{key:s,class:"bg-white p-4 rounded-lg shadow animate-pulse"},t[17]||(t[17]=[e("div",{class:"h-6 bg-gray-200 rounded w-3/4 mb-4"},null,-1),e("div",{class:"h-4 bg-gray-200 rounded w-1/2 mb-4"},null,-1),e("div",{class:"flex flex-wrap gap-2"},[e("div",{class:"h-5 bg-gray-200 rounded-full w-16"}),e("div",{class:"h-5 bg-gray-200 rounded-full w-20"})],-1)]))),64))])])):f.value?(o(),l("div",ue,[e("p",ce,i(f.value),1),t[18]||(t[18]=e("p",{class:"text-gray-500 mt-2"},"Please try refreshing the page.",-1))])):m.value.length?(o(),l("div",ge,[x.value==="grid"?(o(),l("div",ve,[(o(!0),l(g,null,v(m.value,s=>(o(),l("div",{key:s.id,class:"bg-white rounded-lg shadow border border-gray-200 hover:shadow-lg transition-shadow duration-300 flex flex-col"},[e("div",me,[e("h4",xe,i(s.title),1),e("a",{href:s.url,target:"_blank",rel:"noopener",class:"text-sm text-indigo-600 hover:underline truncate block mt-1"},i(s.url),9,ye),e("p",fe,i(s.type),1),e("div",he,[(o(!0),l(g,null,v(s.tags||[],u=>(o(),l("span",{key:u.id,class:"px-2 py-0.5 text-xs rounded-full bg-indigo-100 text-indigo-800"},i(u.name),1))),128)),!s.tags||!s.tags.length?(o(),l("span",be,"No tags")):c("",!0)])]),e("div",we,[F(s.type,"copy")?(o(),l("button",{key:0,onClick:u=>T(s),class:"px-3 py-1.5 text-sm bg-emerald-600 hover:bg-emerald-700 text-white rounded-md font-semibold"}," Copy to Project ",8,_e)):c("",!0)])]))),128))])):c("",!0),x.value==="list"?(o(),l("div",ke,[e("table",Ce,[t[20]||(t[20]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Title"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Type"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"URL"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Tags"),e("th",{class:"px-6 py-3"})])],-1)),e("tbody",je,[(o(!0),l(g,null,v(m.value,s=>(o(),l("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",Me,i(s.title),1),e("td",ze,i(s.type),1),e("td",$e,[e("a",{href:s.url,target:"_blank",rel:"noopener",class:"hover:underline"},"Visit Link â†’",8,Pe)]),e("td",Fe,[e("div",Te,[(o(!0),l(g,null,v(s.tags||[],u=>(o(),l("span",{key:u.id,class:"px-2 py-0.5 text-xs rounded-full bg-indigo-100 text-indigo-800"},i(u.name),1))),128)),!s.tags||!s.tags.length?(o(),l("span",Ve,"No tags")):c("",!0)])]),e("td",Ae,[F(s.type,"copy")?(o(),l("button",{key:0,onClick:u=>T(s),class:"px-3 py-1.5 text-sm bg-emerald-600 hover:bg-emerald-700 text-white rounded-md font-semibold"},"Copy",8,Be)):c("",!0)])]))),128))])])])):c("",!0),e("div",Ne,[e("div",Re,[t[21]||(t[21]=z(" Showing ",-1)),e("span",Se,i(m.value.length),1),t[22]||(t[22]=z(" of ",-1)),e("span",He,i(P.value),1),t[23]||(t[23]=z(" results ",-1))]),e("div",Le,[e("button",{class:"px-3 py-1.5 border rounded-md text-sm font-medium bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",disabled:p.value<=1,onClick:t[4]||(t[4]=s=>p.value=Math.max(1,p.value-1))},"Previous",8,Ue),e("button",{class:"px-3 py-1.5 border rounded-md text-sm font-medium bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",disabled:m.value.length<k.value,onClick:t[5]||(t[5]=s=>p.value=p.value+1)},"Next",8,Oe)])])])):(o(),l("div",pe,t[19]||(t[19]=[e("h3",{class:"text-xl font-semibold text-gray-800"},"No Resources Found",-1),e("p",{class:"mt-2 text-gray-500"},"Try adjusting your filters or add a new resource.",-1)])))])])]),b.value?(o(),l("div",{key:0,class:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4",onClick:t[8]||(t[8]=q(s=>b.value=!1,["self"]))},[e("div",De,[t[26]||(t[26]=e("h3",{class:"text-xl font-semibold text-gray-900 mb-2"},"Copy to Project",-1)),e("p",Ee,'Select a project to copy "'+i((n=h.value)==null?void 0:n.title)+'" to.',1),e("div",null,[t[25]||(t[25]=e("label",{for:"project-select",class:"block text-sm font-medium text-gray-700 mb-1"},"Project",-1)),M(e("select",{"onUpdate:modelValue":t[6]||(t[6]=s=>y.value=s),id:"project-select",class:"border-gray-300 rounded-md w-full p-2 focus:ring-indigo-500 focus:border-indigo-500"},[t[24]||(t[24]=e("option",{value:null,disabled:""},"-- Please select a project --",-1)),(o(!0),l(g,null,v(C.value,s=>(o(),l("option",{key:s.id,value:s.id},i(s.name),9,Ie))),128))],512),[[G,y.value]])]),e("div",qe,[e("button",{class:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium hover:bg-gray-50",onClick:t[7]||(t[7]=s=>b.value=!1)},"Cancel"),e("button",{class:"px-4 py-2 bg-emerald-600 text-white rounded-md text-sm font-medium hover:bg-emerald-700 disabled:opacity-50",onClick:R,disabled:!y.value},"Confirm Copy",8,Ge)])])])):c("",!0)]}),_:1}))}};export{vt as default};
