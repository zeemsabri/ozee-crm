import{r as T,c as F,P as Oe,f as we,Q as Xe,a as i,i as A,o as l,F as Z,l as ie,b as e,t as P,u as U,R as yt,S as Kt,T as ht,U as kt,j as J,p as se,e as re,g as V,w as k,m as _,d as c,v as L,x as ce,E as We,V as qt,n as Ee,y as Je,s as wt,C as Ie,z as xt,G as Ye,N as be,J as ue,W as Re,k as Jt,O as $e,X as _t,Y as Yt,Z as ct,K as Ge,A as Te,_ as At,$ as ot,D as et,a0 as ke,a1 as Ce,a2 as Qt,a3 as Zt,M as Xt,a4 as Se,a5 as at,H as Tt,a6 as ea,a7 as ta,a8 as mt,a9 as vt,I as aa}from"./app-D4PaCJao.js";import{_ as pe}from"./PrimaryButton-BXBTUumq.js";import{_ as He}from"./Modal-Bfcjqfdr.js";import{_ as q}from"./InputLabel--Hui31E-.js";import{_ as le}from"./InputError-BXzKlNcd.js";import{_ as Ze}from"./SecondaryButton-iTebmO9C.js";import{r as la}from"./index-B1ydOi_A.js";import{B as De}from"./BaseFormModal-6FR53dOL.js";import{_ as ye}from"./TextInput-IgJU_zNZ.js";import{S as ge}from"./SelectDropdown-Clmz9wjU.js";import{d as sa}from"./debounce-C-hnF4Z3.js";import{_ as Ke}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{A as oa}from"./ApplicationLogo-Cfy0ID6n.js";import{_ as pt}from"./MultiSelectDropdown-BnGkK7C9.js";import{c as it}from"./createLucideIcon-DWtWSR2o.js";import{P as ft}from"./plus-54yoQNz9.js";import{D as rt}from"./DangerButton-BLb5Fjct.js";import{h as ia}from"./moment-BLMuvzoS.js";import{_ as ra,a as na}from"./NoticeboardModal-CcGUJjGg.js";const ua={key:0,class:"fixed bottom-4 right-4 z-50 flex flex-col items-end space-y-2"},da={key:0,class:"notification-list w-full max-w-xs space-y-2"},ca={class:"flex-1 min-w-0"},ma={class:"flex items-start justify-between gap-2 mb-1"},va={class:"flex-1 min-w-0"},pa={key:0,class:"text-base font-semibold text-gray-800 truncate"},fa={key:1,class:"text-xs text-gray-500"},ga={key:0,class:"text-xs text-gray-600 mb-2"},ba={class:"flex items-center justify-between mt-2"},ya={key:0,class:"text-xs text-gray-500 font-medium"},ha=["onClick"],ka={key:1,class:"flex justify-end w-full max-w-xs"},wa={key:0},xa={key:1},je="notification_minimized_state",_a=3,Aa={__name:"PushNotificationContainer",props:{sidebarIsOpen:{type:Boolean,default:!1}},setup(u){const p=T(!1),d=T(null),s=T(0),t=T(null),f=F(()=>Oe.value.notifications.filter(a=>a.isNewPush).slice(0,_a)),m=F(()=>{const a=Math.floor(s.value/60),n=s.value%60;return`${String(a).padStart(2,"0")}:${String(n).padStart(2,"0")}`}),g=a=>{if(!a)return null;const n=a.match(/\/task\/(\d+)/);return n?parseInt(n[1]):null},b=a=>{if(!a)return null;const n=a.match(/\/project\/(\d+)\//);return n?parseInt(n[1]):null},r=()=>{if(p.value=!p.value,clearTimeout(d.value),clearInterval(t.value),p.value){const a=Date.now()+3e5;localStorage.setItem(je,JSON.stringify({isMinimized:!0,expiryTime:a})),d.value=setTimeout(()=>{p.value=!1,clearInterval(t.value),localStorage.removeItem(je)},3e5),s.value=300,t.value=setInterval(()=>{s.value>0?s.value--:clearInterval(t.value)},1e3)}else localStorage.removeItem(je)},o=async a=>{Kt(a.id),await ht(a.view_id);const n=a.task_id||g(a.url),v=a.project_id||b(a.url);n&&v?kt(n,v):(console.warn("Could not open task sidebar. Falling back to redirecting."),a.url&&(window.location.href=a.url))};return we(()=>{const a=localStorage.getItem(je);if(a)try{const{isMinimized:n,expiryTime:v}=JSON.parse(a),M=Date.now(),y=v-M;y>0?(p.value=n,s.value=Math.floor(y/1e3),d.value=setTimeout(()=>{p.value=!1,clearInterval(t.value),localStorage.removeItem(je)},y),t.value=setInterval(()=>{s.value>0?s.value--:clearInterval(t.value)},1e3)):localStorage.removeItem(je)}catch(n){console.error("Error restoring notification minimized state:",n),localStorage.removeItem(je)}}),Xe(()=>{clearTimeout(d.value),clearInterval(t.value)}),(a,n)=>u.sidebarIsOpen?A("",!0):(l(),i("div",ua,[!p.value&&f.value.length>0?(l(),i("div",da,[(l(!0),i(Z,null,ie(f.value,v=>(l(),i("div",{key:v.id,class:"bg-white rounded-lg shadow-lg p-3 flex items-start space-x-3 border border-gray-200 transition-opacity duration-300 opacity-60 hover:opacity-100"},[e("div",ca,[e("div",ma,[e("div",va,[v.title?(l(),i("h3",pa,P(v.title),1)):A("",!0),v.project_name?(l(),i("p",fa,P(v.project_name),1)):A("",!0)])]),v.message?(l(),i("p",ga,P(v.message),1)):A("",!0),e("div",ba,[v.due_date?(l(),i("div",ya," Due: "+P(U(yt)(v.due_date)),1)):A("",!0),e("button",{onClick:M=>o(v),class:"px-2.5 py-1 bg-blue-600 text-white text-xs font-medium rounded-md hover:bg-blue-700 transition-colors duration-200 shadow"},P(v.button_label||"View"),9,ha)])])]))),128))])):A("",!0),f.value.length>0?(l(),i("div",ka,[e("button",{onClick:r,class:"bg-white/80 backdrop-blur-sm text-gray-600 hover:text-gray-900 text-xs font-bold py-1 px-3 rounded-full shadow-md transition-all duration-300"},[p.value?(l(),i("span",wa,"Show ("+P(m.value)+")",1)):(l(),i("span",xa,"Minimize"))])])):A("",!0)]))}},Ta={class:"fixed top-4 right-4 z-[9999] flex flex-col items-end space-y-3"},Ma={class:"p-4"},$a={class:"text-sm font-medium text-white"},Ca={key:0,class:"mt-3 flex gap-2"},Sa=["onClick"],Ga=["onClick"],Pa={__name:"StandardNotificationContainer",setup(u,{expose:p}){const d=T([]),s=(b,r="info",o=5e3)=>{let a;typeof b=="object"&&b!==null?a={...b}:a={message:b,type:r,duration:o};const n=a.id||crypto.randomUUID(),v={id:n,message:a.message||"",type:a.type||"info",duration:typeof a.duration=="number"?a.duration:5e3,sticky:!!a.sticky,confirm:a.confirm||null};return d.value.unshift(v),!v.sticky&&!v.confirm&&setTimeout(()=>{t(n)},v.duration),n},t=b=>{const r=d.value.findIndex(o=>o.id===b);r>-1&&d.value.splice(r,1)},f=b=>{const r=d.value.find(o=>o.id===b);if(r&&r.confirm&&typeof r.confirm.onConfirm=="function")try{r.confirm.onConfirm()}catch{}t(b)},m=b=>{const r=d.value.find(o=>o.id===b);if(r&&r.confirm&&typeof r.confirm.onCancel=="function")try{r.confirm.onCancel()}catch{}t(b)},g=b=>{switch(b){case"success":return"bg-green-500";case"error":return"bg-red-500";case"warning":return"bg-yellow-500";case"info":default:return"bg-blue-500"}};return p({addNotification:s}),(b,r)=>(l(),i("div",Ta,[(l(!0),i(Z,null,ie(d.value,o=>(l(),i("div",{key:o.id,class:J(["w-full max-w-sm rounded-md shadow-lg pointer-events-auto overflow-hidden",g(o.type)])},[e("div",Ma,[e("p",$a,P(o.message),1),o.confirm?(l(),i("div",Ca,[e("button",{class:"px-3 py-1 text-sm font-semibold rounded bg-white/90 text-slate-800 hover:bg-white",onClick:a=>f(o.id)},P(o.confirm.confirmText||"Confirm"),9,Sa),e("button",{class:"px-3 py-1 text-sm font-semibold rounded bg-transparent border border-white/70 text-white hover:bg-white/10",onClick:a=>m(o.id)},P(o.confirm.cancelText||"Cancel"),9,Ga)])):A("",!0)])],2))),128))]))}};var Qe={exports:{}},ja=Qe.exports,gt;function Ea(){return gt||(gt=1,function(u,p){(function(s,t){u.exports=t(la())})(ja,d=>(()=>{var s={113:(I,E)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.default=(O,D)=>{const C=O.__vccOpts||O;for(const[Q,oe]of D)C[Q]=oe;return C}},594:I=>{I.exports=d}},t={};function f(I){var E=t[I];if(E!==void 0)return E.exports;var O=t[I]={exports:{}};return s[I](O,O.exports,f),O.exports}f.d=(I,E)=>{for(var O in E)f.o(E,O)&&!f.o(I,O)&&Object.defineProperty(I,O,{enumerable:!0,get:E[O]})},f.o=(I,E)=>Object.prototype.hasOwnProperty.call(I,E),f.r=I=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(I,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(I,"__esModule",{value:!0})};var m={};f.r(m),f.d(m,{ToastComponent:()=>G,ToastPlugin:()=>z,ToastPositions:()=>v,default:()=>ee,useToast:()=>j});var g=f(594);const b=["innerHTML"];function r(I,E,O,D,C,Q){return(0,g.openBlock)(),(0,g.createBlock)(g.Transition,{"enter-active-class":I.transition.enter,"leave-active-class":I.transition.leave},{default:(0,g.withCtx)(()=>[(0,g.withDirectives)((0,g.createElementVNode)("div",{ref:"root",role:"alert",class:(0,g.normalizeClass)(["v-toast__item",[`v-toast__item--${I.type}`,`v-toast__item--${I.position}`]]),onMouseover:E[0]||(E[0]=oe=>I.toggleTimer(!0)),onMouseleave:E[1]||(E[1]=oe=>I.toggleTimer(!1)),onClick:E[2]||(E[2]=function(){return I.whenClicked&&I.whenClicked(...arguments)})},[E[3]||(E[3]=(0,g.createElementVNode)("div",{class:"v-toast__icon"},null,-1)),(0,g.createElementVNode)("p",{class:"v-toast__text",innerHTML:I.message},null,8,b)],34),[[g.vShow,I.isActive]])]),_:1},8,["enter-active-class","leave-active-class"])}function o(I){var E;typeof I.remove<"u"?I.remove():(E=I.parentNode)==null||E.removeChild(I)}function a(I,E,O){let D=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const C=(0,g.h)(I,E,D),Q=document.createElement("div");return Q.classList.add("v-toast--pending"),O.appendChild(Q),(0,g.render)(C,Q),C.component}class n{constructor(E,O){this.startedAt=Date.now(),this.callback=E,this.delay=O,this.timer=setTimeout(E,O)}pause(){this.stop(),this.delay-=Date.now()-this.startedAt}resume(){this.stop(),this.startedAt=Date.now(),this.timer=setTimeout(this.callback,this.delay)}stop(){clearTimeout(this.timer)}}const v=Object.freeze({TOP_RIGHT:"top-right",TOP:"top",TOP_LEFT:"top-left",BOTTOM_RIGHT:"bottom-right",BOTTOM:"bottom",BOTTOM_LEFT:"bottom-left"});function M(I){return{all:I=I||new Map,on:function(E,O){var D=I.get(E);D?D.push(O):I.set(E,[O])},off:function(E,O){var D=I.get(E);D&&(O?D.splice(D.indexOf(O)>>>0,1):I.set(E,[]))},emit:function(E,O){var D=I.get(E);D&&D.slice().map(function(C){C(O)}),(D=I.get("*"))&&D.slice().map(function(C){C(E,O)})}}}const R=M(),B=(0,g.defineComponent)({name:"Toast",props:{message:{type:String,required:!0},type:{type:String,default:"success"},position:{type:String,default:v.BOTTOM_RIGHT,validator(I){return Object.values(v).includes(I)}},duration:{type:Number,default:3e3},dismissible:{type:Boolean,default:!0},onDismiss:{type:Function,default:()=>{}},onClick:{type:Function,default:()=>{}},queue:Boolean,pauseOnHover:{type:Boolean,default:!0}},data(){return{isActive:!1,parentTop:null,parentBottom:null,isHovered:!1}},beforeMount(){this.setupContainer()},mounted(){this.showNotice(),R.on("toast-clear",this.dismiss)},methods:{setupContainer(){if(this.parentTop=document.querySelector(".v-toast.v-toast--top"),this.parentBottom=document.querySelector(".v-toast.v-toast--bottom"),this.parentTop&&this.parentBottom)return;this.parentTop||(this.parentTop=document.createElement("div"),this.parentTop.className="v-toast v-toast--top"),this.parentBottom||(this.parentBottom=document.createElement("div"),this.parentBottom.className="v-toast v-toast--bottom");const I=document.body;I.appendChild(this.parentTop),I.appendChild(this.parentBottom)},shouldQueue(){return this.queue?this.parentTop.childElementCount>0||this.parentBottom.childElementCount>0:!1},dismiss(){this.timer&&this.timer.stop(),clearTimeout(this.queueTimer),this.isActive=!1,setTimeout(()=>{this.onDismiss.apply(null,arguments);const I=this.$refs.root;(0,g.render)(null,I),o(I)},150)},showNotice(){if(this.shouldQueue()){this.queueTimer=setTimeout(this.showNotice,250);return}const I=this.$refs.root.parentElement;this.correctParent.insertAdjacentElement("afterbegin",this.$refs.root),o(I),this.isActive=!0,this.duration&&(this.timer=new n(this.dismiss,this.duration))},whenClicked(){this.dismissible&&(this.onClick.apply(null,arguments),this.dismiss())},toggleTimer(I){!this.pauseOnHover||!this.timer||(I?this.timer.pause():this.timer.resume())}},computed:{correctParent(){switch(this.position){case v.TOP:case v.TOP_RIGHT:case v.TOP_LEFT:return this.parentTop;case v.BOTTOM:case v.BOTTOM_RIGHT:case v.BOTTOM_LEFT:return this.parentBottom}},transition(){switch(this.position){case v.TOP:case v.TOP_RIGHT:case v.TOP_LEFT:return{enter:"v-toast--fade-in-down",leave:"v-toast--fade-out"};case v.BOTTOM:case v.BOTTOM_RIGHT:case v.BOTTOM_LEFT:return{enter:"v-toast--fade-in-up",leave:"v-toast--fade-out"}}}},beforeUnmount(){R.off("toast-clear",this.dismiss)}});var x=f(113);const G=(0,x.default)(B,[["render",r]]),j=function(){let I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{open(E){let O=null;typeof E=="string"&&(O=E);const C=Object.assign({},{message:O},I,E);return{dismiss:a(G,C,document.body).ctx.dismiss}},clear(){R.emit("toast-clear")},success(E){let O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.open(Object.assign({},{message:E,type:"success"},O))},error(E){let O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.open(Object.assign({},{message:E,type:"error"},O))},info(E){let O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.open(Object.assign({},{message:E,type:"info"},O))},warning(E){let O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.open(Object.assign({},{message:E,type:"warning"},O))},default(E){let O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.open(Object.assign({},{message:E,type:"default"},O))}}},z={install:function(I){let E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},O=j(E);I.config.globalProperties.$toast=O,I.provide("$toast",O)}},ee=z;return m})())}(Qe)),Qe.exports}var Ia=Ea();const Va={class:"p-8"},Ba={class:"mt-2 text-sm text-gray-600"},Da={key:0,class:"mt-6 p-4 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 rounded-lg"},Na={class:"mt-4"},Ua={class:"mt-6 grid grid-cols-1 lg:grid-cols-3 gap-6"},za={class:"lg:col-span-1 space-y-3"},La=["onClick"],Fa={class:"flex items-center justify-between"},Ra={class:"flex items-center"},Oa={class:"ml-2 text-sm text-gray-500"},Wa={key:0},Ha={key:1},Ka={key:1,class:"text-xs text-gray-400"},qa={key:0,class:"lg:col-span-2 p-6 bg-gray-50 rounded-xl shadow-inner"},Ja={class:"text-xl font-semibold text-gray-800 mb-4"},Ya={class:"mb-4 text-sm text-right"},Qa=["disabled"],Za={class:"flex items-center justify-between mb-6 p-4 rounded-lg bg-white shadow-sm border border-gray-200"},Xa={class:"relative inline-flex items-center cursor-pointer"},el=["checked"],tl={key:0},al={class:"flex-1"},ll=["onUpdate:modelValue"],sl={class:"flex-1"},ol=["onUpdate:modelValue"],il=["onClick"],rl={key:1},nl={key:1,class:"lg:col-span-2 p-6 bg-gray-50 rounded-xl shadow-inner flex items-center justify-center"},ul={class:"px-6 py-4 bg-gray-50 border-t flex justify-end gap-3"},dl={key:0,class:"flex items-center"},cl={key:1},ml={__name:"AvailabilityModal",props:{show:Boolean,userId:{type:Number,default:null}},emits:["close","availability-saved"],setup(u,{emit:p}){const d=()=>{const D=localStorage.getItem("authToken");D&&!se.defaults.headers.common.Authorization&&(se.defaults.headers.common.Authorization=`Bearer ${D}`)},s=u,t=p,f=Ia.useToast(),m=T({}),g=T({}),b=T(!1),r=T(null),o=T(""),a=T(!1),n=T([]),v=()=>{const D=[],C=new Date,Q=C.getDay(),oe=Q===0?1:8-Q,W=new Date(C);W.setDate(C.getDate()+oe);for(let te=0;te<7;te++){const H=new Date(W);H.setDate(W.getDate()+te);const de=H.toISOString().split("T")[0];D.push({value:de,label:H.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"}),day:H.toLocaleDateString("en-US",{weekday:"short"})})}return D},M=()=>{const D=[],C=new Date,Q=C.getDay(),oe=new Date(C);oe.setDate(C.getDate()-(Q===0?6:Q-1));for(let W=0;W<7;W++){const te=new Date(oe);te.setDate(oe.getDate()+W);const H=te.toISOString().split("T")[0];D.push({value:H,label:te.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"}),day:te.toLocaleDateString("en-US",{weekday:"short"})})}return D},y=()=>{a.value=!0,o.value="",n.value=M(),r.value=null,B()},R=()=>{a.value=!1,o.value="",n.value=v(),r.value=null,B()};we(()=>{d(),n.value=v(),B()});const B=async()=>{try{if(d(),n.value.length===0)return;const D=n.value[0].value,C=n.value[n.value.length-1].value,Q=await se.get("/api/availabilities",{params:{start_date:D,end_date:C,user_id:s.userId}});if(Q.data&&Q.data.availabilities){const oe={};n.value.forEach(W=>{oe[W.value]={isSelected:!1,isAvailable:!0,reason:"",timeSlots:[{start_time:"",end_time:""}]}}),m.value=oe,Q.data.availabilities.forEach(W=>{const te=W.date.split("T")[0];m.value[te]&&(m.value[te].isAvailable=W.is_available,W.is_available?m.value[te].timeSlots=W.time_slots&&W.time_slots.length>0?[...W.time_slots]:[{start_time:"",end_time:""}]:m.value[te].reason=W.reason||"")})}}catch(D){console.error("Error fetching existing availabilities:",D)}};re(()=>s.show,async D=>{if(D){g.value={},o.value="";try{d();const{data:C}=await se.get("/api/availability-prompt");!(C.all_current_weekdays_covered??!0)?(a.value=!0,n.value=M()):(a.value=!1,n.value=v())}catch{a.value=!1,n.value=v()}await B(),r.value=null}else r.value=null},{immediate:!0});const x=F(()=>m.value[r.value]||{isSelected:!1,isAvailable:!0,reason:"",timeSlots:[{start_time:"",end_time:""}]}),w=F(()=>Object.values(m.value).some(D=>D.isSelected)),G=F(()=>{const D=m.value[r.value];return D?D.isAvailable?D.timeSlots.some(C=>C.start_time&&C.end_time):D.reason.trim().split(/\s+/).filter(Boolean).length>=2:!1}),j=D=>{r.value=D},z=()=>{var C;const D=(C=m.value[r.value])==null?void 0:C.timeSlots;D&&(D.push({start_time:"",end_time:""}),m.value[r.value].isSelected=!0)},ee=D=>{var Q;const C=(Q=m.value[r.value])==null?void 0:Q.timeSlots;C&&C.length>1&&(C.splice(D,1),m.value[r.value].isSelected=!0)},I=D=>{m.value[r.value]&&(m.value[r.value].isAvailable=D,m.value[r.value].isSelected=!0,D?m.value[r.value].reason="":m.value[r.value].timeSlots=[{start_time:"",end_time:""}])},E=()=>{const D=m.value[r.value];if(D){if(!G.value){D.isAvailable?g.value[r.value]={timeSlots:"Please fill in at least one time slot before applying to all days."}:g.value[r.value]={reason:"Reason must be at least 2 words to apply to all days."};return}delete g.value[r.value];for(const C of n.value){const Q=C.value;m.value[Q]=JSON.parse(JSON.stringify(D)),m.value[Q].isSelected=!0}f.success("Availability applied to all days!")}},O=async()=>{if(b.value=!0,g.value={},a.value&&!o.value.trim()){g.value.lateReason="Please provide a reason for this late submission.",b.value=!1;return}const D=[];let C=!1;for(const Q of n.value){const oe=Q.value,W=m.value[oe];let te={};if(W.isSelected){if(W.isAvailable)if(W.timeSlots.some(H=>!H.start_time||!H.end_time))te.timeSlots="Please fill in all time slots.",C=!0;else for(const H of W.timeSlots){const de=H.start_time.split(":").map(Number),me=H.end_time.split(":").map(Number);if(de[0]*60+de[1]>=me[0]*60+me[1]){te.timeSlots="End time must be after start time.",C=!0;break}}else W.reason.trim()||(te.reason="Please provide a reason for unavailability.",C=!0);Object.keys(te).length>0&&(g.value[oe]=te),Object.keys(te).length===0&&D.push({date:oe,is_available:W.isAvailable,reason:W.isAvailable?null:W.reason,time_slots:W.isAvailable?W.timeSlots:null})}}if(D.length===0&&!C){g.value.general="Please select and set availability for at least one day.",b.value=!1;return}if(C){b.value=!1;return}try{d();const Q={availabilities:D,reason_for_late_submission:a.value?o.value:null};await se.post("/api/availabilities/batch",Q),f.success("Availability saved successfully!"),t("availability-saved"),t("close")}catch(Q){console.error("Error saving availability:",Q),f.error("An error occurred while saving your availability.")}finally{b.value=!1}};return(D,C)=>(l(),V(He,{show:u.show,onClose:C[7]||(C[7]=Q=>D.$emit("close")),"max-width":"4xl",closeable:""},{default:k(()=>{var Q,oe,W,te;return[e("div",Va,[C[18]||(C[18]=e("h2",{class:"text-2xl font-bold text-gray-900"}," Set Your Weekly Availability ",-1)),e("p",Ba,[C[8]||(C[8]=_(" Select a day to quickly set your schedule for the upcoming week. ",-1)),a.value?(l(),i("span",{key:1,class:"text-indigo-600 hover:text-indigo-800 transition duration-150 ease-in-out cursor-pointer",onClick:R}," Go back to next week. ")):(l(),i("span",{key:0,class:"text-indigo-600 hover:text-indigo-800 transition duration-150 ease-in-out cursor-pointer",onClick:y}," Missed the deadline? Submit for this week. "))]),a.value?(l(),i("div",Da,[C[9]||(C[9]=e("div",{class:"flex items-center"},[e("svg",{class:"h-5 w-5 text-yellow-500 mr-2",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.344a1.5 1.5 0 012.486 0l5.446 9.176A1.5 1.5 0 0114.246 15H5.754a1.5 1.5 0 01-1.238-2.48zM9 11a1 1 0 102 0V7a1 1 0 10-2 0v4zm1-3a1 1 0 100 2h.01a1 1 0 100-2H10z","clip-rule":"evenodd"})]),e("p",{class:"font-semibold"},"Late Submission for Current Week")],-1)),C[10]||(C[10]=e("p",{class:"mt-2 text-sm"}," Please provide a reason for submitting late. We acknowledge that availability submissions are due by Thursday evening. ",-1)),e("div",Na,[c(q,{value:"Reason for late submission"}),L(e("textarea",{"onUpdate:modelValue":C[0]||(C[0]=H=>o.value=H),rows:"2",class:"mt-1 block w-full rounded-md border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 shadow-sm",placeholder:"e.g., I was out sick, I forgot, I had no access to the system"},null,512),[[ce,o.value]]),c(le,{message:g.value.lateReason,class:"mt-2"},null,8,["message"])])])):A("",!0),e("div",Ua,[e("div",za,[(l(!0),i(Z,null,ie(n.value,H=>{var de,me,he,Ve,Me;return l(),i("div",{key:H.value,class:J(["p-4 rounded-xl border cursor-pointer transition-all duration-200 ease-in-out",{"bg-indigo-50 border-indigo-500 shadow-lg":r.value===H.value,"bg-white border-gray-200 hover:border-indigo-400 hover:shadow-md":r.value!==H.value,"border-red-400 bg-red-50":g.value[H.value],"opacity-70":H.isPast}]),onClick:xe=>j(H.value)},[e("div",Fa,[e("div",Ra,[e("div",{class:J(["text-lg font-bold",{"text-indigo-600":r.value===H.value,"text-gray-800":r.value!==H.value}])},P(H.day),3),e("div",Oa,P(H.label.split(", ")[1]),1)]),(me=(de=m.value[H.value])==null?void 0:de.timeSlots[0])!=null&&me.start_time&&((Ve=(he=m.value[H.value])==null?void 0:he.timeSlots[0])!=null&&Ve.end_time)||(Me=m.value[H.value])!=null&&Me.reason?(l(),i("span",{key:0,class:J(["inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium",{"bg-emerald-100 text-emerald-800":m.value[H.value].isAvailable,"bg-amber-100 text-amber-800":!m.value[H.value].isAvailable}])},[m.value[H.value].isAvailable?(l(),i("span",Wa,"Available")):(l(),i("span",Ha,"Unavailable"))],2)):(l(),i("span",Ka," Not Set "))])],10,La)}),128))]),r.value?(l(),i("div",qa,[e("h3",Ja," Availability for "+P((Q=n.value.find(H=>H.value===r.value))==null?void 0:Q.label),1),e("div",Ya,[e("button",{type:"button",onClick:E,disabled:!G.value,class:J([{"opacity-50 cursor-not-allowed":!G.value},"text-indigo-600 hover:text-indigo-800 transition duration-150 ease-in-out"])},C[11]||(C[11]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 inline mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{d:"M7 9a2 2 0 012-2h6a2 2 0 012 2v6a2 2 0 01-2 2H9a2 2 0 01-2-2V9z"}),e("path",{d:"M5 3a2 2 0 00-2 2v6a2 2 0 002 2V5h8a2 2 0 00-2-2H5z"})],-1),_(" Apply to all days ",-1)]),10,Qa)]),e("div",Za,[C[13]||(C[13]=e("span",{class:"text-sm font-medium text-gray-700"},"I am available on this day",-1)),e("label",Xa,[e("input",{type:"checkbox",checked:x.value.isAvailable,onChange:C[1]||(C[1]=H=>I(H.target.checked)),class:"sr-only peer"},null,40,el),C[12]||(C[12]=e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"},null,-1))])]),c(le,{message:(oe=g.value[r.value])==null?void 0:oe.general,class:"mt-2"},null,8,["message"]),x.value.isAvailable?(l(),i("div",tl,[c(q,{value:"Available Time Slots",class:"text-gray-800 mb-2"}),c(le,{message:(W=g.value[r.value])==null?void 0:W.timeSlots,class:"mt-2 mb-4"},null,8,["message"]),(l(!0),i(Z,null,ie(x.value.timeSlots,(H,de)=>(l(),i("div",{key:de,class:"flex items-center space-x-2 mb-4"},[e("div",al,[L(e("input",{type:"time","onUpdate:modelValue":me=>m.value[r.value].timeSlots[de].start_time=me,onChange:C[2]||(C[2]=me=>m.value[r.value].isSelected=!0),class:"block w-full rounded-md border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 shadow-sm"},null,40,ll),[[ce,m.value[r.value].timeSlots[de].start_time]])]),C[15]||(C[15]=e("span",{class:"text-gray-500"},"-",-1)),e("div",sl,[L(e("input",{type:"time","onUpdate:modelValue":me=>m.value[r.value].timeSlots[de].end_time=me,onChange:C[3]||(C[3]=me=>m.value[r.value].isSelected=!0),class:"block w-full rounded-md border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 shadow-sm"},null,40,ol),[[ce,m.value[r.value].timeSlots[de].end_time]])]),m.value[r.value].timeSlots.length>1?(l(),i("button",{key:0,type:"button",onClick:me=>ee(de),class:"p-2 text-red-600 hover:text-red-800 transition duration-150 ease-in-out"},C[14]||(C[14]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm6 0a1 1 0 012 0v6a1 1 0 11-2 0V8z","clip-rule":"evenodd"})],-1)]),8,il)):A("",!0)]))),128)),e("button",{type:"button",onClick:z,class:"mt-2 w-full flex items-center justify-center px-4 py-2 border border-dashed border-indigo-300 rounded-lg text-indigo-600 hover:bg-indigo-50 transition duration-150 ease-in-out"},C[16]||(C[16]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z","clip-rule":"evenodd"})],-1),_(" Add Another Time Slot ",-1)]))])):(l(),i("div",rl,[c(q,{value:"Reason for Not Available",class:"text-gray-800 mb-2"}),L(e("textarea",{"onUpdate:modelValue":C[4]||(C[4]=H=>m.value[r.value].reason=H),onInput:C[5]||(C[5]=H=>m.value[r.value].isSelected=!0),rows:"3",class:"block w-full rounded-md border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 shadow-sm",placeholder:"e.g., Out of office, Holiday, Meeting all day"},null,544),[[ce,m.value[r.value].reason]]),c(le,{message:(te=g.value[r.value])==null?void 0:te.reason,class:"mt-2"},null,8,["message"])]))])):(l(),i("div",nl,C[17]||(C[17]=[e("p",{class:"text-gray-500 text-lg font-medium"}," Please select a day from the left to set your availability. ",-1)])))])]),e("div",ul,[c(Ze,{onClick:C[6]||(C[6]=H=>D.$emit("close"))},{default:k(()=>C[19]||(C[19]=[_(" Cancel ",-1)])),_:1,__:[19]}),c(pe,{onClick:O,disabled:b.value||!w.value,class:J({"opacity-50 cursor-not-allowed":b.value||!w.value})},{default:k(()=>[b.value?(l(),i("span",dl,C[20]||(C[20]=[e("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),_(" Saving... ",-1)]))):(l(),i("span",cl,"Save Availability"))]),_:1},8,["disabled","class"])])]}),_:1},8,["show"]))}},vl={key:0,class:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center"},pl={class:"bg-white rounded-lg shadow-xl p-6 max-w-lg w-full mx-4"},fl={class:"mb-4 text-gray-700"},gl={class:"flex justify-center"},bl={__name:"AvailabilityBlocker",setup(u){const p=T(!1),d=T(!0),s=T(!1),t=T(!0),f=T(!0),m=T(!1),g=F(()=>{var y;return((y=We().props.auth.user)==null?void 0:y.id)||null}),b=()=>{const y=localStorage.getItem("authToken");y&&!se.defaults.headers.common.Authorization&&(se.defaults.headers.common.Authorization=`Bearer ${y}`)},r=async()=>{d.value=!0;try{b();const{data:y}=await se.get("/api/availability-prompt");p.value=!!y.should_block_user,t.value=!!y.all_current_weekdays_covered,f.value=!!(y.all_next_weekdays_covered??y.all_weekdays_covered),m.value=!!y.is_friday_onwards,localStorage.setItem("shouldBlockUser",String(p.value)),localStorage.setItem("allCurrentWeekdaysCovered",String(t.value)),localStorage.setItem("allNextWeekdaysCovered",String(f.value)),localStorage.setItem("allWeekdaysCovered",String(f.value));const R=new CustomEvent("availability-status-updated",{detail:{shouldBlockUser:p.value,allCurrentWeekdaysCovered:t.value,allNextWeekdaysCovered:f.value}});window.dispatchEvent(R)}catch(y){console.error("Error checking if user should be blocked:",y),p.value=!1}finally{d.value=!1}},o=()=>{s.value=!0},a=()=>{r()},n=y=>{p.value=!!y.detail.shouldBlockUser,"allCurrentWeekdaysCovered"in y.detail&&(t.value=!!y.detail.allCurrentWeekdaysCovered),"allNextWeekdaysCovered"in y.detail&&(f.value=!!y.detail.allNextWeekdaysCovered)},v=()=>{document.visibilityState==="visible"&&Ee(()=>{r()})},M=y=>{["shouldBlockUser","allWeekdaysCovered","allCurrentWeekdaysCovered","allNextWeekdaysCovered"].includes(y.key)&&Ee(()=>{r()})};return we(()=>{r(),window.addEventListener("availability-status-updated",n),document.addEventListener("visibilitychange",v),window.addEventListener("storage",M)}),Xe(()=>{window.removeEventListener("availability-status-updated",n),document.removeEventListener("visibilitychange",v),window.removeEventListener("storage",M)}),(y,R)=>p.value&&!d.value?(l(),i("div",vl,[e("div",pl,[R[2]||(R[2]=qt('<div class="flex items-center mb-4"><div class="flex-shrink-0 mr-3"><svg class="h-8 w-8 text-red-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg></div><h2 class="text-xl font-bold text-gray-900">Action Required</h2></div>',1)),e("p",fl,[!t.value&&!f.value?(l(),i(Z,{key:0},[_(" You need to submit your availability for the current week (up to today) and for all weekdays of next week. ")],64)):t.value?(l(),i(Z,{key:2},[_(" You must submit your availability for all weekdays of next week before you can continue using the application. ")],64)):(l(),i(Z,{key:1},[_(" You need to submit your availability for the current week (up to today). ")],64))]),R[3]||(R[3]=e("p",{class:"mb-6 text-gray-600"}," This information is required for planning meetings and work schedules. ",-1)),e("div",gl,[c(pe,{onClick:o,class:"bg-red-600 hover:bg-red-700"},{default:k(()=>R[1]||(R[1]=[_(" Submit Availability Now ",-1)])),_:1,__:[1]})]),c(ml,{show:s.value,userId:g.value,onClose:R[0]||(R[0]=B=>s.value=!1),onAvailabilitySaved:a},null,8,["show","userId"])])])):A("",!0)}},yl={class:"relative"},hl={class:"flex flex-wrap items-center gap-2 mb-2 p-2 border border-gray-300 rounded-lg bg-white min-h-[44px] focus-within:border-indigo-500 focus-within:ring-1 focus-within:ring-indigo-500 transition-all duration-150"},kl=["onClick"],wl={key:0,class:"absolute z-20 w-full bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto mt-1 transform-gpu"},xl=["onClick"],_l={key:1,class:"px-4 py-2 text-sm text-gray-500"},Al={key:2,class:"px-4 py-2 text-sm text-gray-500"},Tl={__name:"TagInput",props:{modelValue:{type:Array,default:()=>[]},label:{type:String,default:"Tags"},placeholder:{type:String,default:"Add tags..."},error:{type:String,default:""},initialTags:{type:Array,default:()=>[]},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(u,{emit:p}){const d=u,s=p,t=T(""),f=T([]),m=T([]),g=T(!1),b=T(null);function r(){s("update:modelValue",m.value.map(B=>B.id))}re(()=>d.initialTags,B=>{if(m.value=[],B&&B.length>0){const j=[],z=new Set;B.forEach(ee=>{z.has(ee.id)||(j.push(ee),z.add(ee.id))}),m.value.push(...j)}const x=B.map(j=>j.id),w=Array.isArray(d.modelValue)?d.modelValue:[];(x.length!==w.length||x.some(j=>!w.includes(j))||w.some(j=>!x.includes(j)))&&r()},{immediate:!0});const o=sa(async B=>{if(B.length<2){f.value=[],g.value=!1;return}try{const x=await se.get(`/api/tags/search?query=${B}`);f.value=x.data,g.value=!0}catch(x){console.error("Error fetching tags:",x),f.value=[],g.value=!1}},300);re(t,B=>{d.disabled||o(B)});const a=B=>{m.value.some(x=>x.id===B.id)||(m.value.push(B),t.value="",f.value=[],g.value=!1,r()),Ee(()=>b.value.focus())},n=()=>{if(d.disabled)return;const B=t.value.trim();if(!B)return;const x=f.value.find(G=>G.name.toLowerCase()===B.toLowerCase()),w=m.value.some(G=>G.name.toLowerCase()===B.toLowerCase());if(x)a(x);else if(w)t.value="",f.value=[],g.value=!1;else{const G={id:`new_${B.replace(/\s+/g,"-").toLowerCase()}_${Date.now()}`,name:B};m.value.push(G),t.value="",f.value=[],g.value=!1,r()}Ee(()=>b.value.focus())},v=B=>{d.disabled||(m.value=m.value.filter(x=>x.id!==B.id),r(),Ee(()=>b.value.focus()))},M=()=>{d.disabled||t.value===""&&m.value.length>0&&v(m.value[m.value.length-1])},y=F(()=>f.value.filter(B=>!m.value.some(x=>x.id===B.id))),R=B=>{b.value&&!b.value.$el.contains(B.target)&&(g.value=!1,t.value="")};return we(()=>{document.addEventListener("click",R)}),Xe(()=>{document.removeEventListener("click",R)}),(B,x)=>(l(),i("div",yl,[c(q,{value:u.label,class:"mb-1"},null,8,["value"]),e("div",hl,[(l(!0),i(Z,null,ie(m.value,w=>(l(),i("span",{key:w.id,class:"inline-flex items-center px-3 py-1 text-sm font-medium bg-indigo-100 text-indigo-800 rounded-full shadow-sm"},[_(P(w.name)+" ",1),u.disabled?A("",!0):(l(),i("button",{key:0,type:"button",onClick:G=>v(w),class:"ml-2 -mr-1 text-indigo-500 hover:text-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 rounded-full p-0.5"},x[3]||(x[3]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,kl))]))),128)),c(ye,{ref_key:"inputRef",ref:b,type:"text",placeholder:m.value.length===0?u.placeholder:"",modelValue:t.value,"onUpdate:modelValue":x[0]||(x[0]=w=>t.value=w),onFocus:x[1]||(x[1]=w=>g.value=!0),onKeydown:[Je(wt(n,["prevent"]),["enter"]),x[2]||(x[2]=Je(w=>g.value=!1,["tab"])),Je(M,["delete"])],class:"flex-grow min-w-[100px] border-none focus:ring-0 shadow-none p-0 bg-transparent text-gray-900",disabled:u.disabled},null,8,["placeholder","modelValue","onKeydown","disabled"])]),g.value&&(y.value.length>0||t.value.length>=2||y.value.length===0&&t.value.length<2)&&!u.disabled?(l(),i("div",wl,[(l(!0),i(Z,null,ie(y.value,w=>(l(),i("div",{key:w.id,onClick:G=>a(w),class:"px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 cursor-pointer transition-colors duration-100"},P(w.name),9,xl))),128)),!f.value.some(w=>w.name.toLowerCase()===t.value.toLowerCase())&&t.value.length>=2?(l(),i("div",{key:0,onClick:n,class:"px-4 py-2 text-sm text-indigo-700 bg-indigo-50 hover:bg-indigo-100 cursor-pointer border-t border-indigo-200 font-semibold transition-colors duration-100"},' Add new tag: "'+P(t.value)+'" ',1)):A("",!0),y.value.length===0&&t.value.length<2?(l(),i("div",_l," Type at least 2 characters to search for tags. ")):A("",!0),y.value.length===0&&t.value.length>=2&&!f.value.some(w=>w.name.toLowerCase()===t.value.toLowerCase())?(l(),i("div",Al,[x[4]||(x[4]=_(" No matching tags found. Press ",-1)),x[5]||(x[5]=e("span",{class:"font-semibold text-indigo-600"},"Enter",-1)),_(' to add "'+P(t.value)+'" as a new tag. ',1)])):A("",!0)])):A("",!0),c(le,{message:u.error,class:"mt-2"},null,8,["message"])]))}},Mt=Ke(Tl,[["__scopeId","data-v-4d528a4c"]]),Ml={class:"space-y-4"},$l="Add New Milestone",Cl="/api/milestones",Sl="post",Gl="Create Milestone",Pl="Milestone created successfully!",jl={__name:"MilestoneFormModal",props:{show:Boolean,projectId:Number},emits:["close","saved"],setup(u,{emit:p}){const d=u,s=p,t=Ie({name:"",description:"",completion_date:null,status:"Not Started",project_id:d.projectId}),f=Ie({completion_date:null}),m=["Not Started","In Progress","Completed","Overdue"];re(()=>d.show,o=>{o&&(Object.assign(t,{name:"",description:"",completion_date:null,status:"Not Started",project_id:d.projectId}),f.completion_date=null)},{immediate:!0});const g=()=>(f.completion_date=null,t.completion_date?!0:(f.completion_date=["Completion date is required."],!1)),b=o=>{s("saved",o),s("close")},r=()=>{s("close")};return(o,a)=>(l(),V(De,{show:u.show,title:$l,"api-endpoint":Cl,"http-method":Sl,"form-data":t,"submit-button-text":Gl,"success-message":Pl,"before-submit":g,onClose:r,onSubmitted:b},{default:k(({errors:n})=>[e("div",Ml,[e("div",null,[c(q,{for:"milestone-name",value:"Milestone Name"}),c(ye,{id:"milestone-name",modelValue:t.name,"onUpdate:modelValue":a[0]||(a[0]=v=>t.name=v),type:"text",class:"mt-1 block w-full",placeholder:"Enter milestone name",required:""},null,8,["modelValue"]),c(le,{message:n.name?n.name[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[c(q,{for:"milestone-description",value:"Description"}),L(e("textarea",{id:"milestone-description","onUpdate:modelValue":a[1]||(a[1]=v=>t.description=v),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",rows:"3",placeholder:"Enter milestone description"},null,512),[[ce,t.description]]),c(le,{message:n.description?n.description[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[c(q,{for:"milestone-completion-date",value:"Completion Date"}),c(ye,{id:"milestone-completion-date",modelValue:t.completion_date,"onUpdate:modelValue":a[2]||(a[2]=v=>t.completion_date=v),type:"date",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),c(le,{message:n.completion_date?n.completion_date[0]:f.completion_date?f.completion_date[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[c(q,{for:"milestone-status",value:"Status"}),c(ge,{id:"milestone-status",modelValue:t.status,"onUpdate:modelValue":a[3]||(a[3]=v=>t.status=v),options:m.map(v=>({value:v,label:v})),"value-key":"value","label-key":"label",placeholder:"Select status",class:"mt-1"},null,8,["modelValue","options"]),c(le,{message:n.status?n.status[0]:"",class:"mt-2"},null,8,["message"])])])]),_:1},8,["show","form-data"]))}},El={class:"p-4 sm:p-6"},Il={class:"flex items-center justify-between mb-4"},Vl={class:"text-lg font-medium text-gray-900"},Bl={class:"space-y-6"},Dl={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Nl={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ul={key:0},zl=["min"],Ll={key:1},Fl=["min"],Rl={key:2,class:"md:col-span-2"},Ol={class:"mt-2 flex flex-wrap gap-2"},Wl=["value"],Hl={class:"ml-2 text-sm"},Kl={class:"flex gap-2"},ql=["value"],Jl=["value"],Yl={key:5,class:"md:col-span-2"},Ql={class:"p-3 rounded-md bg-gray-50 border border-gray-200 text-sm text-gray-800"},Zl={class:"flex items-center justify-end gap-3"},Xl={__name:"SchedulePickerModal",props:{show:{type:Boolean,default:!1},title:{type:String,default:"Schedule"},initial:{type:Object,default:()=>({})}},emits:["close","save"],setup(u,{emit:p}){function d(a=new Date){const n=x=>String(x).padStart(2,"0"),v=a.getFullYear(),M=n(a.getMonth()+1),y=n(a.getDate()),R=n(a.getHours()),B=n(a.getMinutes());return`${v}-${M}-${y}T${R}:${B}`}const s=u,t=p,f=T({name:"",description:"",start_at:d(new Date),end_at:"",mode:"once",time:new Date().toTimeString().slice(0,5),days_of_week:[],day_of_month:null,nth:1,dow_for_monthly:1,month:1,cron:""});re(()=>s.show,a=>{a&&(f.value={name:s.initial.name||"",description:s.initial.description||"",start_at:s.initial.start_at||d(new Date),end_at:s.initial.end_at||"",mode:s.initial.mode||"once",time:s.initial.time||new Date().toTimeString().slice(0,5),days_of_week:s.initial.days_of_week||[],day_of_month:s.initial.day_of_month||null,nth:s.initial.nth||1,dow_for_monthly:s.initial.dow_for_monthly||1,month:s.initial.month||1,cron:s.initial.cron||""})});const m=[{value:"once",label:"Once"},{value:"daily",label:"Daily"},{value:"weekly",label:"Weekly"},{value:"monthly",label:"Monthly"},{value:"yearly",label:"Yearly"},{value:"cron",label:"Custom cron"}],g=F(()=>d(new Date)),b=F(()=>f.value.start_at||g.value),r=F(()=>{var v,M;const a=f.value,n=a.time||"00:00";switch(a.mode){case"once":return`One-time at ${(v=a.start_at)==null?void 0:v.replace("T"," ")} (deactivates after run)`;case"daily":return`Daily at ${n}`;case"weekly":if(!((M=a.days_of_week)!=null&&M.length))return`Weekly at ${n}`;const y=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return`Weekly on ${a.days_of_week.map(x=>y[x]).join(", ")} at ${n}`;case"monthly":return a.day_of_month?`Monthly on day ${a.day_of_month} at ${n}`:`Monthly on the ${["First","Second","Third","Fourth","Fifth"][a.nth-1]} ${["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][a.dow_for_monthly]} at ${n}`;case"yearly":return`Yearly on ${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][(a.month||1)-1]} ${a.day_of_month||1} at ${n}`;case"cron":return`Custom cron: ${a.cron||"* * * * *"}`}});function o(){t("save",{...f.value})}return(a,n)=>(l(),V(He,{show:u.show,onClose:n[15]||(n[15]=()=>t("close"))},{default:k(()=>[e("div",El,[e("div",Il,[e("h3",Vl,P(u.title),1),e("button",{onClick:n[0]||(n[0]=()=>t("close")),class:"text-gray-500 hover:text-gray-700"},"✕")]),e("div",Bl,[e("section",null,[e("div",Dl,[e("div",null,[c(q,{value:"Schedule Name"}),L(e("input",{"onUpdate:modelValue":n[1]||(n[1]=v=>f.value.name=v),type:"text",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",placeholder:"e.g., Weekly reminder"},null,512),[[ce,f.value.name]])]),e("div",null,[c(q,{value:"Description (optional)"}),L(e("input",{"onUpdate:modelValue":n[2]||(n[2]=v=>f.value.description=v),type:"text",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[ce,f.value.description]])])])]),e("section",null,[e("div",Nl,[e("div",null,[c(q,{value:"Run"}),c(ge,{modelValue:f.value.mode,"onUpdate:modelValue":n[3]||(n[3]=v=>f.value.mode=v),options:m,placeholder:"Select frequency..."},null,8,["modelValue"])]),f.value.mode!=="cron"&&f.value.mode!=="once"?(l(),i("div",Ul,[c(q,{value:"Time"}),L(e("input",{"onUpdate:modelValue":n[4]||(n[4]=v=>f.value.time=v),type:"time",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[ce,f.value.time]])])):A("",!0),e("div",null,[c(q,{value:"Start at"}),L(e("input",{"onUpdate:modelValue":n[5]||(n[5]=v=>f.value.start_at=v),type:"datetime-local",min:g.value,class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,8,zl),[[ce,f.value.start_at]])]),f.value.mode!=="once"?(l(),i("div",Ll,[c(q,{value:"End at (optional)"}),L(e("input",{"onUpdate:modelValue":n[6]||(n[6]=v=>f.value.end_at=v),type:"datetime-local",min:b.value,class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,8,Fl),[[ce,f.value.end_at]])])):A("",!0),f.value.mode==="weekly"?(l(),i("div",Rl,[c(q,{value:"Days of the week"}),e("div",Ol,[(l(),i(Z,null,ie(7,v=>e("label",{key:v-1,class:"inline-flex items-center"},[L(e("input",{class:"rounded border-gray-300 text-indigo-600 shadow-sm focus:ring-indigo-500",type:"checkbox",value:v-1,"onUpdate:modelValue":n[7]||(n[7]=M=>f.value.days_of_week=M)},null,8,Wl),[[xt,f.value.days_of_week]]),e("span",Hl,P(["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][v-1]),1)])),64))])])):A("",!0),f.value.mode==="monthly"?(l(),i(Z,{key:3},[e("div",null,[c(q,{value:"Day of month"}),L(e("input",{"onUpdate:modelValue":n[8]||(n[8]=v=>f.value.day_of_month=v),type:"number",min:"1",max:"31",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",placeholder:"e.g., 15"},null,512),[[ce,f.value.day_of_month,void 0,{number:!0}]])]),e("div",null,[c(q,{value:"Or: Nth weekday"}),e("div",Kl,[L(e("select",{"onUpdate:modelValue":n[9]||(n[9]=v=>f.value.nth=v),class:"mt-1 block w-1/2 rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},n[16]||(n[16]=[e("option",{value:1},"First",-1),e("option",{value:2},"Second",-1),e("option",{value:3},"Third",-1),e("option",{value:4},"Fourth",-1),e("option",{value:5},"Fifth",-1)]),512),[[Ye,f.value.nth,void 0,{number:!0}]]),L(e("select",{"onUpdate:modelValue":n[10]||(n[10]=v=>f.value.dow_for_monthly=v),class:"mt-1 block w-1/2 rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[(l(),i(Z,null,ie(7,v=>e("option",{key:v-1,value:v-1},P(["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][v-1]),9,ql)),64))],512),[[Ye,f.value.dow_for_monthly,void 0,{number:!0}]])])])],64)):A("",!0),f.value.mode==="yearly"?(l(),i(Z,{key:4},[e("div",null,[c(q,{value:"Month"}),L(e("select",{"onUpdate:modelValue":n[11]||(n[11]=v=>f.value.month=v),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[(l(),i(Z,null,ie(12,v=>e("option",{key:v,value:v},P(["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][v-1]),9,Jl)),64))],512),[[Ye,f.value.month,void 0,{number:!0}]])]),e("div",null,[c(q,{value:"Day of month"}),L(e("input",{"onUpdate:modelValue":n[12]||(n[12]=v=>f.value.day_of_month=v),type:"number",min:"1",max:"31",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[ce,f.value.day_of_month,void 0,{number:!0}]])])],64)):A("",!0),f.value.mode==="cron"?(l(),i("div",Yl,[c(q,{value:"Cron expression"}),L(e("input",{"onUpdate:modelValue":n[13]||(n[13]=v=>f.value.cron=v),type:"text",placeholder:"* * * * *",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[ce,f.value.cron]])])):A("",!0)])]),e("section",null,[e("div",Ql,P(r.value),1),n[17]||(n[17]=e("p",{class:"text-[11px] text-gray-500 mt-1"},"Times are entered in your local timezone; they will be stored in the app timezone.",-1))]),e("div",Zl,[e("button",{onClick:n[14]||(n[14]=()=>t("close")),class:"px-4 py-2 rounded-md border border-gray-300 text-gray-700 bg-white hover:bg-gray-50"},"Cancel"),e("button",{onClick:o,class:"inline-flex items-center rounded-md bg-indigo-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500"},"Save")])])])]),_:1},8,["show"]))}};function es(){const u=T(!1),p=T(null);function d(){u.value=!0}function s(){u.value=!1}function t(m){p.value={...m},u.value=!1}async function f(m,g){var b,r;if(!p.value)return null;try{const o={...p.value,scheduled_item_type:m,scheduled_item_id:g},{data:a}=await window.axios.post("/api/schedules",o);return be("Schedule created"),p.value=null,a}catch(o){return console.error("Failed to create schedule",o),ue(((r=(b=o==null?void 0:o.response)==null?void 0:b.data)==null?void 0:r.message)||"Failed to create schedule"),null}}return{showScheduleModal:u,scheduleDraft:p,open:d,close:s,onSaveDraft:t,attachAfterCreate:f}}const ts={key:0,class:"mb-4"},as={key:1,class:"flex flex-col md:flex-row md:gap-8"},ls={class:"flex-grow flex flex-col space-y-4"},ss={key:0,class:"flex-grow flex flex-col"},os={key:0,class:"text-xs text-gray-500 mt-1"},is={class:"w-full md:w-72 flex-shrink-0 mt-6 md:mt-0 space-y-5"},rs={key:0},ns={class:"space-y-5"},us={class:"flex items-center gap-3"},ds={class:"flex-grow flex items-center gap-2"},cs=["disabled"],ms={class:"flex items-center gap-3"},vs={key:0,class:"mt-5 flex items-center gap-3"},ps={key:1,class:"mt-5 flex items-center gap-3"},fs={key:2,class:"mt-5 flex items-center gap-3"},gs={key:3,class:"mt-5 space-y-2"},bs={class:"flex items-center justify-between rounded-md bg-gray-100 p-1"},ys={key:2,class:"mt-6 border-t pt-4"},hs={class:"space-y-4 mb-4"},ks={key:0},ws={key:1},xs={key:2,class:"flex items-center"},_s={key:3,class:"flex items-center justify-between"},As={key:0,class:"text-sm text-gray-700"},Ts={key:1,class:"text-sm text-gray-500"},Ms={class:"flex items-center gap-2"},$s={class:"flex items-center gap-2 flex-wrap"},Cs="Create New Task",Ss="/api/tasks",Gs="post",Ps="Create Task",js="Task created successfully!",Es={__name:"CreateTaskModal",props:{show:Boolean,projectId:{type:Number,default:null}},emits:["close","saved"],setup(u,{emit:p}){const d=u,s=p,t=Ie({name:"",description:"",assigned_to_user_id:null,due_date:null,status:"To Do",task_type_id:null,milestone_id:null,project_id:d.projectId,priority:"medium",needs_approval:!1,tags:[],tags_data:[]}),f=["To Do","In Progress","Done","Blocked","Archived"],m=T([]),g=T([]),b=T([]),r=T([]),o=T(!0),a=T(!1),n=T(!1),v=T(!1),M=T(!1),y=T(!1),R=T(!1),B=T(!1),x=T(!1),{showScheduleModal:w,scheduleDraft:G,open:j,close:z,onSaveDraft:ee,attachAfterCreate:I}=es(),E=F(()=>{const N=G.value;if(!N)return null;const $=N.time||"00:00";switch(N.mode){case"once":return`One-time at ${String(N.start_at||"").replace("T"," ")}`;case"daily":return`Daily at ${$}`;case"weekly":{const X=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return`Weekly on ${(N.days_of_week||[]).map(fe=>X[fe]).join(", ")||"—"} at ${$}`}case"monthly":return N.day_of_month?`Monthly on day ${N.day_of_month} at ${$}`:`Monthly on the ${["First","Second","Third","Fourth","Fifth"][(N.nth||1)-1]} ${["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][N.dow_for_monthly||1]} at ${$}`;case"yearly":return`Yearly on ${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][(N.month||1)-1]} ${N.day_of_month||1} at ${$}`;case"cron":return`Custom cron: ${N.cron||"* * * * *"}`}return null}),O=async()=>(G.value?t.schedule={...G.value}:t.schedule&&delete t.schedule,!0);re(()=>d.show,async N=>{N&&(Object.assign(t,{name:"",description:"",assigned_to_user_id:null,due_date:null,status:"To Do",task_type_id:null,milestone_id:null,project_id:d.projectId,priority:"medium",needs_approval:!1,tags:[],tags_data:[]}),y.value=!1,R.value=!1,B.value=!1,x.value=!1,d.projectId?await C(d.projectId):await D())},{immediate:!0}),re(()=>t.description,N=>{N.length<10&&(t.milestone_id=null)}),re(()=>t.milestone_id,()=>{t.due_date=null}),re(()=>t.due_date,()=>{t.assigned_to_user_id=null}),re(()=>t.assigned_to_user_id,()=>{t.task_type_id=null}),re(()=>t.task_type_id,()=>{t.priority="medium"}),re(()=>t.project_id,async N=>{N?await C(N):(g.value=[],b.value=[],r.value=[])});const D=async()=>{o.value=!0;try{const N=await window.axios.get("/api/projects-simplified");m.value=N.data.map($=>({value:$.id,label:$.name}))}catch(N){console.error("Error fetching projects:",N),m.value=[]}finally{o.value=!1}},C=async N=>{if(N){a.value=!0,n.value=!0,v.value=!0;try{const[$,X,K]=await Promise.all([window.axios.get(`/api/projects/${N}/users`),window.axios.get("/api/task-types"),window.axios.get(`/api/projects/${N}/milestones`)]);g.value=$.data.map(fe=>({value:fe.id,label:fe.name})),b.value=X.data.map(fe=>({value:fe.id,label:fe.name})),r.value=K.data}catch($){console.error("Error fetching associated task data:",$),g.value=[],b.value=[],r.value=[]}finally{a.value=!1,n.value=!1,v.value=!1}}},Q=F(()=>new Date().toISOString().split("T")[0]),oe=F(()=>{if(!t.milestone_id)return"";const N=r.value.find($=>$.id===t.milestone_id);return!N||!N.completion_date?"":N.completion_date.split("T")[0]}),W=T([]),te=N=>{W.value=Array.from(N.target.files||[])},H=async N=>{if(!W.value.length)return;const $=new FormData;W.value.forEach((X,K)=>$.append(`files[${K}]`,X)),$.append("model_type","Task"),$.append("model_id",N);try{await window.axios.post("/api/files",$,{headers:{"Content-Type":"multipart/form-data"}}),be("Files uploaded to Google Drive.")}catch(X){console.error("Failed to upload task files",X),ue("Failed to upload files.")}},de=async N=>{var $,X,K;try{const fe=(N==null?void 0:N.id)||(($=N==null?void 0:N.task)==null?void 0:$.id)||((X=N==null?void 0:N.data)==null?void 0:X.id);fe&&(await H(fe),!(N!=null&&N.attached_schedule_id||(K=N==null?void 0:N.data)!=null&&K.attached_schedule_id)&&G.value&&await I("task",fe))}finally{G.value=null,s("saved",N),s("close"),W.value=[]}},me=()=>{s("close")},he=()=>{t.project_id?M.value=!0:alert("Please select a project before adding a milestone.")},Ve=N=>{M.value=!1,N&&N.id&&N.name&&(r.value.push(N),t.milestone_id=N.id)},Me=F(()=>g.value),xe=F(()=>b.value),Ae=F(()=>r.value);return(N,$)=>(l(),i(Z,null,[c(De,{show:u.show,title:Cs,"api-endpoint":Ss,"http-method":Gs,"form-data":t,"submit-button-text":Ps,"success-message":js,"before-submit":O,onClose:me,onSubmitted:de,"max-width":"4xl"},{default:k(({errors:X})=>[e("div",null,[u.projectId?A("",!0):(l(),i("div",ts,[c(ge,{id:"task-project",modelValue:t.project_id,"onUpdate:modelValue":$[0]||($[0]=K=>t.project_id=K),options:m.value,"value-key":"value","label-key":"label",placeholder:"Select a project",required:!0},null,8,["modelValue","options"]),c(le,{message:X.project_id?X.project_id[0]:"",class:"mt-2"},null,8,["message"])])),t.project_id?(l(),i("div",as,[e("div",ls,[c(ye,{id:"task-name",modelValue:t.name,"onUpdate:modelValue":$[1]||($[1]=K=>t.name=K),type:"text",class:"block w-full text-xl font-semibold border-gray-200",placeholder:"Task Title",required:""},null,8,["modelValue"]),c(le,{message:X.name?X.name[0]:"",class:"mt-2"},null,8,["message"]),t.name?(l(),i("div",ss,[L(e("textarea",{id:"task-description","onUpdate:modelValue":$[2]||($[2]=K=>t.description=K),class:"flex-grow w-full rounded-md border-gray-200 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",placeholder:"Add a description..."},null,512),[[ce,t.description]]),c(le,{message:X.description?X.description[0]:"",class:"mt-2"},null,8,["message"]),t.name&&t.description.length<10?(l(),i("p",os," Enter at least 10 characters to continue. ")):A("",!0)])):A("",!0)]),e("div",is,[t.description.length>=10?(l(),i("div",rs,[e("div",ns,[e("div",us,[$[21]||($[21]=e("svg",{class:"h-5 w-5 text-gray-500 flex-shrink-0",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 20.25h12m-7.5-3.75v3.75m.75-12.75l3 3m0 0l3-3m-3 3v11.25m-4.5 0L7.5 21m0 0H6"})],-1)),e("div",ds,[c(ge,{id:"task-milestone",modelValue:t.milestone_id,"onUpdate:modelValue":$[3]||($[3]=K=>t.milestone_id=K),options:Ae.value,"value-key":"id","label-key":"name",placeholder:"Select Milestone",class:"flex-grow",required:""},null,8,["modelValue","options"]),e("button",{type:"button",onClick:he,disabled:!t.project_id||v.value,class:"p-2 text-sm font-medium text-blue-600 bg-blue-50 rounded-md hover:bg-blue-100 disabled:opacity-50",title:"Add New Milestone"},$[20]||($[20]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4v16m8-8H4"})],-1)]),8,cs)])]),c(le,{message:X.milestone_id?X.milestone_id[0]:"",class:"mt-2"},null,8,["message"]),e("div",ms,[$[22]||($[22]=e("svg",{class:"h-5 w-5 text-gray-500 flex-shrink-0",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 9.563C9 9.252 9.252 9 9.563 9h4.874c.311 0 .563.252.563.563v4.874c0 .311-.252.563-.563.563H9.564A.562.562 0 019 14.437V9.564z"})],-1)),c(ge,{id:"task-status",modelValue:t.status,"onUpdate:modelValue":$[4]||($[4]=K=>t.status=K),options:f.map(K=>({value:K,label:K})),"value-key":"value","label-key":"label",class:"flex-grow"},null,8,["modelValue","options"])])]),t.milestone_id?(l(),i("div",vs,[$[23]||($[23]=e("svg",{class:"h-5 w-5 text-gray-500 flex-shrink-0",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5"})],-1)),c(ye,{id:"task-due-date",modelValue:t.due_date,"onUpdate:modelValue":$[5]||($[5]=K=>t.due_date=K),type:"date",class:"flex-grow",min:Q.value,max:oe.value},null,8,["modelValue","min","max"])])):A("",!0),t.due_date?(l(),i("div",ps,[$[24]||($[24]=e("svg",{class:"h-5 w-5 text-gray-500 flex-shrink-0",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"})],-1)),c(ge,{id:"task-assigned-to",modelValue:t.assigned_to_user_id,"onUpdate:modelValue":$[6]||($[6]=K=>t.assigned_to_user_id=K),options:Me.value,"value-key":"value","label-key":"label",placeholder:"Unassigned",class:"flex-grow","allow-empty":!0},null,8,["modelValue","options"])])):A("",!0),t.assigned_to_user_id?(l(),i("div",fs,[$[25]||($[25]=e("svg",{class:"h-5 w-5 text-gray-500 flex-shrink-0",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.568 3H5.25A2.25 2.25 0 003 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 005.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 009.568 3z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 6h.008v.008H6V6z"})],-1)),c(ge,{id:"task-type",modelValue:t.task_type_id,"onUpdate:modelValue":$[7]||($[7]=K=>t.task_type_id=K),options:xe.value,"value-key":"value","label-key":"label",placeholder:"Select Type",class:"flex-grow",required:""},null,8,["modelValue","options"])])):A("",!0),t.task_type_id?(l(),i("div",gs,[c(q,{value:"Priority"}),e("div",bs,[e("button",{type:"button",onClick:$[8]||($[8]=K=>t.priority="low"),class:J(["px-3 py-1 text-sm rounded-md w-full flex items-center justify-center gap-2",t.priority==="low"?"bg-white shadow":"text-gray-600 hover:bg-gray-200"])},$[26]||($[26]=[e("svg",{class:"h-4 w-4 text-green-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 13.5L12 21m0 0l-7.5-7.5M12 21V3"})],-1),_(" Low ",-1)]),2),e("button",{type:"button",onClick:$[9]||($[9]=K=>t.priority="medium"),class:J(["px-3 py-1 text-sm rounded-md w-full flex items-center justify-center gap-2",t.priority==="medium"?"bg-white shadow":"text-gray-600 hover:bg-gray-200"])},$[27]||($[27]=[e("svg",{class:"h-4 w-4 text-yellow-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 9h16.5m-16.5 6.75h16.5"})],-1),_(" Medium ",-1)]),2),e("button",{type:"button",onClick:$[10]||($[10]=K=>t.priority="high"),class:J(["px-3 py-1 text-sm rounded-md w-full flex items-center justify-center gap-2",t.priority==="high"?"bg-white shadow":"text-gray-600 hover:bg-gray-200"])},$[28]||($[28]=[e("svg",{class:"h-4 w-4 text-red-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.5 10.5L12 3m0 0l7.5 7.5M12 3v18"})],-1),_(" High ",-1)]),2)])])):A("",!0)])):A("",!0)])])):A("",!0),t.description.length>=10?(l(),i("div",ys,[e("div",hs,[y.value?(l(),i("div",ks,[c(Mt,{modelValue:t.tags,"onUpdate:modelValue":$[11]||($[11]=K=>t.tags=K),initialTags:t.tags_data,label:"Tags",placeholder:"Add tags...",error:X.tags?X.tags[0]:"",disabled:!t.project_id},null,8,["modelValue","initialTags","error","disabled"])])):A("",!0),R.value?(l(),i("div",ws,[c(q,{for:"task-files",value:"Attachments"}),e("input",{id:"task-files",type:"file",class:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-violet-50 file:text-violet-700 hover:file:bg-violet-100",multiple:"",onChange:te},null,32)])):A("",!0),x.value?(l(),i("div",xs,[L(e("input",{id:"needs-approval",type:"checkbox","onUpdate:modelValue":$[12]||($[12]=K=>t.needs_approval=K),class:"h-4 w-4 text-indigo-600 border-gray-300 rounded"},null,512),[[xt,t.needs_approval]]),$[29]||($[29]=e("label",{for:"needs-approval",class:"ml-2 block text-sm text-gray-700"},"This task needs approval",-1))])):A("",!0),B.value?(l(),i("div",_s,[e("div",null,[c(q,{value:"Schedule"}),E.value?(l(),i("div",As,"Planned: "+P(E.value),1)):(l(),i("div",Ts,"No schedule attached"))]),e("div",Ms,[e("button",{type:"button",onClick:$[13]||($[13]=(...K)=>U(j)&&U(j)(...K)),class:"px-3 py-2 text-sm font-medium text-indigo-600 bg-indigo-50 rounded-md hover:bg-indigo-100"},P(E.value?"Edit Schedule":"Add Schedule"),1),U(G)?(l(),i("button",{key:0,type:"button",onClick:$[14]||($[14]=K=>G.value=null),class:"px-3 py-2 text-sm font-medium text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200"},"Clear")):A("",!0)])])):A("",!0)]),e("div",$s,[e("button",{type:"button",onClick:$[15]||($[15]=K=>y.value=!y.value),class:J(["flex items-center gap-1 text-sm text-gray-600 hover:text-black bg-gray-100 hover:bg-gray-200 px-2 py-1 rounded-md transition-colors",{"bg-gray-300":y.value}])},$[30]||($[30]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 7h.01M7 3h5a2 2 0 012 2v5a2 2 0 01-2 2H7a2 2 0 01-2-2V5a2 2 0 012-2zm0 0v11a2 2 0 002 2h5a2 2 0 002-2v-5a2 2 0 00-2-2H7z"})],-1),_("Tag",-1)]),2),e("button",{type:"button",onClick:$[16]||($[16]=K=>R.value=!R.value),class:J(["flex items-center gap-1 text-sm text-gray-600 hover:text-black bg-gray-100 hover:bg-gray-200 px-2 py-1 rounded-md transition-colors",{"bg-gray-300":R.value}])},$[31]||($[31]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})],-1),_("Attachment",-1)]),2),e("button",{type:"button",onClick:$[17]||($[17]=K=>x.value=!x.value),class:J(["flex items-center gap-1 text-sm text-gray-600 hover:text-black bg-gray-100 hover:bg-gray-200 px-2 py-1 rounded-md transition-colors",{"bg-gray-300":x.value}])},$[32]||($[32]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),_("Approval",-1)]),2),e("button",{type:"button",onClick:$[18]||($[18]=K=>B.value=!B.value),class:J(["flex items-center gap-1 text-sm text-gray-600 hover:text-black bg-gray-100 hover:bg-gray-200 px-2 py-1 rounded-md transition-colors",{"bg-gray-300":B.value}])},$[33]||($[33]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),_("Schedule",-1)]),2)])])):A("",!0)])]),_:1},8,["show","form-data"]),c(Xl,{show:U(w),title:"Add Schedule",onClose:U(z),onSave:U(ee)},null,8,["show","onClose","onSave"]),c(jl,{show:M.value,"project-id":t.project_id,onClose:$[19]||($[19]=X=>M.value=!1),onSaved:Ve},null,8,["show","project-id"])],64))}},Is={class:"space-y-4"},Vs={class:"mt-4"},Bs={class:"flex items-center space-x-6"},Ds={class:"inline-flex items-center"},Ns={class:"inline-flex items-center"},Us={class:"inline-flex items-center"},zs={__name:"CreateForm",props:{show:{type:Boolean,default:!1},apiEndpoint:{type:String,required:!0}},emits:["close","resourceCreated"],setup(u,{emit:p}){const d=u,s=p,t=Ie({title:"",description:"",url:"",type:"website",thumbnail_url:"",visible_to_client:!0,visibility:"client",tags:[]}),f=[{value:"website",label:"Website"},{value:"youtube",label:"YouTube Video"},{value:"document",label:"Document"},{value:"image",label:"Image"},{value:"other",label:"Other"}],m=T(f);we(async()=>{try{const{data:o}=await se.get("/api/options/shareable_resource_types");Array.isArray(o)&&o.length&&(m.value=o)}catch{m.value=f}});const g=o=>{const a={title:o.title,description:o.description,url:o.url,type:o.type,thumbnail_url:o.thumbnail_url,visibility:o.visibility,tags:o.tags};if(Array.isArray(o.tags)&&o.tags.length){const n=o.tags.map(v=>typeof v=="object"&&v!==null?v.id:v).filter(Boolean);a.tag_ids=n}return a},b=o=>{s("resourceCreated",o),r()},r=()=>{t.title="",t.description="",t.url="",t.type="website",t.thumbnail_url="",t.visible_to_client=!0,t.tags=[],s("close")};return(o,a)=>(l(),V(De,{show:d.show,title:"Add New Shareable Resource",apiEndpoint:d.apiEndpoint,httpMethod:"post",formData:t,formatDataForApi:g,submitButtonText:"Create Resource",successMessage:"Shareable resource created successfully!",onSubmitted:b,onClose:r},{default:k(({errors:n})=>[e("div",Is,[e("div",null,[c(q,{for:"title",value:"Title",class:"mb-1"}),c(ye,{id:"title",type:"text",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:t.title,"onUpdate:modelValue":a[0]||(a[0]=v=>t.title=v),required:""},null,8,["modelValue"]),c(le,{message:n.title?n.title[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[c(q,{for:"url",value:"Resource URL",class:"mb-1"}),c(ye,{id:"url",type:"url",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:t.url,"onUpdate:modelValue":a[1]||(a[1]=v=>t.url=v),required:""},null,8,["modelValue"]),c(le,{message:n.url?n.url[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[c(q,{for:"type",value:"Resource Type",class:"mb-1"}),c(ge,{id:"type",modelValue:t.type,"onUpdate:modelValue":a[2]||(a[2]=v=>t.type=v),options:m.value,valueKey:"value",labelKey:"label",placeholder:"Select Resource Type",required:"",class:"mt-1 block w-full"},null,8,["modelValue","options"]),c(le,{message:n.type?n.type[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[c(q,{for:"thumbnail_url",value:"Thumbnail URL (Optional)",class:"mb-1"}),c(ye,{id:"thumbnail_url",type:"url",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:t.thumbnail_url,"onUpdate:modelValue":a[3]||(a[3]=v=>t.thumbnail_url=v)},null,8,["modelValue"]),c(le,{message:n.thumbnail_url?n.thumbnail_url[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[c(q,{for:"description",value:"Description (Optional)",class:"mb-1"}),L(e("textarea",{id:"description",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-lg shadow-sm mt-1 block w-full","onUpdate:modelValue":a[4]||(a[4]=v=>t.description=v),rows:"3"},null,512),[[ce,t.description]]),c(le,{message:n.description?n.description[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[c(Mt,{modelValue:t.tags,"onUpdate:modelValue":a[5]||(a[5]=v=>t.tags=v),label:"Associated Tags",placeholder:"Search or add tags",error:n.tags?n.tags[0]:""},null,8,["modelValue","error"])]),e("div",Vs,[c(q,{value:"Visibility",class:"mb-2"}),e("div",Bs,[e("label",Ds,[L(e("input",{type:"radio",class:"form-radio",value:"client","onUpdate:modelValue":a[6]||(a[6]=v=>t.visibility=v)},null,512),[[Re,t.visibility]]),a[9]||(a[9]=e("span",{class:"ml-2"},"Visible to Client",-1))]),e("label",Ns,[L(e("input",{type:"radio",class:"form-radio",value:"team","onUpdate:modelValue":a[7]||(a[7]=v=>t.visibility=v)},null,512),[[Re,t.visibility]]),a[10]||(a[10]=e("span",{class:"ml-2"},"Visible to Team",-1))]),e("label",Us,[L(e("input",{type:"radio",class:"form-radio",value:"private","onUpdate:modelValue":a[8]||(a[8]=v=>t.visibility=v)},null,512),[[Re,t.visibility]]),a[11]||(a[11]=e("span",{class:"ml-2"},"Private",-1))])]),c(le,{message:n.visibility?n.visibility[0]:"",class:"mt-2"},null,8,["message"])])])]),_:1},8,["show","apiEndpoint","formData"]))}},Ls=Ke(zs,[["__scopeId","data-v-9f619b0e"]]),Fs={key:0,class:"sidebar-wrapper"},Rs={class:"fixed inset-0 z-[100] flex pointer-events-none"},Os={class:"flex items-center justify-between p-4 border-b border-gray-200 bg-white rounded-tl-xl sticky top-0 z-20"},Ws={class:"text-xl font-semibold text-gray-900"},Hs={class:"flex-1 overflow-y-auto p-6 scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-gray-300 scrollbar-track-gray-100"},Ks={key:1,class:"p-4 border-t border-gray-200 bg-white sticky bottom-0 z-20"},qs={__name:"RightSidebar",props:{show:{type:Boolean,default:!1},title:{type:String,default:"Details"},initialWidth:{type:Number,default:50},minWidth:{type:Number,default:30},maxWidth:{type:Number,default:90}},emits:["close","update:show"],setup(u,{emit:p}){const d=u,s=p,t=T(d.initialWidth),f=T(!1),m=a=>{f.value=!0,document.addEventListener("pointermove",g),document.addEventListener("pointerup",b)},g=a=>{if(!f.value)return;const n=window.innerWidth,M=(n-a.clientX)/n*100,y=Math.max(d.minWidth,Math.min(d.maxWidth,M));t.value=y},b=()=>{f.value=!1,document.removeEventListener("pointermove",g),document.removeEventListener("pointerup",b)};re(()=>d.show,a=>{a?document.body.style.overflow="hidden":document.body.style.overflow=""},{immediate:!0});const r=()=>{s("update:show",!1),s("close")},o=F(()=>window.innerWidth<768);return re(o,a=>{a&&d.show?t.value=100:!a&&d.show&&(t.value=d.initialWidth)},{immediate:!0}),re(()=>d.show,a=>{a&&(o.value?t.value=100:t.value=d.initialWidth)}),(a,n)=>(l(),V(Yt,{to:"body"},[c(_t,{"enter-active-class":"transition ease-out duration-300 transform","enter-from-class":"translate-x-full","enter-to-class":"translate-x-0","leave-active-class":"transition ease-in duration-200 transform","leave-from-class":"translate-x-0","leave-to-class":"translate-x-full"},{default:k(()=>[u.show?(l(),i("div",Fs,[e("div",{class:"fixed inset-0 bg-gray-900 bg-opacity-50 transition-opacity z-[99]",onClick:r}),e("div",Rs,[e("div",{class:"relative ml-auto h-full bg-white shadow-xl flex flex-col rounded-l-xl pointer-events-auto",style:Jt({width:o.value?"100%":`${t.value}vw`})},[o.value?A("",!0):(l(),i("div",{key:0,class:"absolute left-0 top-0 h-full w-2 cursor-col-resize -ml-1 z-10",onPointerdown:m,title:"Drag to resize"},null,32)),e("div",Os,[e("h3",Ws,P(u.title),1),e("button",{onClick:r,class:"text-gray-400 hover:text-gray-600 transition-colors"},n[0]||(n[0]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("div",Hs,[$e(a.$slots,"content",{},void 0,!0)]),a.$slots.footer?(l(),i("div",Ks,[$e(a.$slots,"footer",{},void 0,!0)])):A("",!0)],4)])])):A("",!0)]),_:3})]))}},$t=Ke(qs,[["__scopeId","data-v-2d864577"]]),Js={class:"flex border-b border-gray-200"},Ys={key:0,class:"ml-2 px-2 py-1 text-xs font-bold bg-red-600 text-white rounded-full"},Qs={class:"p-4 space-y-2 overflow-y-auto"},Zs={key:0,class:"p-6 text-center text-gray-500"},Xs={key:0},eo={key:1},to=["onClick"],ao={class:"flex-1 min-w-0"},lo={class:"flex items-start justify-between gap-2 mb-1"},so={class:"flex-1 min-w-0"},oo={key:0,class:"text-base font-semibold text-gray-900 truncate"},io={key:1,class:"text-xs text-gray-500"},ro={key:0,class:"text-sm text-gray-600 mt-1 mb-2"},no={class:"flex items-center text-xs text-gray-500 font-medium"},uo={key:0},co={key:1,class:"mx-2"},mo={key:2},vo={__name:"NotificationsSidebar",setup(u){const p=F(()=>Oe.value.notifications),d=T("New"),s=F(()=>d.value==="New"?p.value.filter(g=>!g.isRead):p.value),t=async g=>{await ht(g.view_id);const b=g.task_id||f(g.url),r=g.project_id||m(g.url);b&&r?(kt(b,r),ct()):(console.warn("Could not open task sidebar. Falling back to opening URL in new tab."),g.url&&window.open(g.url,"_blank"))},f=g=>{const b=g.match(/\/task\/(\d+)/);return b?parseInt(b[1]):null},m=g=>{const b=g.match(/\/project\/(\d+)\//);return b?parseInt(b[1]):null};return(g,b)=>(l(),V($t,{show:U(Oe).show,"onUpdate:show":U(ct),title:"Notifications","initial-width":35,class:"z-[100]"},{content:k(()=>[e("div",Js,[e("button",{onClick:b[0]||(b[0]=r=>d.value="New"),class:J([{"border-blue-600 text-blue-600 font-semibold":d.value==="New","border-transparent text-gray-500 hover:text-gray-700":d.value!=="New"},"flex-1 py-4 px-1 text-center text-sm border-b-2 transition-colors duration-200"])},[b[2]||(b[2]=_(" New ",-1)),p.value.filter(r=>!r.isRead).length>0?(l(),i("span",Ys,P(p.value.filter(r=>!r.isRead).length),1)):A("",!0)],2),e("button",{onClick:b[1]||(b[1]=r=>d.value="All"),class:J([{"border-blue-600 text-blue-600 font-semibold":d.value==="All","border-transparent text-gray-500 hover:text-gray-700":d.value!=="All"},"flex-1 py-4 px-1 text-center text-sm border-b-2 transition-colors duration-200"])}," All ",2)]),e("div",Qs,[s.value.length===0?(l(),i("div",Zs,[d.value==="New"?(l(),i("span",Xs,"You have no new notifications.")):(l(),i("span",eo,"You have no notifications."))])):A("",!0),(l(!0),i(Z,null,ie(s.value,r=>(l(),i("div",{key:r.id,class:J(["bg-white rounded-xl shadow-sm p-4 flex items-start space-x-4 border border-gray-200 transition-all duration-200 hover:shadow-md cursor-pointer",{"bg-gray-50":r.isRead}]),onClick:o=>t(r)},[e("div",ao,[e("div",lo,[e("div",so,[r.title?(l(),i("h3",oo,P(r.title),1)):A("",!0),r.project_name?(l(),i("p",io,P(r.project_name),1)):A("",!0)])]),r.message?(l(),i("p",ro,P(r.message),1)):A("",!0),e("div",no,[r.due_date?(l(),i("span",uo,"Due: "+P(U(yt)(r.due_date)),1)):A("",!0),r.due_date&&r.priority?(l(),i("span",co,"•")):A("",!0),r.priority?(l(),i("span",mo,"Priority: "+P(r.priority),1)):A("",!0)])])],10,to))),128))])]),_:1},8,["show","onUpdate:show"]))}},po={class:"space-y-4"},fo={key:0,class:"text-red-600 text-xs mt-1"},go={key:0,class:"text-red-600 text-xs mt-1"},bo={key:0,class:"text-red-600 text-xs mt-1"},yo={__name:"KudoModal",props:{show:{type:Boolean,default:!1}},emits:["close","submitted"],setup(u,{emit:p}){const d=p,s=T([]),t=T([]),f=Ie({recipient_id:"",project_id:"",comment:""}),m=T({}),g=async()=>{try{const{data:a}=await window.axios.get("/api/projects-simplified");s.value=(a||[]).map(n=>({value:n.id,label:n.name}))}catch{s.value=[]}},b=async a=>{if(t.value=[],!!a)try{const{data:n}=await window.axios.get(`/api/projects/${a}/users`);t.value=(n||[]).map(v=>({value:v.id,label:`${v.name} (${v.email})`}))}catch{t.value=[]}};re(()=>f.project_id,a=>{a&&b(a)}),we(()=>{g()});const r=()=>{f.recipient_id="",f.project_id="",f.comment="",m.value={}},o=a=>{r(),d("submitted",a)};return(a,n)=>(l(),V(De,{show:u.show,title:"Give a Kudo ✨","api-endpoint":"/api/kudos","http-method":"post","form-data":f,"submit-button-text":"Submit Kudo","success-message":"Kudo submitted! Pending approval.",onClose:n[3]||(n[3]=v=>a.$emit("close")),onSubmitted:o},{default:k(({errors:v})=>[e("div",po,[e("div",null,[n[4]||(n[4]=e("label",{class:"block text-sm font-medium text-gray-700"},"Project",-1)),c(ge,{options:s.value,modelValue:f.project_id,"onUpdate:modelValue":n[0]||(n[0]=M=>f.project_id=M),placeholder:"Select a project..."},null,8,["options","modelValue"]),v.project_id?(l(),i("p",fo,P(v.project_id[0]),1)):A("",!0)]),e("div",null,[n[5]||(n[5]=e("label",{class:"block text-sm font-medium text-gray-700"},"Recipient",-1)),c(ge,{options:t.value,modelValue:f.recipient_id,"onUpdate:modelValue":n[1]||(n[1]=M=>f.recipient_id=M),placeholder:"Select a teammate..."},null,8,["options","modelValue"]),v.recipient_id?(l(),i("p",go,P(v.recipient_id[0]),1)):A("",!0)]),e("div",null,[n[6]||(n[6]=e("label",{class:"block text-sm font-medium text-gray-700"},"Comment",-1)),L(e("textarea",{"onUpdate:modelValue":n[2]||(n[2]=M=>f.comment=M),rows:"4",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",placeholder:"e.g., Thank you for helping with the last-minute changes!"},null,512),[[ce,f.comment]]),v.comment?(l(),i("p",bo,P(v.comment[0]),1)):A("",!0)])])]),_:1},8,["show","form-data"]))}},ho={class:"flex items-center p-4 h-16 border-b border-gray-700"},ko={key:0,class:"text-xl font-semibold flex-1 truncate"},wo=["title"],xo={key:0,class:"p-4 border-b border-gray-700"},_o={class:"relative"},Ao={key:1,class:"flex-1 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-500 scrollbar-track-gray-700 p-4"},To={key:0,class:"mb-4"},Mo={class:"ml-2 mt-2 space-y-1"},$o=["onClick"],Co={class:"text-sm font-medium text-gray-300 truncate"},So={class:"ml-4 mt-1 space-y-1"},Go={class:"truncate"},Po={key:1,class:"mb-4"},jo={class:"ml-2 mt-2 space-y-1"},Eo=["onClick"],Io={class:"text-sm font-medium text-gray-300 truncate"},Vo={class:"ml-4 mt-1 space-y-1"},Bo={class:"truncate"},Do={key:2,class:"mb-4"},No={class:"ml-2 mt-2 space-y-1"},Uo={class:"truncate"},zo={key:3,class:"mb-4"},Lo={class:"ml-2 mt-2 space-y-1"},Fo={class:"truncate"},Ro={key:4,class:"text-gray-400 text-sm text-center py-4"},Oo={key:5,class:"text-gray-400 text-sm text-center py-4"},Wo={key:2,class:"flex flex-col items-center pt-4 space-y-4"},Ho={key:0,class:"text-gray-400 text-xs text-center px-2"},Ko={__name:"LeftSidebar",props:{allProjects:{type:Array,default:()=>[]},activeProjectId:{type:Number,default:null}},emits:["project-selected"],setup(u,{emit:p}){const d=u,s=p,t=T(localStorage.getItem("leftSidebarCollapsed")!=="false"),f=T(""),m=T({}),g=F(()=>{const x=new Set;return d.allProjects.forEach(w=>{w.project_type&&x.add(w.project_type)}),Array.from(x).sort()}),b=F(()=>{const x=new Set;return d.allProjects.forEach(w=>{Array.isArray(w.tags)&&w.tags.forEach(G=>x.add(G))}),Array.from(x).sort()}),r=F(()=>{if(!f.value)return d.allProjects;const x=f.value.toLowerCase();return d.allProjects.filter(w=>{var G,j,z;return w.name.toLowerCase().includes(x)||((G=w.description)==null?void 0:G.toLowerCase().includes(x))||((j=w.project_type)==null?void 0:j.toLowerCase().includes(x))||Array.isArray(w.tags)&&w.tags.some(ee=>ee.toLowerCase().includes(x))||((z=w.status)==null?void 0:z.toLowerCase().includes(x))})}),o=F(()=>{const x={};r.value.forEach(w=>{w.project_type&&w.status==="active"&&(x[w.project_type]||(x[w.project_type]=[]),x[w.project_type].push(w))});for(const w in x)x[w].sort((G,j)=>G.name.localeCompare(j.name));return x}),a=F(()=>{const x={};r.value.forEach(w=>{Array.isArray(w.tags)&&w.tags.length>0&&w.tags.forEach(G=>{x[G]||(x[G]=[]),x[G].push(w)})});for(const w in x)x[w]=[...new Set(x[w])].sort((G,j)=>G.name.localeCompare(j.name));return x}),n=F(()=>r.value.filter(x=>x.status!=="active").sort((x,w)=>x.name.localeCompare(w.name))),v=F(()=>r.value.filter(x=>!x.project_type&&(!Array.isArray(x.tags)||x.tags.length===0)).sort((x,w)=>x.name.localeCompare(w.name)));re(()=>d.allProjects,()=>{g.value.forEach(x=>{const w=`type-${x}`;m.value[w]===void 0&&(m.value[w]=!0)}),b.value.forEach(x=>{const w=`tag-${x}`;m.value[w]===void 0&&(m.value[w]=!0)}),m.value["main-types"]===void 0&&(m.value["main-types"]=!1),m.value["main-tags"]===void 0&&(m.value["main-tags"]=!1),m.value["inactive-projects"]===void 0&&(m.value["inactive-projects"]=!1),m.value.uncategorized===void 0&&(m.value.uncategorized=!1)},{immediate:!0}),re(t,x=>{localStorage.setItem("leftSidebarCollapsed",x)});const M=()=>{t.value=!t.value},y=x=>{m.value[x]=!m.value[x]},R=x=>{s("project-selected",x)},B=()=>{f.value=""};return(x,w)=>(l(),i("div",{class:J({"w-64":!t.value,"w-16":t.value,"min-w-16":!0,"bg-gray-800 text-white flex flex-col transition-all duration-300 ease-in-out shrink-0 h-screen overflow-hidden":!0})},[e("div",ho,[t.value?A("",!0):(l(),i("h2",ko,"Projects")),e("button",{onClick:M,class:"p-2 rounded-full hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500",title:t.value?"Expand Sidebar":"Collapse Sidebar"},[(l(),i("svg",{class:J(["w-6 h-6 text-gray-400 transform transition-transform duration-300",{"rotate-180":t.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},w[5]||(w[5]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"},null,-1)]),2))],8,wo)]),t.value?A("",!0):(l(),i("div",xo,[e("div",_o,[L(e("input",{type:"text","onUpdate:modelValue":w[0]||(w[0]=G=>f.value=G),placeholder:"Search all projects...",class:"w-full p-2 rounded-md bg-gray-700 border border-gray-600 text-white placeholder-gray-400 focus:ring-indigo-500 focus:border-indigo-500 text-sm"},null,512),[[ce,f.value]]),f.value?(l(),i("button",{key:0,onClick:B,class:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-200",title:"Clear search"},w[6]||(w[6]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))):A("",!0)])])),t.value?(l(),i("div",Wo,[(l(!0),i(Z,null,ie(d.allProjects,G=>(l(),V(U(Te),{key:G.id,href:x.route("projects.show",G.id),onClick:j=>R(G.id),class:J({"w-10 h-10 rounded-full flex items-center justify-center text-xs font-bold transition-all duration-200":!0,"bg-indigo-600 text-white":G.id===u.activeProjectId,"bg-gray-700 text-gray-300 hover:bg-gray-600":G.id!==u.activeProjectId}),title:G.name},{default:k(()=>[_(P(G.name.charAt(0).toUpperCase()),1)]),_:2},1032,["href","onClick","class","title"]))),128)),u.allProjects.length===0?(l(),i("div",Ho," No Projects ")):A("",!0)])):(l(),i("div",Ao,[Object.keys(o.value).length>0?(l(),i("div",To,[e("div",{class:"flex items-center justify-between cursor-pointer py-2 hover:bg-gray-700 rounded-md px-2",onClick:w[1]||(w[1]=G=>y("main-types"))},[w[8]||(w[8]=e("h3",{class:"text-sm font-semibold text-gray-400"},"Active Projects by Type",-1)),(l(),i("svg",{class:J(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!m.value["main-types"]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},w[7]||(w[7]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))]),L(e("div",Mo,[(l(!0),i(Z,null,ie(o.value,(G,j)=>(l(),i("div",{key:j},[e("div",{class:"flex items-center justify-between cursor-pointer py-1 hover:bg-gray-700 rounded-md px-2",onClick:z=>y(`type-${j}`)},[e("h4",Co,P(j),1),(l(),i("svg",{class:J(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!m.value[`type-${j}`]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},w[9]||(w[9]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))],8,$o),L(e("ul",So,[(l(!0),i(Z,null,ie(G,z=>(l(),i("li",{key:z.id},[c(U(Te),{href:x.route("projects.show",z.id),onClick:ee=>R(z.id),class:J({"block w-full text-left px-3 py-2 rounded-md transition-colors":!0,"bg-indigo-600 text-white":z.id===u.activeProjectId,"hover:bg-gray-700 text-gray-200":z.id!==u.activeProjectId,"font-bold":z.id===u.activeProjectId})},{default:k(()=>[e("span",Go,P(z.name),1)]),_:2},1032,["href","onClick","class"])]))),128))],512),[[Ge,!m.value[`type-${j}`]]])]))),128))],512),[[Ge,!m.value["main-types"]]])])):A("",!0),Object.keys(a.value).length>0?(l(),i("div",Po,[e("div",{class:"flex items-center justify-between cursor-pointer py-2 hover:bg-gray-700 rounded-md px-2",onClick:w[2]||(w[2]=G=>y("main-tags"))},[w[11]||(w[11]=e("h3",{class:"text-sm font-semibold text-gray-400"},"Projects by Tag",-1)),(l(),i("svg",{class:J(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!m.value["main-tags"]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},w[10]||(w[10]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))]),L(e("div",jo,[(l(!0),i(Z,null,ie(a.value,(G,j)=>(l(),i("div",{key:j},[e("div",{class:"flex items-center justify-between cursor-pointer py-1 hover:bg-gray-700 rounded-md px-2",onClick:z=>y(`tag-${j}`)},[e("h4",Io,P(j),1),(l(),i("svg",{class:J(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!m.value[`tag-${j}`]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},w[12]||(w[12]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))],8,Eo),L(e("ul",Vo,[(l(!0),i(Z,null,ie(G,z=>(l(),i("li",{key:z.id},[c(U(Te),{href:x.route("projects.show",z.id),onClick:ee=>R(z.id),class:J({"block w-full text-left px-3 py-2 rounded-md transition-colors":!0,"bg-indigo-600 text-white":z.id===u.activeProjectId,"hover:bg-gray-700 text-gray-200":z.id!==u.activeProjectId,"font-bold":z.id===u.activeProjectId})},{default:k(()=>[e("span",Bo,P(z.name),1)]),_:2},1032,["href","onClick","class"])]))),128))],512),[[Ge,!m.value[`tag-${j}`]]])]))),128))],512),[[Ge,!m.value["main-tags"]]])])):A("",!0),n.value.length>0?(l(),i("div",Do,[e("div",{class:"flex items-center justify-between cursor-pointer py-2 hover:bg-gray-700 rounded-md px-2",onClick:w[3]||(w[3]=G=>y("inactive-projects"))},[w[14]||(w[14]=e("h3",{class:"text-sm font-semibold text-gray-400"},"Inactive Projects",-1)),(l(),i("svg",{class:J(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!m.value["inactive-projects"]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},w[13]||(w[13]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))]),L(e("ul",No,[(l(!0),i(Z,null,ie(n.value,G=>(l(),i("li",{key:G.id},[c(U(Te),{href:x.route("projects.show",G.id),onClick:j=>R(G.id),class:J({"block w-full text-left px-3 py-2 rounded-md transition-colors":!0,"bg-indigo-600 text-white":G.id===u.activeProjectId,"hover:bg-gray-700 text-gray-200":G.id!==u.activeProjectId,"font-bold":G.id===u.activeProjectId})},{default:k(()=>[e("span",Uo,P(G.name)+" ("+P(G.status.replace("_"," "))+")",1)]),_:2},1032,["href","onClick","class"])]))),128))],512),[[Ge,!m.value["inactive-projects"]]])])):A("",!0),v.value.length>0?(l(),i("div",zo,[e("div",{class:"flex items-center justify-between cursor-pointer py-2 hover:bg-gray-700 rounded-md px-2",onClick:w[4]||(w[4]=G=>y("uncategorized"))},[w[16]||(w[16]=e("h3",{class:"text-sm font-semibold text-gray-400"},"Uncategorized",-1)),(l(),i("svg",{class:J(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!m.value.uncategorized}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},w[15]||(w[15]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))]),L(e("ul",Lo,[(l(!0),i(Z,null,ie(v.value,G=>(l(),i("li",{key:G.id},[c(U(Te),{href:x.route("projects.show",G.id),onClick:j=>R(G.id),class:J({"block w-full text-left px-3 py-2 rounded-md transition-colors":!0,"bg-indigo-600 text-white":G.id===u.activeProjectId,"hover:bg-gray-700 text-gray-200":G.id!==u.activeProjectId,"font-bold":G.id===u.activeProjectId})},{default:k(()=>[e("span",Fo,P(G.name),1)]),_:2},1032,["href","onClick","class"])]))),128))],512),[[Ge,!m.value.uncategorized]])])):A("",!0),r.value.length===0?(l(),i("div",Ro," No projects found matching your search. ")):u.allProjects.length===0&&!f.value?(l(),i("div",Oo," No projects available. ")):A("",!0)]))],2))}},qo=Ke(Ko,[["__scopeId","data-v-417d431f"]]),Jo={class:"relative"},nt={__name:"Dropdown",props:{align:{type:String,default:"right"},width:{type:String,default:"48"},contentClasses:{type:String,default:"py-1 bg-white"}},setup(u){const p=u,d=g=>{m.value&&g.key==="Escape"&&(m.value=!1)};we(()=>document.addEventListener("keydown",d)),Xe(()=>document.removeEventListener("keydown",d));const s=F(()=>{const g={48:"w-48",64:"w-64",72:"w-72",80:"w-80",96:"w-96",full:"w-full",screen:"w-screen",auto:""},b=p.width.toString();return g[b]??g[48]}),t=F(()=>p.width.toString()==="screen"),f=F(()=>p.align==="left"?"ltr:origin-top-left rtl:origin-top-right start-0":p.align==="right"?"ltr:origin-top-right rtl:origin-top-left end-0":"origin-top"),m=T(!1);return(g,b)=>(l(),i("div",Jo,[e("div",{onClick:b[0]||(b[0]=r=>m.value=!m.value)},[$e(g.$slots,"trigger")]),L(e("div",{class:"fixed inset-0 z-40",onClick:b[1]||(b[1]=r=>m.value=!1)},null,512),[[Ge,m.value]]),c(_t,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:k(()=>[L(e("div",{class:J(["z-50 mt-2 rounded-md shadow-lg",t.value?"fixed left-0 right-0":"absolute",f.value,s.value]),style:{display:"none"},onClick:b[2]||(b[2]=r=>m.value=!1)},[e("div",{class:J(["rounded-md ring-1 ring-black ring-opacity-5",u.contentClasses])},[$e(g.$slots,"content")],2)],2),[[Ge,m.value]])]),_:3})]))}},ae={__name:"DropdownLink",props:{href:{type:String,required:!0},method:{type:String,default:"get"},as:{type:String,default:"a"}},setup(u){return(p,d)=>(l(),V(U(Te),At({href:u.href,method:u.method,as:u.as},p.$attrs,{class:"block w-full px-4 py-2 text-start text-sm leading-5 text-gray-700 transition duration-150 ease-in-out hover:bg-gray-100 focus:bg-gray-100 focus:outline-none"}),{default:k(()=>[$e(p.$slots,"default")]),_:3},16,["href","method","as"]))}},_e={__name:"NavLink",props:{href:{type:String,required:!0},active:{type:Boolean}},setup(u){const p=u,d=F(()=>p.active?"inline-flex items-center px-1 pt-1 border-b-2 border-indigo-400 text-sm font-medium leading-5 text-gray-900 focus:outline-none focus:border-indigo-700 transition duration-150 ease-in-out":"inline-flex items-center px-1 pt-1 border-b-2 border-transparent text-sm font-medium leading-5 text-gray-500 hover:text-gray-700 hover:border-gray-300 focus:outline-none focus:text-gray-700 focus:border-gray-300 transition duration-150 ease-in-out");return(s,t)=>(l(),V(U(Te),{href:u.href,class:J(d.value)},{default:k(()=>[$e(s.$slots,"default")]),_:3},8,["href","class"]))}};/**
 * @license lucide-vue-next v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yo=it("award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-vue-next v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qo=it("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);/**
 * @license lucide-vue-next v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zo=it("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);function bt(u,p){return l(),i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M8.75 1A2.75 2.75 0 0 0 6 3.75v.443c-.795.077-1.584.176-2.365.298a.75.75 0 1 0 .23 1.482l.149-.022.841 10.518A2.75 2.75 0 0 0 7.596 19h4.807a2.75 2.75 0 0 0 2.742-2.53l.841-10.52.149.023a.75.75 0 0 0 .23-1.482A41.03 41.03 0 0 0 14 4.193V3.75A2.75 2.75 0 0 0 11.25 1h-2.5ZM10 4c.84 0 1.673.025 2.5.075V3.75c0-.69-.56-1.25-1.25-1.25h-2.5c-.69 0-1.25.56-1.25 1.25v.325C8.327 4.025 9.16 4 10 4ZM8.58 7.72a.75.75 0 0 0-1.5.06l.3 7.5a.75.75 0 1 0 1.5-.06l-.3-7.5Zm4.34.06a.75.75 0 1 0-1.5-.06l-.3 7.5a.75.75 0 1 0 1.5.06l.3-7.5Z","clip-rule":"evenodd"})])}const Xo={class:"hidden sm:flex sm:items-center"},ei={class:"mx-auto w-full max-w-6xl"},ti={class:"grid grid-cols-2 md:grid-cols-4 gap-8"},ai={class:"space-y-1"},li={class:"space-y-1"},si={class:"space-y-1"},oi={class:"space-y-1"},ii={class:"p-4"},ri={class:"flex justify-between items-center mb-4"},ni={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ui={class:"border rounded-lg p-4"},di={class:"space-y-3"},ci={class:"flex justify-end"},mi={class:"border rounded-lg p-4"},vi={class:"space-y-3"},pi={class:"flex items-center gap-3 mt-2"},fi={class:"flex items-center gap-2 text-sm"},gi={class:"flex items-center gap-2 text-sm"},bi={key:0},yi={key:1},hi={class:"mt-3"},ki={class:"flex justify-end"},wi={__name:"AdminDropdown",setup(u){const p=T(!1),d=T(!1),s=Ie({sets:[],models:[],categoryName:"",setMode:"existing",selectedSetId:null,newSetName:"",newSetModels:[],setName:"",setModels:[],errors:{}}),t=async()=>{p.value=!0,await Promise.all([f(),m()])},f=async()=>{try{const{data:o}=await window.axios.get("/api/category-sets");s.sets=o.map(a=>({value:a.id,label:a.name,raw:a}))}catch(o){console.error("Failed to load sets",o)}},m=async()=>{try{const{data:o}=await window.axios.get("/api/models/available");s.models=o}catch(o){console.error("Failed to load models",o)}},g=()=>{s.errors={}},b=async()=>{var o;g(),d.value=!0;try{const a={name:s.setName,allowed_models:s.setModels},{data:n}=await window.axios.post("/api/category-sets",a);await f(),s.setName="",s.setModels=[]}catch(a){((o=a.response)==null?void 0:o.status)===422&&(s.errors=a.response.data.errors||{})}finally{d.value=!1}},r=async()=>{var o;g(),d.value=!0;try{const a={name:s.categoryName};s.setMode==="existing"?a.category_set_id=s.selectedSetId:(a.new_set_name=s.newSetName,a.allowed_models=s.newSetModels);const{data:n}=await window.axios.post("/api/categories",a);await f(),s.categoryName="",s.selectedSetId=null,s.newSetName="",s.newSetModels=[],s.setMode="existing"}catch(a){((o=a.response)==null?void 0:o.status)===422&&(s.errors=a.response.data.errors||{})}finally{d.value=!1}};return(o,a)=>{const n=ot("permission");return l(),i(Z,null,[e("div",Xo,[c(nt,{align:"left",width:"screen","content-classes":"py-6 bg-white p-6 w-full shadow-lg"},{trigger:k(()=>a[10]||(a[10]=[e("span",{class:"inline-flex rounded-md"},[e("button",{type:"button",class:"inline-flex items-center rounded-md border border-transparent bg-white px-3 py-2 text-sm font-medium leading-4 text-gray-700 hover:text-gray-900 focus:outline-none"},[_(" Admin "),e("svg",{class:"ms-2 -me-0.5 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])])],-1)])),content:k(()=>[e("div",ei,[e("div",ti,[e("div",null,[a[16]||(a[16]=e("h4",{class:"text-xs font-semibold uppercase tracking-wider text-gray-500 mb-3"},"Management",-1)),e("div",ai,[L((l(),V(ae,{href:o.route("projects.index"),active:o.route().current("projects.index"),class:"!px-2 !py-1.5"},{default:k(()=>a[11]||(a[11]=[_("Projects",-1)])),_:1,__:[11]},8,["href","active"])),[[n,"manage_projects"]]),L((l(),V(ae,{href:o.route("clients.page"),active:o.route().current("clients.page"),class:"!px-2 !py-1.5"},{default:k(()=>a[12]||(a[12]=[_("Clients",-1)])),_:1,__:[12]},8,["href","active"])),[[n,"create_clients"]]),L((l(),V(ae,{href:o.route("users.page"),active:o.route().current("users.page"),class:"!px-2 !py-1.5"},{default:k(()=>a[13]||(a[13]=[_("Users",-1)])),_:1,__:[13]},8,["href","active"])),[[n,"create_users"]]),L((l(),V(ae,{href:o.route("leads.page"),active:o.route().current("leads.page"),class:"!px-2 !py-1.5"},{default:k(()=>a[14]||(a[14]=[_("Leads",-1)])),_:1,__:[14]},8,["href","active"])),[[n,"manage_projects"]]),L((l(),V(ae,{href:"/campaigns",active:o.$page.url&&o.$page.url.startsWith("/campaigns"),class:"!px-2 !py-1.5"},{default:k(()=>a[15]||(a[15]=[_("Campaigns",-1)])),_:1,__:[15]},8,["active"])),[[n,"manage_projects"]])])]),e("div",null,[a[20]||(a[20]=e("h4",{class:"text-xs font-semibold uppercase tracking-wider text-gray-500 mb-3"},"Planning / Sharing",-1)),e("div",li,[L((l(),V(ae,{href:o.route("availability.index"),active:o.route().current("availability.index"),class:"!px-2 !py-1.5"},{default:k(()=>a[17]||(a[17]=[_("Weekly Availability",-1)])),_:1,__:[17]},8,["href","active"])),[[n,"create_users"]]),L((l(),V(ae,{href:o.route("admin.notice-board.index"),class:"!px-2 !py-1.5"},{default:k(()=>a[18]||(a[18]=[_("Notice Board",-1)])),_:1,__:[18]},8,["href"])),[[n,"manage_notices"]]),L((l(),V(ae,{href:o.route("shareable-resources.page"),class:"!px-2 !py-1.5"},{default:k(()=>a[19]||(a[19]=[_("Shareable Resources",-1)])),_:1,__:[19]},8,["href"])),[[n,"view_shareable_resources"]])])]),e("div",null,[a[29]||(a[29]=e("h4",{class:"text-xs font-semibold uppercase tracking-wider text-gray-500 mb-3"},"Configuration",-1)),e("div",si,[L((l(),V(ae,{href:o.route("task-types.page"),active:o.route().current("task-types.page"),class:"!px-2 !py-1.5"},{default:k(()=>a[21]||(a[21]=[_("Task Types",-1)])),_:1,__:[21]},8,["href","active"])),[[n,"manage_projects"]]),L((l(),V(ae,{href:"/admin/project-tiers",class:"!px-2 !py-1.5"},{default:k(()=>a[22]||(a[22]=[_("Project Tiers",-1)])),_:1,__:[22]})),[[n,"view_project_tiers"]]),L((l(),V(ae,{href:o.route("email-templates.page"),active:o.route().current("email-templates.page"),class:"!px-2 !py-1.5"},{default:k(()=>a[23]||(a[23]=[_("Email Templates",-1)])),_:1,__:[23]},8,["href","active"])),[[n,"manage_email_templates"]]),L((l(),V(ae,{href:o.route("placeholder-definitions.page"),active:o.route().current("placeholder-definitions.page"),class:"!px-2 !py-1.5"},{default:k(()=>a[24]||(a[24]=[_("Placeholder Definitions",-1)])),_:1,__:[24]},8,["href","active"])),[[n,"manage_placeholder_definitions"]]),L((l(),V(ae,{href:o.route("automation.page"),active:o.route().current("automation.page"),class:"!px-2 !py-1.5"},{default:k(()=>a[25]||(a[25]=[_("Automation",-1)])),_:1,__:[25]},8,["href","active"])),[[n,"create_automations"]]),L((l(),V(ae,{href:o.route("prompts.page"),active:o.route().current("prompts.page"),class:"!px-2 !py-1.5"},{default:k(()=>a[26]||(a[26]=[_("Prompts",-1)])),_:1,__:[26]},8,["href","active"])),[[n,"create_automations"]]),L((l(),V(ae,{href:o.route("schedules.index"),active:o.$page.url&&o.$page.url.startsWith("/schedules"),class:"!px-2 !py-1.5"},{default:k(()=>a[27]||(a[27]=[_("Schedules",-1)])),_:1,__:[27]},8,["href","active"])),[[n,"create_schedules"]]),c(ae,{href:o.route("admin.categories.index"),class:"!px-2 !py-1.5"},{default:k(()=>a[28]||(a[28]=[_("Categories",-1)])),_:1,__:[28]},8,["href"]),e("button",{type:"button",class:"!px-2 !py-1.5 text-left text-sm text-gray-700 hover:text-gray-900",onClick:t},"Quick Add")])]),e("div",null,[a[34]||(a[34]=e("h4",{class:"text-xs font-semibold uppercase tracking-wider text-gray-500 mb-3"},"Access & Finance",-1)),e("div",oi,[L((l(),V(ae,{href:o.route("admin.roles.index"),class:"!px-2 !py-1.5"},{default:k(()=>a[30]||(a[30]=[_("Manage Roles",-1)])),_:1,__:[30]},8,["href"])),[[n,"manage_roles"]]),L((l(),V(ae,{href:o.route("admin.permissions.index"),class:"!px-2 !py-1.5"},{default:k(()=>a[31]||(a[31]=[_("Manage Permissions",-1)])),_:1,__:[31]},8,["href"])),[[n,"assign_permissions"]]),L((l(),V(ae,{href:"/admin/monthly-budgets",class:"!px-2 !py-1.5"},{default:k(()=>a[32]||(a[32]=[_("Monthly Budgets",-1)])),_:1,__:[32]})),[[n,"manage_monthly_budgets"]]),L((l(),V(ae,{href:"/admin/bonus-calculator",class:"!px-2 !py-1.5"},{default:k(()=>a[33]||(a[33]=[_("Bonus Calculator",-1)])),_:1,__:[33]})),[[n,"view_monthly_budgets"]])])])])])]),_:1})]),c(He,{show:p.value,onClose:a[9]||(a[9]=v=>p.value=!1),maxWidth:"3xl"},{default:k(()=>{var v,M,y,R,B,x,w,G;return[e("div",ii,[e("div",ri,[a[35]||(a[35]=e("h2",{class:"text-lg font-semibold"},"Manage Categories",-1)),e("button",{onClick:a[0]||(a[0]=j=>p.value=!1),class:"text-gray-400 hover:text-gray-600"},"✕")]),e("div",ni,[e("div",ui,[a[37]||(a[37]=e("h3",{class:"text-sm font-semibold mb-3"},"Create Category Set",-1)),e("div",di,[e("div",null,[c(q,{value:"Set Name"}),c(ye,{modelValue:s.setName,"onUpdate:modelValue":a[1]||(a[1]=j=>s.setName=j),class:"w-full mt-1"},null,8,["modelValue"]),c(le,{message:(M=(v=s.errors)==null?void 0:v.name)==null?void 0:M[0]},null,8,["message"])]),e("div",null,[c(q,{value:"Allowed Models (optional)"}),c(pt,{options:s.models,modelValue:s.setModels,"onUpdate:modelValue":a[2]||(a[2]=j=>s.setModels=j),isMulti:!0,placeholder:"Select models"},null,8,["options","modelValue"])]),e("div",ci,[c(pe,{type:"button",onClick:b,disabled:d.value},{default:k(()=>a[36]||(a[36]=[_("Create Set",-1)])),_:1,__:[36]},8,["disabled"])])])]),e("div",mi,[a[41]||(a[41]=e("h3",{class:"text-sm font-semibold mb-3"},"Create Category",-1)),e("div",vi,[e("div",null,[c(q,{value:"Category Name"}),c(ye,{modelValue:s.categoryName,"onUpdate:modelValue":a[3]||(a[3]=j=>s.categoryName=j),class:"w-full mt-1"},null,8,["modelValue"]),c(le,{message:(R=(y=s.errors)==null?void 0:y.name)==null?void 0:R[0]},null,8,["message"])]),e("div",pi,[e("label",fi,[L(e("input",{type:"radio",value:"existing","onUpdate:modelValue":a[4]||(a[4]=j=>s.setMode=j)},null,512),[[Re,s.setMode]]),a[38]||(a[38]=_(" Use Existing Set ",-1))]),e("label",gi,[L(e("input",{type:"radio",value:"new","onUpdate:modelValue":a[5]||(a[5]=j=>s.setMode=j)},null,512),[[Re,s.setMode]]),a[39]||(a[39]=_(" Create New Set ",-1))])]),s.setMode==="existing"?(l(),i("div",bi,[c(q,{value:"Select Set"}),c(ge,{options:s.sets,modelValue:s.selectedSetId,"onUpdate:modelValue":a[6]||(a[6]=j=>s.selectedSetId=j),placeholder:"Choose a set"},null,8,["options","modelValue"]),c(le,{message:(x=(B=s.errors)==null?void 0:B.category_set_id)==null?void 0:x[0]},null,8,["message"])])):(l(),i("div",yi,[c(q,{value:"New Set Name"}),c(ye,{modelValue:s.newSetName,"onUpdate:modelValue":a[7]||(a[7]=j=>s.newSetName=j),class:"w-full mt-1"},null,8,["modelValue"]),c(le,{message:(G=(w=s.errors)==null?void 0:w.new_set_name)==null?void 0:G[0]},null,8,["message"]),e("div",hi,[c(q,{value:"Allowed Models (optional)"}),c(pt,{options:s.models,modelValue:s.newSetModels,"onUpdate:modelValue":a[8]||(a[8]=j=>s.newSetModels=j),isMulti:!0,placeholder:"Select models"},null,8,["options","modelValue"])])])),e("div",ki,[c(pe,{type:"button",onClick:r,disabled:d.value},{default:k(()=>a[40]||(a[40]=[_("Create Category",-1)])),_:1,__:[40]},8,["disabled"])])])])])])]}),_:1},8,["show"])],64)}}},xi={class:"relative ms-3"},_i={class:"inline-flex rounded-md"},Ai={type:"button",class:"inline-flex items-center rounded-md border border-transparent bg-white px-3 py-2 text-sm font-medium leading-4 text-gray-500 transition duration-150 ease-in-out hover:text-gray-700 focus:outline-none"},Ti={__name:"UserDropdown",emits:["logoutSuccess","logoutError"],setup(u,{emit:p}){const d=F(()=>We().props.auth.user),s=p,t=()=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization,s("logoutSuccess")},f=m=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization,window.location.href="/login",s("logoutError",m)};return(m,g)=>(l(),i("div",xi,[c(nt,{align:"right",width:"48"},{trigger:k(()=>{var b;return[e("span",_i,[e("button",Ai,[_(P(d.value.name)+" ("+P((b=d.value.role_data)==null?void 0:b.name)+") ",1),g[0]||(g[0]=e("svg",{class:"ms-2 -me-0.5 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1))])])]}),content:k(()=>[c(ae,{href:m.route("profile.edit")},{default:k(()=>g[1]||(g[1]=[_(" Profile ",-1)])),_:1,__:[1]},8,["href"]),c(ae,{href:m.route("logout"),method:"post",as:"button",onSuccess:t,onError:f},{default:k(()=>g[2]||(g[2]=[_(" Log Out ",-1)])),_:1,__:[2]},8,["href"])]),_:1})]))}},Mi={class:"hidden sm:flex sm:items-center"},$i={class:"mx-auto w-full max-w-6xl"},Ci={class:"grid grid-cols-2 md:grid-cols-3 gap-8"},Si={class:"space-y-1"},Gi={class:"space-y-1"},Pi={key:0},ji={class:"space-y-1"},Ei={__name:"BonusDropdown",setup(u){const{canDo:p}=et();return(d,s)=>{const t=ot("permission");return l(),i("div",Mi,[c(nt,{align:"left",width:"screen","content-classes":"py-6 bg-white p-6 w-full shadow-lg"},{trigger:k(()=>s[0]||(s[0]=[e("span",{class:"inline-flex rounded-md"},[e("button",{type:"button",class:"inline-flex items-center rounded-md border border-transparent bg-white px-3 py-2 text-sm font-medium leading-4 text-gray-700 hover:text-gray-900 focus:outline-none"},[_(" Team Resources "),e("svg",{class:"ms-2 -me-0.5 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])])],-1)])),content:k(()=>[e("div",$i,[e("div",Ci,[e("div",null,[s[4]||(s[4]=e("h4",{class:"text-xs font-semibold uppercase tracking-wider text-gray-500 mb-3"},"Program",-1)),e("div",Si,[c(ae,{href:d.route("bonus-system.index"),active:d.route().current("bonus-system.index"),class:"!px-2 !py-1.5"},{default:k(()=>s[1]||(s[1]=[_("Bonus System",-1)])),_:1,__:[1]},8,["href","active"]),c(ae,{href:d.route("leaderboard.index"),active:d.route().current("leaderboard.index"),class:"!px-2 !py-1.5"},{default:k(()=>s[2]||(s[2]=[_("Leaderboard",-1)])),_:1,__:[2]},8,["href","active"]),c(ae,{href:d.route("kudos.index"),active:d.route().current("kudos.index"),class:"!px-2 !py-1.5"},{default:k(()=>s[3]||(s[3]=[_("Kudos",-1)])),_:1,__:[3]},8,["href","active"])])]),e("div",null,[s[7]||(s[7]=e("h4",{class:"text-xs font-semibold uppercase tracking-wider text-gray-500 mb-3"},"Valuable",-1)),e("div",Gi,[c(ae,{href:d.route("team-resources.page"),active:d.route().current("team-resources.page"),class:"!px-2 !py-1.5"},{default:k(()=>s[5]||(s[5]=[_("Resources",-1)])),_:1,__:[5]},8,["href","active"]),c(ae,{href:d.route("presentations.index"),active:d.route().current("presentations.index"),class:"!px-2 !py-1.5"},{default:k(()=>s[6]||(s[6]=[_("Presentation",-1)])),_:1,__:[6]},8,["href","active"])])]),U(p)("add_expendables").value?(l(),i("div",Pi,[s[9]||(s[9]=e("h4",{class:"text-xs font-semibold uppercase tracking-wider text-gray-500 mb-3"},"Management",-1)),e("div",ji,[L((l(),V(ae,{href:d.route("project-expendables.index"),class:"!px-2 !py-1.5"},{default:k(()=>s[8]||(s[8]=[_("Project Expendables",-1)])),_:1,__:[8]},8,["href"])),[[t,"add_expendables"]])])])):A("",!0)])])]),_:1})])}}},Ii={class:"bg-white z-[49] relative w-full shadow-sm border-b border-gray-100"},Vi={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Bi={class:"flex h-16 justify-between items-center"},Di={class:"flex-shrink-0 flex items-center"},Ni={class:"hidden sm:flex items-center space-x-6"},Ui={key:0,class:"group relative inline-flex items-center px-3 py-1 rounded-full bg-gradient-to-r from-green-400 to-emerald-500 text-white text-sm font-semibold shadow-lg ring-2 ring-emerald-300/60 transition-all duration-300 ease-in-out"},zi={class:"font-bold"},Li={key:1,class:"inline-flex items-center px-3 py-1 rounded-full bg-gray-100 text-gray-500 text-sm font-medium"},Fi={key:0,class:"absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-red-100 transform translate-x-1/2 -translate-y-1/2 bg-red-600 rounded-full"},Ri={class:"-mr-2 flex items-center sm:hidden"},Oi={class:"h-6 w-6",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24"},Wi={class:"bg-gray-50 border-t border-gray-100 py-2 hidden sm:block"},Hi={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Ki={class:"flex items-center justify-between"},qi={class:"flex items-center space-x-2 overflow-x-auto no-scrollbar"},Ji={class:"flex items-center space-x-2 flex-shrink-0"},Yi={class:"space-y-1 pt-2 pb-3"},Qi={__name:"TopNavigation",props:{unreadNotificationCount:{type:Number,default:0}},emits:["openCreateTaskModal","openAddResource","openNotificationsSidebar","open-kudo-modal"],setup(u,{emit:p}){const d=p,s=T(!1);F(()=>We().props.auth.user);const{canDo:t}=et();t("manage_projects"),t("create_users"),t("manage_roles"),t("manage_task_types"),t("create_clients"),F(()=>t("manage_project_tiers").value||t("view_project_tiers").value||t("create_project_tiers").value||t("edit_project_tiers").value),t("manage_notices"),t("manage_email_templates"),t("manage_placeholder_definitions"),t("manage_permissions"),t("manage_monthly_budgets"),t("view_monthly_budgets"),t("view_admin_menu");const f=t("view_admin_dropdown"),m=T(null),g=T(!0),b=T(null);return we(async()=>{try{const{data:r}=await window.axios.get("/api/leaderboard/stats");m.value=(r==null?void 0:r.userMonthlyPoints)??0}catch(r){console.error("Failed to load monthly points",r),b.value="Failed to load points",m.value=0}finally{g.value=!1}}),(r,o)=>{const a=ot("permission");return l(),i("nav",Ii,[e("div",Vi,[e("div",Bi,[e("div",Di,[c(U(Te),{href:r.route("dashboard")},{default:k(()=>[c(oa,{class:"block h-14 w-auto fill-current text-gray-800"})]),_:1},8,["href"])]),e("div",Ni,[c(U(Te),{href:r.route("leaderboard.index"),class:"mr-3 cursor-pointer"},{default:k(()=>[g.value?(l(),i("div",Li," Loading... ")):(l(),i("div",Ui,[o[5]||(o[5]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1.5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})],-1)),e("span",zi,P(m.value??0),1),o[6]||(o[6]=e("span",{class:"ml-1 text-white/80"},"pts",-1))]))]),_:1},8,["href"]),e("button",{onClick:o[0]||(o[0]=n=>d("openNotificationsSidebar")),class:"relative flex-shrink-0 text-gray-400 hover:text-indigo-600 p-2 rounded-full transition-colors duration-200","aria-label":"View all notifications"},[c(U(Qo),{class:"h-6 w-6"}),u.unreadNotificationCount>0?(l(),i("span",Fi,P(u.unreadNotificationCount),1)):A("",!0)]),c(Ti)]),e("div",Ri,[e("button",{onClick:o[1]||(o[1]=n=>s.value=!s.value),class:"inline-flex items-center justify-center rounded-md p-2 text-gray-400 transition duration-150 ease-in-out hover:bg-gray-100 hover:text-gray-500 focus:bg-gray-100 focus:text-gray-500 focus:outline-none"},[(l(),i("svg",Oi,[e("path",{class:J({hidden:s.value,"inline-flex":!s.value}),"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},null,2),e("path",{class:J({hidden:!s.value,"inline-flex":s.value}),"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,2)]))])])])]),e("div",Wi,[e("div",Hi,[e("div",Ki,[e("div",qi,[c(_e,{href:r.route("dashboard"),active:r.route().current("dashboard")},{default:k(()=>o[7]||(o[7]=[_(" Dashboard ",-1)])),_:1,__:[7]},8,["href","active"]),c(_e,{href:r.route("inbox"),active:r.route().current("inbox")},{default:k(()=>o[8]||(o[8]=[_(" Inbox ",-1)])),_:1,__:[8]},8,["href","active"]),c(_e,{href:r.route("workspace.index"),active:r.route().current("workspace.index")},{default:k(()=>o[9]||(o[9]=[_(" My Workspace ",-1)])),_:1,__:[9]},8,["href","active"]),c(Ei),U(f)?(l(),V(wi,{key:0})):A("",!0)]),e("div",Ji,[c(pe,{type:"button",onClick:o[2]||(o[2]=n=>d("openCreateTaskModal")),class:"px-3 py-1.5 text-sm"},{default:k(()=>[c(U(ft),{class:"h-4 w-4 mr-1.5"}),o[10]||(o[10]=e("span",null,"Add Task",-1))]),_:1,__:[10]}),c(pe,{type:"button",onClick:o[3]||(o[3]=n=>d("openAddResource")),class:"px-3 py-1.5 text-sm"},{default:k(()=>[c(U(ft),{class:"h-4 w-4 mr-1.5"}),o[11]||(o[11]=e("span",null,"Add Resource",-1))]),_:1,__:[11]}),U(t)("create_kudos")?(l(),i("button",{key:0,type:"button",onClick:o[4]||(o[4]=n=>r.$emit("open-kudo-modal")),class:"inline-flex items-center justify-center px-3 py-1.5 text-sm font-semibold rounded-lg bg-orange-500 text-white hover:bg-orange-600 transition-colors duration-200"},[c(U(Yo),{class:"h-4 w-4 mr-1.5"}),o[12]||(o[12]=e("span",null,"Give Kudo",-1))])):A("",!0)])])])]),e("div",{class:J([{block:s.value,hidden:!s.value},"sm:hidden"])},[e("div",Yi,[c(_e,{href:r.route("dashboard"),active:r.route().current("dashboard")},{default:k(()=>o[13]||(o[13]=[_(" Dashboard ",-1)])),_:1,__:[13]},8,["href","active"]),c(_e,{href:r.route("inbox"),active:r.route().current("inbox")},{default:k(()=>o[14]||(o[14]=[_(" Inbox ",-1)])),_:1,__:[14]},8,["href","active"]),c(_e,{href:r.route("workspace.index"),active:r.route().current("workspace.index")},{default:k(()=>o[15]||(o[15]=[_(" My Workspace ",-1)])),_:1,__:[15]},8,["href","active"]),c(_e,{href:r.route("presentations.index"),active:r.route().current("presentations.index")},{default:k(()=>o[16]||(o[16]=[_(" Presentation ",-1)])),_:1,__:[16]},8,["href","active"]),c(_e,{href:r.route("bonus-system.index"),active:r.route().current("bonus-system.index")},{default:k(()=>o[17]||(o[17]=[_(" Bonus System ",-1)])),_:1,__:[17]},8,["href","active"]),c(_e,{href:r.route("leaderboard.index"),active:r.route().current("leaderboard.index")},{default:k(()=>o[18]||(o[18]=[_(" Leaderboard ",-1)])),_:1,__:[18]},8,["href","active"]),c(_e,{href:r.route("kudos.index"),active:r.route().current("kudos.index")},{default:k(()=>o[19]||(o[19]=[_(" Kudos ",-1)])),_:1,__:[19]},8,["href","active"]),L((l(),V(_e,{href:r.route("project-expendables.index")},{default:k(()=>o[20]||(o[20]=[_(" Project Expendables ",-1)])),_:1,__:[20]},8,["href"])),[[a,"add_expendables"]])])],2)])}}},ne={__name:"ResponsiveNavLink",props:{href:{type:String,required:!0},active:{type:Boolean},method:{type:String,default:"get"},as:{type:String,default:"a"}},setup(u){const p=u,d=F(()=>p.active?"block w-full ps-3 pe-4 py-2 border-l-4 border-indigo-400 text-start text-base font-medium text-indigo-700 bg-indigo-50 focus:outline-none focus:text-indigo-800 focus:bg-indigo-100 focus:border-indigo-700 transition duration-150 ease-in-out":"block w-full ps-3 pe-4 py-2 border-l-4 border-transparent text-start text-base font-medium text-gray-600 hover:text-gray-800 hover:bg-gray-50 hover:border-gray-300 focus:outline-none focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300 transition duration-150 ease-in-out");return(s,t)=>(l(),V(U(Te),At({href:u.href,method:u.method,as:u.as},s.$attrs,{class:d.value}),{default:k(()=>[$e(s.$slots,"default")]),_:3},16,["href","method","as","class"]))}},Zi={class:"space-y-1 pb-3 pt-2"},Xi={key:0,class:"mt-3 space-y-1"},er={class:"border-t border-gray-200 pb-1 pt-4"},tr={class:"px-4"},ar={class:"text-base font-medium text-gray-800"},lr={class:"text-sm font-medium text-gray-500"},sr={class:"text-sm font-medium text-gray-500 capitalize"},or={class:"mt-3 space-y-1"},ir={__name:"MobileNavigation",props:{showingNavigationDropdown:{type:Boolean,required:!0},unreadNotificationCount:{type:Number,default:0}},emits:["openCreateTaskModal","openAddResource","openNotificationsSidebar","logoutSuccess","logoutError"],setup(u,{emit:p}){const d=p,s=F(()=>We().props.auth.user),{canDo:t}=et(),f=t("manage_projects"),m=t("compose_emails"),g=t("approve_emails"),b=t("create_users"),r=t("manage_roles"),o=t("manage_task_types"),a=t("create_clients"),n=()=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization,d("logoutSuccess")},v=M=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization,window.location.href="/login",d("logoutError",M)};return(M,y)=>{var R;return l(),i("div",{class:J([{block:u.showingNavigationDropdown,hidden:!u.showingNavigationDropdown},"sm:hidden"])},[e("div",Zi,[U(r)?(l(),i("div",Xi,[y[19]||(y[19]=e("div",{class:"px-4 font-medium text-base text-gray-800"},"Admin",-1)),c(ne,{href:M.route("dashboard"),active:M.route().current("dashboard")},{default:k(()=>y[3]||(y[3]=[_(" Dashboard ",-1)])),_:1,__:[3]},8,["href","active"]),U(t)("view_emails")?(l(),V(ne,{key:0,href:M.route("inbox"),active:M.route().current("inbox")},{default:k(()=>y[4]||(y[4]=[_(" Inbox ",-1)])),_:1,__:[4]},8,["href","active"])):A("",!0),U(a)?(l(),V(ne,{key:1,href:M.route("clients.page"),active:M.route().current("clients.page")},{default:k(()=>y[5]||(y[5]=[_(" Clients ",-1)])),_:1,__:[5]},8,["href","active"])):A("",!0),U(f)?(l(),V(ne,{key:2,href:M.route("projects.index"),active:M.route().current("projects.index")},{default:k(()=>y[6]||(y[6]=[_(" Projects ",-1)])),_:1,__:[6]},8,["href","active"])):A("",!0),U(b)?(l(),V(ne,{key:3,href:M.route("users.page"),active:M.route().current("users.page")},{default:k(()=>y[7]||(y[7]=[_(" Users ",-1)])),_:1,__:[7]},8,["href","active"])):A("",!0),U(m)?(l(),V(ne,{key:4,href:M.route("emails.compose"),active:M.route().current("emails.compose")},{default:k(()=>y[8]||(y[8]=[_(" Compose Email ",-1)])),_:1,__:[8]},8,["href","active"])):A("",!0),U(g)?(l(),V(ne,{key:5,href:M.route("emails.pending"),active:M.route().current("emails.pending")},{default:k(()=>y[9]||(y[9]=[_(" Approve Emails ",-1)])),_:1,__:[9]},8,["href","active"])):A("",!0),U(m)?(l(),V(ne,{key:6,href:M.route("emails.rejected"),active:M.route().current("emails.rejected")},{default:k(()=>y[10]||(y[10]=[_(" Rejected Emails ",-1)])),_:1,__:[10]},8,["href","active"])):A("",!0),U(b)?(l(),V(ne,{key:7,href:M.route("availability.index"),active:M.route().current("availability.index")},{default:k(()=>y[11]||(y[11]=[_(" Weekly Availability ",-1)])),_:1,__:[11]},8,["href","active"])):A("",!0),U(t)("manage_roles")?(l(),V(ne,{key:8,href:M.route("admin.roles.index"),active:M.route().current("admin.roles.index")},{default:k(()=>y[12]||(y[12]=[_(" Manage Roles ",-1)])),_:1,__:[12]},8,["href","active"])):A("",!0),U(t)("manage_permissions")?(l(),V(ne,{key:9,href:M.route("admin.permissions.index"),active:M.route().current("admin.permissions.index")},{default:k(()=>y[13]||(y[13]=[_(" Manage Permissions ",-1)])),_:1,__:[13]},8,["href","active"])):A("",!0),U(o)?(l(),V(ne,{key:10,href:M.route("task-types.page"),active:M.route().current("task-types.page")},{default:k(()=>y[14]||(y[14]=[_(" Task Types ",-1)])),_:1,__:[14]},8,["href","active"])):A("",!0),U(t)("manage_email_templates")?(l(),V(ne,{key:11,href:M.route("email-templates.page"),active:M.route().current("email-templates.page")},{default:k(()=>y[15]||(y[15]=[_(" Email Templates ",-1)])),_:1,__:[15]},8,["href","active"])):A("",!0),U(t)("manage_placeholder_definitions")?(l(),V(ne,{key:12,href:M.route("placeholder-definitions.page"),active:M.route().current("placeholder-definitions.page")},{default:k(()=>y[16]||(y[16]=[_(" Placeholder Definitions ",-1)])),_:1,__:[16]},8,["href","active"])):A("",!0),U(t)("view_shareable_resources")?(l(),V(ne,{key:13,href:M.route("shareable-resources.page"),active:M.route().current("shareable-resources.page")},{default:k(()=>y[17]||(y[17]=[_(" Shareable Resources ",-1)])),_:1,__:[17]},8,["href","active"])):A("",!0),U(t)("view_shareable_resources")?(l(),V(ne,{key:14,href:M.route("team-resources.page"),active:M.route().current("team-resources.page")},{default:k(()=>y[18]||(y[18]=[_(" Team Resources ",-1)])),_:1,__:[18]},8,["href","active"])):A("",!0)])):A("",!0)]),e("div",er,[e("div",tr,[e("div",ar,P(s.value.name),1),e("div",lr,P(s.value.email),1),e("div",sr,P((R=s.value.role_data)==null?void 0:R.name),1)]),e("div",or,[c(ne,{as:"button",onClick:y[0]||(y[0]=B=>d("openCreateTaskModal"))},{default:k(()=>y[20]||(y[20]=[_(" Add Task ",-1)])),_:1,__:[20]}),c(ne,{as:"button",onClick:y[1]||(y[1]=B=>d("openAddResource"))},{default:k(()=>y[21]||(y[21]=[_(" Add Resource ",-1)])),_:1,__:[21]}),c(ne,{as:"button",onClick:y[2]||(y[2]=B=>d("openNotificationsSidebar"))},{default:k(()=>[_(" Notifications ("+P(u.unreadNotificationCount)+") ",1)]),_:1}),c(ne,{href:M.route("profile.edit")},{default:k(()=>y[22]||(y[22]=[_(" Profile ",-1)])),_:1,__:[22]},8,["href"]),c(ne,{href:M.route("logout"),method:"post",as:"button",onSuccess:n,onError:v},{default:k(()=>y[23]||(y[23]=[_(" Log Out ",-1)])),_:1,__:[23]},8,["href"])])])],2)}}},rr={class:"space-y-4"},nr={key:0,class:"mb-4 p-3 bg-gray-100 rounded-md"},ur={class:"text-sm font-medium text-gray-900"},dr={class:"text-xs text-gray-500 mt-1"},cr={class:"mb-4"},mr="post",vr="Add Note",pr="Note added successfully!",fr={__name:"TaskNoteModal",props:{show:Boolean,taskForNote:Object},emits:["close","note-added"],setup(u,{emit:p}){const d=u,s=p,t=Ie({note:""}),f=F(()=>{var r;return`Add Note to Task: "${(r=d.taskForNote)==null?void 0:r.name}"`}),m=F(()=>{var r;return`/api/tasks/${(r=d.taskForNote)==null?void 0:r.id}/notes`});re(()=>d.show,r=>{r&&Object.assign(t,{note:""})},{immediate:!0});const g=r=>{s("note-added",r),s("close")},b=()=>{s("close")};return(r,o)=>(l(),V(De,{show:u.show,title:f.value,"api-endpoint":m.value,"http-method":mr,"form-data":t,"submit-button-text":vr,"success-message":pr,onClose:b,onSubmitted:g},{default:k(({errors:a})=>[e("div",rr,[u.taskForNote?(l(),i("div",nr,[e("p",ur,P(u.taskForNote.name),1),e("p",dr,"Status: "+P(u.taskForNote.status),1)])):A("",!0),e("div",cr,[c(q,{for:"task-note-content",value:"Note Content"}),L(e("textarea",{id:"task-note-content","onUpdate:modelValue":o[0]||(o[0]=n=>t.note=n),class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full h-32",placeholder:"Enter your note...",required:""},null,512),[[ce,t.note]]),c(le,{message:a.note?a.note[0]:"",class:"mt-2"},null,8,["message"])])])]),_:1},8,["show","title","api-endpoint","form-data"]))}},gr={class:"task-history-list"},br={key:0,class:"text-center py-4"},yr={key:1,class:"text-gray-500 text-sm py-2"},hr={key:2,class:"space-y-3"},kr={class:"flex items-start"},wr={class:"text-xl mr-2"},xr={class:"text-sm text-gray-700"},_r={class:"text-xs text-gray-500 mt-1"},Ar={__name:"TaskHistoryList",props:{activities:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},setup(u){const p=s=>s?new Date(s).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",d=s=>(console.log(s),s.includes("created")?"🆕":s.includes("started")?"🚀":s.includes("paused")?"⏸️":s.includes("resumed")?"▶️":s.includes("unblocked")?"🔓":s.includes("blocked")?"⛔":s.includes("completed")?"✅":s.includes("revised")?"🔄":s.includes("deleted")?"🗑️":s.includes("assigned")?"👤":s.includes("updated")?"📝":s.includes("added note")?"🗒️":s.includes("commented")?"💬":"📋");return(s,t)=>(l(),i("div",gr,[u.loading?(l(),i("div",br,t[0]||(t[0]=[e("div",{class:"inline-block animate-spin rounded-full h-6 w-6 border-t-2 border-b-2 border-indigo-500"},null,-1),e("p",{class:"mt-2 text-gray-500"},"Loading activity history...",-1)]))):u.activities.length===0?(l(),i("div",yr," No activity history available for this task. ")):(l(),i("div",hr,[(l(!0),i(Z,null,ie(u.activities,f=>{var m;return l(),i("div",{key:f.id,class:"p-3 bg-gray-50 rounded-md"},[e("div",kr,[e("span",wr,P(d(f.description)),1),e("div",null,[e("p",xr,P(f.description),1),e("p",_r," By "+P(((m=f.causer)==null?void 0:m.name)||"System")+" on "+P(p(f.created_at)),1)])])])}),128))]))]))}},Tr=Ke(Ar,[["__scopeId","data-v-423d54af"]]),id=async()=>{try{return(await se.get("/api/assigned-tasks")).data}catch(u){throw console.error("Error fetching assigned tasks:",u),ue("Failed to load assigned tasks"),u}},rd=async u=>{try{return(await se.get(`/api/projects/${u}/tasks`)).data}catch(p){throw console.error("Error fetching project tasks:",p),ue("Failed to load project tasks"),p}},nd=async u=>{try{return(await se.get(`/api/projects/${u}/due-and-overdue-tasks`)).data}catch(p){throw console.error("Error fetching due and overdue tasks:",p),ue("Failed to load due and overdue tasks"),p}},Mr=async u=>{if(!u||u.status==="In Progress")return u;try{Ce("Starting task...");const p=await se.post(`/api/tasks/${u.id}/start`);return be("Task started successfully"),p.data}catch(p){throw console.error("Error starting task:",p),ue("Failed to start task. Please try again."),p}},$r=async u=>{if(!u||u.status!=="In Progress")return ke('Task can only be paused from "In Progress" status.'),u;try{Ce("Pausing task...");const p=await se.post(`/api/tasks/${u.id}/pause`);return be("Task paused successfully"),p.data}catch(p){throw console.error("Error pausing task:",p),ue("Failed to pause task. Please try again."),p}},Cr=async u=>{if(!u||u.status!=="Paused")return ke('Task can only be resumed from "Paused" status.'),u;try{Ce("Resuming task...");const p=await se.post(`/api/tasks/${u.id}/resume`);return be("Task resumed successfully"),p.data}catch(p){throw console.error("Error resuming task:",p),ue("Failed to resume task. Please try again."),p}},Sr=async u=>{if(!u||u.status==="Done")return u;if(u.status!=="In Progress")throw ke("Task must be started before it can be completed"),new Error("Task must be started before it can be completed");try{Ce("Completing task...");const p=await se.patch(`/api/tasks/${u.id}/complete`);be("Task completed successfully");const d=p.data;if(d!=null&&d.needs_approval){const s=(d==null?void 0:d.creator_name)||"the creator";Ce(`This task requires approval. A notification has been sent to ${s}.`)}return d}catch(p){throw console.error("Error completing task:",p),p.response&&p.response.status===422?ke(p.response.data.message||"Task must be started before it can be completed"):ue("Failed to complete task. Please try again."),p}},Gr=async(u,p)=>{if(!u||u.status==="Blocked")return ke("Task is already blocked."),u;if(u.status==="Done")return ke("Completed tasks cannot be blocked."),u;if(!p)throw ke("Please provide a reason for blocking the task"),new Error("Blocking reason is required");try{Ce("Blocking task...");const d=await se.post(`/api/tasks/${u.id}/block`,{reason:p});return be("Task blocked successfully"),d.data}catch(d){throw console.error("Error blocking task:",d),ue("Failed to block task. Please try again."),d}},Pr=async u=>{if(!u||u.status!=="Blocked")return ke("Task is not in a blocked state."),u;try{Ce("Unblocking task...");const p=await se.post(`/api/tasks/${u.id}/unblock`);return be("Task unblocked successfully"),p.data}catch(p){throw console.error("Error unblocking task:",p),ue("Failed to unblock task. Please try again."),p}},jr=async u=>{if(!u||u.status!=="Done")return ke("Only completed tasks can be revised."),u;try{Ce("Revising task...");const p=await se.post(`/api/tasks/${u.id}/revise`);return be("Task revised successfully"),p.data}catch(p){throw console.error("Error revising task:",p),p.response&&p.response.status===422?ke(p.response.data.message||"Only completed tasks can be revised"):ue("Failed to revise task. Please try again."),p}},Er=async u=>{if(!u)return!1;if(u.status!=="To Do")throw ke("Only tasks in To Do status can be deleted"),new Error("Only tasks in To Do status can be deleted");if(!confirm("Are you sure you want to delete this task? This action cannot be undone."))return!1;try{return Ce("Deleting task..."),await se.delete(`/api/tasks/${u.id}`),be("Task deleted successfully"),!0}catch(p){throw console.error("Error deleting task:",p),ue("Failed to delete task. Please try again."),p}},Ir=u=>{switch(u){case"To Do":return"bg-yellow-100 text-yellow-800";case"In Progress":return"bg-blue-100 text-blue-800";case"Paused":return"bg-orange-100 text-orange-800";case"Blocked":return"bg-red-100 text-red-800";case"Done":return"bg-green-100 text-green-800";case"Archived":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},ud=u=>{switch(u){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},dd=u=>u?u.charAt(0).toUpperCase()+u.slice(1):"Medium",Vr={class:"mt-4"},Br={__name:"ChecklistCreator",props:{modelValue:{type:Array,required:!0},placeholder:{type:String,default:"e.g., Task 1, Task 2, Task 3"},label:{type:String,default:"Checklist Items"},density:{type:String,default:"spacious",validator:u=>["spacious","tight","notes"].includes(u)}},emits:["update:modelValue"],setup(u,{emit:p}){const d=u,s=p,t=T([]),f=T([]),m=T(!1);re(()=>d.modelValue,a=>{m.value=!0,t.value=JSON.parse(JSON.stringify(a)),(t.value.length===0||t.value[t.value.length-1].name.trim()!=="")&&t.value.push({name:"",completed:!1}),Ee(()=>{m.value=!1})},{immediate:!0,deep:!0}),re(()=>t.value,a=>{m.value||s("update:modelValue",a)},{deep:!0});function g(a){t.value.splice(a,1),t.value.length===0&&t.value.push({name:"",completed:!1})}function b(a){a===t.value.length-1&&t.value[a].name.trim()!==""&&t.value.push({name:"",completed:!1})}function r(a){a<t.value.length-1&&Ee(()=>{var n;(n=f.value[a+1])==null||n.focus()})}const o=F(()=>d.density==="tight"?{listClass:"space-y-1",itemClass:"flex items-center space-x-1",inputClass:"px-1 py-1 text-sm"}:d.density==="notes"?{listClass:"space-y-0.5",itemClass:"flex items-center space-x-1",inputClass:"px-1 py-0.5 text-sm border-transparent focus:border-transparent focus:ring-0 bg-transparent"}:{listClass:"space-y-2",itemClass:"flex items-center space-x-2",inputClass:""});return(a,n)=>(l(),i("div",Vr,[u.label?(l(),V(q,{key:0,value:u.label},null,8,["value"])):A("",!0),e("ul",{class:J(o.value.listClass)},[(l(!0),i(Z,null,ie(t.value,(v,M)=>(l(),i("li",{key:M,class:J(o.value.itemClass)},[u.density==="notes"?(l(),V(U(bt),{key:0,class:"h4 w-4",onClick:y=>g(M)},null,8,["onClick"])):A("",!0),c(ye,{modelValue:v.name,"onUpdate:modelValue":y=>v.name=y,type:"text",class:J(["flex-1",o.value.inputClass]),placeholder:M===t.value.length-1?u.placeholder:"",onInput:y=>b(M),onKeyup:Je(wt(y=>r(M),["prevent"]),["enter"]),ref_for:!0,ref:y=>{y&&(f.value[M]=y)}},null,8,["modelValue","onUpdate:modelValue","class","placeholder","onInput","onKeyup"]),t.value.length>1&&u.density!=="notes"?(l(),V(rt,{key:1,type:"button",onClick:y=>g(M)},{default:k(()=>[c(U(bt),{class:"h-4 w-4"})]),_:2},1032,["onClick"])):A("",!0)],2))),128))],2)]))}},Dr={class:"p-6"},Nr={class:"text-lg font-medium text-gray-900 mb-4"},Ur={class:"mb-4"},zr=["placeholder"],Lr={class:"flex justify-end space-x-3"},Fr={__name:"BlockReasonModal",props:{show:{type:Boolean,default:!1},title:{type:String,default:"Block Task"},confirmText:{type:String,default:"Block Task"},placeholder:{type:String,default:"Enter reason for blocking..."},initialReason:{type:String,default:""},disabled:{type:Boolean,default:!1}},emits:["close","confirm"],setup(u,{emit:p}){const d=u,s=p,t=T("");re(()=>d.show,g=>{g&&(t.value=d.initialReason||"")},{immediate:!0});const f=()=>s("close"),m=()=>{const g=(t.value||"").trim();g&&s("confirm",g)};return(g,b)=>(l(),V(He,{show:u.show,onClose:f},{default:k(()=>[e("div",Dr,[e("h2",Nr,P(u.title),1),e("div",Ur,[b[1]||(b[1]=e("p",{class:"text-sm text-gray-600 mb-2"},"Please provide a reason:",-1)),L(e("textarea",{"onUpdate:modelValue":b[0]||(b[0]=r=>t.value=r),class:"w-full rounded-md shadow-sm border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",rows:"3",placeholder:u.placeholder},null,8,zr),[[ce,t.value]])]),e("div",Lr,[c(Ze,{onClick:f},{default:k(()=>b[2]||(b[2]=[_("Cancel",-1)])),_:1,__:[2]}),c(pe,{onClick:m,disabled:u.disabled||!t.value.trim(),class:"bg-red-600 hover:bg-red-700"},{default:k(()=>[_(P(u.confirmText),1)]),_:1},8,["disabled"])])])]),_:1},8,["show"]))}},Rr={key:0,class:"text-center py-8 text-gray-500"},Or={key:1,class:"text-center py-8 text-red-600"},Wr={key:2,class:"space-y-6"},Hr={class:"bg-gray-50 p-4 rounded-lg shadow-sm"},Kr={class:"text-xl font-bold text-gray-900 mb-2"},qr={class:"flex items-center space-x-2 text-sm text-gray-600 mb-4"},Jr={key:0,class:"text-indigo-600 font-medium"},Yr={key:1,class:"text-purple-600 font-medium"},Qr={class:"text-gray-700 leading-relaxed"},Zr={class:"mt-4 flex flex-wrap gap-2"},Xr={key:0,class:"text-xs text-gray-500 mt-1"},en={key:0,class:"bg-yellow-50 border-l-4 border-red-400 p-4 rounded-lg shadow-sm"},tn={class:"flex items-center"},an={class:"ml-3"},ln={class:"mt-2 text-sm text-yellow-700"},sn={key:1,class:"bg-amber-50 border-l-4 border-amber-400 p-4 rounded-lg shadow-sm"},on={class:"flex items-start"},rn={class:"ml-3"},nn={class:"mt-1 text-sm text-amber-700"},un={key:0},dn={class:"font-medium"},cn={class:"space-y-4 p-4 bg-white rounded-lg shadow-sm mb-4"},mn={class:"flex justify-between items-center border-b pb-2 mb-4"},vn={key:0},pn={key:1},fn={key:0,class:"mb-4"},gn={class:"flex justify-end mt-4"},bn={key:2,class:"text-gray-500 text-sm py-2"},yn={class:"space-y-4 p-4 bg-white rounded-lg shadow-sm"},hn={class:"flex items-center justify-between py-2 border-b border-gray-100"},kn={class:"flex-1 text-right"},wn={key:0,class:"text-xs text-gray-400 ml-1"},xn={key:1,class:"flex items-center space-x-2"},_n={class:"flex items-center justify-between py-2 border-b border-gray-100"},An={class:"flex-1 text-right"},Tn={key:0,class:"text-xs text-gray-400 ml-1"},Mn={key:1,class:"flex items-center space-x-2"},$n={class:"flex items-center justify-between py-2 border-b border-gray-100"},Cn={class:"flex-1 text-right"},Sn={key:0,class:"text-xs text-gray-400 ml-1"},Gn={key:1,class:"flex items-center space-x-2"},Pn={class:"flex items-center justify-between py-2 border-b border-gray-100"},jn={class:"text-gray-700"},En={class:"flex items-start py-2 border-b border-gray-100"},In={class:"flex-1 flex flex-wrap gap-2"},Vn={key:0,class:"text-gray-500 text-sm"},Bn={class:"bg-white p-4 rounded-lg shadow-sm"},Dn={class:"mb-4 border-b pb-3 flex flex-col gap-3"},Nn={class:"flex items-center justify-between"},Un={class:"flex items-center gap-2"},zn=["disabled"],Ln={key:0,class:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Fn={class:"flex items-center gap-3"},Rn={class:"relative inline-flex items-center px-4 py-2 rounded-md border border-dashed border-indigo-300 text-indigo-700 bg-indigo-50 hover:bg-indigo-100 cursor-pointer transition"},On=["disabled"],Wn={key:0,class:"flex flex-wrap gap-2"},Hn=["title"],Kn=["onClick"],qn={key:0,class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3"},Jn={key:1,class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3"},Yn={class:"aspect-video bg-gray-50 flex items-center justify-center overflow-hidden"},Qn=["src","alt","onClick"],Zn=["onClick"],Xn={class:"p-2 flex items-center justify-between"},eu=["title","onClick"],tu=["onClick"],au={key:2,class:"text-sm text-gray-500"},lu={class:"bg-white p-4 rounded-lg shadow-sm"},su={class:"flex justify-between items-center mb-4 border-b pb-2"},ou={key:0,class:"space-y-3"},iu={class:"text-sm text-gray-700"},ru={class:"text-xs text-gray-500 mt-1"},nu={key:1,class:"text-gray-500 text-sm py-2"},uu={class:"bg-white p-4 rounded-lg shadow-sm"},du={key:3,class:"text-center py-8 text-gray-500"},cu={key:4,class:"mt-4 flex flex-col items-center"},mu={key:0,class:"text-xs text-red-500 mt-1"},vu={class:"p-4 sm:p-6 w-full max-w-4xl"},pu={class:"flex justify-between items-center mb-3"},fu=["title"],gu={class:"bg-black/5 rounded-lg overflow-hidden",style:{"min-height":"320px"}},bu=["src"],yu=["src"],hu={key:2,class:"p-6 text-center text-gray-700"},ku=["href"],wu={key:3,class:"p-6 text-center text-gray-500"},xu={__name:"TaskDetailSidebar",props:{taskId:{type:Number,required:!0},projectId:{type:Number,required:!0},projectUsers:{type:Array,default:()=>[]}},emits:["close","task-updated","task-deleted"],setup(u,{emit:p}){const d=u,s=p,t=T(null),f=T(!0),m=T(""),g=F(()=>{var S,h;return((h=(S=t.value)==null?void 0:S.milestone)==null?void 0:h.project_id)||null});Qt(g);const b=F(()=>{const S=g.value;return S?{id:S}:null}),r=Zt(b),{canDo:o,canManage:a}=et(g),n=a("projects",r),v=F(()=>o("change_due_date",r).value===!0||n.value===!0),M=T(!1),y=T(!1),R=T(!1),B=T(null),x=T(null),w=T(null),G=T([]),j=T(!1),z=T([]),ee=T(!1),I=T(!1),E=T([]),O=async()=>{if(d.taskId){ee.value=!0;try{const S=await window.axios.get("/api/files",{params:{model_type:"Task",model_id:d.taskId}});z.value=S.data||[]}catch(S){console.error("Error fetching task files",S)}finally{ee.value=!1}}},D=S=>{E.value=Array.from(S.target.files||[])},C=async()=>{if(!E.value.length)return;I.value=!0;const S=new FormData;E.value.forEach((h,ve)=>S.append(`files[${ve}]`,h)),S.append("model_type","Task"),S.append("model_id",d.taskId);try{await window.axios.post("/api/files",S,{headers:{"Content-Type":"multipart/form-data"}}),be("Files uploaded"),E.value=[],await O()}catch(h){console.error("Upload failed",h),ue("Failed to upload files")}finally{I.value=!1}},Q=async S=>{if(await Xt(`Delete file "${S.filename}"?`,{confirmText:"Delete",cancelText:"Cancel",type:"warning"}))try{await window.axios.delete(`/api/files/${S.id}`),be("File deleted"),await O()}catch(ve){console.error("Delete failed",ve),ue("Failed to delete file")}},oe=T(!1),W=T(null),te=S=>{W.value=S,oe.value=!0},H=()=>{oe.value=!1,W.value=null},de=S=>S?S.thumbnail_url?S.thumbnail_url:S.mime_type&&S.mime_type.includes("image")&&S.path_url?S.path_url:null:null,me=S=>{if(!S)return{type:"none"};const h=S.path_url||null,ve=(S.mime_type||"").toLowerCase();return h?ve.includes("image")?{type:"image",src:h}:ve.includes("pdf")||ve.includes("text")||ve.includes("html")?{type:"iframe",src:h}:{type:"external_link",url:h}:{type:"none"}},he=F(()=>me(W.value)),Ve=[{value:"low",label:"Low"},{value:"medium",label:"Medium"},{value:"high",label:"High"}],Me=T(!1),xe=T(!1),Ae=T([{name:"",completed:!1}]),N=T(!1),$=async()=>{f.value=!0,m.value="";try{const S=await window.axios.get(`/api/tasks/${d.taskId}`);t.value=S.data,B.value=t.value.assigned_to_id||null,x.value=t.value.due_date||null,w.value=t.value.priority||"medium",X()}catch(S){m.value="Failed to load task details.",console.error("Error fetching task details:",S)}finally{f.value=!1}},X=async()=>{j.value=!0;try{const S=await window.axios.get("/api/activities",{params:{subject_type:"App\\Models\\Task",subject_id:d.taskId}});G.value=S.data}catch(S){console.error("Error fetching task activities:",S)}finally{j.value=!1}};re(()=>d.taskId,S=>{S?($(),O()):(t.value=null,z.value=[])},{immediate:!0});const K=T([]),fe=T(!1),ut=F(()=>((K.value&&K.value.length?K.value:d.projectUsers)||[]).map(h=>({value:h.id,label:h.name}))),Ct=async()=>{const S=g.value;if(S){fe.value=!0;try{const h=await window.axios.get(`/api/projects/${S}/users`);K.value=h.data||[]}catch(h){console.error("Failed to fetch project users",h),ue("Could not load project users")}finally{fe.value=!1}}},St=async()=>{if(!t.value||B.value===t.value.assigned_to_id){M.value=!1;return}try{const S=await window.axios.patch(`/api/tasks/${t.value.id}`,{assigned_to_user_id:B.value});t.value=S.data,s("task-updated",t.value),X()}catch(S){console.error("Error updating assigned user:",S),B.value=t.value.assigned_to_id,ue("Failed to update assigned user. Please try again.")}finally{M.value=!1}},Gt=async()=>{if(!t.value||x.value===t.value.due_date){y.value=!1;return}try{const S=await window.axios.patch(`/api/tasks/${t.value.id}`,{due_date:x.value});t.value=S.data,s("task-updated",t.value),X()}catch(S){console.error("Error updating due date:",S),x.value=t.value.due_date,ue("Failed to update due date. Please try again.")}finally{y.value=!1}},Pt=async()=>{if(!t.value||w.value===t.value.priority){R.value=!1;return}try{const S=await window.axios.patch(`/api/tasks/${t.value.id}`,{priority:w.value});t.value=S.data,s("task-updated",t.value)}catch(S){console.error("Error updating priority:",S),w.value=t.value.priority,ue("Failed to update priority. Please try again.")}finally{R.value=!1}},jt=()=>{Me.value=!0},Et=()=>{$(),Me.value=!1},It=async()=>{try{await Er(t.value),s("task-deleted",t.value.id),s("close")}catch(S){console.error("Error deleting task:",S)}},Vt=async()=>{try{t.value=await Mr(t.value),s("task-updated",t.value),X()}catch(S){console.error("Error starting task:",S)}},Bt=async()=>{try{t.value=await $r(t.value),s("task-updated",t.value),X()}catch(S){console.error("Error pausing task:",S)}},Dt=async()=>{try{t.value=await Cr(t.value),s("task-updated",t.value),X()}catch(S){console.error("Error resuming task:",S)}},Nt=async()=>{try{t.value=await Sr(t.value),s("task-updated",t.value),X()}catch(S){console.error("Error completing task:",S)}},Ut=async()=>{try{t.value=await jr(t.value),s("task-updated",t.value),X()}catch(S){console.error("Error revising task:",S)}},zt=()=>{var S;xe.value=!xe.value,xe.value&&((S=t.value.details)!=null&&S.checklist&&t.value.details.checklist.length>0?(Ae.value=JSON.parse(JSON.stringify(t.value.details.checklist)),Ae.value[Ae.value.length-1].name!==""&&Ae.value.push({name:"",completed:!1})):Ae.value=[{name:"",completed:!1}])},Lt=async()=>{if(!N.value){N.value=!0;try{const S=Ae.value.filter(Pe=>Pe.name.trim()!==""),h={details:{...t.value.details,checklist:S}},ve=await window.axios.patch(`/api/tasks/${t.value.id}`,h);t.value=ve.data,xe.value=!1,be("Checklist saved successfully"),s("task-updated",t.value)}catch(S){console.error("Error saving checklist:",S),ue("Failed to save checklist")}finally{N.value=!1}}},qe=T(!1),Ft=()=>{qe.value=!0},Rt=async S=>{try{t.value=await Gr(t.value,S),be("Task blocked successfully"),s("task-updated",t.value),X(),qe.value=!1}catch(h){console.error("Error blocking task:",h)}},Ot=async()=>{try{t.value=await Pr(t.value),s("task-updated",t.value),X()}catch(S){console.error("Error unblocking task:",S)}},Wt=F(()=>t.value?Ir(t.value.status):""),tt=F(()=>{var h,ve,Pe,Ne;if(!G.value||((h=t.value)==null?void 0:h.status)!=="Blocked")return null;const S=G.value.find(Ue=>{var ze,Le;return Ue.event==="updated"&&((Le=(ze=Ue.properties)==null?void 0:ze.attributes)==null?void 0:Le.status)==="Blocked"});return S?(console.log(S.properties),{causer:((ve=S.causer)==null?void 0:ve.name)||"Unknown",reason:((Ne=(Pe=S.properties)==null?void 0:Pe.attributes)==null?void 0:Ne.block_reason)||"No reason provided."}):null});return(S,h)=>{var ve,Pe,Ne,Ue,ze,Le,dt;return l(),i("div",null,[f.value?(l(),i("div",Rr," Loading task details... ")):m.value?(l(),i("div",Or,P(m.value),1)):t.value?(l(),i("div",Wr,[e("div",Hr,[e("h4",Kr,P(t.value.name),1),e("div",qr,[e("span",{class:J(["px-2 py-1 rounded-full text-xs font-medium",Wt.value])},P(t.value.status),3),t.value.task_type?(l(),i("span",Jr," | "+P((ve=t.value.task_type)==null?void 0:ve.name)+" | ",1)):A("",!0),h[12]||(h[12]=e("br",null,null,-1)),(Pe=t.value.milestone)!=null&&Pe.name?(l(),i("span",Yr,P((Ne=t.value.milestone)==null?void 0:Ne.name),1)):A("",!0)]),e("p",Qr,P(t.value.description||"No description provided."),1),e("div",Zr,[t.value.status==="To Do"?(l(),V(pe,{key:0,onClick:Vt,class:"bg-blue-600 hover:bg-blue-700"},{default:k(()=>h[13]||(h[13]=[_(" Start Task ",-1)])),_:1,__:[13]})):t.value.status==="In Progress"?(l(),V(pe,{key:1,onClick:Bt,class:"bg-orange-600 hover:bg-orange-700"},{default:k(()=>h[14]||(h[14]=[_(" Pause Task ",-1)])),_:1,__:[14]})):t.value.status==="Paused"?(l(),V(pe,{key:2,onClick:Dt,class:"bg-blue-600 hover:bg-blue-700"},{default:k(()=>h[15]||(h[15]=[_(" Resume Task ",-1)])),_:1,__:[15]})):t.value.status==="Blocked"?(l(),V(pe,{key:3,onClick:Ot,class:"bg-green-600 hover:bg-green-700"},{default:k(()=>h[16]||(h[16]=[_(" Unblock Task ",-1)])),_:1,__:[16]})):A("",!0),t.value.status==="To Do"||t.value.status==="In Progress"||t.value.status==="Paused"?(l(),V(pe,{key:4,onClick:Ft,class:"bg-red-600 hover:bg-red-700"},{default:k(()=>h[17]||(h[17]=[_(" Block Task ",-1)])),_:1,__:[17]})):A("",!0),t.value.status==="In Progress"?(l(),V(pe,{key:5,onClick:Nt,class:"bg-green-600 hover:bg-green-700"},{default:k(()=>h[18]||(h[18]=[_(" Complete Task ",-1)])),_:1,__:[18]})):A("",!0),t.value.status==="Done"?(l(),V(pe,{key:6,onClick:Ut,class:"bg-yellow-600 hover:bg-yellow-700"},{default:k(()=>h[19]||(h[19]=[_(" Revise Task ",-1)])),_:1,__:[19]})):A("",!0)]),t.value.status==="Done"?(l(),i("div",Xr,' Revising will change the task status back to "To Do" ')):A("",!0)]),t.value.status==="Blocked"&&tt.value?(l(),i("div",en,[e("div",tn,[h[21]||(h[21]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.487 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11.75 13a.75.75 0 01-1.5 0v-2.25a.75.75 0 011.5 0V13zm-1.5-7.5a.75.75 0 011.5 0v1.5a.75.75 0 01-1.5 0V5.5z","clip-rule":"evenodd"})])],-1)),e("div",an,[h[20]||(h[20]=e("h3",{class:"text-sm font-medium text-yellow-800"},"Task Blocked",-1)),e("div",ln,[e("p",null,"This task was blocked by **"+P(tt.value.causer)+"** with the following reason:",1),e("p",null,P(tt.value.reason),1)])])])])):A("",!0),t.value.needs_approval?(l(),i("div",sn,[e("div",on,[h[26]||(h[26]=e("svg",{class:"h-5 w-5 text-amber-500 mt-0.5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.487 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0V9a1 1 0 112 0v4zm-1 4a1.25 1.25 0 100-2.5A1.25 1.25 0 0010 17z","clip-rule":"evenodd"})],-1)),e("div",rn,[h[25]||(h[25]=e("h3",{class:"text-sm font-semibold text-amber-800"},"Approval required",-1)),e("p",nn,[h[23]||(h[23]=_(" Once completed, this task needs approval",-1)),t.value.creator_name?(l(),i("span",un,[h[22]||(h[22]=_(" from ",-1)),e("span",dn,P(t.value.creator_name),1)])):A("",!0),h[24]||(h[24]=_(". ",-1))])])])])):A("",!0),e("div",cn,[e("div",mn,[h[27]||(h[27]=e("h5",{class:"text-lg font-semibold text-gray-800"},"Task Checklist",-1)),e("button",{onClick:zt,class:"text-indigo-600 hover:text-indigo-800 text-sm font-medium flex items-center"},[xe.value?(l(),i("span",pn,"Cancel")):(l(),i("span",vn,P((Ue=t.value.details)!=null&&Ue.checklist&&t.value.details.checklist.length>0?"Edit Checklist":"Add Checklist"),1))])]),xe.value?(l(),i("div",fn,[c(Br,{modelValue:Ae.value,"onUpdate:modelValue":h[0]||(h[0]=Y=>Ae.value=Y),placeholder:"e.g., Review design, Update documentation",label:"Checklist Items",density:"notes"},null,8,["modelValue"]),e("div",gn,[c(pe,{onClick:Lt,disabled:N.value,class:"flex items-center space-x-1"},{default:k(()=>[c(U(Zo),{class:"h-4 w-4"}),h[28]||(h[28]=e("span",null,"Save Checklist",-1))]),_:1,__:[28]},8,["disabled"])])])):A("",!0),(ze=t.value.details)!=null&&ze.checklist&&t.value.details.checklist.length>0&&!xe.value?(l(),V(ra,{key:1,items:t.value.details.checklist,"api-endpoint":`/api/tasks/${t.value.id}`,title:"Items to complete:","payload-transformer":Y=>({details:{...t.value.details,checklist:Y}})},null,8,["items","api-endpoint","payload-transformer"])):A("",!0),(!((Le=t.value.details)!=null&&Le.checklist)||t.value.details.checklist.length===0)&&!xe.value?(l(),i("div",bn,' No checklist items for this task yet. Click "Add Checklist" to create one. ')):A("",!0)]),e("div",yn,[h[34]||(h[34]=e("h5",{class:"text-lg font-semibold text-gray-800 border-b pb-2 mb-4"},"Task Attributes",-1)),e("div",hn,[c(q,{class:"min-w-[100px] text-gray-600"},{default:k(()=>h[29]||(h[29]=[_("Assigned To:",-1)])),_:1,__:[29]}),e("div",kn,[M.value?(l(),i("div",xn,[c(ge,{id:"edit-assigned-to",modelValue:B.value,"onUpdate:modelValue":h[2]||(h[2]=Y=>B.value=Y),options:ut.value,"value-key":"value","label-key":"label",placeholder:"Unassigned",class:"mt-1 flex-1","allow-empty":!0},null,8,["modelValue","options"]),e("button",{onClick:St,class:"text-green-600 hover:text-green-800 text-sm font-medium"},"Save"),e("button",{onClick:h[3]||(h[3]=Y=>M.value=!1),class:"text-gray-600 hover:text-gray-800 text-sm font-medium"},"Cancel")])):(l(),i("div",{key:0,onClick:h[1]||(h[1]=Y=>t.value.status!=="Done"?(Ct(),M.value=!0):ke("Cannot change assignment for a completed task. Use the Revise button to change the task status first.")),class:J(["cursor-pointer",{"text-indigo-600 hover:text-indigo-800":t.value.status!=="Done","text-gray-500":t.value.status==="Done"}])},[_(P(((dt=t.value.assigned_to)==null?void 0:dt.name)||"Unassigned")+" ",1),t.value.status!=="Done"?(l(),i("span",wn,"(Click to edit)")):A("",!0)],2))])]),e("div",_n,[c(q,{class:"min-w-[100px] text-gray-600"},{default:k(()=>h[30]||(h[30]=[_("Due Date:",-1)])),_:1,__:[30]}),e("div",An,[y.value?(l(),i("div",Mn,[c(ye,{id:"edit-due-date",modelValue:x.value,"onUpdate:modelValue":h[5]||(h[5]=Y=>x.value=Y),type:"date",class:"mt-1 flex-1"},null,8,["modelValue"]),e("button",{onClick:Gt,class:"text-green-600 hover:text-green-800 text-sm font-medium"},"Save"),e("button",{onClick:h[6]||(h[6]=Y=>y.value=!1),class:"text-gray-600 hover:text-gray-800 text-sm font-medium"},"Cancel")])):(l(),i("div",{key:0,onClick:h[4]||(h[4]=Y=>v.value?y.value=!0:null),class:J(["cursor-pointer",v.value?"text-indigo-600 hover:text-indigo-800":"text-gray-700 cursor-default"])},[_(P(t.value.due_date?U(ia)(t.value.due_date).format("MMM D, YYYY"):"No Due Date")+" ",1),v.value?(l(),i("span",Tn,"(Click to edit)")):A("",!0)],2))])]),e("div",$n,[c(q,{class:"min-w-[100px] text-gray-600"},{default:k(()=>h[31]||(h[31]=[_("Priority:",-1)])),_:1,__:[31]}),e("div",Cn,[R.value?(l(),i("div",Gn,[c(ge,{id:"edit-priority",modelValue:w.value,"onUpdate:modelValue":h[8]||(h[8]=Y=>w.value=Y),options:Ve,"value-key":"value","label-key":"label",placeholder:"Select priority",class:"mt-1 flex-1"},null,8,["modelValue"]),e("button",{onClick:Pt,class:"text-green-600 hover:text-green-800 text-sm font-medium"},"Save"),e("button",{onClick:h[9]||(h[9]=Y=>R.value=!1),class:"text-gray-600 hover:text-gray-800 text-sm font-medium"},"Cancel")])):(l(),i("div",{key:0,onClick:h[7]||(h[7]=Y=>t.value.status!=="Done"?R.value=!0:ke("Cannot change priority for a completed task. Use the Revise button to change the task status first.")),class:J(["cursor-pointer",{"text-indigo-600 hover:text-indigo-800":t.value.status!=="Done","text-gray-500":t.value.status==="Done"}])},[e("span",{class:J({"text-red-600 font-medium":t.value.priority==="high","text-yellow-600 font-medium":t.value.priority==="medium","text-green-600 font-medium":t.value.priority==="low"})},P(t.value.priority?t.value.priority.charAt(0).toUpperCase()+t.value.priority.slice(1):"Medium"),3),t.value.status!=="Done"?(l(),i("span",Sn,"(Click to edit)")):A("",!0)],2))])]),e("div",Pn,[c(q,{class:"min-w-[100px] text-gray-600"},{default:k(()=>h[32]||(h[32]=[_("Created:",-1)])),_:1,__:[32]}),e("span",jn,P(t.value.created_at?new Date(t.value.created_at).toLocaleDateString():"N/A"),1)]),e("div",En,[c(q,{class:"min-w-[100px] text-gray-600 mt-1"},{default:k(()=>h[33]||(h[33]=[_("Tags:",-1)])),_:1,__:[33]}),e("div",In,[(l(!0),i(Z,null,ie(t.value.tags,Y=>(l(),i("span",{key:Y.id,class:"inline-flex items-center px-3 py-1 text-sm font-medium bg-indigo-100 text-indigo-800 rounded-full shadow-sm"},P(Y.name),1))),128)),!t.value.tags||t.value.tags.length===0?(l(),i("span",Vn,"No tags")):A("",!0)])])]),e("div",Bn,[e("div",Dn,[e("div",Nn,[h[36]||(h[36]=e("h5",{class:"text-lg font-semibold text-gray-800"},"Files",-1)),e("div",Un,[e("button",{type:"button",class:"inline-flex items-center px-4 py-2 rounded-md bg-indigo-600 text-white hover:bg-indigo-700 transition disabled:opacity-60 disabled:cursor-not-allowed",disabled:I.value||E.value.length===0,onClick:C},[I.value?(l(),i("svg",Ln,h[35]||(h[35]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"},null,-1)]))):A("",!0),e("span",null,P(I.value?"Uploading...":"Upload"),1)],8,zn)])]),e("div",Fn,[e("label",Rn,[h[37]||(h[37]=e("svg",{class:"h-5 w-5 mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1M4 12l1.5-1.5M20 12l-1.5-1.5M12 4v12"})],-1)),h[38]||(h[38]=e("span",{class:"font-medium"},"Choose Files",-1)),e("input",{class:"absolute inset-0 opacity-0 cursor-pointer",type:"file",multiple:"",onChange:D,disabled:I.value},null,40,On)]),h[39]||(h[39]=e("p",{class:"text-xs text-gray-500"},"You can select multiple files. Images, PDFs, Docs are supported.",-1))]),E.value.length?(l(),i("div",Wn,[(l(!0),i(Z,null,ie(E.value,(Y,Be)=>(l(),i("span",{key:Be,class:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-gray-100 text-gray-800 text-xs"},[h[40]||(h[40]=e("svg",{class:"h-4 w-4 text-indigo-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})],-1)),e("span",{class:"max-w-[160px] truncate",title:Y.name},P(Y.name),9,Hn),e("button",{type:"button",class:"text-gray-500 hover:text-red-600",onClick:Uu=>E.value=E.value.filter((zu,Ht)=>Ht!==Be)},"×",8,Kn)]))),128))])):A("",!0)]),e("div",null,[ee.value?(l(),i("div",qn,[(l(),i(Z,null,ie(6,Y=>e("div",{key:Y,class:"h-28 bg-gray-100 rounded animate-pulse"})),64))])):z.value.length>0?(l(),i("div",Jn,[(l(!0),i(Z,null,ie(z.value,Y=>(l(),i("div",{key:Y.id,class:"group relative rounded-lg border border-gray-200 overflow-hidden bg-white shadow-sm hover:shadow-md transition"},[e("div",Yn,[de(Y)?(l(),i("img",{key:0,src:de(Y),alt:Y.filename,class:"object-cover w-full h-full",onClick:Be=>te(Y)},null,8,Qn)):(l(),i("div",{key:1,class:"text-gray-400",onClick:Be=>te(Y)},h[41]||(h[41]=[e("svg",{class:"h-10 w-10",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})],-1)]),8,Zn))]),e("div",Xn,[e("button",{class:"text-xs text-blue-600 hover:underline truncate max-w-[70%] text-left",title:Y.filename,onClick:Be=>te(Y)},P(Y.filename),9,eu),e("button",{class:"text-red-600 hover:text-red-800 text-xs",onClick:Be=>Q(Y)},"Delete",8,tu)])]))),128))])):(l(),i("div",au,"No files attached."))])]),e("div",lu,[e("div",su,[h[43]||(h[43]=e("h5",{class:"text-lg font-semibold text-gray-800"},"Notes",-1)),c(pe,{onClick:jt,class:"bg-indigo-600 hover:bg-indigo-700 transition-colors"},{default:k(()=>h[42]||(h[42]=[_(" Add Note ",-1)])),_:1,__:[42]})]),t.value.notes&&t.value.notes.length>0?(l(),i("div",ou,[(l(!0),i(Z,null,ie(t.value.notes,Y=>(l(),i("div",{key:Y.id,class:"p-3 bg-gray-50 rounded-md"},[e("p",iu,P(Y.content),1),e("p",ru," By "+P(Y.creator_name||"Unknown")+" on "+P(new Date(Y.created_at).toLocaleDateString()),1)]))),128))])):(l(),i("div",nu,"No notes for this task yet."))]),e("div",uu,[h[44]||(h[44]=e("h5",{class:"text-lg font-semibold text-gray-800 border-b pb-2 mb-4"},"History",-1)),c(Tr,{activities:G.value,loading:j.value},null,8,["activities","loading"])])])):(l(),i("div",du," Select a task to view details. ")),t.value&&t.value.status!=="Done"?(l(),i("div",cu,[c(rt,{onClick:It,disabled:t.value.status!=="To Do"},{default:k(()=>h[45]||(h[45]=[_(" Delete Task ",-1)])),_:1,__:[45]},8,["disabled"]),t.value.status!=="To Do"?(l(),i("p",mu,"Task can only be deleted in 'To Do' status.")):A("",!0)])):A("",!0),c(fr,{show:Me.value,"task-for-note":t.value,onClose:h[10]||(h[10]=Y=>Me.value=!1),onNoteAdded:Et},null,8,["show","task-for-note"]),c(Fr,{show:qe.value,title:"Block Task","confirm-text":"Block Task",placeholder:"Enter reason for blocking...",onClose:h[11]||(h[11]=Y=>qe.value=!1),onConfirm:Rt},null,8,["show"]),c(He,{show:oe.value,onClose:H},{default:k(()=>[e("div",vu,[e("div",pu,[e("h3",{class:"text-lg font-semibold text-gray-800 truncate",title:W.value&&W.value.filename?W.value.filename:""},P(W.value&&W.value.filename?W.value.filename:"Preview"),9,fu),e("button",{class:"text-gray-500 hover:text-gray-700",onClick:H},"✕")]),e("div",gu,[_(P(he.value.type)+" ",1),he.value.type==="iframe"?(l(),i("iframe",{key:0,src:he.value.src,class:"w-full h-[70vh]",frameborder:"0",allow:"autoplay; encrypted-media",allowfullscreen:""},null,8,bu)):he.value.type==="image"?(l(),i("img",{key:1,src:he.value.src,alt:"Preview",class:"w-full h-auto"},null,8,yu)):he.value.type==="external_link"?(l(),i("div",hu,[h[46]||(h[46]=e("p",null,"This file can't be embedded. You can open it using the link below:",-1)),e("a",{href:he.value.url,target:"_blank",class:"text-indigo-600 hover:underline break-all"},P(he.value.url),9,ku)])):(l(),i("div",wu,"No preview available."))])])]),_:1},8,["show"])])}}},_u={key:1,class:"p-4 text-gray-500"},Au={key:0,class:"flex justify-end space-x-3"},Tu={__name:"TaskSidebar",emits:["taskUpdated","taskDeleted"],setup(u){const p=T(null);return(d,s)=>(l(),V($t,{show:U(Se).show,"onUpdate:show":U(at),title:U(Se).taskId?"Task Details":"Details",initialWidth:50},{content:k(()=>[U(Se).taskId?(l(),V(xu,{key:0,"task-id":U(Se).taskId,"project-id":U(Se).projectId,"project-users":U(Se).projectUsers,ref_key:"taskDetailSidebarRef",ref:p,onClose:U(at),onTaskUpdated:s[0]||(s[0]=t=>{d.$emit("taskUpdated",t)}),onTaskDeleted:s[1]||(s[1]=t=>{d.$emit("taskDeleted",t),U(at)()})},null,8,["task-id","project-id","project-users","onClose"])):U(Se).show?(l(),i("div",_u," No task selected or task ID is missing. ")):A("",!0)]),footer:k(()=>[U(Se).taskId?(l(),i("div",Au,[p.value&&p.value.task&&p.value.task.status!=="In Progress"&&p.value.task.status!=="Done"?(l(),V(Ze,{key:0,onClick:p.value.startTask,class:"bg-blue-50 text-blue-700 hover:bg-blue-100"},{default:k(()=>s[2]||(s[2]=[_(" Start Task ",-1)])),_:1,__:[2]},8,["onClick"])):A("",!0),p.value&&p.value.task&&p.value.task.status==="In Progress"?(l(),V(Ze,{key:1,onClick:p.value.completeTask,class:"bg-green-50 text-green-700 hover:bg-green-100"},{default:k(()=>s[3]||(s[3]=[_(" Complete Task ",-1)])),_:1,__:[3]},8,["onClick"])):A("",!0),p.value&&p.value.task?(l(),V(rt,{key:2,onClick:p.value.deleteTask,class:"bg-red-50 text-red-700 hover:bg-red-100"},{default:k(()=>s[4]||(s[4]=[_(" Delete Task ",-1)])),_:1,__:[4]},8,["onClick"])):A("",!0)])):A("",!0)]),_:1},8,["show","onUpdate:show","title"]))}},lt=T(!1),Fe=T([]),st=T(!1);function Mu(){const u=async()=>{var s;try{const t=await se.get("/api/notices/unread");Fe.value=((s=t.data)==null?void 0:s.data)||[],lt.value=Fe.value.length>0}catch(t){console.error("Failed to fetch unread notices",t)}},p=async()=>{if(st.value)try{const s=Fe.value.map(t=>t.id);if(s.length===0)return;await se.post("/api/notices/acknowledge",{notice_ids:s}),d()}catch(s){console.error("Failed to acknowledge notices",s)}},d=()=>{lt.value=!1,Fe.value=[],st.value=!1};return we(()=>{u()}),Tt(()=>{}),{showNoticeModal:lt,unreadNotices:Fe,acknowledgeChecked:st,fetchUnreadNotices:u,acknowledgeNotices:p,closeModal:d}}const $u={class:"mb-4"},Cu={__name:"TimezoneSelect",props:{modelValue:{type:String,default:null},label:{type:String,default:"Timezone"},placeholder:{type:String,default:"Select a timezone"},disabled:{type:Boolean,default:!1},required:{type:Boolean,default:!1},error:{type:String,default:""}},emits:["update:modelValue","change"],setup(u,{emit:p}){const d=u,s=p,t=F(()=>[{value:"Africa/Abidjan",label:"Africa/Abidjan (GMT+00:00)"},{value:"Africa/Accra",label:"Africa/Accra (GMT+00:00)"},{value:"Africa/Addis_Ababa",label:"Africa/Addis_Ababa (GMT+03:00)"},{value:"Africa/Algiers",label:"Africa/Algiers (GMT+01:00)"},{value:"Africa/Asmara",label:"Africa/Asmara (GMT+03:00)"},{value:"Africa/Bamako",label:"Africa/Bamako (GMT+00:00)"},{value:"Africa/Bangui",label:"Africa/Bangui (GMT+01:00)"},{value:"Africa/Banjul",label:"Africa/Banjul (GMT+00:00)"},{value:"Africa/Bissau",label:"Africa/Bissau (GMT+00:00)"},{value:"Africa/Blantyre",label:"Africa/Blantyre (GMT+02:00)"},{value:"Africa/Brazzaville",label:"Africa/Brazzaville (GMT+01:00)"},{value:"Africa/Bujumbura",label:"Africa/Bujumbura (GMT+02:00)"},{value:"Africa/Cairo",label:"Africa/Cairo (GMT+02:00)"},{value:"Africa/Casablanca",label:"Africa/Casablanca (GMT+01:00)"},{value:"Africa/Ceuta",label:"Africa/Ceuta (GMT+01:00)"},{value:"Africa/Conakry",label:"Africa/Conakry (GMT+00:00)"},{value:"Africa/Dakar",label:"Africa/Dakar (GMT+00:00)"},{value:"Africa/Dar_es_Salaam",label:"Africa/Dar_es_Salaam (GMT+03:00)"},{value:"Africa/Djibouti",label:"Africa/Djibouti (GMT+03:00)"},{value:"Africa/Douala",label:"Africa/Douala (GMT+01:00)"},{value:"Africa/El_Aaiun",label:"Africa/El_Aaiun (GMT+01:00)"},{value:"Africa/Freetown",label:"Africa/Freetown (GMT+00:00)"},{value:"Africa/Gaborone",label:"Africa/Gaborone (GMT+02:00)"},{value:"Africa/Harare",label:"Africa/Harare (GMT+02:00)"},{value:"Africa/Johannesburg",label:"Africa/Johannesburg (GMT+02:00)"},{value:"Africa/Juba",label:"Africa/Juba (GMT+03:00)"},{value:"Africa/Kampala",label:"Africa/Kampala (GMT+03:00)"},{value:"Africa/Khartoum",label:"Africa/Khartoum (GMT+02:00)"},{value:"Africa/Kigali",label:"Africa/Kigali (GMT+02:00)"},{value:"Africa/Kinshasa",label:"Africa/Kinshasa (GMT+01:00)"},{value:"Africa/Lagos",label:"Africa/Lagos (GMT+01:00)"},{value:"Africa/Libreville",label:"Africa/Libreville (GMT+01:00)"},{value:"Africa/Lome",label:"Africa/Lome (GMT+00:00)"},{value:"Africa/Luanda",label:"Africa/Luanda (GMT+01:00)"},{value:"Africa/Lubumbashi",label:"Africa/Lubumbashi (GMT+02:00)"},{value:"Africa/Lusaka",label:"Africa/Lusaka (GMT+02:00)"},{value:"Africa/Malabo",label:"Africa/Malabo (GMT+01:00)"},{value:"Africa/Maputo",label:"Africa/Maputo (GMT+02:00)"},{value:"Africa/Maseru",label:"Africa/Maseru (GMT+02:00)"},{value:"Africa/Mbabane",label:"Africa/Mbabane (GMT+02:00)"},{value:"Africa/Mogadishu",label:"Africa/Mogadishu (GMT+03:00)"},{value:"Africa/Monrovia",label:"Africa/Monrovia (GMT+00:00)"},{value:"Africa/Nairobi",label:"Africa/Nairobi (GMT+03:00)"},{value:"Africa/Ndjamena",label:"Africa/Ndjamena (GMT+01:00)"},{value:"Africa/Niamey",label:"Africa/Niamey (GMT+01:00)"},{value:"Africa/Nouakchott",label:"Africa/Nouakchott (GMT+00:00)"},{value:"Africa/Ouagadougou",label:"Africa/Ouagadougou (GMT+00:00)"},{value:"Africa/Porto-Novo",label:"Africa/Porto-Novo (GMT+01:00)"},{value:"Africa/Sao_Tome",label:"Africa/Sao_Tome (GMT+00:00)"},{value:"Africa/Tripoli",label:"Africa/Tripoli (GMT+02:00)"},{value:"Africa/Tunis",label:"Africa/Tunis (GMT+01:00)"},{value:"Africa/Windhoek",label:"Africa/Windhoek (GMT+02:00)"},{value:"America/Adak",label:"America/Adak (GMT-10:00)"},{value:"America/Anchorage",label:"America/Anchorage (GMT-09:00)"},{value:"America/Anguilla",label:"America/Anguilla (GMT-04:00)"},{value:"America/Antigua",label:"America/Antigua (GMT-04:00)"},{value:"America/Araguaina",label:"America/Araguaina (GMT-03:00)"},{value:"America/Argentina/Buenos_Aires",label:"America/Argentina/Buenos_Aires (GMT-03:00)"},{value:"America/Argentina/Catamarca",label:"America/Argentina/Catamarca (GMT-03:00)"},{value:"America/Argentina/Cordoba",label:"America/Argentina/Cordoba (GMT-03:00)"},{value:"America/Argentina/Jujuy",label:"America/Argentina/Jujuy (GMT-03:00)"},{value:"America/Argentina/La_Rioja",label:"America/Argentina/La_Rioja (GMT-03:00)"},{value:"America/Argentina/Mendoza",label:"America/Argentina/Mendoza (GMT-03:00)"},{value:"America/Argentina/Rio_Gallegos",label:"America/Argentina/Rio_Gallegos (GMT-03:00)"},{value:"America/Argentina/Salta",label:"America/Argentina/Salta (GMT-03:00)"},{value:"America/Argentina/San_Juan",label:"America/Argentina/San_Juan (GMT-03:00)"},{value:"America/Argentina/San_Luis",label:"America/Argentina/San_Luis (GMT-03:00)"},{value:"America/Argentina/Tucuman",label:"America/Argentina/Tucuman (GMT-03:00)"},{value:"America/Argentina/Ushuaia",label:"America/Argentina/Ushuaia (GMT-03:00)"},{value:"America/Aruba",label:"America/Aruba (GMT-04:00)"},{value:"America/Asuncion",label:"America/Asuncion (GMT-04:00)"},{value:"America/Atikokan",label:"America/Atikokan (GMT-05:00)"},{value:"America/Bahia",label:"America/Bahia (GMT-03:00)"},{value:"America/Bahia_Banderas",label:"America/Bahia_Banderas (GMT-06:00)"},{value:"America/Barbados",label:"America/Barbados (GMT-04:00)"},{value:"America/Belem",label:"America/Belem (GMT-03:00)"},{value:"America/Belize",label:"America/Belize (GMT-06:00)"},{value:"America/Blanc-Sablon",label:"America/Blanc-Sablon (GMT-04:00)"},{value:"America/Boa_Vista",label:"America/Boa_Vista (GMT-04:00)"},{value:"America/Bogota",label:"America/Bogota (GMT-05:00)"},{value:"America/Boise",label:"America/Boise (GMT-06:00)"},{value:"America/Cambridge_Bay",label:"America/Cambridge_Bay (GMT-06:00)"},{value:"America/Campo_Grande",label:"America/Campo_Grande (GMT-04:00)"},{value:"America/Cancun",label:"America/Cancun (GMT-05:00)"},{value:"America/Caracas",label:"America/Caracas (GMT-04:00)"},{value:"America/Cayenne",label:"America/Cayenne (GMT-03:00)"},{value:"America/Cayman",label:"America/Cayman (GMT-05:00)"},{value:"America/Chicago",label:"America/Chicago (GMT-05:00)"},{value:"America/Chihuahua",label:"America/Chihuahua (GMT-06:00)"},{value:"America/Ciudad_Juarez",label:"America/Ciudad_Juarez (GMT-06:00)"},{value:"America/Costa_Rica",label:"America/Costa_Rica (GMT-06:00)"},{value:"America/Creston",label:"America/Creston (GMT-07:00)"},{value:"America/Cuiaba",label:"America/Cuiaba (GMT-04:00)"},{value:"America/Curacao",label:"America/Curacao (GMT-04:00)"},{value:"America/Danmarkshavn",label:"America/Danmarkshavn (GMT+00:00)"},{value:"America/Dawson",label:"America/Dawson (GMT-07:00)"},{value:"America/Dawson_Creek",label:"America/Dawson_Creek (GMT-07:00)"},{value:"America/Denver",label:"America/Denver (GMT-06:00)"},{value:"America/Detroit",label:"America/Detroit (GMT-04:00)"},{value:"America/Dominica",label:"America/Dominica (GMT-04:00)"},{value:"America/Edmonton",label:"America/Edmonton (GMT-06:00)"},{value:"America/Eirunepe",label:"America/Eirunepe (GMT-05:00)"},{value:"America/El_Salvador",label:"America/El_Salvador (GMT-06:00)"},{value:"America/Fort_Nelson",label:"America/Fort_Nelson (GMT-07:00)"},{value:"America/Fortaleza",label:"America/Fortaleza (GMT-03:00)"},{value:"America/Glace_Bay",label:"America/Glace_Bay (GMT-03:00)"},{value:"America/Goose_Bay",label:"America/Goose_Bay (GMT-03:00)"},{value:"America/Grand_Turk",label:"America/Grand_Turk (GMT-04:00)"},{value:"America/Grenada",label:"America/Grenada (GMT-04:00)"},{value:"America/Guadeloupe",label:"America/Guadeloupe (GMT-04:00)"},{value:"America/Guatemala",label:"America/Guatemala (GMT-06:00)"},{value:"America/Guayaquil",label:"America/Guayaquil (GMT-05:00)"},{value:"America/Guyana",label:"America/Guyana (GMT-04:00)"},{value:"America/Halifax",label:"America/Halifax (GMT-03:00)"},{value:"America/Havana",label:"America/Havana (GMT-04:00)"},{value:"America/Hermosillo",label:"America/Hermosillo (GMT-07:00)"},{value:"America/Indiana/Indianapolis",label:"America/Indiana/Indianapolis (GMT-04:00)"},{value:"America/Indiana/Knox",label:"America/Indiana/Knox (GMT-05:00)"},{value:"America/Indiana/Marengo",label:"America/Indiana/Marengo (GMT-04:00)"},{value:"America/Indiana/Petersburg",label:"America/Indiana/Petersburg (GMT-04:00)"},{value:"America/Indiana/Vevay",label:"America/Indiana/Vevay (GMT-04:00)"},{value:"America/Indiana/Vincennes",label:"America/Indiana/Vincennes (GMT-04:00)"},{value:"America/Indiana/Winamac",label:"America/Indiana/Winamac (GMT-04:00)"},{value:"America/Inuvik",label:"America/Inuvik (GMT-06:00)"},{value:"America/Iqaluit",label:"America/Iqaluit (GMT-04:00)"},{value:"America/Jamaica",label:"America/Jamaica (GMT-05:00)"},{value:"America/Juneau",label:"America/Juneau (GMT-08:00)"},{value:"America/Kentucky/Louisville",label:"America/Kentucky/Louisville (GMT-04:00)"},{value:"America/Kentucky/Monticello",label:"America/Kentucky/Monticello (GMT-04:00)"},{value:"America/La_Paz",label:"America/La_Paz (GMT-04:00)"},{value:"America/Lima",label:"America/Lima (GMT-05:00)"},{value:"America/Los_Angeles",label:"America/Los_Angeles (GMT-07:00)"},{value:"America/Lower_Princes",label:"America/Lower_Princes (GMT-04:00)"},{value:"America/Maceio",label:"America/Maceio (GMT-03:00)"},{value:"America/Managua",label:"America/Managua (GMT-06:00)"},{value:"America/Manaus",label:"America/Manaus (GMT-04:00)"},{value:"America/Marigot",label:"America/Marigot (GMT-04:00)"},{value:"America/Martinique",label:"America/Martinique (GMT-04:00)"},{value:"America/Matamoros",label:"America/Matamoros (GMT-05:00)"},{value:"America/Mazatlan",label:"America/Mazatlan (GMT-06:00)"},{value:"America/Menominee",label:"America/Menominee (GMT-05:00)"},{value:"America/Merida",label:"America/Merida (GMT-05:00)"},{value:"America/Metlakatla",label:"America/Metlakatla (GMT-08:00)"},{value:"America/Mexico_City",label:"America/Mexico_City (GMT-05:00)"},{value:"America/Miquelon",label:"America/Miquelon (GMT-02:00)"},{value:"America/Moncton",label:"America/Moncton (GMT-03:00)"},{value:"America/Monterrey",label:"America/Monterrey (GMT-05:00)"},{value:"America/Montevideo",label:"America/Montevideo (GMT-03:00)"},{value:"America/Montserrat",label:"America/Montserrat (GMT-04:00)"},{value:"America/Nassau",label:"America/Nassau (GMT-04:00)"},{value:"America/New_York",label:"America/New_York (GMT-04:00)"},{value:"America/Nome",label:"America/Nome (GMT-08:00)"},{value:"America/Noronha",label:"America/Noronha (GMT-02:00)"},{value:"America/North_Dakota/Beulah",label:"America/North_Dakota/Beulah (GMT-05:00)"},{value:"America/North_Dakota/Center",label:"America/North_Dakota/Center (GMT-05:00)"},{value:"America/North_Dakota/New_Salem",label:"America/North_Dakota/New_Salem (GMT-05:00)"},{value:"America/Nuuk",label:"America/Nuuk (GMT-02:00)"},{value:"America/Ojinaga",label:"America/Ojinaga (GMT-06:00)"},{value:"America/Panama",label:"America/Panama (GMT-05:00)"},{value:"America/Paramaribo",label:"America/Paramaribo (GMT-03:00)"},{value:"America/Phoenix",label:"America/Phoenix (GMT-07:00)"},{value:"America/Port-au-Prince",label:"America/Port-au-Prince (GMT-04:00)"},{value:"America/Port_of_Spain",label:"America/Port_of_Spain (GMT-04:00)"},{value:"America/Puerto_Rico",label:"America/Puerto_Rico (GMT-04:00)"},{value:"America/Punta_Arenas",label:"America/Punta_Arenas (GMT-03:00)"},{value:"America/Rankin_Inlet",label:"America/Rankin_Inlet (GMT-05:00)"},{value:"America/Recife",label:"America/Recife (GMT-03:00)"},{value:"America/Regina",label:"America/Regina (GMT-06:00)"},{value:"America/Resolute",label:"America/Resolute (GMT-05:00)"},{value:"America/Rio_Branco",label:"America/Rio_Branco (GMT-05:00)"},{value:"America/Santarem",label:"America/Santarem (GMT-03:00)"},{value:"America/Santiago",label:"America/Santiago (GMT-04:00)"},{value:"America/Santo_Domingo",label:"America/Santo_Domingo (GMT-04:00)"},{value:"America/Sao_Paulo",label:"America/Sao_Paulo (GMT-03:00)"},{value:"America/Scoresbysund",label:"America/Scoresbysund (GMT+00:00)"},{value:"America/Sitka",label:"America/Sitka (GMT-08:00)"},{value:"America/St_Barthelemy",label:"America/St_Barthelemy (GMT-04:00)"},{value:"America/St_Johns",label:"America/St_Johns (GMT-02:30)"},{value:"America/St_Kitts",label:"America/St_Kitts (GMT-04:00)"},{value:"America/St_Lucia",label:"America/St_Lucia (GMT-04:00)"},{value:"America/St_Thomas",label:"America/St_Thomas (GMT-04:00)"},{value:"America/St_Vincent",label:"America/St_Vincent (GMT-04:00)"},{value:"America/Swift_Current",label:"America/Swift_Current (GMT-06:00)"},{value:"America/Tegucigalpa",label:"America/Tegucigalpa (GMT-06:00)"},{value:"America/Thule",label:"America/Thule (GMT-03:00)"},{value:"America/Tijuana",label:"America/Tijuana (GMT-07:00)"},{value:"America/Toronto",label:"America/Toronto (GMT-04:00)"},{value:"America/Tortola",label:"America/Tortola (GMT-04:00)"},{value:"America/Vancouver",label:"America/Vancouver (GMT-07:00)"},{value:"America/Whitehorse",label:"America/Whitehorse (GMT-07:00)"},{value:"America/Winnipeg",label:"America/Winnipeg (GMT-05:00)"},{value:"America/Yakutat",label:"America/Yakutat (GMT-08:00)"},{value:"America/Yellowknife",label:"America/Yellowknife (GMT-06:00)"},{value:"Antarctica/Casey",label:"Antarctica/Casey (GMT+11:00)"},{value:"Antarctica/Davis",label:"Antarctica/Davis (GMT+07:00)"},{value:"Antarctica/DumontDUrville",label:"Antarctica/DumontDUrville (GMT+10:00)"},{value:"Antarctica/Macquarie",label:"Antarctica/Macquarie (GMT+11:00)"},{value:"Antarctica/Mawson",label:"Antarctica/Mawson (GMT+05:00)"},{value:"Antarctica/Palmer",label:"Antarctica/Palmer (GMT-03:00)"},{value:"Antarctica/Rothera",label:"Antarctica/Rothera (GMT-03:00)"},{value:"Antarctica/Syowa",label:"Antarctica/Syowa (GMT+03:00)"},{value:"Antarctica/Troll",label:"Antarctica/Troll (GMT+00:00)"},{value:"Antarctica/Vostok",label:"Antarctica/Vostok (GMT+06:00)"},{value:"Asia/Almaty",label:"Asia/Almaty (GMT+05:00)"},{value:"Asia/Amman",label:"Asia/Amman (GMT+03:00)"},{value:"Asia/Anadyr",label:"Asia/Anadyr (GMT+12:00)"},{value:"Asia/Aqtau",label:"Asia/Aqtau (GMT+05:00)"},{value:"Asia/Aqtobe",label:"Asia/Aqtobe (GMT+05:00)"},{value:"Asia/Ashgabat",label:"Asia/Ashgabat (GMT+05:00)"},{value:"Asia/Atyrau",label:"Asia/Atyrau (GMT+05:00)"},{value:"Asia/Baghdad",label:"Asia/Baghdad (GMT+03:00)"},{value:"Asia/Baku",label:"Asia/Baku (GMT+04:00)"},{value:"Asia/Bangkok",label:"Asia/Bangkok (GMT+07:00)"},{value:"Asia/Barnaul",label:"Asia/Barnaul (GMT+07:00)"},{value:"Asia/Beirut",label:"Asia/Beirut (GMT+03:00)"},{value:"Asia/Bishkek",label:"Asia/Bishkek (GMT+06:00)"},{value:"Asia/Brunei",label:"Asia/Brunei (GMT+08:00)"},{value:"Asia/Chita",label:"Asia/Chita (GMT+09:00)"},{value:"Asia/Choibalsan",label:"Asia/Choibalsan (GMT+08:00)"},{value:"Asia/Colombo",label:"Asia/Colombo (GMT+05:30)"},{value:"Asia/Damascus",label:"Asia/Damascus (GMT+03:00)"},{value:"Asia/Dhaka",label:"Asia/Dhaka (GMT+06:00)"},{value:"Asia/Dili",label:"Asia/Dili (GMT+09:00)"},{value:"Asia/Dubai",label:"Asia/Dubai (GMT+04:00)"},{value:"Asia/Dushanbe",label:"Asia/Dushanbe (GMT+05:00)"},{value:"Asia/Famagusta",label:"Asia/Famagusta (GMT+03:00)"},{value:"Asia/Gaza",label:"Asia/Gaza (GMT+03:00)"},{value:"Asia/Hebron",label:"Asia/Hebron (GMT+03:00)"},{value:"Asia/Ho_Chi_Minh",label:"Asia/Ho_Chi_Minh (GMT+07:00)"},{value:"Asia/Hong_Kong",label:"Asia/Hong_Kong (GMT+08:00)"},{value:"Asia/Hovd",label:"Asia/Hovd (GMT+07:00)"},{value:"Asia/Irkutsk",label:"Asia/Irkutsk (GMT+08:00)"},{value:"Asia/Jakarta",label:"Asia/Jakarta (GMT+07:00)"},{value:"Asia/Jayapura",label:"Asia/Jayapura (GMT+09:00)"},{value:"Asia/Jerusalem",label:"Asia/Jerusalem (GMT+03:00)"},{value:"Asia/Kabul",label:"Asia/Kabul (GMT+04:30)"},{value:"Asia/Kamchatka",label:"Asia/Kamchatka (GMT+12:00)"},{value:"Asia/Karachi",label:"Asia/Karachi (GMT+05:00)"},{value:"Asia/Kathmandu",label:"Asia/Kathmandu (GMT+05:45)"},{value:"Asia/Khandyga",label:"Asia/Khandyga (GMT+09:00)"},{value:"Asia/Kolkata",label:"Asia/Kolkata (GMT+05:30)"},{value:"Asia/Krasnoyarsk",label:"Asia/Krasnoyarsk (GMT+07:00)"},{value:"Asia/Kuala_Lumpur",label:"Asia/Kuala_Lumpur (GMT+08:00)"},{value:"Asia/Kuching",label:"Asia/Kuching (GMT+08:00)"},{value:"Asia/Kuwait",label:"Asia/Kuwait (GMT+03:00)"},{value:"Asia/Macau",label:"Asia/Macau (GMT+08:00)"},{value:"Asia/Magadan",label:"Asia/Magadan (GMT+11:00)"},{value:"Asia/Makassar",label:"Asia/Makassar (GMT+08:00)"},{value:"Asia/Manila",label:"Asia/Manila (GMT+08:00)"},{value:"Asia/Muscat",label:"Asia/Muscat (GMT+04:00)"},{value:"Asia/Nicosia",label:"Asia/Nicosia (GMT+03:00)"},{value:"Asia/Novokuznetsk",label:"Asia/Novokuznetsk (GMT+07:00)"},{value:"Asia/Novosibirsk",label:"Asia/Novosibirsk (GMT+07:00)"},{value:"Asia/Omsk",label:"Asia/Omsk (GMT+06:00)"},{value:"Asia/Oral",label:"Asia/Oral (GMT+05:00)"},{value:"Asia/Phnom_Penh",label:"Asia/Phnom_Penh (GMT+07:00)"},{value:"Asia/Pontianak",label:"Asia/Pontianak (GMT+07:00)"},{value:"Asia/Pyongyang",label:"Asia/Pyongyang (GMT+09:00)"},{value:"Asia/Qatar",label:"Asia/Qatar (GMT+03:00)"},{value:"Asia/Qostanay",label:"Asia/Qostanay (GMT+05:00)"},{value:"Asia/Qyzylorda",label:"Asia/Qyzylorda (GMT+05:00)"},{value:"Asia/Riyadh",label:"Asia/Riyadh (GMT+03:00)"},{value:"Asia/Sakhalin",label:"Asia/Sakhalin (GMT+11:00)"},{value:"Asia/Samarkand",label:"Asia/Samarkand (GMT+05:00)"},{value:"Asia/Seoul",label:"Asia/Seoul (GMT+09:00)"},{value:"Asia/Shanghai",label:"Asia/Shanghai (GMT+08:00)"},{value:"Asia/Singapore",label:"Asia/Singapore (GMT+08:00)"},{value:"Asia/Srednekolymsk",label:"Asia/Srednekolymsk (GMT+11:00)"},{value:"Asia/Taipei",label:"Asia/Taipei (GMT+08:00)"},{value:"Asia/Tashkent",label:"Asia/Tashkent (GMT+05:00)"},{value:"Asia/Tbilisi",label:"Asia/Tbilisi (GMT+04:00)"},{value:"Asia/Tehran",label:"Asia/Tehran (GMT+03:30)"},{value:"Asia/Thimphu",label:"Asia/Thimphu (GMT+06:00)"},{value:"Asia/Tokyo",label:"Asia/Tokyo (GMT+09:00)"},{value:"Asia/Tomsk",label:"Asia/Tomsk (GMT+07:00)"},{value:"Asia/Ulaanbaatar",label:"Asia/Ulaanbaatar (GMT+08:00)"},{value:"Asia/Urumqi",label:"Asia/Urumqi (GMT+06:00)"},{value:"Asia/Ust-Nera",label:"Asia/Ust-Nera (GMT+10:00)"},{value:"Asia/Vladivostok",label:"Asia/Vladivostok (GMT+10:00)"},{value:"Asia/Yakutsk",label:"Asia/Yakutsk (GMT+09:00)"},{value:"Asia/Yangon",label:"Asia/Yangon (GMT+06:30)"},{value:"Asia/Yekaterinburg",label:"Asia/Yekaterinburg (GMT+05:00)"},{value:"Asia/Yerevan",label:"Asia/Yerevan (GMT+04:00)"},{value:"Atlantic/Azores",label:"Atlantic/Azores (GMT-01:00)"},{value:"Atlantic/Bermuda",label:"Atlantic/Bermuda (GMT-03:00)"},{value:"Atlantic/Canary",label:"Atlantic/Canary (GMT+00:00)"},{value:"Atlantic/Cape_Verde",label:"Atlantic/Cape_Verde (GMT-01:00)"},{value:"Atlantic/Faroe",label:"Atlantic/Faroe (GMT+00:00)"},{value:"Atlantic/Madeira",label:"Atlantic/Madeira (GMT+00:00)"},{value:"Atlantic/Reykjavik",label:"Atlantic/Reykjavik (GMT+00:00)"},{value:"Atlantic/South_Georgia",label:"Atlantic/South_Georgia (GMT-02:00)"},{value:"Atlantic/St_Helena",label:"Atlantic/St_Helena (GMT+00:00)"},{value:"Atlantic/Stanley",label:"Atlantic/Stanley (GMT-03:00)"},{value:"Australia/Adelaide",label:"Australia/Adelaide (GMT+09:30)"},{value:"Australia/Brisbane",label:"Australia/Brisbane (GMT+10:00)"},{value:"Australia/Broken_Hill",label:"Australia/Broken_Hill (GMT+09:30)"},{value:"Australia/Darwin",label:"Australia/Darwin (GMT+09:30)"},{value:"Australia/Eucla",label:"Australia/Eucla (GMT+08:45)"},{value:"Australia/Hobart",label:"Australia/Hobart (GMT+10:00)"},{value:"Australia/Lindeman",label:"Australia/Lindeman (GMT+10:00)"},{value:"Australia/Lord_Howe",label:"Australia/Lord_Howe (GMT+10:30)"},{value:"Australia/Melbourne",label:"Australia/Melbourne (GMT+10:00)"},{value:"Australia/Perth",label:"Australia/Perth (GMT+08:00)"},{value:"Australia/Sydney",label:"Australia/Sydney (GMT+10:00)"},{value:"Europe/Amsterdam",label:"Europe/Amsterdam (GMT+02:00)"},{value:"Europe/Andorra",label:"Europe/Andorra (GMT+02:00)"},{value:"Europe/Astrakhan",label:"Europe/Astrakhan (GMT+04:00)"},{value:"Europe/Athens",label:"Europe/Athens (GMT+03:00)"},{value:"Europe/Belgrade",label:"Europe/Belgrade (GMT+02:00)"},{value:"Europe/Berlin",label:"Europe/Berlin (GMT+02:00)"},{value:"Europe/Brussels",label:"Europe/Brussels (GMT+02:00)"},{value:"Europe/Bucharest",label:"Europe/Bucharest (GMT+03:00)"},{value:"Europe/Budapest",label:"Europe/Budapest (GMT+02:00)"},{value:"Europe/Chisinau",label:"Europe/Chisinau (GMT+03:00)"},{value:"Europe/Copenhagen",label:"Europe/Copenhagen (GMT+02:00)"},{value:"Europe/Dublin",label:"Europe/Dublin (GMT+01:00)"},{value:"Europe/Gibraltar",label:"Europe/Gibraltar (GMT+02:00)"},{value:"Europe/Helsinki",label:"Europe/Helsinki (GMT+03:00)"},{value:"Europe/Istanbul",label:"Europe/Istanbul (GMT+03:00)"},{value:"Europe/Kaliningrad",label:"Europe/Kaliningrad (GMT+02:00)"},{value:"Europe/Kirov",label:"Europe/Kirov (GMT+03:00)"},{value:"Europe/Kyiv",label:"Europe/Kyiv (GMT+03:00)"},{value:"Europe/Lisbon",label:"Europe/Lisbon (GMT+01:00)"},{value:"Europe/London",label:"Europe/London (GMT+01:00)"},{value:"Europe/Luxembourg",label:"Europe/Luxembourg (GMT+02:00)"},{value:"Europe/Madrid",label:"Europe/Madrid (GMT+02:00)"},{value:"Europe/Malta",label:"Europe/Malta (GMT+02:00)"},{value:"Europe/Minsk",label:"Europe/Minsk (GMT+03:00)"},{value:"Europe/Monaco",label:"Europe/Monaco (GMT+02:00)"},{value:"Europe/Moscow",label:"Europe/Moscow (GMT+03:00)"},{value:"Europe/Oslo",label:"Europe/Oslo (GMT+02:00)"},{value:"Europe/Paris",label:"Europe/Paris (GMT+02:00)"},{value:"Europe/Prague",label:"Europe/Prague (GMT+02:00)"},{value:"Europe/Riga",label:"Europe/Riga (GMT+03:00)"},{value:"Europe/Rome",label:"Europe/Rome (GMT+02:00)"},{value:"Europe/Samara",label:"Europe/Samara (GMT+04:00)"},{value:"Europe/San_Marino",label:"Europe/San_Marino (GMT+02:00)"},{value:"Europe/Sarajevo",label:"Europe/Sarajevo (GMT+02:00)"},{value:"Europe/Saratov",label:"Europe/Saratov (GMT+04:00)"},{value:"Europe/Simferopol",label:"Europe/Simferopol (GMT+03:00)"},{value:"Europe/Skopje",label:"Europe/Skopje (GMT+02:00)"},{value:"Europe/Sofia",label:"Europe/Sofia (GMT+03:00)"},{value:"Europe/Stockholm",label:"Europe/Stockholm (GMT+02:00)"},{value:"Europe/Tallinn",label:"Europe/Tallinn (GMT+03:00)"},{value:"Europe/Tirane",label:"Europe/Tirane (GMT+02:00)"},{value:"Europe/Ulyanovsk",label:"Europe/Ulyanovsk (GMT+04:00)"},{value:"Europe/Uzhgorod",label:"Europe/Uzhgorod (GMT+03:00)"},{value:"Europe/Vaduz",label:"Europe/Vaduz (GMT+02:00)"},{value:"Europe/Vatican",label:"Europe/Vatican (GMT+02:00)"},{value:"Europe/Vienna",label:"Europe/Vienna (GMT+02:00)"},{value:"Europe/Vilnius",label:"Europe/Vilnius (GMT+03:00)"},{value:"Europe/Volgograd",label:"Europe/Volgograd (GMT+03:00)"},{value:"Europe/Warsaw",label:"Europe/Warsaw (GMT+02:00)"},{value:"Europe/Zagreb",label:"Europe/Zagreb (GMT+02:00)"},{value:"Europe/Zaporozhye",label:"Europe/Zaporozhye (GMT+03:00)"},{value:"Europe/Zurich",label:"Europe/Zurich (GMT+02:00)"},{value:"Indian/Antananarivo",label:"Indian/Antananarivo (GMT+03:00)"},{value:"Indian/Chagos",label:"Indian/Chagos (GMT+06:00)"},{value:"Indian/Christmas",label:"Indian/Christmas (GMT+07:00)"},{value:"Indian/Cocos",label:"Indian/Cocos (GMT+06:30)"},{value:"Indian/Comoro",label:"Indian/Comoro (GMT+03:00)"},{value:"Indian/Kerguelen",label:"Indian/Kerguelen (GMT+05:00)"},{value:"Indian/Mahe",label:"Indian/Mahe (GMT+04:00)"},{value:"Indian/Maldives",label:"Indian/Maldives (GMT+05:00)"},{value:"Indian/Mauritius",label:"Indian/Mauritius (GMT+04:00)"},{value:"Indian/Mayotte",label:"Indian/Mayotte (GMT+03:00)"},{value:"Indian/Reunion",label:"Indian/Reunion (GMT+04:00)"},{value:"Pacific/Apia",label:"Pacific/Apia (GMT+13:00)"},{value:"Pacific/Auckland",label:"Pacific/Auckland (GMT+12:00)"},{value:"Pacific/Bougainville",label:"Pacific/Bougainville (GMT+11:00)"},{value:"Pacific/Chatham",label:"Pacific/Chatham (GMT+12:45)"},{value:"Pacific/Chuuk",label:"Pacific/Chuuk (GMT+10:00)"},{value:"Pacific/Easter",label:"Pacific/Easter (GMT-06:00)"},{value:"Pacific/Efate",label:"Pacific/Efate (GMT+11:00)"},{value:"Pacific/Fakaofo",label:"Pacific/Fakaofo (GMT+13:00)"},{value:"Pacific/Fiji",label:"Pacific/Fiji (GMT+12:00)"},{value:"Pacific/Funafuti",label:"Pacific/Funafuti (GMT+12:00)"},{value:"Pacific/Galapagos",label:"Pacific/Galapagos (GMT-06:00)"},{value:"Pacific/Gambier",label:"Pacific/Gambier (GMT-09:00)"},{value:"Pacific/Guadalcanal",label:"Pacific/Guadalcanal (GMT+11:00)"},{value:"Pacific/Guam",label:"Pacific/Guam (GMT+10:00)"},{value:"Pacific/Honolulu",label:"Pacific/Honolulu (GMT-10:00)"},{value:"Pacific/Kanton",label:"Pacific/Kanton (GMT+13:00)"},{value:"Pacific/Kiritimati",label:"Pacific/Kiritimati (GMT+14:00)"},{value:"Pacific/Kosrae",label:"Pacific/Kosrae (GMT+11:00)"},{value:"Pacific/Kwajalein",label:"Pacific/Kwajalein (GMT+12:00)"},{value:"Pacific/Majuro",label:"Pacific/Majuro (GMT+12:00)"},{value:"Pacific/Marquesas",label:"Pacific/Marquesas (GMT-09:30)"},{value:"Pacific/Midway",label:"Pacific/Midway (GMT-11:00)"},{value:"Pacific/Nauru",label:"Pacific/Nauru (GMT+12:00)"},{value:"Pacific/Niue",label:"Pacific/Niue (GMT-11:00)"},{value:"Pacific/Norfolk",label:"Pacific/Norfolk (GMT+11:00)"},{value:"Pacific/Noumea",label:"Pacific/Noumea (GMT+11:00)"},{value:"Pacific/Pago_Pago",label:"Pacific/Pago_Pago (GMT-11:00)"},{value:"Pacific/Palau",label:"Pacific/Palau (GMT+09:00)"},{value:"Pacific/Pitcairn",label:"Pacific/Pitcairn (GMT-08:00)"},{value:"Pacific/Pohnpei",label:"Pacific/Pohnpei (GMT+11:00)"},{value:"Pacific/Port_Moresby",label:"Pacific/Port_Moresby (GMT+10:00)"},{value:"Pacific/Rarotonga",label:"Pacific/Rarotonga (GMT-10:00)"},{value:"Pacific/Saipan",label:"Pacific/Saipan (GMT+10:00)"},{value:"Pacific/Tahiti",label:"Pacific/Tahiti (GMT-10:00)"},{value:"Pacific/Tarawa",label:"Pacific/Tarawa (GMT+12:00)"},{value:"Pacific/Tongatapu",label:"Pacific/Tongatapu (GMT+13:00)"},{value:"Pacific/Wake",label:"Pacific/Wake (GMT+12:00)"},{value:"Pacific/Wallis",label:"Pacific/Wallis (GMT+12:00)"}]),f=F({get:()=>d.modelValue,set:m=>{s("update:modelValue",m),s("change",m)}});return we(()=>{if((d.modelValue===null||d.modelValue===void 0)&&!d.disabled)try{const m=Intl.DateTimeFormat().resolvedOptions().timeZone;t.value.find(b=>b.value===m)?f.value=m:console.warn(`Detected timezone "${m}" is not in the predefined list.`)}catch(m){console.error("Error auto-detecting timezone:",m)}}),(m,g)=>(l(),i("div",$u,[c(q,{for:u.label.toLowerCase().replace(/\s/g,"-"),value:u.label},null,8,["for","value"]),c(ge,{id:u.label.toLowerCase().replace(/\s/g,"-"),modelValue:f.value,"onUpdate:modelValue":g[0]||(g[0]=b=>f.value=b),options:t.value,valueKey:"value",labelKey:"label",placeholder:u.placeholder,disabled:u.disabled,required:u.required,class:"mt-1 block w-full"},null,8,["id","modelValue","options","placeholder","disabled","required"]),c(le,{message:u.error,class:"mt-2"},null,8,["message"])]))}},Su={key:0,class:"text-sm text-gray-600 mb-3"},Gu=["value"],Pu={__name:"UserDataPromptModal",props:{show:{type:Boolean,default:!1},configItem:{type:Object,required:!0}},emits:["close","submitted","error"],setup(u,{emit:p}){const d=u,s=T({value:""});re(()=>d.show,b=>{b&&(s.value={value:""})});const t=F(()=>{var b,r;return((r=(b=d.configItem)==null?void 0:b.api)==null?void 0:r.endpoint)||"/api/user/update-profile-field"}),f=F(()=>{var b,r;return((r=(b=d.configItem)==null?void 0:b.api)==null?void 0:r.method)||"post"}),m=b=>{var a,n,v,M,y;if((a=d.configItem)!=null&&a.toPayload)return d.configItem.toPayload(b.value);const r=((v=(n=d.configItem)==null?void 0:n.api)==null?void 0:v.fieldParam)||"field",o=((y=(M=d.configItem)==null?void 0:M.api)==null?void 0:y.valueParam)||"value";return{[r]:d.configItem.column,[o]:b.value}},g=F(()=>{var b;return((b=d.configItem)==null?void 0:b.title)||"Additional Information Required"});return(b,r)=>(l(),V(De,{show:u.show,title:g.value,"api-endpoint":t.value,"http-method":f.value,"form-data":s.value,"submit-button-text":"Save","success-message":"Saved successfully","format-data-for-api":m,onClose:r[3]||(r[3]=o=>b.$emit("close")),onSubmitted:r[4]||(r[4]=o=>b.$emit("submitted",o)),onError:r[5]||(r[5]=o=>b.$emit("error",o))},{default:k(({errors:o})=>{var a,n,v,M,y,R,B,x,w,G,j,z,ee,I;return[(a=u.configItem)!=null&&a.description?(l(),i("p",Su,P(u.configItem.description),1)):A("",!0),e("div",null,[((v=(n=u.configItem)==null?void 0:n.input)==null?void 0:v.type)==="component"&&((y=(M=u.configItem)==null?void 0:M.input)==null?void 0:y.component)==="TimezoneSelect"?(l(),i(Z,{key:0},[c(Cu,{modelValue:s.value.value,"onUpdate:modelValue":r[0]||(r[0]=E=>s.value.value=E),required:!0},null,8,["modelValue"]),c(le,{message:(R=o==null?void 0:o.value)==null?void 0:R[0],class:"mt-2"},null,8,["message"])],64)):((x=(B=u.configItem)==null?void 0:B.input)==null?void 0:x.type)==="select"?(l(),i(Z,{key:1},[c(q,{value:((w=u.configItem)==null?void 0:w.label)||"Select an option"},null,8,["value"]),L(e("select",{"onUpdate:modelValue":r[1]||(r[1]=E=>s.value.value=E),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[r[6]||(r[6]=e("option",{disabled:"",value:""},"Please select",-1)),(l(!0),i(Z,null,ie(((j=(G=u.configItem)==null?void 0:G.input)==null?void 0:j.options)||[],E=>(l(),i("option",{key:E.value||E,value:E.value||E},P(E.label||E),9,Gu))),128))],512),[[Ye,s.value.value]]),c(le,{message:(z=o==null?void 0:o.value)==null?void 0:z[0],class:"mt-2"},null,8,["message"])],64)):(l(),i(Z,{key:2},[c(q,{value:((ee=u.configItem)==null?void 0:ee.label)||"Value"},null,8,["value"]),c(ye,{modelValue:s.value.value,"onUpdate:modelValue":r[2]||(r[2]=E=>s.value.value=E),class:"mt-1 block w-full"},null,8,["modelValue"]),c(le,{message:(I=o==null?void 0:o.value)==null?void 0:I[0],class:"mt-2"},null,8,["message"])],64))])]}),_:1},8,["show","title","api-endpoint","http-method","form-data"]))}},ju=[{id:"users.timezone",model:"users",column:"timezone",title:"Set your timezone",description:"We could not detect your timezone during login. Please select your timezone to get correct schedule times.",input:{type:"component",component:"TimezoneSelect",props:{}},api:{endpoint:"/api/user/update-profile-field",method:"post",fieldParam:"field",valueParam:"value"},isMissing:u=>!(u!=null&&u.timezone),toPayload:u=>({field:"timezone",value:u})}],Eu={__name:"PromptOrchestrator",setup(u){const p=T(!1),d=T(null),s=T([]),t=()=>{const o=localStorage.getItem("authToken");o&&!se.defaults.headers.common.Authorization&&(se.defaults.headers.common.Authorization=`Bearer ${o}`)},f=async()=>{t();const{data:o}=await se.get("/api/user");return o},m=o=>{const a=[];for(const n of ju)try{(typeof n.isMissing=="function"?n.isMissing(o):!(o!=null&&o[n.column]))&&a.push(n)}catch(v){console.error("Error evaluating prompt config",n,v)}return a},g=()=>{if(s.value.length===0){d.value=null,p.value=!1;return}d.value=s.value.shift(),p.value=!0},b=async()=>{try{const o=await f();s.value=m(o),g()}catch(o){console.error("PromptOrchestrator initialization failed",o)}},r=async()=>{try{const o=await f();s.value=m(o)}catch{}g()};return we(()=>{b()}),(o,a)=>d.value?(l(),V(Pu,{key:0,show:p.value,"config-item":d.value,onClose:g,onSubmitted:r},null,8,["show","config-item"])):A("",!0)}},Iu={class:"flex h-screen overflow-hidden"},Vu={class:"flex-1 flex flex-col overflow-hidden"},Bu={key:0,class:"bg-white shadow"},Du={class:"mx-auto max-w-7xl px-4 py-6 sm:px-6 lg:px-8"},Nu={class:"flex-1 overflow-y-auto"},cd={__name:"AuthenticatedLayout",setup(u){const p=T(!1),d=T(!1),s=T(!1),t=T(!1),f=T([]),m=T(!0),g=F(()=>We().props.id||null),{showNoticeModal:b,unreadNotices:r,fetchUnreadNotices:o,closeModal:a}=Mu(),n=T(null),v=async()=>{const j=localStorage.getItem("authToken");if(j){window.axios.defaults.headers.common.Authorization=`Bearer ${j}`;try{await window.axios.get("/api/user")}catch(z){z.response&&z.response.status===401&&(console.log("Session expired, redirecting to login"),localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization,window.location.href="/login")}}else delete window.axios.defaults.headers.common.Authorization},M=()=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization},y=j=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization,window.location.href="/login"},R=async()=>{m.value=!0;try{const j=await window.axios.get("/api/projects-simplified");f.value=j.data}catch(j){console.error("Error fetching all projects for sidebar:",j),f.value=[]}finally{m.value=!1}},B=j=>{aa.visit(route("projects.show",j))},x=F(()=>Oe.value.notifications.filter(j=>!j.isRead).length),w=j=>{console.log("Task updated globally.",j)},G=j=>{console.log("Task deleted globally.",j)};return we(()=>{v(),n.value&&ea(n.value),R(),ta(),mt(o),o()}),Tt(()=>{mt(null)}),(j,z)=>(l(),i("div",Iu,[c(Pa,{ref_key:"standardNotificationContainerRef",ref:n},null,512),c(Aa,{"sidebar-is-open":U(Oe).show},null,8,["sidebar-is-open"]),c(bl),c(qo,{"all-projects":f.value,"active-project-id":g.value,onProjectSelected:B},null,8,["all-projects","active-project-id"]),e("div",Vu,[c(Qi,{"unread-notification-count":x.value,onOpenCreateTaskModal:z[0]||(z[0]=ee=>d.value=!0),onOpenAddResource:z[1]||(z[1]=ee=>s.value=!0),onOpenNotificationsSidebar:U(vt),onOpenKudoModal:z[2]||(z[2]=ee=>t.value=!0)},null,8,["unread-notification-count","onOpenNotificationsSidebar"]),c(ir,{"showing-navigation-dropdown":p.value,"unread-notification-count":x.value,onOpenCreateTaskModal:z[3]||(z[3]=ee=>d.value=!0),onOpenAddResource:z[4]||(z[4]=ee=>s.value=!0),onOpenNotificationsSidebar:U(vt),onLogoutSuccess:M,onLogoutError:y},null,8,["showing-navigation-dropdown","unread-notification-count","onOpenNotificationsSidebar"]),j.$slots.header?(l(),i("header",Bu,[e("div",Du,[$e(j.$slots,"header")])])):A("",!0),e("main",Nu,[$e(j.$slots,"default")]),c(Es,{show:d.value,onClose:z[5]||(z[5]=ee=>d.value=!1),onSaved:z[6]||(z[6]=ee=>d.value=!1)},null,8,["show"]),c(Ls,{"api-endpoint":"/api/shareable-resources",show:s.value,onClose:z[7]||(z[7]=ee=>s.value=!1)},null,8,["show"]),c(yo,{show:t.value,onClose:z[8]||(z[8]=ee=>t.value=!1),onSubmitted:z[9]||(z[9]=ee=>t.value=!1)},null,8,["show"])]),c(Tu,{onTaskUpdated:w,onTaskDeleted:G}),c(vo),c(na,{show:U(b),unreadNotices:U(r),onClose:U(a)},null,8,["show","unreadNotices","onClose"]),c(Eu)]))}};export{Ls as C,$t as R,Mt as T,cd as _,jl as a,ml as b,dd as c,ud as d,Sr as e,id as f,Ir as g,Er as h,jr as i,Gr as j,Cu as k,Br as l,bt as m,fr as n,rd as o,$r as p,Es as q,Cr as r,Mr as s,nd as t,Pr as u,Fr as v};
