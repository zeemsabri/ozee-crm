import{r,a as p,i as v,o as m,b as t,t as u,v as x,x as f,p as k}from"./app-BVX1Xzgm.js";const h={key:0,class:"fixed inset-0 z-[100] flex items-center justify-center p-4"},y={class:"relative bg-white rounded-2xl shadow-2xl max-w-sm w-full p-8 border border-slate-100 overflow-hidden"},N={class:"mb-6"},P={class:"text-xl font-bold text-slate-900"},I={class:"text-slate-500 text-sm mt-1"},C={class:"space-y-4"},B={key:0,class:"text-red-500 text-xs font-medium"},S={class:"pt-2 flex flex-col gap-2"},$=["disabled"],V={__name:"PinSetupModal",props:{isOpen:Boolean,token:String,isReset:{type:Boolean,default:!1}},emits:["close","success"],setup(i,{emit:b}){const g=i,c=b,o=r(""),n=r(""),d=r(!1),l=r(""),w=async()=>{var a,e;if(o.value.length<4){l.value="PIN must be at least 4 digits.";return}if(o.value!==n.value){l.value="PINs do not match.";return}d.value=!0,l.value="";try{(await k.post("/api/client-api/setup-pin",{token:g.token,pin:o.value})).data.success&&(c("success"),c("close"))}catch(s){l.value=((e=(a=s.response)==null?void 0:a.data)==null?void 0:e.message)||"Failed to setup PIN."}finally{d.value=!1}};return(a,e)=>i.isOpen?(m(),p("div",h,[t("div",{class:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm",onClick:e[0]||(e[0]=s=>a.$emit("close"))}),t("div",y,[e[9]||(e[9]=t("div",{class:"absolute top-0 left-0 w-full h-1.5 bg-indigo-600"},null,-1)),t("div",N,[e[6]||(e[6]=t("div",{class:"w-12 h-12 bg-indigo-50 rounded-xl flex items-center justify-center mb-4"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})])],-1)),t("h3",P,u(i.isReset?"Reset Your PIN":"Secure Your Access"),1),t("p",I,u(i.isReset?"Create a new permanent PIN for secure access to your dashboard.":"Set a PIN to access your dashboard even if your link expires."),1)]),t("div",C,[t("div",null,[e[7]||(e[7]=t("label",{class:"block text-xs font-semibold text-slate-700 uppercase tracking-wider mb-1.5"},"New PIN (4-6 digits)",-1)),x(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>o.value=s),type:"text",inputmode:"numeric",pattern:"[0-9]*",maxlength:"6",placeholder:"Enter 4-6 digits",class:"block w-full rounded-xl border-slate-200 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-center font-mono text-xl py-3",onInput:e[2]||(e[2]=s=>o.value=o.value.replace(/[^0-9]/g,""))},null,544),[[f,o.value]])]),t("div",null,[e[8]||(e[8]=t("label",{class:"block text-xs font-semibold text-slate-700 uppercase tracking-wider mb-1.5"},"Confirm PIN",-1)),x(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>n.value=s),type:"text",inputmode:"numeric",pattern:"[0-9]*",maxlength:"6",placeholder:"Re-enter PIN",class:"block w-full rounded-xl border-slate-200 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-center font-mono text-xl py-3",onInput:e[4]||(e[4]=s=>n.value=n.value.replace(/[^0-9]/g,""))},null,544),[[f,n.value]])]),l.value?(m(),p("p",B,u(l.value),1)):v("",!0),t("div",S,[t("button",{onClick:w,disabled:d.value||o.value.length<4,class:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-4 rounded-xl transition duration-200 shadow-lg shadow-indigo-200 disabled:opacity-50"}," Save PIN ",8,$),t("button",{onClick:e[5]||(e[5]=s=>a.$emit("close")),class:"w-full bg-white text-slate-500 hover:text-slate-700 font-semibold py-2 px-4 rounded-xl transition duration-200 text-sm"}," Maybe Later ")])])])])):v("",!0)}};export{V as default};
