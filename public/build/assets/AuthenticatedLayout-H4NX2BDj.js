import{A as be}from"./ApplicationLogo-Br69gY8h.js";import{B as le,J as ne,s as N,r as T,i as f,o as i,b as e,f as F,e as d,A as te,K as J,a as b,n as D,T as we,c as V,L as ge,h as E,l as Q,w as G,d as re,g as k,t as B,F as K,j as O,q as ke,m as C,k as Z,x as Y,M as ue,G as xe,I as ae,_ as ie,D as _e,z as me,N as de,O as $e,P as Se,p as Ce}from"./app-tUqoeRBl.js";import{P as oe}from"./PrimaryButton-BmSFZ3Li.js";import{a as ye,_ as he}from"./SecondaryButton-BlVUSvsN.js";import{_ as U}from"./InputLabel-B-iSIChM.js";import{a as R,_ as ee}from"./InputError-DF-YZDbR.js";import{_ as Ae}from"./Checkbox-9_MC9A8p.js";let ce=null;const je=r=>{ce=r},ve=(r,_="info",c=5e3)=>ce?ce.addNotification(r,_,c):(console.warn("Notification container not set. Call setNotificationContainer first."),null),Te=(r,_=5e3)=>ve(r,"success",_),Ve=(r,_=5e3)=>ve(r,"error",_),va=(r,_=5e3)=>ve(r,"warning",_),Ee={class:"relative"},pe={__name:"Dropdown",props:{align:{type:String,default:"right"},width:{type:String,default:"48"},contentClasses:{type:String,default:"py-1 bg-white"}},setup(r){const _=r,c=u=>{m.value&&u.key==="Escape"&&(m.value=!1)};le(()=>document.addEventListener("keydown",c)),ne(()=>document.removeEventListener("keydown",c));const h=N(()=>({48:"w-48"})[_.width.toString()]),a=N(()=>_.align==="left"?"ltr:origin-top-left rtl:origin-top-right start-0":_.align==="right"?"ltr:origin-top-right rtl:origin-top-left end-0":"origin-top"),m=T(!1);return(u,$)=>(i(),f("div",Ee,[e("div",{onClick:$[0]||($[0]=A=>m.value=!m.value)},[te(u.$slots,"trigger")]),F(e("div",{class:"fixed inset-0 z-40",onClick:$[1]||($[1]=A=>m.value=!1)},null,512),[[J,m.value]]),d(we,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:b(()=>[F(e("div",{class:D(["absolute z-50 mt-2 rounded-md shadow-lg",[h.value,a.value]]),style:{display:"none"},onClick:$[2]||($[2]=A=>m.value=!1)},[e("div",{class:D(["rounded-md ring-1 ring-black ring-opacity-5",r.contentClasses])},[te(u.$slots,"content")],2)],2),[[J,m.value]])]),_:3})]))}},H={__name:"DropdownLink",props:{href:{type:String,required:!0},method:{type:String,default:"get"},as:{type:String,default:"a"}},setup(r){return(_,c)=>(i(),V(E(Q),ge({href:r.href,method:r.method,as:r.as},_.$attrs,{class:"block w-full px-4 py-2 text-start text-sm leading-5 text-gray-700 transition duration-150 ease-in-out hover:bg-gray-100 focus:bg-gray-100 focus:outline-none"}),{default:b(()=>[te(_.$slots,"default")]),_:3},16,["href","method","as"]))}},Ie={__name:"NavLink",props:{href:{type:String,required:!0},active:{type:Boolean}},setup(r){const _=r,c=N(()=>_.active?"inline-flex items-center px-1 pt-1 border-b-2 border-indigo-400 text-sm font-medium leading-5 text-gray-900 focus:outline-none focus:border-indigo-700 transition duration-150 ease-in-out":"inline-flex items-center px-1 pt-1 border-b-2 border-transparent text-sm font-medium leading-5 text-gray-500 hover:text-gray-700 hover:border-gray-300 focus:outline-none focus:text-gray-700 focus:border-gray-300 transition duration-150 ease-in-out");return(h,a)=>(i(),V(E(Q),{href:r.href,class:D(c.value)},{default:b(()=>[te(h.$slots,"default")]),_:3},8,["href","class"]))}},q={__name:"ResponsiveNavLink",props:{href:{type:String,required:!0},active:{type:Boolean},method:{type:String,default:"get"},as:{type:String,default:"a"}},setup(r){const _=r,c=N(()=>_.active?"block w-full ps-3 pe-4 py-2 border-l-4 border-indigo-400 text-start text-base font-medium text-indigo-700 bg-indigo-50 focus:outline-none focus:text-indigo-800 focus:bg-indigo-100 focus:border-indigo-700 transition duration-150 ease-in-out":"block w-full ps-3 pe-4 py-2 border-l-4 border-transparent text-start text-base font-medium text-gray-600 hover:text-gray-800 hover:bg-gray-50 hover:border-gray-300 focus:outline-none focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300 transition duration-150 ease-in-out");return(h,a)=>(i(),V(E(Q),ge({href:r.href,method:r.method,as:r.as},h.$attrs,{class:c.value}),{default:b(()=>[te(h.$slots,"default")]),_:3},16,["href","method","as","class"]))}},Me={class:"p-6"},Pe={class:"mt-6"},De={key:0,class:"mb-4 p-4 bg-green-100 border border-green-400 text-green-700 rounded"},Be={key:1,class:"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded"},Le={class:"flex items-center mb-3"},Ue=["id","onUpdate:modelValue"],Ne=["for"],ze={key:0,class:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800"},Re={key:0},We={class:"mb-4"},qe={class:"flex items-center"},Fe=["id","checked","onChange"],He=["for"],Ke={key:0,class:"mb-4"},Oe=["id","onUpdate:modelValue"],Ye={key:1,class:"mb-4"},Ge={class:"flex-1"},Je=["id","onUpdate:modelValue"],Qe={class:"flex-1"},Xe=["id","onUpdate:modelValue"],Ze={key:0,class:"flex items-end pb-1"},et=["onClick"],tt=["onClick"],st={class:"mt-6 flex justify-end space-x-3"},at={key:0,class:"flex items-center"},lt={key:1},ot={__name:"AvailabilityModal",props:{show:Boolean,date:{type:String,default:()=>{const r=new Date;return r.setDate(r.getDate()+1),r.toISOString().split("T")[0]}},nextWeekDates:{type:Array,default:()=>[]},userId:{type:Number,default:null}},emits:["close","availability-saved"],setup(r,{emit:_}){const c=()=>{const y=localStorage.getItem("authToken");y&&!Y.defaults.headers.common.Authorization&&(Y.defaults.headers.common.Authorization=`Bearer ${y}`,console.log("Auth headers set in AvailabilityModal"))},h=r,a=_,m=T({}),u=T({}),$=T(!1),A=T(""),w=()=>{const y=[],v=new Date,t=new Date(v);t.setDate(v.getDate()+1);for(let s=0;s<7;s++){const n=new Date(t);n.setDate(t.getDate()+s);const p=n.toISOString().split("T")[0];y.push({value:p,label:n.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})}),m.value[p]={isSelected:!1,isAvailable:!0,reason:"",timeSlots:[{start_time:"",end_time:""}]}}return y},g=T([]);le(()=>{c(),h.nextWeekDates.length>0?(g.value=h.nextWeekDates,h.nextWeekDates.forEach(y=>{m.value[y.value]={isSelected:!1,isAvailable:!0,reason:"",timeSlots:[{start_time:"",end_time:""}]}})):g.value=w()});const S=async()=>{try{if(c(),g.value.length===0)return;const y=g.value[0].value,v=g.value[g.value.length-1].value,t=await Y.get("/api/availabilities",{params:{start_date:y,end_date:v,user_id:h.userId}});if(t.data&&t.data.availabilities){const s=t.data.availabilities;g.value.forEach(n=>{m.value[n.value]={isSelected:!1,isAvailable:!0,reason:"",timeSlots:[{start_time:"",end_time:""}]}}),s.forEach(n=>{const p=n.date.split("T")[0];m.value[p]&&(m.value[p].isSelected=!0,m.value[p].isAvailable=n.is_available,n.is_available?m.value[p].timeSlots=n.time_slots&&n.time_slots.length>0?[...n.time_slots]:[{start_time:"",end_time:""}]:m.value[p].reason=n.reason||"")})}}catch(y){console.error("Error fetching existing availabilities:",y),g.value.forEach(v=>{m.value[v.value]={isSelected:!1,isAvailable:!0,reason:"",timeSlots:[{start_time:"",end_time:""}]}})}};G(()=>h.show,async y=>{y&&(u.value={},A.value="",await S())},{immediate:!0});const I=y=>{m.value[y].timeSlots.push({start_time:"",end_time:""})},z=(y,v)=>{m.value[y].timeSlots.length>1&&m.value[y].timeSlots.splice(v,1)},M=(y,v)=>{m.value[y].isAvailable=v,v?m.value[y].reason="":m.value[y].timeSlots=[{start_time:"",end_time:""}]},x=async()=>{$.value=!0,u.value={},A.value="";const y=[];let v=!1;for(const t of g.value){const s=t.value,n=m.value[s];if(n.isSelected){let p={};if(n.isAvailable)if(n.timeSlots.some(o=>!o.start_time||!o.end_time))p.timeSlots="Please fill in all time slots.",v=!0;else for(const o of n.timeSlots){const l=o.start_time.split(":").map(Number),P=o.end_time.split(":").map(Number);if(l.length!==2||P.length!==2||isNaN(l[0])||isNaN(l[1])||isNaN(P[0])||isNaN(P[1])){p.timeSlots="Invalid time format. Please use HH:MM format.",v=!0;break}const j=l[0]*60+l[1],L=P[0]*60+P[1];if(j>=L){p.timeSlots="End time must be after start time.",v=!0;break}}else n.reason.trim()||(p.reason="Please provide a reason for unavailability.",v=!0);Object.keys(p).length>0&&(u.value[s]=p),Object.keys(p).length===0&&y.push({date:s,is_available:n.isAvailable,reason:n.isAvailable?null:n.reason,time_slots:n.isAvailable?n.timeSlots:null})}}if(v){$.value=!1,u.value.general="Please correct the errors in the highlighted dates.";return}if(y.length===0){u.value.general="Please select at least one day to set availability for.",$.value=!1;return}try{c();const t=await Y.post("/api/availabilities/batch",{availabilities:y});A.value="Availability saved successfully!";try{const s=await Y.get("/api/availability-prompt");localStorage.setItem("shouldBlockUser",s.data.should_block_user),localStorage.setItem("allWeekdaysCovered",s.data.all_weekdays_covered);const n=new CustomEvent("availability-status-updated",{detail:{shouldBlockUser:s.data.should_block_user,allWeekdaysCovered:s.data.all_weekdays_covered}});window.dispatchEvent(n),console.log("Availability status updated from modal:",{shouldBlockUser:s.data.should_block_user,allWeekdaysCovered:s.data.all_weekdays_covered})}catch(s){console.error("Error updating availability status:",s)}a("availability-saved",t.data.availabilities),setTimeout(()=>{a("close")},1500)}catch(t){console.error("Error saving availability:",t),t.response&&t.response.data&&t.response.data.errors?u.value.general=t.response.data.message||"An error occurred while saving your availability.":t.response&&t.response.status===409?(A.value=t.response.data.message,setTimeout(()=>{a("close")},1500)):u.value.general="An unexpected error occurred while saving your availability."}finally{$.value=!1}};return(y,v)=>(i(),V(he,{show:r.show,onClose:v[1]||(v[1]=t=>y.$emit("close")),"max-width":"xl"},{default:b(()=>[e("div",Me,[v[6]||(v[6]=e("h2",{class:"text-lg font-medium text-gray-900"}," Submit Your Weekly Availability ",-1)),v[7]||(v[7]=e("p",{class:"mt-1 text-sm text-gray-600"}," Please select the dates you wish to set availability for and provide your details for each. ",-1)),e("div",Pe,[e("form",{onSubmit:re(x,["prevent"])},[A.value?(i(),f("div",De,B(A.value),1)):k("",!0),u.value.general?(i(),f("div",Be,B(u.value.general),1)):k("",!0),(i(!0),f(K,null,O(g.value,t=>{var s,n;return i(),f("div",{key:t.value,class:D(["mb-6 p-4 border rounded-lg shadow-sm",[m.value[t.value].isSelected?"border-indigo-300 bg-indigo-50":"border-gray-200",m.value[t.value].isSelected&&!u.value[t.value]?"border-l-4 border-l-indigo-500":""]])},[e("div",Le,[F(e("input",{type:"checkbox",id:`select_date_${t.value}`,"onUpdate:modelValue":p=>m.value[t.value].isSelected=p,class:"rounded border-gray-300 text-indigo-600 shadow-sm focus:ring-indigo-500"},null,8,Ue),[[ke,m.value[t.value].isSelected]]),e("label",{for:`select_date_${t.value}`,class:"ml-2 block text-base font-medium text-gray-800"},[C(B(t.label)+" ",1),m.value[t.value].isSelected?(i(),f("span",ze," Saved ")):k("",!0)],8,Ne)]),m.value[t.value].isSelected?(i(),f("div",Re,[e("div",We,[e("div",qe,[e("input",{type:"checkbox",id:`isAvailableToggle_${t.value}`,checked:m.value[t.value].isAvailable,onChange:p=>M(t.value,p.target.checked),class:"rounded border-gray-300 text-indigo-600 shadow-sm focus:ring-indigo-500"},null,40,Fe),e("label",{for:`isAvailableToggle_${t.value}`,class:"ml-2 block text-sm text-gray-700"}," I am available on this day ",8,He)])]),m.value[t.value].isAvailable?k("",!0):(i(),f("div",Ke,[d(U,{for:`reason_${t.value}`,value:"Reason for Not Available"},null,8,["for"]),F(e("textarea",{id:`reason_${t.value}`,"onUpdate:modelValue":p=>m.value[t.value].reason=p,rows:"2",class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",placeholder:"e.g., Out of office, Holiday, Meeting all day"},null,8,Oe),[[Z,m.value[t.value].reason]]),d(R,{message:(s=u.value[t.value])==null?void 0:s.reason,class:"mt-2"},null,8,["message"])])),m.value[t.value].isAvailable?(i(),f("div",Ye,[d(U,{value:"Available Time Slots"}),d(R,{message:(n=u.value[t.value])==null?void 0:n.timeSlots,class:"mt-2"},null,8,["message"]),(i(!0),f(K,null,O(m.value[t.value].timeSlots,(p,o)=>(i(),f("div",{key:o,class:"flex items-center space-x-2 mt-2"},[e("div",Ge,[d(U,{for:`start_time_${t.value}_${o}`,value:"Start Time",class:"text-xs"},null,8,["for"]),F(e("input",{id:`start_time_${t.value}_${o}`,type:"time","onUpdate:modelValue":l=>p.start_time=l,class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm"},null,8,Je),[[Z,p.start_time]])]),e("div",Qe,[d(U,{for:`end_time_${t.value}_${o}`,value:"End Time",class:"text-xs"},null,8,["for"]),F(e("input",{id:`end_time_${t.value}_${o}`,type:"time","onUpdate:modelValue":l=>p.end_time=l,class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm"},null,8,Xe),[[Z,p.end_time]])]),m.value[t.value].timeSlots.length>1?(i(),f("div",Ze,[e("button",{type:"button",onClick:l=>z(t.value,o),class:"p-2 text-red-600 hover:text-red-800"},v[2]||(v[2]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm6 0a1 1 0 012 0v6a1 1 0 11-2 0V8z","clip-rule":"evenodd"})],-1)]),8,et)])):k("",!0)]))),128)),e("button",{type:"button",onClick:p=>I(t.value),class:"mt-3 w-full flex items-center justify-center px-4 py-2 border border-dashed border-indigo-300 rounded-lg text-indigo-600 hover:bg-indigo-50 transition duration-150 ease-in-out"},v[3]||(v[3]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z","clip-rule":"evenodd"})],-1),C(" Add Another Time Slot ",-1)]),8,tt)])):k("",!0)])):k("",!0)],2)}),128)),e("div",st,[d(ye,{onClick:v[0]||(v[0]=t=>y.$emit("close"))},{default:b(()=>v[4]||(v[4]=[C(" Cancel ",-1)])),_:1,__:[4]}),d(oe,{disabled:$.value,class:D({"opacity-50":$.value})},{default:b(()=>[$.value?(i(),f("span",at,v[5]||(v[5]=[e("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),C(" Saving... ",-1)]))):(i(),f("span",lt,"Save Availability"))]),_:1},8,["disabled","class"])])],32)])])]),_:1},8,["show"]))}},it={key:0,class:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center"},nt={class:"bg-white rounded-lg shadow-xl p-6 max-w-lg w-full mx-4"},rt={class:"flex justify-center"},dt={__name:"AvailabilityBlocker",setup(r){const _=T(!1),c=T(!0),h=T(!1),a=T([]),m=N(()=>{var x;return((x=ue().props.auth.user)==null?void 0:x.id)||null}),u=()=>{const x=localStorage.getItem("authToken");x&&!Y.defaults.headers.common.Authorization&&(Y.defaults.headers.common.Authorization=`Bearer ${x}`)},$=async()=>{c.value=!0;const x=localStorage.getItem("shouldBlockUser"),y=localStorage.getItem("allWeekdaysCovered");if(x==="true"&&y==="false")_.value=!0,await A();else try{u();const v=await Y.get("/api/availability-prompt");_.value=v.data.should_block_user&&!v.data.all_weekdays_covered,_.value&&await A()}catch(v){console.error("Error checking if user should be blocked:",v),_.value=!1}c.value=!1},A=async()=>{try{u();const x=await Y.get("/api/availability-prompt");w(x.data.next_week_start,x.data.next_week_end)}catch(x){console.error("Error fetching next week dates:",x)}},w=(x,y)=>{const v=[],t=new Date(x),s=new Date(y),n=new Date(t);for(;n<=s;)v.push({value:n.toISOString().split("T")[0],label:n.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})}),n.setDate(n.getDate()+1);a.value=v},g=()=>{h.value=!0},S=()=>{$()},I=x=>{_.value=x.detail.shouldBlockUser&&!x.detail.allWeekdaysCovered},z=()=>{document.visibilityState==="visible"&&ae(()=>{$()})},M=x=>{(x.key==="shouldBlockUser"||x.key==="allWeekdaysCovered")&&ae(()=>{$()})};return le(()=>{$(),window.addEventListener("availability-status-updated",I),document.addEventListener("visibilitychange",z),window.addEventListener("storage",M)}),ne(()=>{window.removeEventListener("availability-status-updated",I),document.removeEventListener("visibilitychange",z),window.removeEventListener("storage",M)}),(x,y)=>_.value&&!c.value?(i(),f("div",it,[e("div",nt,[y[2]||(y[2]=xe('<div class="flex items-center mb-4"><div class="flex-shrink-0 mr-3"><svg class="h-8 w-8 text-red-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg></div><h2 class="text-xl font-bold text-gray-900">Action Required</h2></div><p class="mb-6 text-gray-700"> You must submit your availability for all weekdays of next week before you can continue using the application. This is required for planning meetings and work schedules. </p>',2)),e("div",rt,[d(oe,{onClick:g,class:"bg-red-600 hover:bg-red-700"},{default:b(()=>y[1]||(y[1]=[C(" Submit Availability Now ",-1)])),_:1,__:[1]})]),d(ot,{show:h.value,"next-week-dates":a.value,date:a.value.length>0?a.value[0].value:"",userId:m.value,onClose:y[0]||(y[0]=v=>h.value=!1),onAvailabilitySaved:S},null,8,["show","next-week-dates","date","userId"])])])):k("",!0)}},ut={class:"p-6"},ct={class:"flex justify-between items-center mb-4"},mt={class:"text-lg font-medium text-gray-900"},vt={key:0,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert"},ft={class:"block sm:inline"},pt={key:0,class:"mt-6 flex justify-end space-x-3"},gt={__name:"BaseFormModal",props:{show:{type:Boolean,default:!1},title:{type:String,default:"Modal Title"},apiEndpoint:{type:String,required:!1},httpMethod:{type:String,default:"post",validator:r=>["post","put","patch","delete"].includes(r.toLowerCase())},formData:{type:Object,required:!0},submitButtonText:{type:String,default:"Save"},successMessage:{type:String,default:"Operation successful!"},formatDataForApi:{type:Function,default:r=>r},showFooter:{type:Boolean,default:!0}},emits:["close","submitted","error"],setup(r,{emit:_}){const c=r,h=_,a=T(!1),m=T({}),u=T("");G(()=>c.show,w=>{w&&(m.value={},u.value="",a.value=!1)});const $=async()=>{a.value=!0,m.value={},u.value="";try{const w=c.formatDataForApi(c.formData);let g;const S=c.httpMethod.toLowerCase();if(S==="post")g=await window.axios.post(c.apiEndpoint,w);else if(S==="put")g=await window.axios.put(c.apiEndpoint,w);else if(S==="patch")g=await window.axios.patch(c.apiEndpoint,w);else if(S==="delete")g=await window.axios.delete(c.apiEndpoint,{data:w});else throw new Error(`Unsupported HTTP method: ${c.httpMethod}`);Te(c.successMessage),h("submitted",g.data),h("close")}catch(w){console.error("API submission error:",w),w.response?w.response.status===422?(m.value=w.response.data.errors,u.value="Please correct the errors in the form."):u.value=w.response.data.message||"An unexpected error occurred.":u.value="A network error occurred or the server is unreachable.",Ve(u.value),h("error",w)}finally{a.value=!1}},A=()=>{h("close")};return(w,g)=>(i(),V(he,{show:r.show,onClose:A},{default:b(()=>[e("div",ut,[e("div",ct,[e("h2",mt,B(r.title),1),e("button",{onClick:A,class:"text-gray-400 hover:text-gray-500"},g[0]||(g[0]=[e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),u.value?(i(),f("div",vt,[e("span",ft,B(u.value),1)])):k("",!0),e("form",{onSubmit:re($,["prevent"])},[te(w.$slots,"default",{errors:m.value},void 0,!0),r.showFooter?(i(),f("div",pt,[d(ye,{onClick:A,type:"button",disabled:a.value},{default:b(()=>g[1]||(g[1]=[C(" Cancel ",-1)])),_:1,__:[1]},8,["disabled"]),d(oe,{type:"submit",disabled:a.value,class:D({"opacity-75 cursor-not-allowed":a.value})},{default:b(()=>[C(B(a.value?"Submitting...":r.submitButtonText),1)]),_:1},8,["disabled","class"])])):k("",!0)],32)])]),_:3},8,["show"]))}},fe=ie(gt,[["__scopeId","data-v-380ca613"]]),yt=["disabled"],ht={class:"absolute z-50 mt-1 w-full rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5"},bt={class:"p-2 border-b border-gray-200"},wt=["onClick"],kt={key:0,class:"block px-4 py-2 text-sm text-gray-500"},xt={__name:"SelectDropdown",props:{modelValue:{type:[String,Number,Object,null],default:null},options:{type:Array,default:()=>[]},placeholder:{type:String,default:"Select an option"},valueKey:{type:String,default:"value"},labelKey:{type:String,default:"label"},disabled:{type:Boolean,default:!1},required:{type:Boolean,default:!1},maxHeight:{type:String,default:"250px"},width:{type:String,default:"full"},labelClass:{type:String,default:"text-xs"}},emits:["update:modelValue","change"],setup(r,{emit:_}){const c=r,h=_,a=T(!1),m=T(""),u=T(null),$=T(null),A=N(()=>{if(!m.value)return c.options;const M=m.value.toLowerCase();return c.options.filter(x=>x[c.labelKey].toLowerCase().includes(M))}),w=M=>{u.value&&!u.value.contains(M.target)&&(a.value=!1,m.value="")},g=M=>{M.key==="Escape"&&a.value&&(a.value=!1,m.value="")};le(()=>{document.addEventListener("click",w),document.addEventListener("keydown",g)}),ne(()=>{document.removeEventListener("click",w),document.removeEventListener("keydown",g)});const S=N(()=>{if(c.modelValue===null||c.modelValue===void 0||c.modelValue==="")return c.placeholder;const M=c.options.find(x=>x[c.valueKey]===c.modelValue);return M?M[c.labelKey]:c.placeholder}),I=M=>{h("update:modelValue",M[c.valueKey]),h("change",M[c.valueKey]),a.value=!1,m.value=""},z=()=>{c.disabled||(a.value=!a.value,a.value&&ae(()=>{$.value&&$.value.focus()}))};return G(()=>c.modelValue,M=>{(M==null||M==="")&&(m.value="")}),(M,x)=>(i(),f("div",{ref_key:"dropdownRef",ref:u,class:D(["relative",{"w-full":r.width==="full"}])},[e("button",{type:"button",onClick:z,disabled:r.disabled,class:D(["border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full text-left px-3 py-2 text-gray-700 bg-white relative flex items-center justify-between",{"opacity-50 cursor-not-allowed":r.disabled}])},[e("span",{class:D({"text-gray-500":!c.modelValue})},B(S.value),3),x[3]||(x[3]=e("svg",{class:"h-4 w-4 text-gray-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1))],10,yt),F(e("div",ht,[e("div",bt,[F(e("input",{ref_key:"searchInputRef",ref:$,type:"text","onUpdate:modelValue":x[0]||(x[0]=y=>m.value=y),onInput:x[1]||(x[1]=y=>a.value=!0),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-sm",placeholder:"Search...",onClick:x[2]||(x[2]=re(()=>{},["stop"]))},null,544),[[Z,m.value]])]),e("div",{class:"py-1 overflow-y-auto",style:_e({maxHeight:r.maxHeight})},[(i(!0),f(K,null,O(A.value,y=>(i(),f("div",{key:y[r.valueKey],onClick:v=>I(y),class:D(["block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 cursor-pointer",{"bg-gray-100":y[r.valueKey]===r.modelValue}])},B(y[r.labelKey]),11,wt))),128)),A.value.length===0?(i(),f("div",kt," No options available ")):k("",!0)],4)],512),[[J,a.value]])],2))}},se=ie(xt,[["__scopeId","data-v-d2f1cfa0"]]),_t={class:"space-y-4"},$t="Add New Milestone",St="/api/milestones",Ct="post",At="Create Milestone",jt="Milestone created successfully!",Tt={__name:"MilestoneFormModal",props:{show:Boolean,projectId:Number},emits:["close","saved"],setup(r,{emit:_}){const c=r,h=_,a=me({name:"",description:"",completion_date:null,status:"Not Started",project_id:c.projectId}),m=["Not Started","In Progress","Completed","Overdue"];G(()=>c.show,A=>{A&&Object.assign(a,{name:"",description:"",completion_date:null,status:"Not Started",project_id:c.projectId})},{immediate:!0});const u=A=>{h("saved",A),h("close")},$=()=>{h("close")};return(A,w)=>(i(),V(fe,{show:r.show,title:$t,"api-endpoint":St,"http-method":Ct,"form-data":a,"submit-button-text":At,"success-message":jt,onClose:$,onSubmitted:u},{default:b(({errors:g})=>[e("div",_t,[e("div",null,[d(U,{for:"milestone-name",value:"Milestone Name"}),d(ee,{id:"milestone-name",modelValue:a.name,"onUpdate:modelValue":w[0]||(w[0]=S=>a.name=S),type:"text",class:"mt-1 block w-full",placeholder:"Enter milestone name",required:""},null,8,["modelValue"]),d(R,{message:g.name?g.name[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[d(U,{for:"milestone-description",value:"Description"}),F(e("textarea",{id:"milestone-description","onUpdate:modelValue":w[1]||(w[1]=S=>a.description=S),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",rows:"3",placeholder:"Enter milestone description"},null,512),[[Z,a.description]]),d(R,{message:g.description?g.description[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[d(U,{for:"milestone-completion-date",value:"Completion Date"}),d(ee,{id:"milestone-completion-date",modelValue:a.completion_date,"onUpdate:modelValue":w[2]||(w[2]=S=>a.completion_date=S),type:"date",class:"mt-1 block w-full"},null,8,["modelValue"]),d(R,{message:g.completion_date?g.completion_date[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[d(U,{for:"milestone-status",value:"Status"}),d(se,{id:"milestone-status",modelValue:a.status,"onUpdate:modelValue":w[3]||(w[3]=S=>a.status=S),options:m.map(S=>({value:S,label:S})),"value-key":"value","label-key":"label",placeholder:"Select status",class:"mt-1"},null,8,["modelValue","options"]),d(R,{message:g.status?g.status[0]:"",class:"mt-2"},null,8,["message"])])])]),_:1},8,["show","form-data"]))}},Vt={class:"space-y-4"},Et={key:0},It={key:0,class:"text-sm text-gray-500"},Mt={key:0,class:"text-sm text-gray-500"},Pt={key:0,class:"text-sm text-gray-500"},Dt={class:"flex items-center gap-2 mt-1"},Bt={key:0,class:"text-sm text-gray-500"},Lt=["disabled"],Ut="Create New Task",Nt="/api/tasks",zt="post",Rt="Create Task",Wt="Task created successfully!",qt={__name:"CreateTaskModal",props:{show:Boolean,projectId:{type:Number,default:null}},emits:["close","saved"],setup(r,{emit:_}){const c=r,h=_,a=me({name:"",description:"",assigned_to_user_id:null,due_date:null,status:"To Do",task_type_id:null,milestone_id:null,project_id:c.projectId}),m=["To Do","In Progress","Done","Blocked","Archived"],u=T([]),$=T([]),A=T([]),w=T([]),g=T(!0),S=T(!1),I=T(!1),z=T(!1),M=T(!1);G(()=>c.show,async P=>{P&&(Object.assign(a,{name:"",description:"",assigned_to_user_id:null,due_date:null,status:"To Do",task_type_id:null,milestone_id:null,project_id:c.projectId}),c.projectId?await y(c.projectId):await x())},{immediate:!0}),G(()=>a.project_id,async P=>{P?await y(P):($.value=[],A.value=[],w.value=[])});const x=async()=>{g.value=!0;try{const P=await window.axios.get("/api/projects-simplified");u.value=P.data.map(j=>({value:j.id,label:j.name}))}catch(P){console.error("Error fetching projects:",P),u.value=[]}finally{g.value=!1}},y=async P=>{if(P){S.value=!0,I.value=!0,z.value=!0;try{const[j,L,W]=await Promise.all([window.axios.get(`/api/projects/${P}/users`),window.axios.get("/api/task-types"),window.axios.get(`/api/projects/${P}/milestones`)]);$.value=j.data.map(X=>({value:X.id,label:X.name})),A.value=L.data.map(X=>({value:X.id,label:X.name})),w.value=W.data.map(X=>({value:X.id,label:X.name}))}catch(j){console.error("Error fetching associated task data:",j),$.value=[],A.value=[],w.value=[]}finally{S.value=!1,I.value=!1,z.value=!1}}},v=P=>{h("saved",P),h("close")},t=()=>{h("close")},s=()=>{a.project_id?M.value=!0:alert("Please select a project before adding a milestone.")},n=P=>{if(M.value=!1,P&&P.id&&P.name){const j={value:P.id,label:P.name};w.value.some(L=>L.value===j.value)||w.value.push(j),a.milestone_id=j.value}},p=N(()=>$.value),o=N(()=>A.value),l=N(()=>w.value);return(P,j)=>(i(),f(K,null,[d(fe,{show:r.show,title:Ut,"api-endpoint":Nt,"http-method":zt,"form-data":a,"submit-button-text":Rt,"success-message":Wt,onClose:t,onSubmitted:v},{default:b(({errors:L})=>[e("div",Vt,[r.projectId?k("",!0):(i(),f("div",Et,[d(U,{for:"task-project",value:"Project"}),g.value?(i(),f("div",It,"Loading projects...")):(i(),V(se,{key:1,id:"task-project",modelValue:a.project_id,"onUpdate:modelValue":j[0]||(j[0]=W=>a.project_id=W),options:u.value,"value-key":"value","label-key":"label",placeholder:"Select a project",class:"mt-1",required:!0},null,8,["modelValue","options"])),d(R,{message:L.project_id?L.project_id[0]:"",class:"mt-2"},null,8,["message"])])),e("div",null,[d(U,{for:"task-name",value:"Task Name"}),d(ee,{id:"task-name",modelValue:a.name,"onUpdate:modelValue":j[1]||(j[1]=W=>a.name=W),type:"text",class:"mt-1 block w-full",placeholder:"Enter task name",required:""},null,8,["modelValue"]),d(R,{message:L.name?L.name[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[d(U,{for:"task-description",value:"Description"}),F(e("textarea",{id:"task-description","onUpdate:modelValue":j[2]||(j[2]=W=>a.description=W),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",rows:"3",placeholder:"Enter task description"},null,512),[[Z,a.description]]),d(R,{message:L.description?L.description[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[d(U,{for:"task-status",value:"Status"}),d(se,{id:"task-status",modelValue:a.status,"onUpdate:modelValue":j[3]||(j[3]=W=>a.status=W),options:m.map(W=>({value:W,label:W})),"value-key":"value","label-key":"label",placeholder:"Select status",class:"mt-1"},null,8,["modelValue","options"]),d(R,{message:L.status?L.status[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[d(U,{for:"task-due-date",value:"Due Date"}),d(ee,{id:"task-due-date",modelValue:a.due_date,"onUpdate:modelValue":j[4]||(j[4]=W=>a.due_date=W),type:"date",class:"mt-1 block w-full"},null,8,["modelValue"]),d(R,{message:L.due_date?L.due_date[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[d(U,{for:"task-assigned-to",value:"Assigned To"}),S.value?(i(),f("div",Mt,"Loading users...")):(i(),V(se,{key:1,id:"task-assigned-to",modelValue:a.assigned_to_user_id,"onUpdate:modelValue":j[5]||(j[5]=W=>a.assigned_to_user_id=W),options:p.value,"value-key":"value","label-key":"label",placeholder:"Unassigned",class:"mt-1","allow-empty":!0},null,8,["modelValue","options"])),d(R,{message:L.assigned_to_user_id?L.assigned_to_user_id[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[d(U,{for:"task-type",value:"Task Type"}),I.value?(i(),f("div",Pt,"Loading task types...")):(i(),V(se,{key:1,id:"task-type",modelValue:a.task_type_id,"onUpdate:modelValue":j[6]||(j[6]=W=>a.task_type_id=W),options:o.value,"value-key":"value","label-key":"label",placeholder:"Select a task type",class:"mt-1","allow-empty":!0},null,8,["modelValue","options"])),d(R,{message:L.task_type_id?L.task_type_id[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[d(U,{for:"task-milestone",value:"Milestone"}),e("div",Dt,[z.value?(i(),f("div",Bt,"Loading milestones...")):(i(),V(se,{key:1,id:"task-milestone",modelValue:a.milestone_id,"onUpdate:modelValue":j[7]||(j[7]=W=>a.milestone_id=W),options:l.value,"value-key":"value","label-key":"label",placeholder:"No milestone",class:"flex-grow","allow-empty":!0,disabled:!a.project_id},null,8,["modelValue","options","disabled"])),e("button",{type:"button",onClick:s,disabled:!a.project_id||z.value,class:"px-3 py-2 text-sm font-medium text-blue-600 bg-blue-50 rounded-md hover:bg-blue-100 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",title:"Add New Milestone"},j[9]||(j[9]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4v16m8-8H4"})],-1)]),8,Lt)]),d(R,{message:L.milestone_id?L.milestone_id[0]:"",class:"mt-2"},null,8,["message"])])])]),_:1},8,["show","form-data"]),d(Tt,{show:M.value,"project-id":a.project_id,onClose:j[8]||(j[8]=L=>M.value=!1),onSaved:n},null,8,["show","project-id"])],64))}},Ft=(r,_)=>{let c;return(...h)=>{clearTimeout(c),c=setTimeout(()=>r(...h),_)}},Ht={class:"relative"},Kt={class:"flex flex-wrap items-center gap-2 mb-2 p-2 border border-gray-300 rounded-lg bg-white min-h-[44px] focus-within:border-indigo-500 focus-within:ring-1 focus-within:ring-indigo-500 transition-all duration-150"},Ot=["onClick"],Yt={key:0,class:"absolute z-20 w-full bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto mt-1 transform-gpu"},Gt=["onClick"],Jt={key:1,class:"px-4 py-2 text-sm text-gray-500"},Qt={key:2,class:"px-4 py-2 text-sm text-gray-500"},Xt={__name:"TagInput",props:{modelValue:{type:Array,default:()=>[]},label:{type:String,default:"Tags"},placeholder:{type:String,default:"Add tags..."},error:{type:String,default:""},initialTags:{type:Array,default:()=>[]},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(r,{emit:_}){const c=r,h=_,a=T(""),m=T([]),u=T([]),$=T(!1),A=T(null);function w(){h("update:modelValue",u.value.map(v=>v.id))}G(()=>c.initialTags,v=>{if(u.value=[],v&&v.length>0){const p=[],o=new Set;v.forEach(l=>{o.has(l.id)||(p.push(l),o.add(l.id))}),u.value.push(...p)}const t=v.map(p=>p.id),s=Array.isArray(c.modelValue)?c.modelValue:[];(t.length!==s.length||t.some(p=>!s.includes(p))||s.some(p=>!t.includes(p)))&&w()},{immediate:!0});const g=Ft(async v=>{if(v.length<2){m.value=[],$.value=!1;return}try{const t=await Y.get(`/api/tags/search?query=${v}`);m.value=t.data,$.value=!0}catch(t){console.error("Error fetching tags:",t),m.value=[],$.value=!1}},300);G(a,v=>{c.disabled||g(v)});const S=v=>{u.value.some(t=>t.id===v.id)||(u.value.push(v),a.value="",m.value=[],$.value=!1,w()),ae(()=>A.value.focus())},I=()=>{if(c.disabled)return;const v=a.value.trim();if(!v)return;const t=m.value.find(n=>n.name.toLowerCase()===v.toLowerCase()),s=u.value.some(n=>n.name.toLowerCase()===v.toLowerCase());if(t)S(t);else if(s)a.value="",m.value=[],$.value=!1;else{const n={id:`new_${v.replace(/\s+/g,"-").toLowerCase()}_${Date.now()}`,name:v};u.value.push(n),a.value="",m.value=[],$.value=!1,w()}ae(()=>A.value.focus())},z=v=>{c.disabled||(u.value=u.value.filter(t=>t.id!==v.id),w(),ae(()=>A.value.focus()))},M=()=>{c.disabled||a.value===""&&u.value.length>0&&z(u.value[u.value.length-1])},x=N(()=>m.value.filter(v=>!u.value.some(t=>t.id===v.id))),y=v=>{A.value&&!A.value.$el.contains(v.target)&&($.value=!1,a.value="")};return le(()=>{document.addEventListener("click",y)}),ne(()=>{document.removeEventListener("click",y)}),(v,t)=>(i(),f("div",Ht,[d(U,{value:r.label,class:"mb-1"},null,8,["value"]),e("div",Kt,[(i(!0),f(K,null,O(u.value,s=>(i(),f("span",{key:s.id,class:"inline-flex items-center px-3 py-1 text-sm font-medium bg-indigo-100 text-indigo-800 rounded-full shadow-sm"},[C(B(s.name)+" ",1),r.disabled?k("",!0):(i(),f("button",{key:0,type:"button",onClick:n=>z(s),class:"ml-2 -mr-1 text-indigo-500 hover:text-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 rounded-full p-0.5"},t[3]||(t[3]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,Ot))]))),128)),d(ee,{ref_key:"inputRef",ref:A,type:"text",placeholder:u.value.length===0?r.placeholder:"",modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=s=>a.value=s),onFocus:t[1]||(t[1]=s=>$.value=!0),onKeydown:[de(re(I,["prevent"]),["enter"]),t[2]||(t[2]=de(s=>$.value=!1,["tab"])),de(M,["delete"])],class:"flex-grow min-w-[100px] border-none focus:ring-0 shadow-none p-0 bg-transparent text-gray-900",disabled:r.disabled},null,8,["placeholder","modelValue","onKeydown","disabled"])]),$.value&&(x.value.length>0||a.value.length>=2||x.value.length===0&&a.value.length<2)&&!r.disabled?(i(),f("div",Yt,[(i(!0),f(K,null,O(x.value,s=>(i(),f("div",{key:s.id,onClick:n=>S(s),class:"px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 cursor-pointer transition-colors duration-100"},B(s.name),9,Gt))),128)),!m.value.some(s=>s.name.toLowerCase()===a.value.toLowerCase())&&a.value.length>=2?(i(),f("div",{key:0,onClick:I,class:"px-4 py-2 text-sm text-indigo-700 bg-indigo-50 hover:bg-indigo-100 cursor-pointer border-t border-indigo-200 font-semibold transition-colors duration-100"},' Add new tag: "'+B(a.value)+'" ',1)):k("",!0),x.value.length===0&&a.value.length<2?(i(),f("div",Jt," Type at least 2 characters to search for tags. ")):k("",!0),x.value.length===0&&a.value.length>=2&&!m.value.some(s=>s.name.toLowerCase()===a.value.toLowerCase())?(i(),f("div",Qt,[t[4]||(t[4]=C(" No matching tags found. Press ",-1)),t[5]||(t[5]=e("span",{class:"font-semibold text-indigo-600"},"Enter",-1)),C(' to add "'+B(a.value)+'" as a new tag. ',1)])):k("",!0)])):k("",!0),d(R,{message:r.error,class:"mt-2"},null,8,["message"])]))}},Zt=ie(Xt,[["__scopeId","data-v-4d528a4c"]]),es={class:"space-y-4"},ts={class:"flex items-center mt-4"},ss={__name:"CreateForm",props:{show:{type:Boolean,default:!1},apiEndpoint:{type:String,required:!0}},emits:["close","resourceCreated"],setup(r,{emit:_}){const c=r,h=_,a=me({title:"",description:"",url:"",type:"website",thumbnail_url:"",visible_to_client:!0,tags:[]}),m=N(()=>[{value:"website",label:"Website"},{value:"youtube",label:"YouTube Video"},{value:"document",label:"Document"},{value:"image",label:"Image"},{value:"other",label:"Other"}]),u=w=>w,$=w=>{h("resourceCreated",w),A()},A=()=>{a.title="",a.description="",a.url="",a.type="website",a.thumbnail_url="",a.visible_to_client=!0,a.tags=[],h("close")};return(w,g)=>(i(),V(fe,{show:c.show,title:"Add New Shareable Resource",apiEndpoint:c.apiEndpoint,httpMethod:"post",formData:a,submitButtonText:"Create Resource",successMessage:"Shareable resource created successfully!",formatDataForApi:u,onSubmitted:$,onClose:A},{default:b(({errors:S})=>[e("div",es,[e("div",null,[d(U,{for:"title",value:"Title",class:"mb-1"}),d(ee,{id:"title",type:"text",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:a.title,"onUpdate:modelValue":g[0]||(g[0]=I=>a.title=I),required:""},null,8,["modelValue"]),d(R,{message:S.title?S.title[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[d(U,{for:"url",value:"Resource URL",class:"mb-1"}),d(ee,{id:"url",type:"url",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:a.url,"onUpdate:modelValue":g[1]||(g[1]=I=>a.url=I),required:""},null,8,["modelValue"]),d(R,{message:S.url?S.url[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[d(U,{for:"type",value:"Resource Type",class:"mb-1"}),d(se,{id:"type",modelValue:a.type,"onUpdate:modelValue":g[2]||(g[2]=I=>a.type=I),options:m.value,valueKey:"value",labelKey:"label",placeholder:"Select Resource Type",required:"",class:"mt-1 block w-full"},null,8,["modelValue","options"]),d(R,{message:S.type?S.type[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[d(U,{for:"thumbnail_url",value:"Thumbnail URL (Optional)",class:"mb-1"}),d(ee,{id:"thumbnail_url",type:"url",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:a.thumbnail_url,"onUpdate:modelValue":g[3]||(g[3]=I=>a.thumbnail_url=I)},null,8,["modelValue"]),d(R,{message:S.thumbnail_url?S.thumbnail_url[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[d(U,{for:"description",value:"Description (Optional)",class:"mb-1"}),F(e("textarea",{id:"description",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-lg shadow-sm mt-1 block w-full","onUpdate:modelValue":g[4]||(g[4]=I=>a.description=I),rows:"3"},null,512),[[Z,a.description]]),d(R,{message:S.description?S.description[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[d(Zt,{modelValue:a.tags,"onUpdate:modelValue":g[5]||(g[5]=I=>a.tags=I),label:"Associated Tags",placeholder:"Search or add tags",error:S.tags?S.tags[0]:""},null,8,["modelValue","error"])]),e("div",ts,[d(Ae,{id:"visible_to_client",checked:a.visible_to_client,"onUpdate:checked":g[6]||(g[6]=I=>a.visible_to_client=I)},null,8,["checked"]),d(U,{for:"visible_to_client",value:"Visible to Client",class:"ml-2"}),d(R,{message:S.visible_to_client?S.visible_to_client[0]:"",class:"mt-2"},null,8,["message"])])])]),_:1},8,["show","apiEndpoint","formData"]))}},as=ie(ss,[["__scopeId","data-v-3e3a6a9f"]]),ls={class:"flex items-center p-4 h-16 border-b border-gray-700"},os={key:0,class:"text-xl font-semibold flex-1 truncate"},is=["title"],ns={key:0,class:"p-4 border-b border-gray-700"},rs={class:"relative"},ds={key:1,class:"flex-1 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-500 scrollbar-track-gray-700 p-4"},us={key:0,class:"mb-4"},cs={class:"ml-2 mt-2 space-y-1"},ms=["onClick"],vs={class:"text-sm font-medium text-gray-300 truncate"},fs={class:"ml-4 mt-1 space-y-1"},ps={class:"truncate"},gs={key:1,class:"mb-4"},ys={class:"ml-2 mt-2 space-y-1"},hs=["onClick"],bs={class:"text-sm font-medium text-gray-300 truncate"},ws={class:"ml-4 mt-1 space-y-1"},ks={class:"truncate"},xs={key:2,class:"mb-4"},_s={class:"ml-2 mt-2 space-y-1"},$s={class:"truncate"},Ss={key:3,class:"mb-4"},Cs={class:"ml-2 mt-2 space-y-1"},As={class:"truncate"},js={key:4,class:"text-gray-400 text-sm text-center py-4"},Ts={key:5,class:"text-gray-400 text-sm text-center py-4"},Vs={key:2,class:"flex flex-col items-center pt-4 space-y-4"},Es={key:0,class:"text-gray-400 text-xs text-center px-2"},Is={__name:"LeftSidebar",props:{allProjects:{type:Array,default:()=>[]},activeProjectId:{type:Number,default:null}},emits:["project-selected"],setup(r,{emit:_}){const c=r,h=_,a=T(localStorage.getItem("leftSidebarCollapsed")!=="false"),m=T(""),u=T({}),$=N(()=>{const t=new Set;return c.allProjects.forEach(s=>{s.project_type&&t.add(s.project_type)}),Array.from(t).sort()}),A=N(()=>{const t=new Set;return c.allProjects.forEach(s=>{Array.isArray(s.tags)&&s.tags.forEach(n=>t.add(n))}),Array.from(t).sort()}),w=N(()=>{if(!m.value)return c.allProjects;const t=m.value.toLowerCase();return c.allProjects.filter(s=>{var n,p,o;return s.name.toLowerCase().includes(t)||((n=s.description)==null?void 0:n.toLowerCase().includes(t))||((p=s.project_type)==null?void 0:p.toLowerCase().includes(t))||Array.isArray(s.tags)&&s.tags.some(l=>l.toLowerCase().includes(t))||((o=s.status)==null?void 0:o.toLowerCase().includes(t))})}),g=N(()=>{const t={};w.value.forEach(s=>{s.project_type&&s.status==="active"&&(t[s.project_type]||(t[s.project_type]=[]),t[s.project_type].push(s))});for(const s in t)t[s].sort((n,p)=>n.name.localeCompare(p.name));return t}),S=N(()=>{const t={};w.value.forEach(s=>{Array.isArray(s.tags)&&s.tags.length>0&&s.tags.forEach(n=>{t[n]||(t[n]=[]),t[n].push(s)})});for(const s in t)t[s]=[...new Set(t[s])].sort((n,p)=>n.name.localeCompare(p.name));return t}),I=N(()=>w.value.filter(t=>t.status!=="active").sort((t,s)=>t.name.localeCompare(s.name))),z=N(()=>w.value.filter(t=>!t.project_type&&(!Array.isArray(t.tags)||t.tags.length===0)).sort((t,s)=>t.name.localeCompare(s.name)));G(()=>c.allProjects,()=>{$.value.forEach(t=>{const s=`type-${t}`;u.value[s]===void 0&&(u.value[s]=!0)}),A.value.forEach(t=>{const s=`tag-${t}`;u.value[s]===void 0&&(u.value[s]=!0)}),u.value["main-types"]===void 0&&(u.value["main-types"]=!1),u.value["main-tags"]===void 0&&(u.value["main-tags"]=!1),u.value["inactive-projects"]===void 0&&(u.value["inactive-projects"]=!1),u.value.uncategorized===void 0&&(u.value.uncategorized=!1)},{immediate:!0}),G(a,t=>{localStorage.setItem("leftSidebarCollapsed",t)});const M=()=>{a.value=!a.value},x=t=>{u.value[t]=!u.value[t]},y=t=>{h("project-selected",t)},v=()=>{m.value=""};return(t,s)=>(i(),f("div",{class:D({"w-64":!a.value,"w-16":a.value,"min-w-16":!0,"bg-gray-800 text-white flex flex-col transition-all duration-300 ease-in-out shrink-0 h-screen overflow-hidden":!0})},[e("div",ls,[a.value?k("",!0):(i(),f("h2",os,"Projects")),e("button",{onClick:M,class:"p-2 rounded-full hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500",title:a.value?"Expand Sidebar":"Collapse Sidebar"},[(i(),f("svg",{class:D(["w-6 h-6 text-gray-400 transform transition-transform duration-300",{"rotate-180":a.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},s[5]||(s[5]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"},null,-1)]),2))],8,is)]),a.value?k("",!0):(i(),f("div",ns,[e("div",rs,[F(e("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=n=>m.value=n),placeholder:"Search all projects...",class:"w-full p-2 rounded-md bg-gray-700 border border-gray-600 text-white placeholder-gray-400 focus:ring-indigo-500 focus:border-indigo-500 text-sm"},null,512),[[Z,m.value]]),m.value?(i(),f("button",{key:0,onClick:v,class:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-200",title:"Clear search"},s[6]||(s[6]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))):k("",!0)])])),a.value?(i(),f("div",Vs,[(i(!0),f(K,null,O(c.allProjects,n=>(i(),V(E(Q),{key:n.id,href:t.route("projects.show",n.id),onClick:p=>y(n.id),class:D({"w-10 h-10 rounded-full flex items-center justify-center text-xs font-bold transition-all duration-200":!0,"bg-indigo-600 text-white":n.id===r.activeProjectId,"bg-gray-700 text-gray-300 hover:bg-gray-600":n.id!==r.activeProjectId}),title:n.name},{default:b(()=>[C(B(n.name.charAt(0).toUpperCase()),1)]),_:2},1032,["href","onClick","class","title"]))),128)),r.allProjects.length===0?(i(),f("div",Es," No Projects ")):k("",!0)])):(i(),f("div",ds,[Object.keys(g.value).length>0?(i(),f("div",us,[e("div",{class:"flex items-center justify-between cursor-pointer py-2 hover:bg-gray-700 rounded-md px-2",onClick:s[1]||(s[1]=n=>x("main-types"))},[s[8]||(s[8]=e("h3",{class:"text-sm font-semibold text-gray-400"},"Active Projects by Type",-1)),(i(),f("svg",{class:D(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!u.value["main-types"]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},s[7]||(s[7]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))]),F(e("div",cs,[(i(!0),f(K,null,O(g.value,(n,p)=>(i(),f("div",{key:p},[e("div",{class:"flex items-center justify-between cursor-pointer py-1 hover:bg-gray-700 rounded-md px-2",onClick:o=>x(`type-${p}`)},[e("h4",vs,B(p),1),(i(),f("svg",{class:D(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!u.value[`type-${p}`]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},s[9]||(s[9]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))],8,ms),F(e("ul",fs,[(i(!0),f(K,null,O(n,o=>(i(),f("li",{key:o.id},[d(E(Q),{href:t.route("projects.show",o.id),onClick:l=>y(o.id),class:D({"block w-full text-left px-3 py-2 rounded-md transition-colors":!0,"bg-indigo-600 text-white":o.id===r.activeProjectId,"hover:bg-gray-700 text-gray-200":o.id!==r.activeProjectId,"font-bold":o.id===r.activeProjectId})},{default:b(()=>[e("span",ps,B(o.name),1)]),_:2},1032,["href","onClick","class"])]))),128))],512),[[J,!u.value[`type-${p}`]]])]))),128))],512),[[J,!u.value["main-types"]]])])):k("",!0),Object.keys(S.value).length>0?(i(),f("div",gs,[e("div",{class:"flex items-center justify-between cursor-pointer py-2 hover:bg-gray-700 rounded-md px-2",onClick:s[2]||(s[2]=n=>x("main-tags"))},[s[11]||(s[11]=e("h3",{class:"text-sm font-semibold text-gray-400"},"Projects by Tag",-1)),(i(),f("svg",{class:D(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!u.value["main-tags"]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},s[10]||(s[10]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))]),F(e("div",ys,[(i(!0),f(K,null,O(S.value,(n,p)=>(i(),f("div",{key:p},[e("div",{class:"flex items-center justify-between cursor-pointer py-1 hover:bg-gray-700 rounded-md px-2",onClick:o=>x(`tag-${p}`)},[e("h4",bs,B(p),1),(i(),f("svg",{class:D(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!u.value[`tag-${p}`]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},s[12]||(s[12]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))],8,hs),F(e("ul",ws,[(i(!0),f(K,null,O(n,o=>(i(),f("li",{key:o.id},[d(E(Q),{href:t.route("projects.show",o.id),onClick:l=>y(o.id),class:D({"block w-full text-left px-3 py-2 rounded-md transition-colors":!0,"bg-indigo-600 text-white":o.id===r.activeProjectId,"hover:bg-gray-700 text-gray-200":o.id!==r.activeProjectId,"font-bold":o.id===r.activeProjectId})},{default:b(()=>[e("span",ks,B(o.name),1)]),_:2},1032,["href","onClick","class"])]))),128))],512),[[J,!u.value[`tag-${p}`]]])]))),128))],512),[[J,!u.value["main-tags"]]])])):k("",!0),I.value.length>0?(i(),f("div",xs,[e("div",{class:"flex items-center justify-between cursor-pointer py-2 hover:bg-gray-700 rounded-md px-2",onClick:s[3]||(s[3]=n=>x("inactive-projects"))},[s[14]||(s[14]=e("h3",{class:"text-sm font-semibold text-gray-400"},"Inactive Projects",-1)),(i(),f("svg",{class:D(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!u.value["inactive-projects"]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},s[13]||(s[13]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))]),F(e("ul",_s,[(i(!0),f(K,null,O(I.value,n=>(i(),f("li",{key:n.id},[d(E(Q),{href:t.route("projects.show",n.id),onClick:p=>y(n.id),class:D({"block w-full text-left px-3 py-2 rounded-md transition-colors":!0,"bg-indigo-600 text-white":n.id===r.activeProjectId,"hover:bg-gray-700 text-gray-200":n.id!==r.activeProjectId,"font-bold":n.id===r.activeProjectId})},{default:b(()=>[e("span",$s,B(n.name)+" ("+B(n.status.replace("_"," "))+")",1)]),_:2},1032,["href","onClick","class"])]))),128))],512),[[J,!u.value["inactive-projects"]]])])):k("",!0),z.value.length>0?(i(),f("div",Ss,[e("div",{class:"flex items-center justify-between cursor-pointer py-2 hover:bg-gray-700 rounded-md px-2",onClick:s[4]||(s[4]=n=>x("uncategorized"))},[s[16]||(s[16]=e("h3",{class:"text-sm font-semibold text-gray-400"},"Uncategorized",-1)),(i(),f("svg",{class:D(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!u.value.uncategorized}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},s[15]||(s[15]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))]),F(e("ul",Cs,[(i(!0),f(K,null,O(z.value,n=>(i(),f("li",{key:n.id},[d(E(Q),{href:t.route("projects.show",n.id),onClick:p=>y(n.id),class:D({"block w-full text-left px-3 py-2 rounded-md transition-colors":!0,"bg-indigo-600 text-white":n.id===r.activeProjectId,"hover:bg-gray-700 text-gray-200":n.id!==r.activeProjectId,"font-bold":n.id===r.activeProjectId})},{default:b(()=>[e("span",As,B(n.name),1)]),_:2},1032,["href","onClick","class"])]))),128))],512),[[J,!u.value.uncategorized]])])):k("",!0),w.value.length===0?(i(),f("div",js," No projects found matching your search. ")):r.allProjects.length===0&&!m.value?(i(),f("div",Ts," No projects available. ")):k("",!0)]))],2))}},Ms=ie(Is,[["__scopeId","data-v-417d431f"]]),Ps={class:"flex h-screen overflow-hidden"},Ds={class:"flex-1 flex flex-col overflow-hidden"},Bs={class:"border-b border-gray-100 bg-white z-10 relative"},Ls={class:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8"},Us={class:"flex h-16 justify-between"},Ns={class:"flex"},zs={class:"flex shrink-0 items-center"},Rs={class:"hidden space-x-8 sm:-my-px sm:ms-10 sm:flex"},Ws={key:0,class:"hidden sm:flex sm:items-center"},qs={class:"hidden sm:ms-6 sm:flex sm:items-center"},Fs={class:"relative ms-3"},Hs={class:"inline-flex rounded-md"},Ks={type:"button",class:"inline-flex items-center rounded-md border border-transparent bg-white px-3 py-2 text-sm font-medium leading-4 text-gray-500 transition duration-150 ease-in-out hover:text-gray-700 focus:outline-none"},Os={class:"-me-2 flex items-center sm:hidden"},Ys={class:"h-6 w-6",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24"},Gs={class:"space-y-1 pb-3 pt-2"},Js={key:0,class:"mt-3 space-y-1"},Qs={class:"border-t border-gray-200 pb-1 pt-4"},Xs={class:"px-4"},Zs={class:"text-base font-medium text-gray-800"},ea={class:"text-sm font-medium text-gray-500"},ta={class:"text-sm font-medium text-gray-500 capitalize"},sa={class:"mt-3 space-y-1"},aa={key:0,class:"bg-white shadow"},la={class:"mx-auto max-w-7xl px-4 py-6 sm:px-6 lg:px-8"},oa={class:"flex-1 overflow-y-auto"},fa={__name:"AuthenticatedLayout",setup(r){const _=T(!1),c=N(()=>ue().props.auth.user);N(()=>{var o;return((o=c.value.role_data)==null?void 0:o.name)||""});const{canDo:h}=$e(),a=h("manage_projects"),m=h("compose_emails"),u=h("approve_emails"),$=h("create_users"),A=h("manage_roles"),w=h("manage_task_types"),g=h("create_clients"),S=T(!1),I=T(!1),z=T([]),M=T(!0),x=N(()=>ue().props.id||null),y=async()=>{const o=localStorage.getItem("authToken");if(o){window.axios.defaults.headers.common.Authorization=`Bearer ${o}`;try{await window.axios.get("/api/user")}catch(l){l.response&&l.response.status===401&&(console.log("Session expired, redirecting to login"),localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization,window.location.href="/login")}}else delete window.axios.defaults.headers.common.Authorization},v=()=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),delete window.axios.defaults.headers.common.Authorization},t=o=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),delete window.axios.defaults.headers.common.Authorization,window.location.href="/login"},s=async()=>{M.value=!0;try{const o=await window.axios.get("/api/projects-simplified");z.value=o.data}catch(o){console.error("Error fetching all projects for sidebar:",o),z.value=[]}finally{M.value=!1}},n=o=>{Ce.visit(route("projects.show",o))},p=T(null);return le(()=>{y(),p.value&&je(p.value),s()}),(o,l)=>{var P;return i(),f("div",Ps,[d(Se,{ref_key:"notificationContainerRef",ref:p},null,512),d(dt),d(Ms,{"all-projects":z.value,"active-project-id":x.value,onProjectSelected:n},null,8,["all-projects","active-project-id"]),e("div",Ds,[e("nav",Bs,[e("div",Ls,[e("div",Us,[e("div",Ns,[e("div",zs,[d(E(Q),{href:o.route("dashboard")},{default:b(()=>[d(be,{class:"block h-16 w-auto fill-current text-gray-800"})]),_:1},8,["href"])]),e("div",Rs,[d(Ie,{href:o.route("dashboard"),active:o.route().current("dashboard")},{default:b(()=>l[8]||(l[8]=[C(" Dashboard ",-1)])),_:1,__:[8]},8,["href","active"]),E(A)?(i(),f("div",Ws,[d(pe,{align:"right",width:"48"},{trigger:b(()=>l[9]||(l[9]=[e("span",{class:"inline-flex rounded-md"},[e("button",{type:"button",class:"inline-flex items-center rounded-md border border-transparent bg-white px-3 py-2 text-sm font-medium leading-4 text-gray-500 transition duration-150 ease-in-out hover:text-gray-700 focus:outline-none"},[C(" Admin "),e("svg",{class:"ms-2 -me-0.5 h-4 w-4",xmlns:"[http://www.w3.org/2000/svg](http://www.w3.org/2000/svg)",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])])],-1)])),content:b(()=>[E(a)?(i(),V(H,{key:0,href:o.route("projects.index"),active:o.route().current("projects.index")},{default:b(()=>l[10]||(l[10]=[C(" Projects ",-1)])),_:1,__:[10]},8,["href","active"])):k("",!0),E(u)?(i(),V(H,{key:1,href:o.route("emails.pending"),active:o.route().current("emails.pending")},{default:b(()=>l[11]||(l[11]=[C(" Approve Emails ",-1)])),_:1,__:[11]},8,["href","active"])):k("",!0),E(m)?(i(),V(H,{key:2,href:o.route("emails.rejected"),active:o.route().current("emails.rejected")},{default:b(()=>l[12]||(l[12]=[C(" Rejected Emails ",-1)])),_:1,__:[12]},8,["href","active"])):k("",!0),E($)?(i(),V(H,{key:3,href:o.route("availability.index"),active:o.route().current("availability.index")},{default:b(()=>l[13]||(l[13]=[C(" Weekly Availability ",-1)])),_:1,__:[13]},8,["href","active"])):k("",!0),E(g)?(i(),V(H,{key:4,href:o.route("clients.index"),active:o.route().current("clients.index")},{default:b(()=>l[14]||(l[14]=[C(" Clients ",-1)])),_:1,__:[14]},8,["href","active"])):k("",!0),E($)?(i(),V(H,{key:5,href:o.route("users.index"),active:o.route().current("users.index")},{default:b(()=>l[15]||(l[15]=[C(" Users ",-1)])),_:1,__:[15]},8,["href","active"])):k("",!0),E(w)?(i(),V(H,{key:6,href:o.route("task-types.index"),active:o.route().current("task-types.index")},{default:b(()=>l[16]||(l[16]=[C(" Task Types ",-1)])),_:1,__:[16]},8,["href","active"])):k("",!0),E(h)("manage_bonus_configuration")?(i(),V(H,{key:7,href:o.route("bonus-configuration.index"),active:o.route().current("bonus-configuration.index")},{default:b(()=>l[17]||(l[17]=[C(" Bonus Configuration ",-1)])),_:1,__:[17]},8,["href","active"])):k("",!0),E(h)("manage_email_templates")?(i(),V(H,{key:8,href:o.route("email-templates.index"),active:o.route().current("email-templates.index")},{default:b(()=>l[18]||(l[18]=[C(" Email Templates ",-1)])),_:1,__:[18]},8,["href","active"])):k("",!0),E(h)("manage_placeholder_definitions")?(i(),V(H,{key:9,href:o.route("placeholder-definitions.index"),active:o.route().current("placeholder-definitions.index")},{default:b(()=>l[19]||(l[19]=[C(" Placeholder Definitions ",-1)])),_:1,__:[19]},8,["href","active"])):k("",!0),E(h)("manage_roles")?(i(),V(H,{key:10,href:o.route("admin.roles.index")},{default:b(()=>l[20]||(l[20]=[C(" Manage Roles ",-1)])),_:1,__:[20]},8,["href"])):k("",!0),E(h)("manage_permissions")?(i(),V(H,{key:11,href:o.route("admin.permissions.index")},{default:b(()=>l[21]||(l[21]=[C(" Manage Permissions ",-1)])),_:1,__:[21]},8,["href"])):k("",!0)]),_:1})])):k("",!0)])]),e("div",qs,[d(oe,{type:"button",onClick:l[0]||(l[0]=j=>S.value=!0),class:"mr-4 px-4 py-2 text-sm"},{default:b(()=>l[22]||(l[22]=[C(" Add Task ",-1)])),_:1,__:[22]}),d(oe,{type:"button",onClick:l[1]||(l[1]=j=>I.value=!0),class:"mr-4 px-4 py-2 text-sm"},{default:b(()=>l[23]||(l[23]=[C(" Add Resource ",-1)])),_:1,__:[23]}),e("div",Fs,[d(pe,{align:"right",width:"48"},{trigger:b(()=>{var j;return[e("span",Hs,[e("button",Ks,[C(B(c.value.name)+" ("+B((j=c.value.role_data)==null?void 0:j.name)+") ",1),l[24]||(l[24]=e("svg",{class:"ms-2 -me-0.5 h-4 w-4",xmlns:"[http://www.w3.org/2000/svg](http://www.w3.org/2000/svg)",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1))])])]}),content:b(()=>[d(H,{href:o.route("profile.edit")},{default:b(()=>l[25]||(l[25]=[C(" Profile ",-1)])),_:1,__:[25]},8,["href"]),d(H,{href:o.route("logout"),method:"post",as:"button",onSuccess:v,onError:t},{default:b(()=>l[26]||(l[26]=[C(" Log Out ",-1)])),_:1,__:[26]},8,["href"])]),_:1})])]),e("div",Os,[e("button",{onClick:l[2]||(l[2]=j=>_.value=!_.value),class:"inline-flex items-center justify-center rounded-md p-2 text-gray-400 transition duration-150 ease-in-out hover:bg-gray-100 hover:text-gray-500 focus:bg-gray-100 focus:text-gray-500 focus:outline-none"},[(i(),f("svg",Ys,[e("path",{class:D({hidden:_.value,"inline-flex":!_.value}),"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},null,2),e("path",{class:D({hidden:!_.value,"inline-flex":_.value}),"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,2)]))])])])]),e("div",{class:D([{block:_.value,hidden:!_.value},"sm:hidden"])},[e("div",Gs,[E(A)?(i(),f("div",Js,[l[41]||(l[41]=e("div",{class:"px-4 font-medium text-base text-gray-800"},"Admin",-1)),d(q,{href:o.route("dashboard"),active:o.route().current("dashboard")},{default:b(()=>l[27]||(l[27]=[C(" Dashboard ",-1)])),_:1,__:[27]},8,["href","active"]),E(g)?(i(),V(q,{key:0,href:o.route("clients.index"),active:o.route().current("clients.index")},{default:b(()=>l[28]||(l[28]=[C(" Clients ",-1)])),_:1,__:[28]},8,["href","active"])):k("",!0),E(a)?(i(),V(q,{key:1,href:o.route("projects.index"),active:o.route().current("projects.index")},{default:b(()=>l[29]||(l[29]=[C(" Projects ",-1)])),_:1,__:[29]},8,["href","active"])):k("",!0),E($)?(i(),V(q,{key:2,href:o.route("users.index"),active:o.route().current("users.index")},{default:b(()=>l[30]||(l[30]=[C(" Users ",-1)])),_:1,__:[30]},8,["href","active"])):k("",!0),E(m)?(i(),V(q,{key:3,href:o.route("emails.compose"),active:o.route().current("emails.compose")},{default:b(()=>l[31]||(l[31]=[C(" Compose Email ",-1)])),_:1,__:[31]},8,["href","active"])):k("",!0),E(u)?(i(),V(q,{key:4,href:o.route("emails.pending"),active:o.route().current("emails.pending")},{default:b(()=>l[32]||(l[32]=[C(" Approve Emails ",-1)])),_:1,__:[32]},8,["href","active"])):k("",!0),E(m)?(i(),V(q,{key:5,href:o.route("emails.rejected"),active:o.route().current("emails.rejected")},{default:b(()=>l[33]||(l[33]=[C(" Rejected Emails ",-1)])),_:1,__:[33]},8,["href","active"])):k("",!0),E($)?(i(),V(q,{key:6,href:o.route("availability.index"),active:o.route().current("availability.index")},{default:b(()=>l[34]||(l[34]=[C(" Weekly Availability ",-1)])),_:1,__:[34]},8,["href","active"])):k("",!0),E(h)("manage_roles")?(i(),V(q,{key:7,href:o.route("admin.roles.index"),active:o.route().current("admin.roles.index")},{default:b(()=>l[35]||(l[35]=[C(" Manage Roles ",-1)])),_:1,__:[35]},8,["href","active"])):k("",!0),E(h)("manage_permissions")?(i(),V(q,{key:8,href:o.route("admin.permissions.index"),active:o.route().current("admin.permissions.index")},{default:b(()=>l[36]||(l[36]=[C(" Manage Permissions ",-1)])),_:1,__:[36]},8,["href","active"])):k("",!0),E(h)("manage_bonus_configuration")?(i(),V(q,{key:9,href:o.route("bonus-configuration.index"),active:o.route().current("bonus-configuration.index")},{default:b(()=>l[37]||(l[37]=[C(" Bonus Configuration ",-1)])),_:1,__:[37]},8,["href","active"])):k("",!0),E(w)?(i(),V(q,{key:10,href:o.route("task-types.index"),active:o.route().current("task-types.index")},{default:b(()=>l[38]||(l[38]=[C(" Task Types ",-1)])),_:1,__:[38]},8,["href","active"])):k("",!0),E(h)("manage_email_templates")?(i(),V(q,{key:11,href:o.route("email-templates.index"),active:o.route().current("email-templates.index")},{default:b(()=>l[39]||(l[39]=[C(" Email Templates ",-1)])),_:1,__:[39]},8,["href","active"])):k("",!0),E(h)("manage_placeholder_definitions")?(i(),V(q,{key:12,href:o.route("placeholder-definitions.index"),active:o.route().current("placeholder-definitions.index")},{default:b(()=>l[40]||(l[40]=[C(" Placeholder Definitions ",-1)])),_:1,__:[40]},8,["href","active"])):k("",!0)])):k("",!0)]),e("div",Qs,[e("div",Xs,[e("div",Zs,B(c.value.name),1),e("div",ea,B(c.value.email),1),e("div",ta,B((P=c.value.role_data)==null?void 0:P.name),1)]),e("div",sa,[d(q,{as:"button",onClick:l[3]||(l[3]=j=>S.value=!0)},{default:b(()=>l[42]||(l[42]=[C(" Add Task ",-1)])),_:1,__:[42]}),d(q,{as:"button",onClick:l[4]||(l[4]=j=>I.value=!0)},{default:b(()=>l[43]||(l[43]=[C(" Add Resource ",-1)])),_:1,__:[43]}),d(q,{href:o.route("profile.edit")},{default:b(()=>l[44]||(l[44]=[C(" Profile ",-1)])),_:1,__:[44]},8,["href"]),d(q,{href:o.route("logout"),method:"post",as:"button",onSuccess:v,onError:t},{default:b(()=>l[45]||(l[45]=[C(" Log Out ",-1)])),_:1,__:[45]},8,["href"])])])],2)]),o.$slots.header?(i(),f("header",aa,[e("div",la,[te(o.$slots,"header")])])):k("",!0),e("main",oa,[te(o.$slots,"default")]),d(qt,{show:S.value,onClose:l[5]||(l[5]=j=>S.value=!1),onSaved:l[6]||(l[6]=j=>S.value=!1)},null,8,["show"]),d(as,{"api-endpoint":"/api/shareable-resources",show:I.value,onClose:l[7]||(l[7]=j=>I.value=!1)},null,8,["show"])])])}}};export{fe as B,as as C,se as S,Zt as T,fa as _,ot as a,Tt as b,qt as c,Ve as e,Te as s,va as w};
