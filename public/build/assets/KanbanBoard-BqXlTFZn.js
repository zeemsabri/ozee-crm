import{r as p,c as r,o as d,F as g,i as k,a as o,k as c,Z as f,t as y,n as B,g as x,f as N,v as A,z as h,y as $}from"./app-NvjusqzW.js";const L={class:"flex gap-4 overflow-x-auto"},I=["onDrop"],S={class:"flex items-center justify-between mb-2"},q={class:"text-sm font-semibold text-gray-700"},z={class:"text-xs text-gray-500"},E={key:0,class:"text-xs text-gray-500 p-2"},M={class:"space-y-2"},O={class:"mt-3"},V={key:0,class:"relative group"},j=["onClick"],K={key:0,class:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-48 p-2 bg-gray-900 text-white text-[10px] rounded shadow-xl opacity-0 group-hover:opacity-100 pointer-events-none transition-opacity duration-75 z-50 text-center"},F={key:1,class:"mt-2 space-y-2"},J=["id","onKeydown"],H={class:"flex items-center gap-2"},U=["onClick"],G={__name:"KanbanBoard",props:{columns:{type:Array,required:!0},itemsByColumn:{type:Object,required:!0},loading:{type:Boolean,default:!1},isAddTaskDisabled:{type:Boolean,default:!1},addTaskDisabledTooltip:{type:String,default:""}},emits:["move","drop","add-task"],setup(n,{emit:w}){const b=n,i=w,u=p(null),l=p(""),T=a=>{u.value=a,l.value="",setTimeout(()=>{const t=document.getElementById(`quick-add-${a}`);t&&t.focus()},100)},m=()=>{u.value=null,l.value=""},v=a=>{l.value.trim()&&i("add-task",{columnKey:a,taskName:l.value.trim()}),m()},D=a=>{a.preventDefault(),a.dataTransfer.dropEffect="move"},_=(a,t)=>{try{const e=a.dataTransfer.getData("text/plain"),s=JSON.parse(e);i("drop",{data:s,to:t}),s&&s.id!=null&&i("move",{id:s.id,to:t})}catch{i("drop",{data:null,to:t})}},C=a=>{var t,e;return((e=(t=b.itemsByColumn)==null?void 0:t[a])==null?void 0:e.length)??0};return(a,t)=>(d(),r("div",L,[(d(!0),r(g,null,k(n.columns,e=>(d(),r("div",{key:e.key,class:"flex-1 min-w-[260px] bg-gray-50 rounded-lg border border-gray-200 p-3",onDragover:D,onDrop:s=>_(s,e.key)},[o("div",S,[f(a.$slots,"column-header",{column:e},()=>[o("h3",q,y(e.title),1)]),o("span",z,y(C(e.key)),1)]),n.loading?(d(),r("div",E,"Loading...")):c("",!0),o("div",M,[(d(!0),r(g,null,k(n.itemsByColumn[e.key]||[],s=>f(a.$slots,"item",{key:s.id??JSON.stringify(s),item:s,columnKey:e.key})),128))]),o("div",O,[u.value!==e.key?(d(),r("div",V,[o("button",{type:"button",onClick:s=>n.isAddTaskDisabled?null:T(e.key),class:B(["w-full text-left text-sm text-gray-500 p-2 rounded flex items-center gap-2 transition-colors",n.isAddTaskDisabled?"opacity-50 cursor-not-allowed grayscale":"hover:text-gray-700 hover:bg-gray-100"])},t[1]||(t[1]=[o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),x(" Add a card ",-1)]),10,j),n.isAddTaskDisabled?(d(),r("div",K,[x(y(n.addTaskDisabledTooltip)+" ",1),t[2]||(t[2]=o("div",{class:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"},null,-1))])):c("",!0)])):c("",!0),u.value===e.key?(d(),r("div",F,[N(o("textarea",{id:`quick-add-${e.key}`,"onUpdate:modelValue":t[0]||(t[0]=s=>l.value=s),onKeydown:[h($(s=>v(e.key),["prevent"]),["enter"]),h(m,["esc"])],rows:"2",placeholder:"Enter task name...",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-sm"},null,40,J),[[A,l.value]]),o("div",H,[o("button",{onClick:s=>v(e.key),class:"bg-indigo-600 text-white px-3 py-1.5 rounded text-sm hover:bg-indigo-700 font-medium"},"Add card",8,U),o("button",{onClick:m,class:"text-gray-500 hover:text-gray-700 p-1"},t[3]||(t[3]=[o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[o("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)]))])])):c("",!0)])],40,I))),128))]))}};export{G as _};
