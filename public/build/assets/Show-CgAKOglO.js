import{S as Me,B as Qe,b as ei,c as ti,_ as si}from"./AuthenticatedLayout-H4NX2BDj.js";import{r as b,B as Ye,i as u,o as d,b as i,F as X,j as le,g as k,t as f,m as W,a8 as vt,e as h,a9 as Vs,a as L,A as me,c as oe,aa as wa,L as ba,n as ae,D as Ie,T as Bt,ab as ne,H as ai,N as jt,ac as li,d as Ue,z as Ne,w as pe,s as U,f as we,k as Ve,v as Kt,h as J,G as ii,_ as qe,a7 as ni,q as As,ad as xa,O as Fs,Y as oi,R as Ot,a2 as ri,u as di,M as ui,a6 as ci,a4 as mi,y as vi,a3 as hi}from"./app-tUqoeRBl.js";import{c as Te,a as Ct,d as Wt,f as gt,b as pi,_ as fi}from"./ProjectForm-Bt-LdBUD.js";import{a as je,_ as rt}from"./SecondaryButton-BlVUSvsN.js";import{P as _e}from"./PrimaryButton-BmSFZ3Li.js";import{a as Va,_ as Aa}from"./StandupModal-Do72mLaL.js";import{_ as B}from"./InputLabel-B-iSIChM.js";import{_ as fe,a as de}from"./InputError-DF-YZDbR.js";import{_ as Ya}from"./EmailEditor-k4kf9nPk.js";import"./ApplicationLogo-Br69gY8h.js";import"./Checkbox-9_MC9A8p.js";import"./ProjectTypeInput-BzudWC7w.js";const yi={class:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow mb-6"},gi={key:0,class:"text-sm text-gray-500"},_i={key:1,class:"text-sm text-gray-500"},wi={key:2,class:"space-y-3"},bi={class:"flex justify-between items-start"},xi={class:"font-medium text-gray-900"},ki={class:"text-sm text-gray-600"},Di={key:0,class:"text-sm text-gray-600 mt-1"},Si={class:"flex space-x-2"},Mi=["href"],Ci=["href"],Ti=["onClick"],Ei={__name:"ProjectMeetingsList",props:{projectId:{type:Number,required:!0}},setup(e,{expose:t}){const s=e,a=b([]),l=b(!1),n=b(""),o=()=>{try{n.value=Intl.DateTimeFormat().resolvedOptions().timeZone}catch(p){console.error("Error detecting user timezone:",p),n.value="UTC"}},r=(p,g=null,D=!1)=>{if(!p)return"";try{if(D||p.endsWith("Z")){if(g&&g===n.value){const M={dateStyle:"medium",timeStyle:"short"};return new Date(p).toLocaleString(void 0,M)}const x={dateStyle:"medium",timeStyle:"short",timeZone:g||n.value};return new Date(p).toLocaleString(void 0,x)}else{if(g&&g===n.value){const M={dateStyle:"medium",timeStyle:"short"};return new Date(p).toLocaleString(void 0,M)}const x={dateStyle:"medium",timeStyle:"short",timeZone:g||n.value};return new Date(p).toLocaleString(void 0,x)}}catch(x){return console.error("Error formatting meeting time:",x),new Date(p).toLocaleString()}},m=(p,g=null,D=!1)=>{if(!p)return"";try{if(D||p.endsWith("Z")){if(g&&g===n.value){const M={timeStyle:"short"};return new Date(p).toLocaleTimeString(void 0,M)}const x={timeStyle:"short",timeZone:g||n.value};return new Date(p).toLocaleTimeString(void 0,x)}else{if(g&&g===n.value){const M={timeStyle:"short"};return new Date(p).toLocaleTimeString(void 0,M)}const x={timeStyle:"short",timeZone:g||n.value};return new Date(p).toLocaleTimeString(void 0,x)}}catch(x){return console.error("Error formatting meeting time (time only):",x),new Date(p).toLocaleTimeString()}},c=async()=>{l.value=!0;try{const p=await window.axios.get(`/api/projects/${s.projectId}/meetings`);a.value=p.data}catch(p){console.error("Error fetching project meetings:",p)}finally{l.value=!1}},v=async p=>{if(confirm("Are you sure you want to delete this meeting?"))try{await window.axios.delete(`/api/projects/${s.projectId}/meetings/${p}`),await c()}catch(g){console.error("Error deleting meeting:",g),alert("Failed to delete meeting. Please try again.")}};return t({fetchMeetings:c}),Ye(()=>{o(),c()}),(p,g)=>(d(),u("div",yi,[g[4]||(g[4]=i("h4",{class:"text-md font-semibold text-gray-900 mb-2"},"Upcoming Meetings",-1)),l.value?(d(),u("div",gi," Loading meetings... ")):a.value.length===0?(d(),u("div",_i," No upcoming meetings scheduled. ")):(d(),u("div",wi,[(d(!0),u(X,null,le(a.value,D=>(d(),u("div",{key:D.id,class:"p-3 bg-gray-50 rounded-lg border border-gray-200 hover:bg-gray-100 transition-colors"},[i("div",bi,[i("div",null,[i("h5",xi,f(D.summary),1),i("p",ki,f(r(D.start_time,D.timezone,D.is_utc))+" - "+f(m(D.end_time,D.timezone,D.is_utc)),1),D.location?(d(),u("p",Di,[g[0]||(g[0]=i("span",{class:"font-medium"},"Location:",-1)),W(" "+f(D.location),1)])):k("",!0)]),i("div",Si,[i("a",{href:D.google_event_link,target:"_blank",class:"text-blue-600 hover:text-blue-800",title:"View in Google Calendar"},g[1]||(g[1]=[i("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)]),8,Mi),D.google_meet_link?(d(),u("a",{key:0,href:D.google_meet_link,target:"_blank",class:"text-green-600 hover:text-green-800",title:"Join Google Meet"},g[2]||(g[2]=[i("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1)]),8,Ci)):k("",!0),i("button",{onClick:x=>v(D.google_event_id),class:"text-red-600 hover:text-red-800",title:"Delete Meeting"},g[3]||(g[3]=[i("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,Ti)])])]))),128))]))]))}};var $i=Object.defineProperty,ji=(e,t,s)=>t in e?$i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,at=(e,t,s)=>ji(e,typeof t!="symbol"?t+"":t,s);const Oi=(e,t,s)=>{const a=e[t];return a?typeof a=="function"?a():Promise.resolve(a):new Promise((l,n)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(n.bind(null,new Error("Unknown variable dynamic import: "+t+(t.split("/").length!==s?". Note that variables only represent file names one level deep.":""))))})};let Lt,ka,Da,Pe,Pt={},kt={};class Vi{constructor(t,s=!1){at(this,"texts",{}),at(this,"dateToMinutes",a=>a.getHours()*60+a.getMinutes()),Pe=this,this._texts=t,!s&&Date&&!Date.prototype.addDays&&this._initDatePrototypes()}_initDatePrototypes(){Date.prototype.addDays=function(t){return Pe.addDays(this,t)},Date.prototype.subtractDays=function(t){return Pe.subtractDays(this,t)},Date.prototype.addHours=function(t){return Pe.addHours(this,t)},Date.prototype.subtractHours=function(t){return Pe.subtractHours(this,t)},Date.prototype.addMinutes=function(t){return Pe.addMinutes(this,t)},Date.prototype.subtractMinutes=function(t){return Pe.subtractMinutes(this,t)},Date.prototype.getWeek=function(){return Pe.getWeek(this)},Date.prototype.isToday=function(){return Pe.isToday(this)},Date.prototype.isLeapYear=function(){return Pe.isLeapYear(this)},Date.prototype.format=function(t="YYYY-MM-DD"){return Pe.formatDate(this,t)},Date.prototype.formatTime=function(t="HH:mm"){return Pe.formatTime(this,t)}}removePrototypes(){delete Date.prototype.addDays,delete Date.prototype.subtractDays,delete Date.prototype.addHours,delete Date.prototype.subtractHours,delete Date.prototype.addMinutes,delete Date.prototype.subtractMinutes,delete Date.prototype.getWeek,delete Date.prototype.isToday,delete Date.prototype.isLeapYear,delete Date.prototype.format,delete Date.prototype.formatTime}updateTexts(t){this._texts=t}_todayFormatted(){return ka!==new Date().getDate()&&(Lt=new Date,ka=Lt.getDate(),Da=`${Lt.getFullYear()}-${Lt.getMonth()}-${Lt.getDate()}`),Da}addDays(t,s){const a=new Date(t.valueOf());return a.setDate(a.getDate()+s),a}subtractDays(t,s){const a=new Date(t.valueOf());return a.setDate(a.getDate()-s),a}addHours(t,s){const a=new Date(t.valueOf());return a.setHours(a.getHours()+s),a}subtractHours(t,s){const a=new Date(t.valueOf());return a.setHours(a.getHours()-s),a}addMinutes(t,s){const a=new Date(t.valueOf());return a.setMinutes(a.getMinutes()+s),a}subtractMinutes(t,s){const a=new Date(t.valueOf());return a.setMinutes(a.getMinutes()-s),a}getWeek(t){const s=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate())),a=s.getUTCDay()||7;s.setUTCDate(s.getUTCDate()+4-a);const l=new Date(Date.UTC(s.getUTCFullYear(),0,1));return Math.ceil(((s-l)/864e5+1)/7)}isToday(t){return`${t.getFullYear()}-${t.getMonth()}-${t.getDate()}`===this._todayFormatted()}isLeapYear(t){const s=t.getFullYear();return!(s%400)||s%100&&!(s%4)}getPreviousFirstDayOfWeek(t=null,s){const a=t&&new Date(t.valueOf())||new Date,l=s?7:6;return a.setDate(a.getDate()-(a.getDay()+l)%7),a}stringToDate(t){return t instanceof Date?t:(t.length===10&&(t+=" 00:00"),new Date(t.replace(/-/g,"/")))}countDays(t,s){typeof t=="string"&&(t=t.replace(/-/g,"/")),typeof s=="string"&&(s=s.replace(/-/g,"/")),t=new Date(t).setHours(0,0,0,0),s=new Date(s).setHours(0,0,1,0);const a=(new Date(s).getTimezoneOffset()-new Date(t).getTimezoneOffset())*60*1e3;return Math.ceil((s-t-a)/(24*3600*1e3))}datesInSameTimeStep(t,s,a){return Math.abs(t.getTime()-s.getTime())<=a*60*1e3}formatDate(t,s="YYYY-MM-DD",a=null){if(a||(a=this._texts),s||(s="YYYY-MM-DD"),s==="YYYY-MM-DD")return this.formatDateLite(t);Pt={},kt={};const l={YYYY:()=>this._hydrateDateObject(t,a).YYYY,YY:()=>this._hydrateDateObject(t,a).YY(),M:()=>this._hydrateDateObject(t,a).M,MM:()=>this._hydrateDateObject(t,a).MM(),MMM:()=>this._hydrateDateObject(t,a).MMM(),MMMM:()=>this._hydrateDateObject(t,a).MMMM(),MMMMG:()=>this._hydrateDateObject(t,a).MMMMG(),D:()=>this._hydrateDateObject(t,a).D,DD:()=>this._hydrateDateObject(t,a).DD(),S:()=>this._hydrateDateObject(t,a).S(),d:()=>this._hydrateDateObject(t,a).d,dd:()=>this._hydrateDateObject(t,a).dd(),ddd:()=>this._hydrateDateObject(t,a).ddd(),dddd:()=>this._hydrateDateObject(t,a).dddd(),HH:()=>this._hydrateTimeObject(t,a).HH,H:()=>this._hydrateTimeObject(t,a).H,hh:()=>this._hydrateTimeObject(t,a).hh,h:()=>this._hydrateTimeObject(t,a).h,am:()=>this._hydrateTimeObject(t,a).am,AM:()=>this._hydrateTimeObject(t,a).AM,mm:()=>this._hydrateTimeObject(t,a).mm,m:()=>this._hydrateTimeObject(t,a).m};return s.replace(/(\{[a-zA-Z]+\}|[a-zA-Z]+)/g,(n,o)=>{const r=l[o.replace(/\{|\}/g,"")];return r!==void 0?r():o})}formatDateLite(t){const s=t.getMonth()+1,a=t.getDate();return`${t.getFullYear()}-${s<10?"0":""}${s}-${a<10?"0":""}${a}`}formatTime(t,s="HH:mm",a=null,l=!1){let n=!1;if(l){const[m,c,v]=[t.getHours(),t.getMinutes(),t.getSeconds()];m+c+v===141&&(n=!0)}if(t instanceof Date&&s==="HH:mm")return n?"24:00":this.formatTimeLite(t);kt={},a||(a=this._texts);const o=this._hydrateTimeObject(t,a),r=s.replace(/(\{[a-zA-Z]+\}|[a-zA-Z]+)/g,(m,c)=>{const v=o[c.replace(/\{|\}/g,"")];return v!==void 0?v:c});return n?r.replace("23:59","24:00"):r}formatTimeLite(t){const s=t.getHours(),a=t.getMinutes();return`${(s<10?"0":"")+s}:${(a<10?"0":"")+a}`}_nth(t){if(t>3&&t<21)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}}_hydrateDateObject(t,s){if(Pt.D)return Pt;const a=t.getFullYear(),l=t.getMonth()+1,n=t.getDate(),r=(t.getDay()-1+7)%7;return Pt={YYYY:a,YY:()=>a.toString().substring(2),M:l,MM:()=>(l<10?"0":"")+l,MMM:()=>s.months[l-1].substring(0,3),MMMM:()=>s.months[l-1],MMMMG:()=>(s.monthsGenitive||s.months)[l-1],D:n,DD:()=>(n<10?"0":"")+n,S:()=>this._nth(n),d:r+1,dd:()=>s.weekDays[r][0],ddd:()=>s.weekDays[r].substr(0,3),dddd:()=>s.weekDays[r]},Pt}_hydrateTimeObject(t,s){if(kt.am)return kt;let a,l;t instanceof Date?(a=t.getHours(),l=t.getMinutes()):(a=Math.floor(t/60),l=Math.floor(t%60));const n=a%12?a%12:12,o=(s||{am:"am",pm:"pm"})[a===24||a<12?"am":"pm"];return kt={H:a,h:n,HH:(a<10?"0":"")+a,hh:(n<10?"0":"")+n,am:o,AM:o.toUpperCase(),m:l,mm:(l<10?"0":"")+l},kt}}const Ai=1440;class Yi{constructor(t){at(this,"_vuecal",null),at(this,"selectCell",(s=!1,a,l)=>{this._vuecal.$emit("cell-click",l?{date:a,split:l}:a),this._vuecal.clickToNavigate||s?this._vuecal.switchToNarrowerView():this._vuecal.dblclickToNavigate&&"ontouchstart"in window&&(this._vuecal.domEvents.dblTapACell.taps++,setTimeout(()=>this._vuecal.domEvents.dblTapACell.taps=0,this._vuecal.domEvents.dblTapACell.timeout),this._vuecal.domEvents.dblTapACell.taps>=2&&(this._vuecal.domEvents.dblTapACell.taps=0,this._vuecal.switchToNarrowerView(),this._vuecal.$emit("cell-dblclick",l?{date:a,split:l}:a)))}),at(this,"keyPressEnterCell",(s,a)=>{this._vuecal.$emit("cell-keypress-enter",a?{date:s,split:a}:s),this._vuecal.switchToNarrowerView()}),at(this,"getPosition",s=>{const{left:a,top:l}=this._vuecal.cellsEl.getBoundingClientRect(),{clientX:n,clientY:o}="ontouchstart"in window&&s.touches?s.touches[0]:s;return{x:n-a,y:o-l}}),at(this,"minutesAtCursor",s=>{let a=0,l={x:0,y:0};const{timeStep:n,timeCellHeight:o,timeFrom:r}=this._vuecal.$props;return typeof s=="number"?a=s:typeof s=="object"&&(l=this.getPosition(s),a=Math.round(l.y*n/parseInt(o)+r)),{minutes:Math.max(Math.min(a,Ai),0),cursorCoords:l}}),this._vuecal=t}}const Ii=2,Cs=1440;let De,Se,Ts;class Ni{constructor(t,s){at(this,"_vuecal",null),at(this,"eventDefaults",{_eid:null,start:"",startTimeMinutes:0,end:"",endTimeMinutes:0,title:"",content:"",background:!1,allDay:!1,segments:null,repeat:null,daysCount:1,deletable:!0,deleting:!1,titleEditable:!0,resizable:!0,resizing:!1,draggable:!0,dragging:!1,draggingStatic:!1,focused:!1,class:""}),this._vuecal=t,De=s}createAnEvent(t,s,a){if(typeof t=="string"&&(t=De.stringToDate(t)),!(t instanceof Date))return!1;const l=De.dateToMinutes(t);s=s*1||Ii*60;const n=l+s,o=De.addMinutes(new Date(t),s);a.end&&(typeof a.end=="string"&&(a.end=De.stringToDate(a.end)),a.endTimeMinutes=De.dateToMinutes(a.end));const r={...this.eventDefaults,_eid:`${this._vuecal._.uid}_${this._vuecal.eventIdIncrement++}`,start:t,startTimeMinutes:l,end:o,endTimeMinutes:n,segments:null,...a};if(!(typeof this._vuecal.onEventCreate=="function"&&!this._vuecal.onEventCreate(r,()=>this.deleteAnEvent(r))))return r.startDateF!==r.endDateF&&(r.daysCount=De.countDays(r.start,r.end)),this._vuecal.mutableEvents.push(r),this._vuecal.addEventsToView([r]),this._vuecal.emitWithEvent("event-create",r),this._vuecal.$emit("event-change",{event:this._vuecal.cleanupEvent(r),originalEvent:null}),r}addEventSegment(t){t.segments||(t.segments={},t.segments[De.formatDateLite(t.start)]={start:t.start,startTimeMinutes:t.startTimeMinutes,endTimeMinutes:Cs,isFirstDay:!0,isLastDay:!1});const s=t.segments[De.formatDateLite(t.end)];s&&(s.isLastDay=!1,s.endTimeMinutes=Cs);const a=De.addDays(t.end,1),l=De.formatDateLite(a);return a.setHours(0,0,0,0),t.segments[l]={start:a,startTimeMinutes:0,endTimeMinutes:t.endTimeMinutes,isFirstDay:!1,isLastDay:!0},t.end=De.addMinutes(a,t.endTimeMinutes),t.daysCount=Object.keys(t.segments).length,l}removeEventSegment(t){let s=Object.keys(t.segments).length;if(s<=1)return De.formatDateLite(t.end);delete t.segments[De.formatDateLite(t.end)],s--;const a=De.subtractDays(t.end,1),l=De.formatDateLite(a),n=t.segments[l];return s?n&&(n.isLastDay=!0,n.endTimeMinutes=t.endTimeMinutes):t.segments=null,t.daysCount=s||1,t.end=a,l}createEventSegments(t,s,a){const l=s.getTime(),n=a.getTime();let o=t.start.getTime(),r=t.end.getTime(),m=!1,c,v,p;for(!t.end.getHours()&&!t.end.getMinutes()&&(r-=1e3),t.segments={},t.repeat?(c=l,v=Math.min(n,t.repeat.until?De.stringToDate(t.repeat.until).getTime():n)):(c=Math.max(l,o),v=Math.min(n,r));c<=v;){let g=!1;const D=De.addDays(new Date(c),1).setHours(0,0,0,0);let x,M,_,y;if(t.repeat){const j=new Date(c),$=De.formatDateLite(j);(m||t.occurrences&&t.occurrences[$])&&(m||(o=t.occurrences[$].start,p=new Date(o).setHours(0,0,0,0),r=t.occurrences[$].end),m=!0,g=!0),x=c===p,M=$===De.formatDateLite(new Date(r)),_=new Date(x?o:c),y=De.formatDateLite(_),M&&(m=!1)}else g=!0,x=c===o,M=v===r&&D>v,_=x?t.start:new Date(c),y=De.formatDateLite(x?t.start:_);g&&(t.segments[y]={start:_,startTimeMinutes:x?t.startTimeMinutes:0,endTimeMinutes:M?t.endTimeMinutes:Cs,isFirstDay:x,isLastDay:M}),c=D}return t}deleteAnEvent(t){this._vuecal.emitWithEvent("event-delete",t),this._vuecal.mutableEvents=this._vuecal.mutableEvents.filter(s=>s._eid!==t._eid),this._vuecal.view.events=this._vuecal.view.events.filter(s=>s._eid!==t._eid)}checkCellOverlappingEvents(t,s){Ts=t.slice(0),Se={},t.forEach(l=>{Ts.shift(),Se[l._eid]||(Se[l._eid]={overlaps:[],start:l.start,position:0}),Se[l._eid].position=0,Ts.forEach(n=>{Se[n._eid]||(Se[n._eid]={overlaps:[],start:n.start,position:0});const o=this.eventInRange(n,l.start,l.end),r=s.overlapsPerTimeStep?De.datesInSameTimeStep(l.start,n.start,s.timeStep):1;if(!l.background&&!l.allDay&&!n.background&&!n.allDay&&o&&r)Se[l._eid].overlaps.push(n._eid),Se[l._eid].overlaps=[...new Set(Se[l._eid].overlaps)],Se[n._eid].overlaps.push(l._eid),Se[n._eid].overlaps=[...new Set(Se[n._eid].overlaps)],Se[n._eid].position++;else{let m,c;(m=(Se[l._eid]||{overlaps:[]}).overlaps.indexOf(n._eid))>-1&&Se[l._eid].overlaps.splice(m,1),(c=(Se[n._eid]||{overlaps:[]}).overlaps.indexOf(l._eid))>-1&&Se[n._eid].overlaps.splice(c,1),Se[n._eid].position--}})});let a=0;for(const l in Se){const n=Se[l],o=n.overlaps.map(r=>({id:r,start:Se[r].start}));o.push({id:l,start:n.start}),o.sort((r,m)=>r.start<m.start?-1:r.start>m.start?1:r.id>m.id?-1:1),n.position=o.findIndex(r=>r.id===l),a=Math.max(this.getOverlapsStreak(n,Se),a)}return[Se,a]}getOverlapsStreak(t,s={}){let a=t.overlaps.length+1,l=[];return t.overlaps.forEach(n=>{l.includes(n)||t.overlaps.filter(r=>r!==n).forEach(r=>{s[r].overlaps.includes(n)||l.push(r)})}),l=[...new Set(l)],a-=l.length,a}eventInRange(t,s,a){if(t.allDay||!this._vuecal.time){const o=new Date(t.start).setHours(0,0,0,0);return new Date(t.end).setHours(23,59,0,0)>=new Date(s).setHours(0,0,0,0)&&o<=new Date(a).setHours(0,0,0,0)}const l=t.start.getTime(),n=t.end.getTime();return l<a.getTime()&&n>s.getTime()}}const Li={class:"vuecal__flex vuecal__weekdays-headings"},Pi=["onClick"],Ui={class:"vuecal__flex weekday-label",grow:""},Ri={class:"full"},Fi={class:"small"},Wi={class:"xsmall"},Hi={key:0},Bi={key:0,class:"vuecal__flex vuecal__split-days-headers",grow:""};function zi(e,t,s,a,l,n){return d(),u("div",Li,[(d(!0),u(X,null,le(n.headings,(o,r)=>(d(),u(X,{key:r},[o.hide?k("",!0):(d(),u("div",{key:0,class:ae(["vuecal__flex vuecal__heading",{today:o.today,clickable:n.cellHeadingsClickable}]),style:Ie(n.weekdayCellStyles),onClick:m=>n.view.id==="week"&&n.selectCell(o.date,m),onDblclick:t[0]||(t[0]=m=>n.view.id==="week"&&n.vuecal.dblclickToNavigate&&s.switchToNarrowerView())},[h(Bt,{name:`slide-fade--${s.transitionDirection}`,appear:n.vuecal.transitions},{default:L(()=>[(d(),u("div",{class:"vuecal__flex",column:"",key:n.vuecal.transitions?`${r}-${o.dayOfMonth}`:!1},[i("div",Ui,[me(e.$slots,"weekday-heading",{heading:n.cleanupHeading(o),view:n.view},()=>[i("span",Ri,f(o.full),1),i("span",Fi,f(o.small),1),i("span",Wi,f(o.xsmall),1),o.dayOfMonth?(d(),u("span",Hi," "+f(o.dayOfMonth),1)):k("",!0)])]),n.vuecal.hasSplits&&n.vuecal.stickySplitLabels?(d(),u("div",Bi,[(d(!0),u(X,null,le(n.vuecal.daySplits,(m,c)=>(d(),u("div",{class:ae(["day-split-header",m.class||!1]),key:c},[me(e.$slots,"split-label",{split:m,view:n.view},()=>[W(f(m.label),1)])],2))),128))])):k("",!0)]))]),_:2},1032,["name","appear"])],46,Pi))],64))),128))])}const Vt=(e,t)=>{const s=e.__vccOpts||e;for(const[a,l]of t)s[a]=l;return s},qi={inject:["vuecal","utils","view"],props:{transitionDirection:{type:String,default:"right"},weekDays:{type:Array,default:()=>[]},switchToNarrowerView:{type:Function,default:()=>{}}},methods:{selectCell(e,t){e.getTime()!==this.view.selectedDate.getTime()&&(this.view.selectedDate=e),this.utils.cell.selectCell(!1,e,t)},cleanupHeading:e=>({label:e.full,date:e.date,...e.today?{today:e.today}:{}})},computed:{headings(){if(!["month","week"].includes(this.view.id))return[];let e=!1;return this.weekDays.map((s,a)=>{const l=this.utils.date.addDays(this.view.startDate,this.vuecal.startWeekOnSunday&&this.vuecal.hideWeekends?a-1:a);return{hide:s.hide,full:s.label,small:s.short||s.label.substr(0,3),xsmall:s.short||s.label.substr(0,1),...this.view.id==="week"?{dayOfMonth:l.getDate(),date:l,today:!e&&this.utils.date.isToday(l)&&!e++}:{}}})},cellWidth(){return 100/(7-this.weekDays.reduce((e,t)=>e+t.hide,0))},weekdayCellStyles(){return{...this.vuecal.hideWeekdays.length?{width:`${this.cellWidth}%`}:{}}},cellHeadingsClickable(){return this.view.id==="week"&&(this.vuecal.clickToNavigate||this.vuecal.dblclickToNavigate)}}},Ia=Vt(qi,[["render",zi]]),Gi={class:"vuecal__header"},Zi={key:0,class:"vuecal__flex vuecal__menu",role:"tablist","aria-label":"Calendar views navigation"},Ji=["onDragenter","onDragleave","onClick","aria-label"],Ki={key:1,class:"vuecal__title-bar"},Qi=["aria-label"],Xi={class:"vuecal__flex vuecal__title",grow:""},en=["aria-label"],tn={key:0,class:"vuecal__flex vuecal__split-days-headers"};function sn(e,t,s,a,l,n){const o=vt("weekdays-headings");return d(),u("div",Gi,[s.options.hideViewSelector?k("",!0):(d(),u("div",Zi,[(d(!0),u(X,null,le(s.viewProps.views,(r,m)=>(d(),u(X,{key:m},[r.enabled?(d(),u("button",{key:0,class:ae(["vuecal__view-btn",{"vuecal__view-btn--active":n.view.id===m,"vuecal__view-btn--highlighted":e.highlightedControl===m}]),type:"button",onDragenter:c=>s.editEvents.drag&&n.dnd&&n.dnd.viewSelectorDragEnter(c,m,e.$data),onDragleave:c=>s.editEvents.drag&&n.dnd&&n.dnd.viewSelectorDragLeave(c,m,e.$data),onClick:c=>n.switchView(m,null,!0),"aria-label":`${r.label} view`},f(r.label),43,Ji)):k("",!0)],64))),128))])),s.options.hideTitleBar?k("",!0):(d(),u("div",Ki,[i("button",{class:ae(["vuecal__arrow vuecal__arrow--prev",{"vuecal__arrow--highlighted":e.highlightedControl==="previous"}]),type:"button",onClick:t[0]||(t[0]=(...r)=>n.previous&&n.previous(...r)),onDragenter:t[1]||(t[1]=r=>s.editEvents.drag&&n.dnd&&n.dnd.viewSelectorDragEnter(r,"previous",e.$data)),onDragleave:t[2]||(t[2]=r=>s.editEvents.drag&&n.dnd&&n.dnd.viewSelectorDragLeave(r,"previous",e.$data)),"aria-label":`Previous ${n.view.id}`},[me(e.$slots,"arrow-prev")],42,Qi),i("div",Xi,[h(Bt,{name:s.options.transitions?`slide-fade--${n.transitionDirection}`:""},{default:L(()=>[(d(),oe(ai(n.broaderView?"button":"span"),{type:!!n.broaderView&&"button",key:`${n.view.id}${n.view.startDate.toString()}`,onClick:t[3]||(t[3]=r=>!!n.broaderView&&n.switchToBroaderView()),"aria-label":!!n.broaderView&&`Go to ${n.broaderView} view`},{default:L(()=>[me(e.$slots,"title")]),_:3},8,["type","aria-label"]))]),_:3},8,["name"])]),s.options.todayButton?(d(),u("button",{key:0,class:ae(["vuecal__today-btn",{"vuecal__today-btn--highlighted":e.highlightedControl==="today"}]),type:"button",onClick:t[4]||(t[4]=(...r)=>n.goToToday&&n.goToToday(...r)),onDragenter:t[5]||(t[5]=r=>s.editEvents.drag&&n.dnd&&n.dnd.viewSelectorDragEnter(r,"today",e.$data)),onDragleave:t[6]||(t[6]=r=>s.editEvents.drag&&n.dnd&&n.dnd.viewSelectorDragLeave(r,"today",e.$data)),"aria-label":"Today"},[me(e.$slots,"today-button")],34)):k("",!0),i("button",{class:ae(["vuecal__arrow vuecal__arrow--next",{"vuecal__arrow--highlighted":e.highlightedControl==="next"}]),type:"button",onClick:t[7]||(t[7]=(...r)=>n.next&&n.next(...r)),onDragenter:t[8]||(t[8]=r=>s.editEvents.drag&&n.dnd&&n.dnd.viewSelectorDragEnter(r,"next",e.$data)),onDragleave:t[9]||(t[9]=r=>s.editEvents.drag&&n.dnd&&n.dnd.viewSelectorDragLeave(r,"next",e.$data)),"aria-label":`Next ${n.view.id}`},[me(e.$slots,"arrow-next")],42,en)])),s.viewProps.weekDaysInHeader?(d(),oe(o,{key:2,"week-days":s.weekDays,"transition-direction":n.transitionDirection,"switch-to-narrower-view":s.switchToNarrowerView},Vs({_:2},[e.$slots["weekday-heading"]?{name:"weekday-heading",fn:L(({heading:r,view:m})=>[me(e.$slots,"weekday-heading",{heading:r,view:m})]),key:"0"}:void 0,e.$slots["split-label"]?{name:"split-label",fn:L(({split:r})=>[me(e.$slots,"split-label",{split:r,view:n.view})]),key:"1"}:void 0]),1032,["week-days","transition-direction","switch-to-narrower-view"])):k("",!0),h(Bt,{name:`slide-fade--${n.transitionDirection}`},{default:L(()=>[n.showDaySplits?(d(),u("div",tn,[(d(!0),u(X,null,le(s.daySplits,(r,m)=>(d(),u("div",{class:ae(["day-split-header",r.class||!1]),key:m},[me(e.$slots,"split-label",{split:r,view:n.view.id},()=>[W(f(r.label),1)])],2))),128))])):k("",!0)]),_:3},8,["name"])])}const an={inject:["vuecal","previous","next","switchView","updateSelectedDate","modules","view"],components:{WeekdaysHeadings:Ia},props:{options:{type:Object,default:()=>({})},editEvents:{type:Object,required:!0},hasSplits:{type:[Boolean,Number],default:!1},daySplits:{type:Array,default:()=>[]},viewProps:{type:Object,default:()=>({})},weekDays:{type:Array,default:()=>[]},switchToNarrowerView:{type:Function,default:()=>{}}},data:()=>({highlightedControl:null}),methods:{goToToday(){this.updateSelectedDate(new Date(new Date().setHours(0,0,0,0)))},switchToBroaderView(){this.transitionDirection="left",this.broaderView&&this.switchView(this.broaderView)}},computed:{transitionDirection:{get(){return this.vuecal.transitionDirection},set(e){this.vuecal.transitionDirection=e}},broaderView(){const{enabledViews:e}=this.vuecal;return e[e.indexOf(this.view.id)-1]},showDaySplits(){return this.view.id==="day"&&this.hasSplits&&this.options.stickySplitLabels&&!this.options.minSplitWidth},dnd(){return this.modules.dnd}}},ln=Vt(an,[["render",sn]]),nn=["draggable"];function on(e,t,s,a,l,n){return d(),u("div",{class:ae(["vuecal__event",n.eventClasses]),style:Ie(n.eventStyles),tabindex:"0",onFocus:t[4]||(t[4]=(...o)=>n.focusEvent&&n.focusEvent(...o)),onKeypress:t[5]||(t[5]=jt(Ue((...o)=>n.onEnterKeypress&&n.onEnterKeypress(...o),["stop"]),["enter"])),onMouseenter:t[6]||(t[6]=(...o)=>n.onMouseEnter&&n.onMouseEnter(...o)),onMouseleave:t[7]||(t[7]=(...o)=>n.onMouseLeave&&n.onMouseLeave(...o)),onTouchstart:t[8]||(t[8]=Ue((...o)=>n.onTouchStart&&n.onTouchStart(...o),["stop"])),onMousedown:t[9]||(t[9]=o=>n.onMouseDown(o)),onMouseup:t[10]||(t[10]=(...o)=>n.onMouseUp&&n.onMouseUp(...o)),onTouchend:t[11]||(t[11]=(...o)=>n.onMouseUp&&n.onMouseUp(...o)),onTouchmove:t[12]||(t[12]=(...o)=>n.onTouchMove&&n.onTouchMove(...o)),onDblclick:t[13]||(t[13]=(...o)=>n.onDblClick&&n.onDblClick(...o)),draggable:n.draggable,onDragstart:t[14]||(t[14]=o=>n.draggable&&n.onDragStart(o)),onDragend:t[15]||(t[15]=o=>n.draggable&&n.onDragEnd())},[n.vuecal.editEvents.delete&&s.event.deletable?(d(),u("div",{key:0,class:"vuecal__event-delete",onClick:t[0]||(t[0]=Ue((...o)=>n.deleteEvent&&n.deleteEvent(...o),["stop"])),onTouchstart:t[1]||(t[1]=Ue((...o)=>n.touchDeleteEvent&&n.touchDeleteEvent(...o),["stop"]))},f(n.vuecal.texts.deleteEvent),33)):k("",!0),me(e.$slots,"event",{event:s.event,view:n.view.id}),n.resizable?(d(),u("div",{key:1,class:"vuecal__event-resize-handle",contenteditable:"false",onMousedown:t[2]||(t[2]=Ue((...o)=>n.onResizeHandleMouseDown&&n.onResizeHandleMouseDown(...o),["stop","prevent"])),onTouchstart:t[3]||(t[3]=Ue((...o)=>n.onResizeHandleMouseDown&&n.onResizeHandleMouseDown(...o),["stop","prevent"]))},null,32)):k("",!0)],46,nn)}const rn={inject:["vuecal","utils","modules","view","domEvents","editEvents"],props:{cellFormattedDate:{type:String,default:""},event:{type:Object,default:()=>({})},cellEvents:{type:Array,default:()=>[]},overlaps:{type:Array,default:()=>[]},eventPosition:{type:Number,default:0},overlapsStreak:{type:Number,default:0},allDay:{type:Boolean,default:!1}},data:()=>({touch:{dragThreshold:30,startX:0,startY:0,dragged:!1}}),methods:{onMouseDown(e,t=!1){if("ontouchstart"in window&&!t)return!1;const{clickHoldAnEvent:s,focusAnEvent:a,resizeAnEvent:l,dragAnEvent:n}=this.domEvents;if(a._eid===this.event._eid&&s._eid===this.event._eid)return!0;this.focusEvent(),s._eid=null,this.vuecal.editEvents.delete&&this.event.deletable&&(s.timeoutId=setTimeout(()=>{!l._eid&&!n._eid&&(s._eid=this.event._eid,this.event.deleting=!0)},s.timeout))},onMouseUp(e){this.domEvents.focusAnEvent._eid===this.event._eid&&!this.touch.dragged&&(this.domEvents.focusAnEvent.mousedUp=!0),this.touch.dragged=!1},onMouseEnter(e){e.preventDefault(),this.vuecal.emitWithEvent("event-mouse-enter",this.event)},onMouseLeave(e){e.preventDefault(),this.vuecal.emitWithEvent("event-mouse-leave",this.event)},onTouchMove(e){if(typeof this.vuecal.onEventClick!="function")return;const{clientX:t,clientY:s}=e.touches[0],{startX:a,startY:l,dragThreshold:n}=this.touch;(Math.abs(t-a)>n||Math.abs(s-l)>n)&&(this.touch.dragged=!0)},onTouchStart(e){this.touch.startX=e.touches[0].clientX,this.touch.startY=e.touches[0].clientY,this.onMouseDown(e,!0)},onEnterKeypress(e){if(typeof this.vuecal.onEventClick=="function")return this.vuecal.onEventClick(this.event,e)},onDblClick(e){if(typeof this.vuecal.onEventDblclick=="function")return this.vuecal.onEventDblclick(this.event,e)},onDragStart(e){this.dnd&&this.dnd.eventDragStart(e,this.event)},onDragEnd(){this.dnd&&this.dnd.eventDragEnd(this.event)},onResizeHandleMouseDown(){this.focusEvent(),this.domEvents.dragAnEvent._eid=null,this.domEvents.resizeAnEvent=Object.assign(this.domEvents.resizeAnEvent,{_eid:this.event._eid,start:(this.segment||this.event).start,split:this.event.split||null,segment:!!this.segment&&this.utils.date.formatDateLite(this.segment.start),originalEnd:new Date((this.segment||this.event).end),originalEndTimeMinutes:this.event.endTimeMinutes}),this.event.resizing=!0},deleteEvent(e=!1){if("ontouchstart"in window&&!e)return!1;this.utils.event.deleteAnEvent(this.event)},touchDeleteEvent(e){this.deleteEvent(!0)},cancelDeleteEvent(){this.event.deleting=!1},focusEvent(){const{focusAnEvent:e}=this.domEvents,t=e._eid;if(t!==this.event._eid){if(t){const s=this.view.events.find(a=>a._eid===t);s&&(s.focused=!1)}this.vuecal.cancelDelete(),this.vuecal.emitWithEvent("event-focus",this.event),e._eid=this.event._eid,this.event.focused=!0}}},computed:{eventDimensions(){const{startTimeMinutes:e,endTimeMinutes:t}=this.segment||this.event;let s=e-this.vuecal.timeFrom;const a=Math.max(Math.round(s*this.vuecal.timeCellHeight/this.vuecal.timeStep),0);s=Math.min(t,this.vuecal.timeTo)-this.vuecal.timeFrom;const l=Math.round(s*this.vuecal.timeCellHeight/this.vuecal.timeStep),n=Math.max(l-a,5);return{top:a,height:n}},eventStyles(){if(this.event.allDay||!this.vuecal.time||!this.event.endTimeMinutes||this.view.id==="month"||this.allDay)return{};let e=100/Math.min(this.overlaps.length+1,this.overlapsStreak),t=100/(this.overlaps.length+1)*this.eventPosition;this.vuecal.minEventWidth&&e<this.vuecal.minEventWidth&&(e=this.vuecal.minEventWidth,t=(100-this.vuecal.minEventWidth)/this.overlaps.length*this.eventPosition);const{top:s,height:a}=this.eventDimensions;return{top:`${s}px`,height:`${a}px`,width:`${e}%`,left:this.event.left&&`${this.event.left}px`||`${t}%`}},eventClasses(){const{isFirstDay:e,isLastDay:t}=this.segment||{};return{[this.event.class]:!!this.event.class,"vuecal__event--focus":this.event.focused,"vuecal__event--resizing":this.event.resizing,"vuecal__event--background":this.event.background,"vuecal__event--deletable":this.event.deleting,"vuecal__event--all-day":this.event.allDay,"vuecal__event--dragging":!this.event.draggingStatic&&this.event.dragging,"vuecal__event--static":this.event.dragging&&this.event.draggingStatic,"vuecal__event--multiple-days":!!this.segment,"event-start":this.segment&&e&&!t,"event-middle":this.segment&&!e&&!t,"event-end":this.segment&&t&&!e}},segment(){return this.event.segments&&this.event.segments[this.cellFormattedDate]||null},draggable(){const{draggable:e,background:t,daysCount:s}=this.event;return this.vuecal.editEvents.drag&&e&&!t&&s===1},resizable(){const{editEvents:e,time:t}=this.vuecal;return e.resize&&this.event.resizable&&t&&!this.allDay&&(!this.segment||this.segment&&this.segment.isLastDay)&&this.view.id!=="month"},dnd(){return this.modules.dnd}}},dn=Vt(rn,[["render",on]]),un=["data-split","aria-label","onTouchstart","onMousedown","onDragover","onDrop"],cn={key:0,class:"cell-time-labels"},mn=["innerHTML"],vn={key:2,class:"vuecal__cell-events"},hn=["title"];function pn(e,t,s,a,l,n){const o=vt("event");return d(),oe(li,{class:ae(["vuecal__cell",n.cellClasses]),name:`slide-fade--${n.transitionDirection}`,tag:"div",appear:s.options.transitions,style:Ie(n.cellStyles)},{default:L(()=>[(d(!0),u(X,null,le(n.splitsCount?n.splits:1,(r,m)=>(d(),u("div",{class:ae(["vuecal__flex vuecal__cell-content",n.splitsCount&&n.splitClasses(r)]),key:s.options.transitions?`${n.view.id}-${s.data.content}-${m}`:m,"data-split":n.splitsCount?r.id:!1,column:"",tabindex:"0","aria-label":s.data.content,onFocus:t[0]||(t[0]=c=>n.onCellFocus(c)),onKeypress:t[1]||(t[1]=jt(c=>n.onCellkeyPressEnter(c),["enter"])),onTouchstart:c=>!n.isDisabled&&n.onCellTouchStart(c,n.splitsCount?r.id:null),onMousedown:c=>!n.isDisabled&&n.onCellMouseDown(c,n.splitsCount?r.id:null),onClick:t[2]||(t[2]=c=>!n.isDisabled&&n.onCellClick(c)),onDblclick:t[3]||(t[3]=c=>!n.isDisabled&&n.onCellDblClick(c)),onContextmenu:t[4]||(t[4]=c=>!n.isDisabled&&s.options.cellContextmenu&&n.onCellContextMenu(c)),onDragenter:t[5]||(t[5]=c=>!n.isDisabled&&s.editEvents.drag&&n.dnd&&n.dnd.cellDragEnter(c,e.$data,s.data.startDate)),onDragover:c=>!n.isDisabled&&s.editEvents.drag&&n.dnd&&n.dnd.cellDragOver(c,e.$data,s.data.startDate,n.splitsCount?r.id:null),onDragleave:t[6]||(t[6]=c=>!n.isDisabled&&s.editEvents.drag&&n.dnd&&n.dnd.cellDragLeave(c,e.$data,s.data.startDate)),onDrop:c=>!n.isDisabled&&s.editEvents.drag&&n.dnd&&n.dnd.cellDragDrop(c,e.$data,s.data.startDate,n.splitsCount?r.id:null)},[s.options.showTimeInCells&&s.options.time&&n.isWeekOrDayView&&!s.allDay?(d(),u("div",cn,[(d(!0),u(X,null,le(n.vuecal.timeCells,(c,v)=>(d(),u("span",{class:"cell-time-label",key:v},f(c.label),1))),128))])):k("",!0),n.isWeekOrDayView&&!s.allDay&&n.specialHours.length?(d(!0),u(X,{key:1},le(n.specialHours,(c,v)=>(d(),u("div",{class:ae(["vuecal__special-hours",`vuecal__special-hours--day${c.day} ${c.class}`]),style:Ie(`height: ${c.height}px;top: ${c.top}px`)},[c.label?(d(),u("div",{key:0,class:"special-hours-label",innerHTML:c.label},null,8,mn)):k("",!0)],6))),256)):k("",!0),me(e.$slots,"cell-content",{events:n.events,selectCell:c=>n.selectCell(c,!0),split:n.splitsCount?r:!1}),n.eventsCount&&(n.isWeekOrDayView||n.view.id==="month"&&s.options.eventsOnMonthView)?(d(),u("div",vn,[(d(!0),u(X,null,le(n.splitsCount?r.events:n.events,(c,v)=>(d(),oe(o,{key:v,"cell-formatted-date":s.data.formattedDate,event:c,"all-day":s.allDay,"cell-events":n.splitsCount?r.events:n.events,overlaps:((n.splitsCount?r.overlaps[c._eid]:e.cellOverlaps[c._eid])||[]).overlaps,"event-position":((n.splitsCount?r.overlaps[c._eid]:e.cellOverlaps[c._eid])||[]).position,"overlaps-streak":n.splitsCount?r.overlapsStreak:e.cellOverlapsStreak},{event:L(({event:p,view:g})=>[me(e.$slots,"event",{view:g,event:p})]),_:2},1032,["cell-formatted-date","event","all-day","cell-events","overlaps","event-position","overlaps-streak"]))),128))])):k("",!0)],42,un))),128)),n.timelineVisible?(d(),u("div",{class:"vuecal__now-line",style:Ie(`top: ${n.todaysTimePosition}px`),key:s.options.transitions?`${n.view.id}-now-line`:"now-line",title:n.utils.date.formatTime(n.vuecal.now)},null,12,hn)):k("",!0)]),_:3},8,["class","name","appear","style"])}const fn={inject:["vuecal","utils","modules","view","domEvents"],components:{Event:dn},props:{options:{type:Object,default:()=>({})},editEvents:{type:Object,required:!0},data:{type:Object,required:!0},cellSplits:{type:Array,default:()=>[]},minTimestamp:{type:[Number,null],default:null},maxTimestamp:{type:[Number,null],default:null},cellWidth:{type:[Number,Boolean],default:!1},allDay:{type:Boolean,default:!1}},data:()=>({cellOverlaps:{},cellOverlapsStreak:1,timeAtCursor:null,highlighted:!1,highlightedSplit:null}),methods:{getSplitAtCursor({target:e}){let s=e.classList.contains("vuecal__cell-split")?e:this.vuecal.findAncestor(e,"vuecal__cell-split");return s&&(s=s.attributes["data-split"].value,parseInt(s).toString()===s.toString()&&(s=parseInt(s))),s||null},splitClasses(e){return{"vuecal__cell-split":!0,"vuecal__cell-split--highlighted":this.highlightedSplit===e.id,[e.class]:!!e.class}},checkCellOverlappingEvents(){this.options.time&&this.eventsCount&&!this.splitsCount&&(this.eventsCount===1?(this.cellOverlaps=[],this.cellOverlapsStreak=1):[this.cellOverlaps,this.cellOverlapsStreak]=this.utils.event.checkCellOverlappingEvents(this.events,this.options))},isDOMElementAnEvent(e){return this.vuecal.isDOMElementAnEvent(e)},selectCell(e,t=!1){const s=this.splitsCount?this.getSplitAtCursor(e):null;this.utils.cell.selectCell(t,this.timeAtCursor,s),this.timeAtCursor=null},onCellkeyPressEnter(e){this.isSelected||this.onCellFocus(e);const t=this.splitsCount?this.getSplitAtCursor(e):null;this.utils.cell.keyPressEnterCell(this.timeAtCursor,t),this.timeAtCursor=null},onCellFocus(e){if(!this.isSelected&&!this.isDisabled){this.isSelected=this.data.startDate;const t=this.splitsCount?this.getSplitAtCursor(e):null,s=this.timeAtCursor||this.data.startDate;this.vuecal.$emit("cell-focus",t?{date:s,split:t}:s)}},onCellMouseDown(e,t=null,s=!1){if("ontouchstart"in window&&!s)return!1;this.isSelected||this.onCellFocus(e);const{clickHoldACell:a,focusAnEvent:l}=this.domEvents;this.domEvents.cancelClickEventCreation=!1,a.eventCreated=!1,this.timeAtCursor=new Date(this.data.startDate);const{minutes:n,cursorCoords:{y:o}}=this.vuecal.minutesAtCursor(e);this.timeAtCursor.setMinutes(n);const r=this.isDOMElementAnEvent(e.target);!r&&l._eid&&((this.view.events.find(m=>m._eid===l._eid)||{}).focused=!1),this.editEvents.create&&!r&&this.setUpEventCreation(e,o)},setUpEventCreation(e,t){if(this.options.dragToCreateEvent&&["week","day"].includes(this.view.id)){const{dragCreateAnEvent:s}=this.domEvents;if(s.startCursorY=t,s.split=this.splitsCount?this.getSplitAtCursor(e):null,s.start=this.timeAtCursor,this.options.snapToTime){let a=this.timeAtCursor.getHours()*60+this.timeAtCursor.getMinutes();const l=a+this.options.snapToTime/2;a=l-l%this.options.snapToTime,s.start.setHours(0,a,0,0)}}else this.options.cellClickHold&&["month","week","day"].includes(this.view.id)&&this.setUpCellHoldTimer(e)},setUpCellHoldTimer(e){const{clickHoldACell:t}=this.domEvents;t.cellId=`${this.vuecal._.uid}_${this.data.formattedDate}`,t.split=this.splitsCount?this.getSplitAtCursor(e):null,t.timeoutId=setTimeout(()=>{if(t.cellId&&!this.domEvents.cancelClickEventCreation){const{_eid:s}=this.utils.event.createAnEvent(this.timeAtCursor,null,t.split?{split:t.split}:{});t.eventCreated=s}},t.timeout)},onCellTouchStart(e,t=null){this.onCellMouseDown(e,t,!0)},onCellClick(e){this.isDOMElementAnEvent(e.target)||this.selectCell(e)},onCellDblClick(e){const t=new Date(this.data.startDate);t.setMinutes(this.vuecal.minutesAtCursor(e).minutes);const s=this.splitsCount?this.getSplitAtCursor(e):null;this.vuecal.$emit("cell-dblclick",s?{date:t,split:s}:t),this.options.dblclickToNavigate&&this.vuecal.switchToNarrowerView()},onCellContextMenu(e){e.stopPropagation(),e.preventDefault();const t=new Date(this.data.startDate),{cursorCoords:s,minutes:a}=this.vuecal.minutesAtCursor(e);t.setMinutes(a);const l=this.splitsCount?this.getSplitAtCursor(e):null;this.vuecal.$emit("cell-contextmenu",{date:t,...s,...l||{},e})}},computed:{dnd(){return this.modules.dnd},nowInMinutes(){return this.utils.date.dateToMinutes(this.vuecal.now)},isBeforeMinDate(){return this.minTimestamp!==null&&this.minTimestamp>this.data.endDate.getTime()},isAfterMaxDate(){return this.maxTimestamp&&this.maxTimestamp<this.data.startDate.getTime()},isDisabled(){const{disableDays:e}=this.options,{isYearsOrYearView:t}=this.vuecal;return e.length&&e.includes(this.data.formattedDate)&&!t?!0:this.isBeforeMinDate||this.isAfterMaxDate},isSelected:{get(){let e=!1;const{selectedDate:t}=this.view;return this.view.id==="years"?e=t.getFullYear()===this.data.startDate.getFullYear():this.view.id==="year"?e=t.getFullYear()===this.data.startDate.getFullYear()&&t.getMonth()===this.data.startDate.getMonth():e=t.getTime()===this.data.startDate.getTime(),e},set(e){this.view.selectedDate=e,this.vuecal.$emit("update:selected-date",this.view.selectedDate)}},isWeekOrDayView(){return["week","day"].includes(this.view.id)},transitionDirection(){return this.vuecal.transitionDirection},specialHours(){return this.data.specialHours.map(e=>{let{from:t,to:s}=e;return t=Math.max(t,this.options.timeFrom),s=Math.min(s,this.options.timeTo),{...e,height:(s-t)*this.timeScale,top:(t-this.options.timeFrom)*this.timeScale}})},events(){const{startDate:e,endDate:t}=this.data;let s=[];if(!(["years","year"].includes(this.view.id)&&!this.options.eventsCountOnYearView)){if(s=this.view.events.slice(0),this.view.id==="month"&&s.push(...this.view.outOfScopeEvents),s=s.filter(a=>this.utils.event.eventInRange(a,e,t)),this.options.showAllDayEvents&&this.view.id!=="month"&&(s=s.filter(a=>!!a.allDay===this.allDay)),this.options.time&&this.isWeekOrDayView&&!this.allDay){const{timeFrom:a,timeTo:l}=this.options;s=s.filter(n=>{const o=n.daysCount>1&&n.segments[this.data.formattedDate]||{},r=n.daysCount===1&&n.startTimeMinutes<l&&n.endTimeMinutes>a,m=n.daysCount>1&&o.startTimeMinutes<l&&o.endTimeMinutes>a;return n.allDay||r||m||!1})}this.options.time&&this.isWeekOrDayView&&!(this.options.showAllDayEvents&&this.allDay)&&s.sort((a,l)=>a.start<l.start?-1:1),this.cellSplits.length||this.$nextTick(this.checkCellOverlappingEvents)}return s},eventsCount(){return this.events.length},splits(){return this.cellSplits.map((e,t)=>{const s=this.events.filter(n=>n.split===e.id),[a,l]=this.utils.event.checkCellOverlappingEvents(s.filter(n=>!n.background&&!n.allDay),this.options);return{...e,overlaps:a,overlapsStreak:l,events:s}})},splitsCount(){return this.splits.length},cellClasses(){return{[this.data.class]:!!this.data.class,"vuecal__cell--current":this.data.current,"vuecal__cell--today":this.data.today,"vuecal__cell--out-of-scope":this.data.outOfScope,"vuecal__cell--before-min":this.isDisabled&&this.isBeforeMinDate,"vuecal__cell--after-max":this.isDisabled&&this.isAfterMaxDate,"vuecal__cell--disabled":this.isDisabled,"vuecal__cell--selected":this.isSelected,"vuecal__cell--highlighted":this.highlighted,"vuecal__cell--has-splits":this.splitsCount,"vuecal__cell--has-events":this.eventsCount}},cellStyles(){return{...this.cellWidth?{width:`${this.cellWidth}%`}:{}}},timelineVisible(){const{time:e,timeTo:t}=this.options;return this.data.today&&this.isWeekOrDayView&&e&&!this.allDay&&this.nowInMinutes<=t},todaysTimePosition(){if(!this.data.today||!this.options.time)return;const e=this.nowInMinutes-this.options.timeFrom;return Math.round(e*this.timeScale)},timeScale(){return this.options.timeCellHeight/this.options.timeStep}}},Na=Vt(fn,[["render",pn]]),yn={key:0,class:"vuecal__all-day-text",style:{width:"3em"}};function gn(e,t,s,a,l,n){const o=vt("vuecal-cell");return d(),u("div",{class:"vuecal__flex vuecal__all-day",style:Ie(s.cellOrSplitMinWidth&&{height:s.height})},[s.cellOrSplitMinWidth?k("",!0):(d(),u("div",yn,[i("span",null,f(s.label),1)])),i("div",{class:ae(["vuecal__flex vuecal__cells",`${n.view.id}-view`]),grow:"",style:Ie(s.cellOrSplitMinWidth?`min-width: ${s.cellOrSplitMinWidth}px`:"")},[(d(!0),u(X,null,le(s.cells,(r,m)=>(d(),oe(o,{key:m,options:s.options,"edit-events":n.editEvents,data:r,"all-day":!0,"cell-width":s.options.hideWeekdays.length&&(n.vuecal.isWeekView||n.vuecal.isMonthView)&&n.vuecal.cellWidth,"min-timestamp":s.options.minTimestamp,"max-timestamp":s.options.maxTimestamp,"cell-splits":s.daySplits},{event:L(({event:c,view:v})=>[me(e.$slots,"event",{view:v,event:c})]),_:2},1032,["options","edit-events","data","cell-width","min-timestamp","max-timestamp","cell-splits"]))),128))],6)],4)}const _n={inject:["vuecal","view","editEvents"],components:{"vuecal-cell":Na},props:{options:{type:Object,required:!0},cells:{type:Array,required:!0},label:{type:String,required:!0},daySplits:{type:Array,default:()=>[]},shortEvents:{type:Boolean,default:!0},height:{type:String,default:""},cellOrSplitMinWidth:{type:Number,default:null}},computed:{hasCellOrSplitWidth(){return!!(this.options.minCellWidth||this.daySplits.length&&this.options.minSplitWidth)}}},wn=Vt(_n,[["render",gn]]),bn=["lang"],xn={class:"default"},kn={key:0,class:"vuecal__flex vuecal__body",grow:""},Dn=["onBlur","innerHTML"],Sn=["innerHTML"],Mn=["innerHTML"],Cn={class:"vuecal__flex",row:"",grow:""},Tn={key:0,class:"vuecal__time-column"},En={class:"vuecal__time-cell-label"},$n={key:1,class:"vuecal__flex vuecal__week-numbers",column:""},jn=["wrap","column"],On=["onBlur","innerHTML"],Vn=["innerHTML"],An=["innerHTML"],Yn=["wrap"],In=["innerHTML"],Nn=["innerHTML"],Ln={key:2,class:"vuecal__cell-events-count"},Pn={key:3,class:"vuecal__no-event"},Un=["onBlur","innerHTML"],Rn=["innerHTML"],Fn={key:2,class:"vuecal__event-time"},Wn={key:0},Hn={key:1,class:"days-to-end"},Bn=["innerHTML"],zn={key:0,class:"vuecal__scrollbar-check"};function qn(e,t,s,a,l,n){const o=vt("vuecal-header"),r=vt("all-day-bar"),m=vt("weekdays-headings"),c=vt("vuecal-cell");return d(),u("div",{class:ae(["vuecal__flex vuecal",n.cssClasses]),column:"",ref:"vuecal",lang:s.locale},[h(o,{options:e.$props,"edit-events":n.editEvents,"view-props":{views:n.views,weekDaysInHeader:n.weekDaysInHeader},"week-days":n.weekDays,"has-splits":n.hasSplits,"day-splits":n.daySplits,"switch-to-narrower-view":n.switchToNarrowerView},Vs({"arrow-prev":L(()=>[me(e.$slots,"arrow-prev",{},()=>[t[0]||(t[0]=W(" ")),t[1]||(t[1]=i("i",{class:"angle"},null,-1)),t[2]||(t[2]=W(" "))])]),"arrow-next":L(()=>[me(e.$slots,"arrow-next",{},()=>[t[3]||(t[3]=W(" ")),t[4]||(t[4]=i("i",{class:"angle"},null,-1)),t[5]||(t[5]=W(" "))])]),"today-button":L(()=>[me(e.$slots,"today-button",{},()=>[i("span",xn,f(l.texts.today),1)])]),title:L(()=>[me(e.$slots,"title",{title:n.viewTitle,view:l.view},()=>[W(f(n.viewTitle),1)])]),_:2},[e.$slots["weekday-heading"]?{name:"weekday-heading",fn:L(({heading:v,view:p})=>[me(e.$slots,"weekday-heading",{heading:v,view:p})]),key:"0"}:void 0,e.$slots["split-label"]?{name:"split-label",fn:L(({split:v})=>[me(e.$slots,"split-label",{split:v,view:l.view.id})]),key:"1"}:void 0]),1032,["options","edit-events","view-props","week-days","has-splits","day-splits","switch-to-narrower-view"]),s.hideBody?k("",!0):(d(),u("div",kn,[h(Bt,{name:`slide-fade--${l.transitionDirection}`,appear:s.transitions},{default:L(()=>[(d(),u("div",{class:"vuecal__flex",style:{"min-width":"100%"},key:s.transitions?l.view.id:!1,column:""},[s.showAllDayEvents&&n.hasTimeColumn&&(!n.cellOrSplitMinWidth||n.isDayView&&!s.minSplitWidth)?(d(),oe(r,wa(ba({key:0},n.allDayBar)),{event:L(({event:v,view:p})=>[me(e.$slots,"event",{view:p,event:v},()=>[n.editEvents.title&&v.titleEditable?(d(),u("div",{key:0,class:"vuecal__event-title vuecal__event-title--edit",contenteditable:"",onBlur:g=>n.onEventTitleBlur(g,v),innerHTML:v.title},null,40,Dn)):v.title?(d(),u("div",{key:1,class:"vuecal__event-title",innerHTML:v.title},null,8,Sn)):k("",!0),v.content&&!n.hasShortEvents&&!n.isShortMonthView?(d(),u("div",{key:2,class:"vuecal__event-content",innerHTML:v.content},null,8,Mn)):k("",!0)])]),_:3},16)):k("",!0),i("div",{class:ae(["vuecal__bg",{vuecal__flex:!n.hasTimeColumn}]),column:""},[i("div",Cn,[n.hasTimeColumn?(d(),u("div",Tn,[s.showAllDayEvents&&n.cellOrSplitMinWidth&&!(n.isDayView&&!s.minSplitWidth)?(d(),u("div",{key:0,class:"vuecal__all-day-text",style:Ie({height:n.allDayBar.height})},[i("span",null,f(l.texts.allDay),1)],4)):k("",!0),(d(!0),u(X,null,le(n.timeCells,(v,p)=>(d(),u("div",{class:"vuecal__time-cell",key:p,style:Ie(`height: ${s.timeCellHeight}px`)},[me(e.$slots,"time-cell",{hours:v.hours,minutes:v.minutes},()=>[t[6]||(t[6]=i("span",{class:"vuecal__time-cell-line"},null,-1)),i("span",En,f(v.label),1)])],4))),128))])):k("",!0),s.showWeekNumbers&&n.isMonthView?(d(),u("div",$n,[(d(),u(X,null,le(6,v=>i("div",{class:"vuecal__flex vuecal__week-number-cell",key:v,grow:""},[me(e.$slots,"week-number-cell",{week:n.getWeekNumber(v-1)},()=>[W(f(n.getWeekNumber(v-1)),1)])])),64))])):k("",!0),i("div",{class:ae(["vuecal__flex vuecal__cells",`${l.view.id}-view`]),grow:"",wrap:!n.cellOrSplitMinWidth||!n.isWeekView,column:!!n.cellOrSplitMinWidth},[n.cellOrSplitMinWidth&&n.isWeekView?(d(),oe(m,{key:0,"transition-direction":l.transitionDirection,"week-days":n.weekDays,"switch-to-narrower-view":n.switchToNarrowerView,style:Ie(n.cellOrSplitMinWidth?`min-width: ${n.cellOrSplitMinWidth}px`:"")},Vs({_:2},[e.$slots["weekday-heading"]?{name:"weekday-heading",fn:L(({heading:v,view:p})=>[me(e.$slots,"weekday-heading",{heading:v,view:p})]),key:"0"}:void 0,e.$slots["split-label"]?{name:"split-label",fn:L(({split:v})=>[me(e.$slots,"split-label",{split:v,view:l.view.id})]),key:"1"}:void 0]),1032,["transition-direction","week-days","switch-to-narrower-view","style"])):n.hasSplits&&s.stickySplitLabels&&s.minSplitWidth?(d(),u("div",{key:1,class:"vuecal__flex vuecal__split-days-headers",style:Ie(n.cellOrSplitMinWidth?`min-width: ${n.cellOrSplitMinWidth}px`:"")},[(d(!0),u(X,null,le(n.daySplits,(v,p)=>(d(),u("div",{class:ae(["day-split-header",v.class||!1]),key:p},[me(e.$slots,"split-label",{split:v,view:l.view.id},()=>[W(f(v.label),1)])],2))),128))],4)):k("",!0),s.showAllDayEvents&&n.hasTimeColumn&&(n.isWeekView&&n.cellOrSplitMinWidth||n.isDayView&&n.hasSplits&&s.minSplitWidth)?(d(),oe(r,wa(ba({key:2},n.allDayBar)),{event:L(({event:v,view:p})=>[me(e.$slots,"event",{view:p,event:v},()=>[n.editEvents.title&&v.titleEditable?(d(),u("div",{key:0,class:"vuecal__event-title vuecal__event-title--edit",contenteditable:"",onBlur:g=>n.onEventTitleBlur(g,v),innerHTML:v.title},null,40,On)):v.title?(d(),u("div",{key:1,class:"vuecal__event-title",innerHTML:v.title},null,8,Vn)):k("",!0),v.content&&!n.hasShortEvents&&!n.isShortMonthView?(d(),u("div",{key:2,class:"vuecal__event-content",innerHTML:v.content},null,8,An)):k("",!0)])]),_:3},16)):k("",!0),i("div",{class:"vuecal__flex",ref:v=>l.cellsEl=v,grow:"",wrap:!n.cellOrSplitMinWidth||!n.isWeekView,style:Ie(n.cellOrSplitMinWidth?`min-width: ${n.cellOrSplitMinWidth}px`:"")},[(d(!0),u(X,null,le(n.viewCells,(v,p)=>(d(),oe(c,{key:p,options:e.$props,"edit-events":n.editEvents,data:v,"cell-width":s.hideWeekdays.length&&(n.isWeekView||n.isMonthView)&&n.cellWidth,"min-timestamp":n.minTimestamp,"max-timestamp":n.maxTimestamp,"cell-splits":n.hasSplits&&n.daySplits||[]},{"cell-content":L(({events:g,split:D,selectCell:x})=>[me(e.$slots,"cell-content",{cell:v,view:l.view,goNarrower:x,events:g},()=>[D&&!s.stickySplitLabels?(d(),u("div",{key:0,class:"split-label",innerHTML:D.label},null,8,In)):k("",!0),v.content?(d(),u("div",{key:1,class:"vuecal__cell-date",innerHTML:v.content},null,8,Nn)):k("",!0),(n.isMonthView&&!s.eventsOnMonthView||n.isYearsOrYearView&&s.eventsCountOnYearView)&&g.length?(d(),u("div",Ln,[me(e.$slots,"events-count",{view:l.view,events:g},()=>[W(f(g.length),1)])])):k("",!0),!n.cellOrSplitHasEvents(g,D)&&n.isWeekOrDayView?(d(),u("div",Pn,[me(e.$slots,"no-event",{},()=>[W(f(l.texts.noEvent),1)])])):k("",!0)])]),event:L(({event:g,view:D})=>[me(e.$slots,"event",{view:D,event:g},()=>[n.editEvents.title&&g.titleEditable?(d(),u("div",{key:0,class:"vuecal__event-title vuecal__event-title--edit",contenteditable:"",onBlur:x=>n.onEventTitleBlur(x,g),innerHTML:g.title},null,40,Un)):g.title?(d(),u("div",{key:1,class:"vuecal__event-title",innerHTML:g.title},null,8,Rn)):k("",!0),s.time&&!g.allDay&&!(n.isMonthView&&(g.allDay||s.showAllDayEvents==="short"))&&!n.isShortMonthView?(d(),u("div",Fn,[W(f(l.utils.date.formatTime(g.start,n.TimeFormat)),1),g.endTimeMinutes?(d(),u("span",Wn," - "+f(l.utils.date.formatTime(g.end,n.TimeFormat,null,!0)),1)):k("",!0),g.daysCount>1&&(g.segments[v.formattedDate]||{}).isFirstDay?(d(),u("small",Hn," +"+f(g.daysCount-1)+f((l.texts.day[0]||"").toLowerCase()),1)):k("",!0)])):k("",!0),g.content&&!(n.isMonthView&&g.allDay&&s.showAllDayEvents==="short")&&!n.isShortMonthView?(d(),u("div",{key:3,class:"vuecal__event-content",innerHTML:g.content},null,8,Bn)):k("",!0)])]),"no-event":L(()=>[me(e.$slots,"no-event",{},()=>[W(f(l.texts.noEvent),1)])]),_:2},1032,["options","edit-events","data","cell-width","min-timestamp","max-timestamp","cell-splits"]))),128))],12,Yn)],10,jn)])],2)]))]),_:3},8,["name","appear"]),l.ready?k("",!0):(d(),u("div",zn,t[7]||(t[7]=[i("div",null,null,-1)])))]))],10,bn)}const Ut=1440,ls={weekDays:Array(7).fill(""),weekDaysShort:[],months:Array(12).fill(""),years:"",year:"",month:"",week:"",day:"",today:"",noEvent:"",allDay:"",deleteEvent:"",createEvent:"",dateFormat:"dddd MMMM D, YYYY",am:"am",pm:"pm"},Sa=["years","year","month","week","day"],Ma=new Vi(ls),Gn={name:"vue-cal",components:{"vuecal-cell":Na,"vuecal-header":ln,WeekdaysHeadings:Ia,AllDayBar:wn},provide(){return{vuecal:this,utils:this.utils,modules:this.modules,previous:this.previous,next:this.next,switchView:this.switchView,updateSelectedDate:this.updateSelectedDate,editEvents:this.editEvents,view:this.view,domEvents:this.domEvents}},props:{activeView:{type:String,default:"week"},allDayBarHeight:{type:[String,Number],default:"25px"},cellClickHold:{type:Boolean,default:!0},cellContextmenu:{type:Boolean,default:!1},clickToNavigate:{type:Boolean,default:!1},dblclickToNavigate:{type:Boolean,default:!0},disableDatePrototypes:{type:Boolean,default:!1},disableDays:{type:Array,default:()=>[]},disableViews:{type:Array,default:()=>[]},dragToCreateEvent:{type:Boolean,default:!0},dragToCreateThreshold:{type:Number,default:15},editableEvents:{type:[Boolean,Object],default:!1},events:{type:Array,default:()=>[]},eventsCountOnYearView:{type:Boolean,default:!1},eventsOnMonthView:{type:[Boolean,String],default:!1},hideBody:{type:Boolean,default:!1},hideTitleBar:{type:Boolean,default:!1},hideViewSelector:{type:Boolean,default:!1},hideWeekdays:{type:Array,default:()=>[]},hideWeekends:{type:Boolean,default:!1},locale:{type:[String,Object],default:"en"},maxDate:{type:[String,Date],default:""},minCellWidth:{type:Number,default:0},minDate:{type:[String,Date],default:""},minEventWidth:{type:Number,default:0},minSplitWidth:{type:Number,default:0},onEventClick:{type:[Function,null],default:null},onEventCreate:{type:[Function,null],default:null},onEventDblclick:{type:[Function,null],default:null},overlapsPerTimeStep:{type:Boolean,default:!1},resizeX:{type:Boolean,default:!1},selectedDate:{type:[String,Date],default:""},showAllDayEvents:{type:[Boolean,String],default:!1},showTimeInCells:{type:Boolean,default:!1},showWeekNumbers:{type:[Boolean,String],default:!1},snapToTime:{type:Number,default:0},small:{type:Boolean,default:!1},specialHours:{type:Object,default:()=>({})},splitDays:{type:Array,default:()=>[]},startWeekOnSunday:{type:Boolean,default:!1},stickySplitLabels:{type:Boolean,default:!1},time:{type:Boolean,default:!0},timeCellHeight:{type:Number,default:40},timeFormat:{type:String,default:""},timeFrom:{type:Number,default:0},timeStep:{type:Number,default:60},timeTo:{type:Number,default:Ut},todayButton:{type:Boolean,default:!1},transitions:{type:Boolean,default:!0},twelveHour:{type:Boolean,default:!1},watchRealTime:{type:Boolean,default:!1},xsmall:{type:Boolean,default:!1}},data(){return{ready:!1,texts:{...ls},utils:{date:(this.disableDatePrototypes?Ma.removePrototypes():!1)||Ma,cell:null,event:null},modules:{dnd:null},cellsEl:null,view:{id:"",title:"",startDate:null,endDate:null,firstCellDate:null,lastCellDate:null,selectedDate:null,events:[]},eventIdIncrement:1,now:new Date,timeTickerIds:[null,null],domEvents:{resizeAnEvent:{_eid:null,start:null,split:null,segment:null,originalEndTimeMinutes:0,originalEnd:null,end:null,startCell:null,endCell:null},dragAnEvent:{_eid:null},dragCreateAnEvent:{startCursorY:null,start:null,split:null,event:null},focusAnEvent:{_eid:null,mousedUp:!1},clickHoldAnEvent:{_eid:null,timeout:1200,timeoutId:null},dblTapACell:{taps:0,timeout:500},clickHoldACell:{cellId:null,split:null,timeout:1200,timeoutId:null,eventCreated:!1},cancelClickEventCreation:!1},mutableEvents:[],transitionDirection:"right"}},methods:{async loadLocale(e){if(typeof this.locale=="object"){this.texts=Object.assign({},ls,e),this.utils.date.updateTexts(this.texts);return}const t=await Oi(Object.assign({"./i18n/ar.json":()=>ne(()=>import("./ar.es-bitOgb9K.js"),[]),"./i18n/bg.json":()=>ne(()=>import("./bg.es-5tp0KQRo.js"),[]),"./i18n/bn.json":()=>ne(()=>import("./bn.es-C_qR0y0-.js"),[]),"./i18n/bs.json":()=>ne(()=>import("./bs.es-DduooXS8.js"),[]),"./i18n/ca.json":()=>ne(()=>import("./ca.es-DYDNDJFJ.js"),[]),"./i18n/cs.json":()=>ne(()=>import("./cs.es-CvnAvfoI.js"),[]),"./i18n/da.json":()=>ne(()=>import("./da.es-C_eJXDX3.js"),[]),"./i18n/de.json":()=>ne(()=>import("./de.es-Cp-R9E16.js"),[]),"./i18n/el.json":()=>ne(()=>import("./el.es-BZ44a1Tb.js"),[]),"./i18n/en.json":()=>ne(()=>import("./en.es-DwVNOttH.js"),[]),"./i18n/es.json":()=>ne(()=>import("./es.es-DO8PaQ_q.js"),[]),"./i18n/et.json":()=>ne(()=>import("./et.es-DdRIcUrz.js"),[]),"./i18n/fa.json":()=>ne(()=>import("./fa.es-XN0av8Tx.js"),[]),"./i18n/fi.json":()=>ne(()=>import("./fi.es-B0Iy6aas.js"),[]),"./i18n/fr.json":()=>ne(()=>import("./fr.es-B7WXlprl.js"),[]),"./i18n/he.json":()=>ne(()=>import("./he.es-BWEk5prp.js"),[]),"./i18n/hr.json":()=>ne(()=>import("./hr.es-B_iqHQyr.js"),[]),"./i18n/hu.json":()=>ne(()=>import("./hu.es-D_t4Ibxf.js"),[]),"./i18n/id.json":()=>ne(()=>import("./id.es-CzHAK-XV.js"),[]),"./i18n/is.json":()=>ne(()=>import("./is.es-DChRpym4.js"),[]),"./i18n/it.json":()=>ne(()=>import("./it.es-CquQA5xx.js"),[]),"./i18n/ja.json":()=>ne(()=>import("./ja.es-B19gsG6H.js"),[]),"./i18n/ka.json":()=>ne(()=>import("./ka.es-CuOe65jc.js"),[]),"./i18n/ko.json":()=>ne(()=>import("./ko.es-CsMl2USK.js"),[]),"./i18n/lt.json":()=>ne(()=>import("./lt.es-vqgjGyMx.js"),[]),"./i18n/mn.json":()=>ne(()=>import("./mn.es-BmdwFdas.js"),[]),"./i18n/nl.json":()=>ne(()=>import("./nl.es-CFxVMCWy.js"),[]),"./i18n/no.json":()=>ne(()=>import("./no.es-qRcuRMwl.js"),[]),"./i18n/pl.json":()=>ne(()=>import("./pl.es-BQ3a0ltx.js"),[]),"./i18n/pt-br.json":()=>ne(()=>import("./pt-br.es-U9bVHsgs.js"),[]),"./i18n/pt-pt.json":()=>ne(()=>import("./pt-pt.es-U9bVHsgs.js"),[]),"./i18n/ro.json":()=>ne(()=>import("./ro.es-ldjMjt3l.js"),[]),"./i18n/ru.json":()=>ne(()=>import("./ru.es-CS-QKsYL.js"),[]),"./i18n/sk.json":()=>ne(()=>import("./sk.es-CAe8sEvL.js"),[]),"./i18n/sl.json":()=>ne(()=>import("./sl.es-rdzOxu_X.js"),[]),"./i18n/sq.json":()=>ne(()=>import("./sq.es-BY5E06HI.js"),[]),"./i18n/sr.json":()=>ne(()=>import("./sr.es-QPseRVBy.js"),[]),"./i18n/sv.json":()=>ne(()=>import("./sv.es-BfPUYcV1.js"),[]),"./i18n/tr.json":()=>ne(()=>import("./tr.es-Cl6kz_IH.js"),[]),"./i18n/uk.json":()=>ne(()=>import("./uk.es-DBEtNQnZ.js"),[]),"./i18n/vi.json":()=>ne(()=>import("./vi.es-Bx2g_1jx.js"),[]),"./i18n/zh-cn.json":()=>ne(()=>import("./zh-cn.es-BWMmCH-R.js"),[]),"./i18n/zh-hk.json":()=>ne(()=>import("./zh-hk.es-DFZ0bKvi.js"),[])}),`./i18n/${e}.json`,3);this.texts=Object.assign({},ls,t),this.utils.date.updateTexts(this.texts)},loadDragAndDrop(){ne(()=>import("./drag-and-drop.es-CbCm7IHa.js"),[]).then(e=>{const{DragAndDrop:t}=e;this.modules.dnd=new t(this)}).catch(()=>console.warn("Vue Cal: Missing drag & drop module."))},validateView(e){return Sa.includes(e)||(console.error(`Vue Cal: invalid active-view parameter provided: "${e}".
A valid view must be one of: ${Sa.join(", ")}.`),e="week"),this.enabledViews.includes(e)||(console.warn(`Vue Cal: the provided active-view "${e}" is disabled. Using the "${this.enabledViews[0]}" view instead.`),e=this.enabledViews[0]),e},switchToNarrowerView(e=null){this.transitionDirection="right";const t=this.enabledViews[this.enabledViews.indexOf(this.view.id)+1];t&&this.switchView(t,e)},switchView(e,t=null,s=!1){e=this.validateView(e);const a=this.utils.date,l=this.view.startDate&&this.view.startDate.getTime();if(this.transitions&&s){if(this.view.id===e)return;const r=this.enabledViews;this.transitionDirection=r.indexOf(this.view.id)>r.indexOf(e)?"left":"right"}const n=this.view.id;switch(this.view.events=[],this.view.id=e,this.view.firstCellDate=null,this.view.lastCellDate=null,t||(t=this.view.selectedDate||this.view.startDate),e){case"years":{this.view.startDate=new Date(Math.floor(t.getFullYear()/25)*25||2e3,0,1),this.view.endDate=new Date(this.view.startDate.getFullYear()+25,0,1),this.view.endDate.setSeconds(-1);break}case"year":{this.view.startDate=new Date(t.getFullYear(),0,1),this.view.endDate=new Date(t.getFullYear()+1,0,1),this.view.endDate.setSeconds(-1);break}case"month":{this.view.startDate=new Date(t.getFullYear(),t.getMonth(),1),this.view.endDate=new Date(t.getFullYear(),t.getMonth()+1,1),this.view.endDate.setSeconds(-1);let r=new Date(this.view.startDate);if(r.getDay()!==(this.startWeekOnSunday?0:1)&&(r=a.getPreviousFirstDayOfWeek(r,this.startWeekOnSunday)),this.view.firstCellDate=r,this.view.lastCellDate=a.addDays(r,41),this.view.lastCellDate.setHours(23,59,59,0),this.hideWeekends){if([0,6].includes(this.view.firstCellDate.getDay())){const m=this.view.firstCellDate.getDay()===6&&!this.startWeekOnSunday?2:1;this.view.firstCellDate=a.addDays(this.view.firstCellDate,m)}if([0,6].includes(this.view.startDate.getDay())){const m=this.view.startDate.getDay()===6?2:1;this.view.startDate=a.addDays(this.view.startDate,m)}if([0,6].includes(this.view.lastCellDate.getDay())){const m=this.view.lastCellDate.getDay()===0&&!this.startWeekOnSunday?2:1;this.view.lastCellDate=a.subtractDays(this.view.lastCellDate,m)}if([0,6].includes(this.view.endDate.getDay())){const m=this.view.endDate.getDay()===0?2:1;this.view.endDate=a.subtractDays(this.view.endDate,m)}}break}case"week":{t=a.getPreviousFirstDayOfWeek(t,this.startWeekOnSunday);const r=this.hideWeekends?5:7;this.view.startDate=this.hideWeekends&&this.startWeekOnSunday?a.addDays(t,1):t,this.view.startDate.setHours(0,0,0,0),this.view.endDate=a.addDays(t,r),this.view.endDate.setSeconds(-1);break}case"day":{this.view.startDate=t,this.view.startDate.setHours(0,0,0,0),this.view.endDate=new Date(t),this.view.endDate.setHours(23,59,59,0);break}}this.addEventsToView();const o=this.view.startDate&&this.view.startDate.getTime();if(!(n===e&&o===l)&&(this.$emit("update:activeView",e),this.ready)){const r=this.view.startDate,m={view:e,startDate:r,endDate:this.view.endDate,...this.isMonthView?{firstCellDate:this.view.firstCellDate,lastCellDate:this.view.lastCellDate,outOfScopeEvents:this.view.outOfScopeEvents.map(this.cleanupEvent)}:{},events:this.view.events.map(this.cleanupEvent),...this.isWeekView?{week:a.getWeek(this.startWeekOnSunday?a.addDays(r,1):r)}:{}};this.$emit("view-change",m)}},previous(){this.previousNext(!1)},next(){this.previousNext()},previousNext(e=!0){const t=this.utils.date;this.transitionDirection=e?"right":"left";const s=e?1:-1;let a=null;const{startDate:l,id:n}=this.view;switch(n){case"years":a=new Date(l.getFullYear()+25*s,0,1);break;case"year":a=new Date(l.getFullYear()+1*s,1,1);break;case"month":a=new Date(l.getFullYear(),l.getMonth()+1*s,1);break;case"week":a=t[e?"addDays":"subtractDays"](t.getPreviousFirstDayOfWeek(l,this.startWeekOnSunday),7);break;case"day":a=t[e?"addDays":"subtractDays"](l,1);const o=a.getDay(),r=this.startWeekOnSunday?o:(o||7)-1;if(this.weekDays[r].hide){const c=this.weekDays.map((p,g)=>({...p,i:g}));let v=0;e?([...c.slice(r),...c].find(p=>(v++,!p.hide)).i,v--):[...c,...c.slice(0,r)].reverse().find(p=>(v++,!p.hide)).i,a=t[e?"addDays":"subtractDays"](a,v)}break}a&&this.switchView(n,a)},addEventsToView(e=[]){const t=this.utils.event,{startDate:s,endDate:a,firstCellDate:l,lastCellDate:n}=this.view;if(e.length||(this.view.events=[]),e=e.length?e:[...this.mutableEvents],!e||this.isYearsOrYearView&&!this.eventsCountOnYearView)return;let o=e.filter(r=>t.eventInRange(r,s,a));!this.isYearsOrYearView&&!(this.isMonthView&&!this.eventsOnMonthView)&&(o=o.map(r=>r.daysCount>1?t.createEventSegments(r,l||s,n||a):r)),this.view.events.push(...o),this.isMonthView&&(this.view.outOfScopeEvents=[],e.forEach(r=>{(t.eventInRange(r,l,s)||t.eventInRange(r,a,n))&&(this.view.events.some(m=>m._eid===r._eid)||this.view.outOfScopeEvents.push(r))}))},findAncestor(e,t){for(;(e=e.parentElement)&&!e.classList.contains(t););return e},isDOMElementAnEvent(e){return e.classList.contains("vuecal__event")||this.findAncestor(e,"vuecal__event")},onMouseMove(e){const{resizeAnEvent:t,dragAnEvent:s,dragCreateAnEvent:a}=this.domEvents;t._eid===null&&s._eid===null&&!a.start||(e.preventDefault(),t._eid?this.eventResizing(e):this.dragToCreateEvent&&a.start&&this.eventDragCreation(e))},onMouseUp(e){const{focusAnEvent:t,resizeAnEvent:s,clickHoldAnEvent:a,clickHoldACell:l,dragCreateAnEvent:n}=this.domEvents,{_eid:o}=a,{_eid:r}=s;let m=!1;const{event:c,start:v}=n,p=this.isDOMElementAnEvent(e.target),g=t.mousedUp;if(t.mousedUp=!1,p&&(this.domEvents.cancelClickEventCreation=!0),l.eventCreated)return;if(r){const{originalEnd:x,originalEndTimeMinutes:M,endTimeMinutes:_}=s,y=this.view.events.find(j=>j._eid===s._eid);if(m=_&&_!==M,y&&y.end.getTime()!==x.getTime()){const j=this.mutableEvents.find(R=>R._eid===s._eid);j.endTimeMinutes=y.endTimeMinutes,j.end=y.end;const $=this.cleanupEvent(y),S={...this.cleanupEvent(y),end:x,endTimeMinutes:y.originalEndTimeMinutes};this.$emit("event-duration-change",{event:$,oldDate:s.originalEnd,originalEvent:S}),this.$emit("event-change",{event:$,originalEvent:S})}y&&(y.resizing=!1),s._eid=null,s.start=null,s.split=null,s.segment=null,s.originalEndTimeMinutes=null,s.originalEnd=null,s.endTimeMinutes=null,s.startCell=null,s.endCell=null}else v&&(c&&(this.emitWithEvent("event-drag-create",c),n.event.resizing=!1),n.start=null,n.split=null,n.event=null);!p&&!r&&this.unfocusEvent(),a.timeoutId&&!o&&(clearTimeout(a.timeoutId),a.timeoutId=null),l.timeoutId&&(clearTimeout(l.timeoutId),l.timeoutId=null);const D=typeof this.onEventClick=="function";if(g&&!m&&!o&&!c&&D){let x=this.view.events.find(M=>M._eid===t._eid);return!x&&this.isMonthView&&(x=this.view.outOfScopeEvents.find(M=>M._eid===t._eid)),x&&this.onEventClick(x,e)}},onKeyUp(e){e.keyCode===27&&this.cancelDelete()},eventResizing(e){const{resizeAnEvent:t}=this.domEvents,s=this.view.events.find(c=>c._eid===t._eid)||{segments:{}},{minutes:a,cursorCoords:l}=this.minutesAtCursor(e),n=s.segments&&s.segments[t.segment],{date:o,event:r}=this.utils,m=Math.max(a,this.timeFrom+1,(n||s).startTimeMinutes+1);if(s.endTimeMinutes=t.endTimeMinutes=m,this.snapToTime){const c=s.endTimeMinutes+this.snapToTime/2;s.endTimeMinutes=c-c%this.snapToTime}if(n&&(n.endTimeMinutes=s.endTimeMinutes),s.end.setHours(0,s.endTimeMinutes,s.endTimeMinutes===Ut?-1:0,0),this.resizeX&&this.isWeekView){s.daysCount=o.countDays(s.start,s.end);const c=this.cellsEl,v=c.offsetWidth/c.childElementCount,p=Math.floor(l.x/v);if(t.startCell===null&&(t.startCell=p-(s.daysCount-1)),t.endCell!==p){t.endCell=p;const g=o.addDays(s.start,p-t.startCell),D=Math.max(o.countDays(s.start,g),1);if(D!==s.daysCount){let x=null;D>s.daysCount?x=r.addEventSegment(s):x=r.removeEventSegment(s),t.segment=x,s.endTimeMinutes+=.001}}}this.$emit("event-resizing",{_eid:s._eid,end:s.end,endTimeMinutes:s.endTimeMinutes})},eventDragCreation(e){const{dragCreateAnEvent:t}=this.domEvents,{start:s,startCursorY:a,split:l}=t,n=new Date(s),{minutes:o,cursorCoords:{y:r}}=this.minutesAtCursor(e);if(!(!t.event&&Math.abs(a-r)<this.dragToCreateThreshold))if(t.event){if(n.setHours(0,o,o===Ut?-1:0,0),this.snapToTime){let v=n.getHours()*60+n.getMinutes();const p=v+this.snapToTime/2;v=p-p%this.snapToTime,n.setHours(0,v,0,0)}const m=s<n,{event:c}=t;c.start=m?s:n,c.end=m?n:s,c.startTimeMinutes=c.start.getHours()*60+c.start.getMinutes(),c.endTimeMinutes=c.end.getHours()*60+c.end.getMinutes()}else{if(t.event=this.utils.event.createAnEvent(s,1,{split:l}),!t.event){t.start=null,t.split=null,t.event=null;return}t.event.resizing=!0}},unfocusEvent(){const{focusAnEvent:e,clickHoldAnEvent:t}=this.domEvents,s=this.view.events.find(a=>a._eid===(e._eid||t._eid));e._eid=null,t._eid=null,s&&(s.focused=!1,s.deleting=!1)},cancelDelete(){const{clickHoldAnEvent:e}=this.domEvents;if(e._eid){const t=this.view.events.find(s=>s._eid===e._eid);t&&(t.deleting=!1),e._eid=null,e.timeoutId=null}},onEventTitleBlur(e,t){if(t.title===e.target.innerHTML)return;const s=t.title;t.title=e.target.innerHTML;const a=this.cleanupEvent(t);this.$emit("event-title-change",{event:a,oldTitle:s}),this.$emit("event-change",{event:a,originalEvent:{...a,title:s}})},updateMutableEvents(){const e=this.utils.date;this.mutableEvents=[],this.events.forEach(t=>{const s=typeof t.start=="string"?e.stringToDate(t.start):t.start,a=e.formatDateLite(s),l=e.dateToMinutes(s);let n=null;typeof t.end=="string"&&t.end.includes("24:00")?(n=new Date(t.end.replace(" 24:00","")),n.setHours(23,59,59,0)):n=typeof t.end=="string"?e.stringToDate(t.end):t.end;let o=e.formatDateLite(n),r=e.dateToMinutes(n);(!r||r===Ut)&&(!this.time||typeof t.end=="string"&&t.end.length===10?n.setHours(23,59,59,0):n.setSeconds(n.getSeconds()-1),o=e.formatDateLite(n),r=Ut);const m=a!==o;t=Object.assign({...this.utils.event.eventDefaults},t,{_eid:`${this._.uid}_${this.eventIdIncrement++}`,segments:m?{}:null,start:s,startTimeMinutes:l,end:n,endTimeMinutes:r,daysCount:m?e.countDays(s,n):1,class:t.class}),this.mutableEvents.push(t)})},minutesAtCursor(e){return this.utils.cell.minutesAtCursor(e)},createEvent(e,t,s={}){return this.utils.event.createAnEvent(e,t,s)},cleanupEvent(e){return e={...e},["segments","deletable","deleting","titleEditable","resizable","resizing","draggable","dragging","draggingStatic","focused"].forEach(s=>{s in e&&delete e[s]}),e.repeat||delete e.repeat,e},emitWithEvent(e,t){this.$emit(e,this.cleanupEvent(t))},updateSelectedDate(e){if(e&&typeof e=="string"?e=this.utils.date.stringToDate(e):e=new Date(e),e&&e instanceof Date){const{selectedDate:t}=this.view;t&&(this.transitionDirection=t.getTime()>e.getTime()?"left":"right"),e.setHours(0,0,0,0),(!t||t.getTime()!==e.getTime())&&(this.view.selectedDate=e),this.switchView(this.view.id)}this.$emit("update:selected-date",this.view.selectedDate)},getWeekNumber(e){const t=this.utils.date,a=this.firstCellDateWeekNumber+e,l=this.startWeekOnSunday?1:0;return a>52?t.getWeek(t.addDays(this.view.firstCellDate,7*e+l)):a},timeTick(){this.now=new Date,this.timeTickerIds[1]=setTimeout(this.timeTick,60*1e3)},updateDateTexts(){this.utils.date.updateTexts(this.texts)},alignWithScrollbar(){if(document.getElementById("vuecal-align-with-scrollbar"))return;const e=this.$refs.vuecal.getElementsByClassName("vuecal__scrollbar-check")[0],t=e.offsetWidth-e.children[0].offsetWidth;if(t){const s=document.createElement("style");s.id="vuecal-align-with-scrollbar",s.type="text/css",s.innerHTML=`.vuecal--view-with-time .vuecal__weekdays-headings,.vuecal--view-with-time .vuecal__all-day {padding-right: ${t}px}`,document.head.appendChild(s)}},cellOrSplitHasEvents(e,t=null){return e.length&&(!t&&e.length||t&&e.some(s=>s.split===t.id))}},created(){this.utils.cell=new Yi(this),this.utils.event=new Ni(this,this.utils.date),this.loadLocale(this.locale),this.editEvents.drag&&this.loadDragAndDrop(),this.updateMutableEvents(this.events),this.view.id=this.currentView,this.selectedDate?this.updateSelectedDate(this.selectedDate):(this.view.selectedDate=new Date,this.switchView(this.currentView)),this.time&&this.watchRealTime&&(this.timeTickerIds[0]=setTimeout(this.timeTick,(60-this.now.getSeconds())*1e3))},mounted(){const e=this.utils.date,t="ontouchstart"in window,{resize:s,drag:a,create:l,delete:n,title:o}=this.editEvents,r=this.onEventClick&&typeof this.onEventClick=="function";(s||a||l||n||o||r)&&window.addEventListener(t?"touchend":"mouseup",this.onMouseUp),(s||a||l&&this.dragToCreateEvent)&&window.addEventListener(t?"touchmove":"mousemove",this.onMouseMove,{passive:!1}),o&&window.addEventListener("keyup",this.onKeyUp),t&&(this.$refs.vuecal.oncontextmenu=function(v){v.preventDefault(),v.stopPropagation()}),this.hideBody||this.alignWithScrollbar();const m=this.view.startDate,c={view:this.view.id,startDate:m,endDate:this.view.endDate,...this.isMonthView?{firstCellDate:this.view.firstCellDate,lastCellDate:this.view.lastCellDate}:{},events:this.view.events.map(this.cleanupEvent),...this.isWeekView?{week:e.getWeek(this.startWeekOnSunday?e.addDays(m,1):m)}:{}};this.$emit("ready",c),this.ready=!0},beforeUnmount(){const e="ontouchstart"in window;window.removeEventListener(e?"touchmove":"mousemove",this.onMouseMove,{passive:!1}),window.removeEventListener(e?"touchend":"mouseup",this.onMouseUp),window.removeEventListener("keyup",this.onKeyUp),this.timeTickerIds[0]&&clearTimeout(this.timeTickerIds[0]),this.timeTickerIds[1]&&clearTimeout(this.timeTickerIds[1]),this.timeTickerIds=[null,null]},computed:{editEvents(){return this.editableEvents&&typeof this.editableEvents=="object"?{title:!!this.editableEvents.title,drag:!!this.editableEvents.drag,resize:!!this.editableEvents.resize,create:!!this.editableEvents.create,delete:!!this.editableEvents.delete}:{title:!!this.editableEvents,drag:!!this.editableEvents,resize:!!this.editableEvents,create:!!this.editableEvents,delete:!!this.editableEvents}},views(){return{years:{label:this.texts.years,enabled:!this.disableViews.includes("years")},year:{label:this.texts.year,enabled:!this.disableViews.includes("year")},month:{label:this.texts.month,enabled:!this.disableViews.includes("month")},week:{label:this.texts.week,enabled:!this.disableViews.includes("week")},day:{label:this.texts.day,enabled:!this.disableViews.includes("day")}}},currentView(){return this.validateView(this.activeView)},enabledViews(){return Object.keys(this.views).filter(e=>this.views[e].enabled)},hasTimeColumn(){return this.time&&this.isWeekOrDayView},isShortMonthView(){return this.isMonthView&&this.eventsOnMonthView==="short"},firstCellDateWeekNumber(){const e=this.utils.date,t=this.view.firstCellDate;return e.getWeek(this.startWeekOnSunday?e.addDays(t,1):t)},timeCells(){const e=[];for(let t=this.timeFrom,s=this.timeTo;t<s;t+=this.timeStep)e.push({hours:Math.floor(t/60),minutes:t%60,label:this.utils.date.formatTime(t,this.TimeFormat),value:t});return e},TimeFormat(){return this.timeFormat||(this.twelveHour?"h:mm{am}":"HH:mm")},daySplits(){return(this.splitDays.filter(e=>!e.hide)||[]).map((e,t)=>({...e,id:e.id||t+1}))},hasSplits(){return this.daySplits.length&&this.isWeekOrDayView},hasShortEvents(){return this.showAllDayEvents==="short"},cellOrSplitMinWidth(){let e=null;return this.hasSplits&&this.minSplitWidth?e=this.visibleDaysCount*this.minSplitWidth*this.daySplits.length:this.minCellWidth&&this.isWeekView&&(e=this.visibleDaysCount*this.minCellWidth),e},allDayBar(){let e=this.allDayBarHeight||null;return e&&!isNaN(e)&&(e+="px"),{cells:this.viewCells,options:this.$props,label:this.texts.allDay,shortEvents:this.hasShortEvents,daySplits:this.hasSplits&&this.daySplits||[],cellOrSplitMinWidth:this.cellOrSplitMinWidth,height:e}},minTimestamp(){let e=null;return this.minDate&&typeof this.minDate=="string"?e=this.utils.date.stringToDate(this.minDate):this.minDate&&this.minDate instanceof Date&&(e=this.minDate),e?e.getTime():null},maxTimestamp(){let e=null;return this.maxDate&&typeof this.maxDate=="string"?e=this.utils.date.stringToDate(this.maxDate):this.maxDate&&this.maxDate instanceof Date&&(e=this.maxDate),e?e.getTime():null},weekDays(){let{weekDays:e,weekDaysShort:t=[]}=this.texts;return e=e.slice(0).map((s,a)=>({label:s,...t.length?{short:t[a]}:{},hide:this.hideWeekends&&a>=5||this.hideWeekdays.length&&this.hideWeekdays.includes(a+1)})),this.startWeekOnSunday&&e.unshift(e.pop()),e},weekDaysInHeader(){return this.isMonthView||this.isWeekView&&!this.minCellWidth&&!(this.hasSplits&&this.minSplitWidth)},months(){return this.texts.months.map(e=>({label:e}))},specialDayHours(){return!this.specialHours||!Object.keys(this.specialHours).length?{}:Array(7).fill("").map((e,t)=>{let s=this.specialHours[t+1]||[];return Array.isArray(s)||(s=[s]),e=[],s.forEach(({from:a,to:l,class:n,label:o},r)=>{e[r]={day:t+1,from:[null,void 0].includes(a)?null:a*1,to:[null,void 0].includes(l)?null:l*1,class:n||"",label:o||""}}),e})},viewTitle(){const e=this.utils.date;let t="";const s=this.view.startDate,a=s.getFullYear(),l=s.getMonth();switch(this.view.id){case"years":{t=this.texts.years;break}case"year":{t=a;break}case"month":{t=`${this.months[l].label} ${a}`;break}case"week":{const n=this.view.endDate,o=s.getFullYear();let r=this.texts.months[s.getMonth()];this.xsmall&&(r=r.substring(0,3));let m=`${r} ${o}`;if(n.getMonth()!==s.getMonth()){const c=n.getFullYear();let v=this.texts.months[n.getMonth()];this.xsmall&&(v=v.substring(0,3)),o===c?m=`${r} - ${v} ${o}`:this.small?m=`${r.substring(0,3)} ${o} - ${v.substring(0,3)} ${c}`:m=`${r} ${o} - ${v} ${c}`}t=`${this.texts.week} ${e.getWeek(this.startWeekOnSunday?e.addDays(s,1):s)} (${m})`;break}case"day":{t=this.utils.date.formatDate(s,this.texts.dateFormat,this.texts);break}}return t},viewCells(){const e=this.utils.date;let t=[],s=null,a=!1;this.watchRealTime||(this.now=new Date);const l=this.now;switch(this.view.id){case"years":{s=this.view.startDate.getFullYear(),t=Array.apply(null,Array(25)).map((n,o)=>{const r=new Date(s+o,0,1),m=new Date(s+o+1,0,1);return m.setSeconds(-1),{startDate:r,formattedDate:e.formatDateLite(r),endDate:m,content:s+o,current:s+o===l.getFullYear()}});break}case"year":{s=this.view.startDate.getFullYear(),t=Array.apply(null,Array(12)).map((n,o)=>{const r=new Date(s,o,1),m=new Date(s,o+1,1);return m.setSeconds(-1),{startDate:r,formattedDate:e.formatDateLite(r),endDate:m,content:this.xsmall?this.months[o].label.substr(0,3):this.months[o].label,current:o===l.getMonth()&&s===l.getFullYear()}});break}case"month":{const n=this.view.startDate.getMonth(),o=new Date(this.view.firstCellDate);a=!1,t=Array.apply(null,Array(42)).map((r,m)=>{const c=e.addDays(o,m),v=new Date(c);v.setHours(23,59,59,0);const p=!a&&e.isToday(c)&&!a++;return{startDate:c,formattedDate:e.formatDateLite(c),endDate:v,content:c.getDate(),today:p,outOfScope:c.getMonth()!==n,class:`vuecal__cell--day${c.getDay()||7}`}}),(this.hideWeekends||this.hideWeekdays.length)&&(t=t.filter(r=>{const m=r.startDate.getDay()||7;return!(this.hideWeekends&&m>=6||this.hideWeekdays.length&&this.hideWeekdays.includes(m))}));break}case"week":{a=!1;const n=this.view.startDate,o=this.weekDays;t=o.map((r,m)=>{const c=e.addDays(n,this.startWeekOnSunday&&this.hideWeekends?m-1:m),v=new Date(c);v.setHours(23,59,59,0);const p=(c.getDay()||7)-1;return{startDate:c,formattedDate:e.formatDateLite(c),endDate:v,today:!a&&e.isToday(c)&&!a++,specialHours:this.specialDayHours[p]||[]}}).filter((r,m)=>!o[m].hide);break}case"day":{const n=this.view.startDate,o=new Date(this.view.startDate);o.setHours(23,59,59,0);const r=(n.getDay()||7)-1;t=[{startDate:n,formattedDate:e.formatDateLite(n),endDate:o,today:e.isToday(n),specialHours:this.specialDayHours[r]||[]}];break}}return t},visibleDaysCount(){return this.isDayView?1:7-this.weekDays.reduce((e,t)=>e+t.hide,0)},cellWidth(){return 100/this.visibleDaysCount},cssClasses(){const{resizeAnEvent:e,dragAnEvent:t,dragCreateAnEvent:s}=this.domEvents;return{[`vuecal--${this.view.id}-view`]:!0,[`vuecal--${this.locale}`]:this.locale,"vuecal--no-time":!this.time,"vuecal--view-with-time":this.hasTimeColumn,"vuecal--week-numbers":this.showWeekNumbers&&this.isMonthView,"vuecal--twelve-hour":this.twelveHour,"vuecal--click-to-navigate":this.clickToNavigate,"vuecal--hide-weekends":this.hideWeekends,"vuecal--split-days":this.hasSplits,"vuecal--sticky-split-labels":this.hasSplits&&this.stickySplitLabels,"vuecal--overflow-x":this.minCellWidth&&this.isWeekView||this.hasSplits&&this.minSplitWidth,"vuecal--small":this.small,"vuecal--xsmall":this.xsmall,"vuecal--resizing-event":e._eid,"vuecal--drag-creating-event":s.event,"vuecal--dragging-event":t._eid,"vuecal--events-on-month-view":this.eventsOnMonthView,"vuecal--short-events":this.isMonthView&&this.eventsOnMonthView==="short","vuecal--has-touch":typeof window<"u"&&"ontouchstart"in window}},isYearsOrYearView(){return["years","year"].includes(this.view.id)},isYearsView(){return this.view.id==="years"},isYearView(){return this.view.id==="year"},isMonthView(){return this.view.id==="month"},isWeekOrDayView(){return["week","day"].includes(this.view.id)},isWeekView(){return this.view.id==="week"},isDayView(){return this.view.id==="day"}},watch:{events:{handler(e,t){this.updateMutableEvents(e),this.addEventsToView()},deep:!0},locale(e){this.loadLocale(e)},selectedDate(e){this.updateSelectedDate(e)},activeView(e){this.switchView(e)}}},Zn=Vt(Gn,[["render",qn]]);//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var La;function I(){return La.apply(null,arguments)}function Jn(e){La=e}function Be(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function wt(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function ve(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Ws(e){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(e).length===0;var t;for(t in e)if(ve(e,t))return!1;return!0}function Ae(e){return e===void 0}function dt(e){return typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]"}function Qt(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function Pa(e,t){var s=[],a,l=e.length;for(a=0;a<l;++a)s.push(t(e[a],a));return s}function ht(e,t){for(var s in t)ve(t,s)&&(e[s]=t[s]);return ve(t,"toString")&&(e.toString=t.toString),ve(t,"valueOf")&&(e.valueOf=t.valueOf),e}function Xe(e,t,s,a){return rl(e,t,s,a,!0).utc()}function Kn(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function re(e){return e._pf==null&&(e._pf=Kn()),e._pf}var Ys;Array.prototype.some?Ys=Array.prototype.some:Ys=function(e){var t=Object(this),s=t.length>>>0,a;for(a=0;a<s;a++)if(a in t&&e.call(this,t[a],a,t))return!0;return!1};function Hs(e){var t=null,s=!1,a=e._d&&!isNaN(e._d.getTime());if(a&&(t=re(e),s=Ys.call(t.parsedDateParts,function(l){return l!=null}),a=t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&s),e._strict&&(a=a&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(e))e._isValid=a;else return a;return e._isValid}function vs(e){var t=Xe(NaN);return e!=null?ht(re(t),e):re(t).userInvalidated=!0,t}var Ca=I.momentProperties=[],Es=!1;function Bs(e,t){var s,a,l,n=Ca.length;if(Ae(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),Ae(t._i)||(e._i=t._i),Ae(t._f)||(e._f=t._f),Ae(t._l)||(e._l=t._l),Ae(t._strict)||(e._strict=t._strict),Ae(t._tzm)||(e._tzm=t._tzm),Ae(t._isUTC)||(e._isUTC=t._isUTC),Ae(t._offset)||(e._offset=t._offset),Ae(t._pf)||(e._pf=re(t)),Ae(t._locale)||(e._locale=t._locale),n>0)for(s=0;s<n;s++)a=Ca[s],l=t[a],Ae(l)||(e[a]=l);return e}function Xt(e){Bs(this,e),this._d=new Date(e._d!=null?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),Es===!1&&(Es=!0,I.updateOffset(this),Es=!1)}function ze(e){return e instanceof Xt||e!=null&&e._isAMomentObject!=null}function Ua(e){I.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+e)}function Fe(e,t){var s=!0;return ht(function(){if(I.deprecationHandler!=null&&I.deprecationHandler(null,e),s){var a=[],l,n,o,r=arguments.length;for(n=0;n<r;n++){if(l="",typeof arguments[n]=="object"){l+=`
[`+n+"] ";for(o in arguments[0])ve(arguments[0],o)&&(l+=o+": "+arguments[0][o]+", ");l=l.slice(0,-2)}else l=arguments[n];a.push(l)}Ua(e+`
Arguments: `+Array.prototype.slice.call(a).join("")+`
`+new Error().stack),s=!1}return t.apply(this,arguments)},t)}var Ta={};function Ra(e,t){I.deprecationHandler!=null&&I.deprecationHandler(e,t),Ta[e]||(Ua(t),Ta[e]=!0)}I.suppressDeprecationWarnings=!1;I.deprecationHandler=null;function et(e){return typeof Function<"u"&&e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function Qn(e){var t,s;for(s in e)ve(e,s)&&(t=e[s],et(t)?this[s]=t:this["_"+s]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function Is(e,t){var s=ht({},e),a;for(a in t)ve(t,a)&&(wt(e[a])&&wt(t[a])?(s[a]={},ht(s[a],e[a]),ht(s[a],t[a])):t[a]!=null?s[a]=t[a]:delete s[a]);for(a in e)ve(e,a)&&!ve(t,a)&&wt(e[a])&&(s[a]=ht({},s[a]));return s}function zs(e){e!=null&&this.set(e)}var Ns;Object.keys?Ns=Object.keys:Ns=function(e){var t,s=[];for(t in e)ve(e,t)&&s.push(t);return s};var Xn={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function eo(e,t,s){var a=this._calendar[e]||this._calendar.sameElse;return et(a)?a.call(t,s):a}function Ke(e,t,s){var a=""+Math.abs(e),l=t-a.length,n=e>=0;return(n?s?"+":"":"-")+Math.pow(10,Math.max(0,l)).toString().substr(1)+a}var qs=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,ss=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,$s={},Tt={};function ee(e,t,s,a){var l=a;typeof a=="string"&&(l=function(){return this[a]()}),e&&(Tt[e]=l),t&&(Tt[t[0]]=function(){return Ke(l.apply(this,arguments),t[1],t[2])}),s&&(Tt[s]=function(){return this.localeData().ordinal(l.apply(this,arguments),e)})}function to(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function so(e){var t=e.match(qs),s,a;for(s=0,a=t.length;s<a;s++)Tt[t[s]]?t[s]=Tt[t[s]]:t[s]=to(t[s]);return function(l){var n="",o;for(o=0;o<a;o++)n+=et(t[o])?t[o].call(l,e):t[o];return n}}function is(e,t){return e.isValid()?(t=Fa(t,e.localeData()),$s[t]=$s[t]||so(t),$s[t](e)):e.localeData().invalidDate()}function Fa(e,t){var s=5;function a(l){return t.longDateFormat(l)||l}for(ss.lastIndex=0;s>=0&&ss.test(e);)e=e.replace(ss,a),ss.lastIndex=0,s-=1;return e}var ao={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function lo(e){var t=this._longDateFormat[e],s=this._longDateFormat[e.toUpperCase()];return t||!s?t:(this._longDateFormat[e]=s.match(qs).map(function(a){return a==="MMMM"||a==="MM"||a==="DD"||a==="dddd"?a.slice(1):a}).join(""),this._longDateFormat[e])}var io="Invalid date";function no(){return this._invalidDate}var oo="%d",ro=/\d{1,2}/;function uo(e){return this._ordinal.replace("%d",e)}var co={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function mo(e,t,s,a){var l=this._relativeTime[s];return et(l)?l(e,t,s,a):l.replace(/%d/i,e)}function vo(e,t){var s=this._relativeTime[e>0?"future":"past"];return et(s)?s(t):s.replace(/%s/i,t)}var Ea={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function We(e){return typeof e=="string"?Ea[e]||Ea[e.toLowerCase()]:void 0}function Gs(e){var t={},s,a;for(a in e)ve(e,a)&&(s=We(a),s&&(t[s]=e[a]));return t}var ho={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function po(e){var t=[],s;for(s in e)ve(e,s)&&t.push({unit:s,priority:ho[s]});return t.sort(function(a,l){return a.priority-l.priority}),t}var Wa=/\d/,Le=/\d\d/,Ha=/\d{3}/,Zs=/\d{4}/,hs=/[+-]?\d{6}/,xe=/\d\d?/,Ba=/\d\d\d\d?/,za=/\d\d\d\d\d\d?/,ps=/\d{1,3}/,Js=/\d{1,4}/,fs=/[+-]?\d{1,6}/,At=/\d+/,ys=/[+-]?\d+/,fo=/Z|[+-]\d\d:?\d\d/gi,gs=/Z|[+-]\d\d(?::?\d\d)?/gi,yo=/[+-]?\d+(\.\d{1,3})?/,es=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Yt=/^[1-9]\d?/,Ks=/^([1-9]\d|\d)/,rs;rs={};function q(e,t,s){rs[e]=et(t)?t:function(a,l){return a&&s?s:t}}function go(e,t){return ve(rs,e)?rs[e](t._strict,t._locale):new RegExp(_o(e))}function _o(e){return nt(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,s,a,l,n){return s||a||l||n}))}function nt(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Re(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function ue(e){var t=+e,s=0;return t!==0&&isFinite(t)&&(s=Re(t)),s}var Ls={};function ye(e,t){var s,a=t,l;for(typeof e=="string"&&(e=[e]),dt(t)&&(a=function(n,o){o[t]=ue(n)}),l=e.length,s=0;s<l;s++)Ls[e[s]]=a}function ts(e,t){ye(e,function(s,a,l,n){l._w=l._w||{},t(s,l._w,l,n)})}function wo(e,t,s){t!=null&&ve(Ls,e)&&Ls[e](t,s._a,s,e)}function _s(e){return e%4===0&&e%100!==0||e%400===0}var Oe=0,lt=1,Je=2,Ee=3,He=4,it=5,_t=6,bo=7,xo=8;ee("Y",0,0,function(){var e=this.year();return e<=9999?Ke(e,4):"+"+e});ee(0,["YY",2],0,function(){return this.year()%100});ee(0,["YYYY",4],0,"year");ee(0,["YYYYY",5],0,"year");ee(0,["YYYYYY",6,!0],0,"year");q("Y",ys);q("YY",xe,Le);q("YYYY",Js,Zs);q("YYYYY",fs,hs);q("YYYYYY",fs,hs);ye(["YYYYY","YYYYYY"],Oe);ye("YYYY",function(e,t){t[Oe]=e.length===2?I.parseTwoDigitYear(e):ue(e)});ye("YY",function(e,t){t[Oe]=I.parseTwoDigitYear(e)});ye("Y",function(e,t){t[Oe]=parseInt(e,10)});function Ht(e){return _s(e)?366:365}I.parseTwoDigitYear=function(e){return ue(e)+(ue(e)>68?1900:2e3)};var qa=It("FullYear",!0);function ko(){return _s(this.year())}function It(e,t){return function(s){return s!=null?(Ga(this,e,s),I.updateOffset(this,t),this):zt(this,e)}}function zt(e,t){if(!e.isValid())return NaN;var s=e._d,a=e._isUTC;switch(t){case"Milliseconds":return a?s.getUTCMilliseconds():s.getMilliseconds();case"Seconds":return a?s.getUTCSeconds():s.getSeconds();case"Minutes":return a?s.getUTCMinutes():s.getMinutes();case"Hours":return a?s.getUTCHours():s.getHours();case"Date":return a?s.getUTCDate():s.getDate();case"Day":return a?s.getUTCDay():s.getDay();case"Month":return a?s.getUTCMonth():s.getMonth();case"FullYear":return a?s.getUTCFullYear():s.getFullYear();default:return NaN}}function Ga(e,t,s){var a,l,n,o,r;if(!(!e.isValid()||isNaN(s))){switch(a=e._d,l=e._isUTC,t){case"Milliseconds":return void(l?a.setUTCMilliseconds(s):a.setMilliseconds(s));case"Seconds":return void(l?a.setUTCSeconds(s):a.setSeconds(s));case"Minutes":return void(l?a.setUTCMinutes(s):a.setMinutes(s));case"Hours":return void(l?a.setUTCHours(s):a.setHours(s));case"Date":return void(l?a.setUTCDate(s):a.setDate(s));case"FullYear":break;default:return}n=s,o=e.month(),r=e.date(),r=r===29&&o===1&&!_s(n)?28:r,l?a.setUTCFullYear(n,o,r):a.setFullYear(n,o,r)}}function Do(e){return e=We(e),et(this[e])?this[e]():this}function So(e,t){if(typeof e=="object"){e=Gs(e);var s=po(e),a,l=s.length;for(a=0;a<l;a++)this[s[a].unit](e[s[a].unit])}else if(e=We(e),et(this[e]))return this[e](t);return this}function Mo(e,t){return(e%t+t)%t}var Ce;Array.prototype.indexOf?Ce=Array.prototype.indexOf:Ce=function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1};function Qs(e,t){if(isNaN(e)||isNaN(t))return NaN;var s=Mo(t,12);return e+=(t-s)/12,s===1?_s(e)?29:28:31-s%7%2}ee("M",["MM",2],"Mo",function(){return this.month()+1});ee("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)});ee("MMMM",0,0,function(e){return this.localeData().months(this,e)});q("M",xe,Yt);q("MM",xe,Le);q("MMM",function(e,t){return t.monthsShortRegex(e)});q("MMMM",function(e,t){return t.monthsRegex(e)});ye(["M","MM"],function(e,t){t[lt]=ue(e)-1});ye(["MMM","MMMM"],function(e,t,s,a){var l=s._locale.monthsParse(e,a,s._strict);l!=null?t[lt]=l:re(s).invalidMonth=e});var Co="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Za="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Ja=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,To=es,Eo=es;function $o(e,t){return e?Be(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||Ja).test(t)?"format":"standalone"][e.month()]:Be(this._months)?this._months:this._months.standalone}function jo(e,t){return e?Be(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Ja.test(t)?"format":"standalone"][e.month()]:Be(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function Oo(e,t,s){var a,l,n,o=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],a=0;a<12;++a)n=Xe([2e3,a]),this._shortMonthsParse[a]=this.monthsShort(n,"").toLocaleLowerCase(),this._longMonthsParse[a]=this.months(n,"").toLocaleLowerCase();return s?t==="MMM"?(l=Ce.call(this._shortMonthsParse,o),l!==-1?l:null):(l=Ce.call(this._longMonthsParse,o),l!==-1?l:null):t==="MMM"?(l=Ce.call(this._shortMonthsParse,o),l!==-1?l:(l=Ce.call(this._longMonthsParse,o),l!==-1?l:null)):(l=Ce.call(this._longMonthsParse,o),l!==-1?l:(l=Ce.call(this._shortMonthsParse,o),l!==-1?l:null))}function Vo(e,t,s){var a,l,n;if(this._monthsParseExact)return Oo.call(this,e,t,s);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),a=0;a<12;a++){if(l=Xe([2e3,a]),s&&!this._longMonthsParse[a]&&(this._longMonthsParse[a]=new RegExp("^"+this.months(l,"").replace(".","")+"$","i"),this._shortMonthsParse[a]=new RegExp("^"+this.monthsShort(l,"").replace(".","")+"$","i")),!s&&!this._monthsParse[a]&&(n="^"+this.months(l,"")+"|^"+this.monthsShort(l,""),this._monthsParse[a]=new RegExp(n.replace(".",""),"i")),s&&t==="MMMM"&&this._longMonthsParse[a].test(e))return a;if(s&&t==="MMM"&&this._shortMonthsParse[a].test(e))return a;if(!s&&this._monthsParse[a].test(e))return a}}function Ka(e,t){if(!e.isValid())return e;if(typeof t=="string"){if(/^\d+$/.test(t))t=ue(t);else if(t=e.localeData().monthsParse(t),!dt(t))return e}var s=t,a=e.date();return a=a<29?a:Math.min(a,Qs(e.year(),s)),e._isUTC?e._d.setUTCMonth(s,a):e._d.setMonth(s,a),e}function Qa(e){return e!=null?(Ka(this,e),I.updateOffset(this,!0),this):zt(this,"Month")}function Ao(){return Qs(this.year(),this.month())}function Yo(e){return this._monthsParseExact?(ve(this,"_monthsRegex")||Xa.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(ve(this,"_monthsShortRegex")||(this._monthsShortRegex=To),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function Io(e){return this._monthsParseExact?(ve(this,"_monthsRegex")||Xa.call(this),e?this._monthsStrictRegex:this._monthsRegex):(ve(this,"_monthsRegex")||(this._monthsRegex=Eo),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function Xa(){function e(m,c){return c.length-m.length}var t=[],s=[],a=[],l,n,o,r;for(l=0;l<12;l++)n=Xe([2e3,l]),o=nt(this.monthsShort(n,"")),r=nt(this.months(n,"")),t.push(o),s.push(r),a.push(r),a.push(o);t.sort(e),s.sort(e),a.sort(e),this._monthsRegex=new RegExp("^("+a.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+t.join("|")+")","i")}function No(e,t,s,a,l,n,o){var r;return e<100&&e>=0?(r=new Date(e+400,t,s,a,l,n,o),isFinite(r.getFullYear())&&r.setFullYear(e)):r=new Date(e,t,s,a,l,n,o),r}function qt(e){var t,s;return e<100&&e>=0?(s=Array.prototype.slice.call(arguments),s[0]=e+400,t=new Date(Date.UTC.apply(null,s)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function ds(e,t,s){var a=7+t-s,l=(7+qt(e,0,a).getUTCDay()-t)%7;return-l+a-1}function el(e,t,s,a,l){var n=(7+s-a)%7,o=ds(e,a,l),r=1+7*(t-1)+n+o,m,c;return r<=0?(m=e-1,c=Ht(m)+r):r>Ht(e)?(m=e+1,c=r-Ht(e)):(m=e,c=r),{year:m,dayOfYear:c}}function Gt(e,t,s){var a=ds(e.year(),t,s),l=Math.floor((e.dayOfYear()-a-1)/7)+1,n,o;return l<1?(o=e.year()-1,n=l+ot(o,t,s)):l>ot(e.year(),t,s)?(n=l-ot(e.year(),t,s),o=e.year()+1):(o=e.year(),n=l),{week:n,year:o}}function ot(e,t,s){var a=ds(e,t,s),l=ds(e+1,t,s);return(Ht(e)-a+l)/7}ee("w",["ww",2],"wo","week");ee("W",["WW",2],"Wo","isoWeek");q("w",xe,Yt);q("ww",xe,Le);q("W",xe,Yt);q("WW",xe,Le);ts(["w","ww","W","WW"],function(e,t,s,a){t[a.substr(0,1)]=ue(e)});function Lo(e){return Gt(e,this._week.dow,this._week.doy).week}var Po={dow:0,doy:6};function Uo(){return this._week.dow}function Ro(){return this._week.doy}function Fo(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function Wo(e){var t=Gt(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}ee("d",0,"do","day");ee("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)});ee("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)});ee("dddd",0,0,function(e){return this.localeData().weekdays(this,e)});ee("e",0,0,"weekday");ee("E",0,0,"isoWeekday");q("d",xe);q("e",xe);q("E",xe);q("dd",function(e,t){return t.weekdaysMinRegex(e)});q("ddd",function(e,t){return t.weekdaysShortRegex(e)});q("dddd",function(e,t){return t.weekdaysRegex(e)});ts(["dd","ddd","dddd"],function(e,t,s,a){var l=s._locale.weekdaysParse(e,a,s._strict);l!=null?t.d=l:re(s).invalidWeekday=e});ts(["d","e","E"],function(e,t,s,a){t[a]=ue(e)});function Ho(e,t){return typeof e!="string"?e:isNaN(e)?(e=t.weekdaysParse(e),typeof e=="number"?e:null):parseInt(e,10)}function Bo(e,t){return typeof e=="string"?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function Xs(e,t){return e.slice(t,7).concat(e.slice(0,t))}var zo="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),tl="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),qo="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Go=es,Zo=es,Jo=es;function Ko(e,t){var s=Be(this._weekdays)?this._weekdays:this._weekdays[e&&e!==!0&&this._weekdays.isFormat.test(t)?"format":"standalone"];return e===!0?Xs(s,this._week.dow):e?s[e.day()]:s}function Qo(e){return e===!0?Xs(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function Xo(e){return e===!0?Xs(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function er(e,t,s){var a,l,n,o=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],a=0;a<7;++a)n=Xe([2e3,1]).day(a),this._minWeekdaysParse[a]=this.weekdaysMin(n,"").toLocaleLowerCase(),this._shortWeekdaysParse[a]=this.weekdaysShort(n,"").toLocaleLowerCase(),this._weekdaysParse[a]=this.weekdays(n,"").toLocaleLowerCase();return s?t==="dddd"?(l=Ce.call(this._weekdaysParse,o),l!==-1?l:null):t==="ddd"?(l=Ce.call(this._shortWeekdaysParse,o),l!==-1?l:null):(l=Ce.call(this._minWeekdaysParse,o),l!==-1?l:null):t==="dddd"?(l=Ce.call(this._weekdaysParse,o),l!==-1||(l=Ce.call(this._shortWeekdaysParse,o),l!==-1)?l:(l=Ce.call(this._minWeekdaysParse,o),l!==-1?l:null)):t==="ddd"?(l=Ce.call(this._shortWeekdaysParse,o),l!==-1||(l=Ce.call(this._weekdaysParse,o),l!==-1)?l:(l=Ce.call(this._minWeekdaysParse,o),l!==-1?l:null)):(l=Ce.call(this._minWeekdaysParse,o),l!==-1||(l=Ce.call(this._weekdaysParse,o),l!==-1)?l:(l=Ce.call(this._shortWeekdaysParse,o),l!==-1?l:null))}function tr(e,t,s){var a,l,n;if(this._weekdaysParseExact)return er.call(this,e,t,s);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),a=0;a<7;a++){if(l=Xe([2e3,1]).day(a),s&&!this._fullWeekdaysParse[a]&&(this._fullWeekdaysParse[a]=new RegExp("^"+this.weekdays(l,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[a]=new RegExp("^"+this.weekdaysShort(l,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[a]=new RegExp("^"+this.weekdaysMin(l,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[a]||(n="^"+this.weekdays(l,"")+"|^"+this.weekdaysShort(l,"")+"|^"+this.weekdaysMin(l,""),this._weekdaysParse[a]=new RegExp(n.replace(".",""),"i")),s&&t==="dddd"&&this._fullWeekdaysParse[a].test(e))return a;if(s&&t==="ddd"&&this._shortWeekdaysParse[a].test(e))return a;if(s&&t==="dd"&&this._minWeekdaysParse[a].test(e))return a;if(!s&&this._weekdaysParse[a].test(e))return a}}function sr(e){if(!this.isValid())return e!=null?this:NaN;var t=zt(this,"Day");return e!=null?(e=Ho(e,this.localeData()),this.add(e-t,"d")):t}function ar(e){if(!this.isValid())return e!=null?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function lr(e){if(!this.isValid())return e!=null?this:NaN;if(e!=null){var t=Bo(e,this.localeData());return this.day(this.day()%7?t:t-7)}else return this.day()||7}function ir(e){return this._weekdaysParseExact?(ve(this,"_weekdaysRegex")||ea.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(ve(this,"_weekdaysRegex")||(this._weekdaysRegex=Go),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function nr(e){return this._weekdaysParseExact?(ve(this,"_weekdaysRegex")||ea.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(ve(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Zo),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function or(e){return this._weekdaysParseExact?(ve(this,"_weekdaysRegex")||ea.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(ve(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Jo),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function ea(){function e(v,p){return p.length-v.length}var t=[],s=[],a=[],l=[],n,o,r,m,c;for(n=0;n<7;n++)o=Xe([2e3,1]).day(n),r=nt(this.weekdaysMin(o,"")),m=nt(this.weekdaysShort(o,"")),c=nt(this.weekdays(o,"")),t.push(r),s.push(m),a.push(c),l.push(r),l.push(m),l.push(c);t.sort(e),s.sort(e),a.sort(e),l.sort(e),this._weekdaysRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+t.join("|")+")","i")}function ta(){return this.hours()%12||12}function rr(){return this.hours()||24}ee("H",["HH",2],0,"hour");ee("h",["hh",2],0,ta);ee("k",["kk",2],0,rr);ee("hmm",0,0,function(){return""+ta.apply(this)+Ke(this.minutes(),2)});ee("hmmss",0,0,function(){return""+ta.apply(this)+Ke(this.minutes(),2)+Ke(this.seconds(),2)});ee("Hmm",0,0,function(){return""+this.hours()+Ke(this.minutes(),2)});ee("Hmmss",0,0,function(){return""+this.hours()+Ke(this.minutes(),2)+Ke(this.seconds(),2)});function sl(e,t){ee(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}sl("a",!0);sl("A",!1);function al(e,t){return t._meridiemParse}q("a",al);q("A",al);q("H",xe,Ks);q("h",xe,Yt);q("k",xe,Yt);q("HH",xe,Le);q("hh",xe,Le);q("kk",xe,Le);q("hmm",Ba);q("hmmss",za);q("Hmm",Ba);q("Hmmss",za);ye(["H","HH"],Ee);ye(["k","kk"],function(e,t,s){var a=ue(e);t[Ee]=a===24?0:a});ye(["a","A"],function(e,t,s){s._isPm=s._locale.isPM(e),s._meridiem=e});ye(["h","hh"],function(e,t,s){t[Ee]=ue(e),re(s).bigHour=!0});ye("hmm",function(e,t,s){var a=e.length-2;t[Ee]=ue(e.substr(0,a)),t[He]=ue(e.substr(a)),re(s).bigHour=!0});ye("hmmss",function(e,t,s){var a=e.length-4,l=e.length-2;t[Ee]=ue(e.substr(0,a)),t[He]=ue(e.substr(a,2)),t[it]=ue(e.substr(l)),re(s).bigHour=!0});ye("Hmm",function(e,t,s){var a=e.length-2;t[Ee]=ue(e.substr(0,a)),t[He]=ue(e.substr(a))});ye("Hmmss",function(e,t,s){var a=e.length-4,l=e.length-2;t[Ee]=ue(e.substr(0,a)),t[He]=ue(e.substr(a,2)),t[it]=ue(e.substr(l))});function dr(e){return(e+"").toLowerCase().charAt(0)==="p"}var ur=/[ap]\.?m?\.?/i,cr=It("Hours",!0);function mr(e,t,s){return e>11?s?"pm":"PM":s?"am":"AM"}var ll={calendar:Xn,longDateFormat:ao,invalidDate:io,ordinal:oo,dayOfMonthOrdinalParse:ro,relativeTime:co,months:Co,monthsShort:Za,week:Po,weekdays:zo,weekdaysMin:qo,weekdaysShort:tl,meridiemParse:ur},ke={},Rt={},Zt;function vr(e,t){var s,a=Math.min(e.length,t.length);for(s=0;s<a;s+=1)if(e[s]!==t[s])return s;return a}function $a(e){return e&&e.toLowerCase().replace("_","-")}function hr(e){for(var t=0,s,a,l,n;t<e.length;){for(n=$a(e[t]).split("-"),s=n.length,a=$a(e[t+1]),a=a?a.split("-"):null;s>0;){if(l=ws(n.slice(0,s).join("-")),l)return l;if(a&&a.length>=s&&vr(n,a)>=s-1)break;s--}t++}return Zt}function pr(e){return!!(e&&e.match("^[^/\\\\]*$"))}function ws(e){var t=null,s;if(ke[e]===void 0&&typeof module<"u"&&module&&module.exports&&pr(e))try{t=Zt._abbr,s=require,s("./locale/"+e),ft(t)}catch{ke[e]=null}return ke[e]}function ft(e,t){var s;return e&&(Ae(t)?s=ut(e):s=sa(e,t),s?Zt=s:typeof console<"u"&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),Zt._abbr}function sa(e,t){if(t!==null){var s,a=ll;if(t.abbr=e,ke[e]!=null)Ra("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),a=ke[e]._config;else if(t.parentLocale!=null)if(ke[t.parentLocale]!=null)a=ke[t.parentLocale]._config;else if(s=ws(t.parentLocale),s!=null)a=s._config;else return Rt[t.parentLocale]||(Rt[t.parentLocale]=[]),Rt[t.parentLocale].push({name:e,config:t}),null;return ke[e]=new zs(Is(a,t)),Rt[e]&&Rt[e].forEach(function(l){sa(l.name,l.config)}),ft(e),ke[e]}else return delete ke[e],null}function fr(e,t){if(t!=null){var s,a,l=ll;ke[e]!=null&&ke[e].parentLocale!=null?ke[e].set(Is(ke[e]._config,t)):(a=ws(e),a!=null&&(l=a._config),t=Is(l,t),a==null&&(t.abbr=e),s=new zs(t),s.parentLocale=ke[e],ke[e]=s),ft(e)}else ke[e]!=null&&(ke[e].parentLocale!=null?(ke[e]=ke[e].parentLocale,e===ft()&&ft(e)):ke[e]!=null&&delete ke[e]);return ke[e]}function ut(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Zt;if(!Be(e)){if(t=ws(e),t)return t;e=[e]}return hr(e)}function yr(){return Ns(ke)}function aa(e){var t,s=e._a;return s&&re(e).overflow===-2&&(t=s[lt]<0||s[lt]>11?lt:s[Je]<1||s[Je]>Qs(s[Oe],s[lt])?Je:s[Ee]<0||s[Ee]>24||s[Ee]===24&&(s[He]!==0||s[it]!==0||s[_t]!==0)?Ee:s[He]<0||s[He]>59?He:s[it]<0||s[it]>59?it:s[_t]<0||s[_t]>999?_t:-1,re(e)._overflowDayOfYear&&(t<Oe||t>Je)&&(t=Je),re(e)._overflowWeeks&&t===-1&&(t=bo),re(e)._overflowWeekday&&t===-1&&(t=xo),re(e).overflow=t),e}var gr=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,_r=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,wr=/Z|[+-]\d\d(?::?\d\d)?/,as=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],js=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],br=/^\/?Date\((-?\d+)/i,xr=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,kr={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function il(e){var t,s,a=e._i,l=gr.exec(a)||_r.exec(a),n,o,r,m,c=as.length,v=js.length;if(l){for(re(e).iso=!0,t=0,s=c;t<s;t++)if(as[t][1].exec(l[1])){o=as[t][0],n=as[t][2]!==!1;break}if(o==null){e._isValid=!1;return}if(l[3]){for(t=0,s=v;t<s;t++)if(js[t][1].exec(l[3])){r=(l[2]||" ")+js[t][0];break}if(r==null){e._isValid=!1;return}}if(!n&&r!=null){e._isValid=!1;return}if(l[4])if(wr.exec(l[4]))m="Z";else{e._isValid=!1;return}e._f=o+(r||"")+(m||""),ia(e)}else e._isValid=!1}function Dr(e,t,s,a,l,n){var o=[Sr(e),Za.indexOf(t),parseInt(s,10),parseInt(a,10),parseInt(l,10)];return n&&o.push(parseInt(n,10)),o}function Sr(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function Mr(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Cr(e,t,s){if(e){var a=tl.indexOf(e),l=new Date(t[0],t[1],t[2]).getDay();if(a!==l)return re(s).weekdayMismatch=!0,s._isValid=!1,!1}return!0}function Tr(e,t,s){if(e)return kr[e];if(t)return 0;var a=parseInt(s,10),l=a%100,n=(a-l)/100;return n*60+l}function nl(e){var t=xr.exec(Mr(e._i)),s;if(t){if(s=Dr(t[4],t[3],t[2],t[5],t[6],t[7]),!Cr(t[1],s,e))return;e._a=s,e._tzm=Tr(t[8],t[9],t[10]),e._d=qt.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),re(e).rfc2822=!0}else e._isValid=!1}function Er(e){var t=br.exec(e._i);if(t!==null){e._d=new Date(+t[1]);return}if(il(e),e._isValid===!1)delete e._isValid;else return;if(nl(e),e._isValid===!1)delete e._isValid;else return;e._strict?e._isValid=!1:I.createFromInputFallback(e)}I.createFromInputFallback=Fe("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});function St(e,t,s){return e??t??s}function $r(e){var t=new Date(I.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function la(e){var t,s,a=[],l,n,o;if(!e._d){for(l=$r(e),e._w&&e._a[Je]==null&&e._a[lt]==null&&jr(e),e._dayOfYear!=null&&(o=St(e._a[Oe],l[Oe]),(e._dayOfYear>Ht(o)||e._dayOfYear===0)&&(re(e)._overflowDayOfYear=!0),s=qt(o,0,e._dayOfYear),e._a[lt]=s.getUTCMonth(),e._a[Je]=s.getUTCDate()),t=0;t<3&&e._a[t]==null;++t)e._a[t]=a[t]=l[t];for(;t<7;t++)e._a[t]=a[t]=e._a[t]==null?t===2?1:0:e._a[t];e._a[Ee]===24&&e._a[He]===0&&e._a[it]===0&&e._a[_t]===0&&(e._nextDay=!0,e._a[Ee]=0),e._d=(e._useUTC?qt:No).apply(null,a),n=e._useUTC?e._d.getUTCDay():e._d.getDay(),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Ee]=24),e._w&&typeof e._w.d<"u"&&e._w.d!==n&&(re(e).weekdayMismatch=!0)}}function jr(e){var t,s,a,l,n,o,r,m,c;t=e._w,t.GG!=null||t.W!=null||t.E!=null?(n=1,o=4,s=St(t.GG,e._a[Oe],Gt(be(),1,4).year),a=St(t.W,1),l=St(t.E,1),(l<1||l>7)&&(m=!0)):(n=e._locale._week.dow,o=e._locale._week.doy,c=Gt(be(),n,o),s=St(t.gg,e._a[Oe],c.year),a=St(t.w,c.week),t.d!=null?(l=t.d,(l<0||l>6)&&(m=!0)):t.e!=null?(l=t.e+n,(t.e<0||t.e>6)&&(m=!0)):l=n),a<1||a>ot(s,n,o)?re(e)._overflowWeeks=!0:m!=null?re(e)._overflowWeekday=!0:(r=el(s,a,l,n,o),e._a[Oe]=r.year,e._dayOfYear=r.dayOfYear)}I.ISO_8601=function(){};I.RFC_2822=function(){};function ia(e){if(e._f===I.ISO_8601){il(e);return}if(e._f===I.RFC_2822){nl(e);return}e._a=[],re(e).empty=!0;var t=""+e._i,s,a,l,n,o,r=t.length,m=0,c,v;for(l=Fa(e._f,e._locale).match(qs)||[],v=l.length,s=0;s<v;s++)n=l[s],a=(t.match(go(n,e))||[])[0],a&&(o=t.substr(0,t.indexOf(a)),o.length>0&&re(e).unusedInput.push(o),t=t.slice(t.indexOf(a)+a.length),m+=a.length),Tt[n]?(a?re(e).empty=!1:re(e).unusedTokens.push(n),wo(n,a,e)):e._strict&&!a&&re(e).unusedTokens.push(n);re(e).charsLeftOver=r-m,t.length>0&&re(e).unusedInput.push(t),e._a[Ee]<=12&&re(e).bigHour===!0&&e._a[Ee]>0&&(re(e).bigHour=void 0),re(e).parsedDateParts=e._a.slice(0),re(e).meridiem=e._meridiem,e._a[Ee]=Or(e._locale,e._a[Ee],e._meridiem),c=re(e).era,c!==null&&(e._a[Oe]=e._locale.erasConvertYear(c,e._a[Oe])),la(e),aa(e)}function Or(e,t,s){var a;return s==null?t:e.meridiemHour!=null?e.meridiemHour(t,s):(e.isPM!=null&&(a=e.isPM(s),a&&t<12&&(t+=12),!a&&t===12&&(t=0)),t)}function Vr(e){var t,s,a,l,n,o,r=!1,m=e._f.length;if(m===0){re(e).invalidFormat=!0,e._d=new Date(NaN);return}for(l=0;l<m;l++)n=0,o=!1,t=Bs({},e),e._useUTC!=null&&(t._useUTC=e._useUTC),t._f=e._f[l],ia(t),Hs(t)&&(o=!0),n+=re(t).charsLeftOver,n+=re(t).unusedTokens.length*10,re(t).score=n,r?n<a&&(a=n,s=t):(a==null||n<a||o)&&(a=n,s=t,o&&(r=!0));ht(e,s||t)}function Ar(e){if(!e._d){var t=Gs(e._i),s=t.day===void 0?t.date:t.day;e._a=Pa([t.year,t.month,s,t.hour,t.minute,t.second,t.millisecond],function(a){return a&&parseInt(a,10)}),la(e)}}function Yr(e){var t=new Xt(aa(ol(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function ol(e){var t=e._i,s=e._f;return e._locale=e._locale||ut(e._l),t===null||s===void 0&&t===""?vs({nullInput:!0}):(typeof t=="string"&&(e._i=t=e._locale.preparse(t)),ze(t)?new Xt(aa(t)):(Qt(t)?e._d=t:Be(s)?Vr(e):s?ia(e):Ir(e),Hs(e)||(e._d=null),e))}function Ir(e){var t=e._i;Ae(t)?e._d=new Date(I.now()):Qt(t)?e._d=new Date(t.valueOf()):typeof t=="string"?Er(e):Be(t)?(e._a=Pa(t.slice(0),function(s){return parseInt(s,10)}),la(e)):wt(t)?Ar(e):dt(t)?e._d=new Date(t):I.createFromInputFallback(e)}function rl(e,t,s,a,l){var n={};return(t===!0||t===!1)&&(a=t,t=void 0),(s===!0||s===!1)&&(a=s,s=void 0),(wt(e)&&Ws(e)||Be(e)&&e.length===0)&&(e=void 0),n._isAMomentObject=!0,n._useUTC=n._isUTC=l,n._l=s,n._i=e,n._f=t,n._strict=a,Yr(n)}function be(e,t,s,a){return rl(e,t,s,a,!1)}var Nr=Fe("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=be.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:vs()}),Lr=Fe("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=be.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:vs()});function dl(e,t){var s,a;if(t.length===1&&Be(t[0])&&(t=t[0]),!t.length)return be();for(s=t[0],a=1;a<t.length;++a)(!t[a].isValid()||t[a][e](s))&&(s=t[a]);return s}function Pr(){var e=[].slice.call(arguments,0);return dl("isBefore",e)}function Ur(){var e=[].slice.call(arguments,0);return dl("isAfter",e)}var Rr=function(){return Date.now?Date.now():+new Date},Ft=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Fr(e){var t,s=!1,a,l=Ft.length;for(t in e)if(ve(e,t)&&!(Ce.call(Ft,t)!==-1&&(e[t]==null||!isNaN(e[t]))))return!1;for(a=0;a<l;++a)if(e[Ft[a]]){if(s)return!1;parseFloat(e[Ft[a]])!==ue(e[Ft[a]])&&(s=!0)}return!0}function Wr(){return this._isValid}function Hr(){return Ge(NaN)}function bs(e){var t=Gs(e),s=t.year||0,a=t.quarter||0,l=t.month||0,n=t.week||t.isoWeek||0,o=t.day||0,r=t.hour||0,m=t.minute||0,c=t.second||0,v=t.millisecond||0;this._isValid=Fr(t),this._milliseconds=+v+c*1e3+m*6e4+r*1e3*60*60,this._days=+o+n*7,this._months=+l+a*3+s*12,this._data={},this._locale=ut(),this._bubble()}function ns(e){return e instanceof bs}function Ps(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function Br(e,t,s){var a=Math.min(e.length,t.length),l=Math.abs(e.length-t.length),n=0,o;for(o=0;o<a;o++)ue(e[o])!==ue(t[o])&&n++;return n+l}function ul(e,t){ee(e,0,0,function(){var s=this.utcOffset(),a="+";return s<0&&(s=-s,a="-"),a+Ke(~~(s/60),2)+t+Ke(~~s%60,2)})}ul("Z",":");ul("ZZ","");q("Z",gs);q("ZZ",gs);ye(["Z","ZZ"],function(e,t,s){s._useUTC=!0,s._tzm=na(gs,e)});var zr=/([\+\-]|\d\d)/gi;function na(e,t){var s=(t||"").match(e),a,l,n;return s===null?null:(a=s[s.length-1]||[],l=(a+"").match(zr)||["-",0,0],n=+(l[1]*60)+ue(l[2]),n===0?0:l[0]==="+"?n:-n)}function oa(e,t){var s,a;return t._isUTC?(s=t.clone(),a=(ze(e)||Qt(e)?e.valueOf():be(e).valueOf())-s.valueOf(),s._d.setTime(s._d.valueOf()+a),I.updateOffset(s,!1),s):be(e).local()}function Us(e){return-Math.round(e._d.getTimezoneOffset())}I.updateOffset=function(){};function qr(e,t,s){var a=this._offset||0,l;if(!this.isValid())return e!=null?this:NaN;if(e!=null){if(typeof e=="string"){if(e=na(gs,e),e===null)return this}else Math.abs(e)<16&&!s&&(e=e*60);return!this._isUTC&&t&&(l=Us(this)),this._offset=e,this._isUTC=!0,l!=null&&this.add(l,"m"),a!==e&&(!t||this._changeInProgress?vl(this,Ge(e-a,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,I.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?a:Us(this)}function Gr(e,t){return e!=null?(typeof e!="string"&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function Zr(e){return this.utcOffset(0,e)}function Jr(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Us(this),"m")),this}function Kr(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var e=na(fo,this._i);e!=null?this.utcOffset(e):this.utcOffset(0,!0)}return this}function Qr(e){return this.isValid()?(e=e?be(e).utcOffset():0,(this.utcOffset()-e)%60===0):!1}function Xr(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function ed(){if(!Ae(this._isDSTShifted))return this._isDSTShifted;var e={},t;return Bs(e,this),e=ol(e),e._a?(t=e._isUTC?Xe(e._a):be(e._a),this._isDSTShifted=this.isValid()&&Br(e._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function td(){return this.isValid()?!this._isUTC:!1}function sd(){return this.isValid()?this._isUTC:!1}function cl(){return this.isValid()?this._isUTC&&this._offset===0:!1}var ad=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,ld=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Ge(e,t){var s=e,a=null,l,n,o;return ns(e)?s={ms:e._milliseconds,d:e._days,M:e._months}:dt(e)||!isNaN(+e)?(s={},t?s[t]=+e:s.milliseconds=+e):(a=ad.exec(e))?(l=a[1]==="-"?-1:1,s={y:0,d:ue(a[Je])*l,h:ue(a[Ee])*l,m:ue(a[He])*l,s:ue(a[it])*l,ms:ue(Ps(a[_t]*1e3))*l}):(a=ld.exec(e))?(l=a[1]==="-"?-1:1,s={y:yt(a[2],l),M:yt(a[3],l),w:yt(a[4],l),d:yt(a[5],l),h:yt(a[6],l),m:yt(a[7],l),s:yt(a[8],l)}):s==null?s={}:typeof s=="object"&&("from"in s||"to"in s)&&(o=id(be(s.from),be(s.to)),s={},s.ms=o.milliseconds,s.M=o.months),n=new bs(s),ns(e)&&ve(e,"_locale")&&(n._locale=e._locale),ns(e)&&ve(e,"_isValid")&&(n._isValid=e._isValid),n}Ge.fn=bs.prototype;Ge.invalid=Hr;function yt(e,t){var s=e&&parseFloat(e.replace(",","."));return(isNaN(s)?0:s)*t}function ja(e,t){var s={};return s.months=t.month()-e.month()+(t.year()-e.year())*12,e.clone().add(s.months,"M").isAfter(t)&&--s.months,s.milliseconds=+t-+e.clone().add(s.months,"M"),s}function id(e,t){var s;return e.isValid()&&t.isValid()?(t=oa(t,e),e.isBefore(t)?s=ja(e,t):(s=ja(t,e),s.milliseconds=-s.milliseconds,s.months=-s.months),s):{milliseconds:0,months:0}}function ml(e,t){return function(s,a){var l,n;return a!==null&&!isNaN(+a)&&(Ra(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),n=s,s=a,a=n),l=Ge(s,a),vl(this,l,e),this}}function vl(e,t,s,a){var l=t._milliseconds,n=Ps(t._days),o=Ps(t._months);e.isValid()&&(a=a??!0,o&&Ka(e,zt(e,"Month")+o*s),n&&Ga(e,"Date",zt(e,"Date")+n*s),l&&e._d.setTime(e._d.valueOf()+l*s),a&&I.updateOffset(e,n||o))}var nd=ml(1,"add"),od=ml(-1,"subtract");function hl(e){return typeof e=="string"||e instanceof String}function rd(e){return ze(e)||Qt(e)||hl(e)||dt(e)||ud(e)||dd(e)||e===null||e===void 0}function dd(e){var t=wt(e)&&!Ws(e),s=!1,a=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],l,n,o=a.length;for(l=0;l<o;l+=1)n=a[l],s=s||ve(e,n);return t&&s}function ud(e){var t=Be(e),s=!1;return t&&(s=e.filter(function(a){return!dt(a)&&hl(e)}).length===0),t&&s}function cd(e){var t=wt(e)&&!Ws(e),s=!1,a=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],l,n;for(l=0;l<a.length;l+=1)n=a[l],s=s||ve(e,n);return t&&s}function md(e,t){var s=e.diff(t,"days",!0);return s<-6?"sameElse":s<-1?"lastWeek":s<0?"lastDay":s<1?"sameDay":s<2?"nextDay":s<7?"nextWeek":"sameElse"}function vd(e,t){arguments.length===1&&(arguments[0]?rd(arguments[0])?(e=arguments[0],t=void 0):cd(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var s=e||be(),a=oa(s,this).startOf("day"),l=I.calendarFormat(this,a)||"sameElse",n=t&&(et(t[l])?t[l].call(this,s):t[l]);return this.format(n||this.localeData().calendar(l,this,be(s)))}function hd(){return new Xt(this)}function pd(e,t){var s=ze(e)?e:be(e);return this.isValid()&&s.isValid()?(t=We(t)||"millisecond",t==="millisecond"?this.valueOf()>s.valueOf():s.valueOf()<this.clone().startOf(t).valueOf()):!1}function fd(e,t){var s=ze(e)?e:be(e);return this.isValid()&&s.isValid()?(t=We(t)||"millisecond",t==="millisecond"?this.valueOf()<s.valueOf():this.clone().endOf(t).valueOf()<s.valueOf()):!1}function yd(e,t,s,a){var l=ze(e)?e:be(e),n=ze(t)?t:be(t);return this.isValid()&&l.isValid()&&n.isValid()?(a=a||"()",(a[0]==="("?this.isAfter(l,s):!this.isBefore(l,s))&&(a[1]===")"?this.isBefore(n,s):!this.isAfter(n,s))):!1}function gd(e,t){var s=ze(e)?e:be(e),a;return this.isValid()&&s.isValid()?(t=We(t)||"millisecond",t==="millisecond"?this.valueOf()===s.valueOf():(a=s.valueOf(),this.clone().startOf(t).valueOf()<=a&&a<=this.clone().endOf(t).valueOf())):!1}function _d(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function wd(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function bd(e,t,s){var a,l,n;if(!this.isValid())return NaN;if(a=oa(e,this),!a.isValid())return NaN;switch(l=(a.utcOffset()-this.utcOffset())*6e4,t=We(t),t){case"year":n=os(this,a)/12;break;case"month":n=os(this,a);break;case"quarter":n=os(this,a)/3;break;case"second":n=(this-a)/1e3;break;case"minute":n=(this-a)/6e4;break;case"hour":n=(this-a)/36e5;break;case"day":n=(this-a-l)/864e5;break;case"week":n=(this-a-l)/6048e5;break;default:n=this-a}return s?n:Re(n)}function os(e,t){if(e.date()<t.date())return-os(t,e);var s=(t.year()-e.year())*12+(t.month()-e.month()),a=e.clone().add(s,"months"),l,n;return t-a<0?(l=e.clone().add(s-1,"months"),n=(t-a)/(a-l)):(l=e.clone().add(s+1,"months"),n=(t-a)/(l-a)),-(s+n)||0}I.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";I.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function xd(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function kd(e){if(!this.isValid())return null;var t=e!==!0,s=t?this.clone().utc():this;return s.year()<0||s.year()>9999?is(s,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):et(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",is(s,"Z")):is(s,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function Dd(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="",s,a,l,n;return this.isLocal()||(e=this.utcOffset()===0?"moment.utc":"moment.parseZone",t="Z"),s="["+e+'("]',a=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",l="-MM-DD[T]HH:mm:ss.SSS",n=t+'[")]',this.format(s+a+l+n)}function Sd(e){e||(e=this.isUtc()?I.defaultFormatUtc:I.defaultFormat);var t=is(this,e);return this.localeData().postformat(t)}function Md(e,t){return this.isValid()&&(ze(e)&&e.isValid()||be(e).isValid())?Ge({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function Cd(e){return this.from(be(),e)}function Td(e,t){return this.isValid()&&(ze(e)&&e.isValid()||be(e).isValid())?Ge({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function Ed(e){return this.to(be(),e)}function pl(e){var t;return e===void 0?this._locale._abbr:(t=ut(e),t!=null&&(this._locale=t),this)}var fl=Fe("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===void 0?this.localeData():this.locale(e)});function yl(){return this._locale}var us=1e3,Et=60*us,cs=60*Et,gl=(365*400+97)*24*cs;function $t(e,t){return(e%t+t)%t}function _l(e,t,s){return e<100&&e>=0?new Date(e+400,t,s)-gl:new Date(e,t,s).valueOf()}function wl(e,t,s){return e<100&&e>=0?Date.UTC(e+400,t,s)-gl:Date.UTC(e,t,s)}function $d(e){var t,s;if(e=We(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(s=this._isUTC?wl:_l,e){case"year":t=s(this.year(),0,1);break;case"quarter":t=s(this.year(),this.month()-this.month()%3,1);break;case"month":t=s(this.year(),this.month(),1);break;case"week":t=s(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=s(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=s(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=$t(t+(this._isUTC?0:this.utcOffset()*Et),cs);break;case"minute":t=this._d.valueOf(),t-=$t(t,Et);break;case"second":t=this._d.valueOf(),t-=$t(t,us);break}return this._d.setTime(t),I.updateOffset(this,!0),this}function jd(e){var t,s;if(e=We(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(s=this._isUTC?wl:_l,e){case"year":t=s(this.year()+1,0,1)-1;break;case"quarter":t=s(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=s(this.year(),this.month()+1,1)-1;break;case"week":t=s(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=s(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=s(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=cs-$t(t+(this._isUTC?0:this.utcOffset()*Et),cs)-1;break;case"minute":t=this._d.valueOf(),t+=Et-$t(t,Et)-1;break;case"second":t=this._d.valueOf(),t+=us-$t(t,us)-1;break}return this._d.setTime(t),I.updateOffset(this,!0),this}function Od(){return this._d.valueOf()-(this._offset||0)*6e4}function Vd(){return Math.floor(this.valueOf()/1e3)}function Ad(){return new Date(this.valueOf())}function Yd(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function Id(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function Nd(){return this.isValid()?this.toISOString():null}function Ld(){return Hs(this)}function Pd(){return ht({},re(this))}function Ud(){return re(this).overflow}function Rd(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}ee("N",0,0,"eraAbbr");ee("NN",0,0,"eraAbbr");ee("NNN",0,0,"eraAbbr");ee("NNNN",0,0,"eraName");ee("NNNNN",0,0,"eraNarrow");ee("y",["y",1],"yo","eraYear");ee("y",["yy",2],0,"eraYear");ee("y",["yyy",3],0,"eraYear");ee("y",["yyyy",4],0,"eraYear");q("N",ra);q("NN",ra);q("NNN",ra);q("NNNN",Qd);q("NNNNN",Xd);ye(["N","NN","NNN","NNNN","NNNNN"],function(e,t,s,a){var l=s._locale.erasParse(e,a,s._strict);l?re(s).era=l:re(s).invalidEra=e});q("y",At);q("yy",At);q("yyy",At);q("yyyy",At);q("yo",eu);ye(["y","yy","yyy","yyyy"],Oe);ye(["yo"],function(e,t,s,a){var l;s._locale._eraYearOrdinalRegex&&(l=e.match(s._locale._eraYearOrdinalRegex)),s._locale.eraYearOrdinalParse?t[Oe]=s._locale.eraYearOrdinalParse(e,l):t[Oe]=parseInt(e,10)});function Fd(e,t){var s,a,l,n=this._eras||ut("en")._eras;for(s=0,a=n.length;s<a;++s){switch(typeof n[s].since){case"string":l=I(n[s].since).startOf("day"),n[s].since=l.valueOf();break}switch(typeof n[s].until){case"undefined":n[s].until=1/0;break;case"string":l=I(n[s].until).startOf("day").valueOf(),n[s].until=l.valueOf();break}}return n}function Wd(e,t,s){var a,l,n=this.eras(),o,r,m;for(e=e.toUpperCase(),a=0,l=n.length;a<l;++a)if(o=n[a].name.toUpperCase(),r=n[a].abbr.toUpperCase(),m=n[a].narrow.toUpperCase(),s)switch(t){case"N":case"NN":case"NNN":if(r===e)return n[a];break;case"NNNN":if(o===e)return n[a];break;case"NNNNN":if(m===e)return n[a];break}else if([o,r,m].indexOf(e)>=0)return n[a]}function Hd(e,t){var s=e.since<=e.until?1:-1;return t===void 0?I(e.since).year():I(e.since).year()+(t-e.offset)*s}function Bd(){var e,t,s,a=this.localeData().eras();for(e=0,t=a.length;e<t;++e)if(s=this.clone().startOf("day").valueOf(),a[e].since<=s&&s<=a[e].until||a[e].until<=s&&s<=a[e].since)return a[e].name;return""}function zd(){var e,t,s,a=this.localeData().eras();for(e=0,t=a.length;e<t;++e)if(s=this.clone().startOf("day").valueOf(),a[e].since<=s&&s<=a[e].until||a[e].until<=s&&s<=a[e].since)return a[e].narrow;return""}function qd(){var e,t,s,a=this.localeData().eras();for(e=0,t=a.length;e<t;++e)if(s=this.clone().startOf("day").valueOf(),a[e].since<=s&&s<=a[e].until||a[e].until<=s&&s<=a[e].since)return a[e].abbr;return""}function Gd(){var e,t,s,a,l=this.localeData().eras();for(e=0,t=l.length;e<t;++e)if(s=l[e].since<=l[e].until?1:-1,a=this.clone().startOf("day").valueOf(),l[e].since<=a&&a<=l[e].until||l[e].until<=a&&a<=l[e].since)return(this.year()-I(l[e].since).year())*s+l[e].offset;return this.year()}function Zd(e){return ve(this,"_erasNameRegex")||da.call(this),e?this._erasNameRegex:this._erasRegex}function Jd(e){return ve(this,"_erasAbbrRegex")||da.call(this),e?this._erasAbbrRegex:this._erasRegex}function Kd(e){return ve(this,"_erasNarrowRegex")||da.call(this),e?this._erasNarrowRegex:this._erasRegex}function ra(e,t){return t.erasAbbrRegex(e)}function Qd(e,t){return t.erasNameRegex(e)}function Xd(e,t){return t.erasNarrowRegex(e)}function eu(e,t){return t._eraYearOrdinalRegex||At}function da(){var e=[],t=[],s=[],a=[],l,n,o,r,m,c=this.eras();for(l=0,n=c.length;l<n;++l)o=nt(c[l].name),r=nt(c[l].abbr),m=nt(c[l].narrow),t.push(o),e.push(r),s.push(m),a.push(o),a.push(r),a.push(m);this._erasRegex=new RegExp("^("+a.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+t.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+s.join("|")+")","i")}ee(0,["gg",2],0,function(){return this.weekYear()%100});ee(0,["GG",2],0,function(){return this.isoWeekYear()%100});function xs(e,t){ee(0,[e,e.length],0,t)}xs("gggg","weekYear");xs("ggggg","weekYear");xs("GGGG","isoWeekYear");xs("GGGGG","isoWeekYear");q("G",ys);q("g",ys);q("GG",xe,Le);q("gg",xe,Le);q("GGGG",Js,Zs);q("gggg",Js,Zs);q("GGGGG",fs,hs);q("ggggg",fs,hs);ts(["gggg","ggggg","GGGG","GGGGG"],function(e,t,s,a){t[a.substr(0,2)]=ue(e)});ts(["gg","GG"],function(e,t,s,a){t[a]=I.parseTwoDigitYear(e)});function tu(e){return bl.call(this,e,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function su(e){return bl.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function au(){return ot(this.year(),1,4)}function lu(){return ot(this.isoWeekYear(),1,4)}function iu(){var e=this.localeData()._week;return ot(this.year(),e.dow,e.doy)}function nu(){var e=this.localeData()._week;return ot(this.weekYear(),e.dow,e.doy)}function bl(e,t,s,a,l){var n;return e==null?Gt(this,a,l).year:(n=ot(e,a,l),t>n&&(t=n),ou.call(this,e,t,s,a,l))}function ou(e,t,s,a,l){var n=el(e,t,s,a,l),o=qt(n.year,0,n.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}ee("Q",0,"Qo","quarter");q("Q",Wa);ye("Q",function(e,t){t[lt]=(ue(e)-1)*3});function ru(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}ee("D",["DD",2],"Do","date");q("D",xe,Yt);q("DD",xe,Le);q("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient});ye(["D","DD"],Je);ye("Do",function(e,t){t[Je]=ue(e.match(xe)[0])});var xl=It("Date",!0);ee("DDD",["DDDD",3],"DDDo","dayOfYear");q("DDD",ps);q("DDDD",Ha);ye(["DDD","DDDD"],function(e,t,s){s._dayOfYear=ue(e)});function du(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}ee("m",["mm",2],0,"minute");q("m",xe,Ks);q("mm",xe,Le);ye(["m","mm"],He);var uu=It("Minutes",!1);ee("s",["ss",2],0,"second");q("s",xe,Ks);q("ss",xe,Le);ye(["s","ss"],it);var cu=It("Seconds",!1);ee("S",0,0,function(){return~~(this.millisecond()/100)});ee(0,["SS",2],0,function(){return~~(this.millisecond()/10)});ee(0,["SSS",3],0,"millisecond");ee(0,["SSSS",4],0,function(){return this.millisecond()*10});ee(0,["SSSSS",5],0,function(){return this.millisecond()*100});ee(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});ee(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});ee(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});ee(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});q("S",ps,Wa);q("SS",ps,Le);q("SSS",ps,Ha);var pt,kl;for(pt="SSSS";pt.length<=9;pt+="S")q(pt,At);function mu(e,t){t[_t]=ue(("0."+e)*1e3)}for(pt="S";pt.length<=9;pt+="S")ye(pt,mu);kl=It("Milliseconds",!1);ee("z",0,0,"zoneAbbr");ee("zz",0,0,"zoneName");function vu(){return this._isUTC?"UTC":""}function hu(){return this._isUTC?"Coordinated Universal Time":""}var P=Xt.prototype;P.add=nd;P.calendar=vd;P.clone=hd;P.diff=bd;P.endOf=jd;P.format=Sd;P.from=Md;P.fromNow=Cd;P.to=Td;P.toNow=Ed;P.get=Do;P.invalidAt=Ud;P.isAfter=pd;P.isBefore=fd;P.isBetween=yd;P.isSame=gd;P.isSameOrAfter=_d;P.isSameOrBefore=wd;P.isValid=Ld;P.lang=fl;P.locale=pl;P.localeData=yl;P.max=Lr;P.min=Nr;P.parsingFlags=Pd;P.set=So;P.startOf=$d;P.subtract=od;P.toArray=Yd;P.toObject=Id;P.toDate=Ad;P.toISOString=kd;P.inspect=Dd;typeof Symbol<"u"&&Symbol.for!=null&&(P[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});P.toJSON=Nd;P.toString=xd;P.unix=Vd;P.valueOf=Od;P.creationData=Rd;P.eraName=Bd;P.eraNarrow=zd;P.eraAbbr=qd;P.eraYear=Gd;P.year=qa;P.isLeapYear=ko;P.weekYear=tu;P.isoWeekYear=su;P.quarter=P.quarters=ru;P.month=Qa;P.daysInMonth=Ao;P.week=P.weeks=Fo;P.isoWeek=P.isoWeeks=Wo;P.weeksInYear=iu;P.weeksInWeekYear=nu;P.isoWeeksInYear=au;P.isoWeeksInISOWeekYear=lu;P.date=xl;P.day=P.days=sr;P.weekday=ar;P.isoWeekday=lr;P.dayOfYear=du;P.hour=P.hours=cr;P.minute=P.minutes=uu;P.second=P.seconds=cu;P.millisecond=P.milliseconds=kl;P.utcOffset=qr;P.utc=Zr;P.local=Jr;P.parseZone=Kr;P.hasAlignedHourOffset=Qr;P.isDST=Xr;P.isLocal=td;P.isUtcOffset=sd;P.isUtc=cl;P.isUTC=cl;P.zoneAbbr=vu;P.zoneName=hu;P.dates=Fe("dates accessor is deprecated. Use date instead.",xl);P.months=Fe("months accessor is deprecated. Use month instead",Qa);P.years=Fe("years accessor is deprecated. Use year instead",qa);P.zone=Fe("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Gr);P.isDSTShifted=Fe("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",ed);function pu(e){return be(e*1e3)}function fu(){return be.apply(null,arguments).parseZone()}function Dl(e){return e}var he=zs.prototype;he.calendar=eo;he.longDateFormat=lo;he.invalidDate=no;he.ordinal=uo;he.preparse=Dl;he.postformat=Dl;he.relativeTime=mo;he.pastFuture=vo;he.set=Qn;he.eras=Fd;he.erasParse=Wd;he.erasConvertYear=Hd;he.erasAbbrRegex=Jd;he.erasNameRegex=Zd;he.erasNarrowRegex=Kd;he.months=$o;he.monthsShort=jo;he.monthsParse=Vo;he.monthsRegex=Io;he.monthsShortRegex=Yo;he.week=Lo;he.firstDayOfYear=Ro;he.firstDayOfWeek=Uo;he.weekdays=Ko;he.weekdaysMin=Xo;he.weekdaysShort=Qo;he.weekdaysParse=tr;he.weekdaysRegex=ir;he.weekdaysShortRegex=nr;he.weekdaysMinRegex=or;he.isPM=dr;he.meridiem=mr;function ms(e,t,s,a){var l=ut(),n=Xe().set(a,t);return l[s](n,e)}function Sl(e,t,s){if(dt(e)&&(t=e,e=void 0),e=e||"",t!=null)return ms(e,t,s,"month");var a,l=[];for(a=0;a<12;a++)l[a]=ms(e,a,s,"month");return l}function ua(e,t,s,a){typeof e=="boolean"?(dt(t)&&(s=t,t=void 0),t=t||""):(t=e,s=t,e=!1,dt(t)&&(s=t,t=void 0),t=t||"");var l=ut(),n=e?l._week.dow:0,o,r=[];if(s!=null)return ms(t,(s+n)%7,a,"day");for(o=0;o<7;o++)r[o]=ms(t,(o+n)%7,a,"day");return r}function yu(e,t){return Sl(e,t,"months")}function gu(e,t){return Sl(e,t,"monthsShort")}function _u(e,t,s){return ua(e,t,s,"weekdays")}function wu(e,t,s){return ua(e,t,s,"weekdaysShort")}function bu(e,t,s){return ua(e,t,s,"weekdaysMin")}ft("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,s=ue(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+s}});I.lang=Fe("moment.lang is deprecated. Use moment.locale instead.",ft);I.langData=Fe("moment.langData is deprecated. Use moment.localeData instead.",ut);var tt=Math.abs;function xu(){var e=this._data;return this._milliseconds=tt(this._milliseconds),this._days=tt(this._days),this._months=tt(this._months),e.milliseconds=tt(e.milliseconds),e.seconds=tt(e.seconds),e.minutes=tt(e.minutes),e.hours=tt(e.hours),e.months=tt(e.months),e.years=tt(e.years),this}function Ml(e,t,s,a){var l=Ge(t,s);return e._milliseconds+=a*l._milliseconds,e._days+=a*l._days,e._months+=a*l._months,e._bubble()}function ku(e,t){return Ml(this,e,t,1)}function Du(e,t){return Ml(this,e,t,-1)}function Oa(e){return e<0?Math.floor(e):Math.ceil(e)}function Su(){var e=this._milliseconds,t=this._days,s=this._months,a=this._data,l,n,o,r,m;return e>=0&&t>=0&&s>=0||e<=0&&t<=0&&s<=0||(e+=Oa(Rs(s)+t)*864e5,t=0,s=0),a.milliseconds=e%1e3,l=Re(e/1e3),a.seconds=l%60,n=Re(l/60),a.minutes=n%60,o=Re(n/60),a.hours=o%24,t+=Re(o/24),m=Re(Cl(t)),s+=m,t-=Oa(Rs(m)),r=Re(s/12),s%=12,a.days=t,a.months=s,a.years=r,this}function Cl(e){return e*4800/146097}function Rs(e){return e*146097/4800}function Mu(e){if(!this.isValid())return NaN;var t,s,a=this._milliseconds;if(e=We(e),e==="month"||e==="quarter"||e==="year")switch(t=this._days+a/864e5,s=this._months+Cl(t),e){case"month":return s;case"quarter":return s/3;case"year":return s/12}else switch(t=this._days+Math.round(Rs(this._months)),e){case"week":return t/7+a/6048e5;case"day":return t+a/864e5;case"hour":return t*24+a/36e5;case"minute":return t*1440+a/6e4;case"second":return t*86400+a/1e3;case"millisecond":return Math.floor(t*864e5)+a;default:throw new Error("Unknown unit "+e)}}function ct(e){return function(){return this.as(e)}}var Tl=ct("ms"),Cu=ct("s"),Tu=ct("m"),Eu=ct("h"),$u=ct("d"),ju=ct("w"),Ou=ct("M"),Vu=ct("Q"),Au=ct("y"),Yu=Tl;function Iu(){return Ge(this)}function Nu(e){return e=We(e),this.isValid()?this[e+"s"]():NaN}function bt(e){return function(){return this.isValid()?this._data[e]:NaN}}var Lu=bt("milliseconds"),Pu=bt("seconds"),Uu=bt("minutes"),Ru=bt("hours"),Fu=bt("days"),Wu=bt("months"),Hu=bt("years");function Bu(){return Re(this.days()/7)}var st=Math.round,Mt={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function zu(e,t,s,a,l){return l.relativeTime(t||1,!!s,e,a)}function qu(e,t,s,a){var l=Ge(e).abs(),n=st(l.as("s")),o=st(l.as("m")),r=st(l.as("h")),m=st(l.as("d")),c=st(l.as("M")),v=st(l.as("w")),p=st(l.as("y")),g=n<=s.ss&&["s",n]||n<s.s&&["ss",n]||o<=1&&["m"]||o<s.m&&["mm",o]||r<=1&&["h"]||r<s.h&&["hh",r]||m<=1&&["d"]||m<s.d&&["dd",m];return s.w!=null&&(g=g||v<=1&&["w"]||v<s.w&&["ww",v]),g=g||c<=1&&["M"]||c<s.M&&["MM",c]||p<=1&&["y"]||["yy",p],g[2]=t,g[3]=+e>0,g[4]=a,zu.apply(null,g)}function Gu(e){return e===void 0?st:typeof e=="function"?(st=e,!0):!1}function Zu(e,t){return Mt[e]===void 0?!1:t===void 0?Mt[e]:(Mt[e]=t,e==="s"&&(Mt.ss=t-1),!0)}function Ju(e,t){if(!this.isValid())return this.localeData().invalidDate();var s=!1,a=Mt,l,n;return typeof e=="object"&&(t=e,e=!1),typeof e=="boolean"&&(s=e),typeof t=="object"&&(a=Object.assign({},Mt,t),t.s!=null&&t.ss==null&&(a.ss=t.s-1)),l=this.localeData(),n=qu(this,!s,a,l),s&&(n=l.pastFuture(+this,n)),l.postformat(n)}var Os=Math.abs;function Dt(e){return(e>0)-(e<0)||+e}function ks(){if(!this.isValid())return this.localeData().invalidDate();var e=Os(this._milliseconds)/1e3,t=Os(this._days),s=Os(this._months),a,l,n,o,r=this.asSeconds(),m,c,v,p;return r?(a=Re(e/60),l=Re(a/60),e%=60,a%=60,n=Re(s/12),s%=12,o=e?e.toFixed(3).replace(/\.?0+$/,""):"",m=r<0?"-":"",c=Dt(this._months)!==Dt(r)?"-":"",v=Dt(this._days)!==Dt(r)?"-":"",p=Dt(this._milliseconds)!==Dt(r)?"-":"",m+"P"+(n?c+n+"Y":"")+(s?c+s+"M":"")+(t?v+t+"D":"")+(l||a||e?"T":"")+(l?p+l+"H":"")+(a?p+a+"M":"")+(e?p+o+"S":"")):"P0D"}var ce=bs.prototype;ce.isValid=Wr;ce.abs=xu;ce.add=ku;ce.subtract=Du;ce.as=Mu;ce.asMilliseconds=Tl;ce.asSeconds=Cu;ce.asMinutes=Tu;ce.asHours=Eu;ce.asDays=$u;ce.asWeeks=ju;ce.asMonths=Ou;ce.asQuarters=Vu;ce.asYears=Au;ce.valueOf=Yu;ce._bubble=Su;ce.clone=Iu;ce.get=Nu;ce.milliseconds=Lu;ce.seconds=Pu;ce.minutes=Uu;ce.hours=Ru;ce.days=Fu;ce.weeks=Bu;ce.months=Wu;ce.years=Hu;ce.humanize=Ju;ce.toISOString=ks;ce.toString=ks;ce.toJSON=ks;ce.locale=pl;ce.localeData=yl;ce.toIsoString=Fe("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",ks);ce.lang=fl;ee("X",0,0,"unix");ee("x",0,0,"valueOf");q("x",ys);q("X",yo);ye("X",function(e,t,s){s._d=new Date(parseFloat(e)*1e3)});ye("x",function(e,t,s){s._d=new Date(ue(e))});//! moment.js
I.version="2.30.1";Jn(be);I.fn=P;I.min=Pr;I.max=Ur;I.now=Rr;I.utc=Xe;I.unix=pu;I.months=yu;I.isDate=Qt;I.locale=ft;I.invalid=vs;I.duration=Ge;I.isMoment=ze;I.weekdays=_u;I.parseZone=fu;I.localeData=ut;I.isDuration=ns;I.monthsShort=gu;I.weekdaysMin=bu;I.defineLocale=sa;I.updateLocale=fr;I.locales=yr;I.weekdaysShort=wu;I.normalizeUnits=We;I.relativeTimeRounding=Gu;I.relativeTimeThreshold=Zu;I.calendarFormat=md;I.prototype=P;I.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};const Ku={class:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow"},Qu={class:"flex justify-between items-center mb-4"},Xu={class:"flex gap-3"},ec={class:"flex rounded-md shadow-sm mr-3"},tc={key:0,class:"mb-4 bg-gray-50 p-4 rounded-lg"},sc={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},ac=["value"],lc={class:"mt-1 relative rounded-md shadow-sm"},ic={key:1,class:"text-center text-gray-600 text-sm animate-pulse py-4"},nc={key:2,class:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md"},oc={key:3},rc={key:0,class:"space-y-4"},dc={key:0,class:"flex justify-between"},uc={class:"flex-grow"},cc={class:"text-sm text-red-500 italic"},mc={class:"flex items-center mt-1"},vc={class:"text-xs text-gray-500"},hc={key:1},pc={class:"flex-grow"},fc={class:"flex justify-between items-center mb-3"},yc={class:"text-sm text-gray-600 bg-blue-100 px-2 py-1 rounded-full"},gc={class:"mb-3"},_c={class:"text-sm text-gray-700 ml-6"},wc={class:"mb-3"},bc={class:"text-sm text-gray-700 ml-6"},xc={class:"mb-2"},kc={class:"text-sm text-gray-700 ml-6"},Dc={class:"flex items-center mt-3 pt-2 border-t border-blue-200"},Sc={class:"text-xs text-gray-500"},Mc={key:1,class:"text-gray-400 text-sm"},Cc={key:4,class:"mt-4"},Tc={class:"flex justify-between items-center mb-6"},Ec={class:"text-lg font-medium text-gray-900"},$c=["innerHTML"],jc=["innerHTML"],Oc={key:0,class:"mt-1 text-xs p-1 rounded bg-red-50 border-l-2 border-red-500 text-red-700"},Vc={class:"mt-6 bg-white rounded-lg shadow p-4"},Ac={key:0},Yc={class:"font-medium text-gray-800 mb-2"},Ic={class:"font-medium text-blue-800"},Nc={class:"text-sm text-gray-600 mt-1"},Lc={key:1,class:"text-gray-500 text-sm"},Pc={__name:"DailyStandups",props:{projectId:{type:Number,required:!0},users:{type:Array,default:()=>[]}},emits:["standupAdded"],setup(e,{emit:t}){const s=e,a=b("list"),l=b(!1),n=b(!1),o=b(""),r=b([]),m=b(""),c=Ne({startDate:"",endDate:"",search:"",userId:""}),v=O=>{const E=I(O);return E.isValid()?{start:E.clone().startOf("month").format("YYYY-MM-DD"),end:E.clone().endOf("month").format("YYYY-MM-DD")}:(console.warn("getMonthRange received an invalid input, defaulting to current date:",O),{start:I().startOf("month").format("YYYY-MM-DD"),end:I().endOf("month").format("YYYY-MM-DD")})};let p=null;const g=()=>{clearTimeout(p),p=setTimeout(()=>{x()},500)},D=async()=>{n.value=!0,o.value="";try{const O=new URLSearchParams;c.startDate&&O.append("start_date",c.startDate),c.endDate&&O.append("end_date",c.endDate),c.search&&O.append("search",c.search),c.userId&&O.append("user_id",String(c.userId));const E=O.toString(),V=`/api/projects/${s.projectId}/sections/notes?type=standup${E?`&${E}`:""}`,F=await window.axios.get(V);r.value=F.data.filter(te=>te.type==="standup")}catch(O){console.error("Error fetching project standups:",O),o.value="Failed to load standups. Please try again."}finally{n.value=!1}},x=()=>{D()},M=()=>{c.search="",c.userId="",c.startDate="",c.endDate="",D()},_=()=>{m.value=I(m.value).subtract(1,"month").format("YYYY-MM-DD")},y=()=>{m.value=I(m.value).add(1,"month").format("YYYY-MM-DD")};pe(()=>m.value,O=>{if(a.value==="calendar"&&O){const E=v(O);c.startDate=E.start,c.endDate=E.end,D()}}),pe(()=>a.value,O=>{O==="calendar"?(c.search="",c.userId="",m.value=v(new Date).start):(c.startDate="",c.endDate="",D())});const j=U(()=>(r.value||[]).map(O=>{var F;if(!(O!=null&&O.created_at))return null;const E=I(O.created_at);if(!E.isValid())return null;const V=N(O.content);return{start:E.format("YYYY-MM-DD HH:mm"),end:E.format("YYYY-MM-DD HH:mm"),title:`${((F=O.user)==null?void 0:F.name)||"Unknown"} - Standup`,content:`Yesterday: ${V.yesterday}
Today: ${V.today}
Blockers: ${V.blockers}`,class:"standup-event",standupData:O}}).filter(Boolean));Ye(()=>{D()});const $=U(()=>{if(!r.value)return[];let O=[...r.value];if(c.startDate&&(O=O.filter(E=>E.created_at&&I(E.created_at).isSameOrAfter(c.startDate,"day"))),c.endDate&&(O=O.filter(E=>E.created_at&&I(E.created_at).isSameOrBefore(c.endDate,"day"))),c.userId&&(O=O.filter(E=>E.user_id===parseInt(c.userId))),c.search){const E=c.search.toLowerCase();O=O.filter(V=>V.content&&V.content!=="[Encrypted content could not be decrypted]"&&V.content.toLowerCase().includes(E))}return O.sort((E,V)=>I(V.created_at).valueOf()-I(E.created_at).valueOf())}),S=O=>{const E=I(O).day();return E>=1&&E<=5},R=O=>I(O).isBefore(I(),"day"),Q=(O,E)=>I(O).isSame(E,"day"),N=O=>{var Y,w,C,T;if(!O||typeof O!="string"||O==="[Encrypted content could not be decrypted]"||O.trim()==="")return{yesterday:"N/A",today:"N/A",blockers:"N/A",date:"N/A"};const E=((Y=O.match(/\*\*Yesterday:\*\* ([^\n]+)/))==null?void 0:Y[1].trim())||"Nothing",V=((w=O.match(/\*\*Today:\*\* ([^\n]+)/))==null?void 0:w[1].trim())||"Nothing",F=((C=O.match(/\*\*Blockers:\*\* ([^\n]+)/))==null?void 0:C[1].trim())||"None",te=((T=O.match(/\*\*Daily Standup - ([^*]+)\*\*/))==null?void 0:T[1].trim())||I().format("L");return{yesterday:E,today:V,blockers:F,date:te}},A=U(()=>{const O={};return(r.value||[]).forEach(E=>{if(!(E!=null&&E.created_at))return;const V=I(E.created_at).format("YYYY-MM-DD");O[V]||(O[V]=[]),O[V].push(E)}),O});return(O,E)=>(d(),u("div",Ku,[i("div",Qu,[E[11]||(E[11]=i("h4",{class:"text-lg font-semibold text-gray-900"},"Daily Standups",-1)),i("div",Xu,[i("div",ec,[i("button",{type:"button",onClick:E[0]||(E[0]=V=>a.value="list"),class:ae([a.value==="list"?"bg-indigo-100 text-indigo-700":"bg-white text-gray-700 hover:text-gray-500","px-4 py-2 text-sm font-medium rounded-l-md border border-gray-300 focus:z-10 focus:outline-none focus:ring-1 focus:ring-indigo-500"])},E[8]||(E[8]=[i("span",{class:"flex items-center"},[i("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 10h16M4 14h16M4 18h16"})]),W(" List ")],-1)]),2),i("button",{type:"button",onClick:E[1]||(E[1]=V=>a.value="calendar"),class:ae([a.value==="calendar"?"bg-indigo-100 text-indigo-700":"bg-white text-gray-700 hover:text-gray-500","px-4 py-2 text-sm font-medium rounded-r-md border border-gray-300 focus:z-10 focus:outline-none focus:ring-1 focus:ring-indigo-500"])},E[9]||(E[9]=[i("span",{class:"flex items-center"},[i("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})]),W(" Calendar ")],-1)]),2)]),h(_e,{class:"bg-blue-600 hover:bg-blue-700 transition-colors",onClick:E[2]||(E[2]=V=>l.value=!0)},{default:L(()=>E[10]||(E[10]=[W(" Submit Standup ",-1)])),_:1,__:[10]})])]),a.value==="list"?(d(),u("div",tc,[i("div",sc,[i("div",null,[E[12]||(E[12]=i("label",{for:"standupStartDate",class:"block text-sm font-medium text-gray-700 mb-1"},"From Date",-1)),we(i("input",{type:"date",id:"standupStartDate","onUpdate:modelValue":E[3]||(E[3]=V=>c.startDate=V),class:"mt-1 block w-full border-gray-300 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",onChange:x},null,544),[[Ve,c.startDate]])]),i("div",null,[E[13]||(E[13]=i("label",{for:"standupEndDate",class:"block text-sm font-medium text-gray-700 mb-1"},"To Date",-1)),we(i("input",{type:"date",id:"standupEndDate","onUpdate:modelValue":E[4]||(E[4]=V=>c.endDate=V),class:"mt-1 block w-full border-gray-300 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",onChange:x},null,544),[[Ve,c.endDate]])]),i("div",null,[E[15]||(E[15]=i("label",{for:"standupUserFilter",class:"block text-sm font-medium text-gray-700 mb-1"},"User",-1)),we(i("select",{id:"standupUserFilter","onUpdate:modelValue":E[5]||(E[5]=V=>c.userId=V),class:"mt-1 block w-full border-gray-300 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",onChange:x},[E[14]||(E[14]=i("option",{value:""},"All Users",-1)),(d(!0),u(X,null,le(s.users,V=>(d(),u("option",{key:V.id,value:V.id},f(V.name),9,ac))),128))],544),[[Kt,c.userId]])]),i("div",null,[E[17]||(E[17]=i("label",{for:"standupSearchFilter",class:"block text-sm font-medium text-gray-700 mb-1"},"Search Content",-1)),i("div",lc,[we(i("input",{type:"text",id:"standupSearchFilter","onUpdate:modelValue":E[6]||(E[6]=V=>c.search=V),class:"focus:ring-indigo-500 focus:border-indigo-500 block w-full pr-10 sm:text-sm border-gray-300 rounded-md",placeholder:"Search in standup content...",onInput:g},null,544),[[Ve,c.search]]),E[16]||(E[16]=i("div",{class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},[i("svg",{class:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[i("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})])],-1))])])]),i("div",{class:"mt-3 flex justify-end"},[i("button",{type:"button",class:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:M}," Reset Filters ")])])):k("",!0),n.value?(d(),u("div",ic,"Loading standups...")):o.value?(d(),u("div",nc,f(o.value),1)):a.value==="list"?(d(),u("div",oc,[$.value.length?(d(),u("div",rc,[(d(!0),u(X,null,le($.value,V=>{var F,te;return d(),u("div",{key:V.id,class:"p-4 bg-blue-50 rounded-md shadow-sm hover:bg-blue-100 transition-colors border-l-4 border-blue-500"},[V.content==="[Encrypted content could not be decrypted]"?(d(),u("div",dc,[i("div",uc,[i("p",cc,[W(f(V.content),1),E[18]||(E[18]=i("span",{class:"text-xs text-red-400 block mt-1"},"(There was an issue decrypting this standup. Please contact an administrator.)",-1))]),i("div",mc,[i("p",vc,"Submitted by "+f(((F=V.user)==null?void 0:F.name)||"Unknown")+" on "+f(J(I)(V.created_at).format("L")),1)])])])):(d(),u("div",hc,[i("div",pc,[i("div",fc,[E[19]||(E[19]=i("h3",{class:"text-md font-bold text-gray-800"},"Daily Standup",-1)),i("span",yc,f(N(V.content).date),1)]),i("div",gc,[E[20]||(E[20]=i("div",{class:"flex items-center mb-1"},[i("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 text-blue-600 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})]),i("span",{class:"font-semibold text-sm text-gray-700"},"Yesterday:")],-1)),i("p",_c,f(N(V.content).yesterday),1)]),i("div",wc,[E[21]||(E[21]=i("div",{class:"flex items-center mb-1"},[i("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 text-green-600 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})]),i("span",{class:"font-semibold text-sm text-gray-700"},"Today:")],-1)),i("p",bc,f(N(V.content).today),1)]),i("div",xc,[E[22]||(E[22]=i("div",{class:"flex items-center mb-1"},[i("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 text-red-600 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})]),i("span",{class:"font-semibold text-sm text-gray-700"},"Blockers:")],-1)),i("p",kc,f(N(V.content).blockers),1)]),i("div",Dc,[i("p",Sc,"Submitted by "+f(((te=V.user)==null?void 0:te.name)||"Unknown")+" on "+f(J(I)(V.created_at).format("L")),1)])])]))])}),128))])):(d(),u("p",Mc,"No daily standups found for the selected criteria."))])):a.value==="calendar"?(d(),u("div",Cc,[i("div",Tc,[i("button",{onClick:_,class:"p-2 rounded-full bg-gray-100 hover:bg-gray-200 transition-colors"},E[23]||(E[23]=[i("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])),i("h3",Ec,f(m.value?J(I)(m.value).format("MMMM YYYY"):"Loading..."),1),i("button",{onClick:y,class:"p-2 rounded-full bg-gray-100 hover:bg-gray-200 transition-colors"},E[24]||(E[24]=[i("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)]))]),h(J(Zn),{class:"vuecal--blue-theme","active-view":"month",events:j.value,"selected-date":m.value,"hide-title-bar":"","disable-views":["week","day","years","year"],twelveHour:!0,"time-from":480,"time-to":1200,"time-step":30,"events-on-month-view":"short"},{event:L(({event:V})=>[i("div",{class:"vuecal__event-title",innerHTML:V.title},null,8,$c),i("div",{class:"vuecal__event-content",innerHTML:V.content},null,8,jc)]),"cell-content":L(({view:V,date:F})=>[V.id==="month"?(d(),u(X,{key:0},[F&&S(F)&&R(F)&&!j.value.some(te=>Q(te.start,F))?(d(),u("div",Oc," No standups ")):k("",!0)],64)):k("",!0)]),_:1},8,["events","selected-date"]),E[26]||(E[26]=ii('<div class="mt-4 flex items-center space-x-4 text-sm"><div class="flex items-center"><span class="inline-block w-3 h-3 bg-blue-50 border-l-2 border-blue-500 mr-1"></span><span>Standup submitted</span></div><div class="flex items-center"><span class="inline-block w-3 h-3 bg-red-50 border-l-2 border-red-500 mr-1"></span><span>Missing standup</span></div></div>',1)),i("div",Vc,[E[25]||(E[25]=i("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Standups Outside Current Month View",-1)),Object.entries(A.value).some(([V])=>!J(I)(V).isSame(m.value,"month"))?(d(),u("div",Ac,[(d(!0),u(X,null,le(Object.entries(A.value).filter(([V])=>!J(I)(V).isSame(m.value,"month")).sort((V,F)=>J(I)(V[0]).valueOf()-J(I)(F[0]).valueOf()),([V,F])=>(d(),u("div",{key:V,class:"mb-4"},[i("div",Yc,f(J(I)(V).format("dddd, MMMM Do YYYY")),1),(d(!0),u(X,null,le(F,te=>{var Y;return d(),u("div",{key:te.id,class:"p-2 mb-2 rounded bg-blue-50 border-l-2 border-blue-500"},[i("div",Ic,f(((Y=te.user)==null?void 0:Y.name)||"Unknown"),1),i("div",Nc,f(J(I)(te.created_at).format("LT")),1)])}),128))]))),128))])):(d(),u("div",Lc,"No standups outside the current month view."))])])):k("",!0),h(Va,{show:l.value,onClose:E[7]||(E[7]=V=>l.value=!1),onStandupAdded:D,projectId:e.projectId},null,8,["show","projectId"])]))}},Uc={class:"relative"},Rc={key:0,class:"text-gray-400 text-sm"},Fc=["onClick"],Wc=["placeholder"],Hc={key:0,class:"absolute z-50 w-full bg-white border border-gray-300 rounded-md shadow-lg mt-1 max-h-60 overflow-y-auto"},Bc={class:"py-1"},zc={key:0,class:"px-4 py-2 text-gray-500 text-sm"},qc=["onClick"],Gc={__name:"CustomMultiSelect",props:{modelValue:{type:Array,default:()=>[]},options:{type:Array,default:()=>[],required:!0},placeholder:{type:String,default:"Select items"},labelKey:{type:String,default:"name"},trackBy:{type:String,default:"id"}},emits:["update:modelValue"],setup(e,{emit:t}){const s=e,a=t,l=b(!1),n=b(""),o=U(()=>{if(!n.value)return s.options;const v=n.value.toLowerCase();return s.options.filter(p=>p[s.labelKey].toLowerCase().includes(v))});pe(()=>s.modelValue,v=>{},{deep:!0});const r=v=>{const p=[...s.modelValue],g=p.findIndex(D=>D===v[s.trackBy]);g===-1?p.push(v[s.trackBy]):p.splice(g,1),a("update:modelValue",p),n.value=""},m=v=>{const p=s.options.find(g=>g[s.trackBy]===v);return p?p[s.labelKey]:""},c=v=>s.modelValue.includes(v);return(v,p)=>{const g=ni("click-outside");return we((d(),u("div",Uc,[i("div",{class:"flex flex-wrap items-center w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm cursor-pointer min-h-[38px] bg-white focus-within:border-indigo-500 focus-within:ring-indigo-500",onClick:p[2]||(p[2]=D=>l.value=!l.value)},[e.modelValue.length===0&&!n.value?(d(),u("span",Rc,f(e.placeholder),1)):k("",!0),(d(!0),u(X,null,le(e.modelValue,D=>(d(),u("div",{key:D,class:"inline-flex items-center bg-indigo-100 text-indigo-800 text-xs font-medium px-2.5 py-0.5 rounded mr-2 mb-1"},[W(f(m(D))+" ",1),i("button",{type:"button",onClick:Ue(x=>r(e.options.find(M=>M[e.trackBy]===D)),["stop"]),class:"ml-1 text-indigo-800 hover:text-indigo-900 focus:outline-none"},p[3]||(p[3]=[i("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,Fc)]))),128)),we(i("input",{type:"text","onUpdate:modelValue":p[0]||(p[0]=D=>n.value=D),onInput:p[1]||(p[1]=D=>l.value=!0),class:"flex-grow border-none focus:ring-0 p-0 text-sm placeholder-gray-400 bg-transparent outline-none",placeholder:e.modelValue.length===0?"Search...":""},null,40,Wc),[[Ve,n.value]])]),l.value?(d(),u("div",Hc,[i("ul",Bc,[o.value.length===0?(d(),u("li",zc,"No items found.")):k("",!0),(d(!0),u(X,null,le(o.value,D=>(d(),u("li",{key:D[e.trackBy],class:ae(["px-4 py-2 cursor-pointer hover:bg-gray-100 text-sm",{"bg-indigo-50 text-indigo-900":c(D[e.trackBy])}]),onClick:x=>r(D)},f(D[e.labelKey]),11,qc))),128))])])):k("",!0)])),[[g,()=>l.value=!1]])}}},Jt=qe(Gc,[["__scopeId","data-v-5326f069"]]),Zc={class:"mt-6 space-y-6"},Jc={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Kc={class:"flex items-center"},Qc={class:"flex items-center"},Xc={__name:"MeetingModal",props:{show:{type:Boolean,default:!1},projectId:{type:Number,required:!0},projectUsers:{type:Array,default:()=>[]}},emits:["close","saved"],setup(e,{emit:t}){const s=e,a=t,l=()=>Intl.DateTimeFormat().resolvedOptions().timeZone,n=["Africa/Cairo","Africa/Johannesburg","Africa/Lagos","America/Anchorage","America/Bogota","America/Chicago","America/Denver","America/Los_Angeles","America/Mexico_City","America/New_York","America/Phoenix","America/Sao_Paulo","America/Toronto","America/Vancouver","Asia/Dubai","Asia/Hong_Kong","Asia/Jerusalem","Asia/Kolkata","Asia/Seoul","Asia/Shanghai","Asia/Singapore","Asia/Tokyo","Australia/Melbourne","Australia/Perth","Australia/Sydney","Europe/Amsterdam","Europe/Berlin","Europe/Dublin","Europe/Istanbul","Europe/London","Europe/Madrid","Europe/Moscow","Europe/Paris","Europe/Rome","Pacific/Auckland","Pacific/Honolulu","UTC","GMT","Europe/Belfast","America/Adak","America/Boise","America/Detroit","America/Indianapolis","America/Juneau","America/Louisville","America/Menominee","America/Nome","America/Sitka","America/Yakutat","Asia/Karachi","Asia/Kolkata","Pacific/Auckland","Pacific/Chatham","Europe/Athens","Europe/Brussels","Europe/Budapest","Europe/Copenhagen","Europe/Helsinki","Europe/Lisbon","Europe/Oslo","Europe/Stockholm","Europe/Zurich","Europe/Vienna","Europe/Warsaw","Europe/Zurich","Europe/Sofia","Europe/Prague","Europe/Malta","Europe/Luxembourg","Europe/Kiev","Europe/Rome"].sort(),o=U(()=>n.map(y=>({value:y,label:y}))),r=U(()=>{const y=l(),j=n.includes(y);return console.log("DEBUG: Is detected timezone in list?",j,"Detected:",y),j?y:(console.log("DEBUG: Falling back to UTC for timezone as detected timezone not in list."),"UTC")}),m=Ne({summary:"",description:"",start_datetime:"",end_datetime:"",attendee_user_ids:[],location:"",with_google_meet:!0,timezone:r.value,enable_recording:!1}),c=()=>{m.summary="",m.description="",m.attendee_user_ids=[],m.location="",m.with_google_meet=!0,m.timezone=r.value,m.enable_recording=!1,p(),console.log("DEBUG: Form reset. Current timezone in form:",m.timezone)},v=y=>{const j=new Date(y),$=j.getFullYear(),S=String(j.getMonth()+1).padStart(2,"0"),R=String(j.getDate()).padStart(2,"0"),Q=String(j.getHours()).padStart(2,"0"),N=String(j.getMinutes()).padStart(2,"0");return`${$}-${S}-${R}T${Q}:${N}`},p=()=>{const y=new Date,j=new Date(y.getTime()+3600*1e3),$=new Date(y.getTime()+7200*1e3);m.start_datetime=v(j),m.end_datetime=v($),console.log("DEBUG: Default times set. Start:",m.start_datetime,"End:",m.end_datetime)};p(),pe(()=>s.show,y=>{y&&c()},{immediate:!0});const g=y=>y?(console.log(y),y.replace("T"," ")+":00"):"",D=y=>{const j={...y};return j.start_datetime=g(y.start_datetime),j.end_datetime=g(y.end_datetime),console.log(j),j},x=U(()=>`/api/projects/${s.projectId}/meetings`),M=y=>{a("saved",y)},_=y=>{console.error("DEBUG: MeetingModal submission error:",y)};return(y,j)=>(d(),oe(Qe,{show:e.show,title:"Schedule a Meeting","api-endpoint":x.value,"http-method":"post","form-data":m,"format-data-for-api":D,"submit-button-text":"Schedule Meeting","success-message":"Meeting scheduled successfully!",onClose:j[9]||(j[9]=$=>y.$emit("close")),onSubmitted:M,onError:_},{default:L(({errors:$})=>[i("div",Zc,[i("div",null,[h(B,{for:"summary",value:"Meeting Title"}),h(fe,{id:"summary",modelValue:m.summary,"onUpdate:modelValue":j[0]||(j[0]=S=>m.summary=S),type:"text",class:"mt-1 block w-full",placeholder:"Project Status Meeting",required:""},null,8,["modelValue"]),h(de,{message:$.summary?$.summary[0]:"",class:"mt-2"},null,8,["message"])]),i("div",null,[h(B,{for:"description",value:"Description"}),we(i("textarea",{id:"description","onUpdate:modelValue":j[1]||(j[1]=S=>m.description=S),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",rows:"3",placeholder:"Meeting agenda and details..."},null,512),[[Ve,m.description]]),h(de,{message:$.description?$.description[0]:"",class:"mt-2"},null,8,["message"])]),i("div",Jc,[i("div",null,[h(B,{for:"start_datetime",value:"Start Date & Time"}),h(fe,{id:"start_datetime",modelValue:m.start_datetime,"onUpdate:modelValue":j[2]||(j[2]=S=>m.start_datetime=S),type:"datetime-local",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),h(de,{message:$.start_datetime?$.start_datetime[0]:"",class:"mt-2"},null,8,["message"])]),i("div",null,[h(B,{for:"end_datetime",value:"End Date & Time"}),h(fe,{id:"end_datetime",modelValue:m.end_datetime,"onUpdate:modelValue":j[3]||(j[3]=S=>m.end_datetime=S),type:"datetime-local",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),h(de,{message:$.end_datetime?$.end_datetime[0]:"",class:"mt-2"},null,8,["message"])])]),i("div",null,[h(B,{for:"attendees",value:"Attendees"}),h(Jt,{id:"attendees",modelValue:m.attendee_user_ids,"onUpdate:modelValue":j[4]||(j[4]=S=>m.attendee_user_ids=S),options:s.projectUsers,"label-key":"name","track-by":"id",placeholder:"Select attendees",class:"mt-1"},null,8,["modelValue","options"]),j[10]||(j[10]=i("p",{class:"mt-1 text-sm text-gray-500"}," Select project members to invite to this meeting ",-1)),h(de,{message:$.attendee_user_ids?$.attendee_user_ids[0]:"",class:"mt-2"},null,8,["message"])]),i("div",null,[h(B,{for:"location",value:"Location (Optional)"}),h(fe,{id:"location",modelValue:m.location,"onUpdate:modelValue":j[5]||(j[5]=S=>m.location=S),type:"text",class:"mt-1 block w-full",placeholder:"Office, Conference Room, etc."},null,8,["modelValue"]),h(de,{message:$.location?$.location[0]:"",class:"mt-2"},null,8,["message"])]),i("div",null,[h(B,{for:"timezone",value:"Timezone"}),h(Me,{id:"timezone",modelValue:m.timezone,"onUpdate:modelValue":j[6]||(j[6]=S=>m.timezone=S),options:o.value,"value-key":"value","label-key":"label",placeholder:"Select timezone",class:"mt-1"},null,8,["modelValue","options"]),j[11]||(j[11]=i("p",{class:"mt-1 text-sm text-gray-500"}," Select your timezone for this meeting ",-1)),h(de,{message:$.timezone?$.timezone[0]:"",class:"mt-2"},null,8,["message"])]),i("div",Kc,[we(i("input",{id:"with_google_meet","onUpdate:modelValue":j[7]||(j[7]=S=>m.with_google_meet=S),type:"checkbox",class:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,512),[[As,m.with_google_meet]]),j[12]||(j[12]=i("label",{for:"with_google_meet",class:"ml-2 block text-sm text-gray-900"}," Create Google Meet video conference ",-1))]),i("div",Qc,[we(i("input",{id:"enable_recording","onUpdate:modelValue":j[8]||(j[8]=S=>m.enable_recording=S),type:"checkbox",class:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,512),[[As,m.enable_recording]]),j[13]||(j[13]=i("label",{for:"enable_recording",class:"ml-2 block text-sm text-gray-900"}," Enable recording and transcript ",-1))])])]),_:1},8,["show","api-endpoint","form-data"]))}},em=qe(Xc,[["__scopeId","data-v-4e53a3e5"]]),tm={class:"p-6"},sm={key:0,class:"mb-4 p-3 bg-green-100 text-green-800 rounded-md"},am={key:1,class:"mb-4 p-3 bg-red-100 text-red-800 rounded-md"},lm={class:"mb-4"},im=["value"],nm={class:"mt-6 flex justify-end space-x-3"},om={__name:"ProjectMagicLinkModal",props:{show:{type:Boolean,default:!1},projectId:{type:Number,required:!0},projectClients:{type:Array,default:()=>[]}},emits:["close"],setup(e,{emit:t}){const s=e,a=t,l=b(!1),n=b(""),o=b(""),r=b(""),m=async()=>{var v,p;if(!n.value){r.value="Please select a client email";return}l.value=!0,o.value="",r.value="";try{const g=await window.axios.post(`/api/projects/${s.projectId}/magic-link`,{email:n.value});g.data.success?(o.value=g.data.message,n.value=""):r.value=g.data.message||"Failed to send magic link"}catch(g){console.error("Error sending magic link:",g),r.value=((p=(v=g.response)==null?void 0:v.data)==null?void 0:p.message)||"An error occurred while sending the magic link"}finally{l.value=!1}},c=()=>{n.value="",o.value="",r.value="",a("close")};return(v,p)=>(d(),oe(rt,{show:e.show,onClose:c},{default:L(()=>[i("div",tm,[i("div",{class:"flex justify-between items-center mb-4"},[p[2]||(p[2]=i("h3",{class:"text-lg font-semibold text-gray-900"},"Send Magic Link to Client",-1)),i("button",{onClick:c,class:"text-gray-400 hover:text-gray-500"},p[1]||(p[1]=[i("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),o.value?(d(),u("div",sm,f(o.value),1)):k("",!0),r.value?(d(),u("div",am,f(r.value),1)):k("",!0),i("div",lm,[h(B,{for:"client-email",value:"Select Client"}),we(i("select",{id:"client-email","onUpdate:modelValue":p[0]||(p[0]=g=>n.value=g),class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full"},[p[3]||(p[3]=i("option",{value:""},"Select a client",-1)),(d(!0),u(X,null,le(e.projectClients,g=>(d(),u("option",{key:g.id,value:g.email},f(g.name)+" ("+f(g.email)+") ",9,im))),128))],512),[[Kt,n.value]]),p[4]||(p[4]=i("p",{class:"mt-2 text-sm text-gray-500"}," The magic link will be sent to the selected client's email address. ",-1))]),i("div",nm,[h(je,{onClick:c,type:"button"},{default:L(()=>p[5]||(p[5]=[W(" Cancel ",-1)])),_:1,__:[5]}),h(_e,{onClick:m,disabled:l.value||!n.value,class:"bg-purple-600 hover:bg-purple-700"},{default:L(()=>[W(f(l.value?"Sending...":"Send Magic Link"),1)]),_:1},8,["disabled"])])])]),_:1},8,["show"]))}},rm={class:"mt-6 space-y-6"},dm={class:"mt-2 flex space-x-4"},um={class:"inline-flex items-center"},cm={class:"inline-flex items-center"},mm={key:0},vm={key:1},hm=["required"],pm={__name:"ResourceModal",props:{show:{type:Boolean,default:!1},projectId:{type:Number,required:!0},resource:{type:Object,default:null}},emits:["close","saved"],setup(e,{emit:t}){const s=e,a=t,l=b({name:"",type:"link",url:"",file:null,description:""}),n=b(null),o=U(()=>s.resource?`/api/projects/${s.projectId}/resources/${s.resource.id}`:`/api/projects/${s.projectId}/resources`),r=U(()=>s.resource?"put":"post"),m=U(()=>s.resource?"Update Resource":"Add Resource"),c=U(()=>s.resource?"Resource updated successfully!":"Resource added successfully!");pe(()=>s.show,x=>{x&&(s.resource?l.value={name:s.resource.name,type:s.resource.type,url:s.resource.type==="link"?s.resource.url:"",file:null,description:s.resource.description||""}:l.value={name:"",type:"link",url:"",file:null,description:""},n.value&&(n.value.value=""))},{immediate:!0});const v=x=>{l.value.file=x.target.files[0]||null},p=x=>{const M=new FormData;return M.append("name",x.name||""),M.append("type",x.type||"link"),M.append("description",x.description||""),x.type==="link"?M.append("url",x.url||""):x.type==="file"&&x.file&&M.append("file",x.file),(r.value==="put"||r.value==="patch")&&M.append("_method","PUT"),M},g=x=>{a("saved",x.resource)},D=()=>{a("close")};return(x,M)=>(d(),oe(Qe,{show:e.show,title:e.resource?"Edit Resource":"Add Resource","api-endpoint":o.value,"http-method":r.value,"form-data":l.value,"submit-button-text":m.value,"success-message":c.value,"format-data-for-api":p,onClose:D,onSubmitted:g},{default:L(({errors:_})=>[i("div",rm,[i("div",null,[h(B,{for:"resource-type",value:"Resource Type"}),i("div",dm,[i("label",um,[we(i("input",{type:"radio","onUpdate:modelValue":M[0]||(M[0]=y=>l.value.type=y),value:"link",class:"form-radio text-indigo-600"},null,512),[[xa,l.value.type]]),M[5]||(M[5]=i("span",{class:"ml-2 text-gray-700"},"Link",-1))]),i("label",cm,[we(i("input",{type:"radio","onUpdate:modelValue":M[1]||(M[1]=y=>l.value.type=y),value:"file",class:"form-radio text-indigo-600"},null,512),[[xa,l.value.type]]),M[6]||(M[6]=i("span",{class:"ml-2 text-gray-700"},"File",-1))])])]),i("div",null,[h(B,{for:"resource-name",value:"Name"}),h(fe,{id:"resource-name",modelValue:l.value.name,"onUpdate:modelValue":M[2]||(M[2]=y=>l.value.name=y),type:"text",class:"mt-1 block w-full",placeholder:"Enter resource name",required:""},null,8,["modelValue"]),h(de,{message:_.name?_.name[0]:"",class:"mt-2"},null,8,["message"])]),l.value.type==="link"?(d(),u("div",mm,[h(B,{for:"resource-url",value:"URL"}),h(fe,{id:"resource-url",modelValue:l.value.url,"onUpdate:modelValue":M[3]||(M[3]=y=>l.value.url=y),type:"url",class:"mt-1 block w-full",placeholder:"https://example.com",required:""},null,8,["modelValue"]),h(de,{message:_.url?_.url[0]:"",class:"mt-2"},null,8,["message"])])):k("",!0),l.value.type==="file"?(d(),u("div",vm,[h(B,{for:"resource-file",value:"File"}),i("input",{id:"resource-file",ref_key:"fileInputRef",ref:n,type:"file",class:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100",onChange:v,required:!e.resource||l.value.type==="file"},null,40,hm),h(de,{message:_.file?_.file[0]:"",class:"mt-2"},null,8,["message"])])):k("",!0),i("div",null,[h(B,{for:"resource-description",value:"Description (Optional)"}),we(i("textarea",{id:"resource-description","onUpdate:modelValue":M[4]||(M[4]=y=>l.value.description=y),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",rows:"3",placeholder:"Enter a description for this resource"},null,512),[[Ve,l.value.description]]),h(de,{message:_.description?_.description[0]:"",class:"mt-2"},null,8,["message"])])])]),_:1},8,["show","title","api-endpoint","http-method","form-data","submit-button-text","success-message"]))}},fm=qe(pm,[["__scopeId","data-v-f508dda8"]]),ym={class:"flex flex-col space-y-6"},gm={class:"grid grid-cols-1 sm:grid-cols-2 gap-6"},_m={key:0},wm={class:"grid grid-cols-1 sm:grid-cols-2 gap-6"},bm={class:"mb-4"},xm={key:0,class:"text-xs text-gray-500 mt-1"},km={key:0,class:"text-xs text-gray-500 mt-1"},Dm={class:"flex justify-between items-center mb-3"},Sm={key:0,class:"flex items-center"},Mm={key:1},Cm={class:"bg-gray-100 p-4 rounded-lg shadow-inner min-h-[300px]"},Tm={key:0,class:"flex items-center justify-center h-full"},Em=["innerHTML"],$m={__name:"ComposeEmailModal",props:{show:{type:Boolean,default:!1},projectId:{type:Number,required:!0},clients:{type:Array,default:()=>[]}},emits:["close"],setup(e,{emit:t}){const s=e,a=t,l=b([]),n=b(""),o=b(!1),r=b({}),m=b({}),c=b(!1),v=Ne({template_id:null,recipients:[],dynamic_data:{}});Fs(s.projectId);const p=U(()=>l.value.find(S=>S.id===v.template_id)),g=async S=>{c.value=!0,m.value={};const R=new Set;S.placeholders.forEach(Q=>{(Q.is_repeatable||Q.is_selectable)&&Q.source_model&&R.add(Q.source_model)});try{const Q=Array.from(R).map(N=>{const A=N.split("\\").pop(),O=`/api/projects/${s.projectId}/model-data/${A}`;return window.axios.get(O).then(E=>{m.value[A]=E.data})});await Promise.all(Q)}catch(Q){console.error("Failed to fetch source model data:",Q)}finally{c.value=!1}},D=async()=>{try{const S=await window.axios.get("/api/email-templates");l.value=S.data}catch(S){console.error("Failed to fetch email templates:",S)}},x=async()=>{if(!v.template_id||v.recipients.length===0){n.value='<p class="text-gray-500 italic">Select a template and at least one recipient to see a preview.</p>';return}o.value=!0;try{const S=await window.axios.post(`/api/projects/${s.projectId}/email-preview`,{template_id:v.template_id,recipient_id:v.recipients[0],dynamic_data:v.dynamic_data});n.value=S.data.body_html}catch(S){console.error("Failed to fetch email preview:",S),n.value='<p class="text-red-500 italic">Error loading preview.</p>'}finally{o.value=!1}};pe(()=>s.show,S=>{S&&(Object.assign(v,{template_id:null,recipients:[],dynamic_data:{}}),n.value="",r.value={},m.value={},D())}),pe(p,S=>{v.dynamic_data={},S&&S.placeholders&&(S.placeholders.forEach(R=>{R.is_dynamic?v.dynamic_data[R.name]="":(R.is_repeatable||R.is_selectable)&&(R.is_repeatable?v.dynamic_data[R.name]=[]:v.dynamic_data[R.name]=null)}),g(S))});const M=()=>{a("close")},_=()=>{a("close")},y=U(()=>l.value.map(S=>({value:S.id,label:S.name}))),j=U(()=>p.value?p.value.placeholders.filter(S=>S.is_dynamic||S.is_repeatable||S.is_selectable):[]),$=U(()=>`/api/projects/${s.projectId}/send-email`);return Ye(()=>{D()}),(S,R)=>(d(),oe(Qe,{show:e.show,title:"Compose Email from Template","api-endpoint":$.value,"http-method":"post","form-data":v,"submit-button-text":"Send Email","success-message":"Email sent successfully!",onClose:_,onSubmitted:M},{default:L(({errors:Q})=>[i("div",ym,[i("div",gm,[i("div",null,[h(B,{for:"template",value:"Select Template"}),h(Me,{id:"template",modelValue:v.template_id,"onUpdate:modelValue":R[0]||(R[0]=N=>v.template_id=N),options:y.value,placeholder:"Select a template","value-key":"value","label-key":"label","allow-empty":!0,class:"mt-1"},null,8,["modelValue","options"]),h(de,{message:Q.template_id?Q.template_id[0]:"",class:"mt-2"},null,8,["message"])]),i("div",null,[h(B,{for:"recipients",value:"Recipients"}),h(Jt,{id:"recipients",modelValue:v.recipients,"onUpdate:modelValue":R[1]||(R[1]=N=>v.recipients=N),options:e.clients,placeholder:"Select clients to send to","label-key":"name","track-by":"id",class:"mt-1"},null,8,["modelValue","options"]),h(de,{message:Q.recipients?Q.recipients[0]:"",class:"mt-2"},null,8,["message"])])]),p.value?(d(),u("div",_m,[R[2]||(R[2]=i("h4",{class:"text-md font-semibold text-gray-800 mb-3"},"Dynamic Placeholders",-1)),i("div",wm,[(d(!0),u(X,null,le(j.value,N=>(d(),u("div",{key:N.id},[i("div",bm,[h(B,{for:N.name,value:N.name},null,8,["for","value"]),N.is_repeatable&&N.source_model?(d(),u(X,{key:0},[h(Jt,{id:N.name,modelValue:v.dynamic_data[N.name],"onUpdate:modelValue":A=>v.dynamic_data[N.name]=A,options:m.value[N.source_model.split("\\").pop()]||[],placeholder:`Select one or more ${N.name}`,"label-key":N.source_attribute,"track-by":"id",class:"mt-1"},null,8,["id","modelValue","onUpdate:modelValue","options","placeholder","label-key"]),c.value?(d(),u("div",xm," Loading "+f(N.source_model.split("\\").pop())+"... ",1)):k("",!0)],64)):N.is_selectable&&N.source_model?(d(),u(X,{key:1},[h(Me,{id:N.name,modelValue:v.dynamic_data[N.name],"onUpdate:modelValue":A=>v.dynamic_data[N.name]=A,options:m.value[N.source_model.split("\\").pop()]||[],placeholder:`Select a ${N.name}`,"value-key":N.trackBy??"id","label-key":N.source_attribute,"allow-empty":!0,class:"mt-1"},null,8,["id","modelValue","onUpdate:modelValue","options","placeholder","value-key","label-key"]),c.value?(d(),u("div",km," Loading "+f(N.source_model.split("\\").pop())+"... ",1)):k("",!0)],64)):N.is_dynamic&&N.is_link?(d(),oe(fe,{key:2,id:N.name,type:"url",class:"mt-1 block w-full",modelValue:v.dynamic_data[N.name],"onUpdate:modelValue":A=>v.dynamic_data[N.name]=A,placeholder:"Enter URL"},null,8,["id","modelValue","onUpdate:modelValue"])):(d(),oe(fe,{key:3,id:N.name,type:"text",class:"mt-1 block w-full",modelValue:v.dynamic_data[N.name],"onUpdate:modelValue":A=>v.dynamic_data[N.name]=A},null,8,["id","modelValue","onUpdate:modelValue"])),h(de,{message:Q[`dynamic_data.${N.name}`]?Q[`dynamic_data.${N.name}`][0]:"",class:"mt-2"},null,8,["message"])])]))),128))])])):k("",!0),i("div",null,[i("div",Dm,[R[4]||(R[4]=i("h4",{class:"text-md font-semibold text-gray-800"},"Email Preview",-1)),h(_e,{onClick:x,disabled:!v.template_id||v.recipients.length===0||o.value,class:ae({"opacity-50 cursor-not-allowed":!v.template_id||v.recipients.length===0||o.value})},{default:L(()=>[o.value?(d(),u("span",Sm,R[3]||(R[3]=[i("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[i("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),i("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),W(" Loading... ",-1)]))):(d(),u("span",Mm," Refresh Preview "))]),_:1},8,["disabled","class"])]),i("div",Cm,[o.value?(d(),u("div",Tm,R[5]||(R[5]=[i("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-500"},null,-1)]))):(d(),u("div",{key:1,innerHTML:n.value},null,8,Em))])])])]),_:1},8,["show","api-endpoint","form-data"]))}},jm={class:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow mb-6"},Om={class:"flex justify-between items-center mb-4"},Vm={class:"flex gap-3"},Am={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ym={class:"text-2xl font-bold text-gray-900 tracking-tight mb-2"},Im={class:"text-gray-600 text-base"},Nm={class:"space-y-3 text-sm text-gray-700"},Lm={class:"flex flex-wrap gap-2 mt-2 items-center"},Pm=["href"],Um=["href"],Rm=["href"],Fm={key:3,class:"text-gray-500 text-sm"},Wm={class:"relative"},Hm=["onClick"],Bm={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},zm={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},qm={key:0,class:"resource-tooltip absolute left-0 bottom-full mb-2 w-48 z-10"},Gm={class:"bg-white rounded-md shadow-lg p-3 text-sm border border-gray-200"},Zm={class:"flex justify-between items-center mb-2"},Jm={class:"font-medium text-gray-900"},Km={key:0,class:"text-gray-600 text-xs mb-2"},Qm={class:"flex justify-between mt-2 pt-2 border-t border-gray-100"},Xm=["href"],ev={class:"flex space-x-2"},tv=["onClick"],sv=["onClick"],av={class:"p-6"},lv={key:0,class:"mb-4 p-4 bg-green-50 border border-green-200 text-green-700 rounded-md"},iv={key:1,class:"mb-4 p-4 bg-red-50 border border-red-200 text-red-700 rounded-md"},nv={class:"mb-4"},ov={key:0,class:"text-gray-500 text-sm mt-1"},rv={key:1,class:"text-red-500 text-sm mt-1"},dv={class:"flex justify-end mt-6"},uv={__name:"ProjectGeneralInfoCard",props:{project:{type:Object,required:!0},projectId:{type:Number,required:!0},canManageProjects:{type:Boolean,required:!0},canEditProjects:{type:Boolean,required:!1},isSuperAdmin:{type:Boolean,required:!0}},emits:["openEditModal","openStandupModal","openMeetingModal","resourceSaved","openComposeModal"],setup(e,{emit:t}){const s=e,a=t,l=b(!1),n=b(null),o=b([]),r=b(!1),m=b(null),c=b(!1),v=b(!1),p=b(!1),g=b({client_ids:[]}),D=b({}),x=b(""),M=b([]),_=b(!1),y=b("");Fs(s.projectId);const j=async()=>{r.value=!0;try{const w=await window.axios.get(`/api/projects/${s.projectId}/resources`);w.data.success?o.value=w.data.resources:console.error("Failed to fetch resources:",w.data.message)}catch(w){console.error("Error fetching resources:",w)}finally{r.value=!1}},$=()=>{n.value=null,l.value=!0},S=w=>{n.value=w,l.value=!0},R=async w=>{if(confirm("Are you sure you want to delete this resource?"))try{const C=await window.axios.delete(`/api/projects/${s.projectId}/resources/${w}`);C.data.success?o.value=o.value.filter(T=>T.id!==w):console.error("Failed to delete resource:",C.data.message)}catch(C){console.error("Error deleting resource:",C)}},Q=w=>{if(n.value){const C=o.value.findIndex(T=>T.id===w.id);C!==-1&&(o.value[C]=w)}else o.value.push(w);a("resourceSaved",w)},N=w=>{m.value=m.value===w?null:w},A=()=>{m.value=null},O=w=>{if(m.value!==null){const C=w.target.closest(".resource-tooltip"),T=w.target.closest(".resource-button");!C&&!T&&A()}};Ye(()=>{j(),document.addEventListener("click",O)}),oi(()=>{document.removeEventListener("click",O)});const E=async()=>{var w,C;_.value=!0,y.value="";try{const T=await window.axios.get(`/api/projects/${s.projectId}/sections/clients?type=clients`);console.log(T),M.value=T.data}catch(T){console.error("Failed to fetch project clients:",T),y.value=((C=(w=T.response)==null?void 0:w.data)==null?void 0:C.message)||"Failed to load client data."}finally{_.value=!1}},V=()=>{g.value.client_ids=[],D.value={},x.value="",v.value=!0,E()},F=()=>{c.value=!0,E()},te=()=>{v.value=!1},Y=async()=>{if(D.value={},x.value="",p.value=!0,!g.value.client_ids||g.value.client_ids.length===0){D.value={client_ids:["Please select a client."]},p.value=!1;return}try{const w=g.value.client_ids[0];if(!M.value.find(z=>z.id===w)){D.value={client_ids:["Selected client does not have a valid email."]},p.value=!1;return}const T=await window.axios.post(`/api/projects/${s.projectId}/magic-link`,{client_id:w});T.data.success&&(x.value=T.data.message,g.value.client_ids=[])}catch(w){w.response&&w.response.status===422?D.value=w.response.data.errors:w.response&&w.response.data.message?D.value={general:[w.response.data.message]}:D.value={general:["An unexpected error occurred. Please try again."]}}finally{p.value=!1}};return(w,C)=>{var T;return d(),u(X,null,[i("div",jm,[i("div",Om,[C[10]||(C[10]=i("h4",{class:"text-lg font-semibold text-gray-900"},"General Information",-1)),i("div",Vm,[h(_e,{class:"bg-blue-600 hover:bg-blue-700 transition-colors",onClick:C[0]||(C[0]=z=>a("openStandupModal"))},{default:L(()=>C[6]||(C[6]=[W(" Daily Standup ",-1)])),_:1,__:[6]}),e.canEditProjects||e.isSuperAdmin?(d(),oe(_e,{key:0,onClick:C[1]||(C[1]=z=>w.$inertia.visit("/projects/"+e.projectId+"/edit")),class:"bg-indigo-600 hover:bg-indigo-700 transition-colors"},{default:L(()=>C[7]||(C[7]=[W(" Edit Project ",-1)])),_:1,__:[7]})):k("",!0),e.canManageProjects||e.isSuperAdmin?(d(),oe(_e,{key:1,class:"bg-green-600 hover:bg-green-700 transition-colors",onClick:C[2]||(C[2]=z=>a("openMeetingModal"))},{default:L(()=>C[8]||(C[8]=[W(" Schedule Meeting ",-1)])),_:1,__:[8]})):k("",!0),e.canManageProjects||e.isSuperAdmin?(d(),oe(_e,{key:2,class:"bg-blue-400 hover:bg-blue-600 transition-colors",onClick:F},{default:L(()=>C[9]||(C[9]=[W(" Compose Email ",-1)])),_:1,__:[9]})):k("",!0),e.canManageProjects?(d(),oe(_e,{key:3,class:"bg-purple-600 hover:bg-purple-700 transition-colors",onClick:V,disabled:p.value},{default:L(()=>[W(f(p.value?"Sending...":"Send Magic Link"),1)]),_:1},8,["disabled"])):k("",!0)])]),i("div",Am,[i("div",null,[i("h3",Ym,f(e.project.name),1),i("p",Im,f(e.project.description||"No description provided"),1)]),i("div",Nm,[i("p",null,[C[11]||(C[11]=i("strong",{class:"text-gray-900"},"Status:",-1)),W(" "+f(((T=e.project.status)==null?void 0:T.replace("_"," ").toUpperCase())||"N/A"),1)]),i("p",null,[C[12]||(C[12]=i("strong",{class:"text-gray-900"},"Project Type:",-1)),W(" "+f(e.project.project_type||"N/A"),1)]),i("p",null,[C[13]||(C[13]=i("strong",{class:"text-gray-900"},"Source:",-1)),W(" "+f(e.project.source||"N/A"),1)]),i("div",Lm,[i("button",{onClick:$,class:"p-2 bg-gray-100 rounded-full hover:bg-gray-200 transition-colors",title:"Add Resource"},C[14]||(C[14]=[i("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])),e.project.website?(d(),u("a",{key:0,href:e.project.website,target:"_blank",class:"p-2 bg-gray-100 rounded-full hover:bg-gray-200 transition-colors",title:"Visit Website"},C[15]||(C[15]=[i("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"})],-1)]),8,Pm)):k("",!0),e.project.social_media_link?(d(),u("a",{key:1,href:e.project.social_media_link,target:"_blank",class:"p-2 bg-gray-100 rounded-full hover:bg-gray-200 transition-colors",title:"Social Media"},C[16]||(C[16]=[i("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})],-1)]),8,Um)):k("",!0),e.project.google_drive_link?(d(),u("a",{key:2,href:e.project.google_drive_link,target:"_blank",class:"p-2 bg-gray-100 rounded-full hover:bg-gray-200 transition-colors",title:"Google Drive"},C[17]||(C[17]=[i("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)]),8,Rm)):k("",!0),r.value?(d(),u("div",Fm," Loading resources... ")):(d(!0),u(X,{key:4},le(o.value,z=>(d(),u("div",{key:z.id,class:"relative"},[i("div",Wm,[i("button",{onClick:Ue(ge=>N(z.id),["prevent"]),class:"resource-button p-2 bg-gray-100 rounded-full hover:bg-gray-200 transition-colors block"},[z.type==="link"?(d(),u("svg",Bm,C[18]||(C[18]=[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101"},null,-1),i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.172 13.828a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.102 1.101"},null,-1)]))):(d(),u("svg",zm,C[19]||(C[19]=[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"},null,-1)])))],8,Hm),m.value===z.id?(d(),u("div",qm,[i("div",Gm,[i("div",Zm,[i("h4",Jm,f(z.name),1),i("button",{onClick:Ue(A,["prevent"]),class:"text-gray-400 hover:text-gray-600"},C[20]||(C[20]=[i("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),z.description?(d(),u("p",Km,f(z.description),1)):k("",!0),i("div",Qm,[i("a",{href:z.url,target:"_blank",class:"text-xs text-indigo-600 hover:text-indigo-800"}," Open Link ",8,Xm),i("div",ev,[i("button",{onClick:Ue(ge=>S(z),["prevent"]),class:"p-1 text-gray-500 hover:text-indigo-600",title:"Edit"},C[21]||(C[21]=[i("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,tv),i("button",{onClick:Ue(ge=>R(z.id),["prevent"]),class:"p-1 text-gray-500 hover:text-red-600",title:"Delete"},C[22]||(C[22]=[i("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,sv)])])]),C[23]||(C[23]=i("div",{class:"absolute left-5 bottom-0 transform translate-y-1/2 rotate-45 w-2 h-2 bg-white border-r border-b border-gray-200"},null,-1))])):k("",!0)])]))),128))])])])]),h(fm,{show:l.value,"project-id":e.projectId,resource:n.value,onClose:C[3]||(C[3]=z=>l.value=!1),onSaved:Q},null,8,["show","project-id","resource"]),h(rt,{show:v.value,onClose:te},{default:L(()=>[i("div",av,[C[26]||(C[26]=i("h2",{class:"text-lg font-medium text-gray-900 mb-4"}," Send Magic Link ",-1)),x.value?(d(),u("div",lv,f(x.value),1)):k("",!0),D.value.general?(d(),u("div",iv,f(D.value.general[0]),1)):k("",!0),i("form",{onSubmit:Ue(Y,["prevent"])},[i("div",nv,[h(B,{for:"client",value:"Select Client"}),_.value?(d(),u("div",ov,"Loading clients...")):y.value?(d(),u("div",rv,f(y.value),1)):(d(),oe(Jt,{key:2,id:"client",modelValue:g.value.client_ids,"onUpdate:modelValue":C[4]||(C[4]=z=>g.value.client_ids=z),options:M.value,placeholder:"Select a client","label-key":"name","track-by":"id",class:"mt-1"},null,8,["modelValue","options"])),h(de,{message:D.value.client_ids?D.value.client_ids[0]:"",class:"mt-2"},null,8,["message"]),C[24]||(C[24]=i("p",{class:"mt-2 text-sm text-gray-500"}," Select a client to send them a magic link for project access. ",-1))]),i("div",dv,[h(je,{onClick:te,class:"mr-3"},{default:L(()=>C[25]||(C[25]=[W(" Cancel ",-1)])),_:1,__:[25]}),h(_e,{type:"submit",class:"bg-purple-600 hover:bg-purple-700 transition-colors",disabled:p.value},{default:L(()=>[W(f(p.value?"Sending...":"Send Magic Link"),1)]),_:1},8,["disabled"])])],32)])]),_:1},8,["show"]),h($m,{show:c.value,"project-id":e.projectId,clients:M.value,onClose:C[5]||(C[5]=z=>c.value=!1)},null,8,["show","project-id","clients"])],64)}}},cv=qe(uv,[["__scopeId","data-v-f8fc7685"]]),mv={class:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-6"},vv={class:"bg-white p-4 rounded-xl shadow-md hover:shadow-lg transition-shadow"},hv={class:"text-2xl font-bold text-indigo-600"},pv={class:"bg-white p-4 rounded-xl shadow-md hover:shadow-lg transition-shadow"},fv={class:"text-2xl font-bold text-indigo-600"},yv={class:"bg-white p-4 rounded-xl shadow-md hover:shadow-lg transition-shadow"},gv={class:"text-2xl font-bold text-indigo-600"},_v={class:"bg-white p-4 rounded-xl shadow-md hover:shadow-lg transition-shadow"},wv={class:"text-2xl font-bold text-indigo-600"},bv={__name:"ProjectStatsCards",props:{tasks:{type:Array,required:!0},emails:{type:Array,required:!0}},setup(e){const t=e,s=U(()=>t.tasks.filter(o=>o.status!=="Done").length),a=U(()=>t.emails.filter(o=>o.type==="received").length),l=U(()=>{const o=t.emails.filter(r=>r.status==="received"||r.type==="received");if(o.length>0){const r=[...o].sort((m,c)=>new Date(c.created_at)-new Date(m.created_at));return new Date(r[0].created_at).toLocaleDateString()}return"N/A"}),n=U(()=>{const o=t.tasks.filter(r=>r.status!=="Done");if(o.length>0){const r=o.filter(m=>m.due_date);if(r.length>0)return[...r].sort((c,v)=>new Date(c.due_date)-new Date(v.due_date))[0].due_date}return"N/A"});return(o,r)=>(d(),u("div",mv,[i("div",vv,[r[0]||(r[0]=i("h4",{class:"text-sm font-semibold text-gray-500 mb-1"},"Pending Tasks",-1)),i("p",hv,f(s.value),1)]),i("div",pv,[r[1]||(r[1]=i("h4",{class:"text-sm font-semibold text-gray-500 mb-1"},"Received Emails",-1)),i("p",fv,f(a.value),1)]),i("div",yv,[r[2]||(r[2]=i("h4",{class:"text-sm font-semibold text-gray-500 mb-1"},"Last Email Received",-1)),i("p",gv,f(l.value),1)]),i("div",_v,[r[3]||(r[3]=i("h4",{class:"text-sm font-semibold text-gray-500 mb-1"},"Next Task Deadline",-1)),i("p",wv,f(n.value),1)])]))}},xv={class:"bg-white p-4 rounded-xl shadow-md mb-6"},kv={class:"border-b border-gray-200"},Dv={class:"-mb-px flex space-x-8 overflow-x-auto"},Sv={__name:"ProjectTabsNavigation",props:{selectedTab:{type:String,default:null},canViewEmails:{type:Boolean,required:!0},canViewNotes:{type:Boolean,required:!0},canViewDeliverables:{type:Boolean,required:!0},canViewSeoReports:{type:Boolean,required:!0}},emits:["update:selectedTab"],setup(e,{emit:t}){const s=e,a=t,l=U({get:()=>s.selectedTab,set:n=>a("update:selectedTab",n)});return(n,o)=>(d(),u("div",xv,[i("div",kv,[i("nav",Dv,[i("button",{onClick:o[0]||(o[0]=r=>l.value=null),class:ae([l.value===null?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])}," Overview ",2),i("button",{onClick:o[1]||(o[1]=r=>l.value="tasks"),class:ae([l.value==="tasks"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])}," Project Tasks ",2),e.canViewEmails?(d(),u("button",{key:0,onClick:o[2]||(o[2]=r=>l.value="emails"),class:ae([l.value==="emails"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])}," Email Communication ",2)):k("",!0),e.canViewNotes?(d(),u("button",{key:1,onClick:o[3]||(o[3]=r=>l.value="notes"),class:ae([l.value==="notes"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])}," Notes ",2)):k("",!0),e.canViewNotes?(d(),u("button",{key:2,onClick:o[4]||(o[4]=r=>l.value="standups"),class:ae([l.value==="standups"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])}," Daily Standups ",2)):k("",!0),e.canViewDeliverables?(d(),u("button",{key:3,onClick:o[5]||(o[5]=r=>l.value="deliverables"),class:ae([l.value==="deliverables"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])}," Deliverables ",2)):k("",!0),e.canViewSeoReports?(d(),u("button",{key:4,onClick:o[6]||(o[6]=r=>l.value="seo-reports"),class:ae([l.value==="seo-reports"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])}," SEO Reports ",2)):k("",!0)])])]))}},Mv={class:"space-y-4"},Cv={key:0,class:"text-sm text-gray-500"},Tv={class:"flex justify-between items-center"},Ev={key:0,class:"text-sm text-gray-500"},$v="put",jv="Update Task",Ov="Task updated successfully!",Vv={__name:"EditTaskModal",props:{show:Boolean,projectId:Number,selectedTask:Object,projectUsers:Array,taskTypes:Array,milestones:Array,loadingTaskTypes:Boolean,loadingMilestones:Boolean},emits:["close","saved","open-add-milestone-modal"],setup(e,{emit:t}){const s=e,a=t,l=Ne({name:"",description:"",assigned_to_user_id:null,due_date:null,status:"To Do",task_type_id:null,milestone_id:null}),n=["To Do","In Progress","Done","Blocked","Archived"],o=U(()=>"Edit Task"),r=U(()=>{var x;return`/api/tasks/${(x=s.selectedTask)==null?void 0:x.id}`});pe(()=>[s.show,s.selectedTask],([x,M],[_,y]=[])=>{var j;if(x&&M){let $=null;if(M.milestone){const Q=s.milestones.find(N=>N.name===M.milestone);Q&&($=Q.id)}else M.milestone_id&&($=M.milestone_id);let S=null;if(M.task_type){const Q=s.taskTypes.find(N=>N.name===M.task_type);Q&&(S=Q.id)}else M.task_type_id&&(S=M.task_type_id);let R=null;if(M.assigned_to&&M.assigned_to!=="Unassigned"){const Q=(j=s.projectUsers)==null?void 0:j.find(N=>N.name===M.assigned_to);Q&&(R=Q.id)}else M.assigned_to_id&&(R=M.assigned_to_id);Object.assign(l,{name:M.title,description:M.description||"",assigned_to_user_id:R,due_date:M.due_date||null,status:M.status,task_type_id:S,milestone_id:$})}else x||Object.assign(l,{name:"",description:"",assigned_to_user_id:null,due_date:null,status:"To Do",task_type_id:null,milestone_id:null})},{immediate:!0});const m=x=>{a("saved",x),a("close")},c=()=>{a("open-add-milestone-modal")},v=()=>{a("close")},p=U(()=>s.projectUsers.map(x=>({value:x.id,label:x.name}))),g=U(()=>s.taskTypes.map(x=>({value:x.id,label:x.name}))),D=U(()=>s.milestones.map(x=>({value:x.id,label:x.name})));return(x,M)=>(d(),oe(Qe,{show:e.show,title:o.value,"api-endpoint":r.value,"http-method":$v,"form-data":l,"submit-button-text":jv,"success-message":Ov,onClose:v,onSubmitted:m},{default:L(({errors:_})=>[i("div",Mv,[i("div",null,[h(B,{for:"task-name",value:"Task Name"}),h(fe,{id:"task-name",modelValue:l.name,"onUpdate:modelValue":M[0]||(M[0]=y=>l.name=y),type:"text",class:"mt-1 block w-full",placeholder:"Enter task name",required:""},null,8,["modelValue"]),h(de,{message:_.name?_.name[0]:"",class:"mt-2"},null,8,["message"])]),i("div",null,[h(B,{for:"task-description",value:"Description"}),we(i("textarea",{id:"task-description","onUpdate:modelValue":M[1]||(M[1]=y=>l.description=y),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",rows:"3",placeholder:"Enter task description"},null,512),[[Ve,l.description]]),h(de,{message:_.description?_.description[0]:"",class:"mt-2"},null,8,["message"])]),i("div",null,[h(B,{for:"task-status",value:"Status"}),h(Me,{id:"task-status",modelValue:l.status,"onUpdate:modelValue":M[2]||(M[2]=y=>l.status=y),options:n.map(y=>({value:y,label:y})),"value-key":"value","label-key":"label",placeholder:"Select status",class:"mt-1"},null,8,["modelValue","options"]),h(de,{message:_.status?_.status[0]:"",class:"mt-2"},null,8,["message"])]),i("div",null,[h(B,{for:"task-due-date",value:"Due Date"}),h(fe,{id:"task-due-date",modelValue:l.due_date,"onUpdate:modelValue":M[3]||(M[3]=y=>l.due_date=y),type:"date",class:"mt-1 block w-full"},null,8,["modelValue"]),h(de,{message:_.due_date?_.due_date[0]:"",class:"mt-2"},null,8,["message"])]),i("div",null,[h(B,{for:"task-assigned-to",value:"Assigned To"}),h(Me,{id:"task-assigned-to",modelValue:l.assigned_to_user_id,"onUpdate:modelValue":M[4]||(M[4]=y=>l.assigned_to_user_id=y),options:p.value,"value-key":"value","label-key":"label",placeholder:"Unassigned",class:"mt-1","allow-empty":!0},null,8,["modelValue","options"]),h(de,{message:_.assigned_to_user_id?_.assigned_to_user_id[0]:"",class:"mt-2"},null,8,["message"])]),i("div",null,[h(B,{for:"task-type",value:"Task Type"}),e.loadingTaskTypes?(d(),u("div",Cv,"Loading task types...")):(d(),oe(Me,{key:1,id:"task-type",modelValue:l.task_type_id,"onUpdate:modelValue":M[5]||(M[5]=y=>l.task_type_id=y),options:g.value,"value-key":"value","label-key":"label",placeholder:"Select a task type",class:"mt-1","allow-empty":!0},null,8,["modelValue","options"])),h(de,{message:_.task_type_id?_.task_type_id[0]:"",class:"mt-2"},null,8,["message"])]),i("div",null,[i("div",Tv,[h(B,{for:"task-milestone",value:"Milestone"}),i("button",{type:"button",onClick:c,class:"text-sm text-indigo-600 hover:text-indigo-800"}," + Create New Milestone ")]),e.loadingMilestones?(d(),u("div",Ev,"Loading milestones...")):(d(),oe(Me,{key:1,id:"task-milestone",modelValue:l.milestone_id,"onUpdate:modelValue":M[6]||(M[6]=y=>l.milestone_id=y),options:D.value,"value-key":"value","label-key":"label",placeholder:"No milestone",class:"mt-1","allow-empty":!0},null,8,["modelValue","options"])),h(de,{message:_.milestone_id?_.milestone_id[0]:"",class:"mt-2"},null,8,["message"])])])]),_:1},8,["show","title","api-endpoint","form-data"]))}},Av={class:"space-y-4"},Yv={key:0,class:"mb-4 p-3 bg-gray-100 rounded-md"},Iv={class:"text-sm font-medium text-gray-900"},Nv={class:"text-xs text-gray-500 mt-1"},Lv={class:"mb-4"},Pv="post",Uv="Add Note",Rv="Note added successfully!",El={__name:"TaskNoteModal",props:{show:Boolean,taskForNote:Object},emits:["close","note-added"],setup(e,{emit:t}){const s=e,a=t,l=Ne({note:""}),n=U(()=>{var c;return`Add Note to Task: "${(c=s.taskForNote)==null?void 0:c.name}"`}),o=U(()=>{var c;return`/api/tasks/${(c=s.taskForNote)==null?void 0:c.id}/notes`});pe(()=>s.show,c=>{c&&Object.assign(l,{note:""})},{immediate:!0});const r=c=>{a("note-added",c),a("close")},m=()=>{a("close")};return(c,v)=>(d(),oe(Qe,{show:e.show,title:n.value,"api-endpoint":o.value,"http-method":Pv,"form-data":l,"submit-button-text":Uv,"success-message":Rv,onClose:m,onSubmitted:r},{default:L(({errors:p})=>[i("div",Av,[e.taskForNote?(d(),u("div",Yv,[i("p",Iv,f(e.taskForNote.name),1),i("p",Nv,"Status: "+f(e.taskForNote.status),1)])):k("",!0),i("div",Lv,[h(B,{for:"task-note-content",value:"Note Content"}),we(i("textarea",{id:"task-note-content","onUpdate:modelValue":v[0]||(v[0]=g=>l.note=g),class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full h-32",placeholder:"Enter your note...",required:""},null,512),[[Ve,l.note]]),h(de,{message:p.note?p.note[0]:"",class:"mt-2"},null,8,["message"])])])]),_:1},8,["show","title","api-endpoint","form-data"]))}},Fv={class:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow"},Wv={class:"flex justify-between items-center mb-4"},Hv={class:"flex gap-2"},Bv={key:0},zv={key:1},qv={class:"mb-6 overflow-x-auto"},Gv={key:0,class:"text-center text-gray-600 text-sm animate-pulse py-4"},Zv={key:1,class:"text-center py-4"},Jv={key:2,class:"relative py-8"},Kv={class:"relative flex justify-between"},Qv={key:0,class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Xv={key:1,class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},eh={key:2,class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},th={key:3,class:"w-2 h-2 bg-white rounded-full"},sh={class:"absolute -top-8 transform -translate-x-1/2 left-1/2 w-32"},ah=["title"],lh={class:"absolute top-8 transform -translate-x-1/2 left-1/2"},ih={class:"text-xs text-gray-500 whitespace-nowrap"},nh={class:"mb-6 bg-gray-50 p-4 rounded-lg"},oh={class:"flex flex-wrap items-center gap-4"},rh={class:"flex-1 min-w-[200px]"},dh={class:"flex-1 min-w-[200px]"},uh={class:"flex-1 min-w-[200px]"},ch={class:"flex-1 min-w-[200px]"},mh={key:0,class:"mt-3 text-sm text-gray-600"},vh={key:0,class:"text-red-600 font-medium"},hh={key:0,class:"text-center text-gray-600 text-sm animate-pulse py-4"},ph={key:1,class:"text-center py-4"},fh={class:"text-red-600 text-sm font-medium"},yh={key:2,class:"overflow-x-auto"},gh={class:"min-w-full divide-y divide-gray-200"},_h={class:"bg-white divide-y divide-gray-200"},wh={class:"px-4 py-3 text-sm text-gray-900"},bh={class:"px-4 py-3 text-sm text-gray-700"},xh={class:"px-4 py-3 text-sm text-gray-700"},kh={class:"px-4 py-3 text-sm text-gray-700"},Dh={class:"px-4 py-3 text-sm text-gray-700"},Sh={class:"px-4 py-3 text-right"},Mh={class:"flex justify-end space-x-2"},Ch=["onClick"],Th=["onClick"],Eh=["onClick"],$h=["onClick"],jh=["onClick"],Oh={key:3,class:"text-center py-4"},Vh={__name:"ProjectTasksTab",props:{projectId:{type:Number,required:!0},projectUsers:{type:Array,default:()=>[]},canManageProjects:{type:Boolean,required:!0}},emits:["tasksUpdated","openTaskDetailSidebar","open-create-task-modal"],setup(e,{emit:t}){const s=e,a=t,l=b([]),n=b(!0),o=b(""),r=b(!1),m=b(null),c=b(!1),v=b(!1),p=b(null),g=b([]),D=b([]),x=b(!1),M=b(!1),_=Ne({status:"",assigned_to_user_id:null,milestone_id:null,due_date_range:""}),y=[{value:"",label:"All Statuses"},{value:"To Do",label:"To Do"},{value:"In Progress",label:"In Progress"},{value:"Done",label:"Done"},{value:"Blocked",label:"Blocked"},{value:"Archived",label:"Archived"}],j=U(()=>{const se=[{value:null,label:"All Users"},{value:-1,label:"Unassigned"}];return se.push(...s.projectUsers.map(Z=>({value:Z.id,label:Z.name}))),se}),$=U(()=>{const se=[{value:null,label:"All Milestones"},{value:-1,label:"No Milestone"}];return se.push(...D.value.map(Z=>({value:Z.id,label:Z.name}))),se}),S=[{value:"",label:"All Dates"},{value:"today",label:"Due Today"},{value:"this_week",label:"Due This Week"},{value:"next_week",label:"Due Next Week"},{value:"overdue",label:"Overdue"},{value:"no_date",label:"No Due Date"}],R=U(()=>!D.value||!D.value.length?[]:[...D.value].sort((se,Z)=>se.completion_date?Z.completion_date?new Date(se.completion_date)-new Date(Z.completion_date):-1:1)),Q=U(()=>l.value.length?l.value.filter(se=>{if(_.status&&se.status!==_.status)return!1;if(_.assigned_to_user_id!==null){const Z=parseInt(_.assigned_to_user_id);if(Z===-1){if(se.assigned_to!=="Unassigned"&&se.assigned_to_id!==null)return!1}else if(se.assigned_to_id!==Z)return!1}if(_.milestone_id!==null){const Z=parseInt(_.milestone_id);if(Z===-1){if(se.milestone_id)return!1}else if(se.milestone_id!==Z)return!1}if(_.due_date_range){const Z=new Date;Z.setHours(0,0,0,0);const K=se.due_date?new Date(se.due_date):null;switch(_.due_date_range){case"today":if(!K||K.toDateString()!==Z.toDateString())return!1;break;case"this_week":{if(!K)return!1;const $e=new Date(Z);if($e.setDate(Z.getDate()+(6-Z.getDay())),K<Z||K>$e)return!1;break}case"next_week":{if(!K)return!1;const $e=new Date(Z);$e.setDate(Z.getDate()+(7-Z.getDay()));const Nt=new Date($e);if(Nt.setDate($e.getDate()+6),K<$e||K>Nt)return!1;break}case"overdue":{if(!K||K>=Z)return!1;break}case"no_date":{if(K)return!1;break}}}return!0}):[]),N=()=>{_.status="",_.assigned_to_user_id=null,_.milestone_id=null,_.due_date_range=""},A=async()=>{n.value=!0,o.value="";try{const se=await window.axios.get(`/api/projects/${s.projectId}/tasks`);l.value=se.data,a("tasksUpdated",l.value)}catch(se){o.value="Failed to load tasks data.",console.error("Error fetching project tasks:",se),se.response&&se.response.data&&se.response.data.message&&(o.value=se.response.data.message)}finally{n.value=!1}},O=async()=>{x.value=!0;try{const se=await window.axios.get("/api/task-types");g.value=se.data}catch(se){console.error("Error fetching task types:",se)}finally{x.value=!1}},E=async()=>{M.value=!0;try{const se=await window.axios.get(`/api/projects/${s.projectId}/milestones`);D.value=se.data}catch(se){console.error("Error fetching milestones:",se)}finally{M.value=!1}},V=()=>{a("open-create-task-modal")},F=async se=>{m.value=se,await O(),await E(),r.value=!0},te=()=>{A()},Y=se=>{console.log("ProjectTasksTab: Emitting open-task-detail-sidebar for taskId:",se.id),a("openTaskDetailSidebar",se.id)},w=()=>{c.value=!0},C=se=>{D.value.push(se),A()},T=se=>{p.value=se,v.value=!0},z=()=>{A()},ge=async se=>{try{await window.axios.post(`/api/tasks/${se.id}/complete`),await A()}catch(Z){console.error("Error marking task as completed:",Z),alert("Failed to mark task as completed. Please try again.")}},xt=async se=>{try{await window.axios.post(`/api/tasks/${se.id}/start`),await A()}catch(Z){console.error("Error starting task:",Z),alert("Failed to start task. Please try again.")}};return Ye(()=>{A(),O(),E()}),pe(()=>s.projectUsers,()=>{}),pe(()=>s.taskTypes,()=>{}),pe(()=>s.milestones,()=>{}),(se,Z)=>(d(),u("div",Fv,[i("div",Wv,[Z[8]||(Z[8]=i("h4",{class:"text-lg font-semibold text-gray-900"},"Project Tasks",-1)),i("div",Hv,[h(je,{onClick:A,disabled:n.value,class:"text-indigo-600 hover:text-indigo-800"},{default:L(()=>[n.value?(d(),u("span",zv,"Loading...")):(d(),u("span",Bv,"Refresh"))]),_:1},8,["disabled"]),e.canManageProjects?(d(),oe(_e,{key:0,class:"bg-indigo-600 hover:bg-indigo-700 transition-colors",onClick:V},{default:L(()=>Z[7]||(Z[7]=[W(" Add Task ",-1)])),_:1,__:[7]})):k("",!0)])]),i("div",qv,[M.value?(d(),u("div",Gv," Loading milestones... ")):R.value.length?(d(),u("div",Jv,[Z[13]||(Z[13]=i("div",{class:"absolute h-1 bg-gray-200 top-1/2 left-0 right-0 transform -translate-y-1/2"},null,-1)),i("div",Kv,[(d(!0),u(X,null,le(R.value,(K,$e)=>(d(),u("div",{key:K.id,class:ae(["flex flex-col items-center relative z-10",{"ml-4":$e===0,"mr-4":$e===R.value.length-1}])},[i("div",{class:ae(["w-6 h-6 rounded-full shadow-lg flex items-center justify-center",{"bg-gray-300":K.status==="Not Started","bg-blue-500":K.status==="In Progress","bg-green-500":K.status==="Completed","bg-red-500":K.status==="Overdue"}])},[K.status==="Completed"?(d(),u("svg",Qv,Z[10]||(Z[10]=[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)]))):K.status==="In Progress"?(d(),u("svg",Xv,Z[11]||(Z[11]=[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"},null,-1)]))):K.status==="Overdue"?(d(),u("svg",eh,Z[12]||(Z[12]=[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)]))):(d(),u("span",th))],2),i("div",sh,[i("p",{class:"text-xs font-medium text-gray-700 text-center truncate",title:K.name},f(K.name),9,ah)]),i("div",lh,[i("p",ih,f(K.completion_date?new Date(K.completion_date).toLocaleDateString():"No date"),1)])],2))),128))])])):(d(),u("div",Zv,Z[9]||(Z[9]=[i("p",{class:"text-gray-400 text-sm"},"No milestones found for this project.",-1)])))]),i("div",nh,[i("div",oh,[i("div",rh,[h(B,{for:"status-filter",value:"Status"}),h(Me,{id:"status-filter",modelValue:_.status,"onUpdate:modelValue":Z[0]||(Z[0]=K=>_.status=K),options:y,"value-key":"value","label-key":"label",placeholder:"All Statuses",class:"mt-1"},null,8,["modelValue"])]),i("div",dh,[h(B,{for:"assigned-filter",value:"Assigned To"}),h(Me,{id:"assigned-filter",modelValue:_.assigned_to_user_id,"onUpdate:modelValue":Z[1]||(Z[1]=K=>_.assigned_to_user_id=K),options:j.value,"value-key":"value","label-key":"label",placeholder:"All Users",class:"mt-1"},null,8,["modelValue","options"])]),i("div",uh,[h(B,{for:"milestone-filter",value:"Milestone"}),h(Me,{id:"milestone-filter",modelValue:_.milestone_id,"onUpdate:modelValue":Z[2]||(Z[2]=K=>_.milestone_id=K),options:$.value,"value-key":"value","label-key":"label",placeholder:"All Milestones",class:"mt-1"},null,8,["modelValue","options"])]),i("div",ch,[h(B,{for:"due-date-filter",value:"Due Date"}),h(Me,{id:"due-date-filter",modelValue:_.due_date_range,"onUpdate:modelValue":Z[3]||(Z[3]=K=>_.due_date_range=K),options:S,"value-key":"value","label-key":"label",placeholder:"All Dates",class:"mt-1"},null,8,["modelValue"])]),i("div",{class:"flex items-end"},[i("button",{type:"button",onClick:N,class:"px-3 py-2 text-sm text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-md transition-colors"}," Clear Filters ")])]),Object.values(_).some(K=>K!==null&&K!=="")?(d(),u("div",mh,[i("p",null,[W(" Showing "+f(Q.value.length)+" of "+f(l.value.length)+" tasks ",1),Q.value.length===0?(d(),u("span",vh," (No tasks match the current filters) ")):k("",!0)])])):k("",!0)]),n.value?(d(),u("div",hh," Loading tasks... ")):o.value?(d(),u("div",ph,[i("p",fh,f(o.value),1)])):l.value.length?(d(),u("div",yh,[i("table",gh,[Z[14]||(Z[14]=i("thead",{class:"bg-gray-50"},[i("tr",null,[i("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Title"),i("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),i("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Assigned To"),i("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Due Date"),i("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Milestone"),i("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),i("tbody",_h,[(d(!0),u(X,null,le(Q.value,K=>(d(),u("tr",{key:K.id,class:"hover:bg-gray-50 transition-colors"},[i("td",wh,f(K.title),1),i("td",bh,[i("span",{class:ae({"px-2 py-1 rounded-full text-xs font-medium":!0,"bg-yellow-100 text-yellow-800":K.status==="To Do","bg-blue-100 text-blue-800":K.status==="In Progress","bg-green-100 text-green-800":K.status==="Done","bg-red-100 text-red-800":K.status==="Blocked","bg-gray-100 text-gray-800":K.status==="Archived"})},f(K.status),3)]),i("td",xh,f(K.assigned_to),1),i("td",kh,f(K.due_date?K.due_date:"N/A"),1),i("td",Dh,f(K.milestone||"N/A"),1),i("td",Sh,[i("div",Mh,[i("button",{onClick:$e=>Y(K),class:"text-purple-600 hover:text-purple-800 text-sm font-medium"}," View ",8,Ch),i("button",{onClick:$e=>F(K),class:"text-indigo-600 hover:text-indigo-800 text-sm font-medium"}," Edit ",8,Th),i("button",{onClick:$e=>T(K),class:"text-blue-600 hover:text-blue-800 text-sm font-medium"}," Add Note ",8,Eh),K.status==="To Do"?(d(),u("button",{key:0,onClick:$e=>xt(K),class:"text-blue-600 hover:text-blue-800 text-sm font-medium"}," Start ",8,$h)):k("",!0),K.status!=="Done"?(d(),u("button",{key:1,onClick:$e=>ge(K),class:"text-green-600 hover:text-green-800 text-sm font-medium"}," Complete ",8,jh)):k("",!0)])])]))),128))])])])):(d(),u("div",Oh,Z[15]||(Z[15]=[i("p",{class:"text-gray-400 text-sm"},"No tasks found for this project.",-1),i("p",{class:"text-gray-500 text-sm mt-2"},' Click the "Add Task" button to create a new task. ',-1)]))),h(Vv,{show:r.value,"project-id":e.projectId,"selected-task":m.value,"project-users":e.projectUsers,"task-types":g.value,milestones:D.value,"loading-task-types":x.value,"loading-milestones":M.value,onClose:Z[4]||(Z[4]=K=>r.value=!1),onSaved:te,onOpenAddMilestoneModal:w},null,8,["show","project-id","selected-task","project-users","task-types","milestones","loading-task-types","loading-milestones"]),h(ei,{show:c.value,"project-id":e.projectId,onClose:Z[5]||(Z[5]=K=>c.value=!1),onSaved:C},null,8,["show","project-id"]),h(El,{show:v.value,"task-for-note":p.value,onClose:Z[6]||(Z[6]=K=>v.value=!1),onNoteAdded:z},null,8,["show","task-for-note"])]))}};function $l(e){const t=l=>{const n=/\[([^\]]+?)\][\s\u00A0]*\{([^}]+?)\}/g;return l.replace(n,(o,r,m)=>{let c=m.trim();return!c.startsWith("http://")&&!c.startsWith("https://")&&(c=`https://${c}`),`<a href="${c}" target="_blank" style="color: #1a73e8; text-decoration: underline;">${r.trim()}</a>`})},s=l=>{const n=/<(ul|ol)>(.*?)<\/(ul|ol)>/gs;return l.replace(n,(o,r,m)=>{const c=r,v=c==="ul"?"list-style-type: disc;":"list-style-type: decimal;",p=/<li>(.*?)<\/li>/gs,g=m.replace(p,(D,x)=>`<li style="margin-bottom: 5px; font-family: 'Inter', sans-serif; font-size: 16px; line-height: 1.6; color: #1a202c;">${x}</li>`);return`<${c} style="margin: 0; padding: 0 0 0 20px; ${v}">${g}</${c}>`})};return{processedHtmlBody:U(()=>{let l=e.value;return l=t(l),l=s(l),l})}}const Ah={key:0},Yh={class:"mb-4"},Ih={class:"mb-6"},Nh={class:"mb-2 flex justify-end space-x-2"},Lh={class:"mb-2 flex justify-end space-x-2"},Ph={key:1},Uh={class:"mb-6"},Rh={class:"p-6"},Fh={key:0,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert"},Wh={class:"block sm:inline"},Hh={class:"mb-4"},Bh={class:"mb-6"},zh={class:"flex justify-end space-x-3"},qh={class:"p-6"},Gh={key:0,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert"},Zh={class:"block sm:inline"},Jh={class:"mb-4"},Kh={class:"mb-6"},Qh={class:"flex justify-end space-x-3"},Xh={__name:"EmailActionModal",props:{show:{type:Boolean,default:!1},title:{type:String,required:!0},apiEndpoint:{type:String,required:!0},httpMethod:{type:String,default:"post"},initialFormData:{type:Object,default:()=>({})},submitButtonText:{type:String,default:"Save"},successMessage:{type:String,default:"Operation successful!"},emailId:{type:Number,required:!1},projectId:{type:Number,required:!0}},emits:["close","submitted","error","fetchEmails"],setup(e,{emit:t}){const s=e,a=t,l=Ne({}),n=b(!1),o=b(""),r=b(""),m=b(""),c=b(!1),v=b(""),p=b("bullet"),g=b(""),D=U(()=>l.body||""),{processedHtmlBody:x}=$l(D);pe(()=>s.show,V=>{if(V){for(const F in l)delete l[F];Object.assign(l,JSON.parse(JSON.stringify(s.initialFormData)))}},{immediate:!0});const M=V=>{const F={...V};return s.title==="Edit and Approve Email"&&(F.body=x.value),F},_=()=>{a("close")},y=V=>{a("submitted",V)},j=V=>{a("error",V)},$=()=>{o.value="",r.value="",m.value="",n.value=!0},S=()=>{if(!o.value.trim()){m.value="Link text cannot be empty.";return}let V=r.value.trim();!V.startsWith("http://")&&!V.startsWith("https://")&&(V="http://"+V);try{new URL(V)}catch{m.value="Please enter a valid URL (e.g., https://example.com or www.example.com).";return}const F=`[${o.value.trim()}] {${V}}`;l.body+=F,n.value=!1,o.value="",r.value="",m.value=""},R=()=>{v.value="",p.value="bullet",g.value="",c.value=!0},Q=()=>{const V=v.value.split(`
`).map(Y=>Y.trim()).filter(Y=>Y!=="");if(V.length===0){g.value="Please enter at least one list item.";return}const F=p.value==="bullet"?"ul":"ol";let te=`<${F}>`;V.forEach(Y=>{te+=`<li>${Y}</li>`}),te+=`</${F}>`,l.body+=te,c.value=!1,v.value="",g.value=""},N=b({}),A=b(!1),O=async()=>{A.value=!0;try{await window.axios.post(`/api/emails/${s.emailId}/update`,{subject:l.subject,body:l.body}),typeof success=="function"?success("Email approved successfully!"):console.log("Email approved successfully!"),A.value=!1}catch(V){A.value=!1,V.response&&V.response.data.message?N.value=V.response.data.message:(N.value="Failed to approve email.",console.error("Error approving email directly:",V)),typeof V=="function"&&V(N.value)}},E=()=>{if(s.emailId){const V=`/emails/${s.emailId}/preview`;window.open(V,"_blank")}else console.warn("Cannot preview email: Email ID not available.")};return(V,F)=>(d(),u(X,null,[h(Qe,{show:e.show,title:e.title,"api-endpoint":e.apiEndpoint,"http-method":e.httpMethod,"form-data":l,"submit-button-text":e.submitButtonText,"success-message":e.successMessage,"format-data-for-api":M,onClose:_,onSubmitted:y,onError:j,"max-width":"3xl"},{default:L(({errors:te})=>[e.title==="Edit and Approve Email"?(d(),u("div",Ah,[i("div",Yh,[h(B,{for:"edit_subject",value:"Subject"}),h(fe,{id:"edit_subject",type:"text",class:"mt-1 block w-full",modelValue:l.subject,"onUpdate:modelValue":F[0]||(F[0]=Y=>l.subject=Y),required:""},null,8,["modelValue"]),h(de,{message:te.subject?te.subject[0]:"",class:"mt-2"},null,8,["message"])]),i("div",Ih,[i("div",Nh,[h(je,{type:"button",onClick:R},{default:L(()=>F[11]||(F[11]=[W(" Insert List ",-1)])),_:1,__:[11]}),h(je,{type:"button",onClick:$},{default:L(()=>F[12]||(F[12]=[W(" Insert Link ",-1)])),_:1,__:[12]})]),h(B,{for:"edit_body",value:"Email Body",class:"sr-only"}),h(Ya,{id:"edit_body",modelValue:l.body,"onUpdate:modelValue":F[1]||(F[1]=Y=>l.body=Y),placeholder:"Edit your email here...",height:"300px"},null,8,["modelValue"]),h(de,{message:te.body?te.body[0]:"",class:"mt-2"},null,8,["message"])]),i("div",Lh,[h(_e,{type:"button",disabled:A.value,onClick:O},{default:L(()=>[W(f(A.value?"Saving...":"Save"),1)]),_:1},8,["disabled"]),h(je,{type:"button",onClick:E},{default:L(()=>F[13]||(F[13]=[W(" Preview Email ",-1)])),_:1,__:[13]})])])):e.title==="Reject Email"?(d(),u("div",Ph,[i("div",Uh,[h(B,{for:"rejection_reason",value:"Rejection Reason"}),we(i("textarea",{id:"rejection_reason",rows:"5",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full","onUpdate:modelValue":F[2]||(F[2]=Y=>l.rejection_reason=Y),required:"",placeholder:"Please provide a reason for rejecting this email (minimum 10 characters)"},null,512),[[Ve,l.rejection_reason]]),h(de,{message:te.rejection_reason?te.rejection_reason[0]:"",class:"mt-2"},null,8,["message"])])])):k("",!0)]),_:1},8,["show","title","api-endpoint","http-method","form-data","submit-button-text","success-message"]),h(rt,{show:n.value,onClose:F[6]||(F[6]=te=>n.value=!1),"max-width":"md"},{default:L(()=>[i("div",Rh,[F[16]||(F[16]=i("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Insert Link",-1)),m.value?(d(),u("div",Fh,[i("span",Wh,f(m.value),1)])):k("",!0),i("div",Hh,[h(B,{for:"link_text",value:"Link Text"}),h(fe,{id:"link_text",type:"text",class:"mt-1 block w-full",modelValue:o.value,"onUpdate:modelValue":F[3]||(F[3]=te=>o.value=te),onKeyup:jt(S,["enter"])},null,8,["modelValue"])]),i("div",Bh,[h(B,{for:"link_url",value:"URL"}),h(fe,{id:"link_url",type:"text",class:"mt-1 block w-full",modelValue:r.value,"onUpdate:modelValue":F[4]||(F[4]=te=>r.value=te),placeholder:"e.g., https://www.example.com",onKeyup:jt(S,["enter"])},null,8,["modelValue"])]),i("div",zh,[h(je,{onClick:F[5]||(F[5]=te=>n.value=!1)},{default:L(()=>F[14]||(F[14]=[W("Cancel",-1)])),_:1,__:[14]}),h(_e,{onClick:S},{default:L(()=>F[15]||(F[15]=[W("Insert",-1)])),_:1,__:[15]})])])]),_:1},8,["show"]),h(rt,{show:c.value,onClose:F[10]||(F[10]=te=>c.value=!1),"max-width":"md"},{default:L(()=>[i("div",qh,[F[20]||(F[20]=i("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Insert List",-1)),g.value?(d(),u("div",Gh,[i("span",Zh,f(g.value),1)])):k("",!0),i("div",Jh,[h(B,{for:"list_items",value:"List Items (one per line)"}),we(i("textarea",{id:"list_items",rows:"6",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full","onUpdate:modelValue":F[7]||(F[7]=te=>v.value=te),placeholder:"Enter each list item on a new line"},null,512),[[Ve,v.value]])]),i("div",Kh,[h(B,{for:"list_type",value:"List Type"}),we(i("select",{id:"list_type",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full","onUpdate:modelValue":F[8]||(F[8]=te=>p.value=te)},F[17]||(F[17]=[i("option",{value:"bullet"},"Bulleted List",-1),i("option",{value:"numbered"},"Numbered List",-1)]),512),[[Kt,p.value]])]),i("div",Qh,[h(je,{onClick:F[9]||(F[9]=te=>c.value=!1)},{default:L(()=>F[18]||(F[18]=[W("Cancel",-1)])),_:1,__:[18]}),h(_e,{onClick:Q},{default:L(()=>F[19]||(F[19]=[W("Insert List",-1)])),_:1,__:[19]})])])]),_:1},8,["show"])],64))}},ep=qe(Xh,[["__scopeId","data-v-53db9e10"]]);function tp(e){const t=Ot();return{userSignature:U(()=>{const a=t.value&&t.value.name?t.value.name:"",l=e.name??"",n="+61 456 639 389",o="ozeeweb.com.au",r="#1a73e8",m="#fbbc05",c="#1a202c",v="#4a5568",p="#e5e7eb",g="#f9fafb",D=`${window.location.origin}/logo.png`,x=`https://img.icons8.com/ios-filled/20/${r.substring(1)}/facebook-new.png`,M=`https://img.icons8.com/ios-filled/20/${r.substring(1)}/twitter.png`,_=`https://img.icons8.com/ios-filled/20/${r.substring(1)}/linkedin.png`,y=`https://img.icons8.com/ios-filled/20/${r.substring(1)}/instagram-new.png`;return`
            <div style="font-family: 'Inter', sans-serif; padding: 20px; border: 1px solid ${p}; margin-top: 30px; background-color: ${g}; border-radius: 8px; overflow: hidden; box-shadow: 0 0 0 3px ${m};">
                <table role="presentation" cellspacing="0" cellpadding="0" width="100%">
                    <tr>
                        <td style="vertical-align: middle;">
                            <p style="margin: 0; font-size: 18px; color: ${c};">Best Regards</p>
                            <p style="margin: 0; font-size: 18px; font-weight: bold; color: ${c};">${a}</p>
                            <p style="margin: 5px 0 5px 0; font-size: 14px; color: ${v};">${l}</p>
                            <p style="margin: 0 0 15px 0; font-size: 12px; color: ${v};">
                                Your website and social media are like your home, first impressions matter!
                            </p>
                            <table role="presentation" cellspacing="0" cellpadding="0">
                                <tr>
                                    <td style="padding-right: 15px;">
                                        <p style="margin: 0; font-size: 13px; color: ${v};">📞 ${n}</p>
                                        <p style="margin: 5px 0 0 0; font-size: 13px; color: ${v};">🌐 <a href="https://${o}" target="_blank" style="color: ${r}; text-decoration: none;">${o}</a></p>
                                    </td>
                                </tr>
                            </table>
                            <div style="margin-top: 15px; text-align: left;">
                                <a href="https://www.facebook.com/yourprofile" target="_blank" style="display: inline-block; margin-right: 8px; color: ${r}; text-decoration: none;">
                                    <img src="${x}" alt="Facebook" style="vertical-align: middle;">
                                </a>
                                <a href="https://twitter.com/yourhandle" target="_blank" style="display: inline-block; margin-right: 8px; color: ${r}; text-decoration: none;">
                                    <img src="${M}" alt="Twitter" style="vertical-align: middle;">
                                </a>
                                <a href="https://www.linkedin.com/in/yourprofile" target="_blank" style="display: inline-block; margin-right: 8px; color: ${r}; text-decoration: none;">
                                    <img src="${_}" alt="LinkedIn" style="vertical-align: middle;">
                                </a>
                                <a href="https://www.instagram.com/yourprofile" target="_blank" style="display: inline-block; margin-right: 8px; color: ${r}; text-decoration: none;">
                                    <img src="${y}" alt="Instagram" style="vertical-align: middle;">
                                </a>
                            </div>
                        </td>
                        <td style="padding-left: 20px; vertical-align: middle; width: 120px; text-align: right;">
                            <img src="${D}" alt="Company Logo" width="100" style="display: block; border-radius: 8px; margin-left: auto;">
                        </td>
                    </tr>
                </table>

                <p style="margin-top: 25px; font-size: 12px; color: ${v}; text-align: center;">
                    Powered by MMS IT & Web Solutions PTY Ltd.
                </p>
                <p style="margin-top: 10px; font-style: italic; color: ${v}; text-align: center; font-size: 13px;">
                    Please consider the environment before printing this email.
                </p>
                <p style="margin-top: 10px; text-align: center; font-size: 13px;">
                    How did I do? <a href="https://www.example.com/review" target="_blank" style="color: ${r}; text-decoration: none; font-weight: bold;">Leave a review!</a>
                </p>
            </div>
        `})}}const sp={class:"mb-4"},ap={key:0,class:"text-gray-500 text-sm"},lp={key:1,class:"text-red-500 text-sm"},ip={class:"mb-4"},np={class:"mb-6"},op={class:"mb-2 flex justify-end space-x-2"},rp={class:"mb-4"},dp={key:0,class:"mt-2"},up={class:"text-gray-700 text-base mb-2"},cp=["innerHTML"],mp={class:"p-6"},vp={key:0,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert"},hp={class:"block sm:inline"},pp={class:"mb-4"},fp={class:"mb-6"},yp={class:"flex justify-end space-x-3"},gp={class:"p-6"},_p={key:0,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert"},wp={class:"block sm:inline"},bp={class:"mb-4"},xp={class:"mb-6"},kp={class:"flex justify-end space-x-3"},Dp={__name:"ComponseEmailModal",props:{show:{type:Boolean,default:!1},projectId:{type:Number,required:!0},userProjectRole:{type:Object,required:!0}},emits:["close","submitted","error"],setup(e,{emit:t}){const s=e,a=t,l=Ne({project_id:s.projectId,client_ids:[],subject:"",body:"",status:"pending_approval"}),n=b([]),o=b(!0),r=b(""),m=b(!1),c=b(""),v=b(""),p=b(""),g=b(!1),D=b(""),x=b("bullet"),M=b(""),_=b("full_name"),y=b(""),j=b([{value:"full_name",label:"Full Name"},{value:"first_name",label:"First Name"},{value:"last_name",label:"Last Name"},{value:"custom",label:"Custom"}]),{userSignature:$}=tp(U(()=>s.userProjectRole)),S=U(()=>l.body||""),{processedHtmlBody:R}=$l(S),Q=U(()=>{if(l.client_ids&&l.client_ids.length>0){const C=l.client_ids[0],T=n.value.find(z=>z.id===C);if(T){const z=T.name.split(" ").filter(se=>se.length>0),ge=z.length>0?z[0]:"",xt=z.length>1?z[z.length-1]:"";switch(_.value){case"full_name":return`Hi ${T.name},`;case"first_name":return`Hi ${ge},`;case"last_name":return`Hi ${xt},`;case"custom":return`Hi ${y.value.trim()||"there"},`;default:return`Hi ${T.name},`}}}return"Hi there,"});pe(()=>s.show,C=>{C&&(Object.assign(l,{project_id:s.projectId,client_ids:[],subject:"",body:"",status:"pending_approval"}),_.value="full_name",y.value="",r.value="",w())},{immediate:!0});const N=C=>{const T={...C};return T.client_ids&&Array.isArray(T.client_ids)&&(T.client_ids=T.client_ids.map(z=>({id:z}))),T.body=R.value,T.greeting_name=Q.value,T.custom_greeting_name=y.value.trim(),T.first_client_id=l.client_ids&&l.client_ids.length>0?l.client_ids[0]:null,T},A=()=>{a("close")},O=C=>{a("submitted",C)},E=C=>{a("error",C)},V=()=>{c.value="",v.value="",p.value="",m.value=!0},F=()=>{if(!c.value.trim()){p.value="Link text cannot be empty.";return}let C=v.value.trim();!C.startsWith("http://")&&!C.startsWith("https://")&&(C="http://"+C);try{new URL(C)}catch{p.value="Please enter a valid URL (e.g., https://example.com or www.example.com).";return}const T=`[${c.value.trim()}] {${C}}`;l.body+=T,m.value=!1,c.value="",v.value="",p.value=""},te=()=>{D.value="",x.value="bullet",M.value="",g.value=!0},Y=()=>{const C=D.value.split(`
`).map(ge=>ge.trim()).filter(ge=>ge!=="");if(C.length===0){M.value="Please enter at least one list item.";return}const T=x.value==="bullet"?"ul":"ol";let z=`<${T}>`;C.forEach(ge=>{z+=`<li>${ge}</li>`}),z+=`</${T}>`,l.body+=z,g.value=!1,D.value="",M.value=""},w=async()=>{var C,T;o.value=!0,r.value=null;try{const z=await window.axios.get(`/api/projects/${s.projectId}/sections/clients?type=clients`);n.value=z.data}catch(z){console.error("Failed to fetch project clients:",z),r.value=((T=(C=z.response)==null?void 0:C.data)==null?void 0:T.message)||"Failed to load client data."}finally{o.value=!1}};return Ye(()=>{}),(C,T)=>(d(),u(X,null,[h(Qe,{show:e.show,title:"Compose New Email","api-endpoint":"/api/emails","http-method":"post","form-data":l,"submit-button-text":"Submit for Approval","success-message":"Email submitted for approval successfully!","format-data-for-api":N,onClose:A,onSubmitted:O,onError:E,"max-width":"3xl"},{default:L(({errors:z})=>[i("div",sp,[h(B,{for:"client_ids",value:"To (Clients)"}),o.value?(d(),u("div",ap,"Loading clients...")):r.value?(d(),u("div",lp,f(r.value),1)):(d(),oe(Jt,{key:2,modelValue:l.client_ids,"onUpdate:modelValue":T[0]||(T[0]=ge=>l.client_ids=ge),options:n.value,placeholder:"Select one or more clients","label-key":"name","value-key":"id"},null,8,["modelValue","options"])),h(de,{message:z.client_ids?z.client_ids[0]:"",class:"mt-2"},null,8,["message"])]),i("div",ip,[h(B,{for:"subject",value:"Subject"}),h(fe,{id:"subject",type:"text",class:"mt-1 block w-full",modelValue:l.subject,"onUpdate:modelValue":T[1]||(T[1]=ge=>l.subject=ge),required:""},null,8,["modelValue"]),h(de,{message:z.subject?z.subject[0]:"",class:"mt-2"},null,8,["message"])]),i("div",np,[i("div",op,[h(je,{type:"button",onClick:te},{default:L(()=>T[13]||(T[13]=[W(" Insert List ",-1)])),_:1,__:[13]}),h(je,{type:"button",onClick:V},{default:L(()=>T[14]||(T[14]=[W(" Insert Link ",-1)])),_:1,__:[14]})]),i("div",rp,[h(B,{for:"greeting_type",value:"Address Client By"}),h(Me,{id:"greeting_type",modelValue:_.value,"onUpdate:modelValue":T[2]||(T[2]=ge=>_.value=ge),options:j.value,"value-key":"value","label-key":"label",class:"mt-1 block w-full"},null,8,["modelValue","options"]),_.value==="custom"?(d(),u("div",dp,[h(B,{for:"custom_greeting_name",value:"Custom Name"}),h(fe,{id:"custom_greeting_name",type:"text",class:"mt-1 block w-full",modelValue:y.value,"onUpdate:modelValue":T[3]||(T[3]=ge=>y.value=ge),placeholder:"e.g., Azaan"},null,8,["modelValue"])])):k("",!0)]),i("p",up,f(Q.value),1),h(B,{for:"body",value:"Email Body",class:"sr-only"}),h(Ya,{id:"body",modelValue:l.body,"onUpdate:modelValue":T[4]||(T[4]=ge=>l.body=ge),placeholder:"Compose your email here...",height:"300px"},null,8,["modelValue"]),h(de,{message:z.body?z.body[0]:"",class:"mt-2"},null,8,["message"])]),J($)?(d(),u("div",{key:0,class:"unselectable-signature",innerHTML:J($)},null,8,cp)):k("",!0)]),_:1},8,["show","form-data"]),h(rt,{show:m.value,onClose:T[8]||(T[8]=z=>m.value=!1),"max-width":"md"},{default:L(()=>[i("div",mp,[T[17]||(T[17]=i("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Insert Link",-1)),p.value?(d(),u("div",vp,[i("span",hp,f(p.value),1)])):k("",!0),i("div",pp,[h(B,{for:"link_text",value:"Link Text"}),h(fe,{id:"link_text",type:"text",class:"mt-1 block w-full",modelValue:c.value,"onUpdate:modelValue":T[5]||(T[5]=z=>c.value=z),onKeyup:jt(F,["enter"])},null,8,["modelValue"])]),i("div",fp,[h(B,{for:"link_url",value:"URL"}),h(fe,{id:"link_url",type:"text",class:"mt-1 block w-full",modelValue:v.value,"onUpdate:modelValue":T[6]||(T[6]=z=>v.value=z),placeholder:"e.g., https://www.example.com",onKeyup:jt(F,["enter"])},null,8,["modelValue"])]),i("div",yp,[h(je,{onClick:T[7]||(T[7]=z=>m.value=!1)},{default:L(()=>T[15]||(T[15]=[W("Cancel",-1)])),_:1,__:[15]}),h(_e,{onClick:F},{default:L(()=>T[16]||(T[16]=[W("Insert",-1)])),_:1,__:[16]})])])]),_:1},8,["show"]),h(rt,{show:g.value,onClose:T[12]||(T[12]=z=>g.value=!1),"max-width":"md"},{default:L(()=>[i("div",gp,[T[21]||(T[21]=i("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Insert List",-1)),M.value?(d(),u("div",_p,[i("span",wp,f(M.value),1)])):k("",!0),i("div",bp,[h(B,{for:"list_items",value:"List Items (one per line)"}),we(i("textarea",{id:"list_items",rows:"6",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full","onUpdate:modelValue":T[9]||(T[9]=z=>D.value=z),placeholder:"Enter each list item on a new line"},null,512),[[Ve,D.value]])]),i("div",xp,[h(B,{for:"list_type",value:"List Type"}),we(i("select",{id:"list_type",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full","onUpdate:modelValue":T[10]||(T[10]=z=>x.value=z)},T[18]||(T[18]=[i("option",{value:"bullet"},"Bulleted List",-1),i("option",{value:"numbered"},"Numbered List",-1)]),512),[[Kt,x.value]])]),i("div",kp,[h(je,{onClick:T[11]||(T[11]=z=>g.value=!1)},{default:L(()=>T[19]||(T[19]=[W("Cancel",-1)])),_:1,__:[19]}),h(_e,{onClick:Y},{default:L(()=>T[20]||(T[20]=[W("Insert List",-1)])),_:1,__:[20]})])])]),_:1},8,["show"])],64))}},jl=qe(Dp,[["__scopeId","data-v-70bf1503"]]),Sp={key:0,class:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow"},Mp={class:"flex justify-between items-center mb-4"},Cp={key:0,class:"flex gap-3"},Tp={key:1,class:"mt-2 bg-red-100 border border-red-400 text-red-700 px-4 py-2 rounded relative",role:"alert"},Ep={class:"block sm:inline"},$p={class:"mb-4 bg-gray-50 p-4 rounded-lg"},jp={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Op={class:"mt-1 relative rounded-md shadow-sm"},Vp={key:0,class:"text-center text-gray-600 text-sm animate-pulse py-4"},Ap={key:1,class:"text-center text-red-600 text-sm font-medium py-4"},Yp={key:2,class:"overflow-x-auto"},Ip={class:"min-w-full divide-y divide-gray-200"},Np={class:"bg-white divide-y divide-gray-200"},Lp={class:"px-4 py-3 text-sm text-gray-900"},Pp={class:"px-4 py-3 text-sm text-gray-700"},Up={class:"px-4 py-3 text-sm text-gray-700"},Rp={class:"px-4 py-3 text-sm text-gray-700"},Fp={class:"px-4 py-3 text-sm text-gray-700"},Wp={class:"px-4 py-3 text-right"},Hp={key:3,class:"text-gray-400 text-sm"},Bp={class:"p-6"},zp={class:"flex justify-between items-center mb-4"},qp={key:0,class:"space-y-4"},Gp={class:"border-b pb-4"},Zp={class:"text-xl font-medium text-gray-900 mb-2"},Jp={class:"grid grid-cols-2 gap-4 text-sm"},Kp={class:"text-gray-600"},Qp={class:"text-gray-900"},Xp={class:"text-gray-600 mt-1"},ef={class:"text-gray-600"},tf={class:"text-gray-900"},sf={class:"prose max-w-none"},af=["innerHTML"],lf={key:0,class:"mt-4 p-4 bg-red-50 rounded-md"},nf={class:"text-red-700"},of={key:1,class:"mt-4 text-sm text-gray-600"},rf={key:0},df={key:2,class:"mt-6 flex justify-end space-x-2"},uf={__name:"ProjectEmailsTab",props:{projectId:{type:Number,required:!0},canViewEmails:{type:Boolean,required:!0},canComposeEmails:{type:Boolean,required:!0},canApproveEmails:{type:Boolean,required:!0},userProjectRole:{type:Object,required:!0},openCompose:{type:Boolean,required:!1,default:!1}},emits:["emailsUpdated","resetOpenCompose"],setup(e,{emit:t}){const s=e,a=t,l=b([]),n=b(!0),o=b(""),r=b(null),m=b(!1),c=b(!1),v=b(""),p=b(""),g=b("post"),D=b(""),x=b(""),M=Ne({}),_=b(!1);Ot();const y=Ne({type:"",startDate:"",endDate:"",search:""});let j=null;const $=()=>{Q()},S=()=>{y.type="",y.startDate="",y.endDate="",y.search="",Q()},R=()=>{clearTimeout(j),j=setTimeout(()=>{$()},500)},Q=async()=>{n.value=!0,o.value="";try{const Y=new URLSearchParams;y.type&&Y.append("type",y.type),y.startDate&&Y.append("start_date",y.startDate),y.endDate&&Y.append("end_date",y.endDate),y.search&&Y.append("search",y.search);const w=Y.toString(),C=`/api/projects/${s.projectId}/emails-simplified${w?`?${w}`:""}`,T=await window.axios.get(C);l.value=T.data,a("emailsUpdated",l.value)}catch(Y){o.value="Failed to load email data.",console.error("Error fetching project emails:",Y)}finally{n.value=!1}},N=Y=>{r.value=Y,m.value=!0},A=Y=>{r.value=Y,v.value="Edit and Approve Email",p.value=`/api/emails/${Y.id}/edit-and-approve`,g.value="post",D.value="Approve & Send",x.value="Email updated and approved successfully!";let w=Y.body||"";Object.assign(M,{subject:Y.subject,body:w}),c.value=!0,m.value=!1},O=Y=>{r.value=Y,v.value="Reject Email",p.value=`/api/emails/${Y.id}/reject`,g.value="post",D.value="Reject Email",x.value="Email rejected successfully!",Object.assign(M,{rejection_reason:""}),c.value=!0,m.value=!1},E=async Y=>{console.log("Form submitted successfully:",Y),await Q(),c.value=!1},V=()=>{c.value=!1},F=()=>{_.value=!1,a("resetOpenCompose")},te=async Y=>{console.log("Compose email submitted successfully:",Y),await Q(),_.value=!1,a("resetOpenCompose")};return pe(()=>s.openCompose,Y=>{console.log("Watcher triggered: openCompose changed to",Y),Y&&(console.log("Opening compose email modal"),_.value=!0)}),Ye(()=>{s.canViewEmails&&Q(),s.openCompose&&(_.value=!0)}),(Y,w)=>{var C;return e.canViewEmails?(d(),u("div",Sp,[i("div",Mp,[w[12]||(w[12]=i("h4",{class:"text-lg font-semibold text-gray-900"},"Email Communication",-1)),e.canComposeEmails?(d(),u("div",Cp,[h(_e,{class:"bg-indigo-600 hover:bg-indigo-700 transition-colors",onClick:w[0]||(w[0]=T=>_.value=!0)},{default:L(()=>w[11]||(w[11]=[W(" Compose Email ",-1)])),_:1,__:[11]})])):k("",!0),o.value?(d(),u("div",Tp,[i("span",Ep,f(o.value),1)])):k("",!0)]),i("div",$p,[i("div",jp,[i("div",null,[h(B,{for:"typeFilter",value:"Type"}),we(i("select",{id:"typeFilter","onUpdate:modelValue":w[1]||(w[1]=T=>y.type=T),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",onChange:$},w[13]||(w[13]=[i("option",{value:""},"All Types",-1),i("option",{value:"sent"},"Sent",-1),i("option",{value:"received"},"Received",-1)]),544),[[Kt,y.type]])]),i("div",null,[h(B,{for:"startDate",value:"From Date"}),h(fe,{type:"date",id:"startDate",modelValue:y.startDate,"onUpdate:modelValue":w[2]||(w[2]=T=>y.startDate=T),class:"mt-1 block w-full",onChange:$},null,8,["modelValue"])]),i("div",null,[h(B,{for:"endDate",value:"To Date"}),h(fe,{type:"date",id:"endDate",modelValue:y.endDate,"onUpdate:modelValue":w[3]||(w[3]=T=>y.endDate=T),class:"mt-1 block w-full",onChange:$},null,8,["modelValue"])]),i("div",null,[h(B,{for:"searchFilter",value:"Search Content"}),i("div",Op,[h(fe,{type:"text",id:"searchFilter",modelValue:y.search,"onUpdate:modelValue":w[4]||(w[4]=T=>y.search=T),class:"block w-full pr-10",placeholder:"Search in email content...",onInput:R},null,8,["modelValue"]),w[14]||(w[14]=i("div",{class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},[i("svg",{class:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[i("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})])],-1))])])]),i("div",{class:"mt-3 flex justify-end"},[i("button",{type:"button",class:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:S}," Reset Filters ")])]),n.value?(d(),u("div",Vp," Loading email data... ")):o.value?(d(),u("div",Ap,f(o.value),1)):l.value.length?(d(),u("div",Yp,[i("table",Ip,[w[16]||(w[16]=i("thead",{class:"bg-gray-50"},[i("tr",null,[i("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Subject"),i("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"From"),i("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date"),i("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Type"),i("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),i("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),i("tbody",Np,[(d(!0),u(X,null,le(l.value,T=>{var z;return d(),u("tr",{key:T.id,class:"hover:bg-gray-50 transition-colors"},[i("td",Lp,f(T.subject),1),i("td",Pp,f(((z=T.sender)==null?void 0:z.name)||"N/A"),1),i("td",Up,f(new Date(T.created_at).toLocaleDateString()),1),i("td",Rp,[i("span",{class:ae({"px-2 py-1 rounded-full text-xs font-medium":!0,"bg-blue-100 text-blue-800":T.type==="sent","bg-purple-100 text-purple-800":T.type==="received"})},f(T.type?T.type.toUpperCase():"N/A"),3)]),i("td",Fp,[i("span",{class:ae({"px-2 py-1 rounded-full text-xs font-medium":!0,"bg-green-100 text-green-800":T.status==="sent","bg-yellow-100 text-yellow-800":T.status==="pending_approval","bg-blue-200 text-blue-900":T.status==="pending_approval_received","bg-red-100 text-red-800":T.status==="rejected","bg-gray-100 text-gray-800":T.status==="draft"})},f(T.status.replace("_"," ").toUpperCase()),3)]),i("td",Wp,[h(je,{class:"text-indigo-600 hover:text-indigo-800",onClick:ge=>N(T)},{default:L(()=>w[15]||(w[15]=[W(" View ",-1)])),_:2,__:[15]},1032,["onClick"])])])}),128))])])])):(d(),u("p",Hp,"No email communication found.")),h(rt,{show:m.value,onClose:w[8]||(w[8]=T=>m.value=!1)},{default:L(()=>{var T;return[i("div",Bp,[i("div",zp,[w[18]||(w[18]=i("h3",{class:"text-lg font-semibold text-gray-900"},"Email Details",-1)),i("button",{onClick:w[5]||(w[5]=z=>m.value=!1),class:"text-gray-400 hover:text-gray-500"},w[17]||(w[17]=[i("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),r.value?(d(),u("div",qp,[i("div",Gp,[i("h4",Zp,f(r.value.subject),1),i("div",Jp,[i("div",null,[i("p",Kp,[w[19]||(w[19]=W("From: ",-1)),i("span",Qp,f(((T=r.value.sender)==null?void 0:T.name)||"N/A"),1)]),i("p",Xp,[w[20]||(w[20]=W("Status: ",-1)),i("span",{class:ae({"px-2 py-1 rounded-full text-xs font-medium":!0,"bg-green-100 text-green-800":r.value.status==="sent","bg-yellow-100 text-yellow-800":r.value.status==="pending_approval","bg-red-100 text-red-800":r.value.status==="rejected","bg-gray-100 text-gray-800":r.value.status==="draft"})},f(r.value.status.replace("_"," ").toUpperCase()),3)])]),i("div",null,[i("p",ef,[w[21]||(w[21]=W("Date: ",-1)),i("span",tf,f(new Date(r.value.created_at).toLocaleString()),1)])])])]),i("div",sf,[i("div",{innerHTML:r.value.body},null,8,af)]),r.value.rejection_reason?(d(),u("div",lf,[w[22]||(w[22]=i("h5",{class:"font-medium text-red-800"},"Rejection Reason:",-1)),i("p",nf,f(r.value.rejection_reason),1)])):k("",!0),r.value.approver?(d(),u("div",of,[i("p",null,"Approved/Rejected by: "+f(r.value.approver.name),1),r.value.sent_at?(d(),u("p",rf,"Sent at: "+f(new Date(r.value.sent_at).toLocaleString()),1)):k("",!0)])):k("",!0),(r.value.status==="pending_approval"||r.value.status==="pending_approval_received")&&e.canApproveEmails?(d(),u("div",df,[h(_e,{onClick:w[6]||(w[6]=z=>A(r.value)),class:"bg-blue-600 hover:bg-blue-700"},{default:L(()=>w[23]||(w[23]=[W("Edit & Approve",-1)])),_:1,__:[23]}),h(je,{onClick:w[7]||(w[7]=z=>O(r.value)),class:"text-red-600 hover:text-red-800"},{default:L(()=>w[24]||(w[24]=[W("Reject",-1)])),_:1,__:[24]})])):k("",!0)])):k("",!0)])]}),_:1},8,["show"]),h(jl,{show:_.value,"project-id":e.projectId,"user-project-role":e.userProjectRole,onClose:F,onSubmitted:te,onError:w[9]||(w[9]=T=>console.error("ComposeEmailModal error:",T))},null,8,["show","project-id","user-project-role"]),h(ep,{show:c.value,title:v.value,"api-endpoint":p.value,"http-method":g.value,"initial-form-data":M,"submit-button-text":D.value,"success-message":x.value,"email-id":(C=r.value)==null?void 0:C.id,"project-id":e.projectId,onClose:V,onSubmitted:E,onError:w[10]||(w[10]=T=>console.error("EmailActionModal error:",T))},null,8,["show","title","api-endpoint","http-method","initial-form-data","submit-button-text","success-message","email-id","project-id"])])):k("",!0)}}},cf={key:0,class:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow"},mf={class:"flex justify-between items-center mb-4"},vf={class:"flex gap-3"},hf={class:"mb-4 bg-gray-50 p-4 rounded-lg"},pf={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},ff={class:"mt-1 relative rounded-md shadow-sm"},yf={class:"mb-8 p-4 bg-blue-50 rounded-md"},gf={class:"flex items-center"},_f={class:"text-sm text-blue-800"},wf={key:0,class:"text-center text-gray-600 text-sm animate-pulse py-4"},bf={key:1,class:"text-center text-red-600 text-sm font-medium py-4"},xf={key:2,class:"space-y-4"},kf={class:"flex justify-between"},Df={class:"flex-grow"},Sf={key:0,class:"text-xs text-red-400 block mt-1"},Mf={class:"flex items-center mt-1"},Cf={class:"text-xs text-gray-500"},Tf={key:0,class:"ml-2 px-2 py-0.5 bg-indigo-100 text-indigo-800 text-xs rounded-full"},Ef={key:0},$f={key:3,class:"text-gray-400 text-sm"},jf={class:"p-6"},Of={class:"flex justify-between items-center mb-4"},Vf={key:0,class:"mb-4 p-3 bg-gray-100 rounded-md"},Af={class:"text-sm text-gray-700"},Yf={class:"text-xs text-gray-500 mt-1"},If={key:1,class:"mb-4"},Nf={key:0,class:"text-center py-4"},Lf={key:1,class:"space-y-3 max-h-60 overflow-y-auto"},Pf={class:"text-sm text-gray-700"},Uf={class:"text-xs text-gray-500 mt-1"},Rf={key:2,class:"text-center py-3"},Ff={key:2,class:"mb-4"},Wf={key:0,class:"mt-2 text-sm text-red-600"},Hf={key:3,class:"mt-6 flex justify-end"},Bf={__name:"ProjectNotesTab",props:{projectId:{type:Number,required:!0},googleChatId:{type:String,default:null},canViewNotes:{type:Boolean,required:!0},canAddNotes:{type:Boolean,required:!0}},emits:["notesUpdated"],setup(e,{emit:t}){const s=e,a=t,l=b([]),n=b(!0),o=b(""),r=b(!1),m=b(!1),c=b(null),v=b(""),p=b(""),g=b([]),D=b(!1),x=Ne({startDate:"",endDate:"",search:""});let M=null;const _=async()=>{n.value=!0,o.value="";try{const N=new URLSearchParams;x.startDate&&N.append("start_date",x.startDate),x.endDate&&N.append("end_date",x.endDate),x.search&&N.append("search",x.search);const A=N.toString(),O=`/api/projects/${s.projectId}/notes${A?`?${A}`:""}`,E=await window.axios.get(O);l.value=E.data,a("notesUpdated",l.value)}catch(N){o.value="Failed to load notes data.",console.error("Error fetching project notes:",N)}finally{n.value=!1}},y=()=>{r.value=!0},j=async N=>{c.value=N,v.value="",p.value="",g.value=[],D.value=!0,m.value=!0;try{const A=await window.axios.get(`/api/projects/${s.projectId}/notes/${N.id}/replies`);A.data.success?g.value=A.data.replies:console.error("Failed to fetch replies:",A.data.message)}catch(A){console.error("Error fetching replies:",A)}finally{D.value=!1}},$=async()=>{var N,A;if(!c.value||!v.value.trim()){p.value="Reply content is required";return}p.value="";try{const O=await window.axios.post(`/api/projects/${s.projectId}/notes/${c.value.id}/reply`,{content:v.value});if(O.data.success){v.value="",D.value=!0;const E=await window.axios.get(`/api/projects/${s.projectId}/notes/${c.value.id}/replies`);E.data.success&&(g.value=E.data.replies),D.value=!1,await _()}else p.value=O.data.message||"Failed to send reply"}catch(O){console.error("Error sending reply:",O),p.value=((A=(N=O.response)==null?void 0:N.data)==null?void 0:A.message)||"An error occurred while sending the reply"}},S=()=>{_()},R=()=>{x.startDate="",x.endDate="",x.search="",_()},Q=()=>{clearTimeout(M),M=setTimeout(()=>{S()},500)};return Ye(()=>{s.canViewNotes&&_()}),(N,A)=>e.canViewNotes?(d(),u("div",cf,[i("div",mf,[A[10]||(A[10]=i("h4",{class:"text-lg font-semibold text-gray-900"},"Project Notes",-1)),i("div",vf,[e.canAddNotes?(d(),oe(_e,{key:0,class:"bg-indigo-600 hover:bg-indigo-700 transition-colors",onClick:y},{default:L(()=>A[9]||(A[9]=[W(" Add Note ",-1)])),_:1,__:[9]})):k("",!0)])]),i("div",hf,[i("div",pf,[i("div",null,[h(B,{for:"noteStartDate",value:"From Date"}),h(fe,{type:"date",id:"noteStartDate",modelValue:x.startDate,"onUpdate:modelValue":A[0]||(A[0]=O=>x.startDate=O),class:"mt-1 block w-full",onChange:S},null,8,["modelValue"])]),i("div",null,[h(B,{for:"noteEndDate",value:"To Date"}),h(fe,{type:"date",id:"noteEndDate",modelValue:x.endDate,"onUpdate:modelValue":A[1]||(A[1]=O=>x.endDate=O),class:"mt-1 block w-full",onChange:S},null,8,["modelValue"])]),i("div",null,[h(B,{for:"noteSearchFilter",value:"Search Content"}),i("div",ff,[h(fe,{type:"text",id:"noteSearchFilter",modelValue:x.search,"onUpdate:modelValue":A[2]||(A[2]=O=>x.search=O),class:"block w-full pr-10",placeholder:"Search in note content...",onInput:Q},null,8,["modelValue"]),A[11]||(A[11]=i("div",{class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},[i("svg",{class:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[i("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})])],-1))])])]),i("div",{class:"mt-3 flex justify-end"},[i("button",{type:"button",class:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:R}," Reset Filters ")])]),i("div",yf,[i("div",gf,[A[13]||(A[13]=i("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-blue-600 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),i("p",_f,[A[12]||(A[12]=W(" Daily Standups are now available in their own dedicated tab. ",-1)),i("button",{onClick:A[3]||(A[3]=O=>N.$emit("changeTab","standups")),class:"text-blue-600 hover:text-blue-800 font-medium underline"}," Click here to view Daily Standups ")])])]),i("div",null,[A[15]||(A[15]=i("h5",{class:"text-md font-semibold text-gray-900 mb-4 border-b pb-2"},"Notes",-1)),n.value?(d(),u("div",wf," Loading notes... ")):o.value?(d(),u("div",bf,f(o.value),1)):l.value.length?(d(),u("div",xf,[(d(!0),u(X,null,le(l.value,O=>{var E;return d(),u("div",{key:O.id,class:"p-4 bg-gray-50 rounded-md shadow-sm hover:bg-gray-100 transition-colors"},[i("div",kf,[i("div",Df,[i("p",{class:ae(["text-sm",{"text-gray-700":O.content!=="[Encrypted content could not be decrypted]","text-red-500 italic":O.content==="[Encrypted content could not be decrypted]"}])},[W(f(O.content)+" ",1),O.content==="[Encrypted content could not be decrypted]"?(d(),u("span",Sf," (There was an issue decrypting this note. Please contact an administrator.) ")):k("",!0)],2),i("div",Mf,[i("p",Cf,"Added by "+f(((E=O.user)==null?void 0:E.name)||"Unknown")+" on "+f(new Date(O.created_at).toLocaleDateString()),1),O.reply_count>0?(d(),u("span",Tf,f(O.reply_count)+" "+f(O.reply_count===1?"reply":"replies"),1)):k("",!0)])]),e.googleChatId&&O.chat_message_id?(d(),u("div",Ef,[h(je,{class:"text-sm text-indigo-600 hover:text-indigo-800",onClick:V=>j(O)},{default:L(()=>A[14]||(A[14]=[W(" View ",-1)])),_:2,__:[14]},1032,["onClick"])])):k("",!0)])])}),128))])):(d(),u("p",$f,"No notes available."))]),h(Aa,{show:r.value,"project-id":e.projectId,onClose:A[4]||(A[4]=O=>r.value=!1),onNoteAdded:_},null,8,["show","project-id"]),h(rt,{show:m.value,onClose:A[8]||(A[8]=O=>m.value=!1)},{default:L(()=>{var O;return[i("div",jf,[i("div",Of,[A[17]||(A[17]=i("h3",{class:"text-lg font-semibold text-gray-900"},"Reply to Note",-1)),i("button",{onClick:A[5]||(A[5]=E=>m.value=!1),class:"text-gray-400 hover:text-gray-500"},A[16]||(A[16]=[i("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),c.value?(d(),u("div",Vf,[i("p",Af,f(c.value.content),1),i("p",Yf,"Added by "+f(((O=c.value.user)==null?void 0:O.name)||"Unknown")+" on "+f(new Date(c.value.created_at).toLocaleDateString()),1)])):k("",!0),c.value?(d(),u("div",If,[A[20]||(A[20]=i("h4",{class:"text-sm font-medium text-gray-700 mb-2"},"Replies",-1)),D.value?(d(),u("div",Nf,A[18]||(A[18]=[i("p",{class:"text-gray-500 text-sm"},"Loading replies...",-1)]))):g.value.length?(d(),u("div",Lf,[(d(!0),u(X,null,le(g.value,E=>{var V;return d(),u("div",{key:E.id,class:"p-2 bg-gray-50 rounded border-l-2 border-indigo-300"},[i("p",Pf,f(E.content),1),i("p",Uf,"Replied by "+f(((V=E.user)==null?void 0:V.name)||"Unknown")+" on "+f(new Date(E.created_at).toLocaleDateString()),1)])}),128))])):(d(),u("div",Rf,A[19]||(A[19]=[i("p",{class:"text-gray-500 text-sm"},"No replies yet. Be the first to reply!",-1)])))])):k("",!0),e.canAddNotes?(d(),u("div",Ff,[h(B,{for:"reply-content",value:"Your Reply"}),we(i("textarea",{id:"reply-content","onUpdate:modelValue":A[6]||(A[6]=E=>v.value=E),class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full h-32",placeholder:"Enter your reply..."},null,512),[[Ve,v.value]]),p.value?(d(),u("p",Wf,f(p.value),1)):k("",!0)])):k("",!0),e.canAddNotes?(d(),u("div",Hf,[h(je,{onClick:A[7]||(A[7]=E=>m.value=!1),class:"mr-2"},{default:L(()=>A[21]||(A[21]=[W("Cancel",-1)])),_:1,__:[21]}),h(_e,{onClick:$},{default:L(()=>A[22]||(A[22]=[W("Send Reply",-1)])),_:1,__:[22]})])):k("",!0)])]}),_:1},8,["show"])])):k("",!0)}},zf={class:"w-full"},qf={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},Gf={key:1,class:"text-red-600 text-sm py-2 text-center"},Zf={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},Jf={class:"p-4 bg-blue-100 rounded-lg shadow-sm transition-shadow hover:shadow-lg"},Kf={class:"text-2xl font-bold text-blue-900 mt-1"},Qf={class:"p-4 bg-green-100 rounded-lg shadow-sm transition-shadow hover:shadow-lg"},Xf={class:"text-2xl font-bold text-green-900 mt-1"},e0={class:"p-4 bg-red-100 rounded-lg shadow-sm transition-shadow hover:shadow-lg"},t0={class:"text-2xl font-bold mt-1"},s0={key:3,class:"space-y-2 text-sm text-gray-700 mt-6 pt-4 border-t border-gray-200"},a0={key:0},l0={class:"text-gray-900 whitespace-pre-wrap"},i0={key:4,class:"text-gray-400 text-sm mt-4 text-center"},n0={__name:"ProjectFinancialsCard",props:{projectId:{type:Number,required:!0},canViewProjectServicesAndPayments:{type:Boolean,default:!1},canViewProjectTransactions:{type:Boolean,default:!1}},setup(e){const t=e,s=b(null),a=b([]),l=b(!0),n=b(null),o=Wt,r=U(()=>{var D;if(!Te.value||Object.keys(Te.value).length===0)return 0;const g=parseFloat(((D=s.value)==null?void 0:D.total_amount)||0);return Ct(g,"USD",o.value)}),m=U(()=>!a.value.length||!Te.value||Object.keys(Te.value).length===0?0:a.value.filter(g=>g.type==="expense").reduce((g,D)=>g+Ct(parseFloat(D.amount||0),D.currency,o.value),0)),c=U(()=>!a.value.length||!Te.value||Object.keys(Te.value).length===0?0:a.value.filter(g=>g.type==="income").reduce((g,D)=>g+Ct(parseFloat(D.amount||0),D.currency,o.value),0)),v=U(()=>c.value-m.value),p=async()=>{var g,D;if(l.value=!0,n.value=null,a.value=[],!Te.value||Object.keys(Te.value).length===0){n.value="Currency rates not loaded. Please try again.",l.value=!1;return}if(!t.canViewProjectServicesAndPayments&&!t.canViewProjectTransactions){n.value="You don't have permission to view project financials.",l.value=!1;return}try{if(t.canViewProjectServicesAndPayments){const x=await window.axios.get(`/api/projects/${t.projectId}/sections/services-payment`);s.value=x.data}else s.value=null;if(t.canViewProjectTransactions){const x=await window.axios.get(`/api/projects/${t.projectId}/sections/transactions`);a.value=x.data}else a.value=[]}catch(x){console.error("Failed to fetch project financials:",x),n.value=((D=(g=x.response)==null?void 0:g.data)==null?void 0:D.message)||"Failed to load financial data."}finally{l.value=!1}};return pe([()=>t.canViewProjectServicesAndPayments,()=>t.canViewProjectTransactions,o,Te],(g,D)=>{t.projectId&&Te.value&&Object.keys(Te.value).length>0?p():t.projectId||(l.value=!0,n.value=null)},{immediate:!0,deep:!0}),(g,D)=>{var x,M;return d(),u("div",zf,[l.value?(d(),u("div",qf,[(d(),u(X,null,le(4,_=>i("div",{key:_,class:"p-4 bg-gray-100 rounded-lg animate-pulse h-24"},D[0]||(D[0]=[i("div",{class:"h-4 bg-gray-200 rounded w-1/2 mb-3"},null,-1),i("div",{class:"h-6 bg-gray-200 rounded w-3/4"},null,-1)]))),64))])):n.value?(d(),u("div",Gf,[i("p",null,f(n.value),1)])):(d(),u("div",Zf,[i("div",Jf,[D[1]||(D[1]=i("p",{class:"text-sm font-medium text-blue-800"},"Contract Value",-1)),i("p",Kf,f(J(gt)(r.value,J(o).value)),1)]),i("div",Qf,[D[2]||(D[2]=i("p",{class:"text-sm font-medium text-green-800"},"Total Income",-1)),i("p",Xf,f(J(gt)(c.value,J(o))),1)]),i("div",e0,[D[3]||(D[3]=i("p",{class:"text-sm font-medium text-red-800"},"Total Expenses",-1)),i("p",t0,f(J(gt)(m.value,J(o))),1)]),i("div",{class:ae(["p-4 rounded-lg shadow-sm transition-shadow hover:shadow-lg",{"bg-green-100":v.value>=0,"bg-red-100":v.value<0}])},[i("p",{class:ae(["text-sm font-medium",{"text-green-800":v.value>=0,"text-red-800":v.value<0}])},"Profit/Loss",2),i("p",{class:ae(["text-2xl font-bold mt-1",{"text-green-900":v.value>=0,"text-red-900":v.value<0}])},f(J(gt)(v.value,J(o))),3)],2)])),!l.value&&!n.value&&((x=s.value)!=null&&x.contract_details)?(d(),u("dl",s0,[(M=s.value)!=null&&M.contract_details?(d(),u("div",a0,[D[4]||(D[4]=i("dt",{class:"font-medium w-full block mt-2"},"Contract Details:",-1)),i("dd",l0,f(s.value.contract_details),1)])):k("",!0)])):k("",!0),!l.value&&!n.value&&!s.value&&!a.value.length?(d(),u("p",i0," No financial information available. ")):k("",!0)])}}},o0={class:"bg-white p-6 rounded-xl shadow-md transition-shadow hover:shadow-lg"},r0={key:0},d0={key:1,class:"text-red-600 text-sm py-2"},u0={key:2,class:"space-y-1 text-sm text-gray-700"},c0={key:0},m0={key:3,class:"text-gray-400 text-sm"},v0={__name:"ProjectClientsCard",props:{projectId:{type:Number,required:!0},canViewClientContacts:{type:Boolean,default:!1}},setup(e){const t=e,s=b([]),a=b(!0),l=b(null),n=async()=>{var o,r;if(a.value=!0,l.value=null,!t.canViewClientContacts){l.value="You don't have permission to view project clients.",a.value=!1;return}try{const m=await window.axios.get(`/api/projects/${t.projectId}/sections/clients?type=clients`);s.value=m.data}catch(m){console.error("Failed to fetch project clients:",m),l.value=((r=(o=m.response)==null?void 0:o.data)==null?void 0:r.message)||"Failed to load client data."}finally{a.value=!1}};return Ye(()=>{n()}),pe(()=>t.canViewClientContacts,()=>{n()}),(o,r)=>(d(),u("div",o0,[r[1]||(r[1]=i("h4",{class:"text-lg font-semibold text-gray-900 mb-4"},"Project Clients",-1)),a.value?(d(),u("div",r0,r[0]||(r[0]=[i("div",{class:"space-y-3"},[i("div",{class:"h-4 bg-gray-200 rounded animate-pulse w-3/4"}),i("div",{class:"h-4 bg-gray-200 rounded animate-pulse w-2/3"}),i("div",{class:"h-4 bg-gray-200 rounded animate-pulse w-1/2"})],-1)]))):l.value?(d(),u("div",d0,[i("p",null,f(l.value),1)])):s.value.length?(d(),u("ul",u0,[(d(!0),u(X,null,le(s.value,m=>(d(),u("li",{key:m.id},[W(f(m.name)+" ",1),m.email?(d(),u("span",c0,"("+f(m.email)+")",1)):k("",!0)]))),128))])):(d(),u("p",m0,"No clients assigned."))]))}},h0={class:"bg-white p-6 rounded-xl shadow-md transition-shadow hover:shadow-lg"},p0={key:0},f0={key:1,class:"text-red-600 text-sm py-2"},y0={key:2},g0={key:0,class:"space-y-2 text-sm text-gray-700 mb-4"},_0={class:"font-medium"},w0={class:"text-xs text-gray-500 mt-1"},b0={key:1,class:"text-gray-400 text-sm mb-4"},x0={__name:"ProjectTeamCard",props:{projectId:{type:Number,required:!0},canViewUsers:{type:Boolean,default:!1}},setup(e){const t=e,s=Ot(),a=b([]),l=b(!0),n=b(null),o=async()=>{var m,c;if(l.value=!0,n.value=null,!t.canViewUsers){n.value="You don't have permission to view project team members.",l.value=!1,a.value=[];return}try{const v=await window.axios.get(`/api/projects/${t.projectId}/sections/users`);a.value=v.data.users||[],console.log("Fetched team users:",a.value)}catch(v){console.error("Failed to fetch project users:",v),n.value=((c=(m=v.response)==null?void 0:m.data)==null?void 0:c.message)||"Failed to load team data."}finally{l.value=!1}},r=m=>{if(!m.availabilities||m.availabilities.length===0)return"No availability submitted for today.";const c=m.availabilities[0];return c.is_available?c.time_slots&&c.time_slots.length>0?`${c.time_slots.map(p=>`${p.start_time}-${p.end_time}`).join(", ")}`:"No specific slots provided.":`Not available today: ${c.reason||"No reason provided"}`};return Ye(()=>{o()}),pe([()=>t.canViewUsers,()=>s.value,()=>t.projectId],()=>{o()},{deep:!0}),(m,c)=>(d(),u("div",h0,[c[3]||(c[3]=i("h4",{class:"text-lg font-semibold text-gray-900 mb-4"},"Project Team",-1)),l.value?(d(),u("div",p0,c[0]||(c[0]=[i("div",{class:"space-y-3"},[i("div",{class:"h-4 bg-gray-200 rounded animate-pulse w-3/4"}),i("div",{class:"h-4 bg-gray-200 rounded animate-pulse w-2/3"}),i("div",{class:"h-4 bg-gray-200 rounded animate-pulse w-1/2"})],-1)]))):n.value?(d(),u("div",f0,[i("p",null,f(n.value),1)])):(d(),u("div",y0,[a.value.length?(d(),u("ul",g0,[(d(!0),u(X,null,le(a.value,v=>{var p;return d(),u("li",{key:v.id,class:"border-b pb-2 last:border-b-0"},[i("div",null,[i("strong",null,f(v.name),1),c[1]||(c[1]=W(" (Role: ",-1)),i("span",_0,f(((p=v.pivot)==null?void 0:p.role)||"N/A"),1),c[2]||(c[2]=W(") ",-1))]),i("div",w0," Today's Availability: "+f(r(v)),1)])}),128))])):(d(),u("p",b0,"No team members assigned."))]))]))}},k0={class:"bg-white p-6 rounded-xl shadow-md transition-shadow hover:shadow-lg"},D0={key:0,class:"space-y-3"},S0={key:1,class:"text-red-600 text-sm py-2 text-center"},M0={key:2},C0={class:"space-y-1 text-sm text-gray-700"},T0={key:0},E0={class:"inline-block text-gray-900"},$0={class:"inline-block text-gray-900"},j0={class:"inline-block text-gray-900"},O0={key:1},V0={key:0,class:"text-gray-400 text-sm"},A0={key:1,class:"text-gray-400 text-sm"},Y0={key:0,class:"mt-4 text-right"},I0={__name:"UserFinancialCard",props:{projectId:{type:Number,required:!0}},emits:["viewUserTransactions"],setup(e,{emit:t}){const s=e,a=t,l=Ot(),n=b(!0),o=b(null),r=b([]),m=Wt,c=async()=>{var M,_;if(n.value=!0,o.value=null,!l.value||!l.value.id||!s.projectId){r.value=[],n.value=!1;return}if(!Te.value||Object.keys(Te.value).length===0){o.value="Currency rates not loaded. Please try again.",n.value=!1;return}try{const y=await window.axios.get(`/api/projects/${s.projectId}/sections/transactions?user_id=${l.value.id}`);r.value=y.data,console.log("User-specific transactions:",r.value)}catch(y){console.error("Failed to fetch user transactions for UserFinancialsCard:",y),o.value=((_=(M=y.response)==null?void 0:M.data)==null?void 0:_.message)||"Failed to load your financial data.",r.value=[]}finally{n.value=!1}},v=U(()=>!l.value||!l.value.id||!r.value.length||!Te.value||Object.keys(Te.value).length===0?0:r.value.filter(_=>_.type==="expense").reduce((_,y)=>_+Ct(parseFloat(y.amount||0),y.currency,m.value),0)),p=U(()=>!l.value||!l.value.id||!r.value.length||!Te.value||Object.keys(Te.value).length===0?0:r.value.filter(_=>_.type==="bonus").reduce((_,y)=>_+Ct(parseFloat(y.amount||0),y.currency,m.value),0)),g=U(()=>!l.value||!l.value.id||!r.value.length||!Te.value||Object.keys(Te.value).length===0?0:r.value.filter(_=>(_.type==="expense"||_.type==="bonus")&&_.is_paid===1).reduce((_,y)=>_+Ct(parseFloat(y.amount||0),y.currency,m.value),0)),D=U(()=>l.value&&(v.value>0||p.value>0||g.value>0));Ye(()=>{c()}),pe([()=>l.value,()=>s.projectId,m,Te],()=>{c()},{deep:!0});const x=()=>{a("viewUserTransactions")};return(M,_)=>(d(),u("div",k0,[_[5]||(_[5]=i("h4",{class:"text-lg font-semibold text-gray-900 mb-4"},"Your Financials",-1)),n.value?(d(),u("div",D0,_[0]||(_[0]=[i("div",{class:"h-4 bg-gray-200 rounded animate-pulse w-full"},null,-1),i("div",{class:"h-4 bg-gray-200 rounded animate-pulse w-5/6"},null,-1),i("div",{class:"h-4 bg-gray-200 rounded animate-pulse w-3/4"},null,-1)]))):o.value?(d(),u("div",S0,[i("p",null,f(o.value),1)])):(d(),u("div",M0,[i("dl",C0,[D.value?(d(),u("div",T0,[i("div",null,[_[1]||(_[1]=i("dt",{class:"font-medium inline-block w-32"},"Agreed Amount:",-1)),i("dd",E0,f(J(gt)(v.value,J(m))),1)]),i("div",null,[_[2]||(_[2]=i("dt",{class:"font-medium inline-block w-32"},"Bonus Amount:",-1)),i("dd",$0,f(J(gt)(p.value,J(m))),1)]),i("div",null,[_[3]||(_[3]=i("dt",{class:"font-medium inline-block w-32"},"Received Amount:",-1)),i("dd",j0,f(J(gt)(g.value,J(m))),1)])])):(d(),u("div",O0,[J(l)?(d(),u("p",A0," Your financials for this project are not available or you're not assigned. ")):(d(),u("p",V0," Sign in to view your specific financials. "))]))]),J(l)?(d(),u("div",Y0,[h(_e,{onClick:x},{default:L(()=>_[4]||(_[4]=[W(" View Transactions ",-1)])),_:1,__:[4]})])):k("",!0)]))]))}},N0=qe(I0,[["__scopeId","data-v-34bab241"]]),L0={class:"p-4"},P0={key:0,class:"text-center text-gray-600"},U0={key:1,class:"text-red-600 text-sm py-2"},R0={key:2,class:"text-gray-500 text-center py-4"},F0={key:3,class:"overflow-x-auto"},W0={class:"min-w-full divide-y divide-gray-200"},H0={class:"bg-white divide-y divide-gray-200"},B0={class:"px-4 py-3 text-sm text-gray-900"},z0={class:"px-4 py-3 text-sm text-gray-700"},q0={class:"px-4 py-3 text-sm text-right text-gray-900"},G0={class:"px-4 py-3 text-sm"},Z0={class:"px-4 py-3 text-sm text-gray-700"},J0={__name:"UserTransactionsModal",props:{show:{type:Boolean,default:!1},projectId:{type:Number,required:!0},projectName:{type:String,required:!1}},emits:["close"],setup(e,{emit:t}){const s=e,a=Ot(),l=b(!0),n=b(null),o=b([]);b("PKR");const r=(c,v="USD")=>isNaN(c)||c==null?"0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:v,minimumFractionDigits:2,maximumFractionDigits:2}).format(c),m=async()=>{var c,v;if(l.value=!0,n.value=null,o.value=[],!a.value||!a.value.id||!s.projectId){n.value="User not authenticated or project ID missing.",l.value=!1;return}try{const p=await window.axios.get(`/api/projects/${s.projectId}/sections/transactions?user_id=${a.value.id}`);o.value=p.data}catch(p){console.error("Failed to fetch user-specific transactions for modal:",p),n.value=((v=(c=p.response)==null?void 0:c.data)==null?void 0:v.message)||"Failed to load transactions."}finally{l.value=!1}};return pe(()=>s.show,c=>{c&&m()},{immediate:!1}),pe([()=>{var c;return(c=a.value)==null?void 0:c.id},()=>s.projectId],(c,v)=>{s.show&&m()},{deep:!0}),U(()=>`Your Transactions for Project ${s.projectId}`),(c,v)=>(d(),oe(Qe,{show:e.show,title:"Transactions for: "+e.projectName,"show-footer":!1,onClose:v[0]||(v[0]=p=>c.$emit("close")),"hide-submit-button":!0,"hide-cancel-button":!0,"api-endpoint":null,"form-data":"{}"},{default:L(({errors:p})=>[i("div",L0,[l.value?(d(),u("div",P0,v[1]||(v[1]=[i("div",{class:"space-y-3"},[i("div",{class:"h-4 bg-gray-200 rounded animate-pulse w-full"}),i("div",{class:"h-4 bg-gray-200 rounded animate-pulse w-5/6"}),i("div",{class:"h-4 bg-gray-200 rounded animate-pulse w-full"}),i("div",{class:"h-4 bg-gray-200 rounded animate-pulse w-2/3"})],-1)]))):n.value?(d(),u("div",U0,[i("p",null,f(n.value),1)])):o.value.length===0?(d(),u("div",R0," No transactions found for you on this project. ")):(d(),u("div",F0,[i("table",W0,[v[2]||(v[2]=i("thead",{class:"bg-gray-50"},[i("tr",null,[i("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Description"),i("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Type"),i("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Amount"),i("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),i("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date")])],-1)),i("tbody",H0,[(d(!0),u(X,null,le(o.value,g=>(d(),u("tr",{key:g.id,class:"hover:bg-gray-50 transition-colors"},[i("td",B0,f(g.description),1),i("td",z0,f(g.type),1),i("td",q0,f(r(g.amount,g.currency)),1),i("td",G0,[i("span",{class:ae({"px-2 py-1 rounded-full text-xs font-medium":!0,"bg-green-100 text-green-800":g.is_paid===1,"bg-yellow-100 text-yellow-800":g.is_paid===0})},f(g.is_paid===1?"Paid":"Unpaid"),3)]),i("td",Z0,f(new Date(g.created_at).toLocaleDateString()),1)]))),128))])])]))])]),_:1},8,["show","title"]))}},K0={class:"flex items-center justify-between p-4 border-b border-gray-200 bg-white rounded-tl-xl sticky top-0 z-20"},Q0={class:"text-xl font-semibold text-gray-900"},X0={class:"flex-1 overflow-y-auto p-6 scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-gray-300 scrollbar-track-gray-100"},ey={key:1,class:"p-4 border-t border-gray-200 bg-white sticky bottom-0 z-20"},ty={__name:"RightSidebar",props:{show:{type:Boolean,default:!1},title:{type:String,default:"Details"},initialWidth:{type:Number,default:50},minWidth:{type:Number,default:30},maxWidth:{type:Number,default:90}},emits:["close","update:show"],setup(e,{emit:t}){const s=e,a=t,l=b(s.initialWidth),n=b(!1),o=p=>{n.value=!0,document.addEventListener("pointermove",r),document.addEventListener("pointerup",m)},r=p=>{if(!n.value)return;const g=window.innerWidth,x=(g-p.clientX)/g*100,M=Math.max(s.minWidth,Math.min(s.maxWidth,x));l.value=M},m=()=>{n.value=!1,document.removeEventListener("pointermove",r),document.removeEventListener("pointerup",m)};pe(()=>s.show,p=>{p?document.body.style.overflow="hidden":document.body.style.overflow=""},{immediate:!0});const c=()=>{a("update:show",!1),a("close")},v=U(()=>window.innerWidth<768);return pe(v,p=>{p&&s.show?l.value=100:!p&&s.show&&(l.value=s.initialWidth)},{immediate:!0}),pe(()=>s.show,p=>{p&&(v.value?l.value=100:l.value=s.initialWidth)}),(p,g)=>(d(),oe(ri,{to:"body"},[h(Bt,{"enter-active-class":"transition ease-out duration-300 transform","enter-from-class":"translate-x-full","enter-to-class":"translate-x-0","leave-active-class":"transition ease-in duration-200 transform","leave-from-class":"translate-x-0","leave-to-class":"translate-x-full"},{default:L(()=>[e.show?(d(),u("div",{key:0,class:ae(["fixed inset-0 z-50 flex",{"pointer-events-none":!e.show}])},[i("div",{class:"relative ml-auto h-full bg-white shadow-xl flex flex-col rounded-l-xl",style:Ie({width:v.value?"100%":`${l.value}vw`})},[v.value?k("",!0):(d(),u("div",{key:0,class:"absolute left-0 top-0 h-full w-2 cursor-col-resize -ml-1 z-10",onPointerdown:o,title:"Drag to resize"},null,32)),i("div",K0,[i("h3",Q0,f(e.title),1),i("button",{onClick:c,class:"text-gray-400 hover:text-gray-600 transition-colors"},g[0]||(g[0]=[i("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),i("div",X0,[me(p.$slots,"content",{},void 0,!0)]),p.$slots.footer?(d(),u("div",ey,[me(p.$slots,"footer",{},void 0,!0)])):k("",!0)],4)],2)):k("",!0)]),_:3})]))}},sy=qe(ty,[["__scopeId","data-v-2a0ea880"]]),ay={key:0,class:"text-center py-8 text-gray-500"},ly={key:1,class:"text-center py-8 text-red-600"},iy={key:2,class:"space-y-6"},ny={class:"bg-gray-50 p-4 rounded-lg shadow-sm"},oy={class:"text-xl font-bold text-gray-900 mb-2"},ry={class:"flex items-center space-x-2 text-sm text-gray-600 mb-4"},dy={key:0,class:"text-indigo-600 font-medium"},uy={key:1,class:"text-purple-600 font-medium"},cy={class:"text-gray-700 leading-relaxed"},my={class:"space-y-4 p-4 bg-white rounded-lg shadow-sm"},vy={class:"flex items-center justify-between py-2 border-b border-gray-100"},hy={class:"flex-1 text-right"},py={key:1,class:"flex items-center space-x-2"},fy={class:"flex items-center justify-between py-2 border-b border-gray-100"},yy={class:"flex-1 text-right"},gy={key:1,class:"flex items-center space-x-2"},_y={class:"flex items-center justify-between py-2 border-b border-gray-100"},wy={class:"text-gray-700"},by={class:"bg-white p-4 rounded-lg shadow-sm"},xy={class:"flex justify-between items-center mb-4 border-b pb-2"},ky={key:0,class:"space-y-3"},Dy={class:"text-sm text-gray-700"},Sy={class:"text-xs text-gray-500 mt-1"},My={key:1,class:"text-gray-500 text-sm py-2"},Cy={key:3,class:"text-center py-8 text-gray-500"},Ty={__name:"TaskDetailSidebar",props:{taskId:{type:Number,required:!0},projectUsers:{type:Array,default:()=>[]}},emits:["close","task-updated","task-deleted"],setup(e,{emit:t}){const s=e,a=t,l=b(null),n=b(!0),o=b(""),r=b(!1),m=b(!1),c=b(null),v=b(null),p=b(!1),g=async()=>{n.value=!0,o.value="";try{const $=await window.axios.get(`/api/tasks/${s.taskId}`);l.value=$.data,c.value=l.value.assigned_to_id||null,v.value=l.value.due_date||null}catch($){o.value="Failed to load task details.",console.error("Error fetching task details:",$)}finally{n.value=!1}};pe(()=>s.taskId,$=>{$?g():l.value=null},{immediate:!0});const D=U(()=>s.projectUsers.map($=>({value:$.id,label:$.name}))),x=async()=>{if(!l.value||c.value===l.value.assigned_to_id){r.value=!1;return}try{const $=await window.axios.patch(`/api/tasks/${l.value.id}`,{assigned_to_user_id:c.value});l.value=$.data,a("task-updated",l.value)}catch($){console.error("Error updating assigned user:",$),c.value=l.value.assigned_to_id,alert("Failed to update assigned user. Please try again.")}finally{r.value=!1}},M=async()=>{if(!l.value||v.value===l.value.due_date){m.value=!1;return}try{const $=await window.axios.patch(`/api/tasks/${l.value.id}`,{due_date:v.value});l.value=$.data,a("task-updated",l.value)}catch($){console.error("Error updating due date:",$),v.value=l.value.due_date,alert("Failed to update due date. Please try again.")}finally{m.value=!1}},_=()=>{p.value=!0},y=()=>{g(),p.value=!1},j=U(()=>l.value?{"bg-yellow-100 text-yellow-800":l.value.status==="To Do","bg-blue-100 text-blue-800":l.value.status==="In Progress","bg-green-100 text-green-800":l.value.status==="Done","bg-red-100 text-red-800":l.value.status==="Blocked","bg-gray-100 text-gray-800":l.value.status==="Archived"}:"");return($,S)=>{var R,Q,N,A;return n.value?(d(),u("div",ay," Loading task details... ")):o.value?(d(),u("div",ly,f(o.value),1)):l.value?(d(),u("div",iy,[i("div",ny,[i("h4",oy,f(l.value.name),1),i("div",ry,[i("span",{class:ae(["px-2 py-1 rounded-full text-xs font-medium",j.value])},f(l.value.status),3),l.value.task_type?(d(),u("span",dy," | "+f((R=l.value.task_type)==null?void 0:R.name)+" | ",1)):k("",!0),S[7]||(S[7]=i("br",null,null,-1)),(Q=l.value.milestone)!=null&&Q.name?(d(),u("span",uy,f((N=l.value.milestone)==null?void 0:N.name),1)):k("",!0)]),i("p",cy,f(l.value.description||"No description provided."),1)]),i("div",my,[S[13]||(S[13]=i("h5",{class:"text-lg font-semibold text-gray-800 border-b pb-2 mb-4"},"Task Attributes",-1)),i("div",vy,[h(B,{class:"min-w-[100px] text-gray-600"},{default:L(()=>S[8]||(S[8]=[W("Assigned To:",-1)])),_:1,__:[8]}),i("div",hy,[r.value?(d(),u("div",py,[h(Me,{id:"edit-assigned-to",modelValue:c.value,"onUpdate:modelValue":S[1]||(S[1]=O=>c.value=O),options:D.value,"value-key":"value","label-key":"label",placeholder:"Unassigned",class:"mt-1 flex-1","allow-empty":!0},null,8,["modelValue","options"]),i("button",{onClick:x,class:"text-green-600 hover:text-green-800 text-sm font-medium"},"Save"),i("button",{onClick:S[2]||(S[2]=O=>r.value=!1),class:"text-gray-600 hover:text-gray-800 text-sm font-medium"},"Cancel")])):(d(),u("div",{key:0,onClick:S[0]||(S[0]=O=>r.value=!0),class:"cursor-pointer text-indigo-600 hover:text-indigo-800"},[W(f(((A=l.value.assigned_to)==null?void 0:A.name)||"Unassigned")+" ",1),S[9]||(S[9]=i("span",{class:"text-xs text-gray-400 ml-1"},"(Click to edit)",-1))]))])]),i("div",fy,[h(B,{class:"min-w-[100px] text-gray-600"},{default:L(()=>S[10]||(S[10]=[W("Due Date:",-1)])),_:1,__:[10]}),i("div",yy,[m.value?(d(),u("div",gy,[h(fe,{id:"edit-due-date",modelValue:v.value,"onUpdate:modelValue":S[4]||(S[4]=O=>v.value=O),type:"date",class:"mt-1 flex-1"},null,8,["modelValue"]),i("button",{onClick:M,class:"text-green-600 hover:text-green-800 text-sm font-medium"},"Save"),i("button",{onClick:S[5]||(S[5]=O=>m.value=!1),class:"text-gray-600 hover:text-gray-800 text-sm font-medium"},"Cancel")])):(d(),u("div",{key:0,onClick:S[3]||(S[3]=O=>m.value=!0),class:"cursor-pointer text-indigo-600 hover:text-indigo-800"},[W(f(l.value.due_date?J(I)(l.value.due_date).format("MMM D, YYYY"):"No Due Date")+" ",1),S[11]||(S[11]=i("span",{class:"text-xs text-gray-400 ml-1"},"(Click to edit)",-1))]))])]),i("div",_y,[h(B,{class:"min-w-[100px] text-gray-600"},{default:L(()=>S[12]||(S[12]=[W("Created:",-1)])),_:1,__:[12]}),i("span",wy,f(l.value.created_at?new Date(l.value.created_at).toLocaleDateString():"N/A"),1)])]),i("div",by,[i("div",xy,[S[15]||(S[15]=i("h5",{class:"text-lg font-semibold text-gray-800"},"Notes",-1)),h(_e,{onClick:_,class:"bg-indigo-600 hover:bg-indigo-700 transition-colors"},{default:L(()=>S[14]||(S[14]=[W(" Add Note ",-1)])),_:1,__:[14]})]),l.value.notes&&l.value.notes.length>0?(d(),u("div",ky,[(d(!0),u(X,null,le(l.value.notes,O=>(d(),u("div",{key:O.id,class:"p-3 bg-gray-50 rounded-md"},[i("p",Dy,f(O.content),1),i("p",Sy," By "+f(O.creator_name||"Unknown")+" on "+f(new Date(O.created_at).toLocaleDateString()),1)]))),128))])):(d(),u("div",My,"No notes for this task yet."))]),h(El,{show:p.value,"task-for-note":l.value,onClose:S[6]||(S[6]=O=>p.value=!1),onNoteAdded:y},null,8,["show","task-for-note"])])):(d(),u("div",Cy," Select a task to view details. "))}}},Ey={class:"space-y-4"},$y={key:0},jy=["disabled"],Oy={key:0,class:"mt-4"},Vy=["src"],Ay={class:"flex items-center"},Yy="Create New Deliverable",Iy="post",Ny="Create Deliverable",Ly="Deliverable created successfully!",Ol={__name:"CreateDeliverableModal",props:{show:{type:Boolean,default:!1},projectId:{type:[String,Number],required:!0}},emits:["close","saved"],setup(e,{emit:t}){const s=e,a=t,l=Ne({title:"",description:"",type:"blog_post",content_url:"",content_url_type:null,attachment_file:null,is_visible_to_client:!0,initial_status:"pending_review"}),n=[{value:"blog_post",label:"Blog Post"},{value:"design_mockup",label:"Design Mockup"},{value:"social_media_post",label:"Social Media Post"},{value:"report",label:"Report"},{value:"contract_draft",label:"Contract Draft"},{value:"proposal",label:"Proposal"},{value:"other",label:"Other"}],o=[{value:"pending_review",label:"Pending Review (Requires Client Approval)"},{value:"for_information",label:"For Information Only (No Approval Needed)"}],r=[{value:null,label:"Select Type (if providing URL)"},{value:"google_doc",label:"Google Document (Doc, Sheet, Slide)"},{value:"pdf",label:"PDF Document"},{value:"image",label:"Image (JPG, PNG, GIF)"},{value:"video",label:"Video (YouTube, Vimeo, etc.)"},{value:"other",label:"Other Web Link"}],m=b(null),c=b(null);pe(()=>s.show,_=>{_&&(Object.assign(l,{title:"",description:"",type:"blog_post",content_url:"",content_url_type:null,attachment_file:null,is_visible_to_client:!0,initial_status:"pending_review"}),c.value=null,m.value&&(m.value.value=""))});const v=_=>{const y=_.target.files[0];if(y)if(l.attachment_file=y,l.content_url="",l.content_url_type=null,y.type.startsWith("image/")){const j=new FileReader;j.onload=$=>{c.value=$.target.result},j.readAsDataURL(y)}else c.value=null;else l.attachment_file=null,c.value=null},p=()=>{l.content_url?(l.attachment_file=null,c.value=null,m.value&&(m.value.value="")):l.content_url_type=null},g=_=>{const y=new FormData;return y.append("title",_.title),y.append("description",_.description||""),y.append("type",_.type),y.append("is_visible_to_client",_.is_visible_to_client?1:0),y.append("initial_status",_.initial_status),_.attachment_file?y.append("attachment_file",_.attachment_file):_.content_url&&(y.append("content_url",_.content_url),y.append("content_url_type",_.content_url_type||"")),y},D=U(()=>`/api/projects/${s.projectId}/deliverables`),x=_=>{a("saved",_),a("close")},M=()=>{a("close")};return(_,y)=>(d(),oe(Qe,{show:e.show,title:Yy,"api-endpoint":D.value,"http-method":Iy,"form-data":l,"submit-button-text":Ny,"success-message":Ly,"format-data-for-api":g,onClose:M,onSubmitted:x},{default:L(({errors:j})=>[i("div",Ey,[i("div",null,[h(B,{for:"title",value:"Title"}),h(fe,{id:"title",modelValue:l.title,"onUpdate:modelValue":y[0]||(y[0]=$=>l.title=$),type:"text",class:"mt-1 block w-full",required:"",autofocus:""},null,8,["modelValue"]),h(de,{message:j.title?j.title[0]:"",class:"mt-2"},null,8,["message"])]),i("div",null,[h(B,{for:"description",value:"Description"}),we(i("textarea",{id:"description","onUpdate:modelValue":y[1]||(y[1]=$=>l.description=$),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",rows:"3",placeholder:"Enter deliverable description"},null,512),[[Ve,l.description]]),h(de,{message:j.description?j.description[0]:"",class:"mt-2"},null,8,["message"])]),i("div",null,[h(B,{for:"type",value:"Deliverable Type"}),h(Me,{id:"type",modelValue:l.type,"onUpdate:modelValue":y[2]||(y[2]=$=>l.type=$),options:n,"value-key":"value","label-key":"label",placeholder:"Select a type",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),h(de,{message:j.type?j.type[0]:"",class:"mt-2"},null,8,["message"])]),i("div",null,[h(B,{for:"initial_status",value:"Initial Status"}),h(Me,{id:"initial_status",modelValue:l.initial_status,"onUpdate:modelValue":y[3]||(y[3]=$=>l.initial_status=$),options:o,"value-key":"value","label-key":"label",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),h(de,{message:j.initial_status?j.initial_status[0]:"",class:"mt-2"},null,8,["message"])]),i("div",null,[h(B,{for:"content_url",value:"Content URL (for Google Docs, external links)"}),h(fe,{id:"content_url",modelValue:l.content_url,"onUpdate:modelValue":y[4]||(y[4]=$=>l.content_url=$),type:"url",class:"mt-1 block w-full",disabled:!!l.attachment_file,onInput:p,placeholder:"e.g., https://docs.google.com/document/d/..."},null,8,["modelValue","disabled"]),y[7]||(y[7]=i("p",{class:"text-xs text-gray-500 mt-1"},"Leave empty if uploading a file below.",-1)),h(de,{message:j.content_url?j.content_url[0]:"",class:"mt-2"},null,8,["message"])]),l.content_url&&!l.attachment_file?(d(),u("div",$y,[h(B,{for:"content_url_type",value:"Type of Content URL"}),h(Me,{id:"content_url_type",modelValue:l.content_url_type,"onUpdate:modelValue":y[5]||(y[5]=$=>l.content_url_type=$),options:r,"value-key":"value","label-key":"label",placeholder:"Select the type of content this URL links to",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),h(de,{message:j.content_url_type?j.content_url_type[0]:"",class:"mt-2"},null,8,["message"])])):k("",!0),i("div",null,[h(B,{for:"attachment_file",value:"Upload File (PDF, Image)"}),i("input",{id:"attachment_file",ref_key:"fileInput",ref:m,type:"file",onChange:v,class:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100",disabled:!!l.content_url,accept:"application/pdf,image/*"},null,40,jy),y[9]||(y[9]=i("p",{class:"text-xs text-gray-500 mt-1"},"Max 10MB. Leave empty if providing a URL above.",-1)),h(de,{message:j.attachment_file?j.attachment_file[0]:"",class:"mt-2"},null,8,["message"]),c.value?(d(),u("div",Oy,[y[8]||(y[8]=i("p",{class:"text-sm font-medium text-gray-700 mb-2"},"Image Preview:",-1)),i("img",{src:c.value,alt:"File Preview",class:"max-w-full h-auto rounded-lg shadow-md max-h-60 object-contain"},null,8,Vy)])):k("",!0)]),i("div",Ay,[we(i("input",{id:"is_visible_to_client",type:"checkbox","onUpdate:modelValue":y[6]||(y[6]=$=>l.is_visible_to_client=$),class:"rounded border-gray-300 text-indigo-600 shadow-sm focus:ring-indigo-500"},null,512),[[As,l.is_visible_to_client]]),h(B,{for:"is_visible_to_client",value:"Visible to Client",class:"ml-2"}),h(de,{message:j.is_visible_to_client?j.is_visible_to_client[0]:"",class:"mt-2"},null,8,["message"])])])]),_:1},8,["show","api-endpoint","form-data"]))}};function Py(){return{formatDate:a=>a?new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"",formatDateTime:a=>a?new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",timeAgo:a=>{if(!a)return"";const l=new Date(a),o=Math.floor((new Date-l)/1e3);let r=o/31536e3;return r>1?Math.floor(r)+" years ago":(r=o/2592e3,r>1?Math.floor(r)+" months ago":(r=o/86400,r>1?Math.floor(r)+" days ago":(r=o/3600,r>1?Math.floor(r)+" hours ago":(r=o/60,r>1?Math.floor(r)+" minutes ago":Math.floor(o)+" seconds ago"))))}}}const Uy={class:"p-6 bg-white rounded-lg shadow-md min-h-[calc(100vh-6rem)]"},Ry={class:"flex justify-between items-center mb-4"},Fy={class:"flex gap-2"},Wy={key:0},Hy={key:1},By={class:"mb-6 bg-gray-50 p-4 rounded-lg"},zy={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"},qy={key:0,class:"mt-3 text-sm text-gray-600"},Gy={key:0,class:"text-red-600 font-medium"},Zy={key:0,class:"text-center text-gray-600 text-sm animate-pulse py-4"},Jy={key:1,class:"text-center py-4"},Ky={class:"text-red-600 text-sm font-medium"},Qy={key:2,class:"overflow-x-auto"},Xy={class:"min-w-full divide-y divide-gray-200"},eg={class:"bg-white divide-y divide-gray-200"},tg={class:"px-4 py-3 text-sm text-gray-900"},sg={class:"px-4 py-3 text-sm text-gray-700 capitalize"},ag={class:"px-4 py-3 text-sm text-gray-700"},lg={class:"px-4 py-3 text-sm text-gray-700"},ig={class:"px-4 py-3 text-sm text-gray-700"},ng={class:"px-4 py-3 text-sm text-gray-700"},og={class:"px-4 py-3 text-sm text-gray-700"},rg={class:"px-4 py-3 text-right"},dg={class:"flex justify-end space-x-2"},ug=["onClick"],cg={key:3,class:"text-center py-4"},mg={__name:"ProjectDeliverableTab",props:{projectId:{type:[String,Number],required:!0},canCreateDeliverables:{type:Boolean,default:!1},canViewDeliverables:{type:Boolean,default:!1}},emits:["deliverablesUpdated","openDeliverableDetailSidebar"],setup(e,{emit:t}){const s=e,a=t,l=b([]),n=b(!0),o=b(null),r=b(!1),m=b({status:"",type:"",visibility:"",clientStatus:""}),c=[{value:"",label:"All Statuses"},{value:"pending_review",label:"Pending Review"},{value:"for_information",label:"For Information"},{value:"approved",label:"Approved"},{value:"revisions_requested",label:"Revisions Requested"},{value:"completed",label:"Completed"}],v=[{value:"",label:"All Types"},{value:"blog_post",label:"Blog Post"},{value:"design_mockup",label:"Design Mockup"},{value:"social_media_post",label:"Social Media Post"},{value:"report",label:"Report"},{value:"contract_draft",label:"Contract Draft"},{value:"proposal",label:"Proposal"},{value:"other",label:"Other"}],p=[{value:"",label:"All Visibility"},{value:"visible_to_client",label:"Visible to Client"},{value:"not_visible_to_client",label:"Not Visible to Client"}],g=[{value:"",label:"All Client Status"},{value:"read",label:"Read"},{value:"unread",label:"Unread"},{value:"approved",label:"Approved"},{value:"revisions_requested",label:"Revisions Requested"}],D=$=>{var R;if(!$.is_visible_to_client)return{status:"N/A",class:"bg-gray-100 text-gray-800"};const S=(R=$.client_interactions)==null?void 0:R[0];return S?S.approved_at?{status:"Approved",class:"bg-green-100 text-green-800"}:S.revisions_requested_at?{status:"Revisions Requested",class:"bg-yellow-100 text-yellow-800"}:S.rejected_at?{status:"Rejected",class:"bg-red-100 text-red-800"}:S.read_at?{status:`Read on ${new Date(S.read_at).toLocaleDateString()}`,class:"bg-blue-100 text-blue-800"}:{status:"Unread",class:"bg-red-100 text-red-800"}:{status:"Unread",class:"bg-red-100 text-red-800"}},x=U(()=>l.value.length?l.value.filter($=>{const S=D($);return!(m.value.status&&$.status!==m.value.status||m.value.type&&$.type!==m.value.type||m.value.visibility&&(m.value.visibility==="visible_to_client"&&!$.is_visible_to_client||m.value.visibility==="not_visible_to_client"&&$.is_visible_to_client)||m.value.clientStatus&&(m.value.clientStatus==="read"&&!S.status.startsWith("Read")||m.value.clientStatus==="unread"&&S.status!=="Unread"||m.value.clientStatus==="approved"&&S.status!=="Approved"||m.value.clientStatus==="revisions_requested"&&S.status!=="Revisions Requested"))}):[]),M=()=>{m.value.status="",m.value.type="",m.value.visibility="",m.value.clientStatus=""},_=async()=>{if(!s.canViewDeliverables){o.value="You do not have permission to view deliverables.",n.value=!1;return}n.value=!0,o.value=null;try{const $=await window.axios.get(route("projects.deliverables.index",s.projectId));l.value=$.data}catch($){console.error("Error fetching deliverables:",$),o.value="Failed to load deliverables."}finally{n.value=!1}},y=()=>{_(),a("deliverablesUpdated")},j=$=>{a("openDeliverableDetailSidebar",$)};return Ye(()=>{_()}),pe(()=>s.projectId,()=>{_()}),($,S)=>(d(),u("div",Uy,[i("div",Ry,[S[7]||(S[7]=i("h4",{class:"text-lg font-semibold text-gray-900"},"Project Deliverables & Approvals",-1)),i("div",Fy,[h(je,{onClick:_,disabled:n.value,class:"text-indigo-600 hover:text-indigo-800"},{default:L(()=>[n.value?(d(),u("span",Hy,"Loading...")):(d(),u("span",Wy,"Refresh"))]),_:1},8,["disabled"]),e.canCreateDeliverables?(d(),oe(_e,{key:0,onClick:S[0]||(S[0]=R=>r.value=!0),class:"bg-indigo-600 hover:bg-indigo-700 transition-colors"},{default:L(()=>S[6]||(S[6]=[W(" Add New Deliverable ",-1)])),_:1,__:[6]})):k("",!0)])]),i("div",By,[i("div",zy,[i("div",null,[h(B,{for:"deliverable-status-filter",value:"Status"}),h(Me,{id:"deliverable-status-filter",modelValue:m.value.status,"onUpdate:modelValue":S[1]||(S[1]=R=>m.value.status=R),options:c,placeholder:"All Statuses",class:"mt-1"},null,8,["modelValue"])]),i("div",null,[h(B,{for:"deliverable-type-filter",value:"Type"}),h(Me,{id:"deliverable-type-filter",modelValue:m.value.type,"onUpdate:modelValue":S[2]||(S[2]=R=>m.value.type=R),options:v,placeholder:"All Types",class:"mt-1"},null,8,["modelValue"])]),i("div",null,[h(B,{for:"deliverable-visibility-filter",value:"Visibility"}),h(Me,{id:"deliverable-visibility-filter",modelValue:m.value.visibility,"onUpdate:modelValue":S[3]||(S[3]=R=>m.value.visibility=R),options:p,placeholder:"All Visibility",class:"mt-1"},null,8,["modelValue"])]),i("div",null,[h(B,{for:"deliverable-client-status-filter",value:"Client Status"}),h(Me,{id:"deliverable-client-status-filter",modelValue:m.value.clientStatus,"onUpdate:modelValue":S[4]||(S[4]=R=>m.value.clientStatus=R),options:g,placeholder:"All Client Status",class:"mt-1"},null,8,["modelValue"])])]),i("div",{class:"flex justify-end mt-4"},[i("button",{type:"button",onClick:M,class:"px-3 py-2 text-sm text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-md transition-colors"}," Clear Filters ")]),Object.values(m.value).some(R=>R!==null&&R!=="")?(d(),u("div",qy,[i("p",null,[W(" Showing "+f(x.value.length)+" of "+f(l.value.length)+" deliverables ",1),x.value.length===0?(d(),u("span",Gy," (No deliverables match the current filters) ")):k("",!0)])])):k("",!0)]),n.value?(d(),u("div",Zy," Loading deliverables... ")):o.value?(d(),u("div",Jy,[i("p",Ky,f(o.value),1)])):x.value.length?(d(),u("div",Qy,[i("table",Xy,[S[8]||(S[8]=i("thead",{class:"bg-gray-50"},[i("tr",null,[i("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Title"),i("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Type"),i("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),i("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Submitted By"),i("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Submitted On"),i("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Visibility"),i("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Client Status"),W(),i("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),i("tbody",eg,[(d(!0),u(X,null,le(x.value,R=>{var Q;return d(),u("tr",{key:R.id,class:"hover:bg-gray-50 transition-colors"},[i("td",tg,f(R.title),1),i("td",sg,f(R.type.replace(/_/g," ")),1),i("td",ag,[i("span",{class:ae({"px-2 py-1 rounded-full text-xs font-medium":!0,"bg-yellow-100 text-yellow-800":R.status==="pending_review"||R.status==="revisions_requested","bg-green-100 text-green-800":R.status==="approved","bg-blue-100 text-blue-800":R.status==="completed","bg-gray-100 text-gray-800":R.status==="for_information"})},f(R.status.replace(/_/g," ").replace(/\b\w/g,N=>N.toUpperCase())),3)]),i("td",lg,f(((Q=R.team_member)==null?void 0:Q.name)||"Unknown"),1),i("td",ig,f(new Date(R.submitted_at).toLocaleDateString()),1),i("td",ng,[i("span",{class:ae({"px-2 py-1 rounded-full text-xs font-medium":!0,"bg-green-100 text-green-800":R.is_visible_to_client,"bg-red-100 text-red-800":!R.is_visible_to_client})},f(R.is_visible_to_client?"Visible":"Hidden"),3)]),i("td",og,[i("span",{class:ae(["px-2 py-1 rounded-full text-xs font-medium",D(R).class])},f(D(R).status),3)]),i("td",rg,[i("div",dg,[i("button",{onClick:N=>j(R.id),class:"text-purple-600 hover:text-purple-800 text-sm font-medium"}," View Details ",8,ug)])])])}),128))])])])):(d(),u("div",cg,S[9]||(S[9]=[i("p",{class:"text-gray-400 text-sm"},"No deliverables found for this project.",-1),i("p",{class:"text-gray-500 text-sm mt-2"},' Click the "Add New Deliverable" button to create one. ',-1)]))),h(Ol,{show:r.value,"project-id":e.projectId,onClose:S[5]||(S[5]=R=>r.value=!1),onSaved:y},null,8,["show","project-id"])]))}},vg=qe(mg,[["__scopeId","data-v-40d67f52"]]),hg={key:0,class:"text-center py-8 text-gray-500"},pg={key:1,class:"text-center py-8 text-red-600"},fg={key:2,class:"space-y-6"},yg={class:"bg-gray-50 p-4 rounded-lg shadow-sm"},gg={class:"text-xl font-bold text-gray-900 mb-2"},_g={class:"flex items-center space-x-2 text-sm text-gray-600 mb-4"},wg={class:"text-indigo-600 font-medium"},bg={class:"text-gray-700"},xg={class:"text-gray-700 leading-relaxed"},kg={class:"mt-4 space-y-2 text-sm"},Dg={key:0,class:"text-blue-600 hover:underline"},Sg=["href"],Mg={key:1,class:"text-blue-600 hover:underline"},Cg=["href"],Tg={key:2,class:"text-green-600 font-medium"},Eg={class:"bg-white p-4 rounded-lg shadow-sm"},$g={key:0,class:"space-y-3"},jg={class:"font-semibold text-gray-800"},Og={class:"text-sm text-gray-700"},Vg={class:"font-medium"},Ag={key:0,class:"text-xs text-gray-500 ml-2"},Yg={key:0,class:"text-sm text-gray-600 mt-1"},Ig={key:1,class:"text-gray-500 text-sm py-2"},Ng={class:"bg-white p-4 rounded-lg shadow-sm"},Lg={class:"flex justify-between items-center mb-4 border-b pb-2"},Pg={class:"space-y-3 mb-4"},Ug={key:0,class:"space-y-3"},Rg={class:"text-sm text-gray-700"},Fg={class:"text-xs text-gray-500 mt-1"},Wg={key:0},Hg={key:1,class:"ml-2 text-gray-400"},Bg={key:1,class:"text-gray-500 text-sm py-2"},zg={key:3,class:"text-center py-8 text-gray-500"},qg={__name:"DeliverableDetailSidebar",props:{projectId:{type:Number,required:!0},deliverableId:{type:Number,required:!0}},emits:["close","deliverable-updated"],setup(e,{emit:t}){const s=e,a=t,l=b(null),n=b(!0),o=b(""),{formatDateTime:r,timeAgo:m}=Py(),c=di({comment_text:"",context:""}),v=async()=>{n.value=!0,o.value="";try{const _=await window.axios.get(route("projects.deliverables.show",{project:s.projectId,deliverable:s.deliverableId}));l.value=_.data}catch(_){o.value="Failed to load deliverable details.",console.error("Error fetching deliverable details:",_)}finally{n.value=!1}};pe(()=>s.deliverableId,_=>{_?v():l.value=null},{immediate:!0});const p=b(!1),g=async()=>{var _,y;if(l.value){p.value=!0,c.errors={};try{const j=await window.axios.post(`/api/projects/${s.projectId}/deliverables/${s.deliverableId}/comments`,{comment_text:c.comment_text,context:c.context});c.comment_text="",c.context="",v(),a("deliverable-updated")}catch(j){console.error("Error adding comment:",j),j.response&&j.response.status===422?c.errors=j.response.data.errors:console.error("Failed to add comment:",((y=(_=j.response)==null?void 0:_.data)==null?void 0:y.message)||j.message)}finally{p.value=!1}}},D=U(()=>l.value?{"bg-yellow-100 text-yellow-800":l.value.status==="pending_review"||l.value.status==="revisions_requested","bg-green-100 text-green-800":l.value.status==="approved","bg-blue-100 text-blue-800":l.value.status==="completed","bg-gray-100 text-gray-800":l.value.status==="for_information"}:""),x=_=>{let y="No Action Yet",j="";return _.approved_at?(y="Approved",j=r(_.approved_at)):_.revisions_requested_at?(y="Revisions Requested",j=r(_.revisions_requested_at)):_.rejected_at?(y="Rejected",j=r(_.rejected_at)):_.read_at&&(y="Read",j=r(_.read_at)),{status:y,timestamp:j}},M=_=>_.creator_type==="App\\Models\\Client"?"Client":_.creator_type==="App\\Models\\User"?"Team Member":"Unknown";return(_,y)=>{var j;return n.value?(d(),u("div",hg," Loading deliverable details... ")):o.value?(d(),u("div",pg,f(o.value),1)):l.value?(d(),u("div",fg,[i("div",yg,[i("h4",gg,f(l.value.title),1),i("div",_g,[i("span",{class:ae(["px-2 py-1 rounded-full text-xs font-medium",D.value])},f(l.value.status.replace(/_/g," ").replace(/\b\w/g,$=>$.toUpperCase())),3),i("span",wg," | "+f(l.value.type.replace(/_/g," "))+" | ",1),i("span",bg," Submitted by: "+f(((j=l.value.team_member)==null?void 0:j.name)||"Unknown"),1)]),i("p",xg,f(l.value.description||"No description provided."),1),i("div",kg,[l.value.content_url?(d(),u("div",Dg,[i("a",{href:l.value.content_url,target:"_blank",rel:"noopener noreferrer"},"View Content Link ("+f(l.value.mime_type||"Unknown Type")+")",9,Sg)])):k("",!0),l.value.attachment_path?(d(),u("div",Mg,[i("a",{href:l.value.attachment_path,target:"_blank",rel:"noopener noreferrer"},"View Attachment",8,Cg)])):k("",!0),i("div",{class:ae(l.value.is_visible_to_client?"text-green-600":"text-red-600")}," Visibility: "+f(l.value.is_visible_to_client?"Visible to Client":"Not Visible to Client"),3),l.value.overall_approved_at?(d(),u("div",Tg," Overall Approved by Client on "+f(J(r)(l.value.overall_approved_at)),1)):k("",!0)])]),i("div",Eg,[y[3]||(y[3]=i("h5",{class:"text-lg font-semibold text-gray-800 border-b pb-2 mb-4"},"Client Interactions",-1)),l.value.client_interactions&&l.value.client_interactions.length>0?(d(),u("div",$g,[(d(!0),u(X,null,le(l.value.client_interactions,$=>{var S;return d(),u("div",{key:$.id,class:"p-3 bg-gray-50 rounded-md"},[i("p",jg,f(((S=$.client)==null?void 0:S.name)||"Unknown Client"),1),i("p",Og,[y[2]||(y[2]=W(" Status: ",-1)),i("span",Vg,f(x($).status),1),x($).timestamp?(d(),u("span",Ag," ("+f(x($).timestamp)+") ",1)):k("",!0)]),$.feedback_text?(d(),u("p",Yg,'Feedback: "'+f($.feedback_text)+'"',1)):k("",!0)])}),128))])):(d(),u("div",Ig,"No client interactions recorded yet."))]),i("div",Ng,[i("div",Lg,[y[5]||(y[5]=i("h5",{class:"text-lg font-semibold text-gray-800"},"Comments",-1)),h(_e,{onClick:g,disabled:J(c).processing,class:"bg-indigo-600 hover:bg-indigo-700 transition-colors"},{default:L(()=>y[4]||(y[4]=[W(" Add Comment ",-1)])),_:1,__:[4]},8,["disabled"])]),i("div",Pg,[i("div",null,[h(B,{for:"new-comment-text",value:"New Comment",class:"sr-only"}),we(i("textarea",{id:"new-comment-text","onUpdate:modelValue":y[0]||(y[0]=$=>J(c).comment_text=$),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",rows:"3",placeholder:"Type your comment here..."},null,512),[[Ve,J(c).comment_text]]),h(de,{message:J(c).errors.comment_text,class:"mt-2"},null,8,["message"])]),i("div",null,[h(B,{for:"comment-context",value:"Context (Optional, e.g., 'Paragraph 2', 'Image 1')",class:"sr-only"}),h(fe,{id:"comment-context",modelValue:J(c).context,"onUpdate:modelValue":y[1]||(y[1]=$=>J(c).context=$),type:"text",class:"mt-1 block w-full",placeholder:"Context (optional)"},null,8,["modelValue"]),h(de,{message:J(c).errors.context,class:"mt-2"},null,8,["message"])])]),l.value.comments&&l.value.comments.length>0?(d(),u("div",Ug,[(d(!0),u(X,null,le(l.value.comments,$=>(d(),u("div",{key:$.id,class:"p-3 bg-gray-50 rounded-md"},[i("p",Rg,f($.content),1),i("p",Fg,[W(" By "+f($.creator_name||"Unknown")+" ("+f(M($))+") ",1),$.created_at?(d(),u("span",Wg,f(J(m)($.created_at)),1)):k("",!0),$.context?(d(),u("span",Hg,"("+f($.context)+")",1)):k("",!0)])]))),128))])):(d(),u("div",Bg,"No comments for this deliverable yet."))])])):(d(),u("div",zg," Select a deliverable to view details. "))}}},Gg={class:"p-6 bg-white rounded-lg shadow-md min-h-[calc(100vh-6rem)]"},Zg={class:"flex justify-between items-center mb-4"},Jg={class:"mb-6 bg-gray-50 p-4 rounded-lg"},Kg={class:"flex items-center gap-4"},Qg={class:"flex-1 min-w-[200px]"},Xg={key:0,class:"text-red-600 text-sm mt-2"},e_={key:1,class:"text-gray-600 text-sm mt-2 animate-pulse"},t_={key:2,class:"text-gray-500 text-sm mt-2"},s_={class:"mt-6"},a_={class:"flex justify-between items-center mb-3"},l_={class:"text-md font-medium text-gray-800"},i_={key:0},n_={key:1},o_={key:0,class:"text-center text-gray-600 text-sm animate-pulse py-8"},r_={key:1,class:"text-center py-8"},d_={class:"text-red-600 text-sm font-medium"},u_={key:2,class:"text-center py-8"},c_={class:"text-red-600 text-sm font-medium"},m_={key:3,class:"space-y-8"},v_={class:"bg-gray-50 p-6 rounded-lg shadow-sm grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},h_={class:"flex flex-col items-center p-3 bg-white rounded-md shadow-xs"},p_={class:"text-lg font-semibold text-gray-900"},f_={class:"flex flex-col items-center p-3 bg-white rounded-md shadow-xs"},y_={class:"text-lg font-semibold text-gray-900"},g_={class:"flex flex-col items-center p-3 bg-white rounded-md shadow-xs"},__={class:"text-lg font-semibold text-gray-900"},w_={class:"flex flex-col items-center p-3 bg-white rounded-md shadow-xs"},b_={class:"text-lg font-semibold text-gray-900"},x_={class:"flex flex-col items-center p-3 bg-white rounded-md shadow-xs"},k_={class:"text-lg font-semibold text-gray-900"},D_={class:"flex flex-col items-center p-3 bg-white rounded-md shadow-xs"},S_={class:"text-lg font-semibold text-gray-900"},M_={class:"flex flex-col items-center p-3 bg-white rounded-md shadow-xs"},C_={class:"text-lg font-semibold text-gray-900"},T_={class:"bg-white p-6 rounded-lg shadow-sm"},E_={class:"overflow-x-auto max-h-60"},$_={class:"min-w-full divide-y divide-gray-200"},j_={class:"bg-white divide-y divide-gray-200"},O_={class:"px-4 py-3 text-sm text-gray-900"},V_={class:"px-4 py-3 text-sm text-gray-700"},A_={class:"px-4 py-3 text-sm text-gray-700"},Y_={key:0,class:"text-gray-500 text-sm py-2"},I_={class:"bg-white p-6 rounded-lg shadow-sm"},N_={class:"overflow-x-auto max-h-60"},L_={class:"min-w-full divide-y divide-gray-200"},P_={class:"bg-white divide-y divide-gray-200"},U_={class:"px-4 py-3 text-sm text-gray-900"},R_={class:"px-4 py-3 text-sm text-gray-700"},F_={class:"px-4 py-3 text-sm text-gray-700"},W_={class:"px-4 py-3 text-sm text-gray-700"},H_={class:"px-4 py-3 text-sm text-gray-700"},B_={key:0,class:"text-gray-500 text-sm py-2"},z_={class:"bg-white p-6 rounded-lg shadow-sm"},q_={class:"overflow-x-auto max-h-60"},G_={class:"min-w-full divide-y divide-gray-200"},Z_={class:"bg-white divide-y divide-gray-200"},J_={class:"px-4 py-3 text-sm text-gray-900"},K_={class:"px-4 py-3 text-sm text-gray-700"},Q_={key:0,class:"text-gray-500 text-sm py-2"},X_={class:"bg-white p-6 rounded-lg shadow-sm"},e1={class:"overflow-x-auto"},t1={class:"min-w-full divide-y divide-gray-200"},s1={class:"bg-white divide-y divide-gray-200"},a1={class:"px-4 py-3 text-sm text-gray-900"},l1={class:"px-4 py-3 text-sm text-gray-700"},i1={key:0,class:"text-gray-500 text-sm py-2"},n1={class:"bg-white p-6 rounded-lg shadow-sm"},o1={class:"overflow-x-auto"},r1={class:"min-w-full divide-y divide-gray-200"},d1={class:"bg-white divide-y divide-gray-200"},u1={class:"px-4 py-3 text-sm text-gray-900"},c1={class:"px-4 py-3 text-sm text-gray-700"},m1={key:0,class:"text-gray-500 text-sm py-2"},v1={class:"bg-white p-6 rounded-lg shadow-sm"},h1={class:"overflow-x-auto max-h-60"},p1={class:"min-w-full divide-y divide-gray-200"},f1={class:"bg-white divide-y divide-gray-200"},y1={class:"px-4 py-3 text-sm text-gray-900"},g1={class:"px-4 py-3 text-sm text-gray-700"},_1={key:0,class:"text-gray-500 text-sm py-2"},w1={class:"bg-white p-6 rounded-lg shadow-sm grid grid-cols-1 md:grid-cols-2 gap-6"},b1={key:0,class:"space-y-2"},x1={class:"font-medium"},k1={key:1,class:"text-gray-500 text-sm py-2"},D1={key:0,class:"space-y-2"},S1={class:"font-medium"},M1={key:1,class:"text-gray-500 text-sm py-2"},C1={key:4,class:"text-center py-8 text-gray-500"},T1={__name:"SeoReportTab",props:{projectId:{type:[String,Number],required:!0},canCreateSeoReports:{type:Boolean,default:!1}},emits:["openCreateSeoReportModal"],setup(e,{emit:t}){const s=e,a=t,l=b([]),n=b(""),o=b(null),r=b(!0),m=b(!1),c=b(null),v=b(null),p=b(null),g=async()=>{r.value=!0,c.value=null;try{const Y=await window.axios.get(`/api/projects/${s.projectId}/seo-reports/available-months`);l.value=Y.data.map(w=>({value:w,label:new Date(w+"-01").toLocaleString("en-US",{year:"numeric",month:"long"})})),l.value.length>0&&(n.value=l.value[0].value)}catch(Y){console.error("Error fetching available months:",Y),c.value="Failed to load available report months."}finally{r.value=!1}},D=Y=>{const C=["clientName","reportingPeriod","authorityScoreValue","totalClicksValue","totalImpressionsValue","averagePositionValue","totalBacklinksValue","clicksImpressions","trafficSources","deviceUsage","countryPerformance","coreVitals","topQueries","keywordRankings","backlinks","zeroClickKeywords"].filter(T=>!(T in Y));return C.length>0?`Report data is missing expected top-level keys: ${C.join(", ")}. Please ensure the JSON structure is correct.`:!Y.clicksImpressions||!Array.isArray(Y.clicksImpressions.labels)||!Array.isArray(Y.clicksImpressions.clicks)?"clicksImpressions data is malformed.":!Y.trafficSources||!Array.isArray(Y.trafficSources.labels)||!Array.isArray(Y.trafficSources.sessions)?"trafficSources data is malformed.":null},x=async()=>{if(!n.value){o.value=null,p.value=null;return}m.value=!0,v.value=null,p.value=null;try{const w=(await window.axios.get(`/api/projects/${s.projectId}/seo-reports/${n.value}`)).data,C=D(w);C?(p.value=C,o.value=null):o.value=w}catch(Y){console.error("Error fetching SEO report:",Y),v.value="Failed to load SEO report for the selected month.",o.value=null,p.value=null}finally{m.value=!1}},M=(Y=null)=>{a("openCreateSeoReportModal",Y)},_=U(()=>{var Y;return((Y=o.value)==null?void 0:Y.clientName)||"N/A"}),y=U(()=>{var Y;return((Y=o.value)==null?void 0:Y.reportingPeriod)||"N/A"}),j=U(()=>{var Y;return((Y=o.value)==null?void 0:Y.authorityScoreValue)||"N/A"}),$=U(()=>{var Y;return((Y=o.value)==null?void 0:Y.totalClicksValue)||"N/A"}),S=U(()=>{var Y;return((Y=o.value)==null?void 0:Y.totalImpressionsValue)||"N/A"}),R=U(()=>{var Y;return((Y=o.value)==null?void 0:Y.averagePositionValue)||"N/A"}),Q=U(()=>{var Y;return((Y=o.value)==null?void 0:Y.totalBacklinksValue)||"N/A"}),N=U(()=>{var Y;return((Y=o.value)==null?void 0:Y.clicksImpressions)||{labels:[],clicks:[],impressions:[]}}),A=U(()=>{var Y;return((Y=o.value)==null?void 0:Y.trafficSources)||{labels:[],sessions:[],colors:[]}}),O=U(()=>{var Y;return((Y=o.value)==null?void 0:Y.deviceUsage)||{labels:[],clicks:[],colors:[]}}),E=U(()=>{var Y;return((Y=o.value)==null?void 0:Y.countryPerformance)||{labels:[],clicks:[]}}),V=U(()=>{var Y;return((Y=o.value)==null?void 0:Y.coreVitals)||{mobile:{},desktop:{}}}),F=U(()=>{var Y;return((Y=o.value)==null?void 0:Y.topQueries)||[]}),te=U(()=>{var Y;return((Y=o.value)==null?void 0:Y.keywordRankings)||[]});return Ye(()=>{g()}),pe(()=>s.projectId,()=>{g()}),pe(n,Y=>{Y?x():(o.value=null,p.value=null)}),(Y,w)=>(d(),u("div",Gg,[i("div",Zg,[w[4]||(w[4]=i("h4",{class:"text-lg font-semibold text-gray-900"},"SEO Reports",-1)),e.canCreateSeoReports?(d(),oe(_e,{key:0,onClick:w[0]||(w[0]=C=>M()),class:"bg-indigo-600 hover:bg-indigo-700 transition-colors"},{default:L(()=>w[3]||(w[3]=[W(" Add New Report ",-1)])),_:1,__:[3]})):k("",!0)]),i("div",Jg,[i("div",Kg,[i("div",Qg,[h(B,{for:"seo-report-month-filter",value:"Select Report Month"}),h(Me,{id:"seo-report-month-filter",modelValue:n.value,"onUpdate:modelValue":w[1]||(w[1]=C=>n.value=C),options:l.value,"value-key":"value","label-key":"label",placeholder:"Select a month",disabled:r.value||l.value.length===0,class:"mt-1"},null,8,["modelValue","options","disabled"])])]),c.value?(d(),u("div",Xg,f(c.value),1)):k("",!0),r.value?(d(),u("div",e_,"Loading available months...")):k("",!0),!r.value&&l.value.length===0?(d(),u("div",t_,"No SEO reports available for this project.")):k("",!0)]),i("div",s_,[i("div",a_,[i("h5",l_,[n.value?(d(),u("span",i_,"Report for "+f(new Date(n.value+"-01").toLocaleString("en-US",{year:"numeric",month:"long"})),1)):(d(),u("span",n_,"Select a month to view report"))]),e.canCreateSeoReports&&o.value&&n.value?(d(),oe(_e,{key:0,onClick:w[2]||(w[2]=C=>M({report_date:n.value,data:JSON.stringify(o.value,null,2)})),class:"bg-blue-500 hover:bg-blue-600 transition-colors text-sm py-1 px-3"},{default:L(()=>w[5]||(w[5]=[W(" Edit Report ",-1)])),_:1,__:[5]})):k("",!0)]),m.value?(d(),u("div",o_," Loading SEO report data... ")):v.value?(d(),u("div",r_,[i("p",d_,f(v.value),1)])):p.value?(d(),u("div",u_,[i("p",c_,"Data Structure Error: "+f(p.value),1),w[6]||(w[6]=i("p",{class:"text-gray-500 text-sm mt-2"},"Please ensure the JSON data conforms to the expected format.",-1))])):o.value?(d(),u("div",m_,[i("div",v_,[i("div",h_,[w[7]||(w[7]=i("p",{class:"text-sm text-gray-500"},"Client Name",-1)),i("p",p_,f(_.value),1)]),i("div",f_,[w[8]||(w[8]=i("p",{class:"text-sm text-gray-500"},"Reporting Period",-1)),i("p",y_,f(y.value),1)]),i("div",g_,[w[9]||(w[9]=i("p",{class:"text-sm text-gray-500"},"Authority Score",-1)),i("p",__,f(j.value),1)]),i("div",w_,[w[10]||(w[10]=i("p",{class:"text-sm text-gray-500"},"Total Clicks",-1)),i("p",b_,f($.value),1)]),i("div",x_,[w[11]||(w[11]=i("p",{class:"text-sm text-gray-500"},"Total Impressions",-1)),i("p",k_,f(S.value),1)]),i("div",D_,[w[12]||(w[12]=i("p",{class:"text-sm text-gray-500"},"Average Position",-1)),i("p",S_,f(R.value),1)]),i("div",M_,[w[13]||(w[13]=i("p",{class:"text-sm text-gray-500"},"Total Backlinks",-1)),i("p",C_,f(Q.value),1)])]),i("div",T_,[w[15]||(w[15]=i("h5",{class:"text-lg font-semibold text-gray-800 border-b pb-2 mb-4"},"Clicks & Impressions Trend",-1)),i("div",E_,[i("table",$_,[w[14]||(w[14]=i("thead",{class:"bg-gray-50"},[i("tr",null,[i("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date"),i("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Clicks"),i("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Impressions")])],-1)),i("tbody",j_,[(d(!0),u(X,null,le(N.value.labels,(C,T)=>(d(),u("tr",{key:T},[i("td",O_,f(C),1),i("td",V_,f(N.value.clicks[T]),1),i("td",A_,f(N.value.impressions[T]),1)]))),128))])])]),N.value.labels.length?k("",!0):(d(),u("p",Y_,"No clicks and impressions data available."))]),i("div",I_,[w[17]||(w[17]=i("h5",{class:"text-lg font-semibold text-gray-800 border-b pb-2 mb-4"},"Top Queries",-1)),i("div",N_,[i("table",L_,[w[16]||(w[16]=i("thead",{class:"bg-gray-50"},[i("tr",null,[i("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Query"),i("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Clicks"),i("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Impressions"),i("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"CTR"),i("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Position")])],-1)),i("tbody",P_,[(d(!0),u(X,null,le(F.value,C=>(d(),u("tr",{key:C.query},[i("td",U_,f(C.query),1),i("td",R_,f(C.clicks),1),i("td",F_,f(C.impressions),1),i("td",W_,f(C.ctr)+"%",1),i("td",H_,f(C.position),1)]))),128))])])]),F.value.length?k("",!0):(d(),u("p",B_,"No top queries data available."))]),i("div",z_,[w[19]||(w[19]=i("h5",{class:"text-lg font-semibold text-gray-800 border-b pb-2 mb-4"},"Keyword Rankings",-1)),i("div",q_,[i("table",G_,[w[18]||(w[18]=i("thead",{class:"bg-gray-50"},[i("tr",null,[i("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Keyword"),i("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Ranking")])],-1)),i("tbody",Z_,[(d(!0),u(X,null,le(te.value,C=>(d(),u("tr",{key:C.keyword},[i("td",J_,f(C.keyword),1),i("td",K_,f(C.ranking),1)]))),128))])])]),te.value.length?k("",!0):(d(),u("p",Q_,"No keyword rankings data available."))]),i("div",X_,[w[21]||(w[21]=i("h5",{class:"text-lg font-semibold text-gray-800 border-b pb-2 mb-4"},"Traffic Sources",-1)),i("div",e1,[i("table",t1,[w[20]||(w[20]=i("thead",{class:"bg-gray-50"},[i("tr",null,[i("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Source"),i("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Sessions")])],-1)),i("tbody",s1,[(d(!0),u(X,null,le(A.value.labels,(C,T)=>(d(),u("tr",{key:C},[i("td",a1,f(C),1),i("td",l1,f(A.value.sessions[T]),1)]))),128))])])]),A.value.labels.length?k("",!0):(d(),u("p",i1,"No traffic sources data available."))]),i("div",n1,[w[23]||(w[23]=i("h5",{class:"text-lg font-semibold text-gray-800 border-b pb-2 mb-4"},"Device Usage",-1)),i("div",o1,[i("table",r1,[w[22]||(w[22]=i("thead",{class:"bg-gray-50"},[i("tr",null,[i("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Device"),i("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Clicks")])],-1)),i("tbody",d1,[(d(!0),u(X,null,le(O.value.labels,(C,T)=>(d(),u("tr",{key:C},[i("td",u1,f(C),1),i("td",c1,f(O.value.clicks[T]),1)]))),128))])])]),O.value.labels.length?k("",!0):(d(),u("p",m1,"No device usage data available."))]),i("div",v1,[w[25]||(w[25]=i("h5",{class:"text-lg font-semibold text-gray-800 border-b pb-2 mb-4"},"Country Performance (Top 10)",-1)),i("div",h1,[i("table",p1,[w[24]||(w[24]=i("thead",{class:"bg-gray-50"},[i("tr",null,[i("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Country"),i("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Clicks")])],-1)),i("tbody",f1,[(d(!0),u(X,null,le(E.value.labels,C=>(d(),u("tr",{key:C},[i("td",y1,f(C),1),i("td",g1,f(E.value.clicks[E.value.labels.indexOf(C)]),1)]))),128))])])]),E.value.labels.length?k("",!0):(d(),u("p",_1,"No country performance data available."))]),i("div",w1,[i("div",null,[w[26]||(w[26]=i("h5",{class:"text-lg font-semibold text-gray-800 border-b pb-2 mb-4"},"Core Vitals (Mobile)",-1)),V.value.mobile&&V.value.mobile.labels&&V.value.mobile.labels.length?(d(),u("div",b1,[(d(!0),u(X,null,le(V.value.mobile.labels,(C,T)=>(d(),u("div",{key:C,class:"flex justify-between items-center text-sm text-gray-700"},[i("span",null,f(C)+":",1),i("span",x1,f(V.value.mobile.scores[T]),1)]))),128))])):(d(),u("p",k1,"No mobile core vitals data available."))]),i("div",null,[w[27]||(w[27]=i("h5",{class:"text-lg font-semibold text-gray-800 border-b pb-2 mb-4"},"Core Vitals (Desktop)",-1)),V.value.desktop&&V.value.desktop.labels&&V.value.desktop.labels.length?(d(),u("div",D1,[(d(!0),u(X,null,le(V.value.desktop.labels,(C,T)=>(d(),u("div",{key:C,class:"flex justify-between items-center text-sm text-gray-700"},[i("span",null,f(C)+":",1),i("span",S1,f(V.value.desktop.scores[T]),1)]))),128))])):(d(),u("p",M1,"No desktop core vitals data available."))])])])):(d(),u("div",C1," No report data to display. Please select a month from the dropdown. "))])]))}},E1=qe(T1,[["__scopeId","data-v-37cb2f02"]]),$1={class:"space-y-4"},j1={key:0,class:"text-xs text-gray-500 mt-1 text-red-500"},O1=["onBlur"],V1={__name:"CreateSeoReportModal",props:{show:{type:Boolean,default:!1},projectId:{type:[String,Number],required:!0},initialData:{type:Object,default:null}},emits:["close","saved"],setup(e,{emit:t}){const s=e,a=t,l=Ne({report_date:"",data:""}),n=b(null);pe(()=>[s.show,s.initialData],([_,y])=>{_&&(y?Object.assign(l,{report_date:y.report_date||"",data:y.data||""}):Object.assign(l,{report_date:"",data:""}))},{immediate:!0});const o=_=>{let y=_.data;try{y=JSON.stringify(JSON.parse(_.data))}catch{console.warn("Provided data is not valid JSON, sending as plain string. Backend should validate.")}return{report_date:_.report_date,data:y}},r=U(()=>s.initialData?"Edit SEO Report":"Create New SEO Report"),m=U(()=>`/api/projects/${s.projectId}/seo-reports`),c=U(()=>"post"),v=U(()=>s.initialData?"Update Report":"Create Report"),p=U(()=>s.initialData?"SEO Report updated successfully!":"SEO Report created successfully!"),g=_=>{a("saved",_),a("close")},D=()=>{a("close")},x=()=>{try{const _=JSON.parse(l.data);l.data=JSON.stringify(_,null,2)}catch(_){console.error("Invalid JSON for pretty print:",_)}},M=_=>{if(l.data)try{JSON.parse(l.data),_.data&&_.data[0]==="The data field must be a valid JSON string."&&(_.data=[])}catch{(!_.data||_.data.length===0)&&(_.data=["The data field must be a valid JSON string."])}};return(_,y)=>(d(),oe(Qe,{show:e.show,title:r.value,"api-endpoint":m.value,"http-method":c.value,"form-data":l,"submit-button-text":v.value,"success-message":p.value,"format-data-for-api":o,onClose:D,onSubmitted:g},{default:L(({errors:j})=>[i("div",$1,[i("div",null,[h(B,{for:"report_date",value:"Report Month (YYYY-MM)"}),h(fe,{id:"report_date",modelValue:l.report_date,"onUpdate:modelValue":y[0]||(y[0]=$=>l.report_date=$),type:"text",class:"mt-1 block w-full",placeholder:"e.g., 2025-07",required:"",autofocus:"",pattern:"\\d{4}-\\d{2}",title:"Please enter a date in YYYY-MM format (e.g., 2025-07)",disabled:!!e.initialData},null,8,["modelValue","disabled"]),h(de,{message:j.report_date?j.report_date[0]:"",class:"mt-2"},null,8,["message"]),y[2]||(y[2]=i("p",{class:"text-xs text-gray-500 mt-1"},"Enter the report month in YYYY-MM format (e.g., 2025-07).",-1)),e.initialData?(d(),u("p",j1,"Note: Report month cannot be changed when editing.")):k("",!0)]),i("div",null,[h(B,{for:"report_data",value:"Report Data (JSON)"}),we(i("textarea",{id:"report_data",ref_key:"jsonInputRef",ref:n,"onUpdate:modelValue":y[1]||(y[1]=$=>l.data=$),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 font-mono",rows:"10",placeholder:'Enter JSON data for the report, e.g., {"keywords_ranked": 150, "traffic": 1200, "rankings": {"keyword1": 5, "keyword2": 12}}',required:"",onBlur:$=>M(j)},null,40,O1),[[Ve,l.data]]),h(de,{message:j.data?j.data[0]:"",class:"mt-2"},null,8,["message"]),i("div",{class:"flex justify-end mt-2"},[i("button",{type:"button",onClick:x,class:"text-sm text-indigo-600 hover:text-indigo-800 font-medium"}," Format JSON ")])])])]),_:1},8,["show","title","api-endpoint","http-method","form-data","submit-button-text","success-message"]))}},A1={class:"py-8 max-w-full mx-auto px-4 sm:px-6 lg:px-8"},Y1={key:0,class:"text-center text-gray-600 text-lg animate-pulse"},I1={key:1,class:"text-center text-red-600 text-lg font-medium"},N1={key:2,class:"space-y-8"},L1={class:"flex justify-end items-center mb-5"},P1={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},U1={key:1},R1={key:0,class:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow mb-6"},F1={class:"flex justify-between items-center mb-4"},W1={class:"overflow-x-auto"},H1={class:"min-w-full divide-y divide-gray-200"},B1={class:"bg-white divide-y divide-gray-200"},z1={class:"px-4 py-3 text-sm text-gray-900"},q1={class:"px-4 py-3 text-sm text-gray-700"},G1={class:"px-4 py-3 text-sm text-gray-700"},Z1={class:"px-4 py-3 text-right"},J1=["onClick"],K1={key:1,class:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow mb-6"},Q1={class:"flex justify-between items-center mb-4"},X1={key:2,class:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow mb-6"},ew={class:"flex justify-between items-center mb-4"},tw={key:0,class:"text-gray-400 text-sm"},sw={key:1,class:"overflow-x-auto"},aw={class:"min-w-full divide-y divide-gray-200"},lw={class:"bg-white divide-y divide-gray-200"},iw={class:"px-4 py-3 text-sm text-gray-900"},nw={class:"px-4 py-3 text-sm text-gray-700"},ow={class:"px-4 py-3 text-sm text-gray-700"},rw={class:"px-4 py-3 text-sm text-gray-700"},dw={class:"px-4 py-3 text-sm text-gray-700"},uw={class:"px-4 py-3 text-right"},cw={key:3,class:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow mb-6"},mw={class:"flex justify-between items-center mb-4"},vw={class:"flex items-center gap-4"},hw={key:0},pw={key:0,class:"space-y-4"},fw={class:"flex justify-between"},yw={class:"flex-grow"},gw={key:0,class:"text-xs text-red-400 block mt-1"},_w={class:"flex items-center mt-1"},ww={class:"text-xs text-gray-500"},bw={key:0,class:"ml-2 px-2 py-0.5 bg-indigo-100 text-indigo-800 text-xs rounded-full"},xw={key:0},kw={key:1,class:"text-gray-400 text-sm"},Dw={__name:"Show",setup(e){const t=Ot(),s=ui().props.id,a=b({clients:[],users:[],notes:[],transactions:[],documents:[],meetings:[],tasks:[],emails:[],deliverables:[]}),l=b(!0),n=b(""),o=b(!1),r=b(!1),m=b(!1),c=b(!1),v=b(!1),p=b(!1),g=b(!1),D=b(!1),x=b(!1),M=b(null),_=b(null),y=b(!1),j=b(!1),$=b(null),S=[{value:"active",label:"Active"},{value:"completed",label:"Completed"},{value:"on_hold",label:"On Hold"},{value:"archived",label:"Archived"}],R=[{value:"Website Designing",label:"Website Designing"},{value:"SEO",label:"SEO"},{value:"Social Media",label:"Social Media"},{value:"Content Writing",label:"Content Writing"},{value:"Graphic Design",label:"Graphic Design"}],Q=[{value:"UpWork",label:"UpWork"},{value:"Direct",label:"Direct Client"},{value:"Wix Marketplace",label:"Wix Marketplace"},{value:"Referral",label:"Referral"}],N=b(null),A=b(null),O=ci(a),{canDo:E,canView:V}=Fs(s),F=U(()=>{var ie,H;return((H=(ie=t.value)==null?void 0:ie.role_data)==null?void 0:H.slug)==="super-admin"}),te=U(()=>E("manage_projects").value||F.value),Y=U(()=>E("edit_projects").value||F.value),w=U(()=>V("emails").value),C=U(()=>E("compose_emails").value),T=U(()=>E("approve_emails").value),z=U(()=>V("project_notes").value),ge=U(()=>E("add_project_notes").value),xt=U(()=>V("deliverables").value),se=U(()=>E("create_deliverables").value),Z=U(()=>V("seo_reports").value),K=U(()=>E("create_seo_reports").value),$e=U(()=>V("client_contacts").value);U(()=>V("users").value);const Nt=U(()=>V("project_financial",O).value),ca=U(()=>V("project_transactions").value);U(()=>V("client_financial").value);const Vl=[{value:"PKR",label:"PKR"},{value:"AUD",label:"AUD"},{value:"INR",label:"INR"},{value:"USD",label:"USD"},{value:"EUR",label:"EUR"},{value:"GBP",label:"GBP"}],Ds=b([]),Al=async()=>{try{const ie=await window.axios.get(`/api/projects/${s}/due-and-overdue-tasks`);Ds.value=ie.data}catch(ie){console.error("Error fetching due and overdue tasks:",ie)}},ma=U(()=>a.value.notes?[...a.value.notes].filter(ie=>ie.type!=="standup").sort((ie,H)=>new Date(H.created_at)-new Date(ie.created_at)).slice(0,3):[]),va=b([]),Ss=async()=>{try{const ie=await window.axios.get(`/api/projects/${s}/emails-simplified`,{params:{limit:5}});va.value=ie.data}catch(ie){console.error("Error fetching latest emails:",ie)}},Ze=async()=>{l.value=!0,n.value="";try{const ie=await window.axios.get(`/api/projects/${s}`);a.value=ie.data,console.log("Full project data received (Show.vue main fetch):",a.value),await Al()}catch(ie){n.value="Failed to load project data.",console.error("Error fetching project data:",ie),ie.response&&(ie.response.status===401||ie.response.status===403)&&(n.value="You are not authorized to view this project or your session expired. Please log in.")}finally{l.value=!1}},Yl=ie=>{a.value=ie,o.value=!1,Ze()},Il=ie=>{a.value.tasks=ie},Nl=ie=>{a.value.emails=ie,w.value&&Ss()},ha=ie=>{a.value.notes=ie},Ll=()=>{Ze()},Pl=()=>{N.value&&N.value.fetchMeetings()},pa=()=>{Ze()},Ul=ie=>{A.value=ie,Ms(),ya()},Rl=()=>{p.value=!0},Fl=()=>{g.value=!0,A.value="emails"},Wl=async()=>{g.value=!1,await Ze(),w.value&&await Ss()},Hl=()=>{g.value=!1},fa=ie=>{M.value=ie,_.value=null,x.value=!0},Ms=()=>{x.value=!1,M.value=null},Bl=()=>{Ze()},zl=ie=>{a.value.tasks=a.value.tasks.filter(H=>H.id!==ie),Ze(),Ms()},ql=ie=>{_.value=ie,M.value=null,x.value=!0},ya=()=>{x.value=!1,_.value=null},Gl=()=>{Ze()},Zl=()=>{y.value=!0},Jl=()=>{y.value=!1,Ze()},Kl=(ie=null)=>{$.value=ie,j.value=!0},Ql=()=>{j.value=!1};return Ye(async()=>{console.log("Show.vue mounted, fetching initial data...");try{await mi(s),console.log("Project permissions fetched (includes global)")}catch(ie){console.error(`Error fetching permissions for project ${s}:`,ie)}await pi(),await Ze(),w.value&&await Ss()}),(ie,H)=>{const Xl=vt("SecondaryButton");return d(),u(X,null,[h(J(vi),{title:a.value.name||"Project Details"},null,8,["title"]),h(si,null,{default:L(()=>{var ga;return[i("div",A1,[l.value?(d(),u("div",Y1," Loading project details... ")):n.value?(d(),u("div",I1,f(n.value),1)):(d(),u("div",N1,[h(cv,{project:a.value,"project-id":J(s),"can-manage-projects":te.value,"is-super-admin":F.value,"can-edit-projects":Y.value,onOpenEditModal:H[0]||(H[0]=G=>o.value=!0),onOpenStandupModal:H[1]||(H[1]=G=>m.value=!0),onOpenMeetingModal:H[2]||(H[2]=G=>r.value=!0),onOpenMagicLinkModal:H[3]||(H[3]=G=>v.value=!0),onResourceSaved:Ze,onOpenComposeModal:Fl},null,8,["project","project-id","can-manage-projects","is-super-admin","can-edit-projects"]),h(Ei,{"project-id":J(s),ref_key:"meetingsListComponent",ref:N},null,8,["project-id"]),h(bv,{tasks:a.value.tasks||[],emails:a.value.emails||[]},null,8,["tasks","emails"]),i("div",L1,[h(Me,{id:"display-currency-switcher",modelValue:J(Wt),"onUpdate:modelValue":H[4]||(H[4]=G=>hi(Wt)?Wt.value=G:null),options:Vl,"value-key":"value","label-key":"label",class:"w-20",containerClasses:"max-w-[150px]"},null,8,["modelValue"])]),Nt.value&&ca.value?(d(),oe(n0,{key:0,"project-id":J(s),"can-view-project-services-and-payments":Nt.value,"can-view-project-transactions":ca.value},null,8,["project-id","can-view-project-services-and-payments","can-view-project-transactions"])):k("",!0),i("div",P1,[$e.value?(d(),oe(v0,{key:0,"project-id":J(s),"can-view-client-contacts":$e.value},null,8,["project-id","can-view-client-contacts"])):k("",!0),h(x0,{"project-id":J(s),"can-view-users":!0},null,8,["project-id"]),h(N0,{"project-id":J(s),onViewUserTransactions:Rl},null,8,["project-id"])]),h(Sv,{selectedTab:A.value,"onUpdate:selectedTab":H[5]||(H[5]=G=>A.value=G),"can-view-emails":w.value,"can-view-notes":z.value,"can-view-deliverables":xt.value,"can-view-seo-reports":Z.value},null,8,["selectedTab","can-view-emails","can-view-notes","can-view-deliverables","can-view-seo-reports"]),A.value===null?(d(),u("div",U1,[Ds.value.length>0?(d(),u("div",R1,[i("div",F1,[H[25]||(H[25]=i("h4",{class:"text-lg font-semibold text-gray-900"},"Due & Overdue Tasks",-1)),i("button",{onClick:H[6]||(H[6]=G=>A.value="tasks"),class:"text-sm text-indigo-600 hover:text-indigo-800 font-medium"}," View All Tasks → ")]),i("div",W1,[i("table",H1,[H[26]||(H[26]=i("thead",{class:"bg-gray-50"},[i("tr",null,[i("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Title"),i("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),i("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Assigned To"),i("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),i("tbody",B1,[(d(!0),u(X,null,le(Ds.value,G=>{var mt;return d(),u("tr",{key:G.id,class:"hover:bg-gray-50 transition-colors"},[i("td",z1,f(G.name),1),i("td",q1,[i("span",{class:ae({"px-2 py-1 rounded-full text-xs font-medium":!0,"bg-yellow-100 text-yellow-800":G.status==="To Do","bg-blue-100 text-blue-800":G.status==="In Progress","bg-green-100 text-green-800":G.status==="Done","bg-red-100 text-red-800":G.status==="Blocked","bg-gray-100 text-gray-800":G.status==="Archived"})},f(G.status),3)]),i("td",G1,f((mt=G.assigned_to)==null?void 0:mt.name),1),i("td",Z1,[i("button",{onClick:_a=>fa(G.id),class:"text-indigo-600 hover:text-indigo-800 text-sm font-medium"}," View/Edit ",8,J1)])])}),128))])])])])):(d(),u("div",K1,[i("div",Q1,[H[27]||(H[27]=i("h4",{class:"text-lg font-semibold text-gray-900"},"Due & Overdue Tasks",-1)),i("button",{onClick:H[7]||(H[7]=G=>A.value="tasks"),class:"text-sm text-indigo-600 hover:text-indigo-800 font-medium"}," View All Tasks → ")]),H[28]||(H[28]=i("p",{class:"text-gray-400 text-sm"},"No due or overdue tasks.",-1))])),w.value?(d(),u("div",X1,[i("div",ew,[H[29]||(H[29]=i("h4",{class:"text-lg font-semibold text-gray-900"},"Latest Emails",-1)),i("button",{onClick:H[8]||(H[8]=G=>A.value="emails"),class:"text-sm text-indigo-600 hover:text-indigo-800 font-medium"}," View All Emails → ")]),(ga=a.value.emails)!=null&&ga.length?(d(),u("div",sw,[i("table",aw,[H[31]||(H[31]=i("thead",{class:"bg-gray-50"},[i("tr",null,[i("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Subject"),i("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"From"),i("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date"),i("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Type"),i("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),i("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),i("tbody",lw,[(d(!0),u(X,null,le(va.value,G=>{var mt;return d(),u("tr",{key:G.id,class:"hover:bg-gray-50 transition-colors"},[i("td",iw,f(G.subject),1),i("td",nw,f(((mt=G.sender)==null?void 0:mt.name)||"N/A"),1),i("td",ow,f(new Date(G.created_at).toLocaleDateString()),1),i("td",rw,[i("span",{class:ae({"px-2 py-1 rounded-full text-xs font-medium":!0,"bg-blue-100 text-blue-800":G.type==="sent","bg-purple-100 text-purple-800":G.type==="received"})},f(G.type?G.type.toUpperCase():"N/A"),3)]),i("td",dw,[i("span",{class:ae({"px-2 py-1 rounded-full text-xs font-medium":!0,"bg-green-100 text-green-800":G.status==="sent","bg-yellow-100 text-yellow-800":G.status==="pending_approval","bg-blue-200 text-blue-900":G.status==="pending_approval_received","bg-red-100 text-red-800":G.status==="rejected","bg-gray-100 text-gray-800":G.status==="draft"})},f(G.status.replace("_"," ").toUpperCase()),3)]),i("td",uw,[h(Xl,{class:"text-indigo-600 hover:text-indigo-800",onClick:_a=>ie.viewEmail(G)},{default:L(()=>H[30]||(H[30]=[W(" View ",-1)])),_:2,__:[30]},1032,["onClick"])])])}),128))])])])):(d(),u("div",tw,"No email communication found."))])):k("",!0),z.value?(d(),u("div",cw,[i("div",mw,[H[33]||(H[33]=i("h4",{class:"text-lg font-semibold text-gray-900"},"Latest Notes",-1)),i("div",vw,[i("button",{onClick:H[9]||(H[9]=G=>A.value="notes"),class:"text-sm text-indigo-600 hover:text-indigo-800 font-medium"}," View All Notes → "),ge.value?(d(),u("div",hw,[h(_e,{class:"bg-indigo-600 hover:bg-indigo-700 transition-colors",onClick:H[10]||(H[10]=G=>c.value=!0)},{default:L(()=>H[32]||(H[32]=[W(" Add Note ",-1)])),_:1,__:[32]})])):k("",!0)])]),ma.value.length?(d(),u("div",pw,[(d(!0),u(X,null,le(ma.value,G=>{var mt;return d(),u("div",{key:G.id,class:"p-4 bg-gray-50 rounded-md shadow-sm hover:bg-gray-100 transition-colors"},[i("div",fw,[i("div",yw,[i("p",{class:ae(["text-sm",{"text-gray-700":G.content!=="[Encrypted content could not be decrypted]","text-red-500 italic":G.content==="[Encrypted content could not be decrypted]"}])},[W(f(G.content)+" ",1),G.content==="[Encrypted content could not be decrypted]"?(d(),u("span",gw," (There was an issue decrypting this note. Please contact an administrator.) ")):k("",!0)],2),i("div",_w,[i("p",ww,"Added by "+f(((mt=G.user)==null?void 0:mt.name)||"Unknown")+" on "+f(new Date(G.created_at).toLocaleDateString()),1),G.reply_count>0?(d(),u("span",bw,f(G.reply_count)+" "+f(G.reply_count===1?"reply":"replies"),1)):k("",!0)])]),z.value&&G.chat_message_id&&a.value.google_chat_id?(d(),u("div",xw,[i("button",{onClick:H[11]||(H[11]=_a=>A.value="notes"),class:"text-sm text-indigo-600 hover:text-indigo-800 font-medium"}," View ")])):k("",!0)])])}),128))])):(d(),u("p",kw,"No notes available."))])):k("",!0)])):k("",!0),A.value==="tasks"?(d(),oe(Vh,{key:2,"project-id":J(s),"project-users":a.value.users||[],"can-manage-projects":te.value,onTasksUpdated:Il,onOpenTaskDetailSidebar:fa,onOpenCreateTaskModal:Zl},null,8,["project-id","project-users","can-manage-projects"])):k("",!0),A.value==="emails"?(d(),oe(uf,{key:3,"project-id":J(s),"can-view-emails":w.value,"can-compose-emails":C.value,"can-approve-emails":T.value,"user-project-role":J(O),"open-compose":g.value,onEmailsUpdated:Nl,onResetOpenCompose:H[12]||(H[12]=G=>g.value=!1)},null,8,["project-id","can-view-emails","can-compose-emails","can-approve-emails","user-project-role","open-compose"])):k("",!0),A.value==="standups"?(d(),oe(Pc,{key:4,projectId:J(s),users:a.value.users||[],onStandupAdded:pa},null,8,["projectId","users"])):k("",!0),A.value==="notes"?(d(),oe(Bf,{key:5,"project-id":J(s),"google-chat-id":a.value.google_chat_id,"can-view-notes":z.value,"can-add-notes":ge.value,onNotesUpdated:ha,onChangeTab:Ul},null,8,["project-id","google-chat-id","can-view-notes","can-add-notes"])):k("",!0),A.value==="deliverables"?(d(),oe(vg,{key:6,"project-id":J(s),"can-create-deliverables":se.value,"can-view-deliverables":xt.value,onDeliverablesUpdated:Ll,onOpenDeliverableDetailSidebar:ql},null,8,["project-id","can-create-deliverables","can-view-deliverables"])):k("",!0),A.value==="seo-reports"?(d(),oe(E1,{key:7,"project-id":J(s),"can-create-seo-reports":K.value,onOpenCreateSeoReportModal:Kl},null,8,["project-id","can-create-seo-reports"])):k("",!0)]))]),h(rt,{show:o.value,onClose:H[14]||(H[14]=G=>o.value=!1)},{default:L(()=>[h(fi,{show:o.value,project:a.value,statusOptions:S,departmentOptions:R,sourceOptions:Q,clientRoleOptions:[],userRoleOptions:[],paymentTypeOptions:[],onClose:H[13]||(H[13]=G=>o.value=!1),onSubmit:Yl},null,8,["show","project"])]),_:1},8,["show"]),h(em,{show:r.value,onClose:H[15]||(H[15]=G=>r.value=!1),onSaved:Pl,projectId:J(s),projectUsers:a.value.users||[]},null,8,["show","projectId","projectUsers"]),h(Va,{show:m.value,onClose:H[16]||(H[16]=G=>m.value=!1),onStandupAdded:pa,projectId:J(s)},null,8,["show","projectId"]),h(Aa,{show:c.value,"project-id":J(s),onClose:H[17]||(H[17]=G=>c.value=!1),onNoteAdded:ha},null,8,["show","project-id"]),h(om,{show:v.value,"project-id":J(s),"project-clients":a.value.clients||[],onClose:H[18]||(H[18]=G=>v.value=!1)},null,8,["show","project-id","project-clients"]),h(J0,{show:p.value,"project-id":J(s),"project-name":a.value.name,onClose:H[19]||(H[19]=G=>p.value=!1)},null,8,["show","project-id","project-name"]),h(jl,{show:g.value,"project-id":J(s),"user-project-role":J(O),onClose:Hl,onSubmitted:Wl,onError:H[20]||(H[20]=G=>console.error("Error composing email:",G))},null,8,["show","project-id","user-project-role"]),h(sy,{show:x.value,"onUpdate:show":H[21]||(H[21]=G=>x.value=G),title:M.value?"Task Details":_.value?"Deliverable Details":"Details",initialWidth:50},{content:L(()=>[M.value?(d(),oe(Ty,{key:0,"task-id":M.value,"project-users":a.value.users||[],onClose:Ms,onTaskUpdated:Bl,onTaskDeleted:zl},null,8,["task-id","project-users"])):_.value?(d(),oe(qg,{key:1,"project-id":J(s),"deliverable-id":_.value,onClose:ya,onDeliverableUpdated:Gl},null,8,["project-id","deliverable-id"])):k("",!0)]),_:1},8,["show","title"]),h(ti,{show:y.value,"project-id":J(s),onClose:H[22]||(H[22]=G=>y.value=!1),onSaved:Jl},null,8,["show","project-id"]),h(Ol,{show:D.value,"project-id":J(s),onClose:H[23]||(H[23]=G=>D.value=!1),onSaved:ie.handleDeliverableSaved},null,8,["show","project-id","onSaved"]),h(V1,{"project-id":J(s),show:j.value,"initial-data":$.value,onClose:H[24]||(H[24]=G=>j.value=!1),onSaved:Ql},null,8,["project-id","show","initial-data"])]}),_:1})],64)}}},Nw=qe(Dw,[["__scopeId","data-v-4fb56b07"]]);export{Nw as default};
