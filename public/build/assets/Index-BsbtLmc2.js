import{a as i,o as a,b as t,r as p,f as lt,e as ht,c as K,d as c,u as x,h as vt,w as F,i as m,g as H,v as f,x as _,t as d,m as h,F as y,l as k,j as I,k as X,s as Y,J as Q,K as bt,G as mt,T as yt}from"./app-BVX1Xzgm.js";import{r as _t,R as tt,a as wt,b as kt,_ as Ct}from"./AuthenticatedLayout-Nxxzrcgy.js";import{_ as jt}from"./MultiSelectDropdown-B3VcmzFf.js";import"./auto-BIBwKD9g.js";import{C as Mt}from"./chart-DUfl3Dpl.js";import{_ as $t}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as Dt}from"./ClockIcon-DqNTCVAw.js";import{r as Vt,a as Tt,b as Et}from"./NoticeboardModal-sriidC3u.js";import{r as Ut}from"./BriefcaseIcon-C_BtCJwI.js";import{r as St}from"./PlusIcon-D4buUb4F.js";import{r as et}from"./ChevronDownIcon-Dofu8BCV.js";import{r as At}from"./CheckCircleIcon-B8RFBjmu.js";import"./PrimaryButton-CSPVqQc4.js";import"./Modal-g15qzrXp.js";import"./InputLabel-BUJhUizc.js";import"./InputError-CFdo2J7R.js";import"./SecondaryButton-MUG3LyAH.js";import"./index-CHJvA3mY.js";import"./BaseFormModal-5czfdIGu.js";import"./TextInput-CzwDI2b_.js";import"./SelectDropdown-CAzD4PBf.js";/* empty css                                                                       */import"./debounce-C-hnF4Z3.js";import"./ApplicationLogo-JJBMKcky.js";import"./createLucideIcon-Cqz0PmdE.js";import"./plus-D5eC1iXN.js";import"./DangerButton-Bg47W890.js";import"./moment-BLMuvzoS.js";function st(v,u){return a(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 18 9 11.25l4.306 4.306a11.95 11.95 0 0 1 5.814-5.518l2.74-1.22m0 0-5.94-2.281m5.94 2.28-2.28 5.941"})])}function Ft(v,u){return a(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"})])}function Ht(v,u){return a(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"})])}function ot(v,u){return a(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m4.5 15.75 7.5-7.5 7.5 7.5"})])}function It(v,u){return a(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.72 13.829c-.24.03-.48.062-.72.096m.72-.096a42.415 42.415 0 0 1 10.56 0m-10.56 0L6.34 18m10.94-4.171c.24.03.48.062.72.096m-.72-.096L17.66 18m0 0 .229 2.523a1.125 1.125 0 0 1-1.12 1.227H7.231c-.662 0-1.18-.568-1.12-1.227L6.34 18m11.318 0h1.091A2.25 2.25 0 0 0 21 15.75V9.456c0-1.081-.768-2.015-1.837-2.175a48.055 48.055 0 0 0-1.913-.247M6.34 18H5.25A2.25 2.25 0 0 1 3 15.75V9.456c0-1.081.768-2.015 1.837-2.175a48.041 48.041 0 0 1 1.913-.247m10.5 0a48.536 48.536 0 0 0-10.5 0m10.5 0V3.375c0-.621-.504-1.125-1.125-1.125h-8.25c-.621 0-1.125.504-1.125 1.125v3.659M18 10.5h.008v.008H18V10.5Zm-3 0h.008v.008H15V10.5Z"})])}const Pt={class:"h-64 w-full"},Rt=["id"],rt={__name:"ChartComponent",props:{data:{type:Object,required:!0},title:{type:String,default:"Productivity Chart"},chartId:{type:String,default:"productivity-chart"},type:{type:String,default:"bar"}},setup(v){const u=v,b=p(null);let w=null;const C=()=>{w&&w.destroy(),b.value&&(w=new Mt(b.value,{type:u.type,data:u.data,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"},title:{display:!!u.title,text:u.title}},scales:u.type==="pie"||u.type==="doughnut"?{}:{y:{beginAtZero:!0,title:{display:!0,text:"Hours"}}}}}))};return lt(()=>{C()}),ht(()=>u.data,()=>{C()},{deep:!0}),(j,D)=>(a(),i("div",Pt,[t("canvas",{ref_key:"chartRef",ref:b,id:v.chartId},null,8,Rt)]))}},Bt={class:"flex justify-between items-center print:hidden"},Lt={class:"py-8 bg-gray-50 min-h-screen print:bg-white print:py-0"},Nt={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 space-y-6"},zt={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 print:hidden"},Zt={class:"grid grid-cols-1 md:grid-cols-5 gap-6 items-end"},Ot={class:"col-span-2"},qt=["disabled"],Gt={key:0,class:"grid grid-cols-2 md:grid-cols-4 gap-4"},Wt={class:"bg-white p-5 rounded-xl border border-gray-200 shadow-sm"},Jt={class:"flex items-center justify-between mb-2"},Kt={class:"text-3xl font-black text-gray-900"},Xt={class:"bg-white p-5 rounded-xl border border-gray-200 shadow-sm"},Yt={class:"flex items-center justify-between mb-2"},Qt={class:"text-3xl font-black text-gray-900"},te={class:"bg-white p-5 rounded-xl border border-gray-200 shadow-sm"},ee={class:"flex items-center justify-between mb-2"},se={class:"text-3xl font-black text-gray-900"},oe={class:"bg-white p-5 rounded-xl border border-gray-200 shadow-sm"},re={class:"flex items-center justify-between mb-2"},le={class:"text-3xl font-black text-red-600"},ae={key:1,class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},ne={class:"lg:col-span-2 bg-white rounded-xl border border-gray-200 p-6 shadow-sm"},ie={class:"text-sm font-bold text-gray-900 mb-6 flex items-center justify-between"},de={class:"flex items-center"},ue={class:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm"},ce={class:"text-sm font-bold text-gray-900 mb-6 flex items-center"},pe={key:2,class:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden"},xe={class:"px-6 py-4 border-b border-gray-100 flex items-center justify-between bg-gray-50/30"},ge={class:"text-sm font-bold text-gray-900 flex items-center"},fe={class:"overflow-x-auto"},he={class:"w-full text-sm text-left"},ve={class:"divide-y divide-gray-100"},be={class:"px-6 py-4 font-bold text-gray-900"},me={class:"px-6 py-4 text-right font-mono"},ye={class:"px-6 py-4 text-right"},_e={class:"px-2 py-1 rounded bg-green-50 text-green-700 font-bold text-xs"},we={class:"px-6 py-4"},ke={class:"w-full bg-gray-100 rounded-full h-1.5 overflow-hidden"},Ce=["onClick"],je={class:"flex items-center space-x-4"},Me=["src"],$e={class:"font-bold text-gray-900"},De={class:"text-xs text-gray-500 uppercase tracking-widest font-bold"},Ve={class:"flex items-center space-x-6"},Te=["onClick"],Ee={class:"text-right"},Ue={class:"text-2xl font-black text-indigo-600"},Se={class:"p-0 overflow-x-auto border-t border-gray-100 rounded-b-xl relative z-20"},Ae={class:"w-full text-sm text-left"},Fe={class:"bg-gray-50 text-gray-400 text-[10px] uppercase font-bold tracking-wider"},He={class:"px-4 py-3 text-right"},Ie={class:"flex items-center justify-end gap-1"},Pe={class:"divide-y divide-gray-200"},Re={class:"hover:bg-indigo-50/30 transition"},Be=["onClick"],Le={class:"px-4 py-4"},Ne=["onClick"],ze={class:"text-[10px] text-indigo-500 font-bold uppercase"},Ze={class:"px-4 py-4"},Oe={class:"flex flex-col gap-1"},qe={class:"text-[10px] font-bold"},Ge={key:0,class:"text-[8px] font-black uppercase bg-red-100 px-1 rounded"},We={class:"px-4 py-4 text-center"},Je={class:"inline-block relative"},Ke=["onMouseenter"],Xe={class:"px-4 py-4 text-right"},Ye=["onUpdate:modelValue","onChange"],Qe={class:"px-4 py-4 text-right"},ts=["onUpdate:modelValue","onChange"],es={class:"px-4 py-4 text-right font-black text-gray-900"},ss={key:0,class:"bg-gray-50/50"},os={colspan:"7",class:"px-12 py-4"},rs={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},ls={class:"text-[9px] font-bold text-gray-400 uppercase"},as={class:"text-[11px] font-mono text-gray-600"},ns={class:"text-xs font-black text-indigo-600"},is={key:1,class:"text-xs text-gray-400 italic"},ds={key:0,class:"fixed inset-0 z-[100] flex items-center justify-center p-4"},us={class:"relative bg-white rounded-2xl shadow-2xl w-full max-w-lg overflow-hidden transition-all transform scale-100"},cs={class:"p-6 border-b border-gray-100 flex justify-between items-center"},ps={class:"text-sm text-gray-500"},xs={class:"font-bold text-indigo-600"},gs=["value"],fs={class:"grid grid-cols-2 gap-4"},hs={class:"mb-3 font-black border-b border-slate-700 pb-2 uppercase tracking-tighter text-indigo-300 flex items-center justify-between"},vs={class:"text-[9px] bg-slate-800 px-2 py-0.5 rounded text-slate-400"},bs={class:"max-h-60 overflow-y-auto space-y-2 custom-scrollbar pr-1"},ms={class:"shrink-0 mt-0.5 text-xs"},ys={__name:"Index",setup(v){const u=p([]),b=p({}),w=p([]),C=p([]),j=p(!1),D=p([]),P=p(""),R=p(""),M=p({}),V=p({}),T=p(!1),g=p({user_id:null,user_name:"",name:"",project_id:"",hours:"",date:""}),E=p(!1),B=p(null),U=p(null),q=p([]),L=p(!1),S=p(null),N=p({top:0,left:0}),z=p(!1),at=(o,e)=>{var r;if(!((r=o.subtasks)!=null&&r.length))return;const s=e.currentTarget.getBoundingClientRect();S.value=o,N.value={top:s.top+window.scrollY,left:s.left+s.width/2+window.scrollX},z.value=!0},nt=()=>{z.value=!1},it=o=>{M.value[o]=!M.value[o]},dt=o=>{V.value[o]=!V.value[o]},ut=async o=>{if(!(!o||!o.task_id)){if(B.value=o.task_id,U.value=o.project_id||0,U.value)try{const e=await window.axios.get(`/api/projects/${U.value}/sections/clients-users`);q.value=e.data.users||[]}catch(e){console.error("Failed to fetch project users",e)}E.value=!0}},ct=o=>{g.value={user_id:o.user_id,user_name:o.user_name,name:"",project_id:"",hours:"",date:new Date().toISOString().split("T")[0]},T.value=!0},Z=()=>{T.value=!1},pt=async()=>{if(!(!g.value.name||!g.value.hours))try{await window.axios.post("/api/tasks/manual-effort",{name:g.value.name,assigned_to_user_id:g.value.user_id,project_id:g.value.project_id||null,manual_effort_override:parseFloat(g.value.hours),date:g.value.date}),T.value=!1,O()}catch(o){console.error("Failed to create manual entry",o)}},xt=o=>{var e;for(let s of u.value){const r=s.tasks.findIndex(l=>l.task_id===o.id);if(r!==-1){const l=s.tasks[r];if(l.task_name=o.name,l.effort=o.effort,l.priority=o.priority,l.status=((e=o.status)==null?void 0:e.value)||o.status,l.due_date=o.due_date,l.subtasks=o.subtasks||[],l.subtasks.length>0){const n=l.subtasks.length,$=l.subtasks.filter(ft=>ft.status==="done").length;l.checklist=`${$}/${n}`}break}}},A=K(()=>{let o=0,e=0,s=0,r=0;return u.value.forEach(l=>{o+=parseFloat(l.total_hours||0),l.tasks.forEach(n=>{e+=parseInt(n.effort||0),n.status==="Done"&&s++,n.is_late&&r++})}),{totalHours:o.toFixed(1),velocity:e,completed:s,late:r}}),G=K(()=>{const o={};return u.value.forEach(e=>{e.tasks.forEach(s=>{const r=s.due_date||"N/A";if(s.status==="Done"&&(o[r]||(o[r]={hours:0,points:0}),o[r].points+=parseInt(s.effort||0)),(s.sessions||[]).forEach(l=>{const n=(l.start||"").split(" ")[0];n&&(o[n]||(o[n]={hours:0,points:0}),o[n].hours+=parseFloat(l.duration_seconds||0)/3600)}),s.manual_effort_override&&(!s.sessions||s.sessions.length===0)){const l=s.due_date||"Manual";o[l]||(o[l]={hours:0,points:0}),o[l].hours+=parseFloat(s.manual_effort_override)}})}),Object.keys(o).sort().reverse().map(e=>{const s=o[e],r=s.hours>0?(s.points/s.hours).toFixed(1):0;return{date:e,...s,efficiency:r}})}),O=async()=>{j.value=!0;try{const o=await window.axios.get("/api/productivity/report",{params:{user_ids:D.value.join(","),date_start:P.value,date_end:R.value}});u.value=o.data.reportData.details,b.value=o.data.reportData.charts,w.value=o.data.users,C.value=o.data.projects,u.value.length===1&&(M.value[u.value[0].user_id]=!0)}catch(o){console.error(o)}finally{j.value=!1}},W=async(o,e,s,r)=>{if(s==="manual_effort_override"){const l=r===""||r===null?null:parseFloat(r);o.manual_effort_override=l,l!==null&&!isNaN(l)?o.used_seconds=l*3600:o.used_seconds=o.total_seconds||0;let n=0;e.tasks.forEach($=>{n+=parseFloat($.used_seconds||0)}),e.total_seconds=n,e.total_hours=(n/3600).toFixed(2)}else o[s]=r;try{await window.axios.post(`/api/tasks/${o.task_id}/productivity-meta`,{[s]:r})}catch(l){console.error("Persistence failed",l)}},J=o=>{if(o==null)return"0h";const e=Math.floor(Math.abs(o)/3600),s=Math.floor(Math.abs(o)%3600/60);return`${e}h ${s}m`};lt(()=>O());const gt=()=>window.print();return(o,e)=>(a(),i(y,null,[c(x(vt),{title:"Productivity Dashboard"}),c(Ct,null,{header:F(()=>[t("div",Bt,[e[12]||(e[12]=t("h2",{class:"font-bold text-2xl text-gray-900 tracking-tight"},"Productivity Dashboard",-1)),t("button",{onClick:gt,class:"flex items-center px-4 py-2 bg-white border border-gray-300 rounded-lg text-sm font-semibold text-gray-700 hover:bg-gray-50 shadow-sm transition"},[c(x(It),{class:"h-4 w-4 mr-2"}),e[11]||(e[11]=h(" Export PDF ",-1))])])]),default:F(()=>[t("div",Lt,[t("div",Nt,[t("div",zt,[t("div",Zt,[t("div",Ot,[e[13]||(e[13]=t("label",{class:"text-xs font-bold text-gray-500 uppercase mb-2 block"},"Team Members",-1)),c(jt,{modelValue:D.value,"onUpdate:modelValue":e[0]||(e[0]=s=>D.value=s),options:w.value,"is-multi":!0,placeholder:"Search team members..."},null,8,["modelValue","options"])]),t("div",null,[e[14]||(e[14]=t("label",{class:"text-xs font-bold text-gray-500 uppercase mb-2 block"},"Range Start",-1)),f(t("input",{type:"date","onUpdate:modelValue":e[1]||(e[1]=s=>P.value=s),class:"w-full rounded-lg border-gray-300 text-sm focus:ring-indigo-500"},null,512),[[_,P.value]])]),t("div",null,[e[15]||(e[15]=t("label",{class:"text-xs font-bold text-gray-500 uppercase mb-2 block"},"Range End",-1)),f(t("input",{type:"date","onUpdate:modelValue":e[2]||(e[2]=s=>R.value=s),class:"w-full rounded-lg border-gray-300 text-sm focus:ring-indigo-500"},null,512),[[_,R.value]])]),t("button",{onClick:O,disabled:j.value,class:"w-full bg-indigo-600 text-white font-bold py-2.5 rounded-lg hover:bg-indigo-700 transition disabled:opacity-50"},d(j.value?"Generating...":"Refresh Report"),9,qt)])]),u.value.length?(a(),i("div",Gt,[t("div",Wt,[t("div",Jt,[c(x(Dt),{class:"h-6 w-6 text-indigo-500"}),e[16]||(e[16]=t("span",{class:"text-xs font-bold text-gray-400"},"Total Hours",-1))]),t("div",Kt,d(A.value.totalHours)+"h",1)]),t("div",Xt,[t("div",Yt,[c(x(st),{class:"h-6 w-6 text-green-500"}),e[17]||(e[17]=t("span",{class:"text-xs font-bold text-gray-400"},"Total Velocity",-1))]),t("div",Qt,d(A.value.velocity)+" pts",1)]),t("div",te,[t("div",ee,[c(x(Vt),{class:"h-6 w-6 text-blue-500"}),e[18]||(e[18]=t("span",{class:"text-xs font-bold text-gray-400"},"Tasks Completed",-1))]),t("div",se,d(A.value.completed),1)]),t("div",oe,[t("div",re,[c(x(Tt),{class:"h-6 w-6 text-red-500"}),e[19]||(e[19]=t("span",{class:"text-xs font-bold text-gray-400"},"Overdue Items",-1))]),t("div",le,d(A.value.late),1)])])):m("",!0),b.value.daily_trend?(a(),i("div",ae,[t("div",ne,[t("h3",ie,[t("div",de,[c(x(st),{class:"h-4 w-4 mr-2 text-indigo-600"}),e[20]||(e[20]=h(" Activity vs Output Trend ",-1))]),e[21]||(e[21]=t("div",{class:"flex gap-4 text-[10px] font-bold uppercase tracking-wider"},[t("span",{class:"flex items-center gap-1"},[t("span",{class:"w-2 h-2 rounded-full bg-indigo-500"}),h(" Hours")]),t("span",{class:"flex items-center gap-1"},[t("span",{class:"w-2 h-2 rounded-full bg-green-500"}),h(" Points")])],-1))]),c(rt,{data:b.value.daily_trend,type:"line",height:"250"},null,8,["data"])]),t("div",ue,[t("h3",ce,[c(x(Ut),{class:"h-4 w-4 mr-2 text-green-600"}),e[22]||(e[22]=h(" Project Load ",-1))]),c(rt,{data:b.value.project_dist,type:"pie",height:"250"},null,8,["data"])])])):m("",!0),G.value.length?(a(),i("div",pe,[t("div",xe,[t("h3",ge,[c(x(Ht),{class:"h-4 w-4 mr-2 text-indigo-600"}),e[23]||(e[23]=h(" Daily Productivity Breakdown ",-1))])]),t("div",fe,[t("table",he,[e[24]||(e[24]=t("thead",{class:"bg-gray-50/50 text-[10px] uppercase font-bold text-gray-500 tracking-wider"},[t("tr",null,[t("th",{class:"px-6 py-3"},"Date"),t("th",{class:"px-6 py-3 text-right"},"Hours Logged"),t("th",{class:"px-6 py-3 text-right"},"Points Done"),t("th",{class:"px-6 py-3 text-right"},"Efficiency (Pts/Hr)"),t("th",{class:"px-6 py-3 w-1/3"},"Velocity Meter")])],-1)),t("tbody",ve,[(a(!0),i(y,null,k(G.value,s=>(a(),i("tr",{key:s.date,class:"hover:bg-gray-50/50"},[t("td",be,d(s.date),1),t("td",me,d(s.hours.toFixed(1))+"h",1),t("td",ye,[t("span",_e,d(s.points)+" pts",1)]),t("td",{class:I(["px-6 py-4 text-right font-black",s.efficiency>2?"text-green-600":"text-gray-500"])},d(s.efficiency),3),t("td",we,[t("div",ke,[t("div",{class:"bg-indigo-500 h-full rounded-full transition-all duration-500",style:X({width:Math.min(s.points*10,100)+"%"})},null,4)])])]))),128))])])])])):m("",!0),(a(!0),i(y,null,k(u.value,s=>(a(),i("div",{key:s.user_id,class:"bg-white rounded-xl border border-gray-200 shadow-sm"},[t("div",{onClick:r=>it(s.user_id),class:"p-6 flex items-center justify-between bg-gray-50/50 cursor-pointer hover:bg-gray-100 transition print:cursor-default rounded-t-xl relative z-10"},[t("div",je,[t("img",{src:s.avatar,class:"h-12 w-12 rounded-full border-2 border-white shadow-sm"},null,8,Me),t("div",null,[t("h4",$e,d(s.user_name),1),t("p",De,d(s.tasks.length)+" Tasks Managed",1)])]),t("div",Ve,[t("button",{onClick:Y(r=>ct(s),["stop"]),class:"p-2 rounded-full hover:bg-white text-gray-400 hover:text-indigo-600 transition print:hidden",title:"Add Manual Activity"},[c(x(St),{class:"h-5 w-5"})],8,Te),t("div",Ee,[t("div",Ue,d(s.total_hours)+" hrs",1),e[25]||(e[25]=t("p",{class:"text-[10px] text-gray-400 font-bold uppercase"},"Total Charged",-1))]),(a(),H(Q(M.value[s.user_id]?x(ot):x(et)),{class:"h-5 w-5 text-gray-400 print:hidden"}))])],8,Ce),f(t("div",Se,[t("table",Ae,[t("thead",Fe,[t("tr",null,[e[27]||(e[27]=t("th",{class:"px-4 py-3 w-8"},null,-1)),e[28]||(e[28]=t("th",{class:"px-4 py-3"},"Task Detail",-1)),e[29]||(e[29]=t("th",{class:"px-4 py-3"},"Status / Due",-1)),e[30]||(e[30]=t("th",{class:"px-4 py-3 text-center"},"Checklist",-1)),t("th",He,[t("div",Ie,[e[26]||(e[26]=h(" Effort ",-1)),c(x(_t),{class:"h-3 w-3 cursor-pointer",onClick:e[3]||(e[3]=r=>L.value=!0)})])]),e[31]||(e[31]=t("th",{class:"px-4 py-3 text-right"},"Manual (Hrs)",-1)),e[32]||(e[32]=t("th",{class:"px-4 py-3 text-right"},"Total Time",-1))])]),t("tbody",Pe,[(a(!0),i(y,null,k(s.tasks,r=>{var l;return a(),i(y,{key:r.task_id},[t("tr",Re,[t("td",{class:"px-4 py-4 cursor-pointer text-gray-300 hover:text-indigo-600",onClick:n=>dt(r.task_id)},[(a(),H(Q(V.value[r.task_id]?x(ot):x(et)),{class:"h-4 w-4"}))],8,Be),t("td",Le,[t("div",{onClick:n=>ut(r),class:"font-bold text-gray-900 mb-0.5 cursor-pointer hover:text-indigo-600 hover:underline transition print:no-underline"},d(r.task_name),9,Ne),t("div",ze,d(r.project_name),1)]),t("td",Ze,[t("div",Oe,[t("span",{class:I([{"bg-green-100 text-green-700":r.status==="Done","bg-yellow-100 text-yellow-700":r.status==="In Progress","bg-gray-100 text-gray-600":r.status==="To Do"},"px-2 py-0.5 rounded text-[9px] font-black uppercase w-fit"])},d(r.status),3),t("div",{class:I(["flex items-center gap-1",r.is_late?"text-red-500":"text-gray-400"])},[c(x(Ft),{class:"h-3 w-3"}),t("span",qe,d(r.due_date||"No Date"),1),r.is_late?(a(),i("span",Ge,"Late")):m("",!0)],2)])]),t("td",We,[t("div",Je,[t("span",{class:"inline-flex items-center px-2 py-1 rounded-full text-[10px] font-bold bg-gray-100 text-gray-600 cursor-pointer hover:bg-gray-200 transition",onMouseenter:n=>at(r,n),onMouseleave:nt},[c(x(At),{class:"h-3 w-3 mr-1"}),h(" "+d(r.checklist||"0/0"),1)],40,Ke)])]),t("td",Xe,[f(t("input",{type:"number","onUpdate:modelValue":n=>r.effort=n,onChange:n=>W(r,s,"effort",r.effort),class:"w-16 text-right border-0 bg-transparent focus:ring-1 focus:ring-indigo-200 rounded text-xs font-bold"},null,40,Ye),[[_,r.effort]])]),t("td",Qe,[f(t("input",{type:"number",step:"0.5","onUpdate:modelValue":n=>r.manual_effort_override=n,onChange:n=>W(r,s,"manual_effort_override",r.manual_effort_override),class:"w-16 text-right border-0 bg-transparent focus:ring-1 focus:ring-indigo-200 rounded text-xs font-bold"},null,40,ts),[[_,r.manual_effort_override]])]),t("td",es,d(J(r.used_seconds)),1)]),V.value[r.task_id]?(a(),i("tr",ss,[t("td",os,[e[33]||(e[33]=t("div",{class:"text-[10px] font-black text-gray-400 uppercase mb-3 tracking-widest"},"Activity Session Logs",-1)),(l=r.sessions)!=null&&l.length?(a(),i("div",rs,[(a(!0),i(y,null,k(r.sessions,(n,$)=>(a(),i("div",{key:$,class:"bg-white p-3 rounded-lg border border-gray-100 shadow-sm flex items-center justify-between"},[t("div",null,[t("div",ls,d(n.type==="ongoing"?"Running":"Recorded"),1),t("div",as,d((n.start||"").split(" ")[1])+" - "+d(n.end==="Now"?"Now":(n.end||"").split(" ")[1]),1)]),t("div",ns,d(J(n.duration_seconds)),1)]))),128))])):(a(),i("div",is,"No activity logs tracked for this specific period."))])])):m("",!0)],64)}),128))])])],512),[[bt,M.value[s.user_id]]])]))),128))])]),c(tt,{show:L.value,"onUpdate:show":e[4]||(e[4]=s=>L.value=s),title:"Effort Estimation Guide",initialWidth:30},{content:F(()=>[c(wt)]),_:1},8,["show"]),c(tt,{show:E.value,"onUpdate:show":e[6]||(e[6]=s=>E.value=s),title:"Task Details",initialWidth:45},{content:F(()=>[B.value?(a(),H(kt,{key:0,"task-id":B.value,"project-id":U.value,"project-users":q.value,onClose:e[5]||(e[5]=s=>E.value=!1),onTaskUpdated:xt},null,8,["task-id","project-id","project-users"])):m("",!0)]),_:1},8,["show"]),T.value?(a(),i("div",ds,[t("div",{class:"absolute inset-0 bg-gray-900/60 backdrop-blur-sm",onClick:Z}),t("div",us,[t("div",cs,[e[34]||(e[34]=t("h3",{class:"text-lg font-bold text-gray-900"},"Add Manual Activity",-1)),t("button",{onClick:Z,class:"text-gray-400 hover:text-gray-600"},[c(x(Et),{class:"h-6 w-6"})])]),t("form",{onSubmit:Y(pt,["prevent"]),class:"p-6 space-y-4"},[t("p",ps,[e[35]||(e[35]=h("Manual entry for: ",-1)),t("span",xs,d(g.value.user_name),1)]),t("div",null,[e[36]||(e[36]=t("label",{class:"block text-xs font-bold text-gray-500 uppercase mb-1"},"Task Title",-1)),f(t("input",{type:"text","onUpdate:modelValue":e[7]||(e[7]=s=>g.value.name=s),required:"",class:"w-full rounded-lg border-gray-300 focus:ring-indigo-500 text-sm",placeholder:"Work description..."},null,512),[[_,g.value.name]])]),t("div",null,[e[38]||(e[38]=t("label",{class:"block text-xs font-bold text-gray-500 uppercase mb-1"},"Project Link",-1)),f(t("select",{"onUpdate:modelValue":e[8]||(e[8]=s=>g.value.project_id=s),class:"w-full rounded-lg border-gray-300 focus:ring-indigo-500 text-sm"},[e[37]||(e[37]=t("option",{value:""},"General / Internal",-1)),(a(!0),i(y,null,k(C.value,s=>(a(),i("option",{key:s.value,value:s.value},d(s.label),9,gs))),128))],512),[[mt,g.value.project_id]])]),t("div",fs,[t("div",null,[e[39]||(e[39]=t("label",{class:"block text-xs font-bold text-gray-500 uppercase mb-1"},"Date",-1)),f(t("input",{type:"date","onUpdate:modelValue":e[9]||(e[9]=s=>g.value.date=s),required:"",class:"w-full rounded-lg border-gray-300 focus:ring-indigo-500 text-sm"},null,512),[[_,g.value.date]])]),t("div",null,[e[40]||(e[40]=t("label",{class:"block text-xs font-bold text-gray-500 uppercase mb-1"},"Hours Logged",-1)),f(t("input",{type:"number",step:"0.1","onUpdate:modelValue":e[10]||(e[10]=s=>g.value.hours=s),required:"",class:"w-full rounded-lg border-gray-300 focus:ring-indigo-500 text-sm",placeholder:"e.g. 1.5"},null,512),[[_,g.value.hours]])])]),t("div",{class:"pt-4 flex gap-3"},[e[41]||(e[41]=t("button",{type:"submit",class:"flex-1 bg-indigo-600 text-white font-bold py-2.5 rounded-xl hover:bg-indigo-700 transition"},"Save Log",-1)),t("button",{type:"button",onClick:Z,class:"px-6 py-2.5 border border-gray-200 text-gray-600 font-bold rounded-xl hover:bg-gray-50 transition"},"Cancel")])],32)])])):m("",!0),(a(),H(yt,{to:"body"},[z.value&&S.value?(a(),i("div",{key:0,class:"fixed z-[9999] w-64 bg-slate-900 text-white text-[11px] rounded-xl shadow-2xl p-4 border border-slate-700 pointer-events-none",style:X({top:N.value.top-10+"px",left:N.value.left+"px",transform:"translate(-50%, -100%)"})},[t("div",hs,[e[42]||(e[42]=t("span",null,"Activity Checklist",-1)),t("span",vs,d(S.value.checklist),1)]),t("div",bs,[(a(!0),i(y,null,k(S.value.subtasks,(s,r)=>(a(),i("div",{key:r,class:"flex items-start gap-3 text-left"},[t("span",ms,d(s.status==="done"?"✅":"⬜"),1),t("span",{class:I(["leading-snug",{"text-slate-400 line-through":s.status==="done"}])},d(s.name),3)]))),128))]),e[43]||(e[43]=t("div",{class:"absolute top-full left-1/2 -translate-x-1/2 border-8 border-transparent border-t-slate-900"},null,-1))],4)):m("",!0)]))]),_:1})],64))}},Js=$t(ys,[["__scopeId","data-v-118cd077"]]);export{Js as default};
