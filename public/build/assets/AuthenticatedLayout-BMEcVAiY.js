import{r as G,c as K,P as Ne,f as fe,Q as Fe,a as o,i as x,o as t,F as Q,l as ee,b as e,t as I,u as E,R as ua,S as Na,T as da,U as ca,j as W,p as X,e as ie,g as B,w as A,m as T,d as c,q as ae,v as ve,B as Ve,V as Va,n as Te,y as Ue,x as ma,s as Ce,D as La,M as me,I as oe,k as Ua,N as be,W as va,X as za,Y as aa,J as Ae,G as ge,Z as pa,_ as Je,z as Ze,$ as he,a0 as ue,L as Ra,a1 as we,a2 as He,E as fa,C as Fa,a3 as Oa,a4 as Ka,a5 as ta,a6 as la,H as Ha}from"./app-BXwNPRau.js";import{_ as ne}from"./PrimaryButton-DDR27hXv.js";import{_ as Ye}from"./Modal-CyQll2yY.js";import{_ as J}from"./InputLabel-xP1ePHj0.js";import{_ as Z}from"./InputError-C5PNSPQA.js";import{_ as Re}from"./SecondaryButton-DxVzHrUO.js";import{r as qa}from"./index-BYXC290y.js";import{B as $e}from"./BaseFormModal-pcrUNZXB.js";import{_ as pe}from"./TextInput-BpHbgyBH.js";import{S as ce}from"./SelectDropdown-DM-nWwpK.js";import{d as Wa}from"./debounce-C-hnF4Z3.js";import{_ as Le}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as Ja}from"./Checkbox-MWSF-P8H.js";import{A as Ya}from"./ApplicationLogo-D-Jv_k0y.js";import{D as Qe}from"./DangerButton-042f3578.js";import{h as Za}from"./moment-BLMuvzoS.js";import{_ as Qa,a as Xa}from"./NoticeboardModal-CztiEtks.js";const et={key:0,class:"fixed bottom-4 right-4 z-50 flex flex-col items-end space-y-2"},at={key:0,class:"notification-list w-full max-w-xs space-y-2"},tt={class:"flex-1 min-w-0"},lt={class:"flex items-start justify-between gap-2 mb-1"},st={class:"flex-1 min-w-0"},ot={key:0,class:"text-base font-semibold text-gray-800 truncate"},it={key:1,class:"text-xs text-gray-500"},rt={key:0,class:"text-xs text-gray-600 mb-2"},nt={class:"flex items-center justify-between mt-2"},ut={key:0,class:"text-xs text-gray-500 font-medium"},dt=["onClick"],ct={key:1,class:"flex justify-end w-full max-w-xs"},mt={key:0},vt={key:1},_e="notification_minimized_state",pt=3,ft={__name:"PushNotificationContainer",props:{sidebarIsOpen:{type:Boolean,default:!1}},setup(s){const r=G(!1),i=G(null),u=G(0),a=G(null),w=K(()=>Ne.value.notifications.filter(m=>m.isNewPush).slice(0,pt)),d=K(()=>{const m=Math.floor(u.value/60),p=u.value%60;return`${String(m).padStart(2,"0")}:${String(p).padStart(2,"0")}`}),f=m=>{if(!m)return null;const p=m.match(/\/task\/(\d+)/);return p?parseInt(p[1]):null},v=m=>{if(!m)return null;const p=m.match(/\/project\/(\d+)\//);return p?parseInt(p[1]):null},l=()=>{if(r.value=!r.value,clearTimeout(i.value),clearInterval(a.value),r.value){const m=Date.now()+3e5;localStorage.setItem(_e,JSON.stringify({isMinimized:!0,expiryTime:m})),i.value=setTimeout(()=>{r.value=!1,clearInterval(a.value),localStorage.removeItem(_e)},3e5),u.value=300,a.value=setInterval(()=>{u.value>0?u.value--:clearInterval(a.value)},1e3)}else localStorage.removeItem(_e)},n=async m=>{Na(m.id),await da(m.view_id);const p=m.task_id||f(m.url),_=m.project_id||v(m.url);p&&_?ca(p,_):(console.warn("Could not open task sidebar. Falling back to redirecting."),m.url&&(window.location.href=m.url))};return fe(()=>{const m=localStorage.getItem(_e);if(m)try{const{isMinimized:p,expiryTime:_}=JSON.parse(m),C=Date.now(),b=_-C;b>0?(r.value=p,u.value=Math.floor(b/1e3),i.value=setTimeout(()=>{r.value=!1,clearInterval(a.value),localStorage.removeItem(_e)},b),a.value=setInterval(()=>{u.value>0?u.value--:clearInterval(a.value)},1e3)):localStorage.removeItem(_e)}catch(p){console.error("Error restoring notification minimized state:",p),localStorage.removeItem(_e)}}),Fe(()=>{clearTimeout(i.value),clearInterval(a.value)}),(m,p)=>s.sidebarIsOpen?x("",!0):(t(),o("div",et,[!r.value&&w.value.length>0?(t(),o("div",at,[(t(!0),o(Q,null,ee(w.value,_=>(t(),o("div",{key:_.id,class:"bg-white rounded-lg shadow-lg p-3 flex items-start space-x-3 border border-gray-200 transition-opacity duration-300 opacity-60 hover:opacity-100"},[e("div",tt,[e("div",lt,[e("div",st,[_.title?(t(),o("h3",ot,I(_.title),1)):x("",!0),_.project_name?(t(),o("p",it,I(_.project_name),1)):x("",!0)])]),_.message?(t(),o("p",rt,I(_.message),1)):x("",!0),e("div",nt,[_.due_date?(t(),o("div",ut," Due: "+I(E(ua)(_.due_date)),1)):x("",!0),e("button",{onClick:C=>n(_),class:"px-2.5 py-1 bg-blue-600 text-white text-xs font-medium rounded-md hover:bg-blue-700 transition-colors duration-200 shadow"},I(_.button_label||"View"),9,dt)])])]))),128))])):x("",!0),w.value.length>0?(t(),o("div",ct,[e("button",{onClick:l,class:"bg-white/80 backdrop-blur-sm text-gray-600 hover:text-gray-900 text-xs font-bold py-1 px-3 rounded-full shadow-md transition-all duration-300"},[r.value?(t(),o("span",mt,"Show ("+I(d.value)+")",1)):(t(),o("span",vt,"Minimize"))])])):x("",!0)]))}},gt={class:"fixed top-4 right-4 z-[9999] flex flex-col items-end space-y-3"},bt={class:"p-4"},ht={class:"text-sm font-medium text-white"},yt={key:0,class:"mt-3 flex gap-2"},kt=["onClick"],wt=["onClick"],At={__name:"StandardNotificationContainer",setup(s,{expose:r}){const i=G([]),u=(v,l="info",n=5e3)=>{let m;typeof v=="object"&&v!==null?m={...v}:m={message:v,type:l,duration:n};const p=m.id||crypto.randomUUID(),_={id:p,message:m.message||"",type:m.type||"info",duration:typeof m.duration=="number"?m.duration:5e3,sticky:!!m.sticky,confirm:m.confirm||null};return i.value.unshift(_),!_.sticky&&!_.confirm&&setTimeout(()=>{a(p)},_.duration),p},a=v=>{const l=i.value.findIndex(n=>n.id===v);l>-1&&i.value.splice(l,1)},w=v=>{const l=i.value.find(n=>n.id===v);if(l&&l.confirm&&typeof l.confirm.onConfirm=="function")try{l.confirm.onConfirm()}catch{}a(v)},d=v=>{const l=i.value.find(n=>n.id===v);if(l&&l.confirm&&typeof l.confirm.onCancel=="function")try{l.confirm.onCancel()}catch{}a(v)},f=v=>{switch(v){case"success":return"bg-green-500";case"error":return"bg-red-500";case"warning":return"bg-yellow-500";case"info":default:return"bg-blue-500"}};return r({addNotification:u}),(v,l)=>(t(),o("div",gt,[(t(!0),o(Q,null,ee(i.value,n=>(t(),o("div",{key:n.id,class:W(["w-full max-w-sm rounded-md shadow-lg pointer-events-auto overflow-hidden",f(n.type)])},[e("div",bt,[e("p",ht,I(n.message),1),n.confirm?(t(),o("div",yt,[e("button",{class:"px-3 py-1 text-sm font-semibold rounded bg-white/90 text-slate-800 hover:bg-white",onClick:m=>w(n.id)},I(n.confirm.confirmText||"Confirm"),9,kt),e("button",{class:"px-3 py-1 text-sm font-semibold rounded bg-transparent border border-white/70 text-white hover:bg-white/10",onClick:m=>d(n.id)},I(n.confirm.cancelText||"Cancel"),9,wt)])):x("",!0)])],2))),128))]))}};var ze={exports:{}},xt=ze.exports,sa;function _t(){return sa||(sa=1,function(s,r){(function(u,a){s.exports=a(qa())})(xt,i=>(()=>{var u={113:(P,j)=>{Object.defineProperty(j,"__esModule",{value:!0}),j.default=(R,D)=>{const h=R.__vccOpts||R;for(const[M,U]of D)h[M]=U;return h}},594:P=>{P.exports=i}},a={};function w(P){var j=a[P];if(j!==void 0)return j.exports;var R=a[P]={exports:{}};return u[P](R,R.exports,w),R.exports}w.d=(P,j)=>{for(var R in j)w.o(j,R)&&!w.o(P,R)&&Object.defineProperty(P,R,{enumerable:!0,get:j[R]})},w.o=(P,j)=>Object.prototype.hasOwnProperty.call(P,j),w.r=P=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(P,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(P,"__esModule",{value:!0})};var d={};w.r(d),w.d(d,{ToastComponent:()=>S,ToastPlugin:()=>z,ToastPositions:()=>_,default:()=>Y,useToast:()=>L});var f=w(594);const v=["innerHTML"];function l(P,j,R,D,h,M){return(0,f.openBlock)(),(0,f.createBlock)(f.Transition,{"enter-active-class":P.transition.enter,"leave-active-class":P.transition.leave},{default:(0,f.withCtx)(()=>[(0,f.withDirectives)((0,f.createElementVNode)("div",{ref:"root",role:"alert",class:(0,f.normalizeClass)(["v-toast__item",[`v-toast__item--${P.type}`,`v-toast__item--${P.position}`]]),onMouseover:j[0]||(j[0]=U=>P.toggleTimer(!0)),onMouseleave:j[1]||(j[1]=U=>P.toggleTimer(!1)),onClick:j[2]||(j[2]=function(){return P.whenClicked&&P.whenClicked(...arguments)})},[j[3]||(j[3]=(0,f.createElementVNode)("div",{class:"v-toast__icon"},null,-1)),(0,f.createElementVNode)("p",{class:"v-toast__text",innerHTML:P.message},null,8,v)],34),[[f.vShow,P.isActive]])]),_:1},8,["enter-active-class","leave-active-class"])}function n(P){var j;typeof P.remove<"u"?P.remove():(j=P.parentNode)==null||j.removeChild(P)}function m(P,j,R){let D=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const h=(0,f.h)(P,j,D),M=document.createElement("div");return M.classList.add("v-toast--pending"),R.appendChild(M),(0,f.render)(h,M),h.component}class p{constructor(j,R){this.startedAt=Date.now(),this.callback=j,this.delay=R,this.timer=setTimeout(j,R)}pause(){this.stop(),this.delay-=Date.now()-this.startedAt}resume(){this.stop(),this.startedAt=Date.now(),this.timer=setTimeout(this.callback,this.delay)}stop(){clearTimeout(this.timer)}}const _=Object.freeze({TOP_RIGHT:"top-right",TOP:"top",TOP_LEFT:"top-left",BOTTOM_RIGHT:"bottom-right",BOTTOM:"bottom",BOTTOM_LEFT:"bottom-left"});function C(P){return{all:P=P||new Map,on:function(j,R){var D=P.get(j);D?D.push(R):P.set(j,[R])},off:function(j,R){var D=P.get(j);D&&(R?D.splice(D.indexOf(R)>>>0,1):P.set(j,[]))},emit:function(j,R){var D=P.get(j);D&&D.slice().map(function(h){h(R)}),(D=P.get("*"))&&D.slice().map(function(h){h(j,R)})}}}const q=C(),V=(0,f.defineComponent)({name:"Toast",props:{message:{type:String,required:!0},type:{type:String,default:"success"},position:{type:String,default:_.BOTTOM_RIGHT,validator(P){return Object.values(_).includes(P)}},duration:{type:Number,default:3e3},dismissible:{type:Boolean,default:!0},onDismiss:{type:Function,default:()=>{}},onClick:{type:Function,default:()=>{}},queue:Boolean,pauseOnHover:{type:Boolean,default:!0}},data(){return{isActive:!1,parentTop:null,parentBottom:null,isHovered:!1}},beforeMount(){this.setupContainer()},mounted(){this.showNotice(),q.on("toast-clear",this.dismiss)},methods:{setupContainer(){if(this.parentTop=document.querySelector(".v-toast.v-toast--top"),this.parentBottom=document.querySelector(".v-toast.v-toast--bottom"),this.parentTop&&this.parentBottom)return;this.parentTop||(this.parentTop=document.createElement("div"),this.parentTop.className="v-toast v-toast--top"),this.parentBottom||(this.parentBottom=document.createElement("div"),this.parentBottom.className="v-toast v-toast--bottom");const P=document.body;P.appendChild(this.parentTop),P.appendChild(this.parentBottom)},shouldQueue(){return this.queue?this.parentTop.childElementCount>0||this.parentBottom.childElementCount>0:!1},dismiss(){this.timer&&this.timer.stop(),clearTimeout(this.queueTimer),this.isActive=!1,setTimeout(()=>{this.onDismiss.apply(null,arguments);const P=this.$refs.root;(0,f.render)(null,P),n(P)},150)},showNotice(){if(this.shouldQueue()){this.queueTimer=setTimeout(this.showNotice,250);return}const P=this.$refs.root.parentElement;this.correctParent.insertAdjacentElement("afterbegin",this.$refs.root),n(P),this.isActive=!0,this.duration&&(this.timer=new p(this.dismiss,this.duration))},whenClicked(){this.dismissible&&(this.onClick.apply(null,arguments),this.dismiss())},toggleTimer(P){!this.pauseOnHover||!this.timer||(P?this.timer.pause():this.timer.resume())}},computed:{correctParent(){switch(this.position){case _.TOP:case _.TOP_RIGHT:case _.TOP_LEFT:return this.parentTop;case _.BOTTOM:case _.BOTTOM_RIGHT:case _.BOTTOM_LEFT:return this.parentBottom}},transition(){switch(this.position){case _.TOP:case _.TOP_RIGHT:case _.TOP_LEFT:return{enter:"v-toast--fade-in-down",leave:"v-toast--fade-out"};case _.BOTTOM:case _.BOTTOM_RIGHT:case _.BOTTOM_LEFT:return{enter:"v-toast--fade-in-up",leave:"v-toast--fade-out"}}}},beforeUnmount(){q.off("toast-clear",this.dismiss)}});var k=w(113);const S=(0,k.default)(V,[["render",l]]),L=function(){let P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{open(j){let R=null;typeof j=="string"&&(R=j);const h=Object.assign({},{message:R},P,j);return{dismiss:m(S,h,document.body).ctx.dismiss}},clear(){q.emit("toast-clear")},success(j){let R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.open(Object.assign({},{message:j,type:"success"},R))},error(j){let R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.open(Object.assign({},{message:j,type:"error"},R))},info(j){let R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.open(Object.assign({},{message:j,type:"info"},R))},warning(j){let R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.open(Object.assign({},{message:j,type:"warning"},R))},default(j){let R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.open(Object.assign({},{message:j,type:"default"},R))}}},z={install:function(P){let j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},R=L(j);P.config.globalProperties.$toast=R,P.provide("$toast",R)}},Y=z;return d})())}(ze)),ze.exports}var Tt=_t();const Mt={class:"p-8"},Gt={class:"mt-2 text-sm text-gray-600"},Ct={key:0,class:"mt-6 p-4 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 rounded-lg"},$t={class:"mt-4"},St={class:"mt-6 grid grid-cols-1 lg:grid-cols-3 gap-6"},Pt={class:"lg:col-span-1 space-y-3"},Et=["onClick"],jt={class:"flex items-center justify-between"},It={class:"flex items-center"},Dt={class:"ml-2 text-sm text-gray-500"},Bt={key:0},Nt={key:1},Vt={key:1,class:"text-xs text-gray-400"},Lt={key:0,class:"lg:col-span-2 p-6 bg-gray-50 rounded-xl shadow-inner"},Ut={key:0},zt={class:"text-xl font-semibold text-gray-800 mb-4"},Rt={class:"mb-4 text-sm text-right"},Ft=["disabled"],Ot={class:"flex items-center justify-between mb-6 p-4 rounded-lg bg-white shadow-sm border border-gray-200"},Kt={class:"relative inline-flex items-center cursor-pointer"},Ht=["checked"],qt={key:0},Wt={class:"flex-1"},Jt=["onUpdate:modelValue"],Yt={class:"flex-1"},Zt=["onUpdate:modelValue"],Qt=["onClick"],Xt={key:1},el={key:1,class:"lg:col-span-2 p-6 bg-gray-50 rounded-xl shadow-inner flex items-center justify-center"},al={class:"mt-8 flex justify-end space-x-3"},tl={key:0,class:"flex items-center"},ll={key:1},sl={__name:"AvailabilityModal",props:{show:Boolean,userId:{type:Number,default:null}},emits:["close","availability-saved"],setup(s,{emit:r}){const i=()=>{const D=localStorage.getItem("authToken");D&&!X.defaults.headers.common.Authorization&&(X.defaults.headers.common.Authorization=`Bearer ${D}`)},u=s,a=r,w=Tt.useToast(),d=G({}),f=G({}),v=G(!1),l=G(null),n=G(""),m=G(!1),p=G([]),_=()=>{const D=[],h=new Date,M=h.getDay(),U=M===0?1:8-M,N=new Date(h);N.setDate(h.getDate()+U);for(let H=0;H<7;H++){const O=new Date(N);O.setDate(N.getDate()+H);const se=O.toISOString().split("T")[0];D.push({value:se,label:O.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"}),day:O.toLocaleDateString("en-US",{weekday:"short"})})}return D},C=()=>{const D=[],h=new Date,M=h.getDay(),U=new Date(h);U.setDate(h.getDate()-(M===0?6:M-1));for(let N=0;N<7;N++){const H=new Date(U);H.setDate(U.getDate()+N);const O=H.toISOString().split("T")[0];D.push({value:O,label:H.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"}),day:H.toLocaleDateString("en-US",{weekday:"short"})})}return D},b=()=>{m.value=!0,n.value="",p.value=C(),l.value=null,V()},q=()=>{m.value=!1,n.value="",p.value=_(),l.value=null,V()};fe(()=>{i(),p.value=_(),V()});const V=async()=>{try{if(i(),p.value.length===0)return;const D=p.value[0].value,h=p.value[p.value.length-1].value,M=await X.get("/api/availabilities",{params:{start_date:D,end_date:h,user_id:u.userId}});if(M.data&&M.data.availabilities){const U={};p.value.forEach(N=>{U[N.value]={isSelected:!1,isAvailable:!0,reason:"",timeSlots:[{start_time:"",end_time:""}]}}),d.value=U,M.data.availabilities.forEach(N=>{const H=N.date.split("T")[0];d.value[H]&&(d.value[H].isSelected=!0,d.value[H].isAvailable=N.is_available,N.is_available?d.value[H].timeSlots=N.time_slots&&N.time_slots.length>0?[...N.time_slots]:[{start_time:"",end_time:""}]:d.value[H].reason=N.reason||"")})}}catch(D){console.error("Error fetching existing availabilities:",D)}};ie(()=>u.show,async D=>{D&&(f.value={},n.value="",m.value=!1,p.value=_(),await V()),l.value=null},{immediate:!0});const k=K(()=>d.value[l.value]||{isSelected:!1,isAvailable:!0,reason:"",timeSlots:[{start_time:"",end_time:""}]}),y=K(()=>Object.values(d.value).some(D=>D.isSelected)),S=K(()=>{const D=d.value[l.value];return D?D.isAvailable?D.timeSlots.some(h=>h.start_time&&h.end_time):D.reason.trim().split(/\s+/).filter(Boolean).length>=2:!1}),L=D=>{l.value=D,d.value[D]&&(d.value[D].isSelected=!0)},z=()=>{var h;const D=(h=d.value[l.value])==null?void 0:h.timeSlots;D&&(D.push({start_time:"",end_time:""}),d.value[l.value].isSelected=!0)},Y=D=>{var M;const h=(M=d.value[l.value])==null?void 0:M.timeSlots;h&&h.length>1&&(h.splice(D,1),d.value[l.value].isSelected=!0)},P=D=>{d.value[l.value]&&(d.value[l.value].isAvailable=D,d.value[l.value].isSelected=!0,D?d.value[l.value].reason="":d.value[l.value].timeSlots=[{start_time:"",end_time:""}])},j=()=>{const D=d.value[l.value];if(D){if(!S.value){D.isAvailable?f.value[l.value]={timeSlots:"Please fill in at least one time slot before applying to all days."}:f.value[l.value]={reason:"Reason must be at least 2 words to apply to all days."};return}delete f.value[l.value];for(const h of p.value){const M=h.value;d.value[M]=JSON.parse(JSON.stringify(D)),d.value[M].isSelected=!0}w.success("Availability applied to all days!")}},R=async()=>{if(v.value=!0,f.value={},m.value&&!n.value.trim()){f.value.lateReason="Please provide a reason for this late submission.",v.value=!1;return}const D=[];for(const h of p.value){const M=h.value,U=d.value[M];let N={};if(U.isSelected){if(U.isAvailable)if(U.timeSlots.some(H=>!H.start_time||!H.end_time))N.timeSlots="Please fill in all time slots.";else for(const H of U.timeSlots){const O=H.start_time.split(":").map(Number),se=H.end_time.split(":").map(Number);if(O[0]*60+O[1]>=se[0]*60+se[1]){N.timeSlots="End time must be after start time.";break}}else U.reason.trim()||(N.reason="Please provide a reason for unavailability.");Object.keys(N).length>0&&(f.value[M]=N),Object.keys(N).length===0&&D.push({date:M,is_available:U.isAvailable,reason:U.isAvailable?null:U.reason,time_slots:U.isAvailable?U.timeSlots:null})}}if(D.length===0){f.value.general="Please select and set availability for at least one day.",v.value=!1;return}try{i();const h={availabilities:D,reason_for_late_submission:m.value?n.value:null};await X.post("/api/availabilities/batch",h),w.success("Availability saved successfully!"),a("availability-saved"),a("close")}catch(h){console.error("Error saving availability:",h),w.error("An error occurred while saving your availability.")}finally{v.value=!1}};return(D,h)=>(t(),B(Ye,{show:s.show,onClose:h[4]||(h[4]=M=>D.$emit("close")),"max-width":"4xl"},{default:A(()=>{var M,U,N,H;return[e("div",Mt,[h[17]||(h[17]=e("h2",{class:"text-2xl font-bold text-gray-900"}," Set Your Weekly Availability ",-1)),e("p",Gt,[h[5]||(h[5]=T(" Select a day to quickly set your schedule for the upcoming week. ",-1)),m.value?(t(),o("span",{key:1,class:"text-indigo-600 hover:text-indigo-800 transition duration-150 ease-in-out cursor-pointer",onClick:q}," Go back to next week. ")):(t(),o("span",{key:0,class:"text-indigo-600 hover:text-indigo-800 transition duration-150 ease-in-out cursor-pointer",onClick:b}," Missed the deadline? Submit for this week. "))]),m.value?(t(),o("div",Ct,[h[6]||(h[6]=e("div",{class:"flex items-center"},[e("svg",{class:"h-5 w-5 text-yellow-500 mr-2",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.344a1.5 1.5 0 012.486 0l5.446 9.176A1.5 1.5 0 0114.246 15H5.754a1.5 1.5 0 01-1.238-2.48zM9 11a1 1 0 102 0V7a1 1 0 10-2 0v4zm1-3a1 1 0 100 2h.01a1 1 0 100-2H10z","clip-rule":"evenodd"})]),e("p",{class:"font-semibold"},"Late Submission for Current Week")],-1)),h[7]||(h[7]=e("p",{class:"mt-2 text-sm"}," Please provide a reason for submitting late. We acknowledge that availability submissions are due by Thursday evening. ",-1)),e("div",$t,[c(J,{value:"Reason for late submission"}),ae(e("textarea",{"onUpdate:modelValue":h[0]||(h[0]=O=>n.value=O),rows:"2",class:"mt-1 block w-full rounded-md border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 shadow-sm",placeholder:"e.g., I was out sick, I forgot, I had no access to the system"},null,512),[[ve,n.value]]),c(Z,{message:f.value.lateReason,class:"mt-2"},null,8,["message"])])])):x("",!0),e("div",St,[e("div",Pt,[(t(!0),o(Q,null,ee(p.value,O=>{var se;return t(),o("div",{key:O.value,class:W(["p-4 rounded-xl border cursor-pointer transition-all duration-200 ease-in-out",{"bg-indigo-50 border-indigo-500 shadow-lg":l.value===O.value,"bg-white border-gray-200 hover:border-indigo-400 hover:shadow-md":l.value!==O.value,"border-red-400 bg-red-50":f.value[O.value],"opacity-70":O.isPast}]),onClick:ye=>L(O.value)},[e("div",jt,[e("div",It,[e("div",{class:W(["text-lg font-bold",{"text-indigo-600":l.value===O.value,"text-gray-800":l.value!==O.value}])},I(O.day),3),e("div",Dt,I(O.label.split(", ")[1]),1)]),(se=d.value[O.value])!=null&&se.isSelected?(t(),o("span",{key:0,class:W(["inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium",{"bg-emerald-100 text-emerald-800":d.value[O.value].isAvailable,"bg-amber-100 text-amber-800":!d.value[O.value].isAvailable}])},[d.value[O.value].isAvailable?(t(),o("span",Bt,"Available")):(t(),o("span",Nt,"Unavailable"))],2)):(t(),o("span",Vt," Not Set "))])],10,Et)}),128))]),l.value?(t(),o("div",Lt,[l.value?(t(),o("div",Ut,[e("h3",zt," Availability for "+I((M=p.value.find(O=>O.value===l.value))==null?void 0:M.label),1),e("div",Rt,[e("button",{type:"button",onClick:j,disabled:!S.value,class:W([{"opacity-50 cursor-not-allowed":!S.value},"text-indigo-600 hover:text-indigo-800 transition duration-150 ease-in-out"])},h[8]||(h[8]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 inline mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{d:"M7 9a2 2 0 012-2h6a2 2 0 012 2v6a2 2 0 01-2 2H9a2 2 0 01-2-2V9z"}),e("path",{d:"M5 3a2 2 0 00-2 2v6a2 2 0 002 2V5h8a2 2 0 00-2-2H5z"})],-1),T(" Apply to all days ",-1)]),10,Ft)]),e("div",Ot,[h[10]||(h[10]=e("span",{class:"text-sm font-medium text-gray-700"},"I am available on this day",-1)),e("label",Kt,[e("input",{type:"checkbox",checked:k.value.isAvailable,onChange:h[1]||(h[1]=O=>P(O.target.checked)),class:"sr-only peer"},null,40,Ht),h[9]||(h[9]=e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"},null,-1))])]),c(Z,{message:(U=f.value[l.value])==null?void 0:U.general,class:"mt-2"},null,8,["message"]),k.value.isAvailable?(t(),o("div",qt,[c(J,{value:"Available Time Slots",class:"text-gray-800 mb-2"}),c(Z,{message:(N=f.value[l.value])==null?void 0:N.timeSlots,class:"mt-2 mb-4"},null,8,["message"]),(t(!0),o(Q,null,ee(k.value.timeSlots,(O,se)=>(t(),o("div",{key:se,class:"flex items-center space-x-2 mb-4"},[e("div",Wt,[ae(e("input",{type:"time","onUpdate:modelValue":ye=>d.value[l.value].timeSlots[se].start_time=ye,class:"block w-full rounded-md border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 shadow-sm"},null,8,Jt),[[ve,d.value[l.value].timeSlots[se].start_time]])]),h[12]||(h[12]=e("span",{class:"text-gray-500"},"-",-1)),e("div",Yt,[ae(e("input",{type:"time","onUpdate:modelValue":ye=>d.value[l.value].timeSlots[se].end_time=ye,class:"block w-full rounded-md border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 shadow-sm"},null,8,Zt),[[ve,d.value[l.value].timeSlots[se].end_time]])]),d.value[l.value].timeSlots.length>1?(t(),o("button",{key:0,type:"button",onClick:ye=>Y(se),class:"p-2 text-red-600 hover:text-red-800 transition duration-150 ease-in-out"},h[11]||(h[11]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm6 0a1 1 0 012 0v6a1 1 0 11-2 0V8z","clip-rule":"evenodd"})],-1)]),8,Qt)):x("",!0)]))),128))])):x("",!0),e("button",{type:"button",onClick:z,class:"mt-2 w-full flex items-center justify-center px-4 py-2 border border-dashed border-indigo-300 rounded-lg text-indigo-600 hover:bg-indigo-50 transition duration-150 ease-in-out"},h[13]||(h[13]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z","clip-rule":"evenodd"})],-1),T(" Add Another Time Slot ",-1)]))])):(t(),o("div",Xt,[c(J,{value:"Reason for Not Available",class:"text-gray-800 mb-2"}),ae(e("textarea",{"onUpdate:modelValue":h[2]||(h[2]=O=>d.value[l.value].reason=O),rows:"3",class:"block w-full rounded-md border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 shadow-sm",placeholder:"e.g., Out of office, Holiday, Meeting all day"},null,512),[[ve,d.value[l.value].reason]]),c(Z,{message:(H=f.value[l.value])==null?void 0:H.reason,class:"mt-2"},null,8,["message"])]))])):(t(),o("div",el,h[14]||(h[14]=[e("p",{class:"text-gray-500 text-lg font-medium"}," Please select a day from the left to set your availability. ",-1)])))]),e("div",al,[c(Re,{onClick:h[3]||(h[3]=O=>D.$emit("close"))},{default:A(()=>h[15]||(h[15]=[T(" Cancel ",-1)])),_:1,__:[15]}),c(ne,{onClick:R,disabled:v.value||!y.value,class:W({"opacity-50 cursor-not-allowed":v.value||!y.value})},{default:A(()=>[v.value?(t(),o("span",tl,h[16]||(h[16]=[e("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),T(" Saving... ",-1)]))):(t(),o("span",ll,"Save Availability"))]),_:1},8,["disabled","class"])])])]}),_:1},8,["show"]))}},ol={key:0,class:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center"},il={class:"bg-white rounded-lg shadow-xl p-6 max-w-lg w-full mx-4"},rl={class:"flex justify-center"},nl={__name:"AvailabilityBlocker",setup(s){const r=G(!1),i=G(!0),u=G(!1),a=G([]),w=K(()=>{var b;return((b=Ve().props.auth.user)==null?void 0:b.id)||null}),d=()=>{const b=localStorage.getItem("authToken");b&&!X.defaults.headers.common.Authorization&&(X.defaults.headers.common.Authorization=`Bearer ${b}`)},f=async()=>{i.value=!0;const b=localStorage.getItem("shouldBlockUser"),q=localStorage.getItem("allWeekdaysCovered");if(b==="true"&&q==="false")r.value=!0,await v();else try{d();const V=await X.get("/api/availability-prompt");r.value=V.data.should_block_user&&!V.data.all_weekdays_covered,r.value&&await v()}catch(V){console.error("Error checking if user should be blocked:",V),r.value=!1}i.value=!1},v=async()=>{try{d();const b=await X.get("/api/availability-prompt");l(b.data.next_week_start,b.data.next_week_end)}catch(b){console.error("Error fetching next week dates:",b)}},l=(b,q)=>{const V=[],k=new Date(b),y=new Date(q),S=new Date(k);for(;S<=y;)V.push({value:S.toISOString().split("T")[0],label:S.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})}),S.setDate(S.getDate()+1);a.value=V},n=()=>{u.value=!0},m=()=>{f()},p=b=>{r.value=b.detail.shouldBlockUser&&!b.detail.allWeekdaysCovered},_=()=>{document.visibilityState==="visible"&&Te(()=>{f()})},C=b=>{(b.key==="shouldBlockUser"||b.key==="allWeekdaysCovered")&&Te(()=>{f()})};return fe(()=>{f(),window.addEventListener("availability-status-updated",p),document.addEventListener("visibilitychange",_),window.addEventListener("storage",C)}),Fe(()=>{window.removeEventListener("availability-status-updated",p),document.removeEventListener("visibilitychange",_),window.removeEventListener("storage",C)}),(b,q)=>r.value&&!i.value?(t(),o("div",ol,[e("div",il,[q[2]||(q[2]=Va('<div class="flex items-center mb-4"><div class="flex-shrink-0 mr-3"><svg class="h-8 w-8 text-red-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg></div><h2 class="text-xl font-bold text-gray-900">Action Required</h2></div><p class="mb-6 text-gray-700"> You must submit your availability for all weekdays of next week before you can continue using the application. This is required for planning meetings and work schedules. </p>',2)),e("div",rl,[c(ne,{onClick:n,class:"bg-red-600 hover:bg-red-700"},{default:A(()=>q[1]||(q[1]=[T(" Submit Availability Now ",-1)])),_:1,__:[1]})]),c(sl,{show:u.value,"next-week-dates":a.value,date:a.value.length>0?a.value[0].value:"",userId:w.value,onClose:q[0]||(q[0]=V=>u.value=!1),onAvailabilitySaved:m},null,8,["show","next-week-dates","date","userId"])])])):x("",!0)}},ul={class:"relative"},dl={class:"flex flex-wrap items-center gap-2 mb-2 p-2 border border-gray-300 rounded-lg bg-white min-h-[44px] focus-within:border-indigo-500 focus-within:ring-1 focus-within:ring-indigo-500 transition-all duration-150"},cl=["onClick"],ml={key:0,class:"absolute z-20 w-full bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto mt-1 transform-gpu"},vl=["onClick"],pl={key:1,class:"px-4 py-2 text-sm text-gray-500"},fl={key:2,class:"px-4 py-2 text-sm text-gray-500"},gl={__name:"TagInput",props:{modelValue:{type:Array,default:()=>[]},label:{type:String,default:"Tags"},placeholder:{type:String,default:"Add tags..."},error:{type:String,default:""},initialTags:{type:Array,default:()=>[]},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(s,{emit:r}){const i=s,u=r,a=G(""),w=G([]),d=G([]),f=G(!1),v=G(null);function l(){u("update:modelValue",d.value.map(V=>V.id))}ie(()=>i.initialTags,V=>{if(d.value=[],V&&V.length>0){const L=[],z=new Set;V.forEach(Y=>{z.has(Y.id)||(L.push(Y),z.add(Y.id))}),d.value.push(...L)}const k=V.map(L=>L.id),y=Array.isArray(i.modelValue)?i.modelValue:[];(k.length!==y.length||k.some(L=>!y.includes(L))||y.some(L=>!k.includes(L)))&&l()},{immediate:!0});const n=Wa(async V=>{if(V.length<2){w.value=[],f.value=!1;return}try{const k=await X.get(`/api/tags/search?query=${V}`);w.value=k.data,f.value=!0}catch(k){console.error("Error fetching tags:",k),w.value=[],f.value=!1}},300);ie(a,V=>{i.disabled||n(V)});const m=V=>{d.value.some(k=>k.id===V.id)||(d.value.push(V),a.value="",w.value=[],f.value=!1,l()),Te(()=>v.value.focus())},p=()=>{if(i.disabled)return;const V=a.value.trim();if(!V)return;const k=w.value.find(S=>S.name.toLowerCase()===V.toLowerCase()),y=d.value.some(S=>S.name.toLowerCase()===V.toLowerCase());if(k)m(k);else if(y)a.value="",w.value=[],f.value=!1;else{const S={id:`new_${V.replace(/\s+/g,"-").toLowerCase()}_${Date.now()}`,name:V};d.value.push(S),a.value="",w.value=[],f.value=!1,l()}Te(()=>v.value.focus())},_=V=>{i.disabled||(d.value=d.value.filter(k=>k.id!==V.id),l(),Te(()=>v.value.focus()))},C=()=>{i.disabled||a.value===""&&d.value.length>0&&_(d.value[d.value.length-1])},b=K(()=>w.value.filter(V=>!d.value.some(k=>k.id===V.id))),q=V=>{v.value&&!v.value.$el.contains(V.target)&&(f.value=!1,a.value="")};return fe(()=>{document.addEventListener("click",q)}),Fe(()=>{document.removeEventListener("click",q)}),(V,k)=>(t(),o("div",ul,[c(J,{value:s.label,class:"mb-1"},null,8,["value"]),e("div",dl,[(t(!0),o(Q,null,ee(d.value,y=>(t(),o("span",{key:y.id,class:"inline-flex items-center px-3 py-1 text-sm font-medium bg-indigo-100 text-indigo-800 rounded-full shadow-sm"},[T(I(y.name)+" ",1),s.disabled?x("",!0):(t(),o("button",{key:0,type:"button",onClick:S=>_(y),class:"ml-2 -mr-1 text-indigo-500 hover:text-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 rounded-full p-0.5"},k[3]||(k[3]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,cl))]))),128)),c(pe,{ref_key:"inputRef",ref:v,type:"text",placeholder:d.value.length===0?s.placeholder:"",modelValue:a.value,"onUpdate:modelValue":k[0]||(k[0]=y=>a.value=y),onFocus:k[1]||(k[1]=y=>f.value=!0),onKeydown:[Ue(ma(p,["prevent"]),["enter"]),k[2]||(k[2]=Ue(y=>f.value=!1,["tab"])),Ue(C,["delete"])],class:"flex-grow min-w-[100px] border-none focus:ring-0 shadow-none p-0 bg-transparent text-gray-900",disabled:s.disabled},null,8,["placeholder","modelValue","onKeydown","disabled"])]),f.value&&(b.value.length>0||a.value.length>=2||b.value.length===0&&a.value.length<2)&&!s.disabled?(t(),o("div",ml,[(t(!0),o(Q,null,ee(b.value,y=>(t(),o("div",{key:y.id,onClick:S=>m(y),class:"px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 cursor-pointer transition-colors duration-100"},I(y.name),9,vl))),128)),!w.value.some(y=>y.name.toLowerCase()===a.value.toLowerCase())&&a.value.length>=2?(t(),o("div",{key:0,onClick:p,class:"px-4 py-2 text-sm text-indigo-700 bg-indigo-50 hover:bg-indigo-100 cursor-pointer border-t border-indigo-200 font-semibold transition-colors duration-100"},' Add new tag: "'+I(a.value)+'" ',1)):x("",!0),b.value.length===0&&a.value.length<2?(t(),o("div",pl," Type at least 2 characters to search for tags. ")):x("",!0),b.value.length===0&&a.value.length>=2&&!w.value.some(y=>y.name.toLowerCase()===a.value.toLowerCase())?(t(),o("div",fl,[k[4]||(k[4]=T(" No matching tags found. Press ",-1)),k[5]||(k[5]=e("span",{class:"font-semibold text-indigo-600"},"Enter",-1)),T(' to add "'+I(a.value)+'" as a new tag. ',1)])):x("",!0)])):x("",!0),c(Z,{message:s.error,class:"mt-2"},null,8,["message"])]))}},ga=Le(gl,[["__scopeId","data-v-4d528a4c"]]),bl={class:"space-y-4"},hl="Add New Milestone",yl="/api/milestones",kl="post",wl="Create Milestone",Al="Milestone created successfully!",xl={__name:"MilestoneFormModal",props:{show:Boolean,projectId:Number},emits:["close","saved"],setup(s,{emit:r}){const i=s,u=r,a=Ce({name:"",description:"",completion_date:null,status:"Not Started",project_id:i.projectId}),w=Ce({completion_date:null}),d=["Not Started","In Progress","Completed","Overdue"];ie(()=>i.show,n=>{n&&(Object.assign(a,{name:"",description:"",completion_date:null,status:"Not Started",project_id:i.projectId}),w.completion_date=null)},{immediate:!0});const f=()=>(w.completion_date=null,a.completion_date?!0:(w.completion_date=["Completion date is required."],!1)),v=n=>{u("saved",n),u("close")},l=()=>{u("close")};return(n,m)=>(t(),B($e,{show:s.show,title:hl,"api-endpoint":yl,"http-method":kl,"form-data":a,"submit-button-text":wl,"success-message":Al,"before-submit":f,onClose:l,onSubmitted:v},{default:A(({errors:p})=>[e("div",bl,[e("div",null,[c(J,{for:"milestone-name",value:"Milestone Name"}),c(pe,{id:"milestone-name",modelValue:a.name,"onUpdate:modelValue":m[0]||(m[0]=_=>a.name=_),type:"text",class:"mt-1 block w-full",placeholder:"Enter milestone name",required:""},null,8,["modelValue"]),c(Z,{message:p.name?p.name[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[c(J,{for:"milestone-description",value:"Description"}),ae(e("textarea",{id:"milestone-description","onUpdate:modelValue":m[1]||(m[1]=_=>a.description=_),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",rows:"3",placeholder:"Enter milestone description"},null,512),[[ve,a.description]]),c(Z,{message:p.description?p.description[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[c(J,{for:"milestone-completion-date",value:"Completion Date"}),c(pe,{id:"milestone-completion-date",modelValue:a.completion_date,"onUpdate:modelValue":m[2]||(m[2]=_=>a.completion_date=_),type:"date",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),c(Z,{message:p.completion_date?p.completion_date[0]:w.completion_date?w.completion_date[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[c(J,{for:"milestone-status",value:"Status"}),c(ce,{id:"milestone-status",modelValue:a.status,"onUpdate:modelValue":m[3]||(m[3]=_=>a.status=_),options:d.map(_=>({value:_,label:_})),"value-key":"value","label-key":"label",placeholder:"Select status",class:"mt-1"},null,8,["modelValue","options"]),c(Z,{message:p.status?p.status[0]:"",class:"mt-2"},null,8,["message"])])])]),_:1},8,["show","form-data"]))}},_l={class:"space-y-4"},Tl={key:0},Ml={key:0,class:"text-sm text-gray-500"},Gl={key:0,class:"text-sm text-gray-500"},Cl={key:0,class:"text-sm text-gray-500"},$l={class:"flex items-center gap-2 mt-1"},Sl={key:0,class:"text-sm text-gray-500"},Pl=["disabled"],El={class:"flex items-center mt-2"},jl="Create New Task",Il="/api/tasks",Dl="post",Bl="Create Task",Nl="Task created successfully!",Vl={__name:"CreateTaskModal",props:{show:Boolean,projectId:{type:Number,default:null}},emits:["close","saved"],setup(s,{emit:r}){const i=s,u=r,a=Ce({name:"",description:"",assigned_to_user_id:null,due_date:null,status:"To Do",task_type_id:null,milestone_id:null,project_id:i.projectId,priority:"medium",needs_approval:!1,tags:[],tags_data:[]}),w=["To Do","In Progress","Done","Blocked","Archived"],d=[{value:"low",label:"Low"},{value:"medium",label:"Medium"},{value:"high",label:"High"}],f=G([]),v=G([]),l=G([]),n=G([]),m=G(!0),p=G(!1),_=G(!1),C=G(!1),b=G(!1);ie(()=>i.show,async h=>{h&&(Object.assign(a,{name:"",description:"",assigned_to_user_id:null,due_date:null,status:"To Do",task_type_id:null,milestone_id:null,project_id:i.projectId,priority:"medium",needs_approval:!1,tags:[],tags_data:[]}),i.projectId?await V(i.projectId):await q())},{immediate:!0}),ie(()=>a.project_id,async h=>{h?await V(h):(v.value=[],l.value=[],n.value=[])});const q=async()=>{m.value=!0;try{const h=await window.axios.get("/api/projects-simplified");f.value=h.data.map(M=>({value:M.id,label:M.name}))}catch(h){console.error("Error fetching projects:",h),f.value=[]}finally{m.value=!1}},V=async h=>{if(h){p.value=!0,_.value=!0,C.value=!0;try{const[M,U,N]=await Promise.all([window.axios.get(`/api/projects/${h}/users`),window.axios.get("/api/task-types"),window.axios.get(`/api/projects/${h}/milestones`)]);v.value=M.data.map(H=>({value:H.id,label:H.name})),l.value=U.data.map(H=>({value:H.id,label:H.name})),n.value=N.data.map(H=>({value:H.id,label:H.name}))}catch(M){console.error("Error fetching associated task data:",M),v.value=[],l.value=[],n.value=[]}finally{p.value=!1,_.value=!1,C.value=!1}}},k=G([]),y=h=>{k.value=Array.from(h.target.files||[])},S=async h=>{if(!k.value.length)return;const M=new FormData;k.value.forEach((U,N)=>M.append(`files[${N}]`,U)),M.append("model_type","Task"),M.append("model_id",h);try{await window.axios.post("/api/files",M,{headers:{"Content-Type":"multipart/form-data"}}),me("Files uploaded to Google Drive.")}catch(U){console.error("Failed to upload task files",U),oe("Failed to upload files.")}},L=async h=>{var M,U;try{const N=(h==null?void 0:h.id)||((M=h==null?void 0:h.task)==null?void 0:M.id)||((U=h==null?void 0:h.data)==null?void 0:U.id);N&&await S(N)}finally{u("saved",h),u("close"),k.value=[]}},z=()=>{u("close")},Y=()=>{a.project_id?b.value=!0:alert("Please select a project before adding a milestone.")},P=h=>{if(b.value=!1,h&&h.id&&h.name){const M={value:h.id,label:h.name};n.value.some(U=>U.value===M.value)||n.value.push(M),a.milestone_id=M.value}},j=K(()=>v.value),R=K(()=>l.value),D=K(()=>n.value);return(h,M)=>(t(),o(Q,null,[c($e,{show:s.show,title:jl,"api-endpoint":Il,"http-method":Dl,"form-data":a,"submit-button-text":Bl,"success-message":Nl,onClose:z,onSubmitted:L},{default:A(({errors:U})=>[e("div",_l,[s.projectId?x("",!0):(t(),o("div",Tl,[c(J,{for:"task-project",value:"Project"}),m.value?(t(),o("div",Ml,"Loading projects...")):(t(),B(ce,{key:1,id:"task-project",modelValue:a.project_id,"onUpdate:modelValue":M[0]||(M[0]=N=>a.project_id=N),options:f.value,"value-key":"value","label-key":"label",placeholder:"Select a project",class:"mt-1",required:!0},null,8,["modelValue","options"])),c(Z,{message:U.project_id?U.project_id[0]:"",class:"mt-2"},null,8,["message"])])),e("div",null,[c(J,{for:"task-name",value:"Task Name"}),c(pe,{id:"task-name",modelValue:a.name,"onUpdate:modelValue":M[1]||(M[1]=N=>a.name=N),type:"text",class:"mt-1 block w-full",placeholder:"Enter task name",required:""},null,8,["modelValue"]),c(Z,{message:U.name?U.name[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[c(J,{for:"task-description",value:"Description"}),ae(e("textarea",{id:"task-description","onUpdate:modelValue":M[2]||(M[2]=N=>a.description=N),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",rows:"3",placeholder:"Enter task description"},null,512),[[ve,a.description]]),c(Z,{message:U.description?U.description[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[c(J,{for:"task-status",value:"Status"}),c(ce,{id:"task-status",modelValue:a.status,"onUpdate:modelValue":M[3]||(M[3]=N=>a.status=N),options:w.map(N=>({value:N,label:N})),"value-key":"value","label-key":"label",placeholder:"Select status",class:"mt-1"},null,8,["modelValue","options"]),c(Z,{message:U.status?U.status[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[c(J,{for:"task-priority",value:"Priority"}),c(ce,{id:"task-priority",modelValue:a.priority,"onUpdate:modelValue":M[4]||(M[4]=N=>a.priority=N),options:d,"value-key":"value","label-key":"label",placeholder:"Select priority",class:"mt-1"},null,8,["modelValue"]),c(Z,{message:U.priority?U.priority[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[c(J,{for:"task-due-date",value:"Due Date"}),c(pe,{id:"task-due-date",modelValue:a.due_date,"onUpdate:modelValue":M[5]||(M[5]=N=>a.due_date=N),type:"date",class:"mt-1 block w-full"},null,8,["modelValue"]),c(Z,{message:U.due_date?U.due_date[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[c(J,{for:"task-assigned-to",value:"Assigned To"}),p.value?(t(),o("div",Gl,"Loading users...")):(t(),B(ce,{key:1,id:"task-assigned-to",modelValue:a.assigned_to_user_id,"onUpdate:modelValue":M[6]||(M[6]=N=>a.assigned_to_user_id=N),options:j.value,"value-key":"value","label-key":"label",placeholder:"Unassigned",class:"mt-1","allow-empty":!0},null,8,["modelValue","options"])),c(Z,{message:U.assigned_to_user_id?U.assigned_to_user_id[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[c(J,{for:"task-type",value:"Task Type"}),_.value?(t(),o("div",Cl,"Loading task types...")):(t(),B(ce,{key:1,id:"task-type",modelValue:a.task_type_id,"onUpdate:modelValue":M[7]||(M[7]=N=>a.task_type_id=N),options:R.value,"value-key":"value","label-key":"label",placeholder:"Select a task type",class:"mt-1","allow-empty":!0},null,8,["modelValue","options"])),c(Z,{message:U.task_type_id?U.task_type_id[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[c(J,{for:"task-milestone",value:"Milestone"}),e("div",$l,[C.value?(t(),o("div",Sl,"Loading milestones...")):(t(),B(ce,{key:1,id:"task-milestone",modelValue:a.milestone_id,"onUpdate:modelValue":M[8]||(M[8]=N=>a.milestone_id=N),options:D.value,"value-key":"value","label-key":"label",placeholder:"No milestone",class:"flex-grow","allow-empty":!0,disabled:!a.project_id},null,8,["modelValue","options","disabled"])),e("button",{type:"button",onClick:Y,disabled:!a.project_id||C.value,class:"px-3 py-2 text-sm font-medium text-blue-600 bg-blue-50 rounded-md hover:bg-blue-100 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",title:"Add New Milestone"},M[12]||(M[12]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4v16m8-8H4"})],-1)]),8,Pl)]),c(Z,{message:U.milestone_id?U.milestone_id[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[c(ga,{modelValue:a.tags,"onUpdate:modelValue":M[9]||(M[9]=N=>a.tags=N),initialTags:a.tags_data,label:"Tags",placeholder:"Search or add tags",error:U.tags?U.tags[0]:"",disabled:!a.project_id},null,8,["modelValue","initialTags","error","disabled"])]),e("div",null,[c(J,{for:"task-files",value:"Attach Files (optional)"}),e("input",{id:"task-files",type:"file",class:"mt-1 block w-full",multiple:"",onChange:y},null,32),M[13]||(M[13]=e("p",{class:"text-xs text-gray-500 mt-1"},"Files will be uploaded to Google Drive under the Task folder after the task is created.",-1))]),e("div",El,[ae(e("input",{id:"needs-approval",type:"checkbox","onUpdate:modelValue":M[10]||(M[10]=N=>a.needs_approval=N),class:"h-4 w-4 text-indigo-600 border-gray-300 rounded"},null,512),[[La,a.needs_approval]]),M[14]||(M[14]=e("label",{for:"needs-approval",class:"ml-2 block text-sm text-gray-700"},"This task needs approval",-1))])])]),_:1},8,["show","form-data"]),c(xl,{show:b.value,"project-id":a.project_id,onClose:M[11]||(M[11]=U=>b.value=!1),onSaved:P},null,8,["show","project-id"])],64))}},Ll={class:"space-y-4"},Ul={class:"flex items-center mt-4"},zl={__name:"CreateForm",props:{show:{type:Boolean,default:!1},apiEndpoint:{type:String,required:!0}},emits:["close","resourceCreated"],setup(s,{emit:r}){const i=s,u=r,a=Ce({title:"",description:"",url:"",type:"website",thumbnail_url:"",visible_to_client:!0,tags:[]}),w=K(()=>[{value:"website",label:"Website"},{value:"youtube",label:"YouTube Video"},{value:"document",label:"Document"},{value:"image",label:"Image"},{value:"other",label:"Other"}]),d=l=>l,f=l=>{u("resourceCreated",l),v()},v=()=>{a.title="",a.description="",a.url="",a.type="website",a.thumbnail_url="",a.visible_to_client=!0,a.tags=[],u("close")};return(l,n)=>(t(),B($e,{show:i.show,title:"Add New Shareable Resource",apiEndpoint:i.apiEndpoint,httpMethod:"post",formData:a,submitButtonText:"Create Resource",successMessage:"Shareable resource created successfully!",formatDataForApi:d,onSubmitted:f,onClose:v},{default:A(({errors:m})=>[e("div",Ll,[e("div",null,[c(J,{for:"title",value:"Title",class:"mb-1"}),c(pe,{id:"title",type:"text",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:a.title,"onUpdate:modelValue":n[0]||(n[0]=p=>a.title=p),required:""},null,8,["modelValue"]),c(Z,{message:m.title?m.title[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[c(J,{for:"url",value:"Resource URL",class:"mb-1"}),c(pe,{id:"url",type:"url",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:a.url,"onUpdate:modelValue":n[1]||(n[1]=p=>a.url=p),required:""},null,8,["modelValue"]),c(Z,{message:m.url?m.url[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[c(J,{for:"type",value:"Resource Type",class:"mb-1"}),c(ce,{id:"type",modelValue:a.type,"onUpdate:modelValue":n[2]||(n[2]=p=>a.type=p),options:w.value,valueKey:"value",labelKey:"label",placeholder:"Select Resource Type",required:"",class:"mt-1 block w-full"},null,8,["modelValue","options"]),c(Z,{message:m.type?m.type[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[c(J,{for:"thumbnail_url",value:"Thumbnail URL (Optional)",class:"mb-1"}),c(pe,{id:"thumbnail_url",type:"url",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:a.thumbnail_url,"onUpdate:modelValue":n[3]||(n[3]=p=>a.thumbnail_url=p)},null,8,["modelValue"]),c(Z,{message:m.thumbnail_url?m.thumbnail_url[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[c(J,{for:"description",value:"Description (Optional)",class:"mb-1"}),ae(e("textarea",{id:"description",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-lg shadow-sm mt-1 block w-full","onUpdate:modelValue":n[4]||(n[4]=p=>a.description=p),rows:"3"},null,512),[[ve,a.description]]),c(Z,{message:m.description?m.description[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[c(ga,{modelValue:a.tags,"onUpdate:modelValue":n[5]||(n[5]=p=>a.tags=p),label:"Associated Tags",placeholder:"Search or add tags",error:m.tags?m.tags[0]:""},null,8,["modelValue","error"])]),e("div",Ul,[c(Ja,{id:"visible_to_client",checked:a.visible_to_client,"onUpdate:checked":n[6]||(n[6]=p=>a.visible_to_client=p)},null,8,["checked"]),c(J,{for:"visible_to_client",value:"Visible to Client",class:"ml-2"}),c(Z,{message:m.visible_to_client?m.visible_to_client[0]:"",class:"mt-2"},null,8,["message"])])])]),_:1},8,["show","apiEndpoint","formData"]))}},Rl=Le(zl,[["__scopeId","data-v-3e3a6a9f"]]),Fl={key:0,class:"sidebar-wrapper"},Ol={class:"fixed inset-0 z-[100] flex pointer-events-none"},Kl={class:"flex items-center justify-between p-4 border-b border-gray-200 bg-white rounded-tl-xl sticky top-0 z-20"},Hl={class:"text-xl font-semibold text-gray-900"},ql={class:"flex-1 overflow-y-auto p-6 scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-gray-300 scrollbar-track-gray-100"},Wl={key:1,class:"p-4 border-t border-gray-200 bg-white sticky bottom-0 z-20"},Jl={__name:"RightSidebar",props:{show:{type:Boolean,default:!1},title:{type:String,default:"Details"},initialWidth:{type:Number,default:50},minWidth:{type:Number,default:30},maxWidth:{type:Number,default:90}},emits:["close","update:show"],setup(s,{emit:r}){const i=s,u=r,a=G(i.initialWidth),w=G(!1),d=m=>{w.value=!0,document.addEventListener("pointermove",f),document.addEventListener("pointerup",v)},f=m=>{if(!w.value)return;const p=window.innerWidth,C=(p-m.clientX)/p*100,b=Math.max(i.minWidth,Math.min(i.maxWidth,C));a.value=b},v=()=>{w.value=!1,document.removeEventListener("pointermove",f),document.removeEventListener("pointerup",v)};ie(()=>i.show,m=>{m?document.body.style.overflow="hidden":document.body.style.overflow=""},{immediate:!0});const l=()=>{u("update:show",!1),u("close")},n=K(()=>window.innerWidth<768);return ie(n,m=>{m&&i.show?a.value=100:!m&&i.show&&(a.value=i.initialWidth)},{immediate:!0}),ie(()=>i.show,m=>{m&&(n.value?a.value=100:a.value=i.initialWidth)}),(m,p)=>(t(),B(za,{to:"body"},[c(va,{"enter-active-class":"transition ease-out duration-300 transform","enter-from-class":"translate-x-full","enter-to-class":"translate-x-0","leave-active-class":"transition ease-in duration-200 transform","leave-from-class":"translate-x-0","leave-to-class":"translate-x-full"},{default:A(()=>[s.show?(t(),o("div",Fl,[e("div",{class:"fixed inset-0 bg-gray-900 bg-opacity-50 transition-opacity z-[99]",onClick:l}),e("div",Ol,[e("div",{class:"relative ml-auto h-full bg-white shadow-xl flex flex-col rounded-l-xl pointer-events-auto",style:Ua({width:n.value?"100%":`${a.value}vw`})},[n.value?x("",!0):(t(),o("div",{key:0,class:"absolute left-0 top-0 h-full w-2 cursor-col-resize -ml-1 z-10",onPointerdown:d,title:"Drag to resize"},null,32)),e("div",Kl,[e("h3",Hl,I(s.title),1),e("button",{onClick:l,class:"text-gray-400 hover:text-gray-600 transition-colors"},p[0]||(p[0]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("div",ql,[be(m.$slots,"content",{},void 0,!0)]),m.$slots.footer?(t(),o("div",Wl,[be(m.$slots,"footer",{},void 0,!0)])):x("",!0)],4)])])):x("",!0)]),_:3})]))}},ba=Le(Jl,[["__scopeId","data-v-2d864577"]]),Yl={class:"flex border-b border-gray-200"},Zl={key:0,class:"ml-2 px-2 py-1 text-xs font-bold bg-red-600 text-white rounded-full"},Ql={class:"p-4 space-y-2 overflow-y-auto"},Xl={key:0,class:"p-6 text-center text-gray-500"},es={key:0},as={key:1},ts=["onClick"],ls={class:"flex-1 min-w-0"},ss={class:"flex items-start justify-between gap-2 mb-1"},os={class:"flex-1 min-w-0"},is={key:0,class:"text-base font-semibold text-gray-900 truncate"},rs={key:1,class:"text-xs text-gray-500"},ns={key:0,class:"text-sm text-gray-600 mt-1 mb-2"},us={class:"flex items-center text-xs text-gray-500 font-medium"},ds={key:0},cs={key:1,class:"mx-2"},ms={key:2},vs={__name:"NotificationsSidebar",setup(s){const r=K(()=>Ne.value.notifications),i=G("New"),u=K(()=>i.value==="New"?r.value.filter(f=>!f.isRead):r.value),a=async f=>{await da(f.view_id);const v=f.task_id||w(f.url),l=f.project_id||d(f.url);v&&l?(ca(v,l),aa()):(console.warn("Could not open task sidebar. Falling back to opening URL in new tab."),f.url&&window.open(f.url,"_blank"))},w=f=>{const v=f.match(/\/task\/(\d+)/);return v?parseInt(v[1]):null},d=f=>{const v=f.match(/\/project\/(\d+)\//);return v?parseInt(v[1]):null};return(f,v)=>(t(),B(ba,{show:E(Ne).show,"onUpdate:show":E(aa),title:"Notifications","initial-width":35,class:"z-[100]"},{content:A(()=>[e("div",Yl,[e("button",{onClick:v[0]||(v[0]=l=>i.value="New"),class:W([{"border-blue-600 text-blue-600 font-semibold":i.value==="New","border-transparent text-gray-500 hover:text-gray-700":i.value!=="New"},"flex-1 py-4 px-1 text-center text-sm border-b-2 transition-colors duration-200"])},[v[2]||(v[2]=T(" New ",-1)),r.value.filter(l=>!l.isRead).length>0?(t(),o("span",Zl,I(r.value.filter(l=>!l.isRead).length),1)):x("",!0)],2),e("button",{onClick:v[1]||(v[1]=l=>i.value="All"),class:W([{"border-blue-600 text-blue-600 font-semibold":i.value==="All","border-transparent text-gray-500 hover:text-gray-700":i.value!=="All"},"flex-1 py-4 px-1 text-center text-sm border-b-2 transition-colors duration-200"])}," All ",2)]),e("div",Ql,[u.value.length===0?(t(),o("div",Xl,[i.value==="New"?(t(),o("span",es,"You have no new notifications.")):(t(),o("span",as,"You have no notifications."))])):x("",!0),(t(!0),o(Q,null,ee(u.value,l=>(t(),o("div",{key:l.id,class:W(["bg-white rounded-xl shadow-sm p-4 flex items-start space-x-4 border border-gray-200 transition-all duration-200 hover:shadow-md cursor-pointer",{"bg-gray-50":l.isRead}]),onClick:n=>a(l)},[e("div",ls,[e("div",ss,[e("div",os,[l.title?(t(),o("h3",is,I(l.title),1)):x("",!0),l.project_name?(t(),o("p",rs,I(l.project_name),1)):x("",!0)])]),l.message?(t(),o("p",ns,I(l.message),1)):x("",!0),e("div",us,[l.due_date?(t(),o("span",ds,"Due: "+I(E(ua)(l.due_date)),1)):x("",!0),l.due_date&&l.priority?(t(),o("span",cs,"•")):x("",!0),l.priority?(t(),o("span",ms,"Priority: "+I(l.priority),1)):x("",!0)])])],10,ts))),128))])]),_:1},8,["show","onUpdate:show"]))}},ps={class:"space-y-4"},fs={key:0,class:"text-red-600 text-xs mt-1"},gs={key:0,class:"text-red-600 text-xs mt-1"},bs={key:0,class:"text-red-600 text-xs mt-1"},hs={__name:"KudoModal",props:{show:{type:Boolean,default:!1}},emits:["close","submitted"],setup(s,{emit:r}){const i=r,u=G([]),a=G([]),w=Ce({recipient_id:"",project_id:"",comment:""}),d=G({}),f=async()=>{try{const{data:m}=await window.axios.get("/api/projects-simplified");u.value=(m||[]).map(p=>({value:p.id,label:p.name}))}catch{u.value=[]}},v=async m=>{if(a.value=[],!!m)try{const{data:p}=await window.axios.get(`/api/projects/${m}/users`);a.value=(p||[]).map(_=>({value:_.id,label:`${_.name} (${_.email})`}))}catch{a.value=[]}};ie(()=>w.project_id,m=>{m&&v(m)}),fe(()=>{f()});const l=()=>{w.recipient_id="",w.project_id="",w.comment="",d.value={}},n=m=>{l(),i("submitted",m)};return(m,p)=>(t(),B($e,{show:s.show,title:"Give a Kudo ✨","api-endpoint":"/api/kudos","http-method":"post","form-data":w,"submit-button-text":"Submit Kudo","success-message":"Kudo submitted! Pending approval.",onClose:p[3]||(p[3]=_=>m.$emit("close")),onSubmitted:n},{default:A(({errors:_})=>[e("div",ps,[e("div",null,[p[4]||(p[4]=e("label",{class:"block text-sm font-medium text-gray-700"},"Project",-1)),c(ce,{options:u.value,modelValue:w.project_id,"onUpdate:modelValue":p[0]||(p[0]=C=>w.project_id=C),placeholder:"Select a project..."},null,8,["options","modelValue"]),_.project_id?(t(),o("p",fs,I(_.project_id[0]),1)):x("",!0)]),e("div",null,[p[5]||(p[5]=e("label",{class:"block text-sm font-medium text-gray-700"},"Recipient",-1)),c(ce,{options:a.value,modelValue:w.recipient_id,"onUpdate:modelValue":p[1]||(p[1]=C=>w.recipient_id=C),placeholder:"Select a teammate..."},null,8,["options","modelValue"]),_.recipient_id?(t(),o("p",gs,I(_.recipient_id[0]),1)):x("",!0)]),e("div",null,[p[6]||(p[6]=e("label",{class:"block text-sm font-medium text-gray-700"},"Comment",-1)),ae(e("textarea",{"onUpdate:modelValue":p[2]||(p[2]=C=>w.comment=C),rows:"4",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",placeholder:"e.g., Thank you for helping with the last-minute changes!"},null,512),[[ve,w.comment]]),_.comment?(t(),o("p",bs,I(_.comment[0]),1)):x("",!0)])])]),_:1},8,["show","form-data"]))}},ys={class:"flex items-center p-4 h-16 border-b border-gray-700"},ks={key:0,class:"text-xl font-semibold flex-1 truncate"},ws=["title"],As={key:0,class:"p-4 border-b border-gray-700"},xs={class:"relative"},_s={key:1,class:"flex-1 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-500 scrollbar-track-gray-700 p-4"},Ts={key:0,class:"mb-4"},Ms={class:"ml-2 mt-2 space-y-1"},Gs=["onClick"],Cs={class:"text-sm font-medium text-gray-300 truncate"},$s={class:"ml-4 mt-1 space-y-1"},Ss={class:"truncate"},Ps={key:1,class:"mb-4"},Es={class:"ml-2 mt-2 space-y-1"},js=["onClick"],Is={class:"text-sm font-medium text-gray-300 truncate"},Ds={class:"ml-4 mt-1 space-y-1"},Bs={class:"truncate"},Ns={key:2,class:"mb-4"},Vs={class:"ml-2 mt-2 space-y-1"},Ls={class:"truncate"},Us={key:3,class:"mb-4"},zs={class:"ml-2 mt-2 space-y-1"},Rs={class:"truncate"},Fs={key:4,class:"text-gray-400 text-sm text-center py-4"},Os={key:5,class:"text-gray-400 text-sm text-center py-4"},Ks={key:2,class:"flex flex-col items-center pt-4 space-y-4"},Hs={key:0,class:"text-gray-400 text-xs text-center px-2"},qs={__name:"LeftSidebar",props:{allProjects:{type:Array,default:()=>[]},activeProjectId:{type:Number,default:null}},emits:["project-selected"],setup(s,{emit:r}){const i=s,u=r,a=G(localStorage.getItem("leftSidebarCollapsed")!=="false"),w=G(""),d=G({}),f=K(()=>{const k=new Set;return i.allProjects.forEach(y=>{y.project_type&&k.add(y.project_type)}),Array.from(k).sort()}),v=K(()=>{const k=new Set;return i.allProjects.forEach(y=>{Array.isArray(y.tags)&&y.tags.forEach(S=>k.add(S))}),Array.from(k).sort()}),l=K(()=>{if(!w.value)return i.allProjects;const k=w.value.toLowerCase();return i.allProjects.filter(y=>{var S,L,z;return y.name.toLowerCase().includes(k)||((S=y.description)==null?void 0:S.toLowerCase().includes(k))||((L=y.project_type)==null?void 0:L.toLowerCase().includes(k))||Array.isArray(y.tags)&&y.tags.some(Y=>Y.toLowerCase().includes(k))||((z=y.status)==null?void 0:z.toLowerCase().includes(k))})}),n=K(()=>{const k={};l.value.forEach(y=>{y.project_type&&y.status==="active"&&(k[y.project_type]||(k[y.project_type]=[]),k[y.project_type].push(y))});for(const y in k)k[y].sort((S,L)=>S.name.localeCompare(L.name));return k}),m=K(()=>{const k={};l.value.forEach(y=>{Array.isArray(y.tags)&&y.tags.length>0&&y.tags.forEach(S=>{k[S]||(k[S]=[]),k[S].push(y)})});for(const y in k)k[y]=[...new Set(k[y])].sort((S,L)=>S.name.localeCompare(L.name));return k}),p=K(()=>l.value.filter(k=>k.status!=="active").sort((k,y)=>k.name.localeCompare(y.name))),_=K(()=>l.value.filter(k=>!k.project_type&&(!Array.isArray(k.tags)||k.tags.length===0)).sort((k,y)=>k.name.localeCompare(y.name)));ie(()=>i.allProjects,()=>{f.value.forEach(k=>{const y=`type-${k}`;d.value[y]===void 0&&(d.value[y]=!0)}),v.value.forEach(k=>{const y=`tag-${k}`;d.value[y]===void 0&&(d.value[y]=!0)}),d.value["main-types"]===void 0&&(d.value["main-types"]=!1),d.value["main-tags"]===void 0&&(d.value["main-tags"]=!1),d.value["inactive-projects"]===void 0&&(d.value["inactive-projects"]=!1),d.value.uncategorized===void 0&&(d.value.uncategorized=!1)},{immediate:!0}),ie(a,k=>{localStorage.setItem("leftSidebarCollapsed",k)});const C=()=>{a.value=!a.value},b=k=>{d.value[k]=!d.value[k]},q=k=>{u("project-selected",k)},V=()=>{w.value=""};return(k,y)=>(t(),o("div",{class:W({"w-64":!a.value,"w-16":a.value,"min-w-16":!0,"bg-gray-800 text-white flex flex-col transition-all duration-300 ease-in-out shrink-0 h-screen overflow-hidden":!0})},[e("div",ys,[a.value?x("",!0):(t(),o("h2",ks,"Projects")),e("button",{onClick:C,class:"p-2 rounded-full hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500",title:a.value?"Expand Sidebar":"Collapse Sidebar"},[(t(),o("svg",{class:W(["w-6 h-6 text-gray-400 transform transition-transform duration-300",{"rotate-180":a.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},y[5]||(y[5]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"},null,-1)]),2))],8,ws)]),a.value?x("",!0):(t(),o("div",As,[e("div",xs,[ae(e("input",{type:"text","onUpdate:modelValue":y[0]||(y[0]=S=>w.value=S),placeholder:"Search all projects...",class:"w-full p-2 rounded-md bg-gray-700 border border-gray-600 text-white placeholder-gray-400 focus:ring-indigo-500 focus:border-indigo-500 text-sm"},null,512),[[ve,w.value]]),w.value?(t(),o("button",{key:0,onClick:V,class:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-200",title:"Clear search"},y[6]||(y[6]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))):x("",!0)])])),a.value?(t(),o("div",Ks,[(t(!0),o(Q,null,ee(i.allProjects,S=>(t(),B(E(ge),{key:S.id,href:k.route("projects.show",S.id),onClick:L=>q(S.id),class:W({"w-10 h-10 rounded-full flex items-center justify-center text-xs font-bold transition-all duration-200":!0,"bg-indigo-600 text-white":S.id===s.activeProjectId,"bg-gray-700 text-gray-300 hover:bg-gray-600":S.id!==s.activeProjectId}),title:S.name},{default:A(()=>[T(I(S.name.charAt(0).toUpperCase()),1)]),_:2},1032,["href","onClick","class","title"]))),128)),s.allProjects.length===0?(t(),o("div",Hs," No Projects ")):x("",!0)])):(t(),o("div",_s,[Object.keys(n.value).length>0?(t(),o("div",Ts,[e("div",{class:"flex items-center justify-between cursor-pointer py-2 hover:bg-gray-700 rounded-md px-2",onClick:y[1]||(y[1]=S=>b("main-types"))},[y[8]||(y[8]=e("h3",{class:"text-sm font-semibold text-gray-400"},"Active Projects by Type",-1)),(t(),o("svg",{class:W(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!d.value["main-types"]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},y[7]||(y[7]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))]),ae(e("div",Ms,[(t(!0),o(Q,null,ee(n.value,(S,L)=>(t(),o("div",{key:L},[e("div",{class:"flex items-center justify-between cursor-pointer py-1 hover:bg-gray-700 rounded-md px-2",onClick:z=>b(`type-${L}`)},[e("h4",Cs,I(L),1),(t(),o("svg",{class:W(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!d.value[`type-${L}`]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},y[9]||(y[9]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))],8,Gs),ae(e("ul",$s,[(t(!0),o(Q,null,ee(S,z=>(t(),o("li",{key:z.id},[c(E(ge),{href:k.route("projects.show",z.id),onClick:Y=>q(z.id),class:W({"block w-full text-left px-3 py-2 rounded-md transition-colors":!0,"bg-indigo-600 text-white":z.id===s.activeProjectId,"hover:bg-gray-700 text-gray-200":z.id!==s.activeProjectId,"font-bold":z.id===s.activeProjectId})},{default:A(()=>[e("span",Ss,I(z.name),1)]),_:2},1032,["href","onClick","class"])]))),128))],512),[[Ae,!d.value[`type-${L}`]]])]))),128))],512),[[Ae,!d.value["main-types"]]])])):x("",!0),Object.keys(m.value).length>0?(t(),o("div",Ps,[e("div",{class:"flex items-center justify-between cursor-pointer py-2 hover:bg-gray-700 rounded-md px-2",onClick:y[2]||(y[2]=S=>b("main-tags"))},[y[11]||(y[11]=e("h3",{class:"text-sm font-semibold text-gray-400"},"Projects by Tag",-1)),(t(),o("svg",{class:W(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!d.value["main-tags"]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},y[10]||(y[10]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))]),ae(e("div",Es,[(t(!0),o(Q,null,ee(m.value,(S,L)=>(t(),o("div",{key:L},[e("div",{class:"flex items-center justify-between cursor-pointer py-1 hover:bg-gray-700 rounded-md px-2",onClick:z=>b(`tag-${L}`)},[e("h4",Is,I(L),1),(t(),o("svg",{class:W(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!d.value[`tag-${L}`]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},y[12]||(y[12]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))],8,js),ae(e("ul",Ds,[(t(!0),o(Q,null,ee(S,z=>(t(),o("li",{key:z.id},[c(E(ge),{href:k.route("projects.show",z.id),onClick:Y=>q(z.id),class:W({"block w-full text-left px-3 py-2 rounded-md transition-colors":!0,"bg-indigo-600 text-white":z.id===s.activeProjectId,"hover:bg-gray-700 text-gray-200":z.id!==s.activeProjectId,"font-bold":z.id===s.activeProjectId})},{default:A(()=>[e("span",Bs,I(z.name),1)]),_:2},1032,["href","onClick","class"])]))),128))],512),[[Ae,!d.value[`tag-${L}`]]])]))),128))],512),[[Ae,!d.value["main-tags"]]])])):x("",!0),p.value.length>0?(t(),o("div",Ns,[e("div",{class:"flex items-center justify-between cursor-pointer py-2 hover:bg-gray-700 rounded-md px-2",onClick:y[3]||(y[3]=S=>b("inactive-projects"))},[y[14]||(y[14]=e("h3",{class:"text-sm font-semibold text-gray-400"},"Inactive Projects",-1)),(t(),o("svg",{class:W(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!d.value["inactive-projects"]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},y[13]||(y[13]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))]),ae(e("ul",Vs,[(t(!0),o(Q,null,ee(p.value,S=>(t(),o("li",{key:S.id},[c(E(ge),{href:k.route("projects.show",S.id),onClick:L=>q(S.id),class:W({"block w-full text-left px-3 py-2 rounded-md transition-colors":!0,"bg-indigo-600 text-white":S.id===s.activeProjectId,"hover:bg-gray-700 text-gray-200":S.id!==s.activeProjectId,"font-bold":S.id===s.activeProjectId})},{default:A(()=>[e("span",Ls,I(S.name)+" ("+I(S.status.replace("_"," "))+")",1)]),_:2},1032,["href","onClick","class"])]))),128))],512),[[Ae,!d.value["inactive-projects"]]])])):x("",!0),_.value.length>0?(t(),o("div",Us,[e("div",{class:"flex items-center justify-between cursor-pointer py-2 hover:bg-gray-700 rounded-md px-2",onClick:y[4]||(y[4]=S=>b("uncategorized"))},[y[16]||(y[16]=e("h3",{class:"text-sm font-semibold text-gray-400"},"Uncategorized",-1)),(t(),o("svg",{class:W(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!d.value.uncategorized}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},y[15]||(y[15]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))]),ae(e("ul",zs,[(t(!0),o(Q,null,ee(_.value,S=>(t(),o("li",{key:S.id},[c(E(ge),{href:k.route("projects.show",S.id),onClick:L=>q(S.id),class:W({"block w-full text-left px-3 py-2 rounded-md transition-colors":!0,"bg-indigo-600 text-white":S.id===s.activeProjectId,"hover:bg-gray-700 text-gray-200":S.id!==s.activeProjectId,"font-bold":S.id===s.activeProjectId})},{default:A(()=>[e("span",Rs,I(S.name),1)]),_:2},1032,["href","onClick","class"])]))),128))],512),[[Ae,!d.value.uncategorized]])])):x("",!0),l.value.length===0?(t(),o("div",Fs," No projects found matching your search. ")):s.allProjects.length===0&&!w.value?(t(),o("div",Os," No projects available. ")):x("",!0)]))],2))}},Ws=Le(qs,[["__scopeId","data-v-417d431f"]]),Js={class:"relative"},Xe={__name:"Dropdown",props:{align:{type:String,default:"right"},width:{type:String,default:"48"},contentClasses:{type:String,default:"py-1 bg-white"}},setup(s){const r=s,i=f=>{d.value&&f.key==="Escape"&&(d.value=!1)};fe(()=>document.addEventListener("keydown",i)),Fe(()=>document.removeEventListener("keydown",i));const u=K(()=>{const f={48:"w-48",64:"w-64",72:"w-72",80:"w-80",96:"w-96",full:"w-full",screen:"w-screen",auto:""},v=r.width.toString();return f[v]??f[48]}),a=K(()=>r.width.toString()==="screen"),w=K(()=>r.align==="left"?"ltr:origin-top-left rtl:origin-top-right start-0":r.align==="right"?"ltr:origin-top-right rtl:origin-top-left end-0":"origin-top"),d=G(!1);return(f,v)=>(t(),o("div",Js,[e("div",{onClick:v[0]||(v[0]=l=>d.value=!d.value)},[be(f.$slots,"trigger")]),ae(e("div",{class:"fixed inset-0 z-40",onClick:v[1]||(v[1]=l=>d.value=!1)},null,512),[[Ae,d.value]]),c(va,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:A(()=>[ae(e("div",{class:W(["z-50 mt-2 rounded-md shadow-lg",a.value?"fixed left-0 right-0":"absolute",w.value,u.value]),style:{display:"none"},onClick:v[2]||(v[2]=l=>d.value=!1)},[e("div",{class:W(["rounded-md ring-1 ring-black ring-opacity-5",s.contentClasses])},[be(f.$slots,"content")],2)],2),[[Ae,d.value]])]),_:3})]))}},le={__name:"DropdownLink",props:{href:{type:String,required:!0},method:{type:String,default:"get"},as:{type:String,default:"a"}},setup(s){return(r,i)=>(t(),B(E(ge),pa({href:s.href,method:s.method,as:s.as},r.$attrs,{class:"block w-full px-4 py-2 text-start text-sm leading-5 text-gray-700 transition duration-150 ease-in-out hover:bg-gray-100 focus:bg-gray-100 focus:outline-none"}),{default:A(()=>[be(r.$slots,"default")]),_:3},16,["href","method","as"]))}},de={__name:"NavLink",props:{href:{type:String,required:!0},active:{type:Boolean}},setup(s){const r=s,i=K(()=>r.active?"inline-flex items-center px-1 pt-1 border-b-2 border-indigo-400 text-sm font-medium leading-5 text-gray-900 focus:outline-none focus:border-indigo-700 transition duration-150 ease-in-out":"inline-flex items-center px-1 pt-1 border-b-2 border-transparent text-sm font-medium leading-5 text-gray-500 hover:text-gray-700 hover:border-gray-300 focus:outline-none focus:text-gray-700 focus:border-gray-300 transition duration-150 ease-in-out");return(u,a)=>(t(),B(E(ge),{href:s.href,class:W(i.value)},{default:A(()=>[be(u.$slots,"default")]),_:3},8,["href","class"]))}};/**
 * @license lucide-vue-next v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oa=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ys=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(r,i,u)=>u?u.toUpperCase():i.toLowerCase()),Zs=s=>{const r=Ys(s);return r.charAt(0).toUpperCase()+r.slice(1)},Qs=(...s)=>s.filter((r,i,u)=>!!r&&r.trim()!==""&&u.indexOf(r)===i).join(" ").trim(),ia=s=>s==="";/**
 * @license lucide-vue-next v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var De={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};/**
 * @license lucide-vue-next v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xs=({name:s,iconNode:r,absoluteStrokeWidth:i,"absolute-stroke-width":u,strokeWidth:a,"stroke-width":w,size:d=De.width,color:f=De.stroke,...v},{slots:l})=>Je("svg",{...De,...v,width:d,height:d,stroke:f,"stroke-width":ia(i)||ia(u)||i===!0||u===!0?Number(a||w||De["stroke-width"])*24/Number(d):a||w||De["stroke-width"],class:Qs("lucide",v.class,...s?[`lucide-${oa(Zs(s))}-icon`,`lucide-${oa(s)}`]:["lucide-icon"])},[...r.map(n=>Je(...n)),...l.default?[l.default()]:[]]);/**
 * @license lucide-vue-next v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=(s,r)=>(i,{slots:u,attrs:a})=>Je(Xs,{...a,...i,iconNode:r,name:s},u);/**
 * @license lucide-vue-next v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eo=Oe("award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-vue-next v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ao=Oe("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);/**
 * @license lucide-vue-next v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ra=Oe("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-vue-next v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const to=Oe("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),lo={class:"hidden sm:flex sm:items-center"},so={class:"mx-auto w-full max-w-6xl"},oo={class:"grid grid-cols-2 md:grid-cols-4 gap-8"},io={class:"space-y-1"},ro={class:"space-y-1"},no={class:"space-y-1"},uo={class:"space-y-1"},co={__name:"AdminDropdown",setup(s){const{canDo:r}=Ze(),i=r("manage_projects"),u=r("create_users"),a=r("manage_roles"),w=r("manage_task_types"),d=r("create_clients"),f=r("manage_project_tiers")||r("view_project_tiers");return(v,l)=>(t(),o("div",lo,[c(Xe,{align:"left",width:"screen","content-classes":"py-6 bg-white p-6 w-full shadow-lg"},{trigger:A(()=>l[0]||(l[0]=[e("span",{class:"inline-flex rounded-md"},[e("button",{type:"button",class:"inline-flex items-center rounded-md border border-transparent bg-white px-3 py-2 text-sm font-medium leading-4 text-gray-700 hover:text-gray-900 focus:outline-none"},[T(" Admin "),e("svg",{class:"ms-2 -me-0.5 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])])],-1)])),content:A(()=>[e("div",so,[e("div",oo,[e("div",null,[l[5]||(l[5]=e("h4",{class:"text-xs font-semibold uppercase tracking-wider text-gray-500 mb-3"},"Management",-1)),e("div",io,[E(i)?(t(),B(le,{key:0,href:v.route("projects.index"),active:v.route().current("projects.index"),class:"!px-2 !py-1.5"},{default:A(()=>l[1]||(l[1]=[T("Projects",-1)])),_:1,__:[1]},8,["href","active"])):x("",!0),E(d)?(t(),B(le,{key:1,href:v.route("clients.page"),active:v.route().current("clients.page"),class:"!px-2 !py-1.5"},{default:A(()=>l[2]||(l[2]=[T("Clients",-1)])),_:1,__:[2]},8,["href","active"])):x("",!0),E(u)?(t(),B(le,{key:2,href:v.route("users.page"),active:v.route().current("users.page"),class:"!px-2 !py-1.5"},{default:A(()=>l[3]||(l[3]=[T("Users",-1)])),_:1,__:[3]},8,["href","active"])):x("",!0),E(i)?(t(),B(le,{key:3,href:v.route("leads.page"),active:v.route().current("leads.page"),class:"!px-2 !py-1.5"},{default:A(()=>l[4]||(l[4]=[T("Leads",-1)])),_:1,__:[4]},8,["href","active"])):x("",!0)])]),e("div",null,[l[9]||(l[9]=e("h4",{class:"text-xs font-semibold uppercase tracking-wider text-gray-500 mb-3"},"Planning / Sharing",-1)),e("div",ro,[E(u)?(t(),B(le,{key:0,href:v.route("availability.index"),active:v.route().current("availability.index"),class:"!px-2 !py-1.5"},{default:A(()=>l[6]||(l[6]=[T("Weekly Availability",-1)])),_:1,__:[6]},8,["href","active"])):x("",!0),E(r)("manage_notices")?(t(),B(le,{key:1,href:v.route("admin.notice-board.index"),class:"!px-2 !py-1.5"},{default:A(()=>l[7]||(l[7]=[T("Notice Board",-1)])),_:1,__:[7]},8,["href"])):x("",!0),E(r)("manage_notices")?(t(),B(le,{key:2,href:v.route("shareable-resources.page"),class:"!px-2 !py-1.5"},{default:A(()=>l[8]||(l[8]=[T("Shareable Resources",-1)])),_:1,__:[8]},8,["href"])):x("",!0)])]),e("div",null,[l[14]||(l[14]=e("h4",{class:"text-xs font-semibold uppercase tracking-wider text-gray-500 mb-3"},"Configuration",-1)),e("div",no,[E(w)?(t(),B(le,{key:0,href:v.route("task-types.page"),active:v.route().current("task-types.page"),class:"!px-2 !py-1.5"},{default:A(()=>l[10]||(l[10]=[T("Task Types",-1)])),_:1,__:[10]},8,["href","active"])):x("",!0),E(f)||E(r)("create_project_tiers")||E(r)("edit_project_tiers")?(t(),B(le,{key:1,href:"/admin/project-tiers",class:"!px-2 !py-1.5"},{default:A(()=>l[11]||(l[11]=[T("Project Tiers",-1)])),_:1,__:[11]})):x("",!0),E(r)("manage_email_templates")?(t(),B(le,{key:2,href:v.route("email-templates.page"),active:v.route().current("email-templates.page"),class:"!px-2 !py-1.5"},{default:A(()=>l[12]||(l[12]=[T("Email Templates",-1)])),_:1,__:[12]},8,["href","active"])):x("",!0),E(r)("manage_placeholder_definitions")?(t(),B(le,{key:3,href:v.route("placeholder-definitions.page"),active:v.route().current("placeholder-definitions.page"),class:"!px-2 !py-1.5"},{default:A(()=>l[13]||(l[13]=[T("Placeholder Definitions",-1)])),_:1,__:[13]},8,["href","active"])):x("",!0)])]),e("div",null,[l[19]||(l[19]=e("h4",{class:"text-xs font-semibold uppercase tracking-wider text-gray-500 mb-3"},"Access & Finance",-1)),e("div",uo,[E(a)?(t(),B(le,{key:0,href:v.route("admin.roles.index"),class:"!px-2 !py-1.5"},{default:A(()=>l[15]||(l[15]=[T("Manage Roles",-1)])),_:1,__:[15]},8,["href"])):x("",!0),E(r)("manage_permissions")?(t(),B(le,{key:1,href:v.route("admin.permissions.index"),class:"!px-2 !py-1.5"},{default:A(()=>l[16]||(l[16]=[T("Manage Permissions",-1)])),_:1,__:[16]},8,["href"])):x("",!0),E(r)("manage_monthly_budgets")?(t(),B(le,{key:2,href:"/admin/monthly-budgets",class:"!px-2 !py-1.5"},{default:A(()=>l[17]||(l[17]=[T("Monthly Budgets",-1)])),_:1,__:[17]})):x("",!0),E(r)("view_monthly_budgets")?(t(),B(le,{key:3,href:"/admin/bonus-calculator",class:"!px-2 !py-1.5"},{default:A(()=>l[18]||(l[18]=[T("Bonus Calculator",-1)])),_:1,__:[18]})):x("",!0)])])])])]),_:1})]))}},mo={class:"relative ms-3"},vo={class:"inline-flex rounded-md"},po={type:"button",class:"inline-flex items-center rounded-md border border-transparent bg-white px-3 py-2 text-sm font-medium leading-4 text-gray-500 transition duration-150 ease-in-out hover:text-gray-700 focus:outline-none"},fo={__name:"UserDropdown",emits:["logoutSuccess","logoutError"],setup(s,{emit:r}){const i=K(()=>Ve().props.auth.user),u=r,a=()=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization,u("logoutSuccess")},w=d=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization,window.location.href="/login",u("logoutError",d)};return(d,f)=>(t(),o("div",mo,[c(Xe,{align:"right",width:"48"},{trigger:A(()=>{var v;return[e("span",vo,[e("button",po,[T(I(i.value.name)+" ("+I((v=i.value.role_data)==null?void 0:v.name)+") ",1),f[0]||(f[0]=e("svg",{class:"ms-2 -me-0.5 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1))])])]}),content:A(()=>[c(le,{href:d.route("profile.edit")},{default:A(()=>f[1]||(f[1]=[T(" Profile ",-1)])),_:1,__:[1]},8,["href"]),c(le,{href:d.route("logout"),method:"post",as:"button",onSuccess:a,onError:w},{default:A(()=>f[2]||(f[2]=[T(" Log Out ",-1)])),_:1,__:[2]},8,["href"])]),_:1})]))}},go={class:"hidden sm:flex sm:items-center"},bo={class:"mx-auto w-full max-w-6xl"},ho={class:"grid grid-cols-2 md:grid-cols-3 gap-8"},yo={class:"space-y-1"},ko={__name:"BonusDropdown",setup(s){return(r,i)=>(t(),o("div",go,[c(Xe,{align:"left",width:"screen","content-classes":"py-6 bg-white p-6 w-full shadow-lg"},{trigger:A(()=>i[0]||(i[0]=[e("span",{class:"inline-flex rounded-md"},[e("button",{type:"button",class:"inline-flex items-center rounded-md border border-transparent bg-white px-3 py-2 text-sm font-medium leading-4 text-gray-700 hover:text-gray-900 focus:outline-none"},[T(" Bonus "),e("svg",{class:"ms-2 -me-0.5 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])])],-1)])),content:A(()=>[e("div",bo,[e("div",ho,[e("div",null,[i[4]||(i[4]=e("h4",{class:"text-xs font-semibold uppercase tracking-wider text-gray-500 mb-3"},"Program",-1)),e("div",yo,[c(le,{href:r.route("bonus-system.index"),active:r.route().current("bonus-system.index"),class:"!px-2 !py-1.5"},{default:A(()=>i[1]||(i[1]=[T("Bonus System",-1)])),_:1,__:[1]},8,["href","active"]),c(le,{href:r.route("leaderboard.index"),active:r.route().current("leaderboard.index"),class:"!px-2 !py-1.5"},{default:A(()=>i[2]||(i[2]=[T("Leaderboard",-1)])),_:1,__:[2]},8,["href","active"]),c(le,{href:r.route("kudos.index"),active:r.route().current("kudos.index"),class:"!px-2 !py-1.5"},{default:A(()=>i[3]||(i[3]=[T("Kudos",-1)])),_:1,__:[3]},8,["href","active"])])])])])]),_:1})]))}},wo={class:"bg-white z-[99] relative w-full shadow-sm border-b border-gray-100"},Ao={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},xo={class:"flex h-16 justify-between items-center"},_o={class:"flex-shrink-0 flex items-center"},To={class:"hidden sm:flex items-center space-x-6"},Mo={key:0,class:"group relative inline-flex items-center px-3 py-1 rounded-full bg-gradient-to-r from-green-400 to-emerald-500 text-white text-sm font-semibold shadow-lg ring-2 ring-emerald-300/60 transition-all duration-300 ease-in-out"},Go={class:"font-bold"},Co={key:1,class:"inline-flex items-center px-3 py-1 rounded-full bg-gray-100 text-gray-500 text-sm font-medium"},$o={key:0,class:"absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-red-100 transform translate-x-1/2 -translate-y-1/2 bg-red-600 rounded-full"},So={class:"-mr-2 flex items-center sm:hidden"},Po={class:"h-6 w-6",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24"},Eo={class:"bg-gray-50 border-t border-gray-100 py-2 hidden sm:block"},jo={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Io={class:"flex items-center justify-between"},Do={class:"flex items-center space-x-2 overflow-x-auto no-scrollbar"},Bo={class:"flex items-center space-x-2 flex-shrink-0"},No={class:"space-y-1 pt-2 pb-3"},Vo={__name:"TopNavigation",props:{unreadNotificationCount:{type:Number,default:0}},emits:["openCreateTaskModal","openAddResource","openNotificationsSidebar","open-kudo-modal"],setup(s,{emit:r}){const i=r,u=G(!1);K(()=>Ve().props.auth.user);const{canDo:a}=Ze(),w=a("manage_roles"),d=G(null),f=G(!0),v=G(null);return fe(async()=>{try{const{data:l}=await window.axios.get("/api/leaderboard/stats");d.value=(l==null?void 0:l.userMonthlyPoints)??0}catch(l){console.error("Failed to load monthly points",l),v.value="Failed to load points",d.value=0}finally{f.value=!1}}),(l,n)=>(t(),o("nav",wo,[e("div",Ao,[e("div",xo,[e("div",_o,[c(E(ge),{href:l.route("dashboard")},{default:A(()=>[c(Ya,{class:"block h-14 w-auto fill-current text-gray-800"})]),_:1},8,["href"])]),e("div",To,[c(E(ge),{href:l.route("leaderboard.index"),class:"mr-3 cursor-pointer"},{default:A(()=>[f.value?(t(),o("div",Co," Loading... ")):(t(),o("div",Mo,[n[5]||(n[5]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1.5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})],-1)),e("span",Go,I(d.value??0),1),n[6]||(n[6]=e("span",{class:"ml-1 text-white/80"},"pts",-1))]))]),_:1},8,["href"]),e("button",{onClick:n[0]||(n[0]=m=>i("openNotificationsSidebar")),class:"relative flex-shrink-0 text-gray-400 hover:text-indigo-600 p-2 rounded-full transition-colors duration-200","aria-label":"View all notifications"},[c(E(ao),{class:"h-6 w-6"}),s.unreadNotificationCount>0?(t(),o("span",$o,I(s.unreadNotificationCount),1)):x("",!0)]),c(fo)]),e("div",So,[e("button",{onClick:n[1]||(n[1]=m=>u.value=!u.value),class:"inline-flex items-center justify-center rounded-md p-2 text-gray-400 transition duration-150 ease-in-out hover:bg-gray-100 hover:text-gray-500 focus:bg-gray-100 focus:text-gray-500 focus:outline-none"},[(t(),o("svg",Po,[e("path",{class:W({hidden:u.value,"inline-flex":!u.value}),"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},null,2),e("path",{class:W({hidden:!u.value,"inline-flex":u.value}),"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,2)]))])])])]),e("div",Eo,[e("div",jo,[e("div",Io,[e("div",Do,[c(de,{href:l.route("dashboard"),active:l.route().current("dashboard")},{default:A(()=>n[7]||(n[7]=[T(" Dashboard ",-1)])),_:1,__:[7]},8,["href","active"]),c(de,{href:l.route("inbox"),active:l.route().current("inbox")},{default:A(()=>n[8]||(n[8]=[T(" Inbox ",-1)])),_:1,__:[8]},8,["href","active"]),c(de,{href:l.route("workspace.index"),active:l.route().current("workspace.index")},{default:A(()=>n[9]||(n[9]=[T(" My Workspace ",-1)])),_:1,__:[9]},8,["href","active"]),c(de,{href:l.route("presentations.index"),active:l.route().current("presentations.index")},{default:A(()=>n[10]||(n[10]=[T(" Presentation ",-1)])),_:1,__:[10]},8,["href","active"]),c(ko),E(a)("add_expendables").value?(t(),B(de,{key:0,href:l.route("project-expendables.index")},{default:A(()=>n[11]||(n[11]=[T(" Project Expendables ",-1)])),_:1,__:[11]},8,["href"])):x("",!0),E(w)?(t(),B(co,{key:1})):x("",!0)]),e("div",Bo,[c(ne,{type:"button",onClick:n[2]||(n[2]=m=>i("openCreateTaskModal")),class:"px-3 py-1.5 text-sm"},{default:A(()=>[c(E(ra),{class:"h-4 w-4 mr-1.5"}),n[12]||(n[12]=e("span",null,"Add Task",-1))]),_:1,__:[12]}),c(ne,{type:"button",onClick:n[3]||(n[3]=m=>i("openAddResource")),class:"px-3 py-1.5 text-sm"},{default:A(()=>[c(E(ra),{class:"h-4 w-4 mr-1.5"}),n[13]||(n[13]=e("span",null,"Add Resource",-1))]),_:1,__:[13]}),E(a)("create_kudos")?(t(),o("button",{key:0,type:"button",onClick:n[4]||(n[4]=m=>l.$emit("open-kudo-modal")),class:"inline-flex items-center justify-center px-3 py-1.5 text-sm font-semibold rounded-lg bg-orange-500 text-white hover:bg-orange-600 transition-colors duration-200"},[c(E(eo),{class:"h-4 w-4 mr-1.5"}),n[14]||(n[14]=e("span",null,"Give Kudo",-1))])):x("",!0)])])])]),e("div",{class:W([{block:u.value,hidden:!u.value},"sm:hidden"])},[e("div",No,[c(de,{href:l.route("dashboard"),active:l.route().current("dashboard")},{default:A(()=>n[15]||(n[15]=[T(" Dashboard ",-1)])),_:1,__:[15]},8,["href","active"]),c(de,{href:l.route("inbox"),active:l.route().current("inbox")},{default:A(()=>n[16]||(n[16]=[T(" Inbox ",-1)])),_:1,__:[16]},8,["href","active"]),c(de,{href:l.route("workspace.index"),active:l.route().current("workspace.index")},{default:A(()=>n[17]||(n[17]=[T(" My Workspace ",-1)])),_:1,__:[17]},8,["href","active"]),c(de,{href:l.route("presentations.index"),active:l.route().current("presentations.index")},{default:A(()=>n[18]||(n[18]=[T(" Presentation ",-1)])),_:1,__:[18]},8,["href","active"]),c(de,{href:l.route("bonus-system.index"),active:l.route().current("bonus-system.index")},{default:A(()=>n[19]||(n[19]=[T(" Bonus System ",-1)])),_:1,__:[19]},8,["href","active"]),c(de,{href:l.route("leaderboard.index"),active:l.route().current("leaderboard.index")},{default:A(()=>n[20]||(n[20]=[T(" Leaderboard ",-1)])),_:1,__:[20]},8,["href","active"]),c(de,{href:l.route("kudos.index"),active:l.route().current("kudos.index")},{default:A(()=>n[21]||(n[21]=[T(" Kudos ",-1)])),_:1,__:[21]},8,["href","active"]),E(a)("add_expendables").value?(t(),B(de,{key:0,href:l.route("project-expendables.index")},{default:A(()=>n[22]||(n[22]=[T(" Project Expendables ",-1)])),_:1,__:[22]},8,["href"])):x("",!0)])],2)]))}},te={__name:"ResponsiveNavLink",props:{href:{type:String,required:!0},active:{type:Boolean},method:{type:String,default:"get"},as:{type:String,default:"a"}},setup(s){const r=s,i=K(()=>r.active?"block w-full ps-3 pe-4 py-2 border-l-4 border-indigo-400 text-start text-base font-medium text-indigo-700 bg-indigo-50 focus:outline-none focus:text-indigo-800 focus:bg-indigo-100 focus:border-indigo-700 transition duration-150 ease-in-out":"block w-full ps-3 pe-4 py-2 border-l-4 border-transparent text-start text-base font-medium text-gray-600 hover:text-gray-800 hover:bg-gray-50 hover:border-gray-300 focus:outline-none focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300 transition duration-150 ease-in-out");return(u,a)=>(t(),B(E(ge),pa({href:s.href,method:s.method,as:s.as},u.$attrs,{class:i.value}),{default:A(()=>[be(u.$slots,"default")]),_:3},16,["href","method","as","class"]))}},Lo={class:"space-y-1 pb-3 pt-2"},Uo={key:0,class:"mt-3 space-y-1"},zo={class:"border-t border-gray-200 pb-1 pt-4"},Ro={class:"px-4"},Fo={class:"text-base font-medium text-gray-800"},Oo={class:"text-sm font-medium text-gray-500"},Ko={class:"text-sm font-medium text-gray-500 capitalize"},Ho={class:"mt-3 space-y-1"},qo={__name:"MobileNavigation",props:{showingNavigationDropdown:{type:Boolean,required:!0},unreadNotificationCount:{type:Number,default:0}},emits:["openCreateTaskModal","openAddResource","openNotificationsSidebar","logoutSuccess","logoutError"],setup(s,{emit:r}){const i=r,u=K(()=>Ve().props.auth.user),{canDo:a}=Ze(),w=a("manage_projects"),d=a("compose_emails"),f=a("approve_emails"),v=a("create_users"),l=a("manage_roles"),n=a("manage_task_types"),m=a("create_clients"),p=()=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization,i("logoutSuccess")},_=C=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization,window.location.href="/login",i("logoutError",C)};return(C,b)=>{var q;return t(),o("div",{class:W([{block:s.showingNavigationDropdown,hidden:!s.showingNavigationDropdown},"sm:hidden"])},[e("div",Lo,[E(l)?(t(),o("div",Uo,[b[18]||(b[18]=e("div",{class:"px-4 font-medium text-base text-gray-800"},"Admin",-1)),c(te,{href:C.route("dashboard"),active:C.route().current("dashboard")},{default:A(()=>b[3]||(b[3]=[T(" Dashboard ",-1)])),_:1,__:[3]},8,["href","active"]),E(a)("view_emails")?(t(),B(te,{key:0,href:C.route("inbox"),active:C.route().current("inbox")},{default:A(()=>b[4]||(b[4]=[T(" Inbox ",-1)])),_:1,__:[4]},8,["href","active"])):x("",!0),E(m)?(t(),B(te,{key:1,href:C.route("clients.page"),active:C.route().current("clients.page")},{default:A(()=>b[5]||(b[5]=[T(" Clients ",-1)])),_:1,__:[5]},8,["href","active"])):x("",!0),E(w)?(t(),B(te,{key:2,href:C.route("projects.index"),active:C.route().current("projects.index")},{default:A(()=>b[6]||(b[6]=[T(" Projects ",-1)])),_:1,__:[6]},8,["href","active"])):x("",!0),E(v)?(t(),B(te,{key:3,href:C.route("users.page"),active:C.route().current("users.page")},{default:A(()=>b[7]||(b[7]=[T(" Users ",-1)])),_:1,__:[7]},8,["href","active"])):x("",!0),E(d)?(t(),B(te,{key:4,href:C.route("emails.compose"),active:C.route().current("emails.compose")},{default:A(()=>b[8]||(b[8]=[T(" Compose Email ",-1)])),_:1,__:[8]},8,["href","active"])):x("",!0),E(f)?(t(),B(te,{key:5,href:C.route("emails.pending"),active:C.route().current("emails.pending")},{default:A(()=>b[9]||(b[9]=[T(" Approve Emails ",-1)])),_:1,__:[9]},8,["href","active"])):x("",!0),E(d)?(t(),B(te,{key:6,href:C.route("emails.rejected"),active:C.route().current("emails.rejected")},{default:A(()=>b[10]||(b[10]=[T(" Rejected Emails ",-1)])),_:1,__:[10]},8,["href","active"])):x("",!0),E(v)?(t(),B(te,{key:7,href:C.route("availability.index"),active:C.route().current("availability.index")},{default:A(()=>b[11]||(b[11]=[T(" Weekly Availability ",-1)])),_:1,__:[11]},8,["href","active"])):x("",!0),E(a)("manage_roles")?(t(),B(te,{key:8,href:C.route("admin.roles.index"),active:C.route().current("admin.roles.index")},{default:A(()=>b[12]||(b[12]=[T(" Manage Roles ",-1)])),_:1,__:[12]},8,["href","active"])):x("",!0),E(a)("manage_permissions")?(t(),B(te,{key:9,href:C.route("admin.permissions.index"),active:C.route().current("admin.permissions.index")},{default:A(()=>b[13]||(b[13]=[T(" Manage Permissions ",-1)])),_:1,__:[13]},8,["href","active"])):x("",!0),E(n)?(t(),B(te,{key:10,href:C.route("task-types.page"),active:C.route().current("task-types.page")},{default:A(()=>b[14]||(b[14]=[T(" Task Types ",-1)])),_:1,__:[14]},8,["href","active"])):x("",!0),E(a)("manage_email_templates")?(t(),B(te,{key:11,href:C.route("email-templates.page"),active:C.route().current("email-templates.page")},{default:A(()=>b[15]||(b[15]=[T(" Email Templates ",-1)])),_:1,__:[15]},8,["href","active"])):x("",!0),E(a)("manage_placeholder_definitions")?(t(),B(te,{key:12,href:C.route("placeholder-definitions.page"),active:C.route().current("placeholder-definitions.page")},{default:A(()=>b[16]||(b[16]=[T(" Placeholder Definitions ",-1)])),_:1,__:[16]},8,["href","active"])):x("",!0),E(a)("view_shareable_resources")?(t(),B(te,{key:13,href:C.route("shareable-resources.page"),active:C.route().current("shareable-resources.page")},{default:A(()=>b[17]||(b[17]=[T(" Shareable Resources ",-1)])),_:1,__:[17]},8,["href","active"])):x("",!0)])):x("",!0)]),e("div",zo,[e("div",Ro,[e("div",Fo,I(u.value.name),1),e("div",Oo,I(u.value.email),1),e("div",Ko,I((q=u.value.role_data)==null?void 0:q.name),1)]),e("div",Ho,[c(te,{as:"button",onClick:b[0]||(b[0]=V=>i("openCreateTaskModal"))},{default:A(()=>b[19]||(b[19]=[T(" Add Task ",-1)])),_:1,__:[19]}),c(te,{as:"button",onClick:b[1]||(b[1]=V=>i("openAddResource"))},{default:A(()=>b[20]||(b[20]=[T(" Add Resource ",-1)])),_:1,__:[20]}),c(te,{as:"button",onClick:b[2]||(b[2]=V=>i("openNotificationsSidebar"))},{default:A(()=>[T(" Notifications ("+I(s.unreadNotificationCount)+") ",1)]),_:1}),c(te,{href:C.route("profile.edit")},{default:A(()=>b[21]||(b[21]=[T(" Profile ",-1)])),_:1,__:[21]},8,["href"]),c(te,{href:C.route("logout"),method:"post",as:"button",onSuccess:p,onError:_},{default:A(()=>b[22]||(b[22]=[T(" Log Out ",-1)])),_:1,__:[22]},8,["href"])])])],2)}}},Wo={class:"space-y-4"},Jo={key:0,class:"mb-4 p-3 bg-gray-100 rounded-md"},Yo={class:"text-sm font-medium text-gray-900"},Zo={class:"text-xs text-gray-500 mt-1"},Qo={class:"mb-4"},Xo="post",ei="Add Note",ai="Note added successfully!",ti={__name:"TaskNoteModal",props:{show:Boolean,taskForNote:Object},emits:["close","note-added"],setup(s,{emit:r}){const i=s,u=r,a=Ce({note:""}),w=K(()=>{var l;return`Add Note to Task: "${(l=i.taskForNote)==null?void 0:l.name}"`}),d=K(()=>{var l;return`/api/tasks/${(l=i.taskForNote)==null?void 0:l.id}/notes`});ie(()=>i.show,l=>{l&&Object.assign(a,{note:""})},{immediate:!0});const f=l=>{u("note-added",l),u("close")},v=()=>{u("close")};return(l,n)=>(t(),B($e,{show:s.show,title:w.value,"api-endpoint":d.value,"http-method":Xo,"form-data":a,"submit-button-text":ei,"success-message":ai,onClose:v,onSubmitted:f},{default:A(({errors:m})=>[e("div",Wo,[s.taskForNote?(t(),o("div",Jo,[e("p",Yo,I(s.taskForNote.name),1),e("p",Zo,"Status: "+I(s.taskForNote.status),1)])):x("",!0),e("div",Qo,[c(J,{for:"task-note-content",value:"Note Content"}),ae(e("textarea",{id:"task-note-content","onUpdate:modelValue":n[0]||(n[0]=p=>a.note=p),class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full h-32",placeholder:"Enter your note...",required:""},null,512),[[ve,a.note]]),c(Z,{message:m.note?m.note[0]:"",class:"mt-2"},null,8,["message"])])])]),_:1},8,["show","title","api-endpoint","form-data"]))}},li={class:"task-history-list"},si={key:0,class:"text-center py-4"},oi={key:1,class:"text-gray-500 text-sm py-2"},ii={key:2,class:"space-y-3"},ri={class:"flex items-start"},ni={class:"text-xl mr-2"},ui={class:"text-sm text-gray-700"},di={class:"text-xs text-gray-500 mt-1"},ci={__name:"TaskHistoryList",props:{activities:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},setup(s){const r=u=>u?new Date(u).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",i=u=>(console.log(u),u.includes("created")?"🆕":u.includes("started")?"🚀":u.includes("paused")?"⏸️":u.includes("resumed")?"▶️":u.includes("unblocked")?"🔓":u.includes("blocked")?"⛔":u.includes("completed")?"✅":u.includes("revised")?"🔄":u.includes("deleted")?"🗑️":u.includes("assigned")?"👤":u.includes("updated")?"📝":u.includes("added note")?"🗒️":u.includes("commented")?"💬":"📋");return(u,a)=>(t(),o("div",li,[s.loading?(t(),o("div",si,a[0]||(a[0]=[e("div",{class:"inline-block animate-spin rounded-full h-6 w-6 border-t-2 border-b-2 border-indigo-500"},null,-1),e("p",{class:"mt-2 text-gray-500"},"Loading activity history...",-1)]))):s.activities.length===0?(t(),o("div",oi," No activity history available for this task. ")):(t(),o("div",ii,[(t(!0),o(Q,null,ee(s.activities,w=>{var d;return t(),o("div",{key:w.id,class:"p-3 bg-gray-50 rounded-md"},[e("div",ri,[e("span",ni,I(i(w.description)),1),e("div",null,[e("p",ui,I(w.description),1),e("p",di," By "+I(((d=w.causer)==null?void 0:d.name)||"System")+" on "+I(r(w.created_at)),1)])])])}),128))]))]))}},mi=Le(ci,[["__scopeId","data-v-423d54af"]]),zn=async()=>{try{return(await X.get("/api/assigned-tasks")).data}catch(s){throw console.error("Error fetching assigned tasks:",s),oe("Failed to load assigned tasks"),s}},Rn=async s=>{try{return(await X.get(`/api/projects/${s}/tasks`)).data}catch(r){throw console.error("Error fetching project tasks:",r),oe("Failed to load project tasks"),r}},Fn=async s=>{try{return(await X.get(`/api/projects/${s}/due-and-overdue-tasks`)).data}catch(r){throw console.error("Error fetching due and overdue tasks:",r),oe("Failed to load due and overdue tasks"),r}},vi=async s=>{if(!s||s.status==="In Progress")return s;try{he("Starting task...");const r=await X.post(`/api/tasks/${s.id}/start`);return me("Task started successfully"),r.data}catch(r){throw console.error("Error starting task:",r),oe("Failed to start task. Please try again."),r}},pi=async s=>{if(!s||s.status!=="In Progress")return ue('Task can only be paused from "In Progress" status.'),s;try{he("Pausing task...");const r=await X.post(`/api/tasks/${s.id}/pause`);return me("Task paused successfully"),r.data}catch(r){throw console.error("Error pausing task:",r),oe("Failed to pause task. Please try again."),r}},fi=async s=>{if(!s||s.status!=="Paused")return ue('Task can only be resumed from "Paused" status.'),s;try{he("Resuming task...");const r=await X.post(`/api/tasks/${s.id}/resume`);return me("Task resumed successfully"),r.data}catch(r){throw console.error("Error resuming task:",r),oe("Failed to resume task. Please try again."),r}},gi=async s=>{if(!s||s.status==="Done")return s;if(s.status!=="In Progress")throw ue("Task must be started before it can be completed"),new Error("Task must be started before it can be completed");try{he("Completing task...");const r=await X.patch(`/api/tasks/${s.id}/complete`);me("Task completed successfully");const i=r.data;if(i!=null&&i.needs_approval){const u=(i==null?void 0:i.creator_name)||"the creator";he(`This task requires approval. A notification has been sent to ${u}.`)}return i}catch(r){throw console.error("Error completing task:",r),r.response&&r.response.status===422?ue(r.response.data.message||"Task must be started before it can be completed"):oe("Failed to complete task. Please try again."),r}},bi=async(s,r)=>{if(!s||s.status==="Blocked")return ue("Task is already blocked."),s;if(s.status==="Done")return ue("Completed tasks cannot be blocked."),s;if(!r)throw ue("Please provide a reason for blocking the task"),new Error("Blocking reason is required");try{he("Blocking task...");const i=await X.post(`/api/tasks/${s.id}/block`,{reason:r});return me("Task blocked successfully"),i.data}catch(i){throw console.error("Error blocking task:",i),oe("Failed to block task. Please try again."),i}},hi=async s=>{if(!s||s.status!=="Blocked")return ue("Task is not in a blocked state."),s;try{he("Unblocking task...");const r=await X.post(`/api/tasks/${s.id}/unblock`);return me("Task unblocked successfully"),r.data}catch(r){throw console.error("Error unblocking task:",r),oe("Failed to unblock task. Please try again."),r}},yi=async s=>{if(!s||s.status!=="Done")return ue("Only completed tasks can be revised."),s;try{he("Revising task...");const r=await X.post(`/api/tasks/${s.id}/revise`);return me("Task revised successfully"),r.data}catch(r){throw console.error("Error revising task:",r),r.response&&r.response.status===422?ue(r.response.data.message||"Only completed tasks can be revised"):oe("Failed to revise task. Please try again."),r}},ki=async s=>{if(!s)return!1;if(s.status!=="To Do")throw ue("Only tasks in To Do status can be deleted"),new Error("Only tasks in To Do status can be deleted");if(!confirm("Are you sure you want to delete this task? This action cannot be undone."))return!1;try{return he("Deleting task..."),await X.delete(`/api/tasks/${s.id}`),me("Task deleted successfully"),!0}catch(r){throw console.error("Error deleting task:",r),oe("Failed to delete task. Please try again."),r}},wi=s=>{switch(s){case"To Do":return"bg-yellow-100 text-yellow-800";case"In Progress":return"bg-blue-100 text-blue-800";case"Paused":return"bg-orange-100 text-orange-800";case"Blocked":return"bg-red-100 text-red-800";case"Done":return"bg-green-100 text-green-800";case"Archived":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},On=s=>{switch(s){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},Kn=s=>s?s.charAt(0).toUpperCase()+s.slice(1):"Medium";function na(s,r){return t(),o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M8.75 1A2.75 2.75 0 0 0 6 3.75v.443c-.795.077-1.584.176-2.365.298a.75.75 0 1 0 .23 1.482l.149-.022.841 10.518A2.75 2.75 0 0 0 7.596 19h4.807a2.75 2.75 0 0 0 2.742-2.53l.841-10.52.149.023a.75.75 0 0 0 .23-1.482A41.03 41.03 0 0 0 14 4.193V3.75A2.75 2.75 0 0 0 11.25 1h-2.5ZM10 4c.84 0 1.673.025 2.5.075V3.75c0-.69-.56-1.25-1.25-1.25h-2.5c-.69 0-1.25.56-1.25 1.25v.325C8.327 4.025 9.16 4 10 4ZM8.58 7.72a.75.75 0 0 0-1.5.06l.3 7.5a.75.75 0 1 0 1.5-.06l-.3-7.5Zm4.34.06a.75.75 0 1 0-1.5-.06l-.3 7.5a.75.75 0 1 0 1.5.06l.3-7.5Z","clip-rule":"evenodd"})])}const Ai={class:"mt-4"},xi={__name:"ChecklistCreator",props:{modelValue:{type:Array,required:!0},placeholder:{type:String,default:"e.g., Task 1, Task 2, Task 3"},label:{type:String,default:"Checklist Items"},density:{type:String,default:"spacious",validator:s=>["spacious","tight","notes"].includes(s)}},emits:["update:modelValue"],setup(s,{emit:r}){const i=s,u=r,a=G([]),w=G([]),d=G(!1);ie(()=>i.modelValue,m=>{d.value=!0,a.value=JSON.parse(JSON.stringify(m)),(a.value.length===0||a.value[a.value.length-1].name.trim()!=="")&&a.value.push({name:"",completed:!1}),Te(()=>{d.value=!1})},{immediate:!0,deep:!0}),ie(()=>a.value,m=>{d.value||u("update:modelValue",m)},{deep:!0});function f(m){a.value.splice(m,1),a.value.length===0&&a.value.push({name:"",completed:!1})}function v(m){m===a.value.length-1&&a.value[m].name.trim()!==""&&a.value.push({name:"",completed:!1})}function l(m){m<a.value.length-1&&Te(()=>{var p;(p=w.value[m+1])==null||p.focus()})}const n=K(()=>i.density==="tight"?{listClass:"space-y-1",itemClass:"flex items-center space-x-1",inputClass:"px-1 py-1 text-sm"}:i.density==="notes"?{listClass:"space-y-0.5",itemClass:"flex items-center space-x-1",inputClass:"px-1 py-0.5 text-sm border-transparent focus:border-transparent focus:ring-0 bg-transparent"}:{listClass:"space-y-2",itemClass:"flex items-center space-x-2",inputClass:""});return(m,p)=>(t(),o("div",Ai,[s.label?(t(),B(J,{key:0,value:s.label},null,8,["value"])):x("",!0),e("ul",{class:W(n.value.listClass)},[(t(!0),o(Q,null,ee(a.value,(_,C)=>(t(),o("li",{key:C,class:W(n.value.itemClass)},[s.density==="notes"?(t(),B(E(na),{key:0,class:"h4 w-4",onClick:b=>f(C)},null,8,["onClick"])):x("",!0),c(pe,{modelValue:_.name,"onUpdate:modelValue":b=>_.name=b,type:"text",class:W(["flex-1",n.value.inputClass]),placeholder:C===a.value.length-1?s.placeholder:"",onInput:b=>v(C),onKeyup:Ue(ma(b=>l(C),["prevent"]),["enter"]),ref_for:!0,ref:b=>{b&&(w.value[C]=b)}},null,8,["modelValue","onUpdate:modelValue","class","placeholder","onInput","onKeyup"]),a.value.length>1&&s.density!=="notes"?(t(),B(Qe,{key:1,type:"button",onClick:b=>f(C)},{default:A(()=>[c(E(na),{class:"h-4 w-4"})]),_:2},1032,["onClick"])):x("",!0)],2))),128))],2)]))}},_i={key:0,class:"text-center py-8 text-gray-500"},Ti={key:1,class:"text-center py-8 text-red-600"},Mi={key:2,class:"space-y-6"},Gi={class:"bg-gray-50 p-4 rounded-lg shadow-sm"},Ci={class:"text-xl font-bold text-gray-900 mb-2"},$i={class:"flex items-center space-x-2 text-sm text-gray-600 mb-4"},Si={key:0,class:"text-indigo-600 font-medium"},Pi={key:1,class:"text-purple-600 font-medium"},Ei={class:"text-gray-700 leading-relaxed"},ji={class:"mt-4 flex flex-wrap gap-2"},Ii={key:0,class:"text-xs text-gray-500 mt-1"},Di={key:0,class:"bg-yellow-50 border-l-4 border-red-400 p-4 rounded-lg shadow-sm"},Bi={class:"flex items-center"},Ni={class:"ml-3"},Vi={class:"mt-2 text-sm text-yellow-700"},Li={key:1,class:"bg-amber-50 border-l-4 border-amber-400 p-4 rounded-lg shadow-sm"},Ui={class:"flex items-start"},zi={class:"ml-3"},Ri={class:"mt-1 text-sm text-amber-700"},Fi={key:0},Oi={class:"font-medium"},Ki={class:"space-y-4 p-4 bg-white rounded-lg shadow-sm mb-4"},Hi={class:"flex justify-between items-center border-b pb-2 mb-4"},qi={key:0},Wi={key:1},Ji={key:0,class:"mb-4"},Yi={class:"flex justify-end mt-4"},Zi={key:2,class:"text-gray-500 text-sm py-2"},Qi={class:"space-y-4 p-4 bg-white rounded-lg shadow-sm"},Xi={class:"flex items-center justify-between py-2 border-b border-gray-100"},er={class:"flex-1 text-right"},ar={key:0,class:"text-xs text-gray-400 ml-1"},tr={key:1,class:"flex items-center space-x-2"},lr={class:"flex items-center justify-between py-2 border-b border-gray-100"},sr={class:"flex-1 text-right"},or={key:1,class:"flex items-center space-x-2"},ir={class:"flex items-center justify-between py-2 border-b border-gray-100"},rr={class:"flex-1 text-right"},nr={key:0,class:"text-xs text-gray-400 ml-1"},ur={key:1,class:"flex items-center space-x-2"},dr={class:"flex items-center justify-between py-2 border-b border-gray-100"},cr={class:"text-gray-700"},mr={class:"flex items-start py-2 border-b border-gray-100"},vr={class:"flex-1 flex flex-wrap gap-2"},pr={key:0,class:"text-gray-500 text-sm"},fr={class:"bg-white p-4 rounded-lg shadow-sm"},gr={class:"mb-4 border-b pb-3 flex flex-col gap-3"},br={class:"flex items-center justify-between"},hr={class:"flex items-center gap-2"},yr=["disabled"],kr={key:0,class:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},wr={class:"flex items-center gap-3"},Ar={class:"relative inline-flex items-center px-4 py-2 rounded-md border border-dashed border-indigo-300 text-indigo-700 bg-indigo-50 hover:bg-indigo-100 cursor-pointer transition"},xr=["disabled"],_r={key:0,class:"flex flex-wrap gap-2"},Tr=["title"],Mr=["onClick"],Gr={key:0,class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3"},Cr={key:1,class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3"},$r={class:"aspect-video bg-gray-50 flex items-center justify-center overflow-hidden"},Sr=["src","alt","onClick"],Pr=["onClick"],Er={class:"p-2 flex items-center justify-between"},jr=["title","onClick"],Ir=["onClick"],Dr={key:2,class:"text-sm text-gray-500"},Br={class:"bg-white p-4 rounded-lg shadow-sm"},Nr={class:"flex justify-between items-center mb-4 border-b pb-2"},Vr={key:0,class:"space-y-3"},Lr={class:"text-sm text-gray-700"},Ur={class:"text-xs text-gray-500 mt-1"},zr={key:1,class:"text-gray-500 text-sm py-2"},Rr={class:"bg-white p-4 rounded-lg shadow-sm"},Fr={key:3,class:"text-center py-8 text-gray-500"},Or={key:4,class:"mt-4 flex flex-col items-center"},Kr={key:0,class:"text-xs text-red-500 mt-1"},Hr={class:"p-6"},qr={class:"mb-4"},Wr={class:"flex justify-end space-x-3"},Jr={class:"p-4 sm:p-6 w-full max-w-4xl"},Yr={class:"flex justify-between items-center mb-3"},Zr=["title"],Qr={class:"bg-black/5 rounded-lg overflow-hidden",style:{"min-height":"320px"}},Xr=["src"],en=["src"],an={key:2,class:"p-6 text-center text-gray-700"},tn=["href"],ln={key:3,class:"p-6 text-center text-gray-500"},sn={__name:"TaskDetailSidebar",props:{taskId:{type:Number,required:!0},projectId:{type:Number,required:!0},projectUsers:{type:Array,default:()=>[]}},emits:["close","task-updated","task-deleted"],setup(s,{emit:r}){const i=s,u=r,a=G(null),w=G(!0),d=G(""),f=G(!1),v=G(!1),l=G(!1),n=G(null),m=G(null),p=G(null),_=G([]),C=G(!1),b=G([]),q=G(!1),V=G(!1),k=G([]),y=async()=>{if(i.taskId){q.value=!0;try{const $=await window.axios.get("/api/files",{params:{model_type:"Task",model_id:i.taskId}});b.value=$.data||[]}catch($){console.error("Error fetching task files",$)}finally{q.value=!1}}},S=$=>{k.value=Array.from($.target.files||[])},L=async()=>{if(!k.value.length)return;V.value=!0;const $=new FormData;k.value.forEach((g,re)=>$.append(`files[${re}]`,g)),$.append("model_type","Task"),$.append("model_id",i.taskId);try{await window.axios.post("/api/files",$,{headers:{"Content-Type":"multipart/form-data"}}),me("Files uploaded"),k.value=[],await y()}catch(g){console.error("Upload failed",g),oe("Failed to upload files")}finally{V.value=!1}},z=async $=>{if(await Ra(`Delete file "${$.filename}"?`,{confirmText:"Delete",cancelText:"Cancel",type:"warning"}))try{await window.axios.delete(`/api/files/${$.id}`),me("File deleted"),await y()}catch(re){console.error("Delete failed",re),oe("Failed to delete file")}},Y=G(!1),P=G(null),j=$=>{P.value=$,Y.value=!0},R=()=>{Y.value=!1,P.value=null},D=$=>$?$.thumbnail_url?$.thumbnail_url:$.mime_type&&$.mime_type.includes("image")&&$.path_url?$.path_url:null:null,h=$=>{if(!$)return{type:"none"};const g=$.path_url||null,re=($.mime_type||"").toLowerCase();return g?re.includes("image")?{type:"image",src:g}:re.includes("pdf")||re.includes("text")||re.includes("html")?{type:"iframe",src:g}:{type:"external_link",url:g}:{type:"none"}},M=K(()=>h(P.value)),U=[{value:"low",label:"Low"},{value:"medium",label:"Medium"},{value:"high",label:"High"}],N=G(!1),H=G(!1),O=G([{name:"",completed:!1}]),se=G(!1),ye=async()=>{w.value=!0,d.value="";try{const $=await window.axios.get(`/api/tasks/${i.taskId}`);a.value=$.data,n.value=a.value.assigned_to_id||null,m.value=a.value.due_date||null,p.value=a.value.priority||"medium",ke()}catch($){d.value="Failed to load task details.",console.error("Error fetching task details:",$)}finally{w.value=!1}},ke=async()=>{C.value=!0;try{const $=await window.axios.get("/api/activities",{params:{subject_type:"App\\Models\\Task",subject_id:i.taskId}});_.value=$.data}catch($){console.error("Error fetching task activities:",$)}finally{C.value=!1}};ie(()=>i.taskId,$=>{$?(ye(),y()):(a.value=null,b.value=[])},{immediate:!0});const ha=K(()=>i.projectUsers.map($=>({value:$.id,label:$.name}))),ya=async()=>{if(!a.value||n.value===a.value.assigned_to_id){f.value=!1;return}try{const $=await window.axios.patch(`/api/tasks/${a.value.id}`,{assigned_to_user_id:n.value});a.value=$.data,u("task-updated",a.value)}catch($){console.error("Error updating assigned user:",$),n.value=a.value.assigned_to_id,oe("Failed to update assigned user. Please try again.")}finally{f.value=!1}},ka=async()=>{if(!a.value||m.value===a.value.due_date){v.value=!1;return}try{const $=await window.axios.patch(`/api/tasks/${a.value.id}`,{due_date:m.value});a.value=$.data,u("task-updated",a.value)}catch($){console.error("Error updating due date:",$),m.value=a.value.due_date,oe("Failed to update due date. Please try again.")}finally{v.value=!1}},wa=async()=>{if(!a.value||p.value===a.value.priority){l.value=!1;return}try{const $=await window.axios.patch(`/api/tasks/${a.value.id}`,{priority:p.value});a.value=$.data,u("task-updated",a.value)}catch($){console.error("Error updating priority:",$),p.value=a.value.priority,oe("Failed to update priority. Please try again.")}finally{l.value=!1}},Aa=()=>{N.value=!0},xa=()=>{ye(),N.value=!1},_a=async()=>{try{await ki(a.value),u("task-deleted",a.value.id),u("close")}catch($){console.error("Error deleting task:",$)}},Ta=async()=>{try{a.value=await vi(a.value),u("task-updated",a.value),ke()}catch($){console.error("Error starting task:",$)}},Ma=async()=>{try{a.value=await pi(a.value),u("task-updated",a.value),ke()}catch($){console.error("Error pausing task:",$)}},Ga=async()=>{try{a.value=await fi(a.value),u("task-updated",a.value),ke()}catch($){console.error("Error resuming task:",$)}},Ca=async()=>{try{a.value=await gi(a.value),u("task-updated",a.value),ke()}catch($){console.error("Error completing task:",$)}},$a=async()=>{try{a.value=await yi(a.value),u("task-updated",a.value),ke()}catch($){console.error("Error revising task:",$)}},Sa=()=>{var $;H.value=!H.value,H.value&&(($=a.value.details)!=null&&$.checklist&&a.value.details.checklist.length>0?(O.value=JSON.parse(JSON.stringify(a.value.details.checklist)),O.value[O.value.length-1].name!==""&&O.value.push({name:"",completed:!1})):O.value=[{name:"",completed:!1}])},Pa=async()=>{if(!se.value){se.value=!0;try{const $=O.value.filter(xe=>xe.name.trim()!==""),g={details:{...a.value.details,checklist:$}},re=await window.axios.patch(`/api/tasks/${a.value.id}`,g);a.value=re.data,H.value=!1,me("Checklist saved successfully"),u("task-updated",a.value)}catch($){console.error("Error saving checklist:",$),oe("Failed to save checklist")}finally{se.value=!1}}},Se=G(!1),Me=G(""),Ea=()=>{Me.value="",Se.value=!0},ja=async()=>{if(!Me.value.trim()){ue("Please provide a reason for blocking the task");return}try{a.value=await bi(a.value,Me.value),me("Task blocked successfully"),u("task-updated",a.value),ke(),Se.value=!1}catch($){console.error("Error blocking task:",$)}},Ia=async()=>{try{a.value=await hi(a.value),u("task-updated",a.value),ke()}catch($){console.error("Error unblocking task:",$)}},Da=K(()=>a.value?wi(a.value.status):""),Ke=K(()=>{var g,re,xe,Pe;if(!_.value||((g=a.value)==null?void 0:g.status)!=="Blocked")return null;const $=_.value.find(Ee=>{var je,Ie;return Ee.event==="updated"&&((Ie=(je=Ee.properties)==null?void 0:je.attributes)==null?void 0:Ie.status)==="Blocked"});return $?(console.log($.properties),{causer:((re=$.causer)==null?void 0:re.name)||"Unknown",reason:((Pe=(xe=$.properties)==null?void 0:xe.attributes)==null?void 0:Pe.block_reason)||"No reason provided."}):null});return($,g)=>{var re,xe,Pe,Ee,je,Ie,ea;return t(),o("div",null,[w.value?(t(),o("div",_i," Loading task details... ")):d.value?(t(),o("div",Ti,I(d.value),1)):a.value?(t(),o("div",Mi,[e("div",Gi,[e("h4",Ci,I(a.value.name),1),e("div",$i,[e("span",{class:W(["px-2 py-1 rounded-full text-xs font-medium",Da.value])},I(a.value.status),3),a.value.task_type?(t(),o("span",Si," | "+I((re=a.value.task_type)==null?void 0:re.name)+" | ",1)):x("",!0),g[14]||(g[14]=e("br",null,null,-1)),(xe=a.value.milestone)!=null&&xe.name?(t(),o("span",Pi,I((Pe=a.value.milestone)==null?void 0:Pe.name),1)):x("",!0)]),e("p",Ei,I(a.value.description||"No description provided."),1),e("div",ji,[a.value.status==="To Do"?(t(),B(ne,{key:0,onClick:Ta,class:"bg-blue-600 hover:bg-blue-700"},{default:A(()=>g[15]||(g[15]=[T(" Start Task ",-1)])),_:1,__:[15]})):a.value.status==="In Progress"?(t(),B(ne,{key:1,onClick:Ma,class:"bg-orange-600 hover:bg-orange-700"},{default:A(()=>g[16]||(g[16]=[T(" Pause Task ",-1)])),_:1,__:[16]})):a.value.status==="Paused"?(t(),B(ne,{key:2,onClick:Ga,class:"bg-blue-600 hover:bg-blue-700"},{default:A(()=>g[17]||(g[17]=[T(" Resume Task ",-1)])),_:1,__:[17]})):a.value.status==="Blocked"?(t(),B(ne,{key:3,onClick:Ia,class:"bg-green-600 hover:bg-green-700"},{default:A(()=>g[18]||(g[18]=[T(" Unblock Task ",-1)])),_:1,__:[18]})):x("",!0),a.value.status==="To Do"||a.value.status==="In Progress"||a.value.status==="Paused"?(t(),B(ne,{key:4,onClick:Ea,class:"bg-red-600 hover:bg-red-700"},{default:A(()=>g[19]||(g[19]=[T(" Block Task ",-1)])),_:1,__:[19]})):x("",!0),a.value.status==="In Progress"?(t(),B(ne,{key:5,onClick:Ca,class:"bg-green-600 hover:bg-green-700"},{default:A(()=>g[20]||(g[20]=[T(" Complete Task ",-1)])),_:1,__:[20]})):x("",!0),a.value.status==="Done"?(t(),B(ne,{key:6,onClick:$a,class:"bg-yellow-600 hover:bg-yellow-700"},{default:A(()=>g[21]||(g[21]=[T(" Revise Task ",-1)])),_:1,__:[21]})):x("",!0)]),a.value.status==="Done"?(t(),o("div",Ii,' Revising will change the task status back to "To Do" ')):x("",!0)]),a.value.status==="Blocked"&&Ke.value?(t(),o("div",Di,[e("div",Bi,[g[23]||(g[23]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.487 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11.75 13a.75.75 0 01-1.5 0v-2.25a.75.75 0 011.5 0V13zm-1.5-7.5a.75.75 0 011.5 0v1.5a.75.75 0 01-1.5 0V5.5z","clip-rule":"evenodd"})])],-1)),e("div",Ni,[g[22]||(g[22]=e("h3",{class:"text-sm font-medium text-yellow-800"},"Task Blocked",-1)),e("div",Vi,[e("p",null,"This task was blocked by **"+I(Ke.value.causer)+"** with the following reason:",1),e("p",null,I(Ke.value.reason),1)])])])])):x("",!0),a.value.needs_approval?(t(),o("div",Li,[e("div",Ui,[g[28]||(g[28]=e("svg",{class:"h-5 w-5 text-amber-500 mt-0.5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.487 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0V9a1 1 0 112 0v4zm-1 4a1.25 1.25 0 100-2.5A1.25 1.25 0 0010 17z","clip-rule":"evenodd"})],-1)),e("div",zi,[g[27]||(g[27]=e("h3",{class:"text-sm font-semibold text-amber-800"},"Approval required",-1)),e("p",Ri,[g[25]||(g[25]=T(" Once completed, this task needs approval",-1)),a.value.creator_name?(t(),o("span",Fi,[g[24]||(g[24]=T(" from ",-1)),e("span",Oi,I(a.value.creator_name),1)])):x("",!0),g[26]||(g[26]=T(". ",-1))])])])])):x("",!0),e("div",Ki,[e("div",Hi,[g[29]||(g[29]=e("h5",{class:"text-lg font-semibold text-gray-800"},"Task Checklist",-1)),e("button",{onClick:Sa,class:"text-indigo-600 hover:text-indigo-800 text-sm font-medium flex items-center"},[H.value?(t(),o("span",Wi,"Cancel")):(t(),o("span",qi,I((Ee=a.value.details)!=null&&Ee.checklist&&a.value.details.checklist.length>0?"Edit Checklist":"Add Checklist"),1))])]),H.value?(t(),o("div",Ji,[c(xi,{modelValue:O.value,"onUpdate:modelValue":g[0]||(g[0]=F=>O.value=F),placeholder:"e.g., Review design, Update documentation",label:"Checklist Items",density:"notes"},null,8,["modelValue"]),e("div",Yi,[c(ne,{onClick:Pa,disabled:se.value,class:"flex items-center space-x-1"},{default:A(()=>[c(E(to),{class:"h-4 w-4"}),g[30]||(g[30]=e("span",null,"Save Checklist",-1))]),_:1,__:[30]},8,["disabled"])])])):x("",!0),(je=a.value.details)!=null&&je.checklist&&a.value.details.checklist.length>0&&!H.value?(t(),B(Qa,{key:1,items:a.value.details.checklist,"api-endpoint":`/api/tasks/${a.value.id}`,title:"Items to complete:","payload-transformer":F=>({details:{...a.value.details,checklist:F}})},null,8,["items","api-endpoint","payload-transformer"])):x("",!0),(!((Ie=a.value.details)!=null&&Ie.checklist)||a.value.details.checklist.length===0)&&!H.value?(t(),o("div",Zi,' No checklist items for this task yet. Click "Add Checklist" to create one. ')):x("",!0)]),e("div",Qi,[g[37]||(g[37]=e("h5",{class:"text-lg font-semibold text-gray-800 border-b pb-2 mb-4"},"Task Attributes",-1)),e("div",Xi,[c(J,{class:"min-w-[100px] text-gray-600"},{default:A(()=>g[31]||(g[31]=[T("Assigned To:",-1)])),_:1,__:[31]}),e("div",er,[f.value?(t(),o("div",tr,[c(ce,{id:"edit-assigned-to",modelValue:n.value,"onUpdate:modelValue":g[2]||(g[2]=F=>n.value=F),options:ha.value,"value-key":"value","label-key":"label",placeholder:"Unassigned",class:"mt-1 flex-1","allow-empty":!0},null,8,["modelValue","options"]),e("button",{onClick:ya,class:"text-green-600 hover:text-green-800 text-sm font-medium"},"Save"),e("button",{onClick:g[3]||(g[3]=F=>f.value=!1),class:"text-gray-600 hover:text-gray-800 text-sm font-medium"},"Cancel")])):(t(),o("div",{key:0,onClick:g[1]||(g[1]=F=>a.value.status!=="Done"?f.value=!0:ue("Cannot change assignment for a completed task. Use the Revise button to change the task status first.")),class:W(["cursor-pointer",{"text-indigo-600 hover:text-indigo-800":a.value.status!=="Done","text-gray-500":a.value.status==="Done"}])},[T(I(((ea=a.value.assigned_to)==null?void 0:ea.name)||"Unassigned")+" ",1),a.value.status!=="Done"?(t(),o("span",ar,"(Click to edit)")):x("",!0)],2))])]),e("div",lr,[c(J,{class:"min-w-[100px] text-gray-600"},{default:A(()=>g[32]||(g[32]=[T("Due Date:",-1)])),_:1,__:[32]}),e("div",sr,[v.value?(t(),o("div",or,[c(pe,{id:"edit-due-date",modelValue:m.value,"onUpdate:modelValue":g[5]||(g[5]=F=>m.value=F),type:"date",class:"mt-1 flex-1"},null,8,["modelValue"]),e("button",{onClick:ka,class:"text-green-600 hover:text-green-800 text-sm font-medium"},"Save"),e("button",{onClick:g[6]||(g[6]=F=>v.value=!1),class:"text-gray-600 hover:text-gray-800 text-sm font-medium"},"Cancel")])):(t(),o("div",{key:0,onClick:g[4]||(g[4]=F=>v.value=!0),class:"cursor-pointer text-indigo-600 hover:text-indigo-800"},[T(I(a.value.due_date?E(Za)(a.value.due_date).format("MMM D, YYYY"):"No Due Date")+" ",1),g[33]||(g[33]=e("span",{class:"text-xs text-gray-400 ml-1"},"(Click to edit)",-1))]))])]),e("div",ir,[c(J,{class:"min-w-[100px] text-gray-600"},{default:A(()=>g[34]||(g[34]=[T("Priority:",-1)])),_:1,__:[34]}),e("div",rr,[l.value?(t(),o("div",ur,[c(ce,{id:"edit-priority",modelValue:p.value,"onUpdate:modelValue":g[8]||(g[8]=F=>p.value=F),options:U,"value-key":"value","label-key":"label",placeholder:"Select priority",class:"mt-1 flex-1"},null,8,["modelValue"]),e("button",{onClick:wa,class:"text-green-600 hover:text-green-800 text-sm font-medium"},"Save"),e("button",{onClick:g[9]||(g[9]=F=>l.value=!1),class:"text-gray-600 hover:text-gray-800 text-sm font-medium"},"Cancel")])):(t(),o("div",{key:0,onClick:g[7]||(g[7]=F=>a.value.status!=="Done"?l.value=!0:ue("Cannot change priority for a completed task. Use the Revise button to change the task status first.")),class:W(["cursor-pointer",{"text-indigo-600 hover:text-indigo-800":a.value.status!=="Done","text-gray-500":a.value.status==="Done"}])},[e("span",{class:W({"text-red-600 font-medium":a.value.priority==="high","text-yellow-600 font-medium":a.value.priority==="medium","text-green-600 font-medium":a.value.priority==="low"})},I(a.value.priority?a.value.priority.charAt(0).toUpperCase()+a.value.priority.slice(1):"Medium"),3),a.value.status!=="Done"?(t(),o("span",nr,"(Click to edit)")):x("",!0)],2))])]),e("div",dr,[c(J,{class:"min-w-[100px] text-gray-600"},{default:A(()=>g[35]||(g[35]=[T("Created:",-1)])),_:1,__:[35]}),e("span",cr,I(a.value.created_at?new Date(a.value.created_at).toLocaleDateString():"N/A"),1)]),e("div",mr,[c(J,{class:"min-w-[100px] text-gray-600 mt-1"},{default:A(()=>g[36]||(g[36]=[T("Tags:",-1)])),_:1,__:[36]}),e("div",vr,[(t(!0),o(Q,null,ee(a.value.tags,F=>(t(),o("span",{key:F.id,class:"inline-flex items-center px-3 py-1 text-sm font-medium bg-indigo-100 text-indigo-800 rounded-full shadow-sm"},I(F.name),1))),128)),!a.value.tags||a.value.tags.length===0?(t(),o("span",pr,"No tags")):x("",!0)])])]),e("div",fr,[e("div",gr,[e("div",br,[g[39]||(g[39]=e("h5",{class:"text-lg font-semibold text-gray-800"},"Files",-1)),e("div",hr,[e("button",{type:"button",class:"inline-flex items-center px-4 py-2 rounded-md bg-indigo-600 text-white hover:bg-indigo-700 transition disabled:opacity-60 disabled:cursor-not-allowed",disabled:V.value||k.value.length===0,onClick:L},[V.value?(t(),o("svg",kr,g[38]||(g[38]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"},null,-1)]))):x("",!0),e("span",null,I(V.value?"Uploading...":"Upload"),1)],8,yr)])]),e("div",wr,[e("label",Ar,[g[40]||(g[40]=e("svg",{class:"h-5 w-5 mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1M4 12l1.5-1.5M20 12l-1.5-1.5M12 4v12"})],-1)),g[41]||(g[41]=e("span",{class:"font-medium"},"Choose Files",-1)),e("input",{class:"absolute inset-0 opacity-0 cursor-pointer",type:"file",multiple:"",onChange:S,disabled:V.value},null,40,xr)]),g[42]||(g[42]=e("p",{class:"text-xs text-gray-500"},"You can select multiple files. Images, PDFs, Docs are supported.",-1))]),k.value.length?(t(),o("div",_r,[(t(!0),o(Q,null,ee(k.value,(F,Ge)=>(t(),o("span",{key:Ge,class:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-gray-100 text-gray-800 text-xs"},[g[43]||(g[43]=e("svg",{class:"h-4 w-4 text-indigo-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})],-1)),e("span",{class:"max-w-[160px] truncate",title:F.name},I(F.name),9,Tr),e("button",{type:"button",class:"text-gray-500 hover:text-red-600",onClick:An=>k.value=k.value.filter((xn,Ba)=>Ba!==Ge)},"×",8,Mr)]))),128))])):x("",!0)]),e("div",null,[q.value?(t(),o("div",Gr,[(t(),o(Q,null,ee(6,F=>e("div",{key:F,class:"h-28 bg-gray-100 rounded animate-pulse"})),64))])):b.value.length>0?(t(),o("div",Cr,[(t(!0),o(Q,null,ee(b.value,F=>(t(),o("div",{key:F.id,class:"group relative rounded-lg border border-gray-200 overflow-hidden bg-white shadow-sm hover:shadow-md transition"},[e("div",$r,[D(F)?(t(),o("img",{key:0,src:D(F),alt:F.filename,class:"object-cover w-full h-full",onClick:Ge=>j(F)},null,8,Sr)):(t(),o("div",{key:1,class:"text-gray-400",onClick:Ge=>j(F)},g[44]||(g[44]=[e("svg",{class:"h-10 w-10",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})],-1)]),8,Pr))]),e("div",Er,[e("button",{class:"text-xs text-blue-600 hover:underline truncate max-w-[70%] text-left",title:F.filename,onClick:Ge=>j(F)},I(F.filename),9,jr),e("button",{class:"text-red-600 hover:text-red-800 text-xs",onClick:Ge=>z(F)},"Delete",8,Ir)])]))),128))])):(t(),o("div",Dr,"No files attached."))])]),e("div",Br,[e("div",Nr,[g[46]||(g[46]=e("h5",{class:"text-lg font-semibold text-gray-800"},"Notes",-1)),c(ne,{onClick:Aa,class:"bg-indigo-600 hover:bg-indigo-700 transition-colors"},{default:A(()=>g[45]||(g[45]=[T(" Add Note ",-1)])),_:1,__:[45]})]),a.value.notes&&a.value.notes.length>0?(t(),o("div",Vr,[(t(!0),o(Q,null,ee(a.value.notes,F=>(t(),o("div",{key:F.id,class:"p-3 bg-gray-50 rounded-md"},[e("p",Lr,I(F.content),1),e("p",Ur," By "+I(F.creator_name||"Unknown")+" on "+I(new Date(F.created_at).toLocaleDateString()),1)]))),128))])):(t(),o("div",zr,"No notes for this task yet."))]),e("div",Rr,[g[47]||(g[47]=e("h5",{class:"text-lg font-semibold text-gray-800 border-b pb-2 mb-4"},"History",-1)),c(mi,{activities:_.value,loading:C.value},null,8,["activities","loading"])])])):(t(),o("div",Fr," Select a task to view details. ")),a.value&&a.value.status!=="Done"?(t(),o("div",Or,[c(Qe,{onClick:_a,disabled:a.value.status!=="To Do"},{default:A(()=>g[48]||(g[48]=[T(" Delete Task ",-1)])),_:1,__:[48]},8,["disabled"]),a.value.status!=="To Do"?(t(),o("p",Kr,"Task can only be deleted in 'To Do' status.")):x("",!0)])):x("",!0),c(ti,{show:N.value,"task-for-note":a.value,onClose:g[10]||(g[10]=F=>N.value=!1),onNoteAdded:xa},null,8,["show","task-for-note"]),c(Ye,{show:Se.value,onClose:g[13]||(g[13]=F=>Se.value=!1)},{default:A(()=>[e("div",Hr,[g[52]||(g[52]=e("h2",{class:"text-lg font-medium text-gray-900 mb-4"}," Block Task ",-1)),e("div",qr,[g[49]||(g[49]=e("p",{class:"text-sm text-gray-600 mb-2"}," Please provide a reason for blocking this task: ",-1)),ae(e("textarea",{"onUpdate:modelValue":g[11]||(g[11]=F=>Me.value=F),class:"w-full rounded-md shadow-sm border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",rows:"3",placeholder:"Enter reason for blocking..."},null,512),[[ve,Me.value]])]),e("div",Wr,[c(Re,{onClick:g[12]||(g[12]=F=>Se.value=!1)},{default:A(()=>g[50]||(g[50]=[T(" Cancel ",-1)])),_:1,__:[50]}),c(ne,{onClick:ja,disabled:!Me.value.trim(),class:"bg-red-600 hover:bg-red-700"},{default:A(()=>g[51]||(g[51]=[T(" Block Task ",-1)])),_:1,__:[51]},8,["disabled"])])])]),_:1},8,["show"]),c(Ye,{show:Y.value,onClose:R},{default:A(()=>[e("div",Jr,[e("div",Yr,[e("h3",{class:"text-lg font-semibold text-gray-800 truncate",title:P.value&&P.value.filename?P.value.filename:""},I(P.value&&P.value.filename?P.value.filename:"Preview"),9,Zr),e("button",{class:"text-gray-500 hover:text-gray-700",onClick:R},"✕")]),e("div",Qr,[T(I(M.value.type)+" ",1),M.value.type==="iframe"?(t(),o("iframe",{key:0,src:M.value.src,class:"w-full h-[70vh]",frameborder:"0",allow:"autoplay; encrypted-media",allowfullscreen:""},null,8,Xr)):M.value.type==="image"?(t(),o("img",{key:1,src:M.value.src,alt:"Preview",class:"w-full h-auto"},null,8,en)):M.value.type==="external_link"?(t(),o("div",an,[g[53]||(g[53]=e("p",null,"This file can't be embedded. You can open it using the link below:",-1)),e("a",{href:M.value.url,target:"_blank",class:"text-indigo-600 hover:underline break-all"},I(M.value.url),9,tn)])):(t(),o("div",ln,"No preview available."))])])]),_:1},8,["show"])])}}},on={key:1,class:"p-4 text-gray-500"},rn={key:0,class:"flex justify-end space-x-3"},nn={__name:"TaskSidebar",emits:["taskUpdated","taskDeleted"],setup(s){const r=G(null);return(i,u)=>(t(),B(ba,{show:E(we).show,"onUpdate:show":E(He),title:E(we).taskId?"Task Details":"Details",initialWidth:50},{content:A(()=>[E(we).taskId?(t(),B(sn,{key:0,"task-id":E(we).taskId,"project-id":E(we).projectId,"project-users":E(we).projectUsers,ref_key:"taskDetailSidebarRef",ref:r,onClose:E(He),onTaskUpdated:u[0]||(u[0]=a=>{i.$emit("taskUpdated",a)}),onTaskDeleted:u[1]||(u[1]=a=>{i.$emit("taskDeleted",a),E(He)()})},null,8,["task-id","project-id","project-users","onClose"])):E(we).show?(t(),o("div",on," No task selected or task ID is missing. ")):x("",!0)]),footer:A(()=>[E(we).taskId?(t(),o("div",rn,[r.value&&r.value.task&&r.value.task.status!=="In Progress"&&r.value.task.status!=="Done"?(t(),B(Re,{key:0,onClick:r.value.startTask,class:"bg-blue-50 text-blue-700 hover:bg-blue-100"},{default:A(()=>u[2]||(u[2]=[T(" Start Task ",-1)])),_:1,__:[2]},8,["onClick"])):x("",!0),r.value&&r.value.task&&r.value.task.status==="In Progress"?(t(),B(Re,{key:1,onClick:r.value.completeTask,class:"bg-green-50 text-green-700 hover:bg-green-100"},{default:A(()=>u[3]||(u[3]=[T(" Complete Task ",-1)])),_:1,__:[3]},8,["onClick"])):x("",!0),r.value&&r.value.task?(t(),B(Qe,{key:2,onClick:r.value.deleteTask,class:"bg-red-50 text-red-700 hover:bg-red-100"},{default:A(()=>u[4]||(u[4]=[T(" Delete Task ",-1)])),_:1,__:[4]},8,["onClick"])):x("",!0)])):x("",!0)]),_:1},8,["show","onUpdate:show","title"]))}},qe=G(!1),Be=G([]),We=G(!1);function un(){const s=async()=>{var u;try{const a=await X.get("/api/notices/unread");Be.value=((u=a.data)==null?void 0:u.data)||[],qe.value=Be.value.length>0}catch(a){console.error("Failed to fetch unread notices",a)}},r=async()=>{if(We.value)try{const u=Be.value.map(a=>a.id);if(u.length===0)return;await X.post("/api/notices/acknowledge",{notice_ids:u}),i()}catch(u){console.error("Failed to acknowledge notices",u)}},i=()=>{qe.value=!1,Be.value=[],We.value=!1};return fe(()=>{s()}),fa(()=>{}),{showNoticeModal:qe,unreadNotices:Be,acknowledgeChecked:We,fetchUnreadNotices:s,acknowledgeNotices:r,closeModal:i}}const dn={class:"mb-4"},cn={__name:"TimezoneSelect",props:{modelValue:{type:String,default:null},label:{type:String,default:"Timezone"},placeholder:{type:String,default:"Select a timezone"},disabled:{type:Boolean,default:!1},required:{type:Boolean,default:!1},error:{type:String,default:""}},emits:["update:modelValue","change"],setup(s,{emit:r}){const i=s,u=r,a=K(()=>[{value:"Africa/Abidjan",label:"Africa/Abidjan (GMT+00:00)"},{value:"Africa/Accra",label:"Africa/Accra (GMT+00:00)"},{value:"Africa/Addis_Ababa",label:"Africa/Addis_Ababa (GMT+03:00)"},{value:"Africa/Algiers",label:"Africa/Algiers (GMT+01:00)"},{value:"Africa/Asmara",label:"Africa/Asmara (GMT+03:00)"},{value:"Africa/Bamako",label:"Africa/Bamako (GMT+00:00)"},{value:"Africa/Bangui",label:"Africa/Bangui (GMT+01:00)"},{value:"Africa/Banjul",label:"Africa/Banjul (GMT+00:00)"},{value:"Africa/Bissau",label:"Africa/Bissau (GMT+00:00)"},{value:"Africa/Blantyre",label:"Africa/Blantyre (GMT+02:00)"},{value:"Africa/Brazzaville",label:"Africa/Brazzaville (GMT+01:00)"},{value:"Africa/Bujumbura",label:"Africa/Bujumbura (GMT+02:00)"},{value:"Africa/Cairo",label:"Africa/Cairo (GMT+02:00)"},{value:"Africa/Casablanca",label:"Africa/Casablanca (GMT+01:00)"},{value:"Africa/Ceuta",label:"Africa/Ceuta (GMT+01:00)"},{value:"Africa/Conakry",label:"Africa/Conakry (GMT+00:00)"},{value:"Africa/Dakar",label:"Africa/Dakar (GMT+00:00)"},{value:"Africa/Dar_es_Salaam",label:"Africa/Dar_es_Salaam (GMT+03:00)"},{value:"Africa/Djibouti",label:"Africa/Djibouti (GMT+03:00)"},{value:"Africa/Douala",label:"Africa/Douala (GMT+01:00)"},{value:"Africa/El_Aaiun",label:"Africa/El_Aaiun (GMT+01:00)"},{value:"Africa/Freetown",label:"Africa/Freetown (GMT+00:00)"},{value:"Africa/Gaborone",label:"Africa/Gaborone (GMT+02:00)"},{value:"Africa/Harare",label:"Africa/Harare (GMT+02:00)"},{value:"Africa/Johannesburg",label:"Africa/Johannesburg (GMT+02:00)"},{value:"Africa/Juba",label:"Africa/Juba (GMT+03:00)"},{value:"Africa/Kampala",label:"Africa/Kampala (GMT+03:00)"},{value:"Africa/Khartoum",label:"Africa/Khartoum (GMT+02:00)"},{value:"Africa/Kigali",label:"Africa/Kigali (GMT+02:00)"},{value:"Africa/Kinshasa",label:"Africa/Kinshasa (GMT+01:00)"},{value:"Africa/Lagos",label:"Africa/Lagos (GMT+01:00)"},{value:"Africa/Libreville",label:"Africa/Libreville (GMT+01:00)"},{value:"Africa/Lome",label:"Africa/Lome (GMT+00:00)"},{value:"Africa/Luanda",label:"Africa/Luanda (GMT+01:00)"},{value:"Africa/Lubumbashi",label:"Africa/Lubumbashi (GMT+02:00)"},{value:"Africa/Lusaka",label:"Africa/Lusaka (GMT+02:00)"},{value:"Africa/Malabo",label:"Africa/Malabo (GMT+01:00)"},{value:"Africa/Maputo",label:"Africa/Maputo (GMT+02:00)"},{value:"Africa/Maseru",label:"Africa/Maseru (GMT+02:00)"},{value:"Africa/Mbabane",label:"Africa/Mbabane (GMT+02:00)"},{value:"Africa/Mogadishu",label:"Africa/Mogadishu (GMT+03:00)"},{value:"Africa/Monrovia",label:"Africa/Monrovia (GMT+00:00)"},{value:"Africa/Nairobi",label:"Africa/Nairobi (GMT+03:00)"},{value:"Africa/Ndjamena",label:"Africa/Ndjamena (GMT+01:00)"},{value:"Africa/Niamey",label:"Africa/Niamey (GMT+01:00)"},{value:"Africa/Nouakchott",label:"Africa/Nouakchott (GMT+00:00)"},{value:"Africa/Ouagadougou",label:"Africa/Ouagadougou (GMT+00:00)"},{value:"Africa/Porto-Novo",label:"Africa/Porto-Novo (GMT+01:00)"},{value:"Africa/Sao_Tome",label:"Africa/Sao_Tome (GMT+00:00)"},{value:"Africa/Tripoli",label:"Africa/Tripoli (GMT+02:00)"},{value:"Africa/Tunis",label:"Africa/Tunis (GMT+01:00)"},{value:"Africa/Windhoek",label:"Africa/Windhoek (GMT+02:00)"},{value:"America/Adak",label:"America/Adak (GMT-10:00)"},{value:"America/Anchorage",label:"America/Anchorage (GMT-09:00)"},{value:"America/Anguilla",label:"America/Anguilla (GMT-04:00)"},{value:"America/Antigua",label:"America/Antigua (GMT-04:00)"},{value:"America/Araguaina",label:"America/Araguaina (GMT-03:00)"},{value:"America/Argentina/Buenos_Aires",label:"America/Argentina/Buenos_Aires (GMT-03:00)"},{value:"America/Argentina/Catamarca",label:"America/Argentina/Catamarca (GMT-03:00)"},{value:"America/Argentina/Cordoba",label:"America/Argentina/Cordoba (GMT-03:00)"},{value:"America/Argentina/Jujuy",label:"America/Argentina/Jujuy (GMT-03:00)"},{value:"America/Argentina/La_Rioja",label:"America/Argentina/La_Rioja (GMT-03:00)"},{value:"America/Argentina/Mendoza",label:"America/Argentina/Mendoza (GMT-03:00)"},{value:"America/Argentina/Rio_Gallegos",label:"America/Argentina/Rio_Gallegos (GMT-03:00)"},{value:"America/Argentina/Salta",label:"America/Argentina/Salta (GMT-03:00)"},{value:"America/Argentina/San_Juan",label:"America/Argentina/San_Juan (GMT-03:00)"},{value:"America/Argentina/San_Luis",label:"America/Argentina/San_Luis (GMT-03:00)"},{value:"America/Argentina/Tucuman",label:"America/Argentina/Tucuman (GMT-03:00)"},{value:"America/Argentina/Ushuaia",label:"America/Argentina/Ushuaia (GMT-03:00)"},{value:"America/Aruba",label:"America/Aruba (GMT-04:00)"},{value:"America/Asuncion",label:"America/Asuncion (GMT-04:00)"},{value:"America/Atikokan",label:"America/Atikokan (GMT-05:00)"},{value:"America/Bahia",label:"America/Bahia (GMT-03:00)"},{value:"America/Bahia_Banderas",label:"America/Bahia_Banderas (GMT-06:00)"},{value:"America/Barbados",label:"America/Barbados (GMT-04:00)"},{value:"America/Belem",label:"America/Belem (GMT-03:00)"},{value:"America/Belize",label:"America/Belize (GMT-06:00)"},{value:"America/Blanc-Sablon",label:"America/Blanc-Sablon (GMT-04:00)"},{value:"America/Boa_Vista",label:"America/Boa_Vista (GMT-04:00)"},{value:"America/Bogota",label:"America/Bogota (GMT-05:00)"},{value:"America/Boise",label:"America/Boise (GMT-06:00)"},{value:"America/Cambridge_Bay",label:"America/Cambridge_Bay (GMT-06:00)"},{value:"America/Campo_Grande",label:"America/Campo_Grande (GMT-04:00)"},{value:"America/Cancun",label:"America/Cancun (GMT-05:00)"},{value:"America/Caracas",label:"America/Caracas (GMT-04:00)"},{value:"America/Cayenne",label:"America/Cayenne (GMT-03:00)"},{value:"America/Cayman",label:"America/Cayman (GMT-05:00)"},{value:"America/Chicago",label:"America/Chicago (GMT-05:00)"},{value:"America/Chihuahua",label:"America/Chihuahua (GMT-06:00)"},{value:"America/Ciudad_Juarez",label:"America/Ciudad_Juarez (GMT-06:00)"},{value:"America/Costa_Rica",label:"America/Costa_Rica (GMT-06:00)"},{value:"America/Creston",label:"America/Creston (GMT-07:00)"},{value:"America/Cuiaba",label:"America/Cuiaba (GMT-04:00)"},{value:"America/Curacao",label:"America/Curacao (GMT-04:00)"},{value:"America/Danmarkshavn",label:"America/Danmarkshavn (GMT+00:00)"},{value:"America/Dawson",label:"America/Dawson (GMT-07:00)"},{value:"America/Dawson_Creek",label:"America/Dawson_Creek (GMT-07:00)"},{value:"America/Denver",label:"America/Denver (GMT-06:00)"},{value:"America/Detroit",label:"America/Detroit (GMT-04:00)"},{value:"America/Dominica",label:"America/Dominica (GMT-04:00)"},{value:"America/Edmonton",label:"America/Edmonton (GMT-06:00)"},{value:"America/Eirunepe",label:"America/Eirunepe (GMT-05:00)"},{value:"America/El_Salvador",label:"America/El_Salvador (GMT-06:00)"},{value:"America/Fort_Nelson",label:"America/Fort_Nelson (GMT-07:00)"},{value:"America/Fortaleza",label:"America/Fortaleza (GMT-03:00)"},{value:"America/Glace_Bay",label:"America/Glace_Bay (GMT-03:00)"},{value:"America/Goose_Bay",label:"America/Goose_Bay (GMT-03:00)"},{value:"America/Grand_Turk",label:"America/Grand_Turk (GMT-04:00)"},{value:"America/Grenada",label:"America/Grenada (GMT-04:00)"},{value:"America/Guadeloupe",label:"America/Guadeloupe (GMT-04:00)"},{value:"America/Guatemala",label:"America/Guatemala (GMT-06:00)"},{value:"America/Guayaquil",label:"America/Guayaquil (GMT-05:00)"},{value:"America/Guyana",label:"America/Guyana (GMT-04:00)"},{value:"America/Halifax",label:"America/Halifax (GMT-03:00)"},{value:"America/Havana",label:"America/Havana (GMT-04:00)"},{value:"America/Hermosillo",label:"America/Hermosillo (GMT-07:00)"},{value:"America/Indiana/Indianapolis",label:"America/Indiana/Indianapolis (GMT-04:00)"},{value:"America/Indiana/Knox",label:"America/Indiana/Knox (GMT-05:00)"},{value:"America/Indiana/Marengo",label:"America/Indiana/Marengo (GMT-04:00)"},{value:"America/Indiana/Petersburg",label:"America/Indiana/Petersburg (GMT-04:00)"},{value:"America/Indiana/Vevay",label:"America/Indiana/Vevay (GMT-04:00)"},{value:"America/Indiana/Vincennes",label:"America/Indiana/Vincennes (GMT-04:00)"},{value:"America/Indiana/Winamac",label:"America/Indiana/Winamac (GMT-04:00)"},{value:"America/Inuvik",label:"America/Inuvik (GMT-06:00)"},{value:"America/Iqaluit",label:"America/Iqaluit (GMT-04:00)"},{value:"America/Jamaica",label:"America/Jamaica (GMT-05:00)"},{value:"America/Juneau",label:"America/Juneau (GMT-08:00)"},{value:"America/Kentucky/Louisville",label:"America/Kentucky/Louisville (GMT-04:00)"},{value:"America/Kentucky/Monticello",label:"America/Kentucky/Monticello (GMT-04:00)"},{value:"America/La_Paz",label:"America/La_Paz (GMT-04:00)"},{value:"America/Lima",label:"America/Lima (GMT-05:00)"},{value:"America/Los_Angeles",label:"America/Los_Angeles (GMT-07:00)"},{value:"America/Lower_Princes",label:"America/Lower_Princes (GMT-04:00)"},{value:"America/Maceio",label:"America/Maceio (GMT-03:00)"},{value:"America/Managua",label:"America/Managua (GMT-06:00)"},{value:"America/Manaus",label:"America/Manaus (GMT-04:00)"},{value:"America/Marigot",label:"America/Marigot (GMT-04:00)"},{value:"America/Martinique",label:"America/Martinique (GMT-04:00)"},{value:"America/Matamoros",label:"America/Matamoros (GMT-05:00)"},{value:"America/Mazatlan",label:"America/Mazatlan (GMT-06:00)"},{value:"America/Menominee",label:"America/Menominee (GMT-05:00)"},{value:"America/Merida",label:"America/Merida (GMT-05:00)"},{value:"America/Metlakatla",label:"America/Metlakatla (GMT-08:00)"},{value:"America/Mexico_City",label:"America/Mexico_City (GMT-05:00)"},{value:"America/Miquelon",label:"America/Miquelon (GMT-02:00)"},{value:"America/Moncton",label:"America/Moncton (GMT-03:00)"},{value:"America/Monterrey",label:"America/Monterrey (GMT-05:00)"},{value:"America/Montevideo",label:"America/Montevideo (GMT-03:00)"},{value:"America/Montserrat",label:"America/Montserrat (GMT-04:00)"},{value:"America/Nassau",label:"America/Nassau (GMT-04:00)"},{value:"America/New_York",label:"America/New_York (GMT-04:00)"},{value:"America/Nome",label:"America/Nome (GMT-08:00)"},{value:"America/Noronha",label:"America/Noronha (GMT-02:00)"},{value:"America/North_Dakota/Beulah",label:"America/North_Dakota/Beulah (GMT-05:00)"},{value:"America/North_Dakota/Center",label:"America/North_Dakota/Center (GMT-05:00)"},{value:"America/North_Dakota/New_Salem",label:"America/North_Dakota/New_Salem (GMT-05:00)"},{value:"America/Nuuk",label:"America/Nuuk (GMT-02:00)"},{value:"America/Ojinaga",label:"America/Ojinaga (GMT-06:00)"},{value:"America/Panama",label:"America/Panama (GMT-05:00)"},{value:"America/Paramaribo",label:"America/Paramaribo (GMT-03:00)"},{value:"America/Phoenix",label:"America/Phoenix (GMT-07:00)"},{value:"America/Port-au-Prince",label:"America/Port-au-Prince (GMT-04:00)"},{value:"America/Port_of_Spain",label:"America/Port_of_Spain (GMT-04:00)"},{value:"America/Puerto_Rico",label:"America/Puerto_Rico (GMT-04:00)"},{value:"America/Punta_Arenas",label:"America/Punta_Arenas (GMT-03:00)"},{value:"America/Rankin_Inlet",label:"America/Rankin_Inlet (GMT-05:00)"},{value:"America/Recife",label:"America/Recife (GMT-03:00)"},{value:"America/Regina",label:"America/Regina (GMT-06:00)"},{value:"America/Resolute",label:"America/Resolute (GMT-05:00)"},{value:"America/Rio_Branco",label:"America/Rio_Branco (GMT-05:00)"},{value:"America/Santarem",label:"America/Santarem (GMT-03:00)"},{value:"America/Santiago",label:"America/Santiago (GMT-04:00)"},{value:"America/Santo_Domingo",label:"America/Santo_Domingo (GMT-04:00)"},{value:"America/Sao_Paulo",label:"America/Sao_Paulo (GMT-03:00)"},{value:"America/Scoresbysund",label:"America/Scoresbysund (GMT+00:00)"},{value:"America/Sitka",label:"America/Sitka (GMT-08:00)"},{value:"America/St_Barthelemy",label:"America/St_Barthelemy (GMT-04:00)"},{value:"America/St_Johns",label:"America/St_Johns (GMT-02:30)"},{value:"America/St_Kitts",label:"America/St_Kitts (GMT-04:00)"},{value:"America/St_Lucia",label:"America/St_Lucia (GMT-04:00)"},{value:"America/St_Thomas",label:"America/St_Thomas (GMT-04:00)"},{value:"America/St_Vincent",label:"America/St_Vincent (GMT-04:00)"},{value:"America/Swift_Current",label:"America/Swift_Current (GMT-06:00)"},{value:"America/Tegucigalpa",label:"America/Tegucigalpa (GMT-06:00)"},{value:"America/Thule",label:"America/Thule (GMT-03:00)"},{value:"America/Tijuana",label:"America/Tijuana (GMT-07:00)"},{value:"America/Toronto",label:"America/Toronto (GMT-04:00)"},{value:"America/Tortola",label:"America/Tortola (GMT-04:00)"},{value:"America/Vancouver",label:"America/Vancouver (GMT-07:00)"},{value:"America/Whitehorse",label:"America/Whitehorse (GMT-07:00)"},{value:"America/Winnipeg",label:"America/Winnipeg (GMT-05:00)"},{value:"America/Yakutat",label:"America/Yakutat (GMT-08:00)"},{value:"America/Yellowknife",label:"America/Yellowknife (GMT-06:00)"},{value:"Antarctica/Casey",label:"Antarctica/Casey (GMT+11:00)"},{value:"Antarctica/Davis",label:"Antarctica/Davis (GMT+07:00)"},{value:"Antarctica/DumontDUrville",label:"Antarctica/DumontDUrville (GMT+10:00)"},{value:"Antarctica/Macquarie",label:"Antarctica/Macquarie (GMT+11:00)"},{value:"Antarctica/Mawson",label:"Antarctica/Mawson (GMT+05:00)"},{value:"Antarctica/Palmer",label:"Antarctica/Palmer (GMT-03:00)"},{value:"Antarctica/Rothera",label:"Antarctica/Rothera (GMT-03:00)"},{value:"Antarctica/Syowa",label:"Antarctica/Syowa (GMT+03:00)"},{value:"Antarctica/Troll",label:"Antarctica/Troll (GMT+00:00)"},{value:"Antarctica/Vostok",label:"Antarctica/Vostok (GMT+06:00)"},{value:"Asia/Almaty",label:"Asia/Almaty (GMT+05:00)"},{value:"Asia/Amman",label:"Asia/Amman (GMT+03:00)"},{value:"Asia/Anadyr",label:"Asia/Anadyr (GMT+12:00)"},{value:"Asia/Aqtau",label:"Asia/Aqtau (GMT+05:00)"},{value:"Asia/Aqtobe",label:"Asia/Aqtobe (GMT+05:00)"},{value:"Asia/Ashgabat",label:"Asia/Ashgabat (GMT+05:00)"},{value:"Asia/Atyrau",label:"Asia/Atyrau (GMT+05:00)"},{value:"Asia/Baghdad",label:"Asia/Baghdad (GMT+03:00)"},{value:"Asia/Baku",label:"Asia/Baku (GMT+04:00)"},{value:"Asia/Bangkok",label:"Asia/Bangkok (GMT+07:00)"},{value:"Asia/Barnaul",label:"Asia/Barnaul (GMT+07:00)"},{value:"Asia/Beirut",label:"Asia/Beirut (GMT+03:00)"},{value:"Asia/Bishkek",label:"Asia/Bishkek (GMT+06:00)"},{value:"Asia/Brunei",label:"Asia/Brunei (GMT+08:00)"},{value:"Asia/Chita",label:"Asia/Chita (GMT+09:00)"},{value:"Asia/Choibalsan",label:"Asia/Choibalsan (GMT+08:00)"},{value:"Asia/Colombo",label:"Asia/Colombo (GMT+05:30)"},{value:"Asia/Damascus",label:"Asia/Damascus (GMT+03:00)"},{value:"Asia/Dhaka",label:"Asia/Dhaka (GMT+06:00)"},{value:"Asia/Dili",label:"Asia/Dili (GMT+09:00)"},{value:"Asia/Dubai",label:"Asia/Dubai (GMT+04:00)"},{value:"Asia/Dushanbe",label:"Asia/Dushanbe (GMT+05:00)"},{value:"Asia/Famagusta",label:"Asia/Famagusta (GMT+03:00)"},{value:"Asia/Gaza",label:"Asia/Gaza (GMT+03:00)"},{value:"Asia/Hebron",label:"Asia/Hebron (GMT+03:00)"},{value:"Asia/Ho_Chi_Minh",label:"Asia/Ho_Chi_Minh (GMT+07:00)"},{value:"Asia/Hong_Kong",label:"Asia/Hong_Kong (GMT+08:00)"},{value:"Asia/Hovd",label:"Asia/Hovd (GMT+07:00)"},{value:"Asia/Irkutsk",label:"Asia/Irkutsk (GMT+08:00)"},{value:"Asia/Jakarta",label:"Asia/Jakarta (GMT+07:00)"},{value:"Asia/Jayapura",label:"Asia/Jayapura (GMT+09:00)"},{value:"Asia/Jerusalem",label:"Asia/Jerusalem (GMT+03:00)"},{value:"Asia/Kabul",label:"Asia/Kabul (GMT+04:30)"},{value:"Asia/Kamchatka",label:"Asia/Kamchatka (GMT+12:00)"},{value:"Asia/Karachi",label:"Asia/Karachi (GMT+05:00)"},{value:"Asia/Kathmandu",label:"Asia/Kathmandu (GMT+05:45)"},{value:"Asia/Khandyga",label:"Asia/Khandyga (GMT+09:00)"},{value:"Asia/Kolkata",label:"Asia/Kolkata (GMT+05:30)"},{value:"Asia/Krasnoyarsk",label:"Asia/Krasnoyarsk (GMT+07:00)"},{value:"Asia/Kuala_Lumpur",label:"Asia/Kuala_Lumpur (GMT+08:00)"},{value:"Asia/Kuching",label:"Asia/Kuching (GMT+08:00)"},{value:"Asia/Kuwait",label:"Asia/Kuwait (GMT+03:00)"},{value:"Asia/Macau",label:"Asia/Macau (GMT+08:00)"},{value:"Asia/Magadan",label:"Asia/Magadan (GMT+11:00)"},{value:"Asia/Makassar",label:"Asia/Makassar (GMT+08:00)"},{value:"Asia/Manila",label:"Asia/Manila (GMT+08:00)"},{value:"Asia/Muscat",label:"Asia/Muscat (GMT+04:00)"},{value:"Asia/Nicosia",label:"Asia/Nicosia (GMT+03:00)"},{value:"Asia/Novokuznetsk",label:"Asia/Novokuznetsk (GMT+07:00)"},{value:"Asia/Novosibirsk",label:"Asia/Novosibirsk (GMT+07:00)"},{value:"Asia/Omsk",label:"Asia/Omsk (GMT+06:00)"},{value:"Asia/Oral",label:"Asia/Oral (GMT+05:00)"},{value:"Asia/Phnom_Penh",label:"Asia/Phnom_Penh (GMT+07:00)"},{value:"Asia/Pontianak",label:"Asia/Pontianak (GMT+07:00)"},{value:"Asia/Pyongyang",label:"Asia/Pyongyang (GMT+09:00)"},{value:"Asia/Qatar",label:"Asia/Qatar (GMT+03:00)"},{value:"Asia/Qostanay",label:"Asia/Qostanay (GMT+05:00)"},{value:"Asia/Qyzylorda",label:"Asia/Qyzylorda (GMT+05:00)"},{value:"Asia/Riyadh",label:"Asia/Riyadh (GMT+03:00)"},{value:"Asia/Sakhalin",label:"Asia/Sakhalin (GMT+11:00)"},{value:"Asia/Samarkand",label:"Asia/Samarkand (GMT+05:00)"},{value:"Asia/Seoul",label:"Asia/Seoul (GMT+09:00)"},{value:"Asia/Shanghai",label:"Asia/Shanghai (GMT+08:00)"},{value:"Asia/Singapore",label:"Asia/Singapore (GMT+08:00)"},{value:"Asia/Srednekolymsk",label:"Asia/Srednekolymsk (GMT+11:00)"},{value:"Asia/Taipei",label:"Asia/Taipei (GMT+08:00)"},{value:"Asia/Tashkent",label:"Asia/Tashkent (GMT+05:00)"},{value:"Asia/Tbilisi",label:"Asia/Tbilisi (GMT+04:00)"},{value:"Asia/Tehran",label:"Asia/Tehran (GMT+03:30)"},{value:"Asia/Thimphu",label:"Asia/Thimphu (GMT+06:00)"},{value:"Asia/Tokyo",label:"Asia/Tokyo (GMT+09:00)"},{value:"Asia/Tomsk",label:"Asia/Tomsk (GMT+07:00)"},{value:"Asia/Ulaanbaatar",label:"Asia/Ulaanbaatar (GMT+08:00)"},{value:"Asia/Urumqi",label:"Asia/Urumqi (GMT+06:00)"},{value:"Asia/Ust-Nera",label:"Asia/Ust-Nera (GMT+10:00)"},{value:"Asia/Vladivostok",label:"Asia/Vladivostok (GMT+10:00)"},{value:"Asia/Yakutsk",label:"Asia/Yakutsk (GMT+09:00)"},{value:"Asia/Yangon",label:"Asia/Yangon (GMT+06:30)"},{value:"Asia/Yekaterinburg",label:"Asia/Yekaterinburg (GMT+05:00)"},{value:"Asia/Yerevan",label:"Asia/Yerevan (GMT+04:00)"},{value:"Atlantic/Azores",label:"Atlantic/Azores (GMT-01:00)"},{value:"Atlantic/Bermuda",label:"Atlantic/Bermuda (GMT-03:00)"},{value:"Atlantic/Canary",label:"Atlantic/Canary (GMT+00:00)"},{value:"Atlantic/Cape_Verde",label:"Atlantic/Cape_Verde (GMT-01:00)"},{value:"Atlantic/Faroe",label:"Atlantic/Faroe (GMT+00:00)"},{value:"Atlantic/Madeira",label:"Atlantic/Madeira (GMT+00:00)"},{value:"Atlantic/Reykjavik",label:"Atlantic/Reykjavik (GMT+00:00)"},{value:"Atlantic/South_Georgia",label:"Atlantic/South_Georgia (GMT-02:00)"},{value:"Atlantic/St_Helena",label:"Atlantic/St_Helena (GMT+00:00)"},{value:"Atlantic/Stanley",label:"Atlantic/Stanley (GMT-03:00)"},{value:"Australia/Adelaide",label:"Australia/Adelaide (GMT+09:30)"},{value:"Australia/Brisbane",label:"Australia/Brisbane (GMT+10:00)"},{value:"Australia/Broken_Hill",label:"Australia/Broken_Hill (GMT+09:30)"},{value:"Australia/Darwin",label:"Australia/Darwin (GMT+09:30)"},{value:"Australia/Eucla",label:"Australia/Eucla (GMT+08:45)"},{value:"Australia/Hobart",label:"Australia/Hobart (GMT+10:00)"},{value:"Australia/Lindeman",label:"Australia/Lindeman (GMT+10:00)"},{value:"Australia/Lord_Howe",label:"Australia/Lord_Howe (GMT+10:30)"},{value:"Australia/Melbourne",label:"Australia/Melbourne (GMT+10:00)"},{value:"Australia/Perth",label:"Australia/Perth (GMT+08:00)"},{value:"Australia/Sydney",label:"Australia/Sydney (GMT+10:00)"},{value:"Europe/Amsterdam",label:"Europe/Amsterdam (GMT+02:00)"},{value:"Europe/Andorra",label:"Europe/Andorra (GMT+02:00)"},{value:"Europe/Astrakhan",label:"Europe/Astrakhan (GMT+04:00)"},{value:"Europe/Athens",label:"Europe/Athens (GMT+03:00)"},{value:"Europe/Belgrade",label:"Europe/Belgrade (GMT+02:00)"},{value:"Europe/Berlin",label:"Europe/Berlin (GMT+02:00)"},{value:"Europe/Brussels",label:"Europe/Brussels (GMT+02:00)"},{value:"Europe/Bucharest",label:"Europe/Bucharest (GMT+03:00)"},{value:"Europe/Budapest",label:"Europe/Budapest (GMT+02:00)"},{value:"Europe/Chisinau",label:"Europe/Chisinau (GMT+03:00)"},{value:"Europe/Copenhagen",label:"Europe/Copenhagen (GMT+02:00)"},{value:"Europe/Dublin",label:"Europe/Dublin (GMT+01:00)"},{value:"Europe/Gibraltar",label:"Europe/Gibraltar (GMT+02:00)"},{value:"Europe/Helsinki",label:"Europe/Helsinki (GMT+03:00)"},{value:"Europe/Istanbul",label:"Europe/Istanbul (GMT+03:00)"},{value:"Europe/Kaliningrad",label:"Europe/Kaliningrad (GMT+02:00)"},{value:"Europe/Kirov",label:"Europe/Kirov (GMT+03:00)"},{value:"Europe/Kyiv",label:"Europe/Kyiv (GMT+03:00)"},{value:"Europe/Lisbon",label:"Europe/Lisbon (GMT+01:00)"},{value:"Europe/London",label:"Europe/London (GMT+01:00)"},{value:"Europe/Luxembourg",label:"Europe/Luxembourg (GMT+02:00)"},{value:"Europe/Madrid",label:"Europe/Madrid (GMT+02:00)"},{value:"Europe/Malta",label:"Europe/Malta (GMT+02:00)"},{value:"Europe/Minsk",label:"Europe/Minsk (GMT+03:00)"},{value:"Europe/Monaco",label:"Europe/Monaco (GMT+02:00)"},{value:"Europe/Moscow",label:"Europe/Moscow (GMT+03:00)"},{value:"Europe/Oslo",label:"Europe/Oslo (GMT+02:00)"},{value:"Europe/Paris",label:"Europe/Paris (GMT+02:00)"},{value:"Europe/Prague",label:"Europe/Prague (GMT+02:00)"},{value:"Europe/Riga",label:"Europe/Riga (GMT+03:00)"},{value:"Europe/Rome",label:"Europe/Rome (GMT+02:00)"},{value:"Europe/Samara",label:"Europe/Samara (GMT+04:00)"},{value:"Europe/San_Marino",label:"Europe/San_Marino (GMT+02:00)"},{value:"Europe/Sarajevo",label:"Europe/Sarajevo (GMT+02:00)"},{value:"Europe/Saratov",label:"Europe/Saratov (GMT+04:00)"},{value:"Europe/Simferopol",label:"Europe/Simferopol (GMT+03:00)"},{value:"Europe/Skopje",label:"Europe/Skopje (GMT+02:00)"},{value:"Europe/Sofia",label:"Europe/Sofia (GMT+03:00)"},{value:"Europe/Stockholm",label:"Europe/Stockholm (GMT+02:00)"},{value:"Europe/Tallinn",label:"Europe/Tallinn (GMT+03:00)"},{value:"Europe/Tirane",label:"Europe/Tirane (GMT+02:00)"},{value:"Europe/Ulyanovsk",label:"Europe/Ulyanovsk (GMT+04:00)"},{value:"Europe/Uzhgorod",label:"Europe/Uzhgorod (GMT+03:00)"},{value:"Europe/Vaduz",label:"Europe/Vaduz (GMT+02:00)"},{value:"Europe/Vatican",label:"Europe/Vatican (GMT+02:00)"},{value:"Europe/Vienna",label:"Europe/Vienna (GMT+02:00)"},{value:"Europe/Vilnius",label:"Europe/Vilnius (GMT+03:00)"},{value:"Europe/Volgograd",label:"Europe/Volgograd (GMT+03:00)"},{value:"Europe/Warsaw",label:"Europe/Warsaw (GMT+02:00)"},{value:"Europe/Zagreb",label:"Europe/Zagreb (GMT+02:00)"},{value:"Europe/Zaporozhye",label:"Europe/Zaporozhye (GMT+03:00)"},{value:"Europe/Zurich",label:"Europe/Zurich (GMT+02:00)"},{value:"Indian/Antananarivo",label:"Indian/Antananarivo (GMT+03:00)"},{value:"Indian/Chagos",label:"Indian/Chagos (GMT+06:00)"},{value:"Indian/Christmas",label:"Indian/Christmas (GMT+07:00)"},{value:"Indian/Cocos",label:"Indian/Cocos (GMT+06:30)"},{value:"Indian/Comoro",label:"Indian/Comoro (GMT+03:00)"},{value:"Indian/Kerguelen",label:"Indian/Kerguelen (GMT+05:00)"},{value:"Indian/Mahe",label:"Indian/Mahe (GMT+04:00)"},{value:"Indian/Maldives",label:"Indian/Maldives (GMT+05:00)"},{value:"Indian/Mauritius",label:"Indian/Mauritius (GMT+04:00)"},{value:"Indian/Mayotte",label:"Indian/Mayotte (GMT+03:00)"},{value:"Indian/Reunion",label:"Indian/Reunion (GMT+04:00)"},{value:"Pacific/Apia",label:"Pacific/Apia (GMT+13:00)"},{value:"Pacific/Auckland",label:"Pacific/Auckland (GMT+12:00)"},{value:"Pacific/Bougainville",label:"Pacific/Bougainville (GMT+11:00)"},{value:"Pacific/Chatham",label:"Pacific/Chatham (GMT+12:45)"},{value:"Pacific/Chuuk",label:"Pacific/Chuuk (GMT+10:00)"},{value:"Pacific/Easter",label:"Pacific/Easter (GMT-06:00)"},{value:"Pacific/Efate",label:"Pacific/Efate (GMT+11:00)"},{value:"Pacific/Fakaofo",label:"Pacific/Fakaofo (GMT+13:00)"},{value:"Pacific/Fiji",label:"Pacific/Fiji (GMT+12:00)"},{value:"Pacific/Funafuti",label:"Pacific/Funafuti (GMT+12:00)"},{value:"Pacific/Galapagos",label:"Pacific/Galapagos (GMT-06:00)"},{value:"Pacific/Gambier",label:"Pacific/Gambier (GMT-09:00)"},{value:"Pacific/Guadalcanal",label:"Pacific/Guadalcanal (GMT+11:00)"},{value:"Pacific/Guam",label:"Pacific/Guam (GMT+10:00)"},{value:"Pacific/Honolulu",label:"Pacific/Honolulu (GMT-10:00)"},{value:"Pacific/Kanton",label:"Pacific/Kanton (GMT+13:00)"},{value:"Pacific/Kiritimati",label:"Pacific/Kiritimati (GMT+14:00)"},{value:"Pacific/Kosrae",label:"Pacific/Kosrae (GMT+11:00)"},{value:"Pacific/Kwajalein",label:"Pacific/Kwajalein (GMT+12:00)"},{value:"Pacific/Majuro",label:"Pacific/Majuro (GMT+12:00)"},{value:"Pacific/Marquesas",label:"Pacific/Marquesas (GMT-09:30)"},{value:"Pacific/Midway",label:"Pacific/Midway (GMT-11:00)"},{value:"Pacific/Nauru",label:"Pacific/Nauru (GMT+12:00)"},{value:"Pacific/Niue",label:"Pacific/Niue (GMT-11:00)"},{value:"Pacific/Norfolk",label:"Pacific/Norfolk (GMT+11:00)"},{value:"Pacific/Noumea",label:"Pacific/Noumea (GMT+11:00)"},{value:"Pacific/Pago_Pago",label:"Pacific/Pago_Pago (GMT-11:00)"},{value:"Pacific/Palau",label:"Pacific/Palau (GMT+09:00)"},{value:"Pacific/Pitcairn",label:"Pacific/Pitcairn (GMT-08:00)"},{value:"Pacific/Pohnpei",label:"Pacific/Pohnpei (GMT+11:00)"},{value:"Pacific/Port_Moresby",label:"Pacific/Port_Moresby (GMT+10:00)"},{value:"Pacific/Rarotonga",label:"Pacific/Rarotonga (GMT-10:00)"},{value:"Pacific/Saipan",label:"Pacific/Saipan (GMT+10:00)"},{value:"Pacific/Tahiti",label:"Pacific/Tahiti (GMT-10:00)"},{value:"Pacific/Tarawa",label:"Pacific/Tarawa (GMT+12:00)"},{value:"Pacific/Tongatapu",label:"Pacific/Tongatapu (GMT+13:00)"},{value:"Pacific/Wake",label:"Pacific/Wake (GMT+12:00)"},{value:"Pacific/Wallis",label:"Pacific/Wallis (GMT+12:00)"}]),w=K({get:()=>i.modelValue,set:d=>{u("update:modelValue",d),u("change",d)}});return fe(()=>{if((i.modelValue===null||i.modelValue===void 0)&&!i.disabled)try{const d=Intl.DateTimeFormat().resolvedOptions().timeZone;a.value.find(v=>v.value===d)?w.value=d:console.warn(`Detected timezone "${d}" is not in the predefined list.`)}catch(d){console.error("Error auto-detecting timezone:",d)}}),(d,f)=>(t(),o("div",dn,[c(J,{for:s.label.toLowerCase().replace(/\s/g,"-"),value:s.label},null,8,["for","value"]),c(ce,{id:s.label.toLowerCase().replace(/\s/g,"-"),modelValue:w.value,"onUpdate:modelValue":f[0]||(f[0]=v=>w.value=v),options:a.value,valueKey:"value",labelKey:"label",placeholder:s.placeholder,disabled:s.disabled,required:s.required,class:"mt-1 block w-full"},null,8,["id","modelValue","options","placeholder","disabled","required"]),c(Z,{message:s.error,class:"mt-2"},null,8,["message"])]))}},mn={key:0,class:"text-sm text-gray-600 mb-3"},vn=["value"],pn={__name:"UserDataPromptModal",props:{show:{type:Boolean,default:!1},configItem:{type:Object,required:!0}},emits:["close","submitted","error"],setup(s,{emit:r}){const i=s,u=G({value:""});ie(()=>i.show,v=>{v&&(u.value={value:""})});const a=K(()=>{var v,l;return((l=(v=i.configItem)==null?void 0:v.api)==null?void 0:l.endpoint)||"/api/user/update-profile-field"}),w=K(()=>{var v,l;return((l=(v=i.configItem)==null?void 0:v.api)==null?void 0:l.method)||"post"}),d=v=>{var m,p,_,C,b;if((m=i.configItem)!=null&&m.toPayload)return i.configItem.toPayload(v.value);const l=((_=(p=i.configItem)==null?void 0:p.api)==null?void 0:_.fieldParam)||"field",n=((b=(C=i.configItem)==null?void 0:C.api)==null?void 0:b.valueParam)||"value";return{[l]:i.configItem.column,[n]:v.value}},f=K(()=>{var v;return((v=i.configItem)==null?void 0:v.title)||"Additional Information Required"});return(v,l)=>(t(),B($e,{show:s.show,title:f.value,"api-endpoint":a.value,"http-method":w.value,"form-data":u.value,"submit-button-text":"Save","success-message":"Saved successfully","format-data-for-api":d,onClose:l[3]||(l[3]=n=>v.$emit("close")),onSubmitted:l[4]||(l[4]=n=>v.$emit("submitted",n)),onError:l[5]||(l[5]=n=>v.$emit("error",n))},{default:A(({errors:n})=>{var m,p,_,C,b,q,V,k,y,S,L,z,Y,P;return[(m=s.configItem)!=null&&m.description?(t(),o("p",mn,I(s.configItem.description),1)):x("",!0),e("div",null,[((_=(p=s.configItem)==null?void 0:p.input)==null?void 0:_.type)==="component"&&((b=(C=s.configItem)==null?void 0:C.input)==null?void 0:b.component)==="TimezoneSelect"?(t(),o(Q,{key:0},[c(cn,{modelValue:u.value.value,"onUpdate:modelValue":l[0]||(l[0]=j=>u.value.value=j),required:!0},null,8,["modelValue"]),c(Z,{message:(q=n==null?void 0:n.value)==null?void 0:q[0],class:"mt-2"},null,8,["message"])],64)):((k=(V=s.configItem)==null?void 0:V.input)==null?void 0:k.type)==="select"?(t(),o(Q,{key:1},[c(J,{value:((y=s.configItem)==null?void 0:y.label)||"Select an option"},null,8,["value"]),ae(e("select",{"onUpdate:modelValue":l[1]||(l[1]=j=>u.value.value=j),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[l[6]||(l[6]=e("option",{disabled:"",value:""},"Please select",-1)),(t(!0),o(Q,null,ee(((L=(S=s.configItem)==null?void 0:S.input)==null?void 0:L.options)||[],j=>(t(),o("option",{key:j.value||j,value:j.value||j},I(j.label||j),9,vn))),128))],512),[[Fa,u.value.value]]),c(Z,{message:(z=n==null?void 0:n.value)==null?void 0:z[0],class:"mt-2"},null,8,["message"])],64)):(t(),o(Q,{key:2},[c(J,{value:((Y=s.configItem)==null?void 0:Y.label)||"Value"},null,8,["value"]),c(pe,{modelValue:u.value.value,"onUpdate:modelValue":l[2]||(l[2]=j=>u.value.value=j),class:"mt-1 block w-full"},null,8,["modelValue"]),c(Z,{message:(P=n==null?void 0:n.value)==null?void 0:P[0],class:"mt-2"},null,8,["message"])],64))])]}),_:1},8,["show","title","api-endpoint","http-method","form-data"]))}},fn=[{id:"users.timezone",model:"users",column:"timezone",title:"Set your timezone",description:"We could not detect your timezone during login. Please select your timezone to get correct schedule times.",input:{type:"component",component:"TimezoneSelect",props:{}},api:{endpoint:"/api/user/update-profile-field",method:"post",fieldParam:"field",valueParam:"value"},isMissing:s=>!(s!=null&&s.timezone),toPayload:s=>({field:"timezone",value:s})}],gn={__name:"PromptOrchestrator",setup(s){const r=G(!1),i=G(null),u=G([]),a=()=>{const n=localStorage.getItem("authToken");n&&!X.defaults.headers.common.Authorization&&(X.defaults.headers.common.Authorization=`Bearer ${n}`)},w=async()=>{a();const{data:n}=await X.get("/api/user");return n},d=n=>{const m=[];for(const p of fn)try{(typeof p.isMissing=="function"?p.isMissing(n):!(n!=null&&n[p.column]))&&m.push(p)}catch(_){console.error("Error evaluating prompt config",p,_)}return m},f=()=>{if(u.value.length===0){i.value=null,r.value=!1;return}i.value=u.value.shift(),r.value=!0},v=async()=>{try{const n=await w();u.value=d(n),f()}catch(n){console.error("PromptOrchestrator initialization failed",n)}},l=async()=>{try{const n=await w();u.value=d(n)}catch{}f()};return fe(()=>{v()}),(n,m)=>i.value?(t(),B(pn,{key:0,show:r.value,"config-item":i.value,onClose:f,onSubmitted:l},null,8,["show","config-item"])):x("",!0)}},bn={class:"flex h-screen overflow-hidden"},hn={class:"flex-1 flex flex-col overflow-hidden"},yn={key:0,class:"bg-white shadow"},kn={class:"mx-auto max-w-7xl px-4 py-6 sm:px-6 lg:px-8"},wn={class:"flex-1 overflow-y-auto"},Hn={__name:"AuthenticatedLayout",setup(s){const r=G(!1),i=G(!1),u=G(!1),a=G(!1),w=G([]),d=G(!0),f=K(()=>Ve().props.id||null),{showNoticeModal:v,unreadNotices:l,fetchUnreadNotices:n,closeModal:m}=un(),p=G(null),_=async()=>{const L=localStorage.getItem("authToken");if(L){window.axios.defaults.headers.common.Authorization=`Bearer ${L}`;try{await window.axios.get("/api/user")}catch(z){z.response&&z.response.status===401&&(console.log("Session expired, redirecting to login"),localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization,window.location.href="/login")}}else delete window.axios.defaults.headers.common.Authorization},C=()=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization},b=L=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization,window.location.href="/login"},q=async()=>{d.value=!0;try{const L=await window.axios.get("/api/projects-simplified");w.value=L.data}catch(L){console.error("Error fetching all projects for sidebar:",L),w.value=[]}finally{d.value=!1}},V=L=>{Ha.visit(route("projects.show",L))},k=K(()=>Ne.value.notifications.filter(L=>!L.isRead).length),y=L=>{console.log("Task updated globally.",L)},S=L=>{console.log("Task deleted globally.",L)};return fe(()=>{_(),p.value&&Oa(p.value),q(),Ka(),ta(n),n()}),fa(()=>{ta(null)}),(L,z)=>(t(),o("div",bn,[c(At,{ref_key:"standardNotificationContainerRef",ref:p},null,512),c(ft,{"sidebar-is-open":E(Ne).show},null,8,["sidebar-is-open"]),c(nl),c(Ws,{"all-projects":w.value,"active-project-id":f.value,onProjectSelected:V},null,8,["all-projects","active-project-id"]),e("div",hn,[c(Vo,{"unread-notification-count":k.value,onOpenCreateTaskModal:z[0]||(z[0]=Y=>i.value=!0),onOpenAddResource:z[1]||(z[1]=Y=>u.value=!0),onOpenNotificationsSidebar:E(la),onOpenKudoModal:z[2]||(z[2]=Y=>a.value=!0)},null,8,["unread-notification-count","onOpenNotificationsSidebar"]),c(qo,{"showing-navigation-dropdown":r.value,"unread-notification-count":k.value,onOpenCreateTaskModal:z[3]||(z[3]=Y=>i.value=!0),onOpenAddResource:z[4]||(z[4]=Y=>u.value=!0),onOpenNotificationsSidebar:E(la),onLogoutSuccess:C,onLogoutError:b},null,8,["showing-navigation-dropdown","unread-notification-count","onOpenNotificationsSidebar"]),L.$slots.header?(t(),o("header",yn,[e("div",kn,[be(L.$slots,"header")])])):x("",!0),e("main",wn,[be(L.$slots,"default")]),c(Vl,{show:i.value,onClose:z[5]||(z[5]=Y=>i.value=!1),onSaved:z[6]||(z[6]=Y=>i.value=!1)},null,8,["show"]),c(Rl,{"api-endpoint":"/api/shareable-resources",show:u.value,onClose:z[7]||(z[7]=Y=>u.value=!1)},null,8,["show"]),c(hs,{show:a.value,onClose:z[8]||(z[8]=Y=>a.value=!1),onSubmitted:z[9]||(z[9]=Y=>a.value=!1)},null,8,["show"])]),c(nn,{onTaskUpdated:y,onTaskDeleted:S}),c(vs),c(Xa,{show:E(v),unreadNotices:E(l),onClose:E(m)},null,8,["show","unreadNotices","onClose"]),c(gn)]))}};export{Rl as C,ba as R,ga as T,Hn as _,xl as a,sl as b,Kn as c,On as d,gi as e,zn as f,wi as g,ki as h,yi as i,bi as j,cn as k,xi as l,na as m,ti as n,Rn as o,pi as p,Vl as q,fi as r,vi as s,Fn as t,hi as u};
