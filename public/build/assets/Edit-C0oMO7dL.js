import{r as _,x as P,c as B,o,a as x,b as e,d as u,h as r,g,e as l,u as i,f as w,j as N,v as R,F as E,i as C,t as h,l as U,S as D,k as j,n as M,m as O}from"./app-Cftj8kez.js";import{_ as T}from"./AuthenticatedLayout-m1j3JS-L.js";import{_ as $,a as k}from"./InputError-Dysw4GLH.js";import{P as z}from"./PrimaryButton-BNBWD5Jx.js";import{_ as q}from"./TextInput-DItFCFfR.js";import"./ApplicationLogo-DHDHjUvD.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./SecondaryButton-CVyu_OeR.js";const A={class:"font-semibold text-xl text-gray-800 leading-tight"},F={class:"py-12"},I={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},L={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},G={class:"p-6 bg-white border-b border-gray-200"},H={class:"mb-6 border border-gray-200 rounded-lg overflow-hidden"},J={class:"text-gray-500"},K={key:0},Q={key:1},W={key:0,class:"p-4"},X={class:"mb-4"},Y={class:"mb-6 border border-gray-200 rounded-lg overflow-hidden"},Z={class:"text-gray-500"},ee={key:0},se={key:1},te={key:0,class:"p-4"},oe={class:"mb-6 border border-gray-200 rounded-lg overflow-hidden"},re={class:"text-gray-500"},ie={key:0},ne={key:1},ae={key:0,class:"p-4"},le={key:0,class:"text-sm text-gray-500"},de={key:1},ce=["onClick"],pe={class:"font-medium text-gray-800"},me={class:"text-gray-500"},ue={key:0},ge={key:1},ye={key:0,class:"p-3"},fe={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3"},be={class:"flex items-center h-5"},ve=["id","value"],_e={class:"ml-3 text-sm"},xe=["for"],he={key:0,class:"text-gray-500"},ke={class:"flex items-center justify-end mt-4"},Ne={__name:"Edit",props:{role:Object,permissions:Object,rolePermissions:Array},setup(y){const c=y,f=_(!0),b=_(!0),v=_(!0),m=_({});(()=>{c.permissions&&Object.keys(c.permissions).forEach(n=>{m.value[n]=!1})})();const t=P({name:c.role.name,description:c.role.description||"",type:c.role.type||"",permissions:c.rolePermissions||[]}),V=async()=>{try{t.processing=!0;const n=await O.put(`/api/roles/${c.role.id}`,{name:t.name,description:t.description,permissions:t.permissions,type:t.type||"application"});t.clearErrors(),console.log("Role updated successfully",n.data)}catch(n){n.response&&n.response.status===422?(t.setError("name",n.response.data.errors.name),t.setError("description",n.response.data.errors.description),t.setError("permissions",n.response.data.errors.permissions)):console.error("Error updating role:",n)}finally{t.processing=!1}};return(n,s)=>(o(),B(T,null,{header:x(()=>[e("h2",A," Edit Role: "+h(y.role.name),1)]),default:x(()=>[e("div",F,[e("div",I,[e("div",L,[e("div",G,[e("form",{onSubmit:u(V,["prevent"])},[e("div",H,[e("button",{onClick:s[0]||(s[0]=u(a=>f.value=!f.value,["prevent"])),class:"w-full flex justify-between items-center p-4 bg-gray-50 hover:bg-gray-100 transition-colors"},[s[7]||(s[7]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Basic Information",-1)),e("span",J,[f.value?(o(),r("span",K,"▼")):(o(),r("span",Q,"▶"))])]),f.value?(o(),r("div",W,[e("div",X,[l($,{for:"name",value:"Role Name"}),l(q,{id:"name",type:"text",class:"mt-1 block w-full",modelValue:i(t).name,"onUpdate:modelValue":s[1]||(s[1]=a=>i(t).name=a),required:"",autofocus:""},null,8,["modelValue"]),l(k,{class:"mt-2",message:i(t).errors.name},null,8,["message"])]),e("div",null,[l($,{for:"description",value:"Role Description"}),w(e("textarea",{id:"description",class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm","onUpdate:modelValue":s[2]||(s[2]=a=>i(t).description=a),rows:"3",placeholder:"Describe the purpose and scope of this role"},null,512),[[N,i(t).description]]),l(k,{class:"mt-2",message:i(t).errors.description},null,8,["message"])])])):g("",!0)]),e("div",Y,[e("button",{onClick:s[3]||(s[3]=u(a=>b.value=!b.value,["prevent"])),class:"w-full flex justify-between items-center p-4 bg-gray-50 hover:bg-gray-100 transition-colors"},[s[8]||(s[8]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Role Type",-1)),e("span",Z,[b.value?(o(),r("span",ee,"▼")):(o(),r("span",se,"▶"))])]),b.value?(o(),r("div",te,[s[10]||(s[10]=e("p",{class:"text-sm text-gray-600 mb-2"},"Select the scope where this role will be applied",-1)),w(e("select",{id:"type",class:"block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm","onUpdate:modelValue":s[4]||(s[4]=a=>i(t).type=a),required:""},s[9]||(s[9]=[e("option",{value:""},"Select a type",-1),e("option",{value:"application"},"Application",-1),e("option",{value:"client"},"Client",-1),e("option",{value:"project"},"Project",-1)]),512),[[R,i(t).type]]),l(k,{class:"mt-2",message:i(t).errors.type},null,8,["message"])])):g("",!0)]),e("div",oe,[e("button",{onClick:s[5]||(s[5]=u(a=>v.value=!v.value,["prevent"])),class:"w-full flex justify-between items-center p-4 bg-gray-50 hover:bg-gray-100 transition-colors"},[s[11]||(s[11]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Permissions",-1)),e("span",re,[v.value?(o(),r("span",ie,"▼")):(o(),r("span",ne,"▶"))])]),v.value?(o(),r("div",ae,[s[12]||(s[12]=e("p",{class:"text-sm text-gray-600 mb-4"},"Select the permissions to assign to this role",-1)),Object.keys(y.permissions).length===0?(o(),r("div",le," No permissions available. Please create some permissions first. ")):(o(),r("div",de,[(o(!0),r(E,null,C(y.permissions,(a,p)=>(o(),r("div",{key:p,class:"mb-6 border border-gray-200 rounded-lg overflow-hidden"},[e("button",{onClick:u(d=>m.value[p]=!m.value[p],["prevent"]),class:"w-full flex justify-between items-center p-3 bg-gray-50 hover:bg-gray-100 transition-colors"},[e("h4",pe,h(p),1),e("span",me,[m.value[p]?(o(),r("span",ue,"▼")):(o(),r("span",ge,"▶"))])],8,ce),m.value[p]?(o(),r("div",ye,[e("div",fe,[(o(!0),r(E,null,C(a,d=>(o(),r("div",{key:d.id,class:"flex items-start"},[e("div",be,[w(e("input",{id:`permission-${d.id}`,type:"checkbox",value:d.id,"onUpdate:modelValue":s[6]||(s[6]=S=>i(t).permissions=S),class:"focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300 rounded"},null,8,ve),[[U,i(t).permissions]])]),e("div",_e,[e("label",{for:`permission-${d.id}`,class:"font-medium text-gray-700"},h(d.name),9,xe),d.description?(o(),r("p",he,h(d.description),1)):g("",!0)])]))),128))])])):g("",!0)]))),128))])),l(k,{class:"mt-2",message:i(t).errors.permissions},null,8,["message"])])):g("",!0)]),e("div",ke,[l(i(D),{href:n.route("admin.roles.index"),class:"inline-flex items-center px-4 py-2 bg-gray-300 border border-transparent rounded-md font-semibold text-xs text-gray-800 uppercase tracking-widest hover:bg-gray-400 active:bg-gray-500 focus:outline-none focus:border-gray-500 focus:ring focus:ring-gray-300 disabled:opacity-25 transition mr-2"},{default:x(()=>s[13]||(s[13]=[j(" Cancel ")])),_:1,__:[13]},8,["href"]),l(z,{class:M(["ml-4",{"opacity-25":i(t).processing}]),disabled:i(t).processing},{default:x(()=>s[14]||(s[14]=[j(" Update Role ")])),_:1,__:[14]},8,["class","disabled"])])],32)])])])])]),_:1}))}};export{Ne as default};
