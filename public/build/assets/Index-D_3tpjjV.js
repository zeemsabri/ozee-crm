import{_ as S}from"./AuthenticatedLayout-DyfNarpp.js";import{q,r as i,c as h,f as z,a as o,o as a,d as p,u as P,h as M,w as c,b as e,i as k,t as r,j as V,m,F as y,l as F}from"./app-wG1Nzvtw.js";import{P as Y}from"./PrimaryButton-B0BUrHzJ.js";import{D as L}from"./DangerButton-unSBjdjI.js";import{_ as E}from"./SecondaryButton-CIZz9SNh.js";import{_ as G}from"./Modal-DjZa3W9H.js";import"./InputLabel-CRYkFAds.js";import"./InputError-D8OUidnG.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./TextInput-CntfJ1Tp.js";import"./SelectDropdown-Cp8xMcHg.js";import"./Checkbox-BHJaa5Qa.js";import"./ApplicationLogo-Br_It60z.js";import"./moment-BLMuvzoS.js";const H={class:"py-12 bg-gray-50"},X={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 space-y-8"},Z={key:0,class:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded-lg relative",role:"alert"},J={class:"block sm:inline"},O={key:1,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg relative",role:"alert"},Q={class:"block sm:inline"},U={class:"bg-white rounded-lg shadow-lg p-8 text-center animate-fade-in-up"},ee={class:"mt-6"},te={key:2,class:"text-center text-gray-600"},se={key:0,class:"space-y-4"},oe={key:0,class:"p-6 text-gray-600 border border-gray-200 rounded-lg bg-white shadow-sm"},ae={key:1,class:"grid md:grid-cols-2 gap-4"},le={class:"flex items-center space-x-2 text-sm text-gray-500 mb-2"},re={class:"font-semibold text-lg text-gray-900 mb-2"},de={class:"text-gray-700 italic border-l-4 border-yellow-400 pl-3"},ie={class:"mt-4 flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2"},ne={class:"space-y-4"},ue={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"},pe={class:"bg-white rounded-lg shadow-md p-6 text-center border-b-4 border-purple-400"},ce={class:"text-4xl font-bold text-gray-800"},ge={class:"bg-white rounded-lg shadow-md p-6 text-center border-b-4 border-green-400"},me={class:"text-4xl font-bold text-gray-800"},xe={class:"bg-white rounded-lg shadow-md p-6 text-center border-b-4 border-yellow-400"},ve={class:"text-4xl font-bold text-gray-800"},ye={key:0,class:"p-6 text-gray-600 border border-gray-200 rounded-lg bg-white shadow-sm"},fe={key:1,class:"grid md:grid-cols-2 gap-4"},_e={class:"flex items-start justify-between mb-4"},we={class:"flex items-center space-x-3"},be={class:"font-semibold text-lg text-gray-900"},he={class:"text-sm text-gray-500"},ke={class:"text-gray-700 italic border-l-4 border-purple-400 pl-3"},Ke={class:"w-full"},Ce={class:"relative w-full",style:{"padding-bottom":"56.25%",height:"0"}},ze={__name:"Index",setup(je){const{canDo:N}=q(),K=N("approve_kudos"),f=i(!0),n=i(""),x=i(""),_=i([]),u=i([]),w=i(!1),C=i(0),v=i(!1),B=()=>{w.value=!0,v.value=!1},j=()=>{w.value=!1,C.value++},b=async()=>{f.value=!0,n.value="";try{const d=await window.axios.get("/api/kudos/mine");if(u.value=d.data||[],K){const t=await window.axios.get("/api/kudos/pending");_.value=t.data||[]}}catch{n.value="Failed to load kudos."}finally{f.value=!1}},$=async d=>{var t,s;try{await window.axios.post(`/api/kudos/${d.id}/approve`),x.value="Kudo approved!",await b()}catch(l){n.value=((s=(t=l==null?void 0:l.response)==null?void 0:t.data)==null?void 0:s.message)||"Failed to approve kudo"}},R=async d=>{var t,s;try{await window.axios.post(`/api/kudos/${d.id}/reject`),x.value="Kudo rejected.",await b()}catch(l){n.value=((s=(t=l==null?void 0:l.response)==null?void 0:t.data)==null?void 0:s.message)||"Failed to reject kudo"}},D=h(()=>u.value.length),T=h(()=>u.value.filter(d=>d.is_approved).length),W=h(()=>u.value.filter(d=>!d.is_approved).length);return z(()=>{try{localStorage.getItem("kudos_video_prompted")||(v.value=!0,localStorage.setItem("kudos_video_prompted","1"),setTimeout(()=>{v.value=!1},8e3))}catch{}b()}),(d,t)=>(a(),o(y,null,[p(P(M),{title:"Kudos"}),p(S,null,{header:c(()=>t[0]||(t[0]=[e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Kudos",-1)])),default:c(()=>[e("div",H,[e("div",X,[x.value?(a(),o("div",Z,[e("span",J,r(x.value),1)])):k("",!0),n.value?(a(),o("div",O,[e("span",Q,r(n.value),1)])):k("",!0),e("div",U,[t[2]||(t[2]=e("p",{class:"text-4xl font-bold text-gray-800 mb-2"},"The Power of Recognition!",-1)),t[3]||(t[3]=e("p",{class:"text-lg text-gray-600"},"Giving and receiving Kudos builds a culture of appreciation and teamwork.",-1)),e("div",ee,[p(E,{onClick:B,class:V(["mx-auto block px-6 py-3",v.value?"animate-bounce ring-4 ring-purple-300 shadow-2xl":""]),"aria-label":"Watch Kudos Feature Walkthrough"},{default:c(()=>t[1]||(t[1]=[m(" Watch Video ",-1)])),_:1,__:[1]},8,["class"])])]),f.value?(a(),o("div",te,t[4]||(t[4]=[e("svg",{class:"animate-spin h-8 w-8 text-gray-400 mx-auto",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),e("p",{class:"mt-2"},"Loading kudos...",-1)]))):(a(),o(y,{key:3},[P(K)?(a(),o("div",se,[t[10]||(t[10]=e("h3",{class:"text-3xl font-extrabold text-gray-800"},"Kudos Pending Approval âœ¨",-1)),_.value.length===0?(a(),o("div",oe," No new kudos are waiting for your approval. ")):(a(),o("div",ae,[(a(!0),o(y,null,F(_.value,s=>{var l,g,A;return a(),o("div",{key:s.id,class:"bg-white rounded-xl shadow-lg p-6 flex flex-col justify-between transition-all duration-300 hover:shadow-xl"},[e("div",null,[e("div",le,[e("span",null,[t[5]||(t[5]=m("From: ",-1)),e("strong",null,r((l=s.sender)==null?void 0:l.name),1)]),t[7]||(t[7]=e("span",null,"â†’",-1)),e("span",null,[t[6]||(t[6]=m("To: ",-1)),e("strong",null,r((g=s.recipient)==null?void 0:g.name),1)])]),e("div",re,"Project: "+r(((A=s.project)==null?void 0:A.name)||"N/A"),1),e("p",de,'"'+r(s.comment)+'"',1)]),e("div",ie,[p(Y,{onClick:I=>$(s),class:"w-full sm:w-auto"},{default:c(()=>t[8]||(t[8]=[m("Approve",-1)])),_:2,__:[8]},1032,["onClick"]),p(L,{onClick:I=>R(s),class:"w-full sm:w-auto"},{default:c(()=>t[9]||(t[9]=[m("Reject",-1)])),_:2,__:[9]},1032,["onClick"])])])}),128))]))])):k("",!0),e("div",ne,[t[15]||(t[15]=e("h3",{class:"text-3xl font-extrabold text-gray-800"},"Kudos I've Received ðŸ’–",-1)),e("div",ue,[e("div",pe,[e("p",ce,r(D.value),1),t[11]||(t[11]=e("p",{class:"text-sm text-gray-500"},"Total Kudos",-1))]),e("div",ge,[e("p",me,r(T.value),1),t[12]||(t[12]=e("p",{class:"text-sm text-gray-500"},"Approved Kudos",-1))]),e("div",xe,[e("p",ve,r(W.value),1),t[13]||(t[13]=e("p",{class:"text-sm text-gray-500"},"Pending Kudos",-1))])]),u.value.length===0?(a(),o("div",ye," You haven't received any kudos yet. Keep up the great work! ")):(a(),o("div",fe,[(a(!0),o(y,null,F(u.value,s=>{var l,g;return a(),o("div",{key:s.id,class:"bg-white rounded-xl shadow-lg p-6 transition-all duration-300 hover:shadow-xl"},[e("div",_e,[e("div",we,[t[14]||(t[14]=e("span",{class:"text-3xl"},"ðŸŽ‰",-1)),e("div",null,[e("div",be,"From: "+r(((l=s.sender)==null?void 0:l.name)||"N/A"),1),e("div",he,"Project: "+r(((g=s.project)==null?void 0:g.name)||"N/A"),1)])]),e("span",{class:V(["ml-4 inline-flex items-center rounded-full px-3 py-1 text-sm font-bold",s.is_approved?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800 animate-pulse"])},r(s.is_approved?"Approved":"Pending Approval"),3)]),e("p",ke,'"'+r(s.comment)+'"',1)])}),128))]))])],64))])]),p(G,{show:w.value,maxWidth:"4xl",onClose:j},{default:c(()=>[e("div",{class:"flex items-start justify-between mb-4"},[t[16]||(t[16]=e("h3",{class:"text-xl font-semibold text-gray-900"},"Kudos Feature Walkthrough",-1)),e("button",{class:"text-gray-500 hover:text-gray-700",onClick:j},"âœ•")]),e("div",Ke,[e("div",Ce,[(a(),o("iframe",{key:C.value,class:"absolute top-0 left-0 w-full h-full rounded-md",src:"https://drive.google.com/file/d/1uuXdPbxiBqe19oAyZb7P5Sdq98iY_V2Y/preview",width:"640",height:"480",allow:"autoplay",allowfullscreen:""}))])])]),_:1},8,["show"])]),_:1})],64))}};export{ze as default};
