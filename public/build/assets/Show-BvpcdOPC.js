import{_ as w}from"./AuthenticatedLayout-n0IvGKBU.js";import{s as k,r as j,c as U,o as i,a as l,b as e,i as r,e as x,h as u,n as y,m as f,t as n,F as p,j as g,g as h,q as N}from"./app-CCIvBE0H.js";import"./PrimaryButton-CKeyix5K.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Modal-N--bAL5c.js";import"./InputLabel-D4oa12P3.js";import"./InputError-B_Om2v21.js";import"./SecondaryButton-C9FY9eVA.js";import"./TextInput-DQOEgA7h.js";import"./SelectDropdown-C0DfOAIs.js";import"./Checkbox-BWcUN7oK.js";import"./ApplicationLogo-BfKXbvyl.js";import"./DangerButton-BBu2jm3k.js";const R={class:"font-semibold text-xl text-gray-800 leading-tight"},C={class:"py-12"},A={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},B={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},E={class:"p-6 bg-white border-b border-gray-200"},P={class:"mb-6"},S={class:"flex justify-between items-center mb-4"},$={class:"flex space-x-2"},V={class:"bg-gray-50 p-4 rounded-lg mb-6"},D={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},F={class:"mt-1 text-sm text-gray-900"},T={class:"mt-1 text-sm text-gray-900"},q={class:"md:col-span-2"},z={class:"mt-1 text-sm text-gray-900"},L={key:0,class:"text-sm text-gray-500 p-4 bg-gray-50 rounded-lg"},M={key:1},O={class:"font-medium text-gray-700 mb-2"},G={class:"bg-gray-50 p-4 rounded-lg"},H={class:"flex flex-wrap gap-2"},I={class:"mt-6"},J={key:0,class:"mb-6"},K={class:"overflow-x-auto"},Q={class:"min-w-full divide-y divide-gray-200"},W={class:"bg-white divide-y divide-gray-200"},X={class:"px-6 py-4 whitespace-nowrap"},Y={class:"text-sm font-medium text-gray-900"},Z={class:"px-6 py-4 whitespace-nowrap"},ee={class:"text-sm text-gray-500"},te={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},se=["onClick"],oe={key:1,class:"mb-6"},ie={class:"overflow-x-auto"},re={class:"min-w-full divide-y divide-gray-200"},ne={class:"bg-white divide-y divide-gray-200"},ae={class:"px-6 py-4 whitespace-nowrap"},de={class:"text-sm font-medium text-gray-900"},le={class:"px-6 py-4 whitespace-nowrap"},ce={class:"text-sm text-gray-500"},me={class:"px-6 py-4 whitespace-nowrap"},pe={class:"text-sm text-gray-500"},ge={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},xe=["onClick"],ue={key:2,class:"text-sm text-gray-500 p-4 bg-gray-50 rounded-lg"},ye={class:"flex items-center justify-end mt-6"},Be={__name:"Show",props:{role:Object,applicationUsers:Array,projectUsers:Array},setup(o){const c=o,_=k(()=>!c.role.permissions||c.role.permissions.length===0?{}:c.role.permissions.reduce((a,t)=>{const s=t.category||"Uncategorized";return a[s]||(a[s]=[]),a[s].push(t),a},{})),m=j(!1),v=(a,t,s=null)=>{if(m.value)return;m.value=!0;const d={user_id:a,role_id:c.role.id,role_type:t};s&&(d.project_id=s),N.post(route("admin.roles.revoke-user"),d,{preserveScroll:!0,onSuccess:()=>{m.value=!1},onError:()=>{m.value=!1}})};return(a,t)=>(i(),U(w,null,{header:l(()=>[e("h2",R," Role Details: "+n(o.role.name),1)]),default:l(()=>[e("div",C,[e("div",A,[e("div",B,[e("div",E,[e("div",P,[e("div",S,[t[2]||(t[2]=e("h3",{class:"text-lg font-medium text-gray-900"},"Role Information",-1)),e("div",$,[x(u(y),{href:a.route("admin.roles.edit",o.role.id),class:"inline-flex items-center px-4 py-2 bg-indigo-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-700 active:bg-indigo-900 focus:outline-none focus:border-indigo-900 focus:ring focus:ring-indigo-300 disabled:opacity-25 transition"},{default:l(()=>t[0]||(t[0]=[f(" Edit Role ",-1)])),_:1,__:[0]},8,["href"]),x(u(y),{href:a.route("admin.roles.permissions",o.role.id),class:"inline-flex items-center px-4 py-2 bg-green-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-700 active:bg-green-900 focus:outline-none focus:border-green-900 focus:ring focus:ring-green-300 disabled:opacity-25 transition"},{default:l(()=>t[1]||(t[1]=[f(" Manage Permissions ",-1)])),_:1,__:[1]},8,["href"])])]),e("div",V,[e("div",D,[e("div",null,[t[3]||(t[3]=e("h4",{class:"text-sm font-medium text-gray-500"},"Name",-1)),e("p",F,n(o.role.name),1)]),e("div",null,[t[4]||(t[4]=e("h4",{class:"text-sm font-medium text-gray-500"},"Slug",-1)),e("p",T,n(o.role.slug),1)]),e("div",q,[t[5]||(t[5]=e("h4",{class:"text-sm font-medium text-gray-500"},"Description",-1)),e("p",z,n(o.role.description||"No description provided"),1)])])]),t[6]||(t[6]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Permissions",-1)),o.role.permissions.length===0?(i(),r("div",L," This role has no permissions assigned. ")):(i(),r("div",M,[(i(!0),r(p,null,g(_.value,(s,d)=>(i(),r("div",{key:d,class:"mb-6"},[e("h4",O,n(d),1),e("div",G,[e("div",H,[(i(!0),r(p,null,g(s,b=>(i(),r("span",{key:b.id,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},n(b.name),1))),128))])])]))),128))]))]),e("div",I,[t[11]||(t[11]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Users with this Role",-1)),o.applicationUsers&&o.applicationUsers.length>0?(i(),r("div",J,[t[8]||(t[8]=e("h4",{class:"font-medium text-gray-700 mb-2"},"Application Users",-1)),e("div",K,[e("table",Q,[t[7]||(t[7]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Name "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Email "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",W,[(i(!0),r(p,null,g(o.applicationUsers,s=>(i(),r("tr",{key:s.id},[e("td",X,[e("div",Y,n(s.name),1)]),e("td",Z,[e("div",ee,n(s.email),1)]),e("td",te,[e("button",{onClick:d=>v(s.id,"application"),class:"text-red-600 hover:text-red-900"}," Revoke ",8,se)])]))),128))])])])])):h("",!0),o.projectUsers&&o.projectUsers.length>0?(i(),r("div",oe,[t[10]||(t[10]=e("h4",{class:"font-medium text-gray-700 mb-2"},"Project Users",-1)),e("div",ie,[e("table",re,[t[9]||(t[9]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Name "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Email "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Project "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",ne,[(i(!0),r(p,null,g(o.projectUsers,s=>(i(),r("tr",{key:`${s.id}-${s.project_id}`},[e("td",ae,[e("div",de,n(s.name),1)]),e("td",le,[e("div",ce,n(s.email),1)]),e("td",me,[e("div",pe,n(s.project_name),1)]),e("td",ge,[e("button",{onClick:d=>v(s.id,"project",s.project_id),class:"text-red-600 hover:text-red-900"}," Revoke ",8,xe)])]))),128))])])])])):h("",!0),(!o.applicationUsers||o.applicationUsers.length===0)&&(!o.projectUsers||o.projectUsers.length===0)?(i(),r("div",ue," No users have been assigned this role. ")):h("",!0)]),e("div",ye,[x(u(y),{href:a.route("admin.roles.index"),class:"inline-flex items-center px-4 py-2 bg-gray-300 border border-transparent rounded-md font-semibold text-xs text-gray-800 uppercase tracking-widest hover:bg-gray-400 active:bg-gray-500 focus:outline-none focus:border-gray-500 focus:ring focus:ring-gray-300 disabled:opacity-25 transition"},{default:l(()=>t[12]||(t[12]=[f(" Back to Roles ",-1)])),_:1,__:[12]},8,["href"])])])])])])]),_:1}))}};export{Be as default};
