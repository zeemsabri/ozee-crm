import{a,o as l,b as t,r as d,f as X,e as rt,c as dt,d as m,u as g,h as ut,w as q,g as z,i as x,v as f,x as V,t as r,F as b,l as j,s as Q,J as W,m as p,j as M,K as ct,G as F}from"./app-06bZY6Z_.js";import{R as pt,_ as mt}from"./AuthenticatedLayout-CVn6E8pU.js";import{_ as gt}from"./MultiSelectDropdown-CIF2s0GV.js";import"./auto-BIBwKD9g.js";import{C as xt}from"./chart-DUfl3Dpl.js";import{_ as ft}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as bt}from"./ClockIcon-CMxGKuT1.js";import{r as yt}from"./PlusIcon-wJt6AIwP.js";import{r as Z}from"./ChevronDownIcon-BB3I7Oc4.js";import{r as vt}from"./CheckCircleIcon-B9ipOIo2.js";import{r as O,a as ht}from"./NoticeboardModal-Bue-1Lqz.js";import"./PrimaryButton-CbjFGbwq.js";import"./Modal-C5ZhgWOf.js";import"./InputLabel-iVOZOC-6.js";import"./InputError-5wKQKQ7U.js";import"./SecondaryButton-DYO030r8.js";import"./index-oeU046nW.js";import"./BaseFormModal-Dl3fWC_4.js";import"./TextInput-m8o-eqEc.js";import"./SelectDropdown-3qWSmFpy.js";/* empty css                                                                       */import"./debounce-C-hnF4Z3.js";import"./ApplicationLogo-dHlw4iFv.js";import"./createLucideIcon-DBeR4H4x.js";import"./plus-C-VYOria.js";import"./DangerButton-Cmqc6WA1.js";import"./moment-BLMuvzoS.js";function wt(v,u){return l(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"})])}function J(v,u){return l(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m4.5 15.75 7.5-7.5 7.5 7.5"})])}function _t(v,u){return l(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.72 13.829c-.24.03-.48.062-.72.096m.72-.096a42.415 42.415 0 0 1 10.56 0m-10.56 0L6.34 18m10.94-4.171c.24.03.48.062.72.096m-.72-.096L17.66 18m0 0 .229 2.523a1.125 1.125 0 0 1-1.12 1.227H7.231c-.662 0-1.18-.568-1.12-1.227L6.34 18m11.318 0h1.091A2.25 2.25 0 0 0 21 15.75V9.456c0-1.081-.768-2.015-1.837-2.175a48.055 48.055 0 0 0-1.913-.247M6.34 18H5.25A2.25 2.25 0 0 1 3 15.75V9.456c0-1.081.768-2.015 1.837-2.175a48.041 48.041 0 0 1 1.913-.247m10.5 0a48.536 48.536 0 0 0-10.5 0m10.5 0V3.375c0-.621-.504-1.125-1.125-1.125h-8.25c-.621 0-1.125.504-1.125 1.125v3.659M18 10.5h.008v.008H18V10.5Zm-3 0h.008v.008H15V10.5Z"})])}function kt(v,u){return l(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z"})])}const Ct={class:"h-64 w-full"},jt=["id"],K={__name:"ChartComponent",props:{data:{type:Object,required:!0},title:{type:String,default:"Productivity Chart"},chartId:{type:String,default:"productivity-chart"},type:{type:String,default:"bar"}},setup(v){const u=v,y=d(null);let w=null;const D=()=>{w&&w.destroy(),y.value&&(w=new xt(y.value,{type:u.type,data:u.data,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"},title:{display:!!u.title,text:u.title}},scales:u.type==="pie"||u.type==="doughnut"?{}:{y:{beginAtZero:!0,title:{display:!0,text:"Hours"}}}}}))};return X(()=>{D()}),rt(()=>u.data,()=>{D()},{deep:!0}),(h,$)=>(l(),a("div",Ct,[t("canvas",{ref_key:"chartRef",ref:y,id:v.chartId},null,8,jt)]))}},Mt={class:"flex justify-between items-center print:hidden"},Dt={class:"flex space-x-2"},St={class:"py-12 print:py-0 print:m-0"},At={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 space-y-6 print:w-full print:max-w-none print:px-0"},Tt={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-6 print:hidden"},Vt={class:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end"},$t={class:"col-span-1 md:col-span-2"},Et={class:"mt-4 flex justify-end"},Pt=["disabled"],Ft={key:0},Ut={key:1},Ht={class:"hidden print:block text-center mb-6"},Lt={class:"text-gray-600"},Nt={key:0,class:"grid grid-cols-1 md:grid-cols-3 gap-6 print:break-inside-avoid"},Bt={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-6 col-span-2 print:border print:shadow-none"},Rt={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-6 print:border print:shadow-none"},It={key:1,class:"text-center py-10 text-gray-500"},qt={key:2,class:"text-center py-10 print:hidden"},zt={key:3,class:"space-y-4"},Gt=["onClick"],Qt={class:"flex items-center space-x-4"},Wt=["src"],Zt={class:"text-lg font-medium text-gray-900"},Ot={class:"text-sm text-gray-500"},Jt={class:"flex items-center space-x-4"},Kt=["onClick"],Xt={class:"text-right"},Yt={class:"text-2xl font-bold text-indigo-600 print:text-black"},te={class:"border-t border-gray-200 bg-gray-50 p-6 space-y-4 print:bg-white print:block"},ee={key:0,class:"text-sm text-gray-500 italic"},se={key:1,class:"overflow-x-auto"},oe={class:"min-w-full text-sm text-left text-gray-500"},ne={class:"text-gray-700 uppercase bg-gray-100 print:bg-gray-50"},le={class:"px-3 py-3 text-right"},ae={class:"flex items-center justify-end gap-1"},ie={class:"divide-y divide-gray-200"},re={class:"bg-white hover:bg-gray-50"},de=["onClick"],ue={class:"px-3 py-3 align-top"},ce={class:"font-medium text-indigo-600 print:text-black"},pe={class:"text-xs text-gray-500 mt-1"},me={key:0,class:"text-xs text-gray-400 mt-1 line-clamp-2 print:line-clamp-none"},ge={class:"px-3 py-3 align-top space-y-1"},xe={class:"flex flex-col gap-1"},fe={class:"text-xs border border-gray-200 rounded px-2 py-1 inline-block bg-gray-50"},be={class:"text-[10px] font-semibold uppercase tracking-wider text-gray-500"},ye={class:"text-xs"},ve={key:0,class:"text-[10px] font-bold uppercase bg-red-100 px-1 rounded"},he={class:"px-3 py-3 text-center align-top"},we={class:"inline-flex flex-col items-center group relative"},_e=["title"],ke={key:0,class:"absolute top-full mt-2 left-1/2 transform -translate-x-1/2 w-48 bg-gray-800 text-white text-xs rounded p-2 z-50 hidden group-hover:block shadow-lg"},Ce={class:"text-[10px]"},je={key:1,class:"mt-2 text-left w-full text-xs text-gray-500 print:block hidden"},Me={class:"px-3 py-3 text-right align-top"},De=["value","onChange"],Se={class:"hidden print:block font-mono"},Ae={class:"px-3 py-3 text-right font-mono align-top"},Te={key:0,class:"text-orange-500 flex justify-end mt-1",title:"Contains auto-capped sessions"},Ve={class:"px-3 py-3 text-right align-top"},$e=["value","onChange"],Ee={class:"hidden print:block font-mono"},Pe={class:"px-3 py-3 text-right font-bold text-gray-900 align-top"},Fe={key:0,class:"bg-gray-50 print:bg-white"},Ue={colspan:"8",class:"px-4 py-3 border-t border-gray-100"},He={class:"w-full text-xs text-left text-gray-500 inner-table"},Le={class:"py-1 font-mono"},Ne={class:"py-1 font-mono"},Be={class:"py-1 font-medium"},Re={class:"py-1"},Ie={key:0,class:"text-orange-600 flex items-center gap-1"},qe={key:1,class:"text-green-600 font-bold"},ze={key:2},Ge={class:"space-y-6 text-sm text-gray-700"},Qe={class:"flex justify-center bg-gray-100 p-1 rounded-lg mb-4"},We={class:"border-t pt-4"},Ze={class:"space-y-4"},Oe={class:"bg-gray-100 p-4 rounded text-center"},Je={class:"text-3xl font-bold text-indigo-600"},Ke={class:"border-t pt-4"},Xe={class:"space-y-4"},Ye={class:"bg-gray-100 p-4 rounded text-center"},ts={class:"text-3xl font-bold text-green-600"},es={key:1,class:"fixed inset-0 z-[100] overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},ss={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},os={class:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6"},ns={class:"hidden sm:block absolute top-0 right-0 pt-4 pr-4"},ls={class:"sm:flex sm:items-start"},as={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},is={class:"mt-2 text-sm text-gray-500 mb-4"},rs={class:"font-bold"},ds=["value"],us={class:"grid grid-cols-2 gap-4"},cs={__name:"Index",setup(v){const u=d([]),y=d({}),w=d([]),D=d([]);d({user_ids:[],date_start:"",date_end:""});const h=d(!1),$=d([]),_=d(""),k=d(""),E=d(!1),c=d({user_id:null,user_name:"",name:"",project_id:"",hours:"",date:""}),Y=n=>{c.value={user_id:n.user_id,user_name:n.user_name,name:"",project_id:"",hours:"",date:new Date().toISOString().split("T")[0]},E.value=!0},U=()=>{E.value=!1},tt=async()=>{if(!(!c.value.name||!c.value.hours))try{await window.axios.post("/api/tasks/manual-effort",{name:c.value.name,assigned_to_user_id:c.value.user_id,project_id:c.value.project_id||null,manual_effort_override:parseFloat(c.value.hours),date:c.value.date}),E.value=!1,R()}catch(n){console.error("Failed to create manual entry",n),alert("Failed to save entry. Please check fields.")}},H=n=>{if(n==null)return"-";const e=Math.abs(n),s=Math.floor(e/3600),o=Math.floor(e%3600/60);return`${s}h ${o}m`},S=d({}),et=n=>{S.value[n]=!S.value[n]},C=d("developer"),L=d(1),N=d(1),B=d(1),G=dt(()=>{if(C.value==="admin"){const s=B.value;return s===1?1:s===2?2:s===3?3:5}const n=L.value*N.value;return[1,2,3,5,8,13].reduce((s,o)=>Math.abs(o-n)<Math.abs(s-n)?o:s)}),P=d(!1),A=d({}),st=n=>{A.value[n]=!A.value[n]},R=async()=>{h.value=!0;try{const n=await window.axios.get("/api/productivity/report",{params:{user_ids:$.value.join(","),date_start:_.value,date_end:k.value}});u.value=n.data.reportData.details,y.value=n.data.reportData.charts,w.value=n.data.users,D.value=n.data.projects||[],!_.value&&n.data.filters.date_start&&(_.value=n.data.filters.date_start),!k.value&&n.data.filters.date_end&&(k.value=n.data.filters.date_end),u.value.length===1&&(S.value[u.value[0].user_id]=!0)}catch(n){console.error("Error fetching productivity report:",n)}finally{h.value=!1}},ot=async(n,e,s)=>{const o=s.target.value,i=o===""?null:parseFloat(o);n.manual_effort_override=i,i!==null&&!isNaN(i)?n.used_seconds=i*3600:n.used_seconds=n.total_seconds;let T=0;e.tasks.forEach(I=>{T+=I.used_seconds}),e.total_seconds=T,e.total_hours=(T/3600).toFixed(2);try{await window.axios.post(`/api/tasks/${n.task_id}/productivity-meta`,{manual_effort_override:i})}catch(I){console.error("Failed to update manual effort",I)}},nt=async(n,e)=>{const s=e.target.value;try{await window.axios.post(`/api/tasks/${n.task_id}/productivity-meta`,{effort:s})}catch(o){console.error("Failed to update effort",o)}};X(()=>{R()});const lt=()=>{R()},at=n=>!n.subtasks||!Array.isArray(n.subtasks)||n.subtasks.length===0?"No items":n.subtasks.map(e=>`${e.status==="done"?"✅":"⬜"} ${e.name}`).join(`
`),it=()=>{window.print()};return(n,e)=>(l(),a(b,null,[m(g(ut),{title:"Productivity Report"}),m(mt,null,{header:q(()=>[t("div",Mt,[e[15]||(e[15]=t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Productivity Report",-1)),t("div",Dt,[t("button",{onClick:it,class:"inline-flex items-center px-4 py-2 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 focus:bg-gray-700 active:bg-gray-900 focus:outline-none transition ease-in-out duration-150"},[m(g(_t),{class:"h-4 w-4 mr-2"}),e[14]||(e[14]=p(" Print / PDF ",-1))])])])]),default:q(()=>[t("div",St,[t("div",At,[t("div",Tt,[t("div",Vt,[t("div",$t,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Users",-1)),m(gt,{modelValue:$.value,"onUpdate:modelValue":e[0]||(e[0]=s=>$.value=s),options:w.value,"is-multi":!0,placeholder:"Select Users...",class:"w-full"},null,8,["modelValue","options"])]),t("div",null,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Start Date",-1)),f(t("input",{type:"date","onUpdate:modelValue":e[1]||(e[1]=s=>_.value=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,512),[[V,_.value]])]),t("div",null,[e[18]||(e[18]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"End Date",-1)),f(t("input",{type:"date","onUpdate:modelValue":e[2]||(e[2]=s=>k.value=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,512),[[V,k.value]])])]),t("div",Et,[t("button",{onClick:lt,disabled:h.value,class:"inline-flex items-center px-4 py-2 bg-indigo-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-700 focus:bg-indigo-700 active:bg-indigo-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition ease-in-out duration-150"},[h.value?(l(),a("span",Ft,"Loading...")):(l(),a("span",Ut,"Generate Report"))],8,Pt)])]),t("div",Ht,[e[19]||(e[19]=t("h1",{class:"text-3xl font-bold text-gray-900"},"Productivity Report",-1)),t("p",Lt,r(_.value)+" - "+r(k.value),1)]),u.value.length>0&&y.value.daily_trend?(l(),a("div",Nt,[t("div",Bt,[e[20]||(e[20]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Productivity Trend (Daily)",-1)),m(K,{data:y.value.daily_trend,type:"line",chartId:"dailyTrendChart"},null,8,["data"])]),t("div",Rt,[e[21]||(e[21]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Time by Project",-1)),m(K,{data:y.value.project_dist,type:"pie",chartId:"projectDistChart"},null,8,["data"])])])):x("",!0),u.value.length===0&&!h.value?(l(),a("div",It,[m(g(bt),{class:"h-12 w-12 mx-auto text-gray-300 mb-2"}),e[22]||(e[22]=t("p",null,"No data found.",-1))])):x("",!0),h.value?(l(),a("div",qt,e[23]||(e[23]=[t("p",{class:"text-gray-500"},"Loading Report...",-1)]))):(l(),a("div",zt,[(l(!0),a(b,null,j(u.value,s=>(l(),a("div",{key:s.user_id,class:"bg-white overflow-hidden shadow-sm sm:rounded-lg print:shadow-none print:border-b-2 print:rounded-none"},[t("div",{onClick:o=>et(s.user_id),class:"p-6 flex items-center justify-between cursor-pointer hover:bg-gray-50 transition-colors print:cursor-default print:hover:bg-white"},[t("div",Qt,[t("img",{src:s.avatar,alt:"",class:"h-10 w-10 rounded-full bg-gray-200 print:hidden"},null,8,Wt),t("div",null,[t("h3",Zt,r(s.user_name),1),t("p",Ot,r(s.tasks.length)+" tasks worked on",1)])]),t("div",Jt,[t("button",{onClick:Q(o=>Y(s),["stop"]),class:"p-1 rounded-full hover:bg-gray-200 text-gray-400 hover:text-indigo-600 transition-colors print:hidden",title:"Add Manual Activity"},[m(g(yt),{class:"h-5 w-5"})],8,Kt),t("div",Xt,[t("div",Yt,r(s.total_hours)+" hrs",1),e[24]||(e[24]=t("div",{class:"text-xs text-gray-500"},"Total Charged Hours",-1))]),(l(),z(W(S.value[s.user_id]?g(J):g(Z)),{class:"h-5 w-5 text-gray-400 print:hidden"}))])],8,Gt),f(t("div",te,[s.tasks.length===0?(l(),a("div",ee,"No tasks recorded in this period.")):(l(),a("div",se,[t("table",oe,[t("thead",ne,[t("tr",null,[e[26]||(e[26]=t("th",{class:"px-3 py-3 w-5"},null,-1)),e[27]||(e[27]=t("th",{class:"px-3 py-3 w-1/4"},"Task / Project",-1)),e[28]||(e[28]=t("th",{class:"px-3 py-3 w-1/6"},"Info",-1)),e[29]||(e[29]=t("th",{class:"px-3 py-3 text-center"},"Checklist",-1)),t("th",le,[t("div",ae,[e[25]||(e[25]=p(" Est. Effort ",-1)),m(g(kt),{class:"h-4 w-4 text-gray-400 cursor-pointer hover:text-indigo-600",onClick:e[3]||(e[3]=o=>P.value=!0)})])]),e[30]||(e[30]=t("th",{class:"px-3 py-3 text-right"},"Logged Time",-1)),e[31]||(e[31]=t("th",{class:"px-3 py-3 text-right w-24"},"Manual (Hrs)",-1)),e[32]||(e[32]=t("th",{class:"px-3 py-3 text-right"},"Used Total",-1))])]),t("tbody",ie,[(l(!0),a(b,null,j(s.tasks,o=>(l(),a(b,{key:o.task_id},[t("tr",re,[t("td",{class:"px-3 py-3 align-top cursor-pointer text-gray-400 hover:text-gray-600",onClick:i=>st(o.task_id)},[(l(),z(W(A.value[o.task_id]?g(J):g(Z)),{class:"h-4 w-4"}))],8,de),t("td",ue,[t("div",ce,r(o.task_name),1),t("div",pe,r(o.project_name),1),o.description?(l(),a("div",me,r(o.description),1)):x("",!0)]),t("td",ge,[t("div",xe,[t("div",fe," Prio: "+r(o.priority||"Medium"),1),t("div",be,r(o.status),1)]),t("div",{class:M(["flex items-center gap-1",{"text-red-600":o.is_late,"text-gray-500":!o.is_late}])},[m(g(wt),{class:"h-3 w-3"}),t("span",ye,r(o.due_date||"No Due Date"),1),o.is_late?(l(),a("span",ve,"Late")):x("",!0)],2)]),t("td",he,[t("div",we,[t("span",{class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800 cursor-help",title:at(o)},[m(g(vt),{class:"h-3 w-3 mr-1"}),p(" "+r(o.checklist),1)],8,_e),o.subtasks&&Array.isArray(o.subtasks)&&o.subtasks.length>0?(l(),a("div",ke,[e[33]||(e[33]=t("div",{class:"mb-1 font-semibold text-gray-300 border-b border-gray-600 pb-1"},"Checklist",-1)),(l(!0),a(b,null,j(o.subtasks,i=>(l(),a("div",{key:i.id,class:"flex items-start gap-1 py-0.5 truncate"},[t("span",Ce,r(i.status==="done"?"✅":"⬜"),1),t("span",{class:M({"opacity-50 line-through":i.status==="done"})},r(i.name),3)]))),128))])):x("",!0),o.subtasks&&Array.isArray(o.subtasks)&&o.subtasks.length>0&&A.value[o.task_id]?(l(),a("div",je,[(l(!0),a(b,null,j(o.subtasks,i=>(l(),a("div",{key:i.id,class:"flex items-center gap-1"},[t("span",{class:M(["w-2 h-2 rounded-full",i.status==="done"?"bg-green-400":"bg-gray-300"])},null,2),t("span",{class:M({"line-through":i.status==="done"})},r(i.name),3)]))),128))])):x("",!0)])]),t("td",Me,[t("input",{type:"number",step:"1",value:o.effort,onChange:i=>nt(o,i),placeholder:"Pts",class:"w-16 text-xs text-right border-gray-300 rounded shadow-sm focus:border-indigo-500 focus:ring-indigo-500 p-1 print:hidden"},null,40,De),t("span",Se,r(o.effort||"-"),1)]),t("td",Ae,[p(r(H(o.total_seconds))+" ",1),o.sessions.some(i=>i.type.includes("capped"))?(l(),a("div",Te,[m(g(O),{class:"h-4 w-4"})])):x("",!0)]),t("td",Ve,[t("input",{type:"number",step:"0.1",value:o.manual_effort_override,onChange:i=>ot(o,s,i),placeholder:"-",class:"w-20 text-xs text-right border-gray-300 rounded shadow-sm focus:border-indigo-500 focus:ring-indigo-500 p-1 print:hidden"},null,40,$e),t("span",Ee,r(o.manual_effort_override||"-"),1)]),t("td",Pe,r(H(o.used_seconds)),1)]),A.value[o.task_id]?(l(),a("tr",Fe,[t("td",Ue,[e[36]||(e[36]=t("div",{class:"text-xs font-semibold text-gray-500 uppercase mb-2"},"Wait List / Activity Log",-1)),t("table",He,[e[35]||(e[35]=t("thead",null,[t("tr",{class:"border-b border-gray-200"},[t("th",{class:"py-1"},"Start"),t("th",{class:"py-1"},"End"),t("th",{class:"py-1"},"Duration"),t("th",{class:"py-1"},"Type")])],-1)),t("tbody",null,[(l(!0),a(b,null,j(o.sessions,(i,T)=>(l(),a("tr",{key:T,class:"border-b border-gray-100 last:border-0"},[t("td",Le,r(i.start),1),t("td",Ne,r(i.end),1),t("td",Be,r(H(i.duration_seconds)),1),t("td",Re,[i.type.includes("capped")?(l(),a("span",Ie,[m(g(O),{class:"h-3 w-3"}),e[34]||(e[34]=p(" Auto-Capped ",-1))])):i.type==="ongoing"?(l(),a("span",qe,"Running")):(l(),a("span",ze,"Recorded"))])]))),128))])])])])):x("",!0)],64))),128))])])]))],512),[[ct,S.value[s.user_id]||!0]])]))),128))]))])]),P.value?(l(),z(pt,{key:0,show:P.value,"onUpdate:show":e[9]||(e[9]=s=>P.value=s),title:"Effort Estimation Guide",initialWidth:30},{content:q(()=>[t("div",Ge,[t("div",Qe,[t("button",{onClick:e[4]||(e[4]=s=>C.value="developer"),class:M(["flex-1 py-1 text-xs font-semibold rounded-md transition-colors",C.value==="developer"?"bg-white text-indigo-600 shadow-sm":"text-gray-500 hover:text-gray-700"])}," Developer ",2),t("button",{onClick:e[5]||(e[5]=s=>C.value="admin"),class:M(["flex-1 py-1 text-xs font-semibold rounded-md transition-colors",C.value==="admin"?"bg-white text-indigo-600 shadow-sm":"text-gray-500 hover:text-gray-700"])}," Admin / Staff ",2)]),C.value==="developer"?(l(),a(b,{key:0},[e[43]||(e[43]=t("section",null,[t("h4",{class:"font-bold text-gray-900 text-lg mb-2"},"What are Story Points?"),t("p",{class:"mb-2"},[p("Story points estimate the "),t("span",{class:"font-semibold"},"effort"),p(" required to implement a task. They consider:")]),t("ul",{class:"list-disc pl-5 space-y-1"},[t("li",null,[t("span",{class:"font-semibold"},"Complexity:"),p(" How difficult is the logic?")]),t("li",null,[t("span",{class:"font-semibold"},"Risk:"),p(" How much uncertainty is there?")]),t("li",null,[t("span",{class:"font-semibold"},"Repetition:"),p(" How tedious is the work?")])])],-1)),e[44]||(e[44]=t("section",{class:"bg-indigo-50 p-4 rounded-lg border border-indigo-100"},[t("h4",{class:"font-bold text-indigo-900 text-md mb-3"},"Quick Reference"),t("div",{class:"grid grid-cols-1 gap-3"},[t("div",{class:"flex gap-3 items-start border-b border-indigo-200 pb-2"},[t("span",{class:"bg-indigo-600 text-white font-bold w-8 h-8 flex items-center justify-center rounded-full shrink-0"},"1"),t("div",null,[t("span",{class:"font-bold block text-indigo-900"},"Tiny / Trivial"),t("span",{class:"text-xs"},"Typo fix, color change, simple config. < 1 hour.")])]),t("div",{class:"flex gap-3 items-start border-b border-indigo-200 pb-2"},[t("span",{class:"bg-indigo-600 text-white font-bold w-8 h-8 flex items-center justify-center rounded-full shrink-0"},"2"),t("div",null,[t("span",{class:"font-bold block text-indigo-900"},"Small / Routine"),t("span",{class:"text-xs"},"Add field, update text, standard bug fix. 1-4 hours.")])]),t("div",{class:"flex gap-3 items-start border-b border-indigo-200 pb-2"},[t("span",{class:"bg-indigo-600 text-white font-bold w-8 h-8 flex items-center justify-center rounded-full shrink-0"},"3"),t("div",null,[t("span",{class:"font-bold block text-indigo-900"},"Medium"),t("span",{class:"text-xs"},"New simple feature, standard page dev, component logic. 4-8 hours (1 day).")])]),t("div",{class:"flex gap-3 items-start border-b border-indigo-200 pb-2"},[t("span",{class:"bg-indigo-600 text-white font-bold w-8 h-8 flex items-center justify-center rounded-full shrink-0"},"5"),t("div",null,[t("span",{class:"font-bold block text-indigo-900"},"Large"),t("span",{class:"text-xs"},"Complex feature, integration, heavy logic. 2-3 days.")])]),t("div",{class:"flex gap-3 items-start"},[t("span",{class:"bg-yellow-600 text-white font-bold w-8 h-8 flex items-center justify-center rounded-full shrink-0"},"8+"),t("div",null,[t("span",{class:"font-bold block text-yellow-900"},"Ex-Large (Break Down!)"),t("span",{class:"text-xs"},"Full module, major refactor. Consider splitting into smaller subtasks. 3-5+ days.")])])])],-1)),t("section",We,[e[42]||(e[42]=t("h4",{class:"font-bold text-gray-900 text-md mb-3"},"Estimation Calculator",-1)),t("div",Ze,[t("div",null,[e[38]||(e[38]=t("label",{class:"block text-xs font-semibold text-gray-500 uppercase"},"Difficulty",-1)),f(t("select",{"onUpdate:modelValue":e[6]||(e[6]=s=>L.value=s),class:"w-full mt-1 rounded border-gray-300 text-sm"},e[37]||(e[37]=[t("option",{value:1},"Low (Straightforward)",-1),t("option",{value:2},"Medium (Some Logic/Unknowns)",-1),t("option",{value:3},"High (Complex logic/High Risk)",-1)]),512),[[F,L.value]])]),t("div",null,[e[40]||(e[40]=t("label",{class:"block text-xs font-semibold text-gray-500 uppercase"},"Scope / Size",-1)),f(t("select",{"onUpdate:modelValue":e[7]||(e[7]=s=>N.value=s),class:"w-full mt-1 rounded border-gray-300 text-sm"},e[39]||(e[39]=[t("option",{value:1},"Change (Text/Style)",-1),t("option",{value:2},"Component / Function",-1),t("option",{value:3},"Page / Feature",-1),t("option",{value:5},"Module / Epic",-1)]),512),[[F,N.value]])]),t("div",Oe,[e[41]||(e[41]=t("span",{class:"text-xs text-gray-500 uppercase block mb-1"},"Suggested Points",-1)),t("span",Je,r(G.value),1)])])])],64)):(l(),a(b,{key:1},[e[49]||(e[49]=t("section",null,[t("h4",{class:"font-bold text-gray-900 text-lg mb-2"},"Admin Effort Points"),t("p",{class:"mb-2"},[p("For admin and management tasks, points are based on "),t("span",{class:"font-semibold"},"Volume"),p(" and "),t("span",{class:"font-semibold"},"Time Required"),p(".")])],-1)),e[50]||(e[50]=t("section",{class:"bg-green-50 p-4 rounded-lg border border-green-100"},[t("h4",{class:"font-bold text-green-900 text-md mb-3"},"Quick Reference (Admin)"),t("div",{class:"grid grid-cols-1 gap-3"},[t("div",{class:"flex gap-3 items-start border-b border-green-200 pb-2"},[t("span",{class:"bg-green-600 text-white font-bold w-8 h-8 flex items-center justify-center rounded-full shrink-0"},"1"),t("div",null,[t("span",{class:"font-bold block text-green-900"},"Quick Task"),t("span",{class:"text-xs"},"Email reply, filing, updating a record. < 30 mins to 1 hour.")])]),t("div",{class:"flex gap-3 items-start border-b border-green-200 pb-2"},[t("span",{class:"bg-green-600 text-white font-bold w-8 h-8 flex items-center justify-center rounded-full shrink-0"},"2"),t("div",null,[t("span",{class:"font-bold block text-green-900"},"Routine Task"),t("span",{class:"text-xs"},"Weekly meeting notes, processing stack of invoices. ~1-2 hours.")])]),t("div",{class:"flex gap-3 items-start border-b border-green-200 pb-2"},[t("span",{class:"bg-green-600 text-white font-bold w-8 h-8 flex items-center justify-center rounded-full shrink-0"},"3"),t("div",null,[t("span",{class:"font-bold block text-green-900"},"Half Day"),t("span",{class:"text-xs"},"Deep focus admin, organizing system, audits. ~3-4 hours.")])]),t("div",{class:"flex gap-3 items-start"},[t("span",{class:"bg-green-600 text-white font-bold w-8 h-8 flex items-center justify-center rounded-full shrink-0"},"5"),t("div",null,[t("span",{class:"font-bold block text-green-900"},"Full Day / Complex"),t("span",{class:"text-xs"},"Quarterly reporting, strategy planning day. Full day effort.")])])])],-1)),t("section",Ke,[e[48]||(e[48]=t("h4",{class:"font-bold text-gray-900 text-md mb-3"},"Admin Calculator",-1)),t("div",Xe,[t("div",null,[e[46]||(e[46]=t("label",{class:"block text-xs font-semibold text-gray-500 uppercase"},"Task Type / Volume",-1)),f(t("select",{"onUpdate:modelValue":e[8]||(e[8]=s=>B.value=s),class:"w-full mt-1 rounded border-gray-300 text-sm"},e[45]||(e[45]=[t("option",{value:1},"Quick Task / Ad-hoc (1 Pt)",-1),t("option",{value:2},"Routine / Batch Work (2 Pts)",-1),t("option",{value:3},"Deep Focus / Half Day (3 Pts)",-1),t("option",{value:5},"Major Project / Full Day (5 Pts)",-1)]),512),[[F,B.value]])]),t("div",Ye,[e[47]||(e[47]=t("span",{class:"text-xs text-gray-500 uppercase block mb-1"},"Suggested Points",-1)),t("span",ts,r(G.value),1)])])])],64))])]),_:1},8,["show"])):x("",!0),E.value?(l(),a("div",es,[t("div",ss,[t("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:U}),e[61]||(e[61]=t("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1)),t("div",os,[t("div",ns,[t("button",{type:"button",class:"bg-white rounded-md text-gray-400 hover:text-gray-500 focus:outline-none",onClick:U},[e[51]||(e[51]=t("span",{class:"sr-only"},"Close",-1)),m(g(ht),{class:"h-6 w-6"})])]),t("div",ls,[t("div",as,[e[60]||(e[60]=t("h3",{class:"text-lg leading-6 font-medium text-gray-900",id:"modal-title"}," Add Manual Activity ",-1)),t("div",is,[e[52]||(e[52]=p(" Log work for ",-1)),t("span",rs,r(c.value.user_name),1),e[53]||(e[53]=p(". This will create a new entry. ",-1))]),t("form",{onSubmit:Q(tt,["prevent"]),class:"space-y-4"},[t("div",null,[e[54]||(e[54]=t("label",{class:"block text-sm font-medium text-gray-700"},"Description / Task Name *",-1)),f(t("input",{type:"text","onUpdate:modelValue":e[10]||(e[10]=s=>c.value.name=s),required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",placeholder:"e.g. Client Emails, RnD"},null,512),[[V,c.value.name]])]),t("div",null,[e[56]||(e[56]=t("label",{class:"block text-sm font-medium text-gray-700"},"Project (Optional)",-1)),f(t("select",{"onUpdate:modelValue":e[11]||(e[11]=s=>c.value.project_id=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},[e[55]||(e[55]=t("option",{value:""},"- General / Internal -",-1)),(l(!0),a(b,null,j(D.value,s=>(l(),a("option",{key:s.value,value:s.value},r(s.label),9,ds))),128))],512),[[F,c.value.project_id]])]),t("div",us,[t("div",null,[e[57]||(e[57]=t("label",{class:"block text-sm font-medium text-gray-700"},"Date *",-1)),f(t("input",{type:"date","onUpdate:modelValue":e[12]||(e[12]=s=>c.value.date=s),required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,512),[[V,c.value.date]])]),t("div",null,[e[58]||(e[58]=t("label",{class:"block text-sm font-medium text-gray-700"},"Hours *",-1)),f(t("input",{type:"number",step:"0.1","onUpdate:modelValue":e[13]||(e[13]=s=>c.value.hours=s),required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",placeholder:"0.0"},null,512),[[V,c.value.hours]])])]),t("div",{class:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse"},[e[59]||(e[59]=t("button",{type:"submit",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none sm:ml-3 sm:w-auto sm:text-sm"}," Save Entry ",-1)),t("button",{type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:text-gray-500 focus:outline-none sm:mt-0 sm:w-auto sm:text-sm",onClick:U}," Cancel ")])],32)])])])])])):x("",!0)]),_:1})],64))}},Ns=ft(cs,[["__scopeId","data-v-7bb65174"]]);export{Ns as default};
