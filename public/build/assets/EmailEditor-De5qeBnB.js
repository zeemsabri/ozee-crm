import{az as U,r as s,e as C,f as v,a as V,o as k,d as x,j as R,u as T,p as _}from"./app-DDhvGD51.js";import{C as S,_ as w}from"./EmailEditor.vue_vue_type_style_index_0_lang-1W3lE522.js";const E={class:"ckeditor-wrapper"},M={__name:"EmailEditor",props:{modelValue:{type:String,default:""},placeholder:{type:String,default:"Type here..."},height:{type:String,default:"500px"}},emits:["update:modelValue"],setup(d,{emit:m}){U(a=>({"5c4549b8":d.height}));const r=d,c=m,p=s(S),l=s(r.modelValue),g=s({toolbar:{items:["heading","|","bold","italic","blockQuote","|","imageUpload","insertTable","mediaEmbed","codeBlock","|","undo","redo"]},image:{toolbar:["imageTextAlternative","imageStyle:inline","imageStyle:block","imageStyle:side"]},table:{contentToolbar:["tableColumn","tableRow","mergeTableCells"]},placeholder:r.placeholder,extraPlugins:[h]});class f{constructor(o){this.loader=o,this.uploadUrl="/api/upload-image"}upload(){return this.loader.file.then(o=>new Promise((i,n)=>{const u=new FormData;u.append("image",o),_.post(this.uploadUrl,u,{headers:{"Content-Type":"multipart/form-formdata"},onUploadProgress:e=>{e.loaded/e.total*100,this.loader.uploadTotal=e.total,this.loader.uploaded=e.loaded}}).then(e=>{const t=e.data.url;if(!t)return console.error("No image URL returned from server:",e.data),n("No image URL returned from server.");console.log("Image URL received from backend:",t),i({default:t})}).catch(e=>{console.error("Image upload failed:",e);let t="Image upload failed.";e.response&&e.response.data&&e.response.data.message&&(t=e.response.data.message),n(t)})}))}abort(){}}function h(a){a.plugins.get("FileRepository").createUploadAdapter=o=>new f(o)}C(()=>r.modelValue,a=>{l.value!==a&&(l.value=a)});const b=a=>{c("update:modelValue",l.value)},y=a=>{console.log("CKEditor 5 is ready.",a)};return v(()=>{}),(a,o)=>(k(),V("div",E,[x(T(w),{editor:p.value,modelValue:l.value,"onUpdate:modelValue":o[0]||(o[0]=i=>l.value=i),config:g.value,onReady:y,onInput:b,class:R(`ckeditor-height-${d.height.replace("px","")}`)},null,8,["editor","modelValue","config","class"])]))}};export{M as _};
