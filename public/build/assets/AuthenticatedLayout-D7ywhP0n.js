import{A as be}from"./ApplicationLogo-Ce57oLES.js";import{B as le,J as ie,s as N,r as T,i as f,o as n,b as e,f as q,e as r,A as te,K as J,a as w,n as M,T as we,c as P,L as ge,h as L,l as Q,w as G,d as re,g as j,t as D,F as H,j as O,q as ke,m as A,k as Z,x as Y,M as ue,G as xe,I as ae,_ as ne,D as _e,z as me,N as de,O as $e,P as Se,p as Ce}from"./app-CszgQ6KI.js";import{P as oe}from"./PrimaryButton-pWP2qVpn.js";import{a as ye,_ as he}from"./SecondaryButton-Bz81ILY7.js";import{_ as U,b as R,a as ee}from"./InputError-bQKpThjC.js";import{_ as Ae}from"./Checkbox-C4xet4fr.js";let ce=null;const je=d=>{ce=d},ve=(d,k="info",c=5e3)=>ce?ce.addNotification(d,k,c):(console.warn("Notification container not set. Call setNotificationContainer first."),null),Te=(d,k=5e3)=>ve(d,"success",k),Ve=(d,k=5e3)=>ve(d,"error",k),ma=(d,k=5e3)=>ve(d,"warning",k),Ee={class:"relative"},pe={__name:"Dropdown",props:{align:{type:String,default:"right"},width:{type:String,default:"48"},contentClasses:{type:String,default:"py-1 bg-white"}},setup(d){const k=d,c=u=>{m.value&&u.key==="Escape"&&(m.value=!1)};le(()=>document.addEventListener("keydown",c)),ie(()=>document.removeEventListener("keydown",c));const $=N(()=>({48:"w-48"})[k.width.toString()]),a=N(()=>k.align==="left"?"ltr:origin-top-left rtl:origin-top-right start-0":k.align==="right"?"ltr:origin-top-right rtl:origin-top-left end-0":"origin-top"),m=T(!1);return(u,_)=>(n(),f("div",Ee,[e("div",{onClick:_[0]||(_[0]=S=>m.value=!m.value)},[te(u.$slots,"trigger")]),q(e("div",{class:"fixed inset-0 z-40",onClick:_[1]||(_[1]=S=>m.value=!1)},null,512),[[J,m.value]]),r(we,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:w(()=>[q(e("div",{class:M(["absolute z-50 mt-2 rounded-md shadow-lg",[$.value,a.value]]),style:{display:"none"},onClick:_[2]||(_[2]=S=>m.value=!1)},[e("div",{class:M(["rounded-md ring-1 ring-black ring-opacity-5",d.contentClasses])},[te(u.$slots,"content")],2)],2),[[J,m.value]])]),_:3})]))}},K={__name:"DropdownLink",props:{href:{type:String,required:!0},method:{type:String,default:"get"},as:{type:String,default:"a"}},setup(d){return(k,c)=>(n(),P(L(Q),ge({href:d.href,method:d.method,as:d.as},k.$attrs,{class:"block w-full px-4 py-2 text-start text-sm leading-5 text-gray-700 transition duration-150 ease-in-out hover:bg-gray-100 focus:bg-gray-100 focus:outline-none"}),{default:w(()=>[te(k.$slots,"default")]),_:3},16,["href","method","as"]))}},Ie={__name:"NavLink",props:{href:{type:String,required:!0},active:{type:Boolean}},setup(d){const k=d,c=N(()=>k.active?"inline-flex items-center px-1 pt-1 border-b-2 border-indigo-400 text-sm font-medium leading-5 text-gray-900 focus:outline-none focus:border-indigo-700 transition duration-150 ease-in-out":"inline-flex items-center px-1 pt-1 border-b-2 border-transparent text-sm font-medium leading-5 text-gray-500 hover:text-gray-700 hover:border-gray-300 focus:outline-none focus:text-gray-700 focus:border-gray-300 transition duration-150 ease-in-out");return($,a)=>(n(),P(L(Q),{href:d.href,class:M(c.value)},{default:w(()=>[te($.$slots,"default")]),_:3},8,["href","class"]))}},F={__name:"ResponsiveNavLink",props:{href:{type:String,required:!0},active:{type:Boolean},method:{type:String,default:"get"},as:{type:String,default:"a"}},setup(d){const k=d,c=N(()=>k.active?"block w-full ps-3 pe-4 py-2 border-l-4 border-indigo-400 text-start text-base font-medium text-indigo-700 bg-indigo-50 focus:outline-none focus:text-indigo-800 focus:bg-indigo-100 focus:border-indigo-700 transition duration-150 ease-in-out":"block w-full ps-3 pe-4 py-2 border-l-4 border-transparent text-start text-base font-medium text-gray-600 hover:text-gray-800 hover:bg-gray-50 hover:border-gray-300 focus:outline-none focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300 transition duration-150 ease-in-out");return($,a)=>(n(),P(L(Q),ge({href:d.href,method:d.method,as:d.as},$.$attrs,{class:c.value}),{default:w(()=>[te($.$slots,"default")]),_:3},16,["href","method","as","class"]))}},Me={class:"p-6"},Pe={class:"mt-6"},De={key:0,class:"mb-4 p-4 bg-green-100 border border-green-400 text-green-700 rounded"},Le={key:1,class:"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded"},Be={class:"flex items-center mb-3"},Ue=["id","onUpdate:modelValue"],Ne=["for"],ze={key:0,class:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800"},Re={key:0},We={class:"mb-4"},qe={class:"flex items-center"},Fe=["id","checked","onChange"],He=["for"],Ke={key:0,class:"mb-4"},Oe=["id","onUpdate:modelValue"],Ye={key:1,class:"mb-4"},Ge={class:"flex-1"},Je=["id","onUpdate:modelValue"],Qe={class:"flex-1"},Xe=["id","onUpdate:modelValue"],Ze={key:0,class:"flex items-end pb-1"},et=["onClick"],tt=["onClick"],st={class:"mt-6 flex justify-end space-x-3"},at={key:0,class:"flex items-center"},lt={key:1},ot={__name:"AvailabilityModal",props:{show:Boolean,date:{type:String,default:()=>{const d=new Date;return d.setDate(d.getDate()+1),d.toISOString().split("T")[0]}},nextWeekDates:{type:Array,default:()=>[]},userId:{type:Number,default:null}},emits:["close","availability-saved"],setup(d,{emit:k}){const c=()=>{const y=localStorage.getItem("authToken");y&&!Y.defaults.headers.common.Authorization&&(Y.defaults.headers.common.Authorization=`Bearer ${y}`,console.log("Auth headers set in AvailabilityModal"))},$=d,a=k,m=T({}),u=T({}),_=T(!1),S=T(""),h=()=>{const y=[],v=new Date,t=new Date(v);t.setDate(v.getDate()+1);for(let s=0;s<7;s++){const i=new Date(t);i.setDate(t.getDate()+s);const p=i.toISOString().split("T")[0];y.push({value:p,label:i.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})}),m.value[p]={isSelected:!1,isAvailable:!0,reason:"",timeSlots:[{start_time:"",end_time:""}]}}return y},g=T([]);le(()=>{c(),$.nextWeekDates.length>0?(g.value=$.nextWeekDates,$.nextWeekDates.forEach(y=>{m.value[y.value]={isSelected:!1,isAvailable:!0,reason:"",timeSlots:[{start_time:"",end_time:""}]}})):g.value=h()});const x=async()=>{try{if(c(),g.value.length===0)return;const y=g.value[0].value,v=g.value[g.value.length-1].value,t=await Y.get("/api/availabilities",{params:{start_date:y,end_date:v,user_id:$.userId}});if(t.data&&t.data.availabilities){const s=t.data.availabilities;g.value.forEach(i=>{m.value[i.value]={isSelected:!1,isAvailable:!0,reason:"",timeSlots:[{start_time:"",end_time:""}]}}),s.forEach(i=>{const p=i.date.split("T")[0];m.value[p]&&(m.value[p].isSelected=!0,m.value[p].isAvailable=i.is_available,i.is_available?m.value[p].timeSlots=i.time_slots&&i.time_slots.length>0?[...i.time_slots]:[{start_time:"",end_time:""}]:m.value[p].reason=i.reason||"")})}}catch(y){console.error("Error fetching existing availabilities:",y),g.value.forEach(v=>{m.value[v.value]={isSelected:!1,isAvailable:!0,reason:"",timeSlots:[{start_time:"",end_time:""}]}})}};G(()=>$.show,async y=>{y&&(u.value={},S.value="",await x())},{immediate:!0});const V=y=>{m.value[y].timeSlots.push({start_time:"",end_time:""})},z=(y,v)=>{m.value[y].timeSlots.length>1&&m.value[y].timeSlots.splice(v,1)},E=(y,v)=>{m.value[y].isAvailable=v,v?m.value[y].reason="":m.value[y].timeSlots=[{start_time:"",end_time:""}]},b=async()=>{_.value=!0,u.value={},S.value="";const y=[];let v=!1;for(const t of g.value){const s=t.value,i=m.value[s];if(i.isSelected){let p={};if(i.isAvailable)if(i.timeSlots.some(o=>!o.start_time||!o.end_time))p.timeSlots="Please fill in all time slots.",v=!0;else for(const o of i.timeSlots){const l=o.start_time.split(":").map(Number),I=o.end_time.split(":").map(Number);if(l.length!==2||I.length!==2||isNaN(l[0])||isNaN(l[1])||isNaN(I[0])||isNaN(I[1])){p.timeSlots="Invalid time format. Please use HH:MM format.",v=!0;break}const C=l[0]*60+l[1],B=I[0]*60+I[1];if(C>=B){p.timeSlots="End time must be after start time.",v=!0;break}}else i.reason.trim()||(p.reason="Please provide a reason for unavailability.",v=!0);Object.keys(p).length>0&&(u.value[s]=p),Object.keys(p).length===0&&y.push({date:s,is_available:i.isAvailable,reason:i.isAvailable?null:i.reason,time_slots:i.isAvailable?i.timeSlots:null})}}if(v){_.value=!1,u.value.general="Please correct the errors in the highlighted dates.";return}if(y.length===0){u.value.general="Please select at least one day to set availability for.",_.value=!1;return}try{c();const t=await Y.post("/api/availabilities/batch",{availabilities:y});S.value="Availability saved successfully!";try{const s=await Y.get("/api/availability-prompt");localStorage.setItem("shouldBlockUser",s.data.should_block_user),localStorage.setItem("allWeekdaysCovered",s.data.all_weekdays_covered);const i=new CustomEvent("availability-status-updated",{detail:{shouldBlockUser:s.data.should_block_user,allWeekdaysCovered:s.data.all_weekdays_covered}});window.dispatchEvent(i),console.log("Availability status updated from modal:",{shouldBlockUser:s.data.should_block_user,allWeekdaysCovered:s.data.all_weekdays_covered})}catch(s){console.error("Error updating availability status:",s)}a("availability-saved",t.data.availabilities),setTimeout(()=>{a("close")},1500)}catch(t){console.error("Error saving availability:",t),t.response&&t.response.data&&t.response.data.errors?u.value.general=t.response.data.message||"An error occurred while saving your availability.":t.response&&t.response.status===409?(S.value=t.response.data.message,setTimeout(()=>{a("close")},1500)):u.value.general="An unexpected error occurred while saving your availability."}finally{_.value=!1}};return(y,v)=>(n(),P(he,{show:d.show,onClose:v[1]||(v[1]=t=>y.$emit("close")),"max-width":"xl"},{default:w(()=>[e("div",Me,[v[6]||(v[6]=e("h2",{class:"text-lg font-medium text-gray-900"}," Submit Your Weekly Availability ",-1)),v[7]||(v[7]=e("p",{class:"mt-1 text-sm text-gray-600"}," Please select the dates you wish to set availability for and provide your details for each. ",-1)),e("div",Pe,[e("form",{onSubmit:re(b,["prevent"])},[S.value?(n(),f("div",De,D(S.value),1)):j("",!0),u.value.general?(n(),f("div",Le,D(u.value.general),1)):j("",!0),(n(!0),f(H,null,O(g.value,t=>{var s,i;return n(),f("div",{key:t.value,class:M(["mb-6 p-4 border rounded-lg shadow-sm",[m.value[t.value].isSelected?"border-indigo-300 bg-indigo-50":"border-gray-200",m.value[t.value].isSelected&&!u.value[t.value]?"border-l-4 border-l-indigo-500":""]])},[e("div",Be,[q(e("input",{type:"checkbox",id:`select_date_${t.value}`,"onUpdate:modelValue":p=>m.value[t.value].isSelected=p,class:"rounded border-gray-300 text-indigo-600 shadow-sm focus:ring-indigo-500"},null,8,Ue),[[ke,m.value[t.value].isSelected]]),e("label",{for:`select_date_${t.value}`,class:"ml-2 block text-base font-medium text-gray-800"},[A(D(t.label)+" ",1),m.value[t.value].isSelected?(n(),f("span",ze," Saved ")):j("",!0)],8,Ne)]),m.value[t.value].isSelected?(n(),f("div",Re,[e("div",We,[e("div",qe,[e("input",{type:"checkbox",id:`isAvailableToggle_${t.value}`,checked:m.value[t.value].isAvailable,onChange:p=>E(t.value,p.target.checked),class:"rounded border-gray-300 text-indigo-600 shadow-sm focus:ring-indigo-500"},null,40,Fe),e("label",{for:`isAvailableToggle_${t.value}`,class:"ml-2 block text-sm text-gray-700"}," I am available on this day ",8,He)])]),m.value[t.value].isAvailable?j("",!0):(n(),f("div",Ke,[r(U,{for:`reason_${t.value}`,value:"Reason for Not Available"},null,8,["for"]),q(e("textarea",{id:`reason_${t.value}`,"onUpdate:modelValue":p=>m.value[t.value].reason=p,rows:"2",class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",placeholder:"e.g., Out of office, Holiday, Meeting all day"},null,8,Oe),[[Z,m.value[t.value].reason]]),r(R,{message:(s=u.value[t.value])==null?void 0:s.reason,class:"mt-2"},null,8,["message"])])),m.value[t.value].isAvailable?(n(),f("div",Ye,[r(U,{value:"Available Time Slots"}),r(R,{message:(i=u.value[t.value])==null?void 0:i.timeSlots,class:"mt-2"},null,8,["message"]),(n(!0),f(H,null,O(m.value[t.value].timeSlots,(p,o)=>(n(),f("div",{key:o,class:"flex items-center space-x-2 mt-2"},[e("div",Ge,[r(U,{for:`start_time_${t.value}_${o}`,value:"Start Time",class:"text-xs"},null,8,["for"]),q(e("input",{id:`start_time_${t.value}_${o}`,type:"time","onUpdate:modelValue":l=>p.start_time=l,class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm"},null,8,Je),[[Z,p.start_time]])]),e("div",Qe,[r(U,{for:`end_time_${t.value}_${o}`,value:"End Time",class:"text-xs"},null,8,["for"]),q(e("input",{id:`end_time_${t.value}_${o}`,type:"time","onUpdate:modelValue":l=>p.end_time=l,class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm"},null,8,Xe),[[Z,p.end_time]])]),m.value[t.value].timeSlots.length>1?(n(),f("div",Ze,[e("button",{type:"button",onClick:l=>z(t.value,o),class:"p-2 text-red-600 hover:text-red-800"},v[2]||(v[2]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm6 0a1 1 0 012 0v6a1 1 0 11-2 0V8z","clip-rule":"evenodd"})],-1)]),8,et)])):j("",!0)]))),128)),e("button",{type:"button",onClick:p=>V(t.value),class:"mt-3 w-full flex items-center justify-center px-4 py-2 border border-dashed border-indigo-300 rounded-lg text-indigo-600 hover:bg-indigo-50 transition duration-150 ease-in-out"},v[3]||(v[3]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z","clip-rule":"evenodd"})],-1),A(" Add Another Time Slot ",-1)]),8,tt)])):j("",!0)])):j("",!0)],2)}),128)),e("div",st,[r(ye,{onClick:v[0]||(v[0]=t=>y.$emit("close"))},{default:w(()=>v[4]||(v[4]=[A(" Cancel ",-1)])),_:1,__:[4]}),r(oe,{disabled:_.value,class:M({"opacity-50":_.value})},{default:w(()=>[_.value?(n(),f("span",at,v[5]||(v[5]=[e("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),A(" Saving... ",-1)]))):(n(),f("span",lt,"Save Availability"))]),_:1},8,["disabled","class"])])],32)])])]),_:1},8,["show"]))}},nt={key:0,class:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center"},it={class:"bg-white rounded-lg shadow-xl p-6 max-w-lg w-full mx-4"},rt={class:"flex justify-center"},dt={__name:"AvailabilityBlocker",setup(d){const k=T(!1),c=T(!0),$=T(!1),a=T([]),m=N(()=>{var b;return((b=ue().props.auth.user)==null?void 0:b.id)||null}),u=()=>{const b=localStorage.getItem("authToken");b&&!Y.defaults.headers.common.Authorization&&(Y.defaults.headers.common.Authorization=`Bearer ${b}`)},_=async()=>{c.value=!0;const b=localStorage.getItem("shouldBlockUser"),y=localStorage.getItem("allWeekdaysCovered");if(b==="true"&&y==="false")k.value=!0,await S();else try{u();const v=await Y.get("/api/availability-prompt");k.value=v.data.should_block_user&&!v.data.all_weekdays_covered,k.value&&await S()}catch(v){console.error("Error checking if user should be blocked:",v),k.value=!1}c.value=!1},S=async()=>{try{u();const b=await Y.get("/api/availability-prompt");h(b.data.next_week_start,b.data.next_week_end)}catch(b){console.error("Error fetching next week dates:",b)}},h=(b,y)=>{const v=[],t=new Date(b),s=new Date(y),i=new Date(t);for(;i<=s;)v.push({value:i.toISOString().split("T")[0],label:i.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})}),i.setDate(i.getDate()+1);a.value=v},g=()=>{$.value=!0},x=()=>{_()},V=b=>{k.value=b.detail.shouldBlockUser&&!b.detail.allWeekdaysCovered},z=()=>{document.visibilityState==="visible"&&ae(()=>{_()})},E=b=>{(b.key==="shouldBlockUser"||b.key==="allWeekdaysCovered")&&ae(()=>{_()})};return le(()=>{_(),window.addEventListener("availability-status-updated",V),document.addEventListener("visibilitychange",z),window.addEventListener("storage",E)}),ie(()=>{window.removeEventListener("availability-status-updated",V),document.removeEventListener("visibilitychange",z),window.removeEventListener("storage",E)}),(b,y)=>k.value&&!c.value?(n(),f("div",nt,[e("div",it,[y[2]||(y[2]=xe('<div class="flex items-center mb-4"><div class="flex-shrink-0 mr-3"><svg class="h-8 w-8 text-red-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg></div><h2 class="text-xl font-bold text-gray-900">Action Required</h2></div><p class="mb-6 text-gray-700"> You must submit your availability for all weekdays of next week before you can continue using the application. This is required for planning meetings and work schedules. </p>',2)),e("div",rt,[r(oe,{onClick:g,class:"bg-red-600 hover:bg-red-700"},{default:w(()=>y[1]||(y[1]=[A(" Submit Availability Now ",-1)])),_:1,__:[1]})]),r(ot,{show:$.value,"next-week-dates":a.value,date:a.value.length>0?a.value[0].value:"",userId:m.value,onClose:y[0]||(y[0]=v=>$.value=!1),onAvailabilitySaved:x},null,8,["show","next-week-dates","date","userId"])])])):j("",!0)}},ut={class:"p-6"},ct={class:"flex justify-between items-center mb-4"},mt={class:"text-lg font-medium text-gray-900"},vt={key:0,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert"},ft={class:"block sm:inline"},pt={key:0,class:"mt-6 flex justify-end space-x-3"},gt={__name:"BaseFormModal",props:{show:{type:Boolean,default:!1},title:{type:String,default:"Modal Title"},apiEndpoint:{type:String,required:!1},httpMethod:{type:String,default:"post",validator:d=>["post","put","patch","delete"].includes(d.toLowerCase())},formData:{type:Object,required:!0},submitButtonText:{type:String,default:"Save"},successMessage:{type:String,default:"Operation successful!"},formatDataForApi:{type:Function,default:d=>d},showFooter:{type:Boolean,default:!0}},emits:["close","submitted","error"],setup(d,{emit:k}){const c=d,$=k,a=T(!1),m=T({}),u=T("");G(()=>c.show,h=>{h&&(m.value={},u.value="",a.value=!1)});const _=async()=>{a.value=!0,m.value={},u.value="";try{const h=c.formatDataForApi(c.formData);let g;const x=c.httpMethod.toLowerCase();if(x==="post")g=await window.axios.post(c.apiEndpoint,h);else if(x==="put")g=await window.axios.put(c.apiEndpoint,h);else if(x==="patch")g=await window.axios.patch(c.apiEndpoint,h);else if(x==="delete")g=await window.axios.delete(c.apiEndpoint,{data:h});else throw new Error(`Unsupported HTTP method: ${c.httpMethod}`);Te(c.successMessage),$("submitted",g.data),$("close")}catch(h){console.error("API submission error:",h),h.response?h.response.status===422?(m.value=h.response.data.errors,u.value="Please correct the errors in the form."):u.value=h.response.data.message||"An unexpected error occurred.":u.value="A network error occurred or the server is unreachable.",Ve(u.value),$("error",h)}finally{a.value=!1}},S=()=>{$("close")};return(h,g)=>(n(),P(he,{show:d.show,onClose:S},{default:w(()=>[e("div",ut,[e("div",ct,[e("h2",mt,D(d.title),1),e("button",{onClick:S,class:"text-gray-400 hover:text-gray-500"},g[0]||(g[0]=[e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),u.value?(n(),f("div",vt,[e("span",ft,D(u.value),1)])):j("",!0),e("form",{onSubmit:re(_,["prevent"])},[te(h.$slots,"default",{errors:m.value},void 0,!0),d.showFooter?(n(),f("div",pt,[r(ye,{onClick:S,type:"button",disabled:a.value},{default:w(()=>g[1]||(g[1]=[A(" Cancel ",-1)])),_:1,__:[1]},8,["disabled"]),r(oe,{type:"submit",disabled:a.value,class:M({"opacity-75 cursor-not-allowed":a.value})},{default:w(()=>[A(D(a.value?"Submitting...":d.submitButtonText),1)]),_:1},8,["disabled","class"])])):j("",!0)],32)])]),_:3},8,["show"]))}},fe=ne(gt,[["__scopeId","data-v-380ca613"]]),yt=["disabled"],ht={class:"absolute z-50 mt-1 w-full rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5"},bt={class:"p-2 border-b border-gray-200"},wt=["onClick"],kt={key:0,class:"block px-4 py-2 text-sm text-gray-500"},xt={__name:"SelectDropdown",props:{modelValue:{type:[String,Number,Object,null],default:null},options:{type:Array,default:()=>[]},placeholder:{type:String,default:"Select an option"},valueKey:{type:String,default:"value"},labelKey:{type:String,default:"label"},disabled:{type:Boolean,default:!1},required:{type:Boolean,default:!1},maxHeight:{type:String,default:"250px"},width:{type:String,default:"full"},labelClass:{type:String,default:"text-xs"}},emits:["update:modelValue","change"],setup(d,{emit:k}){const c=d,$=k,a=T(!1),m=T(""),u=T(null),_=T(null),S=N(()=>{if(!m.value)return c.options;const E=m.value.toLowerCase();return c.options.filter(b=>b[c.labelKey].toLowerCase().includes(E))}),h=E=>{u.value&&!u.value.contains(E.target)&&(a.value=!1,m.value="")},g=E=>{E.key==="Escape"&&a.value&&(a.value=!1,m.value="")};le(()=>{document.addEventListener("click",h),document.addEventListener("keydown",g)}),ie(()=>{document.removeEventListener("click",h),document.removeEventListener("keydown",g)});const x=N(()=>{if(c.modelValue===null||c.modelValue===void 0||c.modelValue==="")return c.placeholder;const E=c.options.find(b=>b[c.valueKey]===c.modelValue);return E?E[c.labelKey]:c.placeholder}),V=E=>{$("update:modelValue",E[c.valueKey]),$("change",E[c.valueKey]),a.value=!1,m.value=""},z=()=>{c.disabled||(a.value=!a.value,a.value&&ae(()=>{_.value&&_.value.focus()}))};return G(()=>c.modelValue,E=>{(E==null||E==="")&&(m.value="")}),(E,b)=>(n(),f("div",{ref_key:"dropdownRef",ref:u,class:M(["relative",{"w-full":d.width==="full"}])},[e("button",{type:"button",onClick:z,disabled:d.disabled,class:M(["border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full text-left px-3 py-2 text-gray-700 bg-white relative flex items-center justify-between",{"opacity-50 cursor-not-allowed":d.disabled}])},[e("span",{class:M({"text-gray-500":!c.modelValue})},D(x.value),3),b[3]||(b[3]=e("svg",{class:"h-4 w-4 text-gray-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1))],10,yt),q(e("div",ht,[e("div",bt,[q(e("input",{ref_key:"searchInputRef",ref:_,type:"text","onUpdate:modelValue":b[0]||(b[0]=y=>m.value=y),onInput:b[1]||(b[1]=y=>a.value=!0),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-sm",placeholder:"Search...",onClick:b[2]||(b[2]=re(()=>{},["stop"]))},null,544),[[Z,m.value]])]),e("div",{class:"py-1 overflow-y-auto",style:_e({maxHeight:d.maxHeight})},[(n(!0),f(H,null,O(S.value,y=>(n(),f("div",{key:y[d.valueKey],onClick:v=>V(y),class:M(["block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 cursor-pointer",{"bg-gray-100":y[d.valueKey]===d.modelValue}])},D(y[d.labelKey]),11,wt))),128)),S.value.length===0?(n(),f("div",kt," No options available ")):j("",!0)],4)],512),[[J,a.value]])],2))}},se=ne(xt,[["__scopeId","data-v-d2f1cfa0"]]),_t={class:"space-y-4"},$t="Add New Milestone",St="/api/milestones",Ct="post",At="Create Milestone",jt="Milestone created successfully!",Tt={__name:"MilestoneFormModal",props:{show:Boolean,projectId:Number},emits:["close","saved"],setup(d,{emit:k}){const c=d,$=k,a=me({name:"",description:"",completion_date:null,status:"Not Started",project_id:c.projectId}),m=["Not Started","In Progress","Completed","Overdue"];G(()=>c.show,S=>{S&&Object.assign(a,{name:"",description:"",completion_date:null,status:"Not Started",project_id:c.projectId})},{immediate:!0});const u=S=>{$("saved",S),$("close")},_=()=>{$("close")};return(S,h)=>(n(),P(fe,{show:d.show,title:$t,"api-endpoint":St,"http-method":Ct,"form-data":a,"submit-button-text":At,"success-message":jt,onClose:_,onSubmitted:u},{default:w(({errors:g})=>[e("div",_t,[e("div",null,[r(U,{for:"milestone-name",value:"Milestone Name"}),r(ee,{id:"milestone-name",modelValue:a.name,"onUpdate:modelValue":h[0]||(h[0]=x=>a.name=x),type:"text",class:"mt-1 block w-full",placeholder:"Enter milestone name",required:""},null,8,["modelValue"]),r(R,{message:g.name?g.name[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[r(U,{for:"milestone-description",value:"Description"}),q(e("textarea",{id:"milestone-description","onUpdate:modelValue":h[1]||(h[1]=x=>a.description=x),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",rows:"3",placeholder:"Enter milestone description"},null,512),[[Z,a.description]]),r(R,{message:g.description?g.description[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[r(U,{for:"milestone-completion-date",value:"Completion Date"}),r(ee,{id:"milestone-completion-date",modelValue:a.completion_date,"onUpdate:modelValue":h[2]||(h[2]=x=>a.completion_date=x),type:"date",class:"mt-1 block w-full"},null,8,["modelValue"]),r(R,{message:g.completion_date?g.completion_date[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[r(U,{for:"milestone-status",value:"Status"}),r(se,{id:"milestone-status",modelValue:a.status,"onUpdate:modelValue":h[3]||(h[3]=x=>a.status=x),options:m.map(x=>({value:x,label:x})),"value-key":"value","label-key":"label",placeholder:"Select status",class:"mt-1"},null,8,["modelValue","options"]),r(R,{message:g.status?g.status[0]:"",class:"mt-2"},null,8,["message"])])])]),_:1},8,["show","form-data"]))}},Vt={class:"space-y-4"},Et={key:0},It={key:0,class:"text-sm text-gray-500"},Mt={key:0,class:"text-sm text-gray-500"},Pt={key:0,class:"text-sm text-gray-500"},Dt={class:"flex items-center gap-2 mt-1"},Lt={key:0,class:"text-sm text-gray-500"},Bt=["disabled"],Ut="Create New Task",Nt="/api/tasks",zt="post",Rt="Create Task",Wt="Task created successfully!",qt={__name:"CreateTaskModal",props:{show:Boolean,projectId:{type:Number,default:null}},emits:["close","saved"],setup(d,{emit:k}){const c=d,$=k,a=me({name:"",description:"",assigned_to_user_id:null,due_date:null,status:"To Do",task_type_id:null,milestone_id:null,project_id:c.projectId}),m=["To Do","In Progress","Done","Blocked","Archived"],u=T([]),_=T([]),S=T([]),h=T([]),g=T(!0),x=T(!1),V=T(!1),z=T(!1),E=T(!1);G(()=>c.show,async I=>{I&&(Object.assign(a,{name:"",description:"",assigned_to_user_id:null,due_date:null,status:"To Do",task_type_id:null,milestone_id:null,project_id:c.projectId}),c.projectId?await y(c.projectId):await b())},{immediate:!0}),G(()=>a.project_id,async I=>{I?await y(I):(_.value=[],S.value=[],h.value=[])});const b=async()=>{g.value=!0;try{const I=await window.axios.get("/api/projects-simplified");u.value=I.data.map(C=>({value:C.id,label:C.name}))}catch(I){console.error("Error fetching projects:",I),u.value=[]}finally{g.value=!1}},y=async I=>{if(I){x.value=!0,V.value=!0,z.value=!0;try{const[C,B,W]=await Promise.all([window.axios.get(`/api/projects/${I}/users`),window.axios.get("/api/task-types"),window.axios.get(`/api/projects/${I}/milestones`)]);_.value=C.data.map(X=>({value:X.id,label:X.name})),S.value=B.data.map(X=>({value:X.id,label:X.name})),h.value=W.data.map(X=>({value:X.id,label:X.name}))}catch(C){console.error("Error fetching associated task data:",C),_.value=[],S.value=[],h.value=[]}finally{x.value=!1,V.value=!1,z.value=!1}}},v=I=>{$("saved",I),$("close")},t=()=>{$("close")},s=()=>{a.project_id?E.value=!0:alert("Please select a project before adding a milestone.")},i=I=>{if(E.value=!1,I&&I.id&&I.name){const C={value:I.id,label:I.name};h.value.some(B=>B.value===C.value)||h.value.push(C),a.milestone_id=C.value}},p=N(()=>_.value),o=N(()=>S.value),l=N(()=>h.value);return(I,C)=>(n(),f(H,null,[r(fe,{show:d.show,title:Ut,"api-endpoint":Nt,"http-method":zt,"form-data":a,"submit-button-text":Rt,"success-message":Wt,onClose:t,onSubmitted:v},{default:w(({errors:B})=>[e("div",Vt,[d.projectId?j("",!0):(n(),f("div",Et,[r(U,{for:"task-project",value:"Project"}),g.value?(n(),f("div",It,"Loading projects...")):(n(),P(se,{key:1,id:"task-project",modelValue:a.project_id,"onUpdate:modelValue":C[0]||(C[0]=W=>a.project_id=W),options:u.value,"value-key":"value","label-key":"label",placeholder:"Select a project",class:"mt-1",required:!0},null,8,["modelValue","options"])),r(R,{message:B.project_id?B.project_id[0]:"",class:"mt-2"},null,8,["message"])])),e("div",null,[r(U,{for:"task-name",value:"Task Name"}),r(ee,{id:"task-name",modelValue:a.name,"onUpdate:modelValue":C[1]||(C[1]=W=>a.name=W),type:"text",class:"mt-1 block w-full",placeholder:"Enter task name",required:""},null,8,["modelValue"]),r(R,{message:B.name?B.name[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[r(U,{for:"task-description",value:"Description"}),q(e("textarea",{id:"task-description","onUpdate:modelValue":C[2]||(C[2]=W=>a.description=W),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",rows:"3",placeholder:"Enter task description"},null,512),[[Z,a.description]]),r(R,{message:B.description?B.description[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[r(U,{for:"task-status",value:"Status"}),r(se,{id:"task-status",modelValue:a.status,"onUpdate:modelValue":C[3]||(C[3]=W=>a.status=W),options:m.map(W=>({value:W,label:W})),"value-key":"value","label-key":"label",placeholder:"Select status",class:"mt-1"},null,8,["modelValue","options"]),r(R,{message:B.status?B.status[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[r(U,{for:"task-due-date",value:"Due Date"}),r(ee,{id:"task-due-date",modelValue:a.due_date,"onUpdate:modelValue":C[4]||(C[4]=W=>a.due_date=W),type:"date",class:"mt-1 block w-full"},null,8,["modelValue"]),r(R,{message:B.due_date?B.due_date[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[r(U,{for:"task-assigned-to",value:"Assigned To"}),x.value?(n(),f("div",Mt,"Loading users...")):(n(),P(se,{key:1,id:"task-assigned-to",modelValue:a.assigned_to_user_id,"onUpdate:modelValue":C[5]||(C[5]=W=>a.assigned_to_user_id=W),options:p.value,"value-key":"value","label-key":"label",placeholder:"Unassigned",class:"mt-1","allow-empty":!0},null,8,["modelValue","options"])),r(R,{message:B.assigned_to_user_id?B.assigned_to_user_id[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[r(U,{for:"task-type",value:"Task Type"}),V.value?(n(),f("div",Pt,"Loading task types...")):(n(),P(se,{key:1,id:"task-type",modelValue:a.task_type_id,"onUpdate:modelValue":C[6]||(C[6]=W=>a.task_type_id=W),options:o.value,"value-key":"value","label-key":"label",placeholder:"Select a task type",class:"mt-1","allow-empty":!0},null,8,["modelValue","options"])),r(R,{message:B.task_type_id?B.task_type_id[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[r(U,{for:"task-milestone",value:"Milestone"}),e("div",Dt,[z.value?(n(),f("div",Lt,"Loading milestones...")):(n(),P(se,{key:1,id:"task-milestone",modelValue:a.milestone_id,"onUpdate:modelValue":C[7]||(C[7]=W=>a.milestone_id=W),options:l.value,"value-key":"value","label-key":"label",placeholder:"No milestone",class:"flex-grow","allow-empty":!0,disabled:!a.project_id},null,8,["modelValue","options","disabled"])),e("button",{type:"button",onClick:s,disabled:!a.project_id||z.value,class:"px-3 py-2 text-sm font-medium text-blue-600 bg-blue-50 rounded-md hover:bg-blue-100 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",title:"Add New Milestone"},C[9]||(C[9]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4v16m8-8H4"})],-1)]),8,Bt)]),r(R,{message:B.milestone_id?B.milestone_id[0]:"",class:"mt-2"},null,8,["message"])])])]),_:1},8,["show","form-data"]),r(Tt,{show:E.value,"project-id":a.project_id,onClose:C[8]||(C[8]=B=>E.value=!1),onSaved:i},null,8,["show","project-id"])],64))}},Ft=(d,k)=>{let c;return(...$)=>{clearTimeout(c),c=setTimeout(()=>d(...$),k)}},Ht={class:"relative"},Kt={class:"flex flex-wrap items-center gap-2 mb-2 p-2 border border-gray-300 rounded-lg bg-white min-h-[44px] focus-within:border-indigo-500 focus-within:ring-1 focus-within:ring-indigo-500 transition-all duration-150"},Ot=["onClick"],Yt={key:0,class:"absolute z-20 w-full bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto mt-1 transform-gpu"},Gt=["onClick"],Jt={key:1,class:"px-4 py-2 text-sm text-gray-500"},Qt={key:2,class:"px-4 py-2 text-sm text-gray-500"},Xt={__name:"TagInput",props:{modelValue:{type:Array,default:()=>[]},label:{type:String,default:"Tags"},placeholder:{type:String,default:"Add tags..."},error:{type:String,default:""},initialTags:{type:Array,default:()=>[]},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(d,{emit:k}){const c=d,$=k,a=T(""),m=T([]),u=T([]),_=T(!1),S=T(null);function h(){$("update:modelValue",u.value.map(v=>v.id))}G(()=>c.initialTags,v=>{if(u.value=[],v&&v.length>0){const p=[],o=new Set;v.forEach(l=>{o.has(l.id)||(p.push(l),o.add(l.id))}),u.value.push(...p)}const t=v.map(p=>p.id),s=Array.isArray(c.modelValue)?c.modelValue:[];(t.length!==s.length||t.some(p=>!s.includes(p))||s.some(p=>!t.includes(p)))&&h()},{immediate:!0});const g=Ft(async v=>{if(v.length<2){m.value=[],_.value=!1;return}try{const t=await Y.get(`/api/tags/search?query=${v}`);m.value=t.data,_.value=!0}catch(t){console.error("Error fetching tags:",t),m.value=[],_.value=!1}},300);G(a,v=>{c.disabled||g(v)});const x=v=>{u.value.some(t=>t.id===v.id)||(u.value.push(v),a.value="",m.value=[],_.value=!1,h()),ae(()=>S.value.focus())},V=()=>{if(c.disabled)return;const v=a.value.trim();if(!v)return;const t=m.value.find(i=>i.name.toLowerCase()===v.toLowerCase()),s=u.value.some(i=>i.name.toLowerCase()===v.toLowerCase());if(t)x(t);else if(s)a.value="",m.value=[],_.value=!1;else{const i={id:`new_${v.replace(/\s+/g,"-").toLowerCase()}_${Date.now()}`,name:v};u.value.push(i),a.value="",m.value=[],_.value=!1,h()}ae(()=>S.value.focus())},z=v=>{c.disabled||(u.value=u.value.filter(t=>t.id!==v.id),h(),ae(()=>S.value.focus()))},E=()=>{c.disabled||a.value===""&&u.value.length>0&&z(u.value[u.value.length-1])},b=N(()=>m.value.filter(v=>!u.value.some(t=>t.id===v.id))),y=v=>{S.value&&!S.value.$el.contains(v.target)&&(_.value=!1,a.value="")};return le(()=>{document.addEventListener("click",y)}),ie(()=>{document.removeEventListener("click",y)}),(v,t)=>(n(),f("div",Ht,[r(U,{value:d.label,class:"mb-1"},null,8,["value"]),e("div",Kt,[(n(!0),f(H,null,O(u.value,s=>(n(),f("span",{key:s.id,class:"inline-flex items-center px-3 py-1 text-sm font-medium bg-indigo-100 text-indigo-800 rounded-full shadow-sm"},[A(D(s.name)+" ",1),d.disabled?j("",!0):(n(),f("button",{key:0,type:"button",onClick:i=>z(s),class:"ml-2 -mr-1 text-indigo-500 hover:text-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 rounded-full p-0.5"},t[3]||(t[3]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,Ot))]))),128)),r(ee,{ref_key:"inputRef",ref:S,type:"text",placeholder:u.value.length===0?d.placeholder:"",modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=s=>a.value=s),onFocus:t[1]||(t[1]=s=>_.value=!0),onKeydown:[de(re(V,["prevent"]),["enter"]),t[2]||(t[2]=de(s=>_.value=!1,["tab"])),de(E,["delete"])],class:"flex-grow min-w-[100px] border-none focus:ring-0 shadow-none p-0 bg-transparent text-gray-900",disabled:d.disabled},null,8,["placeholder","modelValue","onKeydown","disabled"])]),_.value&&(b.value.length>0||a.value.length>=2||b.value.length===0&&a.value.length<2)&&!d.disabled?(n(),f("div",Yt,[(n(!0),f(H,null,O(b.value,s=>(n(),f("div",{key:s.id,onClick:i=>x(s),class:"px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 cursor-pointer transition-colors duration-100"},D(s.name),9,Gt))),128)),!m.value.some(s=>s.name.toLowerCase()===a.value.toLowerCase())&&a.value.length>=2?(n(),f("div",{key:0,onClick:V,class:"px-4 py-2 text-sm text-indigo-700 bg-indigo-50 hover:bg-indigo-100 cursor-pointer border-t border-indigo-200 font-semibold transition-colors duration-100"},' Add new tag: "'+D(a.value)+'" ',1)):j("",!0),b.value.length===0&&a.value.length<2?(n(),f("div",Jt," Type at least 2 characters to search for tags. ")):j("",!0),b.value.length===0&&a.value.length>=2&&!m.value.some(s=>s.name.toLowerCase()===a.value.toLowerCase())?(n(),f("div",Qt,[t[4]||(t[4]=A(" No matching tags found. Press ",-1)),t[5]||(t[5]=e("span",{class:"font-semibold text-indigo-600"},"Enter",-1)),A(' to add "'+D(a.value)+'" as a new tag. ',1)])):j("",!0)])):j("",!0),r(R,{message:d.error,class:"mt-2"},null,8,["message"])]))}},Zt=ne(Xt,[["__scopeId","data-v-4d528a4c"]]),es={class:"space-y-4"},ts={class:"flex items-center mt-4"},ss={__name:"CreateForm",props:{show:{type:Boolean,default:!1},apiEndpoint:{type:String,required:!0}},emits:["close","resourceCreated"],setup(d,{emit:k}){const c=d,$=k,a=me({title:"",description:"",url:"",type:"website",thumbnail_url:"",visible_to_client:!0,tags:[]}),m=N(()=>[{value:"website",label:"Website"},{value:"youtube",label:"YouTube Video"},{value:"document",label:"Document"},{value:"image",label:"Image"},{value:"other",label:"Other"}]),u=h=>h,_=h=>{$("resourceCreated",h),S()},S=()=>{a.title="",a.description="",a.url="",a.type="website",a.thumbnail_url="",a.visible_to_client=!0,a.tags=[],$("close")};return(h,g)=>(n(),P(fe,{show:c.show,title:"Add New Shareable Resource",apiEndpoint:c.apiEndpoint,httpMethod:"post",formData:a,submitButtonText:"Create Resource",successMessage:"Shareable resource created successfully!",formatDataForApi:u,onSubmitted:_,onClose:S},{default:w(({errors:x})=>[e("div",es,[e("div",null,[r(U,{for:"title",value:"Title",class:"mb-1"}),r(ee,{id:"title",type:"text",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:a.title,"onUpdate:modelValue":g[0]||(g[0]=V=>a.title=V),required:""},null,8,["modelValue"]),r(R,{message:x.title?x.title[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[r(U,{for:"url",value:"Resource URL",class:"mb-1"}),r(ee,{id:"url",type:"url",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:a.url,"onUpdate:modelValue":g[1]||(g[1]=V=>a.url=V),required:""},null,8,["modelValue"]),r(R,{message:x.url?x.url[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[r(U,{for:"type",value:"Resource Type",class:"mb-1"}),r(se,{id:"type",modelValue:a.type,"onUpdate:modelValue":g[2]||(g[2]=V=>a.type=V),options:m.value,valueKey:"value",labelKey:"label",placeholder:"Select Resource Type",required:"",class:"mt-1 block w-full"},null,8,["modelValue","options"]),r(R,{message:x.type?x.type[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[r(U,{for:"thumbnail_url",value:"Thumbnail URL (Optional)",class:"mb-1"}),r(ee,{id:"thumbnail_url",type:"url",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:a.thumbnail_url,"onUpdate:modelValue":g[3]||(g[3]=V=>a.thumbnail_url=V)},null,8,["modelValue"]),r(R,{message:x.thumbnail_url?x.thumbnail_url[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[r(U,{for:"description",value:"Description (Optional)",class:"mb-1"}),q(e("textarea",{id:"description",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-lg shadow-sm mt-1 block w-full","onUpdate:modelValue":g[4]||(g[4]=V=>a.description=V),rows:"3"},null,512),[[Z,a.description]]),r(R,{message:x.description?x.description[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[r(Zt,{modelValue:a.tags,"onUpdate:modelValue":g[5]||(g[5]=V=>a.tags=V),label:"Associated Tags",placeholder:"Search or add tags",error:x.tags?x.tags[0]:""},null,8,["modelValue","error"])]),e("div",ts,[r(Ae,{id:"visible_to_client",checked:a.visible_to_client,"onUpdate:checked":g[6]||(g[6]=V=>a.visible_to_client=V)},null,8,["checked"]),r(U,{for:"visible_to_client",value:"Visible to Client",class:"ml-2"}),r(R,{message:x.visible_to_client?x.visible_to_client[0]:"",class:"mt-2"},null,8,["message"])])])]),_:1},8,["show","apiEndpoint","formData"]))}},as=ne(ss,[["__scopeId","data-v-3e3a6a9f"]]),ls={class:"flex items-center p-4 h-16 border-b border-gray-700"},os={key:0,class:"text-xl font-semibold flex-1 truncate"},ns=["title"],is={key:0,class:"p-4 border-b border-gray-700"},rs={class:"relative"},ds={key:1,class:"flex-1 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-500 scrollbar-track-gray-700 p-4"},us={key:0,class:"mb-4"},cs={class:"ml-2 mt-2 space-y-1"},ms=["onClick"],vs={class:"text-sm font-medium text-gray-300 truncate"},fs={class:"ml-4 mt-1 space-y-1"},ps={class:"truncate"},gs={key:1,class:"mb-4"},ys={class:"ml-2 mt-2 space-y-1"},hs=["onClick"],bs={class:"text-sm font-medium text-gray-300 truncate"},ws={class:"ml-4 mt-1 space-y-1"},ks={class:"truncate"},xs={key:2,class:"mb-4"},_s={class:"ml-2 mt-2 space-y-1"},$s={class:"truncate"},Ss={key:3,class:"mb-4"},Cs={class:"ml-2 mt-2 space-y-1"},As={class:"truncate"},js={key:4,class:"text-gray-400 text-sm text-center py-4"},Ts={key:5,class:"text-gray-400 text-sm text-center py-4"},Vs={key:2,class:"flex flex-col items-center pt-4 space-y-4"},Es={key:0,class:"text-gray-400 text-xs text-center px-2"},Is={__name:"LeftSidebar",props:{allProjects:{type:Array,default:()=>[]},activeProjectId:{type:Number,default:null}},emits:["project-selected"],setup(d,{emit:k}){const c=d,$=k,a=T(localStorage.getItem("leftSidebarCollapsed")!=="false"),m=T(""),u=T({}),_=N(()=>{const t=new Set;return c.allProjects.forEach(s=>{s.project_type&&t.add(s.project_type)}),Array.from(t).sort()}),S=N(()=>{const t=new Set;return c.allProjects.forEach(s=>{Array.isArray(s.tags)&&s.tags.forEach(i=>t.add(i))}),Array.from(t).sort()}),h=N(()=>{if(!m.value)return c.allProjects;const t=m.value.toLowerCase();return c.allProjects.filter(s=>{var i,p,o;return s.name.toLowerCase().includes(t)||((i=s.description)==null?void 0:i.toLowerCase().includes(t))||((p=s.project_type)==null?void 0:p.toLowerCase().includes(t))||Array.isArray(s.tags)&&s.tags.some(l=>l.toLowerCase().includes(t))||((o=s.status)==null?void 0:o.toLowerCase().includes(t))})}),g=N(()=>{const t={};h.value.forEach(s=>{s.project_type&&s.status==="active"&&(t[s.project_type]||(t[s.project_type]=[]),t[s.project_type].push(s))});for(const s in t)t[s].sort((i,p)=>i.name.localeCompare(p.name));return t}),x=N(()=>{const t={};h.value.forEach(s=>{Array.isArray(s.tags)&&s.tags.length>0&&s.tags.forEach(i=>{t[i]||(t[i]=[]),t[i].push(s)})});for(const s in t)t[s]=[...new Set(t[s])].sort((i,p)=>i.name.localeCompare(p.name));return t}),V=N(()=>h.value.filter(t=>t.status!=="active").sort((t,s)=>t.name.localeCompare(s.name))),z=N(()=>h.value.filter(t=>!t.project_type&&(!Array.isArray(t.tags)||t.tags.length===0)).sort((t,s)=>t.name.localeCompare(s.name)));G(()=>c.allProjects,()=>{_.value.forEach(t=>{const s=`type-${t}`;u.value[s]===void 0&&(u.value[s]=!0)}),S.value.forEach(t=>{const s=`tag-${t}`;u.value[s]===void 0&&(u.value[s]=!0)}),u.value["main-types"]===void 0&&(u.value["main-types"]=!1),u.value["main-tags"]===void 0&&(u.value["main-tags"]=!1),u.value["inactive-projects"]===void 0&&(u.value["inactive-projects"]=!1),u.value.uncategorized===void 0&&(u.value.uncategorized=!1)},{immediate:!0}),G(a,t=>{localStorage.setItem("leftSidebarCollapsed",t)});const E=()=>{a.value=!a.value},b=t=>{u.value[t]=!u.value[t]},y=t=>{$("project-selected",t)},v=()=>{m.value=""};return(t,s)=>(n(),f("div",{class:M({"w-64":!a.value,"w-16":a.value,"min-w-16":!0,"bg-gray-800 text-white flex flex-col transition-all duration-300 ease-in-out shrink-0 h-screen overflow-hidden":!0})},[e("div",ls,[a.value?j("",!0):(n(),f("h2",os,"Projects")),e("button",{onClick:E,class:"p-2 rounded-full hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500",title:a.value?"Expand Sidebar":"Collapse Sidebar"},[(n(),f("svg",{class:M(["w-6 h-6 text-gray-400 transform transition-transform duration-300",{"rotate-180":a.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},s[5]||(s[5]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"},null,-1)]),2))],8,ns)]),a.value?j("",!0):(n(),f("div",is,[e("div",rs,[q(e("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=i=>m.value=i),placeholder:"Search all projects...",class:"w-full p-2 rounded-md bg-gray-700 border border-gray-600 text-white placeholder-gray-400 focus:ring-indigo-500 focus:border-indigo-500 text-sm"},null,512),[[Z,m.value]]),m.value?(n(),f("button",{key:0,onClick:v,class:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-200",title:"Clear search"},s[6]||(s[6]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))):j("",!0)])])),a.value?(n(),f("div",Vs,[(n(!0),f(H,null,O(c.allProjects,i=>(n(),P(L(Q),{key:i.id,href:t.route("projects.show",i.id),onClick:p=>y(i.id),class:M({"w-10 h-10 rounded-full flex items-center justify-center text-xs font-bold transition-all duration-200":!0,"bg-indigo-600 text-white":i.id===d.activeProjectId,"bg-gray-700 text-gray-300 hover:bg-gray-600":i.id!==d.activeProjectId}),title:i.name},{default:w(()=>[A(D(i.name.charAt(0).toUpperCase()),1)]),_:2},1032,["href","onClick","class","title"]))),128)),d.allProjects.length===0?(n(),f("div",Es," No Projects ")):j("",!0)])):(n(),f("div",ds,[Object.keys(g.value).length>0?(n(),f("div",us,[e("div",{class:"flex items-center justify-between cursor-pointer py-2 hover:bg-gray-700 rounded-md px-2",onClick:s[1]||(s[1]=i=>b("main-types"))},[s[8]||(s[8]=e("h3",{class:"text-sm font-semibold text-gray-400"},"Active Projects by Type",-1)),(n(),f("svg",{class:M(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!u.value["main-types"]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},s[7]||(s[7]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))]),q(e("div",cs,[(n(!0),f(H,null,O(g.value,(i,p)=>(n(),f("div",{key:p},[e("div",{class:"flex items-center justify-between cursor-pointer py-1 hover:bg-gray-700 rounded-md px-2",onClick:o=>b(`type-${p}`)},[e("h4",vs,D(p),1),(n(),f("svg",{class:M(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!u.value[`type-${p}`]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},s[9]||(s[9]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))],8,ms),q(e("ul",fs,[(n(!0),f(H,null,O(i,o=>(n(),f("li",{key:o.id},[r(L(Q),{href:t.route("projects.show",o.id),onClick:l=>y(o.id),class:M({"block w-full text-left px-3 py-2 rounded-md transition-colors":!0,"bg-indigo-600 text-white":o.id===d.activeProjectId,"hover:bg-gray-700 text-gray-200":o.id!==d.activeProjectId,"font-bold":o.id===d.activeProjectId})},{default:w(()=>[e("span",ps,D(o.name),1)]),_:2},1032,["href","onClick","class"])]))),128))],512),[[J,!u.value[`type-${p}`]]])]))),128))],512),[[J,!u.value["main-types"]]])])):j("",!0),Object.keys(x.value).length>0?(n(),f("div",gs,[e("div",{class:"flex items-center justify-between cursor-pointer py-2 hover:bg-gray-700 rounded-md px-2",onClick:s[2]||(s[2]=i=>b("main-tags"))},[s[11]||(s[11]=e("h3",{class:"text-sm font-semibold text-gray-400"},"Projects by Tag",-1)),(n(),f("svg",{class:M(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!u.value["main-tags"]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},s[10]||(s[10]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))]),q(e("div",ys,[(n(!0),f(H,null,O(x.value,(i,p)=>(n(),f("div",{key:p},[e("div",{class:"flex items-center justify-between cursor-pointer py-1 hover:bg-gray-700 rounded-md px-2",onClick:o=>b(`tag-${p}`)},[e("h4",bs,D(p),1),(n(),f("svg",{class:M(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!u.value[`tag-${p}`]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},s[12]||(s[12]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))],8,hs),q(e("ul",ws,[(n(!0),f(H,null,O(i,o=>(n(),f("li",{key:o.id},[r(L(Q),{href:t.route("projects.show",o.id),onClick:l=>y(o.id),class:M({"block w-full text-left px-3 py-2 rounded-md transition-colors":!0,"bg-indigo-600 text-white":o.id===d.activeProjectId,"hover:bg-gray-700 text-gray-200":o.id!==d.activeProjectId,"font-bold":o.id===d.activeProjectId})},{default:w(()=>[e("span",ks,D(o.name),1)]),_:2},1032,["href","onClick","class"])]))),128))],512),[[J,!u.value[`tag-${p}`]]])]))),128))],512),[[J,!u.value["main-tags"]]])])):j("",!0),V.value.length>0?(n(),f("div",xs,[e("div",{class:"flex items-center justify-between cursor-pointer py-2 hover:bg-gray-700 rounded-md px-2",onClick:s[3]||(s[3]=i=>b("inactive-projects"))},[s[14]||(s[14]=e("h3",{class:"text-sm font-semibold text-gray-400"},"Inactive Projects",-1)),(n(),f("svg",{class:M(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!u.value["inactive-projects"]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},s[13]||(s[13]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))]),q(e("ul",_s,[(n(!0),f(H,null,O(V.value,i=>(n(),f("li",{key:i.id},[r(L(Q),{href:t.route("projects.show",i.id),onClick:p=>y(i.id),class:M({"block w-full text-left px-3 py-2 rounded-md transition-colors":!0,"bg-indigo-600 text-white":i.id===d.activeProjectId,"hover:bg-gray-700 text-gray-200":i.id!==d.activeProjectId,"font-bold":i.id===d.activeProjectId})},{default:w(()=>[e("span",$s,D(i.name)+" ("+D(i.status.replace("_"," "))+")",1)]),_:2},1032,["href","onClick","class"])]))),128))],512),[[J,!u.value["inactive-projects"]]])])):j("",!0),z.value.length>0?(n(),f("div",Ss,[e("div",{class:"flex items-center justify-between cursor-pointer py-2 hover:bg-gray-700 rounded-md px-2",onClick:s[4]||(s[4]=i=>b("uncategorized"))},[s[16]||(s[16]=e("h3",{class:"text-sm font-semibold text-gray-400"},"Uncategorized",-1)),(n(),f("svg",{class:M(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!u.value.uncategorized}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},s[15]||(s[15]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))]),q(e("ul",Cs,[(n(!0),f(H,null,O(z.value,i=>(n(),f("li",{key:i.id},[r(L(Q),{href:t.route("projects.show",i.id),onClick:p=>y(i.id),class:M({"block w-full text-left px-3 py-2 rounded-md transition-colors":!0,"bg-indigo-600 text-white":i.id===d.activeProjectId,"hover:bg-gray-700 text-gray-200":i.id!==d.activeProjectId,"font-bold":i.id===d.activeProjectId})},{default:w(()=>[e("span",As,D(i.name),1)]),_:2},1032,["href","onClick","class"])]))),128))],512),[[J,!u.value.uncategorized]])])):j("",!0),h.value.length===0?(n(),f("div",js," No projects found matching your search. ")):d.allProjects.length===0&&!m.value?(n(),f("div",Ts," No projects available. ")):j("",!0)]))],2))}},Ms=ne(Is,[["__scopeId","data-v-417d431f"]]),Ps={class:"flex h-screen overflow-hidden"},Ds={class:"flex-1 flex flex-col overflow-hidden"},Ls={class:"border-b border-gray-100 bg-white z-10 relative"},Bs={class:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8"},Us={class:"flex h-16 justify-between"},Ns={class:"flex"},zs={class:"flex shrink-0 items-center"},Rs={class:"hidden space-x-8 sm:-my-px sm:ms-10 sm:flex"},Ws={key:0,class:"hidden sm:flex sm:items-center"},qs={class:"hidden sm:ms-6 sm:flex sm:items-center"},Fs={class:"relative ms-3"},Hs={class:"inline-flex rounded-md"},Ks={type:"button",class:"inline-flex items-center rounded-md border border-transparent bg-white px-3 py-2 text-sm font-medium leading-4 text-gray-500 transition duration-150 ease-in-out hover:text-gray-700 focus:outline-none"},Os={class:"-me-2 flex items-center sm:hidden"},Ys={class:"h-6 w-6",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24"},Gs={class:"space-y-1 pb-3 pt-2"},Js={key:0,class:"mt-3 space-y-1"},Qs={class:"border-t border-gray-200 pb-1 pt-4"},Xs={class:"px-4"},Zs={class:"text-base font-medium text-gray-800"},ea={class:"text-sm font-medium text-gray-500"},ta={class:"text-sm font-medium text-gray-500 capitalize"},sa={class:"mt-3 space-y-1"},aa={key:0,class:"bg-white shadow"},la={class:"mx-auto max-w-7xl px-4 py-6 sm:px-6 lg:px-8"},oa={class:"flex-1 overflow-y-auto"},va={__name:"AuthenticatedLayout",setup(d){const k=T(!1),c=N(()=>ue().props.auth.user);N(()=>{var o;return((o=c.value.role_data)==null?void 0:o.name)||""});const{canDo:$}=$e(),a=$("manage_projects"),m=$("compose_emails"),u=$("approve_emails"),_=$("create_users"),S=$("manage_roles"),h=$("manage_task_types"),g=$("create_clients"),x=T(!1),V=T(!1),z=T([]),E=T(!0),b=N(()=>ue().props.id||null),y=async()=>{const o=localStorage.getItem("authToken");if(o){window.axios.defaults.headers.common.Authorization=`Bearer ${o}`;try{await window.axios.get("/api/user")}catch(l){l.response&&l.response.status===401&&(console.log("Session expired, redirecting to login"),localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization,window.location.href="/login")}}else delete window.axios.defaults.headers.common.Authorization},v=()=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),delete window.axios.defaults.headers.common.Authorization},t=o=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),delete window.axios.defaults.headers.common.Authorization,window.location.href="/login"},s=async()=>{E.value=!0;try{const o=await window.axios.get("/api/projects-simplified");z.value=o.data}catch(o){console.error("Error fetching all projects for sidebar:",o),z.value=[]}finally{E.value=!1}},i=o=>{Ce.visit(route("projects.show",o))},p=T(null);return le(()=>{y(),p.value&&je(p.value),s()}),(o,l)=>{var I;return n(),f("div",Ps,[r(Se,{ref_key:"notificationContainerRef",ref:p},null,512),r(dt),r(Ms,{"all-projects":z.value,"active-project-id":b.value,onProjectSelected:i},null,8,["all-projects","active-project-id"]),e("div",Ds,[e("nav",Ls,[e("div",Bs,[e("div",Us,[e("div",Ns,[e("div",zs,[r(L(Q),{href:o.route("dashboard")},{default:w(()=>[r(be,{class:"block h-16 w-auto fill-current text-gray-800"})]),_:1},8,["href"])]),e("div",Rs,[r(Ie,{href:o.route("dashboard"),active:o.route().current("dashboard")},{default:w(()=>l[8]||(l[8]=[A(" Dashboard ",-1)])),_:1,__:[8]},8,["href","active"]),L(S)?(n(),f("div",Ws,[r(pe,{align:"right",width:"48"},{trigger:w(()=>l[9]||(l[9]=[e("span",{class:"inline-flex rounded-md"},[e("button",{type:"button",class:"inline-flex items-center rounded-md border border-transparent bg-white px-3 py-2 text-sm font-medium leading-4 text-gray-500 transition duration-150 ease-in-out hover:text-gray-700 focus:outline-none"},[A(" Admin "),e("svg",{class:"ms-2 -me-0.5 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])])],-1)])),content:w(()=>[L(a)?(n(),P(K,{key:0,href:o.route("projects.index"),active:o.route().current("projects.index")},{default:w(()=>l[10]||(l[10]=[A(" Projects ",-1)])),_:1,__:[10]},8,["href","active"])):j("",!0),L(u)?(n(),P(K,{key:1,href:o.route("emails.pending"),active:o.route().current("emails.pending")},{default:w(()=>l[11]||(l[11]=[A(" Approve Emails ",-1)])),_:1,__:[11]},8,["href","active"])):j("",!0),L(m)?(n(),P(K,{key:2,href:o.route("emails.rejected"),active:o.route().current("emails.rejected")},{default:w(()=>l[12]||(l[12]=[A(" Rejected Emails ",-1)])),_:1,__:[12]},8,["href","active"])):j("",!0),L(_)?(n(),P(K,{key:3,href:o.route("availability.index"),active:o.route().current("availability.index")},{default:w(()=>l[13]||(l[13]=[A(" Weekly Availability ",-1)])),_:1,__:[13]},8,["href","active"])):j("",!0),L(g)?(n(),P(K,{key:4,href:o.route("clients.index"),active:o.route().current("clients.index")},{default:w(()=>l[14]||(l[14]=[A(" Clients ",-1)])),_:1,__:[14]},8,["href","active"])):j("",!0),L(_)?(n(),P(K,{key:5,href:o.route("users.index"),active:o.route().current("users.index")},{default:w(()=>l[15]||(l[15]=[A(" Users ",-1)])),_:1,__:[15]},8,["href","active"])):j("",!0),L(h)?(n(),P(K,{key:6,href:o.route("task-types.index"),active:o.route().current("task-types.index")},{default:w(()=>l[16]||(l[16]=[A(" Task Types ",-1)])),_:1,__:[16]},8,["href","active"])):j("",!0),r(K,{href:o.route("bonus-configuration.index"),active:o.route().current("bonus-configuration.index")},{default:w(()=>l[17]||(l[17]=[A(" Bonus Configuration ",-1)])),_:1,__:[17]},8,["href","active"]),r(K,{href:o.route("admin.roles.index")},{default:w(()=>l[18]||(l[18]=[A(" Manage Roles ",-1)])),_:1,__:[18]},8,["href"]),r(K,{href:o.route("admin.permissions.index")},{default:w(()=>l[19]||(l[19]=[A(" Manage Permissions ",-1)])),_:1,__:[19]},8,["href"])]),_:1})])):j("",!0)])]),e("div",qs,[r(oe,{type:"button",onClick:l[0]||(l[0]=C=>x.value=!0),class:"mr-4 px-4 py-2 text-sm"},{default:w(()=>l[20]||(l[20]=[A(" Add Task ",-1)])),_:1,__:[20]}),r(oe,{type:"button",onClick:l[1]||(l[1]=C=>V.value=!0),class:"mr-4 px-4 py-2 text-sm"},{default:w(()=>l[21]||(l[21]=[A(" Add Resource ",-1)])),_:1,__:[21]}),e("div",Fs,[r(pe,{align:"right",width:"48"},{trigger:w(()=>{var C;return[e("span",Hs,[e("button",Ks,[A(D(c.value.name)+" ("+D((C=c.value.role_data)==null?void 0:C.name)+") ",1),l[22]||(l[22]=e("svg",{class:"ms-2 -me-0.5 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1))])])]}),content:w(()=>[r(K,{href:o.route("profile.edit")},{default:w(()=>l[23]||(l[23]=[A(" Profile ",-1)])),_:1,__:[23]},8,["href"]),r(K,{href:o.route("logout"),method:"post",as:"button",onSuccess:v,onError:t},{default:w(()=>l[24]||(l[24]=[A(" Log Out ",-1)])),_:1,__:[24]},8,["href"])]),_:1})])]),e("div",Os,[e("button",{onClick:l[2]||(l[2]=C=>k.value=!k.value),class:"inline-flex items-center justify-center rounded-md p-2 text-gray-400 transition duration-150 ease-in-out hover:bg-gray-100 hover:text-gray-500 focus:bg-gray-100 focus:text-gray-500 focus:outline-none"},[(n(),f("svg",Ys,[e("path",{class:M({hidden:k.value,"inline-flex":!k.value}),"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},null,2),e("path",{class:M({hidden:!k.value,"inline-flex":k.value}),"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,2)]))])])])]),e("div",{class:M([{block:k.value,hidden:!k.value},"sm:hidden"])},[e("div",Gs,[L(S)?(n(),f("div",Js,[l[35]||(l[35]=e("div",{class:"px-4 font-medium text-base text-gray-800"},"Admin",-1)),r(F,{href:o.route("dashboard"),active:o.route().current("dashboard")},{default:w(()=>l[25]||(l[25]=[A(" Dashboard ",-1)])),_:1,__:[25]},8,["href","active"]),L(g)?(n(),P(F,{key:0,href:o.route("clients.index"),active:o.route().current("clients.index")},{default:w(()=>l[26]||(l[26]=[A(" Clients ",-1)])),_:1,__:[26]},8,["href","active"])):j("",!0),L(a)?(n(),P(F,{key:1,href:o.route("projects.index"),active:o.route().current("projects.index")},{default:w(()=>l[27]||(l[27]=[A(" Projects ",-1)])),_:1,__:[27]},8,["href","active"])):j("",!0),L(_)?(n(),P(F,{key:2,href:o.route("users.index"),active:o.route().current("users.index")},{default:w(()=>l[28]||(l[28]=[A(" Users ",-1)])),_:1,__:[28]},8,["href","active"])):j("",!0),L(m)?(n(),P(F,{key:3,href:o.route("emails.compose"),active:o.route().current("emails.compose")},{default:w(()=>l[29]||(l[29]=[A(" Compose Email ",-1)])),_:1,__:[29]},8,["href","active"])):j("",!0),L(u)?(n(),P(F,{key:4,href:o.route("emails.pending"),active:o.route().current("emails.pending")},{default:w(()=>l[30]||(l[30]=[A(" Approve Emails ",-1)])),_:1,__:[30]},8,["href","active"])):j("",!0),L(m)?(n(),P(F,{key:5,href:o.route("emails.rejected"),active:o.route().current("emails.rejected")},{default:w(()=>l[31]||(l[31]=[A(" Rejected Emails ",-1)])),_:1,__:[31]},8,["href","active"])):j("",!0),r(F,{href:o.route("availability.index"),active:o.route().current("availability.index")},{default:w(()=>l[32]||(l[32]=[A(" Weekly Availability ",-1)])),_:1,__:[32]},8,["href","active"]),r(F,{href:o.route("admin.roles.index"),active:o.route().current("admin.roles.index")},{default:w(()=>l[33]||(l[33]=[A(" Manage Roles ",-1)])),_:1,__:[33]},8,["href","active"]),r(F,{href:o.route("admin.permissions.index"),active:o.route().current("admin.permissions.index")},{default:w(()=>l[34]||(l[34]=[A(" Manage Permissions ",-1)])),_:1,__:[34]},8,["href","active"])])):j("",!0)]),e("div",Qs,[e("div",Xs,[e("div",Zs,D(c.value.name),1),e("div",ea,D(c.value.email),1),e("div",ta,D((I=c.value.role_data)==null?void 0:I.name),1)]),e("div",sa,[r(F,{as:"button",onClick:l[3]||(l[3]=C=>x.value=!0)},{default:w(()=>l[36]||(l[36]=[A(" Add Task ",-1)])),_:1,__:[36]}),r(F,{as:"button",onClick:l[4]||(l[4]=C=>V.value=!0)},{default:w(()=>l[37]||(l[37]=[A(" Add Resource ",-1)])),_:1,__:[37]}),r(F,{href:o.route("profile.edit")},{default:w(()=>l[38]||(l[38]=[A(" Profile ",-1)])),_:1,__:[38]},8,["href"]),r(F,{href:o.route("logout"),method:"post",as:"button",onSuccess:v,onError:t},{default:w(()=>l[39]||(l[39]=[A(" Log Out ",-1)])),_:1,__:[39]},8,["href"])])])],2)]),o.$slots.header?(n(),f("header",aa,[e("div",la,[te(o.$slots,"header")])])):j("",!0),e("main",oa,[te(o.$slots,"default")]),r(qt,{show:x.value,onClose:l[5]||(l[5]=C=>x.value=!1),onSaved:l[6]||(l[6]=C=>x.value=!1)},null,8,["show"]),r(as,{"api-endpoint":"/api/shareable-resources",show:V.value,onClose:l[7]||(l[7]=C=>V.value=!1)},null,8,["show"])])])}}};export{fe as B,as as C,se as S,Zt as T,va as _,ot as a,Tt as b,qt as c,Ve as e,Te as s,ma as w};
