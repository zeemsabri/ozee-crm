import{_ as b}from"./PrimaryButton-CFluK0r1.js";import{_ as S}from"./TextInput-C-Um9pdD.js";import{_ as m}from"./InputLabel-Cb2H9UDc.js";import{_ as g}from"./InputError-JgWZJBZr.js";import{_ as A}from"./MultiSelectDropdown-CLaPt5Nh.js";import{S as B}from"./SelectDropdown-CbAVFnmQ.js";import{C as _,c as W,f as X,a as i,o as r,b as t,i as y,d as a,w as C,m as V,F as T,l as L,t as k}from"./app-DPRFYhMr.js";/* empty css                                                                       */import"./_plugin-vue_export-helper-DlAUqK2U.js";const Y={class:"p-6 space-y-6"},Z={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},ee={class:"lg:col-span-1 space-y-4"},te={class:"border rounded-lg p-4"},se={class:"space-y-3"},oe={class:"flex justify-end"},le={class:"border rounded-lg p-4"},ae={class:"space-y-2"},de=["onClick"],ne={class:"flex items-center gap-2"},ie=["onClick"],re=["onClick"],ce={key:0,class:"border rounded-lg p-4"},me={class:"space-y-3"},ue={class:"flex justify-end gap-2"},pe={class:"lg:col-span-2 space-y-4"},ge={class:"border rounded-lg p-4"},_e={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ye={class:"flex justify-end mt-3"},we={class:"border rounded-lg p-4"},ve={class:"flex items-center justify-between mb-3"},fe={class:"text-sm font-semibold"},xe={key:0,class:"text-xs text-gray-500"},be={key:0,class:"space-y-2"},Se={class:"flex items-center gap-2"},Ce=["onClick"],Ve=["onClick"],ke={key:0,class:"text-sm text-gray-500"},he={key:0,class:"border rounded-lg p-4"},$e={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ie={class:"flex justify-end gap-2 mt-3"},Le={__name:"Index",setup(Ne){const s=_({sets:[],models:[],selectedSetId:null,categories:[],loading:!1,errors:{}}),c=_({name:"",allowed_models:[]}),d=_({id:null,name:"",allowed_models:[]}),p=_({name:"",category_set_id:null}),n=_({id:null,name:"",category_set_id:null}),P=W(()=>s.sets.find(o=>o.value===s.selectedSetId)),u=async()=>{try{const{data:o}=await window.axios.get("/api/category-sets");s.sets=o.map(e=>({value:e.id,label:e.name,raw:e}))}catch(o){console.error("Failed to load sets",o)}},q=async()=>{try{const{data:o}=await window.axios.get("/api/models/available");s.models=o}catch(o){console.error("Failed to load models",o)}},w=async o=>{if(!o){s.categories=[];return}try{const{data:e}=await window.axios.get(`/api/category-sets/${o}/categories`);s.categories=e}catch(e){console.error("Failed to load categories",e)}};X(async()=>{await Promise.all([u(),q()])});const v=()=>{s.errors={}},z=async()=>{var o;v();try{await window.axios.post("/api/category-sets",{name:c.name,allowed_models:c.allowed_models}),c.name="",c.allowed_models=[],await u()}catch(e){((o=e.response)==null?void 0:o.status)===422?s.errors=e.response.data.errors||{}:console.error(e)}},G=o=>{d.id=o.raw.id,d.name=o.raw.name,d.allowed_models=(o.raw.bindings||[]).map(e=>e.model_type)},H=async()=>{var o;if(d.id){v();try{if(await window.axios.put(`/api/category-sets/${d.id}`,{name:d.name,allowed_models:d.allowed_models}),await u(),s.selectedSetId===d.id){const e=s.sets.find(f=>f.value===d.id);e&&(e.label=d.name)}d.id=null,d.name="",d.allowed_models=[]}catch(e){((o=e.response)==null?void 0:o.status)===422?s.errors=e.response.data.errors||{}:console.error(e)}}},J=async o=>{if(confirm("Delete this set? This will also delete its categories."))try{await window.axios.delete(`/api/category-sets/${o}`),s.selectedSetId===o&&(s.selectedSetId=null,s.categories=[]),await u()}catch(e){console.error(e)}},K=async()=>{var o;v();try{await window.axios.post("/api/categories",{name:p.name,category_set_id:s.selectedSetId}),p.name="",await w(s.selectedSetId),await u()}catch(e){((o=e.response)==null?void 0:o.status)===422?s.errors=e.response.data.errors||{}:console.error(e)}},O=o=>{n.id=o.id,n.name=o.name,n.category_set_id=s.selectedSetId},Q=async()=>{var o;if(n.id){v();try{await window.axios.put(`/api/categories/${n.id}`,{name:n.name,category_set_id:n.category_set_id}),await w(s.selectedSetId),await u(),n.id=null,n.name="",n.category_set_id=null}catch(e){((o=e.response)==null?void 0:o.status)===422?s.errors=e.response.data.errors||{}:console.error(e)}}},R=async o=>{if(confirm("Delete this category?"))try{await window.axios.delete(`/api/categories/${o}`),await w(s.selectedSetId),await u()}catch(e){console.error(e)}};return(o,e)=>{var f,h,$,I,N,E,U,j,M,D,F;return r(),i("div",Y,[e[19]||(e[19]=t("h1",{class:"text-xl font-semibold"},"Categories",-1)),t("div",Z,[t("div",ee,[t("div",te,[e[11]||(e[11]=t("h2",{class:"text-sm font-semibold mb-3"},"Create Set",-1)),t("div",se,[t("div",null,[a(m,{value:"Name"}),a(S,{modelValue:c.name,"onUpdate:modelValue":e[0]||(e[0]=l=>c.name=l),class:"w-full mt-1"},null,8,["modelValue"]),a(g,{message:(h=(f=s.errors)==null?void 0:f.name)==null?void 0:h[0]},null,8,["message"])]),t("div",null,[a(m,{value:"Allowed Models (optional)"}),a(A,{options:s.models,modelValue:c.allowed_models,"onUpdate:modelValue":e[1]||(e[1]=l=>c.allowed_models=l),isMulti:!0,placeholder:"Select models"},null,8,["options","modelValue"])]),t("div",oe,[a(b,{type:"button",onClick:z},{default:C(()=>e[10]||(e[10]=[V("Create",-1)])),_:1,__:[10]})])])]),t("div",le,[e[12]||(e[12]=t("h2",{class:"text-sm font-semibold mb-3"},"Sets",-1)),t("div",ae,[(r(!0),i(T,null,L(s.sets,l=>(r(),i("div",{key:l.value,class:"flex items-center justify-between p-2 rounded hover:bg-gray-50 border"},[t("button",{class:"text-left flex-1",onClick:x=>{s.selectedSetId=l.value,w(l.value)}},k(l.label),9,de),t("div",ne,[t("button",{class:"text-xs text-indigo-600",onClick:x=>G(l)},"Edit",8,ie),t("button",{class:"text-xs text-red-600",onClick:x=>J(l.value)},"Delete",8,re)])]))),128))])]),d.id?(r(),i("div",ce,[e[14]||(e[14]=t("h2",{class:"text-sm font-semibold mb-3"},"Edit Set",-1)),t("div",me,[t("div",null,[a(m,{value:"Name"}),a(S,{modelValue:d.name,"onUpdate:modelValue":e[2]||(e[2]=l=>d.name=l),class:"w-full mt-1"},null,8,["modelValue"]),a(g,{message:(I=($=s.errors)==null?void 0:$.name)==null?void 0:I[0]},null,8,["message"])]),t("div",null,[a(m,{value:"Allowed Models"}),a(A,{options:s.models,modelValue:d.allowed_models,"onUpdate:modelValue":e[3]||(e[3]=l=>d.allowed_models=l),isMulti:!0,placeholder:"Select models"},null,8,["options","modelValue"])]),t("div",ue,[t("button",{type:"button",class:"text-sm text-gray-600",onClick:e[4]||(e[4]=l=>{d.id=null,d.name="",d.allowed_models=[]})},"Cancel"),a(b,{type:"button",onClick:H},{default:C(()=>e[13]||(e[13]=[V("Save",-1)])),_:1,__:[13]})])])])):y("",!0)]),t("div",pe,[t("div",ge,[e[16]||(e[16]=t("h2",{class:"text-sm font-semibold mb-3"},"Create Category",-1)),t("div",_e,[t("div",null,[a(m,{value:"Name"}),a(S,{modelValue:p.name,"onUpdate:modelValue":e[5]||(e[5]=l=>p.name=l),class:"w-full mt-1"},null,8,["modelValue"]),a(g,{message:(E=(N=s.errors)==null?void 0:N.name)==null?void 0:E[0]},null,8,["message"])]),t("div",null,[a(m,{value:"Set"}),a(B,{options:s.sets,modelValue:s.selectedSetId,"onUpdate:modelValue":e[6]||(e[6]=l=>s.selectedSetId=l),placeholder:"Select set"},null,8,["options","modelValue"])])]),t("div",ye,[a(b,{type:"button",disabled:!s.selectedSetId||!p.name,onClick:K},{default:C(()=>e[15]||(e[15]=[V("Add Category",-1)])),_:1,__:[15]},8,["disabled"])])]),t("div",we,[t("div",ve,[t("h2",fe,"Categories in "+k(((U=P.value)==null?void 0:U.label)||"â€”"),1),s.selectedSetId?y("",!0):(r(),i("div",xe,"Select a set to view categories"))]),s.selectedSetId?(r(),i("div",be,[(r(!0),i(T,null,L(s.categories,l=>(r(),i("div",{key:l.id,class:"flex items-center justify-between p-2 rounded border hover:bg-gray-50"},[t("div",null,k(l.name),1),t("div",Se,[t("button",{class:"text-xs text-indigo-600",onClick:x=>O(l)},"Edit",8,Ce),t("button",{class:"text-xs text-red-600",onClick:x=>R(l.id)},"Delete",8,Ve)])]))),128)),s.categories.length===0?(r(),i("div",ke,"No categories yet.")):y("",!0)])):y("",!0)]),n.id?(r(),i("div",he,[e[18]||(e[18]=t("h2",{class:"text-sm font-semibold mb-3"},"Edit Category",-1)),t("div",$e,[t("div",null,[a(m,{value:"Name"}),a(S,{modelValue:n.name,"onUpdate:modelValue":e[7]||(e[7]=l=>n.name=l),class:"w-full mt-1"},null,8,["modelValue"]),a(g,{message:(M=(j=s.errors)==null?void 0:j.name)==null?void 0:M[0]},null,8,["message"])]),t("div",null,[a(m,{value:"Move to Set"}),a(B,{options:s.sets,modelValue:n.category_set_id,"onUpdate:modelValue":e[8]||(e[8]=l=>n.category_set_id=l),placeholder:"Select set"},null,8,["options","modelValue"]),a(g,{message:(F=(D=s.errors)==null?void 0:D.category_set_id)==null?void 0:F[0]},null,8,["message"])])]),t("div",Ie,[t("button",{type:"button",class:"text-sm text-gray-600",onClick:e[9]||(e[9]=l=>{n.id=null,n.name="",n.category_set_id=null})},"Cancel"),a(b,{type:"button",onClick:Q},{default:C(()=>e[17]||(e[17]=[V("Save",-1)])),_:1,__:[17]})])])):y("",!0)])])])}}};export{Le as default};
