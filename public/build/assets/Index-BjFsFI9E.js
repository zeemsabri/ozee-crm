import{_ as K,z as Y,s as H,B as N,c as A,o as u,a as S,b as e,e as s,f as L,k as W,r as g,i as c,g as E,n as R,t as x,m as G,F as $,j as M,K as J}from"./app-tUqoeRBl.js";import{S as Q,T as X,B as Z,C as ee,_ as te,s as F,e as B}from"./AuthenticatedLayout-H4NX2BDj.js";import{_}from"./InputLabel-B-iSIChM.js";import{_ as T,a as w}from"./InputError-DF-YZDbR.js";import{_ as se}from"./Checkbox-9_MC9A8p.js";import{P as le}from"./PrimaryButton-BmSFZ3Li.js";import"./ApplicationLogo-Br69gY8h.js";import"./SecondaryButton-BlVUSvsN.js";const oe={class:"space-y-4"},ae={class:"flex items-center mt-4"},ie={__name:"EditForm",props:{show:{type:Boolean,default:!1},apiEndpoint:{type:String,required:!0},resource:{type:Object,required:!0}},emits:["close","resourceUpdated"],setup(V,{emit:y}){const a=V,b=y,t=Y({title:"",description:"",url:"",type:"website",thumbnail_url:"",visible_to_client:!0,tags:[]}),v=H(()=>[{value:"website",label:"Website"},{value:"youtube",label:"YouTube Video"},{value:"document",label:"Document"},{value:"image",label:"Image"},{value:"other",label:"Other"}]);N(()=>{f()});const f=()=>{a.resource&&(t.title=a.resource.title||"",t.description=a.resource.description||"",t.url=a.resource.url||"",t.type=a.resource.type||"website",t.thumbnail_url=a.resource.thumbnail_url||"",t.visible_to_client=a.resource.visible_to_client!==void 0?a.resource.visible_to_client:!0,t.tags=a.resource.tags||[])},p=m=>m,k=m=>{b("resourceUpdated",m),h()},h=()=>{b("close")};return(m,l)=>(u(),A(Z,{show:a.show,title:"Edit Shareable Resource",apiEndpoint:`${a.apiEndpoint}/${a.resource.id}`,httpMethod:"put",formData:t,submitButtonText:"Update Resource",successMessage:"Shareable resource updated successfully!",formatDataForApi:p,onSubmitted:k,onClose:h},{default:S(({errors:i})=>[e("div",oe,[e("div",null,[s(_,{for:"title",value:"Title",class:"mb-1"}),s(T,{id:"title",type:"text",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:t.title,"onUpdate:modelValue":l[0]||(l[0]=r=>t.title=r),required:""},null,8,["modelValue"]),s(w,{message:i.title?i.title[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[s(_,{for:"url",value:"Resource URL",class:"mb-1"}),s(T,{id:"url",type:"url",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:t.url,"onUpdate:modelValue":l[1]||(l[1]=r=>t.url=r),required:""},null,8,["modelValue"]),s(w,{message:i.url?i.url[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[s(_,{for:"type",value:"Resource Type",class:"mb-1"}),s(Q,{id:"type",modelValue:t.type,"onUpdate:modelValue":l[2]||(l[2]=r=>t.type=r),options:v.value,valueKey:"value",labelKey:"label",placeholder:"Select Resource Type",required:"",class:"mt-1 block w-full"},null,8,["modelValue","options"]),s(w,{message:i.type?i.type[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[s(_,{for:"thumbnail_url",value:"Thumbnail URL (Optional)",class:"mb-1"}),s(T,{id:"thumbnail_url",type:"url",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:t.thumbnail_url,"onUpdate:modelValue":l[3]||(l[3]=r=>t.thumbnail_url=r)},null,8,["modelValue"]),s(w,{message:i.thumbnail_url?i.thumbnail_url[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[s(_,{for:"description",value:"Description (Optional)",class:"mb-1"}),L(e("textarea",{id:"description",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-lg shadow-sm mt-1 block w-full","onUpdate:modelValue":l[4]||(l[4]=r=>t.description=r),rows:"3"},null,512),[[W,t.description]]),s(w,{message:i.description?i.description[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[s(X,{modelValue:t.tags,"onUpdate:modelValue":l[5]||(l[5]=r=>t.tags=r),label:"Associated Tags",placeholder:"Search or add tags",error:i.tags?i.tags[0]:""},null,8,["modelValue","error"])]),e("div",ae,[s(se,{id:"visible_to_client",checked:t.visible_to_client,"onUpdate:checked":l[6]||(l[6]=r=>t.visible_to_client=r)},null,8,["checked"]),s(_,{for:"visible_to_client",value:"Visible to Client",class:"ml-2"}),s(w,{message:i.visible_to_client?i.visible_to_client[0]:"",class:"mt-2"},null,8,["message"])])])]),_:1},8,["show","apiEndpoint","formData"]))}},ne=K(ie,[["__scopeId","data-v-7938b3c7"]]),re={class:"container mx-auto p-6 bg-gray-50 min-h-screen font-inter"},de={class:"flex border-b border-gray-200 mb-6"},ue={class:"bg-white p-8 rounded-lg shadow-xl border border-gray-100"},ce={key:0},pe={key:0,class:"text-center py-8"},me={key:1,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert"},ge={class:"block sm:inline"},xe={key:2,class:"text-center py-8 text-gray-600"},be={key:3,class:"overflow-x-auto"},fe={class:"min-w-full divide-y divide-gray-200"},ye={class:"bg-white divide-y divide-gray-200"},ve={class:"px-6 py-4 whitespace-nowrap"},he={class:"text-sm font-medium text-gray-900"},_e={key:0,class:"text-sm text-gray-500 mt-1 truncate max-w-xs"},we={class:"px-6 py-4 whitespace-nowrap"},ke={class:"px-6 py-4 whitespace-nowrap text-sm text-indigo-600 hover:text-indigo-900"},Ce=["href"],Ee={class:"px-6 py-4 whitespace-nowrap"},Re={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Ve={class:"flex flex-wrap gap-1"},Te={key:0,class:"text-gray-400"},Se={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},De={class:"flex justify-end space-x-3"},Ue=["onClick"],$e=["onClick"],Me={key:0,class:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center z-50"},Fe={class:"bg-white rounded-lg p-6 max-w-md w-full"},Be={class:"text-gray-600 mb-6"},Pe={__name:"Index",props:{apiEndpoint:{type:String,default:"/api/shareable-resources"}},setup(V){const y=V,a=g(!1),b=g(!1),t=g(!1),v=g(null),f=g(null),p=g("existing"),k=g([]),h=g(!1),m=g(null),l=async()=>{h.value=!0,m.value=null;try{const d=await window.axios.get(y.apiEndpoint);k.value=d.data.data,F("Resources loaded successfully!")}catch(d){console.error("Error fetching resources:",d),m.value="Failed to load resources. Please try again.",B(m.value)}finally{h.value=!1}},i=d=>{console.log("New resource created:",d),l(),a.value=!1,p.value="existing"},r=d=>{console.log("Resource updated:",d),l(),b.value=!1},D=()=>{a.value=!0,p.value="add-new"},j=d=>{v.value=d,b.value=!0},q=d=>{f.value=d,t.value=!0},z=async()=>{try{await window.axios.delete(`${y.apiEndpoint}/${f.value.id}`),F("Resource deleted successfully!"),l(),t.value=!1,f.value=null}catch(d){console.error("Error deleting resource:",d),B("Failed to delete resource. Please try again.")}},O=()=>{a.value=!1,p.value==="add-new"&&(p.value="existing")},I=()=>{b.value=!1,v.value=null},P=()=>{t.value=!1,f.value=null};return N(()=>{l()}),(d,n)=>(u(),A(te,null,{default:S(()=>{var U;return[e("div",re,[n[7]||(n[7]=e("h1",{class:"text-4xl font-extrabold text-gray-900 mb-8 text-center"},"Shareable Resource Management",-1)),e("div",de,[e("button",{onClick:n[0]||(n[0]=o=>p.value="existing"),class:R([["py-3 px-6 text-lg font-medium transition-all duration-200",p.value==="existing"?"border-b-4 border-indigo-600 text-indigo-700 bg-white shadow-sm":"text-gray-600 hover:text-gray-800 hover:border-gray-300"],"rounded-t-lg focus:outline-none"])}," Existing Resources ",2),e("button",{onClick:D,class:R([["py-3 px-6 text-lg font-medium transition-all duration-200",p.value==="add-new"?"border-b-4 border-indigo-600 text-indigo-700 bg-white shadow-sm":"text-gray-600 hover:text-gray-800 hover:border-gray-300"],"rounded-t-lg focus:outline-none"])}," Add New Resource ",2)]),e("div",ue,[p.value==="existing"?(u(),c("div",ce,[n[5]||(n[5]=e("h2",{class:"text-2xl font-semibold text-gray-800 mb-6"},"Your Shareable Resources",-1)),h.value?(u(),c("div",pe,n[1]||(n[1]=[e("svg",{class:"animate-spin mx-auto h-10 w-10 text-indigo-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),e("p",{class:"mt-3 text-gray-600"},"Loading resources...",-1)]))):m.value?(u(),c("div",me,[e("span",ge,x(m.value),1)])):k.value.length===0?(u(),c("div",xe,[n[3]||(n[3]=e("p",{class:"text-lg"},"No shareable resources found. Start by adding a new one!",-1)),s(le,{onClick:D,class:"mt-4"},{default:S(()=>n[2]||(n[2]=[G(" Add First Resource ",-1)])),_:1,__:[2]})])):(u(),c("div",be,[e("table",fe,[n[4]||(n[4]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Title"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Type"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"URL"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Visible to Client"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Tags"),e("th",{scope:"col",class:"relative px-6 py-3"},[e("span",{class:"sr-only"},"Edit")])])],-1)),e("tbody",ye,[(u(!0),c($,null,M(k.value,o=>(u(),c("tr",{key:o.id},[e("td",ve,[e("div",he,x(o.title),1),o.description?(u(),c("div",_e,x(o.description),1)):E("",!0)]),e("td",we,[e("span",{class:R(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",o.type==="youtube"?"bg-red-100 text-red-800":o.type==="website"?"bg-blue-100 text-blue-800":o.type==="document"?"bg-green-100 text-green-800":o.type==="image"?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"])},x(o.type),3)]),e("td",ke,[e("a",{href:o.url,target:"_blank",rel:"noopener noreferrer",class:"truncate max-w-xs block"},x(o.url),9,Ce)]),e("td",Ee,[e("span",{class:R(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",o.visible_to_client?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},x(o.visible_to_client?"Yes":"No"),3)]),e("td",Re,[e("div",Ve,[(u(!0),c($,null,M(o.tags,C=>(u(),c("span",{key:C.id,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800"},x(C.name),1))),128)),!o.tags||o.tags.length===0?(u(),c("span",Te,"No tags")):E("",!0)])]),e("td",Se,[e("div",De,[e("button",{onClick:C=>j(o),class:"text-indigo-600 hover:text-indigo-900"},"Edit",8,Ue),e("button",{onClick:C=>q(o),class:"text-red-600 hover:text-red-900"},"Delete",8,$e)])])]))),128))])])]))])):E("",!0)]),s(ee,{show:a.value,apiEndpoint:y.apiEndpoint,onClose:O,onResourceCreated:i},null,8,["show","apiEndpoint"]),L(s(ne,{show:b.value,apiEndpoint:y.apiEndpoint,resource:v.value||{},onClose:I,onResourceUpdated:r},null,8,["show","apiEndpoint","resource"]),[[J,v.value]]),t.value?(u(),c("div",Me,[e("div",Fe,[n[6]||(n[6]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Confirm Delete",-1)),e("p",Be,' Are you sure you want to delete the resource "'+x((U=f.value)==null?void 0:U.title)+'"? This action cannot be undone. ',1),e("div",{class:"flex justify-end space-x-3"},[e("button",{onClick:P,class:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-400"}," Cancel "),e("button",{onClick:z,class:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500"}," Delete ")])])])):E("",!0)])]}),_:1}))}};export{Pe as default};
