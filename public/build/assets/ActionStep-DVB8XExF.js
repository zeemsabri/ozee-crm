import{u as de}from"./workflowStore-BpEtorFZ.js";import pe from"./StepCard-v5z4ZMXR.js";import f from"./DataTokenInserter-CiOFkCIS.js";import{S as W}from"./SelectDropdown-CPLyGcRc.js";import{l as _,r as G,m as F,b as me,q as J,o as r,w as ve,a as l,c as u,k as m,F as b,i as A,t as c,e as v,u as U,g,n as ce,s as fe}from"./app-DHObBZ9c.js";import{_ as be}from"./RelationshipPathPicker-Bu0kG3Qd.js";import{c as ye}from"./createLucideIcon-C2r74J4U.js";import{T as ge}from"./trash-Dq6xPxFB.js";import{P as xe}from"./plus-BdelaFVR.js";/* empty css                                                                       */import"./_plugin-vue_export-helper-DlAUqK2U.js";/**
 * @license lucide-vue-next v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=ye("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),_e=["value"],ke=["value"],we={class:"mt-2 flex items-center gap-2 text-xs text-gray-600"},Ce={key:0,class:"flex items-center gap-2"},Se=["value"],Ae={key:0,class:"space-y-4 mt-4 border-t pt-4"},Ie={class:"flex items-center gap-2"},Ee=["value"],Te={class:"flex items-center gap-2"},Re=["value"],De={class:"relative"},Oe=["value"],Pe={class:"absolute top-2 right-2"},Me={class:"flex items-center gap-2"},Be=["value"],Fe=["value"],Ue={class:"block text-xs font-medium text-gray-600 mb-1"},Ne={key:0},Le={class:"flex items-center gap-2"},qe=["value"],He={key:0,class:"mb-2 text-[11px]"},Ve={class:"text-gray-600"},$e={class:"px-1.5 py-0.5 rounded bg-amber-50 border border-amber-200 text-amber-700"},je={key:0},Ke={key:0,class:"mt-1 text-red-600"},We={key:1,class:"space-y-2"},Ge={class:"flex items-center justify-between gap-2"},Je={class:"flex-1 flex items-center gap-2"},Ye=["value","onChange","disabled"],ze=["value"],Qe={key:0,class:"text-[10px] px-1.5 py-0.5 rounded bg-amber-50 border border-amber-200 text-amber-700"},Xe=["onClick","title"],Ze={class:"flex items-center gap-2 mt-2"},et=["value","onChange"],tt=["value"],lt=["value","onInput"],ot=["value","onInput"],st={class:"mt-1 text-[14px] text-gray-500"},at={key:0,class:"mt-1 text-[11px] text-gray-500"},nt={class:"mt-3"},rt={class:"flex items-center gap-2"},ut=["value"],it={key:0},dt=["value"],pt=["value"],mt={key:0,class:"mt-1 text-[11px] text-gray-500"},vt={key:1},ct=["value"],ft={key:2},bt={class:"flex items-center gap-2"},yt=["value"],gt={class:"flex items-center gap-2"},xt=["value"],ht={class:"grid grid-cols-2 gap-4 mt-3"},_t=["value"],kt=["value"],wt={key:0,class:"mt-3"},Ct={class:"flex items-center gap-2"},St=["value"],At={key:1,class:"grid grid-cols-2 gap-4 mt-3"},It={class:"flex items-center gap-2"},Et=["value"],Tt={class:"flex items-center gap-2"},Rt=["value"],Dt={key:2,class:"grid grid-cols-2 gap-4 mt-3"},Ot=["value"],Pt={class:"flex items-center gap-2"},Mt=["value"],Bt={class:"mt-3"},Ft={class:"relative"},Ut=["value"],Nt={class:"absolute top-2 right-2 bg-white rounded-md shadow-sm border border-gray-200"},Lt={class:"mt-3"},qt=["value"],Ht={key:5,class:"p-3 bg-blue-50 border-l-4 border-blue-400 text-blue-800 text-sm rounded-r-md"},Zt={__name:"ActionStep",props:{step:{type:Object,required:!0},allStepsBefore:{type:Array,default:()=>[]},loopContextSchema:{type:Object,default:null}},emits:["update:step","delete"],setup(d,{emit:Y}){const k=d,P=Y,z=de(),I=_(()=>z.automationSchema||[]),E=G({});function N(o,e){return`${o||""}:${e||""}`}async function D(o,e){if(!o||!e)return null;const t=N(o,e);if(Array.isArray(E.value[t])&&E.value[t].length)return E.value[t];try{const{data:a}=await fe.get(`/api/value-dictionaries/${encodeURIComponent(o)}/${encodeURIComponent(e)}`);let i=null;if(Array.isArray(a)?i=a:a&&Array.isArray(a.values)&&(i=a.values),Array.isArray(i)&&i.length)return E.value[t]=i,i}catch{}return null}const Q=[{value:"SEND_EMAIL",label:"Send Email"},{value:"PROCESS_EMAIL",label:"Process Email"},{value:"CREATE_RECORD",label:"Create Record"},{value:"UPDATE_RECORD",label:"Update Record"},{value:"SYNC_RELATIONSHIP",label:"Sync Relationship"},{value:"FETCH_API_DATA",label:"Fetch API Data"},{value:"CHECK_MILESTONE_COMPLETION",label:"Check for Milestone Completion & Update"}],s=_({get:()=>k.step.step_config||{},set:o=>P("update:step",{...k.step,step_config:o})});function p(o,e){s.value={...s.value,[o]:e}}function X(o){s.value={action_type:o}}function y(o,e){const t=s.value[o]||"";p(o,`${t}${e}`)}_(()=>I.value.map(o=>o.name));const L=_(()=>(I.value||[]).map(o=>({label:o.name,value:o.name})));function T(o){if(!o||typeof o!="string")return"";let e=o.toLowerCase();if(e==="id")return"ID";e.endsWith("_id")&&(e=e.slice(0,-3)),e=e.replace(/[_-]+/g," ");let t=e.replace(/\b\w/g,a=>a.toUpperCase());return t=t.replace(/\bId\b/g,"ID").replace(/\bUrl\b/g,"URL"),t}const R=_(()=>{const o=s.value.target_model;if(!o)return null;let e=(I.value||[]).find(a=>a.name===o);if(e||(e=(I.value||[]).find(a=>a.full_class===o),e))return e;const t=typeof o=="string"?o.split("\\").pop().split("/").pop():o;return(I.value||[]).find(a=>a.name===t)||null}),O=_(()=>{const o=R.value;return o?(o.columns||[]).map(e=>typeof e=="string"?{name:e,label:T(e),is_required:!1,allowed_values:null,description:null,ui:null}:{name:e.name,label:e.label||T(e.name),is_required:!!e.is_required,allowed_values:e.allowed_values??null,description:e.description||null,ui:e.ui||null}):[]});function M(o){return O.value.find(e=>e.name===o)||null}function q(o){return typeof o=="string"&&o.endsWith("_type")}function Z(o){return typeof o=="string"&&o.endsWith("_id")}function ee(o){const e=M(o.column);return Z(o.column)||q(o.column)&&((e==null?void 0:e.ui)==="morph_type"||Array.isArray(e==null?void 0:e.allowed_values))}function te(o){return q(o.column)?"type":"id"}const w=_(()=>{var o;return((o=R.value)==null?void 0:o.required_on_create)||[]}),le=_(()=>{var o;return((o=R.value)==null?void 0:o.defaults_on_create)||{}});function H(o){return w.value.includes(o)}function oe(o){const e=le.value||{},t=s.value.target_model,i=`{{trigger.${t?t.toLowerCase():""}.${o}}}`,n=(()=>{const h=(O.value||[]).find(ie=>ie.name===o);return!!(h&&Array.isArray(h.allowed_values)&&h.allowed_values.length>0)})();return s.value.action_type==="CREATE_RECORD"&&n?"":e[o]!==void 0&&e[o]!==null||o.endsWith("_id")?i:""}function V(){const o=w.value||[];if(!o.length)return;const e=Array.isArray(s.value.fields)?[...s.value.fields]:[],t=new Map;e.forEach(n=>{const x=n.column||n.field||n.name;x&&t.set(x,!0)});const a=[];for(const n of o)t.has(n)||a.push({column:n,value:oe(n)});a.length&&p("fields",[...e,...a]);const i=s.value.target_model;if(i)for(const n of o)D(i,n)}function $(o){p("target_model",o),V()}F(()=>s.value.target_model,async(o,e)=>{if(o&&o!==e){V();const t=Array.isArray(s.value.fields)?s.value.fields:[];for(const a of t){const i=(a==null?void 0:a.column)||(a==null?void 0:a.field)||(a==null?void 0:a.name);i&&await D(o,i)}}}),F(()=>s.value.fields,async o=>{const e=s.value.target_model;if(!(!e||!Array.isArray(o)))for(const t of o){const a=(t==null?void 0:t.column)||(t==null?void 0:t.field)||(t==null?void 0:t.name);a&&await D(e,a)}},{deep:!0,immediate:!0}),me(async()=>{(k.step.delay_minutes??0)>0&&(S.value=!0);const o=s.value.target_model,e=Array.isArray(s.value.fields)?s.value.fields:[];if(o)for(const t of e){const a=(t==null?void 0:t.column)||(t==null?void 0:t.field)||(t==null?void 0:t.name);a&&await D(o,a)}}),F(()=>k.step.delay_minutes,o=>{(o??0)>0&&!S.value&&(S.value=!0)});function se(){const o=s.value.fields||[];p("fields",[...o,{column:"",value:""}])}function ae(o){const e=s.value.fields||[];p("fields",e.filter((t,a)=>a!==o))}function C(o,e,t){const i=[...s.value.fields||[]];i[o]={...i[o],[e]:t},p("fields",i)}function ne(o,e){const a=(s.value.fields||[])[o].value||"";C(o,"value",a+e)}function j(o){var x;const e=s.value.target_model;if(!e||!o)return null;const t=o.column||o.field||o.name;if(!t)return null;const a=(x=(O.value||[]).find(h=>h.name===t))==null?void 0:x.allowed_values;if(Array.isArray(a)&&a.length)return a;const i=N(e,t),n=E.value[i];return Array.isArray(n)&&n.length?n:null}function re(o){const e=j(o);return!(!e||!e.length||(o.value||"").toString().includes("{{"))}const K=_(()=>{const o=w.value||[];if(!o.length)return[];const e=new Map;return(Array.isArray(s.value.fields)?s.value.fields:[]).forEach(a=>{const i=a.column||a.field||a.name,n=(a.value??"").toString().trim();i&&n&&e.set(i,!0)}),o.filter(a=>!e.has(a))});function B(o){var i,n,x;const e=Array.isArray(s.value.fields)?s.value.fields:[],t=((i=e[o])==null?void 0:i.column)||((n=e[o])==null?void 0:n.field)||((x=e[o])==null?void 0:x.name);return!t||!H(t)?!0:e.filter(h=>(h.column||h.field||h.name)===t).length>1}const S=G(!1);function ue(o){const e=Math.max(0,parseInt(o??0,10)||0);P("update:step",{...k.step,delay_minutes:e})}return(o,e)=>(r(),J(pe,{icon:"âš™ï¸",title:"Perform an Action",onDelete:()=>P("delete")},{default:ve(()=>[l("select",{value:s.value.action_type||"",onChange:e[0]||(e[0]=t=>X(t.target.value)),class:"p-2 border border-gray-300 rounded-md bg-white shadow-sm w-full text-sm"},[e[34]||(e[34]=l("option",{value:"",disabled:""},"Select an action...",-1)),(r(),u(b,null,A(Q,t=>l("option",{key:t.value,value:t.value},c(t.label),9,ke)),64))],40,_e),l("div",we,[l("button",{type:"button",onClick:e[1]||(e[1]=t=>S.value=!S.value),class:"p-1.5 rounded-md border text-gray-600 hover:bg-gray-50",title:"Set delay (minutes)"},[v(U(he),{class:"w-4 h-4"})]),S.value?(r(),u("div",Ce,[e[35]||(e[35]=l("label",null,"Delay",-1)),l("input",{type:"number",min:"0",value:k.step.delay_minutes||0,onInput:e[2]||(e[2]=t=>ue(t.target.value)),class:"w-20 p-1 border rounded"},null,40,Se),e[36]||(e[36]=l("span",null,"minutes",-1))])):m("",!0)]),s.value.action_type?(r(),u("div",Ae,[s.value.action_type==="SEND_EMAIL"?(r(),u(b,{key:0},[l("div",null,[e[37]||(e[37]=l("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"To",-1)),l("div",Ie,[l("input",{type:"text",value:s.value.to||"",onInput:e[3]||(e[3]=t=>p("to",t.target.value)),class:"w-full p-2 border border-gray-300 rounded-md text-sm",placeholder:"e.g., {{trigger.email.sender}}"},null,40,Ee),v(f,{"all-steps-before":d.allStepsBefore,"loop-context-schema":d.loopContextSchema,onInsert:e[4]||(e[4]=t=>y("to",t))},null,8,["all-steps-before","loop-context-schema"])])]),l("div",null,[e[38]||(e[38]=l("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"Subject",-1)),l("div",Te,[l("input",{type:"text",value:s.value.subject||"",onInput:e[5]||(e[5]=t=>p("subject",t.target.value)),class:"w-full p-2 border border-gray-300 rounded-md text-sm",placeholder:"e.g., AI says: {{step_2.category}}"},null,40,Re),v(f,{"all-steps-before":d.allStepsBefore,"loop-context-schema":d.loopContextSchema,onInsert:e[6]||(e[6]=t=>y("subject",t))},null,8,["all-steps-before","loop-context-schema"])])]),l("div",null,[e[39]||(e[39]=l("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"Body",-1)),l("div",De,[l("textarea",{rows:"5",value:s.value.body||"",onInput:e[7]||(e[7]=t=>p("body",t.target.value)),class:"w-full p-2 border border-gray-300 rounded-md text-sm"},null,40,Oe),l("div",Pe,[v(f,{"all-steps-before":d.allStepsBefore,"loop-context-schema":d.loopContextSchema,onInsert:e[8]||(e[8]=t=>y("body",t))},null,8,["all-steps-before","loop-context-schema"])])])])],64)):m("",!0),s.value.action_type==="PROCESS_EMAIL"?(r(),u(b,{key:1},[l("div",null,[e[40]||(e[40]=l("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"Email ID",-1)),l("div",Me,[l("input",{type:"text",value:s.value.email_id||"",onInput:e[9]||(e[9]=t=>p("email_id",t.target.value)),class:"w-full p-2 border border-gray-300 rounded-md text-sm",placeholder:"e.g., {{email.id}} or {{step_3.new_record_id}}"},null,40,Be),v(f,{"all-steps-before":d.allStepsBefore,"loop-context-schema":d.loopContextSchema,onInsert:e[10]||(e[10]=t=>y("email_id",t))},null,8,["all-steps-before","loop-context-schema"])]),e[41]||(e[41]=l("p",{class:"mt-1 text-[11px] text-gray-500"}," Specify the ID of the email to process. Use the token inserter to select from available context data. ",-1))]),l("div",null,[e[42]||(e[42]=l("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"Queue (Optional)",-1)),l("input",{type:"text",value:s.value.on_queue||"",onInput:e[11]||(e[11]=t=>p("on_queue",t.target.value)),class:"w-full p-2 border border-gray-300 rounded-md text-sm",placeholder:"e.g., emails, default"},null,40,Fe),e[43]||(e[43]=l("p",{class:"mt-1 text-[11px] text-gray-500"}," Optional queue name for processing the email. Leave blank to use default queue. ",-1))])],64)):m("",!0),s.value.action_type==="CREATE_RECORD"||s.value.action_type==="UPDATE_RECORD"?(r(),u(b,{key:2},[l("div",null,[l("label",Ue,c(s.value.action_type==="CREATE_RECORD"?"Model to Create":"Model to Update"),1),v(W,{"model-value":s.value.target_model||"",options:L.value,placeholder:"Select model...","onUpdate:modelValue":$,class:"w-full"},null,8,["model-value","options"])]),s.value.action_type==="UPDATE_RECORD"?(r(),u("div",Ne,[e[44]||(e[44]=l("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"Record ID",-1)),l("div",Le,[l("input",{type:"text",value:s.value.record_id||"",onInput:e[12]||(e[12]=t=>p("record_id",t.target.value)),class:"w-full p-2 border border-gray-300 rounded-md text-sm",placeholder:"e.g., {{trigger.task.id}}"},null,40,qe),v(f,{"all-steps-before":d.allStepsBefore,"loop-context-schema":d.loopContextSchema,onInsert:e[13]||(e[13]=t=>y("record_id",t))},null,8,["all-steps-before","loop-context-schema"])])])):m("",!0),l("div",null,[e[49]||(e[49]=l("div",{class:"mb-2"},[l("label",{class:"text-xs font-medium text-gray-600"},"Fields to set")],-1)),e[50]||(e[50]=l("div",{class:"mb-3 p-2 bg-blue-50 border-l-2 border-blue-400 text-[11px] text-gray-700"},[l("p",{class:"font-medium text-blue-800 mb-1"},"ðŸ’¡ Quick Tips:"),l("ul",{class:"space-y-0.5 ml-3"},[l("li",null,[g("â€¢ Use "),l("code",{class:"px-1 bg-white rounded"},"NOW()"),g(" for current timestamp (e.g., deleted_at, published_at)")]),l("li",null,[g("â€¢ Use "),l("code",{class:"px-1 bg-white rounded"},"TODAY()"),g(" for current date at midnight")]),l("li",null,[g("â€¢ Use "),l("code",{class:"px-1 bg-white rounded"},"NULL"),g(" to clear optional fields")]),l("li",null,[g("â€¢ Use the "),l("strong",null,"token inserter (âž•)"),g(" to access data from triggers & previous steps")])])],-1)),w.value.length?(r(),u("div",He,[l("span",Ve,"Required for "+c(s.value.target_model)+":",1),(r(!0),u(b,null,A(w.value,(t,a)=>(r(),u("span",{class:"ml-1",key:t},[l("span",$e,c(T(t)),1),a<w.value.length-1?(r(),u("span",je,", ")):m("",!0)]))),128)),K.value.length?(r(),u("div",Ke,"Missing: "+c(K.value.map(T).join(", ")),1)):m("",!0)])):m("",!0),s.value.fields&&s.value.fields.length>0?(r(),u("div",We,[(r(!0),u(b,null,A(s.value.fields,(t,a)=>{var i;return r(),u("div",{key:a,class:"p-2 border rounded-md bg-gray-50/50"},[l("div",Ge,[l("div",Je,[l("select",{value:t.column,onChange:n=>C(a,"column",n.target.value),class:"w-full p-2 border border-gray-300 rounded-md text-sm",disabled:!s.value.target_model},[e[45]||(e[45]=l("option",{value:"",disabled:""},"Field...",-1)),(r(!0),u(b,null,A(O.value,n=>(r(),u("option",{key:n.name,value:n.name},c(n.label),9,ze))),128))],40,Ye),H(t.column)?(r(),u("span",Qe,"Required")):m("",!0)]),l("button",{onClick:n=>B(a)&&ae(a),class:ce([[B(a)?"text-gray-400 hover:text-red-500 hover:bg-red-50":"text-gray-300 cursor-not-allowed"],"p-1 rounded-full"]),title:B(a)?"Remove Field":"Cannot remove required field"},[v(U(ge),{class:"w-4 h-4"})],10,Xe)]),l("div",Ze,[s.value.target_model?(r(),u(b,{key:0},[re(t)?(r(),u("select",{key:0,value:t.value||"",onChange:n=>C(a,"value",n.target.value),class:"w-full p-2 border border-gray-300 rounded-md text-sm"},[e[46]||(e[46]=l("option",{value:"",disabled:""},"Select value...",-1)),(r(!0),u(b,null,A(j(t)||[],n=>(r(),u("option",{key:n.value,value:n.value},c(n.label??n.value),9,tt))),128))],40,et)):(r(),u("input",{key:1,value:t.value,onInput:n=>C(a,"value",n.target.value),type:"text",class:"w-full border rounded px-2 py-2 text-sm",placeholder:"Value..."},null,40,lt))],64)):(r(),u("input",{key:1,value:t.value,onInput:n=>C(a,"value",n.target.value),type:"text",class:"w-full border rounded px-2 py-2 text-sm",placeholder:"Value..."},null,40,ot)),v(f,{"all-steps-before":d.allStepsBefore,"loop-context-schema":d.loopContextSchema,onInsert:n=>ne(a,n)},null,8,["all-steps-before","loop-context-schema","onInsert"]),ee(t)?(r(),J(be,{key:2,mode:te(t),"all-steps-before":d.allStepsBefore,value:t.value,onSelect:n=>C(a,"value",n)},null,8,["mode","all-steps-before","value","onSelect"])):m("",!0)]),l("p",st,[e[47]||(e[47]=g("Selected Relationship: ",-1)),l("strong",null,c(t.value),1)]),(i=M(t.column))!=null&&i.description?(r(),u("p",at,c(M(t.column).description),1)):m("",!0)])}),128))])):m("",!0),l("div",nt,[l("button",{onClick:se,class:"w-full flex items-center justify-center gap-1 px-3 py-2 text-sm rounded-md bg-blue-50 hover:bg-blue-100 text-blue-700 border border-blue-200"},[v(U(xe),{class:"h-4 w-4"}),e[48]||(e[48]=g(" Add Field ",-1))])])])],64)):m("",!0),s.value.action_type==="SYNC_RELATIONSHIP"?(r(),u(b,{key:3},[l("div",null,[e[51]||(e[51]=l("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"Target Model",-1)),v(W,{"model-value":s.value.target_model||"",options:L.value,placeholder:"Select model...","onUpdate:modelValue":$,class:"w-full"},null,8,["model-value","options"])]),l("div",null,[e[52]||(e[52]=l("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"Record ID",-1)),l("div",rt,[l("input",{type:"text",value:s.value.record_id||"",onInput:e[14]||(e[14]=t=>p("record_id",t.target.value)),class:"w-full p-2 border border-gray-300 rounded-md text-sm",placeholder:"e.g., {{trigger.task.id}}"},null,40,ut),v(f,{"all-steps-before":d.allStepsBefore,"loop-context-schema":d.loopContextSchema,onInsert:e[15]||(e[15]=t=>y("record_id",t))},null,8,["all-steps-before","loop-context-schema"])])]),R.value?(r(),u("div",it,[e[54]||(e[54]=l("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"Relationship",-1)),l("select",{value:s.value.relationship||"",onChange:e[16]||(e[16]=t=>p("relationship",t.target.value)),class:"w-full p-2 border border-gray-300 rounded-md text-sm bg-white shadow-sm"},[e[53]||(e[53]=l("option",{value:"",disabled:""},"Select relationship...",-1)),(r(!0),u(b,null,A(R.value.relationships.filter(t=>["BelongsToMany","MorphToMany"].includes(t.type)),t=>(r(),u("option",{key:t.name,value:t.name},c(T(t.name))+" ("+c(t.type)+") ",9,pt))),128))],40,dt),s.value.relationship?(r(),u("p",mt,' This will sync the many-to-many relationship "'+c(s.value.relationship)+'" on the selected '+c(s.value.target_model)+" record. ",1)):m("",!0)])):m("",!0),s.value.relationship?(r(),u("div",vt,[e[56]||(e[56]=l("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"Sync Mode",-1)),l("select",{value:s.value.sync_mode||"sync",onChange:e[17]||(e[17]=t=>p("sync_mode",t.target.value)),class:"w-full p-2 border border-gray-300 rounded-md text-sm bg-white shadow-sm"},e[55]||(e[55]=[l("option",{value:"sync"},"Sync (Replace all with new IDs)",-1),l("option",{value:"attach"},"Attach (Add new IDs without removing existing)",-1),l("option",{value:"detach"},"Detach (Remove specified IDs)",-1)]),40,ct)])):m("",!0),s.value.relationship?(r(),u("div",ft,[e[57]||(e[57]=l("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"Related Record IDs",-1)),l("div",bt,[l("input",{type:"text",value:s.value.related_ids||"",onInput:e[18]||(e[18]=t=>p("related_ids",t.target.value)),class:"w-full p-2 border border-gray-300 rounded-md text-sm",placeholder:"e.g., {{step_1.category_ids}} or 1,2,3"},null,40,yt),v(f,{"all-steps-before":d.allStepsBefore,"loop-context-schema":d.loopContextSchema,onInsert:e[19]||(e[19]=t=>y("related_ids",t))},null,8,["all-steps-before","loop-context-schema"])]),e[58]||(e[58]=l("p",{class:"mt-1 text-[11px] text-gray-500"}," Comma-separated list of IDs to sync/attach/detach. Can use tokens from previous steps. ",-1))])):m("",!0)],64)):m("",!0),s.value.action_type==="FETCH_API_DATA"?(r(),u(b,{key:4},[l("div",null,[e[59]||(e[59]=l("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"API Endpoint URL",-1)),l("div",gt,[l("input",{type:"text",value:s.value.api_url||"",onInput:e[20]||(e[20]=t=>p("api_url",t.target.value)),class:"w-full p-2 border border-gray-300 rounded-md text-sm",placeholder:"https://api.example.com/v1/data"},null,40,xt),v(f,{"all-steps-before":d.allStepsBefore,"loop-context-schema":d.loopContextSchema,onInsert:e[21]||(e[21]=t=>y("api_url",t))},null,8,["all-steps-before","loop-context-schema"])])]),l("div",ht,[l("div",null,[e[61]||(e[61]=l("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"HTTP Method",-1)),l("select",{value:s.value.api_method||"GET",onChange:e[22]||(e[22]=t=>p("api_method",t.target.value)),class:"w-full p-2 border border-gray-300 rounded-md bg-white shadow-sm text-sm"},e[60]||(e[60]=[l("option",{value:"GET"},"GET",-1),l("option",{value:"POST"},"POST",-1),l("option",{value:"PUT"},"PUT",-1),l("option",{value:"PATCH"},"PATCH",-1),l("option",{value:"DELETE"},"DELETE",-1)]),40,_t)]),l("div",null,[e[63]||(e[63]=l("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"Authentication",-1)),l("select",{value:s.value.api_auth_type||"NONE",onChange:e[23]||(e[23]=t=>p("api_auth_type",t.target.value)),class:"w-full p-2 border border-gray-300 rounded-md bg-white shadow-sm text-sm"},e[62]||(e[62]=[l("option",{value:"NONE"},"None",-1),l("option",{value:"BEARER"},"Bearer Token",-1),l("option",{value:"BASIC"},"Basic Auth",-1),l("option",{value:"CUSTOM_HEADER"},"Custom Header",-1)]),40,kt)])]),s.value.api_auth_type==="BEARER"?(r(),u("div",wt,[e[64]||(e[64]=l("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"Bearer Token",-1)),l("div",Ct,[l("input",{type:"text",value:s.value.api_auth_token||"",onInput:e[24]||(e[24]=t=>p("api_auth_token",t.target.value)),class:"w-full p-2 border border-gray-300 rounded-md text-sm",placeholder:"e.g. {{secrets.api_key}}"},null,40,St),v(f,{"all-steps-before":d.allStepsBefore,"loop-context-schema":d.loopContextSchema,onInsert:e[25]||(e[25]=t=>y("api_auth_token",t))},null,8,["all-steps-before","loop-context-schema"])])])):m("",!0),s.value.api_auth_type==="BASIC"?(r(),u("div",At,[l("div",null,[e[65]||(e[65]=l("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"Username",-1)),l("div",It,[l("input",{type:"text",value:s.value.api_auth_username||"",onInput:e[26]||(e[26]=t=>p("api_auth_username",t.target.value)),class:"w-full p-2 border border-gray-300 rounded-md text-sm",placeholder:"Username"},null,40,Et)])]),l("div",null,[e[66]||(e[66]=l("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"Password",-1)),l("div",Tt,[l("input",{type:"password",value:s.value.api_auth_password||"",onInput:e[27]||(e[27]=t=>p("api_auth_password",t.target.value)),class:"w-full p-2 border border-gray-300 rounded-md text-sm",placeholder:"Password"},null,40,Rt)])])])):m("",!0),s.value.api_auth_type==="CUSTOM_HEADER"?(r(),u("div",Dt,[l("div",null,[e[67]||(e[67]=l("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"Header Name",-1)),l("input",{type:"text",value:s.value.api_auth_header_name||"",onInput:e[28]||(e[28]=t=>p("api_auth_header_name",t.target.value)),class:"w-full p-2 border border-gray-300 rounded-md text-sm",placeholder:"e.g. X-Api-Key"},null,40,Ot)]),l("div",null,[e[68]||(e[68]=l("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"Header Value",-1)),l("div",Pt,[l("input",{type:"text",value:s.value.api_auth_header_value||"",onInput:e[29]||(e[29]=t=>p("api_auth_header_value",t.target.value)),class:"w-full p-2 border border-gray-300 rounded-md text-sm",placeholder:"Value"},null,40,Mt),v(f,{"all-steps-before":d.allStepsBefore,"loop-context-schema":d.loopContextSchema,onInsert:e[30]||(e[30]=t=>y("api_auth_header_value",t))},null,8,["all-steps-before","loop-context-schema"])])])])):m("",!0),l("div",Bt,[e[69]||(e[69]=l("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"Payload / Parameters (JSON)",-1)),l("div",Ft,[l("textarea",{rows:"4",value:s.value.api_payload||"",onInput:e[31]||(e[31]=t=>p("api_payload",t.target.value)),class:"w-full p-2 border border-gray-300 rounded-md text-sm font-mono",placeholder:'{"key": "{{trigger.value}}", "id": 123}'},null,40,Ut),l("div",Nt,[v(f,{"all-steps-before":d.allStepsBefore,"loop-context-schema":d.loopContextSchema,onInsert:e[32]||(e[32]=t=>y("api_payload",t))},null,8,["all-steps-before","loop-context-schema"])])]),e[70]||(e[70]=l("p",{class:"mt-1 text-[11px] text-gray-500"}," For GET/DELETE requests, these will be sent as query string parameters. For POST/PUT/PATCH, they will be sent as JSON body. Variables are supported! ",-1))]),l("div",Lt,[e[71]||(e[71]=l("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"Response Data Key (Optional)",-1)),l("input",{type:"text",value:s.value.api_response_key||"",onInput:e[33]||(e[33]=t=>p("api_response_key",t.target.value)),class:"w-full p-2 border border-gray-300 rounded-md text-sm",placeholder:"e.g. data.items"},null,40,qt),e[72]||(e[72]=l("p",{class:"mt-1 text-[11px] text-gray-500"}," Optional dot-notation path to extract specific data from the JSON response before saving to workflow context. Leave blank to return the whole response object. ",-1))])],64)):m("",!0),s.value.action_type==="CHECK_MILESTONE_COMPLETION"?(r(),u("div",Ht,e[73]||(e[73]=[l("p",{class:"font-semibold"},"This is a smart action.",-1),l("p",null,"It will automatically use the context from the trigger to check if all tasks in the milestone are complete. If so, it will mark the milestone as completed.",-1)]))):m("",!0)])):m("",!0)]),_:1},8,["onDelete"]))}};export{Zt as default};
