import{c as v,a as d,o as i,b as s,i as r,t as n,j as h,s as x}from"./app-x8m_4hY2.js";const w={class:"flex items-start justify-between"},k={class:"font-semibold text-gray-800 truncate"},C={key:0,class:"mt-1 text-sm text-gray-600 truncate"},D={key:1,class:"mt-1 text-xs text-gray-500 truncate"},p={key:2,class:"mt-1 text-xs text-gray-500 truncate"},T={class:"mt-2 flex items-center gap-2 flex-wrap"},$={key:0,class:"text-[10px] px-2 py-0.5 rounded-full bg-indigo-100 text-indigo-700"},N={key:1,class:"text-[10px] px-2 py-0.5 rounded-full bg-gray-100 text-gray-700"},j={key:3,class:"mt-2 text-[11px] text-gray-600 line-clamp-2"},A={class:"mt-2 grid grid-cols-1 gap-1 text-[11px] text-gray-500"},B={key:0},L={key:1},S={class:"mt-3 flex items-center justify-end gap-2"},E={__name:"LeadCard",props:{lead:{type:Object,required:!0}},emits:["edit","delete","open"],setup(t,{emit:y}){const c=t,m=y,f=a=>{a.dataTransfer.setData("text/plain",JSON.stringify({id:c.lead.id})),a.dataTransfer.effectAllowed="move"},b=a=>{switch((a||"new").toLowerCase()){case"contacted":return"bg-blue-100 text-blue-700";case"qualified":return"bg-amber-100 text-amber-700";case"converted":return"bg-emerald-100 text-emerald-700";case"lost":return"bg-rose-100 text-rose-700";case"new":default:return"bg-gray-100 text-gray-700"}},u=a=>{if(!a)return"—";const e=new Date(a);if(isNaN(e.getTime()))return"—";const o=new Intl.DateTimeFormat(void 0,{weekday:"short",month:"short",day:"numeric"}).format(e),l=new Intl.DateTimeFormat(void 0,{hour:"numeric",minute:"2-digit"}).format(e);return`${o} • ${l}`},g=v(()=>{var o;const a=((o=c.lead)==null?void 0:o.metadata)||{};return(Array.isArray(a.additional_campaign_ids)?a.additional_campaign_ids:[]).length||0});return(a,e)=>{var o;return i(),d("div",{class:"p-3 rounded-lg border border-gray-200 bg-white shadow-sm hover:shadow transition cursor-grab",draggable:"true",onDragstart:f,onClick:e[2]||(e[2]=l=>a.$inertia.visit(a.route("leads.show",c.lead.id)))},[s("div",w,[s("div",k,n((t.lead.first_name||"")+" "+(t.lead.last_name||"")||"(no name)"),1),s("span",{class:h(["text-xs px-2 py-0.5 rounded-full",b(t.lead.status)])},n(t.lead.status||"new"),3)]),t.lead.company?(i(),d("div",C,n(t.lead.company),1)):r("",!0),t.lead.email?(i(),d("div",D,n(t.lead.email),1)):r("",!0),t.lead.phone?(i(),d("div",p,n(t.lead.phone),1)):r("",!0),s("div",T,[t.lead.campaign?(i(),d("span",$,n(t.lead.campaign.name),1)):r("",!0),g.value?(i(),d("span",N,"+"+n(g.value)+" more",1)):r("",!0)]),(o=t.lead.latest_context)!=null&&o.summary?(i(),d("div",j,n(t.lead.latest_context.summary),1)):r("",!0),s("div",A,[t.lead.contacted_at?(i(),d("div",B,[e[3]||(e[3]=s("span",{class:"font-medium text-gray-600"},"Contacted:",-1)),s("span",null,n(u(t.lead.contacted_at)),1)])):r("",!0),t.lead.last_communication_at?(i(),d("div",L,[e[4]||(e[4]=s("span",{class:"font-medium text-gray-600"},"Last comms:",-1)),s("span",null,n(u(t.lead.last_communication_at)),1)])):r("",!0)]),s("div",S,[s("button",{class:"text-xs text-indigo-600 hover:underline",onClick:e[0]||(e[0]=x(l=>m("edit",t.lead),["stop"]))},"Edit"),s("button",{class:"text-xs text-rose-600 hover:underline",onClick:e[1]||(e[1]=x(l=>m("delete",t.lead),["stop"]))},"Delete")])],32)}}};export{E as default};
