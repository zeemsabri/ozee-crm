import{_ as A}from"./TextInput-BiLrj9VW.js";import{_ as B}from"./InputLabel-C8S7OxCX.js";import{_ as I}from"./InputError-L_lS4kVQ.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as g,c as T,e as N,f as W,Q as $,a as n,o as s,d as h,b as f,i as v,m as x,t as b,F as D,l as O,j as R,n as k}from"./app-DO6hfj1S.js";const U={class:"relative"},z={class:"flex flex-wrap items-center gap-2 mb-2 p-2 border border-gray-300 rounded-lg bg-white min-h-[44px] focus-within:border-indigo-500 focus-within:ring-1 focus-within:ring-indigo-500 transition-all duration-150"},F={key:0,class:"inline-flex items-center px-3 py-1 text-sm font-medium bg-indigo-100 text-indigo-800 rounded-full shadow-sm"},K={key:0,class:"absolute z-20 w-full bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto mt-1 transform-gpu project-type-suggestions"},q=["onClick"],G={key:1,class:"px-4 py-2 text-sm text-gray-500"},Q={key:2,class:"px-4 py-2 text-sm text-gray-500"},X={__name:"ProjectTypeInput",props:{modelValue:{type:String,default:null},label:{type:String,default:"Project Type"},placeholder:{type:String,default:"Select or type a project type"},error:{type:String,default:""},disabled:{type:Boolean,default:!1},required:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(r,{emit:j}){const m=r,d=j,a=g(""),l=g(null),u=g(!1),i=g(null),c=T(()=>[{value:"wix-website",label:"Wix Website"},{value:"shopify-website",label:"Shopify Website"},{value:"wordpress-website",label:"WordPress Website"},{value:"seo-service",label:"SEO Service"},{value:"social-media-management",label:"Social Media Management"},{value:"google-ads-campaign",label:"Google Ads Campaign"},{value:"mobile-app-development",label:"Mobile App Development"},{value:"custom-web-application",label:"Custom Web Application"},{value:"e-commerce-solution",label:"E-commerce Solution"},{value:"branding-identity",label:"Branding & Identity"},{value:"content-creation",label:"Content Creation"},{value:"email-marketing",label:"Email Marketing"},{value:"crm-integration",label:"CRM Integration"},{value:"data-analytics",label:"Data Analytics"},{value:"ui-ux-design",label:"UI/UX Design"}]),L=e=>{if(!e)return null;const t=c.value.find(o=>o.value===e);if(t)return t;if(typeof e=="string"&&e.startsWith("new_")){const o=e.split("_");o.shift(),o.length>0&&o.pop();const p=o.join(" ").replace(/-/g," ");return{value:e,label:p}}return null};N(()=>m.modelValue,e=>{l.value=L(e),a.value=""},{immediate:!0});const y=T(()=>{const e=a.value.toLowerCase();return e?c.value.filter(t=>t.label.toLowerCase().includes(e)&&(!l.value||t.value!==l.value.value)):l.value?[l.value,...c.value.filter(t=>t.value!==l.value.value)]:c.value}),C=e=>{m.disabled||(l.value=e,d("update:modelValue",e.value),d("change",e.value),a.value="",u.value=!1,k(()=>i.value.focus()))},_=()=>{if(m.disabled)return;const e=a.value.trim();if(!e)return;const t=c.value.find(p=>p.label.toLowerCase()===e.toLowerCase());if(t){C(t);return}if(!(l.value&&l.value.value.startsWith("new_")&&l.value.label.toLowerCase()===e.toLowerCase())){const w={value:`new_${e.replace(/\s+/g,"-").toLowerCase()}_${Date.now()}`,label:e};l.value=w,d("update:modelValue",w.value),d("change",w.value),a.value=""}u.value=!1,k(()=>i.value.focus())},S=e=>{e.stopPropagation(),!m.disabled&&(l.value=null,d("update:modelValue",null),d("change",null),a.value="",u.value=!1,k(()=>i.value.focus()))},P=e=>{e.key==="Enter"?(e.preventDefault(),_()):e.key==="Escape"?(u.value=!1,a.value="",i.value&&i.value.blur()):e.key==="Backspace"&&a.value===""&&l.value&&S(e)},E=e=>{a.value=e.target.value,u.value=!0},V=e=>{var o;const t=((o=i.value)==null?void 0:o.$el)||i.value;t&&!t.contains(e.target)&&!e.target.closest(".project-type-suggestions")&&(u.value=!1,l.value,a.value="")};return W(()=>{document.addEventListener("click",V)}),$(()=>{document.removeEventListener("click",V)}),(e,t)=>(s(),n("div",U,[h(B,{value:r.label,class:"mb-1"},null,8,["value"]),f("div",z,[l.value?(s(),n("span",F,[x(b(l.value.label)+" ",1),r.disabled?v("",!0):(s(),n("button",{key:0,type:"button",onClick:S,class:"ml-2 -mr-1 text-indigo-500 hover:text-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 rounded-full p-0.5","aria-label":"Remove selected project type"},t[1]||(t[1]=[f("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])))])):v("",!0),h(A,{ref_key:"inputRef",ref:i,type:"text",placeholder:l.value?"":r.placeholder,modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=o=>a.value=o),onKeydown:P,onInput:E,class:"flex-grow min-w-[150px] border-none focus:ring-0 shadow-none p-0 bg-transparent text-gray-900",disabled:r.disabled},null,8,["placeholder","modelValue","disabled"])]),u.value&&!r.disabled?(s(),n("div",K,[(s(!0),n(D,null,O(y.value,o=>(s(),n("div",{key:o.value,onClick:p=>C(o),class:R(["px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 cursor-pointer transition-colors duration-100",{"bg-indigo-50 text-indigo-700":l.value&&o.value===l.value.value}])},b(o.label),11,q))),128)),a.value.trim()!==""&&!c.value.some(o=>o.label.toLowerCase()===a.value.toLowerCase())?(s(),n("div",{key:0,onClick:_,class:"px-4 py-2 text-sm text-indigo-700 bg-indigo-50 hover:bg-indigo-100 cursor-pointer border-t border-indigo-200 font-semibold transition-colors duration-100"},' Add new type: "'+b(a.value.trim())+'" ',1)):v("",!0),y.value.length===0&&a.value.trim()!==""?(s(),n("div",G,[t[2]||(t[2]=x(" No matching options found. Press ",-1)),t[3]||(t[3]=f("span",{class:"font-semibold text-indigo-600"},"Enter",-1)),x(' to add "'+b(a.value.trim())+'" as a new type. ',1)])):v("",!0),y.value.length===0&&a.value.trim()===""&&!l.value?(s(),n("div",Q," Start typing to search or select a type. ")):v("",!0)])):v("",!0),h(I,{message:r.error,class:"mt-2"},null,8,["message"])]))}},te=M(X,[["__scopeId","data-v-5dcfabc3"]]);export{te as P};
