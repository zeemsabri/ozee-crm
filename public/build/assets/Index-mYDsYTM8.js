import{C as Y,r as g,f as M,p as W,e as H,g as O,o as c,w as A,b as e,d as i,v as E,x as J,W as U,a as p,i as T,j as $,t as b,m as G,F as N,l as B,K as Q,N as j,J as L}from"./app-DKXfdGr7.js";import{T as X,C as Z,_ as ee}from"./AuthenticatedLayout-WC0jBZwB.js";import{B as te}from"./BaseFormModal-CE3CMiWG.js";import{_}from"./InputLabel-BFquBl3S.js";import{_ as D}from"./TextInput-De8Paq1F.js";import{_ as w}from"./InputError-D2-GF5PL.js";import{S as se}from"./SelectDropdown-CUL2e6q1.js";import{_ as le}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as oe}from"./PrimaryButton-CXA4lTrj.js";import"./Modal-DG-kULZp.js";import"./SecondaryButton-DhW6K5zC.js";import"./index-CrDInIBe.js";import"./debounce-C-hnF4Z3.js";import"./ApplicationLogo-C1NK7KWp.js";import"./createLucideIcon-R4fVh7l-.js";import"./plus-CEvNCTA-.js";import"./DangerButton-CmTTlUqJ.js";import"./moment-BLMuvzoS.js";import"./NoticeboardModal-Gl8I64oo.js";/* empty css                                                                       */const ie={class:"space-y-4"},ae={class:"mt-4"},ne={class:"flex items-center space-x-6"},re={class:"inline-flex items-center"},de={class:"inline-flex items-center"},ue={class:"inline-flex items-center"},ce={__name:"EditForm",props:{show:{type:Boolean,default:!1},apiEndpoint:{type:String,required:!0},resource:{type:Object,required:!0}},emits:["close","resourceUpdated"],setup(S,{emit:h}){const o=S,f=h,s=Y({title:"",description:"",url:"",type:"website",thumbnail_url:"",visible_to_client:!0,visibility:"client",tags:[]}),v=[{value:"website",label:"Website"},{value:"youtube",label:"YouTube Video"},{value:"document",label:"Document"},{value:"image",label:"Image"},{value:"other",label:"Other"}],x=g(v);M(async()=>{try{const{data:l}=await W.get("/api/options/shareable_resource_types");Array.isArray(l)&&l.length&&(x.value=l)}catch{x.value=v}}),M(()=>{m()});const m=()=>{if(o.resource){s.title=o.resource.title||"",s.description=o.resource.description||"",s.url=o.resource.url||"",s.type=o.resource.type||"website",s.thumbnail_url=o.resource.thumbnail_url||"",s.visible_to_client=o.resource.visible_to_client!==void 0?o.resource.visible_to_client:!0,s.visibility=o.resource.is_private?"private":o.resource.visible_to_team?"team":"client";const l=o.resource.tags||[];s.tags=Array.isArray(l)?l.map(t=>typeof t=="object"&&t!==null?t.id:t).filter(t=>t!=null):[]}};H(()=>o.resource,()=>{m()},{immediate:!0,deep:!0});const k=l=>{const t=Array.isArray(l.tags)?l.tags:[];return{title:l.title,description:l.description,url:l.url,type:l.type,thumbnail_url:l.thumbnail_url,visibility:l.visibility,tags:t,tag_ids:t}},C=l=>{f("resourceUpdated",l),y()},y=()=>{f("close")};return(l,t)=>(c(),O(te,{show:o.show,title:"Edit Shareable Resource",apiEndpoint:`${o.apiEndpoint}/${o.resource.id}`,httpMethod:"put",formData:s,submitButtonText:"Update Resource",successMessage:"Shareable resource updated successfully!",formatDataForApi:k,onSubmitted:C,onClose:y},{default:A(({errors:r})=>{var V;return[e("div",ie,[e("div",null,[i(_,{for:"title",value:"Title",class:"mb-1"}),i(D,{id:"title",type:"text",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:s.title,"onUpdate:modelValue":t[0]||(t[0]=a=>s.title=a),required:""},null,8,["modelValue"]),i(w,{message:r.title?r.title[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[i(_,{for:"url",value:"Resource URL",class:"mb-1"}),i(D,{id:"url",type:"url",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:s.url,"onUpdate:modelValue":t[1]||(t[1]=a=>s.url=a),required:""},null,8,["modelValue"]),i(w,{message:r.url?r.url[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[i(_,{for:"type",value:"Resource Type",class:"mb-1"}),i(se,{id:"type",modelValue:s.type,"onUpdate:modelValue":t[2]||(t[2]=a=>s.type=a),options:x.value,valueKey:"value",labelKey:"label",placeholder:"Select Resource Type",required:"",class:"mt-1 block w-full"},null,8,["modelValue","options"]),i(w,{message:r.type?r.type[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[i(_,{for:"thumbnail_url",value:"Thumbnail URL (Optional)",class:"mb-1"}),i(D,{id:"thumbnail_url",type:"url",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:s.thumbnail_url,"onUpdate:modelValue":t[3]||(t[3]=a=>s.thumbnail_url=a)},null,8,["modelValue"]),i(w,{message:r.thumbnail_url?r.thumbnail_url[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[i(_,{for:"description",value:"Description (Optional)",class:"mb-1"}),E(e("textarea",{id:"description",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-lg shadow-sm mt-1 block w-full","onUpdate:modelValue":t[4]||(t[4]=a=>s.description=a),rows:"3"},null,512),[[J,s.description]]),i(w,{message:r.description?r.description[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[i(X,{modelValue:s.tags,"onUpdate:modelValue":t[5]||(t[5]=a=>s.tags=a),initialTags:((V=o.resource)==null?void 0:V.tags)||[],label:"Associated Tags",placeholder:"Search or add tags",error:r.tags?r.tags[0]:""},null,8,["modelValue","initialTags","error"])]),e("div",ae,[i(_,{value:"Visibility",class:"mb-2"}),e("div",ne,[e("label",re,[E(e("input",{type:"radio",class:"form-radio",value:"client","onUpdate:modelValue":t[6]||(t[6]=a=>s.visibility=a)},null,512),[[U,s.visibility]]),t[9]||(t[9]=e("span",{class:"ml-2"},"Visible to Client",-1))]),e("label",de,[E(e("input",{type:"radio",class:"form-radio",value:"team","onUpdate:modelValue":t[7]||(t[7]=a=>s.visibility=a)},null,512),[[U,s.visibility]]),t[10]||(t[10]=e("span",{class:"ml-2"},"Visible to Team",-1))]),e("label",ue,[E(e("input",{type:"radio",class:"form-radio",value:"private","onUpdate:modelValue":t[8]||(t[8]=a=>s.visibility=a)},null,512),[[U,s.visibility]]),t[11]||(t[11]=e("span",{class:"ml-2"},"Private",-1))])]),i(w,{message:r.visibility?r.visibility[0]:"",class:"mt-2"},null,8,["message"])])])]}),_:1},8,["show","apiEndpoint","formData"]))}},pe=le(ce,[["__scopeId","data-v-59f260bc"]]),me={class:"container mx-auto p-6 bg-gray-50 min-h-screen font-inter"},ge={class:"flex border-b border-gray-200 mb-6"},xe={class:"bg-white p-8 rounded-lg shadow-xl border border-gray-100"},ye={key:0},be={key:0,class:"text-center py-8"},fe={key:1,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert"},ve={class:"block sm:inline"},he={key:2,class:"text-center py-8 text-gray-600"},_e={key:3,class:"overflow-x-auto"},we={class:"min-w-full divide-y divide-gray-200"},ke={class:"bg-white divide-y divide-gray-200"},Ce={class:"px-6 py-4 whitespace-nowrap"},Ve={class:"text-sm font-medium text-gray-900"},Ee={key:0,class:"text-sm text-gray-500 mt-1 truncate max-w-xs"},Re={class:"px-6 py-4 whitespace-nowrap"},Te={class:"px-6 py-4 whitespace-nowrap text-sm text-indigo-600 hover:text-indigo-900"},$e=["href"],Se={class:"px-6 py-4 whitespace-nowrap"},Ue={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},De={class:"flex flex-wrap gap-1"},Me={key:0,class:"text-gray-400"},Ae={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},Fe={class:"flex justify-end space-x-3"},Ne=["onClick"],Be=["onClick"],je={key:0,class:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center z-50"},Le={class:"bg-white rounded-lg p-6 max-w-md w-full"},Oe={class:"text-gray-600 mb-6"},nt={__name:"Index",props:{apiEndpoint:{type:String,default:"/api/shareable-resources"}},setup(S){const h=S,o=g(!1),f=g(!1),s=g(!1),v=g(null),x=g(null),m=g("existing"),k=g([]),C=g(!1),y=g(null),l=async()=>{C.value=!0,y.value=null;try{const u=await window.axios.get(h.apiEndpoint);k.value=u.data.data,j("Resources loaded successfully!")}catch(u){console.error("Error fetching resources:",u),y.value="Failed to load resources. Please try again.",L(y.value)}finally{C.value=!1}},t=u=>{console.log("New resource created:",u),l(),o.value=!1,m.value="existing"},r=u=>{console.log("Resource updated:",u),l(),f.value=!1},V=()=>{o.value=!0,m.value="add-new"},a=u=>{v.value=u,f.value=!0},q=u=>{x.value=u,s.value=!0},I=async()=>{try{await window.axios.delete(`${h.apiEndpoint}/${x.value.id}`),j("Resource deleted successfully!"),l(),s.value=!1,x.value=null}catch(u){console.error("Error deleting resource:",u),L("Failed to delete resource. Please try again.")}},z=()=>{o.value=!1,m.value==="add-new"&&(m.value="existing")},K=()=>{f.value=!1,v.value=null},P=()=>{s.value=!1,x.value=null};return M(()=>{l()}),(u,d)=>(c(),O(ee,null,{default:A(()=>{var F;return[e("div",me,[d[7]||(d[7]=e("h1",{class:"text-4xl font-extrabold text-gray-900 mb-8 text-center"},"Shareable Resource Management",-1)),e("div",ge,[e("button",{onClick:d[0]||(d[0]=n=>m.value="existing"),class:$([["py-3 px-6 text-lg font-medium transition-all duration-200",m.value==="existing"?"border-b-4 border-indigo-600 text-indigo-700 bg-white shadow-sm":"text-gray-600 hover:text-gray-800 hover:border-gray-300"],"rounded-t-lg focus:outline-none"])}," Existing Resources ",2),e("button",{onClick:V,class:$([["py-3 px-6 text-lg font-medium transition-all duration-200",m.value==="add-new"?"border-b-4 border-indigo-600 text-indigo-700 bg-white shadow-sm":"text-gray-600 hover:text-gray-800 hover:border-gray-300"],"rounded-t-lg focus:outline-none"])}," Add New Resource ",2)]),e("div",xe,[m.value==="existing"?(c(),p("div",ye,[d[5]||(d[5]=e("h2",{class:"text-2xl font-semibold text-gray-800 mb-6"},"Your Shareable Resources",-1)),C.value?(c(),p("div",be,d[1]||(d[1]=[e("svg",{class:"animate-spin mx-auto h-10 w-10 text-indigo-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),e("p",{class:"mt-3 text-gray-600"},"Loading resources...",-1)]))):y.value?(c(),p("div",fe,[e("span",ve,b(y.value),1)])):k.value.length===0?(c(),p("div",he,[d[3]||(d[3]=e("p",{class:"text-lg"},"No shareable resources found. Start by adding a new one!",-1)),i(oe,{onClick:V,class:"mt-4"},{default:A(()=>d[2]||(d[2]=[G(" Add First Resource ",-1)])),_:1,__:[2]})])):(c(),p("div",_e,[e("table",we,[d[4]||(d[4]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Title"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Type"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"URL"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Visible to Client"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Tags"),e("th",{scope:"col",class:"relative px-6 py-3"},[e("span",{class:"sr-only"},"Edit")])])],-1)),e("tbody",ke,[(c(!0),p(N,null,B(k.value,n=>(c(),p("tr",{key:n.id},[e("td",Ce,[e("div",Ve,b(n.title),1),n.description?(c(),p("div",Ee,b(n.description),1)):T("",!0)]),e("td",Re,[e("span",{class:$(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",n.type==="youtube"?"bg-red-100 text-red-800":n.type==="website"?"bg-blue-100 text-blue-800":n.type==="document"?"bg-green-100 text-green-800":n.type==="image"?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"])},b(n.type),3)]),e("td",Te,[e("a",{href:n.url,target:"_blank",rel:"noopener noreferrer",class:"truncate max-w-xs block"},b(n.url),9,$e)]),e("td",Se,[e("span",{class:$(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",n.visible_to_client?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},b(n.visible_to_client?"Yes":"No"),3)]),e("td",Ue,[e("div",De,[(c(!0),p(N,null,B(n.tags,R=>(c(),p("span",{key:R.id,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800"},b(R.name),1))),128)),!n.tags||n.tags.length===0?(c(),p("span",Me,"No tags")):T("",!0)])]),e("td",Ae,[e("div",Fe,[e("button",{onClick:R=>a(n),class:"text-indigo-600 hover:text-indigo-900"},"Edit",8,Ne),e("button",{onClick:R=>q(n),class:"text-red-600 hover:text-red-900"},"Delete",8,Be)])])]))),128))])])]))])):T("",!0)]),i(Z,{show:o.value,apiEndpoint:h.apiEndpoint,onClose:z,onResourceCreated:t},null,8,["show","apiEndpoint"]),E(i(pe,{show:f.value,apiEndpoint:h.apiEndpoint,resource:v.value||{},onClose:K,onResourceUpdated:r},null,8,["show","apiEndpoint","resource"]),[[Q,v.value]]),s.value?(c(),p("div",je,[e("div",Le,[d[6]||(d[6]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Confirm Delete",-1)),e("p",Oe,' Are you sure you want to delete the resource "'+b((F=x.value)==null?void 0:F.title)+'"? This action cannot be undone. ',1),e("div",{class:"flex justify-end space-x-3"},[e("button",{onClick:P,class:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-400"}," Cancel "),e("button",{onClick:I,class:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500"}," Delete ")])])])):T("",!0)])]}),_:1}))}};export{nt as default};
