import{a as i,o as n,b as t,c as U,v as ye,q as xe,r as g,I as be,f as he,d as a,u as f,h as ke,w,t as u,x as V,g as Ue,i as C,F as j,l as M,z as $,m as b,j as I,C as ee}from"./app-DDzbo8Mi.js";import{_ as Ce}from"./AuthenticatedLayout-fGwNVPmP.js";import{P as O}from"./PrimaryButton-BCGqKbah.js";import{D as Ve}from"./DangerButton-BayGMqXB.js";import{_ as Y}from"./Modal-CSjdNaLt.js";import{_ as v}from"./InputLabel-BlWwAwJW.js";import{_ as y}from"./TextInput-BYqzsaMY.js";import{_}from"./InputError-D32L53re.js";import{_ as Z}from"./SecondaryButton-hLEFjRQx.js";import{r as Q}from"./UsersIcon-DCcFuWIa.js";import{r as je}from"./MagnifyingGlassIcon-Cb2pNLog.js";import{r as $e,a as ze}from"./PlusIcon-nF9YJ04R.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./SelectDropdown-C_bXkqkh.js";/* empty css                                                                       */import"./Checkbox-jnzt3d7M.js";import"./ApplicationLogo-DUs1gecg.js";import"./moment-BLMuvzoS.js";import"./NoticeboardModal-NW0o0gxr.js";function Me(R,c){return n(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z"})])}function Ae(R,c){return n(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m9 9 6-6m0 0 6 6m-6-6v12a6 6 0 0 1-12 0v-3"})])}function Se(R,c){return n(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M20.25 14.15v4.25c0 1.094-.787 2.036-1.872 2.18-2.087.277-4.216.42-6.378.42s-4.291-.143-6.378-.42c-1.085-.144-1.872-1.086-1.872-2.18v-4.25m16.5 0a2.18 2.18 0 0 0 .75-1.661V8.706c0-1.081-.768-2.015-1.837-2.175a48.114 48.114 0 0 0-3.413-.387m4.5 8.006c-.194.165-.42.295-.673.38A23.978 23.978 0 0 1 12 15.75c-2.648 0-5.195-.429-7.577-1.22a2.016 2.016 0 0 1-.673-.38m0 0A2.18 2.18 0 0 1 3 12.489V8.706c0-1.081.768-2.015 1.837-2.175a48.111 48.111 0 0 1 3.413-.387m7.5 0V5.25A2.25 2.25 0 0 0 13.5 3h-3a2.25 2.25 0 0 0-2.25 2.25v.894m7.5 0a48.667 48.667 0 0 0-7.5 0M12 12.75h.008v.008H12v-.008Z"})])}const Ee={class:"py-6 sm:py-12"},Pe={class:"px-4 sm:px-6 lg:px-8"},Ne={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},qe={class:"bg-white rounded-2xl shadow-sm p-6 flex items-center justify-between transition-all duration-300 hover:shadow-md hover:scale-105"},Be={class:"text-3xl font-bold text-gray-900 mt-1"},De={class:"bg-white rounded-2xl shadow-sm p-6 flex items-center justify-between transition-all duration-300 hover:shadow-md hover:scale-105"},Fe={class:"text-3xl font-bold text-gray-900 mt-1"},Le={class:"bg-white rounded-2xl shadow-sm p-6 flex items-center justify-between transition-all duration-300 hover:shadow-md hover:scale-105"},Re={class:"text-3xl font-bold text-gray-900 mt-1"},He={class:"bg-white rounded-2xl shadow-sm p-6 flex items-center justify-between transition-all duration-300 hover:shadow-md hover:scale-105"},Oe={class:"text-3xl font-bold text-gray-900 mt-1"},Ye={class:"bg-white rounded-2xl shadow-xl overflow-hidden"},Ze={class:"p-6"},Qe={class:"flex flex-col md:flex-row justify-between items-center mb-6 gap-4"},Te={class:"w-full md:w-auto flex flex-col sm:flex-row gap-4 items-center"},Ge={class:"relative w-full"},Je={class:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"},Ke=["value"],We=["value"],Xe={key:0,class:"text-center p-12"},Ie={key:1,class:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded-lg",role:"alert"},es={key:2,class:"text-center p-12"},ss={key:3},ls={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"},ts={class:"flex items-center space-x-4 mb-4"},os={class:"flex-shrink-0"},as={class:"text-xl font-bold text-gray-900"},rs={class:"text-sm text-gray-500 truncate"},ns={class:"flex flex-wrap gap-2 mb-4"},is={class:"inline-flex items-center rounded-full px-3 py-1 text-xs font-medium bg-gray-50 text-gray-600 ring-1 ring-inset ring-gray-500/10"},ds={class:"text-sm text-gray-600 mt-auto"},us={key:0,class:"text-xs mt-1 text-gray-500"},ms={key:0,class:"group relative inline-block cursor-pointer text-indigo-500 hover:text-indigo-700"},cs={class:"absolute z-10 bottom-full left-1/2 -translate-x-1/2 mb-2 w-max p-2 bg-gray-800 text-white text-xs rounded-md shadow-lg opacity-0 group-hover:opacity-100 transition-opacity"},vs={class:"list-none p-0 m-0"},ps={key:1,class:"text-xs text-gray-400 mt-1"},gs={class:"mt-4 flex justify-end gap-2"},fs=["onClick"],ws=["onClick"],_s=["onClick"],ys={class:"p-6"},xs={key:0,class:"text-red-600 text-sm mb-4"},bs={class:"mb-4"},hs={class:"mb-4"},ks={class:"mb-4"},Us={class:"mb-4"},Cs={class:"mb-4"},Vs=["value","disabled"],js={class:"mb-4"},$s={class:"mb-4"},zs={class:"mt-6 flex justify-end"},Ms={class:"p-6"},As={key:0,class:"text-red-600 text-sm mb-4"},Ss={class:"mb-4"},Es={class:"mb-4"},Ps={class:"mb-4"},Ns={class:"mb-4"},qs={class:"mb-4"},Bs=["disabled"],Ds=["value","disabled"],Fs={class:"mb-4"},Ls={class:"mb-4"},Rs={class:"mt-6 flex justify-end"},Hs={class:"p-6"},Os={key:0,class:"mt-4 text-gray-800"},Ys={key:1,class:"text-red-600 text-sm mb-4"},Zs={class:"mt-6 flex justify-end"},ml={__name:"Index",setup(R){const c=U(()=>ye().props.auth.user),{canDo:T}=xe(),x=g([]),H=g(!0),r=g({}),d=g(""),N=g(""),q=g(""),B=g(""),D=g("active"),A=g(!1),S=g(!1),E=g(!1),o=be({id:null,name:"",email:"",password:"",password_confirmation:"",role:"contractor",role_id:4,user_type:"contractor",timezone:""}),h=g(null),p=g([]),se=U(()=>{const l=x.value.flatMap(s=>s.projects||[]);return[...new Set(l.map(s=>s.id))].map(s=>{const m=l.find(k=>k.id===s);return{value:m.id,label:m.name}})}),le=U(()=>x.value.length),te=U(()=>x.value.filter(l=>{var e;return((e=l.role_data)==null?void 0:e.slug)==="manager"||l.role==="manager"||l.role==="manager-role"||l.role==="manager_role"}).length),oe=U(()=>x.value.filter(l=>{var e;return((e=l.role_data)==null?void 0:e.slug)==="employee"||l.role==="employee"}).length),ae=U(()=>x.value.filter(l=>{var e;return((e=l.role_data)==null?void 0:e.slug)==="contractor"||l.role==="contractor"}).length),G=U(()=>{let l=x.value;if(q.value&&(l=l.filter(e=>{var m,k;return(((m=e.role_data)==null?void 0:m.id)||((k=p.value.find(L=>L.slug===e.role))==null?void 0:k.value))===q.value})),B.value&&(l=l.filter(e=>e.projects&&e.projects.some(s=>s.id===B.value))),N.value){const e=N.value.toLowerCase();l=l.filter(s=>s.name.toLowerCase().includes(e)||s.email.toLowerCase().includes(e))}return l}),re=async()=>{try{const l=await window.axios.get("/api/roles?type=application");p.value=l.data.map(e=>({value:e.id,slug:e.slug.replace(/-/g,"_"),label:e.name}))}catch(l){console.error("Error fetching roles:",l),p.value=[{value:1,slug:"super_admin",label:"Super Admin"},{value:2,slug:"manager",label:"Manager"},{value:3,slug:"employee",label:"Employee"},{value:4,slug:"contractor",label:"Contractor"}]}},F=U(()=>{var l;return c.value?((l=c.value.role_data)==null?void 0:l.slug)==="super-admin"||c.value.role==="super_admin"||c.value.role==="super-admin":!1}),ne=U(()=>{var l;return c.value?((l=c.value.role_data)==null?void 0:l.slug)==="manager"||c.value.role==="manager"||c.value.role==="manager-role"||c.value.role==="manager_role":!1}),J=T("delete_users"),ie=T("create_users"),z=async()=>{H.value=!0,d.value="";try{const l={};D.value==="all"?l.with_trashed=1:D.value==="archived"&&(l.only_trashed=1);const e=await window.axios.get("/api/users",{params:l});x.value=e.data}catch(l){d.value="Failed to fetch users.",console.error("Error fetching users:",l),l.response&&l.response.status===403?d.value="You do not have permission to view users.":l.response&&l.response.status===401&&(d.value="Session expired. Please log in again.",localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),window.location.href="/login")}finally{H.value=!1}},de=()=>{o.id=null,o.name="",o.email="",o.password="",o.password_confirmation="";const l=p.value.find(e=>e.slug==="contractor");o.role_id=(l==null?void 0:l.value)||(p.value.length>0?p.value[0].value:4),o.role=(l==null?void 0:l.slug)||"contractor",o.user_type="contractor";try{o.timezone=Intl.DateTimeFormat().resolvedOptions().timeZone||""}catch{o.timezone=""}r.value={},d.value="",A.value=!0},ue=async()=>{r.value={},d.value="";try{const l=await window.axios.post("/api/users",o);x.value.push(l.data),A.value=!1,console.log("User created successfully!"),z()}catch(l){l.response&&l.response.status===422?r.value=l.response.data.errors:l.response&&l.response.data.message?d.value=l.response.data.message:(d.value="Failed to create user.",console.error("Error creating user:",l))}},me=l=>{if(o.id=l.id,o.name=l.name,o.email=l.email,o.timezone=l.timezone||"",l.role_data&&l.role_data.id)o.role_id=l.role_data.id,o.role=l.role_data.slug.replace(/-/g,"_");else{const e=typeof l.role=="string"?l.role.replace(/-/g,"_"):"employee",s=p.value.find(m=>m.slug===e);o.role_id=(s==null?void 0:s.value)||(p.value.length>0?p.value[0].value:null),o.role=e}o.user_type=l.user_type||"employee",o.password="",o.password_confirmation="",r.value={},d.value="",S.value=!0},ce=async()=>{r.value={},d.value="";try{const l={...o};l.password||(delete l.password,delete l.password_confirmation);const e=await window.axios.put(`/api/users/${o.id}`,l),s=x.value.findIndex(m=>m.id===o.id);s!==-1&&(x.value[s]=e.data),S.value=!1,console.log("User updated successfully!"),z()}catch(l){l.response&&l.response.status===422?r.value=l.response.data.errors:l.response&&l.response.data.message?d.value=l.response.data.message:(d.value="Failed to update user.",console.error("Error updating user:",l))}},ve=l=>{h.value=l,E.value=!0},pe=async()=>{d.value="";try{await window.axios.delete(`/api/users/${h.value.id}`),await z(),E.value=!1,h.value=null,console.log("User archived successfully!")}catch(l){d.value="Failed to archive user.",l.response&&l.response.data.message&&(d.value=l.response.data.message),console.error("Error archiving user:",l)}},ge=async l=>{d.value="";try{await window.axios.post(`/api/users/${l.id}/restore`),await z(),console.log("User restored successfully!")}catch(e){d.value="Failed to restore user.",e.response&&e.response.data.message&&(d.value=e.response.data.message),console.error("Error restoring user:",e)}},K=()=>{const l=p.value.find(e=>e.value===o.role_id);l&&(o.role=l.slug)},fe=l=>{if(!l||l.length===0)return"None";const e=l.map(m=>m.name);if(e.length<=2)return e.join(", ");const s=e.length-2;return`${e[0]}, ${e[1]} and ${s} more`};he(()=>{z(),re()});const we=l=>{switch(typeof l=="string"?l.toLowerCase():(l==null?void 0:l.slug)||"employee"){case"super_admin":case"super-admin":return"bg-red-50 text-red-700 ring-red-600/20";case"manager":return"bg-indigo-50 text-indigo-700 ring-indigo-600/20";case"employee":return"bg-emerald-50 text-emerald-700 ring-emerald-600/20";case"contractor":return"bg-yellow-50 text-yellow-700 ring-yellow-600/20";default:return"bg-gray-50 text-gray-600 ring-gray-500/10"}},_e=l=>{const e=l.split("").reduce((m,k)=>m+k.charCodeAt(0),0),s=["bg-blue-500","bg-indigo-500","bg-purple-500","bg-pink-500","bg-rose-500","bg-orange-500","bg-amber-500","bg-lime-500","bg-emerald-500","bg-cyan-500"];return s[e%s.length]};return(l,e)=>(n(),i(j,null,[a(f(ke),{title:"Users"}),a(Ce,null,{header:w(()=>e[24]||(e[24]=[t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Users",-1)])),default:w(()=>[t("div",Ee,[t("div",Pe,[t("div",Ne,[t("div",qe,[t("div",null,[e[25]||(e[25]=t("h4",{class:"text-gray-500 font-medium text-sm"},"Total Users",-1)),t("p",Be,u(le.value),1)]),a(f(Q),{class:"h-12 w-12 text-indigo-500 opacity-80"})]),t("div",De,[t("div",null,[e[26]||(e[26]=t("h4",{class:"text-gray-500 font-medium text-sm"},"Managers",-1)),t("p",Fe,u(te.value),1)]),a(f(Q),{class:"h-12 w-12 text-green-500 opacity-80"})]),t("div",Le,[t("div",null,[e[27]||(e[27]=t("h4",{class:"text-gray-500 font-medium text-sm"},"Employees",-1)),t("p",Re,u(oe.value),1)]),a(f(Q),{class:"h-12 w-12 text-yellow-500 opacity-80"})]),t("div",He,[t("div",null,[e[28]||(e[28]=t("h4",{class:"text-gray-500 font-medium text-sm"},"Contractors",-1)),t("p",Oe,u(ae.value),1)]),a(f(Se),{class:"h-12 w-12 text-pink-500 opacity-80"})])]),t("div",Ye,[t("div",Ze,[t("div",Qe,[e[33]||(e[33]=t("h3",{class:"text-2xl font-bold text-gray-900"},"User Management",-1)),t("div",Te,[t("div",Ge,[t("div",Je,[a(f(je),{class:"w-5 h-5 text-gray-400"})]),a(y,{id:"search",type:"text",class:"w-full pl-10 pr-3 py-2 rounded-lg",placeholder:"Search users...",modelValue:N.value,"onUpdate:modelValue":e[0]||(e[0]=s=>N.value=s)},null,8,["modelValue"])]),V(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>q.value=s),class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-lg shadow-sm w-full sm:w-40"},[e[29]||(e[29]=t("option",{value:""},"All Roles",-1)),(n(!0),i(j,null,M(p.value,s=>(n(),i("option",{key:s.value,value:s.value},u(s.label),9,Ke))),128))],512),[[$,q.value]]),V(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>B.value=s),class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-lg shadow-sm w-full sm:w-40"},[e[30]||(e[30]=t("option",{value:""},"All Projects",-1)),(n(!0),i(j,null,M(se.value,s=>(n(),i("option",{key:s.value,value:s.value},u(s.label),9,We))),128))],512),[[$,B.value]]),V(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>D.value=s),onChange:z,class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-lg shadow-sm w-full sm:w-40"},e[31]||(e[31]=[t("option",{value:"active"},"Active",-1),t("option",{value:"archived"},"Archived",-1),t("option",{value:"all"},"All",-1)]),544),[[$,D.value]]),f(ie)?(n(),Ue(O,{key:0,onClick:de,class:"w-full sm:w-auto"},{default:w(()=>[a(f($e),{class:"w-4 h-4 mr-2"}),e[32]||(e[32]=b(" Add User ",-1))]),_:1,__:[32]})):C("",!0)])]),H.value?(n(),i("div",Xe,e[34]||(e[34]=[t("svg",{class:"animate-spin h-10 w-10 text-indigo-500 mx-auto",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),t("p",{class:"text-gray-600 mt-4"},"Loading users...",-1)]))):d.value?(n(),i("div",Ie,[t("p",null,u(d.value),1)])):G.value.length===0?(n(),i("div",es,e[35]||(e[35]=[t("p",{class:"text-gray-600"},"No users found matching your criteria.",-1)]))):(n(),i("div",ss,[t("div",ls,[(n(!0),i(j,null,M(G.value,s=>{var m,k,L,W,X;return n(),i("div",{key:s.id,class:"bg-white rounded-2xl shadow-sm p-6 flex flex-col justify-between relative border border-gray-100 transition-all duration-300 hover:shadow-lg"},[t("div",null,[t("div",ts,[t("div",os,[t("div",{class:I(["h-12 w-12 rounded-full flex items-center justify-center text-white font-bold text-lg",_e(s.name)])},u(s.name.charAt(0)),3)]),t("div",null,[t("p",as,u(s.name),1),t("p",rs,u(s.email),1)])]),t("div",ns,[t("span",{class:I(["inline-flex items-center rounded-full px-3 py-1 text-xs font-medium ring-1 ring-inset",we(((m=s.role_data)==null?void 0:m.slug)||s.role)])}," Role: "+u(((k=s.role_data)==null?void 0:k.name)||(typeof s.role=="string"?s.role.replace(/_|-/g," "):"Employee")),3),t("span",is," Type: "+u(((L=s.user_type)==null?void 0:L.toUpperCase())||"EMPLOYEE"),1)]),t("div",ds,[e[38]||(e[38]=t("p",{class:"font-medium text-gray-800"},"Projects",-1)),s.projects&&s.projects.length?(n(),i("p",us,[b(u(fe(s.projects))+" ",1),s.projects.length>2?(n(),i("span",ms,[e[37]||(e[37]=b(" (more) ",-1)),t("span",cs,[t("ul",vs,[(n(!0),i(j,null,M(s.projects,P=>(n(),i("li",{key:P.id,class:"whitespace-nowrap"},u(P.name),1))),128))]),e[36]||(e[36]=t("div",{class:"absolute w-3 h-3 bg-gray-800 transform rotate-45 -bottom-1 left-1/2 -translate-x-1/2"},null,-1))])])):C("",!0)])):(n(),i("p",ps,"No projects assigned."))])]),t("div",gs,[F.value||ne.value&&(((W=s.role_data)==null?void 0:W.slug)==="employee"||((X=s.role_data)==null?void 0:X.slug)==="contractor"||typeof s.role=="string"&&(s.role.replace(/-/g,"_")==="employee"||s.role.replace(/-/g,"_")==="contractor"))||c.value.id===s.id?(n(),i("button",{key:0,onClick:P=>me(s),class:"p-2 rounded-full text-gray-400 hover:text-indigo-600 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-colors",title:"Edit User"},[a(f(ze),{class:"h-5 w-5"})],8,fs)):C("",!0),f(J)&&s.id!==c.value.id&&!s.deleted_at?(n(),i("button",{key:1,onClick:P=>ve(s),class:"p-2 rounded-full text-gray-400 hover:text-red-600 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-red-500 transition-colors",title:"Archive User"},[a(f(Me),{class:"h-5 w-5"})],8,ws)):C("",!0),f(J)&&s.deleted_at?(n(),i("button",{key:2,onClick:P=>ge(s),class:"p-2 rounded-full text-gray-400 hover:text-green-600 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-green-500 transition-colors",title:"Unarchive User"},[a(f(Ae),{class:"h-5 w-5"})],8,_s)):C("",!0)])])}),128))])]))])])])]),a(Y,{show:A.value,onClose:e[12]||(e[12]=s=>A.value=!1)},{default:w(()=>[t("div",ys,[e[42]||(e[42]=t("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Create New User",-1)),d.value?(n(),i("div",xs,u(d.value),1)):C("",!0),t("form",{onSubmit:ee(ue,["prevent"])},[t("div",bs,[a(v,{for:"create_name",value:"Name"}),a(y,{id:"create_name",type:"text",class:"mt-1 block w-full",modelValue:o.name,"onUpdate:modelValue":e[4]||(e[4]=s=>o.name=s),required:"",autofocus:""},null,8,["modelValue"]),a(_,{message:r.value.name?r.value.name[0]:"",class:"mt-2"},null,8,["message"])]),t("div",hs,[a(v,{for:"create_email",value:"Email"}),a(y,{id:"create_email",type:"email",class:"mt-1 block w-full",modelValue:o.email,"onUpdate:modelValue":e[5]||(e[5]=s=>o.email=s),required:""},null,8,["modelValue"]),a(_,{message:r.value.email?r.value.email[0]:"",class:"mt-2"},null,8,["message"])]),t("div",ks,[a(v,{for:"create_password",value:"Password"}),a(y,{id:"create_password",type:"password",class:"mt-1 block w-full",modelValue:o.password,"onUpdate:modelValue":e[6]||(e[6]=s=>o.password=s),required:"",autocomplete:"new-password"},null,8,["modelValue"]),a(_,{message:r.value.password?r.value.password[0]:"",class:"mt-2"},null,8,["message"])]),t("div",Us,[a(v,{for:"create_password_confirmation",value:"Confirm Password"}),a(y,{id:"create_password_confirmation",type:"password",class:"mt-1 block w-full",modelValue:o.password_confirmation,"onUpdate:modelValue":e[7]||(e[7]=s=>o.password_confirmation=s),required:"",autocomplete:"new-password"},null,8,["modelValue"])]),t("div",Cs,[a(v,{for:"create_role",value:"Role"}),V(t("select",{id:"create_role",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full","onUpdate:modelValue":e[8]||(e[8]=s=>o.role_id=s),onChange:K},[(n(!0),i(j,null,M(p.value,s=>(n(),i("option",{key:s.value,value:s.value,disabled:!F.value&&(s.slug==="super_admin"||s.slug==="manager")},u(s.label),9,Vs))),128))],544),[[$,o.role_id]]),a(_,{message:r.value.role_id?r.value.role_id[0]:r.value.role?r.value.role[0]:"",class:"mt-2"},null,8,["message"])]),t("div",js,[a(v,{for:"create_user_type",value:"User Type"}),V(t("select",{id:"create_user_type",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full","onUpdate:modelValue":e[9]||(e[9]=s=>o.user_type=s)},e[39]||(e[39]=[t("option",{value:"employee"},"Employee",-1),t("option",{value:"contractor"},"Contractor",-1)]),512),[[$,o.user_type]]),a(_,{message:r.value.user_type?r.value.user_type[0]:"",class:"mt-2"},null,8,["message"])]),t("div",$s,[a(v,{for:"create_timezone",value:"Timezone"}),a(y,{id:"create_timezone",type:"text",class:"mt-1 block w-full",modelValue:o.timezone,"onUpdate:modelValue":e[10]||(e[10]=s=>o.timezone=s),placeholder:"e.g., America/New_York"},null,8,["modelValue"]),a(_,{message:r.value.timezone?r.value.timezone[0]:"",class:"mt-2"},null,8,["message"])]),t("div",zs,[a(Z,{onClick:e[11]||(e[11]=s=>A.value=!1)},{default:w(()=>e[40]||(e[40]=[b("Cancel",-1)])),_:1,__:[40]}),a(O,{class:"ms-3",type:"submit"},{default:w(()=>e[41]||(e[41]=[b("Create User",-1)])),_:1,__:[41]})])],32)])]),_:1},8,["show"]),a(Y,{show:S.value,onClose:e[21]||(e[21]=s=>S.value=!1)},{default:w(()=>[t("div",Ms,[e[46]||(e[46]=t("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Edit User",-1)),d.value?(n(),i("div",As,u(d.value),1)):C("",!0),t("form",{onSubmit:ee(ce,["prevent"])},[t("div",Ss,[a(v,{for:"edit_name",value:"Name"}),a(y,{id:"edit_name",type:"text",class:"mt-1 block w-full",modelValue:o.name,"onUpdate:modelValue":e[13]||(e[13]=s=>o.name=s),required:"",autofocus:""},null,8,["modelValue"]),a(_,{message:r.value.name?r.value.name[0]:"",class:"mt-2"},null,8,["message"])]),t("div",Es,[a(v,{for:"edit_email",value:"Email"}),a(y,{id:"edit_email",type:"email",class:"mt-1 block w-full",modelValue:o.email,"onUpdate:modelValue":e[14]||(e[14]=s=>o.email=s),required:""},null,8,["modelValue"]),a(_,{message:r.value.email?r.value.email[0]:"",class:"mt-2"},null,8,["message"])]),t("div",Ps,[a(v,{for:"edit_password",value:"Password (leave blank to keep current)"}),a(y,{id:"edit_password",type:"password",class:"mt-1 block w-full",modelValue:o.password,"onUpdate:modelValue":e[15]||(e[15]=s=>o.password=s),autocomplete:"new-password"},null,8,["modelValue"]),a(_,{message:r.value.password?r.value.password[0]:"",class:"mt-2"},null,8,["message"])]),t("div",Ns,[a(v,{for:"edit_password_confirmation",value:"Confirm Password"}),a(y,{id:"edit_password_confirmation",type:"password",class:"mt-1 block w-full",modelValue:o.password_confirmation,"onUpdate:modelValue":e[16]||(e[16]=s=>o.password_confirmation=s),autocomplete:"new-password"},null,8,["modelValue"])]),t("div",qs,[a(v,{for:"edit_role",value:"Role"}),V(t("select",{id:"edit_role",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full","onUpdate:modelValue":e[17]||(e[17]=s=>o.role_id=s),onChange:K,disabled:!F.value&&o.id===c.value.id},[(n(!0),i(j,null,M(p.value,s=>(n(),i("option",{key:s.value,value:s.value,disabled:!F.value&&(s.slug==="super_admin"||s.slug==="manager")&&o.id!==c.value.id},u(s.label),9,Ds))),128))],40,Bs),[[$,o.role_id]]),a(_,{message:r.value.role_id?r.value.role_id[0]:r.value.role?r.value.role[0]:"",class:"mt-2"},null,8,["message"])]),t("div",Fs,[a(v,{for:"edit_user_type",value:"User Type"}),V(t("select",{id:"edit_user_type",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full","onUpdate:modelValue":e[18]||(e[18]=s=>o.user_type=s)},e[43]||(e[43]=[t("option",{value:"employee"},"Employee",-1),t("option",{value:"contractor"},"Contractor",-1)]),512),[[$,o.user_type]]),a(_,{message:r.value.user_type?r.value.user_type[0]:"",class:"mt-2"},null,8,["message"])]),t("div",Ls,[a(v,{for:"edit_timezone",value:"Timezone"}),a(y,{id:"edit_timezone",type:"text",class:"mt-1 block w-full",modelValue:o.timezone,"onUpdate:modelValue":e[19]||(e[19]=s=>o.timezone=s),placeholder:"e.g., Europe/London"},null,8,["modelValue"]),a(_,{message:r.value.timezone?r.value.timezone[0]:"",class:"mt-2"},null,8,["message"])]),t("div",Rs,[a(Z,{onClick:e[20]||(e[20]=s=>S.value=!1)},{default:w(()=>e[44]||(e[44]=[b("Cancel",-1)])),_:1,__:[44]}),a(O,{class:"ms-3",type:"submit"},{default:w(()=>e[45]||(e[45]=[b("Update User",-1)])),_:1,__:[45]})])],32)])]),_:1},8,["show"]),a(Y,{show:E.value,onClose:e[23]||(e[23]=s=>E.value=!1)},{default:w(()=>{var s;return[t("div",Hs,[e[50]||(e[50]=t("h2",{class:"text-lg font-medium text-gray-900"}," Archive this user? ",-1)),e[51]||(e[51]=t("p",{class:"mt-1 text-sm text-gray-600"}," The user will be archived and can be unarchived later. No data will be permanently removed. ",-1)),h.value?(n(),i("div",Os,[e[47]||(e[47]=t("strong",null,"User:",-1)),b(" "+u(h.value.name)+" ("+u(h.value.email)+") - Role: "+u(((s=h.value.role_data)==null?void 0:s.name)||(typeof h.value.role=="string"?h.value.role:"Employee")),1)])):C("",!0),d.value?(n(),i("div",Ys,u(d.value),1)):C("",!0),t("div",Zs,[a(Z,{onClick:e[22]||(e[22]=m=>E.value=!1)},{default:w(()=>e[48]||(e[48]=[b("Cancel",-1)])),_:1,__:[48]}),a(Ve,{class:"ms-3",onClick:pe},{default:w(()=>e[49]||(e[49]=[b("Archive User",-1)])),_:1,__:[49]})])])]}),_:1},8,["show"])]),_:1})],64))}};export{ml as default};
