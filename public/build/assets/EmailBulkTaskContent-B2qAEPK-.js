import{r as v,q as N,f as S,a as m,o as c,b as r,F as B,l as E,d as e,w as p,m as f,u as b,j as q,s as A,p as k}from"./app-D4PaCJao.js";import{_ as D}from"./PrimaryButton-BXBTUumq.js";import{_ as y}from"./SecondaryButton-iTebmO9C.js";import{_ as V}from"./TextInput-IgJU_zNZ.js";import{_ as u}from"./InputLabel--Hui31E-.js";import{S as g}from"./SelectDropdown-Clmz9wjU.js";/* empty css                                                                       */import"./_plugin-vue_export-helper-DlAUqK2U.js";const F={class:"p-4 space-y-6"},M={class:"flex justify-end"},L={class:"flex justify-between items-center mt-4"},Q={__name:"EmailBulkTaskContent",props:{emailId:[Number,String],projectId:[Number,String]},emits:["tasks-submitted","close"],setup($,{emit:w}){const i=$,h=w,d=v([{name:"",due_date:"",priority:"medium",assigned_user_id:""}]),_=v([]),U=[{value:"high",label:"High"},{value:"medium",label:"Medium"},{value:"low",label:"Low"}],n=N({tasks:d.value,email_id:i.emailId}),j=async()=>{if(i.projectId)try{const o=await k.get(`/api/projects/${i.projectId}/users`);_.value=o.data.map(a=>({value:a.id,label:a.name}))}catch(o){console.error("Error fetching project users:",o)}},T=()=>{d.value.push({name:"",due_date:"",priority:"medium",assigned_user_id:""})},C=o=>{d.value.splice(o,1)},I=async()=>{try{await k.post(`/api/emails/${i.emailId}/tasks`,n.data()),h("tasks-submitted")}catch(o){console.error("Error submitting tasks:",o)}};return S(j),(o,a)=>(c(),m("div",F,[r("form",{onSubmit:A(I,["prevent"])},[(c(!0),m(B,null,E(d.value,(l,s)=>(c(),m("div",{key:s,class:"space-y-4 border-b pb-4 mb-4"},[r("div",null,[e(u,{for:`task-name-${s}`,value:"Task Name"},null,8,["for"]),e(V,{id:`task-name-${s}`,modelValue:l.name,"onUpdate:modelValue":t=>l.name=t,type:"text",class:"mt-1 block w-full",required:""},null,8,["id","modelValue","onUpdate:modelValue"])]),r("div",null,[e(u,{for:`due-date-${s}`,value:"Due Date"},null,8,["for"]),e(V,{id:`due-date-${s}`,modelValue:l.due_date,"onUpdate:modelValue":t=>l.due_date=t,type:"date",class:"mt-1 block w-full",required:""},null,8,["id","modelValue","onUpdate:modelValue"])]),r("div",null,[e(u,{for:`priority-${s}`,value:"Priority"},null,8,["for"]),e(g,{id:`priority-${s}`,modelValue:l.priority,"onUpdate:modelValue":t=>l.priority=t,options:U,class:"mt-1 block w-full"},null,8,["id","modelValue","onUpdate:modelValue"])]),r("div",null,[e(u,{for:`assigned-user-${s}`,value:"Assigned User"},null,8,["for"]),e(g,{id:`assigned-user-${s}`,modelValue:l.assigned_user_id,"onUpdate:modelValue":t=>l.assigned_user_id=t,options:_.value,placeholder:"Select a user",class:"mt-1 block w-full"},null,8,["id","modelValue","onUpdate:modelValue","options"])]),r("div",M,[e(y,{onClick:t=>C(s)},{default:p(()=>a[0]||(a[0]=[f("Remove Task",-1)])),_:2,__:[0]},1032,["onClick"])])]))),128)),r("div",L,[e(y,{type:"button",onClick:T},{default:p(()=>a[1]||(a[1]=[f("Add Another Task",-1)])),_:1,__:[1]}),e(D,{class:q({"opacity-25":b(n).processing}),disabled:b(n).processing},{default:p(()=>a[2]||(a[2]=[f(" Create Tasks ",-1)])),_:1,__:[2]},8,["class","disabled"])])],32)]))}};export{Q as default};
