import{a as s,o as n,b as r,r as c,c as z,f as Q,Q as X,e as G,v as C,g as B,d as P,i as g,t as y,F as E,l as H,m as R,s as V,u as L,j as p,K as j,x as D,k as A,Y as J,n as W}from"./app-CH-gkOrV.js";function U(o,m){return n(),s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{"fill-rule":"evenodd",d:"M16.704 4.153a.75.75 0 0 1 .143 1.052l-8 10.5a.75.75 0 0 1-1.127.075l-4.5-4.5a.75.75 0 0 1 1.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 0 1 1.05-.143Z","clip-rule":"evenodd"})])}function _(o,m){return n(),s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{"fill-rule":"evenodd",d:"M5.22 8.22a.75.75 0 0 1 1.06 0L10 11.94l3.72-3.72a.75.75 0 1 1 1.06 1.06l-4.25 4.25a.75.75 0 0 1-1.06 0L5.22 9.28a.75.75 0 0 1 0-1.06Z","clip-rule":"evenodd"})])}function ee(o,m){return n(),s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{d:"M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z"})])}const te=["disabled"],le={key:0,class:"flex flex-wrap gap-1 items-center"},ae={key:0,class:"text-gray-500"},oe={class:"absolute z-50 mt-1 w-full rounded-xl shadow-lg bg-white ring-1 ring-black ring-opacity-5"},ne={class:"p-2 border-b border-gray-200"},se=["onClick"],re={key:0,class:"block px-4 py-2 text-sm text-gray-500"},ie={class:"p-2 border-b border-gray-200"},ue=["onClick"],de={key:0,class:"block px-4 py-2 text-sm text-gray-500"},Z=!0,fe={__name:"MultiSelectDropdown",props:{modelValue:{type:[String,Number,Object,Array,null],default:null},options:{type:Array,default:()=>[]},placeholder:{type:String,default:"Select an option"},valueKey:{type:String,default:"value"},labelKey:{type:String,default:"label"},isMulti:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},required:{type:Boolean,default:!1},maxHeight:{type:String,default:"250px"},width:{type:String,default:"full"},labelClass:{type:String,default:"text-xs"}},emits:["update:modelValue","change"],setup(o,{emit:m}){const l=o,v=m,i=c(!1),u=c(""),w=c(null),I=w,h=c(null),S=c(null),x=c({top:0,left:0,width:0}),O=c("250px"),f=()=>{if(!I.value)return;const a=I.value.querySelector("button");if(!a)return;const e=a.getBoundingClientRect(),d=(window.innerHeight||document.documentElement.clientHeight)-e.bottom,M=parseInt(String(l.maxHeight).replace("px",""))||250,Y=Math.min(M+50,d-8);O.value=`${Math.max(Y,150)}px`,x.value={top:e.bottom+window.scrollY,left:e.left+window.scrollX,width:e.width}},b=z(()=>{if(!u.value)return l.options;const a=u.value.toLowerCase();return l.options.filter(e=>e[l.labelKey].toLowerCase().includes(a))}),k=a=>!l.isMulti||!l.modelValue?!1:Array.isArray(l.modelValue)&&l.modelValue.includes(a[l.valueKey]),T=a=>{if(l.isMulti){let e=l.modelValue?[...l.modelValue]:[];const t=a[l.valueKey],d=e.indexOf(t);d>-1?e.splice(d,1):e.push(t),v("update:modelValue",e),v("change",e)}else v("update:modelValue",a[l.valueKey]),v("change",a[l.valueKey]),i.value=!1,u.value=""},q=a=>{if(!l.isMulti||!l.modelValue)return;const e=l.modelValue.filter(t=>t!==a);v("update:modelValue",e),v("change",e)},K=z(()=>l.isMulti?l.options.filter(e=>Array.isArray(l.modelValue)&&l.modelValue.includes(e[l.valueKey])).map(e=>e[l.labelKey]):l.placeholder),$=a=>{const e=w.value&&w.value.contains(a.target),t=S.value&&S.value.contains(a.target);!e&&!t&&(i.value=!1,u.value="")},N=a=>{a.key==="Escape"&&i.value&&(i.value=!1,u.value="")};Q(()=>{document.addEventListener("click",$),document.addEventListener("keydown",N),window.addEventListener("resize",f),window.addEventListener("scroll",f,!0)}),X(()=>{document.removeEventListener("click",$),document.removeEventListener("keydown",N),window.removeEventListener("resize",f),window.removeEventListener("scroll",f,!0)});const F=()=>{l.disabled||(i.value=!i.value,i.value&&W(()=>{f(),h.value&&h.value.focus()}))};return G(()=>l.modelValue,a=>{(a==null||l.isMulti&&Array.isArray(a)&&a.length===0)&&(u.value="")},{deep:!0}),(a,e)=>(n(),s("div",{ref_key:"dropdownRef",ref:w,class:p(["relative",{"w-full":o.width==="full"}])},[r("button",{type:"button",onClick:F,disabled:o.disabled,class:p(["border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-xl shadow-sm mt-1 block w-full text-left px-3 py-2 text-gray-700 bg-white relative flex items-center justify-between",{"opacity-50 cursor-not-allowed":o.disabled}])},[o.isMulti?(n(),s("div",le,[K.value.length===0?(n(),s("span",ae,y(o.placeholder),1)):g("",!0),(n(!0),s(E,null,H(K.value,t=>(n(),s("span",{key:t,class:"bg-indigo-100 text-indigo-800 px-2 py-1 rounded-full text-xs font-medium flex items-center gap-1"},[R(y(t)+" ",1),P(L(ee),{class:"w-3 h-3 cursor-pointer hover:text-indigo-600",onClick:V(d=>q(o.options.find(M=>M[o.labelKey]===t)[o.valueKey]),["stop"])},null,8,["onClick"])]))),128))])):(n(),s("span",{key:1,class:p({"text-gray-500":!o.modelValue})},y(K.value),3)),P(L(_),{class:"h-5 w-5 text-gray-500"})],10,te),C(r("div",oe,[r("div",ne,[C(r("input",{ref_key:"searchInputRef",ref:h,type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>u.value=t),onInput:e[1]||(e[1]=t=>i.value=!0),class:"block w-full rounded-xl border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-sm",placeholder:"Search...",onClick:e[2]||(e[2]=V(()=>{},["stop"]))},null,544),[[D,u.value]])]),r("div",{class:"py-1 overflow-y-auto",style:A({maxHeight:o.maxHeight})},[(n(!0),s(E,null,H(b.value,t=>(n(),s("div",{key:t[o.valueKey],onClick:d=>T(t),class:p(["block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 cursor-pointer flex items-center justify-between",{"bg-gray-100":k(t)}])},[R(y(t[o.labelKey])+" ",1),k(t)?(n(),B(L(U),{key:0,class:"w-4 h-4 text-indigo-600"})):g("",!0)],10,se))),128)),b.value.length===0?(n(),s("div",re," No options available ")):g("",!0)],4)],512),[[j,i.value&&!Z]]),(n(),B(J,{to:"body"},[C(r("div",{ref_key:"portalPanelRef",ref:S,class:"z-50 rounded-xl shadow-lg bg-white ring-1 ring-black ring-opacity-5",style:A({position:"absolute",top:x.value.top+"px",left:x.value.left+"px",width:x.value.width+"px"}),onClick:e[6]||(e[6]=V(()=>{},["stop"]))},[r("div",ie,[C(r("input",{ref_key:"searchInputRef",ref:h,type:"text","onUpdate:modelValue":e[3]||(e[3]=t=>u.value=t),onInput:e[4]||(e[4]=t=>i.value=!0),class:"block w-full rounded-xl border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-sm",placeholder:"Search...",onClick:e[5]||(e[5]=V(()=>{},["stop"]))},null,544),[[D,u.value]])]),r("div",{class:"py-1 overflow-y-auto",style:A({maxHeight:O.value})},[(n(!0),s(E,null,H(b.value,t=>(n(),s("div",{key:t[o.valueKey],onClick:d=>T(t),class:p(["block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 cursor-pointer flex items-center justify-between",{"bg-gray-100":k(t)}])},[R(y(t[o.labelKey])+" ",1),k(t)?(n(),B(L(U),{key:0,class:"w-4 h-4 text-indigo-600"})):g("",!0)],10,ue))),128)),b.value.length===0?(n(),s("div",de," No options available ")):g("",!0)],4)],4),[[j,i.value&&Z]])]))],2))}};export{fe as _,_ as r};
