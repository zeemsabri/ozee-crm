import{A as F}from"./ApplicationLogo-Bw7cz6qK.js";import{A as T,P as G,p as b,r as L,h as x,o as i,b as r,f as P,e as v,y as C,I as q,a as s,n as _,T as H,c as p,R as V,u as f,S as z,t as $,F as J,i as K,U as Q,z as W,D as X,g as y,k as u}from"./app-DaTLmF6T.js";import{_ as Y}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Z={class:"relative"},U={__name:"Dropdown",props:{align:{type:String,default:"right"},width:{type:String,default:"48"},contentClasses:{type:String,default:"py-1 bg-white"}},setup(o){const n=o,a=d=>{c.value&&d.key==="Escape"&&(c.value=!1)};T(()=>document.addEventListener("keydown",a)),G(()=>document.removeEventListener("keydown",a));const m=b(()=>({48:"w-48"})[n.width.toString()]),h=b(()=>n.align==="left"?"ltr:origin-top-left rtl:origin-top-right start-0":n.align==="right"?"ltr:origin-top-right rtl:origin-top-left end-0":"origin-top"),c=L(!1);return(d,l)=>(i(),x("div",Z,[r("div",{onClick:l[0]||(l[0]=g=>c.value=!c.value)},[C(d.$slots,"trigger")]),P(r("div",{class:"fixed inset-0 z-40",onClick:l[1]||(l[1]=g=>c.value=!1)},null,512),[[q,c.value]]),v(H,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:s(()=>[P(r("div",{class:_(["absolute z-50 mt-2 rounded-md shadow-lg",[m.value,h.value]]),style:{display:"none"},onClick:l[2]||(l[2]=g=>c.value=!1)},[r("div",{class:_(["rounded-md ring-1 ring-black ring-opacity-5",o.contentClasses])},[C(d.$slots,"content")],2)],2),[[q,c.value]])]),_:3})]))}},S={__name:"DropdownLink",props:{href:{type:String,required:!0},method:{type:String,default:"get"},as:{type:String,default:"a"}},setup(o){return(n,a)=>(i(),p(f(z),V({href:o.href,method:o.method,as:o.as},n.$attrs,{class:"block w-full px-4 py-2 text-start text-sm leading-5 text-gray-700 transition duration-150 ease-in-out hover:bg-gray-100 focus:bg-gray-100 focus:outline-none"}),{default:s(()=>[C(n.$slots,"default")]),_:3},16,["href","method","as"]))}},I={__name:"NavLink",props:{href:{type:String,required:!0},active:{type:Boolean}},setup(o){const n=o,a=b(()=>n.active?"inline-flex items-center px-1 pt-1 border-b-2 border-indigo-400 text-sm font-medium leading-5 text-gray-900 focus:outline-none focus:border-indigo-700 transition duration-150 ease-in-out":"inline-flex items-center px-1 pt-1 border-b-2 border-transparent text-sm font-medium leading-5 text-gray-500 hover:text-gray-700 hover:border-gray-300 focus:outline-none focus:text-gray-700 focus:border-gray-300 transition duration-150 ease-in-out");return(m,h)=>(i(),p(f(z),{href:o.href,class:_(a.value)},{default:s(()=>[C(m.$slots,"default")]),_:3},8,["href","class"]))}},w={__name:"ResponsiveNavLink",props:{href:{type:String,required:!0},active:{type:Boolean},method:{type:String,default:"get"},as:{type:String,default:"a"}},setup(o){const n=o,a=b(()=>n.active?"block w-full ps-3 pe-4 py-2 border-l-4 border-indigo-400 text-start text-base font-medium text-indigo-700 bg-indigo-50 focus:outline-none focus:text-indigo-800 focus:bg-indigo-100 focus:border-indigo-700 transition duration-150 ease-in-out":"block w-full ps-3 pe-4 py-2 border-l-4 border-transparent text-start text-base font-medium text-gray-600 hover:text-gray-800 hover:bg-gray-50 hover:border-gray-300 focus:outline-none focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300 transition duration-150 ease-in-out");return(m,h)=>(i(),p(f(z),V({href:o.href,method:o.method,as:o.as},m.$attrs,{class:a.value}),{default:s(()=>[C(m.$slots,"default")]),_:3},16,["href","method","as","class"]))}},ee={class:"p-4 flex items-start"},te={class:"flex-shrink-0"},re=["d"],se={class:"ml-3 w-0 flex-1 pt-0.5"},oe={class:"text-sm font-medium"},ne={__name:"Notification",props:{type:{type:String,default:"info",validator:o=>["success","error","info","warning"].includes(o)},message:{type:String,required:!0},duration:{type:Number,default:5e3},id:{type:String,required:!0}},emits:["close"],setup(o,{emit:n}){const a=o,m=n,h=L(!1),c=L(null),d=b(()=>{switch(a.type){case"success":return"bg-green-50 text-green-800 border-green-400";case"error":return"bg-red-50 text-red-800 border-red-400";case"warning":return"bg-yellow-50 text-yellow-800 border-yellow-400";default:return"bg-blue-50 text-blue-800 border-blue-400"}}),l=b(()=>{switch(a.type){case"success":return"text-green-500";case"error":return"text-red-500";case"warning":return"text-yellow-500";default:return"text-blue-500"}}),g=b(()=>{switch(a.type){case"success":return"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z";case"error":return"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z";case"warning":return"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z";default:return"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}}),k=()=>{h.value=!1,c.value&&clearTimeout(c.value),setTimeout(()=>{m("close",a.id)},300)};return T(()=>{setTimeout(()=>{h.value=!0},100),a.duration>0&&(c.value=setTimeout(()=>{k()},a.duration))}),(E,M)=>(i(),x("div",{class:_(["fixed z-50 transition-all duration-300 ease-in-out transform",[h.value?"opacity-100 translate-y-0":"opacity-0 translate-y-2","max-w-sm w-full shadow-lg rounded-lg pointer-events-auto border-l-4",d.value]]),role:"alert"},[r("div",ee,[r("div",te,[(i(),x("svg",{class:_(["h-5 w-5",l.value]),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[r("path",{"fill-rule":"evenodd",d:g.value,"clip-rule":"evenodd"},null,8,re)],2))]),r("div",se,[r("p",oe,$(o.message),1)]),r("div",{class:"ml-4 flex-shrink-0 flex"},[r("button",{class:"bg-transparent rounded-md inline-flex text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:k},M[0]||(M[0]=[r("span",{class:"sr-only"},"Close",-1),r("svg",{class:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[r("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)]))])])],2))}},ae={class:"fixed top-4 right-4 z-50 space-y-4 w-full max-w-sm"},ie={__name:"NotificationContainer",setup(o,{expose:n}){const a=L([]),m=()=>Date.now().toString(36)+Math.random().toString(36).substr(2),h=(d,l="info",g=5e3)=>{const k=m();return a.value.push({id:k,message:d,type:l,duration:g}),k},c=d=>{const l=a.value.findIndex(g=>g.id===d);l!==-1&&a.value.splice(l,1)};return n({addNotification:h,removeNotification:c,success:(d,l)=>h(d,"success",l),error:(d,l)=>h(d,"error",l),info:(d,l)=>h(d,"info",l),warning:(d,l)=>h(d,"warning",l)}),(d,l)=>(i(),x("div",ae,[v(Q,{name:"notification"},{default:s(()=>[(i(!0),x(J,null,K(a.value,g=>(i(),p(ne,{key:g.id,id:g.id,type:g.type,message:g.message,duration:g.duration,onClose:c},null,8,["id","type","message","duration"]))),128))]),_:1})]))}},le=Y(ie,[["__scopeId","data-v-24b5eed3"]]);let N=null;const ue=o=>{N=o},O=(o,n="info",a=5e3)=>N?N.addNotification(o,n,a):(console.warn("Notification container not set. Call setNotificationContainer first."),null),Re=(o,n=5e3)=>O(o,"success",n),De=(o,n=5e3)=>O(o,"error",n),de={class:"min-h-screen bg-gray-100"},ce={class:"border-b border-gray-100 bg-white"},fe={class:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8"},me={class:"flex h-16 justify-between"},ge={class:"flex"},ve={class:"flex shrink-0 items-center"},pe={class:"hidden space-x-8 sm:-my-px sm:ms-10 sm:flex"},he={key:4,class:"hidden sm:flex sm:items-center"},ye={class:"hidden sm:ms-6 sm:flex sm:items-center"},we={class:"relative ms-3"},xe={class:"inline-flex rounded-md"},be={type:"button",class:"inline-flex items-center rounded-md border border-transparent bg-white px-3 py-2 text-sm font-medium leading-4 text-gray-500 transition duration-150 ease-in-out hover:text-gray-700 focus:outline-none"},_e={class:"-me-2 flex items-center sm:hidden"},ke={class:"h-6 w-6",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24"},Se={class:"space-y-1 pb-3 pt-2"},Ce={key:6,class:"mt-3 space-y-1"},$e={class:"border-t border-gray-200 pb-1 pt-4"},Le={class:"px-4"},Ie={class:"text-base font-medium text-gray-800"},Me={class:"text-sm font-medium text-gray-500"},ze={class:"text-sm font-medium text-gray-500 capitalize"},Ee={class:"mt-3 space-y-1"},je={key:0,class:"bg-white shadow"},Ae={class:"mx-auto max-w-7xl px-4 py-6 sm:px-6 lg:px-8"},Pe={__name:"AuthenticatedLayout",setup(o){const n=L(!1),a=b(()=>W().props.auth.user);b(()=>{var t;return((t=a.value.role_data)==null?void 0:t.name)||""});const{canDo:m}=X(),h=m("manage_projects"),c=m("compose_emails"),d=m("approve_emails"),l=m("create_users"),g=m("manage_roles"),k=m("manage_task_types"),E=m("create_clients"),M=async()=>{const t=localStorage.getItem("authToken");if(t){window.axios.defaults.headers.common.Authorization=`Bearer ${t}`;try{await window.axios.get("/api/user")}catch(e){e.response&&e.response.status===401&&(console.log("Session expired, redirecting to login"),localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization,window.location.href="/login")}}else delete window.axios.defaults.headers.common.Authorization},B=()=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),delete window.axios.defaults.headers.common.Authorization},R=t=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),delete window.axios.defaults.headers.common.Authorization,window.location.href="/login"},j=L(null);return T(()=>{M(),j.value&&ue(j.value)}),(t,e)=>{var D;return i(),x("div",null,[v(le,{ref_key:"notificationContainerRef",ref:j},null,512),r("div",de,[r("nav",ce,[r("div",fe,[r("div",me,[r("div",ge,[r("div",ve,[v(f(z),{href:t.route("dashboard")},{default:s(()=>[v(F,{class:"block h-16 w-auto fill-current text-gray-800"})]),_:1},8,["href"])]),r("div",pe,[v(I,{href:t.route("dashboard"),active:t.route().current("dashboard")},{default:s(()=>e[1]||(e[1]=[u(" Dashboard ")])),_:1,__:[1]},8,["href","active"]),f(h)?(i(),p(I,{key:0,href:t.route("projects.index"),active:t.route().current("projects.index")},{default:s(()=>e[2]||(e[2]=[u(" Projects ")])),_:1,__:[2]},8,["href","active"])):y("",!0),f(c)?(i(),p(I,{key:1,href:t.route("emails.compose"),active:t.route().current("emails.compose")},{default:s(()=>e[3]||(e[3]=[u(" Compose Email ")])),_:1,__:[3]},8,["href","active"])):y("",!0),f(d)?(i(),p(I,{key:2,href:t.route("emails.pending"),active:t.route().current("emails.pending")},{default:s(()=>e[4]||(e[4]=[u(" Approve Emails ")])),_:1,__:[4]},8,["href","active"])):y("",!0),f(c)?(i(),p(I,{key:3,href:t.route("emails.rejected"),active:t.route().current("emails.rejected")},{default:s(()=>e[5]||(e[5]=[u(" Rejected Emails ")])),_:1,__:[5]},8,["href","active"])):y("",!0),f(g)?(i(),x("div",he,[v(U,{align:"right",width:"48"},{trigger:s(()=>e[6]||(e[6]=[r("span",{class:"inline-flex rounded-md"},[r("button",{type:"button",class:"inline-flex items-center rounded-md border border-transparent bg-white px-3 py-2 text-sm font-medium leading-4 text-gray-500 transition duration-150 ease-in-out hover:text-gray-700 focus:outline-none"},[u(" Admin "),r("svg",{class:"ms-2 -me-0.5 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[r("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])])],-1)])),content:s(()=>[f(E)?(i(),p(S,{key:0,href:t.route("clients.index"),active:t.route().current("clients.index")},{default:s(()=>e[7]||(e[7]=[u(" Clients ")])),_:1,__:[7]},8,["href","active"])):y("",!0),f(l)?(i(),p(S,{key:1,href:t.route("users.index"),active:t.route().current("users.index")},{default:s(()=>e[8]||(e[8]=[u(" Users ")])),_:1,__:[8]},8,["href","active"])):y("",!0),f(k)?(i(),p(S,{key:2,href:t.route("task-types.index"),active:t.route().current("task-types.index")},{default:s(()=>e[9]||(e[9]=[u(" Task Types ")])),_:1,__:[9]},8,["href","active"])):y("",!0),v(S,{href:t.route("admin.roles.index")},{default:s(()=>e[10]||(e[10]=[u(" Manage Roles ")])),_:1,__:[10]},8,["href"]),v(S,{href:t.route("admin.permissions.index")},{default:s(()=>e[11]||(e[11]=[u(" Manage Permissions ")])),_:1,__:[11]},8,["href"])]),_:1})])):y("",!0)])]),r("div",ye,[r("div",we,[v(U,{align:"right",width:"48"},{trigger:s(()=>{var A;return[r("span",xe,[r("button",be,[u($(a.value.name)+" ("+$((A=a.value.role_data)==null?void 0:A.name)+") ",1),e[12]||(e[12]=r("svg",{class:"ms-2 -me-0.5 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[r("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1))])])]}),content:s(()=>[v(S,{href:t.route("profile.edit")},{default:s(()=>e[13]||(e[13]=[u(" Profile ")])),_:1,__:[13]},8,["href"]),v(S,{href:t.route("logout"),method:"post",as:"button",onSuccess:B,onError:R},{default:s(()=>e[14]||(e[14]=[u(" Log Out ")])),_:1,__:[14]},8,["href"])]),_:1})])]),r("div",_e,[r("button",{onClick:e[0]||(e[0]=A=>n.value=!n.value),class:"inline-flex items-center justify-center rounded-md p-2 text-gray-400 transition duration-150 ease-in-out hover:bg-gray-100 hover:text-gray-500 focus:bg-gray-100 focus:text-gray-500 focus:outline-none"},[(i(),x("svg",ke,[r("path",{class:_({hidden:n.value,"inline-flex":!n.value}),"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},null,2),r("path",{class:_({hidden:!n.value,"inline-flex":n.value}),"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,2)]))])])])]),r("div",{class:_([{block:n.value,hidden:!n.value},"sm:hidden"])},[r("div",Se,[v(w,{href:t.route("dashboard"),active:t.route().current("dashboard")},{default:s(()=>e[15]||(e[15]=[u(" Dashboard ")])),_:1,__:[15]},8,["href","active"]),f(E)?(i(),p(w,{key:0,href:t.route("clients.index"),active:t.route().current("clients.index")},{default:s(()=>e[16]||(e[16]=[u(" Clients ")])),_:1,__:[16]},8,["href","active"])):y("",!0),f(h)?(i(),p(w,{key:1,href:t.route("projects.index"),active:t.route().current("projects.index")},{default:s(()=>e[17]||(e[17]=[u(" Projects ")])),_:1,__:[17]},8,["href","active"])):y("",!0),f(l)?(i(),p(w,{key:2,href:t.route("users.index"),active:t.route().current("users.index")},{default:s(()=>e[18]||(e[18]=[u(" Users ")])),_:1,__:[18]},8,["href","active"])):y("",!0),f(c)?(i(),p(w,{key:3,href:t.route("emails.compose"),active:t.route().current("emails.compose")},{default:s(()=>e[19]||(e[19]=[u(" Compose Email ")])),_:1,__:[19]},8,["href","active"])):y("",!0),f(d)?(i(),p(w,{key:4,href:t.route("emails.pending"),active:t.route().current("emails.pending")},{default:s(()=>e[20]||(e[20]=[u(" Approve Emails ")])),_:1,__:[20]},8,["href","active"])):y("",!0),f(c)?(i(),p(w,{key:5,href:t.route("emails.rejected"),active:t.route().current("emails.rejected")},{default:s(()=>e[21]||(e[21]=[u(" Rejected Emails ")])),_:1,__:[21]},8,["href","active"])):y("",!0),f(g)?(i(),x("div",Ce,[e[24]||(e[24]=r("div",{class:"px-4 font-medium text-base text-gray-800"},"Admin",-1)),v(w,{href:t.route("admin.roles.index"),active:t.route().current("admin.roles.index")},{default:s(()=>e[22]||(e[22]=[u(" Manage Roles ")])),_:1,__:[22]},8,["href","active"]),v(w,{href:t.route("admin.permissions.index"),active:t.route().current("admin.permissions.index")},{default:s(()=>e[23]||(e[23]=[u(" Manage Permissions ")])),_:1,__:[23]},8,["href","active"])])):y("",!0)]),r("div",$e,[r("div",Le,[r("div",Ie,$(a.value.name),1),r("div",Me,$(a.value.email),1),r("div",ze,$((D=a.value.role_data)==null?void 0:D.name),1)]),r("div",Ee,[v(w,{href:t.route("profile.edit")},{default:s(()=>e[25]||(e[25]=[u(" Profile ")])),_:1,__:[25]},8,["href"]),v(w,{href:t.route("logout"),method:"post",as:"button",onSuccess:B,onError:R},{default:s(()=>e[26]||(e[26]=[u(" Log Out ")])),_:1,__:[26]},8,["href"])])])],2)]),t.$slots.header?(i(),x("header",je,[r("div",Ae,[C(t.$slots,"header")])])):y("",!0),r("main",null,[C(t.$slots,"default")])])])}}};export{Pe as _,De as e,Re as s};
