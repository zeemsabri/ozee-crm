import{d as z}from"./vuedraggable.umd-DuiKtT07.js";import{_ as g}from"./TextInput-DXxzU_mf.js";import{_ as V}from"./PrimaryButton-w5tinKZZ.js";import{r as M}from"./InformationCircleIcon-Cn6nwm2i.js";import{r as P}from"./TrashIcon-C1uI61Ep.js";import{r as T,e as _,a as u,o as d,b as s,d as i,i as p,g as R,w as k,m as v,u as b}from"./app-x8m_4hY2.js";const S={class:"space-y-3"},I={class:"flex items-start gap-3"},D={class:"flex gap-2"},E={key:0,class:"flex items-start text-sm text-gray-600 bg-gray-50 border border-gray-200 rounded-md px-3 py-2"},Y={class:"flex items-start gap-2"},q={class:"flex-1"},F={key:0,class:"grid grid-cols-1 sm:grid-cols-2 gap-2 w-full"},j={key:1},G={class:"mt-1 flex gap-2"},H=["onClick"],J=["onClick"],K=["onClick"],te={__name:"RepeatableDynamicField",props:{modelValue:{type:Array,default:()=>[]},allowLinks:{type:Boolean,default:!1},placeholderName:{type:String,default:"item"},addButtonText:{type:String,default:"Add item"},labelPlaceholder:{type:String,default:"Label"},urlPlaceholder:{type:String,default:"https://example.com"},itemPlaceholder:{type:String,default:"Enter value"}},emits:["update:modelValue"],setup(r,{emit:$}){const m=r,A=$,l=T([...m.modelValue]),x=(t,e)=>{if(!Array.isArray(t)||!Array.isArray(e)||t.length!==e.length)return!1;for(let a=0;a<t.length;a++)if(t[a]!==e[a])return!1;return!0};_(()=>m.modelValue,t=>{const e=Array.isArray(t)?t:[];x(e,l.value)||(l.value=[...e])}),_(()=>[...l.value],t=>{const e=Array.isArray(m.modelValue)?m.modelValue:[];x(t,e)||A("update:modelValue",t)});const w=/^\((.*?)\)\[(.*?)\]$/,C=()=>{l.value.push("")},L=()=>{l.value.push("(Label)[]")},N=t=>{window.confirm("Remove this item?")&&l.value.splice(t,1)},y=t=>typeof t=="string"&&w.test(t),c=t=>{const e=typeof t=="string"?t.match(w):null;return{label:e?e[1]:"",url:e?e[2]:""}},f=(t,e)=>`(${t||""})[${e||""}]`,B=t=>{const e=l.value[t]??"";l.value[t]=f(e,"")},U=t=>{const{label:e,url:a}=c(l.value[t]);l.value[t]=e||a||""};return(t,e)=>(d(),u("div",S,[s("div",I,[s("div",D,[i(V,{type:"button",onClick:C},{default:k(()=>e[1]||(e[1]=[v(" Add text ",-1)])),_:1,__:[1]}),r.allowLinks?(d(),R(V,{key:0,type:"button",onClick:L},{default:k(()=>e[2]||(e[2]=[v(" Add link ",-1)])),_:1,__:[2]})):p("",!0)]),r.allowLinks?(d(),u("div",E,[i(b(M),{class:"h-5 w-5 text-indigo-500 mr-2 mt-0.5"}),e[3]||(e[3]=s("div",null,[v(" You can insert inline links by typing: "),s("code",null,"(Label)[https://example.com]"),v(" inside any text item. You can also add a dedicated link item with the button. Drag to reorder. ")],-1))])):p("",!0)]),i(b(z),{modelValue:l.value,"onUpdate:modelValue":e[0]||(e[0]=a=>l.value=a),"item-key":"__index",handle:".drag-handle",class:"space-y-2"},{item:k(({element:a,index:o})=>[s("div",Y,[e[4]||(e[4]=s("button",{type:"button",class:"drag-handle cursor-move text-gray-400 hover:text-gray-600 p-2","aria-label":"Drag to reorder"},[s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[s("path",{d:"M7 4a1 1 0 110-2 1 1 0 010 2zM13 4a1 1 0 110-2 1 1 0 010 2zM7 11a1 1 0 110-2 1 1 0 010 2zM13 11a1 1 0 110-2 1 1 0 010 2zM7 18a1 1 0 110-2 1 1 0 010 2zM13 18a1 1 0 110-2 1 1 0 010 2z"})])],-1)),s("div",q,[y(a)?(d(),u("div",F,[i(g,{id:`${r.placeholderName}-${o}-label`,type:"text",class:"block w-full",placeholder:r.labelPlaceholder,"model-value":c(a).label,"onUpdate:modelValue":n=>{const h=c(l.value[o]);l.value[o]=f(n,h.url)}},null,8,["id","placeholder","model-value","onUpdate:modelValue"]),i(g,{id:`${r.placeholderName}-${o}-url`,type:"url",class:"block w-full",placeholder:r.urlPlaceholder,"model-value":c(a).url,"onUpdate:modelValue":n=>{const h=c(l.value[o]);l.value[o]=f(h.label,n)}},null,8,["id","placeholder","model-value","onUpdate:modelValue"])])):(d(),u("div",j,[i(g,{id:`${r.placeholderName}-${o}`,type:"text",class:"block w-full",placeholder:r.itemPlaceholder,modelValue:l.value[o],"onUpdate:modelValue":n=>l.value[o]=n},null,8,["id","placeholder","modelValue","onUpdate:modelValue"])])),s("div",G,[r.allowLinks&&!y(a)?(d(),u("button",{key:0,type:"button",class:"text-xs text-indigo-600 hover:underline",onClick:n=>B(o)},"Convert to link",8,H)):p("",!0),r.allowLinks&&y(a)?(d(),u("button",{key:1,type:"button",class:"text-xs text-indigo-600 hover:underline",onClick:n=>U(o)},"Convert to text",8,J)):p("",!0)])]),s("button",{type:"button",class:"text-red-500 hover:text-red-600 p-2",onClick:n=>N(o),"aria-label":"Remove item"},[i(b(P),{class:"h-5 w-5"})],8,K)])]),_:1},8,["modelValue"])]))}};export{te as _};
