import{r as v,I as T,c as D,f as E,a as d,o as c,d as w,u as R,h as W,w as y,b as t,i as C,t as r,x as U,y as H,k as z,aM as G,F as I,l as O,j as _,m as Y}from"./app-C2DlCbPA.js";import{_ as q}from"./AuthenticatedLayout-DtPFdL7J.js";import{_ as K}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./PrimaryButton-CtPDHjVD.js";import"./Modal-GlQUaNvM.js";import"./InputLabel-BV05Qh7X.js";import"./InputError-DiP-pdvV.js";import"./SecondaryButton-HKy0ku5i.js";import"./TextInput-DufyISud.js";import"./SelectDropdown-DtxiXNW7.js";/* empty css                                                                       */import"./Checkbox-DtaKYHdn.js";import"./ApplicationLogo-Bgsz_lH1.js";import"./DangerButton-CuooJuNp.js";import"./moment-BLMuvzoS.js";const J={class:"py-12"},Q={class:"max-w-4xl mx-auto sm:px-6 lg:px-8"},X={class:"flex flex-col items-center bg-white overflow-hidden shadow-xl sm:rounded-lg p-8"},Z={class:"w-full grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-6"},tt={class:"bg-yellow-50 border border-yellow-200 rounded-xl p-4"},et={class:"text-2xl font-bold text-yellow-800"},st={class:"bg-green-50 border border-green-200 rounded-xl p-4"},ot={class:"text-2xl font-bold text-green-800"},at={class:"bg-blue-50 border border-blue-200 rounded-xl p-4"},lt={class:"text-2xl font-bold text-blue-800"},nt={class:"bg-indigo-50 border border-indigo-200 rounded-xl p-4"},rt={class:"text-2xl font-bold text-indigo-800"},it={class:"bg-purple-50 border border-purple-200 rounded-xl p-4"},dt={class:"text-2xl font-bold text-purple-800"},ct={class:"bg-orange-50 border border-orange-200 rounded-xl p-4"},xt={class:"text-2xl font-bold text-orange-800"},ut={class:"w-full max-w-2xl mb-4"},gt={key:0,class:"text-gray-500"},mt={class:"flex items-center space-x-4"},pt={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"w-6 h-6 ml-2 text-yellow-400 inline-block"},vt={class:"flex items-center space-x-2"},ft={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"w-6 h-6 text-gray-500"},ht={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"w-6 h-6 text-gray-500"},bt={class:"text-lg sm:text-xl font-semibold text-gray-900"},wt={class:"flex items-center space-x-2"},yt={key:0,class:"congrats-overlay fixed inset-0 flex items-center justify-center z-50 p-4"},_t={class:"bg-white p-8 sm:p-12 rounded-3xl shadow-2xl text-gray-900 text-center border-4 border-yellow-400 relative"},kt={class:"text-4xl sm:text-5xl font-extrabold mb-4"},Mt={class:"text-xl sm:text-2xl font-semibold"},L=96,Tt={__name:"Index",setup(Ct){const h=v(!0),k=v([]),i=v([]),x=v(null),l=v(null),n=T({show:!1,message:{title:"",text:""}}),g=T({daysLeftInMonth:0,userMonthlyPoints:0,pendingTasksAcrossAccessibleProjects:0,standupsThisMonth:0,tasksCompletedThisMonthByUser:0,pointsNeededForTop:0}),f=v(""),M=D(()=>{if(!f.value)return i.value;const a=f.value.toLowerCase();return i.value.filter(e=>(e.name||"").toLowerCase().includes(a))});let b=null;function P(a){return l.value?a.id===l.value.id?20:i.value.length-a.rank:1}function S(){n.show=!1,n.message={title:"",text:""}}function B(a){const e=l.value&&a.id===l.value.id,o=x.value&&a.id===String(x.value);let s="";if(e)s+=" bg-gradient-to-r from-yellow-500 to-orange-500 text-white z-20";else if(o)s+=" bg-cyan-50 border-2 border-cyan-600 text-gray-900 shadow-2xl z-10";else switch(a.rank){case 1:s+=" bg-gray-200 border-2 border-yellow-500 text-gray-900 z-10";break;case 2:s+=" bg-gray-200 border-2 border-gray-400 text-gray-900";break;case 3:s+=" bg-gray-200 border-2 border-orange-500 text-gray-900";break;default:s+=" bg-white border border-gray-300 text-gray-900";break}return s}function F(a){const e=l.value&&a.id===l.value.id,o=x.value&&a.id===String(x.value);if(e)return"text-white";if(o)return"text-cyan-600";switch(a.rank){case 1:return"text-yellow-600";case 2:return"text-gray-400";case 3:return"text-orange-600";default:return"text-gray-500"}}function j(a){return x.value&&a.id===String(x.value)?"text-3xl sm:text-4xl":"text-2xl sm:text-3xl"}function A(a){return l.value&&a.id===l.value.id?"text-white":"text-green-600"}function V(){const a=k.value.reduce((o,s)=>Math.max(o,s.finalPoints||0),0),e=a>1e3?100:a>200?25:10;b=setInterval(()=>{let o=!0;if(i.value.forEach(s=>{if(s.points<s.finalPoints){const u=Math.floor(Math.random()*e)+1;s.points=Math.min(s.points+u,s.finalPoints),o=!1}}),i.value.sort((s,u)=>u.points-s.points),i.value=i.value.map((s,u)=>({...s,rank:u+1})),o){clearInterval(b),b=null;const s=i.value.find(u=>String(u.id)===String(x.value));s&&(s.rank===1?(n.show=!0,n.message={title:"Congratulations!",text:`${s.name}, you are on the top of the leaderboard!`}):s.rank<=3?(n.show=!0,n.message={title:"Well done!",text:`${s.name}, you made it to the top 3!`}):(n.show=!0,n.message={title:"Final Standings!",text:`Hey ${s.name}, you finished at rank ${s.rank}! Keep submitting your standups on time and completing tasks to climb the ranks. You're doing great!`}))}},200)}async function $(){try{const a=await window.axios.get("/api/user");x.value=a.data.id;const[e,o]=await Promise.all([window.axios.get("/api/leaderboard/stats"),window.axios.get("/api/leaderboard/monthly")]);Object.assign(g,e.data||{});const s=Array.isArray(o.data.leaderboard)?o.data.leaderboard:[];l.value=s.reduce((m,p)=>m&&m.finalPoints>p.finalPoints?m:p,null);const N=[...s.filter(m=>{var p;return m.id!==(((p=l.value)==null?void 0:p.id)??"")}).sort(()=>Math.random()-.5),l.value].filter(Boolean);k.value=s,i.value=N.map((m,p)=>({...m,points:0,rank:p+1})),h.value=!1,V()}catch(a){console.error("Failed to load leaderboard",a),h.value=!1}}return E(()=>{$()}),(a,e)=>(c(),d(I,null,[w(R(W),{title:"Leaderboard"}),w(q,null,{header:y(()=>e[1]||(e[1]=[t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Monthly Leaderboard ",-1)])),default:y(()=>[t("div",J,[t("div",Q,[t("div",X,[e[12]||(e[12]=t("h1",{class:"text-5xl sm:text-6xl font-extrabold text-center mb-10 text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 via-orange-500 to-red-500 animate-pulse-glow"}," Monthly Leaderboard ",-1)),t("div",Z,[t("div",tt,[e[2]||(e[2]=t("div",{class:"text-sm text-yellow-700"},"Days left in month",-1)),t("div",et,r(g.daysLeftInMonth),1)]),t("div",st,[e[3]||(e[3]=t("div",{class:"text-sm text-green-700"},"Your points (this month)",-1)),t("div",ot,r(g.userMonthlyPoints),1)]),t("div",at,[e[4]||(e[4]=t("div",{class:"text-sm text-blue-700"},"Pending tasks (accessible)",-1)),t("div",lt,r(g.pendingTasksAcrossAccessibleProjects),1)]),t("div",nt,[e[5]||(e[5]=t("div",{class:"text-sm text-indigo-700"},"Standups submitted (this month)",-1)),t("div",rt,r(g.standupsThisMonth),1)]),t("div",it,[e[6]||(e[6]=t("div",{class:"text-sm text-purple-700"},"Tasks completed (this month)",-1)),t("div",dt,r(g.tasksCompletedThisMonthByUser),1)]),t("div",ct,[e[7]||(e[7]=t("div",{class:"text-sm text-orange-700"},"Points needed to reach Top",-1)),t("div",xt,r(g.pointsNeededForTop),1)])]),t("div",ut,[U(t("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>f.value=o),type:"text",placeholder:"Search by name...",class:"w-full border border-gray-300 rounded-xl px-4 py-2 focus:outline-none focus:ring-2 focus:ring-cyan-500"},null,512),[[H,f.value]])]),h.value?(c(),d("div",gt,"Loading leaderboard...")):(c(),d("div",{key:1,class:"w-full max-w-2xl relative mx-auto overflow-hidden",style:z({height:`${M.value.length*L}px`})},[w(G,{name:"rank",tag:"div",class:"relative"},{default:y(()=>[(c(!0),d(I,null,O(M.value,(o,s)=>(c(),d("div",{key:o.id,class:"absolute w-full transition-transform duration-300",style:z({transform:`translate3d(0, ${s*L}px, 0)`,zIndex:P(o)})},[t("div",{class:_([B(o),"relative flex items-center justify-between p-4 sm:p-6 rounded-2xl transition-all duration-300 transform hover:scale-105 shadow-xl my-2"])},[t("div",mt,[t("span",{class:_(["font-extrabold",[F(o),j(o)]])},[Y(r(o.rank)+" ",1),o.rank===1?(c(),d("svg",pt,e[8]||(e[8]=[t("path",{"fill-rule":"evenodd",d:"M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.007 5.404.433c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.694 21.05c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.433 2.082-5.006z","clip-rule":"evenodd"},null,-1)]))):C("",!0)],2),t("div",vt,[o.userType==="Employee"?(c(),d("svg",ft,e[9]||(e[9]=[t("path",{"fill-rule":"evenodd",d:"M7.5 6a4.5 4.5 0 119 0 4.5 4.5 0 01-9 0zM3.751 20.105a8.25 8.25 0 0116.498 0 .75.75 0 01-.001.915 2.25 2.25 0 01-1.615 1.056c-1.334.252-2.33.582-2.651.921l-1.086 1.1c-.241.246-.59.246-.831 0l-1.086-1.1c-.321-.339-1.317-.669-2.651-.92a2.25 2.25 0 01-1.615-1.056.75.75 0 01-.001-.915z","clip-rule":"evenodd"},null,-1)]))):(c(),d("svg",ht,e[10]||(e[10]=[t("path",{d:"M18.375 2.25a.75.75 0 00-.75.75v15.75a.75.75 0 001.5 0V3a.75.75 0 00-.75-.75zM15.75 6.75a.75.75 0 00-.75.75v12.75a.75.75 0 001.5 0V7.5a.75.75 0 00-.75-.75zM13.125 10.5a.75.75 0 00-.75.75v8.25a.75.75 0 001.5 0v-8.25a.75.75 0 00-.75-.75zM10.5 14.25a.75.75 0 00-.75.75v4.5a.75.75 0 001.5 0v-4.5a.75.75 0 00-.75-.75zM7.875 16.5a.75.75 0 00-.75.75v2.25a.75.75 0 001.5 0v-2.25a.75.75 0 00-.75-.75zM4.5 20.25a.75.75 0 00-.75.75v1.5a.75.75 0 001.5 0v-1.5a.75.75 0 00-.75-.75z"},null,-1)]))),t("span",bt,r(o.name),1)])]),t("div",wt,[t("span",{class:_(["text-xl sm:text-2xl font-bold",A(o)])},r(Math.round(o.points)),3),e[11]||(e[11]=t("span",{class:"text-gray-500"},"pts",-1))])],2)],4))),128))]),_:1})],4))])])]),n.show?(c(),d("div",yt,[t("div",_t,[t("button",{onClick:S,class:"absolute top-4 right-4 text-gray-400 hover:text-gray-900 transition-colors"},e[13]||(e[13]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),t("h2",kt,r(n.message.title),1),t("p",Mt,r(n.message.text),1)])])):C("",!0)]),_:1})],64))}},Ut=K(Tt,[["__scopeId","data-v-4183ef37"]]);export{Ut as default};
