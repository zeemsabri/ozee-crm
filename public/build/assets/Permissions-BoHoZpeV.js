import{u as C,c as j,o as n,a as g,b as s,d as A,i as l,e as p,F as f,j as b,t as u,f as S,h as d,q as $,g as B,l as N,m as y,n as V}from"./app-BjsFVmpi.js";import{_ as D}from"./AuthenticatedLayout-Qv6QVWW_.js";import{a as O}from"./InputError-CAOrhoA2.js";import{P as F}from"./PrimaryButton-DVw5UBE2.js";import"./ApplicationLogo-fHZ2whbq.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./SecondaryButton-B3BB9Swh.js";const I={class:"font-semibold text-xl text-gray-800 leading-tight"},M={class:"py-12"},E={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},R={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},U={class:"p-6 bg-white border-b border-gray-200"},q={class:"mb-6"},z={key:0,class:"text-sm text-gray-500 p-4 bg-gray-50 rounded-lg"},L={key:1},T={class:"flex justify-between items-center mb-2"},G={class:"font-medium text-gray-700"},H={class:"flex space-x-2"},J=["onClick"],K=["onClick"],Q={class:"bg-gray-50 p-4 rounded-lg"},W={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2"},X={class:"flex items-center h-5"},Y=["id","value"],Z={class:"ml-3 text-sm"},ss=["for"],es={key:0,class:"text-gray-500"},ts={class:"flex items-center justify-end mt-4"},cs={__name:"Permissions",props:{role:Object,permissions:Object,rolePermissions:Array},setup(c){const m=c,e=C({permissions:m.rolePermissions||[]}),x=Object.values(m.permissions).flat().map(a=>a.id),h=()=>{e.permissions=[...x]},_=()=>{e.permissions=[]},v=a=>{const t=m.permissions[a].map(r=>r.id),i=new Set(e.permissions);t.forEach(r=>{i.add(r)}),e.permissions=Array.from(i)},k=a=>{const t=new Set(m.permissions[a].map(i=>i.id));e.permissions=e.permissions.filter(i=>!t.has(i))},w=()=>{e.post(route("admin.roles.updatePermissions",m.role.id),{onSuccess:()=>{}})};return(a,t)=>(n(),j(D,null,{header:g(()=>[s("h2",I," Manage Permissions for Role: "+u(c.role.name),1)]),default:g(()=>[s("div",M,[s("div",E,[s("div",R,[s("div",U,[s("form",{onSubmit:A(w,["prevent"])},[s("div",q,[s("div",{class:"flex justify-between items-center mb-4"},[t[1]||(t[1]=s("h3",{class:"text-lg font-medium text-gray-900"},"Role Permissions",-1)),s("div",{class:"flex space-x-2"},[s("button",{type:"button",onClick:h,class:"inline-flex items-center px-4 py-2 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 active:bg-gray-900 focus:outline-none focus:border-gray-900 focus:ring focus:ring-gray-300 disabled:opacity-25 transition"}," Select All "),s("button",{type:"button",onClick:_,class:"inline-flex items-center px-4 py-2 bg-gray-500 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-400 active:bg-gray-600 focus:outline-none focus:border-gray-600 focus:ring focus:ring-gray-300 disabled:opacity-25 transition"}," Deselect All ")])]),Object.keys(c.permissions).length===0?(n(),l("div",z," No permissions available. Please create some permissions first. ")):(n(),l("div",L,[(n(!0),l(f,null,b(c.permissions,(i,r)=>(n(),l("div",{key:r,class:"mb-6"},[s("div",T,[s("h4",G,u(r),1),s("div",H,[s("button",{type:"button",onClick:o=>v(r),class:"text-xs text-indigo-600 hover:text-indigo-900"}," Select All ",8,J),s("button",{type:"button",onClick:o=>k(r),class:"text-xs text-gray-600 hover:text-gray-900"}," Deselect All ",8,K)])]),s("div",Q,[s("div",W,[(n(!0),l(f,null,b(i,o=>(n(),l("div",{key:o.id,class:"flex items-start"},[s("div",X,[S(s("input",{id:`permission-${o.id}`,type:"checkbox",value:o.id,"onUpdate:modelValue":t[0]||(t[0]=P=>d(e).permissions=P),class:"focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300 rounded"},null,8,Y),[[$,d(e).permissions]])]),s("div",Z,[s("label",{for:`permission-${o.id}`,class:"font-medium text-gray-700"},u(o.name),9,ss),o.description?(n(),l("p",es,u(o.description),1)):B("",!0)])]))),128))])])]))),128))])),p(O,{class:"mt-2",message:d(e).errors.permissions},null,8,["message"])]),s("div",ts,[p(d(N),{href:a.route("admin.roles.show",c.role.id),class:"inline-flex items-center px-4 py-2 bg-gray-300 border border-transparent rounded-md font-semibold text-xs text-gray-800 uppercase tracking-widest hover:bg-gray-400 active:bg-gray-500 focus:outline-none focus:border-gray-500 focus:ring focus:ring-gray-300 disabled:opacity-25 transition mr-2"},{default:g(()=>t[2]||(t[2]=[y(" Cancel ",-1)])),_:1,__:[2]},8,["href"]),p(F,{class:V(["ml-4",{"opacity-25":d(e).processing}]),disabled:d(e).processing},{default:g(()=>t[3]||(t[3]=[y(" Update Permissions ",-1)])),_:1,__:[3]},8,["class","disabled"])])],32)])])])])]),_:1}))}};export{cs as default};
