import{r as v,x as N,b as S,c as m,o as c,a as r,F as B,i as E,e,w as p,g as _,u as b,n as A,y as D,s as y}from"./app-BB49X1tp.js";import{_ as F}from"./PrimaryButton-ByHbGtgS.js";import{_ as k}from"./SecondaryButton-h9tD_s2q.js";import{_ as V}from"./TextInput-B8kjVC_X.js";import{_ as u}from"./InputLabel-CF6SQJlm.js";import{S as g}from"./SelectDropdown-Dd_bXZ8S.js";/* empty css                                                                       */import"./_plugin-vue_export-helper-DlAUqK2U.js";const M={class:"p-4 space-y-6"},q={class:"flex justify-end"},L={class:"flex justify-between items-center mt-4"},O={__name:"EmailBulkTaskContent",props:{emailId:[Number,String],projectId:[Number,String]},emits:["tasks-submitted","close"],setup($,{emit:w}){const i=$,h=w,d=v([{name:"",due_date:"",priority:"medium",assigned_user_id:""}]),f=v([]),U=[{value:"high",label:"High"},{value:"medium",label:"Medium"},{value:"low",label:"Low"}],n=N({tasks:d.value,email_id:i.emailId}),T=async()=>{if(i.projectId)try{const o=await y.get(`/api/projects/${i.projectId}/users`);f.value=o.data.map(a=>({value:a.id,label:a.name}))}catch(o){console.error("Error fetching project users:",o)}},j=()=>{d.value.push({name:"",due_date:"",priority:"medium",assigned_user_id:""})},C=o=>{d.value.splice(o,1)},I=async()=>{try{await y.post(`/api/emails/${i.emailId}/tasks`,n.data()),h("tasks-submitted")}catch(o){console.error("Error submitting tasks:",o)}};return S(T),(o,a)=>(c(),m("div",M,[r("form",{onSubmit:D(I,["prevent"])},[(c(!0),m(B,null,E(d.value,(l,s)=>(c(),m("div",{key:s,class:"space-y-4 border-b pb-4 mb-4"},[r("div",null,[e(u,{for:`task-name-${s}`,value:"Task Name"},null,8,["for"]),e(V,{id:`task-name-${s}`,modelValue:l.name,"onUpdate:modelValue":t=>l.name=t,type:"text",class:"mt-1 block w-full",required:""},null,8,["id","modelValue","onUpdate:modelValue"])]),r("div",null,[e(u,{for:`due-date-${s}`,value:"Due Date"},null,8,["for"]),e(V,{id:`due-date-${s}`,modelValue:l.due_date,"onUpdate:modelValue":t=>l.due_date=t,type:"date",class:"mt-1 block w-full",required:""},null,8,["id","modelValue","onUpdate:modelValue"])]),r("div",null,[e(u,{for:`priority-${s}`,value:"Priority"},null,8,["for"]),e(g,{id:`priority-${s}`,modelValue:l.priority,"onUpdate:modelValue":t=>l.priority=t,options:U,class:"mt-1 block w-full"},null,8,["id","modelValue","onUpdate:modelValue"])]),r("div",null,[e(u,{for:`assigned-user-${s}`,value:"Assigned User"},null,8,["for"]),e(g,{id:`assigned-user-${s}`,modelValue:l.assigned_user_id,"onUpdate:modelValue":t=>l.assigned_user_id=t,options:f.value,placeholder:"Select a user",class:"mt-1 block w-full"},null,8,["id","modelValue","onUpdate:modelValue","options"])]),r("div",q,[e(k,{onClick:t=>C(s)},{default:p(()=>a[0]||(a[0]=[_("Remove Task",-1)])),_:2,__:[0]},1032,["onClick"])])]))),128)),r("div",L,[e(k,{type:"button",onClick:j},{default:p(()=>a[1]||(a[1]=[_("Add Another Task",-1)])),_:1,__:[1]}),e(F,{class:A({"opacity-25":b(n).processing}),disabled:b(n).processing},{default:p(()=>a[2]||(a[2]=[_(" Create Tasks ",-1)])),_:1,__:[2]},8,["class","disabled"])])],32)]))}};export{O as default};
