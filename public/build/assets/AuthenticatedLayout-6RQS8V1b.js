import{r as T,l as W,Q as Je,b as ke,d as lt,c as i,k as _,o as a,F as Z,i as ie,a as e,t as G,u as N,R as St,S as ia,U as Gt,V as jt,n as q,s as ne,m as le,q as B,w as k,g as A,e as r,f as U,v as re,G as Ye,W as tt,p as Ie,z as We,y as Pt,D as Se,H as He,A as mt,N as ye,M as ce,X as Ke,j as na,Y as Te,Z as Et,T as ra,_ as _t,L as Ce,B as Ae,$ as It,a0 as vt,E as st,a1 as he,a2 as Me,a3 as ua,a4 as da,P as ca,a5 as $e,a6 as rt,I as Vt,a7 as ma,a8 as va,a9 as At,aa as Tt,J as pa}from"./app-ChNNGQpZ.js";import{_ as ve}from"./PrimaryButton-NC2t_HoE.js";import{_ as Ve}from"./Modal-BVF4Zl1w.js";import{_ as O}from"./InputLabel-Bvo8T8oq.js";import{_ as X}from"./InputError-BQxDaFqc.js";import{_ as Fe}from"./SecondaryButton-D0KIHOxV.js";import{r as fa}from"./index-CP72OQU6.js";import{B as De}from"./BaseFormModal-DIxmT_Gd.js";import{_ as ge}from"./TextInput-CcWdt2zx.js";import{S as be}from"./SelectDropdown-M38VjQTw.js";import{d as ga}from"./debounce-C-hnF4Z3.js";import{_ as Qe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{A as ba}from"./ApplicationLogo-B3GrnINu.js";import{_ as at}from"./MultiSelectDropdown-D3XvIqj2.js";import{c as Ze}from"./createLucideIcon-Zi0Lz4se.js";import{P as ut}from"./plus-BP7uux2D.js";import{D as pt}from"./DangerButton-D73APu0H.js";import{h as ya}from"./moment-BLMuvzoS.js";import{_ as ha,c as ka}from"./NoticeboardModal-wU_Jv4Nf.js";const xa={key:0,class:"fixed bottom-4 right-4 z-50 flex flex-col items-end space-y-2"},wa={key:0,class:"notification-list w-full max-w-xs space-y-2"},_a={class:"flex-1 min-w-0"},Aa={class:"flex items-start justify-between gap-2 mb-1"},Ta={class:"flex-1 min-w-0"},Ma={key:0,class:"text-base font-semibold text-gray-800 truncate"},$a={key:1,class:"text-xs text-gray-500"},Ca={key:0,class:"text-xs text-gray-600 mb-2"},Sa={class:"flex items-center justify-between mt-2"},Ga={key:0,class:"text-xs text-gray-500 font-medium"},ja=["onClick"],Pa={key:1,class:"flex justify-end w-full max-w-xs"},Ea={key:0},Ia={key:1},Ee="notification_minimized_state",Va=3,Da={__name:"PushNotificationContainer",props:{sidebarIsOpen:{type:Boolean,default:!1}},setup(u){const g=T(!1),m=T(null),s=T(0),t=T(null),p=W(()=>Je.value.notifications.filter(l=>l.isNewPush).slice(0,Va)),v=W(()=>{const l=Math.floor(s.value/60),d=s.value%60;return`${String(l).padStart(2,"0")}:${String(d).padStart(2,"0")}`}),h=l=>{if(!l)return null;const d=l.match(/\/task\/(\d+)/);return d?parseInt(d[1]):null},c=l=>{if(!l)return null;const d=l.match(/\/project\/(\d+)\//);return d?parseInt(d[1]):null},n=()=>{if(g.value=!g.value,clearTimeout(m.value),clearInterval(t.value),g.value){const l=Date.now()+3e5;localStorage.setItem(Ee,JSON.stringify({isMinimized:!0,expiryTime:l})),m.value=setTimeout(()=>{g.value=!1,clearInterval(t.value),localStorage.removeItem(Ee)},3e5),s.value=300,t.value=setInterval(()=>{s.value>0?s.value--:clearInterval(t.value)},1e3)}else localStorage.removeItem(Ee)},o=async l=>{ia(l.id),await Gt(l.view_id);const d=l.task_id||h(l.url),f=l.project_id||c(l.url);d&&f?jt(d,f):(console.warn("Could not open task sidebar. Falling back to redirecting."),l.url&&(window.location.href=l.url))};return ke(()=>{const l=localStorage.getItem(Ee);if(l)try{const{isMinimized:d,expiryTime:f}=JSON.parse(l),M=Date.now(),b=f-M;b>0?(g.value=d,s.value=Math.floor(b/1e3),m.value=setTimeout(()=>{g.value=!1,clearInterval(t.value),localStorage.removeItem(Ee)},b),t.value=setInterval(()=>{s.value>0?s.value--:clearInterval(t.value)},1e3)):localStorage.removeItem(Ee)}catch(d){console.error("Error restoring notification minimized state:",d),localStorage.removeItem(Ee)}}),lt(()=>{clearTimeout(m.value),clearInterval(t.value)}),(l,d)=>u.sidebarIsOpen?_("",!0):(a(),i("div",xa,[!g.value&&p.value.length>0?(a(),i("div",wa,[(a(!0),i(Z,null,ie(p.value,f=>(a(),i("div",{key:f.id,class:"bg-white rounded-lg shadow-lg p-3 flex items-start space-x-3 border border-gray-200 transition-opacity duration-300 opacity-60 hover:opacity-100"},[e("div",_a,[e("div",Aa,[e("div",Ta,[f.title?(a(),i("h3",Ma,G(f.title),1)):_("",!0),f.project_name?(a(),i("p",$a,G(f.project_name),1)):_("",!0)])]),f.message?(a(),i("p",Ca,G(f.message),1)):_("",!0),e("div",Sa,[f.due_date?(a(),i("div",Ga," Due: "+G(N(St)(f.due_date)),1)):_("",!0),e("button",{onClick:M=>o(f),class:"px-2.5 py-1 bg-blue-600 text-white text-xs font-medium rounded-md hover:bg-blue-700 transition-colors duration-200 shadow"},G(f.button_label||"View"),9,ja)])])]))),128))])):_("",!0),p.value.length>0?(a(),i("div",Pa,[e("button",{onClick:n,class:"bg-white/80 backdrop-blur-sm text-gray-600 hover:text-gray-900 text-xs font-bold py-1 px-3 rounded-full shadow-md transition-all duration-300"},[g.value?(a(),i("span",Ea,"Show ("+G(v.value)+")",1)):(a(),i("span",Ia,"Minimize"))])])):_("",!0)]))}},Ba={class:"fixed top-4 right-4 z-[9999] flex flex-col items-end space-y-3"},Na={class:"p-4"},Ua={class:"text-sm font-medium text-white"},Fa={key:0,class:"mt-3 flex gap-2"},za=["onClick"],La=["onClick"],Ra={__name:"StandardNotificationContainer",setup(u,{expose:g}){const m=T([]),s=(c,n="info",o=5e3)=>{let l;typeof c=="object"&&c!==null?l={...c}:l={message:c,type:n,duration:o};const d=l.id||crypto.randomUUID(),f={id:d,message:l.message||"",type:l.type||"info",duration:typeof l.duration=="number"?l.duration:5e3,sticky:!!l.sticky,confirm:l.confirm||null};return m.value.unshift(f),!f.sticky&&!f.confirm&&setTimeout(()=>{t(d)},f.duration),d},t=c=>{const n=m.value.findIndex(o=>o.id===c);n>-1&&m.value.splice(n,1)},p=c=>{const n=m.value.find(o=>o.id===c);if(n&&n.confirm&&typeof n.confirm.onConfirm=="function")try{n.confirm.onConfirm()}catch{}t(c)},v=c=>{const n=m.value.find(o=>o.id===c);if(n&&n.confirm&&typeof n.confirm.onCancel=="function")try{n.confirm.onCancel()}catch{}t(c)},h=c=>{switch(c){case"success":return"bg-green-500";case"error":return"bg-red-500";case"warning":return"bg-yellow-500";case"info":default:return"bg-blue-500"}};return g({addNotification:s}),(c,n)=>(a(),i("div",Ba,[(a(!0),i(Z,null,ie(m.value,o=>(a(),i("div",{key:o.id,class:q(["w-full max-w-sm rounded-md shadow-lg pointer-events-auto overflow-hidden",h(o.type)])},[e("div",Na,[e("p",Ua,G(o.message),1),o.confirm?(a(),i("div",Fa,[e("button",{class:"px-3 py-1 text-sm font-semibold rounded bg-white/90 text-slate-800 hover:bg-white",onClick:l=>p(o.id)},G(o.confirm.confirmText||"Confirm"),9,za),e("button",{class:"px-3 py-1 text-sm font-semibold rounded bg-transparent border border-white/70 text-white hover:bg-white/10",onClick:l=>v(o.id)},G(o.confirm.cancelText||"Cancel"),9,La)])):_("",!0)])],2))),128))]))}};var et={exports:{}},Oa=et.exports,Mt;function qa(){return Mt||(Mt=1,function(u,g){(function(s,t){u.exports=t(fa())})(Oa,m=>(()=>{var s={113:(P,V)=>{Object.defineProperty(V,"__esModule",{value:!0}),V.default=(K,D)=>{const C=K.__vccOpts||K;for(const[Q,ue]of D)C[Q]=ue;return C}},594:P=>{P.exports=m}},t={};function p(P){var V=t[P];if(V!==void 0)return V.exports;var K=t[P]={exports:{}};return s[P](K,K.exports,p),K.exports}p.d=(P,V)=>{for(var K in V)p.o(V,K)&&!p.o(P,K)&&Object.defineProperty(P,K,{enumerable:!0,get:V[K]})},p.o=(P,V)=>Object.prototype.hasOwnProperty.call(P,V),p.r=P=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(P,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(P,"__esModule",{value:!0})};var v={};p.r(v),p.d(v,{ToastComponent:()=>j,ToastPlugin:()=>L,ToastPositions:()=>f,default:()=>H,useToast:()=>z});var h=p(594);const c=["innerHTML"];function n(P,V,K,D,C,Q){return(0,h.openBlock)(),(0,h.createBlock)(h.Transition,{"enter-active-class":P.transition.enter,"leave-active-class":P.transition.leave},{default:(0,h.withCtx)(()=>[(0,h.withDirectives)((0,h.createElementVNode)("div",{ref:"root",role:"alert",class:(0,h.normalizeClass)(["v-toast__item",[`v-toast__item--${P.type}`,`v-toast__item--${P.position}`]]),onMouseover:V[0]||(V[0]=ue=>P.toggleTimer(!0)),onMouseleave:V[1]||(V[1]=ue=>P.toggleTimer(!1)),onClick:V[2]||(V[2]=function(){return P.whenClicked&&P.whenClicked(...arguments)})},[V[3]||(V[3]=(0,h.createElementVNode)("div",{class:"v-toast__icon"},null,-1)),(0,h.createElementVNode)("p",{class:"v-toast__text",innerHTML:P.message},null,8,c)],34),[[h.vShow,P.isActive]])]),_:1},8,["enter-active-class","leave-active-class"])}function o(P){var V;typeof P.remove<"u"?P.remove():(V=P.parentNode)==null||V.removeChild(P)}function l(P,V,K){let D=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const C=(0,h.h)(P,V,D),Q=document.createElement("div");return Q.classList.add("v-toast--pending"),K.appendChild(Q),(0,h.render)(C,Q),C.component}class d{constructor(V,K){this.startedAt=Date.now(),this.callback=V,this.delay=K,this.timer=setTimeout(V,K)}pause(){this.stop(),this.delay-=Date.now()-this.startedAt}resume(){this.stop(),this.startedAt=Date.now(),this.timer=setTimeout(this.callback,this.delay)}stop(){clearTimeout(this.timer)}}const f=Object.freeze({TOP_RIGHT:"top-right",TOP:"top",TOP_LEFT:"top-left",BOTTOM_RIGHT:"bottom-right",BOTTOM:"bottom",BOTTOM_LEFT:"bottom-left"});function M(P){return{all:P=P||new Map,on:function(V,K){var D=P.get(V);D?D.push(K):P.set(V,[K])},off:function(V,K){var D=P.get(V);D&&(K?D.splice(D.indexOf(K)>>>0,1):P.set(V,[]))},emit:function(V,K){var D=P.get(V);D&&D.slice().map(function(C){C(K)}),(D=P.get("*"))&&D.slice().map(function(C){C(V,K)})}}}const I=M(),E=(0,h.defineComponent)({name:"Toast",props:{message:{type:String,required:!0},type:{type:String,default:"success"},position:{type:String,default:f.BOTTOM_RIGHT,validator(P){return Object.values(f).includes(P)}},duration:{type:Number,default:3e3},dismissible:{type:Boolean,default:!0},onDismiss:{type:Function,default:()=>{}},onClick:{type:Function,default:()=>{}},queue:Boolean,pauseOnHover:{type:Boolean,default:!0}},data(){return{isActive:!1,parentTop:null,parentBottom:null,isHovered:!1}},beforeMount(){this.setupContainer()},mounted(){this.showNotice(),I.on("toast-clear",this.dismiss)},methods:{setupContainer(){if(this.parentTop=document.querySelector(".v-toast.v-toast--top"),this.parentBottom=document.querySelector(".v-toast.v-toast--bottom"),this.parentTop&&this.parentBottom)return;this.parentTop||(this.parentTop=document.createElement("div"),this.parentTop.className="v-toast v-toast--top"),this.parentBottom||(this.parentBottom=document.createElement("div"),this.parentBottom.className="v-toast v-toast--bottom");const P=document.body;P.appendChild(this.parentTop),P.appendChild(this.parentBottom)},shouldQueue(){return this.queue?this.parentTop.childElementCount>0||this.parentBottom.childElementCount>0:!1},dismiss(){this.timer&&this.timer.stop(),clearTimeout(this.queueTimer),this.isActive=!1,setTimeout(()=>{this.onDismiss.apply(null,arguments);const P=this.$refs.root;(0,h.render)(null,P),o(P)},150)},showNotice(){if(this.shouldQueue()){this.queueTimer=setTimeout(this.showNotice,250);return}const P=this.$refs.root.parentElement;this.correctParent.insertAdjacentElement("afterbegin",this.$refs.root),o(P),this.isActive=!0,this.duration&&(this.timer=new d(this.dismiss,this.duration))},whenClicked(){this.dismissible&&(this.onClick.apply(null,arguments),this.dismiss())},toggleTimer(P){!this.pauseOnHover||!this.timer||(P?this.timer.pause():this.timer.resume())}},computed:{correctParent(){switch(this.position){case f.TOP:case f.TOP_RIGHT:case f.TOP_LEFT:return this.parentTop;case f.BOTTOM:case f.BOTTOM_RIGHT:case f.BOTTOM_LEFT:return this.parentBottom}},transition(){switch(this.position){case f.TOP:case f.TOP_RIGHT:case f.TOP_LEFT:return{enter:"v-toast--fade-in-down",leave:"v-toast--fade-out"};case f.BOTTOM:case f.BOTTOM_RIGHT:case f.BOTTOM_LEFT:return{enter:"v-toast--fade-in-up",leave:"v-toast--fade-out"}}}},beforeUnmount(){I.off("toast-clear",this.dismiss)}});var $=p(113);const j=(0,$.default)(E,[["render",n]]),z=function(){let P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{open(V){let K=null;typeof V=="string"&&(K=V);const C=Object.assign({},{message:K},P,V);return{dismiss:l(j,C,document.body).ctx.dismiss}},clear(){I.emit("toast-clear")},success(V){let K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.open(Object.assign({},{message:V,type:"success"},K))},error(V){let K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.open(Object.assign({},{message:V,type:"error"},K))},info(V){let K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.open(Object.assign({},{message:V,type:"info"},K))},warning(V){let K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.open(Object.assign({},{message:V,type:"warning"},K))},default(V){let K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.open(Object.assign({},{message:V,type:"default"},K))}}},L={install:function(P){let V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},K=z(V);P.config.globalProperties.$toast=K,P.provide("$toast",K)}},H=L;return v})())}(et)),et.exports}var Wa=qa();const Ha={class:"p-8"},Ka={class:"mt-2 text-sm text-gray-600"},Ja={key:0,class:"mt-6 p-4 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 rounded-lg"},Ya={class:"mt-4"},Qa={class:"mt-6 grid grid-cols-1 lg:grid-cols-3 gap-6"},Za={class:"lg:col-span-1 space-y-3"},Xa=["onClick"],el={class:"flex items-center justify-between"},tl={class:"flex items-center"},al={class:"ml-2 text-sm text-gray-500"},ll={key:0},sl={key:1},ol={key:1,class:"text-xs text-gray-400"},il={key:0,class:"lg:col-span-2 p-6 bg-gray-50 rounded-xl shadow-inner"},nl={class:"text-xl font-semibold text-gray-800 mb-4"},rl={class:"mb-4 text-sm text-right"},ul=["disabled"],dl={class:"flex items-center justify-between mb-6 p-4 rounded-lg bg-white shadow-sm border border-gray-200"},cl={class:"relative inline-flex items-center cursor-pointer"},ml=["checked"],vl={key:0},pl={class:"flex-1"},fl=["onUpdate:modelValue"],gl={class:"flex-1"},bl=["onUpdate:modelValue"],yl=["onClick"],hl={key:1},kl={key:1,class:"lg:col-span-2 p-6 bg-gray-50 rounded-xl shadow-inner flex items-center justify-center"},xl={class:"px-6 py-4 bg-gray-50 border-t flex justify-end gap-3"},wl={key:0,class:"flex items-center"},_l={key:1},Al={__name:"AvailabilityModal",props:{show:Boolean,userId:{type:Number,default:null}},emits:["close","availability-saved"],setup(u,{emit:g}){const m=()=>{const D=localStorage.getItem("authToken");D&&!ne.defaults.headers.common.Authorization&&(ne.defaults.headers.common.Authorization=`Bearer ${D}`)},s=u,t=g,p=Wa.useToast(),v=T({}),h=T({}),c=T(!1),n=T(null),o=T(""),l=T(!1),d=T([]),f=()=>{const D=[],C=new Date,Q=C.getDay(),ue=Q===0?1:8-Q,ee=new Date(C);ee.setDate(C.getDate()+ue);for(let se=0;se<7;se++){const J=new Date(ee);J.setDate(ee.getDate()+se);const oe=J.toISOString().split("T")[0];D.push({value:oe,label:J.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"}),day:J.toLocaleDateString("en-US",{weekday:"short"})})}return D},M=()=>{const D=[],C=new Date,Q=C.getDay(),ue=new Date(C);ue.setDate(C.getDate()-(Q===0?6:Q-1));for(let ee=0;ee<7;ee++){const se=new Date(ue);se.setDate(ue.getDate()+ee);const J=se.toISOString().split("T")[0];D.push({value:J,label:se.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"}),day:se.toLocaleDateString("en-US",{weekday:"short"})})}return D},b=()=>{l.value=!0,o.value="",d.value=M(),n.value=null,E()},I=()=>{l.value=!1,o.value="",d.value=f(),n.value=null,E()};ke(()=>{m(),d.value=f(),E()});const E=async()=>{try{if(m(),d.value.length===0)return;const D=d.value[0].value,C=d.value[d.value.length-1].value,Q=await ne.get("/api/availabilities",{params:{start_date:D,end_date:C,user_id:s.userId}});if(Q.data&&Q.data.availabilities){const ue={};d.value.forEach(ee=>{ue[ee.value]={isSelected:!1,isAvailable:!0,reason:"",timeSlots:[{start_time:"",end_time:""}]}}),v.value=ue,Q.data.availabilities.forEach(ee=>{const se=ee.date.split("T")[0];v.value[se]&&(v.value[se].isAvailable=ee.is_available,ee.is_available?v.value[se].timeSlots=ee.time_slots&&ee.time_slots.length>0?[...ee.time_slots]:[{start_time:"",end_time:""}]:v.value[se].reason=ee.reason||"")})}}catch(D){console.error("Error fetching existing availabilities:",D)}};le(()=>s.show,async D=>{if(D){h.value={},o.value="";try{m();const{data:C}=await ne.get("/api/availability-prompt");!(C.all_current_weekdays_covered??!0)?(l.value=!0,d.value=M()):(l.value=!1,d.value=f())}catch{l.value=!1,d.value=f()}await E(),n.value=null}else n.value=null},{immediate:!0});const $=W(()=>v.value[n.value]||{isSelected:!1,isAvailable:!0,reason:"",timeSlots:[{start_time:"",end_time:""}]}),x=W(()=>Object.values(v.value).some(D=>D.isSelected)),j=W(()=>{const D=v.value[n.value];return D?D.isAvailable?D.timeSlots.some(C=>C.start_time&&C.end_time):D.reason.trim().split(/\s+/).filter(Boolean).length>=2:!1}),z=D=>{n.value=D},L=()=>{var C;const D=(C=v.value[n.value])==null?void 0:C.timeSlots;D&&(D.push({start_time:"",end_time:""}),v.value[n.value].isSelected=!0)},H=D=>{var Q;const C=(Q=v.value[n.value])==null?void 0:Q.timeSlots;C&&C.length>1&&(C.splice(D,1),v.value[n.value].isSelected=!0)},P=D=>{v.value[n.value]&&(v.value[n.value].isAvailable=D,v.value[n.value].isSelected=!0,D?v.value[n.value].reason="":v.value[n.value].timeSlots=[{start_time:"",end_time:""}])},V=()=>{const D=v.value[n.value];if(D){if(!j.value){D.isAvailable?h.value[n.value]={timeSlots:"Please fill in at least one time slot before applying to all days."}:h.value[n.value]={reason:"Reason must be at least 2 words to apply to all days."};return}delete h.value[n.value];for(const C of d.value){const Q=C.value;v.value[Q]=JSON.parse(JSON.stringify(D)),v.value[Q].isSelected=!0}p.success("Availability applied to all days!")}},K=async()=>{if(c.value=!0,h.value={},l.value&&!o.value.trim()){h.value.lateReason="Please provide a reason for this late submission.",c.value=!1;return}const D=[];let C=!1;for(const Q of d.value){const ue=Q.value,ee=v.value[ue];let se={};if(ee.isSelected){if(ee.isAvailable)if(ee.timeSlots.some(J=>!J.start_time||!J.end_time))se.timeSlots="Please fill in all time slots.",C=!0;else for(const J of ee.timeSlots){const oe=J.start_time.split(":").map(Number),me=J.end_time.split(":").map(Number);if(oe[0]*60+oe[1]>=me[0]*60+me[1]){se.timeSlots="End time must be after start time.",C=!0;break}}else ee.reason.trim()||(se.reason="Please provide a reason for unavailability.",C=!0);Object.keys(se).length>0&&(h.value[ue]=se),Object.keys(se).length===0&&D.push({date:ue,is_available:ee.isAvailable,reason:ee.isAvailable?null:ee.reason,time_slots:ee.isAvailable?ee.timeSlots:null})}}if(D.length===0&&!C){h.value.general="Please select and set availability for at least one day.",c.value=!1;return}if(C){c.value=!1;return}try{m();const Q={availabilities:D,reason_for_late_submission:l.value?o.value:null};await ne.post("/api/availabilities/batch",Q),p.success("Availability saved successfully!"),t("availability-saved"),t("close")}catch(Q){console.error("Error saving availability:",Q),p.error("An error occurred while saving your availability.")}finally{c.value=!1}};return(D,C)=>(a(),B(Ve,{show:u.show,onClose:C[7]||(C[7]=Q=>D.$emit("close")),"max-width":"4xl",closeable:""},{default:k(()=>{var Q,ue,ee,se;return[e("div",Ha,[C[18]||(C[18]=e("h2",{class:"text-2xl font-bold text-gray-900"}," Set Your Weekly Availability ",-1)),e("p",Ka,[C[8]||(C[8]=A(" Select a day to quickly set your schedule for the upcoming week. ",-1)),l.value?(a(),i("span",{key:1,class:"text-indigo-600 hover:text-indigo-800 transition duration-150 ease-in-out cursor-pointer",onClick:I}," Go back to next week. ")):(a(),i("span",{key:0,class:"text-indigo-600 hover:text-indigo-800 transition duration-150 ease-in-out cursor-pointer",onClick:b}," Missed the deadline? Submit for this week. "))]),l.value?(a(),i("div",Ja,[C[9]||(C[9]=e("div",{class:"flex items-center"},[e("svg",{class:"h-5 w-5 text-yellow-500 mr-2",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.344a1.5 1.5 0 012.486 0l5.446 9.176A1.5 1.5 0 0114.246 15H5.754a1.5 1.5 0 01-1.238-2.48zM9 11a1 1 0 102 0V7a1 1 0 10-2 0v4zm1-3a1 1 0 100 2h.01a1 1 0 100-2H10z","clip-rule":"evenodd"})]),e("p",{class:"font-semibold"},"Late Submission for Current Week")],-1)),C[10]||(C[10]=e("p",{class:"mt-2 text-sm"}," Please provide a reason for submitting late. We acknowledge that availability submissions are due by Thursday evening. ",-1)),e("div",Ya,[r(O,{value:"Reason for late submission"}),U(e("textarea",{"onUpdate:modelValue":C[0]||(C[0]=J=>o.value=J),rows:"2",class:"mt-1 block w-full rounded-md border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 shadow-sm",placeholder:"e.g., I was out sick, I forgot, I had no access to the system"},null,512),[[re,o.value]]),r(X,{message:h.value.lateReason,class:"mt-2"},null,8,["message"])])])):_("",!0),e("div",Qa,[e("div",Za,[(a(!0),i(Z,null,ie(d.value,J=>{var oe,me,Ge,je,Be;return a(),i("div",{key:J.value,class:q(["p-4 rounded-xl border cursor-pointer transition-all duration-200 ease-in-out",{"bg-indigo-50 border-indigo-500 shadow-lg":n.value===J.value,"bg-white border-gray-200 hover:border-indigo-400 hover:shadow-md":n.value!==J.value,"border-red-400 bg-red-50":h.value[J.value],"opacity-70":J.isPast}]),onClick:xe=>z(J.value)},[e("div",el,[e("div",tl,[e("div",{class:q(["text-lg font-bold",{"text-indigo-600":n.value===J.value,"text-gray-800":n.value!==J.value}])},G(J.day),3),e("div",al,G(J.label.split(", ")[1]),1)]),(me=(oe=v.value[J.value])==null?void 0:oe.timeSlots[0])!=null&&me.start_time&&((je=(Ge=v.value[J.value])==null?void 0:Ge.timeSlots[0])!=null&&je.end_time)||(Be=v.value[J.value])!=null&&Be.reason?(a(),i("span",{key:0,class:q(["inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium",{"bg-emerald-100 text-emerald-800":v.value[J.value].isAvailable,"bg-amber-100 text-amber-800":!v.value[J.value].isAvailable}])},[v.value[J.value].isAvailable?(a(),i("span",ll,"Available")):(a(),i("span",sl,"Unavailable"))],2)):(a(),i("span",ol," Not Set "))])],10,Xa)}),128))]),n.value?(a(),i("div",il,[e("h3",nl," Availability for "+G((Q=d.value.find(J=>J.value===n.value))==null?void 0:Q.label),1),e("div",rl,[e("button",{type:"button",onClick:V,disabled:!j.value,class:q([{"opacity-50 cursor-not-allowed":!j.value},"text-indigo-600 hover:text-indigo-800 transition duration-150 ease-in-out"])},C[11]||(C[11]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 inline mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{d:"M7 9a2 2 0 012-2h6a2 2 0 012 2v6a2 2 0 01-2 2H9a2 2 0 01-2-2V9z"}),e("path",{d:"M5 3a2 2 0 00-2 2v6a2 2 0 002 2V5h8a2 2 0 00-2-2H5z"})],-1),A(" Apply to all days ",-1)]),10,ul)]),e("div",dl,[C[13]||(C[13]=e("span",{class:"text-sm font-medium text-gray-700"},"I am available on this day",-1)),e("label",cl,[e("input",{type:"checkbox",checked:$.value.isAvailable,onChange:C[1]||(C[1]=J=>P(J.target.checked)),class:"sr-only peer"},null,40,ml),C[12]||(C[12]=e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"},null,-1))])]),r(X,{message:(ue=h.value[n.value])==null?void 0:ue.general,class:"mt-2"},null,8,["message"]),$.value.isAvailable?(a(),i("div",vl,[r(O,{value:"Available Time Slots",class:"text-gray-800 mb-2"}),r(X,{message:(ee=h.value[n.value])==null?void 0:ee.timeSlots,class:"mt-2 mb-4"},null,8,["message"]),(a(!0),i(Z,null,ie($.value.timeSlots,(J,oe)=>(a(),i("div",{key:oe,class:"flex items-center space-x-2 mb-4"},[e("div",pl,[U(e("input",{type:"time","onUpdate:modelValue":me=>v.value[n.value].timeSlots[oe].start_time=me,onChange:C[2]||(C[2]=me=>v.value[n.value].isSelected=!0),class:"block w-full rounded-md border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 shadow-sm"},null,40,fl),[[re,v.value[n.value].timeSlots[oe].start_time]])]),C[15]||(C[15]=e("span",{class:"text-gray-500"},"-",-1)),e("div",gl,[U(e("input",{type:"time","onUpdate:modelValue":me=>v.value[n.value].timeSlots[oe].end_time=me,onChange:C[3]||(C[3]=me=>v.value[n.value].isSelected=!0),class:"block w-full rounded-md border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 shadow-sm"},null,40,bl),[[re,v.value[n.value].timeSlots[oe].end_time]])]),v.value[n.value].timeSlots.length>1?(a(),i("button",{key:0,type:"button",onClick:me=>H(oe),class:"p-2 text-red-600 hover:text-red-800 transition duration-150 ease-in-out"},C[14]||(C[14]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm6 0a1 1 0 012 0v6a1 1 0 11-2 0V8z","clip-rule":"evenodd"})],-1)]),8,yl)):_("",!0)]))),128)),e("button",{type:"button",onClick:L,class:"mt-2 w-full flex items-center justify-center px-4 py-2 border border-dashed border-indigo-300 rounded-lg text-indigo-600 hover:bg-indigo-50 transition duration-150 ease-in-out"},C[16]||(C[16]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z","clip-rule":"evenodd"})],-1),A(" Add Another Time Slot ",-1)]))])):(a(),i("div",hl,[r(O,{value:"Reason for Not Available",class:"text-gray-800 mb-2"}),U(e("textarea",{"onUpdate:modelValue":C[4]||(C[4]=J=>v.value[n.value].reason=J),onInput:C[5]||(C[5]=J=>v.value[n.value].isSelected=!0),rows:"3",class:"block w-full rounded-md border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 shadow-sm",placeholder:"e.g., Out of office, Holiday, Meeting all day"},null,544),[[re,v.value[n.value].reason]]),r(X,{message:(se=h.value[n.value])==null?void 0:se.reason,class:"mt-2"},null,8,["message"])]))])):(a(),i("div",kl,C[17]||(C[17]=[e("p",{class:"text-gray-500 text-lg font-medium"}," Please select a day from the left to set your availability. ",-1)])))])]),e("div",xl,[r(Fe,{onClick:C[6]||(C[6]=J=>D.$emit("close"))},{default:k(()=>C[19]||(C[19]=[A(" Cancel ",-1)])),_:1,__:[19]}),r(ve,{onClick:K,disabled:c.value||!x.value,class:q({"opacity-50 cursor-not-allowed":c.value||!x.value})},{default:k(()=>[c.value?(a(),i("span",wl,C[20]||(C[20]=[e("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),A(" Saving... ",-1)]))):(a(),i("span",_l,"Save Availability"))]),_:1},8,["disabled","class"])])]}),_:1},8,["show"]))}},Tl={key:0,class:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center"},Ml={class:"bg-white rounded-lg shadow-xl p-6 max-w-lg w-full mx-4"},$l={class:"mb-4 text-gray-700"},Cl={class:"flex justify-center"},Sl={__name:"AvailabilityBlocker",setup(u){const g=T(!1),m=T(!0),s=T(!1),t=T(!0),p=T(!0),v=T(!1),h=W(()=>{var b;return((b=Ye().props.auth.user)==null?void 0:b.id)||null}),c=()=>{const b=localStorage.getItem("authToken");b&&!ne.defaults.headers.common.Authorization&&(ne.defaults.headers.common.Authorization=`Bearer ${b}`)},n=async()=>{m.value=!0;try{c();const{data:b}=await ne.get("/api/availability-prompt");g.value=!!b.should_block_user,t.value=!!b.all_current_weekdays_covered,p.value=!!(b.all_next_weekdays_covered??b.all_weekdays_covered),v.value=!!b.is_friday_onwards,localStorage.setItem("shouldBlockUser",String(g.value)),localStorage.setItem("allCurrentWeekdaysCovered",String(t.value)),localStorage.setItem("allNextWeekdaysCovered",String(p.value)),localStorage.setItem("allWeekdaysCovered",String(p.value));const I=new CustomEvent("availability-status-updated",{detail:{shouldBlockUser:g.value,allCurrentWeekdaysCovered:t.value,allNextWeekdaysCovered:p.value}});window.dispatchEvent(I)}catch(b){console.error("Error checking if user should be blocked:",b),g.value=!1}finally{m.value=!1}},o=()=>{s.value=!0},l=()=>{n()},d=b=>{g.value=!!b.detail.shouldBlockUser,"allCurrentWeekdaysCovered"in b.detail&&(t.value=!!b.detail.allCurrentWeekdaysCovered),"allNextWeekdaysCovered"in b.detail&&(p.value=!!b.detail.allNextWeekdaysCovered)},f=()=>{document.visibilityState==="visible"&&Ie(()=>{n()})},M=b=>{["shouldBlockUser","allWeekdaysCovered","allCurrentWeekdaysCovered","allNextWeekdaysCovered"].includes(b.key)&&Ie(()=>{n()})};return ke(()=>{n(),window.addEventListener("availability-status-updated",d),document.addEventListener("visibilitychange",f),window.addEventListener("storage",M)}),lt(()=>{window.removeEventListener("availability-status-updated",d),document.removeEventListener("visibilitychange",f),window.removeEventListener("storage",M)}),(b,I)=>g.value&&!m.value?(a(),i("div",Tl,[e("div",Ml,[I[2]||(I[2]=tt('<div class="flex items-center mb-4"><div class="flex-shrink-0 mr-3"><svg class="h-8 w-8 text-red-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg></div><h2 class="text-xl font-bold text-gray-900">Action Required</h2></div>',1)),e("p",$l,[!t.value&&!p.value?(a(),i(Z,{key:0},[A(" You need to submit your availability for the current week (up to today) and for all weekdays of next week. ")],64)):t.value?(a(),i(Z,{key:2},[A(" You must submit your availability for all weekdays of next week before you can continue using the application. ")],64)):(a(),i(Z,{key:1},[A(" You need to submit your availability for the current week (up to today). ")],64))]),I[3]||(I[3]=e("p",{class:"mb-6 text-gray-600"}," This information is required for planning meetings and work schedules. ",-1)),e("div",Cl,[r(ve,{onClick:o,class:"bg-red-600 hover:bg-red-700"},{default:k(()=>I[1]||(I[1]=[A(" Submit Availability Now ",-1)])),_:1,__:[1]})]),r(Al,{show:s.value,userId:h.value,onClose:I[0]||(I[0]=E=>s.value=!1),onAvailabilitySaved:l},null,8,["show","userId"])])])):_("",!0)}},Gl={class:"relative"},jl={class:"flex flex-wrap items-center gap-2 mb-2 p-2 border border-gray-300 rounded-lg bg-white min-h-[44px] focus-within:border-indigo-500 focus-within:ring-1 focus-within:ring-indigo-500 transition-all duration-150"},Pl=["onClick"],El={key:0,class:"absolute z-20 w-full bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto mt-1 transform-gpu"},Il=["onClick"],Vl={key:1,class:"px-4 py-2 text-sm text-gray-500"},Dl={key:2,class:"px-4 py-2 text-sm text-gray-500"},Bl={__name:"TagInput",props:{modelValue:{type:Array,default:()=>[]},label:{type:String,default:"Tags"},placeholder:{type:String,default:"Add tags..."},error:{type:String,default:""},initialTags:{type:Array,default:()=>[]},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(u,{emit:g}){const m=u,s=g,t=T(""),p=T([]),v=T([]),h=T(!1),c=T(null);function n(){s("update:modelValue",v.value.map(E=>E.id))}le(()=>m.initialTags,E=>{if(v.value=[],E&&E.length>0){const z=[],L=new Set;E.forEach(H=>{L.has(H.id)||(z.push(H),L.add(H.id))}),v.value.push(...z)}const $=E.map(z=>z.id),x=Array.isArray(m.modelValue)?m.modelValue:[];($.length!==x.length||$.some(z=>!x.includes(z))||x.some(z=>!$.includes(z)))&&n()},{immediate:!0});const o=ga(async E=>{if(E.length<2){p.value=[],h.value=!1;return}try{const $=await ne.get(`/api/tags/search?query=${E}`);p.value=$.data,h.value=!0}catch($){console.error("Error fetching tags:",$),p.value=[],h.value=!1}},300);le(t,E=>{m.disabled||o(E)});const l=E=>{v.value.some($=>$.id===E.id)||(v.value.push(E),t.value="",p.value=[],h.value=!1,n()),Ie(()=>c.value.focus())},d=()=>{if(m.disabled)return;const E=t.value.trim();if(!E)return;const $=p.value.find(j=>j.name.toLowerCase()===E.toLowerCase()),x=v.value.some(j=>j.name.toLowerCase()===E.toLowerCase());if($)l($);else if(x)t.value="",p.value=[],h.value=!1;else{const j={id:`new_${E.replace(/\s+/g,"-").toLowerCase()}_${Date.now()}`,name:E};v.value.push(j),t.value="",p.value=[],h.value=!1,n()}Ie(()=>c.value.focus())},f=E=>{m.disabled||(v.value=v.value.filter($=>$.id!==E.id),n(),Ie(()=>c.value.focus()))},M=()=>{m.disabled||t.value===""&&v.value.length>0&&f(v.value[v.value.length-1])},b=W(()=>p.value.filter(E=>!v.value.some($=>$.id===E.id))),I=E=>{c.value&&!c.value.$el.contains(E.target)&&(h.value=!1,t.value="")};return ke(()=>{document.addEventListener("click",I)}),lt(()=>{document.removeEventListener("click",I)}),(E,$)=>(a(),i("div",Gl,[r(O,{value:u.label,class:"mb-1"},null,8,["value"]),e("div",jl,[(a(!0),i(Z,null,ie(v.value,x=>(a(),i("span",{key:x.id,class:"inline-flex items-center px-3 py-1 text-sm font-medium bg-indigo-100 text-indigo-800 rounded-full shadow-sm"},[A(G(x.name)+" ",1),u.disabled?_("",!0):(a(),i("button",{key:0,type:"button",onClick:j=>f(x),class:"ml-2 -mr-1 text-indigo-500 hover:text-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 rounded-full p-0.5"},$[3]||($[3]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,Pl))]))),128)),r(ge,{ref_key:"inputRef",ref:c,type:"text",placeholder:v.value.length===0?u.placeholder:"",modelValue:t.value,"onUpdate:modelValue":$[0]||($[0]=x=>t.value=x),onFocus:$[1]||($[1]=x=>h.value=!0),onKeydown:[We(Pt(d,["prevent"]),["enter"]),$[2]||($[2]=We(x=>h.value=!1,["tab"])),We(M,["delete"])],class:"flex-grow min-w-[100px] border-none focus:ring-0 shadow-none p-0 bg-transparent text-gray-900",disabled:u.disabled},null,8,["placeholder","modelValue","onKeydown","disabled"])]),h.value&&(b.value.length>0||t.value.length>=2||b.value.length===0&&t.value.length<2)&&!u.disabled?(a(),i("div",El,[(a(!0),i(Z,null,ie(b.value,x=>(a(),i("div",{key:x.id,onClick:j=>l(x),class:"px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 cursor-pointer transition-colors duration-100"},G(x.name),9,Il))),128)),!p.value.some(x=>x.name.toLowerCase()===t.value.toLowerCase())&&t.value.length>=2?(a(),i("div",{key:0,onClick:d,class:"px-4 py-2 text-sm text-indigo-700 bg-indigo-50 hover:bg-indigo-100 cursor-pointer border-t border-indigo-200 font-semibold transition-colors duration-100"},' Add new tag: "'+G(t.value)+'" ',1)):_("",!0),b.value.length===0&&t.value.length<2?(a(),i("div",Vl," Type at least 2 characters to search for tags. ")):_("",!0),b.value.length===0&&t.value.length>=2&&!p.value.some(x=>x.name.toLowerCase()===t.value.toLowerCase())?(a(),i("div",Dl,[$[4]||($[4]=A(" No matching tags found. Press ",-1)),$[5]||($[5]=e("span",{class:"font-semibold text-indigo-600"},"Enter",-1)),A(' to add "'+G(t.value)+'" as a new tag. ',1)])):_("",!0)])):_("",!0),r(X,{message:u.error,class:"mt-2"},null,8,["message"])]))}},Dt=Qe(Bl,[["__scopeId","data-v-4d528a4c"]]),Nl={class:"space-y-4"},Ul="Add New Milestone",Fl="/api/milestones",zl="post",Ll="Create Milestone",Rl="Milestone created successfully!",Ol={__name:"MilestoneFormModal",props:{show:Boolean,projectId:Number},emits:["close","saved"],setup(u,{emit:g}){const m=u,s=g,t=Se({name:"",description:"",completion_date:null,status:"Not Started",project_id:m.projectId}),p=Se({completion_date:null}),v=["Not Started","In Progress","Completed","Overdue"];le(()=>m.show,o=>{o&&(Object.assign(t,{name:"",description:"",completion_date:null,status:"Not Started",project_id:m.projectId}),p.completion_date=null)},{immediate:!0});const h=()=>(p.completion_date=null,t.completion_date?!0:(p.completion_date=["Completion date is required."],!1)),c=o=>{s("saved",o),s("close")},n=()=>{s("close")};return(o,l)=>(a(),B(De,{show:u.show,title:Ul,"api-endpoint":Fl,"http-method":zl,"form-data":t,"submit-button-text":Ll,"success-message":Rl,"before-submit":h,onClose:n,onSubmitted:c},{default:k(({errors:d})=>[e("div",Nl,[e("div",null,[r(O,{for:"milestone-name",value:"Milestone Name"}),r(ge,{id:"milestone-name",modelValue:t.name,"onUpdate:modelValue":l[0]||(l[0]=f=>t.name=f),type:"text",class:"mt-1 block w-full",placeholder:"Enter milestone name",required:""},null,8,["modelValue"]),r(X,{message:d.name?d.name[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[r(O,{for:"milestone-description",value:"Description"}),U(e("textarea",{id:"milestone-description","onUpdate:modelValue":l[1]||(l[1]=f=>t.description=f),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",rows:"3",placeholder:"Enter milestone description"},null,512),[[re,t.description]]),r(X,{message:d.description?d.description[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[r(O,{for:"milestone-completion-date",value:"Completion Date"}),r(ge,{id:"milestone-completion-date",modelValue:t.completion_date,"onUpdate:modelValue":l[2]||(l[2]=f=>t.completion_date=f),type:"date",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),r(X,{message:d.completion_date?d.completion_date[0]:p.completion_date?p.completion_date[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[r(O,{for:"milestone-status",value:"Status"}),r(be,{id:"milestone-status",modelValue:t.status,"onUpdate:modelValue":l[3]||(l[3]=f=>t.status=f),options:v.map(f=>({value:f,label:f})),"value-key":"value","label-key":"label",placeholder:"Select status",class:"mt-1"},null,8,["modelValue","options"]),r(X,{message:d.status?d.status[0]:"",class:"mt-2"},null,8,["message"])])])]),_:1},8,["show","form-data"]))}};function Bt(u,g){return a(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z"})])}const ql={class:"space-y-6 text-sm text-gray-700"},Wl={class:"flex justify-center bg-gray-100 p-1 rounded-lg mb-4"},Hl={class:"border-t pt-4"},Kl={class:"space-y-4"},Jl={class:"flex gap-2"},Yl={class:"bg-gray-900 text-white p-4 rounded-lg text-center mt-4"},Ql={class:"text-4xl font-bold text-indigo-400"},Zl={class:"border-t pt-4"},Xl={class:"space-y-4"},es=["value"],ts={class:"bg-gray-900 text-white p-4 rounded-lg text-center mt-4"},as={class:"text-4xl font-bold text-blue-400"},Nt={__name:"EffortEstimationGuide",setup(u){const g=T("developer"),m=T(1),s=T(1),t=W(()=>{if(g.value==="admin"){const n=p.value;return n===1?1:n===2?2:n===3?3:5}const h=m.value*s.value;return[1,2,3,5,8,13].reduce((n,o)=>Math.abs(o-h)<Math.abs(n-h)?o:n)}),p=T(1),v=[{value:1,label:"Quick Task / Reply (< 1 hr)"},{value:2,label:"Routine / Notes (1-2 hrs)"},{value:3,label:"Half Day / Focus (3-4 hrs)"},{value:4,label:"Full Day / Complex (5+ hrs)"}];return(h,c)=>(a(),i("div",ql,[e("div",Wl,[e("button",{onClick:c[0]||(c[0]=n=>g.value="developer"),class:q(["flex-1 py-1 text-xs font-semibold rounded-md transition-colors",g.value==="developer"?"bg-white text-indigo-600 shadow-sm":"text-gray-500 hover:text-gray-700"])}," Developer ",2),e("button",{onClick:c[1]||(c[1]=n=>g.value="admin"),class:q(["flex-1 py-1 text-xs font-semibold rounded-md transition-colors",g.value==="admin"?"bg-white text-indigo-600 shadow-sm":"text-gray-500 hover:text-gray-700"])}," Admin / Staff ",2)]),g.value==="developer"?(a(),i(Z,{key:0},[c[12]||(c[12]=tt('<section><h4 class="font-bold text-gray-900 text-lg mb-2">What are Story Points?</h4><p class="mb-2">Story points estimate the <span class="font-semibold">effort</span> required to implement a task. They consider:</p><ul class="list-disc pl-5 space-y-1"><li><span class="font-semibold">Complexity:</span> How difficult is the logic?</li><li><span class="font-semibold">Risk:</span> How much uncertainty is there?</li><li><span class="font-semibold">Repetition:</span> How tedious is the work?</li></ul></section><section class="bg-indigo-50 p-4 rounded-lg border border-indigo-100"><h4 class="font-bold text-indigo-900 text-md mb-3">Quick Reference</h4><div class="grid grid-cols-1 gap-3"><div class="flex gap-3 items-start border-b border-indigo-200 pb-2"><span class="bg-indigo-600 text-white font-bold w-8 h-8 flex items-center justify-center rounded-full shrink-0">1</span><div><span class="font-bold block text-indigo-900">Tiny / Trivial</span><span class="text-xs">Typo fix, color change, simple config. &lt; 1 hour.</span></div></div><div class="flex gap-3 items-start border-b border-indigo-200 pb-2"><span class="bg-indigo-600 text-white font-bold w-8 h-8 flex items-center justify-center rounded-full shrink-0">2</span><div><span class="font-bold block text-indigo-900">Small / Routine</span><span class="text-xs">Add field, update text, standard bug fix. 1-4 hours.</span></div></div><div class="flex gap-3 items-start border-b border-indigo-200 pb-2"><span class="bg-indigo-600 text-white font-bold w-8 h-8 flex items-center justify-center rounded-full shrink-0">3</span><div><span class="font-bold block text-indigo-900">Medium</span><span class="text-xs">New simple feature, standard page dev, component logic. 4-8 hours (1 day).</span></div></div><div class="flex gap-3 items-start border-b border-indigo-200 pb-2"><span class="bg-indigo-600 text-white font-bold w-8 h-8 flex items-center justify-center rounded-full shrink-0">5</span><div><span class="font-bold block text-indigo-900">Large</span><span class="text-xs">Complex feature, integration, heavy logic. 2-3 days.</span></div></div><div class="flex gap-3 items-start"><span class="bg-yellow-600 text-white font-bold w-8 h-8 flex items-center justify-center rounded-full shrink-0">8+</span><div><span class="font-bold block text-yellow-900">Ex-Large (Break Down!)</span><span class="text-xs">Full module, major refactor. Consider splitting into smaller subtasks. 3-5+ days.</span></div></div></div></section>',2)),e("section",Hl,[c[11]||(c[11]=e("h4",{class:"font-bold text-gray-900 text-md mb-3"},"Estimation Calculator",-1)),e("div",Kl,[e("div",null,[c[7]||(c[7]=e("label",{class:"block text-xs font-semibold text-gray-600 mb-1"},"Difficulty (1-5)",-1)),U(e("input",{type:"range",min:"1",max:"5","onUpdate:modelValue":c[2]||(c[2]=n=>m.value=n),class:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"},null,512),[[re,m.value,void 0,{number:!0}]]),c[8]||(c[8]=e("div",{class:"flex justify-between text-xs text-gray-500 mt-1"},[e("span",null,"Easy"),e("span",null,"Expert")],-1))]),e("div",null,[c[9]||(c[9]=e("label",{class:"block text-xs font-semibold text-gray-600 mb-1"},"Scope/Uncertainty (1-3)",-1)),e("div",Jl,[e("button",{onClick:c[3]||(c[3]=n=>s.value=1),class:q([s.value===1?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700","flex-1 py-1 rounded text-xs"])},"Clear",2),e("button",{onClick:c[4]||(c[4]=n=>s.value=2),class:q([s.value===2?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700","flex-1 py-1 rounded text-xs"])},"Vague",2),e("button",{onClick:c[5]||(c[5]=n=>s.value=3),class:q([s.value===3?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700","flex-1 py-1 rounded text-xs"])},"Unknown",2)])]),e("div",Yl,[c[10]||(c[10]=e("div",{class:"text-xs uppercase tracking-wide text-gray-400"},"Suggested Points",-1)),e("div",Ql,G(t.value),1)])])])],64)):(a(),i(Z,{key:1},[c[16]||(c[16]=tt('<section><h4 class="font-bold text-gray-900 text-lg mb-2">Admin / Staff Points</h4><p class="mb-2">For non-technical tasks, use <span class="font-semibold">Time &amp; Volume</span> to estimate points.</p></section><section class="bg-blue-50 p-4 rounded-lg border border-blue-100"><h4 class="font-bold text-blue-900 text-md mb-3">Reference Table</h4><div class="grid grid-cols-1 gap-3"><div class="flex gap-3 items-start border-b border-blue-200 pb-2"><span class="bg-blue-600 text-white font-bold w-12 h-6 flex items-center justify-center rounded px-2 text-xs shrink-0">1 pt</span><div><span class="font-bold block text-blue-900">Quick Task</span><span class="text-xs">Replies, emails, simple checks. &lt; 1 hour.</span></div></div><div class="flex gap-3 items-start border-b border-blue-200 pb-2"><span class="bg-blue-600 text-white font-bold w-12 h-6 flex items-center justify-center rounded px-2 text-xs shrink-0">2 pts</span><div><span class="font-bold block text-blue-900">Routine Task</span><span class="text-xs">Meeting minutes, detailed responses. 1-2 hours.</span></div></div><div class="flex gap-3 items-start border-b border-blue-200 pb-2"><span class="bg-blue-600 text-white font-bold w-12 h-6 flex items-center justify-center rounded px-2 text-xs shrink-0">3 pts</span><div><span class="font-bold block text-blue-900">Half Day</span><span class="text-xs">Deep focus admin work, organization. 3-4 hours.</span></div></div><div class="flex gap-3 items-start"><span class="bg-blue-600 text-white font-bold w-12 h-6 flex items-center justify-center rounded px-2 text-xs shrink-0">5 pts</span><div><span class="font-bold block text-blue-900">Full Day</span><span class="text-xs">Complex analysis, long meetings/planning. 5+ hours.</span></div></div></div></section>',2)),e("section",Zl,[c[15]||(c[15]=e("h4",{class:"font-bold text-gray-900 text-md mb-3"},"Calculator",-1)),e("div",Xl,[e("div",null,[c[13]||(c[13]=e("label",{class:"block text-xs font-semibold text-gray-600 mb-1"},"Task Type / Volume",-1)),U(e("select",{"onUpdate:modelValue":c[6]||(c[6]=n=>p.value=n),class:"w-full rounded-md border-gray-300 text-sm focus:border-indigo-500 focus:ring-indigo-500"},[(a(),i(Z,null,ie(v,n=>e("option",{key:n.value,value:n.value},G(n.label),9,es)),64))],512),[[He,p.value,void 0,{number:!0}]])]),e("div",ts,[c[14]||(c[14]=e("div",{class:"text-xs uppercase tracking-wide text-gray-400"},"Suggested Points",-1)),e("div",as,G(t.value),1)])])])],64))]))}},ls={class:"p-4 sm:p-6"},ss={class:"flex items-center justify-between mb-4"},os={class:"text-lg font-medium text-gray-900"},is={class:"space-y-6"},ns={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},rs={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},us={key:0},ds=["min"],cs={key:1},ms=["min"],vs={key:2,class:"md:col-span-2"},ps={class:"mt-2 flex flex-wrap gap-2"},fs=["value"],gs={class:"ml-2 text-sm"},bs={class:"flex gap-2"},ys=["value"],hs=["value"],ks={key:5,class:"md:col-span-2"},xs={class:"p-3 rounded-md bg-gray-50 border border-gray-200 text-sm text-gray-800"},ws={class:"flex items-center justify-end gap-3"},_s={__name:"SchedulePickerModal",props:{show:{type:Boolean,default:!1},title:{type:String,default:"Schedule"},initial:{type:Object,default:()=>({})}},emits:["close","save"],setup(u,{emit:g}){function m(l=new Date){const d=$=>String($).padStart(2,"0"),f=l.getFullYear(),M=d(l.getMonth()+1),b=d(l.getDate()),I=d(l.getHours()),E=d(l.getMinutes());return`${f}-${M}-${b}T${I}:${E}`}const s=u,t=g,p=T({name:"",description:"",start_at:m(new Date),end_at:"",mode:"once",time:new Date().toTimeString().slice(0,5),days_of_week:[],day_of_month:null,nth:1,dow_for_monthly:1,month:1,cron:""});le(()=>s.show,l=>{l&&(p.value={name:s.initial.name||"",description:s.initial.description||"",start_at:s.initial.start_at||m(new Date),end_at:s.initial.end_at||"",mode:s.initial.mode||"once",time:s.initial.time||new Date().toTimeString().slice(0,5),days_of_week:s.initial.days_of_week||[],day_of_month:s.initial.day_of_month||null,nth:s.initial.nth||1,dow_for_monthly:s.initial.dow_for_monthly||1,month:s.initial.month||1,cron:s.initial.cron||""})});const v=[{value:"once",label:"Once"},{value:"daily",label:"Daily"},{value:"weekly",label:"Weekly"},{value:"monthly",label:"Monthly"},{value:"yearly",label:"Yearly"},{value:"cron",label:"Custom cron"}],h=W(()=>m(new Date)),c=W(()=>p.value.start_at||h.value),n=W(()=>{var f,M;const l=p.value,d=l.time||"00:00";switch(l.mode){case"once":return`One-time at ${(f=l.start_at)==null?void 0:f.replace("T"," ")} (deactivates after run)`;case"daily":return`Daily at ${d}`;case"weekly":if(!((M=l.days_of_week)!=null&&M.length))return`Weekly at ${d}`;const b=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return`Weekly on ${l.days_of_week.map($=>b[$]).join(", ")} at ${d}`;case"monthly":return l.day_of_month?`Monthly on day ${l.day_of_month} at ${d}`:`Monthly on the ${["First","Second","Third","Fourth","Fifth"][l.nth-1]} ${["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][l.dow_for_monthly]} at ${d}`;case"yearly":return`Yearly on ${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][(l.month||1)-1]} ${l.day_of_month||1} at ${d}`;case"cron":return`Custom cron: ${l.cron||"* * * * *"}`}});function o(){t("save",{...p.value})}return(l,d)=>(a(),B(Ve,{show:u.show,onClose:d[15]||(d[15]=()=>t("close"))},{default:k(()=>[e("div",ls,[e("div",ss,[e("h3",os,G(u.title),1),e("button",{onClick:d[0]||(d[0]=()=>t("close")),class:"text-gray-500 hover:text-gray-700"},"âœ•")]),e("div",is,[e("section",null,[e("div",ns,[e("div",null,[r(O,{value:"Schedule Name"}),U(e("input",{"onUpdate:modelValue":d[1]||(d[1]=f=>p.value.name=f),type:"text",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",placeholder:"e.g., Weekly reminder"},null,512),[[re,p.value.name]])]),e("div",null,[r(O,{value:"Description (optional)"}),U(e("input",{"onUpdate:modelValue":d[2]||(d[2]=f=>p.value.description=f),type:"text",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[re,p.value.description]])])])]),e("section",null,[e("div",rs,[e("div",null,[r(O,{value:"Run"}),r(be,{modelValue:p.value.mode,"onUpdate:modelValue":d[3]||(d[3]=f=>p.value.mode=f),options:v,placeholder:"Select frequency..."},null,8,["modelValue"])]),p.value.mode!=="cron"&&p.value.mode!=="once"?(a(),i("div",us,[r(O,{value:"Time"}),U(e("input",{"onUpdate:modelValue":d[4]||(d[4]=f=>p.value.time=f),type:"time",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[re,p.value.time]])])):_("",!0),e("div",null,[r(O,{value:"Start at"}),U(e("input",{"onUpdate:modelValue":d[5]||(d[5]=f=>p.value.start_at=f),type:"datetime-local",min:h.value,class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,8,ds),[[re,p.value.start_at]])]),p.value.mode!=="once"?(a(),i("div",cs,[r(O,{value:"End at (optional)"}),U(e("input",{"onUpdate:modelValue":d[6]||(d[6]=f=>p.value.end_at=f),type:"datetime-local",min:c.value,class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,8,ms),[[re,p.value.end_at]])])):_("",!0),p.value.mode==="weekly"?(a(),i("div",vs,[r(O,{value:"Days of the week"}),e("div",ps,[(a(),i(Z,null,ie(7,f=>e("label",{key:f-1,class:"inline-flex items-center"},[U(e("input",{class:"rounded border-gray-300 text-indigo-600 shadow-sm focus:ring-indigo-500",type:"checkbox",value:f-1,"onUpdate:modelValue":d[7]||(d[7]=M=>p.value.days_of_week=M)},null,8,fs),[[mt,p.value.days_of_week]]),e("span",gs,G(["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][f-1]),1)])),64))])])):_("",!0),p.value.mode==="monthly"?(a(),i(Z,{key:3},[e("div",null,[r(O,{value:"Day of month"}),U(e("input",{"onUpdate:modelValue":d[8]||(d[8]=f=>p.value.day_of_month=f),type:"number",min:"1",max:"31",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",placeholder:"e.g., 15"},null,512),[[re,p.value.day_of_month,void 0,{number:!0}]])]),e("div",null,[r(O,{value:"Or: Nth weekday"}),e("div",bs,[U(e("select",{"onUpdate:modelValue":d[9]||(d[9]=f=>p.value.nth=f),class:"mt-1 block w-1/2 rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},d[16]||(d[16]=[e("option",{value:1},"First",-1),e("option",{value:2},"Second",-1),e("option",{value:3},"Third",-1),e("option",{value:4},"Fourth",-1),e("option",{value:5},"Fifth",-1)]),512),[[He,p.value.nth,void 0,{number:!0}]]),U(e("select",{"onUpdate:modelValue":d[10]||(d[10]=f=>p.value.dow_for_monthly=f),class:"mt-1 block w-1/2 rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[(a(),i(Z,null,ie(7,f=>e("option",{key:f-1,value:f-1},G(["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][f-1]),9,ys)),64))],512),[[He,p.value.dow_for_monthly,void 0,{number:!0}]])])])],64)):_("",!0),p.value.mode==="yearly"?(a(),i(Z,{key:4},[e("div",null,[r(O,{value:"Month"}),U(e("select",{"onUpdate:modelValue":d[11]||(d[11]=f=>p.value.month=f),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[(a(),i(Z,null,ie(12,f=>e("option",{key:f,value:f},G(["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][f-1]),9,hs)),64))],512),[[He,p.value.month,void 0,{number:!0}]])]),e("div",null,[r(O,{value:"Day of month"}),U(e("input",{"onUpdate:modelValue":d[12]||(d[12]=f=>p.value.day_of_month=f),type:"number",min:"1",max:"31",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[re,p.value.day_of_month,void 0,{number:!0}]])])],64)):_("",!0),p.value.mode==="cron"?(a(),i("div",ks,[r(O,{value:"Cron expression"}),U(e("input",{"onUpdate:modelValue":d[13]||(d[13]=f=>p.value.cron=f),type:"text",placeholder:"* * * * *",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[re,p.value.cron]])])):_("",!0)])]),e("section",null,[e("div",xs,G(n.value),1),d[17]||(d[17]=e("p",{class:"text-[11px] text-gray-500 mt-1"},"Times are entered in your local timezone; they will be stored in the app timezone.",-1))]),e("div",ws,[e("button",{onClick:d[14]||(d[14]=()=>t("close")),class:"px-4 py-2 rounded-md border border-gray-300 text-gray-700 bg-white hover:bg-gray-50"},"Cancel"),e("button",{onClick:o,class:"inline-flex items-center rounded-md bg-indigo-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500"},"Save")])])])]),_:1},8,["show"]))}};function As(){const u=T(!1),g=T(null);function m(){u.value=!0}function s(){u.value=!1}function t(v){g.value={...v},u.value=!1}async function p(v,h){var c,n;if(!g.value)return null;try{const o={...g.value,scheduled_item_type:v,scheduled_item_id:h},{data:l}=await window.axios.post("/api/schedules",o);return ye("Schedule created"),g.value=null,l}catch(o){return console.error("Failed to create schedule",o),ce(((n=(c=o==null?void 0:o.response)==null?void 0:c.data)==null?void 0:n.message)||"Failed to create schedule"),null}}return{showScheduleModal:u,scheduleDraft:g,open:m,close:s,onSaveDraft:t,attachAfterCreate:p}}const Ts={key:0,class:"mb-4"},Ms={key:1,class:"flex flex-col md:flex-row md:gap-8"},$s={class:"flex-grow flex flex-col space-y-4"},Cs={key:0,class:"flex-grow flex flex-col"},Ss={key:0,class:"text-xs text-gray-500 mt-1"},Gs={class:"w-full md:w-72 flex-shrink-0 mt-6 md:mt-0 space-y-5"},js={key:0},Ps={class:"space-y-5"},Es={class:"flex items-center gap-3"},Is={class:"flex-grow flex items-center gap-2"},Vs=["disabled"],Ds={class:"flex items-center gap-3"},Bs={key:0,class:"mt-5 flex items-center gap-3"},Ns={key:1,class:"mt-5 flex items-center gap-3"},Us={key:2,class:"mt-5 flex items-center gap-3"},Fs={key:3,class:"mt-5 space-y-2"},zs={class:"flex items-center justify-between rounded-md bg-gray-100 p-1"},Ls={key:4,class:"mt-5 space-y-2"},Rs={class:"flex items-center justify-between"},Os={key:2,class:"mt-6 border-t pt-4"},qs={class:"space-y-4 mb-4"},Ws={key:0},Hs={key:1},Ks={key:2,class:"flex items-center"},Js={key:3,class:"flex items-center"},Ys={key:4,class:"flex items-center justify-between"},Qs={key:0,class:"text-sm text-gray-700"},Zs={key:1,class:"text-sm text-gray-500"},Xs={class:"flex items-center gap-2"},eo={class:"flex items-center gap-2 flex-wrap"},to={class:"p-6"},ao={class:"flex items-center justify-between mb-4"},lo={class:"mt-6 flex justify-end"},so="Create New Task",oo="/api/tasks",io="post",no="Create Task",ro="Task created successfully!",uo={__name:"CreateTaskModal",props:{show:Boolean,projectId:{type:Number,default:null}},emits:["close","saved"],setup(u,{emit:g}){const m=u,s=g,t=Se({name:"",description:"",assigned_to_user_id:null,due_date:null,status:"To Do",task_type_id:null,milestone_id:null,project_id:m.projectId,priority:"medium",needs_approval:!1,requires_qa:!1,effort:null,tags:[],tags_data:[]}),p=T(!1),v=["To Do","In Progress","Done","Blocked","Archived"],h=T([]),c=T([]),n=T([]),o=T([]),l=T(!0),d=T(!1),f=T(!1),M=T(!1),b=T(!1),I=T(!1),E=T(!1),$=T(!1),x=T(!1),j=T(!1),{showScheduleModal:z,scheduleDraft:L,open:H,close:P,onSaveDraft:V,attachAfterCreate:K}=As(),D=W(()=>{const F=L.value;if(!F)return null;const w=F.time||"00:00";switch(F.mode){case"once":return`One-time at ${String(F.start_at||"").replace("T"," ")}`;case"daily":return`Daily at ${w}`;case"weekly":{const te=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return`Weekly on ${(F.days_of_week||[]).map(pe=>te[pe]).join(", ")||"â€”"} at ${w}`}case"monthly":return F.day_of_month?`Monthly on day ${F.day_of_month} at ${w}`:`Monthly on the ${["First","Second","Third","Fourth","Fifth"][(F.nth||1)-1]} ${["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][F.dow_for_monthly||1]} at ${w}`;case"yearly":return`Yearly on ${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][(F.month||1)-1]} ${F.day_of_month||1} at ${w}`;case"cron":return`Custom cron: ${F.cron||"* * * * *"}`}return null}),C=async()=>(L.value?t.schedule={...L.value}:t.schedule&&delete t.schedule,!0);le(()=>m.show,async F=>{F&&(Object.assign(t,{name:"",description:"",assigned_to_user_id:null,due_date:null,status:"To Do",task_type_id:null,milestone_id:null,project_id:m.projectId,priority:"medium",needs_approval:!1,requires_qa:!1,effort:null,tags:[],tags_data:[]}),I.value=!1,E.value=!1,$.value=!1,x.value=!1,j.value=!1,m.projectId?await ue(m.projectId):await Q())},{immediate:!0}),le(()=>t.description,F=>{F.length<10&&(t.milestone_id=null)}),le(()=>t.milestone_id,()=>{t.due_date=null}),le(()=>t.due_date,()=>{t.assigned_to_user_id=null}),le(()=>t.assigned_to_user_id,()=>{t.task_type_id=null}),le(()=>t.task_type_id,()=>{t.priority="medium"}),le(()=>t.project_id,async F=>{F?await ue(F):(c.value=[],n.value=[],o.value=[])});const Q=async()=>{l.value=!0;try{const F=await window.axios.get("/api/projects-simplified");h.value=F.data.map(w=>({value:w.id,label:w.name}))}catch(F){console.error("Error fetching projects:",F),h.value=[]}finally{l.value=!1}},ue=async F=>{if(F){d.value=!0,f.value=!0,M.value=!0;try{const[w,te,R]=await Promise.all([window.axios.get(`/api/projects/${F}/users`),window.axios.get("/api/task-types"),window.axios.get(`/api/projects/${F}/milestones`)]);c.value=w.data.map(pe=>({value:pe.id,label:pe.name})),n.value=te.data.map(pe=>({value:pe.id,label:pe.name})),o.value=R.data}catch(w){console.error("Error fetching associated task data:",w),c.value=[],n.value=[],o.value=[]}finally{d.value=!1,f.value=!1,M.value=!1}}},ee=W(()=>new Date().toISOString().split("T")[0]),se=W(()=>{if(!t.milestone_id)return"";const F=o.value.find(w=>w.id===t.milestone_id);return!F||!F.completion_date?"":F.completion_date.split("T")[0]}),J=T([]),oe=F=>{J.value=Array.from(F.target.files||[])},me=async F=>{if(!J.value.length)return;const w=new FormData;J.value.forEach((te,R)=>w.append(`files[${R}]`,te)),w.append("model_type","Task"),w.append("model_id",F);try{await window.axios.post("/api/files",w,{headers:{"Content-Type":"multipart/form-data"}}),ye("Files uploaded to Google Drive.")}catch(te){console.error("Failed to upload task files",te),ce("Failed to upload files.")}},Ge=async F=>{var w,te,R;try{const pe=(F==null?void 0:F.id)||((w=F==null?void 0:F.task)==null?void 0:w.id)||((te=F==null?void 0:F.data)==null?void 0:te.id);pe&&(await me(pe),!(F!=null&&F.attached_schedule_id||(R=F==null?void 0:F.data)!=null&&R.attached_schedule_id)&&L.value&&await K("task",pe))}finally{L.value=null,s("saved",F),s("close"),J.value=[]}},je=()=>{s("close")},Be=()=>{t.project_id?b.value=!0:alert("Please select a project before adding a milestone.")},xe=F=>{b.value=!1,F&&F.id&&F.name&&(o.value.push(F),t.milestone_id=F.id)},ot=W(()=>c.value),Ne=W(()=>n.value),_e=W(()=>o.value);return(F,w)=>(a(),i(Z,null,[r(De,{show:u.show,title:so,"api-endpoint":oo,"http-method":io,"form-data":t,"submit-button-text":no,"success-message":ro,"before-submit":C,onClose:je,onSubmitted:Ge,"max-width":"4xl"},{default:k(({errors:te})=>[e("div",null,[u.projectId?_("",!0):(a(),i("div",Ts,[r(be,{id:"task-project",modelValue:t.project_id,"onUpdate:modelValue":w[0]||(w[0]=R=>t.project_id=R),options:h.value,"value-key":"value","label-key":"label",placeholder:"Select a project",required:!0},null,8,["modelValue","options"]),r(X,{message:te.project_id?te.project_id[0]:"",class:"mt-2"},null,8,["message"])])),t.project_id?(a(),i("div",Ms,[e("div",$s,[r(ge,{id:"task-name",modelValue:t.name,"onUpdate:modelValue":w[1]||(w[1]=R=>t.name=R),type:"text",class:"block w-full text-xl font-semibold border-gray-200",placeholder:"Task Title",required:""},null,8,["modelValue"]),r(X,{message:te.name?te.name[0]:"",class:"mt-2"},null,8,["message"]),t.name?(a(),i("div",Cs,[U(e("textarea",{id:"task-description","onUpdate:modelValue":w[2]||(w[2]=R=>t.description=R),class:"flex-grow w-full rounded-md border-gray-200 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",placeholder:"Add a description..."},null,512),[[re,t.description]]),r(X,{message:te.description?te.description[0]:"",class:"mt-2"},null,8,["message"]),t.name&&t.description.length<10?(a(),i("p",Ss," Enter at least 10 characters to continue. ")):_("",!0)])):_("",!0)]),e("div",Gs,[t.description.length>=10?(a(),i("div",js,[e("div",Ps,[e("div",Es,[w[28]||(w[28]=e("svg",{class:"h-5 w-5 text-gray-500 flex-shrink-0",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 20.25h12m-7.5-3.75v3.75m.75-12.75l3 3m0 0l3-3m-3 3v11.25m-4.5 0L7.5 21m0 0H6"})],-1)),e("div",Is,[r(be,{id:"task-milestone",modelValue:t.milestone_id,"onUpdate:modelValue":w[3]||(w[3]=R=>t.milestone_id=R),options:_e.value,"value-key":"id","label-key":"name",placeholder:"Select Milestone",class:"flex-grow",required:""},null,8,["modelValue","options"]),e("button",{type:"button",onClick:Be,disabled:!t.project_id||M.value,class:"p-2 text-sm font-medium text-blue-600 bg-blue-50 rounded-md hover:bg-blue-100 disabled:opacity-50",title:"Add New Milestone"},w[27]||(w[27]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4v16m8-8H4"})],-1)]),8,Vs)])]),r(X,{message:te.milestone_id?te.milestone_id[0]:"",class:"mt-2"},null,8,["message"]),e("div",Ds,[w[29]||(w[29]=e("svg",{class:"h-5 w-5 text-gray-500 flex-shrink-0",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 9.563C9 9.252 9.252 9 9.563 9h4.874c.311 0 .563.252.563.563v4.874c0 .311-.252.563-.563.563H9.564A.562.562 0 019 14.437V9.564z"})],-1)),r(be,{id:"task-status",modelValue:t.status,"onUpdate:modelValue":w[4]||(w[4]=R=>t.status=R),options:v.map(R=>({value:R,label:R})),"value-key":"value","label-key":"label",class:"flex-grow"},null,8,["modelValue","options"])])]),t.milestone_id?(a(),i("div",Bs,[w[30]||(w[30]=e("svg",{class:"h-5 w-5 text-gray-500 flex-shrink-0",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5"})],-1)),r(ge,{id:"task-due-date",modelValue:t.due_date,"onUpdate:modelValue":w[5]||(w[5]=R=>t.due_date=R),type:"date",class:"flex-grow",min:ee.value,max:se.value},null,8,["modelValue","min","max"])])):_("",!0),t.due_date?(a(),i("div",Ns,[w[31]||(w[31]=e("svg",{class:"h-5 w-5 text-gray-500 flex-shrink-0",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"})],-1)),r(be,{id:"task-assigned-to",modelValue:t.assigned_to_user_id,"onUpdate:modelValue":w[6]||(w[6]=R=>t.assigned_to_user_id=R),options:ot.value,"value-key":"value","label-key":"label",placeholder:"Unassigned",class:"flex-grow","allow-empty":!0},null,8,["modelValue","options"])])):_("",!0),t.assigned_to_user_id?(a(),i("div",Us,[w[32]||(w[32]=e("svg",{class:"h-5 w-5 text-gray-500 flex-shrink-0",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.568 3H5.25A2.25 2.25 0 003 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 005.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 009.568 3z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 6h.008v.008H6V6z"})],-1)),r(be,{id:"task-type",modelValue:t.task_type_id,"onUpdate:modelValue":w[7]||(w[7]=R=>t.task_type_id=R),options:Ne.value,"value-key":"value","label-key":"label",placeholder:"Select Type",class:"flex-grow",required:""},null,8,["modelValue","options"])])):_("",!0),t.task_type_id?(a(),i("div",Fs,[r(O,{value:"Priority"}),e("div",zs,[e("button",{type:"button",onClick:w[8]||(w[8]=R=>t.priority="low"),class:q(["px-3 py-1 text-sm rounded-md w-full flex items-center justify-center gap-2",t.priority==="low"?"bg-white shadow":"text-gray-600 hover:bg-gray-200"])},w[33]||(w[33]=[e("svg",{class:"h-4 w-4 text-green-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 13.5L12 21m0 0l-7.5-7.5M12 21V3"})],-1),A(" Low ",-1)]),2),e("button",{type:"button",onClick:w[9]||(w[9]=R=>t.priority="medium"),class:q(["px-3 py-1 text-sm rounded-md w-full flex items-center justify-center gap-2",t.priority==="medium"?"bg-white shadow":"text-gray-600 hover:bg-gray-200"])},w[34]||(w[34]=[e("svg",{class:"h-4 w-4 text-yellow-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 9h16.5m-16.5 6.75h16.5"})],-1),A(" Medium ",-1)]),2),e("button",{type:"button",onClick:w[10]||(w[10]=R=>t.priority="high"),class:q(["px-3 py-1 text-sm rounded-md w-full flex items-center justify-center gap-2",t.priority==="high"?"bg-white shadow":"text-gray-600 hover:bg-gray-200"])},w[35]||(w[35]=[e("svg",{class:"h-4 w-4 text-red-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.5 10.5L12 3m0 0l7.5 7.5M12 3v18"})],-1),A(" High ",-1)]),2)])])):_("",!0),t.task_type_id?(a(),i("div",Ls,[e("div",Rs,[r(O,{value:"Effort (Story Points)"}),e("button",{type:"button",onClick:w[11]||(w[11]=R=>p.value=!0),class:"text-xs text-indigo-600 hover:text-indigo-800 flex items-center gap-1"},[r(N(Bt),{class:"h-4 w-4"}),w[36]||(w[36]=A(" Guide ",-1))])]),r(ge,{id:"task-effort",modelValue:t.effort,"onUpdate:modelValue":w[12]||(w[12]=R=>t.effort=R),type:"number",min:"0",class:"block w-full",placeholder:"e.g. 1, 2, 3, 5, 8"},null,8,["modelValue"]),r(X,{message:te.effort?te.effort[0]:"",class:"mt-2"},null,8,["message"])])):_("",!0)])):_("",!0)])])):_("",!0),t.description.length>=10?(a(),i("div",Os,[e("div",qs,[I.value?(a(),i("div",Ws,[r(Dt,{modelValue:t.tags,"onUpdate:modelValue":w[13]||(w[13]=R=>t.tags=R),initialTags:t.tags_data,label:"Tags",placeholder:"Add tags...",error:te.tags?te.tags[0]:"",disabled:!t.project_id},null,8,["modelValue","initialTags","error","disabled"])])):_("",!0),E.value?(a(),i("div",Hs,[r(O,{for:"task-files",value:"Attachments"}),e("input",{id:"task-files",type:"file",class:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-violet-50 file:text-violet-700 hover:file:bg-violet-100",multiple:"",onChange:oe},null,32)])):_("",!0),x.value?(a(),i("div",Ks,[U(e("input",{id:"needs-approval",type:"checkbox","onUpdate:modelValue":w[14]||(w[14]=R=>t.needs_approval=R),class:"h-4 w-4 text-indigo-600 border-gray-300 rounded"},null,512),[[mt,t.needs_approval]]),w[37]||(w[37]=e("label",{for:"needs-approval",class:"ml-2 block text-sm text-gray-700"},"This task needs approval",-1))])):_("",!0),j.value?(a(),i("div",Js,[U(e("input",{id:"requires-qa",type:"checkbox","onUpdate:modelValue":w[15]||(w[15]=R=>t.requires_qa=R),class:"h-4 w-4 text-indigo-600 border-gray-300 rounded"},null,512),[[mt,t.requires_qa]]),w[38]||(w[38]=e("label",{for:"requires-qa",class:"ml-2 block text-sm text-gray-700"},"Required QA Task",-1))])):_("",!0),$.value?(a(),i("div",Ys,[e("div",null,[r(O,{value:"Schedule"}),D.value?(a(),i("div",Qs,"Planned: "+G(D.value),1)):(a(),i("div",Zs,"No schedule attached"))]),e("div",Xs,[e("button",{type:"button",onClick:w[16]||(w[16]=(...R)=>N(H)&&N(H)(...R)),class:"px-3 py-2 text-sm font-medium text-indigo-600 bg-indigo-50 rounded-md hover:bg-indigo-100"},G(D.value?"Edit Schedule":"Add Schedule"),1),N(L)?(a(),i("button",{key:0,type:"button",onClick:w[17]||(w[17]=R=>L.value=null),class:"px-3 py-2 text-sm font-medium text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200"},"Clear")):_("",!0)])])):_("",!0)]),e("div",eo,[e("button",{type:"button",onClick:w[18]||(w[18]=R=>I.value=!I.value),class:q(["flex items-center gap-1 text-sm text-gray-600 hover:text-black bg-gray-100 hover:bg-gray-200 px-2 py-1 rounded-md transition-colors",{"bg-gray-300":I.value}])},w[39]||(w[39]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 7h.01M7 3h5a2 2 0 012 2v5a2 2 0 01-2 2H7a2 2 0 01-2-2V5a2 2 0 012-2zm0 0v11a2 2 0 002 2h5a2 2 0 002-2v-5a2 2 0 00-2-2H7z"})],-1),A("Tag",-1)]),2),e("button",{type:"button",onClick:w[19]||(w[19]=R=>E.value=!E.value),class:q(["flex items-center gap-1 text-sm text-gray-600 hover:text-black bg-gray-100 hover:bg-gray-200 px-2 py-1 rounded-md transition-colors",{"bg-gray-300":E.value}])},w[40]||(w[40]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})],-1),A("Attachment",-1)]),2),e("button",{type:"button",onClick:w[20]||(w[20]=R=>x.value=!x.value),class:q(["flex items-center gap-1 text-sm text-gray-600 hover:text-black bg-gray-100 hover:bg-gray-200 px-2 py-1 rounded-md transition-colors",{"bg-gray-300":x.value}])},w[41]||(w[41]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),A("Approval",-1)]),2),e("button",{type:"button",onClick:w[21]||(w[21]=R=>j.value=!j.value),class:q(["flex items-center gap-1 text-sm text-gray-600 hover:text-black bg-gray-100 hover:bg-gray-200 px-2 py-1 rounded-md transition-colors",{"bg-gray-300":j.value}])},w[42]||(w[42]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6l7 3v4c0 4.418-2.239 8-7 9-4.761-1-7-4.582-7-9V9l7-3z"})],-1),A("QA",-1)]),2),e("button",{type:"button",onClick:w[22]||(w[22]=R=>$.value=!$.value),class:q(["flex items-center gap-1 text-sm text-gray-600 hover:text-black bg-gray-100 hover:bg-gray-200 px-2 py-1 rounded-md transition-colors",{"bg-gray-300":$.value}])},w[43]||(w[43]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),A("Schedule",-1)]),2)])])):_("",!0)])]),_:1},8,["show","form-data"]),r(_s,{show:N(z),title:"Add Schedule",onClose:N(P),onSave:N(V)},null,8,["show","onClose","onSave"]),r(Ol,{show:b.value,"project-id":t.project_id,onClose:w[23]||(w[23]=te=>b.value=!1),onSaved:xe},null,8,["show","project-id"]),r(Ve,{show:p.value,onClose:w[26]||(w[26]=te=>p.value=!1),"max-width":"lg"},{default:k(()=>[e("div",to,[e("div",ao,[w[45]||(w[45]=e("h3",{class:"text-lg font-medium text-gray-900"},"Effort Estimation Guide",-1)),e("button",{onClick:w[24]||(w[24]=te=>p.value=!1),class:"text-gray-400 hover:text-gray-500"},w[44]||(w[44]=[e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),r(Nt),e("div",lo,[r(Fe,{onClick:w[25]||(w[25]=te=>p.value=!1)},{default:k(()=>w[46]||(w[46]=[A("Close",-1)])),_:1,__:[46]})])])]),_:1},8,["show"])],64))}},co={class:"space-y-4"},mo={class:"mt-4"},vo={class:"flex items-center space-x-6"},po={class:"inline-flex items-center"},fo={class:"inline-flex items-center"},go={class:"inline-flex items-center"},bo={__name:"CreateForm",props:{show:{type:Boolean,default:!1},apiEndpoint:{type:String,required:!0}},emits:["close","resourceCreated"],setup(u,{emit:g}){const m=u,s=g,t=Se({title:"",description:"",url:"",type:"website",thumbnail_url:"",visible_to_client:!0,visibility:"client",tags:[]}),p=[{value:"website",label:"Website"},{value:"youtube",label:"YouTube Video"},{value:"document",label:"Document"},{value:"image",label:"Image"},{value:"other",label:"Other"}],v=T(p);ke(async()=>{try{const{data:o}=await ne.get("/api/options/shareable_resource_types");Array.isArray(o)&&o.length&&(v.value=o)}catch{v.value=p}});const h=o=>{const l={title:o.title,description:o.description,url:o.url,type:o.type,thumbnail_url:o.thumbnail_url,visibility:o.visibility,tags:o.tags};if(Array.isArray(o.tags)&&o.tags.length){const d=o.tags.map(f=>typeof f=="object"&&f!==null?f.id:f).filter(Boolean);l.tag_ids=d}return l},c=o=>{s("resourceCreated",o),n()},n=()=>{t.title="",t.description="",t.url="",t.type="website",t.thumbnail_url="",t.visible_to_client=!0,t.tags=[],s("close")};return(o,l)=>(a(),B(De,{show:m.show,title:"Add New Shareable Resource",apiEndpoint:m.apiEndpoint,httpMethod:"post",formData:t,formatDataForApi:h,submitButtonText:"Create Resource",successMessage:"Shareable resource created successfully!",onSubmitted:c,onClose:n},{default:k(({errors:d})=>[e("div",co,[e("div",null,[r(O,{for:"title",value:"Title",class:"mb-1"}),r(ge,{id:"title",type:"text",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:t.title,"onUpdate:modelValue":l[0]||(l[0]=f=>t.title=f),required:""},null,8,["modelValue"]),r(X,{message:d.title?d.title[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[r(O,{for:"url",value:"Resource URL",class:"mb-1"}),r(ge,{id:"url",type:"url",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:t.url,"onUpdate:modelValue":l[1]||(l[1]=f=>t.url=f),required:""},null,8,["modelValue"]),r(X,{message:d.url?d.url[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[r(O,{for:"type",value:"Resource Type",class:"mb-1"}),r(be,{id:"type",modelValue:t.type,"onUpdate:modelValue":l[2]||(l[2]=f=>t.type=f),options:v.value,valueKey:"value",labelKey:"label",placeholder:"Select Resource Type",required:"",class:"mt-1 block w-full"},null,8,["modelValue","options"]),r(X,{message:d.type?d.type[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[r(O,{for:"thumbnail_url",value:"Thumbnail URL (Optional)",class:"mb-1"}),r(ge,{id:"thumbnail_url",type:"url",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:t.thumbnail_url,"onUpdate:modelValue":l[3]||(l[3]=f=>t.thumbnail_url=f)},null,8,["modelValue"]),r(X,{message:d.thumbnail_url?d.thumbnail_url[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[r(O,{for:"description",value:"Description (Optional)",class:"mb-1"}),U(e("textarea",{id:"description",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-lg shadow-sm mt-1 block w-full","onUpdate:modelValue":l[4]||(l[4]=f=>t.description=f),rows:"3"},null,512),[[re,t.description]]),r(X,{message:d.description?d.description[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[r(Dt,{modelValue:t.tags,"onUpdate:modelValue":l[5]||(l[5]=f=>t.tags=f),label:"Associated Tags",placeholder:"Search or add tags",error:d.tags?d.tags[0]:""},null,8,["modelValue","error"])]),e("div",mo,[r(O,{value:"Visibility",class:"mb-2"}),e("div",vo,[e("label",po,[U(e("input",{type:"radio",class:"form-radio",value:"client","onUpdate:modelValue":l[6]||(l[6]=f=>t.visibility=f)},null,512),[[Ke,t.visibility]]),l[9]||(l[9]=e("span",{class:"ml-2"},"Visible to Client",-1))]),e("label",fo,[U(e("input",{type:"radio",class:"form-radio",value:"team","onUpdate:modelValue":l[7]||(l[7]=f=>t.visibility=f)},null,512),[[Ke,t.visibility]]),l[10]||(l[10]=e("span",{class:"ml-2"},"Visible to Team",-1))]),e("label",go,[U(e("input",{type:"radio",class:"form-radio",value:"private","onUpdate:modelValue":l[8]||(l[8]=f=>t.visibility=f)},null,512),[[Ke,t.visibility]]),l[11]||(l[11]=e("span",{class:"ml-2"},"Private",-1))])]),r(X,{message:d.visibility?d.visibility[0]:"",class:"mt-2"},null,8,["message"])])])]),_:1},8,["show","apiEndpoint","formData"]))}},yo=Qe(bo,[["__scopeId","data-v-9f619b0e"]]),ho={key:0,class:"sidebar-wrapper"},ko={class:"fixed inset-0 z-[100] flex pointer-events-none"},xo={class:"flex items-center justify-between p-4 border-b border-gray-200 bg-white rounded-tl-xl sticky top-0 z-20"},wo={class:"text-xl font-semibold text-gray-900"},_o={class:"flex-1 overflow-y-auto p-6 scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-gray-300 scrollbar-track-gray-100"},Ao={key:1,class:"p-4 border-t border-gray-200 bg-white sticky bottom-0 z-20"},To={__name:"RightSidebar",props:{show:{type:Boolean,default:!1},title:{type:String,default:"Details"},initialWidth:{type:Number,default:50},minWidth:{type:Number,default:30},maxWidth:{type:Number,default:90}},emits:["close","update:show"],setup(u,{emit:g}){const m=u,s=g,t=T(m.initialWidth),p=T(!1),v=l=>{p.value=!0,document.addEventListener("pointermove",h),document.addEventListener("pointerup",c)},h=l=>{if(!p.value)return;const d=window.innerWidth,M=(d-l.clientX)/d*100,b=Math.max(m.minWidth,Math.min(m.maxWidth,M));t.value=b},c=()=>{p.value=!1,document.removeEventListener("pointermove",h),document.removeEventListener("pointerup",c)};le(()=>m.show,l=>{l?document.body.style.overflow="hidden":document.body.style.overflow=""},{immediate:!0});const n=()=>{s("update:show",!1),s("close")},o=W(()=>window.innerWidth<768);return le(o,l=>{l&&m.show?t.value=100:!l&&m.show&&(t.value=m.initialWidth)},{immediate:!0}),le(()=>m.show,l=>{l&&(o.value?t.value=100:t.value=m.initialWidth)}),(l,d)=>(a(),B(ra,{to:"body"},[r(Et,{"enter-active-class":"transition ease-out duration-300 transform","enter-from-class":"translate-x-full","enter-to-class":"translate-x-0","leave-active-class":"transition ease-in duration-200 transform","leave-from-class":"translate-x-0","leave-to-class":"translate-x-full"},{default:k(()=>[u.show?(a(),i("div",ho,[e("div",{class:"fixed inset-0 bg-gray-900 bg-opacity-50 transition-opacity z-[99]",onClick:n}),e("div",ko,[e("div",{class:"relative ml-auto h-full bg-white shadow-xl flex flex-col rounded-l-xl pointer-events-auto",style:na({width:o.value?"100%":`${t.value}vw`})},[o.value?_("",!0):(a(),i("div",{key:0,class:"absolute left-0 top-0 h-full w-2 cursor-col-resize -ml-1 z-10",onPointerdown:v,title:"Drag to resize"},null,32)),e("div",xo,[e("h3",wo,G(u.title),1),e("button",{onClick:n,class:"text-gray-400 hover:text-gray-600 transition-colors"},d[0]||(d[0]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("div",_o,[Te(l.$slots,"content",{},void 0,!0)]),l.$slots.footer?(a(),i("div",Ao,[Te(l.$slots,"footer",{},void 0,!0)])):_("",!0)],4)])])):_("",!0)]),_:3})]))}},Ut=Qe(To,[["__scopeId","data-v-2d864577"]]),Mo={class:"flex border-b border-gray-200"},$o={key:0,class:"ml-2 px-2 py-1 text-xs font-bold bg-red-600 text-white rounded-full"},Co={class:"p-4 space-y-2 overflow-y-auto"},So={key:0,class:"p-6 text-center text-gray-500"},Go={key:0},jo={key:1},Po=["onClick"],Eo={class:"flex-1 min-w-0"},Io={class:"flex items-start justify-between gap-2 mb-1"},Vo={class:"flex-1 min-w-0"},Do={key:0,class:"text-base font-semibold text-gray-900 truncate"},Bo={key:1,class:"text-xs text-gray-500"},No={key:0,class:"text-sm text-gray-600 mt-1 mb-2"},Uo={class:"flex items-center text-xs text-gray-500 font-medium"},Fo={key:0},zo={key:1,class:"mx-2"},Lo={key:2},Ro={__name:"NotificationsSidebar",setup(u){const g=W(()=>Je.value.notifications),m=T("New"),s=W(()=>m.value==="New"?g.value.filter(h=>!h.isRead):g.value),t=async h=>{await Gt(h.view_id);const c=h.task_id||p(h.url),n=h.project_id||v(h.url);c&&n?(jt(c,n),_t()):(console.warn("Could not open task sidebar. Falling back to opening URL in new tab."),h.url&&window.open(h.url,"_blank"))},p=h=>{const c=h.match(/\/task\/(\d+)/);return c?parseInt(c[1]):null},v=h=>{const c=h.match(/\/project\/(\d+)\//);return c?parseInt(c[1]):null};return(h,c)=>(a(),B(Ut,{show:N(Je).show,"onUpdate:show":N(_t),title:"Notifications","initial-width":35,class:"z-[100]"},{content:k(()=>[e("div",Mo,[e("button",{onClick:c[0]||(c[0]=n=>m.value="New"),class:q([{"border-blue-600 text-blue-600 font-semibold":m.value==="New","border-transparent text-gray-500 hover:text-gray-700":m.value!=="New"},"flex-1 py-4 px-1 text-center text-sm border-b-2 transition-colors duration-200"])},[c[2]||(c[2]=A(" New ",-1)),g.value.filter(n=>!n.isRead).length>0?(a(),i("span",$o,G(g.value.filter(n=>!n.isRead).length),1)):_("",!0)],2),e("button",{onClick:c[1]||(c[1]=n=>m.value="All"),class:q([{"border-blue-600 text-blue-600 font-semibold":m.value==="All","border-transparent text-gray-500 hover:text-gray-700":m.value!=="All"},"flex-1 py-4 px-1 text-center text-sm border-b-2 transition-colors duration-200"])}," All ",2)]),e("div",Co,[s.value.length===0?(a(),i("div",So,[m.value==="New"?(a(),i("span",Go,"You have no new notifications.")):(a(),i("span",jo,"You have no notifications."))])):_("",!0),(a(!0),i(Z,null,ie(s.value,n=>(a(),i("div",{key:n.id,class:q(["bg-white rounded-xl shadow-sm p-4 flex items-start space-x-4 border border-gray-200 transition-all duration-200 hover:shadow-md cursor-pointer",{"bg-gray-50":n.isRead}]),onClick:o=>t(n)},[e("div",Eo,[e("div",Io,[e("div",Vo,[n.title?(a(),i("h3",Do,G(n.title),1)):_("",!0),n.project_name?(a(),i("p",Bo,G(n.project_name),1)):_("",!0)])]),n.message?(a(),i("p",No,G(n.message),1)):_("",!0),e("div",Uo,[n.due_date?(a(),i("span",Fo,"Due: "+G(N(St)(n.due_date)),1)):_("",!0),n.due_date&&n.priority?(a(),i("span",zo,"â€¢")):_("",!0),n.priority?(a(),i("span",Lo,"Priority: "+G(n.priority),1)):_("",!0)])])],10,Po))),128))])]),_:1},8,["show","onUpdate:show"]))}},Oo={class:"space-y-4"},qo={key:0,class:"text-red-600 text-xs mt-1"},Wo={key:0,class:"text-red-600 text-xs mt-1"},Ho={key:0,class:"text-red-600 text-xs mt-1"},Ko={__name:"KudoModal",props:{show:{type:Boolean,default:!1}},emits:["close","submitted"],setup(u,{emit:g}){const m=g,s=T([]),t=T([]),p=Se({recipient_id:"",project_id:"",comment:""}),v=T({}),h=async()=>{try{const{data:l}=await window.axios.get("/api/projects-simplified");s.value=(l||[]).map(d=>({value:d.id,label:d.name}))}catch{s.value=[]}},c=async l=>{if(t.value=[],!!l)try{const{data:d}=await window.axios.get(`/api/projects/${l}/users`);t.value=(d||[]).map(f=>({value:f.id,label:`${f.name} (${f.email})`}))}catch{t.value=[]}};le(()=>p.project_id,l=>{l&&c(l)}),ke(()=>{h()});const n=()=>{p.recipient_id="",p.project_id="",p.comment="",v.value={}},o=l=>{n(),m("submitted",l)};return(l,d)=>(a(),B(De,{show:u.show,title:"Give a Kudo âœ¨","api-endpoint":"/api/kudos","http-method":"post","form-data":p,"submit-button-text":"Submit Kudo","success-message":"Kudo submitted! Pending approval.",onClose:d[3]||(d[3]=f=>l.$emit("close")),onSubmitted:o},{default:k(({errors:f})=>[e("div",Oo,[e("div",null,[d[4]||(d[4]=e("label",{class:"block text-sm font-medium text-gray-700"},"Project",-1)),r(be,{options:s.value,modelValue:p.project_id,"onUpdate:modelValue":d[0]||(d[0]=M=>p.project_id=M),placeholder:"Select a project..."},null,8,["options","modelValue"]),f.project_id?(a(),i("p",qo,G(f.project_id[0]),1)):_("",!0)]),e("div",null,[d[5]||(d[5]=e("label",{class:"block text-sm font-medium text-gray-700"},"Recipient",-1)),r(be,{options:t.value,modelValue:p.recipient_id,"onUpdate:modelValue":d[1]||(d[1]=M=>p.recipient_id=M),placeholder:"Select a teammate..."},null,8,["options","modelValue"]),f.recipient_id?(a(),i("p",Wo,G(f.recipient_id[0]),1)):_("",!0)]),e("div",null,[d[6]||(d[6]=e("label",{class:"block text-sm font-medium text-gray-700"},"Comment",-1)),U(e("textarea",{"onUpdate:modelValue":d[2]||(d[2]=M=>p.comment=M),rows:"4",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",placeholder:"e.g., Thank you for helping with the last-minute changes!"},null,512),[[re,p.comment]]),f.comment?(a(),i("p",Ho,G(f.comment[0]),1)):_("",!0)])])]),_:1},8,["show","form-data"]))}},Jo={class:"flex items-center p-4 h-16 border-b border-gray-700"},Yo={key:0,class:"text-xl font-semibold flex-1 truncate"},Qo=["title"],Zo={key:0,class:"p-4 border-b border-gray-700"},Xo={class:"relative"},ei={key:1,class:"flex-1 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-500 scrollbar-track-gray-700 p-4"},ti={key:0,class:"mb-4"},ai={class:"ml-2 mt-2 space-y-1"},li=["onClick"],si={class:"text-sm font-medium text-gray-300 truncate"},oi={class:"ml-4 mt-1 space-y-1"},ii={class:"truncate"},ni={key:1,class:"mb-4"},ri={class:"ml-2 mt-2 space-y-1"},ui=["onClick"],di={class:"text-sm font-medium text-gray-300 truncate"},ci={class:"ml-4 mt-1 space-y-1"},mi={class:"truncate"},vi={key:2,class:"mb-4"},pi={class:"ml-2 mt-2 space-y-1"},fi={class:"truncate"},gi={key:3,class:"mb-4"},bi={class:"ml-2 mt-2 space-y-1"},yi={class:"truncate"},hi={key:4,class:"text-gray-400 text-sm text-center py-4"},ki={key:5,class:"text-gray-400 text-sm text-center py-4"},xi={key:2,class:"flex flex-col items-center pt-4 space-y-4"},wi={key:0,class:"text-gray-400 text-xs text-center px-2"},_i={__name:"LeftSidebar",props:{allProjects:{type:Array,default:()=>[]},activeProjectId:{type:Number,default:null}},emits:["project-selected"],setup(u,{emit:g}){const m=u,s=g,t=T(localStorage.getItem("leftSidebarCollapsed")!=="false"),p=T(""),v=T({}),h=W(()=>{const $=new Set;return m.allProjects.forEach(x=>{x.project_type&&$.add(x.project_type)}),Array.from($).sort()}),c=W(()=>{const $=new Set;return m.allProjects.forEach(x=>{Array.isArray(x.tags)&&x.tags.forEach(j=>$.add(j))}),Array.from($).sort()}),n=W(()=>{if(!p.value)return m.allProjects;const $=p.value.toLowerCase();return m.allProjects.filter(x=>{var j,z,L;return x.name.toLowerCase().includes($)||((j=x.description)==null?void 0:j.toLowerCase().includes($))||((z=x.project_type)==null?void 0:z.toLowerCase().includes($))||Array.isArray(x.tags)&&x.tags.some(H=>H.toLowerCase().includes($))||((L=x.status)==null?void 0:L.toLowerCase().includes($))})}),o=W(()=>{const $={};n.value.forEach(x=>{x.project_type&&x.status==="active"&&($[x.project_type]||($[x.project_type]=[]),$[x.project_type].push(x))});for(const x in $)$[x].sort((j,z)=>j.name.localeCompare(z.name));return $}),l=W(()=>{const $={};n.value.forEach(x=>{Array.isArray(x.tags)&&x.tags.length>0&&x.tags.forEach(j=>{$[j]||($[j]=[]),$[j].push(x)})});for(const x in $)$[x]=[...new Set($[x])].sort((j,z)=>j.name.localeCompare(z.name));return $}),d=W(()=>n.value.filter($=>$.status!=="active").sort(($,x)=>$.name.localeCompare(x.name))),f=W(()=>n.value.filter($=>!$.project_type&&(!Array.isArray($.tags)||$.tags.length===0)).sort(($,x)=>$.name.localeCompare(x.name)));le(()=>m.allProjects,()=>{h.value.forEach($=>{const x=`type-${$}`;v.value[x]===void 0&&(v.value[x]=!0)}),c.value.forEach($=>{const x=`tag-${$}`;v.value[x]===void 0&&(v.value[x]=!0)}),v.value["main-types"]===void 0&&(v.value["main-types"]=!1),v.value["main-tags"]===void 0&&(v.value["main-tags"]=!1),v.value["inactive-projects"]===void 0&&(v.value["inactive-projects"]=!1),v.value.uncategorized===void 0&&(v.value.uncategorized=!1)},{immediate:!0}),le(t,$=>{localStorage.setItem("leftSidebarCollapsed",$)});const M=()=>{t.value=!t.value},b=$=>{v.value[$]=!v.value[$]},I=$=>{s("project-selected",$)},E=()=>{p.value=""};return($,x)=>(a(),i("div",{class:q({"w-64":!t.value,"w-16":t.value,"min-w-16":!0,"bg-gray-800 text-white flex flex-col transition-all duration-300 ease-in-out shrink-0 h-screen overflow-hidden":!0})},[e("div",Jo,[t.value?_("",!0):(a(),i("h2",Yo,"Projects")),e("button",{onClick:M,class:"p-2 rounded-full hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500",title:t.value?"Expand Sidebar":"Collapse Sidebar"},[(a(),i("svg",{class:q(["w-6 h-6 text-gray-400 transform transition-transform duration-300",{"rotate-180":t.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},x[5]||(x[5]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"},null,-1)]),2))],8,Qo)]),t.value?_("",!0):(a(),i("div",Zo,[e("div",Xo,[U(e("input",{type:"text","onUpdate:modelValue":x[0]||(x[0]=j=>p.value=j),placeholder:"Search all projects...",class:"w-full p-2 rounded-md bg-gray-700 border border-gray-600 text-white placeholder-gray-400 focus:ring-indigo-500 focus:border-indigo-500 text-sm"},null,512),[[re,p.value]]),p.value?(a(),i("button",{key:0,onClick:E,class:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-200",title:"Clear search"},x[6]||(x[6]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))):_("",!0)])])),t.value?(a(),i("div",xi,[(a(!0),i(Z,null,ie(m.allProjects,j=>(a(),B(N(Ae),{key:j.id,href:$.route("projects.show",j.id),onClick:z=>I(j.id),class:q({"w-10 h-10 rounded-full flex items-center justify-center text-xs font-bold transition-all duration-200":!0,"bg-indigo-600 text-white":j.id===u.activeProjectId,"bg-gray-700 text-gray-300 hover:bg-gray-600":j.id!==u.activeProjectId}),title:j.name},{default:k(()=>[A(G(j.name.charAt(0).toUpperCase()),1)]),_:2},1032,["href","onClick","class","title"]))),128)),u.allProjects.length===0?(a(),i("div",wi," No Projects ")):_("",!0)])):(a(),i("div",ei,[Object.keys(o.value).length>0?(a(),i("div",ti,[e("div",{class:"flex items-center justify-between cursor-pointer py-2 hover:bg-gray-700 rounded-md px-2",onClick:x[1]||(x[1]=j=>b("main-types"))},[x[8]||(x[8]=e("h3",{class:"text-sm font-semibold text-gray-400"},"Active Projects by Type",-1)),(a(),i("svg",{class:q(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!v.value["main-types"]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},x[7]||(x[7]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))]),U(e("div",ai,[(a(!0),i(Z,null,ie(o.value,(j,z)=>(a(),i("div",{key:z},[e("div",{class:"flex items-center justify-between cursor-pointer py-1 hover:bg-gray-700 rounded-md px-2",onClick:L=>b(`type-${z}`)},[e("h4",si,G(z),1),(a(),i("svg",{class:q(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!v.value[`type-${z}`]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},x[9]||(x[9]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))],8,li),U(e("ul",oi,[(a(!0),i(Z,null,ie(j,L=>(a(),i("li",{key:L.id},[r(N(Ae),{href:$.route("projects.show",L.id),onClick:H=>I(L.id),class:q({"block w-full text-left px-3 py-2 rounded-md transition-colors":!0,"bg-indigo-600 text-white":L.id===u.activeProjectId,"hover:bg-gray-700 text-gray-200":L.id!==u.activeProjectId,"font-bold":L.id===u.activeProjectId})},{default:k(()=>[e("span",ii,G(L.name),1)]),_:2},1032,["href","onClick","class"])]))),128))],512),[[Ce,!v.value[`type-${z}`]]])]))),128))],512),[[Ce,!v.value["main-types"]]])])):_("",!0),Object.keys(l.value).length>0?(a(),i("div",ni,[e("div",{class:"flex items-center justify-between cursor-pointer py-2 hover:bg-gray-700 rounded-md px-2",onClick:x[2]||(x[2]=j=>b("main-tags"))},[x[11]||(x[11]=e("h3",{class:"text-sm font-semibold text-gray-400"},"Projects by Tag",-1)),(a(),i("svg",{class:q(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!v.value["main-tags"]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},x[10]||(x[10]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))]),U(e("div",ri,[(a(!0),i(Z,null,ie(l.value,(j,z)=>(a(),i("div",{key:z},[e("div",{class:"flex items-center justify-between cursor-pointer py-1 hover:bg-gray-700 rounded-md px-2",onClick:L=>b(`tag-${z}`)},[e("h4",di,G(z),1),(a(),i("svg",{class:q(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!v.value[`tag-${z}`]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},x[12]||(x[12]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))],8,ui),U(e("ul",ci,[(a(!0),i(Z,null,ie(j,L=>(a(),i("li",{key:L.id},[r(N(Ae),{href:$.route("projects.show",L.id),onClick:H=>I(L.id),class:q({"block w-full text-left px-3 py-2 rounded-md transition-colors":!0,"bg-indigo-600 text-white":L.id===u.activeProjectId,"hover:bg-gray-700 text-gray-200":L.id!==u.activeProjectId,"font-bold":L.id===u.activeProjectId})},{default:k(()=>[e("span",mi,G(L.name),1)]),_:2},1032,["href","onClick","class"])]))),128))],512),[[Ce,!v.value[`tag-${z}`]]])]))),128))],512),[[Ce,!v.value["main-tags"]]])])):_("",!0),d.value.length>0?(a(),i("div",vi,[e("div",{class:"flex items-center justify-between cursor-pointer py-2 hover:bg-gray-700 rounded-md px-2",onClick:x[3]||(x[3]=j=>b("inactive-projects"))},[x[14]||(x[14]=e("h3",{class:"text-sm font-semibold text-gray-400"},"Inactive Projects",-1)),(a(),i("svg",{class:q(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!v.value["inactive-projects"]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},x[13]||(x[13]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))]),U(e("ul",pi,[(a(!0),i(Z,null,ie(d.value,j=>(a(),i("li",{key:j.id},[r(N(Ae),{href:$.route("projects.show",j.id),onClick:z=>I(j.id),class:q({"block w-full text-left px-3 py-2 rounded-md transition-colors":!0,"bg-indigo-600 text-white":j.id===u.activeProjectId,"hover:bg-gray-700 text-gray-200":j.id!==u.activeProjectId,"font-bold":j.id===u.activeProjectId})},{default:k(()=>[e("span",fi,G(j.name)+" ("+G(j.status.replace("_"," "))+")",1)]),_:2},1032,["href","onClick","class"])]))),128))],512),[[Ce,!v.value["inactive-projects"]]])])):_("",!0),f.value.length>0?(a(),i("div",gi,[e("div",{class:"flex items-center justify-between cursor-pointer py-2 hover:bg-gray-700 rounded-md px-2",onClick:x[4]||(x[4]=j=>b("uncategorized"))},[x[16]||(x[16]=e("h3",{class:"text-sm font-semibold text-gray-400"},"Uncategorized",-1)),(a(),i("svg",{class:q(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!v.value.uncategorized}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},x[15]||(x[15]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))]),U(e("ul",bi,[(a(!0),i(Z,null,ie(f.value,j=>(a(),i("li",{key:j.id},[r(N(Ae),{href:$.route("projects.show",j.id),onClick:z=>I(j.id),class:q({"block w-full text-left px-3 py-2 rounded-md transition-colors":!0,"bg-indigo-600 text-white":j.id===u.activeProjectId,"hover:bg-gray-700 text-gray-200":j.id!==u.activeProjectId,"font-bold":j.id===u.activeProjectId})},{default:k(()=>[e("span",yi,G(j.name),1)]),_:2},1032,["href","onClick","class"])]))),128))],512),[[Ce,!v.value.uncategorized]])])):_("",!0),n.value.length===0?(a(),i("div",hi," No projects found matching your search. ")):u.allProjects.length===0&&!p.value?(a(),i("div",ki," No projects available. ")):_("",!0)]))],2))}},Ai=Qe(_i,[["__scopeId","data-v-417d431f"]]),Ti={class:"relative"},ft={__name:"Dropdown",props:{align:{type:String,default:"right"},width:{type:String,default:"48"},contentClasses:{type:String,default:"py-1 bg-white"}},setup(u){const g=u,m=h=>{v.value&&h.key==="Escape"&&(v.value=!1)};ke(()=>document.addEventListener("keydown",m)),lt(()=>document.removeEventListener("keydown",m));const s=W(()=>{const h={48:"w-48",64:"w-64",72:"w-72",80:"w-80",96:"w-96",full:"w-full",screen:"w-screen",auto:""},c=g.width.toString();return h[c]??h[48]}),t=W(()=>g.width.toString()==="screen"),p=W(()=>g.align==="left"?"ltr:origin-top-left rtl:origin-top-right start-0":g.align==="right"?"ltr:origin-top-right rtl:origin-top-left end-0":"origin-top"),v=T(!1);return(h,c)=>(a(),i("div",Ti,[e("div",{onClick:c[0]||(c[0]=n=>v.value=!v.value)},[Te(h.$slots,"trigger")]),U(e("div",{class:"fixed inset-0 z-40",onClick:c[1]||(c[1]=n=>v.value=!1)},null,512),[[Ce,v.value]]),r(Et,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:k(()=>[U(e("div",{class:q(["z-50 mt-2 rounded-md shadow-lg",t.value?"fixed left-0 right-0":"absolute",p.value,s.value]),style:{display:"none"},onClick:c[2]||(c[2]=n=>v.value=!1)},[e("div",{class:q(["rounded-md ring-1 ring-black ring-opacity-5",u.contentClasses])},[Te(h.$slots,"content")],2)],2),[[Ce,v.value]])]),_:3})]))}},ae={__name:"DropdownLink",props:{href:{type:String,required:!0},method:{type:String,default:"get"},as:{type:String,default:"a"}},setup(u){return(g,m)=>(a(),B(N(Ae),It({href:u.href,method:u.method,as:u.as},g.$attrs,{class:"block w-full px-4 py-2 text-start text-sm leading-5 text-gray-700 transition duration-150 ease-in-out hover:bg-gray-100 focus:bg-gray-100 focus:outline-none"}),{default:k(()=>[Te(g.$slots,"default")]),_:3},16,["href","method","as"]))}},we={__name:"NavLink",props:{href:{type:String,required:!0},active:{type:Boolean}},setup(u){const g=u,m=W(()=>g.active?"inline-flex items-center px-1 pt-1 border-b-2 border-indigo-400 text-sm font-medium leading-5 text-gray-900 focus:outline-none focus:border-indigo-700 transition duration-150 ease-in-out":"inline-flex items-center px-1 pt-1 border-b-2 border-transparent text-sm font-medium leading-5 text-gray-500 hover:text-gray-700 hover:border-gray-300 focus:outline-none focus:text-gray-700 focus:border-gray-300 transition duration-150 ease-in-out");return(s,t)=>(a(),B(N(Ae),{href:u.href,class:q(m.value)},{default:k(()=>[Te(s.$slots,"default")]),_:3},8,["href","class"]))}};/**
 * @license lucide-vue-next v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mi=Ze("award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-vue-next v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $i=Ze("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);/**
 * @license lucide-vue-next v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ci=Ze("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-vue-next v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Si=Ze("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-vue-next v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=Ze("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function Ct(u,g){return a(),i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M8.75 1A2.75 2.75 0 0 0 6 3.75v.443c-.795.077-1.584.176-2.365.298a.75.75 0 1 0 .23 1.482l.149-.022.841 10.518A2.75 2.75 0 0 0 7.596 19h4.807a2.75 2.75 0 0 0 2.742-2.53l.841-10.52.149.023a.75.75 0 0 0 .23-1.482A41.03 41.03 0 0 0 14 4.193V3.75A2.75 2.75 0 0 0 11.25 1h-2.5ZM10 4c.84 0 1.673.025 2.5.075V3.75c0-.69-.56-1.25-1.25-1.25h-2.5c-.69 0-1.25.56-1.25 1.25v.325C8.327 4.025 9.16 4 10 4ZM8.58 7.72a.75.75 0 0 0-1.5.06l.3 7.5a.75.75 0 1 0 1.5-.06l-.3-7.5Zm4.34.06a.75.75 0 1 0-1.5-.06l-.3 7.5a.75.75 0 1 0 1.5.06l.3-7.5Z","clip-rule":"evenodd"})])}const Gi={class:"hidden sm:flex sm:items-center"},ji={class:"mx-auto w-full max-w-6xl"},Pi={class:"grid grid-cols-2 md:grid-cols-4 gap-8"},Ei={class:"space-y-1"},Ii={class:"space-y-1"},Vi={class:"space-y-1"},Di={class:"space-y-1"},Bi={class:"p-4"},Ni={class:"flex justify-between items-center mb-4"},Ui={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Fi={class:"border rounded-lg p-4"},zi={class:"space-y-3"},Li={class:"flex justify-end"},Ri={class:"border rounded-lg p-4"},Oi={class:"space-y-3"},qi={class:"flex items-center gap-3 mt-2"},Wi={class:"flex items-center gap-2 text-sm"},Hi={class:"flex items-center gap-2 text-sm"},Ki={key:0},Ji={key:1},Yi={class:"mt-3"},Qi={class:"flex justify-end"},Zi={__name:"AdminDropdown",setup(u){const g=T(!1),m=T(!1),s=Se({sets:[],models:[],categoryName:"",setMode:"existing",selectedSetId:null,newSetName:"",newSetModels:[],setName:"",setModels:[],errors:{}}),t=async()=>{g.value=!0,await Promise.all([p(),v()])},p=async()=>{try{const{data:o}=await window.axios.get("/api/category-sets");s.sets=o.map(l=>({value:l.id,label:l.name,raw:l}))}catch(o){console.error("Failed to load sets",o)}},v=async()=>{try{const{data:o}=await window.axios.get("/api/models/available");s.models=o}catch(o){console.error("Failed to load models",o)}},h=()=>{s.errors={}},c=async()=>{var o;h(),m.value=!0;try{const l={name:s.setName,allowed_models:s.setModels},{data:d}=await window.axios.post("/api/category-sets",l);await p(),s.setName="",s.setModels=[]}catch(l){((o=l.response)==null?void 0:o.status)===422&&(s.errors=l.response.data.errors||{})}finally{m.value=!1}},n=async()=>{var o;h(),m.value=!0;try{const l={name:s.categoryName};s.setMode==="existing"?l.category_set_id=s.selectedSetId:(l.new_set_name=s.newSetName,l.allowed_models=s.newSetModels);const{data:d}=await window.axios.post("/api/categories",l);await p(),s.categoryName="",s.selectedSetId=null,s.newSetName="",s.newSetModels=[],s.setMode="existing"}catch(l){((o=l.response)==null?void 0:o.status)===422&&(s.errors=l.response.data.errors||{})}finally{m.value=!1}};return(o,l)=>{const d=vt("permission");return a(),i(Z,null,[e("div",Gi,[r(ft,{align:"left",width:"screen","content-classes":"py-6 bg-white p-6 w-full shadow-lg"},{trigger:k(()=>l[10]||(l[10]=[e("span",{class:"inline-flex rounded-md"},[e("button",{type:"button",class:"inline-flex items-center rounded-md border border-transparent bg-white px-3 py-2 text-sm font-medium leading-4 text-gray-700 hover:text-gray-900 focus:outline-none"},[A(" Admin "),e("svg",{class:"ms-2 -me-0.5 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])])],-1)])),content:k(()=>[e("div",ji,[e("div",Pi,[e("div",null,[l[18]||(l[18]=e("h4",{class:"text-xs font-semibold uppercase tracking-wider text-gray-500 mb-3"},"Management",-1)),e("div",Ei,[U((a(),B(ae,{href:o.route("projects.index"),active:o.route().current("projects.index"),class:"!px-2 !py-1.5"},{default:k(()=>l[11]||(l[11]=[A("Projects",-1)])),_:1,__:[11]},8,["href","active"])),[[d,"manage_projects"]]),U((a(),B(ae,{href:o.route("clients.page"),active:o.route().current("clients.page"),class:"!px-2 !py-1.5"},{default:k(()=>l[12]||(l[12]=[A("Clients",-1)])),_:1,__:[12]},8,["href","active"])),[[d,"create_clients"]]),U((a(),B(ae,{href:o.route("users.page"),active:o.route().current("users.page"),class:"!px-2 !py-1.5"},{default:k(()=>l[13]||(l[13]=[A("Users",-1)])),_:1,__:[13]},8,["href","active"])),[[d,"create_users"]]),U((a(),B(ae,{href:o.route("leads.page"),active:o.route().current("leads.page"),class:"!px-2 !py-1.5"},{default:k(()=>l[14]||(l[14]=[A("Leads",-1)])),_:1,__:[14]},8,["href","active"])),[[d,"manage_projects"]]),U((a(),B(ae,{href:"/campaigns",active:o.$page.url&&o.$page.url.startsWith("/campaigns"),class:"!px-2 !py-1.5"},{default:k(()=>l[15]||(l[15]=[A("Campaigns",-1)])),_:1,__:[15]},8,["active"])),[[d,"manage_projects"]]),U((a(),B(ae,{href:"/admin/productivity",active:o.$page.url&&o.$page.url.startsWith("/productivity"),class:"!px-2 !py-1.5"},{default:k(()=>l[16]||(l[16]=[A("Productivity Report",-1)])),_:1,__:[16]},8,["active"])),[[d,"manage_projects"]]),U((a(),B(ae,{href:o.route("admin.activity-report.index"),active:o.route().current("admin.activity-report.index"),class:"!px-2 !py-1.5"},{default:k(()=>l[17]||(l[17]=[A("Activity Report",-1)])),_:1,__:[17]},8,["href","active"])),[[d,"manage_projects"]])])]),e("div",null,[l[22]||(l[22]=e("h4",{class:"text-xs font-semibold uppercase tracking-wider text-gray-500 mb-3"},"Planning / Sharing",-1)),e("div",Ii,[U((a(),B(ae,{href:o.route("availability.index"),active:o.route().current("availability.index"),class:"!px-2 !py-1.5"},{default:k(()=>l[19]||(l[19]=[A("Weekly Availability",-1)])),_:1,__:[19]},8,["href","active"])),[[d,"create_users"]]),U((a(),B(ae,{href:o.route("admin.notice-board.index"),class:"!px-2 !py-1.5"},{default:k(()=>l[20]||(l[20]=[A("Notice Board",-1)])),_:1,__:[20]},8,["href"])),[[d,"manage_notices"]]),U((a(),B(ae,{href:o.route("shareable-resources.page"),class:"!px-2 !py-1.5"},{default:k(()=>l[21]||(l[21]=[A("Shareable Resources",-1)])),_:1,__:[21]},8,["href"])),[[d,"view_shareable_resources"]])])]),e("div",null,[l[31]||(l[31]=e("h4",{class:"text-xs font-semibold uppercase tracking-wider text-gray-500 mb-3"},"Configuration",-1)),e("div",Vi,[U((a(),B(ae,{href:o.route("task-types.page"),active:o.route().current("task-types.page"),class:"!px-2 !py-1.5"},{default:k(()=>l[23]||(l[23]=[A("Task Types",-1)])),_:1,__:[23]},8,["href","active"])),[[d,"manage_projects"]]),U((a(),B(ae,{href:"/admin/project-tiers",class:"!px-2 !py-1.5"},{default:k(()=>l[24]||(l[24]=[A("Project Tiers",-1)])),_:1,__:[24]})),[[d,"view_project_tiers"]]),U((a(),B(ae,{href:o.route("email-templates.page"),active:o.route().current("email-templates.page"),class:"!px-2 !py-1.5"},{default:k(()=>l[25]||(l[25]=[A("Email Templates",-1)])),_:1,__:[25]},8,["href","active"])),[[d,"manage_email_templates"]]),U((a(),B(ae,{href:o.route("placeholder-definitions.page"),active:o.route().current("placeholder-definitions.page"),class:"!px-2 !py-1.5"},{default:k(()=>l[26]||(l[26]=[A("Placeholder Definitions",-1)])),_:1,__:[26]},8,["href","active"])),[[d,"manage_placeholder_definitions"]]),U((a(),B(ae,{href:o.route("automation.page"),active:o.route().current("automation.page"),class:"!px-2 !py-1.5"},{default:k(()=>l[27]||(l[27]=[A("Automation",-1)])),_:1,__:[27]},8,["href","active"])),[[d,"create_automations"]]),U((a(),B(ae,{href:o.route("prompts.page"),active:o.route().current("prompts.page"),class:"!px-2 !py-1.5"},{default:k(()=>l[28]||(l[28]=[A("Prompts",-1)])),_:1,__:[28]},8,["href","active"])),[[d,"create_automations"]]),U((a(),B(ae,{href:o.route("schedules.index"),active:o.$page.url&&o.$page.url.startsWith("/schedules"),class:"!px-2 !py-1.5"},{default:k(()=>l[29]||(l[29]=[A("Schedules",-1)])),_:1,__:[29]},8,["href","active"])),[[d,"create_schedules"]]),r(ae,{href:o.route("admin.categories.index"),class:"!px-2 !py-1.5"},{default:k(()=>l[30]||(l[30]=[A("Categories",-1)])),_:1,__:[30]},8,["href"]),e("button",{type:"button",class:"!px-2 !py-1.5 text-left text-sm text-gray-700 hover:text-gray-900",onClick:t},"Quick Add")])]),e("div",null,[l[36]||(l[36]=e("h4",{class:"text-xs font-semibold uppercase tracking-wider text-gray-500 mb-3"},"Access & Finance",-1)),e("div",Di,[U((a(),B(ae,{href:o.route("admin.roles.index"),class:"!px-2 !py-1.5"},{default:k(()=>l[32]||(l[32]=[A("Manage Roles",-1)])),_:1,__:[32]},8,["href"])),[[d,"manage_roles"]]),U((a(),B(ae,{href:o.route("admin.permissions.index"),class:"!px-2 !py-1.5"},{default:k(()=>l[33]||(l[33]=[A("Manage Permissions",-1)])),_:1,__:[33]},8,["href"])),[[d,"assign_permissions"]]),U((a(),B(ae,{href:"/admin/monthly-budgets",class:"!px-2 !py-1.5"},{default:k(()=>l[34]||(l[34]=[A("Monthly Budgets",-1)])),_:1,__:[34]})),[[d,"manage_monthly_budgets"]]),U((a(),B(ae,{href:"/admin/bonus-calculator",class:"!px-2 !py-1.5"},{default:k(()=>l[35]||(l[35]=[A("Bonus Calculator",-1)])),_:1,__:[35]})),[[d,"view_monthly_budgets"]])])])])])]),_:1})]),r(Ve,{show:g.value,onClose:l[9]||(l[9]=f=>g.value=!1),maxWidth:"3xl"},{default:k(()=>{var f,M,b,I,E,$,x,j;return[e("div",Bi,[e("div",Ni,[l[37]||(l[37]=e("h2",{class:"text-lg font-semibold"},"Manage Categories",-1)),e("button",{onClick:l[0]||(l[0]=z=>g.value=!1),class:"text-gray-400 hover:text-gray-600"},"âœ•")]),e("div",Ui,[e("div",Fi,[l[39]||(l[39]=e("h3",{class:"text-sm font-semibold mb-3"},"Create Category Set",-1)),e("div",zi,[e("div",null,[r(O,{value:"Set Name"}),r(ge,{modelValue:s.setName,"onUpdate:modelValue":l[1]||(l[1]=z=>s.setName=z),class:"w-full mt-1"},null,8,["modelValue"]),r(X,{message:(M=(f=s.errors)==null?void 0:f.name)==null?void 0:M[0]},null,8,["message"])]),e("div",null,[r(O,{value:"Allowed Models (optional)"}),r(at,{options:s.models,modelValue:s.setModels,"onUpdate:modelValue":l[2]||(l[2]=z=>s.setModels=z),isMulti:!0,placeholder:"Select models"},null,8,["options","modelValue"])]),e("div",Li,[r(ve,{type:"button",onClick:c,disabled:m.value},{default:k(()=>l[38]||(l[38]=[A("Create Set",-1)])),_:1,__:[38]},8,["disabled"])])])]),e("div",Ri,[l[43]||(l[43]=e("h3",{class:"text-sm font-semibold mb-3"},"Create Category",-1)),e("div",Oi,[e("div",null,[r(O,{value:"Category Name"}),r(ge,{modelValue:s.categoryName,"onUpdate:modelValue":l[3]||(l[3]=z=>s.categoryName=z),class:"w-full mt-1"},null,8,["modelValue"]),r(X,{message:(I=(b=s.errors)==null?void 0:b.name)==null?void 0:I[0]},null,8,["message"])]),e("div",qi,[e("label",Wi,[U(e("input",{type:"radio",value:"existing","onUpdate:modelValue":l[4]||(l[4]=z=>s.setMode=z)},null,512),[[Ke,s.setMode]]),l[40]||(l[40]=A(" Use Existing Set ",-1))]),e("label",Hi,[U(e("input",{type:"radio",value:"new","onUpdate:modelValue":l[5]||(l[5]=z=>s.setMode=z)},null,512),[[Ke,s.setMode]]),l[41]||(l[41]=A(" Create New Set ",-1))])]),s.setMode==="existing"?(a(),i("div",Ki,[r(O,{value:"Select Set"}),r(be,{options:s.sets,modelValue:s.selectedSetId,"onUpdate:modelValue":l[6]||(l[6]=z=>s.selectedSetId=z),placeholder:"Choose a set"},null,8,["options","modelValue"]),r(X,{message:($=(E=s.errors)==null?void 0:E.category_set_id)==null?void 0:$[0]},null,8,["message"])])):(a(),i("div",Ji,[r(O,{value:"New Set Name"}),r(ge,{modelValue:s.newSetName,"onUpdate:modelValue":l[7]||(l[7]=z=>s.newSetName=z),class:"w-full mt-1"},null,8,["modelValue"]),r(X,{message:(j=(x=s.errors)==null?void 0:x.new_set_name)==null?void 0:j[0]},null,8,["message"]),e("div",Yi,[r(O,{value:"Allowed Models (optional)"}),r(at,{options:s.models,modelValue:s.newSetModels,"onUpdate:modelValue":l[8]||(l[8]=z=>s.newSetModels=z),isMulti:!0,placeholder:"Select models"},null,8,["options","modelValue"])])])),e("div",Qi,[r(ve,{type:"button",onClick:n,disabled:m.value},{default:k(()=>l[42]||(l[42]=[A("Create Category",-1)])),_:1,__:[42]},8,["disabled"])])])])])])]}),_:1},8,["show"])],64)}}},Xi={class:"relative ms-3"},en={class:"inline-flex rounded-md"},tn={type:"button",class:"inline-flex items-center rounded-md border border-transparent bg-white px-3 py-2 text-sm font-medium leading-4 text-gray-500 transition duration-150 ease-in-out hover:text-gray-700 focus:outline-none"},an={__name:"UserDropdown",emits:["logoutSuccess","logoutError"],setup(u,{emit:g}){const m=W(()=>Ye().props.auth.user),s=g,t=()=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization,s("logoutSuccess")},p=v=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization,window.location.href="/login",s("logoutError",v)};return(v,h)=>(a(),i("div",Xi,[r(ft,{align:"right",width:"48"},{trigger:k(()=>{var c;return[e("span",en,[e("button",tn,[A(G(m.value.name)+" ("+G((c=m.value.role_data)==null?void 0:c.name)+") ",1),h[0]||(h[0]=e("svg",{class:"ms-2 -me-0.5 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1))])])]}),content:k(()=>[r(ae,{href:v.route("profile.edit")},{default:k(()=>h[1]||(h[1]=[A(" Profile ",-1)])),_:1,__:[1]},8,["href"]),r(ae,{href:v.route("logout"),method:"post",as:"button",onSuccess:t,onError:p},{default:k(()=>h[2]||(h[2]=[A(" Log Out ",-1)])),_:1,__:[2]},8,["href"])]),_:1})]))}},ln={class:"hidden sm:flex sm:items-center"},sn={class:"mx-auto w-full max-w-6xl"},on={class:"grid grid-cols-2 md:grid-cols-3 gap-8"},nn={class:"space-y-1"},rn={class:"space-y-1"},un={key:0},dn={class:"space-y-1"},cn={__name:"BonusDropdown",setup(u){const{canDo:g}=st();return(m,s)=>{const t=vt("permission");return a(),i("div",ln,[r(ft,{align:"left",width:"screen","content-classes":"py-6 bg-white p-6 w-full shadow-lg"},{trigger:k(()=>s[0]||(s[0]=[e("span",{class:"inline-flex rounded-md"},[e("button",{type:"button",class:"inline-flex items-center rounded-md border border-transparent bg-white px-3 py-2 text-sm font-medium leading-4 text-gray-700 hover:text-gray-900 focus:outline-none"},[A(" Team Resources "),e("svg",{class:"ms-2 -me-0.5 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])])],-1)])),content:k(()=>[e("div",sn,[e("div",on,[e("div",null,[s[4]||(s[4]=e("h4",{class:"text-xs font-semibold uppercase tracking-wider text-gray-500 mb-3"},"Program",-1)),e("div",nn,[r(ae,{href:m.route("bonus-system.index"),active:m.route().current("bonus-system.index"),class:"!px-2 !py-1.5"},{default:k(()=>s[1]||(s[1]=[A("Bonus System",-1)])),_:1,__:[1]},8,["href","active"]),r(ae,{href:m.route("leaderboard.index"),active:m.route().current("leaderboard.index"),class:"!px-2 !py-1.5"},{default:k(()=>s[2]||(s[2]=[A("Leaderboard",-1)])),_:1,__:[2]},8,["href","active"]),r(ae,{href:m.route("kudos.index"),active:m.route().current("kudos.index"),class:"!px-2 !py-1.5"},{default:k(()=>s[3]||(s[3]=[A("Kudos",-1)])),_:1,__:[3]},8,["href","active"])])]),e("div",null,[s[7]||(s[7]=e("h4",{class:"text-xs font-semibold uppercase tracking-wider text-gray-500 mb-3"},"Valuable",-1)),e("div",rn,[r(ae,{href:m.route("team-resources.page"),active:m.route().current("team-resources.page"),class:"!px-2 !py-1.5"},{default:k(()=>s[5]||(s[5]=[A("Resources",-1)])),_:1,__:[5]},8,["href","active"]),r(ae,{href:m.route("presentations.index"),active:m.route().current("presentations.index"),class:"!px-2 !py-1.5"},{default:k(()=>s[6]||(s[6]=[A("Presentation",-1)])),_:1,__:[6]},8,["href","active"])])]),N(g)("add_expendables").value?(a(),i("div",un,[s[9]||(s[9]=e("h4",{class:"text-xs font-semibold uppercase tracking-wider text-gray-500 mb-3"},"Management",-1)),e("div",dn,[U((a(),B(ae,{href:m.route("project-expendables.index"),class:"!px-2 !py-1.5"},{default:k(()=>s[8]||(s[8]=[A("Project Expendables",-1)])),_:1,__:[8]},8,["href"])),[[t,"add_expendables"]])])])):_("",!0)])])]),_:1})])}}},mn={class:"bg-white z-[49] relative w-full shadow-sm border-b border-gray-100"},vn={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},pn={class:"flex h-16 justify-between items-center"},fn={class:"flex-shrink-0 flex items-center"},gn={class:"hidden sm:flex items-center space-x-6"},bn={key:0,class:"group relative inline-flex items-center px-3 py-1 rounded-full bg-gradient-to-r from-green-400 to-emerald-500 text-white text-sm font-semibold shadow-lg ring-2 ring-emerald-300/60 transition-all duration-300 ease-in-out"},yn={class:"font-bold"},hn={key:1,class:"inline-flex items-center px-3 py-1 rounded-full bg-gray-100 text-gray-500 text-sm font-medium"},kn={key:0,class:"absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-red-100 transform translate-x-1/2 -translate-y-1/2 bg-red-600 rounded-full"},xn={class:"-mr-2 flex items-center sm:hidden"},wn={class:"h-6 w-6",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24"},_n={class:"bg-gray-50 border-t border-gray-100 py-2 hidden sm:block"},An={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Tn={class:"flex items-center justify-between"},Mn={class:"flex items-center space-x-2 overflow-x-auto no-scrollbar"},$n={class:"flex items-center space-x-2 flex-shrink-0"},Cn={class:"space-y-1 pt-2 pb-3"},Sn={__name:"TopNavigation",props:{unreadNotificationCount:{type:Number,default:0}},emits:["openCreateTaskModal","openAddResource","openNotificationsSidebar","open-kudo-modal","open-meeting-minutes-modal"],setup(u,{emit:g}){const m=g,s=T(!1);W(()=>Ye().props.auth.user);const{canDo:t}=st();t("manage_projects"),t("create_users"),t("manage_roles"),t("manage_task_types"),t("create_clients"),W(()=>t("manage_project_tiers").value||t("view_project_tiers").value||t("create_project_tiers").value||t("edit_project_tiers").value),t("manage_notices"),t("manage_email_templates"),t("manage_placeholder_definitions"),t("manage_permissions"),t("manage_monthly_budgets"),t("view_monthly_budgets"),t("view_admin_menu");const p=t("view_admin_dropdown"),v=T(null),h=T(!0),c=T(null);return ke(async()=>{try{const{data:n}=await window.axios.get("/api/leaderboard/stats");v.value=(n==null?void 0:n.userMonthlyPoints)??0}catch(n){console.error("Failed to load monthly points",n),c.value="Failed to load points",v.value=0}finally{h.value=!1}}),(n,o)=>{const l=vt("permission");return a(),i("nav",mn,[e("div",vn,[e("div",pn,[e("div",fn,[r(N(Ae),{href:n.route("dashboard")},{default:k(()=>[r(ba,{class:"block h-14 w-auto fill-current text-gray-800"})]),_:1},8,["href"])]),e("div",gn,[r(N(Ae),{href:n.route("leaderboard.index"),class:"mr-3 cursor-pointer"},{default:k(()=>[h.value?(a(),i("div",hn," Loading... ")):(a(),i("div",bn,[o[6]||(o[6]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1.5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})],-1)),e("span",yn,G(v.value??0),1),o[7]||(o[7]=e("span",{class:"ml-1 text-white/80"},"pts",-1))]))]),_:1},8,["href"]),e("button",{onClick:o[0]||(o[0]=d=>m("openNotificationsSidebar")),class:"relative flex-shrink-0 text-gray-400 hover:text-indigo-600 p-2 rounded-full transition-colors duration-200","aria-label":"View all notifications"},[r(N($i),{class:"h-6 w-6"}),u.unreadNotificationCount>0?(a(),i("span",kn,G(u.unreadNotificationCount),1)):_("",!0)]),r(an)]),e("div",xn,[e("button",{onClick:o[1]||(o[1]=d=>s.value=!s.value),class:"inline-flex items-center justify-center rounded-md p-2 text-gray-400 transition duration-150 ease-in-out hover:bg-gray-100 hover:text-gray-500 focus:bg-gray-100 focus:text-gray-500 focus:outline-none"},[(a(),i("svg",wn,[e("path",{class:q({hidden:s.value,"inline-flex":!s.value}),"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},null,2),e("path",{class:q({hidden:!s.value,"inline-flex":s.value}),"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,2)]))])])])]),e("div",_n,[e("div",An,[e("div",Tn,[e("div",Mn,[r(we,{href:n.route("dashboard"),active:n.route().current("dashboard")},{default:k(()=>o[8]||(o[8]=[A(" Dashboard ",-1)])),_:1,__:[8]},8,["href","active"]),r(we,{href:n.route("inbox"),active:n.route().current("inbox")},{default:k(()=>o[9]||(o[9]=[A(" Inbox ",-1)])),_:1,__:[9]},8,["href","active"]),r(we,{href:n.route("workspace.index"),active:n.route().current("workspace.index")},{default:k(()=>o[10]||(o[10]=[A(" My Workspace ",-1)])),_:1,__:[10]},8,["href","active"]),r(cn),N(p)?(a(),B(Zi,{key:0})):_("",!0)]),e("div",$n,[r(ve,{type:"button",onClick:o[2]||(o[2]=d=>m("openCreateTaskModal")),class:"px-3 py-1.5 text-sm"},{default:k(()=>[r(N(ut),{class:"h-4 w-4 mr-1.5"}),o[11]||(o[11]=e("span",null,"Add Task",-1))]),_:1,__:[11]}),r(ve,{type:"button",onClick:o[3]||(o[3]=d=>m("openAddResource")),class:"px-3 py-1.5 text-sm"},{default:k(()=>[r(N(ut),{class:"h-4 w-4 mr-1.5"}),o[12]||(o[12]=e("span",null,"Add Resource",-1))]),_:1,__:[12]}),r(ve,{type:"button",onClick:o[4]||(o[4]=d=>m("open-meeting-minutes-modal")),class:"px-3 py-1.5 text-sm"},{default:k(()=>[r(N(ut),{class:"h-4 w-4 mr-1.5"}),o[13]||(o[13]=e("span",null,"Add Meeting Minutes",-1))]),_:1,__:[13]}),N(t)("create_kudos")?(a(),i("button",{key:0,type:"button",onClick:o[5]||(o[5]=d=>n.$emit("open-kudo-modal")),class:"inline-flex items-center justify-center px-3 py-1.5 text-sm font-semibold rounded-lg bg-orange-500 text-white hover:bg-orange-600 transition-colors duration-200"},[r(N(Mi),{class:"h-4 w-4 mr-1.5"}),o[14]||(o[14]=e("span",null,"Give Kudo",-1))])):_("",!0)])])])]),e("div",{class:q([{block:s.value,hidden:!s.value},"sm:hidden"])},[e("div",Cn,[r(we,{href:n.route("dashboard"),active:n.route().current("dashboard")},{default:k(()=>o[15]||(o[15]=[A(" Dashboard ",-1)])),_:1,__:[15]},8,["href","active"]),r(we,{href:n.route("inbox"),active:n.route().current("inbox")},{default:k(()=>o[16]||(o[16]=[A(" Inbox ",-1)])),_:1,__:[16]},8,["href","active"]),r(we,{href:n.route("workspace.index"),active:n.route().current("workspace.index")},{default:k(()=>o[17]||(o[17]=[A(" My Workspace ",-1)])),_:1,__:[17]},8,["href","active"]),r(we,{href:n.route("presentations.index"),active:n.route().current("presentations.index")},{default:k(()=>o[18]||(o[18]=[A(" Presentation ",-1)])),_:1,__:[18]},8,["href","active"]),r(we,{href:n.route("bonus-system.index"),active:n.route().current("bonus-system.index")},{default:k(()=>o[19]||(o[19]=[A(" Bonus System ",-1)])),_:1,__:[19]},8,["href","active"]),r(we,{href:n.route("leaderboard.index"),active:n.route().current("leaderboard.index")},{default:k(()=>o[20]||(o[20]=[A(" Leaderboard ",-1)])),_:1,__:[20]},8,["href","active"]),r(we,{href:n.route("kudos.index"),active:n.route().current("kudos.index")},{default:k(()=>o[21]||(o[21]=[A(" Kudos ",-1)])),_:1,__:[21]},8,["href","active"]),U((a(),B(we,{href:n.route("project-expendables.index")},{default:k(()=>o[22]||(o[22]=[A(" Project Expendables ",-1)])),_:1,__:[22]},8,["href"])),[[l,"add_expendables"]])])],2)])}}},de={__name:"ResponsiveNavLink",props:{href:{type:String,required:!0},active:{type:Boolean},method:{type:String,default:"get"},as:{type:String,default:"a"}},setup(u){const g=u,m=W(()=>g.active?"block w-full ps-3 pe-4 py-2 border-l-4 border-indigo-400 text-start text-base font-medium text-indigo-700 bg-indigo-50 focus:outline-none focus:text-indigo-800 focus:bg-indigo-100 focus:border-indigo-700 transition duration-150 ease-in-out":"block w-full ps-3 pe-4 py-2 border-l-4 border-transparent text-start text-base font-medium text-gray-600 hover:text-gray-800 hover:bg-gray-50 hover:border-gray-300 focus:outline-none focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300 transition duration-150 ease-in-out");return(s,t)=>(a(),B(N(Ae),It({href:u.href,method:u.method,as:u.as},s.$attrs,{class:m.value}),{default:k(()=>[Te(s.$slots,"default")]),_:3},16,["href","method","as","class"]))}},Gn={class:"space-y-1 pb-3 pt-2"},jn={key:0,class:"mt-3 space-y-1"},Pn={class:"border-t border-gray-200 pb-1 pt-4"},En={class:"px-4"},In={class:"text-base font-medium text-gray-800"},Vn={class:"text-sm font-medium text-gray-500"},Dn={class:"text-sm font-medium text-gray-500 capitalize"},Bn={class:"mt-3 space-y-1"},Nn={__name:"MobileNavigation",props:{showingNavigationDropdown:{type:Boolean,required:!0},unreadNotificationCount:{type:Number,default:0}},emits:["openCreateTaskModal","openAddResource","openNotificationsSidebar","logoutSuccess","logoutError"],setup(u,{emit:g}){const m=g,s=W(()=>Ye().props.auth.user),{canDo:t}=st(),p=t("manage_projects"),v=t("compose_emails"),h=t("approve_emails"),c=t("create_users"),n=t("manage_roles"),o=t("manage_task_types"),l=t("create_clients"),d=()=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization,m("logoutSuccess")},f=M=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization,window.location.href="/login",m("logoutError",M)};return(M,b)=>{var I;return a(),i("div",{class:q([{block:u.showingNavigationDropdown,hidden:!u.showingNavigationDropdown},"sm:hidden"])},[e("div",Gn,[N(n)?(a(),i("div",jn,[b[19]||(b[19]=e("div",{class:"px-4 font-medium text-base text-gray-800"},"Admin",-1)),r(de,{href:M.route("dashboard"),active:M.route().current("dashboard")},{default:k(()=>b[3]||(b[3]=[A(" Dashboard ",-1)])),_:1,__:[3]},8,["href","active"]),N(t)("view_emails")?(a(),B(de,{key:0,href:M.route("inbox"),active:M.route().current("inbox")},{default:k(()=>b[4]||(b[4]=[A(" Inbox ",-1)])),_:1,__:[4]},8,["href","active"])):_("",!0),N(l)?(a(),B(de,{key:1,href:M.route("clients.page"),active:M.route().current("clients.page")},{default:k(()=>b[5]||(b[5]=[A(" Clients ",-1)])),_:1,__:[5]},8,["href","active"])):_("",!0),N(p)?(a(),B(de,{key:2,href:M.route("projects.index"),active:M.route().current("projects.index")},{default:k(()=>b[6]||(b[6]=[A(" Projects ",-1)])),_:1,__:[6]},8,["href","active"])):_("",!0),N(c)?(a(),B(de,{key:3,href:M.route("users.page"),active:M.route().current("users.page")},{default:k(()=>b[7]||(b[7]=[A(" Users ",-1)])),_:1,__:[7]},8,["href","active"])):_("",!0),N(v)?(a(),B(de,{key:4,href:M.route("emails.compose"),active:M.route().current("emails.compose")},{default:k(()=>b[8]||(b[8]=[A(" Compose Email ",-1)])),_:1,__:[8]},8,["href","active"])):_("",!0),N(h)?(a(),B(de,{key:5,href:M.route("emails.pending"),active:M.route().current("emails.pending")},{default:k(()=>b[9]||(b[9]=[A(" Approve Emails ",-1)])),_:1,__:[9]},8,["href","active"])):_("",!0),N(v)?(a(),B(de,{key:6,href:M.route("emails.rejected"),active:M.route().current("emails.rejected")},{default:k(()=>b[10]||(b[10]=[A(" Rejected Emails ",-1)])),_:1,__:[10]},8,["href","active"])):_("",!0),N(c)?(a(),B(de,{key:7,href:M.route("availability.index"),active:M.route().current("availability.index")},{default:k(()=>b[11]||(b[11]=[A(" Weekly Availability ",-1)])),_:1,__:[11]},8,["href","active"])):_("",!0),N(t)("manage_roles")?(a(),B(de,{key:8,href:M.route("admin.roles.index"),active:M.route().current("admin.roles.index")},{default:k(()=>b[12]||(b[12]=[A(" Manage Roles ",-1)])),_:1,__:[12]},8,["href","active"])):_("",!0),N(t)("manage_permissions")?(a(),B(de,{key:9,href:M.route("admin.permissions.index"),active:M.route().current("admin.permissions.index")},{default:k(()=>b[13]||(b[13]=[A(" Manage Permissions ",-1)])),_:1,__:[13]},8,["href","active"])):_("",!0),N(o)?(a(),B(de,{key:10,href:M.route("task-types.page"),active:M.route().current("task-types.page")},{default:k(()=>b[14]||(b[14]=[A(" Task Types ",-1)])),_:1,__:[14]},8,["href","active"])):_("",!0),N(t)("manage_email_templates")?(a(),B(de,{key:11,href:M.route("email-templates.page"),active:M.route().current("email-templates.page")},{default:k(()=>b[15]||(b[15]=[A(" Email Templates ",-1)])),_:1,__:[15]},8,["href","active"])):_("",!0),N(t)("manage_placeholder_definitions")?(a(),B(de,{key:12,href:M.route("placeholder-definitions.page"),active:M.route().current("placeholder-definitions.page")},{default:k(()=>b[16]||(b[16]=[A(" Placeholder Definitions ",-1)])),_:1,__:[16]},8,["href","active"])):_("",!0),N(t)("view_shareable_resources")?(a(),B(de,{key:13,href:M.route("shareable-resources.page"),active:M.route().current("shareable-resources.page")},{default:k(()=>b[17]||(b[17]=[A(" Shareable Resources ",-1)])),_:1,__:[17]},8,["href","active"])):_("",!0),N(t)("view_shareable_resources")?(a(),B(de,{key:14,href:M.route("team-resources.page"),active:M.route().current("team-resources.page")},{default:k(()=>b[18]||(b[18]=[A(" Team Resources ",-1)])),_:1,__:[18]},8,["href","active"])):_("",!0)])):_("",!0)]),e("div",Pn,[e("div",En,[e("div",In,G(s.value.name),1),e("div",Vn,G(s.value.email),1),e("div",Dn,G((I=s.value.role_data)==null?void 0:I.name),1)]),e("div",Bn,[r(de,{as:"button",onClick:b[0]||(b[0]=E=>m("openCreateTaskModal"))},{default:k(()=>b[20]||(b[20]=[A(" Add Task ",-1)])),_:1,__:[20]}),r(de,{as:"button",onClick:b[1]||(b[1]=E=>m("openAddResource"))},{default:k(()=>b[21]||(b[21]=[A(" Add Resource ",-1)])),_:1,__:[21]}),r(de,{as:"button",onClick:b[2]||(b[2]=E=>m("openNotificationsSidebar"))},{default:k(()=>[A(" Notifications ("+G(u.unreadNotificationCount)+") ",1)]),_:1}),r(de,{href:M.route("profile.edit")},{default:k(()=>b[22]||(b[22]=[A(" Profile ",-1)])),_:1,__:[22]},8,["href"]),r(de,{href:M.route("logout"),method:"post",as:"button",onSuccess:d,onError:f},{default:k(()=>b[23]||(b[23]=[A(" Log Out ",-1)])),_:1,__:[23]},8,["href"])])])],2)}}},Un={class:"space-y-4"},Fn={key:0,class:"mb-4 p-3 bg-gray-100 rounded-md"},zn={class:"text-sm font-medium text-gray-900"},Ln={class:"text-xs text-gray-500 mt-1"},Rn={class:"mb-4"},On="post",qn="Add Note",Wn="Note added successfully!",Hn={__name:"TaskNoteModal",props:{show:Boolean,taskForNote:Object},emits:["close","note-added"],setup(u,{emit:g}){const m=u,s=g,t=Se({note:""}),p=W(()=>{var n;return`Add Note to Task: "${(n=m.taskForNote)==null?void 0:n.name}"`}),v=W(()=>{var n;return`/api/tasks/${(n=m.taskForNote)==null?void 0:n.id}/notes`});le(()=>m.show,n=>{n&&Object.assign(t,{note:""})},{immediate:!0});const h=n=>{s("note-added",n),s("close")},c=()=>{s("close")};return(n,o)=>(a(),B(De,{show:u.show,title:p.value,"api-endpoint":v.value,"http-method":On,"form-data":t,"submit-button-text":qn,"success-message":Wn,onClose:c,onSubmitted:h},{default:k(({errors:l})=>[e("div",Un,[u.taskForNote?(a(),i("div",Fn,[e("p",zn,G(u.taskForNote.name),1),e("p",Ln,"Status: "+G(u.taskForNote.status),1)])):_("",!0),e("div",Rn,[r(O,{for:"task-note-content",value:"Note Content"}),U(e("textarea",{id:"task-note-content","onUpdate:modelValue":o[0]||(o[0]=d=>t.note=d),class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full h-32",placeholder:"Enter your note...",required:""},null,512),[[re,t.note]]),r(X,{message:l.note?l.note[0]:"",class:"mt-2"},null,8,["message"])])])]),_:1},8,["show","title","api-endpoint","form-data"]))}},Kn={class:"task-history-list"},Jn={key:0,class:"text-center py-4"},Yn={key:1,class:"text-gray-500 text-sm py-2"},Qn={key:2,class:"space-y-3"},Zn={class:"flex items-start"},Xn={class:"text-xl mr-2"},er={class:"text-sm text-gray-700"},tr={class:"text-xs text-gray-500 mt-1"},ar={__name:"TaskHistoryList",props:{activities:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},setup(u){const g=s=>s?new Date(s).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",m=s=>(console.log(s),s.includes("created")?"ðŸ†•":s.includes("started")?"ðŸš€":s.includes("paused")?"â¸ï¸":s.includes("resumed")?"â–¶ï¸":s.includes("unblocked")?"ðŸ”“":s.includes("blocked")?"â›”":s.includes("completed")?"âœ…":s.includes("revised")?"ðŸ”„":s.includes("deleted")?"ðŸ—‘ï¸":s.includes("assigned")?"ðŸ‘¤":s.includes("updated")?"ðŸ“":s.includes("added note")?"ðŸ—’ï¸":s.includes("commented")?"ðŸ’¬":"ðŸ“‹");return(s,t)=>(a(),i("div",Kn,[u.loading?(a(),i("div",Jn,t[0]||(t[0]=[e("div",{class:"inline-block animate-spin rounded-full h-6 w-6 border-t-2 border-b-2 border-indigo-500"},null,-1),e("p",{class:"mt-2 text-gray-500"},"Loading activity history...",-1)]))):u.activities.length===0?(a(),i("div",Yn," No activity history available for this task. ")):(a(),i("div",Qn,[(a(!0),i(Z,null,ie(u.activities,p=>{var v;return a(),i("div",{key:p.id,class:"p-3 bg-gray-50 rounded-md"},[e("div",Zn,[e("span",Xn,G(m(p.description)),1),e("div",null,[e("p",er,G(p.description),1),e("p",tr," By "+G(((v=p.causer)==null?void 0:v.name)||"System")+" on "+G(g(p.created_at)),1)])])])}),128))]))]))}},lr=Qe(ar,[["__scopeId","data-v-423d54af"]]),ac=async()=>{try{return(await ne.get("/api/assigned-tasks")).data}catch(u){throw console.error("Error fetching assigned tasks:",u),ce("Failed to load assigned tasks"),u}},lc=async u=>{try{return(await ne.get(`/api/projects/${u}/tasks`)).data}catch(g){throw console.error("Error fetching project tasks:",g),ce("Failed to load project tasks"),g}},sc=async u=>{try{return(await ne.get(`/api/projects/${u}/due-and-overdue-tasks`)).data}catch(g){throw console.error("Error fetching due and overdue tasks:",g),ce("Failed to load due and overdue tasks"),g}},sr=async u=>{if(!u||u.status==="In Progress")return u;try{Me("Starting task...");const g=await ne.post(`/api/tasks/${u.id}/start`);return ye("Task started successfully"),g.data}catch(g){throw console.error("Error starting task:",g),ce("Failed to start task. Please try again."),g}},or=async u=>{if(!u||u.status!=="In Progress")return he('Task can only be paused from "In Progress" status.'),u;try{Me("Pausing task...");const g=await ne.post(`/api/tasks/${u.id}/pause`);return ye("Task paused successfully"),g.data}catch(g){throw console.error("Error pausing task:",g),ce("Failed to pause task. Please try again."),g}},ir=async u=>{if(!u||u.status!=="Paused")return he('Task can only be resumed from "Paused" status.'),u;try{Me("Resuming task...");const g=await ne.post(`/api/tasks/${u.id}/resume`);return ye("Task resumed successfully"),g.data}catch(g){throw console.error("Error resuming task:",g),ce("Failed to resume task. Please try again."),g}},nr=async u=>{if(!u||u.status==="Done")return u;if(u.status!=="In Progress")throw he("Task must be started before it can be completed"),new Error("Task must be started before it can be completed");try{Me("Completing task...");const g=await ne.patch(`/api/tasks/${u.id}/complete`);ye("Task completed successfully");const m=g.data;if(m!=null&&m.needs_approval){const s=(m==null?void 0:m.creator_name)||"the creator";Me(`This task requires approval. A notification has been sent to ${s}.`)}return m}catch(g){throw console.error("Error completing task:",g),g.response&&g.response.status===422?he(g.response.data.message||"Task must be started before it can be completed"):ce("Failed to complete task. Please try again."),g}},rr=async(u,g)=>{if(!u||u.status==="Blocked")return he("Task is already blocked."),u;if(u.status==="Done")return he("Completed tasks cannot be blocked."),u;if(!g)throw he("Please provide a reason for blocking the task"),new Error("Blocking reason is required");try{Me("Blocking task...");const m=await ne.post(`/api/tasks/${u.id}/block`,{reason:g});return ye("Task blocked successfully"),m.data}catch(m){throw console.error("Error blocking task:",m),ce("Failed to block task. Please try again."),m}},ur=async u=>{if(!u||u.status!=="Blocked")return he("Task is not in a blocked state."),u;try{Me("Unblocking task...");const g=await ne.post(`/api/tasks/${u.id}/unblock`);return ye("Task unblocked successfully"),g.data}catch(g){throw console.error("Error unblocking task:",g),ce("Failed to unblock task. Please try again."),g}},dr=async u=>{if(!u||u.status!=="Done")return he("Only completed tasks can be revised."),u;try{Me("Revising task...");const g=await ne.post(`/api/tasks/${u.id}/revise`);return ye("Task revised successfully"),g.data}catch(g){throw console.error("Error revising task:",g),g.response&&g.response.status===422?he(g.response.data.message||"Only completed tasks can be revised"):ce("Failed to revise task. Please try again."),g}},cr=async u=>{if(!u)return!1;if(u.status!=="To Do")throw he("Only tasks in To Do status can be deleted"),new Error("Only tasks in To Do status can be deleted");if(!confirm("Are you sure you want to delete this task? This action cannot be undone."))return!1;try{return Me("Deleting task..."),await ne.delete(`/api/tasks/${u.id}`),ye("Task deleted successfully"),!0}catch(g){throw console.error("Error deleting task:",g),ce("Failed to delete task. Please try again."),g}},mr=u=>{switch(u){case"To Do":return"bg-yellow-100 text-yellow-800";case"In Progress":return"bg-blue-100 text-blue-800";case"Paused":return"bg-orange-100 text-orange-800";case"Blocked":return"bg-red-100 text-red-800";case"Done":return"bg-green-100 text-green-800";case"Archived":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},oc=u=>{switch(u){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},ic=u=>u?u.charAt(0).toUpperCase()+u.slice(1):"Medium",vr={class:"mt-4"},pr={__name:"ChecklistCreator",props:{modelValue:{type:Array,required:!0},placeholder:{type:String,default:"e.g., Task 1, Task 2, Task 3"},label:{type:String,default:"Checklist Items"},density:{type:String,default:"spacious",validator:u=>["spacious","tight","notes"].includes(u)}},emits:["update:modelValue"],setup(u,{emit:g}){const m=u,s=g,t=T([]),p=T([]),v=T(!1);le(()=>m.modelValue,l=>{v.value=!0,t.value=JSON.parse(JSON.stringify(l)),(t.value.length===0||t.value[t.value.length-1].name.trim()!=="")&&t.value.push({name:"",completed:!1}),Ie(()=>{v.value=!1})},{immediate:!0,deep:!0}),le(()=>t.value,l=>{v.value||s("update:modelValue",l)},{deep:!0});function h(l){t.value.splice(l,1),t.value.length===0&&t.value.push({name:"",completed:!1})}function c(l){l===t.value.length-1&&t.value[l].name.trim()!==""&&t.value.push({name:"",completed:!1})}function n(l){l<t.value.length-1&&Ie(()=>{var d;(d=p.value[l+1])==null||d.focus()})}const o=W(()=>m.density==="tight"?{listClass:"space-y-1",itemClass:"flex items-center space-x-1",inputClass:"px-1 py-1 text-sm"}:m.density==="notes"?{listClass:"space-y-0.5",itemClass:"flex items-center space-x-1",inputClass:"px-1 py-0.5 text-sm border-transparent focus:border-transparent focus:ring-0 bg-transparent"}:{listClass:"space-y-2",itemClass:"flex items-center space-x-2",inputClass:""});return(l,d)=>(a(),i("div",vr,[u.label?(a(),B(O,{key:0,value:u.label},null,8,["value"])):_("",!0),e("ul",{class:q(o.value.listClass)},[(a(!0),i(Z,null,ie(t.value,(f,M)=>(a(),i("li",{key:M,class:q(o.value.itemClass)},[u.density==="notes"?(a(),B(N(Ct),{key:0,class:"h4 w-4",onClick:b=>h(M)},null,8,["onClick"])):_("",!0),r(ge,{modelValue:f.name,"onUpdate:modelValue":b=>f.name=b,type:"text",class:q(["flex-1",o.value.inputClass]),placeholder:M===t.value.length-1?u.placeholder:"",onInput:b=>c(M),onKeyup:We(Pt(b=>n(M),["prevent"]),["enter"]),ref_for:!0,ref:b=>{b&&(p.value[M]=b)}},null,8,["modelValue","onUpdate:modelValue","class","placeholder","onInput","onKeyup"]),t.value.length>1&&u.density!=="notes"?(a(),B(pt,{key:1,type:"button",onClick:b=>h(M)},{default:k(()=>[r(N(Ct),{class:"h-4 w-4"})]),_:2},1032,["onClick"])):_("",!0)],2))),128))],2)]))}},fr={class:"p-6"},gr={class:"text-lg font-medium text-gray-900 mb-4"},br={class:"mb-4"},yr=["placeholder"],hr={class:"flex justify-end space-x-3"},kr={__name:"BlockReasonModal",props:{show:{type:Boolean,default:!1},title:{type:String,default:"Block Task"},confirmText:{type:String,default:"Block Task"},placeholder:{type:String,default:"Enter reason for blocking..."},initialReason:{type:String,default:""},disabled:{type:Boolean,default:!1}},emits:["close","confirm"],setup(u,{emit:g}){const m=u,s=g,t=T("");le(()=>m.show,h=>{h&&(t.value=m.initialReason||"")},{immediate:!0});const p=()=>s("close"),v=()=>{const h=(t.value||"").trim();h&&s("confirm",h)};return(h,c)=>(a(),B(Ve,{show:u.show,onClose:p},{default:k(()=>[e("div",fr,[e("h2",gr,G(u.title),1),e("div",br,[c[1]||(c[1]=e("p",{class:"text-sm text-gray-600 mb-2"},"Please provide a reason:",-1)),U(e("textarea",{"onUpdate:modelValue":c[0]||(c[0]=n=>t.value=n),class:"w-full rounded-md shadow-sm border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",rows:"3",placeholder:u.placeholder},null,8,yr),[[re,t.value]])]),e("div",hr,[r(Fe,{onClick:p},{default:k(()=>c[2]||(c[2]=[A("Cancel",-1)])),_:1,__:[2]}),r(ve,{onClick:v,disabled:u.disabled||!t.value.trim(),class:"bg-red-600 hover:bg-red-700"},{default:k(()=>[A(G(u.confirmText),1)]),_:1},8,["disabled"])])])]),_:1},8,["show"]))}},xr={key:0,class:"text-center py-8 text-gray-500"},wr={key:1,class:"text-center py-8 text-red-600"},_r={key:2,class:"space-y-6"},Ar={class:"bg-gray-50 p-4 rounded-lg shadow-sm"},Tr={class:"text-xl font-bold text-gray-900 mb-2"},Mr={class:"flex flex-wrap items-center gap-y-1 gap-x-2 text-sm text-gray-600 mb-4"},$r={key:0,class:"text-indigo-600 font-medium"},Cr={class:"w-full flex items-center gap-1 mt-1"},Sr={key:0,class:"text-blue-700 font-bold uppercase tracking-wider text-[10px] bg-blue-50 px-1.5 py-0.5 rounded border border-blue-100"},Gr={key:1,class:"text-gray-400 mx-0.5"},jr={key:2,class:"text-purple-600 font-medium"},Pr={class:"text-gray-700 leading-relaxed"},Er={class:"mt-4 flex flex-wrap gap-2"},Ir={key:0,class:"text-xs text-gray-500 mt-1"},Vr={key:0,class:"bg-yellow-50 border-l-4 border-red-400 p-4 rounded-lg shadow-sm"},Dr={class:"flex items-center"},Br={class:"ml-3"},Nr={class:"mt-2 text-sm text-yellow-700"},Ur={key:1,class:"bg-amber-50 border-l-4 border-amber-400 p-4 rounded-lg shadow-sm"},Fr={class:"flex items-start"},zr={class:"ml-3"},Lr={class:"mt-1 text-sm text-amber-700"},Rr={key:0},Or={class:"font-medium"},qr={class:"text-red-500"},Wr={key:2,class:"bg-blue-50 border-l-4 border-blue-400 p-3 rounded-lg shadow-sm"},Hr={class:"space-y-4 p-4 bg-white rounded-lg shadow-sm mb-4"},Kr={class:"flex justify-between items-center border-b pb-2 mb-4"},Jr={key:0},Yr={key:1},Qr={key:0,class:"mb-4"},Zr={class:"flex justify-end mt-4"},Xr={key:2,class:"text-gray-500 text-sm py-2"},eu={class:"space-y-4 p-4 bg-white rounded-lg shadow-sm"},tu={class:"flex items-center justify-between py-2 border-b border-gray-100"},au={class:"flex-1 text-right"},lu={key:0,class:"text-xs text-gray-400 ml-1"},su={key:1,class:"flex items-center space-x-2"},ou={class:"flex items-center justify-between py-2 border-b border-gray-100"},iu={class:"flex-1 text-right"},nu={key:0,class:"text-xs text-gray-400 ml-1"},ru={key:1,class:"flex items-center space-x-2"},uu={class:"flex items-center justify-between py-2 border-b border-gray-100"},du={class:"flex-1 text-right"},cu={key:0,class:"text-xs text-gray-400 ml-1"},mu={key:1,class:"flex items-center space-x-2"},vu={class:"flex items-center justify-between py-2 border-b border-gray-100"},pu={class:"flex items-center gap-1 min-w-[100px]"},fu={class:"flex-1 text-right"},gu={key:0,class:"text-xs text-gray-400 ml-1"},bu={key:1,class:"flex items-center justify-end space-x-2"},yu={class:"flex items-center justify-between py-2 border-b border-gray-100"},hu={class:"text-gray-700"},ku={class:"flex items-start py-2 border-b border-gray-100"},xu={class:"flex-1 flex flex-wrap gap-2"},wu={key:0,class:"text-gray-500 text-sm"},_u={class:"bg-white p-4 rounded-lg shadow-sm"},Au={class:"mb-4 border-b pb-3 flex flex-col gap-3"},Tu={class:"flex items-center justify-between"},Mu={class:"flex items-center gap-2"},$u=["disabled"],Cu={key:0,class:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Su={class:"flex items-center gap-3"},Gu={class:"relative inline-flex items-center px-4 py-2 rounded-md border border-dashed border-indigo-300 text-indigo-700 bg-indigo-50 hover:bg-indigo-100 cursor-pointer transition"},ju=["disabled"],Pu={key:0,class:"flex flex-wrap gap-2"},Eu=["title"],Iu=["onClick"],Vu={key:0,class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3"},Du={key:1,class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3"},Bu={class:"aspect-video bg-gray-50 flex items-center justify-center overflow-hidden"},Nu=["src","alt","onClick"],Uu=["onClick"],Fu={class:"p-2 flex items-center justify-between"},zu=["title","onClick"],Lu=["onClick"],Ru={key:2,class:"text-sm text-gray-500"},Ou={class:"bg-white p-4 rounded-lg shadow-sm"},qu={class:"flex justify-between items-center mb-4 border-b pb-2"},Wu={key:0,class:"space-y-3"},Hu={class:"text-sm text-gray-700"},Ku={class:"text-xs text-gray-500 mt-1"},Ju={key:1,class:"text-gray-500 text-sm py-2"},Yu={class:"bg-white p-4 rounded-lg shadow-sm"},Qu={key:3,class:"text-center py-8 text-gray-500"},Zu={key:4,class:"mt-4 flex flex-col items-center"},Xu={key:0,class:"text-xs text-red-500 mt-1"},ed={class:"p-6"},td={class:"flex items-center justify-between mb-4"},ad={class:"mt-6 flex justify-end"},ld={class:"p-4 sm:p-6 w-full max-w-4xl"},sd={class:"flex justify-between items-center mb-3"},od=["title"],id={class:"bg-black/5 rounded-lg overflow-hidden",style:{"min-height":"320px"}},nd=["src"],rd=["src"],ud={key:2,class:"p-6 text-center text-gray-700"},dd=["href"],cd={key:3,class:"p-6 text-center text-gray-500"},md={__name:"TaskDetailSidebar",props:{taskId:{type:Number,required:!0},projectId:{type:Number,required:!0},projectUsers:{type:Array,default:()=>[]}},emits:["close","task-updated","task-deleted"],setup(u,{emit:g}){const m=u,s=g,t=T(null),p=T(!0),v=T(""),h=W(()=>{var S,y;return((y=(S=t.value)==null?void 0:S.milestone)==null?void 0:y.project_id)||null});ua(h);const c=W(()=>{const S=h.value;return S?{id:S}:null}),n=da(c),{canDo:o,canManage:l}=st(h),d=l("projects",n),f=W(()=>o("change_due_date",n).value===!0||d.value===!0),M=T(!1),b=T(!1),I=T(!1),E=T(!1),$=T(null),x=T(null),j=T(null),z=T(null),L=T(!1),H=T([]),P=T(!1),V=T([]),K=T(!1),D=T(!1),C=T([]),Q=async()=>{if(m.taskId){K.value=!0;try{const S=await window.axios.get("/api/files",{params:{model_type:"Task",model_id:m.taskId}});V.value=S.data||[]}catch(S){console.error("Error fetching task files",S)}finally{K.value=!1}}},ue=S=>{C.value=Array.from(S.target.files||[])},ee=async()=>{if(!C.value.length)return;D.value=!0;const S=new FormData;C.value.forEach((y,fe)=>S.append(`files[${fe}]`,y)),S.append("model_type","Task"),S.append("model_id",m.taskId);try{await window.axios.post("/api/files",S,{headers:{"Content-Type":"multipart/form-data"}}),ye("Files uploaded"),C.value=[],await Q()}catch(y){console.error("Upload failed",y),ce("Failed to upload files")}finally{D.value=!1}},se=async S=>{if(await ca(`Delete file "${S.filename}"?`,{confirmText:"Delete",cancelText:"Cancel",type:"warning"}))try{await window.axios.delete(`/api/files/${S.id}`),ye("File deleted"),await Q()}catch(fe){console.error("Delete failed",fe),ce("Failed to delete file")}},J=T(!1),oe=T(null),me=S=>{oe.value=S,J.value=!0},Ge=()=>{J.value=!1,oe.value=null},je=S=>S?S.thumbnail_url?S.thumbnail_url:S.mime_type&&S.mime_type.includes("image")&&S.path_url?S.path_url:null:null,Be=S=>{if(!S)return{type:"none"};const y=S.path_url||null,fe=(S.mime_type||"").toLowerCase();return y?fe.includes("image")?{type:"image",src:y}:fe.includes("pdf")||fe.includes("text")||fe.includes("html")?{type:"iframe",src:y}:{type:"external_link",url:y}:{type:"none"}},xe=W(()=>Be(oe.value)),ot=[{value:"low",label:"Low"},{value:"medium",label:"Medium"},{value:"high",label:"High"}],Ne=T(!1),_e=T(!1),F=T([{name:"",completed:!1}]),w=T(!1),te=async()=>{p.value=!0,v.value="";try{const S=await window.axios.get(`/api/tasks/${m.taskId}`);t.value=S.data,$.value=t.value.assigned_to_id||null,x.value=t.value.due_date||null,j.value=t.value.priority||"medium",z.value=t.value.effort||null,R()}catch(S){v.value="Failed to load task details.",console.error("Error fetching task details:",S)}finally{p.value=!1}},R=async()=>{P.value=!0;try{const S=await window.axios.get("/api/activities",{params:{subject_type:"App\\Models\\Task",subject_id:m.taskId}});H.value=S.data}catch(S){console.error("Error fetching task activities:",S)}finally{P.value=!1}};le(()=>m.taskId,S=>{S?(te(),Q()):(t.value=null,V.value=[])},{immediate:!0});const pe=T([]),it=T(!1),Ft=W(()=>((pe.value&&pe.value.length?pe.value:m.projectUsers)||[]).map(y=>({value:y.id,label:y.name}))),zt=async()=>{const S=h.value;if(S){it.value=!0;try{const y=await window.axios.get(`/api/projects/${S}/users`);pe.value=y.data||[]}catch(y){console.error("Failed to fetch project users",y),ce("Could not load project users")}finally{it.value=!1}}},Lt=async()=>{if(!t.value||$.value===t.value.assigned_to_id){M.value=!1;return}try{const S=await window.axios.patch(`/api/tasks/${t.value.id}`,{assigned_to_user_id:$.value});t.value=S.data,s("task-updated",t.value),R()}catch(S){console.error("Error updating assigned user:",S),$.value=t.value.assigned_to_id,ce("Failed to update assigned user. Please try again.")}finally{M.value=!1}},Rt=async()=>{if(!t.value||x.value===t.value.due_date){b.value=!1;return}try{const S=await window.axios.patch(`/api/tasks/${t.value.id}`,{due_date:x.value});t.value=S.data,s("task-updated",t.value),R()}catch(S){console.error("Error updating due date:",S),x.value=t.value.due_date,ce("Failed to update due date. Please try again.")}finally{b.value=!1}},Ot=async()=>{if(!t.value||j.value===t.value.priority){I.value=!1;return}try{const S=await window.axios.patch(`/api/tasks/${t.value.id}`,{priority:j.value});t.value=S.data,s("task-updated",t.value)}catch(S){console.error("Error updating priority:",S),j.value=t.value.priority,ce("Failed to update priority. Please try again.")}finally{I.value=!1}},gt=async()=>{const S=z.value===""?null:parseInt(z.value);if(!t.value||S===t.value.effort){E.value=!1;return}try{const y=await window.axios.patch(`/api/tasks/${t.value.id}`,{effort:S});t.value=y.data,s("task-updated",t.value)}catch(y){console.error("Error updating effort:",y),z.value=t.value.effort,ce("Failed to update effort. Please try again.")}finally{E.value=!1}},qt=()=>{Ne.value=!0},Wt=()=>{te(),Ne.value=!1},Ht=async()=>{try{await cr(t.value),s("task-deleted",t.value.id),s("close")}catch(S){console.error("Error deleting task:",S)}},Kt=async()=>{try{t.value=await sr(t.value),s("task-updated",t.value),R()}catch(S){console.error("Error starting task:",S)}},Jt=async()=>{try{t.value=await or(t.value),s("task-updated",t.value),R()}catch(S){console.error("Error pausing task:",S)}},Yt=async()=>{try{t.value=await ir(t.value),s("task-updated",t.value),R()}catch(S){console.error("Error resuming task:",S)}},Qt=async()=>{try{t.value=await nr(t.value),s("task-updated",t.value),R()}catch(S){console.error("Error completing task:",S)}},Zt=async()=>{try{t.value=await dr(t.value),s("task-updated",t.value),R()}catch(S){console.error("Error revising task:",S)}},Xt=()=>{var S;_e.value=!_e.value,_e.value&&((S=t.value.details)!=null&&S.checklist&&t.value.details.checklist.length>0?(F.value=JSON.parse(JSON.stringify(t.value.details.checklist)),F.value[F.value.length-1].name!==""&&F.value.push({name:"",completed:!1})):F.value=[{name:"",completed:!1}])},ea=async()=>{if(!w.value){w.value=!0;try{const S=F.value.filter(Pe=>Pe.name.trim()!==""),y={details:{...t.value.details,checklist:S}},fe=await window.axios.patch(`/api/tasks/${t.value.id}`,y);t.value=fe.data,_e.value=!1,ye("Checklist saved successfully"),s("task-updated",t.value)}catch(S){console.error("Error saving checklist:",S),ce("Failed to save checklist")}finally{w.value=!1}}},Xe=T(!1),ta=()=>{Xe.value=!0},aa=async S=>{try{t.value=await rr(t.value,S),ye("Task blocked successfully"),s("task-updated",t.value),R(),Xe.value=!1}catch(y){console.error("Error blocking task:",y)}},la=async()=>{try{t.value=await ur(t.value),s("task-updated",t.value),R()}catch(S){console.error("Error unblocking task:",S)}},sa=W(()=>t.value?mr(t.value.status):""),nt=W(()=>{var y,fe,Pe,ze;if(!H.value||((y=t.value)==null?void 0:y.status)!=="Blocked")return null;const S=H.value.find(Le=>{var Re,Oe;return Le.event==="updated"&&((Oe=(Re=Le.properties)==null?void 0:Re.attributes)==null?void 0:Oe.status)==="Blocked"});return S?(console.log(S.properties),{causer:((fe=S.causer)==null?void 0:fe.name)||"Unknown",reason:((ze=(Pe=S.properties)==null?void 0:Pe.attributes)==null?void 0:ze.block_reason)||"No reason provided."}):null});return(S,y)=>{var fe,Pe,ze,Le,Re,Oe,bt,yt,ht,kt,xt,wt;return a(),i("div",null,[p.value?(a(),i("div",xr," Loading task details... ")):v.value?(a(),i("div",wr,G(v.value),1)):t.value?(a(),i("div",_r,[e("div",Ar,[e("h4",Tr,G(t.value.name),1),e("div",Mr,[e("span",{class:q(["px-2 py-1 rounded-full text-xs font-medium",sa.value])},G(t.value.status),3),t.value.task_type?(a(),i("span",$r," | "+G((fe=t.value.task_type)==null?void 0:fe.name)+" | ",1)):_("",!0),e("div",Cr,[(Pe=t.value.milestone)!=null&&Pe.project?(a(),i("span",Sr,G((Le=(ze=t.value.milestone)==null?void 0:ze.project)==null?void 0:Le.name),1)):_("",!0),(Re=t.value.milestone)!=null&&Re.project&&((Oe=t.value.milestone)!=null&&Oe.name)?(a(),i("span",Gr,"/")):_("",!0),(bt=t.value.milestone)!=null&&bt.name?(a(),i("span",jr,G((yt=t.value.milestone)==null?void 0:yt.name),1)):_("",!0)])]),e("p",Pr,G(t.value.description||"No description provided."),1),e("div",Er,[t.value.status==="To Do"?(a(),B(ve,{key:0,onClick:Kt,class:"bg-blue-600 hover:bg-blue-700"},{default:k(()=>y[19]||(y[19]=[A(" Start Task ",-1)])),_:1,__:[19]})):t.value.status==="In Progress"?(a(),B(ve,{key:1,onClick:Jt,class:"bg-orange-600 hover:bg-orange-700"},{default:k(()=>y[20]||(y[20]=[A(" Pause Task ",-1)])),_:1,__:[20]})):t.value.status==="Paused"?(a(),B(ve,{key:2,onClick:Yt,class:"bg-blue-600 hover:bg-blue-700"},{default:k(()=>y[21]||(y[21]=[A(" Resume Task ",-1)])),_:1,__:[21]})):t.value.status==="Blocked"?(a(),B(ve,{key:3,onClick:la,class:"bg-green-600 hover:bg-green-700"},{default:k(()=>y[22]||(y[22]=[A(" Unblock Task ",-1)])),_:1,__:[22]})):_("",!0),t.value.status==="To Do"||t.value.status==="In Progress"||t.value.status==="Paused"?(a(),B(ve,{key:4,onClick:ta,class:"bg-red-600 hover:bg-red-700"},{default:k(()=>y[23]||(y[23]=[A(" Block Task ",-1)])),_:1,__:[23]})):_("",!0),t.value.status==="In Progress"?(a(),B(ve,{key:5,onClick:Qt,class:"bg-green-600 hover:bg-green-700"},{default:k(()=>y[24]||(y[24]=[A(" Complete Task ",-1)])),_:1,__:[24]})):_("",!0),t.value.status==="Done"?(a(),B(ve,{key:6,onClick:Zt,class:"bg-yellow-600 hover:bg-yellow-700"},{default:k(()=>y[25]||(y[25]=[A(" Revise Task ",-1)])),_:1,__:[25]})):_("",!0)]),t.value.status==="Done"?(a(),i("div",Ir,' Revising will change the task status back to "To Do" ')):_("",!0)]),t.value.status==="Blocked"&&nt.value?(a(),i("div",Vr,[e("div",Dr,[y[27]||(y[27]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.487 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11.75 13a.75.75 0 01-1.5 0v-2.25a.75.75 0 011.5 0V13zm-1.5-7.5a.75.75 0 011.5 0v1.5a.75.75 0 01-1.5 0V5.5z","clip-rule":"evenodd"})])],-1)),e("div",Br,[y[26]||(y[26]=e("h3",{class:"text-sm font-medium text-yellow-800"},"Task Blocked",-1)),e("div",Nr,[e("p",null,"This task was blocked by **"+G(nt.value.causer)+"** with the following reason:",1),e("p",null,G(nt.value.reason),1)])])])])):_("",!0),t.value.needs_approval?(a(),i("div",Ur,[e("div",Fr,[y[32]||(y[32]=e("svg",{class:"h-5 w-5 text-amber-500 mt-0.5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.487 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0V9a1 1 0 112 0v4zm-1 4a1.25 1.25 0 100-2.5A1.25 1.25 0 0010 17z","clip-rule":"evenodd"})],-1)),e("div",zr,[y[31]||(y[31]=e("h3",{class:"text-sm font-semibold text-amber-800"},"Approval required",-1)),e("p",Lr,[y[29]||(y[29]=A(" This task needs approval",-1)),t.value.creator_name?(a(),i("span",Rr,[y[28]||(y[28]=A(" from ",-1)),e("span",Or,G(t.value.creator_name),1)])):_("",!0),y[30]||(y[30]=A(". ",-1))]),e("p",qr,"Do Not, complete the task and make sure you report it to "+G(t.value.creator_name)+" or Project Manager",1)])])])):_("",!0),t.value.requires_qa?(a(),i("div",Wr,y[33]||(y[33]=[tt('<div class="flex items-start gap-2"><svg class="h-5 w-5 text-blue-500 mt-0.5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6.375c-1.148 0-2.285-.22-3.351-.651l-2.262-.906a1.125 1.125 0 00-1.537 1.04V11.25c0 5.157 3.33 9.8 8.25 11.25 4.92-1.45 8.25-6.093 8.25-11.25V5.858a1.125 1.125 0 00-1.537-1.04l-2.262.906A9.568 9.568 0 0112 6.375z"></path><path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75l2.25 2.25L15 11.25"></path></svg><div class="text-sm text-blue-800"> This task requires QA verification once completed. </div></div>',1)]))):_("",!0),e("div",Hr,[e("div",Kr,[y[34]||(y[34]=e("h5",{class:"text-lg font-semibold text-gray-800"},"Task Checklist",-1)),e("button",{onClick:Xt,class:"text-indigo-600 hover:text-indigo-800 text-sm font-medium flex items-center"},[_e.value?(a(),i("span",Yr,"Cancel")):(a(),i("span",Jr,G((ht=t.value.details)!=null&&ht.checklist&&t.value.details.checklist.length>0?"Edit Checklist":"Add Checklist"),1))])]),_e.value?(a(),i("div",Qr,[r(pr,{modelValue:F.value,"onUpdate:modelValue":y[0]||(y[0]=Y=>F.value=Y),placeholder:"e.g., Review design, Update documentation",label:"Checklist Items",density:"notes"},null,8,["modelValue"]),e("div",Zr,[r(ve,{onClick:ea,disabled:w.value,class:"flex items-center space-x-1"},{default:k(()=>[r(N(Si),{class:"h-4 w-4"}),y[35]||(y[35]=e("span",null,"Save Checklist",-1))]),_:1,__:[35]},8,["disabled"])])])):_("",!0),(kt=t.value.details)!=null&&kt.checklist&&t.value.details.checklist.length>0&&!_e.value?(a(),B(ha,{key:1,items:t.value.details.checklist,"api-endpoint":`/api/tasks/${t.value.id}`,title:"Items to complete:","payload-transformer":Y=>({details:{...t.value.details,checklist:Y}})},null,8,["items","api-endpoint","payload-transformer"])):_("",!0),(!((xt=t.value.details)!=null&&xt.checklist)||t.value.details.checklist.length===0)&&!_e.value?(a(),i("div",Xr,' No checklist items for this task yet. Click "Add Checklist" to create one. ')):_("",!0)]),e("div",eu,[y[42]||(y[42]=e("h5",{class:"text-lg font-semibold text-gray-800 border-b pb-2 mb-4"},"Task Attributes",-1)),e("div",tu,[r(O,{class:"min-w-[100px] text-gray-600"},{default:k(()=>y[36]||(y[36]=[A("Assigned To:",-1)])),_:1,__:[36]}),e("div",au,[M.value?(a(),i("div",su,[r(be,{id:"edit-assigned-to",modelValue:$.value,"onUpdate:modelValue":y[2]||(y[2]=Y=>$.value=Y),options:Ft.value,"value-key":"value","label-key":"label",placeholder:"Unassigned",class:"mt-1 flex-1","allow-empty":!0},null,8,["modelValue","options"]),e("button",{onClick:Lt,class:"text-green-600 hover:text-green-800 text-sm font-medium"},"Save"),e("button",{onClick:y[3]||(y[3]=Y=>M.value=!1),class:"text-gray-600 hover:text-gray-800 text-sm font-medium"},"Cancel")])):(a(),i("div",{key:0,onClick:y[1]||(y[1]=Y=>t.value.status!=="Done"?(zt(),M.value=!0):he("Cannot change assignment for a completed task. Use the Revise button to change the task status first.")),class:q(["cursor-pointer",{"text-indigo-600 hover:text-indigo-800":t.value.status!=="Done","text-gray-500":t.value.status==="Done"}])},[A(G(((wt=t.value.assigned_to)==null?void 0:wt.name)||"Unassigned")+" ",1),t.value.status!=="Done"?(a(),i("span",lu,"(Click to edit)")):_("",!0)],2))])]),e("div",ou,[r(O,{class:"min-w-[100px] text-gray-600"},{default:k(()=>y[37]||(y[37]=[A("Due Date:",-1)])),_:1,__:[37]}),e("div",iu,[b.value?(a(),i("div",ru,[r(ge,{id:"edit-due-date",modelValue:x.value,"onUpdate:modelValue":y[5]||(y[5]=Y=>x.value=Y),type:"date",class:"mt-1 flex-1"},null,8,["modelValue"]),e("button",{onClick:Rt,class:"text-green-600 hover:text-green-800 text-sm font-medium"},"Save"),e("button",{onClick:y[6]||(y[6]=Y=>b.value=!1),class:"text-gray-600 hover:text-gray-800 text-sm font-medium"},"Cancel")])):(a(),i("div",{key:0,onClick:y[4]||(y[4]=Y=>f.value?b.value=!0:null),class:q(["cursor-pointer",f.value?"text-indigo-600 hover:text-indigo-800":"text-gray-700 cursor-default"])},[A(G(t.value.due_date?N(ya)(t.value.due_date).format("MMM D, YYYY"):"No Due Date")+" ",1),f.value?(a(),i("span",nu,"(Click to edit)")):_("",!0)],2))])]),e("div",uu,[r(O,{class:"min-w-[100px] text-gray-600"},{default:k(()=>y[38]||(y[38]=[A("Priority:",-1)])),_:1,__:[38]}),e("div",du,[I.value?(a(),i("div",mu,[r(be,{id:"edit-priority",modelValue:j.value,"onUpdate:modelValue":y[8]||(y[8]=Y=>j.value=Y),options:ot,"value-key":"value","label-key":"label",placeholder:"Select priority",class:"mt-1 flex-1"},null,8,["modelValue"]),e("button",{onClick:Ot,class:"text-green-600 hover:text-green-800 text-sm font-medium"},"Save"),e("button",{onClick:y[9]||(y[9]=Y=>I.value=!1),class:"text-gray-600 hover:text-gray-800 text-sm font-medium"},"Cancel")])):(a(),i("div",{key:0,onClick:y[7]||(y[7]=Y=>t.value.status!=="Done"?I.value=!0:he("Cannot change priority for a completed task. Use the Revise button to change the task status first.")),class:q(["cursor-pointer",{"text-indigo-600 hover:text-indigo-800":t.value.status!=="Done","text-gray-500":t.value.status==="Done"}])},[e("span",{class:q({"text-red-600 font-medium":t.value.priority==="high","text-yellow-600 font-medium":t.value.priority==="medium","text-green-600 font-medium":t.value.priority==="low"})},G(t.value.priority?t.value.priority.charAt(0).toUpperCase()+t.value.priority.slice(1):"Medium"),3),t.value.status!=="Done"?(a(),i("span",cu,"(Click to edit)")):_("",!0)],2))])]),e("div",vu,[e("div",pu,[r(O,{class:"text-gray-600"},{default:k(()=>y[39]||(y[39]=[A("Effort:",-1)])),_:1,__:[39]}),e("button",{onClick:y[10]||(y[10]=Y=>L.value=!0),class:"text-gray-400 hover:text-indigo-600 transition-colors",title:"View Estimation Guide"},[r(N(Bt),{class:"h-4 w-4"})])]),e("div",fu,[E.value?(a(),i("div",bu,[r(ge,{id:"edit-effort",modelValue:z.value,"onUpdate:modelValue":y[12]||(y[12]=Y=>z.value=Y),type:"number",min:"0",class:"mt-1 w-20 text-right",placeholder:"Pts",onKeypress:We(gt,["enter"])},null,8,["modelValue"]),e("button",{onClick:gt,class:"text-green-600 hover:text-green-800 p-1"},[r(N(Ci),{class:"h-5 w-5"})]),e("button",{onClick:y[13]||(y[13]=Y=>E.value=!1),class:"text-red-600 hover:text-red-800 p-1"},[r(N($t),{class:"h-5 w-5"})])])):(a(),i("div",{key:0,onClick:y[11]||(y[11]=Y=>t.value.status!=="Done"?E.value=!0:he("Cannot change effort for a completed task.")),class:q(["cursor-pointer",{"text-indigo-600 hover:text-indigo-800":t.value.status!=="Done","text-gray-500":t.value.status==="Done"}])},[e("span",{class:q({"font-bold":t.value.effort})},G(t.value.effort?t.value.effort+" pts":"Not set"),3),t.value.status!=="Done"?(a(),i("span",gu,"(Click to edit)")):_("",!0)],2))])]),e("div",yu,[r(O,{class:"min-w-[100px] text-gray-600"},{default:k(()=>y[40]||(y[40]=[A("Created:",-1)])),_:1,__:[40]}),e("span",hu,G(t.value.created_at?new Date(t.value.created_at).toLocaleDateString():"N/A"),1)]),e("div",ku,[r(O,{class:"min-w-[100px] text-gray-600 mt-1"},{default:k(()=>y[41]||(y[41]=[A("Tags:",-1)])),_:1,__:[41]}),e("div",xu,[(a(!0),i(Z,null,ie(t.value.tags,Y=>(a(),i("span",{key:Y.id,class:"inline-flex items-center px-3 py-1 text-sm font-medium bg-indigo-100 text-indigo-800 rounded-full shadow-sm"},G(Y.name),1))),128)),!t.value.tags||t.value.tags.length===0?(a(),i("span",wu,"No tags")):_("",!0)])])]),e("div",_u,[e("div",Au,[e("div",Tu,[y[44]||(y[44]=e("h5",{class:"text-lg font-semibold text-gray-800"},"Files",-1)),e("div",Mu,[e("button",{type:"button",class:"inline-flex items-center px-4 py-2 rounded-md bg-indigo-600 text-white hover:bg-indigo-700 transition disabled:opacity-60 disabled:cursor-not-allowed",disabled:D.value||C.value.length===0,onClick:ee},[D.value?(a(),i("svg",Cu,y[43]||(y[43]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"},null,-1)]))):_("",!0),e("span",null,G(D.value?"Uploading...":"Upload"),1)],8,$u)])]),e("div",Su,[e("label",Gu,[y[45]||(y[45]=e("svg",{class:"h-5 w-5 mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1M4 12l1.5-1.5M20 12l-1.5-1.5M12 4v12"})],-1)),y[46]||(y[46]=e("span",{class:"font-medium"},"Choose Files",-1)),e("input",{class:"absolute inset-0 opacity-0 cursor-pointer",type:"file",multiple:"",onChange:ue,disabled:D.value},null,40,ju)]),y[47]||(y[47]=e("p",{class:"text-xs text-gray-500"},"You can select multiple files. Images, PDFs, Docs are supported.",-1))]),C.value.length?(a(),i("div",Pu,[(a(!0),i(Z,null,ie(C.value,(Y,Ue)=>(a(),i("span",{key:Ue,class:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-gray-100 text-gray-800 text-xs"},[y[48]||(y[48]=e("svg",{class:"h-4 w-4 text-indigo-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})],-1)),e("span",{class:"max-w-[160px] truncate",title:Y.name},G(Y.name),9,Eu),e("button",{type:"button",class:"text-gray-500 hover:text-red-600",onClick:Vd=>C.value=C.value.filter((Dd,oa)=>oa!==Ue)},"Ã—",8,Iu)]))),128))])):_("",!0)]),e("div",null,[K.value?(a(),i("div",Vu,[(a(),i(Z,null,ie(6,Y=>e("div",{key:Y,class:"h-28 bg-gray-100 rounded animate-pulse"})),64))])):V.value.length>0?(a(),i("div",Du,[(a(!0),i(Z,null,ie(V.value,Y=>(a(),i("div",{key:Y.id,class:"group relative rounded-lg border border-gray-200 overflow-hidden bg-white shadow-sm hover:shadow-md transition"},[e("div",Bu,[je(Y)?(a(),i("img",{key:0,src:je(Y),alt:Y.filename,class:"object-cover w-full h-full",onClick:Ue=>me(Y)},null,8,Nu)):(a(),i("div",{key:1,class:"text-gray-400",onClick:Ue=>me(Y)},y[49]||(y[49]=[e("svg",{class:"h-10 w-10",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})],-1)]),8,Uu))]),e("div",Fu,[e("button",{class:"text-xs text-blue-600 hover:underline truncate max-w-[70%] text-left",title:Y.filename,onClick:Ue=>me(Y)},G(Y.filename),9,zu),e("button",{class:"text-red-600 hover:text-red-800 text-xs",onClick:Ue=>se(Y)},"Delete",8,Lu)])]))),128))])):(a(),i("div",Ru,"No files attached."))])]),e("div",Ou,[e("div",qu,[y[51]||(y[51]=e("h5",{class:"text-lg font-semibold text-gray-800"},"Notes",-1)),r(ve,{onClick:qt,class:"bg-indigo-600 hover:bg-indigo-700 transition-colors"},{default:k(()=>y[50]||(y[50]=[A(" Add Note ",-1)])),_:1,__:[50]})]),t.value.notes&&t.value.notes.length>0?(a(),i("div",Wu,[(a(!0),i(Z,null,ie(t.value.notes,Y=>(a(),i("div",{key:Y.id,class:"p-3 bg-gray-50 rounded-md"},[e("p",Hu,G(Y.content),1),e("p",Ku," By "+G(Y.creator_name||"Unknown")+" on "+G(new Date(Y.created_at).toLocaleDateString()),1)]))),128))])):(a(),i("div",Ju,"No notes for this task yet."))]),e("div",Yu,[y[52]||(y[52]=e("h5",{class:"text-lg font-semibold text-gray-800 border-b pb-2 mb-4"},"History",-1)),r(lr,{activities:H.value,loading:P.value},null,8,["activities","loading"])])])):(a(),i("div",Qu," Select a task to view details. ")),t.value&&t.value.status!=="Done"?(a(),i("div",Zu,[r(pt,{onClick:Ht,disabled:t.value.status!=="To Do"},{default:k(()=>y[53]||(y[53]=[A(" Delete Task ",-1)])),_:1,__:[53]},8,["disabled"]),t.value.status!=="To Do"?(a(),i("p",Xu,"Task can only be deleted in 'To Do' status.")):_("",!0)])):_("",!0),r(Ve,{show:L.value,onClose:y[16]||(y[16]=Y=>L.value=!1),"max-width":"lg"},{default:k(()=>[e("div",ed,[e("div",td,[y[54]||(y[54]=e("h3",{class:"text-lg font-medium text-gray-900"},"Effort Estimation Guide",-1)),e("button",{onClick:y[14]||(y[14]=Y=>L.value=!1),class:"text-gray-400 hover:text-gray-500"},[r(N($t),{class:"h-6 w-6"})])]),r(Nt),e("div",ad,[r(Fe,{onClick:y[15]||(y[15]=Y=>L.value=!1)},{default:k(()=>y[55]||(y[55]=[A("Close",-1)])),_:1,__:[55]})])])]),_:1},8,["show"]),r(Hn,{show:Ne.value,"task-for-note":t.value,onClose:y[17]||(y[17]=Y=>Ne.value=!1),onNoteAdded:Wt},null,8,["show","task-for-note"]),r(kr,{show:Xe.value,title:"Block Task","confirm-text":"Block Task",placeholder:"Enter reason for blocking...",onClose:y[18]||(y[18]=Y=>Xe.value=!1),onConfirm:aa},null,8,["show"]),r(Ve,{show:J.value,onClose:Ge},{default:k(()=>[e("div",ld,[e("div",sd,[e("h3",{class:"text-lg font-semibold text-gray-800 truncate",title:oe.value&&oe.value.filename?oe.value.filename:""},G(oe.value&&oe.value.filename?oe.value.filename:"Preview"),9,od),e("button",{class:"text-gray-500 hover:text-gray-700",onClick:Ge},"âœ•")]),e("div",id,[A(G(xe.value.type)+" ",1),xe.value.type==="iframe"?(a(),i("iframe",{key:0,src:xe.value.src,class:"w-full h-[70vh]",frameborder:"0",allow:"autoplay; encrypted-media",allowfullscreen:""},null,8,nd)):xe.value.type==="image"?(a(),i("img",{key:1,src:xe.value.src,alt:"Preview",class:"w-full h-auto"},null,8,rd)):xe.value.type==="external_link"?(a(),i("div",ud,[y[56]||(y[56]=e("p",null,"This file can't be embedded. You can open it using the link below:",-1)),e("a",{href:xe.value.url,target:"_blank",class:"text-indigo-600 hover:underline break-all"},G(xe.value.url),9,dd)])):(a(),i("div",cd,"No preview available."))])])]),_:1},8,["show"])])}}},vd={key:1,class:"p-4 text-gray-500"},pd={key:0,class:"flex justify-end space-x-3"},fd={__name:"TaskSidebar",emits:["taskUpdated","taskDeleted"],setup(u){const g=T(null);return(m,s)=>(a(),B(Ut,{show:N($e).show,"onUpdate:show":N(rt),title:N($e).taskId?"Task Details":"Details",initialWidth:50},{content:k(()=>[N($e).taskId?(a(),B(md,{key:0,"task-id":N($e).taskId,"project-id":N($e).projectId,"project-users":N($e).projectUsers,ref_key:"taskDetailSidebarRef",ref:g,onClose:N(rt),onTaskUpdated:s[0]||(s[0]=t=>{m.$emit("taskUpdated",t)}),onTaskDeleted:s[1]||(s[1]=t=>{m.$emit("taskDeleted",t),N(rt)()})},null,8,["task-id","project-id","project-users","onClose"])):N($e).show?(a(),i("div",vd," No task selected or task ID is missing. ")):_("",!0)]),footer:k(()=>[N($e).taskId?(a(),i("div",pd,[g.value&&g.value.task&&g.value.task.status!=="In Progress"&&g.value.task.status!=="Done"?(a(),B(Fe,{key:0,onClick:g.value.startTask,class:"bg-blue-50 text-blue-700 hover:bg-blue-100"},{default:k(()=>s[2]||(s[2]=[A(" Start Task ",-1)])),_:1,__:[2]},8,["onClick"])):_("",!0),g.value&&g.value.task&&g.value.task.status==="In Progress"?(a(),B(Fe,{key:1,onClick:g.value.completeTask,class:"bg-green-50 text-green-700 hover:bg-green-100"},{default:k(()=>s[3]||(s[3]=[A(" Complete Task ",-1)])),_:1,__:[3]},8,["onClick"])):_("",!0),g.value&&g.value.task?(a(),B(pt,{key:2,onClick:g.value.deleteTask,class:"bg-red-50 text-red-700 hover:bg-red-100"},{default:k(()=>s[4]||(s[4]=[A(" Delete Task ",-1)])),_:1,__:[4]},8,["onClick"])):_("",!0)])):_("",!0)]),_:1},8,["show","onUpdate:show","title"]))}},dt=T(!1),qe=T([]),ct=T(!1);function gd(){const u=async()=>{var s;try{const t=await ne.get("/api/notices/unread");qe.value=((s=t.data)==null?void 0:s.data)||[],dt.value=qe.value.length>0}catch(t){console.error("Failed to fetch unread notices",t)}},g=async()=>{if(ct.value)try{const s=qe.value.map(t=>t.id);if(s.length===0)return;await ne.post("/api/notices/acknowledge",{notice_ids:s}),m()}catch(s){console.error("Failed to acknowledge notices",s)}},m=()=>{dt.value=!1,qe.value=[],ct.value=!1};return ke(()=>{u()}),Vt(()=>{}),{showNoticeModal:dt,unreadNotices:qe,acknowledgeChecked:ct,fetchUnreadNotices:u,acknowledgeNotices:g,closeModal:m}}const bd={class:"mb-4"},yd={__name:"TimezoneSelect",props:{modelValue:{type:String,default:null},label:{type:String,default:"Timezone"},placeholder:{type:String,default:"Select a timezone"},disabled:{type:Boolean,default:!1},required:{type:Boolean,default:!1},error:{type:String,default:""}},emits:["update:modelValue","change"],setup(u,{emit:g}){const m=u,s=g,t=W(()=>[{value:"Africa/Abidjan",label:"Africa/Abidjan (GMT+00:00)"},{value:"Africa/Accra",label:"Africa/Accra (GMT+00:00)"},{value:"Africa/Addis_Ababa",label:"Africa/Addis_Ababa (GMT+03:00)"},{value:"Africa/Algiers",label:"Africa/Algiers (GMT+01:00)"},{value:"Africa/Asmara",label:"Africa/Asmara (GMT+03:00)"},{value:"Africa/Bamako",label:"Africa/Bamako (GMT+00:00)"},{value:"Africa/Bangui",label:"Africa/Bangui (GMT+01:00)"},{value:"Africa/Banjul",label:"Africa/Banjul (GMT+00:00)"},{value:"Africa/Bissau",label:"Africa/Bissau (GMT+00:00)"},{value:"Africa/Blantyre",label:"Africa/Blantyre (GMT+02:00)"},{value:"Africa/Brazzaville",label:"Africa/Brazzaville (GMT+01:00)"},{value:"Africa/Bujumbura",label:"Africa/Bujumbura (GMT+02:00)"},{value:"Africa/Cairo",label:"Africa/Cairo (GMT+02:00)"},{value:"Africa/Casablanca",label:"Africa/Casablanca (GMT+01:00)"},{value:"Africa/Ceuta",label:"Africa/Ceuta (GMT+01:00)"},{value:"Africa/Conakry",label:"Africa/Conakry (GMT+00:00)"},{value:"Africa/Dakar",label:"Africa/Dakar (GMT+00:00)"},{value:"Africa/Dar_es_Salaam",label:"Africa/Dar_es_Salaam (GMT+03:00)"},{value:"Africa/Djibouti",label:"Africa/Djibouti (GMT+03:00)"},{value:"Africa/Douala",label:"Africa/Douala (GMT+01:00)"},{value:"Africa/El_Aaiun",label:"Africa/El_Aaiun (GMT+01:00)"},{value:"Africa/Freetown",label:"Africa/Freetown (GMT+00:00)"},{value:"Africa/Gaborone",label:"Africa/Gaborone (GMT+02:00)"},{value:"Africa/Harare",label:"Africa/Harare (GMT+02:00)"},{value:"Africa/Johannesburg",label:"Africa/Johannesburg (GMT+02:00)"},{value:"Africa/Juba",label:"Africa/Juba (GMT+03:00)"},{value:"Africa/Kampala",label:"Africa/Kampala (GMT+03:00)"},{value:"Africa/Khartoum",label:"Africa/Khartoum (GMT+02:00)"},{value:"Africa/Kigali",label:"Africa/Kigali (GMT+02:00)"},{value:"Africa/Kinshasa",label:"Africa/Kinshasa (GMT+01:00)"},{value:"Africa/Lagos",label:"Africa/Lagos (GMT+01:00)"},{value:"Africa/Libreville",label:"Africa/Libreville (GMT+01:00)"},{value:"Africa/Lome",label:"Africa/Lome (GMT+00:00)"},{value:"Africa/Luanda",label:"Africa/Luanda (GMT+01:00)"},{value:"Africa/Lubumbashi",label:"Africa/Lubumbashi (GMT+02:00)"},{value:"Africa/Lusaka",label:"Africa/Lusaka (GMT+02:00)"},{value:"Africa/Malabo",label:"Africa/Malabo (GMT+01:00)"},{value:"Africa/Maputo",label:"Africa/Maputo (GMT+02:00)"},{value:"Africa/Maseru",label:"Africa/Maseru (GMT+02:00)"},{value:"Africa/Mbabane",label:"Africa/Mbabane (GMT+02:00)"},{value:"Africa/Mogadishu",label:"Africa/Mogadishu (GMT+03:00)"},{value:"Africa/Monrovia",label:"Africa/Monrovia (GMT+00:00)"},{value:"Africa/Nairobi",label:"Africa/Nairobi (GMT+03:00)"},{value:"Africa/Ndjamena",label:"Africa/Ndjamena (GMT+01:00)"},{value:"Africa/Niamey",label:"Africa/Niamey (GMT+01:00)"},{value:"Africa/Nouakchott",label:"Africa/Nouakchott (GMT+00:00)"},{value:"Africa/Ouagadougou",label:"Africa/Ouagadougou (GMT+00:00)"},{value:"Africa/Porto-Novo",label:"Africa/Porto-Novo (GMT+01:00)"},{value:"Africa/Sao_Tome",label:"Africa/Sao_Tome (GMT+00:00)"},{value:"Africa/Tripoli",label:"Africa/Tripoli (GMT+02:00)"},{value:"Africa/Tunis",label:"Africa/Tunis (GMT+01:00)"},{value:"Africa/Windhoek",label:"Africa/Windhoek (GMT+02:00)"},{value:"America/Adak",label:"America/Adak (GMT-10:00)"},{value:"America/Anchorage",label:"America/Anchorage (GMT-09:00)"},{value:"America/Anguilla",label:"America/Anguilla (GMT-04:00)"},{value:"America/Antigua",label:"America/Antigua (GMT-04:00)"},{value:"America/Araguaina",label:"America/Araguaina (GMT-03:00)"},{value:"America/Argentina/Buenos_Aires",label:"America/Argentina/Buenos_Aires (GMT-03:00)"},{value:"America/Argentina/Catamarca",label:"America/Argentina/Catamarca (GMT-03:00)"},{value:"America/Argentina/Cordoba",label:"America/Argentina/Cordoba (GMT-03:00)"},{value:"America/Argentina/Jujuy",label:"America/Argentina/Jujuy (GMT-03:00)"},{value:"America/Argentina/La_Rioja",label:"America/Argentina/La_Rioja (GMT-03:00)"},{value:"America/Argentina/Mendoza",label:"America/Argentina/Mendoza (GMT-03:00)"},{value:"America/Argentina/Rio_Gallegos",label:"America/Argentina/Rio_Gallegos (GMT-03:00)"},{value:"America/Argentina/Salta",label:"America/Argentina/Salta (GMT-03:00)"},{value:"America/Argentina/San_Juan",label:"America/Argentina/San_Juan (GMT-03:00)"},{value:"America/Argentina/San_Luis",label:"America/Argentina/San_Luis (GMT-03:00)"},{value:"America/Argentina/Tucuman",label:"America/Argentina/Tucuman (GMT-03:00)"},{value:"America/Argentina/Ushuaia",label:"America/Argentina/Ushuaia (GMT-03:00)"},{value:"America/Aruba",label:"America/Aruba (GMT-04:00)"},{value:"America/Asuncion",label:"America/Asuncion (GMT-04:00)"},{value:"America/Atikokan",label:"America/Atikokan (GMT-05:00)"},{value:"America/Bahia",label:"America/Bahia (GMT-03:00)"},{value:"America/Bahia_Banderas",label:"America/Bahia_Banderas (GMT-06:00)"},{value:"America/Barbados",label:"America/Barbados (GMT-04:00)"},{value:"America/Belem",label:"America/Belem (GMT-03:00)"},{value:"America/Belize",label:"America/Belize (GMT-06:00)"},{value:"America/Blanc-Sablon",label:"America/Blanc-Sablon (GMT-04:00)"},{value:"America/Boa_Vista",label:"America/Boa_Vista (GMT-04:00)"},{value:"America/Bogota",label:"America/Bogota (GMT-05:00)"},{value:"America/Boise",label:"America/Boise (GMT-06:00)"},{value:"America/Cambridge_Bay",label:"America/Cambridge_Bay (GMT-06:00)"},{value:"America/Campo_Grande",label:"America/Campo_Grande (GMT-04:00)"},{value:"America/Cancun",label:"America/Cancun (GMT-05:00)"},{value:"America/Caracas",label:"America/Caracas (GMT-04:00)"},{value:"America/Cayenne",label:"America/Cayenne (GMT-03:00)"},{value:"America/Cayman",label:"America/Cayman (GMT-05:00)"},{value:"America/Chicago",label:"America/Chicago (GMT-05:00)"},{value:"America/Chihuahua",label:"America/Chihuahua (GMT-06:00)"},{value:"America/Ciudad_Juarez",label:"America/Ciudad_Juarez (GMT-06:00)"},{value:"America/Costa_Rica",label:"America/Costa_Rica (GMT-06:00)"},{value:"America/Creston",label:"America/Creston (GMT-07:00)"},{value:"America/Cuiaba",label:"America/Cuiaba (GMT-04:00)"},{value:"America/Curacao",label:"America/Curacao (GMT-04:00)"},{value:"America/Danmarkshavn",label:"America/Danmarkshavn (GMT+00:00)"},{value:"America/Dawson",label:"America/Dawson (GMT-07:00)"},{value:"America/Dawson_Creek",label:"America/Dawson_Creek (GMT-07:00)"},{value:"America/Denver",label:"America/Denver (GMT-06:00)"},{value:"America/Detroit",label:"America/Detroit (GMT-04:00)"},{value:"America/Dominica",label:"America/Dominica (GMT-04:00)"},{value:"America/Edmonton",label:"America/Edmonton (GMT-06:00)"},{value:"America/Eirunepe",label:"America/Eirunepe (GMT-05:00)"},{value:"America/El_Salvador",label:"America/El_Salvador (GMT-06:00)"},{value:"America/Fort_Nelson",label:"America/Fort_Nelson (GMT-07:00)"},{value:"America/Fortaleza",label:"America/Fortaleza (GMT-03:00)"},{value:"America/Glace_Bay",label:"America/Glace_Bay (GMT-03:00)"},{value:"America/Goose_Bay",label:"America/Goose_Bay (GMT-03:00)"},{value:"America/Grand_Turk",label:"America/Grand_Turk (GMT-04:00)"},{value:"America/Grenada",label:"America/Grenada (GMT-04:00)"},{value:"America/Guadeloupe",label:"America/Guadeloupe (GMT-04:00)"},{value:"America/Guatemala",label:"America/Guatemala (GMT-06:00)"},{value:"America/Guayaquil",label:"America/Guayaquil (GMT-05:00)"},{value:"America/Guyana",label:"America/Guyana (GMT-04:00)"},{value:"America/Halifax",label:"America/Halifax (GMT-03:00)"},{value:"America/Havana",label:"America/Havana (GMT-04:00)"},{value:"America/Hermosillo",label:"America/Hermosillo (GMT-07:00)"},{value:"America/Indiana/Indianapolis",label:"America/Indiana/Indianapolis (GMT-04:00)"},{value:"America/Indiana/Knox",label:"America/Indiana/Knox (GMT-05:00)"},{value:"America/Indiana/Marengo",label:"America/Indiana/Marengo (GMT-04:00)"},{value:"America/Indiana/Petersburg",label:"America/Indiana/Petersburg (GMT-04:00)"},{value:"America/Indiana/Vevay",label:"America/Indiana/Vevay (GMT-04:00)"},{value:"America/Indiana/Vincennes",label:"America/Indiana/Vincennes (GMT-04:00)"},{value:"America/Indiana/Winamac",label:"America/Indiana/Winamac (GMT-04:00)"},{value:"America/Inuvik",label:"America/Inuvik (GMT-06:00)"},{value:"America/Iqaluit",label:"America/Iqaluit (GMT-04:00)"},{value:"America/Jamaica",label:"America/Jamaica (GMT-05:00)"},{value:"America/Juneau",label:"America/Juneau (GMT-08:00)"},{value:"America/Kentucky/Louisville",label:"America/Kentucky/Louisville (GMT-04:00)"},{value:"America/Kentucky/Monticello",label:"America/Kentucky/Monticello (GMT-04:00)"},{value:"America/La_Paz",label:"America/La_Paz (GMT-04:00)"},{value:"America/Lima",label:"America/Lima (GMT-05:00)"},{value:"America/Los_Angeles",label:"America/Los_Angeles (GMT-07:00)"},{value:"America/Lower_Princes",label:"America/Lower_Princes (GMT-04:00)"},{value:"America/Maceio",label:"America/Maceio (GMT-03:00)"},{value:"America/Managua",label:"America/Managua (GMT-06:00)"},{value:"America/Manaus",label:"America/Manaus (GMT-04:00)"},{value:"America/Marigot",label:"America/Marigot (GMT-04:00)"},{value:"America/Martinique",label:"America/Martinique (GMT-04:00)"},{value:"America/Matamoros",label:"America/Matamoros (GMT-05:00)"},{value:"America/Mazatlan",label:"America/Mazatlan (GMT-06:00)"},{value:"America/Menominee",label:"America/Menominee (GMT-05:00)"},{value:"America/Merida",label:"America/Merida (GMT-05:00)"},{value:"America/Metlakatla",label:"America/Metlakatla (GMT-08:00)"},{value:"America/Mexico_City",label:"America/Mexico_City (GMT-05:00)"},{value:"America/Miquelon",label:"America/Miquelon (GMT-02:00)"},{value:"America/Moncton",label:"America/Moncton (GMT-03:00)"},{value:"America/Monterrey",label:"America/Monterrey (GMT-05:00)"},{value:"America/Montevideo",label:"America/Montevideo (GMT-03:00)"},{value:"America/Montserrat",label:"America/Montserrat (GMT-04:00)"},{value:"America/Nassau",label:"America/Nassau (GMT-04:00)"},{value:"America/New_York",label:"America/New_York (GMT-04:00)"},{value:"America/Nome",label:"America/Nome (GMT-08:00)"},{value:"America/Noronha",label:"America/Noronha (GMT-02:00)"},{value:"America/North_Dakota/Beulah",label:"America/North_Dakota/Beulah (GMT-05:00)"},{value:"America/North_Dakota/Center",label:"America/North_Dakota/Center (GMT-05:00)"},{value:"America/North_Dakota/New_Salem",label:"America/North_Dakota/New_Salem (GMT-05:00)"},{value:"America/Nuuk",label:"America/Nuuk (GMT-02:00)"},{value:"America/Ojinaga",label:"America/Ojinaga (GMT-06:00)"},{value:"America/Panama",label:"America/Panama (GMT-05:00)"},{value:"America/Paramaribo",label:"America/Paramaribo (GMT-03:00)"},{value:"America/Phoenix",label:"America/Phoenix (GMT-07:00)"},{value:"America/Port-au-Prince",label:"America/Port-au-Prince (GMT-04:00)"},{value:"America/Port_of_Spain",label:"America/Port_of_Spain (GMT-04:00)"},{value:"America/Puerto_Rico",label:"America/Puerto_Rico (GMT-04:00)"},{value:"America/Punta_Arenas",label:"America/Punta_Arenas (GMT-03:00)"},{value:"America/Rankin_Inlet",label:"America/Rankin_Inlet (GMT-05:00)"},{value:"America/Recife",label:"America/Recife (GMT-03:00)"},{value:"America/Regina",label:"America/Regina (GMT-06:00)"},{value:"America/Resolute",label:"America/Resolute (GMT-05:00)"},{value:"America/Rio_Branco",label:"America/Rio_Branco (GMT-05:00)"},{value:"America/Santarem",label:"America/Santarem (GMT-03:00)"},{value:"America/Santiago",label:"America/Santiago (GMT-04:00)"},{value:"America/Santo_Domingo",label:"America/Santo_Domingo (GMT-04:00)"},{value:"America/Sao_Paulo",label:"America/Sao_Paulo (GMT-03:00)"},{value:"America/Scoresbysund",label:"America/Scoresbysund (GMT+00:00)"},{value:"America/Sitka",label:"America/Sitka (GMT-08:00)"},{value:"America/St_Barthelemy",label:"America/St_Barthelemy (GMT-04:00)"},{value:"America/St_Johns",label:"America/St_Johns (GMT-02:30)"},{value:"America/St_Kitts",label:"America/St_Kitts (GMT-04:00)"},{value:"America/St_Lucia",label:"America/St_Lucia (GMT-04:00)"},{value:"America/St_Thomas",label:"America/St_Thomas (GMT-04:00)"},{value:"America/St_Vincent",label:"America/St_Vincent (GMT-04:00)"},{value:"America/Swift_Current",label:"America/Swift_Current (GMT-06:00)"},{value:"America/Tegucigalpa",label:"America/Tegucigalpa (GMT-06:00)"},{value:"America/Thule",label:"America/Thule (GMT-03:00)"},{value:"America/Tijuana",label:"America/Tijuana (GMT-07:00)"},{value:"America/Toronto",label:"America/Toronto (GMT-04:00)"},{value:"America/Tortola",label:"America/Tortola (GMT-04:00)"},{value:"America/Vancouver",label:"America/Vancouver (GMT-07:00)"},{value:"America/Whitehorse",label:"America/Whitehorse (GMT-07:00)"},{value:"America/Winnipeg",label:"America/Winnipeg (GMT-05:00)"},{value:"America/Yakutat",label:"America/Yakutat (GMT-08:00)"},{value:"America/Yellowknife",label:"America/Yellowknife (GMT-06:00)"},{value:"Antarctica/Casey",label:"Antarctica/Casey (GMT+11:00)"},{value:"Antarctica/Davis",label:"Antarctica/Davis (GMT+07:00)"},{value:"Antarctica/DumontDUrville",label:"Antarctica/DumontDUrville (GMT+10:00)"},{value:"Antarctica/Macquarie",label:"Antarctica/Macquarie (GMT+11:00)"},{value:"Antarctica/Mawson",label:"Antarctica/Mawson (GMT+05:00)"},{value:"Antarctica/Palmer",label:"Antarctica/Palmer (GMT-03:00)"},{value:"Antarctica/Rothera",label:"Antarctica/Rothera (GMT-03:00)"},{value:"Antarctica/Syowa",label:"Antarctica/Syowa (GMT+03:00)"},{value:"Antarctica/Troll",label:"Antarctica/Troll (GMT+00:00)"},{value:"Antarctica/Vostok",label:"Antarctica/Vostok (GMT+06:00)"},{value:"Asia/Almaty",label:"Asia/Almaty (GMT+05:00)"},{value:"Asia/Amman",label:"Asia/Amman (GMT+03:00)"},{value:"Asia/Anadyr",label:"Asia/Anadyr (GMT+12:00)"},{value:"Asia/Aqtau",label:"Asia/Aqtau (GMT+05:00)"},{value:"Asia/Aqtobe",label:"Asia/Aqtobe (GMT+05:00)"},{value:"Asia/Ashgabat",label:"Asia/Ashgabat (GMT+05:00)"},{value:"Asia/Atyrau",label:"Asia/Atyrau (GMT+05:00)"},{value:"Asia/Baghdad",label:"Asia/Baghdad (GMT+03:00)"},{value:"Asia/Baku",label:"Asia/Baku (GMT+04:00)"},{value:"Asia/Bangkok",label:"Asia/Bangkok (GMT+07:00)"},{value:"Asia/Barnaul",label:"Asia/Barnaul (GMT+07:00)"},{value:"Asia/Beirut",label:"Asia/Beirut (GMT+03:00)"},{value:"Asia/Bishkek",label:"Asia/Bishkek (GMT+06:00)"},{value:"Asia/Brunei",label:"Asia/Brunei (GMT+08:00)"},{value:"Asia/Chita",label:"Asia/Chita (GMT+09:00)"},{value:"Asia/Choibalsan",label:"Asia/Choibalsan (GMT+08:00)"},{value:"Asia/Colombo",label:"Asia/Colombo (GMT+05:30)"},{value:"Asia/Damascus",label:"Asia/Damascus (GMT+03:00)"},{value:"Asia/Dhaka",label:"Asia/Dhaka (GMT+06:00)"},{value:"Asia/Dili",label:"Asia/Dili (GMT+09:00)"},{value:"Asia/Dubai",label:"Asia/Dubai (GMT+04:00)"},{value:"Asia/Dushanbe",label:"Asia/Dushanbe (GMT+05:00)"},{value:"Asia/Famagusta",label:"Asia/Famagusta (GMT+03:00)"},{value:"Asia/Gaza",label:"Asia/Gaza (GMT+03:00)"},{value:"Asia/Hebron",label:"Asia/Hebron (GMT+03:00)"},{value:"Asia/Ho_Chi_Minh",label:"Asia/Ho_Chi_Minh (GMT+07:00)"},{value:"Asia/Hong_Kong",label:"Asia/Hong_Kong (GMT+08:00)"},{value:"Asia/Hovd",label:"Asia/Hovd (GMT+07:00)"},{value:"Asia/Irkutsk",label:"Asia/Irkutsk (GMT+08:00)"},{value:"Asia/Jakarta",label:"Asia/Jakarta (GMT+07:00)"},{value:"Asia/Jayapura",label:"Asia/Jayapura (GMT+09:00)"},{value:"Asia/Jerusalem",label:"Asia/Jerusalem (GMT+03:00)"},{value:"Asia/Kabul",label:"Asia/Kabul (GMT+04:30)"},{value:"Asia/Kamchatka",label:"Asia/Kamchatka (GMT+12:00)"},{value:"Asia/Karachi",label:"Asia/Karachi (GMT+05:00)"},{value:"Asia/Kathmandu",label:"Asia/Kathmandu (GMT+05:45)"},{value:"Asia/Khandyga",label:"Asia/Khandyga (GMT+09:00)"},{value:"Asia/Kolkata",label:"Asia/Kolkata (GMT+05:30)"},{value:"Asia/Krasnoyarsk",label:"Asia/Krasnoyarsk (GMT+07:00)"},{value:"Asia/Kuala_Lumpur",label:"Asia/Kuala_Lumpur (GMT+08:00)"},{value:"Asia/Kuching",label:"Asia/Kuching (GMT+08:00)"},{value:"Asia/Kuwait",label:"Asia/Kuwait (GMT+03:00)"},{value:"Asia/Macau",label:"Asia/Macau (GMT+08:00)"},{value:"Asia/Magadan",label:"Asia/Magadan (GMT+11:00)"},{value:"Asia/Makassar",label:"Asia/Makassar (GMT+08:00)"},{value:"Asia/Manila",label:"Asia/Manila (GMT+08:00)"},{value:"Asia/Muscat",label:"Asia/Muscat (GMT+04:00)"},{value:"Asia/Nicosia",label:"Asia/Nicosia (GMT+03:00)"},{value:"Asia/Novokuznetsk",label:"Asia/Novokuznetsk (GMT+07:00)"},{value:"Asia/Novosibirsk",label:"Asia/Novosibirsk (GMT+07:00)"},{value:"Asia/Omsk",label:"Asia/Omsk (GMT+06:00)"},{value:"Asia/Oral",label:"Asia/Oral (GMT+05:00)"},{value:"Asia/Phnom_Penh",label:"Asia/Phnom_Penh (GMT+07:00)"},{value:"Asia/Pontianak",label:"Asia/Pontianak (GMT+07:00)"},{value:"Asia/Pyongyang",label:"Asia/Pyongyang (GMT+09:00)"},{value:"Asia/Qatar",label:"Asia/Qatar (GMT+03:00)"},{value:"Asia/Qostanay",label:"Asia/Qostanay (GMT+05:00)"},{value:"Asia/Qyzylorda",label:"Asia/Qyzylorda (GMT+05:00)"},{value:"Asia/Riyadh",label:"Asia/Riyadh (GMT+03:00)"},{value:"Asia/Sakhalin",label:"Asia/Sakhalin (GMT+11:00)"},{value:"Asia/Samarkand",label:"Asia/Samarkand (GMT+05:00)"},{value:"Asia/Seoul",label:"Asia/Seoul (GMT+09:00)"},{value:"Asia/Shanghai",label:"Asia/Shanghai (GMT+08:00)"},{value:"Asia/Singapore",label:"Asia/Singapore (GMT+08:00)"},{value:"Asia/Srednekolymsk",label:"Asia/Srednekolymsk (GMT+11:00)"},{value:"Asia/Taipei",label:"Asia/Taipei (GMT+08:00)"},{value:"Asia/Tashkent",label:"Asia/Tashkent (GMT+05:00)"},{value:"Asia/Tbilisi",label:"Asia/Tbilisi (GMT+04:00)"},{value:"Asia/Tehran",label:"Asia/Tehran (GMT+03:30)"},{value:"Asia/Thimphu",label:"Asia/Thimphu (GMT+06:00)"},{value:"Asia/Tokyo",label:"Asia/Tokyo (GMT+09:00)"},{value:"Asia/Tomsk",label:"Asia/Tomsk (GMT+07:00)"},{value:"Asia/Ulaanbaatar",label:"Asia/Ulaanbaatar (GMT+08:00)"},{value:"Asia/Urumqi",label:"Asia/Urumqi (GMT+06:00)"},{value:"Asia/Ust-Nera",label:"Asia/Ust-Nera (GMT+10:00)"},{value:"Asia/Vladivostok",label:"Asia/Vladivostok (GMT+10:00)"},{value:"Asia/Yakutsk",label:"Asia/Yakutsk (GMT+09:00)"},{value:"Asia/Yangon",label:"Asia/Yangon (GMT+06:30)"},{value:"Asia/Yekaterinburg",label:"Asia/Yekaterinburg (GMT+05:00)"},{value:"Asia/Yerevan",label:"Asia/Yerevan (GMT+04:00)"},{value:"Atlantic/Azores",label:"Atlantic/Azores (GMT-01:00)"},{value:"Atlantic/Bermuda",label:"Atlantic/Bermuda (GMT-03:00)"},{value:"Atlantic/Canary",label:"Atlantic/Canary (GMT+00:00)"},{value:"Atlantic/Cape_Verde",label:"Atlantic/Cape_Verde (GMT-01:00)"},{value:"Atlantic/Faroe",label:"Atlantic/Faroe (GMT+00:00)"},{value:"Atlantic/Madeira",label:"Atlantic/Madeira (GMT+00:00)"},{value:"Atlantic/Reykjavik",label:"Atlantic/Reykjavik (GMT+00:00)"},{value:"Atlantic/South_Georgia",label:"Atlantic/South_Georgia (GMT-02:00)"},{value:"Atlantic/St_Helena",label:"Atlantic/St_Helena (GMT+00:00)"},{value:"Atlantic/Stanley",label:"Atlantic/Stanley (GMT-03:00)"},{value:"Australia/Adelaide",label:"Australia/Adelaide (GMT+09:30)"},{value:"Australia/Brisbane",label:"Australia/Brisbane (GMT+10:00)"},{value:"Australia/Broken_Hill",label:"Australia/Broken_Hill (GMT+09:30)"},{value:"Australia/Darwin",label:"Australia/Darwin (GMT+09:30)"},{value:"Australia/Eucla",label:"Australia/Eucla (GMT+08:45)"},{value:"Australia/Hobart",label:"Australia/Hobart (GMT+10:00)"},{value:"Australia/Lindeman",label:"Australia/Lindeman (GMT+10:00)"},{value:"Australia/Lord_Howe",label:"Australia/Lord_Howe (GMT+10:30)"},{value:"Australia/Melbourne",label:"Australia/Melbourne (GMT+10:00)"},{value:"Australia/Perth",label:"Australia/Perth (GMT+08:00)"},{value:"Australia/Sydney",label:"Australia/Sydney (GMT+10:00)"},{value:"Europe/Amsterdam",label:"Europe/Amsterdam (GMT+02:00)"},{value:"Europe/Andorra",label:"Europe/Andorra (GMT+02:00)"},{value:"Europe/Astrakhan",label:"Europe/Astrakhan (GMT+04:00)"},{value:"Europe/Athens",label:"Europe/Athens (GMT+03:00)"},{value:"Europe/Belgrade",label:"Europe/Belgrade (GMT+02:00)"},{value:"Europe/Berlin",label:"Europe/Berlin (GMT+02:00)"},{value:"Europe/Brussels",label:"Europe/Brussels (GMT+02:00)"},{value:"Europe/Bucharest",label:"Europe/Bucharest (GMT+03:00)"},{value:"Europe/Budapest",label:"Europe/Budapest (GMT+02:00)"},{value:"Europe/Chisinau",label:"Europe/Chisinau (GMT+03:00)"},{value:"Europe/Copenhagen",label:"Europe/Copenhagen (GMT+02:00)"},{value:"Europe/Dublin",label:"Europe/Dublin (GMT+01:00)"},{value:"Europe/Gibraltar",label:"Europe/Gibraltar (GMT+02:00)"},{value:"Europe/Helsinki",label:"Europe/Helsinki (GMT+03:00)"},{value:"Europe/Istanbul",label:"Europe/Istanbul (GMT+03:00)"},{value:"Europe/Kaliningrad",label:"Europe/Kaliningrad (GMT+02:00)"},{value:"Europe/Kirov",label:"Europe/Kirov (GMT+03:00)"},{value:"Europe/Kyiv",label:"Europe/Kyiv (GMT+03:00)"},{value:"Europe/Lisbon",label:"Europe/Lisbon (GMT+01:00)"},{value:"Europe/London",label:"Europe/London (GMT+01:00)"},{value:"Europe/Luxembourg",label:"Europe/Luxembourg (GMT+02:00)"},{value:"Europe/Madrid",label:"Europe/Madrid (GMT+02:00)"},{value:"Europe/Malta",label:"Europe/Malta (GMT+02:00)"},{value:"Europe/Minsk",label:"Europe/Minsk (GMT+03:00)"},{value:"Europe/Monaco",label:"Europe/Monaco (GMT+02:00)"},{value:"Europe/Moscow",label:"Europe/Moscow (GMT+03:00)"},{value:"Europe/Oslo",label:"Europe/Oslo (GMT+02:00)"},{value:"Europe/Paris",label:"Europe/Paris (GMT+02:00)"},{value:"Europe/Prague",label:"Europe/Prague (GMT+02:00)"},{value:"Europe/Riga",label:"Europe/Riga (GMT+03:00)"},{value:"Europe/Rome",label:"Europe/Rome (GMT+02:00)"},{value:"Europe/Samara",label:"Europe/Samara (GMT+04:00)"},{value:"Europe/San_Marino",label:"Europe/San_Marino (GMT+02:00)"},{value:"Europe/Sarajevo",label:"Europe/Sarajevo (GMT+02:00)"},{value:"Europe/Saratov",label:"Europe/Saratov (GMT+04:00)"},{value:"Europe/Simferopol",label:"Europe/Simferopol (GMT+03:00)"},{value:"Europe/Skopje",label:"Europe/Skopje (GMT+02:00)"},{value:"Europe/Sofia",label:"Europe/Sofia (GMT+03:00)"},{value:"Europe/Stockholm",label:"Europe/Stockholm (GMT+02:00)"},{value:"Europe/Tallinn",label:"Europe/Tallinn (GMT+03:00)"},{value:"Europe/Tirane",label:"Europe/Tirane (GMT+02:00)"},{value:"Europe/Ulyanovsk",label:"Europe/Ulyanovsk (GMT+04:00)"},{value:"Europe/Uzhgorod",label:"Europe/Uzhgorod (GMT+03:00)"},{value:"Europe/Vaduz",label:"Europe/Vaduz (GMT+02:00)"},{value:"Europe/Vatican",label:"Europe/Vatican (GMT+02:00)"},{value:"Europe/Vienna",label:"Europe/Vienna (GMT+02:00)"},{value:"Europe/Vilnius",label:"Europe/Vilnius (GMT+03:00)"},{value:"Europe/Volgograd",label:"Europe/Volgograd (GMT+03:00)"},{value:"Europe/Warsaw",label:"Europe/Warsaw (GMT+02:00)"},{value:"Europe/Zagreb",label:"Europe/Zagreb (GMT+02:00)"},{value:"Europe/Zaporozhye",label:"Europe/Zaporozhye (GMT+03:00)"},{value:"Europe/Zurich",label:"Europe/Zurich (GMT+02:00)"},{value:"Indian/Antananarivo",label:"Indian/Antananarivo (GMT+03:00)"},{value:"Indian/Chagos",label:"Indian/Chagos (GMT+06:00)"},{value:"Indian/Christmas",label:"Indian/Christmas (GMT+07:00)"},{value:"Indian/Cocos",label:"Indian/Cocos (GMT+06:30)"},{value:"Indian/Comoro",label:"Indian/Comoro (GMT+03:00)"},{value:"Indian/Kerguelen",label:"Indian/Kerguelen (GMT+05:00)"},{value:"Indian/Mahe",label:"Indian/Mahe (GMT+04:00)"},{value:"Indian/Maldives",label:"Indian/Maldives (GMT+05:00)"},{value:"Indian/Mauritius",label:"Indian/Mauritius (GMT+04:00)"},{value:"Indian/Mayotte",label:"Indian/Mayotte (GMT+03:00)"},{value:"Indian/Reunion",label:"Indian/Reunion (GMT+04:00)"},{value:"Pacific/Apia",label:"Pacific/Apia (GMT+13:00)"},{value:"Pacific/Auckland",label:"Pacific/Auckland (GMT+12:00)"},{value:"Pacific/Bougainville",label:"Pacific/Bougainville (GMT+11:00)"},{value:"Pacific/Chatham",label:"Pacific/Chatham (GMT+12:45)"},{value:"Pacific/Chuuk",label:"Pacific/Chuuk (GMT+10:00)"},{value:"Pacific/Easter",label:"Pacific/Easter (GMT-06:00)"},{value:"Pacific/Efate",label:"Pacific/Efate (GMT+11:00)"},{value:"Pacific/Fakaofo",label:"Pacific/Fakaofo (GMT+13:00)"},{value:"Pacific/Fiji",label:"Pacific/Fiji (GMT+12:00)"},{value:"Pacific/Funafuti",label:"Pacific/Funafuti (GMT+12:00)"},{value:"Pacific/Galapagos",label:"Pacific/Galapagos (GMT-06:00)"},{value:"Pacific/Gambier",label:"Pacific/Gambier (GMT-09:00)"},{value:"Pacific/Guadalcanal",label:"Pacific/Guadalcanal (GMT+11:00)"},{value:"Pacific/Guam",label:"Pacific/Guam (GMT+10:00)"},{value:"Pacific/Honolulu",label:"Pacific/Honolulu (GMT-10:00)"},{value:"Pacific/Kanton",label:"Pacific/Kanton (GMT+13:00)"},{value:"Pacific/Kiritimati",label:"Pacific/Kiritimati (GMT+14:00)"},{value:"Pacific/Kosrae",label:"Pacific/Kosrae (GMT+11:00)"},{value:"Pacific/Kwajalein",label:"Pacific/Kwajalein (GMT+12:00)"},{value:"Pacific/Majuro",label:"Pacific/Majuro (GMT+12:00)"},{value:"Pacific/Marquesas",label:"Pacific/Marquesas (GMT-09:30)"},{value:"Pacific/Midway",label:"Pacific/Midway (GMT-11:00)"},{value:"Pacific/Nauru",label:"Pacific/Nauru (GMT+12:00)"},{value:"Pacific/Niue",label:"Pacific/Niue (GMT-11:00)"},{value:"Pacific/Norfolk",label:"Pacific/Norfolk (GMT+11:00)"},{value:"Pacific/Noumea",label:"Pacific/Noumea (GMT+11:00)"},{value:"Pacific/Pago_Pago",label:"Pacific/Pago_Pago (GMT-11:00)"},{value:"Pacific/Palau",label:"Pacific/Palau (GMT+09:00)"},{value:"Pacific/Pitcairn",label:"Pacific/Pitcairn (GMT-08:00)"},{value:"Pacific/Pohnpei",label:"Pacific/Pohnpei (GMT+11:00)"},{value:"Pacific/Port_Moresby",label:"Pacific/Port_Moresby (GMT+10:00)"},{value:"Pacific/Rarotonga",label:"Pacific/Rarotonga (GMT-10:00)"},{value:"Pacific/Saipan",label:"Pacific/Saipan (GMT+10:00)"},{value:"Pacific/Tahiti",label:"Pacific/Tahiti (GMT-10:00)"},{value:"Pacific/Tarawa",label:"Pacific/Tarawa (GMT+12:00)"},{value:"Pacific/Tongatapu",label:"Pacific/Tongatapu (GMT+13:00)"},{value:"Pacific/Wake",label:"Pacific/Wake (GMT+12:00)"},{value:"Pacific/Wallis",label:"Pacific/Wallis (GMT+12:00)"}]),p=W({get:()=>m.modelValue,set:v=>{s("update:modelValue",v),s("change",v)}});return ke(()=>{if((m.modelValue===null||m.modelValue===void 0)&&!m.disabled)try{const v=Intl.DateTimeFormat().resolvedOptions().timeZone;t.value.find(c=>c.value===v)?p.value=v:console.warn(`Detected timezone "${v}" is not in the predefined list.`)}catch(v){console.error("Error auto-detecting timezone:",v)}}),(v,h)=>(a(),i("div",bd,[r(O,{for:u.label.toLowerCase().replace(/\s/g,"-"),value:u.label},null,8,["for","value"]),r(be,{id:u.label.toLowerCase().replace(/\s/g,"-"),modelValue:p.value,"onUpdate:modelValue":h[0]||(h[0]=c=>p.value=c),options:t.value,valueKey:"value",labelKey:"label",placeholder:u.placeholder,disabled:u.disabled,required:u.required,class:"mt-1 block w-full"},null,8,["id","modelValue","options","placeholder","disabled","required"]),r(X,{message:u.error,class:"mt-2"},null,8,["message"])]))}},hd={key:0,class:"text-sm text-gray-600 mb-3"},kd=["value"],xd={__name:"UserDataPromptModal",props:{show:{type:Boolean,default:!1},configItem:{type:Object,required:!0}},emits:["close","submitted","error"],setup(u,{emit:g}){const m=u,s=T({value:""});le(()=>m.show,c=>{c&&(s.value={value:""})});const t=W(()=>{var c,n;return((n=(c=m.configItem)==null?void 0:c.api)==null?void 0:n.endpoint)||"/api/user/update-profile-field"}),p=W(()=>{var c,n;return((n=(c=m.configItem)==null?void 0:c.api)==null?void 0:n.method)||"post"}),v=c=>{var l,d,f,M,b;if((l=m.configItem)!=null&&l.toPayload)return m.configItem.toPayload(c.value);const n=((f=(d=m.configItem)==null?void 0:d.api)==null?void 0:f.fieldParam)||"field",o=((b=(M=m.configItem)==null?void 0:M.api)==null?void 0:b.valueParam)||"value";return{[n]:m.configItem.column,[o]:c.value}},h=W(()=>{var c;return((c=m.configItem)==null?void 0:c.title)||"Additional Information Required"});return(c,n)=>(a(),B(De,{show:u.show,title:h.value,"api-endpoint":t.value,"http-method":p.value,"form-data":s.value,"submit-button-text":"Save","success-message":"Saved successfully","format-data-for-api":v,onClose:n[3]||(n[3]=o=>c.$emit("close")),onSubmitted:n[4]||(n[4]=o=>c.$emit("submitted",o)),onError:n[5]||(n[5]=o=>c.$emit("error",o))},{default:k(({errors:o})=>{var l,d,f,M,b,I,E,$,x,j,z,L,H,P;return[(l=u.configItem)!=null&&l.description?(a(),i("p",hd,G(u.configItem.description),1)):_("",!0),e("div",null,[((f=(d=u.configItem)==null?void 0:d.input)==null?void 0:f.type)==="component"&&((b=(M=u.configItem)==null?void 0:M.input)==null?void 0:b.component)==="TimezoneSelect"?(a(),i(Z,{key:0},[r(yd,{modelValue:s.value.value,"onUpdate:modelValue":n[0]||(n[0]=V=>s.value.value=V),required:!0},null,8,["modelValue"]),r(X,{message:(I=o==null?void 0:o.value)==null?void 0:I[0],class:"mt-2"},null,8,["message"])],64)):(($=(E=u.configItem)==null?void 0:E.input)==null?void 0:$.type)==="select"?(a(),i(Z,{key:1},[r(O,{value:((x=u.configItem)==null?void 0:x.label)||"Select an option"},null,8,["value"]),U(e("select",{"onUpdate:modelValue":n[1]||(n[1]=V=>s.value.value=V),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[n[6]||(n[6]=e("option",{disabled:"",value:""},"Please select",-1)),(a(!0),i(Z,null,ie(((z=(j=u.configItem)==null?void 0:j.input)==null?void 0:z.options)||[],V=>(a(),i("option",{key:V.value||V,value:V.value||V},G(V.label||V),9,kd))),128))],512),[[He,s.value.value]]),r(X,{message:(L=o==null?void 0:o.value)==null?void 0:L[0],class:"mt-2"},null,8,["message"])],64)):(a(),i(Z,{key:2},[r(O,{value:((H=u.configItem)==null?void 0:H.label)||"Value"},null,8,["value"]),r(ge,{modelValue:s.value.value,"onUpdate:modelValue":n[2]||(n[2]=V=>s.value.value=V),class:"mt-1 block w-full"},null,8,["modelValue"]),r(X,{message:(P=o==null?void 0:o.value)==null?void 0:P[0],class:"mt-2"},null,8,["message"])],64))])]}),_:1},8,["show","title","api-endpoint","http-method","form-data"]))}},wd=[{id:"users.timezone",model:"users",column:"timezone",title:"Set your timezone",description:"We could not detect your timezone during login. Please select your timezone to get correct schedule times.",input:{type:"component",component:"TimezoneSelect",props:{}},api:{endpoint:"/api/user/update-profile-field",method:"post",fieldParam:"field",valueParam:"value"},isMissing:u=>!(u!=null&&u.timezone),toPayload:u=>({field:"timezone",value:u})}],_d={__name:"PromptOrchestrator",setup(u){const g=T(!1),m=T(null),s=T([]),t=()=>{const o=localStorage.getItem("authToken");o&&!ne.defaults.headers.common.Authorization&&(ne.defaults.headers.common.Authorization=`Bearer ${o}`)},p=async()=>{t();const{data:o}=await ne.get("/api/user");return o},v=o=>{const l=[];for(const d of wd)try{(typeof d.isMissing=="function"?d.isMissing(o):!(o!=null&&o[d.column]))&&l.push(d)}catch(f){console.error("Error evaluating prompt config",d,f)}return l},h=()=>{if(s.value.length===0){m.value=null,g.value=!1;return}m.value=s.value.shift(),g.value=!0},c=async()=>{try{const o=await p();s.value=v(o),h()}catch(o){console.error("PromptOrchestrator initialization failed",o)}},n=async()=>{try{const o=await p();s.value=v(o)}catch{}h()};return ke(()=>{c()}),(o,l)=>m.value?(a(),B(xd,{key:0,show:g.value,"config-item":m.value,onClose:h,onSubmitted:n},null,8,["show","config-item"])):_("",!0)}},Ad={key:0,class:"mb-4"},Td={key:1,class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},Md={class:"mb-6 flex space-x-4 border-b border-gray-100"},$d={key:2,class:"space-y-4"},Cd={key:3},Sd={__name:"MeetingMinutesModal",props:{show:Boolean,projectId:Number,projects:{type:Array,default:()=>[]}},emits:["close","minutesAdded"],setup(u,{emit:g}){const m=u,s=g,t=T("separate"),p=T(!1),v=T([]),h=T([]),c=Se({project_id:null,discussion:"",more_info:"",blockers:"",actions:"",full_minutes:"",attended_users:[],attended_clients:[]});le(()=>m.projectId,M=>{M&&(c.project_id=M)},{immediate:!0}),le(()=>m.show,M=>{M&&(c.project_id=m.projectId||null,c.discussion="",c.more_info="",c.blockers="",c.actions="",c.full_minutes="",c.attended_users=[],c.attended_clients=[],t.value="separate")});const n=async M=>{if(M){p.value=!0;try{const b=await window.axios.get(`/api/projects/${M}/sections/clients-users`);v.value=(b.data.users||[]).map(I=>({value:I.id,label:I.name})),h.value=(b.data.clients||[]).map(I=>({value:I.id,label:I.name}))}catch(b){console.error("Error fetching attendees:",b)}finally{p.value=!1}}},o=M=>{s("minutesAdded")},l=M=>{console.error("Error in MeetingMinutesModal submission:",M)},d=T("");le(()=>c.project_id,M=>{M?(d.value=`/api/projects/${M}/meeting-minutes`,n(M)):(d.value="",v.value=[],h.value=[])},{immediate:!0});const f=T([]);return le(()=>m.projects,M=>{f.value=M.map(b=>({value:b.id,label:b.name}))},{immediate:!0}),(M,b)=>(a(),B(De,{show:u.show,title:"Add Meeting Minutes","api-endpoint":d.value,"http-method":"post","form-data":c,"submit-button-text":"Submit Minutes","success-message":"Meeting minutes submitted successfully!",onClose:b[10]||(b[10]=I=>M.$emit("close")),onSubmitted:o,onError:l},{default:k(({errors:I})=>[u.projectId?_("",!0):(a(),i("div",Ad,[r(O,{for:"project_id",value:"Select Project"}),r(be,{modelValue:c.project_id,"onUpdate:modelValue":b[0]||(b[0]=E=>c.project_id=E),options:f.value,placeholder:"Select a project...",class:"mt-1 block w-full"},null,8,["modelValue","options"]),r(X,{message:I.project_id?I.project_id[0]:"",class:"mt-2"},null,8,["message"])])),c.project_id?(a(),i("div",Td,[e("div",null,[r(O,{for:"attended_users",value:"Who attended (Internal)"}),r(at,{modelValue:c.attended_users,"onUpdate:modelValue":b[1]||(b[1]=E=>c.attended_users=E),options:v.value,"is-multi":!0,placeholder:"Select team members...",class:"mt-1",disabled:p.value},null,8,["modelValue","options","disabled"]),r(X,{message:I.attended_users?I.attended_users[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[r(O,{for:"attended_clients",value:"Client Attended (Optional)"}),r(at,{modelValue:c.attended_clients,"onUpdate:modelValue":b[2]||(b[2]=E=>c.attended_clients=E),options:h.value,"is-multi":!0,placeholder:"Select clients...",class:"mt-1",disabled:p.value},null,8,["modelValue","options","disabled"]),r(X,{message:I.attended_clients?I.attended_clients[0]:"",class:"mt-2"},null,8,["message"])])])):_("",!0),e("div",Md,[e("button",{type:"button",onClick:b[3]||(b[3]=E=>t.value="separate"),class:q(["pb-2 px-1 text-sm font-medium transition-colors duration-200 border-b-2",t.value==="separate"?"text-indigo-600 border-indigo-600":"text-gray-500 border-transparent hover:text-gray-700"])}," Structured ",2),e("button",{type:"button",onClick:b[4]||(b[4]=E=>t.value="full"),class:q(["pb-2 px-1 text-sm font-medium transition-colors duration-200 border-b-2",t.value==="full"?"text-indigo-600 border-indigo-600":"text-gray-500 border-transparent hover:text-gray-700"])}," Paste Text ",2)]),t.value==="separate"?(a(),i("div",$d,[e("div",null,[r(O,{for:"discussion",value:"Discussion"}),U(e("textarea",{id:"discussion",rows:"3",class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm","onUpdate:modelValue":b[5]||(b[5]=E=>c.discussion=E),placeholder:"What was discussed?"},null,512),[[re,c.discussion]]),r(X,{message:I.discussion?I.discussion[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[r(O,{for:"more_info",value:"Require More Information"}),U(e("textarea",{id:"more_info",rows:"2",class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm","onUpdate:modelValue":b[6]||(b[6]=E=>c.more_info=E),placeholder:"Any information needed?"},null,512),[[re,c.more_info]]),r(X,{message:I.more_info?I.more_info[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[r(O,{for:"blockers",value:"Blockers"}),U(e("textarea",{id:"blockers",rows:"2",class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm","onUpdate:modelValue":b[7]||(b[7]=E=>c.blockers=E),placeholder:"Any blockers?"},null,512),[[re,c.blockers]]),r(X,{message:I.blockers?I.blockers[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[r(O,{for:"actions",value:"Actions"}),U(e("textarea",{id:"actions",rows:"3",class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm","onUpdate:modelValue":b[8]||(b[8]=E=>c.actions=E),placeholder:"Action items..."},null,512),[[re,c.actions]]),r(X,{message:I.actions?I.actions[0]:"",class:"mt-2"},null,8,["message"])])])):(a(),i("div",Cd,[r(O,{for:"full_minutes",value:"Past All Meeting Minutes"}),U(e("textarea",{id:"full_minutes",rows:"12",class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm font-mono text-sm","onUpdate:modelValue":b[9]||(b[9]=E=>c.full_minutes=E),placeholder:"Paste all minutes here..."},null,512),[[re,c.full_minutes]]),r(X,{message:I.full_minutes?I.full_minutes[0]:"",class:"mt-2"},null,8,["message"])]))]),_:1},8,["show","api-endpoint","form-data"]))}},Gd={class:"flex h-screen overflow-hidden"},jd={class:"flex-1 flex flex-col overflow-hidden"},Pd={key:0,class:"bg-white shadow"},Ed={class:"mx-auto max-w-7xl px-4 py-6 sm:px-6 lg:px-8"},Id={class:"flex-1 overflow-y-auto"},nc={__name:"AuthenticatedLayout",setup(u){const g=T(!1),m=T(!1),s=T(!1),t=T(!1),p=T(!1),v=T([]),h=T(!0),c=W(()=>Ye().props.id||null),{showNoticeModal:n,unreadNotices:o,fetchUnreadNotices:l,closeModal:d}=gd(),f=T(null),M=async()=>{const L=localStorage.getItem("authToken");if(L){window.axios.defaults.headers.common.Authorization=`Bearer ${L}`;try{await window.axios.get("/api/user")}catch(H){H.response&&H.response.status===401&&(console.log("Session expired, redirecting to login"),localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization,window.location.href="/login")}}else delete window.axios.defaults.headers.common.Authorization},b=()=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization},I=L=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization,window.location.href="/login"},E=async()=>{h.value=!0;try{const L=await window.axios.get("/api/projects-simplified");v.value=L.data}catch(L){console.error("Error fetching all projects for sidebar:",L),v.value=[]}finally{h.value=!1}},$=L=>{pa.visit(route("projects.show",L))},x=W(()=>Je.value.notifications.filter(L=>!L.isRead).length),j=L=>{console.log("Task updated globally.",L)},z=L=>{console.log("Task deleted globally.",L)};return ke(()=>{M(),f.value&&ma(f.value),E(),va(),At(l),l()}),Vt(()=>{At(null)}),(L,H)=>(a(),i("div",Gd,[r(Ra,{ref_key:"standardNotificationContainerRef",ref:f},null,512),r(Da,{"sidebar-is-open":N(Je).show},null,8,["sidebar-is-open"]),r(Sl),r(Ai,{"all-projects":v.value,"active-project-id":c.value,onProjectSelected:$},null,8,["all-projects","active-project-id"]),e("div",jd,[r(Sn,{"unread-notification-count":x.value,onOpenCreateTaskModal:H[0]||(H[0]=P=>m.value=!0),onOpenAddResource:H[1]||(H[1]=P=>s.value=!0),onOpenNotificationsSidebar:N(Tt),onOpenKudoModal:H[2]||(H[2]=P=>t.value=!0),onOpenMeetingMinutesModal:H[3]||(H[3]=P=>p.value=!0)},null,8,["unread-notification-count","onOpenNotificationsSidebar"]),r(Nn,{"showing-navigation-dropdown":g.value,"unread-notification-count":x.value,onOpenCreateTaskModal:H[4]||(H[4]=P=>m.value=!0),onOpenAddResource:H[5]||(H[5]=P=>s.value=!0),onOpenNotificationsSidebar:N(Tt),onLogoutSuccess:b,onLogoutError:I},null,8,["showing-navigation-dropdown","unread-notification-count","onOpenNotificationsSidebar"]),L.$slots.header?(a(),i("header",Pd,[e("div",Ed,[Te(L.$slots,"header")])])):_("",!0),e("main",Id,[Te(L.$slots,"default")]),r(uo,{show:m.value,onClose:H[6]||(H[6]=P=>m.value=!1),onSaved:H[7]||(H[7]=P=>m.value=!1)},null,8,["show"]),r(yo,{"api-endpoint":"/api/shareable-resources",show:s.value,onClose:H[8]||(H[8]=P=>s.value=!1)},null,8,["show"]),r(Ko,{show:t.value,onClose:H[9]||(H[9]=P=>t.value=!1),onSubmitted:H[10]||(H[10]=P=>t.value=!1)},null,8,["show"]),r(Sd,{show:p.value,projects:v.value,onClose:H[11]||(H[11]=P=>p.value=!1),onMinutesAdded:H[12]||(H[12]=P=>p.value=!1)},null,8,["show","projects"])]),r(fd,{onTaskUpdated:j,onTaskDeleted:z}),r(Ro),r(ka,{show:N(n),unreadNotices:N(o),onClose:N(d)},null,8,["show","unreadNotices","onClose"]),r(_d)]))}};export{yo as C,Ut as R,Dt as T,nc as _,Nt as a,md as b,Ol as c,Al as d,ic as e,ac as f,mr as g,oc as h,ir as i,nr as j,cr as k,dr as l,rr as m,yd as n,pr as o,or as p,Ct as q,Bt as r,sr as s,Hn as t,ur as u,lc as v,uo as w,sc as x,kr as y};
