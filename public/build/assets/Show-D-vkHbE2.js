import{r as c,w as vt,c as _e,o as a,a as m,b as e,h as l,g as u,e as i,f as w,j as R,u as Ye,l as gs,t as n,k as v,n as B,s as Ae,d as Ue,B as ys,A as X,C as xs,L as fs,p as k,M as bs,D as _s,z as ws,N as hs,q as ks,F as A,i as P,v as se}from"./app-BX-MO2gA.js";import{s as js,_ as Ds}from"./AuthenticatedLayout-n-kBzsPc.js";import{P as E}from"./PrimaryButton-cDVGy_SR.js";import{a as I,_ as Z}from"./SecondaryButton-BYiqSkqb.js";import{_ as Cs}from"./ProjectForm-C2qpQMiQ.js";import{_ as Ms}from"./NotesModal-CNbZ4yGN.js";import{_ as O,a as z}from"./InputError-Ds8wopg2.js";import{_ as ae}from"./TextInput-BF0UT1k7.js";import{s as Et}from"./vue-multiselect-DWfBs5xx.js";import{R as St}from"./RichTextEditor-CoBDNr4C.js";import{_ as Ss}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-BSjX68Gr.js";import"./Checkbox-BYeUDDP7.js";const Es={class:"p-6"},$s={class:"mt-6 space-y-6"},Ts={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Vs={class:"flex items-center"},Ns={key:0,class:"text-sm text-red-600"},As={class:"flex justify-end mt-6 space-x-3"},Us={__name:"MeetingModal",props:{show:{type:Boolean,default:!1},projectId:{type:Number,required:!0},projectUsers:{type:Array,default:()=>[]}},emits:["close","saved"],setup(we,{emit:y}){const W=we,le=y,g=c({summary:"",description:"",start_datetime:"",end_datetime:"",attendee_user_ids:[],location:"",with_google_meet:!0}),b=c({}),H=c(!1),F=c("");vt(()=>W.show,f=>{f||T()});const he=f=>new Date(f).toISOString().slice(0,16),d=()=>{const f=new Date,x=new Date(f.getTime()+60*60*1e3),h=new Date(f.getTime()+2*60*60*1e3);g.value.start_datetime=he(x),g.value.end_datetime=he(h)},T=()=>{g.value={summary:"",description:"",start_datetime:"",end_datetime:"",attendee_user_ids:[],location:"",with_google_meet:!0},d(),b.value={},F.value="",H.value=!1};d();const q=f=>f?f.replace("T"," ")+":00":"",Pe=async()=>{H.value=!0,b.value={},F.value="";try{const f={...g.value};f.start_datetime=q(f.start_datetime),f.end_datetime=q(f.end_datetime);const x=await window.axios.post(`/api/projects/${W.projectId}/meetings`,f);le("saved",x.data),le("close")}catch(f){H.value=!1,f.response?f.response.status===422?b.value=f.response.data.errors:F.value=f.response.data.message||"An error occurred while creating the meeting.":(F.value="An unexpected error occurred. Please try again.",console.error("Error creating meeting:",f))}},ne=()=>{le("close")};return(f,x)=>(a(),_e(Z,{show:we.show,onClose:ne,"max-width":"2xl"},{default:m(()=>[e("div",Es,[x[11]||(x[11]=e("h2",{class:"text-lg font-medium text-gray-900"}," Schedule a Meeting ",-1)),e("div",$s,[e("div",null,[i(O,{for:"summary",value:"Meeting Title"}),i(ae,{id:"summary",modelValue:g.value.summary,"onUpdate:modelValue":x[0]||(x[0]=h=>g.value.summary=h),type:"text",class:"mt-1 block w-full",placeholder:"Project Status Meeting",required:""},null,8,["modelValue"]),i(z,{message:b.value.summary?b.value.summary[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[i(O,{for:"description",value:"Description"}),w(e("textarea",{id:"description","onUpdate:modelValue":x[1]||(x[1]=h=>g.value.description=h),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",rows:"3",placeholder:"Meeting agenda and details..."},null,512),[[R,g.value.description]]),i(z,{message:b.value.description?b.value.description[0]:"",class:"mt-2"},null,8,["message"])]),e("div",Ts,[e("div",null,[i(O,{for:"start_datetime",value:"Start Date & Time"}),i(ae,{id:"start_datetime",modelValue:g.value.start_datetime,"onUpdate:modelValue":x[2]||(x[2]=h=>g.value.start_datetime=h),type:"datetime-local",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),i(z,{message:b.value.start_datetime?b.value.start_datetime[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[i(O,{for:"end_datetime",value:"End Date & Time"}),i(ae,{id:"end_datetime",modelValue:g.value.end_datetime,"onUpdate:modelValue":x[3]||(x[3]=h=>g.value.end_datetime=h),type:"datetime-local",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),i(z,{message:b.value.end_datetime?b.value.end_datetime[0]:"",class:"mt-2"},null,8,["message"])])]),e("div",null,[i(O,{for:"attendees",value:"Attendees"}),i(Ye(Et),{id:"attendees",modelValue:g.value.attendee_user_ids,"onUpdate:modelValue":x[4]||(x[4]=h=>g.value.attendee_user_ids=h),options:W.projectUsers.map(h=>h.id),"custom-label":h=>{const ue=W.projectUsers.find(Fe=>Fe.id===h);return ue?`${ue.name} (${ue.email})`:""},placeholder:"Select attendees",multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,"show-labels":!1,class:"mt-1"},null,8,["modelValue","options","custom-label"]),x[7]||(x[7]=e("p",{class:"mt-1 text-sm text-gray-500"}," Select project members to invite to this meeting ",-1)),i(z,{message:b.value.attendee_user_ids?b.value.attendee_user_ids[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[i(O,{for:"location",value:"Location (Optional)"}),i(ae,{id:"location",modelValue:g.value.location,"onUpdate:modelValue":x[5]||(x[5]=h=>g.value.location=h),type:"text",class:"mt-1 block w-full",placeholder:"Office, Conference Room, etc."},null,8,["modelValue"]),i(z,{message:b.value.location?b.value.location[0]:"",class:"mt-2"},null,8,["message"])]),e("div",Vs,[w(e("input",{id:"with_google_meet","onUpdate:modelValue":x[6]||(x[6]=h=>g.value.with_google_meet=h),type:"checkbox",class:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,512),[[gs,g.value.with_google_meet]]),x[8]||(x[8]=e("label",{for:"with_google_meet",class:"ml-2 block text-sm text-gray-900"}," Create Google Meet video conference ",-1))]),F.value?(a(),l("div",Ns,n(F.value),1)):u("",!0),e("div",As,[i(I,{onClick:ne},{default:m(()=>x[9]||(x[9]=[v(" Cancel ")])),_:1,__:[9]}),i(E,{onClick:Pe,class:B({"opacity-25":H.value}),disabled:H.value},{default:m(()=>x[10]||(x[10]=[v(" Schedule Meeting ")])),_:1,__:[10]},8,["class","disabled"])])])])]),_:1},8,["show"]))}},Ps={class:"p-6"},Fs={key:0,class:"text-red-600 text-sm mb-4"},Rs={class:"mb-4"},Ls={class:"mb-4"},Bs={class:"mb-4"},Is={class:"mt-6 flex justify-end"},Os={__name:"StandupModal",props:{show:Boolean,projectId:Number},emits:["close","standupAdded"],setup(we,{emit:y}){const W=we,le=y,g=Ae({project_id:null,yesterday:"",today:"",blockers:""}),b=c({}),H=c(""),F=c(!1);vt(()=>W.projectId,d=>{d&&(g.project_id=d)},{immediate:!0}),vt(()=>W.show,d=>{d&&(g.project_id=W.projectId,g.yesterday="",g.today="",g.blockers="",b.value={},H.value="",F.value=!1)});const he=async()=>{b.value={},H.value="",F.value=!0;try{const d=`
**Daily Standup**

**Yesterday:** ${g.yesterday}

**Today:** ${g.today}

**Blockers:** ${g.blockers||"None"}
`.trim();await window.axios.post(`/api/projects/${g.project_id}/standup`,{content:d,yesterday:g.yesterday,today:g.today,blockers:g.blockers}),js("Standup submitted successfully!"),le("standupAdded"),le("close")}catch(d){d.response&&d.response.status===422?b.value=d.response.data.errors:d.response&&d.response.data.message?(H.value=d.response.data.message,d(d.response.data.message)):(H.value="Failed to submit standup.",d("Failed to submit standup."),console.error("Error submitting standup:",d))}finally{F.value=!1}};return(d,T)=>(a(),_e(Z,{show:we.show,onClose:T[4]||(T[4]=q=>d.$emit("close"))},{default:m(()=>[e("div",Ps,[T[6]||(T[6]=e("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Daily Standup",-1)),H.value?(a(),l("div",Fs,n(H.value),1)):u("",!0),e("form",{onSubmit:Ue(he,["prevent"])},[e("div",Rs,[i(O,{for:"yesterday",value:"What did you work on yesterday?"}),i(ae,{id:"yesterday",type:"text",class:"mt-1 block w-full",modelValue:g.yesterday,"onUpdate:modelValue":T[0]||(T[0]=q=>g.yesterday=q),required:""},null,8,["modelValue"]),i(z,{message:b.value.yesterday?b.value.yesterday[0]:"",class:"mt-2"},null,8,["message"])]),e("div",Ls,[i(O,{for:"today",value:"What will you work on today?"}),i(ae,{id:"today",type:"text",class:"mt-1 block w-full",modelValue:g.today,"onUpdate:modelValue":T[1]||(T[1]=q=>g.today=q),required:""},null,8,["modelValue"]),i(z,{message:b.value.today?b.value.today[0]:"",class:"mt-2"},null,8,["message"])]),e("div",Bs,[i(O,{for:"blockers",value:"Any blockers?"}),i(ae,{id:"blockers",type:"text",class:"mt-1 block w-full",modelValue:g.blockers,"onUpdate:modelValue":T[2]||(T[2]=q=>g.blockers=q),placeholder:"None"},null,8,["modelValue"]),i(z,{message:b.value.blockers?b.value.blockers[0]:"",class:"mt-2"},null,8,["message"])]),e("div",Is,[i(I,{onClick:T[3]||(T[3]=q=>d.$emit("close")),disabled:F.value},{default:m(()=>T[5]||(T[5]=[v("Cancel")])),_:1,__:[5]},8,["disabled"]),i(E,{class:B(["ms-3",{"opacity-75 cursor-not-allowed":F.value}]),type:"submit",disabled:F.value},{default:m(()=>[v(n(F.value?"Submitting...":"Submit Standup"),1)]),_:1},8,["disabled","class"])])],32)])]),_:1},8,["show"]))}},zs={class:"py-8 max-w-full mx-auto px-4 sm:px-6 lg:px-8"},Hs={key:0,class:"text-center text-gray-600 text-lg animate-pulse"},Ws={key:1,class:"text-center text-red-600 text-lg font-medium"},qs={key:2,class:"space-y-8"},Gs={class:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow mb-6"},Ys={class:"flex justify-between items-center mb-4"},Qs={class:"flex gap-3"},Js={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ks={class:"text-2xl font-bold text-gray-900 tracking-tight mb-2"},Xs={class:"text-gray-600 text-base"},Zs={class:"space-y-3 text-sm text-gray-700"},eo={class:"flex space-x-4 mt-2"},to=["href"],so=["href"],oo=["href"],ao={class:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow mb-6"},lo={key:0,class:"text-sm text-gray-500"},no={key:1,class:"text-sm text-gray-500"},ro={key:2,class:"space-y-3"},io={class:"flex justify-between items-start"},uo={class:"font-medium text-gray-900"},co={class:"text-sm text-gray-600"},mo={key:0,class:"text-sm text-gray-600 mt-1"},vo={class:"flex space-x-2"},po=["href"],go=["href"],yo=["onClick"],xo={class:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-6"},fo={class:"bg-white p-4 rounded-xl shadow-md hover:shadow-lg transition-shadow"},bo={class:"text-2xl font-bold text-indigo-600"},_o={class:"bg-white p-4 rounded-xl shadow-md hover:shadow-lg transition-shadow"},wo={class:"text-2xl font-bold text-indigo-600"},ho={class:"bg-white p-4 rounded-xl shadow-md hover:shadow-lg transition-shadow"},ko={class:"text-2xl font-bold text-indigo-600"},jo={class:"bg-white p-4 rounded-xl shadow-md hover:shadow-lg transition-shadow"},Do={class:"text-2xl font-bold text-indigo-600"},Co={class:"bg-white p-4 rounded-xl shadow-md mb-6"},Mo={class:"border-b border-gray-200"},So={class:"-mb-px flex space-x-8"},Eo={key:0},$o={key:0,class:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow mb-6"},To={class:"flex justify-between items-center mb-4"},Vo={class:"overflow-x-auto"},No={class:"min-w-full divide-y divide-gray-200"},Ao={class:"bg-white divide-y divide-gray-200"},Uo={class:"px-4 py-3 text-sm text-gray-900"},Po={class:"px-4 py-3 text-sm text-gray-700"},Fo={class:"px-4 py-3 text-sm text-gray-700"},Ro={class:"px-4 py-3 text-right"},Lo={class:"flex justify-end space-x-2"},Bo=["onClick"],Io=["onClick"],Oo={key:1,class:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow mb-6"},zo={class:"flex justify-between items-center mb-4"},Ho={key:2,class:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow mb-6"},Wo={class:"flex justify-between items-center mb-4"},qo={key:0,class:"text-center text-gray-600 text-sm animate-pulse py-4"},Go={key:1,class:"text-center text-red-600 text-sm font-medium py-4"},Yo={key:2,class:"overflow-x-auto"},Qo={class:"min-w-full divide-y divide-gray-200"},Jo={class:"bg-white divide-y divide-gray-200"},Ko={class:"px-4 py-3 text-sm text-gray-900"},Xo={class:"px-4 py-3 text-sm text-gray-700"},Zo={class:"px-4 py-3 text-sm text-gray-700"},ea={class:"px-4 py-3 text-right"},ta={key:3,class:"text-gray-400 text-sm"},sa={key:3,class:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow mb-6"},oa={class:"flex justify-between items-center mb-4"},aa={class:"flex items-center gap-4"},la={key:0},na={key:0,class:"space-y-4"},ra={class:"flex justify-between"},ia={class:"flex-grow"},da={key:0,class:"text-xs text-red-400 block mt-1"},ua={class:"flex items-center mt-1"},ca={class:"text-xs text-gray-500"},ma={key:0,class:"ml-2 px-2 py-0.5 bg-indigo-100 text-indigo-800 text-xs rounded-full"},va={key:0},pa={key:1,class:"text-gray-400 text-sm"},ga={key:4,class:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow mb-6"},ya={class:"flex justify-between items-center mb-4"},xa={class:"flex items-center gap-4"},fa={key:0},ba={class:"space-y-4"},_a={key:0,class:"flex justify-between"},wa={class:"flex-grow"},ha={class:"text-sm text-red-500 italic"},ka={class:"flex items-center mt-1"},ja={class:"text-xs text-gray-500"},Da={key:1},Ca={class:"flex-grow"},Ma={class:"flex justify-between items-center mb-3"},Sa={class:"text-sm text-gray-600 bg-blue-100 px-2 py-1 rounded-full"},Ea={class:"mb-3"},$a={class:"text-sm text-gray-700 ml-6"},Ta={class:"mb-3"},Va={class:"text-sm text-gray-700 ml-6"},Na={class:"mb-2"},Aa={class:"text-sm text-gray-700 ml-6"},Ua={class:"flex items-center mt-3 pt-2 border-t border-blue-200"},Pa={class:"text-xs text-gray-500"},Fa={key:1,class:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow"},Ra={class:"flex justify-between items-center mb-4"},La={class:"flex gap-2"},Ba={key:0},Ia={key:1},Oa={class:"mb-6 overflow-x-auto"},za={key:0,class:"text-center text-gray-600 text-sm animate-pulse py-4"},Ha={key:1,class:"text-center py-4"},Wa={key:2,class:"relative py-8"},qa={class:"relative flex justify-between"},Ga={key:0,class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ya={key:1,class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Qa={key:2,class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ja={key:3,class:"w-2 h-2 bg-white rounded-full"},Ka={class:"absolute -top-8 transform -translate-x-1/2 left-1/2 w-32"},Xa=["title"],Za={class:"absolute top-8 transform -translate-x-1/2 left-1/2"},el={class:"text-xs text-gray-500 whitespace-nowrap"},tl={class:"mb-6 bg-gray-50 p-4 rounded-lg"},sl={class:"flex flex-wrap items-center gap-4"},ol={class:"flex-1 min-w-[200px]"},al={class:"flex-1 min-w-[200px]"},ll=["value"],nl={class:"flex-1 min-w-[200px]"},rl=["value"],il={class:"flex-1 min-w-[200px]"},dl=["value"],ul={key:0,class:"mt-3 text-sm text-gray-600"},cl={key:0,class:"text-red-600 font-medium"},ml={key:0,class:"text-center text-gray-600 text-sm animate-pulse py-4"},vl={key:1,class:"text-center py-4"},pl={class:"text-red-600 text-sm font-medium"},gl={key:2,class:"overflow-x-auto"},yl={class:"min-w-full divide-y divide-gray-200"},xl={class:"bg-white divide-y divide-gray-200"},fl={class:"px-4 py-3 text-sm text-gray-900"},bl={class:"px-4 py-3 text-sm text-gray-700"},_l={class:"px-4 py-3 text-sm text-gray-700"},wl={class:"px-4 py-3 text-sm text-gray-700"},hl={class:"px-4 py-3 text-sm text-gray-700"},kl={class:"px-4 py-3 text-right"},jl={class:"flex justify-end space-x-2"},Dl=["onClick"],Cl=["onClick"],Ml=["onClick"],Sl=["onClick"],El={key:3,class:"text-center py-4"},$l={key:2,class:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow"},Tl={class:"flex justify-between items-center mb-4"},Vl={key:0,class:"flex gap-3"},Nl={key:1,class:"mt-2 bg-green-100 border border-green-400 text-green-700 px-4 py-2 rounded relative",role:"alert"},Al={class:"block sm:inline"},Ul={class:"mb-4 bg-gray-50 p-4 rounded-lg"},Pl={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Fl={class:"mt-1 relative rounded-md shadow-sm"},Rl={key:0,class:"text-center text-gray-600 text-sm animate-pulse py-4"},Ll={key:1,class:"text-center text-red-600 text-sm font-medium py-4"},Bl={key:2,class:"overflow-x-auto"},Il={class:"min-w-full divide-y divide-gray-200"},Ol={class:"bg-white divide-y divide-gray-200"},zl={class:"px-4 py-3 text-sm text-gray-900"},Hl={class:"px-4 py-3 text-sm text-gray-700"},Wl={class:"px-4 py-3 text-sm text-gray-700"},ql={class:"px-4 py-3 text-sm text-gray-700"},Gl={class:"px-4 py-3 text-sm text-gray-700"},Yl={class:"px-4 py-3 text-right"},Ql={key:3,class:"text-gray-400 text-sm"},Jl={key:3,class:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow"},Kl={class:"flex justify-between items-center mb-4"},Xl={class:"flex gap-3"},Zl={class:"mb-4 bg-gray-50 p-4 rounded-lg"},en={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},tn={class:"mt-1 relative rounded-md shadow-sm"},sn={key:0,class:"mb-8"},on={class:"space-y-4"},an={key:0,class:"flex justify-between"},ln={class:"flex-grow"},nn={class:"text-sm text-red-500 italic"},rn={class:"flex items-center mt-1"},dn={class:"text-xs text-gray-500"},un={key:1},cn={class:"flex-grow"},mn={class:"flex justify-between items-center mb-3"},vn={class:"text-sm text-gray-600 bg-blue-100 px-2 py-1 rounded-full"},pn={class:"mb-3"},gn={class:"text-sm text-gray-700 ml-6"},yn={class:"mb-3"},xn={class:"text-sm text-gray-700 ml-6"},fn={class:"mb-2"},bn={class:"text-sm text-gray-700 ml-6"},_n={class:"flex items-center mt-3 pt-2 border-t border-blue-200"},wn={class:"text-xs text-gray-500"},hn={key:0,class:"space-y-4"},kn={class:"flex justify-between"},jn={class:"flex-grow"},Dn={key:0,class:"text-xs text-red-400 block mt-1"},Cn={class:"flex items-center mt-1"},Mn={class:"text-xs text-gray-500"},Sn={key:0,class:"ml-2 px-2 py-0.5 bg-indigo-100 text-indigo-800 text-xs rounded-full"},En={key:0},$n={key:1,class:"text-gray-400 text-sm"},Tn={class:"p-6"},Vn={class:"flex justify-between items-center mb-4"},Nn={key:0,class:"space-y-4"},An={class:"border-b pb-4"},Un={class:"text-xl font-medium text-gray-900 mb-2"},Pn={class:"grid grid-cols-2 gap-4 text-sm"},Fn={class:"text-gray-600"},Rn={class:"text-gray-900"},Ln={class:"text-gray-600 mt-1"},Bn={class:"text-gray-600"},In={class:"text-gray-900"},On={class:"prose max-w-none"},zn=["innerHTML"],Hn={key:0,class:"mt-4 p-4 bg-red-50 rounded-md"},Wn={class:"text-red-700"},qn={key:1,class:"mt-4 text-sm text-gray-600"},Gn={key:0},Yn={key:2,class:"mt-6 flex justify-end space-x-2"},Qn={class:"p-6"},Jn={class:"flex justify-between items-center mb-4"},Kn={key:0,class:"space-y-4"},Xn={key:0,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert"},Zn={class:"block sm:inline"},er={class:"mb-4"},tr={class:"mb-6"},sr={class:"mt-6 flex justify-end space-x-2"},or={class:"p-6"},ar={class:"flex justify-between items-center mb-4"},lr={key:0,class:"space-y-4"},nr={key:0,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert"},rr={class:"block sm:inline"},ir={class:"mb-6"},dr={class:"mt-6 flex justify-end space-x-2"},ur={class:"p-6"},cr={class:"flex justify-between items-center mb-4"},mr={key:0,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert"},vr={class:"block sm:inline"},pr={class:"mb-4"},gr={class:"multiselect__tag"},yr=["onClick"],xr={class:"mb-4"},fr={class:"mb-6"},br={class:"flex items-center justify-end"},_r={class:"p-6"},wr={class:"flex justify-between items-center mb-4"},hr={key:0,class:"mb-4 p-3 bg-gray-100 rounded-md"},kr={class:"text-sm text-gray-700"},jr={class:"text-xs text-gray-500 mt-1"},Dr={key:1,class:"mb-4"},Cr={key:0,class:"text-center py-4"},Mr={key:1,class:"space-y-3 max-h-60 overflow-y-auto"},Sr={class:"text-sm text-gray-700"},Er={class:"text-xs text-gray-500 mt-1"},$r={key:2,class:"text-center py-3"},Tr={key:2,class:"mb-4"},Vr={key:0,class:"mt-2 text-sm text-red-600"},Nr={key:3,class:"mt-6 flex justify-end"},Ar={class:"p-6"},Ur={class:"flex justify-between items-center mb-4"},Pr={class:"text-lg font-semibold text-gray-900"},Fr={key:0,class:"mt-1 text-sm text-red-600"},Rr={key:0,class:"mt-1 text-sm text-red-600"},Lr={key:0,class:"mt-1 text-sm text-red-600"},Br={key:0,class:"mt-1 text-sm text-red-600"},Ir=["value"],Or={key:0,class:"mt-1 text-sm text-red-600"},zr={key:0,class:"text-sm text-gray-500"},Hr=["value"],Wr={key:2,class:"mt-1 text-sm text-red-600"},qr={key:0,class:"text-sm text-gray-500"},Gr=["value"],Yr={key:2,class:"mt-1 text-sm text-red-600"},Qr={class:"mt-6 flex justify-end space-x-3"},Jr={class:"p-6"},Kr={class:"flex justify-between items-center mb-4"},Xr={key:0,class:"mt-1 text-sm text-red-600"},Zr={key:0,class:"mt-1 text-sm text-red-600"},ei={key:0,class:"mt-1 text-sm text-red-600"},ti={key:0,class:"mt-1 text-sm text-red-600"},si={class:"mt-6 flex justify-end space-x-3"},oi={class:"p-6"},ai={class:"flex justify-between items-center mb-4"},li={key:0,class:"mb-4 p-3 bg-gray-100 rounded-md"},ni={class:"text-sm font-medium text-gray-900"},ri={class:"text-xs text-gray-500 mt-1"},ii={class:"mb-4"},di={key:0,class:"mt-2 text-sm text-red-600"},ui={class:"mt-6 flex justify-end"},ci={__name:"Show",setup(we){const y=ys(),W=X().props.id,{permissions:le,loading:g,error:b}=xs(),{permissions:H,loading:F,error:he}=fs(W),d=c({}),T=c([]),q=c([]),Pe=c(!0),ne=c(""),f=c(!1),x=c(!1),h=c(!1),ue=c(!1),Fe=c(!1),oe=c(null),ke=c(""),ce=c(""),Re=c([]),Le=c(!1),ot=c([]),at=c(!1);c(null);const U=c(null),Qe=k(()=>d.value.notes?d.value.notes.filter(o=>o.type==="note"||!o.type):[]),Be=k(()=>d.value.notes?d.value.notes.filter(o=>o.type==="standup"):[]),pt=k(()=>Qe.value?[...Qe.value].slice(0,3):[]),$t=k(()=>Be.value?[...Be.value].slice(0,3):[]),re=o=>{if(!o||o==="[Encrypted content could not be decrypted]")return{title:"Daily Standup",date:new Date().toLocaleDateString(),yesterday:"N/A",today:"N/A",blockers:"N/A",isDecrypted:!1};const t=o.match(/\*\*Daily Standup - ([^*]+)\*\*/),s=t?t[1].trim():new Date().toLocaleDateString(),r=o.match(/\*\*Yesterday:\*\* ([^\n]+)/),p=r?r[1].trim():"Nothing",D=o.match(/\*\*Today:\*\* ([^\n]+)/),be=D?D[1].trim():"Nothing",Mt=o.match(/\*\*Blockers:\*\* ([^\n]+)/),ps=Mt?Mt[1].trim():"None";return{title:"Daily Standup",date:s,yesterday:p,today:be,blockers:ps,isDecrypted:!0}},gt=k(()=>ie.value?[...ie.value].slice(0,3):[]),yt=k(()=>{if(!G.value)return[];const o=new Date;return o.setHours(0,0,0,0),G.value.filter(t=>t.due_date?new Date(t.due_date).toDateString()===o.toDateString():!1)}),xt=()=>{x.value=!0},ft=async o=>{oe.value=o,ke.value="",ce.value="",Re.value=[],Le.value=!0,h.value=!0;try{const t=await window.axios.get(`/api/projects/${d.value.id}/notes/${o.id}/replies`);t.data.success?Re.value=t.data.replies:console.error("Failed to fetch replies:",t.data.message)}catch(t){console.error("Error fetching replies:",t)}finally{Le.value=!1}},Tt=async()=>{var o,t;if(!oe.value||!ke.value.trim()){ce.value="Reply content is required";return}ce.value="";try{const s=await window.axios.post(`/api/projects/${d.value.id}/notes/${oe.value.id}/reply`,{content:ke.value});if(s.data.success){ke.value="";try{Le.value=!0;const r=await window.axios.get(`/api/projects/${d.value.id}/notes/${oe.value.id}/replies`);r.data.success&&(Re.value=r.data.replies)}catch(r){console.error("Error fetching updated replies:",r)}finally{Le.value=!1}await Ke()}else ce.value=s.data.message||"Failed to send reply"}catch(s){console.error("Error sending reply:",s),ce.value=((t=(o=s.response)==null?void 0:o.data)==null?void 0:t.message)||"An error occurred while sending the reply"}},Vt=[{value:"active",label:"Active"},{value:"completed",label:"Completed"},{value:"on_hold",label:"On Hold"},{value:"archived",label:"Archived"}],Nt=[{value:"Website Designing",label:"Website Designing"},{value:"SEO",label:"SEO"},{value:"Social Media",label:"Social Media"},{value:"Content Writing",label:"Content Writing"},{value:"Graphic Design",label:"Graphic Design"}],At=[{value:"UpWork",label:"UpWork"},{value:"Direct",label:"Direct Client"},{value:"Wix Marketplace",label:"Wix Marketplace"},{value:"Referral",label:"Referral"}],Ut=[{value:"Primary",label:"Primary"},{value:"Accountant",label:"Accountant"},{value:"Other",label:"Other"}],Pt=[{value:"Manager",label:"Manager"},{value:"Developer",label:"Developer"},{value:"QA",label:"QA"},{value:"Other",label:"Other"}],Ft=[{value:"one_off",label:"One-Off"},{value:"monthly",label:"Monthly"}],C=bs(d),bt=k(()=>!!C.value),_t=k(()=>{if(!C.value)return!1;const o=C.value.name,t=C.value.slug;return o==="Manager"||o==="Project Manager"||t==="manager"||t==="project-manager"}),{canDo:je,canView:me}=_s(W),ee=k(()=>y.value?y.value.role_data&&y.value.role_data.slug==="super-admin"||y.value.role==="super_admin"||y.value.role==="super-admin":!1);k(()=>y.value?y.value.role_data&&y.value.role_data.slug==="manager"||y.value.role==="manager"||y.value.role==="manager-role"||y.value.role==="manager_role"||_t.value:!1),k(()=>!y.value||bt.value&&!_t.value?!1:y.value.role_data&&y.value.role_data.slug==="employee"||y.value.role==="employee"||y.value.role==="employee-role"),k(()=>!y.value||bt.value?!1:y.value.role_data&&y.value.role_data.slug==="contractor"||y.value.role==="contractor"||y.value.role==="contractor-role");const ve=k(()=>{console.log("userProjectRole in canManageProjects:",C.value);const o=C.value&&C.value.permissions&&C.value.permissions.some(D=>D.slug==="manage_projects");console.log("Has project-specific manage_projects permission:",o);const t=y.value&&y.value.global_permissions&&y.value.global_permissions.some(D=>D.slug==="manage_projects");console.log("Has global manage_projects permission:",t);const s=y.value&&y.value.role&&y.value.role.permissions&&y.value.role.permissions.some(D=>D.slug==="manage_projects");console.log("Has role manage_projects permission:",s);const r=je("manage_projects",C).value;console.log("canDo result for manage_projects:",r);const p=r||ee.value;return console.log("Final canManageProjects result:",p),p}),Rt=k(()=>me("project_financial",C).value||ee.value),Lt=k(()=>me("project_transactions",C).value||ee.value);k(()=>me("client_contacts",C).value||ee.value);const Bt=k(()=>me("client_financial",C).value||ee.value);k(()=>me("users",C).value||ee.value);const lt=k(()=>me("emails",C).value||!1),It=k(()=>je("compose_emails",C).value||!1),Ot=k(()=>je("approve_emails",C).value||!1),Ie=k(()=>me("project_notes",C).value||!1),wt=k(()=>je("project_notes",C).value||!1),L=Ae({startDate:"",endDate:"",search:""}),Je=async()=>{try{const o=X().props.id,t=new URLSearchParams;L.startDate&&t.append("start_date",L.startDate),L.endDate&&t.append("end_date",L.endDate),L.search&&t.append("search",L.search);const s=t.toString(),r=`/api/projects/${o}/sections/notes${s?`?${s}`:""}`,p=await window.axios.get(r);d.value.notes=p.data}catch(o){console.error("Error fetching project notes:",o)}},nt=()=>{Je()},zt=()=>{L.startDate="",L.endDate="",L.search="",Je()};let ht=null;const Ht=()=>{clearTimeout(ht),ht=setTimeout(()=>{nt()},500)},Ke=async()=>{Pe.value=!0,ne.value="";try{const o=X().props.id;console.log("Fetching project data for ID:",o);const t=await window.axios.get(`/api/projects/${o}/sections/basic`);console.log("Basic project data received:",t.data),d.value=t.data;try{const s=await window.axios.get(`/api/projects/${o}/sections/clients-users`);if(console.log("Clients and users data received:",s.data),s.data.clients&&(d.value.clients=s.data.clients),s.data.users){if(d.value.users=s.data.users,console.log("Project users:",d.value.users.length),d.value.users.length>0){const r=d.value.users[0];console.log("First user structure:",{id:r.id,name:r.name,hasPivot:!!r.pivot,pivotData:r.pivot?{hasRoleId:!!r.pivot.role_id,hasRoleData:!!r.pivot.role_data,roleDataStructure:r.pivot.role_data}:"No pivot data"});const p=d.value.users.find(D=>D.id===y.value.id);console.log("Current user in project:",p?{name:p.name,hasPivot:!!p.pivot,pivotData:p.pivot?{hasRoleId:!!p.pivot.role_id,hasRoleData:!!p.pivot.role_data,roleDataStructure:p.pivot.role_data}:"No pivot data"}:"Not found")}}else console.log("No users array in project data")}catch(s){console.error("Error fetching clients and users:",s)}if(Rt.value)try{const s=await window.axios.get(`/api/projects/${o}/sections/services-payment`);console.log("Financial data received:",s.data),d.value.services=s.data.services,d.value.service_details=s.data.service_details,d.value.total_amount=s.data.total_amount,d.value.payment_type=s.data.payment_type}catch(s){console.error("Error fetching financial information:",s)}if(Lt.value)try{const s=await window.axios.get(`/api/projects/${o}/sections/transactions`);console.log("Transactions data received:",s.data),d.value.transactions=s.data}catch(s){console.error("Error fetching transactions:",s)}try{const s=await window.axios.get(`/api/projects/${o}/sections/documents`);console.log("Documents data received:",s.data),d.value.documents=s.data}catch(s){console.error("Error fetching documents:",s)}if(Bt.value)try{const s=await window.axios.get(`/api/projects/${o}/contract-details`);console.log("Contract details received:",s.data),d.value.contract_details=s.data}catch(s){console.error("Error fetching contract details:",s)}if(console.log("Project value after assignment:",d.value),console.log("userProjectRole after project set:",C.value),ve.value){console.log("User can manage projects, fetching additional data");const s=await window.axios.get("/api/clients");T.value=s.data;const r=await window.axios.get("/api/users");q.value=r.data.filter(p=>p.role==="contractor")}else console.log("User cannot manage projects, skipping additional data fetch")}catch(o){ne.value="Failed to load project data.",console.error("Error fetching project data:",o),o.response&&(o.response.status===401||o.response.status===403)&&(ne.value="You are not authorized to view this project or your session expired. Please log in.")}finally{Pe.value=!1}},Wt=()=>{f.value=!0},qt=o=>{d.value=o,f.value=!1,alert("Project updated successfully!"),Ke()},G=c([]),Oe=c(!1),ze=c(""),pe=c(!1),De=c(null),M=c({name:"",description:"",assigned_to_user_id:null,due_date:null,status:"To Do",task_type_id:null,milestone_id:null,tags:[]}),V=c({}),He=c([]),Y=c([]),Xe=c(!1),We=c(!1),N=c({status:"",assigned_to_user_id:"",milestone_id:"",due_date_range:""}),Gt=[{value:"",label:"All Dates"},{value:"today",label:"Due Today"},{value:"this_week",label:"Due This Week"},{value:"next_week",label:"Due Next Week"},{value:"overdue",label:"Overdue"},{value:"no_date",label:"No Due Date"}],rt=k(()=>!Y.value||!Y.value.length?[]:[...Y.value].sort((o,t)=>o.completion_date?t.completion_date?new Date(o.completion_date)-new Date(t.completion_date):-1:1)),it=k(()=>G.value.length?G.value.filter(o=>{var t;if(N.value.status&&o.status!==N.value.status)return!1;if(N.value.assigned_to_user_id){const s=parseInt(N.value.assigned_to_user_id);if(s===-1){if(o.assigned_to!=="Unassigned")return!1}else{const r=(t=d.value.users)==null?void 0:t.find(p=>p.id===s);if(r&&o.assigned_to!==r.name)return!1}}if(N.value.milestone_id){const s=parseInt(N.value.milestone_id);if(s===-1){if(o.milestone)return!1}else{const r=Y.value.find(p=>p.id===s);if(r&&o.milestone!==r.name&&o.milestone_id!==s)return!1}}if(N.value.due_date_range){const s=new Date;s.setHours(0,0,0,0);const r=o.due_date?new Date(o.due_date):null;switch(N.value.due_date_range){case"today":if(!r||r.toDateString()!==s.toDateString())return!1;break;case"this_week":{if(!r)return!1;const p=new Date(s);if(p.setDate(s.getDate()+(6-s.getDay())),r<s||r>p)return!1;break}case"next_week":{if(!r)return!1;const p=new Date(s);p.setDate(s.getDate()+(7-s.getDay()));const D=new Date(p);if(D.setDate(p.getDate()+6),r<p||r>D)return!1;break}case"overdue":{if(!r||r>=s)return!1;break}case"no_date":{if(r)return!1;break}}}return!0}):[]),Yt=()=>{N.value={status:"",assigned_to_user_id:"",milestone_id:"",due_date_range:""}},Ce=c(!1),Me=c(null),Se=c(""),ge=c(""),Ze=c(!1),Ee=c(!1),te=c({name:"",description:"",completion_date:null,status:"Not Started",project_id:X().props.id}),Q=c({}),et=c(!1),$e=async()=>{Oe.value=!0,ze.value="";try{const o=X().props.id,t=await window.axios.get(`/api/projects/${o}/tasks`);G.value=t.data,console.log("Tasks fetched:",G.value)}catch(o){ze.value="Failed to load tasks data.",console.error("Error fetching project tasks:",o),o.response&&o.response.data&&o.response.data.message&&(ze.value=o.response.data.message)}finally{Oe.value=!1}},dt=async()=>{Xe.value=!0;try{const o=await window.axios.get("/api/task-types");He.value=o.data}catch(o){console.error("Error fetching task types:",o)}finally{Xe.value=!1}},ut=async()=>{We.value=!0;try{const o=X().props.id,t=await window.axios.get(`/api/projects/${o}/milestones`);Y.value=t.data}catch(o){console.error("Error fetching milestones:",o)}finally{We.value=!1}},Qt=()=>{te.value={name:"",description:"",completion_date:null,status:"Not Started",project_id:X().props.id},Q.value={},Ee.value=!0},Jt=async()=>{Q.value={},et.value=!0;try{const o=await window.axios.post("/api/milestones",te.value);Y.value.push(o.data),M.value.milestone_id=o.data.id,Ee.value=!1,alert("Milestone created successfully!")}catch(o){console.error("Error creating milestone:",o),o.response&&o.response.data&&o.response.data.errors?Q.value=o.response.data.errors:alert("Failed to create milestone. Please try again.")}finally{et.value=!1}},Kt=async()=>{De.value=null,M.value={name:"",description:"",assigned_to_user_id:null,due_date:null,status:"To Do",task_type_id:null,milestone_id:null,tags:[]},V.value={},He.value.length===0&&await dt(),Y.value.length===0&&await ut(),pe.value=!0},kt=async o=>{var p;De.value=o,He.value.length===0&&await dt(),Y.value.length===0&&await ut();let t=null;if(o.milestone){const D=Y.value.find(be=>be.name===o.milestone);D&&(t=D.id)}let s=null;if(o.task_type){const D=He.value.find(be=>be.name===o.task_type);D&&(s=D.id)}let r=null;if(o.assigned_to&&o.assigned_to!=="Unassigned"){const D=(p=d.value.users)==null?void 0:p.find(be=>be.name===o.assigned_to);D&&(r=D.id)}M.value={name:o.title,description:o.description||"",assigned_to_user_id:r||o.assigned_to_id||null,due_date:o.due_date||null,status:o.status,task_type_id:s||o.task_type_id||null,milestone_id:t,tags:o.tags||[]},V.value={},pe.value=!0},Xt=async o=>{try{await window.axios.post(`/api/tasks/${o.id}/complete`),await $e()}catch(t){console.error("Error marking task as completed:",t),alert("Failed to mark task as completed. Please try again.")}},Zt=async o=>{try{await window.axios.post(`/api/tasks/${o.id}/start`),await $e()}catch(t){console.error("Error starting task:",t),alert("Failed to start task. Please try again.")}},jt=o=>{Me.value=o,Se.value="",ge.value="",Ce.value=!0},es=async()=>{if(!Se.value.trim()){ge.value="Note content is required";return}ge.value="",Ze.value=!0;try{await window.axios.post(`/api/tasks/${Me.value.id}/notes`,{note:Se.value}),Ce.value=!1,Se.value="",Me.value=null,await $e(),alert("Note added successfully!")}catch(o){console.error("Error adding note to task:",o),o.response&&o.response.data&&o.response.data.message?ge.value=o.response.data.message:ge.value="Failed to add note. Please try again."}finally{Ze.value=!1}},ts=async()=>{V.value={};try{let o;De.value?o=await window.axios.put(`/api/tasks/${De.value.id}`,M.value):o=await window.axios.post("/api/tasks",{...M.value,milestone_id:M.value.milestone_id||null}),pe.value=!1,await $e()}catch(o){console.error("Error submitting task form:",o),o.response&&o.response.data&&o.response.data.errors?V.value=o.response.data.errors:alert("Failed to save task. Please try again.")}},ie=c([]),tt=c(!1),j=c(""),_=c(null),ye=c(!1),S=Ae({type:"",startDate:"",endDate:"",search:""});let Dt=null;const st=()=>{fe()},ss=()=>{S.type="",S.startDate="",S.endDate="",S.search="",fe()},os=()=>{clearTimeout(Dt),Dt=setTimeout(()=>{st()},500)},Te=c(!1),Ve=c(!1),de=Ae({subject:"",body:""}),xe=c({}),qe=Ae({rejection_reason:""}),Ge=c({}),J=c(""),Ne=c(!1),$=Ae({project_id:"",client_ids:[],subject:"",body:""}),K=c({}),fe=async()=>{tt.value=!0,j.value="";try{const o=X().props.id,t=new URLSearchParams;S.type&&t.append("type",S.type),S.startDate&&t.append("start_date",S.startDate),S.endDate&&t.append("end_date",S.endDate),S.search&&t.append("search",S.search);const s=t.toString(),r=`/api/projects/${o}/emails-simplified${s?`?${s}`:""}`,p=await window.axios.get(r);ie.value=p.data}catch(o){j.value="Failed to load email data.",console.error("Error fetching project emails:",o)}finally{tt.value=!1}},ct=async()=>{at.value=!0;try{const o=X().props.id,t=await window.axios.get(`/api/projects/${o}/meetings`);ot.value=t.data}catch(o){console.error("Error fetching project meetings:",o)}finally{at.value=!1}},as=()=>{ue.value=!0},mt=()=>{Fe.value=!0},ls=o=>{ct()},ns=async o=>{if(confirm("Are you sure you want to delete this meeting?"))try{const t=X().props.id;await window.axios.delete(`/api/projects/${t}/meetings/${o}`),ct()}catch(t){console.error("Error deleting meeting:",t),alert("Failed to delete meeting. Please try again.")}},Ct=o=>{_.value=o,ye.value=!0},rs=async o=>{J.value="",j.value="";try{await window.axios.post(`/api/emails/${o.id}/approve`),J.value="Email approved successfully!",await fe(),ye.value=!1}catch(t){t.response&&t.response.data.message?j.value=t.response.data.message:(j.value="Failed to approve email.",console.error("Error approving email:",t))}},is=o=>{_.value=o,de.subject=o.subject,de.body=o.body,xe.value={},Te.value=!0,ye.value=!1},ds=async()=>{xe.value={},j.value="",J.value="";try{const o={subject:de.subject,body:de.body};await window.axios.post(`/api/emails/${_.value.id}/edit-and-approve`,o),J.value="Email updated and approved successfully!",Te.value=!1,await fe()}catch(o){o.response&&o.response.status===422?xe.value=o.response.data.errors:o.response&&o.response.data.message?j.value=o.response.data.message:(j.value="Failed to update and approve email.",console.error("Error updating and approving email:",o))}},us=o=>{_.value=o,qe.rejection_reason="",Ge.value={},Ve.value=!0,ye.value=!1},cs=async()=>{Ge.value={},j.value="",J.value="";try{await window.axios.post(`/api/emails/${_.value.id}/reject`,{rejection_reason:qe.rejection_reason}),J.value="Email rejected successfully!",qe.rejection_reason="",Ve.value=!1,await fe()}catch(o){o.response&&o.response.status===422?Ge.value=o.response.data.errors:o.response&&o.response.data.message?j.value=o.response.data.message:(j.value="Failed to reject email.",console.error("Error rejecting email:",o))}},ms=()=>{$.project_id=d.value.id,$.client_ids=[],$.subject="",$.body="",K.value={},J.value="",Ne.value=!0},vs=async()=>{if(K.value={},j.value="",J.value="",!$.client_ids||$.client_ids.length===0){K.value.client_ids=["Please select at least one client."];return}try{const o=$.client_ids.map(s=>typeof s=="object"&&s!==null?{id:s.id}:{id:s}),t={project_id:$.project_id,client_ids:o,subject:$.subject,body:$.body,status:"pending_approval"};await window.axios.post("/api/emails",t),J.value="Email submitted for approval successfully!",$.client_ids=[],$.subject="",$.body="",K.value={},Ne.value=!1,await fe()}catch(o){o.response&&o.response.status===422?K.value=o.response.data.errors:o.response&&o.response.data.message?j.value=o.response.data.message:(j.value="Failed to submit email. An unexpected error occurred.",console.error("Error submitting email:",o))}};return ws(async()=>{console.log("Component mounted, fetching data...");try{const o=X().props.id,t=await hs(o);console.log("Project permissions fetched (includes global):",t)}catch(o){console.error(`Error fetching permissions for project ${W}:`,o)}await Ke(),await Je(),await fe(),await $e(),await ct();try{await dt(),await ut(),console.log("Task types and milestones fetched successfully")}catch(o){console.error("Error fetching task types or milestones:",o)}console.log("All data loaded, permission status:"),console.log("- Global permissions:",le.value),console.log("- Global permissions loading:",g.value),console.log("- Global permissions error:",b.value),console.log("- Project permissions:",H.value),console.log("- Project permissions loading:",F.value),console.log("- Project permissions error:",he.value),console.log("- User project role:",C.value),console.log("- Can manage projects:",ve.value)}),(o,t)=>(a(),l(A,null,[i(Ye(ks),{title:d.value.name||"Project Details"},null,8,["title"]),i(Ds,null,{default:m(()=>[e("div",zs,[Pe.value?(a(),l("div",Hs," Loading project details... ")):ne.value?(a(),l("div",Ws,n(ne.value),1)):(a(),l("div",qs,[e("div",Gs,[e("div",Ys,[t[73]||(t[73]=e("h4",{class:"text-lg font-semibold text-gray-900"},"General Information",-1)),e("div",Qs,[i(E,{class:"bg-blue-600 hover:bg-blue-700 transition-colors mr-2",onClick:mt},{default:m(()=>t[70]||(t[70]=[v(" Daily Standup ")])),_:1,__:[70]}),ve.value||ee.value?(a(),_e(E,{key:0,class:"bg-indigo-600 hover:bg-indigo-700 transition-colors mr-2",onClick:Wt},{default:m(()=>t[71]||(t[71]=[v(" Edit Project ")])),_:1,__:[71]})):u("",!0),ve.value||ee.value?(a(),_e(E,{key:1,class:"bg-green-600 hover:bg-green-700 transition-colors",onClick:as},{default:m(()=>t[72]||(t[72]=[v(" Schedule Meeting ")])),_:1,__:[72]})):u("",!0)])]),e("div",Js,[e("div",null,[e("h3",Ks,n(d.value.name),1),e("p",Xs,n(d.value.description||"No description provided"),1)]),e("div",Zs,[e("p",null,[t[74]||(t[74]=e("strong",{class:"text-gray-900"},"Status:",-1)),v(" "+n(d.value.status.replace("_"," ").toUpperCase()),1)]),e("p",null,[t[75]||(t[75]=e("strong",{class:"text-gray-900"},"Project Type:",-1)),v(" "+n(d.value.project_type||"N/A"),1)]),e("p",null,[t[76]||(t[76]=e("strong",{class:"text-gray-900"},"Source:",-1)),v(" "+n(d.value.source||"N/A"),1)]),e("div",eo,[d.value.website?(a(),l("a",{key:0,href:d.value.website,target:"_blank",class:"p-2 bg-gray-100 rounded-full hover:bg-gray-200 transition-colors",title:"Visit Website"},t[77]||(t[77]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"})],-1)]),8,to)):u("",!0),d.value.social_media_link?(a(),l("a",{key:1,href:d.value.social_media_link,target:"_blank",class:"p-2 bg-gray-100 rounded-full hover:bg-gray-200 transition-colors",title:"Social Media"},t[78]||(t[78]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})],-1)]),8,so)):u("",!0),d.value.google_drive_link?(a(),l("a",{key:2,href:d.value.google_drive_link,target:"_blank",class:"p-2 bg-gray-100 rounded-full hover:bg-gray-200 transition-colors",title:"Google Drive"},t[79]||(t[79]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)]),8,oo)):u("",!0)])])])]),e("div",ao,[t[84]||(t[84]=e("h4",{class:"text-md font-semibold text-gray-900 mb-2"},"Upcoming Meetings",-1)),at.value?(a(),l("div",lo," Loading meetings... ")):ot.value.length===0?(a(),l("div",no," No upcoming meetings scheduled. ")):(a(),l("div",ro,[(a(!0),l(A,null,P(ot.value,s=>(a(),l("div",{key:s.id,class:"p-3 bg-gray-50 rounded-lg border border-gray-200 hover:bg-gray-100 transition-colors"},[e("div",io,[e("div",null,[e("h5",uo,n(s.summary),1),e("p",co,n(new Date(s.start_time).toLocaleString())+" - "+n(new Date(s.end_time).toLocaleTimeString()),1),s.location?(a(),l("p",mo,[t[80]||(t[80]=e("span",{class:"font-medium"},"Location:",-1)),v(" "+n(s.location),1)])):u("",!0)]),e("div",vo,[e("a",{href:s.google_event_link,target:"_blank",class:"text-blue-600 hover:text-blue-800",title:"View in Google Calendar"},t[81]||(t[81]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)]),8,po),s.google_meet_link?(a(),l("a",{key:0,href:s.google_meet_link,target:"_blank",class:"text-green-600 hover:text-green-800",title:"Join Google Meet"},t[82]||(t[82]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1)]),8,go)):u("",!0),e("button",{onClick:r=>ns(s.google_event_id),class:"text-red-600 hover:text-red-800",title:"Delete Meeting"},t[83]||(t[83]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,yo)])])]))),128))]))]),e("div",xo,[e("div",fo,[t[85]||(t[85]=e("h4",{class:"text-sm font-semibold text-gray-500 mb-1"},"Pending Tasks",-1)),e("p",bo,n(G.value.filter(s=>s.status!=="Done").length),1)]),e("div",_o,[t[86]||(t[86]=e("h4",{class:"text-sm font-semibold text-gray-500 mb-1"},"Received Emails",-1)),e("p",wo,n(ie.value.filter(s=>s.type==="received").length),1)]),e("div",ho,[t[87]||(t[87]=e("h4",{class:"text-sm font-semibold text-gray-500 mb-1"},"Last Email Received",-1)),e("p",ko,n(ie.value.filter(s=>s.status==="Received").length?ie.value.filter(s=>s.status==="Received")[0].date:"N/A"),1)]),e("div",jo,[t[88]||(t[88]=e("h4",{class:"text-sm font-semibold text-gray-500 mb-1"},"Next Task Deadline",-1)),e("p",Do,n(G.value.filter(s=>s.status!=="Completed").length?G.value.filter(s=>s.status!=="Completed").sort((s,r)=>new Date(s.due_date)-new Date(r.due_date))[0].due_date:"N/A"),1)])]),e("div",Co,[e("div",Mo,[e("nav",So,[e("button",{onClick:t[0]||(t[0]=s=>U.value=null),class:B([U.value===null?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])}," Overview ",2),e("button",{onClick:t[1]||(t[1]=s=>U.value="tasks"),class:B([U.value==="tasks"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])}," Project Tasks ",2),lt.value?(a(),l("button",{key:0,onClick:t[2]||(t[2]=s=>U.value="emails"),class:B([U.value==="emails"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])}," Email Communication ",2)):u("",!0),Ie.value?(a(),l("button",{key:1,onClick:t[3]||(t[3]=s=>U.value="notes"),class:B([U.value==="notes"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])}," Notes ",2)):u("",!0)])])]),U.value===null?(a(),l("div",Eo,[yt.value.length>0?(a(),l("div",$o,[e("div",To,[t[89]||(t[89]=e("h4",{class:"text-lg font-semibold text-gray-900"},"Tasks Due Today",-1)),e("button",{onClick:t[4]||(t[4]=s=>U.value="tasks"),class:"text-sm text-indigo-600 hover:text-indigo-800 font-medium"}," View All Tasks → ")]),e("div",Vo,[e("table",No,[t[90]||(t[90]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Title"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Assigned To"),e("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",Ao,[(a(!0),l(A,null,P(yt.value,s=>(a(),l("tr",{key:s.id,class:"hover:bg-gray-50 transition-colors"},[e("td",Uo,n(s.title),1),e("td",Po,[e("span",{class:B({"px-2 py-1 rounded-full text-xs font-medium":!0,"bg-yellow-100 text-yellow-800":s.status==="To Do","bg-blue-100 text-blue-800":s.status==="In Progress","bg-green-100 text-green-800":s.status==="Done","bg-red-100 text-red-800":s.status==="Blocked","bg-gray-100 text-gray-800":s.status==="Archived"})},n(s.status),3)]),e("td",Fo,n(s.assigned_to),1),e("td",Ro,[e("div",Lo,[e("button",{onClick:r=>kt(s),class:"text-indigo-600 hover:text-indigo-800 text-sm font-medium"}," Edit ",8,Bo),e("button",{onClick:r=>jt(s),class:"text-blue-600 hover:text-blue-800 text-sm font-medium"}," Add Note ",8,Io)])])]))),128))])])])])):(a(),l("div",Oo,[e("div",zo,[t[91]||(t[91]=e("h4",{class:"text-lg font-semibold text-gray-900"},"Tasks Due Today",-1)),e("button",{onClick:t[5]||(t[5]=s=>U.value="tasks"),class:"text-sm text-indigo-600 hover:text-indigo-800 font-medium"}," View All Tasks → ")]),t[92]||(t[92]=e("p",{class:"text-gray-400 text-sm"},"No tasks due today.",-1))])),lt.value?(a(),l("div",Ho,[e("div",Wo,[t[93]||(t[93]=e("h4",{class:"text-lg font-semibold text-gray-900"},"Latest Emails",-1)),e("button",{onClick:t[6]||(t[6]=s=>U.value="emails"),class:"text-sm text-indigo-600 hover:text-indigo-800 font-medium"}," View All Emails → ")]),tt.value?(a(),l("div",qo," Loading email data... ")):j.value?(a(),l("div",Go,n(j.value),1)):gt.value.length?(a(),l("div",Yo,[e("table",Qo,[t[95]||(t[95]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Subject"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"From"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date"),e("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",Jo,[(a(!0),l(A,null,P(gt.value,s=>{var r;return a(),l("tr",{key:s.id,class:"hover:bg-gray-50 transition-colors"},[e("td",Ko,n(s.subject),1),e("td",Xo,n(((r=s.sender)==null?void 0:r.name)||"N/A"),1),e("td",Zo,n(new Date(s.created_at).toLocaleDateString()),1),e("td",ea,[i(I,{class:"text-indigo-600 hover:text-indigo-800",onClick:p=>Ct(s)},{default:m(()=>t[94]||(t[94]=[v(" View ")])),_:2,__:[94]},1032,["onClick"])])])}),128))])])])):(a(),l("p",ta,"No email communication found."))])):u("",!0),Ie.value?(a(),l("div",sa,[e("div",oa,[t[97]||(t[97]=e("h4",{class:"text-lg font-semibold text-gray-900"},"Latest Notes",-1)),e("div",aa,[e("button",{onClick:t[7]||(t[7]=s=>U.value="notes"),class:"text-sm text-indigo-600 hover:text-indigo-800 font-medium"}," View All Notes → "),Ye(je)("add_project_notes").value?(a(),l("div",la,[i(E,{class:"bg-indigo-600 hover:bg-indigo-700 transition-colors",onClick:xt},{default:m(()=>t[96]||(t[96]=[v(" Add Note ")])),_:1,__:[96]})])):u("",!0)])]),pt.value.length?(a(),l("div",na,[(a(!0),l(A,null,P(pt.value,s=>{var r;return a(),l("div",{key:s.id,class:"p-4 bg-gray-50 rounded-md shadow-sm hover:bg-gray-100 transition-colors"},[e("div",ra,[e("div",ia,[e("p",{class:B(["text-sm",{"text-gray-700":s.content!=="[Encrypted content could not be decrypted]","text-red-500 italic":s.content==="[Encrypted content could not be decrypted]"}])},[v(n(s.content)+" ",1),s.content==="[Encrypted content could not be decrypted]"?(a(),l("span",da," (There was an issue decrypting this note. Please contact an administrator.) ")):u("",!0)],2),e("div",ua,[e("p",ca,"Added by "+n(((r=s.user)==null?void 0:r.name)||"Unknown")+" on "+n(new Date(s.created_at).toLocaleDateString()),1),s.reply_count>0?(a(),l("span",ma,n(s.reply_count)+" "+n(s.reply_count===1?"reply":"replies"),1)):u("",!0)])]),Ie.value&&s.chat_message_id&&d.value.google_chat_id?(a(),l("div",va,[i(I,{class:"text-sm text-indigo-600 hover:text-indigo-800",onClick:p=>ft(s)},{default:m(()=>t[98]||(t[98]=[v(" View ")])),_:2,__:[98]},1032,["onClick"])])):u("",!0)])])}),128))])):(a(),l("p",pa,"No notes available."))])):u("",!0),Ie.value&&Be.value.length>0?(a(),l("div",ga,[e("div",ya,[t[100]||(t[100]=e("h4",{class:"text-lg font-semibold text-gray-900"},"Daily Standups",-1)),e("div",xa,[e("button",{onClick:t[8]||(t[8]=s=>U.value="notes"),class:"text-sm text-indigo-600 hover:text-indigo-800 font-medium"}," View All Standups → "),ve.value||ee.value?(a(),l("div",fa,[i(E,{class:"bg-blue-600 hover:bg-blue-700 transition-colors",onClick:mt},{default:m(()=>t[99]||(t[99]=[v(" Submit Standup ")])),_:1,__:[99]})])):u("",!0)])]),e("div",ba,[(a(!0),l(A,null,P($t.value,s=>{var r,p;return a(),l("div",{key:s.id,class:"p-4 bg-blue-50 rounded-md shadow-sm hover:bg-blue-100 transition-colors border-l-4 border-blue-500"},[s.content==="[Encrypted content could not be decrypted]"?(a(),l("div",_a,[e("div",wa,[e("p",ha,[v(n(s.content)+" ",1),t[101]||(t[101]=e("span",{class:"text-xs text-red-400 block mt-1"}," (There was an issue decrypting this standup. Please contact an administrator.) ",-1))]),e("div",ka,[e("p",ja,"Submitted by "+n(((r=s.user)==null?void 0:r.name)||"Unknown")+" on "+n(new Date(s.created_at).toLocaleDateString()),1)])])])):(a(),l("div",Da,[e("div",Ca,[e("div",Ma,[t[102]||(t[102]=e("h3",{class:"text-md font-bold text-gray-800"},"Daily Standup",-1)),e("span",Sa,n(re(s.content).date),1)]),e("div",Ea,[t[103]||(t[103]=e("div",{class:"flex items-center mb-1"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 text-blue-600 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("span",{class:"font-semibold text-sm text-gray-700"},"Yesterday:")],-1)),e("p",$a,n(re(s.content).yesterday),1)]),e("div",Ta,[t[104]||(t[104]=e("div",{class:"flex items-center mb-1"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 text-green-600 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})]),e("span",{class:"font-semibold text-sm text-gray-700"},"Today:")],-1)),e("p",Va,n(re(s.content).today),1)]),e("div",Na,[t[105]||(t[105]=e("div",{class:"flex items-center mb-1"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 text-red-600 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})]),e("span",{class:"font-semibold text-sm text-gray-700"},"Blockers:")],-1)),e("p",Aa,n(re(s.content).blockers),1)]),e("div",Ua,[e("p",Pa,"Submitted by "+n(((p=s.user)==null?void 0:p.name)||"Unknown")+" on "+n(new Date(s.created_at).toLocaleDateString()),1)])])]))])}),128))])])):u("",!0)])):u("",!0),U.value==="tasks"?(a(),l("div",Fa,[e("div",Ra,[t[107]||(t[107]=e("h4",{class:"text-lg font-semibold text-gray-900"},"Project Tasks",-1)),e("div",La,[i(I,{onClick:$e,disabled:Oe.value,class:"text-indigo-600 hover:text-indigo-800"},{default:m(()=>[Oe.value?(a(),l("span",Ia,"Loading...")):(a(),l("span",Ba,"Refresh"))]),_:1},8,["disabled"]),ve.value?(a(),_e(E,{key:0,class:"bg-indigo-600 hover:bg-indigo-700 transition-colors",onClick:Kt},{default:m(()=>t[106]||(t[106]=[v(" Add Task ")])),_:1,__:[106]})):u("",!0)])]),e("div",Oa,[We.value?(a(),l("div",za," Loading milestones... ")):rt.value.length?(a(),l("div",Wa,[t[112]||(t[112]=e("div",{class:"absolute h-1 bg-gray-200 top-1/2 left-0 right-0 transform -translate-y-1/2"},null,-1)),e("div",qa,[(a(!0),l(A,null,P(rt.value,(s,r)=>(a(),l("div",{key:s.id,class:B(["flex flex-col items-center relative z-10",{"ml-4":r===0,"mr-4":r===rt.value.length-1}])},[e("div",{class:B(["w-6 h-6 rounded-full shadow-lg flex items-center justify-center",{"bg-gray-300":s.status==="Not Started","bg-blue-500":s.status==="In Progress","bg-green-500":s.status==="Completed","bg-red-500":s.status==="Overdue"}])},[s.status==="Completed"?(a(),l("svg",Ga,t[109]||(t[109]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)]))):s.status==="In Progress"?(a(),l("svg",Ya,t[110]||(t[110]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"},null,-1)]))):s.status==="Overdue"?(a(),l("svg",Qa,t[111]||(t[111]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)]))):(a(),l("span",Ja))],2),e("div",Ka,[e("p",{class:"text-xs font-medium text-gray-700 text-center truncate",title:s.name},n(s.name),9,Xa)]),e("div",Za,[e("p",el,n(s.completion_date?new Date(s.completion_date).toLocaleDateString():"No date"),1)])],2))),128))])])):(a(),l("div",Ha,t[108]||(t[108]=[e("p",{class:"text-gray-400 text-sm"},"No milestones found for this project.",-1)])))]),e("div",tl,[e("div",sl,[e("div",ol,[t[114]||(t[114]=e("label",{for:"status-filter",class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),w(e("select",{id:"status-filter","onUpdate:modelValue":t[9]||(t[9]=s=>N.value.status=s),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-sm"},t[113]||(t[113]=[e("option",{value:""},"All Statuses",-1),e("option",{value:"To Do"},"To Do",-1),e("option",{value:"In Progress"},"In Progress",-1),e("option",{value:"Done"},"Done",-1),e("option",{value:"Blocked"},"Blocked",-1),e("option",{value:"Archived"},"Archived",-1)]),512),[[se,N.value.status]])]),e("div",al,[t[117]||(t[117]=e("label",{for:"assigned-filter",class:"block text-sm font-medium text-gray-700 mb-1"},"Assigned To",-1)),w(e("select",{id:"assigned-filter","onUpdate:modelValue":t[10]||(t[10]=s=>N.value.assigned_to_user_id=s),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-sm"},[t[115]||(t[115]=e("option",{value:""},"All Users",-1)),t[116]||(t[116]=e("option",{value:"-1"},"Unassigned",-1)),(a(!0),l(A,null,P(d.value.users,s=>(a(),l("option",{key:s.id,value:s.id},n(s.name),9,ll))),128))],512),[[se,N.value.assigned_to_user_id]])]),e("div",nl,[t[120]||(t[120]=e("label",{for:"milestone-filter",class:"block text-sm font-medium text-gray-700 mb-1"},"Milestone",-1)),w(e("select",{id:"milestone-filter","onUpdate:modelValue":t[11]||(t[11]=s=>N.value.milestone_id=s),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-sm"},[t[118]||(t[118]=e("option",{value:""},"All Milestones",-1)),t[119]||(t[119]=e("option",{value:"-1"},"No Milestone",-1)),(a(!0),l(A,null,P(Y.value,s=>(a(),l("option",{key:s.id,value:s.id},n(s.name),9,rl))),128))],512),[[se,N.value.milestone_id]])]),e("div",il,[t[121]||(t[121]=e("label",{for:"due-date-filter",class:"block text-sm font-medium text-gray-700 mb-1"},"Due Date",-1)),w(e("select",{id:"due-date-filter","onUpdate:modelValue":t[12]||(t[12]=s=>N.value.due_date_range=s),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-sm"},[(a(),l(A,null,P(Gt,s=>e("option",{key:s.value,value:s.value},n(s.label),9,dl)),64))],512),[[se,N.value.due_date_range]])]),e("div",{class:"flex items-end"},[e("button",{onClick:Yt,class:"px-3 py-2 text-sm text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-md transition-colors"}," Clear Filters ")])]),Object.values(N.value).some(s=>s!=="")?(a(),l("div",ul,[e("p",null,[v(" Showing "+n(it.value.length)+" of "+n(G.value.length)+" tasks ",1),it.value.length===0?(a(),l("span",cl," (No tasks match the current filters) ")):u("",!0)])])):u("",!0)]),Oe.value?(a(),l("div",ml," Loading tasks... ")):ze.value?(a(),l("div",vl,[e("p",pl,n(ze.value),1)])):G.value.length?(a(),l("div",gl,[e("table",yl,[t[122]||(t[122]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Title"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Assigned To"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Due Date"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Milestone"),e("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",xl,[(a(!0),l(A,null,P(it.value,s=>(a(),l("tr",{key:s.id,class:"hover:bg-gray-50 transition-colors"},[e("td",fl,n(s.title),1),e("td",bl,[e("span",{class:B({"px-2 py-1 rounded-full text-xs font-medium":!0,"bg-yellow-100 text-yellow-800":s.status==="To Do","bg-blue-100 text-blue-800":s.status==="In Progress","bg-green-100 text-green-800":s.status==="Done","bg-red-100 text-red-800":s.status==="Blocked","bg-gray-100 text-gray-800":s.status==="Archived"})},n(s.status),3)]),e("td",_l,n(s.assigned_to),1),e("td",wl,n(s.due_date?s.due_date:"N/A"),1),e("td",hl,n(s.milestone||"N/A"),1),e("td",kl,[e("div",jl,[e("button",{onClick:r=>kt(s),class:"text-indigo-600 hover:text-indigo-800 text-sm font-medium"}," Edit ",8,Dl),e("button",{onClick:r=>jt(s),class:"text-blue-600 hover:text-blue-800 text-sm font-medium"}," Add Note ",8,Cl),s.status==="To Do"?(a(),l("button",{key:0,onClick:r=>Zt(s),class:"text-blue-600 hover:text-blue-800 text-sm font-medium"}," Start ",8,Ml)):u("",!0),s.status!=="Done"?(a(),l("button",{key:1,onClick:r=>Xt(s),class:"text-green-600 hover:text-green-800 text-sm font-medium"}," Complete ",8,Sl)):u("",!0)])])]))),128))])])])):(a(),l("div",El,t[123]||(t[123]=[e("p",{class:"text-gray-400 text-sm"},"No tasks found for this project.",-1),e("p",{class:"text-gray-500 text-sm mt-2"},' Click the "Add Task" button to create a new task. ',-1)])))])):u("",!0),lt.value&&U.value==="emails"?(a(),l("div",$l,[e("div",Tl,[t[125]||(t[125]=e("h4",{class:"text-lg font-semibold text-gray-900"},"Email Communication",-1)),It.value?(a(),l("div",Vl,[i(E,{class:"bg-indigo-600 hover:bg-indigo-700 transition-colors",onClick:ms},{default:m(()=>t[124]||(t[124]=[v(" Compose Email ")])),_:1,__:[124]})])):u("",!0),J.value?(a(),l("div",Nl,[e("span",Al,n(J.value),1)])):u("",!0)]),e("div",Ul,[e("div",Pl,[e("div",null,[t[127]||(t[127]=e("label",{for:"typeFilter",class:"block text-sm font-medium text-gray-700 mb-1"},"Type",-1)),w(e("select",{id:"typeFilter","onUpdate:modelValue":t[13]||(t[13]=s=>S.type=s),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",onChange:st},t[126]||(t[126]=[e("option",{value:""},"All Types",-1),e("option",{value:"sent"},"Sent",-1),e("option",{value:"received"},"Received",-1)]),544),[[se,S.type]])]),e("div",null,[t[128]||(t[128]=e("label",{for:"startDate",class:"block text-sm font-medium text-gray-700 mb-1"},"From Date",-1)),w(e("input",{type:"date",id:"startDate","onUpdate:modelValue":t[14]||(t[14]=s=>S.startDate=s),class:"mt-1 block w-full border-gray-300 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",onChange:st},null,544),[[R,S.startDate]])]),e("div",null,[t[129]||(t[129]=e("label",{for:"endDate",class:"block text-sm font-medium text-gray-700 mb-1"},"To Date",-1)),w(e("input",{type:"date",id:"endDate","onUpdate:modelValue":t[15]||(t[15]=s=>S.endDate=s),class:"mt-1 block w-full border-gray-300 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",onChange:st},null,544),[[R,S.endDate]])]),e("div",null,[t[131]||(t[131]=e("label",{for:"searchFilter",class:"block text-sm font-medium text-gray-700 mb-1"},"Search Content",-1)),e("div",Fl,[w(e("input",{type:"text",id:"searchFilter","onUpdate:modelValue":t[16]||(t[16]=s=>S.search=s),class:"focus:ring-indigo-500 focus:border-indigo-500 block w-full pr-10 sm:text-sm border-gray-300 rounded-md",placeholder:"Search in email content...",onInput:os},null,544),[[R,S.search]]),t[130]||(t[130]=e("div",{class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})])],-1))])])]),e("div",{class:"mt-3 flex justify-end"},[e("button",{type:"button",class:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:ss}," Reset Filters ")])]),tt.value?(a(),l("div",Rl," Loading email data... ")):j.value?(a(),l("div",Ll,n(j.value),1)):ie.value.length?(a(),l("div",Bl,[e("table",Il,[t[133]||(t[133]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Subject"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"From"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Type"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),e("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",Ol,[(a(!0),l(A,null,P(ie.value,s=>{var r;return a(),l("tr",{key:s.id,class:"hover:bg-gray-50 transition-colors"},[e("td",zl,n(s.subject),1),e("td",Hl,n(((r=s.sender)==null?void 0:r.name)||"N/A"),1),e("td",Wl,n(new Date(s.created_at).toLocaleDateString()),1),e("td",ql,[e("span",{class:B({"px-2 py-1 rounded-full text-xs font-medium":!0,"bg-blue-100 text-blue-800":s.type==="sent","bg-purple-100 text-purple-800":s.type==="received"})},n(s.type?s.type.toUpperCase():"N/A"),3)]),e("td",Gl,[e("span",{class:B({"px-2 py-1 rounded-full text-xs font-medium":!0,"bg-green-100 text-green-800":s.status==="sent","bg-yellow-100 text-yellow-800":s.status==="pending_approval","bg-red-100 text-red-800":s.status==="rejected","bg-gray-100 text-gray-800":s.status==="draft"})},n(s.status.replace("_"," ").toUpperCase()),3)]),e("td",Yl,[i(I,{class:"text-indigo-600 hover:text-indigo-800",onClick:p=>Ct(s)},{default:m(()=>t[132]||(t[132]=[v(" View ")])),_:2,__:[132]},1032,["onClick"])])])}),128))])])])):(a(),l("p",Ql,"No email communication found."))])):u("",!0),Ie.value&&U.value==="notes"?(a(),l("div",Jl,[e("div",Kl,[t[136]||(t[136]=e("h4",{class:"text-lg font-semibold text-gray-900"},"Project Notes",-1)),e("div",Xl,[ve.value||ee.value?(a(),_e(E,{key:0,class:"bg-blue-600 hover:bg-blue-700 transition-colors",onClick:mt},{default:m(()=>t[134]||(t[134]=[v(" Submit Standup ")])),_:1,__:[134]})):u("",!0),Ye(je)("add_project_notes").value?(a(),_e(E,{key:1,class:"bg-indigo-600 hover:bg-indigo-700 transition-colors",onClick:xt},{default:m(()=>t[135]||(t[135]=[v(" Add Note ")])),_:1,__:[135]})):u("",!0)])]),e("div",Zl,[e("div",en,[e("div",null,[t[137]||(t[137]=e("label",{for:"noteStartDate",class:"block text-sm font-medium text-gray-700 mb-1"},"From Date",-1)),w(e("input",{type:"date",id:"noteStartDate","onUpdate:modelValue":t[17]||(t[17]=s=>L.startDate=s),class:"mt-1 block w-full border-gray-300 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",onChange:nt},null,544),[[R,L.startDate]])]),e("div",null,[t[138]||(t[138]=e("label",{for:"noteEndDate",class:"block text-sm font-medium text-gray-700 mb-1"},"To Date",-1)),w(e("input",{type:"date",id:"noteEndDate","onUpdate:modelValue":t[18]||(t[18]=s=>L.endDate=s),class:"mt-1 block w-full border-gray-300 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",onChange:nt},null,544),[[R,L.endDate]])]),e("div",null,[t[140]||(t[140]=e("label",{for:"noteSearchFilter",class:"block text-sm font-medium text-gray-700 mb-1"},"Search Content",-1)),e("div",tn,[w(e("input",{type:"text",id:"noteSearchFilter","onUpdate:modelValue":t[19]||(t[19]=s=>L.search=s),class:"focus:ring-indigo-500 focus:border-indigo-500 block w-full pr-10 sm:text-sm border-gray-300 rounded-md",placeholder:"Search in note content...",onInput:Ht},null,544),[[R,L.search]]),t[139]||(t[139]=e("div",{class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})])],-1))])])]),e("div",{class:"mt-3 flex justify-end"},[e("button",{type:"button",class:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:zt}," Reset Filters ")])]),Be.value.length>0?(a(),l("div",sn,[t[146]||(t[146]=e("h5",{class:"text-md font-semibold text-gray-900 mb-4 border-b pb-2"},"Daily Standups",-1)),e("div",on,[(a(!0),l(A,null,P(Be.value,s=>{var r,p;return a(),l("div",{key:s.id,class:"p-4 bg-blue-50 rounded-md shadow-sm hover:bg-blue-100 transition-colors border-l-4 border-blue-500"},[s.content==="[Encrypted content could not be decrypted]"?(a(),l("div",an,[e("div",ln,[e("p",nn,[v(n(s.content)+" ",1),t[141]||(t[141]=e("span",{class:"text-xs text-red-400 block mt-1"}," (There was an issue decrypting this standup. Please contact an administrator.) ",-1))]),e("div",rn,[e("p",dn,"Submitted by "+n(((r=s.user)==null?void 0:r.name)||"Unknown")+" on "+n(new Date(s.created_at).toLocaleDateString()),1)])])])):(a(),l("div",un,[e("div",cn,[e("div",mn,[t[142]||(t[142]=e("h3",{class:"text-md font-bold text-gray-800"},"Daily Standup",-1)),e("span",vn,n(re(s.content).date),1)]),e("div",pn,[t[143]||(t[143]=e("div",{class:"flex items-center mb-1"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 text-blue-600 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("span",{class:"font-semibold text-sm text-gray-700"},"Yesterday:")],-1)),e("p",gn,n(re(s.content).yesterday),1)]),e("div",yn,[t[144]||(t[144]=e("div",{class:"flex items-center mb-1"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 text-green-600 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})]),e("span",{class:"font-semibold text-sm text-gray-700"},"Today:")],-1)),e("p",xn,n(re(s.content).today),1)]),e("div",fn,[t[145]||(t[145]=e("div",{class:"flex items-center mb-1"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 text-red-600 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})]),e("span",{class:"font-semibold text-sm text-gray-700"},"Blockers:")],-1)),e("p",bn,n(re(s.content).blockers),1)]),e("div",_n,[e("p",wn,"Submitted by "+n(((p=s.user)==null?void 0:p.name)||"Unknown")+" on "+n(new Date(s.created_at).toLocaleDateString()),1)])])]))])}),128))])])):u("",!0),e("div",null,[t[148]||(t[148]=e("h5",{class:"text-md font-semibold text-gray-900 mb-4 border-b pb-2"},"Notes",-1)),Qe.value.length?(a(),l("div",hn,[(a(!0),l(A,null,P(Qe.value,s=>{var r;return a(),l("div",{key:s.id,class:"p-4 bg-gray-50 rounded-md shadow-sm hover:bg-gray-100 transition-colors"},[e("div",kn,[e("div",jn,[e("p",{class:B(["text-sm",{"text-gray-700":s.content!=="[Encrypted content could not be decrypted]","text-red-500 italic":s.content==="[Encrypted content could not be decrypted]"}])},[v(n(s.content)+" ",1),s.content==="[Encrypted content could not be decrypted]"?(a(),l("span",Dn," (There was an issue decrypting this note. Please contact an administrator.) ")):u("",!0)],2),e("div",Cn,[e("p",Mn,"Added by "+n(((r=s.user)==null?void 0:r.name)||"Unknown")+" on "+n(new Date(s.created_at).toLocaleDateString()),1),s.reply_count>0?(a(),l("span",Sn,n(s.reply_count)+" "+n(s.reply_count===1?"reply":"replies"),1)):u("",!0)])]),s.chat_message_id&&d.value.google_chat_id?(a(),l("div",En,[i(I,{class:"text-sm text-indigo-600 hover:text-indigo-800",onClick:p=>ft(s)},{default:m(()=>t[147]||(t[147]=[v(" View ")])),_:2,__:[147]},1032,["onClick"])])):u("",!0)])])}),128))])):(a(),l("p",$n,"No notes available."))])])):u("",!0)]))]),i(Z,{show:f.value,onClose:t[21]||(t[21]=s=>f.value=!1)},{default:m(()=>[i(Cs,{show:f.value,project:d.value,statusOptions:Vt,departmentOptions:Nt,sourceOptions:At,clientRoleOptions:Ut,userRoleOptions:Pt,paymentTypeOptions:Ft,onClose:t[20]||(t[20]=s=>f.value=!1),onSubmit:qt},null,8,["show","project"])]),_:1},8,["show"]),i(Z,{show:ye.value,onClose:t[26]||(t[26]=s=>ye.value=!1)},{default:m(()=>{var s;return[e("div",Tn,[e("div",Vn,[t[150]||(t[150]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Email Details",-1)),e("button",{onClick:t[22]||(t[22]=r=>ye.value=!1),class:"text-gray-400 hover:text-gray-500"},t[149]||(t[149]=[e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),_.value?(a(),l("div",Nn,[e("div",An,[e("h4",Un,n(_.value.subject),1),e("div",Pn,[e("div",null,[e("p",Fn,[t[151]||(t[151]=v("From: ")),e("span",Rn,n(((s=_.value.sender)==null?void 0:s.name)||"N/A"),1)]),e("p",Ln,[t[152]||(t[152]=v("Status: ")),e("span",{class:B({"px-2 py-1 rounded-full text-xs font-medium":!0,"bg-green-100 text-green-800":_.value.status==="sent","bg-yellow-100 text-yellow-800":_.value.status==="pending_approval","bg-red-100 text-red-800":_.value.status==="rejected","bg-gray-100 text-gray-800":_.value.status==="draft"})},n(_.value.status.replace("_"," ").toUpperCase()),3)])]),e("div",null,[e("p",Bn,[t[153]||(t[153]=v("Date: ")),e("span",In,n(new Date(_.value.created_at).toLocaleString()),1)])])])]),e("div",On,[e("div",{innerHTML:_.value.body},null,8,zn)]),_.value.rejection_reason?(a(),l("div",Hn,[t[154]||(t[154]=e("h5",{class:"font-medium text-red-800"},"Rejection Reason:",-1)),e("p",Wn,n(_.value.rejection_reason),1)])):u("",!0),_.value.approver?(a(),l("div",qn,[e("p",null,"Approved/Rejected by: "+n(_.value.approver.name),1),_.value.sent_at?(a(),l("p",Gn,"Sent at: "+n(new Date(_.value.sent_at).toLocaleString()),1)):u("",!0)])):u("",!0),_.value.status==="pending_approval"&&Ot.value?(a(),l("div",Yn,[i(E,{onClick:t[23]||(t[23]=r=>rs(_.value)),class:"bg-green-600 hover:bg-green-700"},{default:m(()=>t[155]||(t[155]=[v(" Approve ")])),_:1,__:[155]}),i(E,{onClick:t[24]||(t[24]=r=>is(_.value)),class:"bg-blue-600 hover:bg-blue-700"},{default:m(()=>t[156]||(t[156]=[v(" Edit & Approve ")])),_:1,__:[156]}),i(I,{onClick:t[25]||(t[25]=r=>us(_.value)),class:"text-red-600 hover:text-red-800"},{default:m(()=>t[157]||(t[157]=[v(" Reject ")])),_:1,__:[157]})])):u("",!0)])):u("",!0)])]}),_:1},8,["show"]),i(Ms,{show:x.value,"project-id":d.value.id,onClose:t[27]||(t[27]=s=>x.value=!1),onNoteAdded:Ke},null,8,["show","project-id"]),i(Z,{show:Te.value,onClose:t[32]||(t[32]=s=>Te.value=!1),"max-width":"3xl"},{default:m(()=>[e("div",Qn,[e("div",Jn,[t[159]||(t[159]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Edit and Approve Email",-1)),e("button",{onClick:t[28]||(t[28]=s=>Te.value=!1),class:"text-gray-400 hover:text-gray-500"},t[158]||(t[158]=[e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),_.value?(a(),l("div",Kn,[e("form",{onSubmit:Ue(ds,["prevent"])},[j.value?(a(),l("div",Xn,[e("span",Zn,n(j.value),1)])):u("",!0),e("div",er,[i(O,{for:"subject",value:"Subject"}),i(ae,{id:"subject",type:"text",class:"mt-1 block w-full",modelValue:de.subject,"onUpdate:modelValue":t[29]||(t[29]=s=>de.subject=s),required:""},null,8,["modelValue"]),i(z,{message:xe.value.subject?xe.value.subject[0]:"",class:"mt-2"},null,8,["message"])]),e("div",tr,[i(O,{for:"body",value:"Email Body"}),i(St,{id:"body",modelValue:de.body,"onUpdate:modelValue":t[30]||(t[30]=s=>de.body=s),placeholder:"Edit your email here...",height:"300px"},null,8,["modelValue"]),i(z,{message:xe.value.body?xe.value.body[0]:"",class:"mt-2"},null,8,["message"])]),e("div",sr,[i(I,{onClick:t[31]||(t[31]=s=>Te.value=!1)},{default:m(()=>t[160]||(t[160]=[v("Cancel")])),_:1,__:[160]}),i(E,{type:"submit",class:"bg-green-600 hover:bg-green-700"},{default:m(()=>t[161]||(t[161]=[v("Save & Approve")])),_:1,__:[161]})])],32)])):u("",!0)])]),_:1},8,["show"]),i(Z,{show:Ve.value,onClose:t[36]||(t[36]=s=>Ve.value=!1),"max-width":"2xl"},{default:m(()=>[e("div",or,[e("div",ar,[t[163]||(t[163]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Reject Email",-1)),e("button",{onClick:t[33]||(t[33]=s=>Ve.value=!1),class:"text-gray-400 hover:text-gray-500"},t[162]||(t[162]=[e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),_.value?(a(),l("div",lr,[e("form",{onSubmit:Ue(cs,["prevent"])},[j.value?(a(),l("div",nr,[e("span",rr,n(j.value),1)])):u("",!0),e("div",ir,[i(O,{for:"rejection_reason",value:"Rejection Reason"}),w(e("textarea",{id:"rejection_reason",rows:"5",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full","onUpdate:modelValue":t[34]||(t[34]=s=>qe.rejection_reason=s),required:"",placeholder:"Please provide a reason for rejecting this email (minimum 10 characters)"},null,512),[[R,qe.rejection_reason]]),i(z,{message:Ge.value.rejection_reason?Ge.value.rejection_reason[0]:"",class:"mt-2"},null,8,["message"])]),e("div",dr,[i(I,{onClick:t[35]||(t[35]=s=>Ve.value=!1)},{default:m(()=>t[164]||(t[164]=[v("Cancel")])),_:1,__:[164]}),i(E,{type:"submit",class:"bg-red-600 hover:bg-red-700"},{default:m(()=>t[165]||(t[165]=[v("Reject Email")])),_:1,__:[165]})])],32)])):u("",!0)])]),_:1},8,["show"]),i(Z,{show:Ne.value,onClose:t[42]||(t[42]=s=>Ne.value=!1),"max-width":"3xl"},{default:m(()=>[e("div",ur,[e("div",cr,[t[167]||(t[167]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Compose New Email",-1)),e("button",{onClick:t[37]||(t[37]=s=>Ne.value=!1),class:"text-gray-400 hover:text-gray-500"},t[166]||(t[166]=[e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("form",{onSubmit:Ue(vs,["prevent"])},[j.value?(a(),l("div",mr,[e("span",vr,n(j.value),1)])):u("",!0),e("div",pr,[i(O,{for:"client_ids",value:"To (Clients)"}),i(Ye(Et),{id:"client_ids",modelValue:$.client_ids,"onUpdate:modelValue":t[38]||(t[38]=s=>$.client_ids=s),options:d.value.clients||[],multiple:!0,"close-on-select":!0,"clear-on-select":!1,"preserve-search":!0,placeholder:"Select one or more clients",label:"name","track-by":"id",searchable:!0,"allow-empty":!0},{option:m(({option:s})=>[v(n(s.name),1)]),tag:m(({option:s,remove:r})=>[e("span",gr,[v(n(s.name)+" ",1),e("i",{class:"multiselect__tag-icon",onClick:p=>r(s)},null,8,yr)])]),_:1},8,["modelValue","options"]),i(z,{message:K.value.client_ids?K.value.client_ids[0]:"",class:"mt-2"},null,8,["message"])]),e("div",xr,[i(O,{for:"subject",value:"Subject"}),i(ae,{id:"subject",type:"text",class:"mt-1 block w-full",modelValue:$.subject,"onUpdate:modelValue":t[39]||(t[39]=s=>$.subject=s),required:""},null,8,["modelValue"]),i(z,{message:K.value.subject?K.value.subject[0]:"",class:"mt-2"},null,8,["message"])]),e("div",fr,[i(O,{for:"body",value:"Email Body"}),i(St,{id:"body",modelValue:$.body,"onUpdate:modelValue":t[40]||(t[40]=s=>$.body=s),placeholder:"Compose your email here...",height:"300px"},null,8,["modelValue"]),i(z,{message:K.value.body?K.value.body[0]:"",class:"mt-2"},null,8,["message"])]),e("div",br,[i(I,{onClick:t[41]||(t[41]=s=>Ne.value=!1),class:"mr-2"},{default:m(()=>t[168]||(t[168]=[v("Cancel")])),_:1,__:[168]}),i(E,{type:"submit"},{default:m(()=>t[169]||(t[169]=[v("Submit for Approval")])),_:1,__:[169]})])],32)])]),_:1},8,["show"]),i(Z,{show:h.value,onClose:t[46]||(t[46]=s=>h.value=!1)},{default:m(()=>{var s;return[e("div",_r,[e("div",wr,[t[171]||(t[171]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Reply to Note",-1)),e("button",{onClick:t[43]||(t[43]=r=>h.value=!1),class:"text-gray-400 hover:text-gray-500"},t[170]||(t[170]=[e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),oe.value?(a(),l("div",hr,[e("p",kr,n(oe.value.content),1),e("p",jr,"Added by "+n(((s=oe.value.user)==null?void 0:s.name)||"Unknown")+" on "+n(new Date(oe.value.created_at).toLocaleDateString()),1)])):u("",!0),oe.value?(a(),l("div",Dr,[t[174]||(t[174]=e("h4",{class:"text-sm font-medium text-gray-700 mb-2"},"Replies",-1)),Le.value?(a(),l("div",Cr,t[172]||(t[172]=[e("p",{class:"text-gray-500 text-sm"},"Loading replies...",-1)]))):Re.value.length?(a(),l("div",Mr,[(a(!0),l(A,null,P(Re.value,r=>{var p;return a(),l("div",{key:r.id,class:"p-2 bg-gray-50 rounded border-l-2 border-indigo-300"},[e("p",Sr,n(r.content),1),e("p",Er,"Replied by "+n(((p=r.user)==null?void 0:p.name)||"Unknown")+" on "+n(new Date(r.created_at).toLocaleDateString()),1)])}),128))])):(a(),l("div",$r,t[173]||(t[173]=[e("p",{class:"text-gray-500 text-sm"},"No replies yet. Be the first to reply!",-1)])))])):u("",!0),wt.value?(a(),l("div",Tr,[t[175]||(t[175]=e("label",{for:"reply-content",class:"block text-sm font-medium text-gray-700 mb-1"},"Your Reply",-1)),w(e("textarea",{id:"reply-content","onUpdate:modelValue":t[44]||(t[44]=r=>ke.value=r),class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full h-32",placeholder:"Enter your reply..."},null,512),[[R,ke.value]]),ce.value?(a(),l("p",Vr,n(ce.value),1)):u("",!0)])):u("",!0),wt.value?(a(),l("div",Nr,[i(I,{onClick:t[45]||(t[45]=r=>h.value=!1),class:"mr-2"},{default:m(()=>t[176]||(t[176]=[v("Cancel")])),_:1,__:[176]}),i(E,{onClick:Tt},{default:m(()=>t[177]||(t[177]=[v("Send Reply")])),_:1,__:[177]})])):u("",!0)])]}),_:1},8,["show"]),i(Z,{show:pe.value,onClose:t[56]||(t[56]=s=>pe.value=!1)},{default:m(()=>[e("div",Ar,[e("div",Ur,[e("h3",Pr,n(De.value?"Edit Task":"Add New Task"),1),e("button",{onClick:t[47]||(t[47]=s=>pe.value=!1),class:"text-gray-400 hover:text-gray-500"},t[178]||(t[178]=[e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("form",{onSubmit:Ue(ts,["prevent"]),class:"space-y-4"},[e("div",null,[t[179]||(t[179]=e("label",{for:"task-name",class:"block text-sm font-medium text-gray-700"},"Task Name",-1)),w(e("input",{id:"task-name","onUpdate:modelValue":t[48]||(t[48]=s=>M.value.name=s),type:"text",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",placeholder:"Enter task name"},null,512),[[R,M.value.name]]),V.value.name?(a(),l("p",Fr,n(V.value.name[0]),1)):u("",!0)]),e("div",null,[t[180]||(t[180]=e("label",{for:"task-description",class:"block text-sm font-medium text-gray-700"},"Description",-1)),w(e("textarea",{id:"task-description","onUpdate:modelValue":t[49]||(t[49]=s=>M.value.description=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",rows:"3",placeholder:"Enter task description"},null,512),[[R,M.value.description]]),V.value.description?(a(),l("p",Rr,n(V.value.description[0]),1)):u("",!0)]),e("div",null,[t[182]||(t[182]=e("label",{for:"task-status",class:"block text-sm font-medium text-gray-700"},"Status",-1)),w(e("select",{id:"task-status","onUpdate:modelValue":t[50]||(t[50]=s=>M.value.status=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},t[181]||(t[181]=[e("option",{value:"To Do"},"To Do",-1),e("option",{value:"In Progress"},"In Progress",-1),e("option",{value:"Done"},"Done",-1),e("option",{value:"Blocked"},"Blocked",-1),e("option",{value:"Archived"},"Archived",-1)]),512),[[se,M.value.status]]),V.value.status?(a(),l("p",Lr,n(V.value.status[0]),1)):u("",!0)]),e("div",null,[t[183]||(t[183]=e("label",{for:"task-due-date",class:"block text-sm font-medium text-gray-700"},"Due Date",-1)),w(e("input",{id:"task-due-date","onUpdate:modelValue":t[51]||(t[51]=s=>M.value.due_date=s),type:"date",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[R,M.value.due_date]]),V.value.due_date?(a(),l("p",Br,n(V.value.due_date[0]),1)):u("",!0)]),e("div",null,[t[185]||(t[185]=e("label",{for:"task-assigned-to",class:"block text-sm font-medium text-gray-700"},"Assigned To",-1)),w(e("select",{id:"task-assigned-to","onUpdate:modelValue":t[52]||(t[52]=s=>M.value.assigned_to_user_id=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[t[184]||(t[184]=e("option",{value:null},"Unassigned",-1)),(a(!0),l(A,null,P(d.value.users,s=>(a(),l("option",{key:s.id,value:s.id},n(s.name),9,Ir))),128))],512),[[se,M.value.assigned_to_user_id]]),V.value.assigned_to_user_id?(a(),l("p",Or,n(V.value.assigned_to_user_id[0]),1)):u("",!0)]),e("div",null,[t[187]||(t[187]=e("label",{for:"task-type",class:"block text-sm font-medium text-gray-700"},"Task Type",-1)),Xe.value?(a(),l("div",zr,"Loading task types...")):w((a(),l("select",{key:1,id:"task-type","onUpdate:modelValue":t[53]||(t[53]=s=>M.value.task_type_id=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[t[186]||(t[186]=e("option",{value:null},"Select a task type",-1)),(a(!0),l(A,null,P(He.value,s=>(a(),l("option",{key:s.id,value:s.id},n(s.name),9,Hr))),128))],512)),[[se,M.value.task_type_id]]),V.value.task_type_id?(a(),l("p",Wr,n(V.value.task_type_id[0]),1)):u("",!0)]),e("div",null,[e("div",{class:"flex justify-between items-center"},[t[188]||(t[188]=e("label",{for:"task-milestone",class:"block text-sm font-medium text-gray-700"},"Milestone",-1)),e("button",{type:"button",onClick:Qt,class:"text-sm text-indigo-600 hover:text-indigo-800"}," + Create New Milestone ")]),We.value?(a(),l("div",qr,"Loading milestones...")):w((a(),l("select",{key:1,id:"task-milestone","onUpdate:modelValue":t[54]||(t[54]=s=>M.value.milestone_id=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[t[189]||(t[189]=e("option",{value:null},"No milestone",-1)),(a(!0),l(A,null,P(Y.value,s=>(a(),l("option",{key:s.id,value:s.id},n(s.name),9,Gr))),128))],512)),[[se,M.value.milestone_id]]),V.value.milestone_id?(a(),l("p",Yr,n(V.value.milestone_id[0]),1)):u("",!0)]),e("div",Qr,[i(I,{onClick:t[55]||(t[55]=s=>pe.value=!1)},{default:m(()=>t[190]||(t[190]=[v(" Cancel ")])),_:1,__:[190]}),i(E,{type:"submit",disabled:Xe.value||We.value},{default:m(()=>[v(n(De.value?"Update Task":"Create Task"),1)]),_:1},8,["disabled"])])],32)])]),_:1},8,["show"]),i(Z,{show:Ee.value,onClose:t[63]||(t[63]=s=>Ee.value=!1)},{default:m(()=>[e("div",Jr,[e("div",Kr,[t[192]||(t[192]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Add New Milestone",-1)),e("button",{onClick:t[57]||(t[57]=s=>Ee.value=!1),class:"text-gray-400 hover:text-gray-500"},t[191]||(t[191]=[e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("form",{onSubmit:Ue(Jt,["prevent"]),class:"space-y-4"},[e("div",null,[t[193]||(t[193]=e("label",{for:"milestone-name",class:"block text-sm font-medium text-gray-700"},"Milestone Name",-1)),w(e("input",{id:"milestone-name","onUpdate:modelValue":t[58]||(t[58]=s=>te.value.name=s),type:"text",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",placeholder:"Enter milestone name"},null,512),[[R,te.value.name]]),Q.value.name?(a(),l("p",Xr,n(Q.value.name[0]),1)):u("",!0)]),e("div",null,[t[194]||(t[194]=e("label",{for:"milestone-description",class:"block text-sm font-medium text-gray-700"},"Description",-1)),w(e("textarea",{id:"milestone-description","onUpdate:modelValue":t[59]||(t[59]=s=>te.value.description=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",rows:"3",placeholder:"Enter milestone description"},null,512),[[R,te.value.description]]),Q.value.description?(a(),l("p",Zr,n(Q.value.description[0]),1)):u("",!0)]),e("div",null,[t[195]||(t[195]=e("label",{for:"milestone-completion-date",class:"block text-sm font-medium text-gray-700"},"Completion Date",-1)),w(e("input",{id:"milestone-completion-date","onUpdate:modelValue":t[60]||(t[60]=s=>te.value.completion_date=s),type:"date",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[R,te.value.completion_date]]),Q.value.completion_date?(a(),l("p",ei,n(Q.value.completion_date[0]),1)):u("",!0)]),e("div",null,[t[197]||(t[197]=e("label",{for:"milestone-status",class:"block text-sm font-medium text-gray-700"},"Status",-1)),w(e("select",{id:"milestone-status","onUpdate:modelValue":t[61]||(t[61]=s=>te.value.status=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},t[196]||(t[196]=[e("option",{value:"Not Started"},"Not Started",-1),e("option",{value:"In Progress"},"In Progress",-1),e("option",{value:"Completed"},"Completed",-1),e("option",{value:"Overdue"},"Overdue",-1)]),512),[[se,te.value.status]]),Q.value.status?(a(),l("p",ti,n(Q.value.status[0]),1)):u("",!0)]),e("div",si,[i(I,{onClick:t[62]||(t[62]=s=>Ee.value=!1),type:"button"},{default:m(()=>t[198]||(t[198]=[v(" Cancel ")])),_:1,__:[198]}),i(E,{type:"submit",disabled:et.value},{default:m(()=>[v(n(et.value?"Creating...":"Create Milestone"),1)]),_:1},8,["disabled"])])],32)])]),_:1},8,["show"]),i(Z,{show:Ce.value,onClose:t[67]||(t[67]=s=>Ce.value=!1)},{default:m(()=>[e("div",oi,[e("div",ai,[t[200]||(t[200]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Add Note to Task",-1)),e("button",{onClick:t[64]||(t[64]=s=>Ce.value=!1),class:"text-gray-400 hover:text-gray-500"},t[199]||(t[199]=[e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),Me.value?(a(),l("div",li,[e("p",ni,n(Me.value.title),1),e("p",ri,"Status: "+n(Me.value.status),1)])):u("",!0),e("div",ii,[t[201]||(t[201]=e("label",{for:"task-note-content",class:"block text-sm font-medium text-gray-700 mb-1"},"Note Content",-1)),w(e("textarea",{id:"task-note-content","onUpdate:modelValue":t[65]||(t[65]=s=>Se.value=s),class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full h-32",placeholder:"Enter your note..."},null,512),[[R,Se.value]]),ge.value?(a(),l("p",di,n(ge.value),1)):u("",!0)]),e("div",ui,[i(I,{onClick:t[66]||(t[66]=s=>Ce.value=!1),class:"mr-2"},{default:m(()=>t[202]||(t[202]=[v("Cancel")])),_:1,__:[202]}),i(E,{onClick:es,disabled:Ze.value},{default:m(()=>[v(n(Ze.value?"Adding...":"Add Note"),1)]),_:1},8,["disabled"])])])]),_:1},8,["show"]),i(Us,{show:ue.value,onClose:t[68]||(t[68]=s=>ue.value=!1),onSaved:ls,projectId:d.value.id,projectUsers:d.value.users||[]},null,8,["show","projectId","projectUsers"]),i(Os,{show:Fe.value,onClose:t[69]||(t[69]=s=>Fe.value=!1),onStandupAdded:Je,projectId:d.value.id},null,8,["show","projectId"])]),_:1})],64))}},Di=Ss(ci,[["__scopeId","data-v-645de62d"]]);export{Di as default};
