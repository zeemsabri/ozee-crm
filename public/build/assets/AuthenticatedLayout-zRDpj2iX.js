import{r as $,c as F,P as Ve,f as fe,Q as Fe,a as i,i as G,o as t,F as X,l as te,b as e,t as I,u as z,R as da,S as La,T as ca,U as ma,j as J,p as ee,e as ie,g as V,w,m as M,d as u,v as H,x as ve,E as Ne,V as Ua,n as Te,y as Ue,s as va,C as Ce,z as za,N as ce,J as oe,W as He,k as Ra,O as be,X as pa,Y as Fa,Z as ta,K as Ae,A as ge,_ as fa,$ as Ye,a0 as ga,D as Qe,a1 as he,a2 as ue,M as Oa,a3 as we,a4 as qe,H as ba,G as Ka,a5 as Ha,a6 as qa,a7 as la,a8 as sa,I as Wa}from"./app-CcSAzmBw.js";import{_ as ne}from"./PrimaryButton-CGyaqSV5.js";import{_ as Ze}from"./Modal-Cd1Ld6K7.js";import{_ as Z}from"./InputLabel-ZXmhB59o.js";import{_ as Q}from"./InputError-BIAtq_fL.js";import{_ as Re}from"./SecondaryButton-D1vuT-lC.js";import{r as Ja}from"./index-C-_TsGkP.js";import{B as $e}from"./BaseFormModal-DvACVTk8.js";import{_ as pe}from"./TextInput-5UhV8dY0.js";import{S as de}from"./SelectDropdown-DcBtX4i8.js";import{d as Ya}from"./debounce-C-hnF4Z3.js";import{_ as Le}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{A as Za}from"./ApplicationLogo-B1Av4EbZ.js";import{D as Xe}from"./DangerButton-pd7veRVi.js";import{h as Qa}from"./moment-BLMuvzoS.js";import{_ as Xa,a as et}from"./NoticeboardModal-CboiTIxa.js";const at={key:0,class:"fixed bottom-4 right-4 z-50 flex flex-col items-end space-y-2"},tt={key:0,class:"notification-list w-full max-w-xs space-y-2"},lt={class:"flex-1 min-w-0"},st={class:"flex items-start justify-between gap-2 mb-1"},ot={class:"flex-1 min-w-0"},it={key:0,class:"text-base font-semibold text-gray-800 truncate"},rt={key:1,class:"text-xs text-gray-500"},nt={key:0,class:"text-xs text-gray-600 mb-2"},ut={class:"flex items-center justify-between mt-2"},dt={key:0,class:"text-xs text-gray-500 font-medium"},ct=["onClick"],mt={key:1,class:"flex justify-end w-full max-w-xs"},vt={key:0},pt={key:1},_e="notification_minimized_state",ft=3,gt={__name:"PushNotificationContainer",props:{sidebarIsOpen:{type:Boolean,default:!1}},setup(s){const r=$(!1),l=$(null),o=$(0),a=$(null),x=F(()=>Ve.value.notifications.filter(c=>c.isNewPush).slice(0,ft)),d=F(()=>{const c=Math.floor(o.value/60),v=o.value%60;return`${String(c).padStart(2,"0")}:${String(v).padStart(2,"0")}`}),g=c=>{if(!c)return null;const v=c.match(/\/task\/(\d+)/);return v?parseInt(v[1]):null},p=c=>{if(!c)return null;const v=c.match(/\/project\/(\d+)\//);return v?parseInt(v[1]):null},n=()=>{if(r.value=!r.value,clearTimeout(l.value),clearInterval(a.value),r.value){const c=Date.now()+3e5;localStorage.setItem(_e,JSON.stringify({isMinimized:!0,expiryTime:c})),l.value=setTimeout(()=>{r.value=!1,clearInterval(a.value),localStorage.removeItem(_e)},3e5),o.value=300,a.value=setInterval(()=>{o.value>0?o.value--:clearInterval(a.value)},1e3)}else localStorage.removeItem(_e)},m=async c=>{La(c.id),await ca(c.view_id);const v=c.task_id||g(c.url),T=c.project_id||p(c.url);v&&T?ma(v,T):(console.warn("Could not open task sidebar. Falling back to redirecting."),c.url&&(window.location.href=c.url))};return fe(()=>{const c=localStorage.getItem(_e);if(c)try{const{isMinimized:v,expiryTime:T}=JSON.parse(c),S=Date.now(),b=T-S;b>0?(r.value=v,o.value=Math.floor(b/1e3),l.value=setTimeout(()=>{r.value=!1,clearInterval(a.value),localStorage.removeItem(_e)},b),a.value=setInterval(()=>{o.value>0?o.value--:clearInterval(a.value)},1e3)):localStorage.removeItem(_e)}catch(v){console.error("Error restoring notification minimized state:",v),localStorage.removeItem(_e)}}),Fe(()=>{clearTimeout(l.value),clearInterval(a.value)}),(c,v)=>s.sidebarIsOpen?G("",!0):(t(),i("div",at,[!r.value&&x.value.length>0?(t(),i("div",tt,[(t(!0),i(X,null,te(x.value,T=>(t(),i("div",{key:T.id,class:"bg-white rounded-lg shadow-lg p-3 flex items-start space-x-3 border border-gray-200 transition-opacity duration-300 opacity-60 hover:opacity-100"},[e("div",lt,[e("div",st,[e("div",ot,[T.title?(t(),i("h3",it,I(T.title),1)):G("",!0),T.project_name?(t(),i("p",rt,I(T.project_name),1)):G("",!0)])]),T.message?(t(),i("p",nt,I(T.message),1)):G("",!0),e("div",ut,[T.due_date?(t(),i("div",dt," Due: "+I(z(da)(T.due_date)),1)):G("",!0),e("button",{onClick:S=>m(T),class:"px-2.5 py-1 bg-blue-600 text-white text-xs font-medium rounded-md hover:bg-blue-700 transition-colors duration-200 shadow"},I(T.button_label||"View"),9,ct)])])]))),128))])):G("",!0),x.value.length>0?(t(),i("div",mt,[e("button",{onClick:n,class:"bg-white/80 backdrop-blur-sm text-gray-600 hover:text-gray-900 text-xs font-bold py-1 px-3 rounded-full shadow-md transition-all duration-300"},[r.value?(t(),i("span",vt,"Show ("+I(d.value)+")",1)):(t(),i("span",pt,"Minimize"))])])):G("",!0)]))}},bt={class:"fixed top-4 right-4 z-[9999] flex flex-col items-end space-y-3"},ht={class:"p-4"},yt={class:"text-sm font-medium text-white"},kt={key:0,class:"mt-3 flex gap-2"},wt=["onClick"],At=["onClick"],xt={__name:"StandardNotificationContainer",setup(s,{expose:r}){const l=$([]),o=(p,n="info",m=5e3)=>{let c;typeof p=="object"&&p!==null?c={...p}:c={message:p,type:n,duration:m};const v=c.id||crypto.randomUUID(),T={id:v,message:c.message||"",type:c.type||"info",duration:typeof c.duration=="number"?c.duration:5e3,sticky:!!c.sticky,confirm:c.confirm||null};return l.value.unshift(T),!T.sticky&&!T.confirm&&setTimeout(()=>{a(v)},T.duration),v},a=p=>{const n=l.value.findIndex(m=>m.id===p);n>-1&&l.value.splice(n,1)},x=p=>{const n=l.value.find(m=>m.id===p);if(n&&n.confirm&&typeof n.confirm.onConfirm=="function")try{n.confirm.onConfirm()}catch{}a(p)},d=p=>{const n=l.value.find(m=>m.id===p);if(n&&n.confirm&&typeof n.confirm.onCancel=="function")try{n.confirm.onCancel()}catch{}a(p)},g=p=>{switch(p){case"success":return"bg-green-500";case"error":return"bg-red-500";case"warning":return"bg-yellow-500";case"info":default:return"bg-blue-500"}};return r({addNotification:o}),(p,n)=>(t(),i("div",bt,[(t(!0),i(X,null,te(l.value,m=>(t(),i("div",{key:m.id,class:J(["w-full max-w-sm rounded-md shadow-lg pointer-events-auto overflow-hidden",g(m.type)])},[e("div",ht,[e("p",yt,I(m.message),1),m.confirm?(t(),i("div",kt,[e("button",{class:"px-3 py-1 text-sm font-semibold rounded bg-white/90 text-slate-800 hover:bg-white",onClick:c=>x(m.id)},I(m.confirm.confirmText||"Confirm"),9,wt),e("button",{class:"px-3 py-1 text-sm font-semibold rounded bg-transparent border border-white/70 text-white hover:bg-white/10",onClick:c=>d(m.id)},I(m.confirm.cancelText||"Cancel"),9,At)])):G("",!0)])],2))),128))]))}};var ze={exports:{}},_t=ze.exports,oa;function Tt(){return oa||(oa=1,function(s,r){(function(o,a){s.exports=a(Ja())})(_t,l=>(()=>{var o={113:(j,E)=>{Object.defineProperty(E,"__esModule",{value:!0}),E.default=(R,B)=>{const k=R.__vccOpts||R;for(const[C,U]of B)k[C]=U;return k}},594:j=>{j.exports=l}},a={};function x(j){var E=a[j];if(E!==void 0)return E.exports;var R=a[j]={exports:{}};return o[j](R,R.exports,x),R.exports}x.d=(j,E)=>{for(var R in E)x.o(E,R)&&!x.o(j,R)&&Object.defineProperty(j,R,{enumerable:!0,get:E[R]})},x.o=(j,E)=>Object.prototype.hasOwnProperty.call(j,E),x.r=j=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(j,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(j,"__esModule",{value:!0})};var d={};x.r(d),x.d(d,{ToastComponent:()=>A,ToastPlugin:()=>L,ToastPositions:()=>T,default:()=>Y,useToast:()=>_});var g=x(594);const p=["innerHTML"];function n(j,E,R,B,k,C){return(0,g.openBlock)(),(0,g.createBlock)(g.Transition,{"enter-active-class":j.transition.enter,"leave-active-class":j.transition.leave},{default:(0,g.withCtx)(()=>[(0,g.withDirectives)((0,g.createElementVNode)("div",{ref:"root",role:"alert",class:(0,g.normalizeClass)(["v-toast__item",[`v-toast__item--${j.type}`,`v-toast__item--${j.position}`]]),onMouseover:E[0]||(E[0]=U=>j.toggleTimer(!0)),onMouseleave:E[1]||(E[1]=U=>j.toggleTimer(!1)),onClick:E[2]||(E[2]=function(){return j.whenClicked&&j.whenClicked(...arguments)})},[E[3]||(E[3]=(0,g.createElementVNode)("div",{class:"v-toast__icon"},null,-1)),(0,g.createElementVNode)("p",{class:"v-toast__text",innerHTML:j.message},null,8,p)],34),[[g.vShow,j.isActive]])]),_:1},8,["enter-active-class","leave-active-class"])}function m(j){var E;typeof j.remove<"u"?j.remove():(E=j.parentNode)==null||E.removeChild(j)}function c(j,E,R){let B=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const k=(0,g.h)(j,E,B),C=document.createElement("div");return C.classList.add("v-toast--pending"),R.appendChild(C),(0,g.render)(k,C),k.component}class v{constructor(E,R){this.startedAt=Date.now(),this.callback=E,this.delay=R,this.timer=setTimeout(E,R)}pause(){this.stop(),this.delay-=Date.now()-this.startedAt}resume(){this.stop(),this.startedAt=Date.now(),this.timer=setTimeout(this.callback,this.delay)}stop(){clearTimeout(this.timer)}}const T=Object.freeze({TOP_RIGHT:"top-right",TOP:"top",TOP_LEFT:"top-left",BOTTOM_RIGHT:"bottom-right",BOTTOM:"bottom",BOTTOM_LEFT:"bottom-left"});function S(j){return{all:j=j||new Map,on:function(E,R){var B=j.get(E);B?B.push(R):j.set(E,[R])},off:function(E,R){var B=j.get(E);B&&(R?B.splice(B.indexOf(R)>>>0,1):j.set(E,[]))},emit:function(E,R){var B=j.get(E);B&&B.slice().map(function(k){k(R)}),(B=j.get("*"))&&B.slice().map(function(k){k(E,R)})}}}const q=S(),D=(0,g.defineComponent)({name:"Toast",props:{message:{type:String,required:!0},type:{type:String,default:"success"},position:{type:String,default:T.BOTTOM_RIGHT,validator(j){return Object.values(T).includes(j)}},duration:{type:Number,default:3e3},dismissible:{type:Boolean,default:!0},onDismiss:{type:Function,default:()=>{}},onClick:{type:Function,default:()=>{}},queue:Boolean,pauseOnHover:{type:Boolean,default:!0}},data(){return{isActive:!1,parentTop:null,parentBottom:null,isHovered:!1}},beforeMount(){this.setupContainer()},mounted(){this.showNotice(),q.on("toast-clear",this.dismiss)},methods:{setupContainer(){if(this.parentTop=document.querySelector(".v-toast.v-toast--top"),this.parentBottom=document.querySelector(".v-toast.v-toast--bottom"),this.parentTop&&this.parentBottom)return;this.parentTop||(this.parentTop=document.createElement("div"),this.parentTop.className="v-toast v-toast--top"),this.parentBottom||(this.parentBottom=document.createElement("div"),this.parentBottom.className="v-toast v-toast--bottom");const j=document.body;j.appendChild(this.parentTop),j.appendChild(this.parentBottom)},shouldQueue(){return this.queue?this.parentTop.childElementCount>0||this.parentBottom.childElementCount>0:!1},dismiss(){this.timer&&this.timer.stop(),clearTimeout(this.queueTimer),this.isActive=!1,setTimeout(()=>{this.onDismiss.apply(null,arguments);const j=this.$refs.root;(0,g.render)(null,j),m(j)},150)},showNotice(){if(this.shouldQueue()){this.queueTimer=setTimeout(this.showNotice,250);return}const j=this.$refs.root.parentElement;this.correctParent.insertAdjacentElement("afterbegin",this.$refs.root),m(j),this.isActive=!0,this.duration&&(this.timer=new v(this.dismiss,this.duration))},whenClicked(){this.dismissible&&(this.onClick.apply(null,arguments),this.dismiss())},toggleTimer(j){!this.pauseOnHover||!this.timer||(j?this.timer.pause():this.timer.resume())}},computed:{correctParent(){switch(this.position){case T.TOP:case T.TOP_RIGHT:case T.TOP_LEFT:return this.parentTop;case T.BOTTOM:case T.BOTTOM_RIGHT:case T.BOTTOM_LEFT:return this.parentBottom}},transition(){switch(this.position){case T.TOP:case T.TOP_RIGHT:case T.TOP_LEFT:return{enter:"v-toast--fade-in-down",leave:"v-toast--fade-out"};case T.BOTTOM:case T.BOTTOM_RIGHT:case T.BOTTOM_LEFT:return{enter:"v-toast--fade-in-up",leave:"v-toast--fade-out"}}}},beforeUnmount(){q.off("toast-clear",this.dismiss)}});var h=x(113);const A=(0,h.default)(D,[["render",n]]),_=function(){let j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{open(E){let R=null;typeof E=="string"&&(R=E);const k=Object.assign({},{message:R},j,E);return{dismiss:c(A,k,document.body).ctx.dismiss}},clear(){q.emit("toast-clear")},success(E){let R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.open(Object.assign({},{message:E,type:"success"},R))},error(E){let R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.open(Object.assign({},{message:E,type:"error"},R))},info(E){let R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.open(Object.assign({},{message:E,type:"info"},R))},warning(E){let R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.open(Object.assign({},{message:E,type:"warning"},R))},default(E){let R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.open(Object.assign({},{message:E,type:"default"},R))}}},L={install:function(j){let E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},R=_(E);j.config.globalProperties.$toast=R,j.provide("$toast",R)}},Y=L;return d})())}(ze)),ze.exports}var Mt=Tt();const Gt={class:"p-8"},Ct={class:"mt-2 text-sm text-gray-600"},$t={key:0,class:"mt-6 p-4 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 rounded-lg"},St={class:"mt-4"},Pt={class:"mt-6 grid grid-cols-1 lg:grid-cols-3 gap-6"},jt={class:"lg:col-span-1 space-y-3"},Et=["onClick"],It={class:"flex items-center justify-between"},Dt={class:"flex items-center"},Bt={class:"ml-2 text-sm text-gray-500"},Vt={key:0},Nt={key:1},Lt={key:1,class:"text-xs text-gray-400"},Ut={key:0,class:"lg:col-span-2 p-6 bg-gray-50 rounded-xl shadow-inner"},zt={key:0},Rt={class:"text-xl font-semibold text-gray-800 mb-4"},Ft={class:"mb-4 text-sm text-right"},Ot=["disabled"],Kt={class:"flex items-center justify-between mb-6 p-4 rounded-lg bg-white shadow-sm border border-gray-200"},Ht={class:"relative inline-flex items-center cursor-pointer"},qt=["checked"],Wt={key:0},Jt={class:"flex-1"},Yt=["onUpdate:modelValue"],Zt={class:"flex-1"},Qt=["onUpdate:modelValue"],Xt=["onClick"],el={key:1},al={key:1,class:"lg:col-span-2 p-6 bg-gray-50 rounded-xl shadow-inner flex items-center justify-center"},tl={class:"mt-8 flex justify-end space-x-3"},ll={key:0,class:"flex items-center"},sl={key:1},ol={__name:"AvailabilityModal",props:{show:Boolean,userId:{type:Number,default:null}},emits:["close","availability-saved"],setup(s,{emit:r}){const l=()=>{const B=localStorage.getItem("authToken");B&&!ee.defaults.headers.common.Authorization&&(ee.defaults.headers.common.Authorization=`Bearer ${B}`)},o=s,a=r,x=Mt.useToast(),d=$({}),g=$({}),p=$(!1),n=$(null),m=$(""),c=$(!1),v=$([]),T=()=>{const B=[],k=new Date,C=k.getDay(),U=C===0?1:8-C,N=new Date(k);N.setDate(k.getDate()+U);for(let W=0;W<7;W++){const K=new Date(N);K.setDate(N.getDate()+W);const se=K.toISOString().split("T")[0];B.push({value:se,label:K.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"}),day:K.toLocaleDateString("en-US",{weekday:"short"})})}return B},S=()=>{const B=[],k=new Date,C=k.getDay(),U=new Date(k);U.setDate(k.getDate()-(C===0?6:C-1));for(let N=0;N<7;N++){const W=new Date(U);W.setDate(U.getDate()+N);const K=W.toISOString().split("T")[0];B.push({value:K,label:W.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"}),day:W.toLocaleDateString("en-US",{weekday:"short"})})}return B},b=()=>{c.value=!0,m.value="",v.value=S(),n.value=null,D()},q=()=>{c.value=!1,m.value="",v.value=T(),n.value=null,D()};fe(()=>{l(),v.value=T(),D()});const D=async()=>{try{if(l(),v.value.length===0)return;const B=v.value[0].value,k=v.value[v.value.length-1].value,C=await ee.get("/api/availabilities",{params:{start_date:B,end_date:k,user_id:o.userId}});if(C.data&&C.data.availabilities){const U={};v.value.forEach(N=>{U[N.value]={isSelected:!1,isAvailable:!0,reason:"",timeSlots:[{start_time:"",end_time:""}]}}),d.value=U,C.data.availabilities.forEach(N=>{const W=N.date.split("T")[0];d.value[W]&&(d.value[W].isSelected=!0,d.value[W].isAvailable=N.is_available,N.is_available?d.value[W].timeSlots=N.time_slots&&N.time_slots.length>0?[...N.time_slots]:[{start_time:"",end_time:""}]:d.value[W].reason=N.reason||"")})}}catch(B){console.error("Error fetching existing availabilities:",B)}};ie(()=>o.show,async B=>{B&&(g.value={},m.value="",c.value=!1,v.value=T(),await D()),n.value=null},{immediate:!0});const h=F(()=>d.value[n.value]||{isSelected:!1,isAvailable:!0,reason:"",timeSlots:[{start_time:"",end_time:""}]}),y=F(()=>Object.values(d.value).some(B=>B.isSelected)),A=F(()=>{const B=d.value[n.value];return B?B.isAvailable?B.timeSlots.some(k=>k.start_time&&k.end_time):B.reason.trim().split(/\s+/).filter(Boolean).length>=2:!1}),_=B=>{n.value=B,d.value[B]&&(d.value[B].isSelected=!0)},L=()=>{var k;const B=(k=d.value[n.value])==null?void 0:k.timeSlots;B&&(B.push({start_time:"",end_time:""}),d.value[n.value].isSelected=!0)},Y=B=>{var C;const k=(C=d.value[n.value])==null?void 0:C.timeSlots;k&&k.length>1&&(k.splice(B,1),d.value[n.value].isSelected=!0)},j=B=>{d.value[n.value]&&(d.value[n.value].isAvailable=B,d.value[n.value].isSelected=!0,B?d.value[n.value].reason="":d.value[n.value].timeSlots=[{start_time:"",end_time:""}])},E=()=>{const B=d.value[n.value];if(B){if(!A.value){B.isAvailable?g.value[n.value]={timeSlots:"Please fill in at least one time slot before applying to all days."}:g.value[n.value]={reason:"Reason must be at least 2 words to apply to all days."};return}delete g.value[n.value];for(const k of v.value){const C=k.value;d.value[C]=JSON.parse(JSON.stringify(B)),d.value[C].isSelected=!0}x.success("Availability applied to all days!")}},R=async()=>{if(p.value=!0,g.value={},c.value&&!m.value.trim()){g.value.lateReason="Please provide a reason for this late submission.",p.value=!1;return}const B=[];for(const k of v.value){const C=k.value,U=d.value[C];let N={};if(U.isSelected){if(U.isAvailable)if(U.timeSlots.some(W=>!W.start_time||!W.end_time))N.timeSlots="Please fill in all time slots.";else for(const W of U.timeSlots){const K=W.start_time.split(":").map(Number),se=W.end_time.split(":").map(Number);if(K[0]*60+K[1]>=se[0]*60+se[1]){N.timeSlots="End time must be after start time.";break}}else U.reason.trim()||(N.reason="Please provide a reason for unavailability.");Object.keys(N).length>0&&(g.value[C]=N),Object.keys(N).length===0&&B.push({date:C,is_available:U.isAvailable,reason:U.isAvailable?null:U.reason,time_slots:U.isAvailable?U.timeSlots:null})}}if(B.length===0){g.value.general="Please select and set availability for at least one day.",p.value=!1;return}try{l();const k={availabilities:B,reason_for_late_submission:c.value?m.value:null};await ee.post("/api/availabilities/batch",k),x.success("Availability saved successfully!"),a("availability-saved"),a("close")}catch(k){console.error("Error saving availability:",k),x.error("An error occurred while saving your availability.")}finally{p.value=!1}};return(B,k)=>(t(),V(Ze,{show:s.show,onClose:k[4]||(k[4]=C=>B.$emit("close")),"max-width":"4xl"},{default:w(()=>{var C,U,N,W;return[e("div",Gt,[k[17]||(k[17]=e("h2",{class:"text-2xl font-bold text-gray-900"}," Set Your Weekly Availability ",-1)),e("p",Ct,[k[5]||(k[5]=M(" Select a day to quickly set your schedule for the upcoming week. ",-1)),c.value?(t(),i("span",{key:1,class:"text-indigo-600 hover:text-indigo-800 transition duration-150 ease-in-out cursor-pointer",onClick:q}," Go back to next week. ")):(t(),i("span",{key:0,class:"text-indigo-600 hover:text-indigo-800 transition duration-150 ease-in-out cursor-pointer",onClick:b}," Missed the deadline? Submit for this week. "))]),c.value?(t(),i("div",$t,[k[6]||(k[6]=e("div",{class:"flex items-center"},[e("svg",{class:"h-5 w-5 text-yellow-500 mr-2",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.344a1.5 1.5 0 012.486 0l5.446 9.176A1.5 1.5 0 0114.246 15H5.754a1.5 1.5 0 01-1.238-2.48zM9 11a1 1 0 102 0V7a1 1 0 10-2 0v4zm1-3a1 1 0 100 2h.01a1 1 0 100-2H10z","clip-rule":"evenodd"})]),e("p",{class:"font-semibold"},"Late Submission for Current Week")],-1)),k[7]||(k[7]=e("p",{class:"mt-2 text-sm"}," Please provide a reason for submitting late. We acknowledge that availability submissions are due by Thursday evening. ",-1)),e("div",St,[u(Z,{value:"Reason for late submission"}),H(e("textarea",{"onUpdate:modelValue":k[0]||(k[0]=K=>m.value=K),rows:"2",class:"mt-1 block w-full rounded-md border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 shadow-sm",placeholder:"e.g., I was out sick, I forgot, I had no access to the system"},null,512),[[ve,m.value]]),u(Q,{message:g.value.lateReason,class:"mt-2"},null,8,["message"])])])):G("",!0),e("div",Pt,[e("div",jt,[(t(!0),i(X,null,te(v.value,K=>{var se;return t(),i("div",{key:K.value,class:J(["p-4 rounded-xl border cursor-pointer transition-all duration-200 ease-in-out",{"bg-indigo-50 border-indigo-500 shadow-lg":n.value===K.value,"bg-white border-gray-200 hover:border-indigo-400 hover:shadow-md":n.value!==K.value,"border-red-400 bg-red-50":g.value[K.value],"opacity-70":K.isPast}]),onClick:ye=>_(K.value)},[e("div",It,[e("div",Dt,[e("div",{class:J(["text-lg font-bold",{"text-indigo-600":n.value===K.value,"text-gray-800":n.value!==K.value}])},I(K.day),3),e("div",Bt,I(K.label.split(", ")[1]),1)]),(se=d.value[K.value])!=null&&se.isSelected?(t(),i("span",{key:0,class:J(["inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium",{"bg-emerald-100 text-emerald-800":d.value[K.value].isAvailable,"bg-amber-100 text-amber-800":!d.value[K.value].isAvailable}])},[d.value[K.value].isAvailable?(t(),i("span",Vt,"Available")):(t(),i("span",Nt,"Unavailable"))],2)):(t(),i("span",Lt," Not Set "))])],10,Et)}),128))]),n.value?(t(),i("div",Ut,[n.value?(t(),i("div",zt,[e("h3",Rt," Availability for "+I((C=v.value.find(K=>K.value===n.value))==null?void 0:C.label),1),e("div",Ft,[e("button",{type:"button",onClick:E,disabled:!A.value,class:J([{"opacity-50 cursor-not-allowed":!A.value},"text-indigo-600 hover:text-indigo-800 transition duration-150 ease-in-out"])},k[8]||(k[8]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 inline mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{d:"M7 9a2 2 0 012-2h6a2 2 0 012 2v6a2 2 0 01-2 2H9a2 2 0 01-2-2V9z"}),e("path",{d:"M5 3a2 2 0 00-2 2v6a2 2 0 002 2V5h8a2 2 0 00-2-2H5z"})],-1),M(" Apply to all days ",-1)]),10,Ot)]),e("div",Kt,[k[10]||(k[10]=e("span",{class:"text-sm font-medium text-gray-700"},"I am available on this day",-1)),e("label",Ht,[e("input",{type:"checkbox",checked:h.value.isAvailable,onChange:k[1]||(k[1]=K=>j(K.target.checked)),class:"sr-only peer"},null,40,qt),k[9]||(k[9]=e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"},null,-1))])]),u(Q,{message:(U=g.value[n.value])==null?void 0:U.general,class:"mt-2"},null,8,["message"]),h.value.isAvailable?(t(),i("div",Wt,[u(Z,{value:"Available Time Slots",class:"text-gray-800 mb-2"}),u(Q,{message:(N=g.value[n.value])==null?void 0:N.timeSlots,class:"mt-2 mb-4"},null,8,["message"]),(t(!0),i(X,null,te(h.value.timeSlots,(K,se)=>(t(),i("div",{key:se,class:"flex items-center space-x-2 mb-4"},[e("div",Jt,[H(e("input",{type:"time","onUpdate:modelValue":ye=>d.value[n.value].timeSlots[se].start_time=ye,class:"block w-full rounded-md border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 shadow-sm"},null,8,Yt),[[ve,d.value[n.value].timeSlots[se].start_time]])]),k[12]||(k[12]=e("span",{class:"text-gray-500"},"-",-1)),e("div",Zt,[H(e("input",{type:"time","onUpdate:modelValue":ye=>d.value[n.value].timeSlots[se].end_time=ye,class:"block w-full rounded-md border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 shadow-sm"},null,8,Qt),[[ve,d.value[n.value].timeSlots[se].end_time]])]),d.value[n.value].timeSlots.length>1?(t(),i("button",{key:0,type:"button",onClick:ye=>Y(se),class:"p-2 text-red-600 hover:text-red-800 transition duration-150 ease-in-out"},k[11]||(k[11]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm6 0a1 1 0 012 0v6a1 1 0 11-2 0V8z","clip-rule":"evenodd"})],-1)]),8,Xt)):G("",!0)]))),128))])):G("",!0),e("button",{type:"button",onClick:L,class:"mt-2 w-full flex items-center justify-center px-4 py-2 border border-dashed border-indigo-300 rounded-lg text-indigo-600 hover:bg-indigo-50 transition duration-150 ease-in-out"},k[13]||(k[13]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z","clip-rule":"evenodd"})],-1),M(" Add Another Time Slot ",-1)]))])):(t(),i("div",el,[u(Z,{value:"Reason for Not Available",class:"text-gray-800 mb-2"}),H(e("textarea",{"onUpdate:modelValue":k[2]||(k[2]=K=>d.value[n.value].reason=K),rows:"3",class:"block w-full rounded-md border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 shadow-sm",placeholder:"e.g., Out of office, Holiday, Meeting all day"},null,512),[[ve,d.value[n.value].reason]]),u(Q,{message:(W=g.value[n.value])==null?void 0:W.reason,class:"mt-2"},null,8,["message"])]))])):(t(),i("div",al,k[14]||(k[14]=[e("p",{class:"text-gray-500 text-lg font-medium"}," Please select a day from the left to set your availability. ",-1)])))]),e("div",tl,[u(Re,{onClick:k[3]||(k[3]=K=>B.$emit("close"))},{default:w(()=>k[15]||(k[15]=[M(" Cancel ",-1)])),_:1,__:[15]}),u(ne,{onClick:R,disabled:p.value||!y.value,class:J({"opacity-50 cursor-not-allowed":p.value||!y.value})},{default:w(()=>[p.value?(t(),i("span",ll,k[16]||(k[16]=[e("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),M(" Saving... ",-1)]))):(t(),i("span",sl,"Save Availability"))]),_:1},8,["disabled","class"])])])]}),_:1},8,["show"]))}},il={key:0,class:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center"},rl={class:"bg-white rounded-lg shadow-xl p-6 max-w-lg w-full mx-4"},nl={class:"flex justify-center"},ul={__name:"AvailabilityBlocker",setup(s){const r=$(!1),l=$(!0),o=$(!1),a=$([]),x=F(()=>{var b;return((b=Ne().props.auth.user)==null?void 0:b.id)||null}),d=()=>{const b=localStorage.getItem("authToken");b&&!ee.defaults.headers.common.Authorization&&(ee.defaults.headers.common.Authorization=`Bearer ${b}`)},g=async()=>{l.value=!0;const b=localStorage.getItem("shouldBlockUser"),q=localStorage.getItem("allWeekdaysCovered");if(b==="true"&&q==="false")r.value=!0,await p();else try{d();const D=await ee.get("/api/availability-prompt");r.value=D.data.should_block_user&&!D.data.all_weekdays_covered,r.value&&await p()}catch(D){console.error("Error checking if user should be blocked:",D),r.value=!1}l.value=!1},p=async()=>{try{d();const b=await ee.get("/api/availability-prompt");n(b.data.next_week_start,b.data.next_week_end)}catch(b){console.error("Error fetching next week dates:",b)}},n=(b,q)=>{const D=[],h=new Date(b),y=new Date(q),A=new Date(h);for(;A<=y;)D.push({value:A.toISOString().split("T")[0],label:A.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})}),A.setDate(A.getDate()+1);a.value=D},m=()=>{o.value=!0},c=()=>{g()},v=b=>{r.value=b.detail.shouldBlockUser&&!b.detail.allWeekdaysCovered},T=()=>{document.visibilityState==="visible"&&Te(()=>{g()})},S=b=>{(b.key==="shouldBlockUser"||b.key==="allWeekdaysCovered")&&Te(()=>{g()})};return fe(()=>{g(),window.addEventListener("availability-status-updated",v),document.addEventListener("visibilitychange",T),window.addEventListener("storage",S)}),Fe(()=>{window.removeEventListener("availability-status-updated",v),document.removeEventListener("visibilitychange",T),window.removeEventListener("storage",S)}),(b,q)=>r.value&&!l.value?(t(),i("div",il,[e("div",rl,[q[2]||(q[2]=Ua('<div class="flex items-center mb-4"><div class="flex-shrink-0 mr-3"><svg class="h-8 w-8 text-red-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg></div><h2 class="text-xl font-bold text-gray-900">Action Required</h2></div><p class="mb-6 text-gray-700"> You must submit your availability for all weekdays of next week before you can continue using the application. This is required for planning meetings and work schedules. </p>',2)),e("div",nl,[u(ne,{onClick:m,class:"bg-red-600 hover:bg-red-700"},{default:w(()=>q[1]||(q[1]=[M(" Submit Availability Now ",-1)])),_:1,__:[1]})]),u(ol,{show:o.value,"next-week-dates":a.value,date:a.value.length>0?a.value[0].value:"",userId:x.value,onClose:q[0]||(q[0]=D=>o.value=!1),onAvailabilitySaved:c},null,8,["show","next-week-dates","date","userId"])])])):G("",!0)}},dl={class:"relative"},cl={class:"flex flex-wrap items-center gap-2 mb-2 p-2 border border-gray-300 rounded-lg bg-white min-h-[44px] focus-within:border-indigo-500 focus-within:ring-1 focus-within:ring-indigo-500 transition-all duration-150"},ml=["onClick"],vl={key:0,class:"absolute z-20 w-full bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto mt-1 transform-gpu"},pl=["onClick"],fl={key:1,class:"px-4 py-2 text-sm text-gray-500"},gl={key:2,class:"px-4 py-2 text-sm text-gray-500"},bl={__name:"TagInput",props:{modelValue:{type:Array,default:()=>[]},label:{type:String,default:"Tags"},placeholder:{type:String,default:"Add tags..."},error:{type:String,default:""},initialTags:{type:Array,default:()=>[]},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(s,{emit:r}){const l=s,o=r,a=$(""),x=$([]),d=$([]),g=$(!1),p=$(null);function n(){o("update:modelValue",d.value.map(D=>D.id))}ie(()=>l.initialTags,D=>{if(d.value=[],D&&D.length>0){const _=[],L=new Set;D.forEach(Y=>{L.has(Y.id)||(_.push(Y),L.add(Y.id))}),d.value.push(..._)}const h=D.map(_=>_.id),y=Array.isArray(l.modelValue)?l.modelValue:[];(h.length!==y.length||h.some(_=>!y.includes(_))||y.some(_=>!h.includes(_)))&&n()},{immediate:!0});const m=Ya(async D=>{if(D.length<2){x.value=[],g.value=!1;return}try{const h=await ee.get(`/api/tags/search?query=${D}`);x.value=h.data,g.value=!0}catch(h){console.error("Error fetching tags:",h),x.value=[],g.value=!1}},300);ie(a,D=>{l.disabled||m(D)});const c=D=>{d.value.some(h=>h.id===D.id)||(d.value.push(D),a.value="",x.value=[],g.value=!1,n()),Te(()=>p.value.focus())},v=()=>{if(l.disabled)return;const D=a.value.trim();if(!D)return;const h=x.value.find(A=>A.name.toLowerCase()===D.toLowerCase()),y=d.value.some(A=>A.name.toLowerCase()===D.toLowerCase());if(h)c(h);else if(y)a.value="",x.value=[],g.value=!1;else{const A={id:`new_${D.replace(/\s+/g,"-").toLowerCase()}_${Date.now()}`,name:D};d.value.push(A),a.value="",x.value=[],g.value=!1,n()}Te(()=>p.value.focus())},T=D=>{l.disabled||(d.value=d.value.filter(h=>h.id!==D.id),n(),Te(()=>p.value.focus()))},S=()=>{l.disabled||a.value===""&&d.value.length>0&&T(d.value[d.value.length-1])},b=F(()=>x.value.filter(D=>!d.value.some(h=>h.id===D.id))),q=D=>{p.value&&!p.value.$el.contains(D.target)&&(g.value=!1,a.value="")};return fe(()=>{document.addEventListener("click",q)}),Fe(()=>{document.removeEventListener("click",q)}),(D,h)=>(t(),i("div",dl,[u(Z,{value:s.label,class:"mb-1"},null,8,["value"]),e("div",cl,[(t(!0),i(X,null,te(d.value,y=>(t(),i("span",{key:y.id,class:"inline-flex items-center px-3 py-1 text-sm font-medium bg-indigo-100 text-indigo-800 rounded-full shadow-sm"},[M(I(y.name)+" ",1),s.disabled?G("",!0):(t(),i("button",{key:0,type:"button",onClick:A=>T(y),class:"ml-2 -mr-1 text-indigo-500 hover:text-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 rounded-full p-0.5"},h[3]||(h[3]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,ml))]))),128)),u(pe,{ref_key:"inputRef",ref:p,type:"text",placeholder:d.value.length===0?s.placeholder:"",modelValue:a.value,"onUpdate:modelValue":h[0]||(h[0]=y=>a.value=y),onFocus:h[1]||(h[1]=y=>g.value=!0),onKeydown:[Ue(va(v,["prevent"]),["enter"]),h[2]||(h[2]=Ue(y=>g.value=!1,["tab"])),Ue(S,["delete"])],class:"flex-grow min-w-[100px] border-none focus:ring-0 shadow-none p-0 bg-transparent text-gray-900",disabled:s.disabled},null,8,["placeholder","modelValue","onKeydown","disabled"])]),g.value&&(b.value.length>0||a.value.length>=2||b.value.length===0&&a.value.length<2)&&!s.disabled?(t(),i("div",vl,[(t(!0),i(X,null,te(b.value,y=>(t(),i("div",{key:y.id,onClick:A=>c(y),class:"px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 cursor-pointer transition-colors duration-100"},I(y.name),9,pl))),128)),!x.value.some(y=>y.name.toLowerCase()===a.value.toLowerCase())&&a.value.length>=2?(t(),i("div",{key:0,onClick:v,class:"px-4 py-2 text-sm text-indigo-700 bg-indigo-50 hover:bg-indigo-100 cursor-pointer border-t border-indigo-200 font-semibold transition-colors duration-100"},' Add new tag: "'+I(a.value)+'" ',1)):G("",!0),b.value.length===0&&a.value.length<2?(t(),i("div",fl," Type at least 2 characters to search for tags. ")):G("",!0),b.value.length===0&&a.value.length>=2&&!x.value.some(y=>y.name.toLowerCase()===a.value.toLowerCase())?(t(),i("div",gl,[h[4]||(h[4]=M(" No matching tags found. Press ",-1)),h[5]||(h[5]=e("span",{class:"font-semibold text-indigo-600"},"Enter",-1)),M(' to add "'+I(a.value)+'" as a new tag. ',1)])):G("",!0)])):G("",!0),u(Q,{message:s.error,class:"mt-2"},null,8,["message"])]))}},ha=Le(bl,[["__scopeId","data-v-4d528a4c"]]),hl={class:"space-y-4"},yl="Add New Milestone",kl="/api/milestones",wl="post",Al="Create Milestone",xl="Milestone created successfully!",_l={__name:"MilestoneFormModal",props:{show:Boolean,projectId:Number},emits:["close","saved"],setup(s,{emit:r}){const l=s,o=r,a=Ce({name:"",description:"",completion_date:null,status:"Not Started",project_id:l.projectId}),x=Ce({completion_date:null}),d=["Not Started","In Progress","Completed","Overdue"];ie(()=>l.show,m=>{m&&(Object.assign(a,{name:"",description:"",completion_date:null,status:"Not Started",project_id:l.projectId}),x.completion_date=null)},{immediate:!0});const g=()=>(x.completion_date=null,a.completion_date?!0:(x.completion_date=["Completion date is required."],!1)),p=m=>{o("saved",m),o("close")},n=()=>{o("close")};return(m,c)=>(t(),V($e,{show:s.show,title:yl,"api-endpoint":kl,"http-method":wl,"form-data":a,"submit-button-text":Al,"success-message":xl,"before-submit":g,onClose:n,onSubmitted:p},{default:w(({errors:v})=>[e("div",hl,[e("div",null,[u(Z,{for:"milestone-name",value:"Milestone Name"}),u(pe,{id:"milestone-name",modelValue:a.name,"onUpdate:modelValue":c[0]||(c[0]=T=>a.name=T),type:"text",class:"mt-1 block w-full",placeholder:"Enter milestone name",required:""},null,8,["modelValue"]),u(Q,{message:v.name?v.name[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[u(Z,{for:"milestone-description",value:"Description"}),H(e("textarea",{id:"milestone-description","onUpdate:modelValue":c[1]||(c[1]=T=>a.description=T),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",rows:"3",placeholder:"Enter milestone description"},null,512),[[ve,a.description]]),u(Q,{message:v.description?v.description[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[u(Z,{for:"milestone-completion-date",value:"Completion Date"}),u(pe,{id:"milestone-completion-date",modelValue:a.completion_date,"onUpdate:modelValue":c[2]||(c[2]=T=>a.completion_date=T),type:"date",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),u(Q,{message:v.completion_date?v.completion_date[0]:x.completion_date?x.completion_date[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[u(Z,{for:"milestone-status",value:"Status"}),u(de,{id:"milestone-status",modelValue:a.status,"onUpdate:modelValue":c[3]||(c[3]=T=>a.status=T),options:d.map(T=>({value:T,label:T})),"value-key":"value","label-key":"label",placeholder:"Select status",class:"mt-1"},null,8,["modelValue","options"]),u(Q,{message:v.status?v.status[0]:"",class:"mt-2"},null,8,["message"])])])]),_:1},8,["show","form-data"]))}},Tl={class:"space-y-4"},Ml={key:0},Gl={key:0,class:"text-sm text-gray-500"},Cl={key:0,class:"text-sm text-gray-500"},$l={key:0,class:"text-sm text-gray-500"},Sl={class:"flex items-center gap-2 mt-1"},Pl={key:0,class:"text-sm text-gray-500"},jl=["disabled"],El={class:"flex items-center mt-2"},Il="Create New Task",Dl="/api/tasks",Bl="post",Vl="Create Task",Nl="Task created successfully!",Ll={__name:"CreateTaskModal",props:{show:Boolean,projectId:{type:Number,default:null}},emits:["close","saved"],setup(s,{emit:r}){const l=s,o=r,a=Ce({name:"",description:"",assigned_to_user_id:null,due_date:null,status:"To Do",task_type_id:null,milestone_id:null,project_id:l.projectId,priority:"medium",needs_approval:!1,tags:[],tags_data:[]}),x=["To Do","In Progress","Done","Blocked","Archived"],d=[{value:"low",label:"Low"},{value:"medium",label:"Medium"},{value:"high",label:"High"}],g=$([]),p=$([]),n=$([]),m=$([]),c=$(!0),v=$(!1),T=$(!1),S=$(!1),b=$(!1);ie(()=>l.show,async k=>{k&&(Object.assign(a,{name:"",description:"",assigned_to_user_id:null,due_date:null,status:"To Do",task_type_id:null,milestone_id:null,project_id:l.projectId,priority:"medium",needs_approval:!1,tags:[],tags_data:[]}),l.projectId?await D(l.projectId):await q())},{immediate:!0}),ie(()=>a.project_id,async k=>{k?await D(k):(p.value=[],n.value=[],m.value=[])});const q=async()=>{c.value=!0;try{const k=await window.axios.get("/api/projects-simplified");g.value=k.data.map(C=>({value:C.id,label:C.name}))}catch(k){console.error("Error fetching projects:",k),g.value=[]}finally{c.value=!1}},D=async k=>{if(k){v.value=!0,T.value=!0,S.value=!0;try{const[C,U,N]=await Promise.all([window.axios.get(`/api/projects/${k}/users`),window.axios.get("/api/task-types"),window.axios.get(`/api/projects/${k}/milestones`)]);p.value=C.data.map(W=>({value:W.id,label:W.name})),n.value=U.data.map(W=>({value:W.id,label:W.name})),m.value=N.data.map(W=>({value:W.id,label:W.name}))}catch(C){console.error("Error fetching associated task data:",C),p.value=[],n.value=[],m.value=[]}finally{v.value=!1,T.value=!1,S.value=!1}}},h=$([]),y=k=>{h.value=Array.from(k.target.files||[])},A=async k=>{if(!h.value.length)return;const C=new FormData;h.value.forEach((U,N)=>C.append(`files[${N}]`,U)),C.append("model_type","Task"),C.append("model_id",k);try{await window.axios.post("/api/files",C,{headers:{"Content-Type":"multipart/form-data"}}),ce("Files uploaded to Google Drive.")}catch(U){console.error("Failed to upload task files",U),oe("Failed to upload files.")}},_=async k=>{var C,U;try{const N=(k==null?void 0:k.id)||((C=k==null?void 0:k.task)==null?void 0:C.id)||((U=k==null?void 0:k.data)==null?void 0:U.id);N&&await A(N)}finally{o("saved",k),o("close"),h.value=[]}},L=()=>{o("close")},Y=()=>{a.project_id?b.value=!0:alert("Please select a project before adding a milestone.")},j=k=>{if(b.value=!1,k&&k.id&&k.name){const C={value:k.id,label:k.name};m.value.some(U=>U.value===C.value)||m.value.push(C),a.milestone_id=C.value}},E=F(()=>p.value),R=F(()=>n.value),B=F(()=>m.value);return(k,C)=>(t(),i(X,null,[u($e,{show:s.show,title:Il,"api-endpoint":Dl,"http-method":Bl,"form-data":a,"submit-button-text":Vl,"success-message":Nl,onClose:L,onSubmitted:_},{default:w(({errors:U})=>[e("div",Tl,[s.projectId?G("",!0):(t(),i("div",Ml,[u(Z,{for:"task-project",value:"Project"}),c.value?(t(),i("div",Gl,"Loading projects...")):(t(),V(de,{key:1,id:"task-project",modelValue:a.project_id,"onUpdate:modelValue":C[0]||(C[0]=N=>a.project_id=N),options:g.value,"value-key":"value","label-key":"label",placeholder:"Select a project",class:"mt-1",required:!0},null,8,["modelValue","options"])),u(Q,{message:U.project_id?U.project_id[0]:"",class:"mt-2"},null,8,["message"])])),e("div",null,[u(Z,{for:"task-name",value:"Task Name"}),u(pe,{id:"task-name",modelValue:a.name,"onUpdate:modelValue":C[1]||(C[1]=N=>a.name=N),type:"text",class:"mt-1 block w-full",placeholder:"Enter task name",required:""},null,8,["modelValue"]),u(Q,{message:U.name?U.name[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[u(Z,{for:"task-description",value:"Description"}),H(e("textarea",{id:"task-description","onUpdate:modelValue":C[2]||(C[2]=N=>a.description=N),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",rows:"3",placeholder:"Enter task description"},null,512),[[ve,a.description]]),u(Q,{message:U.description?U.description[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[u(Z,{for:"task-status",value:"Status"}),u(de,{id:"task-status",modelValue:a.status,"onUpdate:modelValue":C[3]||(C[3]=N=>a.status=N),options:x.map(N=>({value:N,label:N})),"value-key":"value","label-key":"label",placeholder:"Select status",class:"mt-1"},null,8,["modelValue","options"]),u(Q,{message:U.status?U.status[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[u(Z,{for:"task-priority",value:"Priority"}),u(de,{id:"task-priority",modelValue:a.priority,"onUpdate:modelValue":C[4]||(C[4]=N=>a.priority=N),options:d,"value-key":"value","label-key":"label",placeholder:"Select priority",class:"mt-1"},null,8,["modelValue"]),u(Q,{message:U.priority?U.priority[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[u(Z,{for:"task-due-date",value:"Due Date"}),u(pe,{id:"task-due-date",modelValue:a.due_date,"onUpdate:modelValue":C[5]||(C[5]=N=>a.due_date=N),type:"date",class:"mt-1 block w-full"},null,8,["modelValue"]),u(Q,{message:U.due_date?U.due_date[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[u(Z,{for:"task-assigned-to",value:"Assigned To"}),v.value?(t(),i("div",Cl,"Loading users...")):(t(),V(de,{key:1,id:"task-assigned-to",modelValue:a.assigned_to_user_id,"onUpdate:modelValue":C[6]||(C[6]=N=>a.assigned_to_user_id=N),options:E.value,"value-key":"value","label-key":"label",placeholder:"Unassigned",class:"mt-1","allow-empty":!0},null,8,["modelValue","options"])),u(Q,{message:U.assigned_to_user_id?U.assigned_to_user_id[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[u(Z,{for:"task-type",value:"Task Type"}),T.value?(t(),i("div",$l,"Loading task types...")):(t(),V(de,{key:1,id:"task-type",modelValue:a.task_type_id,"onUpdate:modelValue":C[7]||(C[7]=N=>a.task_type_id=N),options:R.value,"value-key":"value","label-key":"label",placeholder:"Select a task type",class:"mt-1","allow-empty":!0},null,8,["modelValue","options"])),u(Q,{message:U.task_type_id?U.task_type_id[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[u(Z,{for:"task-milestone",value:"Milestone"}),e("div",Sl,[S.value?(t(),i("div",Pl,"Loading milestones...")):(t(),V(de,{key:1,id:"task-milestone",modelValue:a.milestone_id,"onUpdate:modelValue":C[8]||(C[8]=N=>a.milestone_id=N),options:B.value,"value-key":"value","label-key":"label",placeholder:"No milestone",class:"flex-grow","allow-empty":!0,disabled:!a.project_id},null,8,["modelValue","options","disabled"])),e("button",{type:"button",onClick:Y,disabled:!a.project_id||S.value,class:"px-3 py-2 text-sm font-medium text-blue-600 bg-blue-50 rounded-md hover:bg-blue-100 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",title:"Add New Milestone"},C[12]||(C[12]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4v16m8-8H4"})],-1)]),8,jl)]),u(Q,{message:U.milestone_id?U.milestone_id[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[u(ha,{modelValue:a.tags,"onUpdate:modelValue":C[9]||(C[9]=N=>a.tags=N),initialTags:a.tags_data,label:"Tags",placeholder:"Search or add tags",error:U.tags?U.tags[0]:"",disabled:!a.project_id},null,8,["modelValue","initialTags","error","disabled"])]),e("div",null,[u(Z,{for:"task-files",value:"Attach Files (optional)"}),e("input",{id:"task-files",type:"file",class:"mt-1 block w-full",multiple:"",onChange:y},null,32),C[13]||(C[13]=e("p",{class:"text-xs text-gray-500 mt-1"},"Files will be uploaded to Google Drive under the Task folder after the task is created.",-1))]),e("div",El,[H(e("input",{id:"needs-approval",type:"checkbox","onUpdate:modelValue":C[10]||(C[10]=N=>a.needs_approval=N),class:"h-4 w-4 text-indigo-600 border-gray-300 rounded"},null,512),[[za,a.needs_approval]]),C[14]||(C[14]=e("label",{for:"needs-approval",class:"ml-2 block text-sm text-gray-700"},"This task needs approval",-1))])])]),_:1},8,["show","form-data"]),u(_l,{show:b.value,"project-id":a.project_id,onClose:C[11]||(C[11]=U=>b.value=!1),onSaved:j},null,8,["show","project-id"])],64))}},Ul={class:"space-y-4"},zl={class:"mt-4"},Rl={class:"flex items-center space-x-6"},Fl={class:"inline-flex items-center"},Ol={class:"inline-flex items-center"},Kl={class:"inline-flex items-center"},Hl={__name:"CreateForm",props:{show:{type:Boolean,default:!1},apiEndpoint:{type:String,required:!0}},emits:["close","resourceCreated"],setup(s,{emit:r}){const l=s,o=r,a=Ce({title:"",description:"",url:"",type:"website",thumbnail_url:"",visible_to_client:!0,visibility:"client",tags:[]}),x=F(()=>[{value:"website",label:"Website"},{value:"youtube",label:"YouTube Video"},{value:"document",label:"Document"},{value:"image",label:"Image"},{value:"other",label:"Other"}]),d=n=>{const m={title:n.title,description:n.description,url:n.url,type:n.type,thumbnail_url:n.thumbnail_url,visibility:n.visibility};if(Array.isArray(n.tags)&&n.tags.length){const c=n.tags.map(v=>typeof v=="object"&&v!==null?v.id:v).filter(Boolean);m.tag_ids=c}return m},g=n=>{o("resourceCreated",n),p()},p=()=>{a.title="",a.description="",a.url="",a.type="website",a.thumbnail_url="",a.visible_to_client=!0,a.tags=[],o("close")};return(n,m)=>(t(),V($e,{show:l.show,title:"Add New Shareable Resource",apiEndpoint:l.apiEndpoint,httpMethod:"post",formData:a,formatDataForApi:d,submitButtonText:"Create Resource",successMessage:"Shareable resource created successfully!",onSubmitted:g,onClose:p},{default:w(({errors:c})=>[e("div",Ul,[e("div",null,[u(Z,{for:"title",value:"Title",class:"mb-1"}),u(pe,{id:"title",type:"text",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:a.title,"onUpdate:modelValue":m[0]||(m[0]=v=>a.title=v),required:""},null,8,["modelValue"]),u(Q,{message:c.title?c.title[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[u(Z,{for:"url",value:"Resource URL",class:"mb-1"}),u(pe,{id:"url",type:"url",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:a.url,"onUpdate:modelValue":m[1]||(m[1]=v=>a.url=v),required:""},null,8,["modelValue"]),u(Q,{message:c.url?c.url[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[u(Z,{for:"type",value:"Resource Type",class:"mb-1"}),u(de,{id:"type",modelValue:a.type,"onUpdate:modelValue":m[2]||(m[2]=v=>a.type=v),options:x.value,valueKey:"value",labelKey:"label",placeholder:"Select Resource Type",required:"",class:"mt-1 block w-full"},null,8,["modelValue","options"]),u(Q,{message:c.type?c.type[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[u(Z,{for:"thumbnail_url",value:"Thumbnail URL (Optional)",class:"mb-1"}),u(pe,{id:"thumbnail_url",type:"url",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:a.thumbnail_url,"onUpdate:modelValue":m[3]||(m[3]=v=>a.thumbnail_url=v)},null,8,["modelValue"]),u(Q,{message:c.thumbnail_url?c.thumbnail_url[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[u(Z,{for:"description",value:"Description (Optional)",class:"mb-1"}),H(e("textarea",{id:"description",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-lg shadow-sm mt-1 block w-full","onUpdate:modelValue":m[4]||(m[4]=v=>a.description=v),rows:"3"},null,512),[[ve,a.description]]),u(Q,{message:c.description?c.description[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[u(ha,{modelValue:a.tags,"onUpdate:modelValue":m[5]||(m[5]=v=>a.tags=v),label:"Associated Tags",placeholder:"Search or add tags",error:c.tags?c.tags[0]:""},null,8,["modelValue","error"])]),e("div",zl,[u(Z,{value:"Visibility",class:"mb-2"}),e("div",Rl,[e("label",Fl,[H(e("input",{type:"radio",class:"form-radio",value:"client","onUpdate:modelValue":m[6]||(m[6]=v=>a.visibility=v)},null,512),[[He,a.visibility]]),m[9]||(m[9]=e("span",{class:"ml-2"},"Visible to Client",-1))]),e("label",Ol,[H(e("input",{type:"radio",class:"form-radio",value:"team","onUpdate:modelValue":m[7]||(m[7]=v=>a.visibility=v)},null,512),[[He,a.visibility]]),m[10]||(m[10]=e("span",{class:"ml-2"},"Visible to Team",-1))]),e("label",Kl,[H(e("input",{type:"radio",class:"form-radio",value:"private","onUpdate:modelValue":m[8]||(m[8]=v=>a.visibility=v)},null,512),[[He,a.visibility]]),m[11]||(m[11]=e("span",{class:"ml-2"},"Private",-1))])]),u(Q,{message:c.visibility?c.visibility[0]:"",class:"mt-2"},null,8,["message"])])])]),_:1},8,["show","apiEndpoint","formData"]))}},ql=Le(Hl,[["__scopeId","data-v-61f1e3a8"]]),Wl={key:0,class:"sidebar-wrapper"},Jl={class:"fixed inset-0 z-[100] flex pointer-events-none"},Yl={class:"flex items-center justify-between p-4 border-b border-gray-200 bg-white rounded-tl-xl sticky top-0 z-20"},Zl={class:"text-xl font-semibold text-gray-900"},Ql={class:"flex-1 overflow-y-auto p-6 scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-gray-300 scrollbar-track-gray-100"},Xl={key:1,class:"p-4 border-t border-gray-200 bg-white sticky bottom-0 z-20"},es={__name:"RightSidebar",props:{show:{type:Boolean,default:!1},title:{type:String,default:"Details"},initialWidth:{type:Number,default:50},minWidth:{type:Number,default:30},maxWidth:{type:Number,default:90}},emits:["close","update:show"],setup(s,{emit:r}){const l=s,o=r,a=$(l.initialWidth),x=$(!1),d=c=>{x.value=!0,document.addEventListener("pointermove",g),document.addEventListener("pointerup",p)},g=c=>{if(!x.value)return;const v=window.innerWidth,S=(v-c.clientX)/v*100,b=Math.max(l.minWidth,Math.min(l.maxWidth,S));a.value=b},p=()=>{x.value=!1,document.removeEventListener("pointermove",g),document.removeEventListener("pointerup",p)};ie(()=>l.show,c=>{c?document.body.style.overflow="hidden":document.body.style.overflow=""},{immediate:!0});const n=()=>{o("update:show",!1),o("close")},m=F(()=>window.innerWidth<768);return ie(m,c=>{c&&l.show?a.value=100:!c&&l.show&&(a.value=l.initialWidth)},{immediate:!0}),ie(()=>l.show,c=>{c&&(m.value?a.value=100:a.value=l.initialWidth)}),(c,v)=>(t(),V(Fa,{to:"body"},[u(pa,{"enter-active-class":"transition ease-out duration-300 transform","enter-from-class":"translate-x-full","enter-to-class":"translate-x-0","leave-active-class":"transition ease-in duration-200 transform","leave-from-class":"translate-x-0","leave-to-class":"translate-x-full"},{default:w(()=>[s.show?(t(),i("div",Wl,[e("div",{class:"fixed inset-0 bg-gray-900 bg-opacity-50 transition-opacity z-[99]",onClick:n}),e("div",Jl,[e("div",{class:"relative ml-auto h-full bg-white shadow-xl flex flex-col rounded-l-xl pointer-events-auto",style:Ra({width:m.value?"100%":`${a.value}vw`})},[m.value?G("",!0):(t(),i("div",{key:0,class:"absolute left-0 top-0 h-full w-2 cursor-col-resize -ml-1 z-10",onPointerdown:d,title:"Drag to resize"},null,32)),e("div",Yl,[e("h3",Zl,I(s.title),1),e("button",{onClick:n,class:"text-gray-400 hover:text-gray-600 transition-colors"},v[0]||(v[0]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("div",Ql,[be(c.$slots,"content",{},void 0,!0)]),c.$slots.footer?(t(),i("div",Xl,[be(c.$slots,"footer",{},void 0,!0)])):G("",!0)],4)])])):G("",!0)]),_:3})]))}},ya=Le(es,[["__scopeId","data-v-2d864577"]]),as={class:"flex border-b border-gray-200"},ts={key:0,class:"ml-2 px-2 py-1 text-xs font-bold bg-red-600 text-white rounded-full"},ls={class:"p-4 space-y-2 overflow-y-auto"},ss={key:0,class:"p-6 text-center text-gray-500"},os={key:0},is={key:1},rs=["onClick"],ns={class:"flex-1 min-w-0"},us={class:"flex items-start justify-between gap-2 mb-1"},ds={class:"flex-1 min-w-0"},cs={key:0,class:"text-base font-semibold text-gray-900 truncate"},ms={key:1,class:"text-xs text-gray-500"},vs={key:0,class:"text-sm text-gray-600 mt-1 mb-2"},ps={class:"flex items-center text-xs text-gray-500 font-medium"},fs={key:0},gs={key:1,class:"mx-2"},bs={key:2},hs={__name:"NotificationsSidebar",setup(s){const r=F(()=>Ve.value.notifications),l=$("New"),o=F(()=>l.value==="New"?r.value.filter(g=>!g.isRead):r.value),a=async g=>{await ca(g.view_id);const p=g.task_id||x(g.url),n=g.project_id||d(g.url);p&&n?(ma(p,n),ta()):(console.warn("Could not open task sidebar. Falling back to opening URL in new tab."),g.url&&window.open(g.url,"_blank"))},x=g=>{const p=g.match(/\/task\/(\d+)/);return p?parseInt(p[1]):null},d=g=>{const p=g.match(/\/project\/(\d+)\//);return p?parseInt(p[1]):null};return(g,p)=>(t(),V(ya,{show:z(Ve).show,"onUpdate:show":z(ta),title:"Notifications","initial-width":35,class:"z-[100]"},{content:w(()=>[e("div",as,[e("button",{onClick:p[0]||(p[0]=n=>l.value="New"),class:J([{"border-blue-600 text-blue-600 font-semibold":l.value==="New","border-transparent text-gray-500 hover:text-gray-700":l.value!=="New"},"flex-1 py-4 px-1 text-center text-sm border-b-2 transition-colors duration-200"])},[p[2]||(p[2]=M(" New ",-1)),r.value.filter(n=>!n.isRead).length>0?(t(),i("span",ts,I(r.value.filter(n=>!n.isRead).length),1)):G("",!0)],2),e("button",{onClick:p[1]||(p[1]=n=>l.value="All"),class:J([{"border-blue-600 text-blue-600 font-semibold":l.value==="All","border-transparent text-gray-500 hover:text-gray-700":l.value!=="All"},"flex-1 py-4 px-1 text-center text-sm border-b-2 transition-colors duration-200"])}," All ",2)]),e("div",ls,[o.value.length===0?(t(),i("div",ss,[l.value==="New"?(t(),i("span",os,"You have no new notifications.")):(t(),i("span",is,"You have no notifications."))])):G("",!0),(t(!0),i(X,null,te(o.value,n=>(t(),i("div",{key:n.id,class:J(["bg-white rounded-xl shadow-sm p-4 flex items-start space-x-4 border border-gray-200 transition-all duration-200 hover:shadow-md cursor-pointer",{"bg-gray-50":n.isRead}]),onClick:m=>a(n)},[e("div",ns,[e("div",us,[e("div",ds,[n.title?(t(),i("h3",cs,I(n.title),1)):G("",!0),n.project_name?(t(),i("p",ms,I(n.project_name),1)):G("",!0)])]),n.message?(t(),i("p",vs,I(n.message),1)):G("",!0),e("div",ps,[n.due_date?(t(),i("span",fs,"Due: "+I(z(da)(n.due_date)),1)):G("",!0),n.due_date&&n.priority?(t(),i("span",gs,"")):G("",!0),n.priority?(t(),i("span",bs,"Priority: "+I(n.priority),1)):G("",!0)])])],10,rs))),128))])]),_:1},8,["show","onUpdate:show"]))}},ys={class:"space-y-4"},ks={key:0,class:"text-red-600 text-xs mt-1"},ws={key:0,class:"text-red-600 text-xs mt-1"},As={key:0,class:"text-red-600 text-xs mt-1"},xs={__name:"KudoModal",props:{show:{type:Boolean,default:!1}},emits:["close","submitted"],setup(s,{emit:r}){const l=r,o=$([]),a=$([]),x=Ce({recipient_id:"",project_id:"",comment:""}),d=$({}),g=async()=>{try{const{data:c}=await window.axios.get("/api/projects-simplified");o.value=(c||[]).map(v=>({value:v.id,label:v.name}))}catch{o.value=[]}},p=async c=>{if(a.value=[],!!c)try{const{data:v}=await window.axios.get(`/api/projects/${c}/users`);a.value=(v||[]).map(T=>({value:T.id,label:`${T.name} (${T.email})`}))}catch{a.value=[]}};ie(()=>x.project_id,c=>{c&&p(c)}),fe(()=>{g()});const n=()=>{x.recipient_id="",x.project_id="",x.comment="",d.value={}},m=c=>{n(),l("submitted",c)};return(c,v)=>(t(),V($e,{show:s.show,title:"Give a Kudo ","api-endpoint":"/api/kudos","http-method":"post","form-data":x,"submit-button-text":"Submit Kudo","success-message":"Kudo submitted! Pending approval.",onClose:v[3]||(v[3]=T=>c.$emit("close")),onSubmitted:m},{default:w(({errors:T})=>[e("div",ys,[e("div",null,[v[4]||(v[4]=e("label",{class:"block text-sm font-medium text-gray-700"},"Project",-1)),u(de,{options:o.value,modelValue:x.project_id,"onUpdate:modelValue":v[0]||(v[0]=S=>x.project_id=S),placeholder:"Select a project..."},null,8,["options","modelValue"]),T.project_id?(t(),i("p",ks,I(T.project_id[0]),1)):G("",!0)]),e("div",null,[v[5]||(v[5]=e("label",{class:"block text-sm font-medium text-gray-700"},"Recipient",-1)),u(de,{options:a.value,modelValue:x.recipient_id,"onUpdate:modelValue":v[1]||(v[1]=S=>x.recipient_id=S),placeholder:"Select a teammate..."},null,8,["options","modelValue"]),T.recipient_id?(t(),i("p",ws,I(T.recipient_id[0]),1)):G("",!0)]),e("div",null,[v[6]||(v[6]=e("label",{class:"block text-sm font-medium text-gray-700"},"Comment",-1)),H(e("textarea",{"onUpdate:modelValue":v[2]||(v[2]=S=>x.comment=S),rows:"4",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",placeholder:"e.g., Thank you for helping with the last-minute changes!"},null,512),[[ve,x.comment]]),T.comment?(t(),i("p",As,I(T.comment[0]),1)):G("",!0)])])]),_:1},8,["show","form-data"]))}},_s={class:"flex items-center p-4 h-16 border-b border-gray-700"},Ts={key:0,class:"text-xl font-semibold flex-1 truncate"},Ms=["title"],Gs={key:0,class:"p-4 border-b border-gray-700"},Cs={class:"relative"},$s={key:1,class:"flex-1 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-500 scrollbar-track-gray-700 p-4"},Ss={key:0,class:"mb-4"},Ps={class:"ml-2 mt-2 space-y-1"},js=["onClick"],Es={class:"text-sm font-medium text-gray-300 truncate"},Is={class:"ml-4 mt-1 space-y-1"},Ds={class:"truncate"},Bs={key:1,class:"mb-4"},Vs={class:"ml-2 mt-2 space-y-1"},Ns=["onClick"],Ls={class:"text-sm font-medium text-gray-300 truncate"},Us={class:"ml-4 mt-1 space-y-1"},zs={class:"truncate"},Rs={key:2,class:"mb-4"},Fs={class:"ml-2 mt-2 space-y-1"},Os={class:"truncate"},Ks={key:3,class:"mb-4"},Hs={class:"ml-2 mt-2 space-y-1"},qs={class:"truncate"},Ws={key:4,class:"text-gray-400 text-sm text-center py-4"},Js={key:5,class:"text-gray-400 text-sm text-center py-4"},Ys={key:2,class:"flex flex-col items-center pt-4 space-y-4"},Zs={key:0,class:"text-gray-400 text-xs text-center px-2"},Qs={__name:"LeftSidebar",props:{allProjects:{type:Array,default:()=>[]},activeProjectId:{type:Number,default:null}},emits:["project-selected"],setup(s,{emit:r}){const l=s,o=r,a=$(localStorage.getItem("leftSidebarCollapsed")!=="false"),x=$(""),d=$({}),g=F(()=>{const h=new Set;return l.allProjects.forEach(y=>{y.project_type&&h.add(y.project_type)}),Array.from(h).sort()}),p=F(()=>{const h=new Set;return l.allProjects.forEach(y=>{Array.isArray(y.tags)&&y.tags.forEach(A=>h.add(A))}),Array.from(h).sort()}),n=F(()=>{if(!x.value)return l.allProjects;const h=x.value.toLowerCase();return l.allProjects.filter(y=>{var A,_,L;return y.name.toLowerCase().includes(h)||((A=y.description)==null?void 0:A.toLowerCase().includes(h))||((_=y.project_type)==null?void 0:_.toLowerCase().includes(h))||Array.isArray(y.tags)&&y.tags.some(Y=>Y.toLowerCase().includes(h))||((L=y.status)==null?void 0:L.toLowerCase().includes(h))})}),m=F(()=>{const h={};n.value.forEach(y=>{y.project_type&&y.status==="active"&&(h[y.project_type]||(h[y.project_type]=[]),h[y.project_type].push(y))});for(const y in h)h[y].sort((A,_)=>A.name.localeCompare(_.name));return h}),c=F(()=>{const h={};n.value.forEach(y=>{Array.isArray(y.tags)&&y.tags.length>0&&y.tags.forEach(A=>{h[A]||(h[A]=[]),h[A].push(y)})});for(const y in h)h[y]=[...new Set(h[y])].sort((A,_)=>A.name.localeCompare(_.name));return h}),v=F(()=>n.value.filter(h=>h.status!=="active").sort((h,y)=>h.name.localeCompare(y.name))),T=F(()=>n.value.filter(h=>!h.project_type&&(!Array.isArray(h.tags)||h.tags.length===0)).sort((h,y)=>h.name.localeCompare(y.name)));ie(()=>l.allProjects,()=>{g.value.forEach(h=>{const y=`type-${h}`;d.value[y]===void 0&&(d.value[y]=!0)}),p.value.forEach(h=>{const y=`tag-${h}`;d.value[y]===void 0&&(d.value[y]=!0)}),d.value["main-types"]===void 0&&(d.value["main-types"]=!1),d.value["main-tags"]===void 0&&(d.value["main-tags"]=!1),d.value["inactive-projects"]===void 0&&(d.value["inactive-projects"]=!1),d.value.uncategorized===void 0&&(d.value.uncategorized=!1)},{immediate:!0}),ie(a,h=>{localStorage.setItem("leftSidebarCollapsed",h)});const S=()=>{a.value=!a.value},b=h=>{d.value[h]=!d.value[h]},q=h=>{o("project-selected",h)},D=()=>{x.value=""};return(h,y)=>(t(),i("div",{class:J({"w-64":!a.value,"w-16":a.value,"min-w-16":!0,"bg-gray-800 text-white flex flex-col transition-all duration-300 ease-in-out shrink-0 h-screen overflow-hidden":!0})},[e("div",_s,[a.value?G("",!0):(t(),i("h2",Ts,"Projects")),e("button",{onClick:S,class:"p-2 rounded-full hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500",title:a.value?"Expand Sidebar":"Collapse Sidebar"},[(t(),i("svg",{class:J(["w-6 h-6 text-gray-400 transform transition-transform duration-300",{"rotate-180":a.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},y[5]||(y[5]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"},null,-1)]),2))],8,Ms)]),a.value?G("",!0):(t(),i("div",Gs,[e("div",Cs,[H(e("input",{type:"text","onUpdate:modelValue":y[0]||(y[0]=A=>x.value=A),placeholder:"Search all projects...",class:"w-full p-2 rounded-md bg-gray-700 border border-gray-600 text-white placeholder-gray-400 focus:ring-indigo-500 focus:border-indigo-500 text-sm"},null,512),[[ve,x.value]]),x.value?(t(),i("button",{key:0,onClick:D,class:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-200",title:"Clear search"},y[6]||(y[6]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))):G("",!0)])])),a.value?(t(),i("div",Ys,[(t(!0),i(X,null,te(l.allProjects,A=>(t(),V(z(ge),{key:A.id,href:h.route("projects.show",A.id),onClick:_=>q(A.id),class:J({"w-10 h-10 rounded-full flex items-center justify-center text-xs font-bold transition-all duration-200":!0,"bg-indigo-600 text-white":A.id===s.activeProjectId,"bg-gray-700 text-gray-300 hover:bg-gray-600":A.id!==s.activeProjectId}),title:A.name},{default:w(()=>[M(I(A.name.charAt(0).toUpperCase()),1)]),_:2},1032,["href","onClick","class","title"]))),128)),s.allProjects.length===0?(t(),i("div",Zs," No Projects ")):G("",!0)])):(t(),i("div",$s,[Object.keys(m.value).length>0?(t(),i("div",Ss,[e("div",{class:"flex items-center justify-between cursor-pointer py-2 hover:bg-gray-700 rounded-md px-2",onClick:y[1]||(y[1]=A=>b("main-types"))},[y[8]||(y[8]=e("h3",{class:"text-sm font-semibold text-gray-400"},"Active Projects by Type",-1)),(t(),i("svg",{class:J(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!d.value["main-types"]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},y[7]||(y[7]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))]),H(e("div",Ps,[(t(!0),i(X,null,te(m.value,(A,_)=>(t(),i("div",{key:_},[e("div",{class:"flex items-center justify-between cursor-pointer py-1 hover:bg-gray-700 rounded-md px-2",onClick:L=>b(`type-${_}`)},[e("h4",Es,I(_),1),(t(),i("svg",{class:J(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!d.value[`type-${_}`]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},y[9]||(y[9]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))],8,js),H(e("ul",Is,[(t(!0),i(X,null,te(A,L=>(t(),i("li",{key:L.id},[u(z(ge),{href:h.route("projects.show",L.id),onClick:Y=>q(L.id),class:J({"block w-full text-left px-3 py-2 rounded-md transition-colors":!0,"bg-indigo-600 text-white":L.id===s.activeProjectId,"hover:bg-gray-700 text-gray-200":L.id!==s.activeProjectId,"font-bold":L.id===s.activeProjectId})},{default:w(()=>[e("span",Ds,I(L.name),1)]),_:2},1032,["href","onClick","class"])]))),128))],512),[[Ae,!d.value[`type-${_}`]]])]))),128))],512),[[Ae,!d.value["main-types"]]])])):G("",!0),Object.keys(c.value).length>0?(t(),i("div",Bs,[e("div",{class:"flex items-center justify-between cursor-pointer py-2 hover:bg-gray-700 rounded-md px-2",onClick:y[2]||(y[2]=A=>b("main-tags"))},[y[11]||(y[11]=e("h3",{class:"text-sm font-semibold text-gray-400"},"Projects by Tag",-1)),(t(),i("svg",{class:J(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!d.value["main-tags"]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},y[10]||(y[10]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))]),H(e("div",Vs,[(t(!0),i(X,null,te(c.value,(A,_)=>(t(),i("div",{key:_},[e("div",{class:"flex items-center justify-between cursor-pointer py-1 hover:bg-gray-700 rounded-md px-2",onClick:L=>b(`tag-${_}`)},[e("h4",Ls,I(_),1),(t(),i("svg",{class:J(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!d.value[`tag-${_}`]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},y[12]||(y[12]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))],8,Ns),H(e("ul",Us,[(t(!0),i(X,null,te(A,L=>(t(),i("li",{key:L.id},[u(z(ge),{href:h.route("projects.show",L.id),onClick:Y=>q(L.id),class:J({"block w-full text-left px-3 py-2 rounded-md transition-colors":!0,"bg-indigo-600 text-white":L.id===s.activeProjectId,"hover:bg-gray-700 text-gray-200":L.id!==s.activeProjectId,"font-bold":L.id===s.activeProjectId})},{default:w(()=>[e("span",zs,I(L.name),1)]),_:2},1032,["href","onClick","class"])]))),128))],512),[[Ae,!d.value[`tag-${_}`]]])]))),128))],512),[[Ae,!d.value["main-tags"]]])])):G("",!0),v.value.length>0?(t(),i("div",Rs,[e("div",{class:"flex items-center justify-between cursor-pointer py-2 hover:bg-gray-700 rounded-md px-2",onClick:y[3]||(y[3]=A=>b("inactive-projects"))},[y[14]||(y[14]=e("h3",{class:"text-sm font-semibold text-gray-400"},"Inactive Projects",-1)),(t(),i("svg",{class:J(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!d.value["inactive-projects"]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},y[13]||(y[13]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))]),H(e("ul",Fs,[(t(!0),i(X,null,te(v.value,A=>(t(),i("li",{key:A.id},[u(z(ge),{href:h.route("projects.show",A.id),onClick:_=>q(A.id),class:J({"block w-full text-left px-3 py-2 rounded-md transition-colors":!0,"bg-indigo-600 text-white":A.id===s.activeProjectId,"hover:bg-gray-700 text-gray-200":A.id!==s.activeProjectId,"font-bold":A.id===s.activeProjectId})},{default:w(()=>[e("span",Os,I(A.name)+" ("+I(A.status.replace("_"," "))+")",1)]),_:2},1032,["href","onClick","class"])]))),128))],512),[[Ae,!d.value["inactive-projects"]]])])):G("",!0),T.value.length>0?(t(),i("div",Ks,[e("div",{class:"flex items-center justify-between cursor-pointer py-2 hover:bg-gray-700 rounded-md px-2",onClick:y[4]||(y[4]=A=>b("uncategorized"))},[y[16]||(y[16]=e("h3",{class:"text-sm font-semibold text-gray-400"},"Uncategorized",-1)),(t(),i("svg",{class:J(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!d.value.uncategorized}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},y[15]||(y[15]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))]),H(e("ul",Hs,[(t(!0),i(X,null,te(T.value,A=>(t(),i("li",{key:A.id},[u(z(ge),{href:h.route("projects.show",A.id),onClick:_=>q(A.id),class:J({"block w-full text-left px-3 py-2 rounded-md transition-colors":!0,"bg-indigo-600 text-white":A.id===s.activeProjectId,"hover:bg-gray-700 text-gray-200":A.id!==s.activeProjectId,"font-bold":A.id===s.activeProjectId})},{default:w(()=>[e("span",qs,I(A.name),1)]),_:2},1032,["href","onClick","class"])]))),128))],512),[[Ae,!d.value.uncategorized]])])):G("",!0),n.value.length===0?(t(),i("div",Ws," No projects found matching your search. ")):s.allProjects.length===0&&!x.value?(t(),i("div",Js," No projects available. ")):G("",!0)]))],2))}},Xs=Le(Qs,[["__scopeId","data-v-417d431f"]]),eo={class:"relative"},ea={__name:"Dropdown",props:{align:{type:String,default:"right"},width:{type:String,default:"48"},contentClasses:{type:String,default:"py-1 bg-white"}},setup(s){const r=s,l=g=>{d.value&&g.key==="Escape"&&(d.value=!1)};fe(()=>document.addEventListener("keydown",l)),Fe(()=>document.removeEventListener("keydown",l));const o=F(()=>{const g={48:"w-48",64:"w-64",72:"w-72",80:"w-80",96:"w-96",full:"w-full",screen:"w-screen",auto:""},p=r.width.toString();return g[p]??g[48]}),a=F(()=>r.width.toString()==="screen"),x=F(()=>r.align==="left"?"ltr:origin-top-left rtl:origin-top-right start-0":r.align==="right"?"ltr:origin-top-right rtl:origin-top-left end-0":"origin-top"),d=$(!1);return(g,p)=>(t(),i("div",eo,[e("div",{onClick:p[0]||(p[0]=n=>d.value=!d.value)},[be(g.$slots,"trigger")]),H(e("div",{class:"fixed inset-0 z-40",onClick:p[1]||(p[1]=n=>d.value=!1)},null,512),[[Ae,d.value]]),u(pa,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:w(()=>[H(e("div",{class:J(["z-50 mt-2 rounded-md shadow-lg",a.value?"fixed left-0 right-0":"absolute",x.value,o.value]),style:{display:"none"},onClick:p[2]||(p[2]=n=>d.value=!1)},[e("div",{class:J(["rounded-md ring-1 ring-black ring-opacity-5",s.contentClasses])},[be(g.$slots,"content")],2)],2),[[Ae,d.value]])]),_:3})]))}},ae={__name:"DropdownLink",props:{href:{type:String,required:!0},method:{type:String,default:"get"},as:{type:String,default:"a"}},setup(s){return(r,l)=>(t(),V(z(ge),fa({href:s.href,method:s.method,as:s.as},r.$attrs,{class:"block w-full px-4 py-2 text-start text-sm leading-5 text-gray-700 transition duration-150 ease-in-out hover:bg-gray-100 focus:bg-gray-100 focus:outline-none"}),{default:w(()=>[be(r.$slots,"default")]),_:3},16,["href","method","as"]))}},me={__name:"NavLink",props:{href:{type:String,required:!0},active:{type:Boolean}},setup(s){const r=s,l=F(()=>r.active?"inline-flex items-center px-1 pt-1 border-b-2 border-indigo-400 text-sm font-medium leading-5 text-gray-900 focus:outline-none focus:border-indigo-700 transition duration-150 ease-in-out":"inline-flex items-center px-1 pt-1 border-b-2 border-transparent text-sm font-medium leading-5 text-gray-500 hover:text-gray-700 hover:border-gray-300 focus:outline-none focus:text-gray-700 focus:border-gray-300 transition duration-150 ease-in-out");return(o,a)=>(t(),V(z(ge),{href:s.href,class:J(l.value)},{default:w(()=>[be(o.$slots,"default")]),_:3},8,["href","class"]))}};/**
 * @license lucide-vue-next v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ia=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ao=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(r,l,o)=>o?o.toUpperCase():l.toLowerCase()),to=s=>{const r=ao(s);return r.charAt(0).toUpperCase()+r.slice(1)},lo=(...s)=>s.filter((r,l,o)=>!!r&&r.trim()!==""&&o.indexOf(r)===l).join(" ").trim(),ra=s=>s==="";/**
 * @license lucide-vue-next v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var De={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};/**
 * @license lucide-vue-next v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const so=({name:s,iconNode:r,absoluteStrokeWidth:l,"absolute-stroke-width":o,strokeWidth:a,"stroke-width":x,size:d=De.width,color:g=De.stroke,...p},{slots:n})=>Ye("svg",{...De,...p,width:d,height:d,stroke:g,"stroke-width":ra(l)||ra(o)||l===!0||o===!0?Number(a||x||De["stroke-width"])*24/Number(d):a||x||De["stroke-width"],class:lo("lucide",p.class,...s?[`lucide-${ia(to(s))}-icon`,`lucide-${ia(s)}`]:["lucide-icon"])},[...r.map(m=>Ye(...m)),...n.default?[n.default()]:[]]);/**
 * @license lucide-vue-next v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=(s,r)=>(l,{slots:o,attrs:a})=>Ye(so,{...a,...l,iconNode:r,name:s},o);/**
 * @license lucide-vue-next v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oo=Oe("award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-vue-next v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const io=Oe("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);/**
 * @license lucide-vue-next v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const na=Oe("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-vue-next v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ro=Oe("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),no={class:"hidden sm:flex sm:items-center"},uo={class:"mx-auto w-full max-w-6xl"},co={class:"grid grid-cols-2 md:grid-cols-4 gap-8"},mo={class:"space-y-1"},vo={class:"space-y-1"},po={class:"space-y-1"},fo={class:"space-y-1"},go={__name:"AdminDropdown",setup(s){return(r,l)=>{const o=ga("permission");return t(),i("div",no,[u(ea,{align:"left",width:"screen","content-classes":"py-6 bg-white p-6 w-full shadow-lg"},{trigger:w(()=>l[0]||(l[0]=[e("span",{class:"inline-flex rounded-md"},[e("button",{type:"button",class:"inline-flex items-center rounded-md border border-transparent bg-white px-3 py-2 text-sm font-medium leading-4 text-gray-700 hover:text-gray-900 focus:outline-none"},[M(" Admin "),e("svg",{class:"ms-2 -me-0.5 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])])],-1)])),content:w(()=>[e("div",uo,[e("div",co,[e("div",null,[l[6]||(l[6]=e("h4",{class:"text-xs font-semibold uppercase tracking-wider text-gray-500 mb-3"},"Management",-1)),e("div",mo,[H((t(),V(ae,{href:r.route("projects.index"),active:r.route().current("projects.index"),class:"!px-2 !py-1.5"},{default:w(()=>l[1]||(l[1]=[M("Projects",-1)])),_:1,__:[1]},8,["href","active"])),[[o,"manage_projects"]]),H((t(),V(ae,{href:r.route("clients.page"),active:r.route().current("clients.page"),class:"!px-2 !py-1.5"},{default:w(()=>l[2]||(l[2]=[M("Clients",-1)])),_:1,__:[2]},8,["href","active"])),[[o,"create_clients"]]),H((t(),V(ae,{href:r.route("users.page"),active:r.route().current("users.page"),class:"!px-2 !py-1.5"},{default:w(()=>l[3]||(l[3]=[M("Users",-1)])),_:1,__:[3]},8,["href","active"])),[[o,"create_users"]]),H((t(),V(ae,{href:r.route("leads.page"),active:r.route().current("leads.page"),class:"!px-2 !py-1.5"},{default:w(()=>l[4]||(l[4]=[M("Leads",-1)])),_:1,__:[4]},8,["href","active"])),[[o,"manage_projects"]]),H((t(),V(ae,{href:"/campaigns",active:r.$page.url&&r.$page.url.startsWith("/campaigns"),class:"!px-2 !py-1.5"},{default:w(()=>l[5]||(l[5]=[M("Campaigns",-1)])),_:1,__:[5]},8,["active"])),[[o,"manage_projects"]])])]),e("div",null,[l[10]||(l[10]=e("h4",{class:"text-xs font-semibold uppercase tracking-wider text-gray-500 mb-3"},"Planning / Sharing",-1)),e("div",vo,[H((t(),V(ae,{href:r.route("availability.index"),active:r.route().current("availability.index"),class:"!px-2 !py-1.5"},{default:w(()=>l[7]||(l[7]=[M("Weekly Availability",-1)])),_:1,__:[7]},8,["href","active"])),[[o,"create_users"]]),H((t(),V(ae,{href:r.route("admin.notice-board.index"),class:"!px-2 !py-1.5"},{default:w(()=>l[8]||(l[8]=[M("Notice Board",-1)])),_:1,__:[8]},8,["href"])),[[o,"manage_notices"]]),H((t(),V(ae,{href:r.route("shareable-resources.page"),class:"!px-2 !py-1.5"},{default:w(()=>l[9]||(l[9]=[M("Shareable Resources",-1)])),_:1,__:[9]},8,["href"])),[[o,"view_shareable_resources"]])])]),e("div",null,[l[15]||(l[15]=e("h4",{class:"text-xs font-semibold uppercase tracking-wider text-gray-500 mb-3"},"Configuration",-1)),e("div",po,[H((t(),V(ae,{href:r.route("task-types.page"),active:r.route().current("task-types.page"),class:"!px-2 !py-1.5"},{default:w(()=>l[11]||(l[11]=[M("Task Types",-1)])),_:1,__:[11]},8,["href","active"])),[[o,"manage_projects"]]),H((t(),V(ae,{href:"/admin/project-tiers",class:"!px-2 !py-1.5"},{default:w(()=>l[12]||(l[12]=[M("Project Tiers",-1)])),_:1,__:[12]})),[[o,"view_project_tiers"]]),H((t(),V(ae,{href:r.route("email-templates.page"),active:r.route().current("email-templates.page"),class:"!px-2 !py-1.5"},{default:w(()=>l[13]||(l[13]=[M("Email Templates",-1)])),_:1,__:[13]},8,["href","active"])),[[o,"manage_email_templates"]]),H((t(),V(ae,{href:r.route("placeholder-definitions.page"),active:r.route().current("placeholder-definitions.page"),class:"!px-2 !py-1.5"},{default:w(()=>l[14]||(l[14]=[M("Placeholder Definitions",-1)])),_:1,__:[14]},8,["href","active"])),[[o,"manage_placeholder_definitions"]])])]),e("div",null,[l[20]||(l[20]=e("h4",{class:"text-xs font-semibold uppercase tracking-wider text-gray-500 mb-3"},"Access & Finance",-1)),e("div",fo,[H((t(),V(ae,{href:r.route("admin.roles.index"),class:"!px-2 !py-1.5"},{default:w(()=>l[16]||(l[16]=[M("Manage Roles",-1)])),_:1,__:[16]},8,["href"])),[[o,"manage_roles"]]),H((t(),V(ae,{href:r.route("admin.permissions.index"),class:"!px-2 !py-1.5"},{default:w(()=>l[17]||(l[17]=[M("Manage Permissions",-1)])),_:1,__:[17]},8,["href"])),[[o,"assign_permissions"]]),H((t(),V(ae,{href:"/admin/monthly-budgets",class:"!px-2 !py-1.5"},{default:w(()=>l[18]||(l[18]=[M("Monthly Budgets",-1)])),_:1,__:[18]})),[[o,"manage_monthly_budgets"]]),H((t(),V(ae,{href:"/admin/bonus-calculator",class:"!px-2 !py-1.5"},{default:w(()=>l[19]||(l[19]=[M("Bonus Calculator",-1)])),_:1,__:[19]})),[[o,"view_monthly_budgets"]])])])])])]),_:1})])}}},bo={class:"relative ms-3"},ho={class:"inline-flex rounded-md"},yo={type:"button",class:"inline-flex items-center rounded-md border border-transparent bg-white px-3 py-2 text-sm font-medium leading-4 text-gray-500 transition duration-150 ease-in-out hover:text-gray-700 focus:outline-none"},ko={__name:"UserDropdown",emits:["logoutSuccess","logoutError"],setup(s,{emit:r}){const l=F(()=>Ne().props.auth.user),o=r,a=()=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization,o("logoutSuccess")},x=d=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization,window.location.href="/login",o("logoutError",d)};return(d,g)=>(t(),i("div",bo,[u(ea,{align:"right",width:"48"},{trigger:w(()=>{var p;return[e("span",ho,[e("button",yo,[M(I(l.value.name)+" ("+I((p=l.value.role_data)==null?void 0:p.name)+") ",1),g[0]||(g[0]=e("svg",{class:"ms-2 -me-0.5 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1))])])]}),content:w(()=>[u(ae,{href:d.route("profile.edit")},{default:w(()=>g[1]||(g[1]=[M(" Profile ",-1)])),_:1,__:[1]},8,["href"]),u(ae,{href:d.route("logout"),method:"post",as:"button",onSuccess:a,onError:x},{default:w(()=>g[2]||(g[2]=[M(" Log Out ",-1)])),_:1,__:[2]},8,["href"])]),_:1})]))}},wo={class:"hidden sm:flex sm:items-center"},Ao={class:"mx-auto w-full max-w-6xl"},xo={class:"grid grid-cols-2 md:grid-cols-3 gap-8"},_o={class:"space-y-1"},To={class:"space-y-1"},Mo={key:0},Go={class:"space-y-1"},Co={__name:"BonusDropdown",setup(s){const{canDo:r}=Qe();return(l,o)=>(t(),i("div",wo,[u(ea,{align:"left",width:"screen","content-classes":"py-6 bg-white p-6 w-full shadow-lg"},{trigger:w(()=>o[0]||(o[0]=[e("span",{class:"inline-flex rounded-md"},[e("button",{type:"button",class:"inline-flex items-center rounded-md border border-transparent bg-white px-3 py-2 text-sm font-medium leading-4 text-gray-700 hover:text-gray-900 focus:outline-none"},[M(" Team Resources "),e("svg",{class:"ms-2 -me-0.5 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])])],-1)])),content:w(()=>[e("div",Ao,[e("div",xo,[e("div",null,[o[4]||(o[4]=e("h4",{class:"text-xs font-semibold uppercase tracking-wider text-gray-500 mb-3"},"Program",-1)),e("div",_o,[u(ae,{href:l.route("bonus-system.index"),active:l.route().current("bonus-system.index"),class:"!px-2 !py-1.5"},{default:w(()=>o[1]||(o[1]=[M("Bonus System",-1)])),_:1,__:[1]},8,["href","active"]),u(ae,{href:l.route("leaderboard.index"),active:l.route().current("leaderboard.index"),class:"!px-2 !py-1.5"},{default:w(()=>o[2]||(o[2]=[M("Leaderboard",-1)])),_:1,__:[2]},8,["href","active"]),u(ae,{href:l.route("kudos.index"),active:l.route().current("kudos.index"),class:"!px-2 !py-1.5"},{default:w(()=>o[3]||(o[3]=[M("Kudos",-1)])),_:1,__:[3]},8,["href","active"])])]),e("div",null,[o[7]||(o[7]=e("h4",{class:"text-xs font-semibold uppercase tracking-wider text-gray-500 mb-3"},"Valuable",-1)),e("div",To,[u(ae,{href:l.route("team-resources.page"),active:l.route().current("team-resources.page"),class:"!px-2 !py-1.5"},{default:w(()=>o[5]||(o[5]=[M("Resources",-1)])),_:1,__:[5]},8,["href","active"]),u(ae,{href:l.route("presentations.index"),active:l.route().current("presentations.index"),class:"!px-2 !py-1.5"},{default:w(()=>o[6]||(o[6]=[M("Presentation",-1)])),_:1,__:[6]},8,["href","active"])])]),z(r)("add_expendables").value?(t(),i("div",Mo,[o[9]||(o[9]=e("h4",{class:"text-xs font-semibold uppercase tracking-wider text-gray-500 mb-3"},"Management",-1)),e("div",Go,[z(r)("add_expendables").value?(t(),V(ae,{key:0,href:l.route("project-expendables.index"),class:"!px-2 !py-1.5"},{default:w(()=>o[8]||(o[8]=[M("Project Expendables",-1)])),_:1,__:[8]},8,["href"])):G("",!0)])])):G("",!0)])])]),_:1})]))}},$o={class:"bg-white z-[99] relative w-full shadow-sm border-b border-gray-100"},So={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Po={class:"flex h-16 justify-between items-center"},jo={class:"flex-shrink-0 flex items-center"},Eo={class:"hidden sm:flex items-center space-x-6"},Io={key:0,class:"group relative inline-flex items-center px-3 py-1 rounded-full bg-gradient-to-r from-green-400 to-emerald-500 text-white text-sm font-semibold shadow-lg ring-2 ring-emerald-300/60 transition-all duration-300 ease-in-out"},Do={class:"font-bold"},Bo={key:1,class:"inline-flex items-center px-3 py-1 rounded-full bg-gray-100 text-gray-500 text-sm font-medium"},Vo={key:0,class:"absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-red-100 transform translate-x-1/2 -translate-y-1/2 bg-red-600 rounded-full"},No={class:"-mr-2 flex items-center sm:hidden"},Lo={class:"h-6 w-6",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24"},Uo={class:"bg-gray-50 border-t border-gray-100 py-2 hidden sm:block"},zo={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Ro={class:"flex items-center justify-between"},Fo={class:"flex items-center space-x-2 overflow-x-auto no-scrollbar"},Oo={class:"flex items-center space-x-2 flex-shrink-0"},Ko={class:"space-y-1 pt-2 pb-3"},Ho={__name:"TopNavigation",props:{unreadNotificationCount:{type:Number,default:0}},emits:["openCreateTaskModal","openAddResource","openNotificationsSidebar","open-kudo-modal"],setup(s,{emit:r}){const l=r,o=$(!1);F(()=>Ne().props.auth.user);const{canDo:a}=Qe(),x=a("manage_projects"),d=a("create_users"),g=a("manage_roles"),p=a("manage_task_types"),n=a("create_clients"),m=F(()=>a("manage_project_tiers").value||a("view_project_tiers").value||a("create_project_tiers").value||a("edit_project_tiers").value),c=a("manage_notices"),v=a("manage_email_templates"),T=a("manage_placeholder_definitions"),S=a("manage_permissions"),b=a("manage_monthly_budgets"),q=a("view_monthly_budgets");F(()=>x.value||d.value||g.value||p.value||n.value||m.value||c.value||v.value||T.value||S.value||b.value||q.value);const D=$(null),h=$(!0),y=$(null);return fe(async()=>{try{const{data:A}=await window.axios.get("/api/leaderboard/stats");D.value=(A==null?void 0:A.userMonthlyPoints)??0}catch(A){console.error("Failed to load monthly points",A),y.value="Failed to load points",D.value=0}finally{h.value=!1}}),(A,_)=>{const L=ga("permission");return t(),i("nav",$o,[e("div",So,[e("div",Po,[e("div",jo,[u(z(ge),{href:A.route("dashboard")},{default:w(()=>[u(Za,{class:"block h-14 w-auto fill-current text-gray-800"})]),_:1},8,["href"])]),e("div",Eo,[u(z(ge),{href:A.route("leaderboard.index"),class:"mr-3 cursor-pointer"},{default:w(()=>[h.value?(t(),i("div",Bo," Loading... ")):(t(),i("div",Io,[_[5]||(_[5]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1.5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})],-1)),e("span",Do,I(D.value??0),1),_[6]||(_[6]=e("span",{class:"ml-1 text-white/80"},"pts",-1))]))]),_:1},8,["href"]),e("button",{onClick:_[0]||(_[0]=Y=>l("openNotificationsSidebar")),class:"relative flex-shrink-0 text-gray-400 hover:text-indigo-600 p-2 rounded-full transition-colors duration-200","aria-label":"View all notifications"},[u(z(io),{class:"h-6 w-6"}),s.unreadNotificationCount>0?(t(),i("span",Vo,I(s.unreadNotificationCount),1)):G("",!0)]),u(ko)]),e("div",No,[e("button",{onClick:_[1]||(_[1]=Y=>o.value=!o.value),class:"inline-flex items-center justify-center rounded-md p-2 text-gray-400 transition duration-150 ease-in-out hover:bg-gray-100 hover:text-gray-500 focus:bg-gray-100 focus:text-gray-500 focus:outline-none"},[(t(),i("svg",Lo,[e("path",{class:J({hidden:o.value,"inline-flex":!o.value}),"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},null,2),e("path",{class:J({hidden:!o.value,"inline-flex":o.value}),"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,2)]))])])])]),e("div",Uo,[e("div",zo,[e("div",Ro,[e("div",Fo,[u(me,{href:A.route("dashboard"),active:A.route().current("dashboard")},{default:w(()=>_[7]||(_[7]=[M(" Dashboard ",-1)])),_:1,__:[7]},8,["href","active"]),u(me,{href:A.route("inbox"),active:A.route().current("inbox")},{default:w(()=>_[8]||(_[8]=[M(" Inbox ",-1)])),_:1,__:[8]},8,["href","active"]),u(me,{href:A.route("workspace.index"),active:A.route().current("workspace.index")},{default:w(()=>_[9]||(_[9]=[M(" My Workspace ",-1)])),_:1,__:[9]},8,["href","active"]),u(Co),H(u(go,null,null,512),[[L,"view_admin_dropdown"]])]),e("div",Oo,[u(ne,{type:"button",onClick:_[2]||(_[2]=Y=>l("openCreateTaskModal")),class:"px-3 py-1.5 text-sm"},{default:w(()=>[u(z(na),{class:"h-4 w-4 mr-1.5"}),_[10]||(_[10]=e("span",null,"Add Task",-1))]),_:1,__:[10]}),u(ne,{type:"button",onClick:_[3]||(_[3]=Y=>l("openAddResource")),class:"px-3 py-1.5 text-sm"},{default:w(()=>[u(z(na),{class:"h-4 w-4 mr-1.5"}),_[11]||(_[11]=e("span",null,"Add Resource",-1))]),_:1,__:[11]}),z(a)("create_kudos")?(t(),i("button",{key:0,type:"button",onClick:_[4]||(_[4]=Y=>A.$emit("open-kudo-modal")),class:"inline-flex items-center justify-center px-3 py-1.5 text-sm font-semibold rounded-lg bg-orange-500 text-white hover:bg-orange-600 transition-colors duration-200"},[u(z(oo),{class:"h-4 w-4 mr-1.5"}),_[12]||(_[12]=e("span",null,"Give Kudo",-1))])):G("",!0)])])])]),e("div",{class:J([{block:o.value,hidden:!o.value},"sm:hidden"])},[e("div",Ko,[u(me,{href:A.route("dashboard"),active:A.route().current("dashboard")},{default:w(()=>_[13]||(_[13]=[M(" Dashboard ",-1)])),_:1,__:[13]},8,["href","active"]),u(me,{href:A.route("inbox"),active:A.route().current("inbox")},{default:w(()=>_[14]||(_[14]=[M(" Inbox ",-1)])),_:1,__:[14]},8,["href","active"]),u(me,{href:A.route("workspace.index"),active:A.route().current("workspace.index")},{default:w(()=>_[15]||(_[15]=[M(" My Workspace ",-1)])),_:1,__:[15]},8,["href","active"]),u(me,{href:A.route("presentations.index"),active:A.route().current("presentations.index")},{default:w(()=>_[16]||(_[16]=[M(" Presentation ",-1)])),_:1,__:[16]},8,["href","active"]),u(me,{href:A.route("bonus-system.index"),active:A.route().current("bonus-system.index")},{default:w(()=>_[17]||(_[17]=[M(" Bonus System ",-1)])),_:1,__:[17]},8,["href","active"]),u(me,{href:A.route("leaderboard.index"),active:A.route().current("leaderboard.index")},{default:w(()=>_[18]||(_[18]=[M(" Leaderboard ",-1)])),_:1,__:[18]},8,["href","active"]),u(me,{href:A.route("kudos.index"),active:A.route().current("kudos.index")},{default:w(()=>_[19]||(_[19]=[M(" Kudos ",-1)])),_:1,__:[19]},8,["href","active"]),H((t(),V(me,{href:A.route("project-expendables.index")},{default:w(()=>_[20]||(_[20]=[M(" Project Expendables ",-1)])),_:1,__:[20]},8,["href"])),[[L,"add_expendables"]])])],2)])}}},le={__name:"ResponsiveNavLink",props:{href:{type:String,required:!0},active:{type:Boolean},method:{type:String,default:"get"},as:{type:String,default:"a"}},setup(s){const r=s,l=F(()=>r.active?"block w-full ps-3 pe-4 py-2 border-l-4 border-indigo-400 text-start text-base font-medium text-indigo-700 bg-indigo-50 focus:outline-none focus:text-indigo-800 focus:bg-indigo-100 focus:border-indigo-700 transition duration-150 ease-in-out":"block w-full ps-3 pe-4 py-2 border-l-4 border-transparent text-start text-base font-medium text-gray-600 hover:text-gray-800 hover:bg-gray-50 hover:border-gray-300 focus:outline-none focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300 transition duration-150 ease-in-out");return(o,a)=>(t(),V(z(ge),fa({href:s.href,method:s.method,as:s.as},o.$attrs,{class:l.value}),{default:w(()=>[be(o.$slots,"default")]),_:3},16,["href","method","as","class"]))}},qo={class:"space-y-1 pb-3 pt-2"},Wo={key:0,class:"mt-3 space-y-1"},Jo={class:"border-t border-gray-200 pb-1 pt-4"},Yo={class:"px-4"},Zo={class:"text-base font-medium text-gray-800"},Qo={class:"text-sm font-medium text-gray-500"},Xo={class:"text-sm font-medium text-gray-500 capitalize"},ei={class:"mt-3 space-y-1"},ai={__name:"MobileNavigation",props:{showingNavigationDropdown:{type:Boolean,required:!0},unreadNotificationCount:{type:Number,default:0}},emits:["openCreateTaskModal","openAddResource","openNotificationsSidebar","logoutSuccess","logoutError"],setup(s,{emit:r}){const l=r,o=F(()=>Ne().props.auth.user),{canDo:a}=Qe(),x=a("manage_projects"),d=a("compose_emails"),g=a("approve_emails"),p=a("create_users"),n=a("manage_roles"),m=a("manage_task_types"),c=a("create_clients"),v=()=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization,l("logoutSuccess")},T=S=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization,window.location.href="/login",l("logoutError",S)};return(S,b)=>{var q;return t(),i("div",{class:J([{block:s.showingNavigationDropdown,hidden:!s.showingNavigationDropdown},"sm:hidden"])},[e("div",qo,[z(n)?(t(),i("div",Wo,[b[19]||(b[19]=e("div",{class:"px-4 font-medium text-base text-gray-800"},"Admin",-1)),u(le,{href:S.route("dashboard"),active:S.route().current("dashboard")},{default:w(()=>b[3]||(b[3]=[M(" Dashboard ",-1)])),_:1,__:[3]},8,["href","active"]),z(a)("view_emails")?(t(),V(le,{key:0,href:S.route("inbox"),active:S.route().current("inbox")},{default:w(()=>b[4]||(b[4]=[M(" Inbox ",-1)])),_:1,__:[4]},8,["href","active"])):G("",!0),z(c)?(t(),V(le,{key:1,href:S.route("clients.page"),active:S.route().current("clients.page")},{default:w(()=>b[5]||(b[5]=[M(" Clients ",-1)])),_:1,__:[5]},8,["href","active"])):G("",!0),z(x)?(t(),V(le,{key:2,href:S.route("projects.index"),active:S.route().current("projects.index")},{default:w(()=>b[6]||(b[6]=[M(" Projects ",-1)])),_:1,__:[6]},8,["href","active"])):G("",!0),z(p)?(t(),V(le,{key:3,href:S.route("users.page"),active:S.route().current("users.page")},{default:w(()=>b[7]||(b[7]=[M(" Users ",-1)])),_:1,__:[7]},8,["href","active"])):G("",!0),z(d)?(t(),V(le,{key:4,href:S.route("emails.compose"),active:S.route().current("emails.compose")},{default:w(()=>b[8]||(b[8]=[M(" Compose Email ",-1)])),_:1,__:[8]},8,["href","active"])):G("",!0),z(g)?(t(),V(le,{key:5,href:S.route("emails.pending"),active:S.route().current("emails.pending")},{default:w(()=>b[9]||(b[9]=[M(" Approve Emails ",-1)])),_:1,__:[9]},8,["href","active"])):G("",!0),z(d)?(t(),V(le,{key:6,href:S.route("emails.rejected"),active:S.route().current("emails.rejected")},{default:w(()=>b[10]||(b[10]=[M(" Rejected Emails ",-1)])),_:1,__:[10]},8,["href","active"])):G("",!0),z(p)?(t(),V(le,{key:7,href:S.route("availability.index"),active:S.route().current("availability.index")},{default:w(()=>b[11]||(b[11]=[M(" Weekly Availability ",-1)])),_:1,__:[11]},8,["href","active"])):G("",!0),z(a)("manage_roles")?(t(),V(le,{key:8,href:S.route("admin.roles.index"),active:S.route().current("admin.roles.index")},{default:w(()=>b[12]||(b[12]=[M(" Manage Roles ",-1)])),_:1,__:[12]},8,["href","active"])):G("",!0),z(a)("manage_permissions")?(t(),V(le,{key:9,href:S.route("admin.permissions.index"),active:S.route().current("admin.permissions.index")},{default:w(()=>b[13]||(b[13]=[M(" Manage Permissions ",-1)])),_:1,__:[13]},8,["href","active"])):G("",!0),z(m)?(t(),V(le,{key:10,href:S.route("task-types.page"),active:S.route().current("task-types.page")},{default:w(()=>b[14]||(b[14]=[M(" Task Types ",-1)])),_:1,__:[14]},8,["href","active"])):G("",!0),z(a)("manage_email_templates")?(t(),V(le,{key:11,href:S.route("email-templates.page"),active:S.route().current("email-templates.page")},{default:w(()=>b[15]||(b[15]=[M(" Email Templates ",-1)])),_:1,__:[15]},8,["href","active"])):G("",!0),z(a)("manage_placeholder_definitions")?(t(),V(le,{key:12,href:S.route("placeholder-definitions.page"),active:S.route().current("placeholder-definitions.page")},{default:w(()=>b[16]||(b[16]=[M(" Placeholder Definitions ",-1)])),_:1,__:[16]},8,["href","active"])):G("",!0),z(a)("view_shareable_resources")?(t(),V(le,{key:13,href:S.route("shareable-resources.page"),active:S.route().current("shareable-resources.page")},{default:w(()=>b[17]||(b[17]=[M(" Shareable Resources ",-1)])),_:1,__:[17]},8,["href","active"])):G("",!0),z(a)("view_shareable_resources")?(t(),V(le,{key:14,href:S.route("team-resources.page"),active:S.route().current("team-resources.page")},{default:w(()=>b[18]||(b[18]=[M(" Team Resources ",-1)])),_:1,__:[18]},8,["href","active"])):G("",!0)])):G("",!0)]),e("div",Jo,[e("div",Yo,[e("div",Zo,I(o.value.name),1),e("div",Qo,I(o.value.email),1),e("div",Xo,I((q=o.value.role_data)==null?void 0:q.name),1)]),e("div",ei,[u(le,{as:"button",onClick:b[0]||(b[0]=D=>l("openCreateTaskModal"))},{default:w(()=>b[20]||(b[20]=[M(" Add Task ",-1)])),_:1,__:[20]}),u(le,{as:"button",onClick:b[1]||(b[1]=D=>l("openAddResource"))},{default:w(()=>b[21]||(b[21]=[M(" Add Resource ",-1)])),_:1,__:[21]}),u(le,{as:"button",onClick:b[2]||(b[2]=D=>l("openNotificationsSidebar"))},{default:w(()=>[M(" Notifications ("+I(s.unreadNotificationCount)+") ",1)]),_:1}),u(le,{href:S.route("profile.edit")},{default:w(()=>b[22]||(b[22]=[M(" Profile ",-1)])),_:1,__:[22]},8,["href"]),u(le,{href:S.route("logout"),method:"post",as:"button",onSuccess:v,onError:T},{default:w(()=>b[23]||(b[23]=[M(" Log Out ",-1)])),_:1,__:[23]},8,["href"])])])],2)}}},ti={class:"space-y-4"},li={key:0,class:"mb-4 p-3 bg-gray-100 rounded-md"},si={class:"text-sm font-medium text-gray-900"},oi={class:"text-xs text-gray-500 mt-1"},ii={class:"mb-4"},ri="post",ni="Add Note",ui="Note added successfully!",di={__name:"TaskNoteModal",props:{show:Boolean,taskForNote:Object},emits:["close","note-added"],setup(s,{emit:r}){const l=s,o=r,a=Ce({note:""}),x=F(()=>{var n;return`Add Note to Task: "${(n=l.taskForNote)==null?void 0:n.name}"`}),d=F(()=>{var n;return`/api/tasks/${(n=l.taskForNote)==null?void 0:n.id}/notes`});ie(()=>l.show,n=>{n&&Object.assign(a,{note:""})},{immediate:!0});const g=n=>{o("note-added",n),o("close")},p=()=>{o("close")};return(n,m)=>(t(),V($e,{show:s.show,title:x.value,"api-endpoint":d.value,"http-method":ri,"form-data":a,"submit-button-text":ni,"success-message":ui,onClose:p,onSubmitted:g},{default:w(({errors:c})=>[e("div",ti,[s.taskForNote?(t(),i("div",li,[e("p",si,I(s.taskForNote.name),1),e("p",oi,"Status: "+I(s.taskForNote.status),1)])):G("",!0),e("div",ii,[u(Z,{for:"task-note-content",value:"Note Content"}),H(e("textarea",{id:"task-note-content","onUpdate:modelValue":m[0]||(m[0]=v=>a.note=v),class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full h-32",placeholder:"Enter your note...",required:""},null,512),[[ve,a.note]]),u(Q,{message:c.note?c.note[0]:"",class:"mt-2"},null,8,["message"])])])]),_:1},8,["show","title","api-endpoint","form-data"]))}},ci={class:"task-history-list"},mi={key:0,class:"text-center py-4"},vi={key:1,class:"text-gray-500 text-sm py-2"},pi={key:2,class:"space-y-3"},fi={class:"flex items-start"},gi={class:"text-xl mr-2"},bi={class:"text-sm text-gray-700"},hi={class:"text-xs text-gray-500 mt-1"},yi={__name:"TaskHistoryList",props:{activities:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},setup(s){const r=o=>o?new Date(o).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",l=o=>(console.log(o),o.includes("created")?"":o.includes("started")?"":o.includes("paused")?"":o.includes("resumed")?"":o.includes("unblocked")?"":o.includes("blocked")?"":o.includes("completed")?"":o.includes("revised")?"":o.includes("deleted")?"":o.includes("assigned")?"":o.includes("updated")?"":o.includes("added note")?"":o.includes("commented")?"":"");return(o,a)=>(t(),i("div",ci,[s.loading?(t(),i("div",mi,a[0]||(a[0]=[e("div",{class:"inline-block animate-spin rounded-full h-6 w-6 border-t-2 border-b-2 border-indigo-500"},null,-1),e("p",{class:"mt-2 text-gray-500"},"Loading activity history...",-1)]))):s.activities.length===0?(t(),i("div",vi," No activity history available for this task. ")):(t(),i("div",pi,[(t(!0),i(X,null,te(s.activities,x=>{var d;return t(),i("div",{key:x.id,class:"p-3 bg-gray-50 rounded-md"},[e("div",fi,[e("span",gi,I(l(x.description)),1),e("div",null,[e("p",bi,I(x.description),1),e("p",hi," By "+I(((d=x.causer)==null?void 0:d.name)||"System")+" on "+I(r(x.created_at)),1)])])])}),128))]))]))}},ki=Le(yi,[["__scopeId","data-v-423d54af"]]),Wn=async()=>{try{return(await ee.get("/api/assigned-tasks")).data}catch(s){throw console.error("Error fetching assigned tasks:",s),oe("Failed to load assigned tasks"),s}},Jn=async s=>{try{return(await ee.get(`/api/projects/${s}/tasks`)).data}catch(r){throw console.error("Error fetching project tasks:",r),oe("Failed to load project tasks"),r}},Yn=async s=>{try{return(await ee.get(`/api/projects/${s}/due-and-overdue-tasks`)).data}catch(r){throw console.error("Error fetching due and overdue tasks:",r),oe("Failed to load due and overdue tasks"),r}},wi=async s=>{if(!s||s.status==="In Progress")return s;try{he("Starting task...");const r=await ee.post(`/api/tasks/${s.id}/start`);return ce("Task started successfully"),r.data}catch(r){throw console.error("Error starting task:",r),oe("Failed to start task. Please try again."),r}},Ai=async s=>{if(!s||s.status!=="In Progress")return ue('Task can only be paused from "In Progress" status.'),s;try{he("Pausing task...");const r=await ee.post(`/api/tasks/${s.id}/pause`);return ce("Task paused successfully"),r.data}catch(r){throw console.error("Error pausing task:",r),oe("Failed to pause task. Please try again."),r}},xi=async s=>{if(!s||s.status!=="Paused")return ue('Task can only be resumed from "Paused" status.'),s;try{he("Resuming task...");const r=await ee.post(`/api/tasks/${s.id}/resume`);return ce("Task resumed successfully"),r.data}catch(r){throw console.error("Error resuming task:",r),oe("Failed to resume task. Please try again."),r}},_i=async s=>{if(!s||s.status==="Done")return s;if(s.status!=="In Progress")throw ue("Task must be started before it can be completed"),new Error("Task must be started before it can be completed");try{he("Completing task...");const r=await ee.patch(`/api/tasks/${s.id}/complete`);ce("Task completed successfully");const l=r.data;if(l!=null&&l.needs_approval){const o=(l==null?void 0:l.creator_name)||"the creator";he(`This task requires approval. A notification has been sent to ${o}.`)}return l}catch(r){throw console.error("Error completing task:",r),r.response&&r.response.status===422?ue(r.response.data.message||"Task must be started before it can be completed"):oe("Failed to complete task. Please try again."),r}},Ti=async(s,r)=>{if(!s||s.status==="Blocked")return ue("Task is already blocked."),s;if(s.status==="Done")return ue("Completed tasks cannot be blocked."),s;if(!r)throw ue("Please provide a reason for blocking the task"),new Error("Blocking reason is required");try{he("Blocking task...");const l=await ee.post(`/api/tasks/${s.id}/block`,{reason:r});return ce("Task blocked successfully"),l.data}catch(l){throw console.error("Error blocking task:",l),oe("Failed to block task. Please try again."),l}},Mi=async s=>{if(!s||s.status!=="Blocked")return ue("Task is not in a blocked state."),s;try{he("Unblocking task...");const r=await ee.post(`/api/tasks/${s.id}/unblock`);return ce("Task unblocked successfully"),r.data}catch(r){throw console.error("Error unblocking task:",r),oe("Failed to unblock task. Please try again."),r}},Gi=async s=>{if(!s||s.status!=="Done")return ue("Only completed tasks can be revised."),s;try{he("Revising task...");const r=await ee.post(`/api/tasks/${s.id}/revise`);return ce("Task revised successfully"),r.data}catch(r){throw console.error("Error revising task:",r),r.response&&r.response.status===422?ue(r.response.data.message||"Only completed tasks can be revised"):oe("Failed to revise task. Please try again."),r}},Ci=async s=>{if(!s)return!1;if(s.status!=="To Do")throw ue("Only tasks in To Do status can be deleted"),new Error("Only tasks in To Do status can be deleted");if(!confirm("Are you sure you want to delete this task? This action cannot be undone."))return!1;try{return he("Deleting task..."),await ee.delete(`/api/tasks/${s.id}`),ce("Task deleted successfully"),!0}catch(r){throw console.error("Error deleting task:",r),oe("Failed to delete task. Please try again."),r}},$i=s=>{switch(s){case"To Do":return"bg-yellow-100 text-yellow-800";case"In Progress":return"bg-blue-100 text-blue-800";case"Paused":return"bg-orange-100 text-orange-800";case"Blocked":return"bg-red-100 text-red-800";case"Done":return"bg-green-100 text-green-800";case"Archived":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},Zn=s=>{switch(s){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},Qn=s=>s?s.charAt(0).toUpperCase()+s.slice(1):"Medium";function ua(s,r){return t(),i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M8.75 1A2.75 2.75 0 0 0 6 3.75v.443c-.795.077-1.584.176-2.365.298a.75.75 0 1 0 .23 1.482l.149-.022.841 10.518A2.75 2.75 0 0 0 7.596 19h4.807a2.75 2.75 0 0 0 2.742-2.53l.841-10.52.149.023a.75.75 0 0 0 .23-1.482A41.03 41.03 0 0 0 14 4.193V3.75A2.75 2.75 0 0 0 11.25 1h-2.5ZM10 4c.84 0 1.673.025 2.5.075V3.75c0-.69-.56-1.25-1.25-1.25h-2.5c-.69 0-1.25.56-1.25 1.25v.325C8.327 4.025 9.16 4 10 4ZM8.58 7.72a.75.75 0 0 0-1.5.06l.3 7.5a.75.75 0 1 0 1.5-.06l-.3-7.5Zm4.34.06a.75.75 0 1 0-1.5-.06l-.3 7.5a.75.75 0 1 0 1.5.06l.3-7.5Z","clip-rule":"evenodd"})])}const Si={class:"mt-4"},Pi={__name:"ChecklistCreator",props:{modelValue:{type:Array,required:!0},placeholder:{type:String,default:"e.g., Task 1, Task 2, Task 3"},label:{type:String,default:"Checklist Items"},density:{type:String,default:"spacious",validator:s=>["spacious","tight","notes"].includes(s)}},emits:["update:modelValue"],setup(s,{emit:r}){const l=s,o=r,a=$([]),x=$([]),d=$(!1);ie(()=>l.modelValue,c=>{d.value=!0,a.value=JSON.parse(JSON.stringify(c)),(a.value.length===0||a.value[a.value.length-1].name.trim()!=="")&&a.value.push({name:"",completed:!1}),Te(()=>{d.value=!1})},{immediate:!0,deep:!0}),ie(()=>a.value,c=>{d.value||o("update:modelValue",c)},{deep:!0});function g(c){a.value.splice(c,1),a.value.length===0&&a.value.push({name:"",completed:!1})}function p(c){c===a.value.length-1&&a.value[c].name.trim()!==""&&a.value.push({name:"",completed:!1})}function n(c){c<a.value.length-1&&Te(()=>{var v;(v=x.value[c+1])==null||v.focus()})}const m=F(()=>l.density==="tight"?{listClass:"space-y-1",itemClass:"flex items-center space-x-1",inputClass:"px-1 py-1 text-sm"}:l.density==="notes"?{listClass:"space-y-0.5",itemClass:"flex items-center space-x-1",inputClass:"px-1 py-0.5 text-sm border-transparent focus:border-transparent focus:ring-0 bg-transparent"}:{listClass:"space-y-2",itemClass:"flex items-center space-x-2",inputClass:""});return(c,v)=>(t(),i("div",Si,[s.label?(t(),V(Z,{key:0,value:s.label},null,8,["value"])):G("",!0),e("ul",{class:J(m.value.listClass)},[(t(!0),i(X,null,te(a.value,(T,S)=>(t(),i("li",{key:S,class:J(m.value.itemClass)},[s.density==="notes"?(t(),V(z(ua),{key:0,class:"h4 w-4",onClick:b=>g(S)},null,8,["onClick"])):G("",!0),u(pe,{modelValue:T.name,"onUpdate:modelValue":b=>T.name=b,type:"text",class:J(["flex-1",m.value.inputClass]),placeholder:S===a.value.length-1?s.placeholder:"",onInput:b=>p(S),onKeyup:Ue(va(b=>n(S),["prevent"]),["enter"]),ref_for:!0,ref:b=>{b&&(x.value[S]=b)}},null,8,["modelValue","onUpdate:modelValue","class","placeholder","onInput","onKeyup"]),a.value.length>1&&s.density!=="notes"?(t(),V(Xe,{key:1,type:"button",onClick:b=>g(S)},{default:w(()=>[u(z(ua),{class:"h-4 w-4"})]),_:2},1032,["onClick"])):G("",!0)],2))),128))],2)]))}},ji={key:0,class:"text-center py-8 text-gray-500"},Ei={key:1,class:"text-center py-8 text-red-600"},Ii={key:2,class:"space-y-6"},Di={class:"bg-gray-50 p-4 rounded-lg shadow-sm"},Bi={class:"text-xl font-bold text-gray-900 mb-2"},Vi={class:"flex items-center space-x-2 text-sm text-gray-600 mb-4"},Ni={key:0,class:"text-indigo-600 font-medium"},Li={key:1,class:"text-purple-600 font-medium"},Ui={class:"text-gray-700 leading-relaxed"},zi={class:"mt-4 flex flex-wrap gap-2"},Ri={key:0,class:"text-xs text-gray-500 mt-1"},Fi={key:0,class:"bg-yellow-50 border-l-4 border-red-400 p-4 rounded-lg shadow-sm"},Oi={class:"flex items-center"},Ki={class:"ml-3"},Hi={class:"mt-2 text-sm text-yellow-700"},qi={key:1,class:"bg-amber-50 border-l-4 border-amber-400 p-4 rounded-lg shadow-sm"},Wi={class:"flex items-start"},Ji={class:"ml-3"},Yi={class:"mt-1 text-sm text-amber-700"},Zi={key:0},Qi={class:"font-medium"},Xi={class:"space-y-4 p-4 bg-white rounded-lg shadow-sm mb-4"},er={class:"flex justify-between items-center border-b pb-2 mb-4"},ar={key:0},tr={key:1},lr={key:0,class:"mb-4"},sr={class:"flex justify-end mt-4"},or={key:2,class:"text-gray-500 text-sm py-2"},ir={class:"space-y-4 p-4 bg-white rounded-lg shadow-sm"},rr={class:"flex items-center justify-between py-2 border-b border-gray-100"},nr={class:"flex-1 text-right"},ur={key:0,class:"text-xs text-gray-400 ml-1"},dr={key:1,class:"flex items-center space-x-2"},cr={class:"flex items-center justify-between py-2 border-b border-gray-100"},mr={class:"flex-1 text-right"},vr={key:1,class:"flex items-center space-x-2"},pr={class:"flex items-center justify-between py-2 border-b border-gray-100"},fr={class:"flex-1 text-right"},gr={key:0,class:"text-xs text-gray-400 ml-1"},br={key:1,class:"flex items-center space-x-2"},hr={class:"flex items-center justify-between py-2 border-b border-gray-100"},yr={class:"text-gray-700"},kr={class:"flex items-start py-2 border-b border-gray-100"},wr={class:"flex-1 flex flex-wrap gap-2"},Ar={key:0,class:"text-gray-500 text-sm"},xr={class:"bg-white p-4 rounded-lg shadow-sm"},_r={class:"mb-4 border-b pb-3 flex flex-col gap-3"},Tr={class:"flex items-center justify-between"},Mr={class:"flex items-center gap-2"},Gr=["disabled"],Cr={key:0,class:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},$r={class:"flex items-center gap-3"},Sr={class:"relative inline-flex items-center px-4 py-2 rounded-md border border-dashed border-indigo-300 text-indigo-700 bg-indigo-50 hover:bg-indigo-100 cursor-pointer transition"},Pr=["disabled"],jr={key:0,class:"flex flex-wrap gap-2"},Er=["title"],Ir=["onClick"],Dr={key:0,class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3"},Br={key:1,class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3"},Vr={class:"aspect-video bg-gray-50 flex items-center justify-center overflow-hidden"},Nr=["src","alt","onClick"],Lr=["onClick"],Ur={class:"p-2 flex items-center justify-between"},zr=["title","onClick"],Rr=["onClick"],Fr={key:2,class:"text-sm text-gray-500"},Or={class:"bg-white p-4 rounded-lg shadow-sm"},Kr={class:"flex justify-between items-center mb-4 border-b pb-2"},Hr={key:0,class:"space-y-3"},qr={class:"text-sm text-gray-700"},Wr={class:"text-xs text-gray-500 mt-1"},Jr={key:1,class:"text-gray-500 text-sm py-2"},Yr={class:"bg-white p-4 rounded-lg shadow-sm"},Zr={key:3,class:"text-center py-8 text-gray-500"},Qr={key:4,class:"mt-4 flex flex-col items-center"},Xr={key:0,class:"text-xs text-red-500 mt-1"},en={class:"p-6"},an={class:"mb-4"},tn={class:"flex justify-end space-x-3"},ln={class:"p-4 sm:p-6 w-full max-w-4xl"},sn={class:"flex justify-between items-center mb-3"},on=["title"],rn={class:"bg-black/5 rounded-lg overflow-hidden",style:{"min-height":"320px"}},nn=["src"],un=["src"],dn={key:2,class:"p-6 text-center text-gray-700"},cn=["href"],mn={key:3,class:"p-6 text-center text-gray-500"},vn={__name:"TaskDetailSidebar",props:{taskId:{type:Number,required:!0},projectId:{type:Number,required:!0},projectUsers:{type:Array,default:()=>[]}},emits:["close","task-updated","task-deleted"],setup(s,{emit:r}){const l=s,o=r,a=$(null),x=$(!0),d=$(""),g=$(!1),p=$(!1),n=$(!1),m=$(null),c=$(null),v=$(null),T=$([]),S=$(!1),b=$([]),q=$(!1),D=$(!1),h=$([]),y=async()=>{if(l.taskId){q.value=!0;try{const P=await window.axios.get("/api/files",{params:{model_type:"Task",model_id:l.taskId}});b.value=P.data||[]}catch(P){console.error("Error fetching task files",P)}finally{q.value=!1}}},A=P=>{h.value=Array.from(P.target.files||[])},_=async()=>{if(!h.value.length)return;D.value=!0;const P=new FormData;h.value.forEach((f,re)=>P.append(`files[${re}]`,f)),P.append("model_type","Task"),P.append("model_id",l.taskId);try{await window.axios.post("/api/files",P,{headers:{"Content-Type":"multipart/form-data"}}),ce("Files uploaded"),h.value=[],await y()}catch(f){console.error("Upload failed",f),oe("Failed to upload files")}finally{D.value=!1}},L=async P=>{if(await Oa(`Delete file "${P.filename}"?`,{confirmText:"Delete",cancelText:"Cancel",type:"warning"}))try{await window.axios.delete(`/api/files/${P.id}`),ce("File deleted"),await y()}catch(re){console.error("Delete failed",re),oe("Failed to delete file")}},Y=$(!1),j=$(null),E=P=>{j.value=P,Y.value=!0},R=()=>{Y.value=!1,j.value=null},B=P=>P?P.thumbnail_url?P.thumbnail_url:P.mime_type&&P.mime_type.includes("image")&&P.path_url?P.path_url:null:null,k=P=>{if(!P)return{type:"none"};const f=P.path_url||null,re=(P.mime_type||"").toLowerCase();return f?re.includes("image")?{type:"image",src:f}:re.includes("pdf")||re.includes("text")||re.includes("html")?{type:"iframe",src:f}:{type:"external_link",url:f}:{type:"none"}},C=F(()=>k(j.value)),U=[{value:"low",label:"Low"},{value:"medium",label:"Medium"},{value:"high",label:"High"}],N=$(!1),W=$(!1),K=$([{name:"",completed:!1}]),se=$(!1),ye=async()=>{x.value=!0,d.value="";try{const P=await window.axios.get(`/api/tasks/${l.taskId}`);a.value=P.data,m.value=a.value.assigned_to_id||null,c.value=a.value.due_date||null,v.value=a.value.priority||"medium",ke()}catch(P){d.value="Failed to load task details.",console.error("Error fetching task details:",P)}finally{x.value=!1}},ke=async()=>{S.value=!0;try{const P=await window.axios.get("/api/activities",{params:{subject_type:"App\\Models\\Task",subject_id:l.taskId}});T.value=P.data}catch(P){console.error("Error fetching task activities:",P)}finally{S.value=!1}};ie(()=>l.taskId,P=>{P?(ye(),y()):(a.value=null,b.value=[])},{immediate:!0});const ka=F(()=>l.projectUsers.map(P=>({value:P.id,label:P.name}))),wa=async()=>{if(!a.value||m.value===a.value.assigned_to_id){g.value=!1;return}try{const P=await window.axios.patch(`/api/tasks/${a.value.id}`,{assigned_to_user_id:m.value});a.value=P.data,o("task-updated",a.value)}catch(P){console.error("Error updating assigned user:",P),m.value=a.value.assigned_to_id,oe("Failed to update assigned user. Please try again.")}finally{g.value=!1}},Aa=async()=>{if(!a.value||c.value===a.value.due_date){p.value=!1;return}try{const P=await window.axios.patch(`/api/tasks/${a.value.id}`,{due_date:c.value});a.value=P.data,o("task-updated",a.value)}catch(P){console.error("Error updating due date:",P),c.value=a.value.due_date,oe("Failed to update due date. Please try again.")}finally{p.value=!1}},xa=async()=>{if(!a.value||v.value===a.value.priority){n.value=!1;return}try{const P=await window.axios.patch(`/api/tasks/${a.value.id}`,{priority:v.value});a.value=P.data,o("task-updated",a.value)}catch(P){console.error("Error updating priority:",P),v.value=a.value.priority,oe("Failed to update priority. Please try again.")}finally{n.value=!1}},_a=()=>{N.value=!0},Ta=()=>{ye(),N.value=!1},Ma=async()=>{try{await Ci(a.value),o("task-deleted",a.value.id),o("close")}catch(P){console.error("Error deleting task:",P)}},Ga=async()=>{try{a.value=await wi(a.value),o("task-updated",a.value),ke()}catch(P){console.error("Error starting task:",P)}},Ca=async()=>{try{a.value=await Ai(a.value),o("task-updated",a.value),ke()}catch(P){console.error("Error pausing task:",P)}},$a=async()=>{try{a.value=await xi(a.value),o("task-updated",a.value),ke()}catch(P){console.error("Error resuming task:",P)}},Sa=async()=>{try{a.value=await _i(a.value),o("task-updated",a.value),ke()}catch(P){console.error("Error completing task:",P)}},Pa=async()=>{try{a.value=await Gi(a.value),o("task-updated",a.value),ke()}catch(P){console.error("Error revising task:",P)}},ja=()=>{var P;W.value=!W.value,W.value&&((P=a.value.details)!=null&&P.checklist&&a.value.details.checklist.length>0?(K.value=JSON.parse(JSON.stringify(a.value.details.checklist)),K.value[K.value.length-1].name!==""&&K.value.push({name:"",completed:!1})):K.value=[{name:"",completed:!1}])},Ea=async()=>{if(!se.value){se.value=!0;try{const P=K.value.filter(xe=>xe.name.trim()!==""),f={details:{...a.value.details,checklist:P}},re=await window.axios.patch(`/api/tasks/${a.value.id}`,f);a.value=re.data,W.value=!1,ce("Checklist saved successfully"),o("task-updated",a.value)}catch(P){console.error("Error saving checklist:",P),oe("Failed to save checklist")}finally{se.value=!1}}},Se=$(!1),Me=$(""),Ia=()=>{Me.value="",Se.value=!0},Da=async()=>{if(!Me.value.trim()){ue("Please provide a reason for blocking the task");return}try{a.value=await Ti(a.value,Me.value),ce("Task blocked successfully"),o("task-updated",a.value),ke(),Se.value=!1}catch(P){console.error("Error blocking task:",P)}},Ba=async()=>{try{a.value=await Mi(a.value),o("task-updated",a.value),ke()}catch(P){console.error("Error unblocking task:",P)}},Va=F(()=>a.value?$i(a.value.status):""),Ke=F(()=>{var f,re,xe,Pe;if(!T.value||((f=a.value)==null?void 0:f.status)!=="Blocked")return null;const P=T.value.find(je=>{var Ee,Ie;return je.event==="updated"&&((Ie=(Ee=je.properties)==null?void 0:Ee.attributes)==null?void 0:Ie.status)==="Blocked"});return P?(console.log(P.properties),{causer:((re=P.causer)==null?void 0:re.name)||"Unknown",reason:((Pe=(xe=P.properties)==null?void 0:xe.attributes)==null?void 0:Pe.block_reason)||"No reason provided."}):null});return(P,f)=>{var re,xe,Pe,je,Ee,Ie,aa;return t(),i("div",null,[x.value?(t(),i("div",ji," Loading task details... ")):d.value?(t(),i("div",Ei,I(d.value),1)):a.value?(t(),i("div",Ii,[e("div",Di,[e("h4",Bi,I(a.value.name),1),e("div",Vi,[e("span",{class:J(["px-2 py-1 rounded-full text-xs font-medium",Va.value])},I(a.value.status),3),a.value.task_type?(t(),i("span",Ni," | "+I((re=a.value.task_type)==null?void 0:re.name)+" | ",1)):G("",!0),f[14]||(f[14]=e("br",null,null,-1)),(xe=a.value.milestone)!=null&&xe.name?(t(),i("span",Li,I((Pe=a.value.milestone)==null?void 0:Pe.name),1)):G("",!0)]),e("p",Ui,I(a.value.description||"No description provided."),1),e("div",zi,[a.value.status==="To Do"?(t(),V(ne,{key:0,onClick:Ga,class:"bg-blue-600 hover:bg-blue-700"},{default:w(()=>f[15]||(f[15]=[M(" Start Task ",-1)])),_:1,__:[15]})):a.value.status==="In Progress"?(t(),V(ne,{key:1,onClick:Ca,class:"bg-orange-600 hover:bg-orange-700"},{default:w(()=>f[16]||(f[16]=[M(" Pause Task ",-1)])),_:1,__:[16]})):a.value.status==="Paused"?(t(),V(ne,{key:2,onClick:$a,class:"bg-blue-600 hover:bg-blue-700"},{default:w(()=>f[17]||(f[17]=[M(" Resume Task ",-1)])),_:1,__:[17]})):a.value.status==="Blocked"?(t(),V(ne,{key:3,onClick:Ba,class:"bg-green-600 hover:bg-green-700"},{default:w(()=>f[18]||(f[18]=[M(" Unblock Task ",-1)])),_:1,__:[18]})):G("",!0),a.value.status==="To Do"||a.value.status==="In Progress"||a.value.status==="Paused"?(t(),V(ne,{key:4,onClick:Ia,class:"bg-red-600 hover:bg-red-700"},{default:w(()=>f[19]||(f[19]=[M(" Block Task ",-1)])),_:1,__:[19]})):G("",!0),a.value.status==="In Progress"?(t(),V(ne,{key:5,onClick:Sa,class:"bg-green-600 hover:bg-green-700"},{default:w(()=>f[20]||(f[20]=[M(" Complete Task ",-1)])),_:1,__:[20]})):G("",!0),a.value.status==="Done"?(t(),V(ne,{key:6,onClick:Pa,class:"bg-yellow-600 hover:bg-yellow-700"},{default:w(()=>f[21]||(f[21]=[M(" Revise Task ",-1)])),_:1,__:[21]})):G("",!0)]),a.value.status==="Done"?(t(),i("div",Ri,' Revising will change the task status back to "To Do" ')):G("",!0)]),a.value.status==="Blocked"&&Ke.value?(t(),i("div",Fi,[e("div",Oi,[f[23]||(f[23]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.487 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11.75 13a.75.75 0 01-1.5 0v-2.25a.75.75 0 011.5 0V13zm-1.5-7.5a.75.75 0 011.5 0v1.5a.75.75 0 01-1.5 0V5.5z","clip-rule":"evenodd"})])],-1)),e("div",Ki,[f[22]||(f[22]=e("h3",{class:"text-sm font-medium text-yellow-800"},"Task Blocked",-1)),e("div",Hi,[e("p",null,"This task was blocked by **"+I(Ke.value.causer)+"** with the following reason:",1),e("p",null,I(Ke.value.reason),1)])])])])):G("",!0),a.value.needs_approval?(t(),i("div",qi,[e("div",Wi,[f[28]||(f[28]=e("svg",{class:"h-5 w-5 text-amber-500 mt-0.5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.487 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0V9a1 1 0 112 0v4zm-1 4a1.25 1.25 0 100-2.5A1.25 1.25 0 0010 17z","clip-rule":"evenodd"})],-1)),e("div",Ji,[f[27]||(f[27]=e("h3",{class:"text-sm font-semibold text-amber-800"},"Approval required",-1)),e("p",Yi,[f[25]||(f[25]=M(" Once completed, this task needs approval",-1)),a.value.creator_name?(t(),i("span",Zi,[f[24]||(f[24]=M(" from ",-1)),e("span",Qi,I(a.value.creator_name),1)])):G("",!0),f[26]||(f[26]=M(". ",-1))])])])])):G("",!0),e("div",Xi,[e("div",er,[f[29]||(f[29]=e("h5",{class:"text-lg font-semibold text-gray-800"},"Task Checklist",-1)),e("button",{onClick:ja,class:"text-indigo-600 hover:text-indigo-800 text-sm font-medium flex items-center"},[W.value?(t(),i("span",tr,"Cancel")):(t(),i("span",ar,I((je=a.value.details)!=null&&je.checklist&&a.value.details.checklist.length>0?"Edit Checklist":"Add Checklist"),1))])]),W.value?(t(),i("div",lr,[u(Pi,{modelValue:K.value,"onUpdate:modelValue":f[0]||(f[0]=O=>K.value=O),placeholder:"e.g., Review design, Update documentation",label:"Checklist Items",density:"notes"},null,8,["modelValue"]),e("div",sr,[u(ne,{onClick:Ea,disabled:se.value,class:"flex items-center space-x-1"},{default:w(()=>[u(z(ro),{class:"h-4 w-4"}),f[30]||(f[30]=e("span",null,"Save Checklist",-1))]),_:1,__:[30]},8,["disabled"])])])):G("",!0),(Ee=a.value.details)!=null&&Ee.checklist&&a.value.details.checklist.length>0&&!W.value?(t(),V(Xa,{key:1,items:a.value.details.checklist,"api-endpoint":`/api/tasks/${a.value.id}`,title:"Items to complete:","payload-transformer":O=>({details:{...a.value.details,checklist:O}})},null,8,["items","api-endpoint","payload-transformer"])):G("",!0),(!((Ie=a.value.details)!=null&&Ie.checklist)||a.value.details.checklist.length===0)&&!W.value?(t(),i("div",or,' No checklist items for this task yet. Click "Add Checklist" to create one. ')):G("",!0)]),e("div",ir,[f[37]||(f[37]=e("h5",{class:"text-lg font-semibold text-gray-800 border-b pb-2 mb-4"},"Task Attributes",-1)),e("div",rr,[u(Z,{class:"min-w-[100px] text-gray-600"},{default:w(()=>f[31]||(f[31]=[M("Assigned To:",-1)])),_:1,__:[31]}),e("div",nr,[g.value?(t(),i("div",dr,[u(de,{id:"edit-assigned-to",modelValue:m.value,"onUpdate:modelValue":f[2]||(f[2]=O=>m.value=O),options:ka.value,"value-key":"value","label-key":"label",placeholder:"Unassigned",class:"mt-1 flex-1","allow-empty":!0},null,8,["modelValue","options"]),e("button",{onClick:wa,class:"text-green-600 hover:text-green-800 text-sm font-medium"},"Save"),e("button",{onClick:f[3]||(f[3]=O=>g.value=!1),class:"text-gray-600 hover:text-gray-800 text-sm font-medium"},"Cancel")])):(t(),i("div",{key:0,onClick:f[1]||(f[1]=O=>a.value.status!=="Done"?g.value=!0:ue("Cannot change assignment for a completed task. Use the Revise button to change the task status first.")),class:J(["cursor-pointer",{"text-indigo-600 hover:text-indigo-800":a.value.status!=="Done","text-gray-500":a.value.status==="Done"}])},[M(I(((aa=a.value.assigned_to)==null?void 0:aa.name)||"Unassigned")+" ",1),a.value.status!=="Done"?(t(),i("span",ur,"(Click to edit)")):G("",!0)],2))])]),e("div",cr,[u(Z,{class:"min-w-[100px] text-gray-600"},{default:w(()=>f[32]||(f[32]=[M("Due Date:",-1)])),_:1,__:[32]}),e("div",mr,[p.value?(t(),i("div",vr,[u(pe,{id:"edit-due-date",modelValue:c.value,"onUpdate:modelValue":f[5]||(f[5]=O=>c.value=O),type:"date",class:"mt-1 flex-1"},null,8,["modelValue"]),e("button",{onClick:Aa,class:"text-green-600 hover:text-green-800 text-sm font-medium"},"Save"),e("button",{onClick:f[6]||(f[6]=O=>p.value=!1),class:"text-gray-600 hover:text-gray-800 text-sm font-medium"},"Cancel")])):(t(),i("div",{key:0,onClick:f[4]||(f[4]=O=>p.value=!0),class:"cursor-pointer text-indigo-600 hover:text-indigo-800"},[M(I(a.value.due_date?z(Qa)(a.value.due_date).format("MMM D, YYYY"):"No Due Date")+" ",1),f[33]||(f[33]=e("span",{class:"text-xs text-gray-400 ml-1"},"(Click to edit)",-1))]))])]),e("div",pr,[u(Z,{class:"min-w-[100px] text-gray-600"},{default:w(()=>f[34]||(f[34]=[M("Priority:",-1)])),_:1,__:[34]}),e("div",fr,[n.value?(t(),i("div",br,[u(de,{id:"edit-priority",modelValue:v.value,"onUpdate:modelValue":f[8]||(f[8]=O=>v.value=O),options:U,"value-key":"value","label-key":"label",placeholder:"Select priority",class:"mt-1 flex-1"},null,8,["modelValue"]),e("button",{onClick:xa,class:"text-green-600 hover:text-green-800 text-sm font-medium"},"Save"),e("button",{onClick:f[9]||(f[9]=O=>n.value=!1),class:"text-gray-600 hover:text-gray-800 text-sm font-medium"},"Cancel")])):(t(),i("div",{key:0,onClick:f[7]||(f[7]=O=>a.value.status!=="Done"?n.value=!0:ue("Cannot change priority for a completed task. Use the Revise button to change the task status first.")),class:J(["cursor-pointer",{"text-indigo-600 hover:text-indigo-800":a.value.status!=="Done","text-gray-500":a.value.status==="Done"}])},[e("span",{class:J({"text-red-600 font-medium":a.value.priority==="high","text-yellow-600 font-medium":a.value.priority==="medium","text-green-600 font-medium":a.value.priority==="low"})},I(a.value.priority?a.value.priority.charAt(0).toUpperCase()+a.value.priority.slice(1):"Medium"),3),a.value.status!=="Done"?(t(),i("span",gr,"(Click to edit)")):G("",!0)],2))])]),e("div",hr,[u(Z,{class:"min-w-[100px] text-gray-600"},{default:w(()=>f[35]||(f[35]=[M("Created:",-1)])),_:1,__:[35]}),e("span",yr,I(a.value.created_at?new Date(a.value.created_at).toLocaleDateString():"N/A"),1)]),e("div",kr,[u(Z,{class:"min-w-[100px] text-gray-600 mt-1"},{default:w(()=>f[36]||(f[36]=[M("Tags:",-1)])),_:1,__:[36]}),e("div",wr,[(t(!0),i(X,null,te(a.value.tags,O=>(t(),i("span",{key:O.id,class:"inline-flex items-center px-3 py-1 text-sm font-medium bg-indigo-100 text-indigo-800 rounded-full shadow-sm"},I(O.name),1))),128)),!a.value.tags||a.value.tags.length===0?(t(),i("span",Ar,"No tags")):G("",!0)])])]),e("div",xr,[e("div",_r,[e("div",Tr,[f[39]||(f[39]=e("h5",{class:"text-lg font-semibold text-gray-800"},"Files",-1)),e("div",Mr,[e("button",{type:"button",class:"inline-flex items-center px-4 py-2 rounded-md bg-indigo-600 text-white hover:bg-indigo-700 transition disabled:opacity-60 disabled:cursor-not-allowed",disabled:D.value||h.value.length===0,onClick:_},[D.value?(t(),i("svg",Cr,f[38]||(f[38]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"},null,-1)]))):G("",!0),e("span",null,I(D.value?"Uploading...":"Upload"),1)],8,Gr)])]),e("div",$r,[e("label",Sr,[f[40]||(f[40]=e("svg",{class:"h-5 w-5 mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1M4 12l1.5-1.5M20 12l-1.5-1.5M12 4v12"})],-1)),f[41]||(f[41]=e("span",{class:"font-medium"},"Choose Files",-1)),e("input",{class:"absolute inset-0 opacity-0 cursor-pointer",type:"file",multiple:"",onChange:A,disabled:D.value},null,40,Pr)]),f[42]||(f[42]=e("p",{class:"text-xs text-gray-500"},"You can select multiple files. Images, PDFs, Docs are supported.",-1))]),h.value.length?(t(),i("div",jr,[(t(!0),i(X,null,te(h.value,(O,Ge)=>(t(),i("span",{key:Ge,class:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-gray-100 text-gray-800 text-xs"},[f[43]||(f[43]=e("svg",{class:"h-4 w-4 text-indigo-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})],-1)),e("span",{class:"max-w-[160px] truncate",title:O.name},I(O.name),9,Er),e("button",{type:"button",class:"text-gray-500 hover:text-red-600",onClick:Sn=>h.value=h.value.filter((Pn,Na)=>Na!==Ge)},"",8,Ir)]))),128))])):G("",!0)]),e("div",null,[q.value?(t(),i("div",Dr,[(t(),i(X,null,te(6,O=>e("div",{key:O,class:"h-28 bg-gray-100 rounded animate-pulse"})),64))])):b.value.length>0?(t(),i("div",Br,[(t(!0),i(X,null,te(b.value,O=>(t(),i("div",{key:O.id,class:"group relative rounded-lg border border-gray-200 overflow-hidden bg-white shadow-sm hover:shadow-md transition"},[e("div",Vr,[B(O)?(t(),i("img",{key:0,src:B(O),alt:O.filename,class:"object-cover w-full h-full",onClick:Ge=>E(O)},null,8,Nr)):(t(),i("div",{key:1,class:"text-gray-400",onClick:Ge=>E(O)},f[44]||(f[44]=[e("svg",{class:"h-10 w-10",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})],-1)]),8,Lr))]),e("div",Ur,[e("button",{class:"text-xs text-blue-600 hover:underline truncate max-w-[70%] text-left",title:O.filename,onClick:Ge=>E(O)},I(O.filename),9,zr),e("button",{class:"text-red-600 hover:text-red-800 text-xs",onClick:Ge=>L(O)},"Delete",8,Rr)])]))),128))])):(t(),i("div",Fr,"No files attached."))])]),e("div",Or,[e("div",Kr,[f[46]||(f[46]=e("h5",{class:"text-lg font-semibold text-gray-800"},"Notes",-1)),u(ne,{onClick:_a,class:"bg-indigo-600 hover:bg-indigo-700 transition-colors"},{default:w(()=>f[45]||(f[45]=[M(" Add Note ",-1)])),_:1,__:[45]})]),a.value.notes&&a.value.notes.length>0?(t(),i("div",Hr,[(t(!0),i(X,null,te(a.value.notes,O=>(t(),i("div",{key:O.id,class:"p-3 bg-gray-50 rounded-md"},[e("p",qr,I(O.content),1),e("p",Wr," By "+I(O.creator_name||"Unknown")+" on "+I(new Date(O.created_at).toLocaleDateString()),1)]))),128))])):(t(),i("div",Jr,"No notes for this task yet."))]),e("div",Yr,[f[47]||(f[47]=e("h5",{class:"text-lg font-semibold text-gray-800 border-b pb-2 mb-4"},"History",-1)),u(ki,{activities:T.value,loading:S.value},null,8,["activities","loading"])])])):(t(),i("div",Zr," Select a task to view details. ")),a.value&&a.value.status!=="Done"?(t(),i("div",Qr,[u(Xe,{onClick:Ma,disabled:a.value.status!=="To Do"},{default:w(()=>f[48]||(f[48]=[M(" Delete Task ",-1)])),_:1,__:[48]},8,["disabled"]),a.value.status!=="To Do"?(t(),i("p",Xr,"Task can only be deleted in 'To Do' status.")):G("",!0)])):G("",!0),u(di,{show:N.value,"task-for-note":a.value,onClose:f[10]||(f[10]=O=>N.value=!1),onNoteAdded:Ta},null,8,["show","task-for-note"]),u(Ze,{show:Se.value,onClose:f[13]||(f[13]=O=>Se.value=!1)},{default:w(()=>[e("div",en,[f[52]||(f[52]=e("h2",{class:"text-lg font-medium text-gray-900 mb-4"}," Block Task ",-1)),e("div",an,[f[49]||(f[49]=e("p",{class:"text-sm text-gray-600 mb-2"}," Please provide a reason for blocking this task: ",-1)),H(e("textarea",{"onUpdate:modelValue":f[11]||(f[11]=O=>Me.value=O),class:"w-full rounded-md shadow-sm border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",rows:"3",placeholder:"Enter reason for blocking..."},null,512),[[ve,Me.value]])]),e("div",tn,[u(Re,{onClick:f[12]||(f[12]=O=>Se.value=!1)},{default:w(()=>f[50]||(f[50]=[M(" Cancel ",-1)])),_:1,__:[50]}),u(ne,{onClick:Da,disabled:!Me.value.trim(),class:"bg-red-600 hover:bg-red-700"},{default:w(()=>f[51]||(f[51]=[M(" Block Task ",-1)])),_:1,__:[51]},8,["disabled"])])])]),_:1},8,["show"]),u(Ze,{show:Y.value,onClose:R},{default:w(()=>[e("div",ln,[e("div",sn,[e("h3",{class:"text-lg font-semibold text-gray-800 truncate",title:j.value&&j.value.filename?j.value.filename:""},I(j.value&&j.value.filename?j.value.filename:"Preview"),9,on),e("button",{class:"text-gray-500 hover:text-gray-700",onClick:R},"")]),e("div",rn,[M(I(C.value.type)+" ",1),C.value.type==="iframe"?(t(),i("iframe",{key:0,src:C.value.src,class:"w-full h-[70vh]",frameborder:"0",allow:"autoplay; encrypted-media",allowfullscreen:""},null,8,nn)):C.value.type==="image"?(t(),i("img",{key:1,src:C.value.src,alt:"Preview",class:"w-full h-auto"},null,8,un)):C.value.type==="external_link"?(t(),i("div",dn,[f[53]||(f[53]=e("p",null,"This file can't be embedded. You can open it using the link below:",-1)),e("a",{href:C.value.url,target:"_blank",class:"text-indigo-600 hover:underline break-all"},I(C.value.url),9,cn)])):(t(),i("div",mn,"No preview available."))])])]),_:1},8,["show"])])}}},pn={key:1,class:"p-4 text-gray-500"},fn={key:0,class:"flex justify-end space-x-3"},gn={__name:"TaskSidebar",emits:["taskUpdated","taskDeleted"],setup(s){const r=$(null);return(l,o)=>(t(),V(ya,{show:z(we).show,"onUpdate:show":z(qe),title:z(we).taskId?"Task Details":"Details",initialWidth:50},{content:w(()=>[z(we).taskId?(t(),V(vn,{key:0,"task-id":z(we).taskId,"project-id":z(we).projectId,"project-users":z(we).projectUsers,ref_key:"taskDetailSidebarRef",ref:r,onClose:z(qe),onTaskUpdated:o[0]||(o[0]=a=>{l.$emit("taskUpdated",a)}),onTaskDeleted:o[1]||(o[1]=a=>{l.$emit("taskDeleted",a),z(qe)()})},null,8,["task-id","project-id","project-users","onClose"])):z(we).show?(t(),i("div",pn," No task selected or task ID is missing. ")):G("",!0)]),footer:w(()=>[z(we).taskId?(t(),i("div",fn,[r.value&&r.value.task&&r.value.task.status!=="In Progress"&&r.value.task.status!=="Done"?(t(),V(Re,{key:0,onClick:r.value.startTask,class:"bg-blue-50 text-blue-700 hover:bg-blue-100"},{default:w(()=>o[2]||(o[2]=[M(" Start Task ",-1)])),_:1,__:[2]},8,["onClick"])):G("",!0),r.value&&r.value.task&&r.value.task.status==="In Progress"?(t(),V(Re,{key:1,onClick:r.value.completeTask,class:"bg-green-50 text-green-700 hover:bg-green-100"},{default:w(()=>o[3]||(o[3]=[M(" Complete Task ",-1)])),_:1,__:[3]},8,["onClick"])):G("",!0),r.value&&r.value.task?(t(),V(Xe,{key:2,onClick:r.value.deleteTask,class:"bg-red-50 text-red-700 hover:bg-red-100"},{default:w(()=>o[4]||(o[4]=[M(" Delete Task ",-1)])),_:1,__:[4]},8,["onClick"])):G("",!0)])):G("",!0)]),_:1},8,["show","onUpdate:show","title"]))}},We=$(!1),Be=$([]),Je=$(!1);function bn(){const s=async()=>{var o;try{const a=await ee.get("/api/notices/unread");Be.value=((o=a.data)==null?void 0:o.data)||[],We.value=Be.value.length>0}catch(a){console.error("Failed to fetch unread notices",a)}},r=async()=>{if(Je.value)try{const o=Be.value.map(a=>a.id);if(o.length===0)return;await ee.post("/api/notices/acknowledge",{notice_ids:o}),l()}catch(o){console.error("Failed to acknowledge notices",o)}},l=()=>{We.value=!1,Be.value=[],Je.value=!1};return fe(()=>{s()}),ba(()=>{}),{showNoticeModal:We,unreadNotices:Be,acknowledgeChecked:Je,fetchUnreadNotices:s,acknowledgeNotices:r,closeModal:l}}const hn={class:"mb-4"},yn={__name:"TimezoneSelect",props:{modelValue:{type:String,default:null},label:{type:String,default:"Timezone"},placeholder:{type:String,default:"Select a timezone"},disabled:{type:Boolean,default:!1},required:{type:Boolean,default:!1},error:{type:String,default:""}},emits:["update:modelValue","change"],setup(s,{emit:r}){const l=s,o=r,a=F(()=>[{value:"Africa/Abidjan",label:"Africa/Abidjan (GMT+00:00)"},{value:"Africa/Accra",label:"Africa/Accra (GMT+00:00)"},{value:"Africa/Addis_Ababa",label:"Africa/Addis_Ababa (GMT+03:00)"},{value:"Africa/Algiers",label:"Africa/Algiers (GMT+01:00)"},{value:"Africa/Asmara",label:"Africa/Asmara (GMT+03:00)"},{value:"Africa/Bamako",label:"Africa/Bamako (GMT+00:00)"},{value:"Africa/Bangui",label:"Africa/Bangui (GMT+01:00)"},{value:"Africa/Banjul",label:"Africa/Banjul (GMT+00:00)"},{value:"Africa/Bissau",label:"Africa/Bissau (GMT+00:00)"},{value:"Africa/Blantyre",label:"Africa/Blantyre (GMT+02:00)"},{value:"Africa/Brazzaville",label:"Africa/Brazzaville (GMT+01:00)"},{value:"Africa/Bujumbura",label:"Africa/Bujumbura (GMT+02:00)"},{value:"Africa/Cairo",label:"Africa/Cairo (GMT+02:00)"},{value:"Africa/Casablanca",label:"Africa/Casablanca (GMT+01:00)"},{value:"Africa/Ceuta",label:"Africa/Ceuta (GMT+01:00)"},{value:"Africa/Conakry",label:"Africa/Conakry (GMT+00:00)"},{value:"Africa/Dakar",label:"Africa/Dakar (GMT+00:00)"},{value:"Africa/Dar_es_Salaam",label:"Africa/Dar_es_Salaam (GMT+03:00)"},{value:"Africa/Djibouti",label:"Africa/Djibouti (GMT+03:00)"},{value:"Africa/Douala",label:"Africa/Douala (GMT+01:00)"},{value:"Africa/El_Aaiun",label:"Africa/El_Aaiun (GMT+01:00)"},{value:"Africa/Freetown",label:"Africa/Freetown (GMT+00:00)"},{value:"Africa/Gaborone",label:"Africa/Gaborone (GMT+02:00)"},{value:"Africa/Harare",label:"Africa/Harare (GMT+02:00)"},{value:"Africa/Johannesburg",label:"Africa/Johannesburg (GMT+02:00)"},{value:"Africa/Juba",label:"Africa/Juba (GMT+03:00)"},{value:"Africa/Kampala",label:"Africa/Kampala (GMT+03:00)"},{value:"Africa/Khartoum",label:"Africa/Khartoum (GMT+02:00)"},{value:"Africa/Kigali",label:"Africa/Kigali (GMT+02:00)"},{value:"Africa/Kinshasa",label:"Africa/Kinshasa (GMT+01:00)"},{value:"Africa/Lagos",label:"Africa/Lagos (GMT+01:00)"},{value:"Africa/Libreville",label:"Africa/Libreville (GMT+01:00)"},{value:"Africa/Lome",label:"Africa/Lome (GMT+00:00)"},{value:"Africa/Luanda",label:"Africa/Luanda (GMT+01:00)"},{value:"Africa/Lubumbashi",label:"Africa/Lubumbashi (GMT+02:00)"},{value:"Africa/Lusaka",label:"Africa/Lusaka (GMT+02:00)"},{value:"Africa/Malabo",label:"Africa/Malabo (GMT+01:00)"},{value:"Africa/Maputo",label:"Africa/Maputo (GMT+02:00)"},{value:"Africa/Maseru",label:"Africa/Maseru (GMT+02:00)"},{value:"Africa/Mbabane",label:"Africa/Mbabane (GMT+02:00)"},{value:"Africa/Mogadishu",label:"Africa/Mogadishu (GMT+03:00)"},{value:"Africa/Monrovia",label:"Africa/Monrovia (GMT+00:00)"},{value:"Africa/Nairobi",label:"Africa/Nairobi (GMT+03:00)"},{value:"Africa/Ndjamena",label:"Africa/Ndjamena (GMT+01:00)"},{value:"Africa/Niamey",label:"Africa/Niamey (GMT+01:00)"},{value:"Africa/Nouakchott",label:"Africa/Nouakchott (GMT+00:00)"},{value:"Africa/Ouagadougou",label:"Africa/Ouagadougou (GMT+00:00)"},{value:"Africa/Porto-Novo",label:"Africa/Porto-Novo (GMT+01:00)"},{value:"Africa/Sao_Tome",label:"Africa/Sao_Tome (GMT+00:00)"},{value:"Africa/Tripoli",label:"Africa/Tripoli (GMT+02:00)"},{value:"Africa/Tunis",label:"Africa/Tunis (GMT+01:00)"},{value:"Africa/Windhoek",label:"Africa/Windhoek (GMT+02:00)"},{value:"America/Adak",label:"America/Adak (GMT-10:00)"},{value:"America/Anchorage",label:"America/Anchorage (GMT-09:00)"},{value:"America/Anguilla",label:"America/Anguilla (GMT-04:00)"},{value:"America/Antigua",label:"America/Antigua (GMT-04:00)"},{value:"America/Araguaina",label:"America/Araguaina (GMT-03:00)"},{value:"America/Argentina/Buenos_Aires",label:"America/Argentina/Buenos_Aires (GMT-03:00)"},{value:"America/Argentina/Catamarca",label:"America/Argentina/Catamarca (GMT-03:00)"},{value:"America/Argentina/Cordoba",label:"America/Argentina/Cordoba (GMT-03:00)"},{value:"America/Argentina/Jujuy",label:"America/Argentina/Jujuy (GMT-03:00)"},{value:"America/Argentina/La_Rioja",label:"America/Argentina/La_Rioja (GMT-03:00)"},{value:"America/Argentina/Mendoza",label:"America/Argentina/Mendoza (GMT-03:00)"},{value:"America/Argentina/Rio_Gallegos",label:"America/Argentina/Rio_Gallegos (GMT-03:00)"},{value:"America/Argentina/Salta",label:"America/Argentina/Salta (GMT-03:00)"},{value:"America/Argentina/San_Juan",label:"America/Argentina/San_Juan (GMT-03:00)"},{value:"America/Argentina/San_Luis",label:"America/Argentina/San_Luis (GMT-03:00)"},{value:"America/Argentina/Tucuman",label:"America/Argentina/Tucuman (GMT-03:00)"},{value:"America/Argentina/Ushuaia",label:"America/Argentina/Ushuaia (GMT-03:00)"},{value:"America/Aruba",label:"America/Aruba (GMT-04:00)"},{value:"America/Asuncion",label:"America/Asuncion (GMT-04:00)"},{value:"America/Atikokan",label:"America/Atikokan (GMT-05:00)"},{value:"America/Bahia",label:"America/Bahia (GMT-03:00)"},{value:"America/Bahia_Banderas",label:"America/Bahia_Banderas (GMT-06:00)"},{value:"America/Barbados",label:"America/Barbados (GMT-04:00)"},{value:"America/Belem",label:"America/Belem (GMT-03:00)"},{value:"America/Belize",label:"America/Belize (GMT-06:00)"},{value:"America/Blanc-Sablon",label:"America/Blanc-Sablon (GMT-04:00)"},{value:"America/Boa_Vista",label:"America/Boa_Vista (GMT-04:00)"},{value:"America/Bogota",label:"America/Bogota (GMT-05:00)"},{value:"America/Boise",label:"America/Boise (GMT-06:00)"},{value:"America/Cambridge_Bay",label:"America/Cambridge_Bay (GMT-06:00)"},{value:"America/Campo_Grande",label:"America/Campo_Grande (GMT-04:00)"},{value:"America/Cancun",label:"America/Cancun (GMT-05:00)"},{value:"America/Caracas",label:"America/Caracas (GMT-04:00)"},{value:"America/Cayenne",label:"America/Cayenne (GMT-03:00)"},{value:"America/Cayman",label:"America/Cayman (GMT-05:00)"},{value:"America/Chicago",label:"America/Chicago (GMT-05:00)"},{value:"America/Chihuahua",label:"America/Chihuahua (GMT-06:00)"},{value:"America/Ciudad_Juarez",label:"America/Ciudad_Juarez (GMT-06:00)"},{value:"America/Costa_Rica",label:"America/Costa_Rica (GMT-06:00)"},{value:"America/Creston",label:"America/Creston (GMT-07:00)"},{value:"America/Cuiaba",label:"America/Cuiaba (GMT-04:00)"},{value:"America/Curacao",label:"America/Curacao (GMT-04:00)"},{value:"America/Danmarkshavn",label:"America/Danmarkshavn (GMT+00:00)"},{value:"America/Dawson",label:"America/Dawson (GMT-07:00)"},{value:"America/Dawson_Creek",label:"America/Dawson_Creek (GMT-07:00)"},{value:"America/Denver",label:"America/Denver (GMT-06:00)"},{value:"America/Detroit",label:"America/Detroit (GMT-04:00)"},{value:"America/Dominica",label:"America/Dominica (GMT-04:00)"},{value:"America/Edmonton",label:"America/Edmonton (GMT-06:00)"},{value:"America/Eirunepe",label:"America/Eirunepe (GMT-05:00)"},{value:"America/El_Salvador",label:"America/El_Salvador (GMT-06:00)"},{value:"America/Fort_Nelson",label:"America/Fort_Nelson (GMT-07:00)"},{value:"America/Fortaleza",label:"America/Fortaleza (GMT-03:00)"},{value:"America/Glace_Bay",label:"America/Glace_Bay (GMT-03:00)"},{value:"America/Goose_Bay",label:"America/Goose_Bay (GMT-03:00)"},{value:"America/Grand_Turk",label:"America/Grand_Turk (GMT-04:00)"},{value:"America/Grenada",label:"America/Grenada (GMT-04:00)"},{value:"America/Guadeloupe",label:"America/Guadeloupe (GMT-04:00)"},{value:"America/Guatemala",label:"America/Guatemala (GMT-06:00)"},{value:"America/Guayaquil",label:"America/Guayaquil (GMT-05:00)"},{value:"America/Guyana",label:"America/Guyana (GMT-04:00)"},{value:"America/Halifax",label:"America/Halifax (GMT-03:00)"},{value:"America/Havana",label:"America/Havana (GMT-04:00)"},{value:"America/Hermosillo",label:"America/Hermosillo (GMT-07:00)"},{value:"America/Indiana/Indianapolis",label:"America/Indiana/Indianapolis (GMT-04:00)"},{value:"America/Indiana/Knox",label:"America/Indiana/Knox (GMT-05:00)"},{value:"America/Indiana/Marengo",label:"America/Indiana/Marengo (GMT-04:00)"},{value:"America/Indiana/Petersburg",label:"America/Indiana/Petersburg (GMT-04:00)"},{value:"America/Indiana/Vevay",label:"America/Indiana/Vevay (GMT-04:00)"},{value:"America/Indiana/Vincennes",label:"America/Indiana/Vincennes (GMT-04:00)"},{value:"America/Indiana/Winamac",label:"America/Indiana/Winamac (GMT-04:00)"},{value:"America/Inuvik",label:"America/Inuvik (GMT-06:00)"},{value:"America/Iqaluit",label:"America/Iqaluit (GMT-04:00)"},{value:"America/Jamaica",label:"America/Jamaica (GMT-05:00)"},{value:"America/Juneau",label:"America/Juneau (GMT-08:00)"},{value:"America/Kentucky/Louisville",label:"America/Kentucky/Louisville (GMT-04:00)"},{value:"America/Kentucky/Monticello",label:"America/Kentucky/Monticello (GMT-04:00)"},{value:"America/La_Paz",label:"America/La_Paz (GMT-04:00)"},{value:"America/Lima",label:"America/Lima (GMT-05:00)"},{value:"America/Los_Angeles",label:"America/Los_Angeles (GMT-07:00)"},{value:"America/Lower_Princes",label:"America/Lower_Princes (GMT-04:00)"},{value:"America/Maceio",label:"America/Maceio (GMT-03:00)"},{value:"America/Managua",label:"America/Managua (GMT-06:00)"},{value:"America/Manaus",label:"America/Manaus (GMT-04:00)"},{value:"America/Marigot",label:"America/Marigot (GMT-04:00)"},{value:"America/Martinique",label:"America/Martinique (GMT-04:00)"},{value:"America/Matamoros",label:"America/Matamoros (GMT-05:00)"},{value:"America/Mazatlan",label:"America/Mazatlan (GMT-06:00)"},{value:"America/Menominee",label:"America/Menominee (GMT-05:00)"},{value:"America/Merida",label:"America/Merida (GMT-05:00)"},{value:"America/Metlakatla",label:"America/Metlakatla (GMT-08:00)"},{value:"America/Mexico_City",label:"America/Mexico_City (GMT-05:00)"},{value:"America/Miquelon",label:"America/Miquelon (GMT-02:00)"},{value:"America/Moncton",label:"America/Moncton (GMT-03:00)"},{value:"America/Monterrey",label:"America/Monterrey (GMT-05:00)"},{value:"America/Montevideo",label:"America/Montevideo (GMT-03:00)"},{value:"America/Montserrat",label:"America/Montserrat (GMT-04:00)"},{value:"America/Nassau",label:"America/Nassau (GMT-04:00)"},{value:"America/New_York",label:"America/New_York (GMT-04:00)"},{value:"America/Nome",label:"America/Nome (GMT-08:00)"},{value:"America/Noronha",label:"America/Noronha (GMT-02:00)"},{value:"America/North_Dakota/Beulah",label:"America/North_Dakota/Beulah (GMT-05:00)"},{value:"America/North_Dakota/Center",label:"America/North_Dakota/Center (GMT-05:00)"},{value:"America/North_Dakota/New_Salem",label:"America/North_Dakota/New_Salem (GMT-05:00)"},{value:"America/Nuuk",label:"America/Nuuk (GMT-02:00)"},{value:"America/Ojinaga",label:"America/Ojinaga (GMT-06:00)"},{value:"America/Panama",label:"America/Panama (GMT-05:00)"},{value:"America/Paramaribo",label:"America/Paramaribo (GMT-03:00)"},{value:"America/Phoenix",label:"America/Phoenix (GMT-07:00)"},{value:"America/Port-au-Prince",label:"America/Port-au-Prince (GMT-04:00)"},{value:"America/Port_of_Spain",label:"America/Port_of_Spain (GMT-04:00)"},{value:"America/Puerto_Rico",label:"America/Puerto_Rico (GMT-04:00)"},{value:"America/Punta_Arenas",label:"America/Punta_Arenas (GMT-03:00)"},{value:"America/Rankin_Inlet",label:"America/Rankin_Inlet (GMT-05:00)"},{value:"America/Recife",label:"America/Recife (GMT-03:00)"},{value:"America/Regina",label:"America/Regina (GMT-06:00)"},{value:"America/Resolute",label:"America/Resolute (GMT-05:00)"},{value:"America/Rio_Branco",label:"America/Rio_Branco (GMT-05:00)"},{value:"America/Santarem",label:"America/Santarem (GMT-03:00)"},{value:"America/Santiago",label:"America/Santiago (GMT-04:00)"},{value:"America/Santo_Domingo",label:"America/Santo_Domingo (GMT-04:00)"},{value:"America/Sao_Paulo",label:"America/Sao_Paulo (GMT-03:00)"},{value:"America/Scoresbysund",label:"America/Scoresbysund (GMT+00:00)"},{value:"America/Sitka",label:"America/Sitka (GMT-08:00)"},{value:"America/St_Barthelemy",label:"America/St_Barthelemy (GMT-04:00)"},{value:"America/St_Johns",label:"America/St_Johns (GMT-02:30)"},{value:"America/St_Kitts",label:"America/St_Kitts (GMT-04:00)"},{value:"America/St_Lucia",label:"America/St_Lucia (GMT-04:00)"},{value:"America/St_Thomas",label:"America/St_Thomas (GMT-04:00)"},{value:"America/St_Vincent",label:"America/St_Vincent (GMT-04:00)"},{value:"America/Swift_Current",label:"America/Swift_Current (GMT-06:00)"},{value:"America/Tegucigalpa",label:"America/Tegucigalpa (GMT-06:00)"},{value:"America/Thule",label:"America/Thule (GMT-03:00)"},{value:"America/Tijuana",label:"America/Tijuana (GMT-07:00)"},{value:"America/Toronto",label:"America/Toronto (GMT-04:00)"},{value:"America/Tortola",label:"America/Tortola (GMT-04:00)"},{value:"America/Vancouver",label:"America/Vancouver (GMT-07:00)"},{value:"America/Whitehorse",label:"America/Whitehorse (GMT-07:00)"},{value:"America/Winnipeg",label:"America/Winnipeg (GMT-05:00)"},{value:"America/Yakutat",label:"America/Yakutat (GMT-08:00)"},{value:"America/Yellowknife",label:"America/Yellowknife (GMT-06:00)"},{value:"Antarctica/Casey",label:"Antarctica/Casey (GMT+11:00)"},{value:"Antarctica/Davis",label:"Antarctica/Davis (GMT+07:00)"},{value:"Antarctica/DumontDUrville",label:"Antarctica/DumontDUrville (GMT+10:00)"},{value:"Antarctica/Macquarie",label:"Antarctica/Macquarie (GMT+11:00)"},{value:"Antarctica/Mawson",label:"Antarctica/Mawson (GMT+05:00)"},{value:"Antarctica/Palmer",label:"Antarctica/Palmer (GMT-03:00)"},{value:"Antarctica/Rothera",label:"Antarctica/Rothera (GMT-03:00)"},{value:"Antarctica/Syowa",label:"Antarctica/Syowa (GMT+03:00)"},{value:"Antarctica/Troll",label:"Antarctica/Troll (GMT+00:00)"},{value:"Antarctica/Vostok",label:"Antarctica/Vostok (GMT+06:00)"},{value:"Asia/Almaty",label:"Asia/Almaty (GMT+05:00)"},{value:"Asia/Amman",label:"Asia/Amman (GMT+03:00)"},{value:"Asia/Anadyr",label:"Asia/Anadyr (GMT+12:00)"},{value:"Asia/Aqtau",label:"Asia/Aqtau (GMT+05:00)"},{value:"Asia/Aqtobe",label:"Asia/Aqtobe (GMT+05:00)"},{value:"Asia/Ashgabat",label:"Asia/Ashgabat (GMT+05:00)"},{value:"Asia/Atyrau",label:"Asia/Atyrau (GMT+05:00)"},{value:"Asia/Baghdad",label:"Asia/Baghdad (GMT+03:00)"},{value:"Asia/Baku",label:"Asia/Baku (GMT+04:00)"},{value:"Asia/Bangkok",label:"Asia/Bangkok (GMT+07:00)"},{value:"Asia/Barnaul",label:"Asia/Barnaul (GMT+07:00)"},{value:"Asia/Beirut",label:"Asia/Beirut (GMT+03:00)"},{value:"Asia/Bishkek",label:"Asia/Bishkek (GMT+06:00)"},{value:"Asia/Brunei",label:"Asia/Brunei (GMT+08:00)"},{value:"Asia/Chita",label:"Asia/Chita (GMT+09:00)"},{value:"Asia/Choibalsan",label:"Asia/Choibalsan (GMT+08:00)"},{value:"Asia/Colombo",label:"Asia/Colombo (GMT+05:30)"},{value:"Asia/Damascus",label:"Asia/Damascus (GMT+03:00)"},{value:"Asia/Dhaka",label:"Asia/Dhaka (GMT+06:00)"},{value:"Asia/Dili",label:"Asia/Dili (GMT+09:00)"},{value:"Asia/Dubai",label:"Asia/Dubai (GMT+04:00)"},{value:"Asia/Dushanbe",label:"Asia/Dushanbe (GMT+05:00)"},{value:"Asia/Famagusta",label:"Asia/Famagusta (GMT+03:00)"},{value:"Asia/Gaza",label:"Asia/Gaza (GMT+03:00)"},{value:"Asia/Hebron",label:"Asia/Hebron (GMT+03:00)"},{value:"Asia/Ho_Chi_Minh",label:"Asia/Ho_Chi_Minh (GMT+07:00)"},{value:"Asia/Hong_Kong",label:"Asia/Hong_Kong (GMT+08:00)"},{value:"Asia/Hovd",label:"Asia/Hovd (GMT+07:00)"},{value:"Asia/Irkutsk",label:"Asia/Irkutsk (GMT+08:00)"},{value:"Asia/Jakarta",label:"Asia/Jakarta (GMT+07:00)"},{value:"Asia/Jayapura",label:"Asia/Jayapura (GMT+09:00)"},{value:"Asia/Jerusalem",label:"Asia/Jerusalem (GMT+03:00)"},{value:"Asia/Kabul",label:"Asia/Kabul (GMT+04:30)"},{value:"Asia/Kamchatka",label:"Asia/Kamchatka (GMT+12:00)"},{value:"Asia/Karachi",label:"Asia/Karachi (GMT+05:00)"},{value:"Asia/Kathmandu",label:"Asia/Kathmandu (GMT+05:45)"},{value:"Asia/Khandyga",label:"Asia/Khandyga (GMT+09:00)"},{value:"Asia/Kolkata",label:"Asia/Kolkata (GMT+05:30)"},{value:"Asia/Krasnoyarsk",label:"Asia/Krasnoyarsk (GMT+07:00)"},{value:"Asia/Kuala_Lumpur",label:"Asia/Kuala_Lumpur (GMT+08:00)"},{value:"Asia/Kuching",label:"Asia/Kuching (GMT+08:00)"},{value:"Asia/Kuwait",label:"Asia/Kuwait (GMT+03:00)"},{value:"Asia/Macau",label:"Asia/Macau (GMT+08:00)"},{value:"Asia/Magadan",label:"Asia/Magadan (GMT+11:00)"},{value:"Asia/Makassar",label:"Asia/Makassar (GMT+08:00)"},{value:"Asia/Manila",label:"Asia/Manila (GMT+08:00)"},{value:"Asia/Muscat",label:"Asia/Muscat (GMT+04:00)"},{value:"Asia/Nicosia",label:"Asia/Nicosia (GMT+03:00)"},{value:"Asia/Novokuznetsk",label:"Asia/Novokuznetsk (GMT+07:00)"},{value:"Asia/Novosibirsk",label:"Asia/Novosibirsk (GMT+07:00)"},{value:"Asia/Omsk",label:"Asia/Omsk (GMT+06:00)"},{value:"Asia/Oral",label:"Asia/Oral (GMT+05:00)"},{value:"Asia/Phnom_Penh",label:"Asia/Phnom_Penh (GMT+07:00)"},{value:"Asia/Pontianak",label:"Asia/Pontianak (GMT+07:00)"},{value:"Asia/Pyongyang",label:"Asia/Pyongyang (GMT+09:00)"},{value:"Asia/Qatar",label:"Asia/Qatar (GMT+03:00)"},{value:"Asia/Qostanay",label:"Asia/Qostanay (GMT+05:00)"},{value:"Asia/Qyzylorda",label:"Asia/Qyzylorda (GMT+05:00)"},{value:"Asia/Riyadh",label:"Asia/Riyadh (GMT+03:00)"},{value:"Asia/Sakhalin",label:"Asia/Sakhalin (GMT+11:00)"},{value:"Asia/Samarkand",label:"Asia/Samarkand (GMT+05:00)"},{value:"Asia/Seoul",label:"Asia/Seoul (GMT+09:00)"},{value:"Asia/Shanghai",label:"Asia/Shanghai (GMT+08:00)"},{value:"Asia/Singapore",label:"Asia/Singapore (GMT+08:00)"},{value:"Asia/Srednekolymsk",label:"Asia/Srednekolymsk (GMT+11:00)"},{value:"Asia/Taipei",label:"Asia/Taipei (GMT+08:00)"},{value:"Asia/Tashkent",label:"Asia/Tashkent (GMT+05:00)"},{value:"Asia/Tbilisi",label:"Asia/Tbilisi (GMT+04:00)"},{value:"Asia/Tehran",label:"Asia/Tehran (GMT+03:30)"},{value:"Asia/Thimphu",label:"Asia/Thimphu (GMT+06:00)"},{value:"Asia/Tokyo",label:"Asia/Tokyo (GMT+09:00)"},{value:"Asia/Tomsk",label:"Asia/Tomsk (GMT+07:00)"},{value:"Asia/Ulaanbaatar",label:"Asia/Ulaanbaatar (GMT+08:00)"},{value:"Asia/Urumqi",label:"Asia/Urumqi (GMT+06:00)"},{value:"Asia/Ust-Nera",label:"Asia/Ust-Nera (GMT+10:00)"},{value:"Asia/Vladivostok",label:"Asia/Vladivostok (GMT+10:00)"},{value:"Asia/Yakutsk",label:"Asia/Yakutsk (GMT+09:00)"},{value:"Asia/Yangon",label:"Asia/Yangon (GMT+06:30)"},{value:"Asia/Yekaterinburg",label:"Asia/Yekaterinburg (GMT+05:00)"},{value:"Asia/Yerevan",label:"Asia/Yerevan (GMT+04:00)"},{value:"Atlantic/Azores",label:"Atlantic/Azores (GMT-01:00)"},{value:"Atlantic/Bermuda",label:"Atlantic/Bermuda (GMT-03:00)"},{value:"Atlantic/Canary",label:"Atlantic/Canary (GMT+00:00)"},{value:"Atlantic/Cape_Verde",label:"Atlantic/Cape_Verde (GMT-01:00)"},{value:"Atlantic/Faroe",label:"Atlantic/Faroe (GMT+00:00)"},{value:"Atlantic/Madeira",label:"Atlantic/Madeira (GMT+00:00)"},{value:"Atlantic/Reykjavik",label:"Atlantic/Reykjavik (GMT+00:00)"},{value:"Atlantic/South_Georgia",label:"Atlantic/South_Georgia (GMT-02:00)"},{value:"Atlantic/St_Helena",label:"Atlantic/St_Helena (GMT+00:00)"},{value:"Atlantic/Stanley",label:"Atlantic/Stanley (GMT-03:00)"},{value:"Australia/Adelaide",label:"Australia/Adelaide (GMT+09:30)"},{value:"Australia/Brisbane",label:"Australia/Brisbane (GMT+10:00)"},{value:"Australia/Broken_Hill",label:"Australia/Broken_Hill (GMT+09:30)"},{value:"Australia/Darwin",label:"Australia/Darwin (GMT+09:30)"},{value:"Australia/Eucla",label:"Australia/Eucla (GMT+08:45)"},{value:"Australia/Hobart",label:"Australia/Hobart (GMT+10:00)"},{value:"Australia/Lindeman",label:"Australia/Lindeman (GMT+10:00)"},{value:"Australia/Lord_Howe",label:"Australia/Lord_Howe (GMT+10:30)"},{value:"Australia/Melbourne",label:"Australia/Melbourne (GMT+10:00)"},{value:"Australia/Perth",label:"Australia/Perth (GMT+08:00)"},{value:"Australia/Sydney",label:"Australia/Sydney (GMT+10:00)"},{value:"Europe/Amsterdam",label:"Europe/Amsterdam (GMT+02:00)"},{value:"Europe/Andorra",label:"Europe/Andorra (GMT+02:00)"},{value:"Europe/Astrakhan",label:"Europe/Astrakhan (GMT+04:00)"},{value:"Europe/Athens",label:"Europe/Athens (GMT+03:00)"},{value:"Europe/Belgrade",label:"Europe/Belgrade (GMT+02:00)"},{value:"Europe/Berlin",label:"Europe/Berlin (GMT+02:00)"},{value:"Europe/Brussels",label:"Europe/Brussels (GMT+02:00)"},{value:"Europe/Bucharest",label:"Europe/Bucharest (GMT+03:00)"},{value:"Europe/Budapest",label:"Europe/Budapest (GMT+02:00)"},{value:"Europe/Chisinau",label:"Europe/Chisinau (GMT+03:00)"},{value:"Europe/Copenhagen",label:"Europe/Copenhagen (GMT+02:00)"},{value:"Europe/Dublin",label:"Europe/Dublin (GMT+01:00)"},{value:"Europe/Gibraltar",label:"Europe/Gibraltar (GMT+02:00)"},{value:"Europe/Helsinki",label:"Europe/Helsinki (GMT+03:00)"},{value:"Europe/Istanbul",label:"Europe/Istanbul (GMT+03:00)"},{value:"Europe/Kaliningrad",label:"Europe/Kaliningrad (GMT+02:00)"},{value:"Europe/Kirov",label:"Europe/Kirov (GMT+03:00)"},{value:"Europe/Kyiv",label:"Europe/Kyiv (GMT+03:00)"},{value:"Europe/Lisbon",label:"Europe/Lisbon (GMT+01:00)"},{value:"Europe/London",label:"Europe/London (GMT+01:00)"},{value:"Europe/Luxembourg",label:"Europe/Luxembourg (GMT+02:00)"},{value:"Europe/Madrid",label:"Europe/Madrid (GMT+02:00)"},{value:"Europe/Malta",label:"Europe/Malta (GMT+02:00)"},{value:"Europe/Minsk",label:"Europe/Minsk (GMT+03:00)"},{value:"Europe/Monaco",label:"Europe/Monaco (GMT+02:00)"},{value:"Europe/Moscow",label:"Europe/Moscow (GMT+03:00)"},{value:"Europe/Oslo",label:"Europe/Oslo (GMT+02:00)"},{value:"Europe/Paris",label:"Europe/Paris (GMT+02:00)"},{value:"Europe/Prague",label:"Europe/Prague (GMT+02:00)"},{value:"Europe/Riga",label:"Europe/Riga (GMT+03:00)"},{value:"Europe/Rome",label:"Europe/Rome (GMT+02:00)"},{value:"Europe/Samara",label:"Europe/Samara (GMT+04:00)"},{value:"Europe/San_Marino",label:"Europe/San_Marino (GMT+02:00)"},{value:"Europe/Sarajevo",label:"Europe/Sarajevo (GMT+02:00)"},{value:"Europe/Saratov",label:"Europe/Saratov (GMT+04:00)"},{value:"Europe/Simferopol",label:"Europe/Simferopol (GMT+03:00)"},{value:"Europe/Skopje",label:"Europe/Skopje (GMT+02:00)"},{value:"Europe/Sofia",label:"Europe/Sofia (GMT+03:00)"},{value:"Europe/Stockholm",label:"Europe/Stockholm (GMT+02:00)"},{value:"Europe/Tallinn",label:"Europe/Tallinn (GMT+03:00)"},{value:"Europe/Tirane",label:"Europe/Tirane (GMT+02:00)"},{value:"Europe/Ulyanovsk",label:"Europe/Ulyanovsk (GMT+04:00)"},{value:"Europe/Uzhgorod",label:"Europe/Uzhgorod (GMT+03:00)"},{value:"Europe/Vaduz",label:"Europe/Vaduz (GMT+02:00)"},{value:"Europe/Vatican",label:"Europe/Vatican (GMT+02:00)"},{value:"Europe/Vienna",label:"Europe/Vienna (GMT+02:00)"},{value:"Europe/Vilnius",label:"Europe/Vilnius (GMT+03:00)"},{value:"Europe/Volgograd",label:"Europe/Volgograd (GMT+03:00)"},{value:"Europe/Warsaw",label:"Europe/Warsaw (GMT+02:00)"},{value:"Europe/Zagreb",label:"Europe/Zagreb (GMT+02:00)"},{value:"Europe/Zaporozhye",label:"Europe/Zaporozhye (GMT+03:00)"},{value:"Europe/Zurich",label:"Europe/Zurich (GMT+02:00)"},{value:"Indian/Antananarivo",label:"Indian/Antananarivo (GMT+03:00)"},{value:"Indian/Chagos",label:"Indian/Chagos (GMT+06:00)"},{value:"Indian/Christmas",label:"Indian/Christmas (GMT+07:00)"},{value:"Indian/Cocos",label:"Indian/Cocos (GMT+06:30)"},{value:"Indian/Comoro",label:"Indian/Comoro (GMT+03:00)"},{value:"Indian/Kerguelen",label:"Indian/Kerguelen (GMT+05:00)"},{value:"Indian/Mahe",label:"Indian/Mahe (GMT+04:00)"},{value:"Indian/Maldives",label:"Indian/Maldives (GMT+05:00)"},{value:"Indian/Mauritius",label:"Indian/Mauritius (GMT+04:00)"},{value:"Indian/Mayotte",label:"Indian/Mayotte (GMT+03:00)"},{value:"Indian/Reunion",label:"Indian/Reunion (GMT+04:00)"},{value:"Pacific/Apia",label:"Pacific/Apia (GMT+13:00)"},{value:"Pacific/Auckland",label:"Pacific/Auckland (GMT+12:00)"},{value:"Pacific/Bougainville",label:"Pacific/Bougainville (GMT+11:00)"},{value:"Pacific/Chatham",label:"Pacific/Chatham (GMT+12:45)"},{value:"Pacific/Chuuk",label:"Pacific/Chuuk (GMT+10:00)"},{value:"Pacific/Easter",label:"Pacific/Easter (GMT-06:00)"},{value:"Pacific/Efate",label:"Pacific/Efate (GMT+11:00)"},{value:"Pacific/Fakaofo",label:"Pacific/Fakaofo (GMT+13:00)"},{value:"Pacific/Fiji",label:"Pacific/Fiji (GMT+12:00)"},{value:"Pacific/Funafuti",label:"Pacific/Funafuti (GMT+12:00)"},{value:"Pacific/Galapagos",label:"Pacific/Galapagos (GMT-06:00)"},{value:"Pacific/Gambier",label:"Pacific/Gambier (GMT-09:00)"},{value:"Pacific/Guadalcanal",label:"Pacific/Guadalcanal (GMT+11:00)"},{value:"Pacific/Guam",label:"Pacific/Guam (GMT+10:00)"},{value:"Pacific/Honolulu",label:"Pacific/Honolulu (GMT-10:00)"},{value:"Pacific/Kanton",label:"Pacific/Kanton (GMT+13:00)"},{value:"Pacific/Kiritimati",label:"Pacific/Kiritimati (GMT+14:00)"},{value:"Pacific/Kosrae",label:"Pacific/Kosrae (GMT+11:00)"},{value:"Pacific/Kwajalein",label:"Pacific/Kwajalein (GMT+12:00)"},{value:"Pacific/Majuro",label:"Pacific/Majuro (GMT+12:00)"},{value:"Pacific/Marquesas",label:"Pacific/Marquesas (GMT-09:30)"},{value:"Pacific/Midway",label:"Pacific/Midway (GMT-11:00)"},{value:"Pacific/Nauru",label:"Pacific/Nauru (GMT+12:00)"},{value:"Pacific/Niue",label:"Pacific/Niue (GMT-11:00)"},{value:"Pacific/Norfolk",label:"Pacific/Norfolk (GMT+11:00)"},{value:"Pacific/Noumea",label:"Pacific/Noumea (GMT+11:00)"},{value:"Pacific/Pago_Pago",label:"Pacific/Pago_Pago (GMT-11:00)"},{value:"Pacific/Palau",label:"Pacific/Palau (GMT+09:00)"},{value:"Pacific/Pitcairn",label:"Pacific/Pitcairn (GMT-08:00)"},{value:"Pacific/Pohnpei",label:"Pacific/Pohnpei (GMT+11:00)"},{value:"Pacific/Port_Moresby",label:"Pacific/Port_Moresby (GMT+10:00)"},{value:"Pacific/Rarotonga",label:"Pacific/Rarotonga (GMT-10:00)"},{value:"Pacific/Saipan",label:"Pacific/Saipan (GMT+10:00)"},{value:"Pacific/Tahiti",label:"Pacific/Tahiti (GMT-10:00)"},{value:"Pacific/Tarawa",label:"Pacific/Tarawa (GMT+12:00)"},{value:"Pacific/Tongatapu",label:"Pacific/Tongatapu (GMT+13:00)"},{value:"Pacific/Wake",label:"Pacific/Wake (GMT+12:00)"},{value:"Pacific/Wallis",label:"Pacific/Wallis (GMT+12:00)"}]),x=F({get:()=>l.modelValue,set:d=>{o("update:modelValue",d),o("change",d)}});return fe(()=>{if((l.modelValue===null||l.modelValue===void 0)&&!l.disabled)try{const d=Intl.DateTimeFormat().resolvedOptions().timeZone;a.value.find(p=>p.value===d)?x.value=d:console.warn(`Detected timezone "${d}" is not in the predefined list.`)}catch(d){console.error("Error auto-detecting timezone:",d)}}),(d,g)=>(t(),i("div",hn,[u(Z,{for:s.label.toLowerCase().replace(/\s/g,"-"),value:s.label},null,8,["for","value"]),u(de,{id:s.label.toLowerCase().replace(/\s/g,"-"),modelValue:x.value,"onUpdate:modelValue":g[0]||(g[0]=p=>x.value=p),options:a.value,valueKey:"value",labelKey:"label",placeholder:s.placeholder,disabled:s.disabled,required:s.required,class:"mt-1 block w-full"},null,8,["id","modelValue","options","placeholder","disabled","required"]),u(Q,{message:s.error,class:"mt-2"},null,8,["message"])]))}},kn={key:0,class:"text-sm text-gray-600 mb-3"},wn=["value"],An={__name:"UserDataPromptModal",props:{show:{type:Boolean,default:!1},configItem:{type:Object,required:!0}},emits:["close","submitted","error"],setup(s,{emit:r}){const l=s,o=$({value:""});ie(()=>l.show,p=>{p&&(o.value={value:""})});const a=F(()=>{var p,n;return((n=(p=l.configItem)==null?void 0:p.api)==null?void 0:n.endpoint)||"/api/user/update-profile-field"}),x=F(()=>{var p,n;return((n=(p=l.configItem)==null?void 0:p.api)==null?void 0:n.method)||"post"}),d=p=>{var c,v,T,S,b;if((c=l.configItem)!=null&&c.toPayload)return l.configItem.toPayload(p.value);const n=((T=(v=l.configItem)==null?void 0:v.api)==null?void 0:T.fieldParam)||"field",m=((b=(S=l.configItem)==null?void 0:S.api)==null?void 0:b.valueParam)||"value";return{[n]:l.configItem.column,[m]:p.value}},g=F(()=>{var p;return((p=l.configItem)==null?void 0:p.title)||"Additional Information Required"});return(p,n)=>(t(),V($e,{show:s.show,title:g.value,"api-endpoint":a.value,"http-method":x.value,"form-data":o.value,"submit-button-text":"Save","success-message":"Saved successfully","format-data-for-api":d,onClose:n[3]||(n[3]=m=>p.$emit("close")),onSubmitted:n[4]||(n[4]=m=>p.$emit("submitted",m)),onError:n[5]||(n[5]=m=>p.$emit("error",m))},{default:w(({errors:m})=>{var c,v,T,S,b,q,D,h,y,A,_,L,Y,j;return[(c=s.configItem)!=null&&c.description?(t(),i("p",kn,I(s.configItem.description),1)):G("",!0),e("div",null,[((T=(v=s.configItem)==null?void 0:v.input)==null?void 0:T.type)==="component"&&((b=(S=s.configItem)==null?void 0:S.input)==null?void 0:b.component)==="TimezoneSelect"?(t(),i(X,{key:0},[u(yn,{modelValue:o.value.value,"onUpdate:modelValue":n[0]||(n[0]=E=>o.value.value=E),required:!0},null,8,["modelValue"]),u(Q,{message:(q=m==null?void 0:m.value)==null?void 0:q[0],class:"mt-2"},null,8,["message"])],64)):((h=(D=s.configItem)==null?void 0:D.input)==null?void 0:h.type)==="select"?(t(),i(X,{key:1},[u(Z,{value:((y=s.configItem)==null?void 0:y.label)||"Select an option"},null,8,["value"]),H(e("select",{"onUpdate:modelValue":n[1]||(n[1]=E=>o.value.value=E),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[n[6]||(n[6]=e("option",{disabled:"",value:""},"Please select",-1)),(t(!0),i(X,null,te(((_=(A=s.configItem)==null?void 0:A.input)==null?void 0:_.options)||[],E=>(t(),i("option",{key:E.value||E,value:E.value||E},I(E.label||E),9,wn))),128))],512),[[Ka,o.value.value]]),u(Q,{message:(L=m==null?void 0:m.value)==null?void 0:L[0],class:"mt-2"},null,8,["message"])],64)):(t(),i(X,{key:2},[u(Z,{value:((Y=s.configItem)==null?void 0:Y.label)||"Value"},null,8,["value"]),u(pe,{modelValue:o.value.value,"onUpdate:modelValue":n[2]||(n[2]=E=>o.value.value=E),class:"mt-1 block w-full"},null,8,["modelValue"]),u(Q,{message:(j=m==null?void 0:m.value)==null?void 0:j[0],class:"mt-2"},null,8,["message"])],64))])]}),_:1},8,["show","title","api-endpoint","http-method","form-data"]))}},xn=[{id:"users.timezone",model:"users",column:"timezone",title:"Set your timezone",description:"We could not detect your timezone during login. Please select your timezone to get correct schedule times.",input:{type:"component",component:"TimezoneSelect",props:{}},api:{endpoint:"/api/user/update-profile-field",method:"post",fieldParam:"field",valueParam:"value"},isMissing:s=>!(s!=null&&s.timezone),toPayload:s=>({field:"timezone",value:s})}],_n={__name:"PromptOrchestrator",setup(s){const r=$(!1),l=$(null),o=$([]),a=()=>{const m=localStorage.getItem("authToken");m&&!ee.defaults.headers.common.Authorization&&(ee.defaults.headers.common.Authorization=`Bearer ${m}`)},x=async()=>{a();const{data:m}=await ee.get("/api/user");return m},d=m=>{const c=[];for(const v of xn)try{(typeof v.isMissing=="function"?v.isMissing(m):!(m!=null&&m[v.column]))&&c.push(v)}catch(T){console.error("Error evaluating prompt config",v,T)}return c},g=()=>{if(o.value.length===0){l.value=null,r.value=!1;return}l.value=o.value.shift(),r.value=!0},p=async()=>{try{const m=await x();o.value=d(m),g()}catch(m){console.error("PromptOrchestrator initialization failed",m)}},n=async()=>{try{const m=await x();o.value=d(m)}catch{}g()};return fe(()=>{p()}),(m,c)=>l.value?(t(),V(An,{key:0,show:r.value,"config-item":l.value,onClose:g,onSubmitted:n},null,8,["show","config-item"])):G("",!0)}},Tn={class:"flex h-screen overflow-hidden"},Mn={class:"flex-1 flex flex-col overflow-hidden"},Gn={key:0,class:"bg-white shadow"},Cn={class:"mx-auto max-w-7xl px-4 py-6 sm:px-6 lg:px-8"},$n={class:"flex-1 overflow-y-auto"},Xn={__name:"AuthenticatedLayout",setup(s){const r=$(!1),l=$(!1),o=$(!1),a=$(!1),x=$([]),d=$(!0),g=F(()=>Ne().props.id||null),{showNoticeModal:p,unreadNotices:n,fetchUnreadNotices:m,closeModal:c}=bn(),v=$(null),T=async()=>{const _=localStorage.getItem("authToken");if(_){window.axios.defaults.headers.common.Authorization=`Bearer ${_}`;try{await window.axios.get("/api/user")}catch(L){L.response&&L.response.status===401&&(console.log("Session expired, redirecting to login"),localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization,window.location.href="/login")}}else delete window.axios.defaults.headers.common.Authorization},S=()=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization},b=_=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization,window.location.href="/login"},q=async()=>{d.value=!0;try{const _=await window.axios.get("/api/projects-simplified");x.value=_.data}catch(_){console.error("Error fetching all projects for sidebar:",_),x.value=[]}finally{d.value=!1}},D=_=>{Wa.visit(route("projects.show",_))},h=F(()=>Ve.value.notifications.filter(_=>!_.isRead).length),y=_=>{console.log("Task updated globally.",_)},A=_=>{console.log("Task deleted globally.",_)};return fe(()=>{T(),v.value&&Ha(v.value),q(),qa(),la(m),m()}),ba(()=>{la(null)}),(_,L)=>(t(),i("div",Tn,[u(xt,{ref_key:"standardNotificationContainerRef",ref:v},null,512),u(gt,{"sidebar-is-open":z(Ve).show},null,8,["sidebar-is-open"]),u(ul),u(Xs,{"all-projects":x.value,"active-project-id":g.value,onProjectSelected:D},null,8,["all-projects","active-project-id"]),e("div",Mn,[u(Ho,{"unread-notification-count":h.value,onOpenCreateTaskModal:L[0]||(L[0]=Y=>l.value=!0),onOpenAddResource:L[1]||(L[1]=Y=>o.value=!0),onOpenNotificationsSidebar:z(sa),onOpenKudoModal:L[2]||(L[2]=Y=>a.value=!0)},null,8,["unread-notification-count","onOpenNotificationsSidebar"]),u(ai,{"showing-navigation-dropdown":r.value,"unread-notification-count":h.value,onOpenCreateTaskModal:L[3]||(L[3]=Y=>l.value=!0),onOpenAddResource:L[4]||(L[4]=Y=>o.value=!0),onOpenNotificationsSidebar:z(sa),onLogoutSuccess:S,onLogoutError:b},null,8,["showing-navigation-dropdown","unread-notification-count","onOpenNotificationsSidebar"]),_.$slots.header?(t(),i("header",Gn,[e("div",Cn,[be(_.$slots,"header")])])):G("",!0),e("main",$n,[be(_.$slots,"default")]),u(Ll,{show:l.value,onClose:L[5]||(L[5]=Y=>l.value=!1),onSaved:L[6]||(L[6]=Y=>l.value=!1)},null,8,["show"]),u(ql,{"api-endpoint":"/api/shareable-resources",show:o.value,onClose:L[7]||(L[7]=Y=>o.value=!1)},null,8,["show"]),u(xs,{show:a.value,onClose:L[8]||(L[8]=Y=>a.value=!1),onSubmitted:L[9]||(L[9]=Y=>a.value=!1)},null,8,["show"])]),u(gn,{onTaskUpdated:y,onTaskDeleted:A}),u(hs),u(et,{show:z(p),unreadNotices:z(n),onClose:z(c)},null,8,["show","unreadNotices","onClose"]),u(_n)]))}};export{ql as C,ya as R,ha as T,Xn as _,_l as a,ol as b,Qn as c,Zn as d,_i as e,Wn as f,$i as g,Ci as h,Gi as i,Ti as j,yn as k,Pi as l,ua as m,di as n,Jn as o,Ai as p,Ll as q,xi as r,wi as s,Yn as t,Mi as u};
