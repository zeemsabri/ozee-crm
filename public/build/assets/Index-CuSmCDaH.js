import{a as i,o as n,b as t,c as U,E as we,D as _e,r as g,C as ye,f as xe,d as o,u as f,h as be,w,t as u,v as V,g as he,i as C,F as j,l as M,G as $,m as y,j as W,s as X}from"./app-CW8FKIHI.js";import{_ as ke}from"./AuthenticatedLayout-Of_FcXFa.js";import{_ as R}from"./PrimaryButton-D2jVOVRa.js";import{D as Ue}from"./DangerButton-DEPIXFpW.js";import{_ as Y}from"./Modal-9Kv6KwYw.js";import{_ as v}from"./InputLabel-2WBNjNyf.js";import{_ as x}from"./TextInput-C38JnGvq.js";import{_}from"./InputError-uybBfR1J.js";import{_ as Z}from"./SecondaryButton-BUMkGMtJ.js";import{r as G}from"./UsersIcon-B97I5XQS.js";import{r as Ce}from"./MagnifyingGlassIcon-CCacs09p.js";import{r as Ve,a as je}from"./PlusIcon-DcK27ewR.js";import"./index-8IV6XVwS.js";import"./BaseFormModal-DzYIKs4C.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./SelectDropdown-DPdfw3x9.js";/* empty css                                                                       */import"./debounce-C-hnF4Z3.js";import"./ApplicationLogo-DcTuxAyY.js";import"./createLucideIcon-Bv1CWJst.js";import"./plus-D7Cjlg0D.js";import"./moment-BLMuvzoS.js";import"./NoticeboardModal-BagKigTg.js";function $e(H,c){return n(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z"})])}function ze(H,c){return n(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m9 9 6-6m0 0 6 6m-6-6v12a6 6 0 0 1-12 0v-3"})])}function Me(H,c){return n(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M20.25 14.15v4.25c0 1.094-.787 2.036-1.872 2.18-2.087.277-4.216.42-6.378.42s-4.291-.143-6.378-.42c-1.085-.144-1.872-1.086-1.872-2.18v-4.25m16.5 0a2.18 2.18 0 0 0 .75-1.661V8.706c0-1.081-.768-2.015-1.837-2.175a48.114 48.114 0 0 0-3.413-.387m4.5 8.006c-.194.165-.42.295-.673.38A23.978 23.978 0 0 1 12 15.75c-2.648 0-5.195-.429-7.577-1.22a2.016 2.016 0 0 1-.673-.38m0 0A2.18 2.18 0 0 1 3 12.489V8.706c0-1.081.768-2.015 1.837-2.175a48.111 48.111 0 0 1 3.413-.387m7.5 0V5.25A2.25 2.25 0 0 0 13.5 3h-3a2.25 2.25 0 0 0-2.25 2.25v.894m7.5 0a48.667 48.667 0 0 0-7.5 0M12 12.75h.008v.008H12v-.008Z"})])}const Ae={class:"py-6 sm:py-12"},Se={class:"px-4 sm:px-6 lg:px-8"},Ee={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},Ne={class:"bg-white rounded-2xl shadow-sm p-6 flex items-center justify-between transition-all duration-300 hover:shadow-md hover:scale-105"},Pe={class:"text-3xl font-bold text-gray-900 mt-1"},De={class:"bg-white rounded-2xl shadow-sm p-6 flex items-center justify-between transition-all duration-300 hover:shadow-md hover:scale-105"},qe={class:"text-3xl font-bold text-gray-900 mt-1"},Be={class:"bg-white rounded-2xl shadow-sm p-6 flex items-center justify-between transition-all duration-300 hover:shadow-md hover:scale-105"},Fe={class:"text-3xl font-bold text-gray-900 mt-1"},Le={class:"bg-white rounded-2xl shadow-sm p-6 flex items-center justify-between transition-all duration-300 hover:shadow-md hover:scale-105"},Re={class:"text-3xl font-bold text-gray-900 mt-1"},He={class:"bg-white rounded-2xl shadow-xl overflow-hidden"},Oe={class:"p-6"},Ye={class:"flex flex-col md:flex-row justify-between items-center mb-6 gap-4"},Ze={class:"w-full md:w-auto flex flex-col sm:flex-row gap-4 items-center"},Ge={class:"relative w-full"},Qe={class:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"},Te=["value"],Je=["value"],Ke={key:0,class:"text-center p-12"},We={key:1,class:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded-lg",role:"alert"},Xe={key:2,class:"text-center p-12"},Ie={key:3},es={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"},ss={class:"flex items-center space-x-4 mb-4"},ls={class:"flex-shrink-0"},ts={class:"text-xl font-bold text-gray-900"},os={class:"text-sm text-gray-500 truncate"},as={class:"flex flex-wrap gap-2 mb-4"},rs={class:"inline-flex items-center rounded-full px-3 py-1 text-xs font-medium bg-gray-50 text-gray-600 ring-1 ring-inset ring-gray-500/10"},ns={class:"text-sm text-gray-600 mt-auto"},is={key:0,class:"text-xs mt-1 text-gray-500"},ds={key:0,class:"group relative inline-block cursor-pointer text-indigo-500 hover:text-indigo-700"},us={class:"absolute z-10 bottom-full left-1/2 -translate-x-1/2 mb-2 w-max p-2 bg-gray-800 text-white text-xs rounded-md shadow-lg opacity-0 group-hover:opacity-100 transition-opacity"},ms={class:"list-none p-0 m-0"},cs={key:1,class:"text-xs text-gray-400 mt-1"},vs={class:"mt-4 flex justify-end gap-2"},ps=["onClick"],gs=["onClick"],fs=["onClick"],ws={class:"p-6"},_s={key:0,class:"text-red-600 text-sm mb-4"},ys={class:"mb-4"},xs={class:"mb-4"},bs={class:"mb-4"},hs={class:"mb-4"},ks={class:"mb-4"},Us=["value","disabled"],Cs={class:"mb-4"},Vs={class:"mb-4"},js={class:"mt-6 flex justify-end"},$s={class:"p-6"},zs={key:0,class:"text-red-600 text-sm mb-4"},Ms={class:"mb-4"},As={class:"mb-4"},Ss={class:"mb-4"},Es={class:"mb-4"},Ns={class:"mb-4"},Ps=["disabled"],Ds=["value","disabled"],qs={class:"mb-4"},Bs={class:"mb-4"},Fs={class:"mt-6 flex justify-end"},Ls={class:"p-6"},Rs={key:0,class:"mt-4 text-gray-800"},Hs={key:1,class:"text-red-600 text-sm mb-4"},Os={class:"mt-6 flex justify-end"},vl={__name:"Index",setup(H){const c=U(()=>we().props.auth.user),{canDo:Q}=_e(),b=g([]),O=g(!0),r=g({}),d=g(""),P=g(""),D=g(""),q=g(""),B=g("active"),A=g(!1),S=g(!1),E=g(!1),a=ye({id:null,name:"",email:"",password:"",password_confirmation:"",role:"contractor",role_id:4,user_type:"contractor",timezone:""}),h=g(null),p=g([]),I=U(()=>{const l=b.value.flatMap(s=>s.projects||[]);return[...new Set(l.map(s=>s.id))].map(s=>{const m=l.find(k=>k.id===s);return{value:m.id,label:m.name}})}),ee=U(()=>b.value.length),se=U(()=>b.value.filter(l=>{var e;return((e=l.role_data)==null?void 0:e.slug)==="manager"||l.role==="manager"||l.role==="manager-role"||l.role==="manager_role"}).length),le=U(()=>b.value.filter(l=>{var e;return((e=l.role_data)==null?void 0:e.slug)==="employee"||l.role==="employee"}).length),te=U(()=>b.value.filter(l=>{var e;return((e=l.role_data)==null?void 0:e.slug)==="contractor"||l.role==="contractor"}).length),T=U(()=>{let l=b.value;if(D.value&&(l=l.filter(e=>{var m,k;return(((m=e.role_data)==null?void 0:m.id)||((k=p.value.find(L=>L.slug===e.role))==null?void 0:k.value))===D.value})),q.value&&(l=l.filter(e=>e.projects&&e.projects.some(s=>s.id===q.value))),P.value){const e=P.value.toLowerCase();l=l.filter(s=>s.name.toLowerCase().includes(e)||s.email.toLowerCase().includes(e))}return l}),oe=async()=>{try{const l=await window.axios.get("/api/roles?type=application");p.value=l.data.map(e=>({value:e.id,slug:e.slug.replace(/-/g,"_"),label:e.name}))}catch(l){console.error("Error fetching roles:",l),p.value=[{value:1,slug:"super_admin",label:"Super Admin"},{value:2,slug:"manager",label:"Manager"},{value:3,slug:"employee",label:"Employee"},{value:4,slug:"contractor",label:"Contractor"}]}},F=U(()=>{var l;return c.value?((l=c.value.role_data)==null?void 0:l.slug)==="super-admin"||c.value.role==="super_admin"||c.value.role==="super-admin":!1}),ae=U(()=>{var l;return c.value?((l=c.value.role_data)==null?void 0:l.slug)==="manager"||c.value.role==="manager"||c.value.role==="manager-role"||c.value.role==="manager_role":!1}),J=Q("delete_users"),re=Q("create_users"),z=async()=>{O.value=!0,d.value="";try{const l={};B.value==="all"?l.with_trashed=1:B.value==="archived"&&(l.only_trashed=1);const e=await window.axios.get("/api/users",{params:l});b.value=e.data}catch(l){d.value="Failed to fetch users.",console.error("Error fetching users:",l),l.response&&l.response.status===403?d.value="You do not have permission to view users.":l.response&&l.response.status===401&&(d.value="Session expired. Please log in again.",localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),window.location.href="/login")}finally{O.value=!1}},ne=()=>{a.id=null,a.name="",a.email="",a.password="",a.password_confirmation="";const l=p.value.find(e=>e.slug==="contractor");a.role_id=(l==null?void 0:l.value)||(p.value.length>0?p.value[0].value:4),a.role=(l==null?void 0:l.slug)||"contractor",a.user_type="contractor";try{a.timezone=Intl.DateTimeFormat().resolvedOptions().timeZone||""}catch{a.timezone=""}r.value={},d.value="",A.value=!0},ie=async()=>{r.value={},d.value="";try{const l=await window.axios.post("/api/users",a);b.value.push(l.data),A.value=!1,console.log("User created successfully!"),z()}catch(l){l.response&&l.response.status===422?r.value=l.response.data.errors:l.response&&l.response.data.message?d.value=l.response.data.message:(d.value="Failed to create user.",console.error("Error creating user:",l))}},de=l=>{if(a.id=l.id,a.name=l.name,a.email=l.email,a.timezone=l.timezone||"",l.role_data&&l.role_data.id)a.role_id=l.role_data.id,a.role=l.role_data.slug.replace(/-/g,"_");else{const e=typeof l.role=="string"?l.role.replace(/-/g,"_"):"employee",s=p.value.find(m=>m.slug===e);a.role_id=(s==null?void 0:s.value)||(p.value.length>0?p.value[0].value:null),a.role=e}a.user_type=l.user_type||"employee",a.password="",a.password_confirmation="",r.value={},d.value="",S.value=!0},ue=async()=>{r.value={},d.value="";try{const l={...a};l.password||(delete l.password,delete l.password_confirmation);const e=await window.axios.put(`/api/users/${a.id}`,l),s=b.value.findIndex(m=>m.id===a.id);s!==-1&&(b.value[s]=e.data),S.value=!1,console.log("User updated successfully!"),z()}catch(l){l.response&&l.response.status===422?r.value=l.response.data.errors:l.response&&l.response.data.message?d.value=l.response.data.message:(d.value="Failed to update user.",console.error("Error updating user:",l))}},me=l=>{h.value=l,E.value=!0},ce=async()=>{d.value="";try{await window.axios.delete(`/api/users/${h.value.id}`),await z(),E.value=!1,h.value=null,console.log("User archived successfully!")}catch(l){d.value="Failed to archive user.",l.response&&l.response.data.message&&(d.value=l.response.data.message),console.error("Error archiving user:",l)}},ve=async l=>{d.value="";try{await window.axios.post(`/api/users/${l.id}/restore`),await z(),console.log("User restored successfully!")}catch(e){d.value="Failed to restore user.",e.response&&e.response.data.message&&(d.value=e.response.data.message),console.error("Error restoring user:",e)}},K=()=>{const l=p.value.find(e=>e.value===a.role_id);l&&(a.role=l.slug)},pe=l=>{if(!l||l.length===0)return"None";const e=l.map(m=>m.name);if(e.length<=2)return e.join(", ");const s=e.length-2;return`${e[0]}, ${e[1]} and ${s} more`};xe(()=>{z(),oe()});const ge=l=>{switch(typeof l=="string"?l.toLowerCase():(l==null?void 0:l.slug)||"employee"){case"super_admin":case"super-admin":return"bg-red-50 text-red-700 ring-red-600/20";case"manager":return"bg-indigo-50 text-indigo-700 ring-indigo-600/20";case"employee":return"bg-emerald-50 text-emerald-700 ring-emerald-600/20";case"contractor":return"bg-yellow-50 text-yellow-700 ring-yellow-600/20";default:return"bg-gray-50 text-gray-600 ring-gray-500/10"}},fe=l=>{const e=l.split("").reduce((m,k)=>m+k.charCodeAt(0),0),s=["bg-blue-500","bg-indigo-500","bg-purple-500","bg-pink-500","bg-rose-500","bg-orange-500","bg-amber-500","bg-lime-500","bg-emerald-500","bg-cyan-500"];return s[e%s.length]};return(l,e)=>(n(),i(j,null,[o(f(be),{title:"Users"}),o(ke,null,{header:w(()=>e[24]||(e[24]=[t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Users",-1)])),default:w(()=>[t("div",Ae,[t("div",Se,[t("div",Ee,[t("div",Ne,[t("div",null,[e[25]||(e[25]=t("h4",{class:"text-gray-500 font-medium text-sm"},"Total Users",-1)),t("p",Pe,u(ee.value),1)]),o(f(G),{class:"h-12 w-12 text-indigo-500 opacity-80"})]),t("div",De,[t("div",null,[e[26]||(e[26]=t("h4",{class:"text-gray-500 font-medium text-sm"},"Managers",-1)),t("p",qe,u(se.value),1)]),o(f(G),{class:"h-12 w-12 text-green-500 opacity-80"})]),t("div",Be,[t("div",null,[e[27]||(e[27]=t("h4",{class:"text-gray-500 font-medium text-sm"},"Employees",-1)),t("p",Fe,u(le.value),1)]),o(f(G),{class:"h-12 w-12 text-yellow-500 opacity-80"})]),t("div",Le,[t("div",null,[e[28]||(e[28]=t("h4",{class:"text-gray-500 font-medium text-sm"},"Contractors",-1)),t("p",Re,u(te.value),1)]),o(f(Me),{class:"h-12 w-12 text-pink-500 opacity-80"})])]),t("div",He,[t("div",Oe,[t("div",Ye,[e[33]||(e[33]=t("h3",{class:"text-2xl font-bold text-gray-900"},"User Management",-1)),t("div",Ze,[t("div",Ge,[t("div",Qe,[o(f(Ce),{class:"w-5 h-5 text-gray-400"})]),o(x,{id:"search",type:"text",class:"w-full pl-10 pr-3 py-2 rounded-lg",placeholder:"Search users...",modelValue:P.value,"onUpdate:modelValue":e[0]||(e[0]=s=>P.value=s)},null,8,["modelValue"])]),V(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>D.value=s),class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-lg shadow-sm w-full sm:w-40"},[e[29]||(e[29]=t("option",{value:""},"All Roles",-1)),(n(!0),i(j,null,M(p.value,s=>(n(),i("option",{key:s.value,value:s.value},u(s.label),9,Te))),128))],512),[[$,D.value]]),V(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>q.value=s),class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-lg shadow-sm w-full sm:w-40"},[e[30]||(e[30]=t("option",{value:""},"All Projects",-1)),(n(!0),i(j,null,M(I.value,s=>(n(),i("option",{key:s.value,value:s.value},u(s.label),9,Je))),128))],512),[[$,q.value]]),V(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>B.value=s),onChange:z,class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-lg shadow-sm w-full sm:w-40"},e[31]||(e[31]=[t("option",{value:"active"},"Active",-1),t("option",{value:"archived"},"Archived",-1),t("option",{value:"all"},"All",-1)]),544),[[$,B.value]]),f(re)?(n(),he(R,{key:0,onClick:ne,class:"w-full sm:w-auto"},{default:w(()=>[o(f(Ve),{class:"w-4 h-4 mr-2"}),e[32]||(e[32]=y(" Add User ",-1))]),_:1,__:[32]})):C("",!0)])]),O.value?(n(),i("div",Ke,e[34]||(e[34]=[t("svg",{class:"animate-spin h-10 w-10 text-indigo-500 mx-auto",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),t("p",{class:"text-gray-600 mt-4"},"Loading users...",-1)]))):d.value?(n(),i("div",We,[t("p",null,u(d.value),1)])):T.value.length===0?(n(),i("div",Xe,e[35]||(e[35]=[t("p",{class:"text-gray-600"},"No users found matching your criteria.",-1)]))):(n(),i("div",Ie,[t("div",es,[(n(!0),i(j,null,M(T.value,s=>{var m,k,L;return n(),i("div",{key:s.id,class:"bg-white rounded-2xl shadow-sm p-6 flex flex-col justify-between relative border border-gray-100 transition-all duration-300 hover:shadow-lg"},[t("div",null,[t("div",ss,[t("div",ls,[t("div",{class:W(["h-12 w-12 rounded-full flex items-center justify-center text-white font-bold text-lg",fe(s.name)])},u(s.name.charAt(0)),3)]),t("div",null,[t("p",ts,u(s.name),1),t("p",os,u(s.email),1)])]),t("div",as,[t("span",{class:W(["inline-flex items-center rounded-full px-3 py-1 text-xs font-medium ring-1 ring-inset",ge(((m=s.role_data)==null?void 0:m.slug)||s.role)])}," Role: "+u(((k=s.role_data)==null?void 0:k.name)||(typeof s.role=="string"?s.role.replace(/_|-/g," "):"Employee")),3),t("span",rs," Type: "+u(((L=s.user_type)==null?void 0:L.toUpperCase())||"EMPLOYEE"),1)]),t("div",ns,[e[38]||(e[38]=t("p",{class:"font-medium text-gray-800"},"Projects",-1)),s.projects&&s.projects.length?(n(),i("p",is,[y(u(pe(s.projects))+" ",1),s.projects.length>2?(n(),i("span",ds,[e[37]||(e[37]=y(" (more) ",-1)),t("span",us,[t("ul",ms,[(n(!0),i(j,null,M(s.projects,N=>(n(),i("li",{key:N.id,class:"whitespace-nowrap"},u(N.name),1))),128))]),e[36]||(e[36]=t("div",{class:"absolute w-3 h-3 bg-gray-800 transform rotate-45 -bottom-1 left-1/2 -translate-x-1/2"},null,-1))])])):C("",!0)])):(n(),i("p",cs,"No projects assigned."))])]),t("div",vs,[o(R,{as:"a",href:`/users/${s.id}`,title:"View User"},{default:w(()=>e[39]||(e[39]=[y("View",-1)])),_:2,__:[39]},1032,["href"]),F.value||ae.value?(n(),i("button",{key:0,onClick:N=>de(s),class:"p-2 rounded-full text-gray-400 hover:text-indigo-600 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-colors",title:"Edit User"},[o(f(je),{class:"h-5 w-5"})],8,ps)):C("",!0),f(J)&&s.id!==c.value.id&&!s.deleted_at?(n(),i("button",{key:1,onClick:N=>me(s),class:"p-2 rounded-full text-gray-400 hover:text-red-600 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-red-500 transition-colors",title:"Archive User"},[o(f($e),{class:"h-5 w-5"})],8,gs)):C("",!0),f(J)&&s.deleted_at?(n(),i("button",{key:2,onClick:N=>ve(s),class:"p-2 rounded-full text-gray-400 hover:text-green-600 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-green-500 transition-colors",title:"Unarchive User"},[o(f(ze),{class:"h-5 w-5"})],8,fs)):C("",!0)])])}),128))])]))])])])]),o(Y,{show:A.value,onClose:e[12]||(e[12]=s=>A.value=!1)},{default:w(()=>[t("div",ws,[e[43]||(e[43]=t("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Create New User",-1)),d.value?(n(),i("div",_s,u(d.value),1)):C("",!0),t("form",{onSubmit:X(ie,["prevent"])},[t("div",ys,[o(v,{for:"create_name",value:"Name"}),o(x,{id:"create_name",type:"text",class:"mt-1 block w-full",modelValue:a.name,"onUpdate:modelValue":e[4]||(e[4]=s=>a.name=s),required:"",autofocus:""},null,8,["modelValue"]),o(_,{message:r.value.name?r.value.name[0]:"",class:"mt-2"},null,8,["message"])]),t("div",xs,[o(v,{for:"create_email",value:"Email"}),o(x,{id:"create_email",type:"email",class:"mt-1 block w-full",modelValue:a.email,"onUpdate:modelValue":e[5]||(e[5]=s=>a.email=s),required:""},null,8,["modelValue"]),o(_,{message:r.value.email?r.value.email[0]:"",class:"mt-2"},null,8,["message"])]),t("div",bs,[o(v,{for:"create_password",value:"Password"}),o(x,{id:"create_password",type:"password",class:"mt-1 block w-full",modelValue:a.password,"onUpdate:modelValue":e[6]||(e[6]=s=>a.password=s),required:"",autocomplete:"new-password"},null,8,["modelValue"]),o(_,{message:r.value.password?r.value.password[0]:"",class:"mt-2"},null,8,["message"])]),t("div",hs,[o(v,{for:"create_password_confirmation",value:"Confirm Password"}),o(x,{id:"create_password_confirmation",type:"password",class:"mt-1 block w-full",modelValue:a.password_confirmation,"onUpdate:modelValue":e[7]||(e[7]=s=>a.password_confirmation=s),required:"",autocomplete:"new-password"},null,8,["modelValue"])]),t("div",ks,[o(v,{for:"create_role",value:"Role"}),V(t("select",{id:"create_role",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full","onUpdate:modelValue":e[8]||(e[8]=s=>a.role_id=s),onChange:K},[(n(!0),i(j,null,M(p.value,s=>(n(),i("option",{key:s.value,value:s.value,disabled:!F.value&&(s.slug==="super_admin"||s.slug==="manager")},u(s.label),9,Us))),128))],544),[[$,a.role_id]]),o(_,{message:r.value.role_id?r.value.role_id[0]:r.value.role?r.value.role[0]:"",class:"mt-2"},null,8,["message"])]),t("div",Cs,[o(v,{for:"create_user_type",value:"User Type"}),V(t("select",{id:"create_user_type",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full","onUpdate:modelValue":e[9]||(e[9]=s=>a.user_type=s)},e[40]||(e[40]=[t("option",{value:"employee"},"Employee",-1),t("option",{value:"contractor"},"Contractor",-1)]),512),[[$,a.user_type]]),o(_,{message:r.value.user_type?r.value.user_type[0]:"",class:"mt-2"},null,8,["message"])]),t("div",Vs,[o(v,{for:"create_timezone",value:"Timezone"}),o(x,{id:"create_timezone",type:"text",class:"mt-1 block w-full",modelValue:a.timezone,"onUpdate:modelValue":e[10]||(e[10]=s=>a.timezone=s),placeholder:"e.g., America/New_York"},null,8,["modelValue"]),o(_,{message:r.value.timezone?r.value.timezone[0]:"",class:"mt-2"},null,8,["message"])]),t("div",js,[o(Z,{onClick:e[11]||(e[11]=s=>A.value=!1)},{default:w(()=>e[41]||(e[41]=[y("Cancel",-1)])),_:1,__:[41]}),o(R,{class:"ms-3",type:"submit"},{default:w(()=>e[42]||(e[42]=[y("Create User",-1)])),_:1,__:[42]})])],32)])]),_:1},8,["show"]),o(Y,{show:S.value,onClose:e[21]||(e[21]=s=>S.value=!1)},{default:w(()=>[t("div",$s,[e[47]||(e[47]=t("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Edit User",-1)),d.value?(n(),i("div",zs,u(d.value),1)):C("",!0),t("form",{onSubmit:X(ue,["prevent"])},[t("div",Ms,[o(v,{for:"edit_name",value:"Name"}),o(x,{id:"edit_name",type:"text",class:"mt-1 block w-full",modelValue:a.name,"onUpdate:modelValue":e[13]||(e[13]=s=>a.name=s),required:"",autofocus:""},null,8,["modelValue"]),o(_,{message:r.value.name?r.value.name[0]:"",class:"mt-2"},null,8,["message"])]),t("div",As,[o(v,{for:"edit_email",value:"Email"}),o(x,{id:"edit_email",type:"email",class:"mt-1 block w-full",modelValue:a.email,"onUpdate:modelValue":e[14]||(e[14]=s=>a.email=s),required:""},null,8,["modelValue"]),o(_,{message:r.value.email?r.value.email[0]:"",class:"mt-2"},null,8,["message"])]),t("div",Ss,[o(v,{for:"edit_password",value:"Password (leave blank to keep current)"}),o(x,{id:"edit_password",type:"password",class:"mt-1 block w-full",modelValue:a.password,"onUpdate:modelValue":e[15]||(e[15]=s=>a.password=s),autocomplete:"new-password"},null,8,["modelValue"]),o(_,{message:r.value.password?r.value.password[0]:"",class:"mt-2"},null,8,["message"])]),t("div",Es,[o(v,{for:"edit_password_confirmation",value:"Confirm Password"}),o(x,{id:"edit_password_confirmation",type:"password",class:"mt-1 block w-full",modelValue:a.password_confirmation,"onUpdate:modelValue":e[16]||(e[16]=s=>a.password_confirmation=s),autocomplete:"new-password"},null,8,["modelValue"])]),t("div",Ns,[o(v,{for:"edit_role",value:"Role"}),V(t("select",{id:"edit_role",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full","onUpdate:modelValue":e[17]||(e[17]=s=>a.role_id=s),onChange:K,disabled:!F.value&&a.id===c.value.id},[(n(!0),i(j,null,M(p.value,s=>(n(),i("option",{key:s.value,value:s.value,disabled:!F.value&&(s.slug==="super_admin"||s.slug==="manager")&&a.id!==c.value.id},u(s.label),9,Ds))),128))],40,Ps),[[$,a.role_id]]),o(_,{message:r.value.role_id?r.value.role_id[0]:r.value.role?r.value.role[0]:"",class:"mt-2"},null,8,["message"])]),t("div",qs,[o(v,{for:"edit_user_type",value:"User Type"}),V(t("select",{id:"edit_user_type",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full","onUpdate:modelValue":e[18]||(e[18]=s=>a.user_type=s)},e[44]||(e[44]=[t("option",{value:"employee"},"Employee",-1),t("option",{value:"contractor"},"Contractor",-1)]),512),[[$,a.user_type]]),o(_,{message:r.value.user_type?r.value.user_type[0]:"",class:"mt-2"},null,8,["message"])]),t("div",Bs,[o(v,{for:"edit_timezone",value:"Timezone"}),o(x,{id:"edit_timezone",type:"text",class:"mt-1 block w-full",modelValue:a.timezone,"onUpdate:modelValue":e[19]||(e[19]=s=>a.timezone=s),placeholder:"e.g., Europe/London"},null,8,["modelValue"]),o(_,{message:r.value.timezone?r.value.timezone[0]:"",class:"mt-2"},null,8,["message"])]),t("div",Fs,[o(Z,{onClick:e[20]||(e[20]=s=>S.value=!1)},{default:w(()=>e[45]||(e[45]=[y("Cancel",-1)])),_:1,__:[45]}),o(R,{class:"ms-3",type:"submit"},{default:w(()=>e[46]||(e[46]=[y("Update User",-1)])),_:1,__:[46]})])],32)])]),_:1},8,["show"]),o(Y,{show:E.value,onClose:e[23]||(e[23]=s=>E.value=!1)},{default:w(()=>{var s;return[t("div",Ls,[e[51]||(e[51]=t("h2",{class:"text-lg font-medium text-gray-900"}," Archive this user? ",-1)),e[52]||(e[52]=t("p",{class:"mt-1 text-sm text-gray-600"}," The user will be archived and can be unarchived later. No data will be permanently removed. ",-1)),h.value?(n(),i("div",Rs,[e[48]||(e[48]=t("strong",null,"User:",-1)),y(" "+u(h.value.name)+" ("+u(h.value.email)+") - Role: "+u(((s=h.value.role_data)==null?void 0:s.name)||(typeof h.value.role=="string"?h.value.role:"Employee")),1)])):C("",!0),d.value?(n(),i("div",Hs,u(d.value),1)):C("",!0),t("div",Os,[o(Z,{onClick:e[22]||(e[22]=m=>E.value=!1)},{default:w(()=>e[49]||(e[49]=[y("Cancel",-1)])),_:1,__:[49]}),o(Ue,{class:"ms-3",onClick:ce},{default:w(()=>e[50]||(e[50]=[y("Archive User",-1)])),_:1,__:[50]})])])]}),_:1},8,["show"])]),_:1})],64))}};export{vl as default};
