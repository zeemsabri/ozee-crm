import{r as v,C as T,c as R,f as U,a as d,o as c,d as h,u as C,h as W,w as b,b as t,i as z,t as r,v as H,x as G,k as L,aU as O,F as I,l as Y,j as _,m as P,A as q}from"./app-CtYe1nZP.js";import{_ as K}from"./AuthenticatedLayout-CaUlbJHV.js";import{_ as J}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./PrimaryButton-C52jDuHc.js";import"./Modal-aaZc6f-E.js";import"./InputLabel-DlrU256t.js";import"./InputError-7MDCEeMH.js";import"./SecondaryButton-BnowysYe.js";import"./index-Cdf-AUrg.js";import"./BaseFormModal-BR8F78HS.js";import"./TextInput-CMne-ii-.js";import"./SelectDropdown-DIUru6u0.js";/* empty css                                                                       */import"./debounce-C-hnF4Z3.js";import"./ApplicationLogo-CCAfJ3sF.js";import"./MultiSelectDropdown-CUq5I0RH.js";import"./createLucideIcon-B0NuR17f.js";import"./plus-CXJDgOs6.js";import"./DangerButton-CkhrSt2q.js";import"./moment-BLMuvzoS.js";import"./NoticeboardModal-CHtCwSc6.js";const Q={class:"flex items-center justify-between"},X={class:"py-12"},Z={class:"max-w-4xl mx-auto sm:px-6 lg:px-8"},tt={class:"flex flex-col items-center bg-white overflow-hidden shadow-xl sm:rounded-lg p-8"},et={class:"w-full grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-6"},st={class:"bg-yellow-50 border border-yellow-200 rounded-xl p-4"},ot={class:"text-2xl font-bold text-yellow-800"},at={class:"bg-green-50 border border-green-200 rounded-xl p-4"},lt={class:"text-2xl font-bold text-green-800"},nt={class:"bg-blue-50 border border-blue-200 rounded-xl p-4"},rt={class:"text-2xl font-bold text-blue-800"},it={class:"bg-indigo-50 border border-indigo-200 rounded-xl p-4"},dt={class:"text-2xl font-bold text-indigo-800"},ct={class:"bg-purple-50 border border-purple-200 rounded-xl p-4"},xt={class:"text-2xl font-bold text-purple-800"},ut={class:"bg-orange-50 border border-orange-200 rounded-xl p-4"},mt={class:"text-2xl font-bold text-orange-800"},gt={class:"w-full max-w-2xl mb-4"},pt={key:0,class:"text-gray-500"},vt={class:"flex items-center space-x-4"},ft={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"w-6 h-6 ml-2 text-yellow-400 inline-block"},ht={class:"flex items-center space-x-2"},bt={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"w-6 h-6 text-gray-500"},wt={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"w-6 h-6 text-gray-500"},yt={class:"text-lg sm:text-xl font-semibold text-gray-900"},_t={class:"flex items-center space-x-2"},kt={key:0,class:"congrats-overlay fixed inset-0 flex items-center justify-center z-50 p-4"},Mt={class:"bg-white p-8 sm:p-12 rounded-3xl shadow-2xl text-gray-900 text-center border-4 border-yellow-400 relative"},Tt={class:"text-4xl sm:text-5xl font-extrabold mb-4"},Ct={class:"text-xl sm:text-2xl font-semibold"},S=96,zt={__name:"Index",setup(Lt){const w=v(!0),k=v([]),i=v([]),x=v(null),l=v(null),n=T({show:!1,message:{title:"",text:""}}),m=T({daysLeftInMonth:0,userMonthlyPoints:0,pendingTasksAcrossAccessibleProjects:0,standupsThisMonth:0,tasksCompletedThisMonthByUser:0,pointsNeededForTop:0}),f=v(""),M=R(()=>{if(!f.value)return i.value;const o=f.value.toLowerCase();return i.value.filter(e=>(e.name||"").toLowerCase().includes(o))});let y=null;function B(o){return l.value?o.id===l.value.id?20:i.value.length-o.rank:1}function F(){n.show=!1,n.message={title:"",text:""}}function j(o){const e=l.value&&o.id===l.value.id,a=x.value&&o.id===String(x.value);let s="";if(e)s+=" bg-gradient-to-r from-yellow-500 to-orange-500 text-white z-20";else if(a)s+=" bg-cyan-50 border-2 border-cyan-600 text-gray-900 shadow-2xl z-10";else switch(o.rank){case 1:s+=" bg-gray-200 border-2 border-yellow-500 text-gray-900 z-10";break;case 2:s+=" bg-gray-200 border-2 border-gray-400 text-gray-900";break;case 3:s+=" bg-gray-200 border-2 border-orange-500 text-gray-900";break;default:s+=" bg-white border border-gray-300 text-gray-900";break}return s}function A(o){const e=l.value&&o.id===l.value.id,a=x.value&&o.id===String(x.value);if(e)return"text-white";if(a)return"text-cyan-600";switch(o.rank){case 1:return"text-yellow-600";case 2:return"text-gray-400";case 3:return"text-orange-600";default:return"text-gray-500"}}function V(o){return x.value&&o.id===String(x.value)?"text-3xl sm:text-4xl":"text-2xl sm:text-3xl"}function $(o){return l.value&&o.id===l.value.id?"text-white":"text-green-600"}function N(){const o=k.value.reduce((a,s)=>Math.max(a,s.finalPoints||0),0),e=o>1e3?100:o>200?25:10;y=setInterval(()=>{let a=!0;if(i.value.forEach(s=>{if(s.points<s.finalPoints){const u=Math.floor(Math.random()*e)+1;s.points=Math.min(s.points+u,s.finalPoints),a=!1}}),i.value.sort((s,u)=>u.points-s.points),i.value=i.value.map((s,u)=>({...s,rank:u+1})),a){clearInterval(y),y=null;const s=i.value.find(u=>String(u.id)===String(x.value));s&&(s.rank===1?(n.show=!0,n.message={title:"Congratulations!",text:`${s.name}, you are on the top of the leaderboard!`}):s.rank<=3?(n.show=!0,n.message={title:"Well done!",text:`${s.name}, you made it to the top 3!`}):(n.show=!0,n.message={title:"Final Standings!",text:`Hey ${s.name}, you finished at rank ${s.rank}! Keep submitting your standups on time and completing tasks to climb the ranks. You're doing great!`}))}},200)}async function D(){try{const o=await window.axios.get("/api/user");x.value=o.data.id;const[e,a]=await Promise.all([window.axios.get("/api/leaderboard/stats"),window.axios.get("/api/leaderboard/monthly")]);Object.assign(m,e.data||{});const s=Array.isArray(a.data.leaderboard)?a.data.leaderboard:[];l.value=s.reduce((g,p)=>g&&g.finalPoints>p.finalPoints?g:p,null);const E=[...s.filter(g=>{var p;return g.id!==(((p=l.value)==null?void 0:p.id)??"")}).sort(()=>Math.random()-.5),l.value].filter(Boolean);k.value=s,i.value=E.map((g,p)=>({...g,points:0,rank:p+1})),w.value=!1,N()}catch(o){console.error("Failed to load leaderboard",o),w.value=!1}}return U(()=>{D()}),(o,e)=>(c(),d(I,null,[h(C(W),{title:"Leaderboard"}),h(K,null,{header:b(()=>[t("div",Q,[e[2]||(e[2]=t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Monthly Leaderboard ",-1)),h(C(q),{href:o.route("ledger.index"),class:"inline-flex items-center px-4 py-2 bg-cyan-600 hover:bg-cyan-700 text-white rounded-md"},{default:b(()=>e[1]||(e[1]=[P("Ledger",-1)])),_:1,__:[1]},8,["href"])])]),default:b(()=>[t("div",X,[t("div",Z,[t("div",tt,[e[13]||(e[13]=t("h1",{class:"text-5xl sm:text-6xl font-extrabold text-center mb-10 text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 via-orange-500 to-red-500 animate-pulse-glow"}," Monthly Leaderboard ",-1)),t("div",et,[t("div",st,[e[3]||(e[3]=t("div",{class:"text-sm text-yellow-700"},"Days left in month",-1)),t("div",ot,r(m.daysLeftInMonth),1)]),t("div",at,[e[4]||(e[4]=t("div",{class:"text-sm text-green-700"},"Your points (this month)",-1)),t("div",lt,r(m.userMonthlyPoints),1)]),t("div",nt,[e[5]||(e[5]=t("div",{class:"text-sm text-blue-700"},"Pending tasks (accessible)",-1)),t("div",rt,r(m.pendingTasksAcrossAccessibleProjects),1)]),t("div",it,[e[6]||(e[6]=t("div",{class:"text-sm text-indigo-700"},"Standups submitted (this month)",-1)),t("div",dt,r(m.standupsThisMonth),1)]),t("div",ct,[e[7]||(e[7]=t("div",{class:"text-sm text-purple-700"},"Tasks completed (this month)",-1)),t("div",xt,r(m.tasksCompletedThisMonthByUser),1)]),t("div",ut,[e[8]||(e[8]=t("div",{class:"text-sm text-orange-700"},"Points needed to reach Top",-1)),t("div",mt,r(m.pointsNeededForTop),1)])]),t("div",gt,[H(t("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>f.value=a),type:"text",placeholder:"Search by name...",class:"w-full border border-gray-300 rounded-xl px-4 py-2 focus:outline-none focus:ring-2 focus:ring-cyan-500"},null,512),[[G,f.value]])]),w.value?(c(),d("div",pt,"Loading leaderboard...")):(c(),d("div",{key:1,class:"w-full max-w-2xl relative mx-auto overflow-hidden",style:L({height:`${M.value.length*S}px`})},[h(O,{name:"rank",tag:"div",class:"relative"},{default:b(()=>[(c(!0),d(I,null,Y(M.value,(a,s)=>(c(),d("div",{key:a.id,class:"absolute w-full transition-transform duration-300",style:L({transform:`translate3d(0, ${s*S}px, 0)`,zIndex:B(a)})},[t("div",{class:_([j(a),"relative flex items-center justify-between p-4 sm:p-6 rounded-2xl transition-all duration-300 transform hover:scale-105 shadow-xl my-2"])},[t("div",vt,[t("span",{class:_(["font-extrabold",[A(a),V(a)]])},[P(r(a.rank)+" ",1),a.rank===1?(c(),d("svg",ft,e[9]||(e[9]=[t("path",{"fill-rule":"evenodd",d:"M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.007 5.404.433c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.694 21.05c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.433 2.082-5.006z","clip-rule":"evenodd"},null,-1)]))):z("",!0)],2),t("div",ht,[a.userType==="Employee"?(c(),d("svg",bt,e[10]||(e[10]=[t("path",{"fill-rule":"evenodd",d:"M7.5 6a4.5 4.5 0 119 0 4.5 4.5 0 01-9 0zM3.751 20.105a8.25 8.25 0 0116.498 0 .75.75 0 01-.001.915 2.25 2.25 0 01-1.615 1.056c-1.334.252-2.33.582-2.651.921l-1.086 1.1c-.241.246-.59.246-.831 0l-1.086-1.1c-.321-.339-1.317-.669-2.651-.92a2.25 2.25 0 01-1.615-1.056.75.75 0 01-.001-.915z","clip-rule":"evenodd"},null,-1)]))):(c(),d("svg",wt,e[11]||(e[11]=[t("path",{d:"M18.375 2.25a.75.75 0 00-.75.75v15.75a.75.75 0 001.5 0V3a.75.75 0 00-.75-.75zM15.75 6.75a.75.75 0 00-.75.75v12.75a.75.75 0 001.5 0V7.5a.75.75 0 00-.75-.75zM13.125 10.5a.75.75 0 00-.75.75v8.25a.75.75 0 001.5 0v-8.25a.75.75 0 00-.75-.75zM10.5 14.25a.75.75 0 00-.75.75v4.5a.75.75 0 001.5 0v-4.5a.75.75 0 00-.75-.75zM7.875 16.5a.75.75 0 00-.75.75v2.25a.75.75 0 001.5 0v-2.25a.75.75 0 00-.75-.75zM4.5 20.25a.75.75 0 00-.75.75v1.5a.75.75 0 001.5 0v-1.5a.75.75 0 00-.75-.75z"},null,-1)]))),t("span",yt,r(a.name),1)])]),t("div",_t,[t("span",{class:_(["text-xl sm:text-2xl font-bold",$(a)])},r(Math.round(a.points)),3),e[12]||(e[12]=t("span",{class:"text-gray-500"},"pts",-1))])],2)],4))),128))]),_:1})],4))])])]),n.show?(c(),d("div",kt,[t("div",Mt,[t("button",{onClick:F,class:"absolute top-4 right-4 text-gray-400 hover:text-gray-900 transition-colors"},e[14]||(e[14]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),t("h2",Tt,r(n.message.title),1),t("p",Ct,r(n.message.text),1)])])):z("",!0)]),_:1})],64))}},Qt=J(zt,[["__scopeId","data-v-a2bc3111"]]);export{Qt as default};
