import{C as Y,c as W,f as j,e as H,g as L,o as c,w as D,b as e,d as a,v as C,x as J,W as S,r as g,a as p,i as R,j as T,t as b,m as G,F,l as A,K as Q,N,J as B}from"./app-CsGDI9I1.js";import{T as X,C as Z,_ as ee}from"./AuthenticatedLayout-D8yYfhLS.js";import{B as te}from"./BaseFormModal-B8clMgrl.js";import{_}from"./InputLabel-OiR27gXc.js";import{_ as U}from"./TextInput-D6Yzc9q6.js";import{_ as w}from"./InputError-Cjeo-V8E.js";import{S as se}from"./SelectDropdown-1YLG6EIf.js";import{_ as le}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as oe}from"./PrimaryButton-Bpvtjedi.js";import"./Modal-BKxglYZo.js";import"./SecondaryButton-tog5OQru.js";import"./index-BtL231jo.js";import"./debounce-C-hnF4Z3.js";import"./ApplicationLogo-Dk8h9cFJ.js";import"./createLucideIcon-B-MJot2i.js";import"./plus-DDMyVbUp.js";import"./DangerButton-y2pT8XJr.js";import"./moment-BLMuvzoS.js";import"./NoticeboardModal-_vxU9TJZ.js";/* empty css                                                                       */const ie={class:"space-y-4"},ae={class:"mt-4"},ne={class:"flex items-center space-x-6"},re={class:"inline-flex items-center"},de={class:"inline-flex items-center"},ue={class:"inline-flex items-center"},ce={__name:"EditForm",props:{show:{type:Boolean,default:!1},apiEndpoint:{type:String,required:!0},resource:{type:Object,required:!0}},emits:["close","resourceUpdated"],setup($,{emit:v}){const l=$,y=v,s=Y({title:"",description:"",url:"",type:"website",thumbnail_url:"",visible_to_client:!0,visibility:"client",tags:[]}),f=W(()=>[{value:"website",label:"Website"},{value:"youtube",label:"YouTube Video"},{value:"document",label:"Document"},{value:"image",label:"Image"},{value:"other",label:"Other"}]);j(()=>{x()});const x=()=>{if(l.resource){s.title=l.resource.title||"",s.description=l.resource.description||"",s.url=l.resource.url||"",s.type=l.resource.type||"website",s.thumbnail_url=l.resource.thumbnail_url||"",s.visible_to_client=l.resource.visible_to_client!==void 0?l.resource.visible_to_client:!0,s.visibility=l.resource.is_private?"private":l.resource.visible_to_team?"team":"client";const o=l.resource.tags||[];s.tags=Array.isArray(o)?o.map(t=>typeof t=="object"&&t!==null?t.id:t).filter(t=>t!=null):[]}};H(()=>l.resource,()=>{x()},{immediate:!0,deep:!0});const m=o=>{const t=Array.isArray(o.tags)?o.tags:[];return{title:o.title,description:o.description,url:o.url,type:o.type,thumbnail_url:o.thumbnail_url,visibility:o.visibility,tags:t,tag_ids:t}},k=o=>{y("resourceUpdated",o),h()},h=()=>{y("close")};return(o,t)=>(c(),L(te,{show:l.show,title:"Edit Shareable Resource",apiEndpoint:`${l.apiEndpoint}/${l.resource.id}`,httpMethod:"put",formData:s,submitButtonText:"Update Resource",successMessage:"Shareable resource updated successfully!",formatDataForApi:m,onSubmitted:k,onClose:h},{default:D(({errors:r})=>{var V;return[e("div",ie,[e("div",null,[a(_,{for:"title",value:"Title",class:"mb-1"}),a(U,{id:"title",type:"text",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:s.title,"onUpdate:modelValue":t[0]||(t[0]=i=>s.title=i),required:""},null,8,["modelValue"]),a(w,{message:r.title?r.title[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[a(_,{for:"url",value:"Resource URL",class:"mb-1"}),a(U,{id:"url",type:"url",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:s.url,"onUpdate:modelValue":t[1]||(t[1]=i=>s.url=i),required:""},null,8,["modelValue"]),a(w,{message:r.url?r.url[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[a(_,{for:"type",value:"Resource Type",class:"mb-1"}),a(se,{id:"type",modelValue:s.type,"onUpdate:modelValue":t[2]||(t[2]=i=>s.type=i),options:f.value,valueKey:"value",labelKey:"label",placeholder:"Select Resource Type",required:"",class:"mt-1 block w-full"},null,8,["modelValue","options"]),a(w,{message:r.type?r.type[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[a(_,{for:"thumbnail_url",value:"Thumbnail URL (Optional)",class:"mb-1"}),a(U,{id:"thumbnail_url",type:"url",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:s.thumbnail_url,"onUpdate:modelValue":t[3]||(t[3]=i=>s.thumbnail_url=i)},null,8,["modelValue"]),a(w,{message:r.thumbnail_url?r.thumbnail_url[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[a(_,{for:"description",value:"Description (Optional)",class:"mb-1"}),C(e("textarea",{id:"description",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-lg shadow-sm mt-1 block w-full","onUpdate:modelValue":t[4]||(t[4]=i=>s.description=i),rows:"3"},null,512),[[J,s.description]]),a(w,{message:r.description?r.description[0]:"",class:"mt-2"},null,8,["message"])]),e("div",null,[a(X,{modelValue:s.tags,"onUpdate:modelValue":t[5]||(t[5]=i=>s.tags=i),initialTags:((V=l.resource)==null?void 0:V.tags)||[],label:"Associated Tags",placeholder:"Search or add tags",error:r.tags?r.tags[0]:""},null,8,["modelValue","initialTags","error"])]),e("div",ae,[a(_,{value:"Visibility",class:"mb-2"}),e("div",ne,[e("label",re,[C(e("input",{type:"radio",class:"form-radio",value:"client","onUpdate:modelValue":t[6]||(t[6]=i=>s.visibility=i)},null,512),[[S,s.visibility]]),t[9]||(t[9]=e("span",{class:"ml-2"},"Visible to Client",-1))]),e("label",de,[C(e("input",{type:"radio",class:"form-radio",value:"team","onUpdate:modelValue":t[7]||(t[7]=i=>s.visibility=i)},null,512),[[S,s.visibility]]),t[10]||(t[10]=e("span",{class:"ml-2"},"Visible to Team",-1))]),e("label",ue,[C(e("input",{type:"radio",class:"form-radio",value:"private","onUpdate:modelValue":t[8]||(t[8]=i=>s.visibility=i)},null,512),[[S,s.visibility]]),t[11]||(t[11]=e("span",{class:"ml-2"},"Private",-1))])]),a(w,{message:r.visibility?r.visibility[0]:"",class:"mt-2"},null,8,["message"])])])]}),_:1},8,["show","apiEndpoint","formData"]))}},pe=le(ce,[["__scopeId","data-v-1178752e"]]),me={class:"container mx-auto p-6 bg-gray-50 min-h-screen font-inter"},ge={class:"flex border-b border-gray-200 mb-6"},xe={class:"bg-white p-8 rounded-lg shadow-xl border border-gray-100"},be={key:0},ye={key:0,class:"text-center py-8"},ve={key:1,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert"},fe={class:"block sm:inline"},he={key:2,class:"text-center py-8 text-gray-600"},_e={key:3,class:"overflow-x-auto"},we={class:"min-w-full divide-y divide-gray-200"},ke={class:"bg-white divide-y divide-gray-200"},Ce={class:"px-6 py-4 whitespace-nowrap"},Ve={class:"text-sm font-medium text-gray-900"},Ee={key:0,class:"text-sm text-gray-500 mt-1 truncate max-w-xs"},Re={class:"px-6 py-4 whitespace-nowrap"},Te={class:"px-6 py-4 whitespace-nowrap text-sm text-indigo-600 hover:text-indigo-900"},$e=["href"],Se={class:"px-6 py-4 whitespace-nowrap"},Ue={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},De={class:"flex flex-wrap gap-1"},Me={key:0,class:"text-gray-400"},Fe={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},Ae={class:"flex justify-end space-x-3"},Ne=["onClick"],Be=["onClick"],je={key:0,class:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center z-50"},Le={class:"bg-white rounded-lg p-6 max-w-md w-full"},qe={class:"text-gray-600 mb-6"},nt={__name:"Index",props:{apiEndpoint:{type:String,default:"/api/shareable-resources"}},setup($){const v=$,l=g(!1),y=g(!1),s=g(!1),f=g(null),x=g(null),m=g("existing"),k=g([]),h=g(!1),o=g(null),t=async()=>{h.value=!0,o.value=null;try{const u=await window.axios.get(v.apiEndpoint);k.value=u.data.data,N("Resources loaded successfully!")}catch(u){console.error("Error fetching resources:",u),o.value="Failed to load resources. Please try again.",B(o.value)}finally{h.value=!1}},r=u=>{console.log("New resource created:",u),t(),l.value=!1,m.value="existing"},V=u=>{console.log("Resource updated:",u),t(),y.value=!1},i=()=>{l.value=!0,m.value="add-new"},q=u=>{f.value=u,y.value=!0},I=u=>{x.value=u,s.value=!0},O=async()=>{try{await window.axios.delete(`${v.apiEndpoint}/${x.value.id}`),N("Resource deleted successfully!"),t(),s.value=!1,x.value=null}catch(u){console.error("Error deleting resource:",u),B("Failed to delete resource. Please try again.")}},z=()=>{l.value=!1,m.value==="add-new"&&(m.value="existing")},K=()=>{y.value=!1,f.value=null},P=()=>{s.value=!1,x.value=null};return j(()=>{t()}),(u,d)=>(c(),L(ee,null,{default:D(()=>{var M;return[e("div",me,[d[7]||(d[7]=e("h1",{class:"text-4xl font-extrabold text-gray-900 mb-8 text-center"},"Shareable Resource Management",-1)),e("div",ge,[e("button",{onClick:d[0]||(d[0]=n=>m.value="existing"),class:T([["py-3 px-6 text-lg font-medium transition-all duration-200",m.value==="existing"?"border-b-4 border-indigo-600 text-indigo-700 bg-white shadow-sm":"text-gray-600 hover:text-gray-800 hover:border-gray-300"],"rounded-t-lg focus:outline-none"])}," Existing Resources ",2),e("button",{onClick:i,class:T([["py-3 px-6 text-lg font-medium transition-all duration-200",m.value==="add-new"?"border-b-4 border-indigo-600 text-indigo-700 bg-white shadow-sm":"text-gray-600 hover:text-gray-800 hover:border-gray-300"],"rounded-t-lg focus:outline-none"])}," Add New Resource ",2)]),e("div",xe,[m.value==="existing"?(c(),p("div",be,[d[5]||(d[5]=e("h2",{class:"text-2xl font-semibold text-gray-800 mb-6"},"Your Shareable Resources",-1)),h.value?(c(),p("div",ye,d[1]||(d[1]=[e("svg",{class:"animate-spin mx-auto h-10 w-10 text-indigo-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),e("p",{class:"mt-3 text-gray-600"},"Loading resources...",-1)]))):o.value?(c(),p("div",ve,[e("span",fe,b(o.value),1)])):k.value.length===0?(c(),p("div",he,[d[3]||(d[3]=e("p",{class:"text-lg"},"No shareable resources found. Start by adding a new one!",-1)),a(oe,{onClick:i,class:"mt-4"},{default:D(()=>d[2]||(d[2]=[G(" Add First Resource ",-1)])),_:1,__:[2]})])):(c(),p("div",_e,[e("table",we,[d[4]||(d[4]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Title"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Type"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"URL"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Visible to Client"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Tags"),e("th",{scope:"col",class:"relative px-6 py-3"},[e("span",{class:"sr-only"},"Edit")])])],-1)),e("tbody",ke,[(c(!0),p(F,null,A(k.value,n=>(c(),p("tr",{key:n.id},[e("td",Ce,[e("div",Ve,b(n.title),1),n.description?(c(),p("div",Ee,b(n.description),1)):R("",!0)]),e("td",Re,[e("span",{class:T(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",n.type==="youtube"?"bg-red-100 text-red-800":n.type==="website"?"bg-blue-100 text-blue-800":n.type==="document"?"bg-green-100 text-green-800":n.type==="image"?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"])},b(n.type),3)]),e("td",Te,[e("a",{href:n.url,target:"_blank",rel:"noopener noreferrer",class:"truncate max-w-xs block"},b(n.url),9,$e)]),e("td",Se,[e("span",{class:T(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",n.visible_to_client?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},b(n.visible_to_client?"Yes":"No"),3)]),e("td",Ue,[e("div",De,[(c(!0),p(F,null,A(n.tags,E=>(c(),p("span",{key:E.id,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800"},b(E.name),1))),128)),!n.tags||n.tags.length===0?(c(),p("span",Me,"No tags")):R("",!0)])]),e("td",Fe,[e("div",Ae,[e("button",{onClick:E=>q(n),class:"text-indigo-600 hover:text-indigo-900"},"Edit",8,Ne),e("button",{onClick:E=>I(n),class:"text-red-600 hover:text-red-900"},"Delete",8,Be)])])]))),128))])])]))])):R("",!0)]),a(Z,{show:l.value,apiEndpoint:v.apiEndpoint,onClose:z,onResourceCreated:r},null,8,["show","apiEndpoint"]),C(a(pe,{show:y.value,apiEndpoint:v.apiEndpoint,resource:f.value||{},onClose:K,onResourceUpdated:V},null,8,["show","apiEndpoint","resource"]),[[Q,f.value]]),s.value?(c(),p("div",je,[e("div",Le,[d[6]||(d[6]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Confirm Delete",-1)),e("p",qe,' Are you sure you want to delete the resource "'+b((M=x.value)==null?void 0:M.title)+'"? This action cannot be undone. ',1),e("div",{class:"flex justify-end space-x-3"},[e("button",{onClick:P,class:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-400"}," Cancel "),e("button",{onClick:O,class:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500"}," Delete ")])])])):R("",!0)])]}),_:1}))}};export{nt as default};
