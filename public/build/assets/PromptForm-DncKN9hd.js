import{r as f,c as A,e as P,a as l,o as i,b as a,i as C,t as u,v as d,x as p,d as g,j as F,G as E,F as B,l as D,y as I,s as R,m as h,u as c}from"./app-D1p4MqVE.js";import q from"./ResponseBuilder-j7r0V6Y4.js";import{C as z}from"./chevron-down-DLgdmh_B.js";import{c as O}from"./createLucideIcon-DmLtMmsd.js";import{C as G}from"./circle-x-BHlhod8C.js";import"./FieldBuilder-CaFPUiq9.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";/**
 * @license lucide-vue-next v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=O("code",[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]]);/**
 * @license lucide-vue-next v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=O("file-plus",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]]),L={class:"grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6 px-2 md:px-4"},Z={class:"flex items-start justify-between mb-4"},X={class:"text-xl font-bold text-gray-800"},Y={class:"mt-6"},Q={key:0,class:"space-y-6"},W={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 space-y-4"},ee={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 space-y-4"},te={key:0,class:"flex flex-wrap gap-2"},ae=["onClick"],se={class:"flex space-x-2"},oe=["onKeydown"],re={class:"bg-white rounded-lg shadow-sm border border-gray-200",open:""},ne={class:"p-4 font-bold text-gray-700 list-none flex justify-between items-center cursor-pointer group"},le={class:"p-4 border-t space-y-4"},ie={class:"border-t pt-4"},ue={class:"flex justify-between items-center mb-2"},de={key:1,class:"space-y-4"},pe=["value"],me={class:"text-xs text-gray-500 text-center block"},ve=["value"],ge=["value"],be={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 border-t space-y-4"},ye={class:"flex flex-col gap-2"},fe={class:"flex justify-end space-x-2"},je={__name:"PromptForm",props:{prompt:{type:Object,required:!0}},emits:["save","cancel"],setup(M,{emit:J}){const b=M,U=J,t=f(JSON.parse(JSON.stringify(b.prompt)));Array.isArray(t.value.template_variables)||(t.value.template_variables=[]),(!t.value.generation_config||typeof t.value.generation_config!="object")&&(t.value.generation_config={}),Array.isArray(t.value.response_variables)||(t.value.response_variables=[]),Array.isArray(t.value.response_json_template)||(t.value.response_json_template=[]),t.value.generation_config.responseMimeType==null&&(t.value.generation_config.responseMimeType="application/json"),t.value.generation_config.maxOutputTokens==null&&(t.value.generation_config.maxOutputTokens=2048);const m=f(""),y=f(!1),v=f(!0);A(()=>x(t.value.response_variables));const x=o=>{const e={};return Array.isArray(o)&&o.forEach(n=>{const r=n.name;switch(n.type){case"Text":case"Markdown":case"File":case"User":case"Date":e[r]=`Enter your ${r} here.`;break;case"Number":e[r]=0;break;case"Boolean":e[r]=!0;break;case"Select":case"MultiSelect":e[r]=n.options;break;case"Object":e[r]=x(n.schema);break;case"Array":n.itemType==="Object"?e[r]=[x(n.schema)]:e[r]=[`Placeholder for ${n.itemType}`];break;default:e[r]=null}}),e};P(()=>b.prompt,o=>{t.value=JSON.parse(JSON.stringify(o)),Array.isArray(t.value.template_variables)||(t.value.template_variables=[]),(!t.value.generation_config||typeof t.value.generation_config!="object")&&(t.value.generation_config={}),Array.isArray(t.value.response_variables)||(t.value.response_variables=[]),Array.isArray(t.value.response_json_template)||(t.value.response_json_template=[]),t.value.generation_config.responseMimeType==null&&(t.value.generation_config.responseMimeType="application/json"),t.value.generation_config.maxOutputTokens==null&&(t.value.generation_config.maxOutputTokens=2048)},{deep:!0});function j(){const o=m.value.trim().replace(/[^a-zA-Z0-9_]/g,"");if(!o){m.value="";return}Array.isArray(t.value.template_variables)||(t.value.template_variables=[]),t.value.template_variables.includes(o)||t.value.template_variables.push(o),m.value=""}function $(o){t.value.template_variables=t.value.template_variables.filter(e=>e!==o)}function _(o,e){const r={...t.value.generation_config&&typeof t.value.generation_config=="object"?t.value.generation_config:{},[o]:e};(e===""||e===null)&&delete r[o],t.value.generation_config=r}const T=A({get:()=>JSON.stringify(t.value.generation_config||{},null,2),set:o=>{try{t.value.generation_config=JSON.parse(o)}catch{}}});function V(o=!1){const e={...t.value};Array.isArray(e.response_variables)||(e.response_variables=[]),Array.isArray(e.response_json_template)||(e.response_json_template=[]),o&&(e.isNewVersion=!0,e.version=(e.version||1)+1),U("save",e)}const w=A(()=>!b.prompt.id);return(o,e)=>{var n,r,k,S,N;return i(),l("div",L,[a("div",{class:F(["bg-white rounded-lg shadow-sm border border-gray-200 p-4 sm:p-6",v.value?"md:col-span-2":"md:col-span-3"])},[a("div",Z,[a("h2",X,u(w.value?"Create New Prompt":`Editing: ${t.value.name||b.prompt.name}`),1),a("button",{type:"button",onClick:e[0]||(e[0]=s=>v.value=!v.value),class:"text-xs px-2 py-1 rounded-md bg-gray-100 hover:bg-gray-200 border border-gray-300"},u(v.value?"Hide Sidebar":"Show Sidebar"),1)]),a("div",null,[e[17]||(e[17]=a("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"System Prompt Text",-1)),d(a("textarea",{rows:"12",class:"w-full p-2 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500 font-mono text-sm",placeholder:"You are a helpful AI assistant...","onUpdate:modelValue":e[1]||(e[1]=s=>t.value.system_prompt_text=s)},null,512),[[p,t.value.system_prompt_text]]),a("div",Y,[g(q,{responseVariables:t.value.response_variables,"onUpdate:responseVariables":e[2]||(e[2]=s=>t.value.response_variables=s),responseJsonTemplate:t.value.response_json_template,"onUpdate:responseJsonTemplate":e[3]||(e[3]=s=>t.value.response_json_template=s)},null,8,["responseVariables","responseJsonTemplate"])])])],2),v.value?(i(),l("div",Q,[a("div",W,[e[22]||(e[22]=a("h3",{class:"font-bold text-gray-700"},"Configuration",-1)),a("div",null,[e[18]||(e[18]=a("label",{class:"block text-sm font-medium text-gray-700"},"Prompt Name",-1)),d(a("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=s=>t.value.name=s),class:"w-full p-2 mt-1 border border-gray-300 rounded-md text-sm"},null,512),[[p,t.value.name]])]),a("div",null,[e[19]||(e[19]=a("label",{class:"block text-sm font-medium text-gray-700"},"Category",-1)),d(a("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=s=>t.value.category=s),class:"w-full p-2 mt-1 border border-gray-300 rounded-md text-sm"},null,512),[[p,t.value.category]])]),a("div",null,[e[21]||(e[21]=a("label",{class:"block text-sm font-medium text-gray-700"},"Status",-1)),d(a("select",{"onUpdate:modelValue":e[6]||(e[6]=s=>t.value.status=s),class:"w-full p-2 mt-1 border border-gray-300 rounded-md bg-white text-sm"},e[20]||(e[20]=[a("option",{value:"active"},"Active",-1),a("option",{value:"draft"},"Draft",-1),a("option",{value:"archived"},"Archived",-1)]),512),[[E,t.value.status]])])]),a("div",ee,[e[23]||(e[23]=a("h3",{class:"font-bold text-gray-700"},"Template Variables",-1)),((n=t.value.template_variables)==null?void 0:n.length)>0?(i(),l("div",te,[(i(!0),l(B,null,D(t.value.template_variables,s=>(i(),l("div",{key:s,class:"flex items-center bg-indigo-100 text-indigo-800 text-sm font-medium pl-2 pr-1 py-1 rounded-full"},[a("span",null,u(`${s}`),1),a("button",{type:"button",onClick:ce=>$(s),class:"ml-1.5 p-0.5 rounded-full hover:bg-indigo-200"},[g(c(G),{class:"h-4 w-4"})],8,ae)]))),128))])):C("",!0),a("div",se,[d(a("input",{type:"text","onUpdate:modelValue":e[7]||(e[7]=s=>m.value=s),onKeydown:I(R(j,["prevent"]),["enter"]),placeholder:"Add variable name...",class:"w-full p-2 border border-gray-300 rounded-md text-sm"},null,40,oe),[[p,m.value]]),a("button",{type:"button",onClick:j,class:"px-4 py-2 text-sm font-semibold text-white bg-indigo-600 rounded-md hover:bg-indigo-700"},"Add")])]),a("details",re,[a("summary",ne,[e[24]||(e[24]=h(" Advanced Settings ",-1)),g(c(z),{class:"group-open:rotate-180 transition-transform"})]),a("div",le,[a("div",null,[e[25]||(e[25]=a("label",{class:"block text-sm font-medium text-gray-700"},"Model Name",-1)),d(a("input",{type:"text","onUpdate:modelValue":e[8]||(e[8]=s=>t.value.model_name=s),class:"w-full p-2 mt-1 border border-gray-300 rounded-md font-mono text-sm"},null,512),[[p,t.value.model_name]])]),a("div",ie,[a("div",ue,[e[26]||(e[26]=a("h4",{class:"font-medium text-gray-700 text-sm"},"Generation Config",-1)),a("button",{type:"button",onClick:e[9]||(e[9]=s=>y.value=!y.value),class:"inline-flex items-center gap-1.5 px-2 py-1 text-xs text-gray-600 rounded-md hover:bg-gray-100"},[g(c(K),{class:"h-4 w-4"}),h(" "+u(y.value?"Use Form":"Edit as JSON"),1)])]),y.value?d((i(),l("textarea",{key:0,rows:"6",class:"w-full p-2 mt-1 border border-gray-300 rounded-md font-mono text-sm","onUpdate:modelValue":e[10]||(e[10]=s=>T.value=s)},null,512)),[[p,T.value]]):(i(),l("div",de,[a("div",null,[e[27]||(e[27]=a("label",{class:"block text-sm font-medium text-gray-700"},"Temperature",-1)),a("input",{type:"range",min:"0",max:"1",step:"0.1",value:((r=t.value.generation_config)==null?void 0:r.temperature)||.7,onInput:e[11]||(e[11]=s=>_("temperature",parseFloat(s.target.value))),class:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"},null,40,pe),a("span",me,u(((k=t.value.generation_config)==null?void 0:k.temperature)||.7)+" (Creativity)",1)]),a("div",null,[e[28]||(e[28]=a("label",{class:"block text-sm font-medium text-gray-700"},"Maximum Output",-1)),a("input",{type:"number",min:"1",step:"1",value:((S=t.value.generation_config)==null?void 0:S.maxOutputTokens)||2048,onInput:e[12]||(e[12]=s=>_("maxOutputTokens",s.target.value===""?"":parseInt(s.target.value))),class:"w-full p-2 mt-1 border border-gray-300 rounded-md text-sm"},null,40,ve),e[29]||(e[29]=a("span",{class:"text-xs text-gray-500 text-center block"},"Tokens",-1))]),a("div",null,[e[31]||(e[31]=a("label",{class:"block text-sm font-medium text-gray-700"},"Response Format",-1)),a("select",{value:((N=t.value.generation_config)==null?void 0:N.responseMimeType)||"application/json",onChange:e[13]||(e[13]=s=>_("responseMimeType",s.target.value)),class:"w-full p-2 mt-1 border border-gray-300 rounded-md bg-white text-sm"},e[30]||(e[30]=[a("option",{value:"text/plain"},"Text",-1),a("option",{value:"application/json"},"JSON",-1)]),40,ge)])]))])])]),a("div",be,[a("div",ye,[a("div",fe,[a("button",{type:"button",onClick:e[14]||(e[14]=s=>o.$emit("cancel")),class:"px-4 py-2 text-sm font-semibold text-gray-800 bg-gray-200 rounded-md hover:bg-gray-300"},"Cancel"),a("button",{type:"button",onClick:e[15]||(e[15]=s=>V(!1)),class:"px-4 py-2 text-sm font-semibold text-white bg-indigo-600 rounded-md hover:bg-indigo-700"},u(w.value?"Create Prompt":"Save Changes"),1)]),w.value?C("",!0):(i(),l("button",{key:0,type:"button",onClick:e[16]||(e[16]=s=>V(!0)),class:"w-full inline-flex items-center justify-center gap-2 px-4 py-2 text-sm font-semibold text-gray-800 bg-gray-200 rounded-md hover:bg-gray-300"},[g(c(H),{class:"h-4 w-4"}),h(" Save as New Version (v"+u((t.value.version||1)+1)+") ",1)]))])])])):C("",!0)])}}};export{je as default};
