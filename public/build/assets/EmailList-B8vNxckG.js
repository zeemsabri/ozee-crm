import{h as k}from"./moment-BLMuvzoS.js";import{r as P,a as C}from"./PaperAirplaneIcon-BWHfbD03.js";import{a as r,o as n,i as f,b as e,t as o,F as g,l as h,j as d,g as A,aa as N,u as x}from"./app-BRSaGEek.js";const j={class:"p-6"},B={key:0,class:"text-center py-8"},S={key:1,class:"text-center py-8 text-red-500"},_={key:2,class:"text-center py-8 text-gray-500"},$={key:3,class:"overflow-x-auto shadow rounded-lg"},z={class:"min-w-full divide-y divide-gray-200"},L={class:"bg-white divide-y divide-gray-200"},M=["onClick"],Y={class:"px-4 py-3 text-sm font-medium text-gray-900"},D={class:"flex items-center space-x-2"},E={class:"px-4 py-3 text-sm text-gray-500"},F={class:"px-4 py-3 text-sm"},R={key:1,class:"text-gray-500"},T={class:"px-4 py-3 text-sm text-gray-500"},U={class:"px-4 py-3 text-sm text-gray-500"},V={class:"px-4 py-3 text-sm text-gray-500"},I={class:"px-4 py-3 text-sm"},O={class:"px-4 py-3 text-sm text-gray-500"},q={key:4,class:"mt-4 flex justify-center"},G={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination"},H=["disabled"],J=["onClick"],K={key:1,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700"},Q=["disabled"],et={__name:"EmailList",props:{emails:{type:Array,default:()=>[]},loading:Boolean,error:String,pagination:Object},emits:["view-email","change-page","refresh","show-notification"],setup(a,{emit:v}){const u=v,l=i=>{u("change-page",i)},w=i=>!(i.status==="draft"||i.type==="received"&&i.status==="pending_approval_received"&&!i.can_approve),b=i=>{let s="You do not have permission to view this email. Please contact the project administrator for assistance.";i.status==="draft"&&(s="This email is waiting to review by AI, please try again later."),u("show-notification",{message:s,type:"warning"})};return(i,s)=>(n(),r("div",j,[a.loading?(n(),r("div",B,s[2]||(s[2]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-500 mx-auto"},null,-1),e("p",{class:"mt-2 text-sm text-gray-500"},"Loading emails...",-1)]))):a.error?(n(),r("div",S,o(a.error),1)):a.emails.length===0?(n(),r("div",_,s[3]||(s[3]=[e("p",null,"No emails found.",-1)]))):(n(),r("div",$,[e("table",z,[s[4]||(s[4]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Subject"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Type"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Read Status"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Sender"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Approved By"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Project"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date")])],-1)),e("tbody",L,[(n(!0),r(g,null,h(a.emails,t=>{var c,p,y,m;return n(),r("tr",{key:t.id,onClick:W=>w(t)?i.$emit("view-email",t):b(t),class:"hover:bg-gray-50 cursor-pointer"},[e("td",Y,[e("div",D,[(n(),A(N(t.type==="sent"?x(P):x(C)),{class:"h-4 w-4"})),e("span",null,o(t.subject),1)])]),e("td",E,o(t.type),1),e("td",F,[t.type==="sent"?(n(),r("span",{key:0,class:d({"text-green-600":t.read_at,"text-red-600":!t.read_at})},o(t.read_at?"Read":"Unread"),3)):(n(),r("span",R," N/A "))]),e("td",T,o(((c=t.sender)==null?void 0:c.name)||"N/A"),1),e("td",U,o(((p=t.approver)==null?void 0:p.name)||"N/A"),1),e("td",V,o(((m=(y=t.conversation)==null?void 0:y.project)==null?void 0:m.name)||"N/A"),1),e("td",I,[e("span",{class:d({"px-2 py-1 rounded-full text-xs font-medium":!0,"bg-green-100 text-green-800":t.status==="sent","bg-yellow-100 text-yellow-800":t.status==="pending_approval"||t.status==="pending_approval_received","bg-blue-100 text-blue-800":t.status==="received"})},o(t.status?t.status.replace(/_/g," ").toUpperCase():"N/A"),3)]),e("td",O,o(t.created_at?x(k)(t.created_at).format("MMM D, YYYY h:mm A"):"N/A"),1)],8,M)}),128))])])])),a.pagination.lastPage>1?(n(),r("div",q,[e("nav",G,[e("button",{onClick:s[0]||(s[0]=t=>l(a.pagination.currentPage-1)),disabled:a.pagination.currentPage===1,class:d([a.pagination.currentPage===1?"cursor-not-allowed opacity-50":"hover:bg-gray-50","relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500"])},s[5]||(s[5]=[e("span",{class:"sr-only"},"Previous",-1),e("svg",{class:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)]),10,H),(n(!0),r(g,null,h(a.pagination.lastPage,t=>(n(),r(g,{key:t},[t===1||t===a.pagination.lastPage||t>=a.pagination.currentPage-1&&t<=a.pagination.currentPage+1?(n(),r("button",{key:0,onClick:c=>l(t),class:d([t===a.pagination.currentPage?"z-10 bg-indigo-50 border-indigo-500 text-indigo-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50","relative inline-flex items-center px-4 py-2 border text-sm font-medium"])},o(t),11,J)):t===2&&a.pagination.currentPage>3||t===a.pagination.lastPage-1&&a.pagination.currentPage<a.pagination.lastPage-2?(n(),r("span",K," ... ")):f("",!0)],64))),128)),e("button",{onClick:s[1]||(s[1]=t=>l(a.pagination.currentPage+1)),disabled:a.pagination.currentPage===a.pagination.lastPage,class:d([a.pagination.currentPage===a.pagination.lastPage?"cursor-not-allowed opacity-50":"hover:bg-gray-50","relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500"])},s[6]||(s[6]=[e("span",{class:"sr-only"},"Next",-1),e("svg",{class:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1)]),10,Q)])])):f("",!0)]))}};export{et as default};
