import{s as g,r as u,w as p,c as N,o as f,a as i,b as n,h as $,g as x,t as y,d as b,e as r,k as _}from"./app-uCPmy9lh.js";import{a as j,_ as k}from"./SecondaryButton-BZ31n4gd.js";import{_ as V,a as B}from"./TextInput-BFco6XAs.js";import{_ as C}from"./InputError-B3ccaYAa.js";import{P as h}from"./PrimaryButton-XJOxuypH.js";const A={class:"p-6"},E={key:0,class:"text-red-600 text-sm mb-4"},F={class:"mb-4"},I={class:"mt-6 flex justify-end"},T={__name:"NotesModal",props:{show:Boolean,projectId:Number},emits:["close","noteAdded"],setup(m,{emit:v}){const l=m,c=v,o=g({project_id:null,content:""}),a=u({}),s=u("");p(()=>l.projectId,e=>{e&&(o.project_id=e)},{immediate:!0}),p(()=>l.show,e=>{e&&(o.project_id=l.projectId,o.content="",a.value={},s.value="")});const w=async()=>{a.value={},s.value="";try{await window.axios.post(`/api/projects/${o.project_id}/notes`,{notes:[{content:o.content}]}),c("noteAdded"),c("close")}catch(e){e.response&&e.response.status===422?a.value=e.response.data.errors:e.response&&e.response.data.message?s.value=e.response.data.message:(s.value="Failed to add note.",console.error("Error adding note:",e))}};return(e,t)=>(f(),N(k,{show:m.show,onClose:t[2]||(t[2]=d=>e.$emit("close"))},{default:i(()=>[n("div",A,[t[5]||(t[5]=n("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Add Note",-1)),s.value?(f(),$("div",E,y(s.value),1)):x("",!0),n("form",{onSubmit:b(w,["prevent"])},[n("div",F,[r(V,{for:"note_content",value:"Note Content"}),r(B,{id:"note_content",type:"text",class:"mt-1 block w-full",modelValue:o.content,"onUpdate:modelValue":t[0]||(t[0]=d=>o.content=d),required:""},null,8,["modelValue"]),r(C,{message:a.value["notes.0.content"]?a.value["notes.0.content"][0]:"",class:"mt-2"},null,8,["message"])]),n("div",I,[r(j,{onClick:t[1]||(t[1]=d=>e.$emit("close"))},{default:i(()=>t[3]||(t[3]=[_("Cancel")])),_:1,__:[3]}),r(h,{class:"ms-3",type:"submit"},{default:i(()=>t[4]||(t[4]=[_("Add Note")])),_:1,__:[4]})])],32)])]),_:1},8,["show"]))}};export{T as _};
