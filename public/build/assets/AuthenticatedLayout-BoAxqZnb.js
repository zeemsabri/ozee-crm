import{r as N,s as B,K as Tt,J as Jt,i as m,g as k,o as i,F as ie,j as ue,b as l,t as P,h as I,L as ua,M as kr,N as da,O as ca,p as L,B as Pt,w as me,c as A,a as x,d as Qt,f as ce,l as _r,m as D,e as v,k as Le,x as oe,P as It,G as wr,I as dt,A as Ne,Q as we,R as fe,S as Vt,z as Kt,D as br,T as fa,U as xr,V as Qs,W as Ze,n as je,X as ma,Y as gs,Z as Ms,_ as Xe,$ as ye,a0 as qe,a1 as fs,a2 as Sr,a3 as Mr,a4 as Ks,q as Dr}from"./app-DJMKqN8j.js";import{P as ve}from"./PrimaryButton-DmlXcktq.js";import{_ as Ds}from"./Modal-CBATDj34.js";import{_ as q}from"./InputLabel-C5HKNZw0.js";import{_ as ae}from"./InputError-CTdy1tgm.js";import{_ as Ct}from"./SecondaryButton-BsbA8FYw.js";import{_ as ht}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as Oe}from"./TextInput-CQT4U5IF.js";import{S as $e}from"./SelectDropdown-BudJbdR7.js";import{_ as Tr}from"./Checkbox-BsrQFdD7.js";import{A as Cr}from"./ApplicationLogo-B8ctAyQI.js";import{D as Ts}from"./DangerButton-B6hbk-CJ.js";const $r={key:0,class:"fixed bottom-4 right-4 z-50 flex flex-col items-end space-y-2"},Yr={key:0,class:"notification-list w-full max-w-xs space-y-2"},Or={class:"flex-1 min-w-0"},Nr={class:"flex items-start justify-between gap-2 mb-1"},Pr={class:"flex-1 min-w-0"},Ir={key:0,class:"text-base font-semibold text-gray-800 truncate"},Ar={key:1,class:"text-xs text-gray-500"},Er={key:0,class:"text-xs text-gray-600 mb-2"},Rr={class:"flex items-center justify-between mt-2"},Ur={key:0,class:"text-xs text-gray-500 font-medium"},jr=["onClick"],Wr={key:1,class:"flex justify-end w-full max-w-xs"},Vr={key:0},Lr={key:1},Fr=3,Hr={__name:"PushNotificationContainer",props:{sidebarIsOpen:{type:Boolean,default:!1}},setup(e){const t=N(!1),s=N(null),r=N(0),a=N(null),o=B(()=>Tt.value.notifications.filter(g=>g.isNewPush).slice(0,Fr)),n=B(()=>{const g=Math.floor(r.value/60),C=r.value%60;return`${String(g).padStart(2,"0")}:${String(C).padStart(2,"0")}`}),u=g=>{if(!g)return null;const C=g.match(/\/task\/(\d+)/);return C?parseInt(C[1]):null},c=g=>{if(!g)return null;const C=g.match(/\/project\/(\d+)\//);return C?parseInt(C[1]):null},d=()=>{t.value=!t.value,clearTimeout(s.value),clearInterval(a.value),t.value&&(s.value=setTimeout(()=>{t.value=!1,clearInterval(a.value)},3e5),r.value=300,a.value=setInterval(()=>{r.value>0?r.value--:clearInterval(a.value)},1e3))},p=async g=>{kr(g.id),await da(g.view_id);const C=g.task_id||u(g.url),U=g.project_id||c(g.url);C&&U?ca(C,U):(console.warn("Could not open task sidebar. Falling back to redirecting."),g.url&&(window.location.href=g.url))};return Jt(()=>{clearTimeout(s.value),clearInterval(a.value)}),(g,C)=>e.sidebarIsOpen?k("",!0):(i(),m("div",$r,[!t.value&&o.value.length>0?(i(),m("div",Yr,[(i(!0),m(ie,null,ue(o.value,U=>(i(),m("div",{key:U.id,class:"bg-white rounded-lg shadow-lg p-3 flex items-start space-x-3 border border-gray-200 transition-opacity duration-300 opacity-60 hover:opacity-100"},[l("div",Or,[l("div",Nr,[l("div",Pr,[U.title?(i(),m("h3",Ir,P(U.title),1)):k("",!0),U.project_name?(i(),m("p",Ar,P(U.project_name),1)):k("",!0)])]),U.message?(i(),m("p",Er,P(U.message),1)):k("",!0),l("div",Rr,[U.due_date?(i(),m("div",Ur," Due: "+P(I(ua)(U.due_date)),1)):k("",!0),l("button",{onClick:O=>p(U),class:"px-2.5 py-1 bg-blue-600 text-white text-xs font-medium rounded-md hover:bg-blue-700 transition-colors duration-200 shadow"},P(U.button_label||"View"),9,jr)])])]))),128))])):k("",!0),o.value.length>0?(i(),m("div",Wr,[l("button",{onClick:d,class:"bg-white/80 backdrop-blur-sm text-gray-600 hover:text-gray-900 text-xs font-bold py-1 px-3 rounded-full shadow-md transition-all duration-300"},[t.value?(i(),m("span",Vr,"Show ("+P(n.value)+")",1)):(i(),m("span",Lr,"Minimize"))])])):k("",!0)]))}},Br={class:"fixed top-4 right-4 z-[100] flex flex-col items-end space-y-3"},zr={class:"p-4"},Gr={class:"text-sm font-medium text-white"},qr={__name:"StandardNotificationContainer",setup(e,{expose:t}){const s=N([]),r=(n,u="info",c=5e3)=>{const d=crypto.randomUUID();s.value.unshift({id:d,message:n,type:u}),setTimeout(()=>{a(d)},c)},a=n=>{const u=s.value.findIndex(c=>c.id===n);u>-1&&s.value.splice(u,1)},o=n=>{switch(n){case"success":return"bg-green-500";case"error":return"bg-red-500";case"warning":return"bg-yellow-500";case"info":default:return"bg-blue-500"}};return t({addNotification:r}),(n,u)=>(i(),m("div",Br,[(i(!0),m(ie,null,ue(s.value,c=>(i(),m("div",{key:c.id,class:L(["w-full max-w-sm rounded-md shadow-lg pointer-events-auto",o(c.type)])},[l("div",zr,[l("p",Gr,P(c.message),1)])],2))),128))]))}},Zr={class:"p-6"},Jr={class:"mt-6"},Qr={key:0,class:"mb-4 p-4 bg-green-100 border border-green-400 text-green-700 rounded"},Kr={key:1,class:"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded"},Xr={class:"flex items-center mb-3"},eo=["id","onUpdate:modelValue"],to=["for"],so={key:0,class:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800"},ao={key:0},ro={class:"mb-4"},oo={class:"flex items-center"},no=["id","checked","onChange"],lo=["for"],io={key:0,class:"mb-4"},uo=["id","onUpdate:modelValue"],co={key:1,class:"mb-4"},fo={class:"flex-1"},mo=["id","onUpdate:modelValue"],ho={class:"flex-1"},vo=["id","onUpdate:modelValue"],po={key:0,class:"flex items-end pb-1"},go=["onClick"],yo=["onClick"],ko={class:"mt-6 flex justify-end space-x-3"},_o={key:0,class:"flex items-center"},wo={key:1},bo={__name:"AvailabilityModal",props:{show:Boolean,date:{type:String,default:()=>{const e=new Date;return e.setDate(e.getDate()+1),e.toISOString().split("T")[0]}},nextWeekDates:{type:Array,default:()=>[]},userId:{type:Number,default:null}},emits:["close","availability-saved"],setup(e,{emit:t}){const s=()=>{const M=localStorage.getItem("authToken");M&&!oe.defaults.headers.common.Authorization&&(oe.defaults.headers.common.Authorization=`Bearer ${M}`,console.log("Auth headers set in AvailabilityModal"))},r=e,a=t,o=N({}),n=N({}),u=N(!1),c=N(""),d=()=>{const M=[],y=new Date,f=new Date(y);f.setDate(y.getDate()+1);for(let h=0;h<7;h++){const _=new Date(f);_.setDate(f.getDate()+h);const $=_.toISOString().split("T")[0];M.push({value:$,label:_.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})}),o.value[$]={isSelected:!1,isAvailable:!0,reason:"",timeSlots:[{start_time:"",end_time:""}]}}return M},p=N([]);Pt(()=>{s(),r.nextWeekDates.length>0?(p.value=r.nextWeekDates,r.nextWeekDates.forEach(M=>{o.value[M.value]={isSelected:!1,isAvailable:!0,reason:"",timeSlots:[{start_time:"",end_time:""}]}})):p.value=d()});const g=async()=>{try{if(s(),p.value.length===0)return;const M=p.value[0].value,y=p.value[p.value.length-1].value,f=await oe.get("/api/availabilities",{params:{start_date:M,end_date:y,user_id:r.userId}});if(f.data&&f.data.availabilities){const h=f.data.availabilities;p.value.forEach(_=>{o.value[_.value]={isSelected:!1,isAvailable:!0,reason:"",timeSlots:[{start_time:"",end_time:""}]}}),h.forEach(_=>{const $=_.date.split("T")[0];o.value[$]&&(o.value[$].isSelected=!0,o.value[$].isAvailable=_.is_available,_.is_available?o.value[$].timeSlots=_.time_slots&&_.time_slots.length>0?[..._.time_slots]:[{start_time:"",end_time:""}]:o.value[$].reason=_.reason||"")})}}catch(M){console.error("Error fetching existing availabilities:",M),p.value.forEach(y=>{o.value[y.value]={isSelected:!1,isAvailable:!0,reason:"",timeSlots:[{start_time:"",end_time:""}]}})}};me(()=>r.show,async M=>{M&&(n.value={},c.value="",await g())},{immediate:!0});const C=M=>{o.value[M].timeSlots.push({start_time:"",end_time:""})},U=(M,y)=>{o.value[M].timeSlots.length>1&&o.value[M].timeSlots.splice(y,1)},O=(M,y)=>{o.value[M].isAvailable=y,y?o.value[M].reason="":o.value[M].timeSlots=[{start_time:"",end_time:""}]},w=async()=>{u.value=!0,n.value={},c.value="";const M=[];let y=!1;for(const f of p.value){const h=f.value,_=o.value[h];if(_.isSelected){let $={};if(_.isAvailable)if(_.timeSlots.some(W=>!W.start_time||!W.end_time))$.timeSlots="Please fill in all time slots.",y=!0;else for(const W of _.timeSlots){const re=W.start_time.split(":").map(Number),Ee=W.end_time.split(":").map(Number);if(re.length!==2||Ee.length!==2||isNaN(re[0])||isNaN(re[1])||isNaN(Ee[0])||isNaN(Ee[1])){$.timeSlots="Invalid time format. Please use HH:MM format.",y=!0;break}const X=re[0]*60+re[1],V=Ee[0]*60+Ee[1];if(X>=V){$.timeSlots="End time must be after start time.",y=!0;break}}else _.reason.trim()||($.reason="Please provide a reason for unavailability.",y=!0);Object.keys($).length>0&&(n.value[h]=$),Object.keys($).length===0&&M.push({date:h,is_available:_.isAvailable,reason:_.isAvailable?null:_.reason,time_slots:_.isAvailable?_.timeSlots:null})}}if(y){u.value=!1,n.value.general="Please correct the errors in the highlighted dates.";return}if(M.length===0){n.value.general="Please select at least one day to set availability for.",u.value=!1;return}try{s();const f=await oe.post("/api/availabilities/batch",{availabilities:M});c.value="Availability saved successfully!";try{const h=await oe.get("/api/availability-prompt");localStorage.setItem("shouldBlockUser",h.data.should_block_user),localStorage.setItem("allWeekdaysCovered",h.data.all_weekdays_covered);const _=new CustomEvent("availability-status-updated",{detail:{shouldBlockUser:h.data.should_block_user,allWeekdaysCovered:h.data.all_weekdays_covered}});window.dispatchEvent(_),console.log("Availability status updated from modal:",{shouldBlockUser:h.data.should_block_user,allWeekdaysCovered:h.data.all_weekdays_covered})}catch(h){console.error("Error updating availability status:",h)}a("availability-saved",f.data.availabilities),setTimeout(()=>{a("close")},1500)}catch(f){console.error("Error saving availability:",f),f.response&&f.response.data&&f.response.data.errors?n.value.general=f.response.data.message||"An error occurred while saving your availability.":f.response&&f.response.status===409?(c.value=f.response.data.message,setTimeout(()=>{a("close")},1500)):n.value.general="An unexpected error occurred while saving your availability."}finally{u.value=!1}};return(M,y)=>(i(),A(Ds,{show:e.show,onClose:y[1]||(y[1]=f=>M.$emit("close")),"max-width":"xl"},{default:x(()=>[l("div",Zr,[y[6]||(y[6]=l("h2",{class:"text-lg font-medium text-gray-900"}," Submit Your Weekly Availability ",-1)),y[7]||(y[7]=l("p",{class:"mt-1 text-sm text-gray-600"}," Please select the dates you wish to set availability for and provide your details for each. ",-1)),l("div",Jr,[l("form",{onSubmit:Qt(w,["prevent"])},[c.value?(i(),m("div",Qr,P(c.value),1)):k("",!0),n.value.general?(i(),m("div",Kr,P(n.value.general),1)):k("",!0),(i(!0),m(ie,null,ue(p.value,f=>{var h,_;return i(),m("div",{key:f.value,class:L(["mb-6 p-4 border rounded-lg shadow-sm",[o.value[f.value].isSelected?"border-indigo-300 bg-indigo-50":"border-gray-200",o.value[f.value].isSelected&&!n.value[f.value]?"border-l-4 border-l-indigo-500":""]])},[l("div",Xr,[ce(l("input",{type:"checkbox",id:`select_date_${f.value}`,"onUpdate:modelValue":$=>o.value[f.value].isSelected=$,class:"rounded border-gray-300 text-indigo-600 shadow-sm focus:ring-indigo-500"},null,8,eo),[[_r,o.value[f.value].isSelected]]),l("label",{for:`select_date_${f.value}`,class:"ml-2 block text-base font-medium text-gray-800"},[D(P(f.label)+" ",1),o.value[f.value].isSelected?(i(),m("span",so," Saved ")):k("",!0)],8,to)]),o.value[f.value].isSelected?(i(),m("div",ao,[l("div",ro,[l("div",oo,[l("input",{type:"checkbox",id:`isAvailableToggle_${f.value}`,checked:o.value[f.value].isAvailable,onChange:$=>O(f.value,$.target.checked),class:"rounded border-gray-300 text-indigo-600 shadow-sm focus:ring-indigo-500"},null,40,no),l("label",{for:`isAvailableToggle_${f.value}`,class:"ml-2 block text-sm text-gray-700"}," I am available on this day ",8,lo)])]),o.value[f.value].isAvailable?k("",!0):(i(),m("div",io,[v(q,{for:`reason_${f.value}`,value:"Reason for Not Available"},null,8,["for"]),ce(l("textarea",{id:`reason_${f.value}`,"onUpdate:modelValue":$=>o.value[f.value].reason=$,rows:"2",class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",placeholder:"e.g., Out of office, Holiday, Meeting all day"},null,8,uo),[[Le,o.value[f.value].reason]]),v(ae,{message:(h=n.value[f.value])==null?void 0:h.reason,class:"mt-2"},null,8,["message"])])),o.value[f.value].isAvailable?(i(),m("div",co,[v(q,{value:"Available Time Slots"}),v(ae,{message:(_=n.value[f.value])==null?void 0:_.timeSlots,class:"mt-2"},null,8,["message"]),(i(!0),m(ie,null,ue(o.value[f.value].timeSlots,($,W)=>(i(),m("div",{key:W,class:"flex items-center space-x-2 mt-2"},[l("div",fo,[v(q,{for:`start_time_${f.value}_${W}`,value:"Start Time",class:"text-xs"},null,8,["for"]),ce(l("input",{id:`start_time_${f.value}_${W}`,type:"time","onUpdate:modelValue":re=>$.start_time=re,class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm"},null,8,mo),[[Le,$.start_time]])]),l("div",ho,[v(q,{for:`end_time_${f.value}_${W}`,value:"End Time",class:"text-xs"},null,8,["for"]),ce(l("input",{id:`end_time_${f.value}_${W}`,type:"time","onUpdate:modelValue":re=>$.end_time=re,class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm"},null,8,vo),[[Le,$.end_time]])]),o.value[f.value].timeSlots.length>1?(i(),m("div",po,[l("button",{type:"button",onClick:re=>U(f.value,W),class:"p-2 text-red-600 hover:text-red-800"},y[2]||(y[2]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm6 0a1 1 0 012 0v6a1 1 0 11-2 0V8z","clip-rule":"evenodd"})],-1)]),8,go)])):k("",!0)]))),128)),l("button",{type:"button",onClick:$=>C(f.value),class:"mt-3 w-full flex items-center justify-center px-4 py-2 border border-dashed border-indigo-300 rounded-lg text-indigo-600 hover:bg-indigo-50 transition duration-150 ease-in-out"},y[3]||(y[3]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z","clip-rule":"evenodd"})],-1),D(" Add Another Time Slot ",-1)]),8,yo)])):k("",!0)])):k("",!0)],2)}),128)),l("div",ko,[v(Ct,{onClick:y[0]||(y[0]=f=>M.$emit("close"))},{default:x(()=>y[4]||(y[4]=[D(" Cancel ",-1)])),_:1,__:[4]}),v(ve,{disabled:u.value,class:L({"opacity-50":u.value})},{default:x(()=>[u.value?(i(),m("span",_o,y[5]||(y[5]=[l("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[l("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),l("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),D(" Saving... ",-1)]))):(i(),m("span",wo,"Save Availability"))]),_:1},8,["disabled","class"])])],32)])])]),_:1},8,["show"]))}},xo={key:0,class:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center"},So={class:"bg-white rounded-lg shadow-xl p-6 max-w-lg w-full mx-4"},Mo={class:"flex justify-center"},Do={__name:"AvailabilityBlocker",setup(e){const t=N(!1),s=N(!0),r=N(!1),a=N([]),o=B(()=>{var w;return((w=It().props.auth.user)==null?void 0:w.id)||null}),n=()=>{const w=localStorage.getItem("authToken");w&&!oe.defaults.headers.common.Authorization&&(oe.defaults.headers.common.Authorization=`Bearer ${w}`)},u=async()=>{s.value=!0;const w=localStorage.getItem("shouldBlockUser"),M=localStorage.getItem("allWeekdaysCovered");if(w==="true"&&M==="false")t.value=!0,await c();else try{n();const y=await oe.get("/api/availability-prompt");t.value=y.data.should_block_user&&!y.data.all_weekdays_covered,t.value&&await c()}catch(y){console.error("Error checking if user should be blocked:",y),t.value=!1}s.value=!1},c=async()=>{try{n();const w=await oe.get("/api/availability-prompt");d(w.data.next_week_start,w.data.next_week_end)}catch(w){console.error("Error fetching next week dates:",w)}},d=(w,M)=>{const y=[],f=new Date(w),h=new Date(M),_=new Date(f);for(;_<=h;)y.push({value:_.toISOString().split("T")[0],label:_.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})}),_.setDate(_.getDate()+1);a.value=y},p=()=>{r.value=!0},g=()=>{u()},C=w=>{t.value=w.detail.shouldBlockUser&&!w.detail.allWeekdaysCovered},U=()=>{document.visibilityState==="visible"&&dt(()=>{u()})},O=w=>{(w.key==="shouldBlockUser"||w.key==="allWeekdaysCovered")&&dt(()=>{u()})};return Pt(()=>{u(),window.addEventListener("availability-status-updated",C),document.addEventListener("visibilitychange",U),window.addEventListener("storage",O)}),Jt(()=>{window.removeEventListener("availability-status-updated",C),document.removeEventListener("visibilitychange",U),window.removeEventListener("storage",O)}),(w,M)=>t.value&&!s.value?(i(),m("div",xo,[l("div",So,[M[2]||(M[2]=wr('<div class="flex items-center mb-4"><div class="flex-shrink-0 mr-3"><svg class="h-8 w-8 text-red-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg></div><h2 class="text-xl font-bold text-gray-900">Action Required</h2></div><p class="mb-6 text-gray-700"> You must submit your availability for all weekdays of next week before you can continue using the application. This is required for planning meetings and work schedules. </p>',2)),l("div",Mo,[v(ve,{onClick:p,class:"bg-red-600 hover:bg-red-700"},{default:x(()=>M[1]||(M[1]=[D(" Submit Availability Now ",-1)])),_:1,__:[1]})]),v(bo,{show:r.value,"next-week-dates":a.value,date:a.value.length>0?a.value[0].value:"",userId:o.value,onClose:M[0]||(M[0]=y=>r.value=!1),onAvailabilitySaved:g},null,8,["show","next-week-dates","date","userId"])])])):k("",!0)}},To={class:"p-6"},Co={class:"flex justify-between items-center mb-4"},$o={class:"text-lg font-medium text-gray-900"},Yo={key:0,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert"},Oo={class:"block sm:inline"},No={key:0,class:"mt-6 flex justify-end space-x-3"},Po={__name:"BaseFormModal",props:{show:{type:Boolean,default:!1},title:{type:String,default:"Modal Title"},apiEndpoint:{type:String,required:!1},httpMethod:{type:String,default:"post",validator:e=>["post","put","patch","delete"].includes(e.toLowerCase())},formData:{type:Object,required:!0},submitButtonText:{type:String,default:"Save"},successMessage:{type:String,default:"Operation successful!"},formatDataForApi:{type:Function,default:e=>e},showFooter:{type:Boolean,default:!0}},emits:["close","submitted","error"],setup(e,{emit:t}){const s=e,r=t,a=N(!1),o=N({}),n=N("");me(()=>s.show,d=>{d&&(o.value={},n.value="",a.value=!1)});const u=async()=>{a.value=!0,o.value={},n.value="";try{const d=s.formatDataForApi(s.formData);let p;const g=s.httpMethod.toLowerCase();if(g==="post")p=await window.axios.post(s.apiEndpoint,d);else if(g==="put")p=await window.axios.put(s.apiEndpoint,d);else if(g==="patch")p=await window.axios.patch(s.apiEndpoint,d);else if(g==="delete")p=await window.axios.delete(s.apiEndpoint,{data:d});else throw new Error(`Unsupported HTTP method: ${s.httpMethod}`);we(s.successMessage),r("submitted",p.data),r("close")}catch(d){console.error("API submission error:",d),d.response?d.response.status===422?(o.value=d.response.data.errors,n.value="Please correct the errors in the form."):n.value=d.response.data.message||"An unexpected error occurred.":n.value="A network error occurred or the server is unreachable.",fe(n.value),r("error",d)}finally{a.value=!1}},c=()=>{r("close")};return(d,p)=>(i(),A(Ds,{show:e.show,onClose:c},{default:x(()=>[l("div",To,[l("div",Co,[l("h2",$o,P(e.title),1),l("button",{onClick:c,class:"text-gray-400 hover:text-gray-500"},p[0]||(p[0]=[l("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),n.value?(i(),m("div",Yo,[l("span",Oo,P(n.value),1)])):k("",!0),l("form",{onSubmit:Qt(u,["prevent"])},[Ne(d.$slots,"default",{errors:o.value},void 0,!0),e.showFooter?(i(),m("div",No,[v(Ct,{onClick:c,type:"button",disabled:a.value},{default:x(()=>p[1]||(p[1]=[D(" Cancel ",-1)])),_:1,__:[1]},8,["disabled"]),v(ve,{type:"submit",disabled:a.value,class:L({"opacity-75 cursor-not-allowed":a.value})},{default:x(()=>[D(P(a.value?"Submitting...":e.submitButtonText),1)]),_:1},8,["disabled","class"])])):k("",!0)],32)])]),_:3},8,["show"]))}},Xt=ht(Po,[["__scopeId","data-v-380ca613"]]),Io=(e,t)=>{let s;return(...r)=>{clearTimeout(s),s=setTimeout(()=>e(...r),t)}},Ao={class:"relative"},Eo={class:"flex flex-wrap items-center gap-2 mb-2 p-2 border border-gray-300 rounded-lg bg-white min-h-[44px] focus-within:border-indigo-500 focus-within:ring-1 focus-within:ring-indigo-500 transition-all duration-150"},Ro=["onClick"],Uo={key:0,class:"absolute z-20 w-full bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto mt-1 transform-gpu"},jo=["onClick"],Wo={key:1,class:"px-4 py-2 text-sm text-gray-500"},Vo={key:2,class:"px-4 py-2 text-sm text-gray-500"},Lo={__name:"TagInput",props:{modelValue:{type:Array,default:()=>[]},label:{type:String,default:"Tags"},placeholder:{type:String,default:"Add tags..."},error:{type:String,default:""},initialTags:{type:Array,default:()=>[]},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:t}){const s=e,r=t,a=N(""),o=N([]),n=N([]),u=N(!1),c=N(null);function d(){r("update:modelValue",n.value.map(y=>y.id))}me(()=>s.initialTags,y=>{if(n.value=[],y&&y.length>0){const $=[],W=new Set;y.forEach(re=>{W.has(re.id)||($.push(re),W.add(re.id))}),n.value.push(...$)}const f=y.map($=>$.id),h=Array.isArray(s.modelValue)?s.modelValue:[];(f.length!==h.length||f.some($=>!h.includes($))||h.some($=>!f.includes($)))&&d()},{immediate:!0});const p=Io(async y=>{if(y.length<2){o.value=[],u.value=!1;return}try{const f=await oe.get(`/api/tags/search?query=${y}`);o.value=f.data,u.value=!0}catch(f){console.error("Error fetching tags:",f),o.value=[],u.value=!1}},300);me(a,y=>{s.disabled||p(y)});const g=y=>{n.value.some(f=>f.id===y.id)||(n.value.push(y),a.value="",o.value=[],u.value=!1,d()),dt(()=>c.value.focus())},C=()=>{if(s.disabled)return;const y=a.value.trim();if(!y)return;const f=o.value.find(_=>_.name.toLowerCase()===y.toLowerCase()),h=n.value.some(_=>_.name.toLowerCase()===y.toLowerCase());if(f)g(f);else if(h)a.value="",o.value=[],u.value=!1;else{const _={id:`new_${y.replace(/\s+/g,"-").toLowerCase()}_${Date.now()}`,name:y};n.value.push(_),a.value="",o.value=[],u.value=!1,d()}dt(()=>c.value.focus())},U=y=>{s.disabled||(n.value=n.value.filter(f=>f.id!==y.id),d(),dt(()=>c.value.focus()))},O=()=>{s.disabled||a.value===""&&n.value.length>0&&U(n.value[n.value.length-1])},w=B(()=>o.value.filter(y=>!n.value.some(f=>f.id===y.id))),M=y=>{c.value&&!c.value.$el.contains(y.target)&&(u.value=!1,a.value="")};return Pt(()=>{document.addEventListener("click",M)}),Jt(()=>{document.removeEventListener("click",M)}),(y,f)=>(i(),m("div",Ao,[v(q,{value:e.label,class:"mb-1"},null,8,["value"]),l("div",Eo,[(i(!0),m(ie,null,ue(n.value,h=>(i(),m("span",{key:h.id,class:"inline-flex items-center px-3 py-1 text-sm font-medium bg-indigo-100 text-indigo-800 rounded-full shadow-sm"},[D(P(h.name)+" ",1),e.disabled?k("",!0):(i(),m("button",{key:0,type:"button",onClick:_=>U(h),class:"ml-2 -mr-1 text-indigo-500 hover:text-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 rounded-full p-0.5"},f[3]||(f[3]=[l("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,Ro))]))),128)),v(Oe,{ref_key:"inputRef",ref:c,type:"text",placeholder:n.value.length===0?e.placeholder:"",modelValue:a.value,"onUpdate:modelValue":f[0]||(f[0]=h=>a.value=h),onFocus:f[1]||(f[1]=h=>u.value=!0),onKeydown:[Vt(Qt(C,["prevent"]),["enter"]),f[2]||(f[2]=Vt(h=>u.value=!1,["tab"])),Vt(O,["delete"])],class:"flex-grow min-w-[100px] border-none focus:ring-0 shadow-none p-0 bg-transparent text-gray-900",disabled:e.disabled},null,8,["placeholder","modelValue","onKeydown","disabled"])]),u.value&&(w.value.length>0||a.value.length>=2||w.value.length===0&&a.value.length<2)&&!e.disabled?(i(),m("div",Uo,[(i(!0),m(ie,null,ue(w.value,h=>(i(),m("div",{key:h.id,onClick:_=>g(h),class:"px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 cursor-pointer transition-colors duration-100"},P(h.name),9,jo))),128)),!o.value.some(h=>h.name.toLowerCase()===a.value.toLowerCase())&&a.value.length>=2?(i(),m("div",{key:0,onClick:C,class:"px-4 py-2 text-sm text-indigo-700 bg-indigo-50 hover:bg-indigo-100 cursor-pointer border-t border-indigo-200 font-semibold transition-colors duration-100"},' Add new tag: "'+P(a.value)+'" ',1)):k("",!0),w.value.length===0&&a.value.length<2?(i(),m("div",Wo," Type at least 2 characters to search for tags. ")):k("",!0),w.value.length===0&&a.value.length>=2&&!o.value.some(h=>h.name.toLowerCase()===a.value.toLowerCase())?(i(),m("div",Vo,[f[4]||(f[4]=D(" No matching tags found. Press ",-1)),f[5]||(f[5]=l("span",{class:"font-semibold text-indigo-600"},"Enter",-1)),D(' to add "'+P(a.value)+'" as a new tag. ',1)])):k("",!0)])):k("",!0),v(ae,{message:e.error,class:"mt-2"},null,8,["message"])]))}},ha=ht(Lo,[["__scopeId","data-v-4d528a4c"]]),Fo={class:"space-y-4"},Ho="Add New Milestone",Bo="/api/milestones",zo="post",Go="Create Milestone",qo="Milestone created successfully!",Zo={__name:"MilestoneFormModal",props:{show:Boolean,projectId:Number},emits:["close","saved"],setup(e,{emit:t}){const s=e,r=t,a=Kt({name:"",description:"",completion_date:null,status:"Not Started",project_id:s.projectId}),o=["Not Started","In Progress","Completed","Overdue"];me(()=>s.show,c=>{c&&Object.assign(a,{name:"",description:"",completion_date:null,status:"Not Started",project_id:s.projectId})},{immediate:!0});const n=c=>{r("saved",c),r("close")},u=()=>{r("close")};return(c,d)=>(i(),A(Xt,{show:e.show,title:Ho,"api-endpoint":Bo,"http-method":zo,"form-data":a,"submit-button-text":Go,"success-message":qo,onClose:u,onSubmitted:n},{default:x(({errors:p})=>[l("div",Fo,[l("div",null,[v(q,{for:"milestone-name",value:"Milestone Name"}),v(Oe,{id:"milestone-name",modelValue:a.name,"onUpdate:modelValue":d[0]||(d[0]=g=>a.name=g),type:"text",class:"mt-1 block w-full",placeholder:"Enter milestone name",required:""},null,8,["modelValue"]),v(ae,{message:p.name?p.name[0]:"",class:"mt-2"},null,8,["message"])]),l("div",null,[v(q,{for:"milestone-description",value:"Description"}),ce(l("textarea",{id:"milestone-description","onUpdate:modelValue":d[1]||(d[1]=g=>a.description=g),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",rows:"3",placeholder:"Enter milestone description"},null,512),[[Le,a.description]]),v(ae,{message:p.description?p.description[0]:"",class:"mt-2"},null,8,["message"])]),l("div",null,[v(q,{for:"milestone-completion-date",value:"Completion Date"}),v(Oe,{id:"milestone-completion-date",modelValue:a.completion_date,"onUpdate:modelValue":d[2]||(d[2]=g=>a.completion_date=g),type:"date",class:"mt-1 block w-full"},null,8,["modelValue"]),v(ae,{message:p.completion_date?p.completion_date[0]:"",class:"mt-2"},null,8,["message"])]),l("div",null,[v(q,{for:"milestone-status",value:"Status"}),v($e,{id:"milestone-status",modelValue:a.status,"onUpdate:modelValue":d[3]||(d[3]=g=>a.status=g),options:o.map(g=>({value:g,label:g})),"value-key":"value","label-key":"label",placeholder:"Select status",class:"mt-1"},null,8,["modelValue","options"]),v(ae,{message:p.status?p.status[0]:"",class:"mt-2"},null,8,["message"])])])]),_:1},8,["show","form-data"]))}},Jo={class:"space-y-4"},Qo={key:0},Ko={key:0,class:"text-sm text-gray-500"},Xo={key:0,class:"text-sm text-gray-500"},en={key:0,class:"text-sm text-gray-500"},tn={class:"flex items-center gap-2 mt-1"},sn={key:0,class:"text-sm text-gray-500"},an=["disabled"],rn="Create New Task",on="/api/tasks",nn="post",ln="Create Task",un="Task created successfully!",dn={__name:"CreateTaskModal",props:{show:Boolean,projectId:{type:Number,default:null}},emits:["close","saved"],setup(e,{emit:t}){const s=e,r=t,a=Kt({name:"",description:"",assigned_to_user_id:null,due_date:null,status:"To Do",task_type_id:null,milestone_id:null,project_id:s.projectId,priority:"medium",tags:[],tags_data:[]}),o=["To Do","In Progress","Done","Blocked","Archived"],n=[{value:"low",label:"Low"},{value:"medium",label:"Medium"},{value:"high",label:"High"}],u=N([]),c=N([]),d=N([]),p=N([]),g=N(!0),C=N(!1),U=N(!1),O=N(!1),w=N(!1);me(()=>s.show,async X=>{X&&(Object.assign(a,{name:"",description:"",assigned_to_user_id:null,due_date:null,status:"To Do",task_type_id:null,milestone_id:null,project_id:s.projectId,priority:"medium",tags:[],tags_data:[]}),s.projectId?await y(s.projectId):await M())},{immediate:!0}),me(()=>a.project_id,async X=>{X?await y(X):(c.value=[],d.value=[],p.value=[])});const M=async()=>{g.value=!0;try{const X=await window.axios.get("/api/projects-simplified");u.value=X.data.map(V=>({value:V.id,label:V.name}))}catch(X){console.error("Error fetching projects:",X),u.value=[]}finally{g.value=!1}},y=async X=>{if(X){C.value=!0,U.value=!0,O.value=!0;try{const[V,Q,K]=await Promise.all([window.axios.get(`/api/projects/${X}/users`),window.axios.get("/api/task-types"),window.axios.get(`/api/projects/${X}/milestones`)]);c.value=V.data.map(Ce=>({value:Ce.id,label:Ce.name})),d.value=Q.data.map(Ce=>({value:Ce.id,label:Ce.name})),p.value=K.data.map(Ce=>({value:Ce.id,label:Ce.name}))}catch(V){console.error("Error fetching associated task data:",V),c.value=[],d.value=[],p.value=[]}finally{C.value=!1,U.value=!1,O.value=!1}}},f=X=>{r("saved",X),r("close")},h=()=>{r("close")},_=()=>{a.project_id?w.value=!0:alert("Please select a project before adding a milestone.")},$=X=>{if(w.value=!1,X&&X.id&&X.name){const V={value:X.id,label:X.name};p.value.some(Q=>Q.value===V.value)||p.value.push(V),a.milestone_id=V.value}},W=B(()=>c.value),re=B(()=>d.value),Ee=B(()=>p.value);return(X,V)=>(i(),m(ie,null,[v(Xt,{show:e.show,title:rn,"api-endpoint":on,"http-method":nn,"form-data":a,"submit-button-text":ln,"success-message":un,onClose:h,onSubmitted:f},{default:x(({errors:Q})=>[l("div",Jo,[e.projectId?k("",!0):(i(),m("div",Qo,[v(q,{for:"task-project",value:"Project"}),g.value?(i(),m("div",Ko,"Loading projects...")):(i(),A($e,{key:1,id:"task-project",modelValue:a.project_id,"onUpdate:modelValue":V[0]||(V[0]=K=>a.project_id=K),options:u.value,"value-key":"value","label-key":"label",placeholder:"Select a project",class:"mt-1",required:!0},null,8,["modelValue","options"])),v(ae,{message:Q.project_id?Q.project_id[0]:"",class:"mt-2"},null,8,["message"])])),l("div",null,[v(q,{for:"task-name",value:"Task Name"}),v(Oe,{id:"task-name",modelValue:a.name,"onUpdate:modelValue":V[1]||(V[1]=K=>a.name=K),type:"text",class:"mt-1 block w-full",placeholder:"Enter task name",required:""},null,8,["modelValue"]),v(ae,{message:Q.name?Q.name[0]:"",class:"mt-2"},null,8,["message"])]),l("div",null,[v(q,{for:"task-description",value:"Description"}),ce(l("textarea",{id:"task-description","onUpdate:modelValue":V[2]||(V[2]=K=>a.description=K),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",rows:"3",placeholder:"Enter task description"},null,512),[[Le,a.description]]),v(ae,{message:Q.description?Q.description[0]:"",class:"mt-2"},null,8,["message"])]),l("div",null,[v(q,{for:"task-status",value:"Status"}),v($e,{id:"task-status",modelValue:a.status,"onUpdate:modelValue":V[3]||(V[3]=K=>a.status=K),options:o.map(K=>({value:K,label:K})),"value-key":"value","label-key":"label",placeholder:"Select status",class:"mt-1"},null,8,["modelValue","options"]),v(ae,{message:Q.status?Q.status[0]:"",class:"mt-2"},null,8,["message"])]),l("div",null,[v(q,{for:"task-priority",value:"Priority"}),v($e,{id:"task-priority",modelValue:a.priority,"onUpdate:modelValue":V[4]||(V[4]=K=>a.priority=K),options:n,"value-key":"value","label-key":"label",placeholder:"Select priority",class:"mt-1"},null,8,["modelValue"]),v(ae,{message:Q.priority?Q.priority[0]:"",class:"mt-2"},null,8,["message"])]),l("div",null,[v(q,{for:"task-due-date",value:"Due Date"}),v(Oe,{id:"task-due-date",modelValue:a.due_date,"onUpdate:modelValue":V[5]||(V[5]=K=>a.due_date=K),type:"date",class:"mt-1 block w-full"},null,8,["modelValue"]),v(ae,{message:Q.due_date?Q.due_date[0]:"",class:"mt-2"},null,8,["message"])]),l("div",null,[v(q,{for:"task-assigned-to",value:"Assigned To"}),C.value?(i(),m("div",Xo,"Loading users...")):(i(),A($e,{key:1,id:"task-assigned-to",modelValue:a.assigned_to_user_id,"onUpdate:modelValue":V[6]||(V[6]=K=>a.assigned_to_user_id=K),options:W.value,"value-key":"value","label-key":"label",placeholder:"Unassigned",class:"mt-1","allow-empty":!0},null,8,["modelValue","options"])),v(ae,{message:Q.assigned_to_user_id?Q.assigned_to_user_id[0]:"",class:"mt-2"},null,8,["message"])]),l("div",null,[v(q,{for:"task-type",value:"Task Type"}),U.value?(i(),m("div",en,"Loading task types...")):(i(),A($e,{key:1,id:"task-type",modelValue:a.task_type_id,"onUpdate:modelValue":V[7]||(V[7]=K=>a.task_type_id=K),options:re.value,"value-key":"value","label-key":"label",placeholder:"Select a task type",class:"mt-1","allow-empty":!0},null,8,["modelValue","options"])),v(ae,{message:Q.task_type_id?Q.task_type_id[0]:"",class:"mt-2"},null,8,["message"])]),l("div",null,[v(q,{for:"task-milestone",value:"Milestone"}),l("div",tn,[O.value?(i(),m("div",sn,"Loading milestones...")):(i(),A($e,{key:1,id:"task-milestone",modelValue:a.milestone_id,"onUpdate:modelValue":V[8]||(V[8]=K=>a.milestone_id=K),options:Ee.value,"value-key":"value","label-key":"label",placeholder:"No milestone",class:"flex-grow","allow-empty":!0,disabled:!a.project_id},null,8,["modelValue","options","disabled"])),l("button",{type:"button",onClick:_,disabled:!a.project_id||O.value,class:"px-3 py-2 text-sm font-medium text-blue-600 bg-blue-50 rounded-md hover:bg-blue-100 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",title:"Add New Milestone"},V[11]||(V[11]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4v16m8-8H4"})],-1)]),8,an)]),v(ae,{message:Q.milestone_id?Q.milestone_id[0]:"",class:"mt-2"},null,8,["message"])]),l("div",null,[v(ha,{modelValue:a.tags,"onUpdate:modelValue":V[9]||(V[9]=K=>a.tags=K),initialTags:a.tags_data,label:"Tags",placeholder:"Search or add tags",error:Q.tags?Q.tags[0]:"",disabled:!a.project_id},null,8,["modelValue","initialTags","error","disabled"])])])]),_:1},8,["show","form-data"]),v(Zo,{show:w.value,"project-id":a.project_id,onClose:V[10]||(V[10]=Q=>w.value=!1),onSaved:$},null,8,["show","project-id"])],64))}},cn={class:"space-y-4"},fn={class:"flex items-center mt-4"},mn={__name:"CreateForm",props:{show:{type:Boolean,default:!1},apiEndpoint:{type:String,required:!0}},emits:["close","resourceCreated"],setup(e,{emit:t}){const s=e,r=t,a=Kt({title:"",description:"",url:"",type:"website",thumbnail_url:"",visible_to_client:!0,tags:[]}),o=B(()=>[{value:"website",label:"Website"},{value:"youtube",label:"YouTube Video"},{value:"document",label:"Document"},{value:"image",label:"Image"},{value:"other",label:"Other"}]),n=d=>d,u=d=>{r("resourceCreated",d),c()},c=()=>{a.title="",a.description="",a.url="",a.type="website",a.thumbnail_url="",a.visible_to_client=!0,a.tags=[],r("close")};return(d,p)=>(i(),A(Xt,{show:s.show,title:"Add New Shareable Resource",apiEndpoint:s.apiEndpoint,httpMethod:"post",formData:a,submitButtonText:"Create Resource",successMessage:"Shareable resource created successfully!",formatDataForApi:n,onSubmitted:u,onClose:c},{default:x(({errors:g})=>[l("div",cn,[l("div",null,[v(q,{for:"title",value:"Title",class:"mb-1"}),v(Oe,{id:"title",type:"text",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:a.title,"onUpdate:modelValue":p[0]||(p[0]=C=>a.title=C),required:""},null,8,["modelValue"]),v(ae,{message:g.title?g.title[0]:"",class:"mt-2"},null,8,["message"])]),l("div",null,[v(q,{for:"url",value:"Resource URL",class:"mb-1"}),v(Oe,{id:"url",type:"url",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:a.url,"onUpdate:modelValue":p[1]||(p[1]=C=>a.url=C),required:""},null,8,["modelValue"]),v(ae,{message:g.url?g.url[0]:"",class:"mt-2"},null,8,["message"])]),l("div",null,[v(q,{for:"type",value:"Resource Type",class:"mb-1"}),v($e,{id:"type",modelValue:a.type,"onUpdate:modelValue":p[2]||(p[2]=C=>a.type=C),options:o.value,valueKey:"value",labelKey:"label",placeholder:"Select Resource Type",required:"",class:"mt-1 block w-full"},null,8,["modelValue","options"]),v(ae,{message:g.type?g.type[0]:"",class:"mt-2"},null,8,["message"])]),l("div",null,[v(q,{for:"thumbnail_url",value:"Thumbnail URL (Optional)",class:"mb-1"}),v(Oe,{id:"thumbnail_url",type:"url",class:"mt-1 block w-full rounded-lg shadow-sm",modelValue:a.thumbnail_url,"onUpdate:modelValue":p[3]||(p[3]=C=>a.thumbnail_url=C)},null,8,["modelValue"]),v(ae,{message:g.thumbnail_url?g.thumbnail_url[0]:"",class:"mt-2"},null,8,["message"])]),l("div",null,[v(q,{for:"description",value:"Description (Optional)",class:"mb-1"}),ce(l("textarea",{id:"description",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-lg shadow-sm mt-1 block w-full","onUpdate:modelValue":p[4]||(p[4]=C=>a.description=C),rows:"3"},null,512),[[Le,a.description]]),v(ae,{message:g.description?g.description[0]:"",class:"mt-2"},null,8,["message"])]),l("div",null,[v(ha,{modelValue:a.tags,"onUpdate:modelValue":p[5]||(p[5]=C=>a.tags=C),label:"Associated Tags",placeholder:"Search or add tags",error:g.tags?g.tags[0]:""},null,8,["modelValue","error"])]),l("div",fn,[v(Tr,{id:"visible_to_client",checked:a.visible_to_client,"onUpdate:checked":p[6]||(p[6]=C=>a.visible_to_client=C)},null,8,["checked"]),v(q,{for:"visible_to_client",value:"Visible to Client",class:"ml-2"}),v(ae,{message:g.visible_to_client?g.visible_to_client[0]:"",class:"mt-2"},null,8,["message"])])])]),_:1},8,["show","apiEndpoint","formData"]))}},hn=ht(mn,[["__scopeId","data-v-3e3a6a9f"]]),vn={key:0,class:"sidebar-wrapper"},pn={class:"fixed inset-0 z-[100] flex pointer-events-none"},gn={class:"flex items-center justify-between p-4 border-b border-gray-200 bg-white rounded-tl-xl sticky top-0 z-20"},yn={class:"text-xl font-semibold text-gray-900"},kn={class:"flex-1 overflow-y-auto p-6 scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-gray-300 scrollbar-track-gray-100"},_n={key:1,class:"p-4 border-t border-gray-200 bg-white sticky bottom-0 z-20"},wn={__name:"RightSidebar",props:{show:{type:Boolean,default:!1},title:{type:String,default:"Details"},initialWidth:{type:Number,default:50},minWidth:{type:Number,default:30},maxWidth:{type:Number,default:90}},emits:["close","update:show"],setup(e,{emit:t}){const s=e,r=t,a=N(s.initialWidth),o=N(!1),n=g=>{o.value=!0,document.addEventListener("pointermove",u),document.addEventListener("pointerup",c)},u=g=>{if(!o.value)return;const C=window.innerWidth,O=(C-g.clientX)/C*100,w=Math.max(s.minWidth,Math.min(s.maxWidth,O));a.value=w},c=()=>{o.value=!1,document.removeEventListener("pointermove",u),document.removeEventListener("pointerup",c)};me(()=>s.show,g=>{g?document.body.style.overflow="hidden":document.body.style.overflow=""},{immediate:!0});const d=()=>{r("update:show",!1),r("close")},p=B(()=>window.innerWidth<768);return me(p,g=>{g&&s.show?a.value=100:!g&&s.show&&(a.value=s.initialWidth)},{immediate:!0}),me(()=>s.show,g=>{g&&(p.value?a.value=100:a.value=s.initialWidth)}),(g,C)=>(i(),A(xr,{to:"body"},[v(fa,{"enter-active-class":"transition ease-out duration-300 transform","enter-from-class":"translate-x-full","enter-to-class":"translate-x-0","leave-active-class":"transition ease-in duration-200 transform","leave-from-class":"translate-x-0","leave-to-class":"translate-x-full"},{default:x(()=>[e.show?(i(),m("div",vn,[l("div",{class:"fixed inset-0 bg-gray-900 bg-opacity-50 transition-opacity z-[99]",onClick:d}),l("div",pn,[l("div",{class:"relative ml-auto h-full bg-white shadow-xl flex flex-col rounded-l-xl pointer-events-auto",style:br({width:p.value?"100%":`${a.value}vw`})},[p.value?k("",!0):(i(),m("div",{key:0,class:"absolute left-0 top-0 h-full w-2 cursor-col-resize -ml-1 z-10",onPointerdown:n,title:"Drag to resize"},null,32)),l("div",gn,[l("h3",yn,P(e.title),1),l("button",{onClick:d,class:"text-gray-400 hover:text-gray-600 transition-colors"},C[0]||(C[0]=[l("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),l("div",kn,[Ne(g.$slots,"content",{},void 0,!0)]),g.$slots.footer?(i(),m("div",_n,[Ne(g.$slots,"footer",{},void 0,!0)])):k("",!0)],4)])])):k("",!0)]),_:3})]))}},va=ht(wn,[["__scopeId","data-v-2d864577"]]),bn={class:"flex border-b border-gray-200"},xn={key:0,class:"ml-2 px-2 py-1 text-xs font-bold bg-red-600 text-white rounded-full"},Sn={class:"p-4 space-y-2 overflow-y-auto"},Mn={key:0,class:"p-6 text-center text-gray-500"},Dn={key:0},Tn={key:1},Cn=["onClick"],$n={class:"flex-1 min-w-0"},Yn={class:"flex items-start justify-between gap-2 mb-1"},On={class:"flex-1 min-w-0"},Nn={key:0,class:"text-base font-semibold text-gray-900 truncate"},Pn={key:1,class:"text-xs text-gray-500"},In={key:0,class:"text-sm text-gray-600 mt-1 mb-2"},An={class:"flex items-center text-xs text-gray-500 font-medium"},En={key:0},Rn={key:1,class:"mx-2"},Un={key:2},jn={__name:"NotificationsSidebar",setup(e){const t=B(()=>Tt.value.notifications),s=N("New"),r=B(()=>s.value==="New"?t.value.filter(u=>!u.isRead):t.value),a=async u=>{await da(u.view_id);const c=u.task_id||o(u.url),d=u.project_id||n(u.url);c&&d?(ca(c,d),Qs()):(console.warn("Could not open task sidebar. Falling back to opening URL in new tab."),u.url&&window.open(u.url,"_blank"))},o=u=>{const c=u.match(/\/task\/(\d+)/);return c?parseInt(c[1]):null},n=u=>{const c=u.match(/\/project\/(\d+)\//);return c?parseInt(c[1]):null};return(u,c)=>(i(),A(va,{show:I(Tt).show,"onUpdate:show":I(Qs),title:"Notifications","initial-width":35,class:"z-[100]"},{content:x(()=>[l("div",bn,[l("button",{onClick:c[0]||(c[0]=d=>s.value="New"),class:L([{"border-blue-600 text-blue-600 font-semibold":s.value==="New","border-transparent text-gray-500 hover:text-gray-700":s.value!=="New"},"flex-1 py-4 px-1 text-center text-sm border-b-2 transition-colors duration-200"])},[c[2]||(c[2]=D(" New ",-1)),t.value.filter(d=>!d.isRead).length>0?(i(),m("span",xn,P(t.value.filter(d=>!d.isRead).length),1)):k("",!0)],2),l("button",{onClick:c[1]||(c[1]=d=>s.value="All"),class:L([{"border-blue-600 text-blue-600 font-semibold":s.value==="All","border-transparent text-gray-500 hover:text-gray-700":s.value!=="All"},"flex-1 py-4 px-1 text-center text-sm border-b-2 transition-colors duration-200"])}," All ",2)]),l("div",Sn,[r.value.length===0?(i(),m("div",Mn,[s.value==="New"?(i(),m("span",Dn,"You have no new notifications.")):(i(),m("span",Tn,"You have no notifications."))])):k("",!0),(i(!0),m(ie,null,ue(r.value,d=>(i(),m("div",{key:d.id,class:L(["bg-white rounded-xl shadow-sm p-4 flex items-start space-x-4 border border-gray-200 transition-all duration-200 hover:shadow-md cursor-pointer",{"bg-gray-50":d.isRead}]),onClick:p=>a(d)},[l("div",$n,[l("div",Yn,[l("div",On,[d.title?(i(),m("h3",Nn,P(d.title),1)):k("",!0),d.project_name?(i(),m("p",Pn,P(d.project_name),1)):k("",!0)])]),d.message?(i(),m("p",In,P(d.message),1)):k("",!0),l("div",An,[d.due_date?(i(),m("span",En,"Due: "+P(I(ua)(d.due_date)),1)):k("",!0),d.due_date&&d.priority?(i(),m("span",Rn,"â€¢")):k("",!0),d.priority?(i(),m("span",Un,"Priority: "+P(d.priority),1)):k("",!0)])])],10,Cn))),128))])]),_:1},8,["show","onUpdate:show"]))}},Wn={class:"flex items-center p-4 h-16 border-b border-gray-700"},Vn={key:0,class:"text-xl font-semibold flex-1 truncate"},Ln=["title"],Fn={key:0,class:"p-4 border-b border-gray-700"},Hn={class:"relative"},Bn={key:1,class:"flex-1 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-500 scrollbar-track-gray-700 p-4"},zn={key:0,class:"mb-4"},Gn={class:"ml-2 mt-2 space-y-1"},qn=["onClick"],Zn={class:"text-sm font-medium text-gray-300 truncate"},Jn={class:"ml-4 mt-1 space-y-1"},Qn={class:"truncate"},Kn={key:1,class:"mb-4"},Xn={class:"ml-2 mt-2 space-y-1"},el=["onClick"],tl={class:"text-sm font-medium text-gray-300 truncate"},sl={class:"ml-4 mt-1 space-y-1"},al={class:"truncate"},rl={key:2,class:"mb-4"},ol={class:"ml-2 mt-2 space-y-1"},nl={class:"truncate"},ll={key:3,class:"mb-4"},il={class:"ml-2 mt-2 space-y-1"},ul={class:"truncate"},dl={key:4,class:"text-gray-400 text-sm text-center py-4"},cl={key:5,class:"text-gray-400 text-sm text-center py-4"},fl={key:2,class:"flex flex-col items-center pt-4 space-y-4"},ml={key:0,class:"text-gray-400 text-xs text-center px-2"},hl={__name:"LeftSidebar",props:{allProjects:{type:Array,default:()=>[]},activeProjectId:{type:Number,default:null}},emits:["project-selected"],setup(e,{emit:t}){const s=e,r=t,a=N(localStorage.getItem("leftSidebarCollapsed")!=="false"),o=N(""),n=N({}),u=B(()=>{const f=new Set;return s.allProjects.forEach(h=>{h.project_type&&f.add(h.project_type)}),Array.from(f).sort()}),c=B(()=>{const f=new Set;return s.allProjects.forEach(h=>{Array.isArray(h.tags)&&h.tags.forEach(_=>f.add(_))}),Array.from(f).sort()}),d=B(()=>{if(!o.value)return s.allProjects;const f=o.value.toLowerCase();return s.allProjects.filter(h=>{var _,$,W;return h.name.toLowerCase().includes(f)||((_=h.description)==null?void 0:_.toLowerCase().includes(f))||(($=h.project_type)==null?void 0:$.toLowerCase().includes(f))||Array.isArray(h.tags)&&h.tags.some(re=>re.toLowerCase().includes(f))||((W=h.status)==null?void 0:W.toLowerCase().includes(f))})}),p=B(()=>{const f={};d.value.forEach(h=>{h.project_type&&h.status==="active"&&(f[h.project_type]||(f[h.project_type]=[]),f[h.project_type].push(h))});for(const h in f)f[h].sort((_,$)=>_.name.localeCompare($.name));return f}),g=B(()=>{const f={};d.value.forEach(h=>{Array.isArray(h.tags)&&h.tags.length>0&&h.tags.forEach(_=>{f[_]||(f[_]=[]),f[_].push(h)})});for(const h in f)f[h]=[...new Set(f[h])].sort((_,$)=>_.name.localeCompare($.name));return f}),C=B(()=>d.value.filter(f=>f.status!=="active").sort((f,h)=>f.name.localeCompare(h.name))),U=B(()=>d.value.filter(f=>!f.project_type&&(!Array.isArray(f.tags)||f.tags.length===0)).sort((f,h)=>f.name.localeCompare(h.name)));me(()=>s.allProjects,()=>{u.value.forEach(f=>{const h=`type-${f}`;n.value[h]===void 0&&(n.value[h]=!0)}),c.value.forEach(f=>{const h=`tag-${f}`;n.value[h]===void 0&&(n.value[h]=!0)}),n.value["main-types"]===void 0&&(n.value["main-types"]=!1),n.value["main-tags"]===void 0&&(n.value["main-tags"]=!1),n.value["inactive-projects"]===void 0&&(n.value["inactive-projects"]=!1),n.value.uncategorized===void 0&&(n.value.uncategorized=!1)},{immediate:!0}),me(a,f=>{localStorage.setItem("leftSidebarCollapsed",f)});const O=()=>{a.value=!a.value},w=f=>{n.value[f]=!n.value[f]},M=f=>{r("project-selected",f)},y=()=>{o.value=""};return(f,h)=>(i(),m("div",{class:L({"w-64":!a.value,"w-16":a.value,"min-w-16":!0,"bg-gray-800 text-white flex flex-col transition-all duration-300 ease-in-out shrink-0 h-screen overflow-hidden":!0})},[l("div",Wn,[a.value?k("",!0):(i(),m("h2",Vn,"Projects")),l("button",{onClick:O,class:"p-2 rounded-full hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500",title:a.value?"Expand Sidebar":"Collapse Sidebar"},[(i(),m("svg",{class:L(["w-6 h-6 text-gray-400 transform transition-transform duration-300",{"rotate-180":a.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},h[5]||(h[5]=[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"},null,-1)]),2))],8,Ln)]),a.value?k("",!0):(i(),m("div",Fn,[l("div",Hn,[ce(l("input",{type:"text","onUpdate:modelValue":h[0]||(h[0]=_=>o.value=_),placeholder:"Search all projects...",class:"w-full p-2 rounded-md bg-gray-700 border border-gray-600 text-white placeholder-gray-400 focus:ring-indigo-500 focus:border-indigo-500 text-sm"},null,512),[[Le,o.value]]),o.value?(i(),m("button",{key:0,onClick:y,class:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-200",title:"Clear search"},h[6]||(h[6]=[l("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))):k("",!0)])])),a.value?(i(),m("div",fl,[(i(!0),m(ie,null,ue(s.allProjects,_=>(i(),A(I(je),{key:_.id,href:f.route("projects.show",_.id),onClick:$=>M(_.id),class:L({"w-10 h-10 rounded-full flex items-center justify-center text-xs font-bold transition-all duration-200":!0,"bg-indigo-600 text-white":_.id===e.activeProjectId,"bg-gray-700 text-gray-300 hover:bg-gray-600":_.id!==e.activeProjectId}),title:_.name},{default:x(()=>[D(P(_.name.charAt(0).toUpperCase()),1)]),_:2},1032,["href","onClick","class","title"]))),128)),e.allProjects.length===0?(i(),m("div",ml," No Projects ")):k("",!0)])):(i(),m("div",Bn,[Object.keys(p.value).length>0?(i(),m("div",zn,[l("div",{class:"flex items-center justify-between cursor-pointer py-2 hover:bg-gray-700 rounded-md px-2",onClick:h[1]||(h[1]=_=>w("main-types"))},[h[8]||(h[8]=l("h3",{class:"text-sm font-semibold text-gray-400"},"Active Projects by Type",-1)),(i(),m("svg",{class:L(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!n.value["main-types"]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},h[7]||(h[7]=[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))]),ce(l("div",Gn,[(i(!0),m(ie,null,ue(p.value,(_,$)=>(i(),m("div",{key:$},[l("div",{class:"flex items-center justify-between cursor-pointer py-1 hover:bg-gray-700 rounded-md px-2",onClick:W=>w(`type-${$}`)},[l("h4",Zn,P($),1),(i(),m("svg",{class:L(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!n.value[`type-${$}`]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},h[9]||(h[9]=[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))],8,qn),ce(l("ul",Jn,[(i(!0),m(ie,null,ue(_,W=>(i(),m("li",{key:W.id},[v(I(je),{href:f.route("projects.show",W.id),onClick:re=>M(W.id),class:L({"block w-full text-left px-3 py-2 rounded-md transition-colors":!0,"bg-indigo-600 text-white":W.id===e.activeProjectId,"hover:bg-gray-700 text-gray-200":W.id!==e.activeProjectId,"font-bold":W.id===e.activeProjectId})},{default:x(()=>[l("span",Qn,P(W.name),1)]),_:2},1032,["href","onClick","class"])]))),128))],512),[[Ze,!n.value[`type-${$}`]]])]))),128))],512),[[Ze,!n.value["main-types"]]])])):k("",!0),Object.keys(g.value).length>0?(i(),m("div",Kn,[l("div",{class:"flex items-center justify-between cursor-pointer py-2 hover:bg-gray-700 rounded-md px-2",onClick:h[2]||(h[2]=_=>w("main-tags"))},[h[11]||(h[11]=l("h3",{class:"text-sm font-semibold text-gray-400"},"Projects by Tag",-1)),(i(),m("svg",{class:L(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!n.value["main-tags"]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},h[10]||(h[10]=[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))]),ce(l("div",Xn,[(i(!0),m(ie,null,ue(g.value,(_,$)=>(i(),m("div",{key:$},[l("div",{class:"flex items-center justify-between cursor-pointer py-1 hover:bg-gray-700 rounded-md px-2",onClick:W=>w(`tag-${$}`)},[l("h4",tl,P($),1),(i(),m("svg",{class:L(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!n.value[`tag-${$}`]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},h[12]||(h[12]=[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))],8,el),ce(l("ul",sl,[(i(!0),m(ie,null,ue(_,W=>(i(),m("li",{key:W.id},[v(I(je),{href:f.route("projects.show",W.id),onClick:re=>M(W.id),class:L({"block w-full text-left px-3 py-2 rounded-md transition-colors":!0,"bg-indigo-600 text-white":W.id===e.activeProjectId,"hover:bg-gray-700 text-gray-200":W.id!==e.activeProjectId,"font-bold":W.id===e.activeProjectId})},{default:x(()=>[l("span",al,P(W.name),1)]),_:2},1032,["href","onClick","class"])]))),128))],512),[[Ze,!n.value[`tag-${$}`]]])]))),128))],512),[[Ze,!n.value["main-tags"]]])])):k("",!0),C.value.length>0?(i(),m("div",rl,[l("div",{class:"flex items-center justify-between cursor-pointer py-2 hover:bg-gray-700 rounded-md px-2",onClick:h[3]||(h[3]=_=>w("inactive-projects"))},[h[14]||(h[14]=l("h3",{class:"text-sm font-semibold text-gray-400"},"Inactive Projects",-1)),(i(),m("svg",{class:L(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!n.value["inactive-projects"]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},h[13]||(h[13]=[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))]),ce(l("ul",ol,[(i(!0),m(ie,null,ue(C.value,_=>(i(),m("li",{key:_.id},[v(I(je),{href:f.route("projects.show",_.id),onClick:$=>M(_.id),class:L({"block w-full text-left px-3 py-2 rounded-md transition-colors":!0,"bg-indigo-600 text-white":_.id===e.activeProjectId,"hover:bg-gray-700 text-gray-200":_.id!==e.activeProjectId,"font-bold":_.id===e.activeProjectId})},{default:x(()=>[l("span",nl,P(_.name)+" ("+P(_.status.replace("_"," "))+")",1)]),_:2},1032,["href","onClick","class"])]))),128))],512),[[Ze,!n.value["inactive-projects"]]])])):k("",!0),U.value.length>0?(i(),m("div",ll,[l("div",{class:"flex items-center justify-between cursor-pointer py-2 hover:bg-gray-700 rounded-md px-2",onClick:h[4]||(h[4]=_=>w("uncategorized"))},[h[16]||(h[16]=l("h3",{class:"text-sm font-semibold text-gray-400"},"Uncategorized",-1)),(i(),m("svg",{class:L(["w-4 h-4 text-gray-400 transform transition-transform duration-200",{"rotate-90":!n.value.uncategorized}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},h[15]||(h[15]=[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))]),ce(l("ul",il,[(i(!0),m(ie,null,ue(U.value,_=>(i(),m("li",{key:_.id},[v(I(je),{href:f.route("projects.show",_.id),onClick:$=>M(_.id),class:L({"block w-full text-left px-3 py-2 rounded-md transition-colors":!0,"bg-indigo-600 text-white":_.id===e.activeProjectId,"hover:bg-gray-700 text-gray-200":_.id!==e.activeProjectId,"font-bold":_.id===e.activeProjectId})},{default:x(()=>[l("span",ul,P(_.name),1)]),_:2},1032,["href","onClick","class"])]))),128))],512),[[Ze,!n.value.uncategorized]])])):k("",!0),d.value.length===0?(i(),m("div",dl," No projects found matching your search. ")):e.allProjects.length===0&&!o.value?(i(),m("div",cl," No projects available. ")):k("",!0)]))],2))}},vl=ht(hl,[["__scopeId","data-v-417d431f"]]),pl={class:"relative"},pa={__name:"Dropdown",props:{align:{type:String,default:"right"},width:{type:String,default:"48"},contentClasses:{type:String,default:"py-1 bg-white"}},setup(e){const t=e,s=n=>{o.value&&n.key==="Escape"&&(o.value=!1)};Pt(()=>document.addEventListener("keydown",s)),Jt(()=>document.removeEventListener("keydown",s));const r=B(()=>({48:"w-48"})[t.width.toString()]),a=B(()=>t.align==="left"?"ltr:origin-top-left rtl:origin-top-right start-0":t.align==="right"?"ltr:origin-top-right rtl:origin-top-left end-0":"origin-top"),o=N(!1);return(n,u)=>(i(),m("div",pl,[l("div",{onClick:u[0]||(u[0]=c=>o.value=!o.value)},[Ne(n.$slots,"trigger")]),ce(l("div",{class:"fixed inset-0 z-40",onClick:u[1]||(u[1]=c=>o.value=!1)},null,512),[[Ze,o.value]]),v(fa,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:x(()=>[ce(l("div",{class:L(["absolute z-50 mt-2 rounded-md shadow-lg",[r.value,a.value]]),style:{display:"none"},onClick:u[2]||(u[2]=c=>o.value=!1)},[l("div",{class:L(["rounded-md ring-1 ring-black ring-opacity-5",e.contentClasses])},[Ne(n.$slots,"content")],2)],2),[[Ze,o.value]])]),_:3})]))}},pe={__name:"DropdownLink",props:{href:{type:String,required:!0},method:{type:String,default:"get"},as:{type:String,default:"a"}},setup(e){return(t,s)=>(i(),A(I(je),ma({href:e.href,method:e.method,as:e.as},t.$attrs,{class:"block w-full px-4 py-2 text-start text-sm leading-5 text-gray-700 transition duration-150 ease-in-out hover:bg-gray-100 focus:bg-gray-100 focus:outline-none"}),{default:x(()=>[Ne(t.$slots,"default")]),_:3},16,["href","method","as"]))}},Xs={__name:"NavLink",props:{href:{type:String,required:!0},active:{type:Boolean}},setup(e){const t=e,s=B(()=>t.active?"inline-flex items-center px-1 pt-1 border-b-2 border-indigo-400 text-sm font-medium leading-5 text-gray-900 focus:outline-none focus:border-indigo-700 transition duration-150 ease-in-out":"inline-flex items-center px-1 pt-1 border-b-2 border-transparent text-sm font-medium leading-5 text-gray-500 hover:text-gray-700 hover:border-gray-300 focus:outline-none focus:text-gray-700 focus:border-gray-300 transition duration-150 ease-in-out");return(r,a)=>(i(),A(I(je),{href:e.href,class:L(s.value)},{default:x(()=>[Ne(r.$slots,"default")]),_:3},8,["href","class"]))}};/**
 * @license lucide-vue-next v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ea=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),gl=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,s,r)=>r?r.toUpperCase():s.toLowerCase()),yl=e=>{const t=gl(e);return t.charAt(0).toUpperCase()+t.slice(1)},kl=(...e)=>e.filter((t,s,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===s).join(" ").trim(),ta=e=>e==="";/**
 * @license lucide-vue-next v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var xt={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};/**
 * @license lucide-vue-next v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _l=({name:e,iconNode:t,absoluteStrokeWidth:s,"absolute-stroke-width":r,strokeWidth:a,"stroke-width":o,size:n=xt.width,color:u=xt.stroke,...c},{slots:d})=>gs("svg",{...xt,...c,width:n,height:n,stroke:u,"stroke-width":ta(s)||ta(r)||s===!0||r===!0?Number(a||o||xt["stroke-width"])*24/Number(n):a||o||xt["stroke-width"],class:kl("lucide",c.class,...e?[`lucide-${ea(yl(e))}-icon`,`lucide-${ea(e)}`]:["lucide-icon"])},[...t.map(p=>gs(...p)),...d.default?[d.default()]:[]]);/**
 * @license lucide-vue-next v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ga=(e,t)=>(s,{slots:r,attrs:a})=>gs(_l,{...a,...s,iconNode:t,name:e},r);/**
 * @license lucide-vue-next v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wl=ga("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);/**
 * @license lucide-vue-next v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bl=ga("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),xl={class:"hidden sm:flex sm:items-center"},Sl={__name:"AdminDropdown",setup(e){const{canDo:t}=Ms(),s=t("manage_projects"),r=t("compose_emails"),a=t("approve_emails"),o=t("create_users");t("manage_roles");const n=t("manage_task_types"),u=t("create_clients");return(c,d)=>(i(),m("div",xl,[v(pa,{align:"right",width:"48"},{trigger:x(()=>d[0]||(d[0]=[l("span",{class:"inline-flex rounded-md"},[l("button",{type:"button",class:"inline-flex items-center rounded-md border border-transparent bg-white px-3 py-2 text-sm font-medium leading-4 text-gray-500 transition duration-150 ease-in-out hover:text-gray-700 focus:outline-none"},[D(" Admin "),l("svg",{class:"ms-2 -me-0.5 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])])],-1)])),content:x(()=>[I(s)?(i(),A(pe,{key:0,href:c.route("projects.index"),active:c.route().current("projects.index")},{default:x(()=>d[1]||(d[1]=[D(" Projects ",-1)])),_:1,__:[1]},8,["href","active"])):k("",!0),I(a)?(i(),A(pe,{key:1,href:c.route("emails.pending"),active:c.route().current("emails.pending")},{default:x(()=>d[2]||(d[2]=[D(" Approve Emails ",-1)])),_:1,__:[2]},8,["href","active"])):k("",!0),I(r)?(i(),A(pe,{key:2,href:c.route("emails.rejected"),active:c.route().current("emails.rejected")},{default:x(()=>d[3]||(d[3]=[D(" Rejected Emails ",-1)])),_:1,__:[3]},8,["href","active"])):k("",!0),I(o)?(i(),A(pe,{key:3,href:c.route("availability.index"),active:c.route().current("availability.index")},{default:x(()=>d[4]||(d[4]=[D(" Weekly Availability ",-1)])),_:1,__:[4]},8,["href","active"])):k("",!0),I(u)?(i(),A(pe,{key:4,href:c.route("clients.index"),active:c.route().current("clients.index")},{default:x(()=>d[5]||(d[5]=[D(" Clients ",-1)])),_:1,__:[5]},8,["href","active"])):k("",!0),I(o)?(i(),A(pe,{key:5,href:c.route("users.index"),active:c.route().current("users.index")},{default:x(()=>d[6]||(d[6]=[D(" Users ",-1)])),_:1,__:[6]},8,["href","active"])):k("",!0),I(n)?(i(),A(pe,{key:6,href:c.route("task-types.index"),active:c.route().current("task-types.index")},{default:x(()=>d[7]||(d[7]=[D(" Task Types ",-1)])),_:1,__:[7]},8,["href","active"])):k("",!0),I(t)("manage_bonus_configuration")?(i(),A(pe,{key:7,href:c.route("bonus-configuration.index"),active:c.route().current("bonus-configuration.index")},{default:x(()=>d[8]||(d[8]=[D(" Bonus Configuration ",-1)])),_:1,__:[8]},8,["href","active"])):k("",!0),I(t)("manage_email_templates")?(i(),A(pe,{key:8,href:c.route("email-templates.index"),active:c.route().current("email-templates.index")},{default:x(()=>d[9]||(d[9]=[D(" Email Templates ",-1)])),_:1,__:[9]},8,["href","active"])):k("",!0),I(t)("manage_placeholder_definitions")?(i(),A(pe,{key:9,href:c.route("placeholder-definitions.index"),active:c.route().current("placeholder-definitions.index")},{default:x(()=>d[10]||(d[10]=[D(" Placeholder Definitions ",-1)])),_:1,__:[10]},8,["href","active"])):k("",!0),I(t)("manage_roles")?(i(),A(pe,{key:10,href:c.route("admin.roles.index")},{default:x(()=>d[11]||(d[11]=[D(" Manage Roles ",-1)])),_:1,__:[11]},8,["href"])):k("",!0),I(t)("manage_permissions")?(i(),A(pe,{key:11,href:c.route("admin.permissions.index")},{default:x(()=>d[12]||(d[12]=[D(" Manage Permissions ",-1)])),_:1,__:[12]},8,["href"])):k("",!0)]),_:1})]))}},Ml={class:"relative ms-3"},Dl={class:"inline-flex rounded-md"},Tl={type:"button",class:"inline-flex items-center rounded-md border border-transparent bg-white px-3 py-2 text-sm font-medium leading-4 text-gray-500 transition duration-150 ease-in-out hover:text-gray-700 focus:outline-none"},Cl={__name:"UserDropdown",emits:["logoutSuccess","logoutError"],setup(e,{emit:t}){const s=B(()=>It().props.auth.user),r=t,a=()=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization,r("logoutSuccess")},o=n=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization,window.location.href="/login",r("logoutError",n)};return(n,u)=>(i(),m("div",Ml,[v(pa,{align:"right",width:"48"},{trigger:x(()=>{var c;return[l("span",Dl,[l("button",Tl,[D(P(s.value.name)+" ("+P((c=s.value.role_data)==null?void 0:c.name)+") ",1),u[0]||(u[0]=l("svg",{class:"ms-2 -me-0.5 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1))])])]}),content:x(()=>[v(pe,{href:n.route("profile.edit")},{default:x(()=>u[1]||(u[1]=[D(" Profile ",-1)])),_:1,__:[1]},8,["href"]),v(pe,{href:n.route("logout"),method:"post",as:"button",onSuccess:a,onError:o},{default:x(()=>u[2]||(u[2]=[D(" Log Out ",-1)])),_:1,__:[2]},8,["href"])]),_:1})]))}},$l={class:"border-b border-gray-100 bg-white z-10 relative"},Yl={class:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8"},Ol={class:"flex h-16 justify-between"},Nl={class:"flex"},Pl={class:"flex shrink-0 items-center"},Il={class:"hidden space-x-8 sm:-my-px sm:ms-10 sm:flex"},Al={class:"hidden sm:ms-6 sm:flex sm:items-center"},El={key:0,class:"absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-red-100 transform translate-x-1/2 -translate-y-1/2 bg-red-600 rounded-full"},Rl={class:"-me-2 flex items-center sm:hidden"},Ul={class:"h-6 w-6",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24"},jl={__name:"TopNavigation",props:{unreadNotificationCount:{type:Number,default:0}},emits:["openCreateTaskModal","openAddResource","openNotificationsSidebar"],setup(e,{emit:t}){const s=t,r=N(!1);B(()=>It().props.auth.user);const{canDo:a}=Ms(),o=a("manage_roles");return(n,u)=>(i(),m("nav",$l,[l("div",Yl,[l("div",Ol,[l("div",Nl,[l("div",Pl,[v(I(je),{href:n.route("dashboard")},{default:x(()=>[v(Cr,{class:"block h-16 w-auto fill-current text-gray-800"})]),_:1},8,["href"])]),l("div",Il,[v(Xs,{href:n.route("dashboard"),active:n.route().current("dashboard")},{default:x(()=>u[4]||(u[4]=[D(" Dashboard ",-1)])),_:1,__:[4]},8,["href","active"]),I(a)("view_emails")?(i(),A(Xs,{key:0,href:n.route("inbox"),active:n.route().current("inbox")},{default:x(()=>u[5]||(u[5]=[D(" Inbox ",-1)])),_:1,__:[5]},8,["href","active"])):k("",!0),I(o)?(i(),A(Sl,{key:1})):k("",!0)])]),l("div",Al,[v(ve,{type:"button",onClick:u[0]||(u[0]=c=>s("openCreateTaskModal")),class:"mr-4 px-4 py-2 text-sm"},{default:x(()=>u[6]||(u[6]=[D(" Add Task ",-1)])),_:1,__:[6]}),v(ve,{type:"button",onClick:u[1]||(u[1]=c=>s("openAddResource")),class:"mr-4 px-4 py-2 text-sm"},{default:x(()=>u[7]||(u[7]=[D(" Add Resource ",-1)])),_:1,__:[7]}),l("button",{onClick:u[2]||(u[2]=c=>s("openNotificationsSidebar")),class:"relative flex-shrink-0 text-gray-400 hover:text-gray-600 p-1 rounded-full transition-colors duration-200 mr-4","aria-label":"View all notifications"},[v(I(wl),{class:"h-6 w-6"}),e.unreadNotificationCount>0?(i(),m("span",El,P(e.unreadNotificationCount),1)):k("",!0)]),v(Cl)]),l("div",Rl,[l("button",{onClick:u[3]||(u[3]=c=>r.value=!r.value),class:"inline-flex items-center justify-center rounded-md p-2 text-gray-400 transition duration-150 ease-in-out hover:bg-gray-100 hover:text-gray-500 focus:bg-gray-100 focus:text-gray-500 focus:outline-none"},[(i(),m("svg",Ul,[l("path",{class:L({hidden:r.value,"inline-flex":!r.value}),"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},null,2),l("path",{class:L({hidden:!r.value,"inline-flex":r.value}),"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,2)]))])])])])]))}},le={__name:"ResponsiveNavLink",props:{href:{type:String,required:!0},active:{type:Boolean},method:{type:String,default:"get"},as:{type:String,default:"a"}},setup(e){const t=e,s=B(()=>t.active?"block w-full ps-3 pe-4 py-2 border-l-4 border-indigo-400 text-start text-base font-medium text-indigo-700 bg-indigo-50 focus:outline-none focus:text-indigo-800 focus:bg-indigo-100 focus:border-indigo-700 transition duration-150 ease-in-out":"block w-full ps-3 pe-4 py-2 border-l-4 border-transparent text-start text-base font-medium text-gray-600 hover:text-gray-800 hover:bg-gray-50 hover:border-gray-300 focus:outline-none focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300 transition duration-150 ease-in-out");return(r,a)=>(i(),A(I(je),ma({href:e.href,method:e.method,as:e.as},r.$attrs,{class:s.value}),{default:x(()=>[Ne(r.$slots,"default")]),_:3},16,["href","method","as","class"]))}},Wl={class:"space-y-1 pb-3 pt-2"},Vl={key:0,class:"mt-3 space-y-1"},Ll={class:"border-t border-gray-200 pb-1 pt-4"},Fl={class:"px-4"},Hl={class:"text-base font-medium text-gray-800"},Bl={class:"text-sm font-medium text-gray-500"},zl={class:"text-sm font-medium text-gray-500 capitalize"},Gl={class:"mt-3 space-y-1"},ql={__name:"MobileNavigation",props:{showingNavigationDropdown:{type:Boolean,required:!0},unreadNotificationCount:{type:Number,default:0}},emits:["openCreateTaskModal","openAddResource","openNotificationsSidebar","logoutSuccess","logoutError"],setup(e,{emit:t}){const s=t,r=B(()=>It().props.auth.user),{canDo:a}=Ms(),o=a("manage_projects"),n=a("compose_emails"),u=a("approve_emails"),c=a("create_users"),d=a("manage_roles"),p=a("manage_task_types"),g=a("create_clients"),C=()=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization,s("logoutSuccess")},U=O=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization,window.location.href="/login",s("logoutError",O)};return(O,w)=>{var M;return i(),m("div",{class:L([{block:e.showingNavigationDropdown,hidden:!e.showingNavigationDropdown},"sm:hidden"])},[l("div",Wl,[I(d)?(i(),m("div",Vl,[w[18]||(w[18]=l("div",{class:"px-4 font-medium text-base text-gray-800"},"Admin",-1)),v(le,{href:O.route("dashboard"),active:O.route().current("dashboard")},{default:x(()=>w[3]||(w[3]=[D(" Dashboard ",-1)])),_:1,__:[3]},8,["href","active"]),I(a)("view_emails")?(i(),A(le,{key:0,href:O.route("inbox"),active:O.route().current("inbox")},{default:x(()=>w[4]||(w[4]=[D(" Inbox ",-1)])),_:1,__:[4]},8,["href","active"])):k("",!0),I(g)?(i(),A(le,{key:1,href:O.route("clients.index"),active:O.route().current("clients.index")},{default:x(()=>w[5]||(w[5]=[D(" Clients ",-1)])),_:1,__:[5]},8,["href","active"])):k("",!0),I(o)?(i(),A(le,{key:2,href:O.route("projects.index"),active:O.route().current("projects.index")},{default:x(()=>w[6]||(w[6]=[D(" Projects ",-1)])),_:1,__:[6]},8,["href","active"])):k("",!0),I(c)?(i(),A(le,{key:3,href:O.route("users.index"),active:O.route().current("users.index")},{default:x(()=>w[7]||(w[7]=[D(" Users ",-1)])),_:1,__:[7]},8,["href","active"])):k("",!0),I(n)?(i(),A(le,{key:4,href:O.route("emails.compose"),active:O.route().current("emails.compose")},{default:x(()=>w[8]||(w[8]=[D(" Compose Email ",-1)])),_:1,__:[8]},8,["href","active"])):k("",!0),I(u)?(i(),A(le,{key:5,href:O.route("emails.pending"),active:O.route().current("emails.pending")},{default:x(()=>w[9]||(w[9]=[D(" Approve Emails ",-1)])),_:1,__:[9]},8,["href","active"])):k("",!0),I(n)?(i(),A(le,{key:6,href:O.route("emails.rejected"),active:O.route().current("emails.rejected")},{default:x(()=>w[10]||(w[10]=[D(" Rejected Emails ",-1)])),_:1,__:[10]},8,["href","active"])):k("",!0),I(c)?(i(),A(le,{key:7,href:O.route("availability.index"),active:O.route().current("availability.index")},{default:x(()=>w[11]||(w[11]=[D(" Weekly Availability ",-1)])),_:1,__:[11]},8,["href","active"])):k("",!0),I(a)("manage_roles")?(i(),A(le,{key:8,href:O.route("admin.roles.index"),active:O.route().current("admin.roles.index")},{default:x(()=>w[12]||(w[12]=[D(" Manage Roles ",-1)])),_:1,__:[12]},8,["href","active"])):k("",!0),I(a)("manage_permissions")?(i(),A(le,{key:9,href:O.route("admin.permissions.index"),active:O.route().current("admin.permissions.index")},{default:x(()=>w[13]||(w[13]=[D(" Manage Permissions ",-1)])),_:1,__:[13]},8,["href","active"])):k("",!0),I(a)("manage_bonus_configuration")?(i(),A(le,{key:10,href:O.route("bonus-configuration.index"),active:O.route().current("bonus-configuration.index")},{default:x(()=>w[14]||(w[14]=[D(" Bonus Configuration ",-1)])),_:1,__:[14]},8,["href","active"])):k("",!0),I(p)?(i(),A(le,{key:11,href:O.route("task-types.index"),active:O.route().current("task-types.index")},{default:x(()=>w[15]||(w[15]=[D(" Task Types ",-1)])),_:1,__:[15]},8,["href","active"])):k("",!0),I(a)("manage_email_templates")?(i(),A(le,{key:12,href:O.route("email-templates.index"),active:O.route().current("email-templates.index")},{default:x(()=>w[16]||(w[16]=[D(" Email Templates ",-1)])),_:1,__:[16]},8,["href","active"])):k("",!0),I(a)("manage_placeholder_definitions")?(i(),A(le,{key:13,href:O.route("placeholder-definitions.index"),active:O.route().current("placeholder-definitions.index")},{default:x(()=>w[17]||(w[17]=[D(" Placeholder Definitions ",-1)])),_:1,__:[17]},8,["href","active"])):k("",!0)])):k("",!0)]),l("div",Ll,[l("div",Fl,[l("div",Hl,P(r.value.name),1),l("div",Bl,P(r.value.email),1),l("div",zl,P((M=r.value.role_data)==null?void 0:M.name),1)]),l("div",Gl,[v(le,{as:"button",onClick:w[0]||(w[0]=y=>s("openCreateTaskModal"))},{default:x(()=>w[19]||(w[19]=[D(" Add Task ",-1)])),_:1,__:[19]}),v(le,{as:"button",onClick:w[1]||(w[1]=y=>s("openAddResource"))},{default:x(()=>w[20]||(w[20]=[D(" Add Resource ",-1)])),_:1,__:[20]}),v(le,{as:"button",onClick:w[2]||(w[2]=y=>s("openNotificationsSidebar"))},{default:x(()=>[D(" Notifications ("+P(e.unreadNotificationCount)+") ",1)]),_:1}),v(le,{href:O.route("profile.edit")},{default:x(()=>w[21]||(w[21]=[D(" Profile ",-1)])),_:1,__:[21]},8,["href"]),v(le,{href:O.route("logout"),method:"post",as:"button",onSuccess:C,onError:U},{default:x(()=>w[22]||(w[22]=[D(" Log Out ",-1)])),_:1,__:[22]},8,["href"])])])],2)}}};//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var ya;function T(){return ya.apply(null,arguments)}function Zl(e){ya=e}function Me(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function rt(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function z(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Cs(e){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(e).length===0;var t;for(t in e)if(z(e,t))return!1;return!0}function ge(e){return e===void 0}function Be(e){return typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]"}function At(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function ka(e,t){var s=[],r,a=e.length;for(r=0;r<a;++r)s.push(t(e[r],r));return s}function Je(e,t){for(var s in t)z(t,s)&&(e[s]=t[s]);return z(t,"toString")&&(e.toString=t.toString),z(t,"valueOf")&&(e.valueOf=t.valueOf),e}function Ie(e,t,s,r){return La(e,t,s,r,!0).utc()}function Jl(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function j(e){return e._pf==null&&(e._pf=Jl()),e._pf}var ys;Array.prototype.some?ys=Array.prototype.some:ys=function(e){var t=Object(this),s=t.length>>>0,r;for(r=0;r<s;r++)if(r in t&&e.call(this,t[r],r,t))return!0;return!1};function $s(e){var t=null,s=!1,r=e._d&&!isNaN(e._d.getTime());if(r&&(t=j(e),s=ys.call(t.parsedDateParts,function(a){return a!=null}),r=t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&s),e._strict&&(r=r&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(e))e._isValid=r;else return r;return e._isValid}function es(e){var t=Ie(NaN);return e!=null?Je(j(t),e):j(t).userInvalidated=!0,t}var sa=T.momentProperties=[],ms=!1;function Ys(e,t){var s,r,a,o=sa.length;if(ge(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),ge(t._i)||(e._i=t._i),ge(t._f)||(e._f=t._f),ge(t._l)||(e._l=t._l),ge(t._strict)||(e._strict=t._strict),ge(t._tzm)||(e._tzm=t._tzm),ge(t._isUTC)||(e._isUTC=t._isUTC),ge(t._offset)||(e._offset=t._offset),ge(t._pf)||(e._pf=j(t)),ge(t._locale)||(e._locale=t._locale),o>0)for(s=0;s<o;s++)r=sa[s],a=t[r],ge(a)||(e[r]=a);return e}function Et(e){Ys(this,e),this._d=new Date(e._d!=null?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),ms===!1&&(ms=!0,T.updateOffset(this),ms=!1)}function De(e){return e instanceof Et||e!=null&&e._isAMomentObject!=null}function _a(e){T.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+e)}function be(e,t){var s=!0;return Je(function(){if(T.deprecationHandler!=null&&T.deprecationHandler(null,e),s){var r=[],a,o,n,u=arguments.length;for(o=0;o<u;o++){if(a="",typeof arguments[o]=="object"){a+=`
[`+o+"] ";for(n in arguments[0])z(arguments[0],n)&&(a+=n+": "+arguments[0][n]+", ");a=a.slice(0,-2)}else a=arguments[o];r.push(a)}_a(e+`
Arguments: `+Array.prototype.slice.call(r).join("")+`
`+new Error().stack),s=!1}return t.apply(this,arguments)},t)}var aa={};function wa(e,t){T.deprecationHandler!=null&&T.deprecationHandler(e,t),aa[e]||(_a(t),aa[e]=!0)}T.suppressDeprecationWarnings=!1;T.deprecationHandler=null;function Ae(e){return typeof Function<"u"&&e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function Ql(e){var t,s;for(s in e)z(e,s)&&(t=e[s],Ae(t)?this[s]=t:this["_"+s]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function ks(e,t){var s=Je({},e),r;for(r in t)z(t,r)&&(rt(e[r])&&rt(t[r])?(s[r]={},Je(s[r],e[r]),Je(s[r],t[r])):t[r]!=null?s[r]=t[r]:delete s[r]);for(r in e)z(e,r)&&!z(t,r)&&rt(e[r])&&(s[r]=Je({},s[r]));return s}function Os(e){e!=null&&this.set(e)}var _s;Object.keys?_s=Object.keys:_s=function(e){var t,s=[];for(t in e)z(e,t)&&s.push(t);return s};var Kl={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function Xl(e,t,s){var r=this._calendar[e]||this._calendar.sameElse;return Ae(r)?r.call(t,s):r}function Pe(e,t,s){var r=""+Math.abs(e),a=t-r.length,o=e>=0;return(o?s?"+":"":"-")+Math.pow(10,Math.max(0,a)).toString().substr(1)+r}var Ns=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,jt=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,hs={},ct={};function E(e,t,s,r){var a=r;typeof r=="string"&&(a=function(){return this[r]()}),e&&(ct[e]=a),t&&(ct[t[0]]=function(){return Pe(a.apply(this,arguments),t[1],t[2])}),s&&(ct[s]=function(){return this.localeData().ordinal(a.apply(this,arguments),e)})}function ei(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function ti(e){var t=e.match(Ns),s,r;for(s=0,r=t.length;s<r;s++)ct[t[s]]?t[s]=ct[t[s]]:t[s]=ei(t[s]);return function(a){var o="",n;for(n=0;n<r;n++)o+=Ae(t[n])?t[n].call(a,e):t[n];return o}}function Lt(e,t){return e.isValid()?(t=ba(t,e.localeData()),hs[t]=hs[t]||ti(t),hs[t](e)):e.localeData().invalidDate()}function ba(e,t){var s=5;function r(a){return t.longDateFormat(a)||a}for(jt.lastIndex=0;s>=0&&jt.test(e);)e=e.replace(jt,r),jt.lastIndex=0,s-=1;return e}var si={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function ai(e){var t=this._longDateFormat[e],s=this._longDateFormat[e.toUpperCase()];return t||!s?t:(this._longDateFormat[e]=s.match(Ns).map(function(r){return r==="MMMM"||r==="MM"||r==="DD"||r==="dddd"?r.slice(1):r}).join(""),this._longDateFormat[e])}var ri="Invalid date";function oi(){return this._invalidDate}var ni="%d",li=/\d{1,2}/;function ii(e){return this._ordinal.replace("%d",e)}var ui={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function di(e,t,s,r){var a=this._relativeTime[s];return Ae(a)?a(e,t,s,r):a.replace(/%d/i,e)}function ci(e,t){var s=this._relativeTime[e>0?"future":"past"];return Ae(s)?s(t):s.replace(/%s/i,t)}var ra={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function xe(e){return typeof e=="string"?ra[e]||ra[e.toLowerCase()]:void 0}function Ps(e){var t={},s,r;for(r in e)z(e,r)&&(s=xe(r),s&&(t[s]=e[r]));return t}var fi={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function mi(e){var t=[],s;for(s in e)z(e,s)&&t.push({unit:s,priority:fi[s]});return t.sort(function(r,a){return r.priority-a.priority}),t}var xa=/\d/,ke=/\d\d/,Sa=/\d{3}/,Is=/\d{4}/,ts=/[+-]?\d{6}/,te=/\d\d?/,Ma=/\d\d\d\d?/,Da=/\d\d\d\d\d\d?/,ss=/\d{1,3}/,As=/\d{1,4}/,as=/[+-]?\d{1,6}/,vt=/\d+/,rs=/[+-]?\d+/,hi=/Z|[+-]\d\d:?\d\d/gi,os=/Z|[+-]\d\d(?::?\d\d)?/gi,vi=/[+-]?\d+(\.\d{1,3})?/,Rt=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,pt=/^[1-9]\d?/,Es=/^([1-9]\d|\d)/,Bt;Bt={};function Y(e,t,s){Bt[e]=Ae(t)?t:function(r,a){return r&&s?s:t}}function pi(e,t){return z(Bt,e)?Bt[e](t._strict,t._locale):new RegExp(gi(e))}function gi(e){return Fe(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,s,r,a,o){return s||r||a||o}))}function Fe(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function _e(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function F(e){var t=+e,s=0;return t!==0&&isFinite(t)&&(s=_e(t)),s}var ws={};function J(e,t){var s,r=t,a;for(typeof e=="string"&&(e=[e]),Be(t)&&(r=function(o,n){n[t]=F(o)}),a=e.length,s=0;s<a;s++)ws[e[s]]=r}function Ut(e,t){J(e,function(s,r,a,o){a._w=a._w||{},t(s,a._w,a,o)})}function yi(e,t,s){t!=null&&z(ws,e)&&ws[e](t,s._a,s,e)}function ns(e){return e%4===0&&e%100!==0||e%400===0}var he=0,We=1,Ye=2,de=3,Se=4,Ve=5,at=6,ki=7,_i=8;E("Y",0,0,function(){var e=this.year();return e<=9999?Pe(e,4):"+"+e});E(0,["YY",2],0,function(){return this.year()%100});E(0,["YYYY",4],0,"year");E(0,["YYYYY",5],0,"year");E(0,["YYYYYY",6,!0],0,"year");Y("Y",rs);Y("YY",te,ke);Y("YYYY",As,Is);Y("YYYYY",as,ts);Y("YYYYYY",as,ts);J(["YYYYY","YYYYYY"],he);J("YYYY",function(e,t){t[he]=e.length===2?T.parseTwoDigitYear(e):F(e)});J("YY",function(e,t){t[he]=T.parseTwoDigitYear(e)});J("Y",function(e,t){t[he]=parseInt(e,10)});function Dt(e){return ns(e)?366:365}T.parseTwoDigitYear=function(e){return F(e)+(F(e)>68?1900:2e3)};var Ta=gt("FullYear",!0);function wi(){return ns(this.year())}function gt(e,t){return function(s){return s!=null?(Ca(this,e,s),T.updateOffset(this,t),this):$t(this,e)}}function $t(e,t){if(!e.isValid())return NaN;var s=e._d,r=e._isUTC;switch(t){case"Milliseconds":return r?s.getUTCMilliseconds():s.getMilliseconds();case"Seconds":return r?s.getUTCSeconds():s.getSeconds();case"Minutes":return r?s.getUTCMinutes():s.getMinutes();case"Hours":return r?s.getUTCHours():s.getHours();case"Date":return r?s.getUTCDate():s.getDate();case"Day":return r?s.getUTCDay():s.getDay();case"Month":return r?s.getUTCMonth():s.getMonth();case"FullYear":return r?s.getUTCFullYear():s.getFullYear();default:return NaN}}function Ca(e,t,s){var r,a,o,n,u;if(!(!e.isValid()||isNaN(s))){switch(r=e._d,a=e._isUTC,t){case"Milliseconds":return void(a?r.setUTCMilliseconds(s):r.setMilliseconds(s));case"Seconds":return void(a?r.setUTCSeconds(s):r.setSeconds(s));case"Minutes":return void(a?r.setUTCMinutes(s):r.setMinutes(s));case"Hours":return void(a?r.setUTCHours(s):r.setHours(s));case"Date":return void(a?r.setUTCDate(s):r.setDate(s));case"FullYear":break;default:return}o=s,n=e.month(),u=e.date(),u=u===29&&n===1&&!ns(o)?28:u,a?r.setUTCFullYear(o,n,u):r.setFullYear(o,n,u)}}function bi(e){return e=xe(e),Ae(this[e])?this[e]():this}function xi(e,t){if(typeof e=="object"){e=Ps(e);var s=mi(e),r,a=s.length;for(r=0;r<a;r++)this[s[r].unit](e[s[r].unit])}else if(e=xe(e),Ae(this[e]))return this[e](t);return this}function Si(e,t){return(e%t+t)%t}var ne;Array.prototype.indexOf?ne=Array.prototype.indexOf:ne=function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1};function Rs(e,t){if(isNaN(e)||isNaN(t))return NaN;var s=Si(t,12);return e+=(t-s)/12,s===1?ns(e)?29:28:31-s%7%2}E("M",["MM",2],"Mo",function(){return this.month()+1});E("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)});E("MMMM",0,0,function(e){return this.localeData().months(this,e)});Y("M",te,pt);Y("MM",te,ke);Y("MMM",function(e,t){return t.monthsShortRegex(e)});Y("MMMM",function(e,t){return t.monthsRegex(e)});J(["M","MM"],function(e,t){t[We]=F(e)-1});J(["MMM","MMMM"],function(e,t,s,r){var a=s._locale.monthsParse(e,r,s._strict);a!=null?t[We]=a:j(s).invalidMonth=e});var Mi="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),$a="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Ya=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Di=Rt,Ti=Rt;function Ci(e,t){return e?Me(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||Ya).test(t)?"format":"standalone"][e.month()]:Me(this._months)?this._months:this._months.standalone}function $i(e,t){return e?Me(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Ya.test(t)?"format":"standalone"][e.month()]:Me(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function Yi(e,t,s){var r,a,o,n=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)o=Ie([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(o,"").toLocaleLowerCase();return s?t==="MMM"?(a=ne.call(this._shortMonthsParse,n),a!==-1?a:null):(a=ne.call(this._longMonthsParse,n),a!==-1?a:null):t==="MMM"?(a=ne.call(this._shortMonthsParse,n),a!==-1?a:(a=ne.call(this._longMonthsParse,n),a!==-1?a:null)):(a=ne.call(this._longMonthsParse,n),a!==-1?a:(a=ne.call(this._shortMonthsParse,n),a!==-1?a:null))}function Oi(e,t,s){var r,a,o;if(this._monthsParseExact)return Yi.call(this,e,t,s);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(a=Ie([2e3,r]),s&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(a,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(a,"").replace(".","")+"$","i")),!s&&!this._monthsParse[r]&&(o="^"+this.months(a,"")+"|^"+this.monthsShort(a,""),this._monthsParse[r]=new RegExp(o.replace(".",""),"i")),s&&t==="MMMM"&&this._longMonthsParse[r].test(e))return r;if(s&&t==="MMM"&&this._shortMonthsParse[r].test(e))return r;if(!s&&this._monthsParse[r].test(e))return r}}function Oa(e,t){if(!e.isValid())return e;if(typeof t=="string"){if(/^\d+$/.test(t))t=F(t);else if(t=e.localeData().monthsParse(t),!Be(t))return e}var s=t,r=e.date();return r=r<29?r:Math.min(r,Rs(e.year(),s)),e._isUTC?e._d.setUTCMonth(s,r):e._d.setMonth(s,r),e}function Na(e){return e!=null?(Oa(this,e),T.updateOffset(this,!0),this):$t(this,"Month")}function Ni(){return Rs(this.year(),this.month())}function Pi(e){return this._monthsParseExact?(z(this,"_monthsRegex")||Pa.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(z(this,"_monthsShortRegex")||(this._monthsShortRegex=Di),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function Ii(e){return this._monthsParseExact?(z(this,"_monthsRegex")||Pa.call(this),e?this._monthsStrictRegex:this._monthsRegex):(z(this,"_monthsRegex")||(this._monthsRegex=Ti),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function Pa(){function e(c,d){return d.length-c.length}var t=[],s=[],r=[],a,o,n,u;for(a=0;a<12;a++)o=Ie([2e3,a]),n=Fe(this.monthsShort(o,"")),u=Fe(this.months(o,"")),t.push(n),s.push(u),r.push(u),r.push(n);t.sort(e),s.sort(e),r.sort(e),this._monthsRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+t.join("|")+")","i")}function Ai(e,t,s,r,a,o,n){var u;return e<100&&e>=0?(u=new Date(e+400,t,s,r,a,o,n),isFinite(u.getFullYear())&&u.setFullYear(e)):u=new Date(e,t,s,r,a,o,n),u}function Yt(e){var t,s;return e<100&&e>=0?(s=Array.prototype.slice.call(arguments),s[0]=e+400,t=new Date(Date.UTC.apply(null,s)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function zt(e,t,s){var r=7+t-s,a=(7+Yt(e,0,r).getUTCDay()-t)%7;return-a+r-1}function Ia(e,t,s,r,a){var o=(7+s-r)%7,n=zt(e,r,a),u=1+7*(t-1)+o+n,c,d;return u<=0?(c=e-1,d=Dt(c)+u):u>Dt(e)?(c=e+1,d=u-Dt(e)):(c=e,d=u),{year:c,dayOfYear:d}}function Ot(e,t,s){var r=zt(e.year(),t,s),a=Math.floor((e.dayOfYear()-r-1)/7)+1,o,n;return a<1?(n=e.year()-1,o=a+He(n,t,s)):a>He(e.year(),t,s)?(o=a-He(e.year(),t,s),n=e.year()+1):(n=e.year(),o=a),{week:o,year:n}}function He(e,t,s){var r=zt(e,t,s),a=zt(e+1,t,s);return(Dt(e)-r+a)/7}E("w",["ww",2],"wo","week");E("W",["WW",2],"Wo","isoWeek");Y("w",te,pt);Y("ww",te,ke);Y("W",te,pt);Y("WW",te,ke);Ut(["w","ww","W","WW"],function(e,t,s,r){t[r.substr(0,1)]=F(e)});function Ei(e){return Ot(e,this._week.dow,this._week.doy).week}var Ri={dow:0,doy:6};function Ui(){return this._week.dow}function ji(){return this._week.doy}function Wi(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function Vi(e){var t=Ot(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}E("d",0,"do","day");E("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)});E("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)});E("dddd",0,0,function(e){return this.localeData().weekdays(this,e)});E("e",0,0,"weekday");E("E",0,0,"isoWeekday");Y("d",te);Y("e",te);Y("E",te);Y("dd",function(e,t){return t.weekdaysMinRegex(e)});Y("ddd",function(e,t){return t.weekdaysShortRegex(e)});Y("dddd",function(e,t){return t.weekdaysRegex(e)});Ut(["dd","ddd","dddd"],function(e,t,s,r){var a=s._locale.weekdaysParse(e,r,s._strict);a!=null?t.d=a:j(s).invalidWeekday=e});Ut(["d","e","E"],function(e,t,s,r){t[r]=F(e)});function Li(e,t){return typeof e!="string"?e:isNaN(e)?(e=t.weekdaysParse(e),typeof e=="number"?e:null):parseInt(e,10)}function Fi(e,t){return typeof e=="string"?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function Us(e,t){return e.slice(t,7).concat(e.slice(0,t))}var Hi="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Aa="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Bi="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),zi=Rt,Gi=Rt,qi=Rt;function Zi(e,t){var s=Me(this._weekdays)?this._weekdays:this._weekdays[e&&e!==!0&&this._weekdays.isFormat.test(t)?"format":"standalone"];return e===!0?Us(s,this._week.dow):e?s[e.day()]:s}function Ji(e){return e===!0?Us(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function Qi(e){return e===!0?Us(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function Ki(e,t,s){var r,a,o,n=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)o=Ie([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(o,"").toLocaleLowerCase();return s?t==="dddd"?(a=ne.call(this._weekdaysParse,n),a!==-1?a:null):t==="ddd"?(a=ne.call(this._shortWeekdaysParse,n),a!==-1?a:null):(a=ne.call(this._minWeekdaysParse,n),a!==-1?a:null):t==="dddd"?(a=ne.call(this._weekdaysParse,n),a!==-1||(a=ne.call(this._shortWeekdaysParse,n),a!==-1)?a:(a=ne.call(this._minWeekdaysParse,n),a!==-1?a:null)):t==="ddd"?(a=ne.call(this._shortWeekdaysParse,n),a!==-1||(a=ne.call(this._weekdaysParse,n),a!==-1)?a:(a=ne.call(this._minWeekdaysParse,n),a!==-1?a:null)):(a=ne.call(this._minWeekdaysParse,n),a!==-1||(a=ne.call(this._weekdaysParse,n),a!==-1)?a:(a=ne.call(this._shortWeekdaysParse,n),a!==-1?a:null))}function Xi(e,t,s){var r,a,o;if(this._weekdaysParseExact)return Ki.call(this,e,t,s);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(a=Ie([2e3,1]).day(r),s&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(a,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(a,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(a,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(o="^"+this.weekdays(a,"")+"|^"+this.weekdaysShort(a,"")+"|^"+this.weekdaysMin(a,""),this._weekdaysParse[r]=new RegExp(o.replace(".",""),"i")),s&&t==="dddd"&&this._fullWeekdaysParse[r].test(e))return r;if(s&&t==="ddd"&&this._shortWeekdaysParse[r].test(e))return r;if(s&&t==="dd"&&this._minWeekdaysParse[r].test(e))return r;if(!s&&this._weekdaysParse[r].test(e))return r}}function eu(e){if(!this.isValid())return e!=null?this:NaN;var t=$t(this,"Day");return e!=null?(e=Li(e,this.localeData()),this.add(e-t,"d")):t}function tu(e){if(!this.isValid())return e!=null?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function su(e){if(!this.isValid())return e!=null?this:NaN;if(e!=null){var t=Fi(e,this.localeData());return this.day(this.day()%7?t:t-7)}else return this.day()||7}function au(e){return this._weekdaysParseExact?(z(this,"_weekdaysRegex")||js.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(z(this,"_weekdaysRegex")||(this._weekdaysRegex=zi),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function ru(e){return this._weekdaysParseExact?(z(this,"_weekdaysRegex")||js.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(z(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Gi),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function ou(e){return this._weekdaysParseExact?(z(this,"_weekdaysRegex")||js.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(z(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=qi),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function js(){function e(p,g){return g.length-p.length}var t=[],s=[],r=[],a=[],o,n,u,c,d;for(o=0;o<7;o++)n=Ie([2e3,1]).day(o),u=Fe(this.weekdaysMin(n,"")),c=Fe(this.weekdaysShort(n,"")),d=Fe(this.weekdays(n,"")),t.push(u),s.push(c),r.push(d),a.push(u),a.push(c),a.push(d);t.sort(e),s.sort(e),r.sort(e),a.sort(e),this._weekdaysRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+t.join("|")+")","i")}function Ws(){return this.hours()%12||12}function nu(){return this.hours()||24}E("H",["HH",2],0,"hour");E("h",["hh",2],0,Ws);E("k",["kk",2],0,nu);E("hmm",0,0,function(){return""+Ws.apply(this)+Pe(this.minutes(),2)});E("hmmss",0,0,function(){return""+Ws.apply(this)+Pe(this.minutes(),2)+Pe(this.seconds(),2)});E("Hmm",0,0,function(){return""+this.hours()+Pe(this.minutes(),2)});E("Hmmss",0,0,function(){return""+this.hours()+Pe(this.minutes(),2)+Pe(this.seconds(),2)});function Ea(e,t){E(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}Ea("a",!0);Ea("A",!1);function Ra(e,t){return t._meridiemParse}Y("a",Ra);Y("A",Ra);Y("H",te,Es);Y("h",te,pt);Y("k",te,pt);Y("HH",te,ke);Y("hh",te,ke);Y("kk",te,ke);Y("hmm",Ma);Y("hmmss",Da);Y("Hmm",Ma);Y("Hmmss",Da);J(["H","HH"],de);J(["k","kk"],function(e,t,s){var r=F(e);t[de]=r===24?0:r});J(["a","A"],function(e,t,s){s._isPm=s._locale.isPM(e),s._meridiem=e});J(["h","hh"],function(e,t,s){t[de]=F(e),j(s).bigHour=!0});J("hmm",function(e,t,s){var r=e.length-2;t[de]=F(e.substr(0,r)),t[Se]=F(e.substr(r)),j(s).bigHour=!0});J("hmmss",function(e,t,s){var r=e.length-4,a=e.length-2;t[de]=F(e.substr(0,r)),t[Se]=F(e.substr(r,2)),t[Ve]=F(e.substr(a)),j(s).bigHour=!0});J("Hmm",function(e,t,s){var r=e.length-2;t[de]=F(e.substr(0,r)),t[Se]=F(e.substr(r))});J("Hmmss",function(e,t,s){var r=e.length-4,a=e.length-2;t[de]=F(e.substr(0,r)),t[Se]=F(e.substr(r,2)),t[Ve]=F(e.substr(a))});function lu(e){return(e+"").toLowerCase().charAt(0)==="p"}var iu=/[ap]\.?m?\.?/i,uu=gt("Hours",!0);function du(e,t,s){return e>11?s?"pm":"PM":s?"am":"AM"}var Ua={calendar:Kl,longDateFormat:si,invalidDate:ri,ordinal:ni,dayOfMonthOrdinalParse:li,relativeTime:ui,months:Mi,monthsShort:$a,week:Ri,weekdays:Hi,weekdaysMin:Bi,weekdaysShort:Aa,meridiemParse:iu},se={},St={},Nt;function cu(e,t){var s,r=Math.min(e.length,t.length);for(s=0;s<r;s+=1)if(e[s]!==t[s])return s;return r}function oa(e){return e&&e.toLowerCase().replace("_","-")}function fu(e){for(var t=0,s,r,a,o;t<e.length;){for(o=oa(e[t]).split("-"),s=o.length,r=oa(e[t+1]),r=r?r.split("-"):null;s>0;){if(a=ls(o.slice(0,s).join("-")),a)return a;if(r&&r.length>=s&&cu(o,r)>=s-1)break;s--}t++}return Nt}function mu(e){return!!(e&&e.match("^[^/\\\\]*$"))}function ls(e){var t=null,s;if(se[e]===void 0&&typeof module<"u"&&module&&module.exports&&mu(e))try{t=Nt._abbr,s=require,s("./locale/"+e),Ke(t)}catch{se[e]=null}return se[e]}function Ke(e,t){var s;return e&&(ge(t)?s=ze(e):s=Vs(e,t),s?Nt=s:typeof console<"u"&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),Nt._abbr}function Vs(e,t){if(t!==null){var s,r=Ua;if(t.abbr=e,se[e]!=null)wa("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=se[e]._config;else if(t.parentLocale!=null)if(se[t.parentLocale]!=null)r=se[t.parentLocale]._config;else if(s=ls(t.parentLocale),s!=null)r=s._config;else return St[t.parentLocale]||(St[t.parentLocale]=[]),St[t.parentLocale].push({name:e,config:t}),null;return se[e]=new Os(ks(r,t)),St[e]&&St[e].forEach(function(a){Vs(a.name,a.config)}),Ke(e),se[e]}else return delete se[e],null}function hu(e,t){if(t!=null){var s,r,a=Ua;se[e]!=null&&se[e].parentLocale!=null?se[e].set(ks(se[e]._config,t)):(r=ls(e),r!=null&&(a=r._config),t=ks(a,t),r==null&&(t.abbr=e),s=new Os(t),s.parentLocale=se[e],se[e]=s),Ke(e)}else se[e]!=null&&(se[e].parentLocale!=null?(se[e]=se[e].parentLocale,e===Ke()&&Ke(e)):se[e]!=null&&delete se[e]);return se[e]}function ze(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Nt;if(!Me(e)){if(t=ls(e),t)return t;e=[e]}return fu(e)}function vu(){return _s(se)}function Ls(e){var t,s=e._a;return s&&j(e).overflow===-2&&(t=s[We]<0||s[We]>11?We:s[Ye]<1||s[Ye]>Rs(s[he],s[We])?Ye:s[de]<0||s[de]>24||s[de]===24&&(s[Se]!==0||s[Ve]!==0||s[at]!==0)?de:s[Se]<0||s[Se]>59?Se:s[Ve]<0||s[Ve]>59?Ve:s[at]<0||s[at]>999?at:-1,j(e)._overflowDayOfYear&&(t<he||t>Ye)&&(t=Ye),j(e)._overflowWeeks&&t===-1&&(t=ki),j(e)._overflowWeekday&&t===-1&&(t=_i),j(e).overflow=t),e}var pu=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,gu=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,yu=/Z|[+-]\d\d(?::?\d\d)?/,Wt=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],vs=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],ku=/^\/?Date\((-?\d+)/i,_u=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,wu={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function ja(e){var t,s,r=e._i,a=pu.exec(r)||gu.exec(r),o,n,u,c,d=Wt.length,p=vs.length;if(a){for(j(e).iso=!0,t=0,s=d;t<s;t++)if(Wt[t][1].exec(a[1])){n=Wt[t][0],o=Wt[t][2]!==!1;break}if(n==null){e._isValid=!1;return}if(a[3]){for(t=0,s=p;t<s;t++)if(vs[t][1].exec(a[3])){u=(a[2]||" ")+vs[t][0];break}if(u==null){e._isValid=!1;return}}if(!o&&u!=null){e._isValid=!1;return}if(a[4])if(yu.exec(a[4]))c="Z";else{e._isValid=!1;return}e._f=n+(u||"")+(c||""),Hs(e)}else e._isValid=!1}function bu(e,t,s,r,a,o){var n=[xu(e),$a.indexOf(t),parseInt(s,10),parseInt(r,10),parseInt(a,10)];return o&&n.push(parseInt(o,10)),n}function xu(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function Su(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Mu(e,t,s){if(e){var r=Aa.indexOf(e),a=new Date(t[0],t[1],t[2]).getDay();if(r!==a)return j(s).weekdayMismatch=!0,s._isValid=!1,!1}return!0}function Du(e,t,s){if(e)return wu[e];if(t)return 0;var r=parseInt(s,10),a=r%100,o=(r-a)/100;return o*60+a}function Wa(e){var t=_u.exec(Su(e._i)),s;if(t){if(s=bu(t[4],t[3],t[2],t[5],t[6],t[7]),!Mu(t[1],s,e))return;e._a=s,e._tzm=Du(t[8],t[9],t[10]),e._d=Yt.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),j(e).rfc2822=!0}else e._isValid=!1}function Tu(e){var t=ku.exec(e._i);if(t!==null){e._d=new Date(+t[1]);return}if(ja(e),e._isValid===!1)delete e._isValid;else return;if(Wa(e),e._isValid===!1)delete e._isValid;else return;e._strict?e._isValid=!1:T.createFromInputFallback(e)}T.createFromInputFallback=be("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});function it(e,t,s){return e??t??s}function Cu(e){var t=new Date(T.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function Fs(e){var t,s,r=[],a,o,n;if(!e._d){for(a=Cu(e),e._w&&e._a[Ye]==null&&e._a[We]==null&&$u(e),e._dayOfYear!=null&&(n=it(e._a[he],a[he]),(e._dayOfYear>Dt(n)||e._dayOfYear===0)&&(j(e)._overflowDayOfYear=!0),s=Yt(n,0,e._dayOfYear),e._a[We]=s.getUTCMonth(),e._a[Ye]=s.getUTCDate()),t=0;t<3&&e._a[t]==null;++t)e._a[t]=r[t]=a[t];for(;t<7;t++)e._a[t]=r[t]=e._a[t]==null?t===2?1:0:e._a[t];e._a[de]===24&&e._a[Se]===0&&e._a[Ve]===0&&e._a[at]===0&&(e._nextDay=!0,e._a[de]=0),e._d=(e._useUTC?Yt:Ai).apply(null,r),o=e._useUTC?e._d.getUTCDay():e._d.getDay(),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[de]=24),e._w&&typeof e._w.d<"u"&&e._w.d!==o&&(j(e).weekdayMismatch=!0)}}function $u(e){var t,s,r,a,o,n,u,c,d;t=e._w,t.GG!=null||t.W!=null||t.E!=null?(o=1,n=4,s=it(t.GG,e._a[he],Ot(ee(),1,4).year),r=it(t.W,1),a=it(t.E,1),(a<1||a>7)&&(c=!0)):(o=e._locale._week.dow,n=e._locale._week.doy,d=Ot(ee(),o,n),s=it(t.gg,e._a[he],d.year),r=it(t.w,d.week),t.d!=null?(a=t.d,(a<0||a>6)&&(c=!0)):t.e!=null?(a=t.e+o,(t.e<0||t.e>6)&&(c=!0)):a=o),r<1||r>He(s,o,n)?j(e)._overflowWeeks=!0:c!=null?j(e)._overflowWeekday=!0:(u=Ia(s,r,a,o,n),e._a[he]=u.year,e._dayOfYear=u.dayOfYear)}T.ISO_8601=function(){};T.RFC_2822=function(){};function Hs(e){if(e._f===T.ISO_8601){ja(e);return}if(e._f===T.RFC_2822){Wa(e);return}e._a=[],j(e).empty=!0;var t=""+e._i,s,r,a,o,n,u=t.length,c=0,d,p;for(a=ba(e._f,e._locale).match(Ns)||[],p=a.length,s=0;s<p;s++)o=a[s],r=(t.match(pi(o,e))||[])[0],r&&(n=t.substr(0,t.indexOf(r)),n.length>0&&j(e).unusedInput.push(n),t=t.slice(t.indexOf(r)+r.length),c+=r.length),ct[o]?(r?j(e).empty=!1:j(e).unusedTokens.push(o),yi(o,r,e)):e._strict&&!r&&j(e).unusedTokens.push(o);j(e).charsLeftOver=u-c,t.length>0&&j(e).unusedInput.push(t),e._a[de]<=12&&j(e).bigHour===!0&&e._a[de]>0&&(j(e).bigHour=void 0),j(e).parsedDateParts=e._a.slice(0),j(e).meridiem=e._meridiem,e._a[de]=Yu(e._locale,e._a[de],e._meridiem),d=j(e).era,d!==null&&(e._a[he]=e._locale.erasConvertYear(d,e._a[he])),Fs(e),Ls(e)}function Yu(e,t,s){var r;return s==null?t:e.meridiemHour!=null?e.meridiemHour(t,s):(e.isPM!=null&&(r=e.isPM(s),r&&t<12&&(t+=12),!r&&t===12&&(t=0)),t)}function Ou(e){var t,s,r,a,o,n,u=!1,c=e._f.length;if(c===0){j(e).invalidFormat=!0,e._d=new Date(NaN);return}for(a=0;a<c;a++)o=0,n=!1,t=Ys({},e),e._useUTC!=null&&(t._useUTC=e._useUTC),t._f=e._f[a],Hs(t),$s(t)&&(n=!0),o+=j(t).charsLeftOver,o+=j(t).unusedTokens.length*10,j(t).score=o,u?o<r&&(r=o,s=t):(r==null||o<r||n)&&(r=o,s=t,n&&(u=!0));Je(e,s||t)}function Nu(e){if(!e._d){var t=Ps(e._i),s=t.day===void 0?t.date:t.day;e._a=ka([t.year,t.month,s,t.hour,t.minute,t.second,t.millisecond],function(r){return r&&parseInt(r,10)}),Fs(e)}}function Pu(e){var t=new Et(Ls(Va(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function Va(e){var t=e._i,s=e._f;return e._locale=e._locale||ze(e._l),t===null||s===void 0&&t===""?es({nullInput:!0}):(typeof t=="string"&&(e._i=t=e._locale.preparse(t)),De(t)?new Et(Ls(t)):(At(t)?e._d=t:Me(s)?Ou(e):s?Hs(e):Iu(e),$s(e)||(e._d=null),e))}function Iu(e){var t=e._i;ge(t)?e._d=new Date(T.now()):At(t)?e._d=new Date(t.valueOf()):typeof t=="string"?Tu(e):Me(t)?(e._a=ka(t.slice(0),function(s){return parseInt(s,10)}),Fs(e)):rt(t)?Nu(e):Be(t)?e._d=new Date(t):T.createFromInputFallback(e)}function La(e,t,s,r,a){var o={};return(t===!0||t===!1)&&(r=t,t=void 0),(s===!0||s===!1)&&(r=s,s=void 0),(rt(e)&&Cs(e)||Me(e)&&e.length===0)&&(e=void 0),o._isAMomentObject=!0,o._useUTC=o._isUTC=a,o._l=s,o._i=e,o._f=t,o._strict=r,Pu(o)}function ee(e,t,s,r){return La(e,t,s,r,!1)}var Au=be("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=ee.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:es()}),Eu=be("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=ee.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:es()});function Fa(e,t){var s,r;if(t.length===1&&Me(t[0])&&(t=t[0]),!t.length)return ee();for(s=t[0],r=1;r<t.length;++r)(!t[r].isValid()||t[r][e](s))&&(s=t[r]);return s}function Ru(){var e=[].slice.call(arguments,0);return Fa("isBefore",e)}function Uu(){var e=[].slice.call(arguments,0);return Fa("isAfter",e)}var ju=function(){return Date.now?Date.now():+new Date},Mt=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Wu(e){var t,s=!1,r,a=Mt.length;for(t in e)if(z(e,t)&&!(ne.call(Mt,t)!==-1&&(e[t]==null||!isNaN(e[t]))))return!1;for(r=0;r<a;++r)if(e[Mt[r]]){if(s)return!1;parseFloat(e[Mt[r]])!==F(e[Mt[r]])&&(s=!0)}return!0}function Vu(){return this._isValid}function Lu(){return Te(NaN)}function is(e){var t=Ps(e),s=t.year||0,r=t.quarter||0,a=t.month||0,o=t.week||t.isoWeek||0,n=t.day||0,u=t.hour||0,c=t.minute||0,d=t.second||0,p=t.millisecond||0;this._isValid=Wu(t),this._milliseconds=+p+d*1e3+c*6e4+u*1e3*60*60,this._days=+n+o*7,this._months=+a+r*3+s*12,this._data={},this._locale=ze(),this._bubble()}function Ft(e){return e instanceof is}function bs(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function Fu(e,t,s){var r=Math.min(e.length,t.length),a=Math.abs(e.length-t.length),o=0,n;for(n=0;n<r;n++)F(e[n])!==F(t[n])&&o++;return o+a}function Ha(e,t){E(e,0,0,function(){var s=this.utcOffset(),r="+";return s<0&&(s=-s,r="-"),r+Pe(~~(s/60),2)+t+Pe(~~s%60,2)})}Ha("Z",":");Ha("ZZ","");Y("Z",os);Y("ZZ",os);J(["Z","ZZ"],function(e,t,s){s._useUTC=!0,s._tzm=Bs(os,e)});var Hu=/([\+\-]|\d\d)/gi;function Bs(e,t){var s=(t||"").match(e),r,a,o;return s===null?null:(r=s[s.length-1]||[],a=(r+"").match(Hu)||["-",0,0],o=+(a[1]*60)+F(a[2]),o===0?0:a[0]==="+"?o:-o)}function zs(e,t){var s,r;return t._isUTC?(s=t.clone(),r=(De(e)||At(e)?e.valueOf():ee(e).valueOf())-s.valueOf(),s._d.setTime(s._d.valueOf()+r),T.updateOffset(s,!1),s):ee(e).local()}function xs(e){return-Math.round(e._d.getTimezoneOffset())}T.updateOffset=function(){};function Bu(e,t,s){var r=this._offset||0,a;if(!this.isValid())return e!=null?this:NaN;if(e!=null){if(typeof e=="string"){if(e=Bs(os,e),e===null)return this}else Math.abs(e)<16&&!s&&(e=e*60);return!this._isUTC&&t&&(a=xs(this)),this._offset=e,this._isUTC=!0,a!=null&&this.add(a,"m"),r!==e&&(!t||this._changeInProgress?Ga(this,Te(e-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,T.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?r:xs(this)}function zu(e,t){return e!=null?(typeof e!="string"&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function Gu(e){return this.utcOffset(0,e)}function qu(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(xs(this),"m")),this}function Zu(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var e=Bs(hi,this._i);e!=null?this.utcOffset(e):this.utcOffset(0,!0)}return this}function Ju(e){return this.isValid()?(e=e?ee(e).utcOffset():0,(this.utcOffset()-e)%60===0):!1}function Qu(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Ku(){if(!ge(this._isDSTShifted))return this._isDSTShifted;var e={},t;return Ys(e,this),e=Va(e),e._a?(t=e._isUTC?Ie(e._a):ee(e._a),this._isDSTShifted=this.isValid()&&Fu(e._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function Xu(){return this.isValid()?!this._isUTC:!1}function ed(){return this.isValid()?this._isUTC:!1}function Ba(){return this.isValid()?this._isUTC&&this._offset===0:!1}var td=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,sd=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Te(e,t){var s=e,r=null,a,o,n;return Ft(e)?s={ms:e._milliseconds,d:e._days,M:e._months}:Be(e)||!isNaN(+e)?(s={},t?s[t]=+e:s.milliseconds=+e):(r=td.exec(e))?(a=r[1]==="-"?-1:1,s={y:0,d:F(r[Ye])*a,h:F(r[de])*a,m:F(r[Se])*a,s:F(r[Ve])*a,ms:F(bs(r[at]*1e3))*a}):(r=sd.exec(e))?(a=r[1]==="-"?-1:1,s={y:st(r[2],a),M:st(r[3],a),w:st(r[4],a),d:st(r[5],a),h:st(r[6],a),m:st(r[7],a),s:st(r[8],a)}):s==null?s={}:typeof s=="object"&&("from"in s||"to"in s)&&(n=ad(ee(s.from),ee(s.to)),s={},s.ms=n.milliseconds,s.M=n.months),o=new is(s),Ft(e)&&z(e,"_locale")&&(o._locale=e._locale),Ft(e)&&z(e,"_isValid")&&(o._isValid=e._isValid),o}Te.fn=is.prototype;Te.invalid=Lu;function st(e,t){var s=e&&parseFloat(e.replace(",","."));return(isNaN(s)?0:s)*t}function na(e,t){var s={};return s.months=t.month()-e.month()+(t.year()-e.year())*12,e.clone().add(s.months,"M").isAfter(t)&&--s.months,s.milliseconds=+t-+e.clone().add(s.months,"M"),s}function ad(e,t){var s;return e.isValid()&&t.isValid()?(t=zs(t,e),e.isBefore(t)?s=na(e,t):(s=na(t,e),s.milliseconds=-s.milliseconds,s.months=-s.months),s):{milliseconds:0,months:0}}function za(e,t){return function(s,r){var a,o;return r!==null&&!isNaN(+r)&&(wa(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),o=s,s=r,r=o),a=Te(s,r),Ga(this,a,e),this}}function Ga(e,t,s,r){var a=t._milliseconds,o=bs(t._days),n=bs(t._months);e.isValid()&&(r=r??!0,n&&Oa(e,$t(e,"Month")+n*s),o&&Ca(e,"Date",$t(e,"Date")+o*s),a&&e._d.setTime(e._d.valueOf()+a*s),r&&T.updateOffset(e,o||n))}var rd=za(1,"add"),od=za(-1,"subtract");function qa(e){return typeof e=="string"||e instanceof String}function nd(e){return De(e)||At(e)||qa(e)||Be(e)||id(e)||ld(e)||e===null||e===void 0}function ld(e){var t=rt(e)&&!Cs(e),s=!1,r=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],a,o,n=r.length;for(a=0;a<n;a+=1)o=r[a],s=s||z(e,o);return t&&s}function id(e){var t=Me(e),s=!1;return t&&(s=e.filter(function(r){return!Be(r)&&qa(e)}).length===0),t&&s}function ud(e){var t=rt(e)&&!Cs(e),s=!1,r=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],a,o;for(a=0;a<r.length;a+=1)o=r[a],s=s||z(e,o);return t&&s}function dd(e,t){var s=e.diff(t,"days",!0);return s<-6?"sameElse":s<-1?"lastWeek":s<0?"lastDay":s<1?"sameDay":s<2?"nextDay":s<7?"nextWeek":"sameElse"}function cd(e,t){arguments.length===1&&(arguments[0]?nd(arguments[0])?(e=arguments[0],t=void 0):ud(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var s=e||ee(),r=zs(s,this).startOf("day"),a=T.calendarFormat(this,r)||"sameElse",o=t&&(Ae(t[a])?t[a].call(this,s):t[a]);return this.format(o||this.localeData().calendar(a,this,ee(s)))}function fd(){return new Et(this)}function md(e,t){var s=De(e)?e:ee(e);return this.isValid()&&s.isValid()?(t=xe(t)||"millisecond",t==="millisecond"?this.valueOf()>s.valueOf():s.valueOf()<this.clone().startOf(t).valueOf()):!1}function hd(e,t){var s=De(e)?e:ee(e);return this.isValid()&&s.isValid()?(t=xe(t)||"millisecond",t==="millisecond"?this.valueOf()<s.valueOf():this.clone().endOf(t).valueOf()<s.valueOf()):!1}function vd(e,t,s,r){var a=De(e)?e:ee(e),o=De(t)?t:ee(t);return this.isValid()&&a.isValid()&&o.isValid()?(r=r||"()",(r[0]==="("?this.isAfter(a,s):!this.isBefore(a,s))&&(r[1]===")"?this.isBefore(o,s):!this.isAfter(o,s))):!1}function pd(e,t){var s=De(e)?e:ee(e),r;return this.isValid()&&s.isValid()?(t=xe(t)||"millisecond",t==="millisecond"?this.valueOf()===s.valueOf():(r=s.valueOf(),this.clone().startOf(t).valueOf()<=r&&r<=this.clone().endOf(t).valueOf())):!1}function gd(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function yd(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function kd(e,t,s){var r,a,o;if(!this.isValid())return NaN;if(r=zs(e,this),!r.isValid())return NaN;switch(a=(r.utcOffset()-this.utcOffset())*6e4,t=xe(t),t){case"year":o=Ht(this,r)/12;break;case"month":o=Ht(this,r);break;case"quarter":o=Ht(this,r)/3;break;case"second":o=(this-r)/1e3;break;case"minute":o=(this-r)/6e4;break;case"hour":o=(this-r)/36e5;break;case"day":o=(this-r-a)/864e5;break;case"week":o=(this-r-a)/6048e5;break;default:o=this-r}return s?o:_e(o)}function Ht(e,t){if(e.date()<t.date())return-Ht(t,e);var s=(t.year()-e.year())*12+(t.month()-e.month()),r=e.clone().add(s,"months"),a,o;return t-r<0?(a=e.clone().add(s-1,"months"),o=(t-r)/(r-a)):(a=e.clone().add(s+1,"months"),o=(t-r)/(a-r)),-(s+o)||0}T.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";T.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function _d(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function wd(e){if(!this.isValid())return null;var t=e!==!0,s=t?this.clone().utc():this;return s.year()<0||s.year()>9999?Lt(s,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):Ae(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",Lt(s,"Z")):Lt(s,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function bd(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="",s,r,a,o;return this.isLocal()||(e=this.utcOffset()===0?"moment.utc":"moment.parseZone",t="Z"),s="["+e+'("]',r=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",a="-MM-DD[T]HH:mm:ss.SSS",o=t+'[")]',this.format(s+r+a+o)}function xd(e){e||(e=this.isUtc()?T.defaultFormatUtc:T.defaultFormat);var t=Lt(this,e);return this.localeData().postformat(t)}function Sd(e,t){return this.isValid()&&(De(e)&&e.isValid()||ee(e).isValid())?Te({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function Md(e){return this.from(ee(),e)}function Dd(e,t){return this.isValid()&&(De(e)&&e.isValid()||ee(e).isValid())?Te({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function Td(e){return this.to(ee(),e)}function Za(e){var t;return e===void 0?this._locale._abbr:(t=ze(e),t!=null&&(this._locale=t),this)}var Ja=be("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===void 0?this.localeData():this.locale(e)});function Qa(){return this._locale}var Gt=1e3,ft=60*Gt,qt=60*ft,Ka=(365*400+97)*24*qt;function mt(e,t){return(e%t+t)%t}function Xa(e,t,s){return e<100&&e>=0?new Date(e+400,t,s)-Ka:new Date(e,t,s).valueOf()}function er(e,t,s){return e<100&&e>=0?Date.UTC(e+400,t,s)-Ka:Date.UTC(e,t,s)}function Cd(e){var t,s;if(e=xe(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(s=this._isUTC?er:Xa,e){case"year":t=s(this.year(),0,1);break;case"quarter":t=s(this.year(),this.month()-this.month()%3,1);break;case"month":t=s(this.year(),this.month(),1);break;case"week":t=s(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=s(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=s(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=mt(t+(this._isUTC?0:this.utcOffset()*ft),qt);break;case"minute":t=this._d.valueOf(),t-=mt(t,ft);break;case"second":t=this._d.valueOf(),t-=mt(t,Gt);break}return this._d.setTime(t),T.updateOffset(this,!0),this}function $d(e){var t,s;if(e=xe(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(s=this._isUTC?er:Xa,e){case"year":t=s(this.year()+1,0,1)-1;break;case"quarter":t=s(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=s(this.year(),this.month()+1,1)-1;break;case"week":t=s(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=s(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=s(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=qt-mt(t+(this._isUTC?0:this.utcOffset()*ft),qt)-1;break;case"minute":t=this._d.valueOf(),t+=ft-mt(t,ft)-1;break;case"second":t=this._d.valueOf(),t+=Gt-mt(t,Gt)-1;break}return this._d.setTime(t),T.updateOffset(this,!0),this}function Yd(){return this._d.valueOf()-(this._offset||0)*6e4}function Od(){return Math.floor(this.valueOf()/1e3)}function Nd(){return new Date(this.valueOf())}function Pd(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function Id(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function Ad(){return this.isValid()?this.toISOString():null}function Ed(){return $s(this)}function Rd(){return Je({},j(this))}function Ud(){return j(this).overflow}function jd(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}E("N",0,0,"eraAbbr");E("NN",0,0,"eraAbbr");E("NNN",0,0,"eraAbbr");E("NNNN",0,0,"eraName");E("NNNNN",0,0,"eraNarrow");E("y",["y",1],"yo","eraYear");E("y",["yy",2],0,"eraYear");E("y",["yyy",3],0,"eraYear");E("y",["yyyy",4],0,"eraYear");Y("N",Gs);Y("NN",Gs);Y("NNN",Gs);Y("NNNN",Jd);Y("NNNNN",Qd);J(["N","NN","NNN","NNNN","NNNNN"],function(e,t,s,r){var a=s._locale.erasParse(e,r,s._strict);a?j(s).era=a:j(s).invalidEra=e});Y("y",vt);Y("yy",vt);Y("yyy",vt);Y("yyyy",vt);Y("yo",Kd);J(["y","yy","yyy","yyyy"],he);J(["yo"],function(e,t,s,r){var a;s._locale._eraYearOrdinalRegex&&(a=e.match(s._locale._eraYearOrdinalRegex)),s._locale.eraYearOrdinalParse?t[he]=s._locale.eraYearOrdinalParse(e,a):t[he]=parseInt(e,10)});function Wd(e,t){var s,r,a,o=this._eras||ze("en")._eras;for(s=0,r=o.length;s<r;++s){switch(typeof o[s].since){case"string":a=T(o[s].since).startOf("day"),o[s].since=a.valueOf();break}switch(typeof o[s].until){case"undefined":o[s].until=1/0;break;case"string":a=T(o[s].until).startOf("day").valueOf(),o[s].until=a.valueOf();break}}return o}function Vd(e,t,s){var r,a,o=this.eras(),n,u,c;for(e=e.toUpperCase(),r=0,a=o.length;r<a;++r)if(n=o[r].name.toUpperCase(),u=o[r].abbr.toUpperCase(),c=o[r].narrow.toUpperCase(),s)switch(t){case"N":case"NN":case"NNN":if(u===e)return o[r];break;case"NNNN":if(n===e)return o[r];break;case"NNNNN":if(c===e)return o[r];break}else if([n,u,c].indexOf(e)>=0)return o[r]}function Ld(e,t){var s=e.since<=e.until?1:-1;return t===void 0?T(e.since).year():T(e.since).year()+(t-e.offset)*s}function Fd(){var e,t,s,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e)if(s=this.clone().startOf("day").valueOf(),r[e].since<=s&&s<=r[e].until||r[e].until<=s&&s<=r[e].since)return r[e].name;return""}function Hd(){var e,t,s,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e)if(s=this.clone().startOf("day").valueOf(),r[e].since<=s&&s<=r[e].until||r[e].until<=s&&s<=r[e].since)return r[e].narrow;return""}function Bd(){var e,t,s,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e)if(s=this.clone().startOf("day").valueOf(),r[e].since<=s&&s<=r[e].until||r[e].until<=s&&s<=r[e].since)return r[e].abbr;return""}function zd(){var e,t,s,r,a=this.localeData().eras();for(e=0,t=a.length;e<t;++e)if(s=a[e].since<=a[e].until?1:-1,r=this.clone().startOf("day").valueOf(),a[e].since<=r&&r<=a[e].until||a[e].until<=r&&r<=a[e].since)return(this.year()-T(a[e].since).year())*s+a[e].offset;return this.year()}function Gd(e){return z(this,"_erasNameRegex")||qs.call(this),e?this._erasNameRegex:this._erasRegex}function qd(e){return z(this,"_erasAbbrRegex")||qs.call(this),e?this._erasAbbrRegex:this._erasRegex}function Zd(e){return z(this,"_erasNarrowRegex")||qs.call(this),e?this._erasNarrowRegex:this._erasRegex}function Gs(e,t){return t.erasAbbrRegex(e)}function Jd(e,t){return t.erasNameRegex(e)}function Qd(e,t){return t.erasNarrowRegex(e)}function Kd(e,t){return t._eraYearOrdinalRegex||vt}function qs(){var e=[],t=[],s=[],r=[],a,o,n,u,c,d=this.eras();for(a=0,o=d.length;a<o;++a)n=Fe(d[a].name),u=Fe(d[a].abbr),c=Fe(d[a].narrow),t.push(n),e.push(u),s.push(c),r.push(n),r.push(u),r.push(c);this._erasRegex=new RegExp("^("+r.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+t.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+s.join("|")+")","i")}E(0,["gg",2],0,function(){return this.weekYear()%100});E(0,["GG",2],0,function(){return this.isoWeekYear()%100});function us(e,t){E(0,[e,e.length],0,t)}us("gggg","weekYear");us("ggggg","weekYear");us("GGGG","isoWeekYear");us("GGGGG","isoWeekYear");Y("G",rs);Y("g",rs);Y("GG",te,ke);Y("gg",te,ke);Y("GGGG",As,Is);Y("gggg",As,Is);Y("GGGGG",as,ts);Y("ggggg",as,ts);Ut(["gggg","ggggg","GGGG","GGGGG"],function(e,t,s,r){t[r.substr(0,2)]=F(e)});Ut(["gg","GG"],function(e,t,s,r){t[r]=T.parseTwoDigitYear(e)});function Xd(e){return tr.call(this,e,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function ec(e){return tr.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function tc(){return He(this.year(),1,4)}function sc(){return He(this.isoWeekYear(),1,4)}function ac(){var e=this.localeData()._week;return He(this.year(),e.dow,e.doy)}function rc(){var e=this.localeData()._week;return He(this.weekYear(),e.dow,e.doy)}function tr(e,t,s,r,a){var o;return e==null?Ot(this,r,a).year:(o=He(e,r,a),t>o&&(t=o),oc.call(this,e,t,s,r,a))}function oc(e,t,s,r,a){var o=Ia(e,t,s,r,a),n=Yt(o.year,0,o.dayOfYear);return this.year(n.getUTCFullYear()),this.month(n.getUTCMonth()),this.date(n.getUTCDate()),this}E("Q",0,"Qo","quarter");Y("Q",xa);J("Q",function(e,t){t[We]=(F(e)-1)*3});function nc(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}E("D",["DD",2],"Do","date");Y("D",te,pt);Y("DD",te,ke);Y("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient});J(["D","DD"],Ye);J("Do",function(e,t){t[Ye]=F(e.match(te)[0])});var sr=gt("Date",!0);E("DDD",["DDDD",3],"DDDo","dayOfYear");Y("DDD",ss);Y("DDDD",Sa);J(["DDD","DDDD"],function(e,t,s){s._dayOfYear=F(e)});function lc(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}E("m",["mm",2],0,"minute");Y("m",te,Es);Y("mm",te,ke);J(["m","mm"],Se);var ic=gt("Minutes",!1);E("s",["ss",2],0,"second");Y("s",te,Es);Y("ss",te,ke);J(["s","ss"],Ve);var uc=gt("Seconds",!1);E("S",0,0,function(){return~~(this.millisecond()/100)});E(0,["SS",2],0,function(){return~~(this.millisecond()/10)});E(0,["SSS",3],0,"millisecond");E(0,["SSSS",4],0,function(){return this.millisecond()*10});E(0,["SSSSS",5],0,function(){return this.millisecond()*100});E(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});E(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});E(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});E(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});Y("S",ss,xa);Y("SS",ss,ke);Y("SSS",ss,Sa);var Qe,ar;for(Qe="SSSS";Qe.length<=9;Qe+="S")Y(Qe,vt);function dc(e,t){t[at]=F(("0."+e)*1e3)}for(Qe="S";Qe.length<=9;Qe+="S")J(Qe,dc);ar=gt("Milliseconds",!1);E("z",0,0,"zoneAbbr");E("zz",0,0,"zoneName");function cc(){return this._isUTC?"UTC":""}function fc(){return this._isUTC?"Coordinated Universal Time":""}var b=Et.prototype;b.add=rd;b.calendar=cd;b.clone=fd;b.diff=kd;b.endOf=$d;b.format=xd;b.from=Sd;b.fromNow=Md;b.to=Dd;b.toNow=Td;b.get=bi;b.invalidAt=Ud;b.isAfter=md;b.isBefore=hd;b.isBetween=vd;b.isSame=pd;b.isSameOrAfter=gd;b.isSameOrBefore=yd;b.isValid=Ed;b.lang=Ja;b.locale=Za;b.localeData=Qa;b.max=Eu;b.min=Au;b.parsingFlags=Rd;b.set=xi;b.startOf=Cd;b.subtract=od;b.toArray=Pd;b.toObject=Id;b.toDate=Nd;b.toISOString=wd;b.inspect=bd;typeof Symbol<"u"&&Symbol.for!=null&&(b[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});b.toJSON=Ad;b.toString=_d;b.unix=Od;b.valueOf=Yd;b.creationData=jd;b.eraName=Fd;b.eraNarrow=Hd;b.eraAbbr=Bd;b.eraYear=zd;b.year=Ta;b.isLeapYear=wi;b.weekYear=Xd;b.isoWeekYear=ec;b.quarter=b.quarters=nc;b.month=Na;b.daysInMonth=Ni;b.week=b.weeks=Wi;b.isoWeek=b.isoWeeks=Vi;b.weeksInYear=ac;b.weeksInWeekYear=rc;b.isoWeeksInYear=tc;b.isoWeeksInISOWeekYear=sc;b.date=sr;b.day=b.days=eu;b.weekday=tu;b.isoWeekday=su;b.dayOfYear=lc;b.hour=b.hours=uu;b.minute=b.minutes=ic;b.second=b.seconds=uc;b.millisecond=b.milliseconds=ar;b.utcOffset=Bu;b.utc=Gu;b.local=qu;b.parseZone=Zu;b.hasAlignedHourOffset=Ju;b.isDST=Qu;b.isLocal=Xu;b.isUtcOffset=ed;b.isUtc=Ba;b.isUTC=Ba;b.zoneAbbr=cc;b.zoneName=fc;b.dates=be("dates accessor is deprecated. Use date instead.",sr);b.months=be("months accessor is deprecated. Use month instead",Na);b.years=be("years accessor is deprecated. Use year instead",Ta);b.zone=be("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",zu);b.isDSTShifted=be("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Ku);function mc(e){return ee(e*1e3)}function hc(){return ee.apply(null,arguments).parseZone()}function rr(e){return e}var G=Os.prototype;G.calendar=Xl;G.longDateFormat=ai;G.invalidDate=oi;G.ordinal=ii;G.preparse=rr;G.postformat=rr;G.relativeTime=di;G.pastFuture=ci;G.set=Ql;G.eras=Wd;G.erasParse=Vd;G.erasConvertYear=Ld;G.erasAbbrRegex=qd;G.erasNameRegex=Gd;G.erasNarrowRegex=Zd;G.months=Ci;G.monthsShort=$i;G.monthsParse=Oi;G.monthsRegex=Ii;G.monthsShortRegex=Pi;G.week=Ei;G.firstDayOfYear=ji;G.firstDayOfWeek=Ui;G.weekdays=Zi;G.weekdaysMin=Qi;G.weekdaysShort=Ji;G.weekdaysParse=Xi;G.weekdaysRegex=au;G.weekdaysShortRegex=ru;G.weekdaysMinRegex=ou;G.isPM=lu;G.meridiem=du;function Zt(e,t,s,r){var a=ze(),o=Ie().set(r,t);return a[s](o,e)}function or(e,t,s){if(Be(e)&&(t=e,e=void 0),e=e||"",t!=null)return Zt(e,t,s,"month");var r,a=[];for(r=0;r<12;r++)a[r]=Zt(e,r,s,"month");return a}function Zs(e,t,s,r){typeof e=="boolean"?(Be(t)&&(s=t,t=void 0),t=t||""):(t=e,s=t,e=!1,Be(t)&&(s=t,t=void 0),t=t||"");var a=ze(),o=e?a._week.dow:0,n,u=[];if(s!=null)return Zt(t,(s+o)%7,r,"day");for(n=0;n<7;n++)u[n]=Zt(t,(n+o)%7,r,"day");return u}function vc(e,t){return or(e,t,"months")}function pc(e,t){return or(e,t,"monthsShort")}function gc(e,t,s){return Zs(e,t,s,"weekdays")}function yc(e,t,s){return Zs(e,t,s,"weekdaysShort")}function kc(e,t,s){return Zs(e,t,s,"weekdaysMin")}Ke("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,s=F(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+s}});T.lang=be("moment.lang is deprecated. Use moment.locale instead.",Ke);T.langData=be("moment.langData is deprecated. Use moment.localeData instead.",ze);var Re=Math.abs;function _c(){var e=this._data;return this._milliseconds=Re(this._milliseconds),this._days=Re(this._days),this._months=Re(this._months),e.milliseconds=Re(e.milliseconds),e.seconds=Re(e.seconds),e.minutes=Re(e.minutes),e.hours=Re(e.hours),e.months=Re(e.months),e.years=Re(e.years),this}function nr(e,t,s,r){var a=Te(t,s);return e._milliseconds+=r*a._milliseconds,e._days+=r*a._days,e._months+=r*a._months,e._bubble()}function wc(e,t){return nr(this,e,t,1)}function bc(e,t){return nr(this,e,t,-1)}function la(e){return e<0?Math.floor(e):Math.ceil(e)}function xc(){var e=this._milliseconds,t=this._days,s=this._months,r=this._data,a,o,n,u,c;return e>=0&&t>=0&&s>=0||e<=0&&t<=0&&s<=0||(e+=la(Ss(s)+t)*864e5,t=0,s=0),r.milliseconds=e%1e3,a=_e(e/1e3),r.seconds=a%60,o=_e(a/60),r.minutes=o%60,n=_e(o/60),r.hours=n%24,t+=_e(n/24),c=_e(lr(t)),s+=c,t-=la(Ss(c)),u=_e(s/12),s%=12,r.days=t,r.months=s,r.years=u,this}function lr(e){return e*4800/146097}function Ss(e){return e*146097/4800}function Sc(e){if(!this.isValid())return NaN;var t,s,r=this._milliseconds;if(e=xe(e),e==="month"||e==="quarter"||e==="year")switch(t=this._days+r/864e5,s=this._months+lr(t),e){case"month":return s;case"quarter":return s/3;case"year":return s/12}else switch(t=this._days+Math.round(Ss(this._months)),e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return t*24+r/36e5;case"minute":return t*1440+r/6e4;case"second":return t*86400+r/1e3;case"millisecond":return Math.floor(t*864e5)+r;default:throw new Error("Unknown unit "+e)}}function Ge(e){return function(){return this.as(e)}}var ir=Ge("ms"),Mc=Ge("s"),Dc=Ge("m"),Tc=Ge("h"),Cc=Ge("d"),$c=Ge("w"),Yc=Ge("M"),Oc=Ge("Q"),Nc=Ge("y"),Pc=ir;function Ic(){return Te(this)}function Ac(e){return e=xe(e),this.isValid()?this[e+"s"]():NaN}function ot(e){return function(){return this.isValid()?this._data[e]:NaN}}var Ec=ot("milliseconds"),Rc=ot("seconds"),Uc=ot("minutes"),jc=ot("hours"),Wc=ot("days"),Vc=ot("months"),Lc=ot("years");function Fc(){return _e(this.days()/7)}var Ue=Math.round,ut={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function Hc(e,t,s,r,a){return a.relativeTime(t||1,!!s,e,r)}function Bc(e,t,s,r){var a=Te(e).abs(),o=Ue(a.as("s")),n=Ue(a.as("m")),u=Ue(a.as("h")),c=Ue(a.as("d")),d=Ue(a.as("M")),p=Ue(a.as("w")),g=Ue(a.as("y")),C=o<=s.ss&&["s",o]||o<s.s&&["ss",o]||n<=1&&["m"]||n<s.m&&["mm",n]||u<=1&&["h"]||u<s.h&&["hh",u]||c<=1&&["d"]||c<s.d&&["dd",c];return s.w!=null&&(C=C||p<=1&&["w"]||p<s.w&&["ww",p]),C=C||d<=1&&["M"]||d<s.M&&["MM",d]||g<=1&&["y"]||["yy",g],C[2]=t,C[3]=+e>0,C[4]=r,Hc.apply(null,C)}function zc(e){return e===void 0?Ue:typeof e=="function"?(Ue=e,!0):!1}function Gc(e,t){return ut[e]===void 0?!1:t===void 0?ut[e]:(ut[e]=t,e==="s"&&(ut.ss=t-1),!0)}function qc(e,t){if(!this.isValid())return this.localeData().invalidDate();var s=!1,r=ut,a,o;return typeof e=="object"&&(t=e,e=!1),typeof e=="boolean"&&(s=e),typeof t=="object"&&(r=Object.assign({},ut,t),t.s!=null&&t.ss==null&&(r.ss=t.s-1)),a=this.localeData(),o=Bc(this,!s,r,a),s&&(o=a.pastFuture(+this,o)),a.postformat(o)}var ps=Math.abs;function lt(e){return(e>0)-(e<0)||+e}function ds(){if(!this.isValid())return this.localeData().invalidDate();var e=ps(this._milliseconds)/1e3,t=ps(this._days),s=ps(this._months),r,a,o,n,u=this.asSeconds(),c,d,p,g;return u?(r=_e(e/60),a=_e(r/60),e%=60,r%=60,o=_e(s/12),s%=12,n=e?e.toFixed(3).replace(/\.?0+$/,""):"",c=u<0?"-":"",d=lt(this._months)!==lt(u)?"-":"",p=lt(this._days)!==lt(u)?"-":"",g=lt(this._milliseconds)!==lt(u)?"-":"",c+"P"+(o?d+o+"Y":"")+(s?d+s+"M":"")+(t?p+t+"D":"")+(a||r||e?"T":"")+(a?g+a+"H":"")+(r?g+r+"M":"")+(e?g+n+"S":"")):"P0D"}var H=is.prototype;H.isValid=Vu;H.abs=_c;H.add=wc;H.subtract=bc;H.as=Sc;H.asMilliseconds=ir;H.asSeconds=Mc;H.asMinutes=Dc;H.asHours=Tc;H.asDays=Cc;H.asWeeks=$c;H.asMonths=Yc;H.asQuarters=Oc;H.asYears=Nc;H.valueOf=Pc;H._bubble=xc;H.clone=Ic;H.get=Ac;H.milliseconds=Ec;H.seconds=Rc;H.minutes=Uc;H.hours=jc;H.days=Wc;H.weeks=Fc;H.months=Vc;H.years=Lc;H.humanize=qc;H.toISOString=ds;H.toString=ds;H.toJSON=ds;H.locale=Za;H.localeData=Qa;H.toIsoString=be("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",ds);H.lang=Ja;E("X",0,0,"unix");E("x",0,0,"valueOf");Y("x",rs);Y("X",vi);J("X",function(e,t,s){s._d=new Date(parseFloat(e)*1e3)});J("x",function(e,t,s){s._d=new Date(F(e))});//! moment.js
T.version="2.30.1";Zl(ee);T.fn=b;T.min=Ru;T.max=Uu;T.now=ju;T.utc=Ie;T.unix=mc;T.months=vc;T.isDate=At;T.locale=Ke;T.invalid=es;T.duration=Te;T.isMoment=De;T.weekdays=gc;T.parseZone=hc;T.localeData=ze;T.isDuration=Ft;T.monthsShort=pc;T.weekdaysMin=kc;T.defineLocale=Vs;T.updateLocale=hu;T.locales=vu;T.weekdaysShort=yc;T.normalizeUnits=xe;T.relativeTimeRounding=zc;T.relativeTimeThreshold=Gc;T.calendarFormat=dd;T.prototype=b;T.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};const Zc={class:"space-y-4"},Jc={key:0,class:"mb-4 p-3 bg-gray-100 rounded-md"},Qc={class:"text-sm font-medium text-gray-900"},Kc={class:"text-xs text-gray-500 mt-1"},Xc={class:"mb-4"},ef="post",tf="Add Note",sf="Note added successfully!",af={__name:"TaskNoteModal",props:{show:Boolean,taskForNote:Object},emits:["close","note-added"],setup(e,{emit:t}){const s=e,r=t,a=Kt({note:""}),o=B(()=>{var d;return`Add Note to Task: "${(d=s.taskForNote)==null?void 0:d.name}"`}),n=B(()=>{var d;return`/api/tasks/${(d=s.taskForNote)==null?void 0:d.id}/notes`});me(()=>s.show,d=>{d&&Object.assign(a,{note:""})},{immediate:!0});const u=d=>{r("note-added",d),r("close")},c=()=>{r("close")};return(d,p)=>(i(),A(Xt,{show:e.show,title:o.value,"api-endpoint":n.value,"http-method":ef,"form-data":a,"submit-button-text":tf,"success-message":sf,onClose:c,onSubmitted:u},{default:x(({errors:g})=>[l("div",Zc,[e.taskForNote?(i(),m("div",Jc,[l("p",Qc,P(e.taskForNote.name),1),l("p",Kc,"Status: "+P(e.taskForNote.status),1)])):k("",!0),l("div",Xc,[v(q,{for:"task-note-content",value:"Note Content"}),ce(l("textarea",{id:"task-note-content","onUpdate:modelValue":p[0]||(p[0]=C=>a.note=C),class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full h-32",placeholder:"Enter your note...",required:""},null,512),[[Le,a.note]]),v(ae,{message:g.note?g.note[0]:"",class:"mt-2"},null,8,["message"])])])]),_:1},8,["show","title","api-endpoint","form-data"]))}},rf={class:"task-history-list"},of={key:0,class:"text-center py-4"},nf={key:1,class:"text-gray-500 text-sm py-2"},lf={key:2,class:"space-y-3"},uf={class:"flex items-start"},df={class:"text-xl mr-2"},cf={class:"text-sm text-gray-700"},ff={class:"text-xs text-gray-500 mt-1"},mf={__name:"TaskHistoryList",props:{activities:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},setup(e){const t=r=>r?new Date(r).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",s=r=>(console.log(r),r.includes("created")?"ðŸ†•":r.includes("started")?"ðŸš€":r.includes("paused")?"â¸ï¸":r.includes("resumed")?"â–¶ï¸":r.includes("unblocked")?"ðŸ”“":r.includes("blocked")?"â›”":r.includes("completed")?"âœ…":r.includes("revised")?"ðŸ”„":r.includes("deleted")?"ðŸ—‘ï¸":r.includes("assigned")?"ðŸ‘¤":r.includes("updated")?"ðŸ“":r.includes("added note")?"ðŸ—’ï¸":r.includes("commented")?"ðŸ’¬":"ðŸ“‹");return(r,a)=>(i(),m("div",rf,[e.loading?(i(),m("div",of,a[0]||(a[0]=[l("div",{class:"inline-block animate-spin rounded-full h-6 w-6 border-t-2 border-b-2 border-indigo-500"},null,-1),l("p",{class:"mt-2 text-gray-500"},"Loading activity history...",-1)]))):e.activities.length===0?(i(),m("div",nf," No activity history available for this task. ")):(i(),m("div",lf,[(i(!0),m(ie,null,ue(e.activities,o=>{var n;return i(),m("div",{key:o.id,class:"p-3 bg-gray-50 rounded-md"},[l("div",uf,[l("span",df,P(s(o.description)),1),l("div",null,[l("p",cf,P(o.description),1),l("p",ff," By "+P(((n=o.causer)==null?void 0:n.name)||"System")+" on "+P(t(o.created_at)),1)])])])}),128))]))]))}},hf=ht(mf,[["__scopeId","data-v-423d54af"]]),Gm=async()=>{try{return(await oe.get("/api/assigned-tasks")).data}catch(e){throw console.error("Error fetching assigned tasks:",e),fe("Failed to load assigned tasks"),e}},qm=async e=>{try{return(await oe.get(`/api/projects/${e}/tasks`)).data}catch(t){throw console.error("Error fetching project tasks:",t),fe("Failed to load project tasks"),t}},Zm=async e=>{try{return(await oe.get(`/api/projects/${e}/due-and-overdue-tasks`)).data}catch(t){throw console.error("Error fetching due and overdue tasks:",t),fe("Failed to load due and overdue tasks"),t}},vf=async e=>{if(!e||e.status==="In Progress")return e;try{Xe("Starting task...");const t=await oe.post(`/api/tasks/${e.id}/start`);return we("Task started successfully"),t.data}catch(t){throw console.error("Error starting task:",t),fe("Failed to start task. Please try again."),t}},pf=async e=>{if(!e||e.status!=="In Progress")return ye('Task can only be paused from "In Progress" status.'),e;try{Xe("Pausing task...");const t=await oe.post(`/api/tasks/${e.id}/pause`);return we("Task paused successfully"),t.data}catch(t){throw console.error("Error pausing task:",t),fe("Failed to pause task. Please try again."),t}},gf=async e=>{if(!e||e.status!=="Paused")return ye('Task can only be resumed from "Paused" status.'),e;try{Xe("Resuming task...");const t=await oe.post(`/api/tasks/${e.id}/resume`);return we("Task resumed successfully"),t.data}catch(t){throw console.error("Error resuming task:",t),fe("Failed to resume task. Please try again."),t}},yf=async e=>{if(!e||e.status==="Done")return e;if(e.status!=="In Progress")throw ye("Task must be started before it can be completed"),new Error("Task must be started before it can be completed");try{Xe("Completing task...");const t=await oe.patch(`/api/tasks/${e.id}/complete`);return we("Task completed successfully"),t.data}catch(t){throw console.error("Error completing task:",t),t.response&&t.response.status===422?ye(t.response.data.message||"Task must be started before it can be completed"):fe("Failed to complete task. Please try again."),t}},kf=async(e,t)=>{if(!e||e.status==="Blocked")return ye("Task is already blocked."),e;if(e.status==="Done")return ye("Completed tasks cannot be blocked."),e;if(!t)throw ye("Please provide a reason for blocking the task"),new Error("Blocking reason is required");try{Xe("Blocking task...");const s=await oe.post(`/api/tasks/${e.id}/block`,{reason:t});return we("Task blocked successfully"),s.data}catch(s){throw console.error("Error blocking task:",s),fe("Failed to block task. Please try again."),s}},_f=async e=>{if(!e||e.status!=="Blocked")return ye("Task is not in a blocked state."),e;try{Xe("Unblocking task...");const t=await oe.post(`/api/tasks/${e.id}/unblock`);return we("Task unblocked successfully"),t.data}catch(t){throw console.error("Error unblocking task:",t),fe("Failed to unblock task. Please try again."),t}},wf=async e=>{if(!e||e.status!=="Done")return ye("Only completed tasks can be revised."),e;try{Xe("Revising task...");const t=await oe.post(`/api/tasks/${e.id}/revise`);return we("Task revised successfully"),t.data}catch(t){throw console.error("Error revising task:",t),t.response&&t.response.status===422?ye(t.response.data.message||"Only completed tasks can be revised"):fe("Failed to revise task. Please try again."),t}},bf=async e=>{if(!e)return!1;if(e.status!=="To Do")throw ye("Only tasks in To Do status can be deleted"),new Error("Only tasks in To Do status can be deleted");if(!confirm("Are you sure you want to delete this task? This action cannot be undone."))return!1;try{return Xe("Deleting task..."),await oe.delete(`/api/tasks/${e.id}`),we("Task deleted successfully"),!0}catch(t){throw console.error("Error deleting task:",t),fe("Failed to delete task. Please try again."),t}},xf=e=>{switch(e){case"To Do":return"bg-yellow-100 text-yellow-800";case"In Progress":return"bg-blue-100 text-blue-800";case"Paused":return"bg-orange-100 text-orange-800";case"Blocked":return"bg-red-100 text-red-800";case"Done":return"bg-green-100 text-green-800";case"Archived":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},Jm=e=>{switch(e){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},Qm=e=>e?e.charAt(0).toUpperCase()+e.slice(1):"Medium",Sf=["checked","onChange"],Mf={__name:"ChecklistComponent",props:{items:{type:Array,required:!0},apiEndpoint:{type:String,required:!0},title:{type:String,default:"Checklist"},containerClass:{type:String,default:"mt-4 p-3 bg-gray-100 rounded-lg text-sm text-gray-700 border border-gray-200"},titleClass:{type:String,default:"font-semibold text-gray-900 mb-2"},itemsContainerClass:{type:String,default:"space-y-1"},itemClass:{type:String,default:"flex items-center space-x-2"},checkboxClass:{type:String,default:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"},completedItemClass:{type:String,default:"line-through text-gray-500"},successMessage:{type:String,default:"Checklist item updated!"},errorMessage:{type:String,default:"Failed to update checklist item"},payloadTransformer:{type:Function,default:null}},emits:["update:items","item-toggled"],setup(e,{emit:t}){const s=e,r=t,a=N(JSON.parse(JSON.stringify(s.items)));me(()=>s.items,n=>{a.value=JSON.parse(JSON.stringify(n))},{deep:!0});async function o(n){const u=a.value[n],c=!u.completed;u.completed=c;try{let d;s.payloadTransformer?d=s.payloadTransformer(a.value,n):d={items:a.value},await oe.put(s.apiEndpoint,d),r("update:items",a.value),r("item-toggled",{index:n,item:u,completed:c}),we(s.successMessage)}catch(d){console.error("Error updating checklist item:",d),u.completed=!c,fe(s.errorMessage)}}return(n,u)=>a.value&&a.value.length>0?(i(),m("div",{key:0,class:L(e.containerClass)},[l("p",{class:L(e.titleClass)},P(e.title),3),l("ul",{class:L(e.itemsContainerClass)},[(i(!0),m(ie,null,ue(a.value,(c,d)=>(i(),m("li",{key:d,class:L(e.itemClass)},[l("input",{type:"checkbox",checked:c.completed,onChange:p=>o(d),class:L(e.checkboxClass)},null,42,Sf),l("span",{class:L({[e.completedItemClass]:c.completed})},P(c.name),3)],2))),128))],2)],2)):k("",!0)}};function ia(e,t){return i(),m("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[l("path",{"fill-rule":"evenodd",d:"M8.75 1A2.75 2.75 0 0 0 6 3.75v.443c-.795.077-1.584.176-2.365.298a.75.75 0 1 0 .23 1.482l.149-.022.841 10.518A2.75 2.75 0 0 0 7.596 19h4.807a2.75 2.75 0 0 0 2.742-2.53l.841-10.52.149.023a.75.75 0 0 0 .23-1.482A41.03 41.03 0 0 0 14 4.193V3.75A2.75 2.75 0 0 0 11.25 1h-2.5ZM10 4c.84 0 1.673.025 2.5.075V3.75c0-.69-.56-1.25-1.25-1.25h-2.5c-.69 0-1.25.56-1.25 1.25v.325C8.327 4.025 9.16 4 10 4ZM8.58 7.72a.75.75 0 0 0-1.5.06l.3 7.5a.75.75 0 1 0 1.5-.06l-.3-7.5Zm4.34.06a.75.75 0 1 0-1.5-.06l-.3 7.5a.75.75 0 1 0 1.5.06l.3-7.5Z","clip-rule":"evenodd"})])}const Df={class:"mt-4"},Tf={__name:"ChecklistCreator",props:{modelValue:{type:Array,required:!0},placeholder:{type:String,default:"e.g., Task 1, Task 2, Task 3"},label:{type:String,default:"Checklist Items"},density:{type:String,default:"spacious",validator:e=>["spacious","tight","notes"].includes(e)}},emits:["update:modelValue"],setup(e,{emit:t}){const s=e,r=t,a=N([]),o=N([]);me(()=>s.modelValue,p=>{a.value=JSON.parse(JSON.stringify(p)),(a.value.length===0||a.value[a.value.length-1].name.trim()!=="")&&a.value.push({name:"",completed:!1})},{immediate:!0,deep:!0}),me(()=>a.value,p=>{r("update:modelValue",p)},{deep:!0});function n(p){a.value.splice(p,1),a.value.length===0&&a.value.push({name:"",completed:!1})}function u(p){p===a.value.length-1&&a.value[p].name.trim()!==""&&a.value.push({name:"",completed:!1})}function c(p){p<a.value.length-1&&dt(()=>{var g;(g=o.value[p+1])==null||g.focus()})}const d=B(()=>s.density==="tight"?{listClass:"space-y-1",itemClass:"flex items-center space-x-1",inputClass:"px-1 py-1 text-sm"}:s.density==="notes"?{listClass:"space-y-0.5",itemClass:"flex items-center space-x-1",inputClass:"px-1 py-0.5 text-sm border-transparent focus:border-transparent focus:ring-0 bg-transparent"}:{listClass:"space-y-2",itemClass:"flex items-center space-x-2",inputClass:""});return(p,g)=>(i(),m("div",Df,[e.label?(i(),A(q,{key:0,value:e.label},null,8,["value"])):k("",!0),l("ul",{class:L(d.value.listClass)},[(i(!0),m(ie,null,ue(a.value,(C,U)=>(i(),m("li",{key:U,class:L(d.value.itemClass)},[e.density==="notes"?(i(),A(I(ia),{key:0,class:"h4 w-4",onClick:O=>n(U)},null,8,["onClick"])):k("",!0),v(Oe,{modelValue:C.name,"onUpdate:modelValue":O=>C.name=O,type:"text",class:L(["flex-1",d.value.inputClass]),placeholder:U===a.value.length-1?e.placeholder:"",onInput:O=>u(U),onKeyup:Vt(Qt(O=>c(U),["prevent"]),["enter"]),ref_for:!0,ref:O=>{O&&(o.value[U]=O)}},null,8,["modelValue","onUpdate:modelValue","class","placeholder","onInput","onKeyup"]),a.value.length>1&&e.density!=="notes"?(i(),A(Ts,{key:1,type:"button",onClick:O=>n(U)},{default:x(()=>[v(I(ia),{class:"h-4 w-4"})]),_:2},1032,["onClick"])):k("",!0)],2))),128))],2)]))}},Cf={key:0,class:"text-center py-8 text-gray-500"},$f={key:1,class:"text-center py-8 text-red-600"},Yf={key:2,class:"space-y-6"},Of={class:"bg-gray-50 p-4 rounded-lg shadow-sm"},Nf={class:"text-xl font-bold text-gray-900 mb-2"},Pf={class:"flex items-center space-x-2 text-sm text-gray-600 mb-4"},If={key:0,class:"text-indigo-600 font-medium"},Af={key:1,class:"text-purple-600 font-medium"},Ef={class:"text-gray-700 leading-relaxed"},Rf={class:"mt-4 flex flex-wrap gap-2"},Uf={key:0,class:"text-xs text-gray-500 mt-1"},jf={key:0,class:"bg-yellow-50 border-l-4 border-red-400 p-4 rounded-lg shadow-sm"},Wf={class:"flex items-center"},Vf={class:"ml-3"},Lf={class:"mt-2 text-sm text-yellow-700"},Ff={class:"space-y-4 p-4 bg-white rounded-lg shadow-sm mb-4"},Hf={class:"flex justify-between items-center border-b pb-2 mb-4"},Bf={key:0},zf={key:1},Gf={key:0,class:"mb-4"},qf={class:"flex justify-end mt-4"},Zf={key:2,class:"text-gray-500 text-sm py-2"},Jf={class:"space-y-4 p-4 bg-white rounded-lg shadow-sm"},Qf={class:"flex items-center justify-between py-2 border-b border-gray-100"},Kf={class:"flex-1 text-right"},Xf={key:0,class:"text-xs text-gray-400 ml-1"},em={key:1,class:"flex items-center space-x-2"},tm={class:"flex items-center justify-between py-2 border-b border-gray-100"},sm={class:"flex-1 text-right"},am={key:1,class:"flex items-center space-x-2"},rm={class:"flex items-center justify-between py-2 border-b border-gray-100"},om={class:"flex-1 text-right"},nm={key:0,class:"text-xs text-gray-400 ml-1"},lm={key:1,class:"flex items-center space-x-2"},im={class:"flex items-center justify-between py-2 border-b border-gray-100"},um={class:"text-gray-700"},dm={class:"flex items-start py-2 border-b border-gray-100"},cm={class:"flex-1 flex flex-wrap gap-2"},fm={key:0,class:"text-gray-500 text-sm"},mm={class:"bg-white p-4 rounded-lg shadow-sm"},hm={class:"flex justify-between items-center mb-4 border-b pb-2"},vm={key:0,class:"space-y-3"},pm={class:"text-sm text-gray-700"},gm={class:"text-xs text-gray-500 mt-1"},ym={key:1,class:"text-gray-500 text-sm py-2"},km={class:"bg-white p-4 rounded-lg shadow-sm"},_m={key:3,class:"text-center py-8 text-gray-500"},wm={key:4,class:"mt-4 flex flex-col items-center"},bm={key:0,class:"text-xs text-red-500 mt-1"},xm={class:"p-6"},Sm={class:"mb-4"},Mm={class:"flex justify-end space-x-3"},Dm={__name:"TaskDetailSidebar",props:{taskId:{type:Number,required:!0},projectId:{type:Number,required:!0},projectUsers:{type:Array,default:()=>[]}},emits:["close","task-updated","task-deleted"],setup(e,{emit:t}){const s=e,r=t,a=N(null),o=N(!0),n=N(""),u=N(!1),c=N(!1),d=N(!1),p=N(null),g=N(null),C=N(null),U=N([]),O=N(!1),w=[{value:"low",label:"Low"},{value:"medium",label:"Medium"},{value:"high",label:"High"}],M=N(!1),y=N(!1),f=N([{name:"",completed:!1}]),h=N(!1),_=async()=>{o.value=!0,n.value="";try{const R=await window.axios.get(`/api/tasks/${s.taskId}`);a.value=R.data,p.value=a.value.assigned_to_id||null,g.value=a.value.due_date||null,C.value=a.value.priority||"medium",$()}catch(R){n.value="Failed to load task details.",console.error("Error fetching task details:",R)}finally{o.value=!1}},$=async()=>{O.value=!0;try{const R=await window.axios.get("/api/activities",{params:{subject_type:"App\\Models\\Task",subject_id:s.taskId}});U.value=R.data}catch(R){console.error("Error fetching task activities:",R)}finally{O.value=!1}};me(()=>s.taskId,R=>{R?_():a.value=null},{immediate:!0});const W=B(()=>s.projectUsers.map(R=>({value:R.id,label:R.name}))),re=async()=>{if(!a.value||p.value===a.value.assigned_to_id){u.value=!1;return}try{const R=await window.axios.patch(`/api/tasks/${a.value.id}`,{assigned_to_user_id:p.value});a.value=R.data,r("task-updated",a.value)}catch(R){console.error("Error updating assigned user:",R),p.value=a.value.assigned_to_id,fe("Failed to update assigned user. Please try again.")}finally{u.value=!1}},Ee=async()=>{if(!a.value||g.value===a.value.due_date){c.value=!1;return}try{const R=await window.axios.patch(`/api/tasks/${a.value.id}`,{due_date:g.value});a.value=R.data,r("task-updated",a.value)}catch(R){console.error("Error updating due date:",R),g.value=a.value.due_date,fe("Failed to update due date. Please try again.")}finally{c.value=!1}},X=async()=>{if(!a.value||C.value===a.value.priority){d.value=!1;return}try{const R=await window.axios.patch(`/api/tasks/${a.value.id}`,{priority:C.value});a.value=R.data,r("task-updated",a.value)}catch(R){console.error("Error updating priority:",R),C.value=a.value.priority,fe("Failed to update priority. Please try again.")}finally{d.value=!1}},V=()=>{M.value=!0},Q=()=>{_(),M.value=!1},K=async()=>{try{await bf(a.value),r("task-deleted",a.value.id),r("close")}catch(R){console.error("Error deleting task:",R)}},Ce=async()=>{try{a.value=await vf(a.value),r("task-updated",a.value),$()}catch(R){console.error("Error starting task:",R)}},ur=async()=>{try{a.value=await pf(a.value),r("task-updated",a.value),$()}catch(R){console.error("Error pausing task:",R)}},dr=async()=>{try{a.value=await gf(a.value),r("task-updated",a.value),$()}catch(R){console.error("Error resuming task:",R)}},cr=async()=>{try{a.value=await yf(a.value),r("task-updated",a.value),$()}catch(R){console.error("Error completing task:",R)}},fr=async()=>{try{a.value=await wf(a.value),r("task-updated",a.value),$()}catch(R){console.error("Error revising task:",R)}},mr=()=>{var R;y.value=!y.value,y.value&&((R=a.value.details)!=null&&R.checklist&&a.value.details.checklist.length>0?(f.value=JSON.parse(JSON.stringify(a.value.details.checklist)),f.value[f.value.length-1].name!==""&&f.value.push({name:"",completed:!1})):f.value=[{name:"",completed:!1}])},hr=async()=>{if(!h.value){h.value=!0;try{const R=f.value.filter(tt=>tt.name.trim()!==""),S={details:{...a.value.details,checklist:R}},et=await window.axios.patch(`/api/tasks/${a.value.id}`,S);a.value=et.data,y.value=!1,we("Checklist saved successfully"),r("task-updated",a.value)}catch(R){console.error("Error saving checklist:",R),fe("Failed to save checklist")}finally{h.value=!1}}},yt=N(!1),nt=N(""),vr=()=>{nt.value="",yt.value=!0},pr=async()=>{if(!nt.value.trim()){ye("Please provide a reason for blocking the task");return}try{a.value=await kf(a.value,nt.value),we("Task blocked successfully"),r("task-updated",a.value),$(),yt.value=!1}catch(R){console.error("Error blocking task:",R)}},gr=async()=>{try{a.value=await _f(a.value),r("task-updated",a.value),$()}catch(R){console.error("Error unblocking task:",R)}},yr=B(()=>a.value?xf(a.value.status):""),cs=B(()=>{var S,et,tt,kt;if(!U.value||((S=a.value)==null?void 0:S.status)!=="Blocked")return null;const R=U.value.find(_t=>{var wt,bt;return _t.event==="updated"&&((bt=(wt=_t.properties)==null?void 0:wt.attributes)==null?void 0:bt.status)==="Blocked"});return R?(console.log(R.properties),{causer:((et=R.causer)==null?void 0:et.name)||"Unknown",reason:((kt=(tt=R.properties)==null?void 0:tt.attributes)==null?void 0:kt.block_reason)||"No reason provided."}):null});return(R,S)=>{var et,tt,kt,_t,wt,bt,Js;return i(),m("div",null,[o.value?(i(),m("div",Cf," Loading task details... ")):n.value?(i(),m("div",$f,P(n.value),1)):a.value?(i(),m("div",Yf,[l("div",Of,[l("h4",Nf,P(a.value.name),1),l("div",Pf,[l("span",{class:L(["px-2 py-1 rounded-full text-xs font-medium",yr.value])},P(a.value.status),3),a.value.task_type?(i(),m("span",If," | "+P((et=a.value.task_type)==null?void 0:et.name)+" | ",1)):k("",!0),S[14]||(S[14]=l("br",null,null,-1)),(tt=a.value.milestone)!=null&&tt.name?(i(),m("span",Af,P((kt=a.value.milestone)==null?void 0:kt.name),1)):k("",!0)]),l("p",Ef,P(a.value.description||"No description provided."),1),l("div",Rf,[a.value.status==="To Do"?(i(),A(ve,{key:0,onClick:Ce,class:"bg-blue-600 hover:bg-blue-700"},{default:x(()=>S[15]||(S[15]=[D(" Start Task ",-1)])),_:1,__:[15]})):a.value.status==="In Progress"?(i(),A(ve,{key:1,onClick:ur,class:"bg-orange-600 hover:bg-orange-700"},{default:x(()=>S[16]||(S[16]=[D(" Pause Task ",-1)])),_:1,__:[16]})):a.value.status==="Paused"?(i(),A(ve,{key:2,onClick:dr,class:"bg-blue-600 hover:bg-blue-700"},{default:x(()=>S[17]||(S[17]=[D(" Resume Task ",-1)])),_:1,__:[17]})):a.value.status==="Blocked"?(i(),A(ve,{key:3,onClick:gr,class:"bg-green-600 hover:bg-green-700"},{default:x(()=>S[18]||(S[18]=[D(" Unblock Task ",-1)])),_:1,__:[18]})):k("",!0),a.value.status==="To Do"||a.value.status==="In Progress"||a.value.status==="Paused"?(i(),A(ve,{key:4,onClick:vr,class:"bg-red-600 hover:bg-red-700"},{default:x(()=>S[19]||(S[19]=[D(" Block Task ",-1)])),_:1,__:[19]})):k("",!0),a.value.status==="In Progress"?(i(),A(ve,{key:5,onClick:cr,class:"bg-green-600 hover:bg-green-700"},{default:x(()=>S[20]||(S[20]=[D(" Complete Task ",-1)])),_:1,__:[20]})):k("",!0),a.value.status==="Done"?(i(),A(ve,{key:6,onClick:fr,class:"bg-yellow-600 hover:bg-yellow-700"},{default:x(()=>S[21]||(S[21]=[D(" Revise Task ",-1)])),_:1,__:[21]})):k("",!0)]),a.value.status==="Done"?(i(),m("div",Uf,' Revising will change the task status back to "To Do" ')):k("",!0)]),a.value.status==="Blocked"&&cs.value?(i(),m("div",jf,[l("div",Wf,[S[23]||(S[23]=l("div",{class:"flex-shrink-0"},[l("svg",{class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[l("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.487 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11.75 13a.75.75 0 01-1.5 0v-2.25a.75.75 0 011.5 0V13zm-1.5-7.5a.75.75 0 011.5 0v1.5a.75.75 0 01-1.5 0V5.5z","clip-rule":"evenodd"})])],-1)),l("div",Vf,[S[22]||(S[22]=l("h3",{class:"text-sm font-medium text-yellow-800"},"Task Blocked",-1)),l("div",Lf,[l("p",null,"This task was blocked by **"+P(cs.value.causer)+"** with the following reason:",1),l("p",null,P(cs.value.reason),1)])])])])):k("",!0),l("div",Ff,[l("div",Hf,[S[24]||(S[24]=l("h5",{class:"text-lg font-semibold text-gray-800"},"Task Checklist",-1)),l("button",{onClick:mr,class:"text-indigo-600 hover:text-indigo-800 text-sm font-medium flex items-center"},[y.value?(i(),m("span",zf,"Cancel")):(i(),m("span",Bf,P((_t=a.value.details)!=null&&_t.checklist&&a.value.details.checklist.length>0?"Edit Checklist":"Add Checklist"),1))])]),y.value?(i(),m("div",Gf,[v(Tf,{modelValue:f.value,"onUpdate:modelValue":S[0]||(S[0]=Z=>f.value=Z),placeholder:"e.g., Review design, Update documentation",label:"Checklist Items",density:"notes"},null,8,["modelValue"]),l("div",qf,[v(ve,{onClick:hr,disabled:h.value,class:"flex items-center space-x-1"},{default:x(()=>[v(I(bl),{class:"h-4 w-4"}),S[25]||(S[25]=l("span",null,"Save Checklist",-1))]),_:1,__:[25]},8,["disabled"])])])):k("",!0),(wt=a.value.details)!=null&&wt.checklist&&a.value.details.checklist.length>0&&!y.value?(i(),A(Mf,{key:1,items:a.value.details.checklist,"api-endpoint":`/api/tasks/${a.value.id}`,title:"Items to complete:","payload-transformer":Z=>({details:{...a.value.details,checklist:Z}})},null,8,["items","api-endpoint","payload-transformer"])):k("",!0),(!((bt=a.value.details)!=null&&bt.checklist)||a.value.details.checklist.length===0)&&!y.value?(i(),m("div",Zf,' No checklist items for this task yet. Click "Add Checklist" to create one. ')):k("",!0)]),l("div",Jf,[S[32]||(S[32]=l("h5",{class:"text-lg font-semibold text-gray-800 border-b pb-2 mb-4"},"Task Attributes",-1)),l("div",Qf,[v(q,{class:"min-w-[100px] text-gray-600"},{default:x(()=>S[26]||(S[26]=[D("Assigned To:",-1)])),_:1,__:[26]}),l("div",Kf,[u.value?(i(),m("div",em,[v($e,{id:"edit-assigned-to",modelValue:p.value,"onUpdate:modelValue":S[2]||(S[2]=Z=>p.value=Z),options:W.value,"value-key":"value","label-key":"label",placeholder:"Unassigned",class:"mt-1 flex-1","allow-empty":!0},null,8,["modelValue","options"]),l("button",{onClick:re,class:"text-green-600 hover:text-green-800 text-sm font-medium"},"Save"),l("button",{onClick:S[3]||(S[3]=Z=>u.value=!1),class:"text-gray-600 hover:text-gray-800 text-sm font-medium"},"Cancel")])):(i(),m("div",{key:0,onClick:S[1]||(S[1]=Z=>a.value.status!=="Done"?u.value=!0:ye("Cannot change assignment for a completed task. Use the Revise button to change the task status first.")),class:L(["cursor-pointer",{"text-indigo-600 hover:text-indigo-800":a.value.status!=="Done","text-gray-500":a.value.status==="Done"}])},[D(P(((Js=a.value.assigned_to)==null?void 0:Js.name)||"Unassigned")+" ",1),a.value.status!=="Done"?(i(),m("span",Xf,"(Click to edit)")):k("",!0)],2))])]),l("div",tm,[v(q,{class:"min-w-[100px] text-gray-600"},{default:x(()=>S[27]||(S[27]=[D("Due Date:",-1)])),_:1,__:[27]}),l("div",sm,[c.value?(i(),m("div",am,[v(Oe,{id:"edit-due-date",modelValue:g.value,"onUpdate:modelValue":S[5]||(S[5]=Z=>g.value=Z),type:"date",class:"mt-1 flex-1"},null,8,["modelValue"]),l("button",{onClick:Ee,class:"text-green-600 hover:text-green-800 text-sm font-medium"},"Save"),l("button",{onClick:S[6]||(S[6]=Z=>c.value=!1),class:"text-gray-600 hover:text-gray-800 text-sm font-medium"},"Cancel")])):(i(),m("div",{key:0,onClick:S[4]||(S[4]=Z=>c.value=!0),class:"cursor-pointer text-indigo-600 hover:text-indigo-800"},[D(P(a.value.due_date?I(T)(a.value.due_date).format("MMM D, YYYY"):"No Due Date")+" ",1),S[28]||(S[28]=l("span",{class:"text-xs text-gray-400 ml-1"},"(Click to edit)",-1))]))])]),l("div",rm,[v(q,{class:"min-w-[100px] text-gray-600"},{default:x(()=>S[29]||(S[29]=[D("Priority:",-1)])),_:1,__:[29]}),l("div",om,[d.value?(i(),m("div",lm,[v($e,{id:"edit-priority",modelValue:C.value,"onUpdate:modelValue":S[8]||(S[8]=Z=>C.value=Z),options:w,"value-key":"value","label-key":"label",placeholder:"Select priority",class:"mt-1 flex-1"},null,8,["modelValue"]),l("button",{onClick:X,class:"text-green-600 hover:text-green-800 text-sm font-medium"},"Save"),l("button",{onClick:S[9]||(S[9]=Z=>d.value=!1),class:"text-gray-600 hover:text-gray-800 text-sm font-medium"},"Cancel")])):(i(),m("div",{key:0,onClick:S[7]||(S[7]=Z=>a.value.status!=="Done"?d.value=!0:ye("Cannot change priority for a completed task. Use the Revise button to change the task status first.")),class:L(["cursor-pointer",{"text-indigo-600 hover:text-indigo-800":a.value.status!=="Done","text-gray-500":a.value.status==="Done"}])},[l("span",{class:L({"text-red-600 font-medium":a.value.priority==="high","text-yellow-600 font-medium":a.value.priority==="medium","text-green-600 font-medium":a.value.priority==="low"})},P(a.value.priority?a.value.priority.charAt(0).toUpperCase()+a.value.priority.slice(1):"Medium"),3),a.value.status!=="Done"?(i(),m("span",nm,"(Click to edit)")):k("",!0)],2))])]),l("div",im,[v(q,{class:"min-w-[100px] text-gray-600"},{default:x(()=>S[30]||(S[30]=[D("Created:",-1)])),_:1,__:[30]}),l("span",um,P(a.value.created_at?new Date(a.value.created_at).toLocaleDateString():"N/A"),1)]),l("div",dm,[v(q,{class:"min-w-[100px] text-gray-600 mt-1"},{default:x(()=>S[31]||(S[31]=[D("Tags:",-1)])),_:1,__:[31]}),l("div",cm,[(i(!0),m(ie,null,ue(a.value.tags,Z=>(i(),m("span",{key:Z.id,class:"inline-flex items-center px-3 py-1 text-sm font-medium bg-indigo-100 text-indigo-800 rounded-full shadow-sm"},P(Z.name),1))),128)),!a.value.tags||a.value.tags.length===0?(i(),m("span",fm,"No tags")):k("",!0)])])]),l("div",mm,[l("div",hm,[S[34]||(S[34]=l("h5",{class:"text-lg font-semibold text-gray-800"},"Notes",-1)),v(ve,{onClick:V,class:"bg-indigo-600 hover:bg-indigo-700 transition-colors"},{default:x(()=>S[33]||(S[33]=[D(" Add Note ",-1)])),_:1,__:[33]})]),a.value.notes&&a.value.notes.length>0?(i(),m("div",vm,[(i(!0),m(ie,null,ue(a.value.notes,Z=>(i(),m("div",{key:Z.id,class:"p-3 bg-gray-50 rounded-md"},[l("p",pm,P(Z.content),1),l("p",gm," By "+P(Z.creator_name||"Unknown")+" on "+P(new Date(Z.created_at).toLocaleDateString()),1)]))),128))])):(i(),m("div",ym,"No notes for this task yet."))]),l("div",km,[S[35]||(S[35]=l("h5",{class:"text-lg font-semibold text-gray-800 border-b pb-2 mb-4"},"History",-1)),v(hf,{activities:U.value,loading:O.value},null,8,["activities","loading"])])])):(i(),m("div",_m," Select a task to view details. ")),a.value&&a.value.status!=="Done"?(i(),m("div",wm,[v(Ts,{onClick:K,disabled:a.value.status!=="To Do"},{default:x(()=>S[36]||(S[36]=[D(" Delete Task ",-1)])),_:1,__:[36]},8,["disabled"]),a.value.status!=="To Do"?(i(),m("p",bm,"Task can only be deleted in 'To Do' status.")):k("",!0)])):k("",!0),v(af,{show:M.value,"task-for-note":a.value,onClose:S[10]||(S[10]=Z=>M.value=!1),onNoteAdded:Q},null,8,["show","task-for-note"]),v(Ds,{show:yt.value,onClose:S[13]||(S[13]=Z=>yt.value=!1)},{default:x(()=>[l("div",xm,[S[40]||(S[40]=l("h2",{class:"text-lg font-medium text-gray-900 mb-4"}," Block Task ",-1)),l("div",Sm,[S[37]||(S[37]=l("p",{class:"text-sm text-gray-600 mb-2"}," Please provide a reason for blocking this task: ",-1)),ce(l("textarea",{"onUpdate:modelValue":S[11]||(S[11]=Z=>nt.value=Z),class:"w-full rounded-md shadow-sm border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",rows:"3",placeholder:"Enter reason for blocking..."},null,512),[[Le,nt.value]])]),l("div",Mm,[v(Ct,{onClick:S[12]||(S[12]=Z=>yt.value=!1)},{default:x(()=>S[38]||(S[38]=[D(" Cancel ",-1)])),_:1,__:[38]}),v(ve,{onClick:pr,disabled:!nt.value.trim(),class:"bg-red-600 hover:bg-red-700"},{default:x(()=>S[39]||(S[39]=[D(" Block Task ",-1)])),_:1,__:[39]},8,["disabled"])])])]),_:1},8,["show"])])}}},Tm={key:1,class:"p-4 text-gray-500"},Cm={key:0,class:"flex justify-end space-x-3"},$m={__name:"TaskSidebar",emits:["taskUpdated","taskDeleted"],setup(e){const t=N(null);return(s,r)=>(i(),A(va,{show:I(qe).show,"onUpdate:show":I(fs),title:I(qe).taskId?"Task Details":"Details",initialWidth:50},{content:x(()=>[I(qe).taskId?(i(),A(Dm,{key:0,"task-id":I(qe).taskId,"project-id":I(qe).projectId,"project-users":I(qe).projectUsers,ref_key:"taskDetailSidebarRef",ref:t,onClose:I(fs),onTaskUpdated:r[0]||(r[0]=a=>{s.$emit("taskUpdated",a)}),onTaskDeleted:r[1]||(r[1]=a=>{s.$emit("taskDeleted",a),I(fs)()})},null,8,["task-id","project-id","project-users","onClose"])):I(qe).show?(i(),m("div",Tm," No task selected or task ID is missing. ")):k("",!0)]),footer:x(()=>[I(qe).taskId?(i(),m("div",Cm,[t.value&&t.value.task&&t.value.task.status!=="In Progress"&&t.value.task.status!=="Done"?(i(),A(Ct,{key:0,onClick:t.value.startTask,class:"bg-blue-50 text-blue-700 hover:bg-blue-100"},{default:x(()=>r[2]||(r[2]=[D(" Start Task ",-1)])),_:1,__:[2]},8,["onClick"])):k("",!0),t.value&&t.value.task&&t.value.task.status==="In Progress"?(i(),A(Ct,{key:1,onClick:t.value.completeTask,class:"bg-green-50 text-green-700 hover:bg-green-100"},{default:x(()=>r[3]||(r[3]=[D(" Complete Task ",-1)])),_:1,__:[3]},8,["onClick"])):k("",!0),t.value&&t.value.task?(i(),A(Ts,{key:2,onClick:t.value.deleteTask,class:"bg-red-50 text-red-700 hover:bg-red-100"},{default:x(()=>r[4]||(r[4]=[D(" Delete Task ",-1)])),_:1,__:[4]},8,["onClick"])):k("",!0)])):k("",!0)]),_:1},8,["show","onUpdate:show","title"]))}},Ym={class:"flex h-screen overflow-hidden"},Om={class:"flex-1 flex flex-col overflow-hidden"},Nm={key:0,class:"bg-white shadow"},Pm={class:"mx-auto max-w-7xl px-4 py-6 sm:px-6 lg:px-8"},Im={class:"flex-1 overflow-y-auto"},Km={__name:"AuthenticatedLayout",setup(e){const t=N(!1),s=N(!1),r=N(!1),a=N([]),o=N(!0),n=B(()=>It().props.id||null),u=N(null),c=async()=>{const M=localStorage.getItem("authToken");if(M){window.axios.defaults.headers.common.Authorization=`Bearer ${M}`;try{await window.axios.get("/api/user")}catch(y){y.response&&y.response.status===401&&(console.log("Session expired, redirecting to login"),localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization,window.location.href="/login")}}else delete window.axios.defaults.headers.common.Authorization},d=()=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization},p=M=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail"),localStorage.removeItem("remembered"),delete window.axios.defaults.headers.common.Authorization,window.location.href="/login"},g=async()=>{o.value=!0;try{const M=await window.axios.get("/api/projects-simplified");a.value=M.data}catch(M){console.error("Error fetching all projects for sidebar:",M),a.value=[]}finally{o.value=!1}},C=M=>{Dr.visit(route("projects.show",M))},U=B(()=>Tt.value.notifications.filter(M=>!M.isRead).length),O=M=>{console.log("Task updated globally.",M)},w=M=>{console.log("Task deleted globally.",M)};return Pt(()=>{c(),u.value&&Sr(u.value),g(),Mr()}),(M,y)=>(i(),m("div",Ym,[v(qr,{ref_key:"standardNotificationContainerRef",ref:u},null,512),v(Hr,{"sidebar-is-open":I(Tt).show},null,8,["sidebar-is-open"]),v(Do),v(vl,{"all-projects":a.value,"active-project-id":n.value,onProjectSelected:C},null,8,["all-projects","active-project-id"]),l("div",Om,[v(jl,{"unread-notification-count":U.value,onOpenCreateTaskModal:y[0]||(y[0]=f=>s.value=!0),onOpenAddResource:y[1]||(y[1]=f=>r.value=!0),onOpenNotificationsSidebar:I(Ks)},null,8,["unread-notification-count","onOpenNotificationsSidebar"]),v(ql,{"showing-navigation-dropdown":t.value,"unread-notification-count":U.value,onOpenCreateTaskModal:y[2]||(y[2]=f=>s.value=!0),onOpenAddResource:y[3]||(y[3]=f=>r.value=!0),onOpenNotificationsSidebar:I(Ks),onLogoutSuccess:d,onLogoutError:p},null,8,["showing-navigation-dropdown","unread-notification-count","onOpenNotificationsSidebar"]),M.$slots.header?(i(),m("header",Nm,[l("div",Pm,[Ne(M.$slots,"header")])])):k("",!0),l("main",Im,[Ne(M.$slots,"default")]),v(dn,{show:s.value,onClose:y[4]||(y[4]=f=>s.value=!1),onSaved:y[5]||(y[5]=f=>s.value=!1)},null,8,["show"]),v(hn,{"api-endpoint":"/api/shareable-resources",show:r.value,onClose:y[6]||(y[6]=f=>r.value=!1)},null,8,["show"])]),v($m,{onTaskUpdated:O,onTaskDeleted:w}),v(jn)]))}};export{Xt as B,hn as C,ha as T,Km as _,bo as a,Qm as b,Jm as c,yf as d,bf as e,Gm as f,xf as g,wf as h,kf as i,Mf as j,Tf as k,T as l,ia as m,Zo as n,af as o,pf as p,qm as q,gf as r,vf as s,dn as t,_f as u,Zm as v};
