import{_ as $}from"./AuthenticatedLayout-Be7_OTAN.js";import{r as d,A as B,h as s,o as a,e as u,u as f,q as F,a as g,b as t,g as N,t as l,k as n,F as w,i as C,S as T,m as D}from"./app-DaTLmF6T.js";import{_ as M}from"./NotesModal-D2onUYJH.js";import"./ApplicationLogo-Bw7cz6qK.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./SecondaryButton-CmeBmfuE.js";import"./TextInput-B5TNuEGy.js";import"./InputError-B77Jqksi.js";import"./PrimaryButton-Cfz9HMCn.js";const L={class:"py-12"},Y={class:"mx-auto max-w-7xl sm:px-6 lg:px-8 space-y-6"},q={class:"overflow-hidden bg-white shadow-sm sm:rounded-lg"},z={class:"p-6 text-gray-900"},I={class:"flex justify-between items-center"},G={class:"mt-1 text-sm text-gray-600"},H={class:"font-bold"},J={key:0,class:"mt-4"},K={key:0,class:"text-sm text-gray-500"},O={key:1,class:"text-sm text-red-500"},Q={key:2,class:"text-sm text-gray-500"},R={key:3,class:"mt-3"},U={class:"min-w-full divide-y divide-gray-200"},W={class:"bg-white divide-y divide-gray-200"},X={class:"px-3 py-2 whitespace-nowrap text-sm"},Z={class:"px-3 py-2 whitespace-nowrap text-sm capitalize"},tt={class:"px-3 py-2 whitespace-nowrap text-sm"},et={class:"flex space-x-2"},st=["onClick"],at={class:"overflow-hidden bg-white shadow-sm sm:rounded-lg"},ot={class:"p-6 text-gray-900"},lt={class:"flex justify-between items-center"},it={class:"mt-1 text-sm text-gray-600"},dt={class:"font-bold"},nt={key:0,class:"mt-4"},rt={key:0,class:"text-sm text-gray-500"},ct={key:1,class:"text-sm text-red-500"},pt={key:2,class:"text-sm text-gray-500"},ut={key:3,class:"mt-3"},xt={class:"min-w-full divide-y divide-gray-200"},mt={class:"bg-white divide-y divide-gray-200"},ht={class:"px-3 py-2 whitespace-nowrap text-sm"},gt={class:"px-3 py-2 whitespace-nowrap text-sm"},vt={class:"px-3 py-2 whitespace-nowrap text-sm"},yt={class:"px-3 py-2 whitespace-nowrap text-sm"},_t={class:"px-3 py-2 whitespace-nowrap text-sm"},ft={class:"flex space-x-2"},Pt={__name:"Dashboard",props:{projectCount:Number},setup(A){const x=d([]),v=d(!0),m=d(""),r=d(!1),c=d({total_due_tasks:0,projects:[]}),y=d(!1),h=d(""),p=d(!1),_=d(!1),k=d(null),b=async()=>{v.value=!0,m.value="";try{const i=await D.get("/api/projects-simplified");x.value=i.data}catch(i){m.value="Failed to load projects",console.error("Error fetching projects:",i)}finally{v.value=!1}},j=async()=>{y.value=!0,h.value="";try{const i=await D.get("/api/task-statistics");c.value=i.data}catch(i){h.value="Failed to load task statistics",console.error("Error fetching task statistics:",i)}finally{y.value=!1}},E=()=>{r.value=!r.value,r.value&&x.value.length===0&&b()},P=()=>{p.value=!p.value,p.value&&c.value.projects.length===0&&j()},S=i=>{k.value=i,_.value=!0},V=()=>{b()};return B(()=>{j()}),(i,e)=>(a(),s(w,null,[u(f(F),{title:"Dashboard"}),u($,null,{header:g(()=>e[1]||(e[1]=[t("h2",{class:"text-xl font-semibold leading-tight text-gray-800"}," Dashboard ",-1)])),default:g(()=>[t("div",L,[t("div",Y,[t("div",q,[t("div",z,[t("div",I,[e[2]||(e[2]=t("h3",{class:"text-lg font-medium text-gray-900"},"Projects",-1)),t("button",{onClick:E,class:"text-sm text-blue-600 hover:text-blue-800"},l(r.value?"Collapse":"Expand"),1)]),t("p",G,[e[3]||(e[3]=n(" You have access to ")),t("span",H,l(A.projectCount),1),e[4]||(e[4]=n(" project(s). "))]),r.value?(a(),s("div",J,[v.value?(a(),s("div",K,"Loading projects...")):m.value?(a(),s("div",O,l(m.value),1)):x.value.length===0?(a(),s("div",Q,"No projects found.")):(a(),s("div",R,[t("table",U,[e[6]||(e[6]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Name"),t("th",{scope:"col",class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),t("th",{scope:"col",class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),t("tbody",W,[(a(!0),s(w,null,C(x.value,o=>(a(),s("tr",{key:o.id},[t("td",X,l(o.name),1),t("td",Z,l(o.status.replace("_"," ")),1),t("td",tt,[t("div",et,[u(f(T),{href:`/projects/${o.id}`,class:"text-xs bg-blue-500 hover:bg-blue-700 text-white py-1 px-2 rounded"},{default:g(()=>e[5]||(e[5]=[n(" View ")])),_:2,__:[5]},1032,["href"]),t("button",{onClick:wt=>S(o.id),class:"text-xs bg-purple-500 hover:bg-purple-700 text-white py-1 px-2 rounded"}," Notes ",8,st)])])]))),128))])])]))])):N("",!0)])]),t("div",at,[t("div",ot,[t("div",lt,[e[7]||(e[7]=t("h3",{class:"text-lg font-medium text-gray-900"},"Due Tasks",-1)),t("button",{onClick:P,class:"text-sm text-blue-600 hover:text-blue-800"},l(p.value?"Collapse":"Expand"),1)]),t("p",it,[e[8]||(e[8]=n(" You have ")),t("span",dt,l(c.value.total_due_tasks),1),e[9]||(e[9]=n(" task(s) due. "))]),p.value?(a(),s("div",nt,[y.value?(a(),s("div",rt,"Loading tasks...")):h.value?(a(),s("div",ct,l(h.value),1)):c.value.projects.length===0?(a(),s("div",pt,"No due tasks found.")):(a(),s("div",ut,[t("table",xt,[e[11]||(e[11]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Project Name"),t("th",{scope:"col",class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Due Tasks"),t("th",{scope:"col",class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Due Today"),t("th",{scope:"col",class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Assigned Me"),t("th",{scope:"col",class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),t("tbody",mt,[(a(!0),s(w,null,C(c.value.projects,o=>(a(),s("tr",{key:o.id},[t("td",ht,l(o.name),1),t("td",gt,l(o.due_tasks),1),t("td",vt,l(o.due_today),1),t("td",yt,l(o.assigned_to_me),1),t("td",_t,[t("div",ft,[u(f(T),{href:`/projects/${o.id}`,class:"text-xs bg-blue-500 hover:bg-blue-700 text-white py-1 px-2 rounded"},{default:g(()=>e[10]||(e[10]=[n(" View ")])),_:2,__:[10]},1032,["href"])])])]))),128))])])]))])):N("",!0)])]),e[12]||(e[12]=t("div",{class:"overflow-hidden bg-white shadow-sm sm:rounded-lg"},[t("div",{class:"p-6 text-gray-900"},[t("h3",{class:"text-lg font-medium text-gray-900"},"Notice Board"),t("p",{class:"mt-1 text-sm text-gray-600"}," No new announcements at this time. ")])],-1))])]),u(M,{show:_.value,"project-id":k.value,onClose:e[0]||(e[0]=o=>_.value=!1),onNoteAdded:V},null,8,["show","project-id"])]),_:1})],64))}};export{Pt as default};
