import{c as u,a as n,o as s,b as o,d as _,q as p,v as S,C,F as B,l as D,w as T,t as m,u as g,L as I}from"./app-cfLvAf14.js";import{u as N}from"./presentationStore-wusgPqPc.js";import P from"./ContentBlockForm-DT4GiyOA.js";import{d as F}from"./vuedraggable.umd-trxb5Vxj.js";import V from"./BlockToolbox-xfqF9rlp.js";import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./presentationsApi-BCql753M.js";import"./debounce-C-hnF4Z3.js";import"./TiptapEditor-i8TZ0kkO.js";import"./IconPicker-CRST8EFf.js";import"./index-NwqWWDUC.js";const A={class:"bg-white rounded-lg shadow-md h-full flex flex-col"},E={key:0,class:"text-gray-500 text-center py-10"},W={key:1,class:"flex flex-col h-full"},L={class:"flex flex-col h-full"},$={class:"flex gap-4 items-center p-6 bg-white sticky top-0 z-10 shadow-sm border-b"},j=["value"],H={class:"border border-gray-200 rounded-lg p-4 bg-gray-50 hover:shadow-md transition-shadow duration-200",role:"listitem"},M={class:"flex justify-between mb-3 items-center"},q={class:"flex items-center gap-3"},z={class:"font-bold drag-handle cursor-move text-gray-700"},O={key:0,class:"text-xs text-gray-500"},R={key:1,class:"text-xs text-green-600"},G={class:"flex gap-2"},J=["onClick"],K=["onClick"],Q={__name:"SlideEditor",setup(X){const i=N(),l=u(()=>i.selectedSlide||{content_blocks:[]}),f=["IntroCover","ThreeColumn","FourColumn","TwoColumnWithImageRight","TwoColumnWithImageLeft","FourStepProcess","ThreeStepProcess","TwoColumnWithChart","ProjectDetails","CallToAction","Default","Heading"],c=u({get(){var e;return((e=l.value)==null?void 0:e.template_name)||"Default"},set(e){l.value&&(l.value.template_name=e)}}),r=u({get:()=>l.value.content_blocks||[],set:e=>{l.value&&(l.value.content_blocks=Array.isArray(e)?e.slice():[],l.value.content_blocks.forEach((t,a)=>{t&&(t.display_order=a+1)}))}});async function k(){var e;(e=l.value)!=null&&e.id&&await i.updateSlide(l.value.id,{title:l.value.title})}function b(){var t;if(!((t=l.value)!=null&&t.id))return;const e=c.value||"Default";i.updateSlide(l.value.id,{template_name:e})}async function h(e){var a;if(!((a=l.value)!=null&&a.id))return;const t={heading:{block_type:"heading",content_data:{text:"New Block Heading",level:2}},paragraph:{block_type:"paragraph",content_data:{text:"Lorem ipsum"}},feature_card:{block_type:"feature_card",content_data:{icon:"fa-star",title:"New Feature",description:"Description"}},image:{block_type:"image",content_data:{url:"",alt:"Image"}},step_card:{block_type:"step_card",content_data:{step_number:1,title:"New Step",description:"Description"}},slogan:{block_type:"slogan",content_data:{text:"New Slogan"}},pricing_table:{block_type:"pricing_table",content_data:{title:"Pricing",price:"$0",payment_schedule:["Item 1","Item 2"]}},timeline_table:{block_type:"timeline_table",content_data:{title:"Timeline",timeline:[{phase:"Phase 1",duration:"1 Week"}]}},details_list:{block_type:"details_list",content_data:{items:["Detail 1","Detail 2"]}},list_with_icons:{block_type:"list_with_icons",content_data:{items:["Item 1","Item 2"]}},feature_list:{block_type:"feature_list",content_data:{items:[{title:"Feature 1",description:"Description 1"}]}},image_block:{block_type:"image_block",content_data:{url:"",title:"New Image Block"}}};await i.addBlock(l.value.id,t[e])}function v(e,t){i.scheduleSaveBlock(e.id,t)}async function y(e){var t;(t=l.value)!=null&&t.id&&await i.addBlock(l.value.id,{block_type:e.block_type,content_data:{...e.content_data}})}async function x(e){await I("Delete this block?",{confirmText:"Delete",cancelText:"Cancel",type:"warning"})&&await i.deleteBlock(e.id)}async function w(){var t;if(!((t=l.value)!=null&&t.id))return;const e=r.value.map(a=>a.id);await i.reorderBlocks(l.value.id,e)}return(e,t)=>(s(),n("div",A,[l.value?(s(),n("div",W,[o("div",L,[o("div",$,[p(o("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>l.value.title=a),onChange:k,placeholder:"Slide title",class:"flex-1 border border-gray-200 rounded-lg p-2 focus:ring-2 focus:ring-indigo-500","aria-label":"Slide title"},null,544),[[S,l.value.title]]),p(o("select",{"onUpdate:modelValue":t[1]||(t[1]=a=>c.value=a),onChange:b,class:"border border-gray-200 rounded-lg p-2 text-sm bg-white focus:ring-2 focus:ring-indigo-500","aria-label":"Slide theme",title:"Slide Theme"},[(s(),n(B,null,D(f,a=>o("option",{key:a,value:a},m(a),9,j)),64))],544),[[C,c.value]]),_(V,{onAdd:h,types:["heading","paragraph","feature_card","image","step_card","slogan","pricing_table","timeline_table","details_list","list_with_icons","feature_list","image_block"],"aria-label":"Add content block"})]),_(g(F),{modelValue:r.value,"onUpdate:modelValue":t[2]||(t[2]=a=>r.value=a),"item-key":"id",class:"space-y-4 p-6 overflow-y-auto flex-1",handle:".drag-handle",onEnd:w,role:"list","aria-label":"Content blocks"},{item:T(({element:a})=>[o("div",H,[o("div",M,[o("div",q,[o("span",z,m(a.block_type),1),g(i).savingBlocks[a.id]?(s(),n("span",O,"Saving…")):(s(),n("span",R,"Saved ✓"))]),o("div",G,[o("button",{onClick:d=>y(a),class:"btn btn-xs","aria-label":"Duplicate block"},"Duplicate",8,J),o("button",{onClick:d=>x(a),class:"btn btn-xs text-red-500","aria-label":"Delete block"},"Delete",8,K)])]),_(P,{block:a,onUpdate:d=>v(a,d)},null,8,["block","onUpdate"])])]),_:1},8,["modelValue"])])])):(s(),n("div",E,"Select a slide"))]))}},re=U(Q,[["__scopeId","data-v-ad2aa8f4"]]);export{re as default};
